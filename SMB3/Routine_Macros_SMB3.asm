
;#############################################################################################################
;#############################################################################################################

macro SMB3Bank20Macros(StartBank, EndBank)
%BANK_START(<StartBank>)
SMB3_InitAndMainLoop_Main:
	JMP.w SMASSMB3Reset

SMB3_InitAndMainLoop_NMIVector:
	JMP.w SMB3_VBlankRoutine_Main

SMB3_InitAndMainLoop_IRQVector:
	JMP.w SMB3_IRQRoutine_Main

;--------------------------------------------------------------------

if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) == $00
UNK_208009:
	db $20,$20,$21,$21,$22,$22,$23,$23
	db $24,$24,$25,$25,$26,$26,$27,$27
	db $28,$28,$29,$29,$2A,$2A
endif

;--------------------------------------------------------------------

; Note: Overworld/Levels Main loop?

CODE_20801F:
	LDA.b $28
	STA.b !RAM_SMB3_Global_StripeImageDataLo
	ASL
	CLC
	ADC.b !RAM_SMB3_Global_StripeImageDataLo
	TAY
	PHB
	LDA.b #DATA_228B5C>>16
	PHA
	PLB
	LDA.w DATA_228B5C,y
	STA.b !RAM_SMB3_Global_StripeImageDataLo
	LDA.w DATA_228B5C+$01,y
	STA.b !RAM_SMB3_Global_StripeImageDataHi
	LDA.w DATA_228B5C+$02,y
	STA.b !RAM_SMB3_Global_StripeImageDataBank
	PLB
	LDA.b #$01
	STA.b $1C
	STZ.w !RAM_SMB3_Global_WaitForVBlankFlag
CODE_208044:
	LDA.w !RAM_SMB3_Global_WaitForVBlankFlag
	BPL.b CODE_208044
	STZ.b $1C
	CLI
	RTS

CODE_20804D:
	JSR.w CODE_20801F
	RTL

;--------------------------------------------------------------------

CODE_208051:
	LDA.b #$1F
	STA.l $7E3968
	LDA.b #$40
	STA.l $7E3969
	LDA.b #$01
	STA.w !RAM_SMB3_Global_LoadOverworldMusicBank
	STZ.w $0103
	LDA.b #$00
	STA.l $7FFF03
	LDA.b #$FF
	STA.l SMB3_StripeImageUploadTable[$00].LowByte
	STA.l SMB3_StripeImageUploadTable[$00].HighByte
	LDA.b #$001602
	STA.b !RAM_SMB3_Global_StripeImageDataLo
	LDA.b #$001602>>8
	STA.b !RAM_SMB3_Global_StripeImageDataHi
	INC.w !RAM_SMB3_Global_WaitForVBlankFlag
	LDA.b #$81
	STA.w !REGISTER_IRQNMIAndJoypadEnableFlags
	STA.w !REGISTER_ScreenDisplayRegister
	STA.b !RAM_SMB3_Global_ScreenDisplayRegisterMirror
	JSL.l SMB3_ResetSpriteOAMRt_Main
	JSR.w CODE_20F9EC
	LDA.b #$5C
	STA.b $00
	STZ.b $01
	JSR.w CODE_20FA0B
	LDA.b #$20
	STA.w !RAM_SMB3_Global_CurrentVBlankRoutinePath
	STA.w !RAM_SMB3_Global_CurrentRasterEffect
	LDA.b #$01
	STA.w $02D7
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) == $00
	LDA.b #!Define_SMB3_LevelMusic_TitleScreen
	STA.w !RAM_SMB3_Global_MusicCh1
endif
	JSR.w SMB3_ProcessTitleScreen_Main
	LDA.w !RAM_SMB3_TitleScreen_MenuSelectionIndex
	CMP.b #$03
	BNE.b CODE_2080B9
	JMP.w SMB3_BattleMode_BootUpBattleMode_Main

CODE_2080B9:
	JSL.l CODE_29A700
	STZ.w !RAM_SMB3_Overworld_CurrentProcess
	STZ.w !RAM_SMB3_NorSprXXX_GiantQuestionMarkBlock_BlockHitFlags
	STZ.w $1F2F
	LDA.b #$00
	STA.l $7E396E
	STA.l !RAM_SMB3_Overworld_UsedReserveAnchorFlag
	LDA.b #$F8
	STA.b $95
	LDA.l $7E3955
	INC
	STA.l $7E3955
	LDX.b #$7F
CODE_2080DF:
	STZ.w !RAM_SMB3_Overworld_LevelsClearedBits,x
	DEX
	BPL.b CODE_2080DF
CODE_2080E5:
	STZ.w !REGISTER_IRQNMIAndJoypadEnableFlags
	LDA.w !RAM_SMB3_Global_LoadOverworldMusicBank
	BEQ.b CODE_2080F1
	JSL.l SMB3_UploadMusicBank_Overworld
CODE_2080F1:
	STZ.w !RAM_SMB3_Global_LoadOverworldMusicBank
	JSL.l SMB3_ResetSpriteOAMRt_Main
	JSR.w CODE_20F9EC
	LDA.b #$FF
	STA.b $00
	STZ.b $01
	JSR.w CODE_20FA0B
	LDA.b #$0B
	STA.w $070B
	LDA.b #$35
	STA.w $070C
	STZ.w !RAM_SMB3_Global_TilesetFromHeader
	STZ.w $072C
	STZ.w $053C
	STZ.w !RAM_SMB3_Global_CurrentRasterEffect
	STZ.w $0351
	STZ.w $02CC
	STZ.w $02CD
	STZ.w $02CE
	STZ.w $02CF
	STZ.w !RAM_SMB3_Global_AnimatedFGTileAnimationFrameIndex
	STZ.w $02D9
	STZ.w $02E0
	STZ.w $02E1
	LDA.b #$00
	STA.l $7E3955
	STA.l $7FC522
	STA.l $7FC523
	STZ.w !RAM_SMB3_Level_ShakeLayer1YOffset
	LDA.b #$FF
	STA.w $07BF
	LDA.b #$04
	STA.w $070E
	STA.w $069A
	LDA.b #$28
	STA.w !RAM_SMB3_Level_WaitBeforeDecrementingTimer
	LDA.b #$03
	STA.w $0699
	LDA.b #$C0
	STA.w !RAM_SMB3_Global_CurrentVBlankRoutinePath
	LDA.b #SMB3_IndividualPlayerData[$00].Score-SMB3_IndividualPlayerData[$00].ReserveSlots
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	BEQ.b CODE_20816C
	CLC
	ADC.b #SMB3_IndividualPlayerData[$01].ReserveSlots-SMB3_IndividualPlayerData[$00].ReserveSlots
CODE_20816C:
	TAY
	LDX.b #$00
CODE_20816F:
	LDA.w SMB3_IndividualPlayerData[$00].ReserveSlots,y
	STA.w !RAM_SMB3_Level_Player_CurrentScoreHi,x
	INY
	INX
	CPX.b #$03
	BNE.b CODE_20816F
	LDX.w !RAM_SMB3_Global_TwoPlayerGameFlag
	DEX
CODE_20817F:
	LDA.l $7E3975,x
	STA.b !RAM_SMB3_Overworld_Mario_YPosLo,x
	LDA.l $7E3977,x
	STA.b !RAM_SMB3_Overworld_Mario_XPosHi,x
	LDA.l $7E3979,x
	STA.b !RAM_SMB3_Overworld_Mario_XPosLo,x
	LDA.l $7E397B,x
	STA.b !RAM_SMB3_Overworld_Mario_UnusedRAM2,x
	LDA.b #$20
	STA.b !RAM_SMB3_Overworld_Mario_UnusedRAM1,x
	DEX
	BPL.b CODE_20817F
	STZ.w !RAM_SMB3_Global_TilesetFromHeader
	STZ.w $0728
	STZ.b $20
	STZ.b $9A
	STZ.b !RAM_SMB3_Overworld_CurrentWarpWhistleState
	STZ.w $0711
	LDA.w $0103
	BEQ.b CODE_2081B5
	JMP.w CODE_208251

CODE_2081B5:
	REP.b #$20
	LDA.l $7FFB02
	STA.w !RAM_SMB3_Level_Player_MariosLives
	LDX.b #SMB3_IndividualPlayerData[$00].CardSlots-SMB3_IndividualPlayerData[$00].ReserveSlots-$02
CODE_2081C0:
	LDA.l $7FFBBC,x
	STA.w SMB3_IndividualPlayerData[$00].ReserveSlots,x
	DEX
	DEX
	BPL.b CODE_2081C0
	LDX.b #SMB3_IndividualPlayerData[$01].CardSlots-SMB3_IndividualPlayerData[$00].ReserveSlots-$02
CODE_2081CD:
	LDA.l $7FFBBC,x
	STA.w SMB3_IndividualPlayerData[$00].ReserveSlots,x
	DEX
	DEX
	CPX.b #SMB3_IndividualPlayerData[$01].ReserveSlots-SMB3_IndividualPlayerData[$00].ReserveSlots-$02
	BNE.b CODE_2081CD
	SEP.b #$20
	LDA.l !RAM_SMB3_Global_InitialWorld
	CMP.l !RAM_SMB3_Global_FurthestReachedWorld
	BEQ.b CODE_2081E9
	JMP.w CODE_20824E

CODE_2081E9:
	LDA.l $7FFC02
	STA.l $7E3971
	REP.b #$30
	LDX.w #$0036
CODE_2081F6:
	LDA.l $7FFB04,x
	STA.w !RAM_SMB3_Overworld_OWSpr_InitialYPosLo,x
	DEX
	DEX
CODE_2081FF:
	BPL.b CODE_2081F6
CODE_208201:
	LDX.w #$007E
CODE_208204:
	LDA.l $7FFB3C,x
	STA.w !RAM_SMB3_Overworld_LevelsClearedBits,x
	DEX
	DEX
	BPL.b CODE_208204
	LDX.w #$003E
	LDA.w !RAM_SMB3_Global_CurrentWorld
	AND.w #$00FF
	INC
	ASL
	ASL
	ASL
	ASL
	ASL
	ASL
	DEC
	DEC
	TAY
CODE_208222:
	LDA.w !RAM_SMB3_Overworld_LevelsClearedBits,x
	AND.w DATA_218000,y
	STA.w !RAM_SMB3_Overworld_LevelsClearedBits,x
	STA.w !RAM_SMB3_Overworld_LevelsClearedBits+$40,x
	DEY
	DEY
	DEX
	DEX
	BPL.b CODE_208222
	SEP.b #$30
	LDA.w !RAM_SMB3_Global_CurrentWorld				;\ Note: Some code that resets the position of the canoe sprite.
	CMP.b #$02							;| May cause issues with ROM hacks, since the game assumes the canoe is in slot 04.
	BNE.b CODE_20824E						;| Not to mention the possibility of using the canoe outside world 3.
	LDY.b #$04							;|
	LDA.b #$80							;|
	STA.w !RAM_SMB3_Overworld_OWSpr_InitialYPosLo,y			;|
	LDA.b #$50							;|
	STA.w !RAM_SMB3_Overworld_OWSpr_InitialXPosLo,y			;|
	LDA.b #$01							;|
	STA.w !RAM_SMB3_Overworld_OWSpr_InitialXPosHi,y			;/
CODE_20824E:
	INC.w $0103
CODE_208251:
	JSL.l SMB3_ResetSpriteOAMRt_Main
	JSR.w CODE_20F9EC
	LDA.b #$FF
	STA.b $00
	STZ.b $01
	JSR.w CODE_20FA0B
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.w $0747,x
	STA.w !RAM_SMB3_Overworld_PlayerPowerUpPose
	LDY.b #$00
	LDA.w !RAM_SMB3_Global_CurrentWorld
	CMP.b #$07
	BNE.b CODE_20827A
	LDA.b !RAM_SMB3_Overworld_Mario_XPosHi,x
	CMP.b #$02
	BNE.b CODE_20827A
	INY
CODE_20827A:
	STY.w !RAM_SMB3_Overworld_EnableDarknessFlag
	STZ.w $070F
	LDA.b #$10
	STA.w $0349
	JSL.l CODE_29BE21
	JSR.w SMB3_SetMap16TileAttributeDataTable_Main
	LDA.w !RAM_SMB3_Global_OpenReserveBoxFlag
	BNE.b CODE_20829A
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.l $7E3992,x
	STA.b !RAM_SMB3_Overworld_Mario_MovementDirection,x
CODE_20829A:
	LDY.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.w $0722,y
	STA.b $B7
	LDA.w $0724,y
	JSL.l CODE_2097BA
	STZ.b $25
	LDA.b $24
	STA.b $23
	STZ.w !RAM_SMB3_Level_GraphicsAndPaletteSettingFromHeader
	LDA.b #$20
	STA.w $0612
	LDA.b #$02
	JSR.w CODE_2095D5
	JSL.l CODE_20F58D
	JSL.l CODE_29EAA5
	JSL.l SMB3_DrawPlayerLetterOnStatusBar_Main
	JSL.l SMB3_DrawWorldNumberOnStatusBar_Main
	LDA.b #$00
	JSR.w CODE_2095D5
	JSR.w CODE_209C85
	JSR.w CODE_20957E
	JSL.l CODE_2A8B4B
	LDY.b #$0D
	LDA.b #$00
CODE_2082DF:
	STA.w !RAM_SMB3_Overworld_OWSpr_YPosLo,y
	DEY
	BPL.b CODE_2082DF
	LDA.w !RAM_SMB3_Global_CurrentWorld
	CMP.b #$08
	BNE.b CODE_2082F1
	LDA.b #$2D
	JSR.w CODE_2095D5
CODE_2082F1:
	LDY.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.w $0722,y
	STA.w $0210
	STA.b $B7
	LDA.w $0724,y
	STA.w $0211
	STA.b $12
	LDA.w !RAM_SMB3_Overworld_CurrentProcess
	BNE.b CODE_208346
	LDA.w !RAM_SMB3_Global_OpenReserveBoxFlag
	BNE.b CODE_208346
	JSL.l CODE_238000
	LDX.b #$0E
	LDA.w !RAM_SMB3_Level_Player_CurrentCharacter
	BEQ.b CODE_20831A
	INX
CODE_20831A:
	TXA
	JSR.w CODE_2095D5
	JSL.l CODE_238036
	LDA.b #$00
	JSR.w CODE_2095D5
	LDX.w !RAM_SMB3_Global_CurrentWorld
	LDY.w SMB3_InitialWorldMapMusic,x
	CPX.b #$04
	BNE.b CODE_20833C
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b !RAM_SMB3_Overworld_Mario_XPosHi,x
	BEQ.b CODE_20833C
	LDY.b #!Define_SMB3_OverworldMusic_CloudBonusRoom
	BRA.b CODE_208343

CODE_20833C:
	LDA.w !RAM_SMB3_Overworld_ActiveMusicBoxFlag
	BEQ.b CODE_208343
	LDY.b #!Define_SMB3_OverworldMusic_MusicBox
CODE_208343:
	STY.w !RAM_SMB3_Global_MusicCh1
CODE_208346:
	STZ.w !RAM_SMB3_Global_OpenReserveBoxFlag
	LDA.b #$EF
	STA.w $0216
	STZ.w $021A
	STZ.w $021B
	LDA.b #$C0
	STA.w !RAM_SMB3_Global_CurrentVBlankRoutinePath
	JSL.l SMB3_OverworldTileAnimations_Main
	LDA.b #$00
	STA.l $7E3955
	JSL.l CODE_29C794
	PHB
	REP.b #$30
	LDY.w #SMB3_PaletteMirror[$D0].LowByte
	LDX.w #DATA_3C8B80
	LDA.w #$001F
	MVN SMB3_PaletteMirror[$D0].LowByte>>16,DATA_3C8B80>>16
	SEP.b #$30
	PLB
	STZ.w !REGISTER_IRQNMIAndJoypadEnableFlags
	PHD
	REP.b #$20
	LDA.w #DMA[$00].Parameters
	TCD
	LDA.w #$2000
	STA.w !REGISTER_VRAMAddressLo
	LDX.b #$80
	STX.w !REGISTER_VRAMAddressIncrementValue
	LDA.w #(!REGISTER_WriteToVRAMPortLo&$0000FF<<8)+$01
	STA.b DMA[$03].Parameters
	STA.b DMA[$04].Parameters
	STA.b DMA[$05].Parameters
	LDY.b #$08
	LDX.w !RAM_SMB3_Global_CurrentWorld
	CPX.b #$04
	BNE.b CODE_2083CA
	LDA.w #SMB3_Bank39Graphics_FG_AnimatedOverworldTiles5
	STA.b DMA[$03].SourceLo
	LDX.b #SMB3_Bank39Graphics_FG_AnimatedOverworldTiles5>>16
	STX.b DMA[$03].SourceBank
	LDA.w #$1000
	STA.b DMA[$03].SizeLo
	STY.w !REGISTER_DMAEnable
	LDA.w #$2800
	STA.w !REGISTER_VRAMAddressLo
	LDA.w #SMB3_Bank41Graphics_FG_StaticOverworldTiles
	STA.b DMA[$03].SourceLo
	LDX.b #SMB3_Bank41Graphics_FG_StaticOverworldTiles>>16
	STX.b DMA[$03].SourceBank
	LDA.w #$3000
	STA.b DMA[$03].SizeLo
	STY.w !REGISTER_DMAEnable
	BRA.b CODE_2083DB

CODE_2083CA:
	LDA.w #SMB3_Bank41Graphics_FG_AnimatedOverworldTiles1
	STA.b DMA[$03].SourceLo
	LDX.b #SMB3_Bank41Graphics_FG_AnimatedOverworldTiles1>>16
	STX.b DMA[$03].SourceBank
	LDA.w #$4000
	STA.b DMA[$03].SizeLo
	STY.w !REGISTER_DMAEnable
CODE_2083DB:
	LDA.w #$5800
	STA.w !REGISTER_VRAMAddressLo
	LDA.w #SMB3_Bank38Graphics_Layer3_Letters
	STA.b DMA[$04].SourceLo
	LDX.b #SMB3_Bank38Graphics_Sprite_Overworld>>16
	STX.b DMA[$04].SourceBank
	STX.b DMA[$05].SourceBank
	LDA.w #SMB3_Bank38Graphics_Layer3_LettersEnd-SMB3_Bank38Graphics_Layer3_Letters
	STA.b DMA[$04].SizeLo
	LDA.w #SMB3_Bank38Graphics_Sprite_Overworld
	STA.b DMA[$05].SourceLo
	LDA.w #SMB3_Bank38Graphics_Sprite_OverworldEnd-SMB3_Bank38Graphics_Sprite_Overworld
	STA.b DMA[$05].SizeLo
	LDX.b #$30
	STX.w !REGISTER_DMAEnable
	SEP.b #$20
	PLD
	LDA.b #$01
	STA.w !RAM_SMB3_Global_SpecialLayerBGModeAndTileSizeSettingMirror
	LDA.b #$11
	STA.w $020F
	LDA.b #$09
	STA.w !RAM_SMB3_Global_BGModeAndTileSizeSettingMirror
	STA.w !REGISTER_BGModeAndTileSizeSetting
	LDA.b #$17
	STA.w !RAM_SMB3_Global_MainScreenLayersMirror
	LDA.b #$03
	STA.w !RAM_SMB3_Global_OAMSizeAndDataAreaDesignationMirror
	LDA.b #$80
	STA.w !REGISTER_IRQNMIAndJoypadEnableFlags
	LDA.w !RAM_SMB3_Overworld_EnableDarknessFlag
	BEQ.b CODE_208452
	LDA.b #$03
	STA.w $0291
	LDA.w !RAM_SMB3_Overworld_CurrentProcess
	BEQ.b CODE_208452
	JSL.l CODE_2AF9A9
	JSL.l SMB3_UpdateDarknessCircleWindowPos_Main
CODE_20843B:
	LDA.b #$0F
	STA.b !RAM_SMB3_Global_ScreenDisplayRegisterMirror
	LDA.w !RAM_SMB3_Overworld_EnableDarknessFlag
	BEQ.b CODE_208452
	LDA.w !RAM_SMB3_Overworld_CurrentProcess
	BEQ.b CODE_208452
	LDA.w !RAM_SMB3_Level_PauseMenuStatus
	BNE.b CODE_208452
	JSL.l SMB3_UpdateDarknessCircleWindowPos_Main
CODE_208452:
	JSR.w CODE_20801F
	JSL.l SMB3_ResetSpriteOAMRt_Main
	JSL.l SMB3_OverworldTileAnimations_Main
	LDA.w !RAM_SMB3_Global_ReserveBoxState
	BNE.b CODE_208467
	LDA.w !RAM_SMB3_Global_OpenReserveBoxFlag
	BEQ.b CODE_208475
CODE_208467:
	JSL.l CODE_29D8E0
	JSL.l SMB3_DrawWorld5CloudSprite_Main
	JSL.l CODE_238C1B
	BRA.b CODE_20843B

CODE_208475:
	JSL.l CODE_2380AB
	LDA.w !RAM_SMB3_Overworld_CurrentProcess
	CMP.b #$02
	BCC.b CODE_208484
	JSL.l CODE_29EAA5
CODE_208484:
	LDY.w !RAM_SMB3_Overworld_CurrentProcess
	CPY.b #$0D
	BNE.b CODE_208491
	LDA.b !RAM_SMB3_Overworld_CurrentWarpWhistleState
	CMP.b #$03
	BEQ.b CODE_2084A1
CODE_208491:
	CPY.b #$04
	BEQ.b CODE_2084A1
	CPY.b #$0F
	BCC.b CODE_20843B
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.w $073F,x
	BEQ.b CODE_208516
CODE_2084A1:
	JSL.l CODE_29E2B6
	JSR.w CODE_20801F
	LDA.b #$80
	STA.b !RAM_SMB3_Global_ScreenDisplayRegisterMirror
	STZ.w !RAM_SMB3_Global_HDMAEnableMirror
	STZ.w !RAM_SMB3_Global_MainScreenWindowMaskMirror
	STZ.w !REGISTER_HDMAEnable
	STZ.w !REGISTER_IRQNMIAndJoypadEnableFlags
	LDA.l $7E3955
	INC
	STA.l $7E3955
	LDA.b !RAM_SMB3_Overworld_CurrentWarpWhistleState
	BNE.b CODE_2084CC
	LDA.w !RAM_SMB3_Overworld_CurrentProcess
	CMP.b #$04
	BNE.b CODE_2084CF
CODE_2084CC:
	JMP.w CODE_208251

CODE_2084CF:
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.w $0210
	STA.w $0722,x
	LDA.b $12
	STA.w $0724,x
	LDA.b !RAM_SMB3_Overworld_Mario_YPosLo,x
	STA.l $7E3975,x
	LDA.b !RAM_SMB3_Overworld_Mario_XPosHi,x
	STA.l $7E3977,x
	LDA.b !RAM_SMB3_Overworld_Mario_XPosLo,x
	STA.l $7E3979,x
	LDA.b !RAM_SMB3_Overworld_Mario_UnusedRAM2,x
	STA.l $7E397B,x
	STZ.w $073F,x
CODE_2084F8:
	INX
	STX.w !RAM_SMB3_Level_Player_CurrentCharacter
	CPX.w !RAM_SMB3_Global_TwoPlayerGameFlag
	BNE.b CODE_208504
	STZ.w !RAM_SMB3_Level_Player_CurrentCharacter
CODE_208504:
	LDA.w !RAM_SMB3_Level_Player_CurrentCharacter
	TAX
	LDA.w !RAM_SMB3_Level_Player_MariosLives,x
	BMI.b CODE_2084F8
	STZ.w !RAM_SMB3_Overworld_CurrentProcess
	STZ.w $078C
	JMP.w CODE_2080E5

CODE_208516:
	JSR.w CODE_20801F
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.w $0210
	STA.w $0722,x
	LDA.b $12
	STA.w $0724,x
	LDA.b !RAM_SMB3_Overworld_Mario_YPosLo,x
	STA.l $7E3975,x
	LDA.b !RAM_SMB3_Overworld_Mario_XPosHi,x
	STA.l $7E3977,x
	LDA.b !RAM_SMB3_Overworld_Mario_XPosLo,x
	STA.l $7E3979,x
	LDA.b !RAM_SMB3_Overworld_Mario_UnusedRAM2,x
	STA.l $7E397B,x
	STZ.b $20
	STZ.w $104F
	STZ.w !RAM_SMB3_Global_CurrentVBlankRoutinePath
	STZ.w $0728
	JSR.w CODE_20966F
	LDA.b #$03
	STA.w $1047
	STA.w $1049
	STA.w $104A
	LDA.b #$0A
	STA.w $1048
	LDA.b #$C0
	STA.w $104B
	LDA.b #$E0
	STA.w $104E
	LDA.b #$FF
	STA.w $104D
	LDA.b #$1F
	STA.w $1045
	LDA.b #$E0
	STA.w $104C
	LDA.b #$17
	STA.w $1046
	LDX.b #$03
CODE_20857D:
	LDA.b $24
	AND.b #$0F
	ASL
	CLC
	ADC.w $104B,x
	STA.w $104B,x
	LDA.b $24
	AND.b #$10
	LSR
	LSR
	ORA.w $1047,x
	STA.w $1047,x
	DEX
	BPL.b CODE_20857D
	LDX.b #$03
	LDA.b $24
	TAY
	CLC
	ADC.b #$08
	STA.b $00
	AND.b #$10
	BEQ.b CODE_2085A8
	LDX.b #$07
CODE_2085A8:
	STX.w $1049
	TYA
	AND.b #$08
	BEQ.b CODE_2085BA
	LDA.w $104D
	AND.b #$1F
	ORA.b #$E0
	STA.w $104D
CODE_2085BA:
	LDA.b #$30
	STA.w $1050
	LDA.b #!Define_SMAS_Sound0063_EnterLevel
	STA.w !RAM_SMB3_Global_SoundCh3
	LDA.b #!Define_SMB3_LevelMusic_MusicFade
	STA.w !RAM_SMB3_Global_MusicCh1
	LDY.b #$01
	LDA.w !RAM_SMB3_Overworld_EnableDarknessFlag
	BEQ.b CODE_2085D2
	LDY.b #$04
CODE_2085D2:
	STY.w $0291
	JSL.l CODE_2AF9A9
CODE_2085D9:
	LDA.b #$01
	STA.b $20
	JSL.l CODE_2AFA63
	JSR.w CODE_20801F
	LDA.w $1050
	BPL.b CODE_2085D9
CODE_2085E9:
	JSR.w CODE_20801F
	LDA.b !RAM_SMB3_Global_ScreenDisplayRegisterMirror
	SEC
	SBC.b #$02
	STA.b !RAM_SMB3_Global_ScreenDisplayRegisterMirror
	BPL.b CODE_2085E9
	STZ.w $0285
	STZ.w $0291
	STZ.w !RAM_SMB3_Global_HDMAEnableMirror
	STZ.w !RAM_SMB3_Global_BG1And2WindowMaskSettingsMirror
	STZ.w !RAM_SMB3_Global_BG3And4WindowMaskSettingsMirror
	STZ.w !RAM_SMB3_Global_ObjectAndColorWindowSettingsMirror
	LDA.b #$10
	STA.w !RAM_SMB3_Global_MainScreenLayersMirror
	STA.w $020F
	STZ.w !RAM_SMB3_Global_MainScreenWindowMaskMirror
	LDA.b #$20
	STA.w !RAM_SMB3_Global_FixedColorData1Mirror
	LDA.b #$40
	STA.w !RAM_SMB3_Global_FixedColorData2Mirror
	LDA.b #$80
	STA.w !RAM_SMB3_Global_FixedColorData3Mirror
	LDA.b #$80
	STA.w !REGISTER_ScreenDisplayRegister
	STA.b !RAM_SMB3_Global_ScreenDisplayRegisterMirror
	JSR.w CODE_20801F
	LDA.w !RAM_SMB3_Overworld_OWSprIDBeingEntered
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMB3_E) != $00
	CMP.b #!Define_SMB3_SpriteID_OWSpr02_Airship
	BEQ.b CODE_20866D
endif
	CMP.b #!Define_SMB3_SpriteID_OWSpr03_HammerBro
	BEQ.b CODE_20866D
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMB3_E) != $00
	CMP.b #!Define_SMB3_SpriteID_OWSpr04_BoomerangBro
	BEQ.b CODE_20866D
	CMP.b #!Define_SMB3_SpriteID_OWSpr05_SledgeBro
	BEQ.b CODE_20866D
	CMP.b #!Define_SMB3_SpriteID_OWSpr06_FireBro
	BEQ.b CODE_20866D
endif
	CMP.b #!Define_SMB3_SpriteID_OWSpr09_NSpade
	BEQ.b CODE_208680
	CMP.b #!Define_SMB3_SpriteID_OWSpr0A_BlueToadHouse
	BEQ.b CODE_208680
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMB3_E) != $00
	CMP.b #!Define_SMB3_SpriteID_OWSpr0B_CoinShip
	BEQ.b CODE_20866D
endif
	LDA.w !RAM_SMB3_Global_CurrentlyProcessedMap16TileLo
	CMP.b #$BC
	BNE.b CODE_208651
	LDA.w !RAM_SMB3_Global_CurrentWorld
	CMP.b #$04
	BNE.b CODE_208680
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b !RAM_SMB3_Overworld_Mario_XPosHi,x
	BNE.b CODE_208660
	BRA.b CODE_208680

CODE_208651:
	LDA.w !RAM_SMB3_Global_CurrentlyProcessedMap16TileLo
	CMP.b #$50
	BEQ.b CODE_208680
	CMP.b #$E0
	BEQ.b CODE_208680
	CMP.b #$E8
	BEQ.b CODE_208680
CODE_208660:
	LDA.w !RAM_SMB3_Overworld_EnableDarknessFlag
	BEQ.b CODE_20866D
	LDX.b #$2C
CODE_208667:
	JSR.w CODE_20801F
	DEX
	BNE.b CODE_208667
CODE_20866D:
	JSL.l SMB3_ProcessLoadingLetters
	JSR.w CODE_20801F
	STZ.w !REGISTER_IRQNMIAndJoypadEnableFlags
	JSL.l SMB3_UploadMusicBank_Level
	INC.w !RAM_SMB3_Global_LoadOverworldMusicBank
	BRA.b CODE_208683

CODE_208680:
	STZ.w !REGISTER_IRQNMIAndJoypadEnableFlags
CODE_208683:
	LDA.b #$11
	STA.w $020F
	LDA.l $7E3955
	INC
	STA.l $7E3955
CODE_208691:
	STZ.b $12
	STZ.w $0210
	STZ.w $0211
	STZ.b $13
	STZ.w $0216
	STZ.w $0217
	STZ.b $23
	STZ.b $24
	STZ.b $25
	LDA.b #$00
	STA.l $7E3966
	STA.l $7E3965
	STA.l $7E3964
	STZ.b $00
	LDX.b #$0500>>8
	STX.b $01
	LDY.b #$9D
CODE_2086BD:
	STA.b ($00),y
	DEY
	BNE.b CODE_2086BD
	STA.b ($00),y
	LDA.b !RAM_SMB3_Overworld_Load2PlayerBattleFlag
	BEQ.b CODE_2086F7
	LDA.b !RAM_SMB3_Global_CurrentlyProcessedMap16TileLo
	CMP.b #$BC
	BEQ.b CODE_2086F7
	LDA.b #$12
	STA.w !RAM_SMB3_Global_TilesetFromHeader
	JSR.w CODE_2095D4
	INC.w !RAM_SMB3_BattleMode_CurrentStage
	LDA.w !RAM_SMB3_BattleMode_CurrentStage
	CMP.b #$0C
	BNE.b CODE_2086E5
	LDA.b #$00
	STA.w !RAM_SMB3_BattleMode_CurrentStage
CODE_2086E5:
	ASL
	TAX
	LDA.w BattleModeLevelDataPtrs,x
	STA.b !RAM_SMB3_Level_LevelDataPtrLo
	LDA.w BattleModeLevelDataPtrs+$01,x
	STA.b !RAM_SMB3_Level_LevelDataPtrHi
	LDA.b #BattleModeLevelDataPtrs>>16
	STA.b !RAM_SMB3_Level_LevelDataPtrBank
	BRA.b CODE_2086FB

CODE_2086F7:
	JSL.l CODE_29BF84
CODE_2086FB:
	LDA.w !RAM_SMB3_Global_CurrentWorld
	CMP.b #$08
	BNE.b CODE_208710
	LDA.b #!Define_SMB3_LevelMusic_MusicFade
	STA.w !RAM_SMB3_Global_MusicCh1
	LDA.w $042A
	STA.w !RAM_SMB3_Global_CurrentWorld
	JMP.w CODE_2080B9

CODE_208710:
	LDY.w !RAM_SMB3_Global_TilesetFromHeader
	LDA.w DATA_21C975,y
	STA.w $0739
	CPY.b #$07
	BNE.b CODE_20873C
	LDA.b !RAM_SMB3_Level_SpriteDataPtrLo
	STA.w $0420
	LDA.b !RAM_SMB3_Level_SpriteDataPtrHi
	STA.w !RAM_SMB3_Level_ToadHouseChestContentsIndex
	LDA.b #SMB3_LevelData_ToadHouse_Sprite_Main
	STA.b !RAM_SMB3_Level_SpriteDataPtrLo
	STA.w !RAM_SMB3_Level_PreviousSpriteDataLo
	LDA.b #SMB3_LevelData_ToadHouse_Sprite_Main>>8
	STA.b !RAM_SMB3_Level_SpriteDataPtrHi
	STA.w !RAM_SMB3_Level_PreviousSpriteDataHi
	LDA.b #SMB3_LevelData_ToadHouse_Sprite_Main>>16
	STA.b !RAM_SMB3_Level_SpriteDataPtrBank
	STA.w !RAM_SMB3_Level_PreviousSpriteDataBank
CODE_20873C:
	LDY.b #$7F
	LDA.b #$00
CODE_208740:
	STA.w !RAM_SMB3_Level_ItemMemoryBits,y
	DEY
	BPL.b CODE_208740
	LDY.b #$80
	LDA.b #$00
	STA.w !RAM_SMB3_Level_DisableScrollingFlag
CODE_20874D:
	STA.w !RAM_SMB3_Level_Player_XPosHi,y
	DEY
	BNE.b CODE_20874D
CODE_208753:
	STZ.w !RAM_SMB3_Level_ShakeLayer1YOffset
	LDA.w !RAM_SMB3_Global_TilesetFromHeader
	CMP.b #$10
	BEQ.b CODE_208777
	CMP.b #$11
	BEQ.b CODE_208777
	JSL.l SMB3_LoadLevelRoutine_Main
	JSL.l SMB3_ResetSpriteOAMRt_Main
	JSR.w SMB3_SetMap16TileAttributeDataTable_Main
	LDA.b #$26
	STA.w $0612
	STZ.b $01
	LDA.b #$FF
	STA.b $00
CODE_208777:
	JSR.w CODE_20FA18
	JSL.l SMB3_ResetSpriteOAMRt_Main
	JSL.l SMB3_UploadGraphicsFiles_Main
	LDA.w !RAM_SMB3_Global_TilesetFromHeader
	CMP.b #$10
	BEQ.b CODE_20878C
	JMP.w CODE_2087F0

CODE_20878C:							; Note: Sliding Picture spade game code start
	LDA.b #$AE
	STA.b $00
	LDA.b #$02
	STA.b $01
	JSR.w CODE_20FA1B
	JSL.l SMB3_LoadSpadeGameGFX_Main
	JSL.l CODE_239D00
	JSL.l SMB3_DrawSpadeGameSideBorders_Main
	LDA.b #$07
	JSR.w CODE_2095D5
	LDA.b #$02
	JSR.w CODE_2095D5
	JSL.l CODE_20F58D
	JSL.l CODE_29EAA5
	JSL.l SMB3_DrawPlayerLetterOnStatusBar_Main
	JSL.l SMB3_DrawWorldNumberOnStatusBar_Main
	LDA.b #$00
	JSR.w CODE_2095D5
	LDA.b #$C0
	STA.w !RAM_SMB3_Global_CurrentVBlankRoutinePath
	JSR.w CODE_20F9EC
	LDA.b #$01
	STA.w $021B
	LDA.b #$00
	STA.l $7E3955
	STA.w !RAM_SMB3_SlidingPictureGame_CurrentState
	JSL.l CODE_29C794
	JSL.l CODE_29E29D
	LDA.b #$02
	STA.w $0427
	JSR.w CODE_20801F
	LDA.b #$C0
	STA.w !RAM_SMB3_Global_CurrentVBlankRoutinePath
	JMP.w CODE_208F6A

CODE_2087F0:
	CMP.b #$11
	BEQ.b CODE_2087F7
	JMP.w CODE_208876

CODE_2087F7:						; Note: N-Spade game code start
	JSL.l CODE_20AF6F
	LDA.b #$0E
	STA.w !RAM_SMB3_CardFlipGame_CursorPosIndex
	STZ.w !RAM_SMB3_CardFlipGame_CurrentInitializationState
	LDA.b #$FF
	STA.b $00
	STZ.b $01
	JSR.w CODE_20FA1B
	LDA.b #$0D
	JSR.w CODE_2095D5
CODE_208811:
	JSL.l SMB3_ProcessInitializationOfCardFlipGame_Main
	LDA.b $28
	JSR.w CODE_2095D5
	LDA.w !RAM_SMB3_CardFlipGame_CurrentInitializationState
	CMP.b #$03
	BNE.b CODE_208811
	LDA.b #$02
	JSR.w CODE_2095D5
	JSL.l CODE_20F58D
	JSL.l CODE_29EAA5
	JSL.l SMB3_DrawPlayerLetterOnStatusBar_Main
	JSL.l SMB3_DrawWorldNumberOnStatusBar_Main
	LDA.b #$00
	JSR.w CODE_2095D5
	LDA.b #$C0
	STA.w !RAM_SMB3_Global_CurrentVBlankRoutinePath
	JSR.w CODE_20F9EC
	LDA.b #$01
	STA.w $021B
	LDA.b #$00
	STA.l $7E3955
	JSL.l CODE_29C794
	LDA.b #$80
	STA.w !REGISTER_IRQNMIAndJoypadEnableFlags
	JSL.l CODE_29E29D
CODE_20885B:
	JSR.w CODE_20801F
	JSL.l SMB3_ProcessCardFlipSpadeGame_Main
	JSL.l CODE_29EAA5
	LDA.b $14
	BEQ.b CODE_20885B
	LDA.b #!Define_SMB3_LevelMusic_MusicFade
	STA.w !RAM_SMB3_Global_MusicCh1
	JSL.l CODE_29E2B6
	JMP.w CODE_208F6A

CODE_208876:
	CMP.b #$12
	BNE.b CODE_20887D
	JMP.w CODE_209473

CODE_20887D:
	STZ.w $0427
	LDX.b #$C0
	LDY.w !RAM_SMB3_Level_IsVerticalLevelFlag
	BEQ.b CODE_208889
	LDX.b #$80
CODE_208889:
	STX.w !RAM_SMB3_Global_CurrentVBlankRoutinePath
	LDA.b #$15
	STA.w !RAM_SMB3_Global_MainScreenLayersMirror
	LDA.b #$02
	STA.w !RAM_SMB3_Global_SubScreenLayersMirror
	LDA.b #$02
	STA.w !RAM_SMB3_Global_ColorMathInitialSettingsMirror
	LDA.b #$20
	STA.w !RAM_SMB3_Global_ColorMathSelectAndEnableMirror
	LDX.b #$17
	LDA.w !RAM_SMB3_Level_Layer3BGFromHeader
	CMP.b #$01
	BEQ.b CODE_2088AD
	CMP.b #$07
	BNE.b CODE_2088C3
CODE_2088AD:
	STX.w !RAM_SMB3_Global_MainScreenLayersMirror
	JSL.l CODE_22E134
	STZ.w $021A
	LDA.b #$01
	STA.w $021B
	LDA.b #$C0
	STA.w !RAM_SMB3_Global_CurrentVBlankRoutinePath
	BRA.b CODE_2088DD

CODE_2088C3:
	CMP.b #$06
	BNE.b CODE_2088D0
	STX.w !RAM_SMB3_Global_MainScreenLayersMirror
	JSL.l CODE_22E499
	BRA.b CODE_2088DD

CODE_2088D0:
	CMP.b #$05
	BNE.b CODE_2088F6
	LDX.b #$17
	STX.w !RAM_SMB3_Global_MainScreenLayersMirror
	JSL.l CODE_22E483
CODE_2088DD:
	LDA.b #$64
	STA.w !RAM_SMB3_Global_ColorMathSelectAndEnableMirror
	LDA.w !RAM_SMB3_Level_Layer3BGFromHeader
	CMP.b #$07
	BNE.b CODE_2088EE
	LDA.b #$24
	STA.w !RAM_SMB3_Global_ColorMathSelectAndEnableMirror
CODE_2088EE:
	LDA.b #$13
	STA.w !RAM_SMB3_Global_SubScreenLayersMirror
	JMP.w CODE_208982

CODE_2088F6:
	CMP.b #$02
	BNE.b CODE_208901
	JSL.l CODE_22E2E4
	JMP.w CODE_208982

CODE_208901:
	CMP.b #$0E
	BNE.b CODE_20890B
	JSL.l CODE_22E5AC
	BRA.b CODE_208982

CODE_20890B:
	CMP.b #$09
	BNE.b CODE_208915
	JSL.l CODE_22E4D1
	BRA.b CODE_208935

CODE_208915:
	CMP.b #$0F
	BNE.b CODE_20891F
	JSL.l CODE_22E64D
	BRA.b CODE_208935

CODE_20891F:
	CMP.b #$0A
	BNE.b CODE_208929
	JSL.l CODE_22E3E5
	BRA.b CODE_208935

CODE_208929:
	CMP.b #$0C
	BEQ.b CODE_208935
	CMP.b #$0B
	BNE.b CODE_208941
	JSL.l CODE_22E4F5
CODE_208935:
	LDA.b #$11
	STA.w !RAM_SMB3_Global_MainScreenLayersMirror
	LDA.b #$06
	STA.w !RAM_SMB3_Global_SubScreenLayersMirror
	BRA.b CODE_208982

CODE_208941:
	CMP.b #$0D
	BNE.b CODE_208953
	JSL.l CODE_22E518
	STZ.w $021A
	LDA.b #$01
	STA.w $021B
	BRA.b CODE_208982

CODE_208953:
	CMP.b #$03
	BEQ.b CODE_20896F
	CMP.b #$04
	BEQ.b CODE_20896F
	CMP.b #$08
	BNE.b CODE_208982
	JSL.l CODE_22E4B1
	LDA.b #$24
	STA.w !RAM_SMB3_Global_ColorMathSelectAndEnableMirror
	LDA.b #$13
	STA.w !RAM_SMB3_Global_SubScreenLayersMirror
	BRA.b CODE_208982

CODE_20896F:
	JSL.l CODE_22E338
	LDA.b #$22
	STA.w !RAM_SMB3_Global_ColorMathSelectAndEnableMirror
	LDA.b #$13
	STA.w !RAM_SMB3_Global_MainScreenLayersMirror
	LDA.b #$15
	STA.w !RAM_SMB3_Global_SubScreenLayersMirror
CODE_208982:
	LDA.b #$02
	JSR.w CODE_2095D5
	JSL.l CODE_20F58D
	JSL.l CODE_29EAA5
	JSL.l SMB3_DrawPlayerLetterOnStatusBar_Main
	JSL.l SMB3_DrawWorldNumberOnStatusBar_Main
	LDA.b #$00
	JSR.w CODE_2095D5
	INC.b $24
	INC.b $24
	DEC.b $23
	DEC.b $23
	JSR.w CODE_209C85
	LDA.b #$40
	STA.w $0612
	JSL.l CODE_2AB48E
	LDA.w !RAM_SMB3_Global_TilesetFromHeader
	CMP.b #$0F
	BNE.b CODE_2089BA
	JMP.w CODE_208A48

CODE_2089BA:
	JSL.l SMB3_BufferSpriteListData_Main
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.w $073D,x
	BNE.b CODE_2089D6
	LDA.w !RAM_SMB3_Global_OpenReserveBoxFlag
	BNE.b CODE_2089D9
	LDA.w $0414
	BNE.b CODE_2089D9
	LDA.w DATA_21C976
	STA.w $0739
CODE_2089D6:
	JMP.w CODE_208A48

CODE_2089D9:
	LDA.l $7E398C
	STA.w $0210
	STA.w $0212
	LDA.l $7E398B
	STA.b $12
	STA.w $0211
	LSR
	STA.w $0213
	ROR.w $0212
	LDA.l $7E398E
	STA.w $0216
	LDA.l $7E398D
	STA.b $13
	STA.w $0217
	REP.b #$20
	LDA.w $0216
	LSR
	LSR
	STA.w $0218
	LDA.w $0216
	SEC
	SBC.w $0218
	STA.w $0218
	SEP.b #$20
	STZ.w !RAM_SMB3_Global_OpenReserveBoxFlag
	STZ.w $0414
	LDA.w !RAM_SMB3_Level_Layer2BGFromHeader
	CMP.b #$02
	BEQ.b CODE_208A2A
	CMP.b #$23
	BNE.b CODE_208A2F
CODE_208A2A:
	LDA.b #$40
	STA.w $0218
CODE_208A2F:
	CMP.b #$03
	BEQ.b CODE_208A37
	CMP.b #$24
	BNE.b CODE_208A3D
CODE_208A37:
	STZ.w $0218
	STZ.w $0219
CODE_208A3D:
	LDA.w $034F
	BEQ.b CODE_208A48
	LDA.w $0216
	STA.w $0218
CODE_208A48:
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.w $073D,x
	BEQ.w CODE_208A53
	JMP.w CODE_208FC2

CODE_208A53:
	STZ.w !RAM_SMB3_Global_CurrentRasterEffect
	LDA.b #$00
	STA.l $7E3955
	JSL.l CODE_29C794
	LDA.b #$80
	STA.b !RAM_SMB3_Global_ScreenDisplayRegisterMirror
	LDA.w $0713
	BEQ.b CODE_208A75
	LDA.w !RAM_SMB3_Level_IsVerticalLevelFlag
	BNE.b CODE_208A72
	LDA.b #$0F
	STA.b !RAM_SMB3_Global_ScreenDisplayRegisterMirror
CODE_208A72:
	JMP.w CODE_208BD5

CODE_208A75:
	STZ.b $20
	JSR.w CODE_20966F
	LDA.b #$FE
	STA.w $105F
	LDA.w !RAM_SMB3_Level_IsVerticalLevelFlag
	BEQ.b CODE_208A94
	LDY.w $0376
	LDA.w DATA_21823C,y
	STA.b $2E
	LDA.w DATA_21824C,y
	STA.b $2F
	JMP.w CODE_208A9E

CODE_208A94:
	LDA.w DATA_218200
	STA.b $2E
	LDA.w DATA_218200+$01
	STA.b $2F
CODE_208A9E:
	STZ.w $1044
	LDA.w $0216
	BEQ.b CODE_208AB0
	LDA.b $2E
	CLC
	ADC.b #$F0
	STA.b $2E
	INC.w $1044
CODE_208AB0:
	LDY.b #$04
CODE_208AB2:
	LDA.w $0216
	CMP.w DATA_21CDDE,y
	BEQ.b CODE_208ABD
	DEY
	BPL.b CODE_208AB2
CODE_208ABD:
	STY.w $1060
	LDA.w DATA_21CDE3,y
	STA.w $1047
	STA.w $1048
	STA.w $1049
	STA.w $104A
	LDA.w DATA_21CDE8,y
	STA.w $104B
	LDA.w DATA_21CDF2,y
	STA.w $104D
	LDA.w DATA_21CDED,y
	STA.w $104C
	LDA.w DATA_21CDF7,y
	STA.w $104E
	STZ.w $104F
	LDA.b #$03
	STA.w $1045
	LDY.b #$01
	STY.w $1046
	LDA.b #$02
	STA.w $0291
	JSL.l CODE_2AF9A9
	STZ.w !RAM_SMB3_Global_CurrentVBlankRoutinePath
	LDA.b #$80
	STA.w !REGISTER_IRQNMIAndJoypadEnableFlags
	LDA.b #$15
	STA.w !RAM_SMB3_Global_MainScreenLayersMirror
	LDA.b #$02
	STA.w !RAM_SMB3_Global_SubScreenLayersMirror
	LDA.b #$02
	STA.w !RAM_SMB3_Global_ColorMathInitialSettingsMirror
	LDA.b #$20
	STA.w !RAM_SMB3_Global_ColorMathSelectAndEnableMirror
	LDA.w !RAM_SMB3_Level_Layer3BGFromHeader
	CMP.b #$01
	BEQ.b CODE_208B31
	CMP.b #$06
	BEQ.b CODE_208B31
	CMP.b #$07
	BEQ.b CODE_208B31
	CMP.b #$05
	BNE.b CODE_208B4C
	LDA.b #$17
	STA.w !RAM_SMB3_Global_MainScreenLayersMirror
CODE_208B31:
	LDA.b #$C0
	STA.w !RAM_SMB3_Global_CurrentVBlankRoutinePath
	LDA.b #$64
	STA.w !RAM_SMB3_Global_ColorMathSelectAndEnableMirror
	LDA.b #$13
	STA.w !RAM_SMB3_Global_SubScreenLayersMirror
	LDA.w !RAM_SMB3_Level_Layer3BGFromHeader
	CMP.b #$07
	BNE.b CODE_208B4C
	LDA.b #$24
	STA.w !RAM_SMB3_Global_ColorMathSelectAndEnableMirror
CODE_208B4C:
	CMP.b #$03
	BEQ.b CODE_208B64
	CMP.b #$04
	BEQ.b CODE_208B64
	CMP.b #$08
	BNE.b CODE_208B75
	LDA.b #$64
	STA.w !RAM_SMB3_Global_ColorMathSelectAndEnableMirror
	LDA.b #$13
	STA.w !RAM_SMB3_Global_SubScreenLayersMirror
	BRA.b CODE_208B93

CODE_208B64:
	LDA.b #$22
	STA.w !RAM_SMB3_Global_ColorMathSelectAndEnableMirror
	LDA.b #$13
	STA.w !RAM_SMB3_Global_MainScreenLayersMirror
	LDA.b #$15
	STA.w !RAM_SMB3_Global_SubScreenLayersMirror
	BRA.b CODE_208B93

CODE_208B75:
	CMP.b #$09
	BEQ.b CODE_208B89
	CMP.b #$0A
	BEQ.b CODE_208B89
	CMP.b #$0B
	BEQ.b CODE_208B89
	CMP.b #$0F
	BEQ.b CODE_208B89
	CMP.b #$0C
	BNE.b CODE_208B93
CODE_208B89:
	LDA.b #$11
	STA.w !RAM_SMB3_Global_MainScreenLayersMirror
	LDA.b #$06
	STA.w !RAM_SMB3_Global_SubScreenLayersMirror
CODE_208B93:
	LDA.b #$80
	STA.w !RAM_SMB3_Global_ScreenDisplayRegisterMirror
	JSL.l CODE_2AFA63
	LDA.w !RAM_SMB3_Level_Layer2BGFromHeader
	CMP.b #$01
	BEQ.b CODE_208BAB
	CMP.b #$21
	BEQ.b CODE_208BAB
	CMP.b #$25
	BNE.b CODE_208BAB
CODE_208BAB:
	JSR.w CODE_20801F
	INC.w !RAM_SMB3_Global_ScreenDisplayRegisterMirror
	INC.w !RAM_SMB3_Global_ScreenDisplayRegisterMirror
	LDA.w !RAM_SMB3_Global_ScreenDisplayRegisterMirror
	AND.b #$0F
	STA.w !RAM_SMB3_Global_ScreenDisplayRegisterMirror
	BNE.b CODE_208BAB
	LDA.b #$0F
	STA.w !RAM_SMB3_Global_ScreenDisplayRegisterMirror
CODE_208BC3:
	JSR.w CODE_20801F
	JSL.l CODE_2AFA63
	JSL.l CODE_239344
	LDA.w $1050
	CMP.b #$38
	BNE.b CODE_208BC3
CODE_208BD5:
	STZ.b $20
	LDX.b #$C0
	LDA.w !RAM_SMB3_Level_IsVerticalLevelFlag
	BEQ.b CODE_208BE0
	LDX.b #$80
CODE_208BE0:
	STX.w !RAM_SMB3_Global_CurrentVBlankRoutinePath
	LDA.w !RAM_SMB3_Global_TilesetFromHeader
	CMP.b #$0F
	BEQ.b CODE_208BED
	JMP.w CODE_208CC0

CODE_208BED:								; Note: Spade game intro code start
	STZ.w $0211
	LDA.b #$15
	STA.w !RAM_SMB3_Global_MainScreenLayersMirror
	LDA.b #$04
	STA.w $070E
	STA.w $070F
	LDA.b #$50
	STA.w $05E7
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	LDA.b #$A9
else
	LDA.b #$C4
endif
	STA.w $05E8
	LDA.b #$0B
	STA.w $070B
	LDA.b #$35
	STA.w $070C
	LDA.b #$A0
	STA.b $97
	LDA.b #$78
	STA.b $95
	STA.b $96
	STZ.w !RAM_SMB3_SpadeGame_CurrentState
	STZ.w !RAM_SMB3_CardFlipGame_CursorPosIndex
	LDA.b #!Define_SMB3_OverworldMusic_Minigame
	STA.w !RAM_SMB3_Global_MusicCh1
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) == $00
	LDA.b #$80
	STA.w !REGISTER_IRQNMIAndJoypadEnableFlags
endif
CODE_208C2B:
	JSR.w CODE_20801F
	JSL.l SMB3_ProcessSpadeGameIntro_Main
	JSL.l CODE_29E7AA
	LDA.b $14
	BEQ.b CODE_208C2B
	LDA.w !RAM_SMB3_SpadeGame_GameType
	CMP.b #$04
	BNE.b CODE_208C49
	LDA.b #$01
	STA.w $072D
	JMP.w CODE_208C50

CODE_208C49:
	CMP.b #$07
	BNE.b CODE_208C50
	JSR.w CODE_2395C1						; Glitch: This is supposed to be a JSL!
CODE_208C50:
	STZ.w $02D4
	STZ.w $070F
	JSL.l CODE_29E2B6
	LDA.b #$80
	STA.b !RAM_SMB3_Global_ScreenDisplayRegisterMirror
	JSR.w CODE_20801F
	STZ.w !REGISTER_IRQNMIAndJoypadEnableFlags
	LDA.w $069A
	BEQ.b CODE_208CBA
	LDY.b #$00
	LDA.w !RAM_SMB3_SpadeGame_GameType
	CMP.b #$01
	BNE.b CODE_208C7B
	LDA.b #$01
	STA.w $073B
	LDY.b #$10
	BNE.b CODE_208C86				; Note: This will always branch.

CODE_208C7B:
	CMP.b #$02
	BNE.b CODE_208C86
	LDA.b #$02
	STA.w $073B
	LDY.b #$11
CODE_208C86:
	STY.w !RAM_SMB3_Global_TilesetFromHeader
	STY.w !RAM_SMB3_Level_GraphicsAndPaletteSettingFromHeader
	CPY.b #$00
	BEQ.b CODE_208CBA
	LDA.l $7E3955
	INC
	STA.l $7E3955
	LDY.b #$FD
	LDA.b #$00
CODE_208C9D:
	STA.w $0000,y
CODE_208CA0:
	DEY
	CPY.b #$75
	BCS.b CODE_208CA9
	CPY.b #$69
	BCS.b CODE_208CA0
CODE_208CA9:
	CPY.b #$FF
	BNE.b CODE_208C9D
	LDY.b #$CF
CODE_208CAF:
	STA.w $0400,y
	DEY
	CPY.b #$FF
	BNE.b CODE_208CAF
	JMP.w CODE_208753

CODE_208CBA:
	STZ.w $069A
	JMP.w CODE_208F76

CODE_208CC0:
	LDA.b #$10
	STA.w $0349
	LDA.b #$01
	LDX.w !RAM_SMB3_Global_TilesetFromHeader
	CPX.b #$07
	BNE.b CODE_208CD0
	LDA.b #$11
CODE_208CD0:
	STA.w $020F
if !Define_Global_ROMToAssemble&(!ROM_SMAS_U|!ROM_SMAS_J1) != $00
	STZ.w $034D
	LDA.w !RAM_SMB3_Global_CurrentWorld
	CMP.b #$06
	BEQ.b ++
	LDA.w !RAM_SMB3_Level_Layer2BGFromHeader
	CMP.b #$01
	BEQ.b +
	CMP.b #$21
	BEQ.b +
	CMP.b #$25
	BNE.b ++
+:
	REP.b #$20
	LDA.w #(!REGISTER_BG2HorizScrollOffset&$0000FF<<8)+$42
	STA.w HDMA[$07].Parameters
	LDA.w #DATA_2AF860
	STA.w HDMA[$07].SourceLo
	LDX.b #DATA_2AF860>>16
	STX.w HDMA[$07].SourceBank
	LDX.b #!RAM_SMB3_Global_WindowHDMATable2>>16
	STX.w HDMA[$07].IndirectSourceBank
	SEP.b #$20
	LDA.b #$01
	STA.w $034D
	STZ.w $0249
++:
endif
	LDA.b #$A1
	STA.w !REGISTER_IRQNMIAndJoypadEnableFlags
	LDY.w !RAM_SMB3_Global_TilesetFromHeader
	CPY.b #$05
	BNE.b CODE_208CE5
	LDA.w DATA_21C98E
	STA.w $1E9F
CODE_208CE5:
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) == $00
	LDA.w $034D
	BEQ.b CODE_208CEE
	JSL.l CODE_2A841C
endif
CODE_208CEE:
	JSR.w CODE_20801F
	LDA.w $1206
	CMP.b #!Define_SMB3_LevelMusic_ToadHouse
	BEQ.b CODE_208D05
	LDA.w !RAM_SMB3_Global_MusicRegisterBackup
	BEQ.b CODE_208D08
	CMP.w $1206
	BEQ.b CODE_208D05
	STA.w !RAM_SMB3_Global_MusicCh1
CODE_208D05:
	STZ.w !RAM_SMB3_Global_MusicRegisterBackup
CODE_208D08:
	LDA.w !RAM_SMB3_Level_FreezeTimeLimitFlag
	BMI.b CODE_208D4F
	LDY.w !RAM_SMB3_Global_TilesetFromHeader
	CPY.b #$05
	BNE.b CODE_208D36
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$07
	BNE.b CODE_208D31
	INC.b $1B
	LDA.b $1B
	CMP.w $1E9F
	BNE.b CODE_208D27
	LDA.b #$00
	STA.b $1B
CODE_208D27:
	TAY
	LDA.w DATA_21C98F,y
	STA.w $0245
	STZ.w !RAM_SMB3_Global_AnimatedFGTileAnimationFrameIndex
CODE_208D31:
	JSR.w SMB3_LevelTileAnimations_Main
	BRA.b CODE_208D90

CODE_208D36:
	CPY.b #$07
	BEQ.b CODE_208D4F
	LDA.w !RAM_SMB3_Level_PSwitchTimer
	BEQ.b CODE_208D51
	BPL.b CODE_208D49
	STZ.w !RAM_SMB3_Global_AnimatedFGTileAnimationFrameIndex
	LDA.b #$7F
	STA.w !RAM_SMB3_Level_PSwitchTimer
CODE_208D49:
	STZ.w $0245
	JSR.w SMB3_LevelTileAnimations_Main
CODE_208D4F:
	BRA.b CODE_208D90

CODE_208D51:
	CPY.b #$0A
	BNE.b CODE_208D77
	LDA.w !RAM_SMB3_Level_GraphicsAndPaletteSettingFromHeader
	CMP.b #$15
	BNE.b CODE_208D90
	LDY.w $0246
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$03
	BNE.b CODE_208D72
	STZ.w !RAM_SMB3_Global_AnimatedFGTileAnimationFrameIndex
	INY
	CPY.b #$03
	BNE.b CODE_208D6F
	LDY.b #$00
CODE_208D6F:
	STY.w $0246
CODE_208D72:
	JSR.w SMB3_TankLevelTileAnimations_Main
	BRA.b CODE_208D90

CODE_208D77:
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$18
	LSR
	LSR
	LSR
	TAX
	LDA.w DATA_21C9DF,x
	CMP.w $0245
	BEQ.b CODE_208D8A
	STZ.w !RAM_SMB3_Global_AnimatedFGTileAnimationFrameIndex
CODE_208D8A:
	STA.w $0245
	JSR.w SMB3_LevelTileAnimations_Main
CODE_208D90:
	LDA.l !SRAM_SMAS_Global_EnableSMASDebugModeFlag
	BEQ.b CODE_208DB3
	LDA.b !RAM_SMB3_Global_ControllerPress2P1
	ORA.b !RAM_SMB3_Global_ControllerPress2P2
	AND.b #!Joypad_L
	BEQ.b CODE_208DA1
	INC.w $00EC
CODE_208DA1:
	LDA.b !RAM_SMB3_Global_ControllerPress2P1
	ORA.b !RAM_SMB3_Global_ControllerPress2P2
	AND.b #!Joypad_R
	BNE.b CODE_208DB3
	LDA.w $00EC
	AND.b #$01
	BEQ.b CODE_208DB3
	BRL.w CODE_208CE5

CODE_208DB3:
	LDA.w $0349
	BEQ.b CODE_208DBE
	DEC.w $0349
	JMP.w CODE_208E19

CODE_208DBE:
	LDA.w $0571
	BNE.b CODE_208E19
	LDA.w !RAM_SMB3_Level_PauseMenuStatus
	CMP.b #$01
	BEQ.b CODE_208E19
	CMP.b #$03
	BEQ.b CODE_208E19
	LDA.w $1206
	CMP.b #!Define_SMB3_LevelMusic_MusicFade
	BEQ.b CODE_208E19
	CMP.b #!Define_SMB3_LevelMusic_StopMusicCommand
	BEQ.b CODE_208E19
	LDA.b !RAM_SMB3_Global_ControllerPress1
	AND.b #!Joypad_Start>>8
	BEQ.b CODE_208E19
	LDA.w !RAM_SMB3_Level_GraphicsAndPaletteSettingFromHeader
	CMP.b #$16
	BEQ.b CODE_208E19
	CMP.b #$2D
	BEQ.b CODE_208E19
	LDA.w $02D9
	BNE.b CODE_208E19
	LDA.w !RAM_SMB3_Global_MusicRegisterBackup
	BNE.b CODE_208E19
	LDA.b !RAM_SMB3_Level_Player_CurrentPose
	CMP.b #$A4
	BEQ.b CODE_208DFE
	STA.l $7FC520
CODE_208DFE:
	LDY.b #$A4
	LDA.w $037A
	EOR.b #$01
	STA.w $037A
	BNE.b CODE_208E0F
	LDA.l $7FC520
	TAY
CODE_208E0F:
	STY.b !RAM_SMB3_Level_Player_CurrentPose
	JSL.l CODE_22E000
	JSL.l CODE_29EBB7
CODE_208E19:
	LDA.w !RAM_SMB3_Level_PauseMenuStatus
	CMP.b #$03
	BNE.b CODE_208E25
	LDA.b #$01
	STA.w $037A
CODE_208E25:
	LDA.w $037A
	BEQ.b CODE_208E35
	JSL.l SMB3_ResetSpriteOAMRt_Main
	JSL.l CODE_29EBF7
	JMP.w CODE_208CE5

CODE_208E35:
	LDA.b !RAM_SMB3_Level_Player_DeathState
	BNE.b CODE_208E5F
	LDY.b $25
	LDA.w !RAM_SMB3_Level_IsVerticalLevelFlag
	BEQ.b CODE_208E4B
	LDA.w $0216
	AND.b #$F0
	ORA.b $13
	STA.b $B7
	BRA.b CODE_208E52

CODE_208E4B:
	LDA.w $0210
	STA.b $B7
	LDA.b $12
CODE_208E52:
	JSL.l CODE_2097BA
	LDA.w !RAM_SMB3_Level_IsVerticalLevelFlag
	BNE.b CODE_208E5F
	DEC.b $24
	INC.b $23
CODE_208E5F:
	LDA.b $B7
	PHA
	LDA.w !RAM_SMB3_Level_IsVerticalLevelFlag
	BEQ.b CODE_208E73
	LDA.w $0218
	AND.b #$F0
	ORA.w $0219
	STA.b $B7
	BRA.b CODE_208E7B

CODE_208E73:
	LDA.w $0212
	STA.b $B7
	LDA.w $0213
CODE_208E7B:
	PLA
	STA.b $B7
	LDA.w $0414
	BEQ.b CODE_208EE6
	LDA.w $034E
	BEQ.b CODE_208EDB
	LDY.b #$08
	LDA.b !RAM_SMB3_Level_Player_CurrentPowerUp
	BNE.b CODE_208E90
	LDY.b #$94
CODE_208E90:
	STY.b !RAM_SMB3_Level_Player_CurrentPose
	LDA.b #$01
	STA.b $9C
	STZ.w $0781
	STZ.w $0780
CODE_208E9C:
	JSR.w CODE_20801F
	JMP.w CODE_208EBA

CODE_208EA2:
	LDA.b !RAM_SMB3_Global_ControllerPress2P1
	AND.b #!Joypad_L
	BEQ.b CODE_208EAB
	INC.w $00EC
CODE_208EAB:
	LDA.b !RAM_SMB3_Global_ControllerPress2P1
	AND.b #!Joypad_R
	BNE.b CODE_208EBA
	LDA.w $00EC
	AND.b #$01
	BEQ.b CODE_208EBA
	BRA.b CODE_208E9C

CODE_208EBA:
	JSL.l SMB3_ResetSpriteOAMRt_Main
	JSL.l CODE_20E237
	JSL.l CODE_278FC1
	JSL.l CODE_27BE7E
	JSL.l CODE_27B299
	JSL.l CODE_27DCA1
	LDA.w $034E
	CMP.b #$20
	BCC.b CODE_208E9C
	STZ.b $9C
CODE_208EDB:
	STZ.w $034E
	JSL.l CODE_29C794
	JML.l CODE_29DFAD

CODE_208EE6:
	JSL.l SMB3_ResetSpriteOAMRt_Main
	JSL.l CODE_209D1F
	STZ.w $0781
	STZ.w $0780
	JSL.l CODE_23BFA7
	LDA.b !RAM_SMB3_Level_Player_DeathState
	CMP.b #$03
	BEQ.b CODE_208F17
	JSL.l CODE_278FC1
	JSL.l CODE_27BE7E
	JSL.l CODE_27B299
	JSL.l CODE_27DCA1
	LDA.w !RAM_SMB3_Level_RunScrollSpritesFlag
	BEQ.b CODE_208F17
	JSL.l CODE_278500
CODE_208F17:
	LDA.b $14
	BEQ.b CODE_208F26
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b !RAM_SMB3_Level_Player_CurrentPowerUp
	STA.w $0747,x
	STZ.w $07BE
CODE_208F26:
	JSL.l CODE_278000
	LDA.w $0380
	CMP.b #$FF
	BNE.b CODE_208F51
	LDA.w $03EE
	BNE.b CODE_208F51
	LDA.w $037B
	BNE.b CODE_208F51
	LDA.b $28
	BNE.b CODE_208F51
	LDA.w !RAM_SMB3_Global_ReserveBoxState
	BNE.b CODE_208F4D
	JSL.l CODE_29EAA5
	LDA.w !RAM_SMB3_Global_OpenReserveBoxFlag
	BEQ.b CODE_208F57
CODE_208F4D:
	JSL.l CODE_29D8E0
CODE_208F51:
	LDA.b #$00
	STA.l $7E3954
CODE_208F57:
	STZ.w $037B
	LDA.b $14
	BEQ.b CODE_208FBF
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b #$01
	STA.w $074A,x
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	JSR.w CODE_20801F
endif
	JSL.l CODE_29E2B6
CODE_208F6A:
	LDA.b #$80
	STA.b !RAM_SMB3_Global_ScreenDisplayRegisterMirror
	LDA.b #!Define_SMB3_LevelMusic_MusicFade
	STA.w !RAM_SMB3_Global_MusicCh1
	JSR.w CODE_20801F
CODE_208F76:
	STZ.w $0728
	STZ.w !REGISTER_IRQNMIAndJoypadEnableFlags
CODE_208F7C:
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.w $073D,x
	BEQ.b CODE_208F95
	LDA.w $0713
	BNE.b CODE_208F95
	LDA.l $7E3955
	INC
	STA.l $7E3955
	JMP.w CODE_208691

CODE_208F95:
	LDY.b #$06
	JSR.w CODE_2097F2
	STZ.w !RAM_SMB3_Level_ShakeLayer1YOffset
	LDA.b #!Define_SMB3_LevelMusic_MusicFade
	STA.w !RAM_SMB3_Global_MusicCh1
	LDA.w $0713
	BNE.b CODE_208FB8
	LDA.w !RAM_SMB3_Level_TriggerEndingFlag
	BEQ.b CODE_208FB8
	LDA.b #$A8
	STA.b $FF
	LDA.b #$20
	STA.w !RAM_SMB3_Global_CurrentVBlankRoutinePath
	JMP.w SMB3_ProcessPart1OfEnding_Main

CODE_208FB8:
	LDA.b #$28
	STA.b $FF
	JMP.w CODE_2090BF

CODE_208FBF:
	JMP.w CODE_208CE5

;--------------------------------------------------------------------

; Note: Something related to the post boss throne room cutscenes.

CODE_208FC2:
	LDA.b #$C0
	STA.w !RAM_SMB3_Global_CurrentVBlankRoutinePath
	LDA.b #$00
	STA.w !RAM_SMB3_Global_CurrentRasterEffect
	STZ.w $0728
	STZ.b $14
	JSL.l CODE_29C6FA
	LDA.b #$00
	STA.l $7E3955
	JSL.l CODE_29C794
	LDA.b #$80
	STA.w !REGISTER_ScreenDisplayRegister
	STZ.w !REGISTER_IRQNMIAndJoypadEnableFlags
	REP.b #$20
	LDX.b #$80
	STX.w !REGISTER_VRAMAddressIncrementValue
	LDA.w #$2800
	STA.w !REGISTER_VRAMAddressLo
	LDA.w #(!REGISTER_WriteToVRAMPortLo&$0000FF<<8)+$01
	STA.w DMA[$00].Parameters
	STA.w DMA[$01].Parameters
	STA.w DMA[$02].Parameters
	LDA.w #SMB3_Bank43Graphics_FG_PeachLetterFont
	STA.w DMA[$00].SourceLo
	LDA.w #SMB3_Bank39Graphics_Sprite_ThroneRoom
	STA.w DMA[$01].SourceLo
	LDA.w #SMB3_Bank42Graphics_FG_Bowser
	STA.w DMA[$02].SourceLo
	LDX.b #SMB3_Bank43Graphics_FG_PeachLetterFont>>16
	STX.w DMA[$00].SourceBank
	LDX.b #SMB3_Bank39Graphics_Sprite_ThroneRoom>>16
	STX.w DMA[$01].SourceBank
	LDX.b #SMB3_Bank42Graphics_FG_Bowser>>16
	STX.w DMA[$02].SourceBank
	LDA.w #$1000
	STA.w DMA[$00].SizeLo
	LDA.w #SMB3_Bank39Graphics_Sprite_ThroneRoomEnd-SMB3_Bank39Graphics_Sprite_ThroneRoom
	STA.w DMA[$01].SizeLo
	LDA.w #$0800
	STA.w DMA[$02].SizeLo
	LDX.b #$01
	STX.w !REGISTER_DMAEnable
	LDA.w #$6000
	STA.w !REGISTER_VRAMAddressLo
	INX
	STX.w !REGISTER_DMAEnable
	LDA.w #$3400
	STA.w !REGISTER_VRAMAddressLo
	LDX.b #$04
	STX.w !REGISTER_DMAEnable
	SEP.b #$20
	JSL.l CODE_29E29D
CODE_209053:
	JSR.w CODE_20801F
	JSL.l CODE_29C280
	LDA.b $14
	BEQ.b CODE_209053
	LDA.b #!Define_SMB3_LevelMusic_MusicFade
	STA.w !RAM_SMB3_Global_MusicCh1
	LDA.b #$03
	STA.w !RAM_SMB3_Global_MosaicSizeAndBGEnableMirror
CODE_209068:
	JSR.w CODE_20801F
	LDA.w !RAM_SMB3_Global_CurrentWorld
	CMP.b #$06
	BNE.b CODE_20907B
	LDA.w !RAM_SMB3_Global_MosaicSizeAndBGEnableMirror
	CLC
	ADC.b #$10
	STA.w !RAM_SMB3_Global_MosaicSizeAndBGEnableMirror
CODE_20907B:
	DEC.b !RAM_SMB3_Global_ScreenDisplayRegisterMirror
	BPL.b CODE_209068
	LDA.b #$80
	STA.b !RAM_SMB3_Global_ScreenDisplayRegisterMirror
	STZ.w !RAM_SMB3_Global_MosaicSizeAndBGEnableMirror
	LDY.b #$06
	JSR.w CODE_2097F2
	LDX.w !RAM_SMB3_Global_TwoPlayerGameFlag
	DEX
CODE_20908F:
	STZ.w $073D,x
	STZ.w $0713
	STZ.w $0722,x
	STZ.w $0724,x
	DEX
	BPL.b CODE_20908F
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b #SMB3_IndividualPlayerData[$00].Score-SMB3_IndividualPlayerData[$00].ReserveSlots
	CPX.b #$00
	BEQ.b CODE_2090AA
	CLC
	ADC.b #SMB3_IndividualPlayerData[$01].ReserveSlots-SMB3_IndividualPlayerData[$00].ReserveSlots
CODE_2090AA:
	TAY
	LDX.b #$00
CODE_2090AD:
	LDA.w !RAM_SMB3_Level_Player_CurrentScoreHi,x
	STA.w SMB3_IndividualPlayerData[$00].ReserveSlots,y
	INY
	INX
	CPX.b #$03
	BNE.b CODE_2090AD
	INC.w !RAM_SMB3_Global_CurrentWorld
	JMP.w CODE_2080B9

;--------------------------------------------------------------------

; Note: Routine for handling the player dying (after level fade out)

CODE_2090BF:
	LDA.b #$C0
	STA.w !RAM_SMB3_Global_CurrentVBlankRoutinePath
	LDA.b #$00
	STA.w !RAM_SMB3_Global_CurrentRasterEffect
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b #SMB3_IndividualPlayerData[$00].Score-SMB3_IndividualPlayerData[$00].ReserveSlots
	CPX.b #$00
	BEQ.b CODE_2090D5
	CLC
	ADC.b #SMB3_IndividualPlayerData[$01].ReserveSlots-SMB3_IndividualPlayerData[$00].ReserveSlots
CODE_2090D5:
	TAY
	LDX.b #$00
CODE_2090D8:
	LDA.w !RAM_SMB3_Level_Player_CurrentScoreHi,x
	STA.w SMB3_IndividualPlayerData[$00].ReserveSlots,y
	INY
	INX
	CPX.b #$03
	BNE.b CODE_2090D8
	LDA.w !RAM_SMB3_Overworld_ActiveMusicBoxFlag
	BEQ.b CODE_2090EC
	DEC.w !RAM_SMB3_Overworld_ActiveMusicBoxFlag
CODE_2090EC:
	LDY.b #$06
	LDA.w $0713
	BNE.b CODE_20914A
	LDA.w !RAM_SMB3_Global_TilesetFromHeader
	CMP.b #$0F
	BCS.b CODE_209142
	CMP.b #$07
	BEQ.b CODE_209142
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.l $7E397D,x
	STA.l $7E396A
	LDA.l $7E397F,x
	STA.l $7E396B
	LDA.l $7E3981,x
	STA.l $7E396C
	LDA.l $7E3975,x
	STA.l $7E397D,x
	LDA.l $7E3977,x
	STA.l $7E397F,x
	LDA.l $7E3979,x
	STA.l $7E3981,x
	LDA.w $0722,x
	STA.l $7E3985,x
	LDA.w $0724,x
	STA.l $7E3987,x
	JMP.w CODE_209164

CODE_209142:
	LDA.b #$01
	STA.l $7FFF03
	BRA.b CODE_209164

CODE_20914A:
	LDY.b #$02
	STZ.w $0713
	STZ.w !RAM_SMB3_NorSprXXX_GiantQuestionMarkBlock_BlockHitFlags
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b #$01
	STA.w $073F,x
	LDA.w $078C
	BNE.b CODE_209164
	DEC.w !RAM_SMB3_Level_Player_MariosLives,x
	BMI.b CODE_20916F
CODE_209164:
	LDA.b #!Define_SMB3_LevelMusic_MusicFade
	STA.w !RAM_SMB3_Global_MusicCh1
	STY.w !RAM_SMB3_Overworld_CurrentProcess
	JMP.w CODE_2080E5

CODE_20916F:
	LDA.b #$01
	STA.w $005A,x
	STZ.w !RAM_SMB3_Global_TilesetFromHeader
	STZ.b $20
	STZ.b !RAM_SMB3_Overworld_CurrentWarpWhistleState
	STZ.w $0711
	LDA.b #$58
	STA.w $1DCB
	STZ.w $034D
CODE_209186:
	STZ.w !REGISTER_IRQNMIAndJoypadEnableFlags
	JSL.l SMB3_ResetSpriteOAMRt_Main
	JSR.w CODE_20F9EC
	LDA.b #$FF
	STA.b $00
	STZ.b $01
	JSR.w CODE_20FA0B
	LDA.b #$80
	STA.b !RAM_SMB3_Global_ScreenDisplayRegisterMirror
	STA.w !REGISTER_ScreenDisplayRegister
	LDA.w $0728
	BNE.b CODE_2091AF
	LDA.b #!Define_SMB3_LevelMusic_GameOver
	STA.w !RAM_SMB3_Global_MusicCh1
	LDA.b #$A0
	STA.w $02D8
CODE_2091AF:
	REP.b #$20
	LDA.w #$2000
	STA.w !REGISTER_VRAMAddressLo
	LDX.b #$80
	STX.w !REGISTER_VRAMAddressIncrementValue
	LDA.w #(!REGISTER_WriteToVRAMPortLo&$0000FF<<8)+$01
	STA.w DMA[$00].Parameters
	STA.w DMA[$01].Parameters
	STA.w DMA[$02].Parameters
	LDY.b #$01
	LDX.w !RAM_SMB3_Global_CurrentWorld
	CPX.b #$04
	BNE.b CODE_209201
	LDA.w #SMB3_Bank39Graphics_FG_AnimatedOverworldTiles5
	STA.w DMA[$00].SourceLo
	LDX.b #SMB3_Bank39Graphics_FG_AnimatedOverworldTiles5>>16
	STX.w DMA[$00].SourceBank
	LDA.w #$1000
	STA.w DMA[$00].SizeLo
	STY.w !REGISTER_DMAEnable
	LDA.w #$2800
	STA.w !REGISTER_VRAMAddressLo
	LDA.w #SMB3_Bank41Graphics_FG_StaticOverworldTiles
	STA.w DMA[$00].SourceLo
	LDX.b #SMB3_Bank41Graphics_FG_StaticOverworldTiles>>16
	STX.w DMA[$00].SourceBank
	LDA.w #$1000
	STA.w DMA[$00].SizeLo
	STY.w !REGISTER_DMAEnable
	BRA.b CODE_209215

CODE_209201:
	LDA.w #SMB3_Bank41Graphics_FG_AnimatedOverworldTiles1
	STA.w DMA[$00].SourceLo
	LDX.b #SMB3_Bank41Graphics_FG_AnimatedOverworldTiles1>>16
	STX.w DMA[$00].SourceBank
	LDA.w #$2000
	STA.w DMA[$00].SizeLo
	STY.w !REGISTER_DMAEnable
CODE_209215:
	LDA.w #SMB3_Bank38Graphics_Sprite_Overworld
	STA.w DMA[$01].SourceLo
	LDA.w #SMB3_Bank38Graphics_Layer3_Letters
	STA.w DMA[$02].SourceLo
	LDX.b #SMB3_Bank38Graphics_Layer3_Letters>>16
	STX.w DMA[$01].SourceBank
	STX.w DMA[$02].SourceBank
	LDA.w #SMB3_Bank38Graphics_Sprite_OverworldEnd-SMB3_Bank38Graphics_Sprite_Overworld
	STA.w DMA[$01].SizeLo
	LDA.w #SMB3_Bank38Graphics_Layer3_LettersEnd-SMB3_Bank38Graphics_Layer3_Letters
	STA.w DMA[$02].SizeLo
	LDA.w #$6000
	STA.w !REGISTER_VRAMAddressLo
	LDX.b #$02
	STX.w !REGISTER_DMAEnable
	LDA.w #$5800
	STA.w !REGISTER_VRAMAddressLo
	LDX.b #$04
	STX.w !REGISTER_DMAEnable
	REP.b #$10
	PHB
	LDX.w #$1CBE00							;\ Glitch: This code buffers a corrupt palette to the palette buffer! It's bank 3C it's supposed to reference, not 1C!
	LDY.w #SMB3_PaletteMirror[$00].LowByte				;| Luckily, this gets overwritten before the game over screen loads so nothing comes of this.
	LDA.w #$01FF							;|
	MVN SMB3_PaletteMirror[$00].LowByte>>16,$1CBE00>>16		;/
	PLB
	SEP.b #$30
	LDX.w !RAM_SMB3_Global_TwoPlayerGameFlag
	DEX
CODE_209261:
	LDA.l $7E3975,x
	STA.b !RAM_SMB3_Overworld_Mario_YPosLo,x
	LDA.l $7E3977,x
	STA.b !RAM_SMB3_Overworld_Mario_XPosHi,x
	LDA.l $7E3979,x
	STA.b !RAM_SMB3_Overworld_Mario_XPosLo,x
	LDA.l $7E397B,x
	STA.b !RAM_SMB3_Overworld_Mario_UnusedRAM2,x
	LDA.l $7E3992,x
	STA.b !RAM_SMB3_Overworld_Mario_MovementDirection,x
	DEX
	BPL.b CODE_209261
	JSL.l CODE_29BE21
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.l $7E3992,x
	STA.b !RAM_SMB3_Overworld_Mario_MovementDirection,x
	LDY.b #$00
	LDA.w !RAM_SMB3_Global_CurrentWorld
	CMP.b #$07
	BNE.b CODE_2092A2
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b !RAM_SMB3_Overworld_Mario_XPosHi,x
	CMP.b #$02
	BNE.b CODE_2092A2
	INY
CODE_2092A2:
	STY.w !RAM_SMB3_Overworld_EnableDarknessFlag
	LDY.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.w $0722,y
	STA.b $B7
	LDA.w $0724,y
	JSL.l CODE_2097BA
	LDA.b $24
	STA.b $23
	STZ.w !RAM_SMB3_Level_GraphicsAndPaletteSettingFromHeader
	LDA.b #$20
	STA.w $0612
	LDA.b #$02
	JSR.w CODE_2095D5
	JSL.l CODE_20F58D
	JSL.l CODE_29EAA5
	JSL.l SMB3_DrawPlayerLetterOnStatusBar_Main
	JSL.l SMB3_DrawWorldNumberOnStatusBar_Main
	LDA.b #$00
	JSR.w CODE_2095D5
	LDA.w !RAM_SMB3_Overworld_EnableDarknessFlag
	BNE.b CODE_2092E2
	JSR.w CODE_209C85
CODE_2092E2:
	JSR.w CODE_20957E
	JSL.l CODE_2A8B4B
	LDY.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.w $0722,y
	STA.w $0210
	STA.b $B7
	LDA.w $0724,y
	STA.b $12
	STA.w $0211
	JSL.l CODE_2097BA
	LDA.w $0728
	BNE.b CODE_209347
	JSL.l CODE_238000
	JSL.l CODE_2AF800
	LDA.b #$44								;\ Note: HDMA Game over window's half-width.
	STA.w $0287								;/ It uses this value in order to make a center aligned window.
	LDX.b #$14
	LDA.b #$2C
	STA.w $0281
	LDA.b #$01
	STA.w $034D
	LDA.w !RAM_SMB3_Global_TwoPlayerGameFlag
	CMP.b #$02
	BNE.b CODE_20933F
	LDA.w !RAM_SMB3_Level_Player_CurrentCharacter
	EOR.b #$01
	TAY
	LDA.w !RAM_SMB3_Level_Player_MariosLives,y
	BMI.b CODE_20933F
	LDX.b #$15
	STZ.w $034D
	LDA.b #$24
	STA.w $0281
	LDA.b #$60
	STA.w $1DCB
CODE_20933F:
	TXA
	JSR.w CODE_2095D5
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR]
	LDA.w !RAM_SMB3_Global_TwoPlayerGameFlag
	CMP.b #$01
	BNE.b +
	; Expanding window's width for 1-player game over.
	LDA.b #$44+8
	STA.w $0287

+:
endif
	JSL.l CODE_2AF867
CODE_209347:
	LDA.b #$EF
	STA.w $0216
	STZ.w $021B
	LDA.b #$C0
	STA.w !RAM_SMB3_Global_CurrentVBlankRoutinePath
	JSL.l CODE_29C794
	LDA.b #$01
	STA.w !RAM_SMB3_Global_SpecialLayerBGModeAndTileSizeSettingMirror
	LDA.b #$11
CODE_20935E:
	STA.w $020F
	LDA.b #$09
	STA.w !RAM_SMB3_Global_BGModeAndTileSizeSettingMirror
	STA.w !REGISTER_BGModeAndTileSizeSetting
	LDA.b #$17
	STA.w !RAM_SMB3_Global_MainScreenLayersMirror
	LDA.b #$03
	STA.w !RAM_SMB3_Global_OAMSizeAndDataAreaDesignationMirror
	LDA.b #$80
	STA.w !REGISTER_IRQNMIAndJoypadEnableFlags
	JSL.l SMB3_ResetSpriteOAMRt_Main
	JSL.l CODE_23840D
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDY.b #$06
	CPX.b #$00
	BEQ.b CODE_20938C
	LDY.b #SMB3_IndividualPlayerData[$01].ReserveSlots-SMB3_IndividualPlayerData[$00].ReserveSlots+$06
CODE_20938C:
	LDA.b #$06
	STA.b $00
	LDA.b #$00
CODE_209392:
	STA.w SMB3_IndividualPlayerData[$00].CardSlots,y
	DEY
	DEC.b $00
	BPL.b CODE_209392
	LDY.b #$3F
	CPX.b #$00
	BEQ.b CODE_2093A2
	LDY.b #$7F
CODE_2093A2:
	LDA.b #$3F
	STA.b $00
	REP.b #$30
	TYA
	AND.w #$00FF
	TAY
	LDA.w !RAM_SMB3_Global_CurrentWorld
	AND.w #$00FF
	INC
	ASL
	ASL
	ASL
	ASL
	ASL
	ASL
	DEC
	TAX
	SEP.b #$20
CODE_2093BE:
	LDA.w !RAM_SMB3_Overworld_LevelsClearedBits,y
	AND.w DATA_218000,x
	STA.w !RAM_SMB3_Overworld_LevelsClearedBits,y
	DEX
	DEY
	DEC.b $00
	BPL.b CODE_2093BE
	SEP.b #$10
	JSR.w CODE_209594
	JSL.l CODE_29E29D
	LDA.b #$0F
	STA.b !RAM_SMB3_Global_ScreenDisplayRegisterMirror
	STA.w !REGISTER_ScreenDisplayRegister
CODE_2093DD:
	JSR.w CODE_20801F
	JSL.l SMB3_ResetSpriteOAMRt_Main
	JSL.l CODE_23840D
	LDA.w $0728
	BEQ.b CODE_2093F4
	DEC
	BEQ.b CODE_2093F4
	JSL.l SMB3_DrawWorld5CloudSprite_Main
CODE_2093F4:
	LDA.w $0728
	CMP.b #$06
	BEQ.b CODE_209406
	CMP.b #$09
	BNE.b CODE_2093DD
	LDA.w !RAM_SMB3_Global_TwoPlayerGameFlag
	CMP.b #$01
	BEQ.b CODE_209419
CODE_209406:
	LDA.b #!Define_SMB3_LevelMusic_MusicFade
	STA.w !RAM_SMB3_Global_MusicCh1
	JSL.l CODE_29E2B6
	LDA.w $0728
	CMP.b #$09
	BEQ.b CODE_209419
	JMP.w CODE_209186

CODE_209419:
	STZ.w $0728
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
endif
	LDA.w $1DCB
	CMP.b #$70
	BCC.b CODE_209426
	JMP.w CODE_209460

CODE_209426:
	STZ.w $0728
	STZ.w $1DCB
	STZ.w !RAM_SMB3_NorSprXXX_GiantQuestionMarkBlock_BlockHitFlags
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	LDA.b #$04
	STA.w !RAM_SMB3_Level_Player_MariosLives,x
endif
	LDA.w $0210
	STA.w $0722,x
	LDA.b $12
	STA.w $0724,x
	LDA.b !RAM_SMB3_Overworld_Mario_YPosLo,x
	STA.l $7E3975,x
	LDA.b !RAM_SMB3_Overworld_Mario_XPosHi,x
	STA.l $7E3977,x
	LDA.b !RAM_SMB3_Overworld_Mario_XPosLo,x
	STA.l $7E3979,x
	LDA.b !RAM_SMB3_Overworld_Mario_UnusedRAM2,x
	STA.l $7E397B,x
	STZ.w $073F,x
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) == $00
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b #$04
	STA.w !RAM_SMB3_Level_Player_MariosLives,x
endif
CODE_209460:
	JSR.w CODE_209594
	LDA.b #$80
	STA.w !REGISTER_ScreenDisplayRegister
	LDY.b #$00
	STY.w !RAM_SMB3_Overworld_CurrentProcess
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	JMP.w CODE_2084F8

;--------------------------------------------------------------------

CODE_209473:
	LDA.b #$15
	STA.w !RAM_SMB3_Global_MainScreenLayersMirror
	LDA.b #$02
	STA.w !RAM_SMB3_Global_SubScreenLayersMirror
	LDA.b #$20
	STA.w !RAM_SMB3_Global_ColorMathSelectAndEnableMirror
	JSL.l SMB3_BattleMode_LoadSpriteGFX_Main
	JSR.w CODE_209C85
	JSL.l CODE_2AB48E
	LDA.b #$C0
	STA.w !RAM_SMB3_Global_CurrentVBlankRoutinePath
	LDA.b #$80
	STA.w !RAM_SMB3_Global_CurrentRasterEffect
	LDA.b #!Define_SMB3_LevelMusic_HammerBroEncounter
	STA.w !RAM_SMB3_Global_MusicRegisterBackup
	JSL.l CODE_29C794
	LDA.b #$00
	STA.l $7E3955
	JSL.l CODE_29E29D
	LDA.b #$80
	STA.w !REGISTER_IRQNMIAndJoypadEnableFlags
CODE_2094AF:
	JSR.w CODE_20801F
	LDA.w !RAM_SMB3_Global_MusicRegisterBackup
	BEQ.b CODE_2094BD
	STA.w !RAM_SMB3_Global_MusicCh1
	STZ.w !RAM_SMB3_Global_MusicRegisterBackup
CODE_2094BD:
	JSL.l SMB3_ResetSpriteOAMRt_Main
	JSL.l CODE_23E190
	LDA.w $0014
	BEQ.b CODE_2094AF
	JSL.l CODE_29E2B6
	LDA.b #!Define_SMB3_LevelMusic_MusicFade
	STA.w !RAM_SMB3_Global_MusicCh1
	LDA.b #$80
	STA.b !RAM_SMB3_Global_ScreenDisplayRegisterMirror
	JSR.w CODE_20801F
	LDX.w $078C
	DEX
	CPX.w !RAM_SMB3_Level_Player_CurrentCharacter
	BNE.b CODE_2094E6
	JMP.w CODE_209571

CODE_2094E6:
	TXA
	EOR.b #$01
	TAY
	LDA.w $0722,y
	STA.b $05
	LDA.w $0724,y
	STA.b $06
	PHB
	LDA.b #$7E397D>>16
	PHA
	PLB
	LDA.w $7E397D,y
	STA.b $00
	LDA.w $7E397F,y
	STA.b $01
	LDA.w $7E3981,y
	STA.b $02
	LDA.w $7E3985,y
	STA.b $03
	LDA.w $7E3987,y
	STA.b $04
	LDA.w $7E397D,x
	STA.w $7E397D,y
	LDA.w $7E397F,x
	STA.w $7E397F,y
	LDA.w $7E3981,x
	STA.w $7E3981,y
	LDA.w $7E3985,x
	STA.w $7E3985,y
	LDA.w $7E3987,x
	STA.w $7E3987,y
	PLB
	LDA.b $00
	STA.l $7E397D,x
	LDA.b $01
	STA.l $7E397F,x
	LDA.b $02
	STA.l $7E3981,x
	LDA.b $03
	STA.l $7E3985,x
	LDA.b $04
	STA.l $7E3987,x
	LDA.b $05
	STA.w $0722,x
	LDA.b $06
	STA.w $0724,x
	LDA.b #SMB3_IndividualPlayerData[$00].Score-SMB3_IndividualPlayerData[$00].ReserveSlots
	CPX.b #$01
	BNE.b CODE_209562
	CLC
	ADC.b #SMB3_IndividualPlayerData[$01].ReserveSlots-SMB3_IndividualPlayerData[$00].ReserveSlots
CODE_209562:
	TAY
	LDX.b #$00
CODE_209565:
	LDA.w SMB3_IndividualPlayerData[$00].ReserveSlots,y
	STA.w !RAM_SMB3_Level_Player_CurrentScoreHi,x
	INY
	INX
	CPX.b #$03
	BNE.b CODE_209565
CODE_209571:
	LDX.w $078C
	STX.w $0713
	DEX
	STX.w !RAM_SMB3_Level_Player_CurrentCharacter
	JMP.w CODE_208F7C

CODE_20957E:
	LDA.w !RAM_SMB3_Global_CurrentWorld
	CMP.b #$07
	BNE.b CODE_209593
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b !RAM_SMB3_Overworld_Mario_XPosHi,x
	CMP.b #$01
	BNE.b CODE_209593
	LDA.b #$31
	JSR.w CODE_2095D5
CODE_209593:
	RTS

;--------------------------------------------------------------------

CODE_209594:
	LDY.w !RAM_SMB3_Global_TwoPlayerGameFlag
	CPY.b #$01
	BEQ.b CODE_2095A4
	DEY
CODE_20959C:
	LDA.w !RAM_SMB3_Level_Player_MariosLives,y
	BPL.b CODE_2095D3
	DEY
	BPL.b CODE_20959C
CODE_2095A4:
	LDX.b #$02
CODE_2095A6:
	LDY.b #$0D
CODE_2095A8:
	LDA.w !RAM_SMB3_Overworld_OWSpr_SpriteID,y
	BEQ.b CODE_2095B7
	CMP.w DATA_21CDDB,x
	BNE.b CODE_2095B7
	LDA.b #!Define_SMB3_SpriteID_OWSpr00_NoSprite
	STA.w !RAM_SMB3_Overworld_OWSpr_SpriteID,y
CODE_2095B7:
	DEY
	BPL.b CODE_2095A8
	DEX
	BPL.b CODE_2095A6
	LDA.b #$00
CODE_2095BF:
	STA.l $7E3967
	STA.l !RAM_SMB3_Overworld_UsedReserveAnchorFlag
	LDA.b #$1F
	STA.l $7E3968
	LDA.b #$40
	STA.l $7E3969
CODE_2095D3:
	RTS

;--------------------------------------------------------------------

CODE_2095D4:
	RTS

;--------------------------------------------------------------------

CODE_2095D5:
	PHA
	STA.b !RAM_SMB3_Global_StripeImageDataLo
	ASL
	CLC
	ADC.b !RAM_SMB3_Global_StripeImageDataLo
	TAY
	PHB
	LDA.b #DATA_228B5C>>16
	PHA
	PLB
	LDA.w DATA_228B5C,y
	STA.b !RAM_SMB3_Global_StripeImageDataLo
	LDA.w DATA_228B5C+$01,y
	STA.b !RAM_SMB3_Global_StripeImageDataHi
	LDA.w DATA_228B5C+$02,y
	STA.b !RAM_SMB3_Global_StripeImageDataBank
	PLB
	JSL.l SMB3_UploadStripeImage_Main
	PLA
	BNE.b CODE_209606
	STA.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	STA.w !RAM_SMB3_Global_StripeImageUploadIndexHi
	DEC
	STA.w SMB3_StripeImageUploadTable[$00].LowByte
	STA.w SMB3_StripeImageUploadTable[$00].HighByte
CODE_209606:
	RTS

;--------------------------------------------------------------------

; Note: Something related to block interaction?

DATA_209607:
	dl DATA_29BE00
	dl DATA_248918
	dl DATA_268828
	dl DATA_24ADB0
	dl DATA_24E660
	dl DATA_25B030
	dl DATA_258860
	dl DATA_258860
	dl DATA_258860
	dl DATA_25D510
	dl DATA_26B020
	dl DATA_25B030
	dl DATA_24E660
	dl DATA_25B030
	dl DATA_24ADB0
	dl DATA_209640
	dl DATA_209640
	dl DATA_209640
	dl DATA_23A540

DATA_209640:
	db $FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF

SMB3_SetMap16TileAttributeDataTable:
.Main:
;$209648
	LDA.w !RAM_SMB3_Global_TilesetFromHeader
	STA.b $00
	ASL
	CLC
	ADC.b $00
	TAX
	LDA.l DATA_209607,x
	STA.b $00
	LDA.l DATA_209607+$01,x
	STA.b $01
	LDA.l DATA_209607+$02,x
	STA.b $02
	LDY.b #$07
CODE_209666:
	LDA.b [$00],y
	STA.w !RAM_SMB3_Global_Map16FloorTileAttributeTable,y
	DEY
	BPL.b CODE_209666
	RTS

;--------------------------------------------------------------------

CODE_20966F:
	LDY.b #$1C
CODE_209671:
	LDA.b #$00
	STA.w $1044,y
	DEY
	BPL.b CODE_209671
	RTS

;--------------------------------------------------------------------

CODE_20967A:
	LDA.w $1053
	CLC
	ADC.w $1056
	STA.w $1053
	LDA.w $1051
	ADC.b #$00
	STA.w $1051
	LDA.w $105F
	CMP.b #$FE
	BNE.b CODE_2096BB
	LDY.w $104F
	LDA.w $1047,y
	CMP.b #$08
	BCS.b CODE_2096BB
	LDA.w $1051
	CMP.b #$04
	BCC.b CODE_2096BB
	LDA.b #$08
	STA.w $1051
	LDA.w $1053
	AND.b #$1F
	STA.w $1053
	LDA.w $104F
	AND.b #$02
	BEQ.b CODE_2096BB
	STX.w $105F
CODE_2096BB:
	RTS

;--------------------------------------------------------------------

CODE_2096BC:
	LDA.w $1053
	AND.b #$C0
	STA.w $1054
	LDA.w $1051
	AND.b #$0F
	STA.w $1052
	CLC
	ROR.w $1052
	ROR.w $1054
	CLC
	ROR.w $1052
	ROR.w $1054
	LDA.w $1053
	AND.b #$1F
	LSR
	CLC
	ADC.w $1054
	STA.w $1054
	RTS

;--------------------------------------------------------------------

CODE_2096E8:
	LDA.w $1053
	AND.b #$01
	STA.w $1055
	LDA.w $1053
	AND.b #$20
	BNE.b CODE_2096FC
	ASL.w $1055
	BRA.b CODE_209700

CODE_2096FC:
	SEC
	ROL.w $1055
CODE_209700:
	RTS

;--------------------------------------------------------------------

CODE_209701:
	ASL
	ADC.b #$00
	ASL
	ADC.b #$00
	STA.b $0C
	TXA
	LSR
	LSR
	LSR
	STA.b $0D
	LDA.b $0C
	AND.b #$03
	ORA.b #$08
	STA.b $0E
	LDA.b $0C
	AND.b #$C0
	ORA.b $0D
	STA.b $0F
	RTL

;--------------------------------------------------------------------

SMB3_GiveDiceRollReward:
.Main:
;$209720
	TYA						;\ Optimization: NES style coding. Replace with PHY : PHX.
	PHA						;|
	TXA						;|
	PHA						;/
	STZ.b $0F
	LDY.w !RAM_SMB3_Level_Player_CurrentCharacter
	CPY.b #$00
	BEQ.b CODE_209737
CODE_20972D:
	LDA.b $0F
	CLC
	ADC.b #SMB3_IndividualPlayerData[$01].ReserveSlots-SMB3_IndividualPlayerData[$00].ReserveSlots
	STA.b $0F
	DEY
	BNE.b CODE_20972D
CODE_209737:
	TXA
	CLC
	ADC.b $0F
	TAX
	INC.w SMB3_IndividualPlayerData[$00].CardSlots,x
	PLA						;\ Optimization: NES style coding. Replace with PLX : PLY.
	TAX						;|
	PLA						;|
	TAY						;/
	RTL

;--------------------------------------------------------------------

CODE_209744:
	JSR.w CODE_2096BC
	JSR.w CODE_2096E8
	LDA.b #$7E2000>>16
	STA.b $30
	LDA.w !RAM_SMB3_Level_IsVerticalLevelFlag
	BEQ.b CODE_209763
	LDY.w $0376
	LDA.w DATA_21823C,y
	STA.b $2E
	LDA.w DATA_21824C,y
	STA.b $2F
	JMP.w CODE_20976D

CODE_209763:
	LDA.w DATA_218200
	STA.b $2E
	LDA.w DATA_218200+$01
	STA.b $2F
CODE_20976D:
	LDA.w $1051
	AND.b #$08
	BEQ.b CODE_209776
	INC.b $2F
CODE_209776:
	LDA.w !RAM_SMB3_Global_TilesetFromHeader
	ASL
	TAY
	LDA.w CODE_21CE5A,y
	STA.b $0C
	LDA.w CODE_21CE5A+$01,y
	STA.b $0D
	LDY.w !RAM_SMB3_Global_TilesetFromHeader
	LDA.w CODE_21CE80,y
	STA.b $0E
	LDY.w $1054
	LDA.b [$2E],y
	REP.b #$30
	AND.w #$00FF
	ASL
	ASL
	ASL
	TAY
	TXA
	AND.w #$00FF
	TAX
	LDA.w $1055
	AND.w #$00FF
	ASL
	STA.b $00
	TYA
	CLC
	ADC.b $00
	TAY
	LDA.b [$0C],y
	STA.w $0382,x
	STY.b $00
	STX.b $02
	SEP.b #$30
	RTS

;--------------------------------------------------------------------

CODE_2097BA:
	LDY.w !RAM_SMB3_Level_IsVerticalLevelFlag
	BNE.b CODE_2097D1
	LDX.b #$03
CODE_2097C1:
	LSR
	ROR.b $B7
	DEX
	BPL.b CODE_2097C1
	LDA.b $B7
	STA.b $24
	CLC
	ADC.b #$10
	STA.b $23
	RTL

CODE_2097D1:
	LDA.b $B7
	BEQ.b CODE_2097E6
	SEC
	SBC.b #$10
	STA.b $B7
	CMP.b #$F0
	BCC.b CODE_2097E6
	SEC
	SBC.b #$11
	STA.b $B7
	CLC
	ADC.b #$10
CODE_2097E6:
	STA.b $23
	CLC
	ADC.b #$E0
	BCC.b CODE_2097EF
	ADC.b #$00
CODE_2097EF:
	STA.b $24
	RTL

;--------------------------------------------------------------------

CODE_2097F2:
	STY.b $01
	LDY.b #$00
	STY.b $00
	TYA
CODE_2097F9:
	LDX.b $01
	CPX.b #$01
	BEQ.b CODE_209801
	STA.b ($00),y
CODE_209801:
	DEY
	BNE.b CODE_2097F9
	DEC.b $01
	BPL.b CODE_2097F9
	RTS

;--------------------------------------------------------------------

CODE_209809:
	PHY
	PHB
	LDY.b #$7E2000>>16
	PHY
	PLB
	STA.w $7E2000,x
	STA.w $7E21B0,x
	STA.w $7E2360,x
	STA.w $7E2510,x
	STA.w $7E26C0,x
	STA.w $7E2870,x
	STA.w $7E2A20,x
	STA.w $7E2BD0,x
	STA.w $7E2D80,x
	STA.w $7E2F30,x
	STA.w $7E30E0,x
	STA.w $7E3290,x
	STA.w $7E3440,x
	STA.w $7E35F0,x
	STA.w $7E37A0,x
	STZ.w $7E4000,x
	STZ.w $7E41B0,x
	STZ.w $7E4360,x
	STZ.w $7E4510,x
	STZ.w $7E46C0,x
	STZ.w $7E4870,x
	STZ.w $7E4A20,x
	STZ.w $7E4BD0,x
	STZ.w $7E4D80,x
	STZ.w $7E4F30,x
	STZ.w $7E50E0,x
	STZ.w $7E5290,x
	STZ.w $7E5440,x
	STZ.w $7E55F0,x
	STZ.w $7E57A0,x
	INX
	PLB
	PLY
	RTL

;--------------------------------------------------------------------

CODE_20986D:
	PHY
	PHB
	LDY.b #$7E2000>>16
	PHY
	PLB
	STA.w $7E20C0,x
	STA.w $7E2270,x
	STA.w $7E2420,x
	STA.w $7E25D0,x
	STA.w $7E2780,x
	STA.w $7E2930,x
	STA.w $7E2AE0,x
	STA.w $7E2C90,x
	STA.w $7E2E40,x
	STA.w $7E2FF0,x
	STA.w $7E31A0,x
	STA.w $7E3350,x
	STA.w $7E3500,x
	STA.w $7E36B0,x
	STA.w $7E3860,x
	STZ.w $7E40C0,x
	STZ.w $7E4270,x
	STZ.w $7E4420,x
	STZ.w $7E45D0,x
	STZ.w $7E4780,x
	STZ.w $7E4930,x
	STZ.w $7E4AE0,x
	STZ.w $7E4C90,x
	STZ.w $7E4E40,x
	STZ.w $7E4FF0,x
	STZ.w $7E51A0,x
	STZ.w $7E5350,x
	STZ.w $7E5500,x
	STZ.w $7E56B0,x
	STZ.w $7E5860,x
	PLB
	PLY
	RTL

;--------------------------------------------------------------------

	%ROUTINE_SMB3_LoadLevelDataAndHeader(NULLROM)			; $2098D0

;--------------------------------------------------------------------

CODE_209B2A:
	LDA.b $0E
	ASL
	ASL
	ASL
	ASL
	STA.b $06
	LDA.b $0F
	AND.b #$0F
	ORA.b $06
	STA.w $0700
	LDA.b $0F
	AND.b #$F0
	LSR
	LSR
	LSR
	TAX
	LDA.w !RAM_SMB3_Level_IsVerticalLevelFlag
	BEQ.b CODE_209B57
	TXA
	LSR
	TAX
	LDA.w DATA_21823C,x
	STA.b $2E
	LDA.w DATA_21824C,x
	STA.b $2F
	BRA.b CODE_209B77

CODE_209B57:
	CPX.b #$1E
	BNE.b CODE_209B5D
	DEX
CODE_209B5C:
	DEX
CODE_209B5D:
	LDA.b #$7E2000>>16
	STA.w $0030
	LDA.w DATA_218200,x
	STA.b $2E
	LDA.w DATA_218200+$01,x
	STA.b $2F
	INC
	STA.b $04
	LDA.b $0E
	AND.b #$10
	BEQ.b CODE_209B77
	INC.b $2F
CODE_209B77:
	LDA.b $2F
	STA.b $05
	RTL

;--------------------------------------------------------------------

CODE_209B7C:
	PHY
	PHX
	LDA.b $0F
	PHA
	LDA.b $0C
	PHA
	LDA.b $0F
	LSR
	LSR
	LSR
	LSR
	STA.b $0F
	LDA.b $0E
	ASL
CODE_209B8F:
	ASL
	ASL
	ASL
	ORA.b $0F
	STA.b $0F
	LDA.b $0F
	AND.b #$F8
	LSR
	LSR
	ORA.b $0C
	STA.b $0C
	LDA.w $0415
	BEQ.b CODE_209BAC
	LDA.b $0C
	CLC
	ADC.b #$40
	STA.b $0C
CODE_209BAC:
	LDA.b $0F
	AND.b #$07
	TAX
	LDY.b $0C
	LDA.w !RAM_SMB3_Level_ItemMemoryBits,y
	ORA.w DATA_21CE52,x
	STA.w !RAM_SMB3_Level_ItemMemoryBits,y
	PLA
	STA.b $0C
	PLA
	STA.b $0F
	PLX
	PLY
	RTL

;--------------------------------------------------------------------

	%ROUTINE_SMB3_LoadLevelRoutine(NULLROM)			; $209BC5

;--------------------------------------------------------------------

SMB3_LoadResizableObjects:
.Main:
;$209C05
	LDA.w !RAM_SMB3_Global_TilesetFromHeader
	JSL.l SMB3_ExecutePtr_Long

DATA_209C0C:
	dl SMB3_ProcessOverworldResizableObjects_Main
	dl SMB3_ProcessConstructedPlainResizableObjects_Main
	dl SMB3_ProcessFortressAndCastleResizableObjects_Main
	dl SMB3_ProcessGrassyPlainResizableObjects_Main
	dl SMB3_ProcessSkyPlainResizableObjects_Main
	dl SMB3_ProcessPipeLevelResizableObjects_Main
	dl SMB3_ProcessUnderwaterAndSnowyPlainResizableObjects_Main
	dl SMB3_ProcessToadHouseResizableObjects_Main
	dl SMB3_ProcessPyramidAndPrisonResizableObjects_Main
	dl SMB3_ProcessDesertResizableObjects_Main
	dl SMB3_ProcessAirshipAndTankResizableObjects_Main
	dl SMB3_ProcessGiantLevelResizableObjects_Main
	dl SMB3_ProcessSnowySkyPlainResizableObjects_Main
	dl SMB3_ProcessSnowyCloudLevelResizableObjects_Main
	dl SMB3_ProcessUndergroundAndBonusRoomResizableObjects_Main
	dl SMB3_ProcessSpadeLevelIntroResizableObjects_Main
	dl SMB3_ProcessSlidingTileMinigameResizableObjects_Main
	dl SMB3_ProcessCardFlipMinigameResizableObjects_Main
	dl SMB3_ProcessBattleModeResizableObjects_Main

;--------------------------------------------------------------------

SMB3_LoadStaticObjects:
.Main:
;$209C45
	LDA.w !RAM_SMB3_Global_TilesetFromHeader
	JSL.l SMB3_ExecutePtr_Long

DATA_209C4C:
	dl SMB3_ProcessOverworldStaticObjects_Main
	dl CODE_2489EA
	dl CODE_26895F
	dl CODE_24AEF3
	dl CODE_24E75A
	dl CODE_25B126
	dl CODE_2589FD
	dl CODE_2589FD
	dl CODE_2589FD
	dl CODE_25D617
	dl CODE_26B113
	dl CODE_25B126
	dl CODE_24E75A
	dl CODE_25B126
	dl CODE_24AEF3
	dl CODE_23914A
	dl CODE_23914A
	dl CODE_23914A
	dl CODE_23A5E8

;--------------------------------------------------------------------

CODE_209C85:
	LDA.w !RAM_SMB3_Level_IsVerticalLevelFlag
	BNE.b CODE_209CC1
	LDX.b $25
	LDA.w $0210
	STA.b $26,x
CODE_209C91:
	JSR.w CODE_209D7A
	JSL.l CODE_29E953
	LDX.b $25
	LDA.b $26,x
	CLC
	ADC.w DATA_21CE95,x
	STA.b $26,x
	LDX.b $25
	LDA.b $26,x
	AND.b #$08
	CMP.w DATA_21CE97,x
	BNE.b CODE_209CB5
	LDA.b $23,x
	CLC
	ADC.w DATA_21CE93,x
	STA.b $23,x
CODE_209CB5:
	DEC.w $0612
	BNE.b CODE_209C91
	LDA.b #$FF
	STA.b $26
	STA.b $27
	RTS

CODE_209CC1:
	STZ.b $25
	LDA.b #$E0
	STA.w $0216
	CLC
	ADC.b #$08
	STA.b $26
	LDY.w $0376
	DEY
	TYA
	ORA.b #$E0
	STA.b $23
	LDA.w $0376
	BEQ.b CODE_209CE8
	ASL
	ASL
	ASL
	ASL
	STA.b $06
	LDA.b $23
	SEC
	SBC.b $06
	STA.b $23
CODE_209CE8:
	JSR.w CODE_209E43
	JSR.w CODE_209E73
	JSL.l CODE_29EA32
	LDA.w $0216
	CLC
	ADC.b #$08
	STA.w $0216
	AND.b #$08
	BNE.b CODE_209D12
	LDA.b $23
	CLC
	ADC.b #$10
	STA.b $23
	AND.b #$F0
	BNE.b CODE_209D12
	INC.b $23
	LDA.b #$0F
	AND.b $23
	STA.b $23
CODE_209D12:
	LDA.w $0216
	CMP.b #$D0
	BNE.b CODE_209CE8
	STZ.w $0216
	STZ.b $26
	RTS

;--------------------------------------------------------------------

; Note: Seems scrolling related.

CODE_209D1F:
	LDA.w !RAM_SMB3_Level_IsVerticalLevelFlag
	BEQ.b CODE_209D28
	JSR.w CODE_209D63
	RTL

CODE_209D28:
	LDX.b $25
	LDA.w $0210
	AND.b #$F8
	CMP.b $26,x
	BEQ.b CODE_209D5A
	TAY
	LDA.w $0612
	BNE.b CODE_209D4C
	LDA.w $0210
	AND.b #$07
	CPX.b #$00
	BNE.b CODE_209D48
	CMP.b #$02
	BCS.b CODE_209D4C
	BRA.b CODE_209D5A

CODE_209D48:
	CMP.b #$05
	BCS.b CODE_209D5A
CODE_209D4C:
	STY.b $26,x
	LDA.b $25
	EOR.b #$01
	TAX
	LDA.b #$FF
	STA.b $26,x
	JSR.w CODE_209D7A
CODE_209D5A:
	LDA.w $0707
	BEQ.b CODE_209D62
	JSR.w CODE_209E42
CODE_209D62:
	RTL

CODE_209D63:
	LDA.w $0216
	AND.b #$F8
	CMP.b $26
	BEQ.b CODE_209D79
	LDA.w $0216
	AND.b #$F8
	STA.b $26
	JSR.w CODE_209E43
	JSR.w CODE_209E73
CODE_209D79:
	RTS

CODE_209D7A:
	LDA.b #$FF
	STA.l $7F2000
	LDX.b $25
	LDA.b $26,x
	AND.b #$08
	LSR
	LSR
	LSR
	STA.b $C2
	LDA.w $0210
	AND.b #$0F
	CPX.b #$00
	BNE.b CODE_209D9A
	CMP.b #$04
	BCS.b CODE_209D9E
	BRA.b CODE_209DA3

CODE_209D9A:
	CMP.b #$0C
	BCS.b CODE_209DA3
CODE_209D9E:
	LDA.b #$01
	STA.w $0707
CODE_209DA3:
	LDY.w !RAM_SMB3_Global_TilesetFromHeader
	LDA.w CODE_21CE80,y
	STA.b $08
	LDA.w !RAM_SMB3_Global_TilesetFromHeader
	ASL
	TAY
	LDA.w CODE_21CE5A,y
	STA.b $06
	LDX.w CODE_21CE5A+$01,y
	STX.b $07
	LDX.b $25
	LDA.b $23,x
	AND.b #$F0
	LSR
	LSR
	LSR
	TAY
	LDA.b #$7E2000>>16
	STA.b $0F
	REP.b #$20
	LDA.w DATA_218200,y
	STA.b $0D
	LDA.w #$001A
	STA.b $00
	LDA.b $23,x
	AND.w #$000F
	STA.b $09
	REP.b #$10
	LDX.w #$0000
CODE_209DE0:
	LDY.b $09
	LDA.b [$0D],y
	AND.w #$00FF
	ASL
	ASL
	ASL
	TAY
	LDA.b $C2
	AND.w #$00FF
	BEQ.b CODE_209DF6
	INY
	INY
	INY
	INY
CODE_209DF6:
	PHY
	LDA.b $09
	CLC
	ADC.w #$2000
	TAY
	LDA.b [$0D],y
	AND.w #$00FF
	BEQ.b CODE_209E0B
	PLA
	CLC
	ADC.w #$0800
	PHA
CODE_209E0B:
	PLY
	LDA.b [$06],y
	STA.w $0382,x
	INY
	INY
	LDA.b [$06],y
	STA.w $0384,x
	LDA.b $09
	CLC
	ADC.w #$0010
	STA.b $09
	INX
	INX
	INX
	INX
	DEC.b $00
	BPL.b CODE_209DE0
	SEP.b #$30
	LDX.b $25
	LDA.b $23,x
	AND.b #$0F
	ASL
	ORA.b $C2
	STA.w $0381
	LDA.b $23,x
	AND.b #$10
	BEQ.b CODE_209E3E
	LDA.b #$04
CODE_209E3E:
	STA.w $0380
	RTS

CODE_209E42:
	RTS

CODE_209E43:
	REP.b #$20
	LDX.b $25
	LDA.b $23,x
	AND.w #$00F0
	ASL
	ASL
	XBA
	STA.w $0380
	SEP.b #$20
	LDA.b $23,x
	AND.b #$01
	BEQ.b CODE_209E62
	LDA.w $0380
	EOR.b #$08
	STA.w $0380
CODE_209E62:
	LDA.w $0216
	AND.b #$08
	BEQ.b CODE_209E72
	LDA.w $0381
	CLC
	ADC.b #$20
	STA.w $0381
CODE_209E72:
	RTS

CODE_209E73:
	LDX.b $25
	LDA.b $23,x
	AND.b #$0F
	TAY
	LDA.w DATA_21823C,y
	STA.b $2E
	LDA.w DATA_21824C,y
	STA.b $2F
	REP.b #$20
	LDA.b $23,x
	AND.w #$000F
	ASL
	ASL
	ASL
	ASL
	CLC
	ADC.b $2E
	STA.b $2E
	SEP.b #$20
	LDA.b $23,x
	AND.b #$F0
	STA.b $06
	STZ.b $07
	STZ.b $08
	STZ.b $09
	REP.b #$30
CODE_209EA4:
	LDY.b $06
	LDA.b [$2E],y
	STA.b $0A
	INC.b $06
	SEP.b #$30
	JSL.l CODE_209EFC
	REP.b #$30
	TYA
	AND.w #$00FF
	ASL
	ASL
	ASL
	TAY
	LDX.b $08
	LDA.w $0216
	AND.w #$0008
	BEQ.b CODE_209EC8
	INY
	INY
CODE_209EC8:
	PHY
	LDA.b $06
	DEC
	CLC
	ADC.w #$2000
	TAY
	LDA.b [$2E],y
	AND.w #$00FF
	BEQ.b CODE_209EDE
	PLA
	CLC
	ADC.w #$0800
	PHA
CODE_209EDE:
	PLY
	LDA.b [$0C],y
	STA.w $0382,x
	INY
	INY
	INY
	INY
	LDA.b [$0C],y
	STA.w $0384,x
	INX
	INX
	INX
	INX
	STX.b $08
	CPX.w #$0040
	BCC.b CODE_209EA4
	SEP.b #$30
	RTS

;--------------------------------------------------------------------

CODE_209EFB:
	RTS

;--------------------------------------------------------------------

CODE_209EFC:
	LDY.w !RAM_SMB3_Global_TilesetFromHeader
	LDA.w CODE_21CE80,y
	STA.b $0E
	LDA.w !RAM_SMB3_Global_TilesetFromHeader
	ASL
	TAX
	LDA.w CODE_21CE5A,x
	STA.b $0C
	LDA.w CODE_21CE5A+$01,x
	STA.b $0D
	LDY.b $0A
	RTL

;--------------------------------------------------------------------

CODE_209F16:
	LDX.b $07
	LDA.b [$2E],y
	ASL
	ROL.w $03F0,x
	ASL
	ROL.w $03F0,x
	DEY
	LDA.b [$2E],y
	ASL
	ROL.w $03F0,x
	ASL
	ROL.w $03F0,x
	RTS

;--------------------------------------------------------------------

CODE_209F2E:
	LDA.b $0C
	PHA
	TAY
	LDA.b $0D
	PHA
	JSL.l CODE_209F86
	STA.b $0D
	LDA.w DATA_21823C,y
	STA.b $2E
	STA.b $D8
	LDA.w DATA_21824C,y
	STA.b $2F
	CLC
	ADC.b #$20
	STA.b $D9
	LDA.b #$7E2000>>16
	STA.b $DA
	LDA.b $0D
	AND.b #$F0
	STA.b $0E
	LDA.b $0F
	LSR
	LSR
	LSR
	LSR
	ORA.b $0E
	TAY
	PLA
	STA.b $0D
	PLA
	STA.b $0C
	LDA.b [$D8],y
	BEQ.b CODE_209F81
	PHX
	LDA.w !RAM_SMB3_Global_TilesetFromHeader
	ASL
	TAX
	LDA.w DATA_21AB57,x
	STA.b $DB
	LDA.w DATA_21AB57+$01,x
	STA.b $DC
	LDA.b [$2E],y
	TAY
	LDA.b ($DB),y
	PLX
	BRA.b CODE_209F83

CODE_209F81:
	LDA.b [$2E],y
CODE_209F83:
	STA.b !RAM_SMB3_Global_CurrentlyProcessedMap16TileLo
	RTL

CODE_209F86:
	CPY.b #$00
	BMI.b CODE_209F98
	CLC
	ADC.w DATA_21CEB2,y
	BCS.b CODE_209F94
	CMP.b #$F0
	BCC.b CODE_209F98
CODE_209F94:
	CLC
	ADC.b #$10
	INY
CODE_209F98:
	RTL

;--------------------------------------------------------------------

CODE_209F99:
	CPY.b #$00
	BMI.b CODE_209FA4
	SEC
	SBC.w DATA_21CEB2,y
	BCS.b CODE_209FA4
	DEY
CODE_209FA4:
	RTL

;--------------------------------------------------------------------

CODE_209FA5:
	STZ.b $B4
	STZ.b $B5
	STZ.b $B6
	LDA.b $0F
	LSR
	LSR
	LSR
	LSR
	STA.b $B2
	LDA.b $0E
	AND.b #$0F
	ASL
	TAX
	LDA.w DATA_218200,x
	STA.b $2E
	LDA.w DATA_218200+$01,x
	STA.b $2F
	LDA.w DATA_21821E,x
	STA.b $D8
	LDA.w DATA_21821E+$01,x
	STA.b $D9
	LDA.b #$7E4000>>16
	STA.b $DA
	LDA.b $0C
	BEQ.b CODE_209FD9
	INC.b $2F
	INC.b $D9
CODE_209FD9:
	LDA.b $0D
	AND.b #$F0
	ORA.b $B2
	STA.b $0B
	TAY
	LDA.b [$D8],y
	BEQ.b CODE_209FFC
	LDA.w !RAM_SMB3_Global_TilesetFromHeader
	ASL
	TAX
	LDA.w DATA_21AB57,x
	STA.b $DB
	LDA.w DATA_21AB57+$01,x
	STA.b $DC
	LDA.b [$2E],y
	TAY
	LDA.b ($DB),y
	BRA.b CODE_209FFE

CODE_209FFC:
	LDA.b [$2E],y
CODE_209FFE:
	STA.b !RAM_SMB3_Global_CurrentlyProcessedMap16TileLo
	LDY.w !RAM_SMB3_Global_TilesetFromHeader
	CPY.b #$03
	BEQ.b CODE_20A00B
	CPY.b #$0E
	BNE.b CODE_20A039
CODE_20A00B:
	STZ.b $00
	LDA.b !RAM_SMB3_Global_CurrentlyProcessedMap16TileLo
	STA.b $01
	AND.b #$C0
	CLC
	ROL
	ROL
	ROL
	TAY
	LDA.b $01
	CMP.w !RAM_SMB3_Global_Map16FloorTileAttributeTable,y
	BCC.b CODE_20A039
	TYA
	ASL
	TAX
	LDA.w DATA_21AAD0,x
	STA.b $02
	LDA.w DATA_21AAD0+$01,x
	STA.b $03
	LDX.b $00
	LDA.b $01
	SEC
	SBC.w !RAM_SMB3_Global_Map16FloorTileAttributeTable,y
	TAY
	LDA.b ($02),y
	STA.b $B4,x
CODE_20A039:
	LDA.b !RAM_SMB3_Global_CurrentlyProcessedMap16TileLo
	RTL

;--------------------------------------------------------------------

CODE_20A03C:
	JSR.w CODE_208753
	RTL

;--------------------------------------------------------------------

	%ROUTINE_SMB3_LevelTileAnimations(NULLROM)				; $20A040
	%ROUTINE_SMB3_TankLevelTileAnimations(NULLROM)				; $20A08B

;--------------------------------------------------------------------

CODE_20A0D7:
	JML.l SMB3_DisplayCopyDetectionErrorMessage_Main				; Note: Call to SMAS function

SMASSMB3Reset:
if !Define_Global_ROMToAssemble&(!ROM_SMB3_U|!ROM_SMB3_E|!ROM_SMB3_J) != $00
	SEI
	CLC
	XCE
	STZ.w !REGISTER_IRQNMIAndJoypadEnableFlags
	STZ.w !REGISTER_DMAEnable
	STZ.w !REGISTER_HDMAEnable
	LDA.b #$80
	STA.w !REGISTER_ScreenDisplayRegister
	REP.b #$20
	LDA.w #!RAM_SMB3_Global_StartOfStack
	TCS
	LDA.w #!RAM_SMB3_Global_ScratchRAM00
	TCD
	SEP.b #$20
endif
if !Define_SMAS_Global_DisableCopyDetection == !FALSE
	NOP #2
	LDA.b #$AA
	STA.l !SRAM_SMAS_Global_CopyDetectionCheck2
	CMP.l !SRAM_SMAS_Global_CopyDetectionCheck1
	BNE.b CODE_20A0D7
	LDA.b #$55
	STA.l !SRAM_SMAS_Global_CopyDetectionCheck2
	CMP.l !SRAM_SMAS_Global_CopyDetectionCheck1
	BNE.b CODE_20A0D7
endif
if !Define_Global_ROMToAssemble&(!ROM_SMB3_U|!ROM_SMB3_E|!ROM_SMB3_J) != $00
	LDA.w !REGISTER_PPUStatusFlag2
	BIT.b #!PPUStatusFlag2_ConsoleRegion
if !Define_Global_ROMToAssemble&(!ROM_SMB3_E) != $00
	BNE.b +
else
	BEQ.b +
endif
	JML.l SMB3_DisplayRegionErrorMessage_Main

+:
	JSL.l SMB3_UploadSPCEngine_Main
	JSL.l SMB3_InitializeRAMOnStartup_Main
	JSL.l SMB3_VerifySaveDataIsValid_Main
	JSL.l SMB3_UploadMainSampleData_Main
	JSL.l SMB3_LoadSplashScreen_Main
	JSL.l SMB3_UploadMusicBank_Level
else
	SEI
	STZ.w !REGISTER_IRQNMIAndJoypadEnableFlags
	STZ.w !REGISTER_DMAEnable
	STZ.w !REGISTER_HDMAEnable
	LDA.b #$80
	STA.w !REGISTER_ScreenDisplayRegister
endif
	REP.b #$20
	PHD
	LDA.w #!REGISTER_ScreenDisplayRegister
	TCD
	SEP.b #$30
	LDA.b #SMB3_MainDataBank_Main>>16
	PHA
	PLB
	LDA.b #$03
	STA.w !RAM_SMB3_Global_OAMSizeAndDataAreaDesignationMirror
	STA.b !REGISTER_OAMSizeAndDataAreaDesignation
	LDA.b #$09
	STA.b !REGISTER_BGModeAndTileSizeSetting
	STA.w !RAM_SMB3_Global_BGModeAndTileSizeSettingMirror
	STZ.w !RAM_SMB3_Global_MosaicSizeAndBGEnableMirror
	LDA.b #$03
	STA.b !REGISTER_BG1AddressAndSize
	LDA.b #$13
	STA.b !REGISTER_BG2AddressAndSize
	LDA.b #$51
	STA.b !REGISTER_BG3AddressAndSize
	STZ.b !REGISTER_BG4AddressAndSize
	LDA.b #$22
	STA.b !REGISTER_BG1And2TileDataDesignation
	LDA.b #$05
	STA.b !REGISTER_BG3And4TileDataDesignation
	LDA.b #$15
	STA.b !REGISTER_MainScreenLayers
	STA.w !RAM_SMB3_Global_MainScreenLayersMirror
	LDA.b #$02
	STA.b !REGISTER_SubScreenLayers
	STA.w !RAM_SMB3_Global_SubScreenLayersMirror
	LDA.b #$00
	STA.b !REGISTER_ColorMathInitialSettings
	STA.w !RAM_SMB3_Global_ColorMathInitialSettingsMirror
	LDA.b #$00
	STA.b !REGISTER_ColorMathSelectAndEnable
	STA.w !RAM_SMB3_Global_ColorMathSelectAndEnableMirror
	LDA.b #$20
	STA.w !RAM_SMB3_Global_FixedColorData1Mirror
	LDA.b #$40
	STA.w !RAM_SMB3_Global_FixedColorData2Mirror
	LDA.b #$80
	STA.w !RAM_SMB3_Global_FixedColorData3Mirror
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$04
	STA.b !REGISTER_InitialScreenSettings
else
	STZ.b !REGISTER_InitialScreenSettings
endif
	PLD
	STZ.w $1208
	STZ.w $1209
	STZ.w $120E
	STZ.w $120F
	STZ.w $120A
	STZ.w $120B
	STA.w $120D
	LDA.b #$01
	STA.w $120C
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR] Fix random enabling of the original debug mode
	STZ.w !RAM_SMB3_Global_EnableDebugModeFlag
endif
	JMP.w CODE_208051

;--------------------------------------------------------------------

	%ROUTINE_SMB3_GraphicsDecompressionRoutines(NULLROM)				; $20A183

;--------------------------------------------------------------------

SMB3_BattleMode_BootUpBattleMode:
.Main:
;$20A295
	STZ.b $01
	LDA.b #$BF
	STA.b $00
	JSR.w CODE_20FA18
	JSL.l SMB3_ResetSpriteOAMRt_Main
	JSL.l CODE_25F05A
	JSL.l SMB3_BattleMode_InitializeMode2ScrollingRAM_Main
	STZ.w !REGISTER_IRQNMIAndJoypadEnableFlags
	LDA.b #$11
	STA.w $020F
	LDA.l $7E3955
	INC
	STA.l $7E3955
	LDA.b #$04
	STA.w !RAM_SMB3_Level_TimerHundreds
	STZ.b $12
	STZ.w $0210
	STZ.w $0211
	STZ.b $13
	STZ.w $0216
	STZ.w $0217
	STZ.b $23
	STZ.b $24
	STZ.b $25
	LDA.b #$00
	STA.l $7E3966
	STA.l $7E3965
	STA.l $7E3964
	STZ.b $00
	LDX.b #$0500>>8
	STX.b $01
	LDY.b #$9D
CODE_20A2EC:
	STA.b ($00),y
	DEY
	BPL.b CODE_20A2EC
	LDA.w BattleModeLevelDataPtrs
	STA.b !RAM_SMB3_Level_LevelDataPtrLo
	LDA.w BattleModeLevelDataPtrs+$01
	STA.b !RAM_SMB3_Level_LevelDataPtrHi
	LDA.b #BattleModeLevelDataPtrs>>16
	STA.b !RAM_SMB3_Level_LevelDataPtrBank
	LDY.w !RAM_SMB3_Global_TilesetFromHeader
	LDA.w DATA_21C975,y
	STA.w $0739
	STZ.w !RAM_SMB3_Level_ShakeLayer1YOffset
	JSL.l SMB3_LoadLevelRoutine_Main
	JSR.w SMB3_SetMap16TileAttributeDataTable_Main
	LDA.b #$11
	STA.w !RAM_SMB3_Global_MainScreenLayersMirror
	LDA.b #$02
	STA.w !RAM_SMB3_Global_SubScreenLayersMirror
	LDA.b #$02
	STA.w !RAM_SMB3_Global_ColorMathInitialSettingsMirror
	LDA.b #$20
	STA.w !RAM_SMB3_Global_ColorMathSelectAndEnableMirror
	JSL.l SMB3_BattleMode_LoadSpriteGFX_Main
	LDA.b #$26
	STA.w $0612
	JSR.w CODE_209C85
	JSL.l SMB3_BattleMode_LoadGFXTilemapsAndPalette_Main
	LDA.b #$00
	STA.l $7E3955
	JSL.l CODE_29E29D
	LDA.b #$80
	STA.w !REGISTER_IRQNMIAndJoypadEnableFlags
CODE_20A345:
	LDA.b #!Define_SMB3_LevelMusic_BattleMode
	LDY.w !RAM_SMB3_BattleMode_CurrentStage
	BEQ.b CODE_20A34E
	LDA.b #!Define_SMB3_LevelMusic_HammerBroEncounter
CODE_20A34E:
	STA.w !RAM_SMB3_Global_MusicCh1
CODE_20A351:
	JSR.w CODE_20801F
	JSL.l SMB3_ResetSpriteOAMRt_Main
	JSL.l SMB3_BattleMode_ProcessBattleMode_Main
	LDA.w $0014
	BEQ.b CODE_20A351
	LDA.w $078C
	DEC
	EOR.b #$01
	TAX
	LDA.b #!Define_SMAS_Sound0063_Coin
	STA.w !RAM_SMB3_Global_SoundCh3
	INC.w !RAM_SMB3_BattleMode_MariosRoundWinCount,x
	LDA.w !RAM_SMB3_BattleMode_MariosRoundWinCount,x
	CMP.b #$05
	BCC.b CODE_20A37F
	INC.w !RAM_SMB3_BattleMode_MariosWinCount,x
	LDA.b #!Define_SMAS_Sound0063_1up
	STA.w !RAM_SMB3_Global_SoundCh3
CODE_20A37F:
	JSL.l SMB3_BattleMode_UpdateResultsScreenTilemapAndPalette_Main
	JSL.l SMB3_ResetSpriteOAMRt_Main
CODE_20A387:
	JSL.l SMB3_BattleMode_ScrollIntoResultsScreen_Main
	JSR.w CODE_20801F
	LDA.w $0014
	BNE.b CODE_20A387
	REP.b #$20
	LDA.w #$4900
	STA.l SMB3_StripeImageUploadTable[$00].LowByte						; Optimization: Lots of unnecessary long addressing being used here.
	LDA.w #$5400
	STA.l SMB3_StripeImageUploadTable[$07].LowByte
	LDA.w #$0900
	STA.l SMB3_StripeImageUploadTable[$01].LowByte
	STA.l SMB3_StripeImageUploadTable[$08].LowByte
	LDA.w #$182D
	STA.l SMB3_StripeImageUploadTable[$02].LowByte
	STA.l SMB3_StripeImageUploadTable[$03].LowByte
	STA.l SMB3_StripeImageUploadTable[$04].LowByte
	STA.l SMB3_StripeImageUploadTable[$05].LowByte
	STA.l SMB3_StripeImageUploadTable[$06].LowByte
	LDA.w #$1C2D
	STA.l SMB3_StripeImageUploadTable[$09].LowByte
	STA.l SMB3_StripeImageUploadTable[$0A].LowByte
	STA.l SMB3_StripeImageUploadTable[$0B].LowByte
	STA.l SMB3_StripeImageUploadTable[$0C].LowByte
	STA.l SMB3_StripeImageUploadTable[$0D].LowByte
	LDA.w #$FFFF
	STA.l SMB3_StripeImageUploadTable[$0E].LowByte
	SEP.b #$20
	JSL.l SMB3_BattleMode_ResetCoinCounterPalettes_Main
	INC.w $0211
	INC.w $0014
	STZ.w $0356
	JSL.l SMB3_BattleMode_ProcessResultsScreen_Main
	LDA.l !RAM_SMB3_BattleMode_ResultsScreenCursoPosLo
	BEQ.b CODE_20A403
	JSR.w CODE_20801F
if !Define_Global_ROMToAssemble&(!ROM_SMB3_U|!ROM_SMB3_E|!ROM_SMB3_J) != $00
	JML.l SMB3_ResetGame_Main
else
	JML.l SMAS_ResetToSMASTitleScreen_Main				; Note: Call to SMAS function
endif

CODE_20A403:
	JSR.w CODE_20801F
	JSL.l SMB3_BattleMode_ScrollIntoBattleScreen_Main
	LDA.w $0014
	BNE.b CODE_20A403
	STZ.w !RAM_SMB3_BattleMode_CurrentState				; Optimization: Unnecessary absolute addressing
	STZ.w !RAM_SMB3_BattleMode_MariosCoinCount
	STZ.w !RAM_SMB3_BattleMode_LuigisCoinCount
	JMP.w CODE_20A345

if !Define_Global_ROMToAssemble&(!ROM_SMAS_U) != $00
	if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR]
	%FREE_BYTES(NULLROM, 90-12, $FF)
	else
	%FREE_BYTES(NULLROM, 90, $FF)
	endif
elseif !Define_Global_ROMToAssemble&(!ROM_SMAS_E) != $00
%FREE_BYTES(NULLROM, 166, $FF)
elseif !Define_Global_ROMToAssemble&(!ROM_SMAS_J1) != $00
%FREE_BYTES(NULLROM, 29, $FF)
elseif !Define_Global_ROMToAssemble&(!ROM_SMAS_J2) != $00
%FREE_BYTES(NULLROM, 88, $FF)
elseif !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMB3_E) != $00
%FREE_BYTES(NULLROM, 146, $FF)
else
%FREE_BYTES(NULLROM, 149, $FF)
endif

;--------------------------------------------------------------------

DATA_20A4B0:
	db $01,$FF,$02,$FF,$00,$01

;--------------------------------------------------------------------

	%ROUTINE_SMB3_WaitForVBlankDuringCutscene(NULLROM)			; $20A4B6
	%ROUTINE_SMB3_LoadTitleScreenGraphics(NULLROM)				; $20A4DA
	%ROUTINE_SMB3_UploadGraphicsFiles(NULLROM)				; $20A58D

;--------------------------------------------------------------------

CODE_20AF6F:
	REP.b #$20
	LDA.w #SMB3_Bank42Graphics_FG_ThroneRoom
	STA.b $0D
	LDX.b #SMB3_Bank42Graphics_FG_ThroneRoom>>16
	STX.b $0F
	LDA.w #SMB3_Bank42Graphics_FG_ThroneRoomEnd-SMB3_Bank42Graphics_FG_ThroneRoom
	STA.b $0B
	JSR.w SMB3_DMADataToVRAM_Entry2
	SEP.b #$20
	RTL

;--------------------------------------------------------------------

SMB3_LoadSpadeGameGFX:
.Main:
;$20AF85
	REP.b #$20
	LDA.w #SMB3_Bank3AGraphics_FG_SpadeGamePowerUps4
	STA.b $0D
	LDX.b #SMB3_Bank3AGraphics_FG_SpadeGamePowerUps4>>16
	STX.b $0F
	LDA.w #$1000
	STA.b $0B
	LDA.w #$3800
	JSR.w SMB3_CopyOfDMADataToVRAM_Main
	LDA.w #SMB3_Bank3FGraphics_Sprite_Global1+$0400
	STA.b $0D
	LDX.b #SMB3_Bank3FGraphics_Sprite_Global1+$0400>>16
	STX.b $0F
	LDA.w #$0400
	STA.b $0B
	JSR.w SMB3_DMADataToVRAM_Entry2
	LDA.w #SMB3_Bank42Graphics_Sprite_DynamicDoorAndLetters+$0400
	STA.b $0D
	LDX.b #SMB3_Bank42Graphics_Sprite_DynamicDoorAndLetters+$0400>>16
	STX.b $0F
	LDA.w #$0C00
	STA.b $0B
	LDA.w #$6200
	JSR.w SMB3_DMADataToVRAM_Main
	SEP.b #$20
	RTL

;--------------------------------------------------------------------

SMB3_BattleMode_LoadSpriteGFX:
.Main:
;$20AFC3
	REP.b #$20
	LDA.w #SMB3_Bank3FGraphics_Sprite_BattleMode1
	STA.b $0D
	LDX.b #SMB3_Bank3FGraphics_Sprite_BattleMode1>>16
	STX.b $0F
	LDA.w #$2000
	STA.b $0B
if !Define_Global_ROMToAssemble&(!ROM_SMAS_U|!ROM_SMAS_E|!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.w #$6000
	JSR.w SMB3_DMADataToVRAM_Main
else
	JSR.w SMB3_DMADataToVRAM_Entry2
endif
	LDA.w #SMB3_Bank3DGraphics_Sprite_BattleMode2
	STA.b $0D
	LDX.b #SMB3_Bank3DGraphics_Sprite_BattleMode2>>16
	STX.b $0F
	LDA.w #$0800
	STA.b $0B
	LDA.w #$7000
	JSR.w SMB3_DMADataToVRAM_Main
	SEP.b #$20
	RTL

;--------------------------------------------------------------------

	%ROUTINE_SMB3_CopyOfDMADataToVRAM(NULLROM)			; $20AFED
	%ROUTINE_SMB3_DMADataToVRAM(NULLROM)				; $20B010
	%ROUTINE_SMB3_BufferInitialTitleScreenPalettes(NULLROM)		; $20B036

;--------------------------------------------------------------------

; Note: Something related to the ending?

CODE_20B097:
	REP.b #$30
	LDX.w #$001E
	LDA.w #$0000
CODE_20B09F:
	STA.w SMB3_PaletteMirror[$00].LowByte,x
	STA.w SMB3_PaletteMirror[$10].LowByte,x
	STA.w SMB3_PaletteMirror[$20].LowByte,x
	STA.w SMB3_PaletteMirror[$30].LowByte,x
	STA.w SMB3_PaletteMirror[$40].LowByte,x
	STA.w SMB3_PaletteMirror[$50].LowByte,x
	STA.w SMB3_PaletteMirror[$60].LowByte,x
	STA.w SMB3_PaletteMirror[$70].LowByte,x
	STA.w SMB3_PaletteMirror[$80].LowByte,x
	STA.w SMB3_PaletteMirror[$90].LowByte,x
	STA.w SMB3_PaletteMirror[$A0].LowByte,x
	STA.w SMB3_PaletteMirror[$B0].LowByte,x
	STA.w SMB3_PaletteMirror[$C0].LowByte,x
	STA.w SMB3_PaletteMirror[$D0].LowByte,x
	STA.w SMB3_PaletteMirror[$E0].LowByte,x
	STA.w SMB3_PaletteMirror[$F0].LowByte,x
	DEX
	DEX
	BPL.b CODE_20B09F
	PHB
	LDX.w #DATA_3CAC00
	LDY.w #SMB3_PaletteMirror[$00].LowByte
	LDA.w #$001F
	MVN SMB3_PaletteMirror[$00].LowByte>>16,DATA_3CAC00>>16
	PLB
	LDA.w #$0000
	STA.w SMB3_PaletteMirror[$00].LowByte
	SEP.b #$30
	LDA.b #$01
	STA.w !RAM_SMB3_Global_UpdateEntirePaletteFlag
	RTS

;--------------------------------------------------------------------

	%ROUTINE_SMB3_ProcessTitleScreen(NULLROM)			; $20B0EF
	%ROUTINE_SMB3_DrawCopyrightInfo(NULLROM)			; $20B25B

;--------------------------------------------------------------------

; Note: Creates the gradient seen on the title screen?

CODE_20B2EB:
	REP.b #$20
	LDX.b #$80
	STX.w !REGISTER_VRAMAddressIncrementValue
	LDA.w #$1000
	STA.b $D8
	LDA.w #$1562
	STA.b $DA
	JSR.w CODE_20B30F
	JSR.w CODE_20B30F
	LDY.b #$0B
CODE_20B304:
	INC.b $DA
	JSR.w CODE_20B30F
	DEY
	BNE.b CODE_20B304
	SEP.b #$20
	RTS

CODE_20B30F:
	LDA.b $D8
	STA.w !REGISTER_VRAMAddressLo
	CLC
	ADC.w #$0020
	STA.b $D8
	LDX.b #$20
CODE_20B31C:
	LDA.b $DA
	STA.w !REGISTER_WriteToVRAMPortLo
	DEX
	BNE.b CODE_20B31C
	RTS

;--------------------------------------------------------------------

	%ROUTINE_SMB3_UploadCurtainTilemap(NULLROM)				; $20B325
	%ROUTINE_SMB3_HandleCurrentTitleScreenProcess(NULLROM)			; $20B3A2
	%ROUTINE_SMB3_TitleScreenState00_CurtainRise(NULLROM)			; $20B3BD

;--------------------------------------------------------------------

DATA_20B425:
	db $4C,$02,$14,$00,$20,$04,$03,$00
	db $FF,$03,$BD,$00,$30,$08,$17,$80
	db $05,$00,$23,$82,$02,$00,$25,$80
	db $20,$00,$35,$01,$05,$10,$04,$01
	db $05,$00,$04,$01,$05,$00,$04,$01
	db $05,$00,$04,$01,$05,$00,$04,$01
	db $50,$00,$42,$02,$01,$80,$12,$02
	db $05,$01,$20,$00,$10,$01,$05,$20
	db $20,$01,$05,$40,$C0

DATA_20B46A:
	db $00,$02,$02,$10,$00,$36,$41,$38
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	db $42,$60,$00,$60,$51,$FF,$08,$FE
	db $00,$FE,$00
else
	db $42,$60,$00,$60,$51,$FF,$08,$10
	db $00,$FE,$00
endif

DATA_20B47D:
	db $2C,$01,$50,$80,$F0,$01,$90,$00
	db $70,$00,$10,$02,$10,$22,$09,$00
	db $15,$02,$34,$00,$02,$42,$90,$00
	db $65,$01,$F0,$00,$FF

SMB3_HandleTitleScreen3PaletteAnimation:
.Main:
;$00B49A
	DEC.b !RAM_SMB3_TitleScreen_3PaletteAnimationFrameCounter
	BPL.b CODE_20B4D1
	LDA.b #$04
	STA.b !RAM_SMB3_TitleScreen_3PaletteAnimationFrameCounter
	LDA.b !RAM_SMB3_TitleScreen_3PaletteAnimationIndex
	AND.b #$07
	ASL
	ASL
	ASL
	TAX
	REP.b #$20
	LDA.l FlashingTitleScreen3Colors,x
	STA.w SMB3_PaletteMirror[$13].LowByte
	LDA.l FlashingTitleScreen3Colors+$02,x
	STA.w SMB3_PaletteMirror[$14].LowByte
	LDA.l FlashingTitleScreen3Colors+$04,x
	STA.w SMB3_PaletteMirror[$15].LowByte
	LDA.l FlashingTitleScreen3Colors+$06,x
	STA.w SMB3_PaletteMirror[$16].LowByte
	SEP.b #$20
	LDA.b #$01
	STA.w !RAM_SMB3_Global_UpdateEntirePaletteFlag
	INC.b !RAM_SMB3_TitleScreen_3PaletteAnimationIndex
CODE_20B4D1:
	RTS

FlashingTitleScreen3Colors:
;$20B4D2
	dw $08D8,$095D,$1E1F,$32FF
	dw $153B,$15BF,$2A7F,$3F5F
	dw $219E,$221F,$36DF,$4BFF
	dw $363F,$36BF,$4B7F,$5FFF
	dw $363F,$36BF,$4B7F,$5FFF
	dw $219E,$221F,$36DF,$4BFF
	dw $153B,$15BF,$2A7F,$3F5F
	dw $08D8,$095D,$1E1F,$32FF

CODE_20B512:
	DEC.b !RAM_SMB3_TitleScreen_Mario_ScriptTimer
	LDA.b !RAM_SMB3_TitleScreen_Mario_ScriptTimer
	CMP.b #$FF
	BNE.b CODE_20B51D
	JSR.w CODE_20B5F0
CODE_20B51D:
	DEC.b !RAM_SMB3_TitleScreen_Luigi_ScriptTimer
	LDA.b !RAM_SMB3_TitleScreen_Luigi_ScriptTimer
	CMP.b #$FF
	BNE.b CODE_20B528
	JSR.w CODE_20B625
CODE_20B528:
	LDA.b $B6
	STA.b $B8
	LDA.b $B7
	STA.b $B9
	JSR.w CODE_20B646
	JSR.w CODE_20BB4A
	LDA.b !RAM_SMB3_TitleScreen_Enable3PaletteAnimationFlag
	BEQ.b CODE_20B53D
	JSR.w SMB3_HandleTitleScreen3PaletteAnimation_Main
CODE_20B53D:
	LDA.b !RAM_SMB3_Global_ControllerPress1P1
	ORA.b !RAM_SMB3_Global_ControllerPress1P2
	AND.b #!Joypad_Start>>8
	BEQ.b CODE_20B56A
	LDA.b !RAM_SMB3_TitleScreen_UnknownFlag
	BNE.b CODE_20B564
if !Define_Global_ROMToAssemble&(!ROM_SMB3_U|!ROM_SMB3_E|!ROM_SMB3_J) == $00
	LDA.l !SRAM_SMAS_Global_RunningDemoFlag
	BEQ.b CODE_20B553
	JML.l SMAS_ResetToSMASTitleScreen_Main				; Note: Call to SMAS function
endif

CODE_20B553:
	LDA.b !RAM_SMB3_TitleScreen_CurrentState
	CMP.b #$06
	BEQ.b CODE_20B55E
	LDA.b #!Define_SMAS_Sound0063_Correct
	STA.w !RAM_SMB3_Global_SoundCh3
CODE_20B55E:
	LDA.b #$06
	STA.b !RAM_SMB3_TitleScreen_CurrentState
	BRA.b CODE_20B56A

CODE_20B564:
	INC.b !RAM_SMB3_TitleScreen_CurrentState
	LDA.b #$01
	STA.b $28
CODE_20B56A:
if !Define_Global_ROMToAssemble&(!ROM_SMB3_U|!ROM_SMB3_E|!ROM_SMB3_J) == $00
	LDA.b !RAM_SMB3_Global_ControllerHold2P1
	ORA.b !RAM_SMB3_Global_ControllerHold2P2
	AND.b #!Joypad_X
	BEQ.b CODE_20B576
	JML.l SMAS_ResetToSMASTitleScreen_Main				; Note: Call to SMAS function

CODE_20B576:
	LDA.b !RAM_SMB3_Global_ControllerHold1P1
	ORA.b !RAM_SMB3_Global_ControllerHold1P2
	AND.b #!Joypad_Y>>8
	BEQ.b CODE_20B582
	JML.l SMAS_ResetToSMASTitleScreen_Main				; Note: Call to SMAS function
endif

CODE_20B582:
	RTS

CODE_20B583:											; Note: Skip to player select
	STZ.w $0216
	STZ.w $0217

	LDA.b #DATA_2AF1B1
	STA.b !RAM_SMB3_Global_StripeImageDataLo
	LDA.b #DATA_2AF1B1>>8
	STA.b !RAM_SMB3_Global_StripeImageDataHi
	LDA.b #DATA_2AF1B1>>16
	STA.b !RAM_SMB3_Global_StripeImageDataBank

	LDA.b #$01
	STA.b $1C
	STZ.w !RAM_SMB3_Global_WaitForVBlankFlag
CODE_20B59C:
	LDA.w !RAM_SMB3_Global_WaitForVBlankFlag
	BPL.b CODE_20B59C
	STZ.b $1C
	CLI
	JSR.w CODE_20B5DA
	LDA.b #$06
	STA.w $1501
	JSL.l CODE_22E65F
	JSR.w CODE_20B70B
	STZ.w $02B5
	JSR.w CODE_20B2EB
	LDA.b #$1D
	ASL
	TAX
	LDA.l DATA_20D2FE,x
	STA.b !RAM_SMB3_Global_StripeImageDataLo
	LDA.l DATA_20D2FE+$01,x
	STA.b !RAM_SMB3_Global_StripeImageDataHi
	LDA.b #DATA_20DA7C>>16
	STA.b !RAM_SMB3_Global_StripeImageDataBank
	JSL.l SMB3_UploadStripeImage_Main
	LDA.b #$0F
	STA.b !RAM_SMB3_Global_ScreenDisplayRegisterMirror
	LDA.b #$02
	STA.b !RAM_SMB3_TitleScreen_CurrentState
	RTS

CODE_20B5DA:
if !Define_Global_ROMToAssemble&(!ROM_SMB3_U|!ROM_SMB3_E|!ROM_SMB3_J) != $00
	LDA.b !RAM_SMB3_TitleScreen_FileSelectProcess
	BNE.b +
	JSL.l SMB3_LoadFileSelectMenu_Main
	RTS

+:
	JSL.l SMB3_LoadPlayerSelectMenu_Main
	RTS
else
	LDA.l !RAM_SMB3_Global_DisplayTitleScreenMenuOptionsIndex
	BMI.b CODE_20B5E8
	DEC
	TAX
	LDA.l DATA_20B76A,x
	BRA.b CODE_20B5EA

CODE_20B5E8:
	LDA.b #$01
CODE_20B5EA:
	STA.b $28
	JSR.w SMB3_WaitForVBlankDuringCutscene_Main
	RTS
endif

CODE_20B5F0:
	STZ.b $B6
	STZ.b $BA
	LDX.b !RAM_SMB3_TitleScreen_Mario_ScriptIndex
	LDA.l DATA_20B425,x
	CMP.b #$FF
	BEQ.b CODE_20B612
	CMP.b #$FE
	BEQ.b CODE_20B620
	STA.b !RAM_SMB3_TitleScreen_Mario_ScriptTimer
	INX
	LDA.l DATA_20B425,x
	STA.b $B6
	STA.b $BA
	INC.b !RAM_SMB3_TitleScreen_Mario_ScriptIndex
	INC.b !RAM_SMB3_TitleScreen_Mario_ScriptIndex
	RTS

CODE_20B612:
	INX
	LDA.l DATA_20B425,x
	STA.b $BC
	INC.b !RAM_SMB3_TitleScreen_Mario_ScriptIndex
	INC.b !RAM_SMB3_TitleScreen_Mario_ScriptIndex
	STZ.b !RAM_SMB3_TitleScreen_Mario_ScriptTimer
	RTS

CODE_20B620:
	INC.b !RAM_SMB3_TitleScreen_CurrentState
	STZ.b !RAM_SMB3_TitleScreen_Mario_ScriptIndex
	RTS

CODE_20B625:
	STZ.b $B7
	STZ.b $BB
	LDX.b !RAM_SMB3_TitleScreen_Luigi_ScriptIndex
	LDA.l DATA_20B47D,x
	CMP.b #$FF
	BEQ.b CODE_20B643
	STA.b !RAM_SMB3_TitleScreen_Luigi_ScriptTimer
	INX
	LDA.l DATA_20B47D,x
	STA.b $B7
	STA.b $BB
	INC.b !RAM_SMB3_TitleScreen_Luigi_ScriptIndex
	INC.b !RAM_SMB3_TitleScreen_Luigi_ScriptIndex
	RTS

CODE_20B643:
	STZ.b !RAM_SMB3_TitleScreen_Luigi_ScriptIndex
	RTS

CODE_20B646:
	LDA.b $BC
	JSL.l SMB3_ExecutePtr_Absolute

DATA_20B64C:
	dw CODE_20B660
	dw CODE_20B660
	dw CODE_20B661
	dw CODE_20B688
	dw CODE_20B69D
	dw CODE_20B6AE
	dw CODE_20B6CF
	dw CODE_20B6E7
	dw CODE_20B74F
	dw CODE_20B660

CODE_20B660:
	RTS

CODE_20B661:					; Note: Routine that loads in the title screen logo.
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR] Upload full-screen block instead of the row-by-row stripes
	LDA.b #DATA_2AF1B1
	STA.b !RAM_SMB3_Global_StripeImageDataLo
	LDA.b #DATA_2AF1B1>>8
	STA.b !RAM_SMB3_Global_StripeImageDataHi
	LDA.b #DATA_2AF1B1>>16
	STA.b !RAM_SMB3_Global_StripeImageDataBank
	JSL.l SMB3_UploadStripeImage_Main
else
	LDA.b $BD
	STA.w $0028
	INC.b $BD
	LDA.b $BD
	CMP.b #$1D
	BNE.b CODE_20B687
endif
	STZ.b $BC
	REP.b #$20
	LDX.b #$08
	LDA.w #$0000
CODE_20B677:
	STA.w SMB3_PaletteMirror[$00].LowByte,x
	INX
	INX
	CPX.b #$20
	BNE.b CODE_20B677
	SEP.b #$20
	LDA.b #$01
	STA.w !RAM_SMB3_Global_UpdateEntirePaletteFlag
CODE_20B687:
	RTS

CODE_20B688:
	LDY.b #$04
CODE_20B68A:
	DEC.w $0216
	LDA.w $0216
	BEQ.b CODE_20B696
	DEY
	BPL.b CODE_20B68A
	RTS

CODE_20B696:
	LDA.b #$10
	STA.b !RAM_SMB3_TitleScreen_ShakeLayer1Timer
	INC.b $BC
	RTS

CODE_20B69D:
	REP.b #$20
	LDA.w $0216
	SEC
	SBC.w #$0002
	STA.w $0216
	SEP.b #$20
	INC.b $BC
	RTS

CODE_20B6AE:
	REP.b #$20
	LDA.w $0216
	CLC
	ADC.w #$0002
	STA.w $0216
	SEP.b #$20
	DEC.b $BC
	DEC.b !RAM_SMB3_TitleScreen_ShakeLayer1Timer
	BPL.b CODE_20B6CE
	INC.b $BC
	INC.b $BC
	LDA.b #$03
	STA.b $BD
	LDA.b #$02
	STA.b !RAM_SMB3_TitleScreen_WaitBeforeDroppingSpritesTimer
CODE_20B6CE:
	RTS

CODE_20B6CF:
	DEC.b !RAM_SMB3_TitleScreen_WaitBeforeDroppingSpritesTimer
	BPL.b CODE_20B6E6
	STZ.b !RAM_SMB3_TitleScreen_NewSpriteIndex
	LDA.b #$01
	STA.b !RAM_SMB3_TitleScreen_WaitBeforeSpawningNextSpriteTimer
	INC.b $BC
	LDA.b #$16
	STA.b !RAM_SMB3_TitleScreen_3PaletteAnimationFrameCounter
	JSL.l SMB3_BufferTitleScreenPalettes_Main
	STZ.w $02B3
CODE_20B6E6:
	RTS

CODE_20B6E7:
	REP.b #$20
	LDA.l $7F0000
	STA.w SMB3_PaletteMirror[$00].LowByte
	SEP.b #$20
	JSL.l CODE_29D09A
	JSL.l CODE_29D1BB
	LDA.w $02B3
	CMP.b #$02
	BNE.b CODE_20B707
	STZ.b $BC
	LDA.b #$01
	STA.b !RAM_SMB3_TitleScreen_Enable3PaletteAnimationFlag
CODE_20B707:
	JSR.w CODE_20B70B
	RTS

CODE_20B70B:
	REP.b #$20
	LDA.w SMB3_PaletteMirror[$00].LowByte
	STA.l $7F0000
	AND.w #$001F
	ORA.w #$0020
	STA.b $D8
	LDA.w SMB3_PaletteMirror[$00].LowByte
	LSR
	LSR
	LSR
	LSR
	LSR
	AND.w #$001F
	ORA.w #$0040
	STA.b $DA
	LDA.w SMB3_PaletteMirror[$00].LowByte
	XBA
	LSR
	LSR
	AND.w #$001F
	ORA.w #$0080
	STA.b $DC
	STZ.w SMB3_PaletteMirror[$00].LowByte
	SEP.b #$20
	LDA.b $D8
	STA.w !RAM_SMB3_Global_FixedColorData1Mirror
	LDA.b $DA
	STA.w !RAM_SMB3_Global_FixedColorData2Mirror
	LDA.b $DC
	STA.w !RAM_SMB3_Global_FixedColorData3Mirror
	RTS

CODE_20B74F:
if !Define_Global_ROMToAssemble&(!ROM_SMB3_U|!ROM_SMB3_E|!ROM_SMB3_J) != $00
	LDA.b !RAM_SMB3_TitleScreen_FileSelectProcess
	BNE.b +
	JSL.l SMB3_LoadFileSelectMenu_Main
	RTS

+:
	JSL.l SMB3_LoadPlayerSelectMenu_Main
	RTS
else
	LDA.l !SRAM_SMAS_Global_RunningDemoFlag
	BNE.b CODE_20B763
	LDA.l !RAM_SMB3_Global_DisplayTitleScreenMenuOptionsIndex
	BMI.b CODE_20B763
	DEC
	TAX
	LDA.l DATA_20B76A,x
	BRA.b CODE_20B765

CODE_20B763:
	LDA.b #$01
CODE_20B765:
	STA.b $28
	INC.b $BC
	RTS

DATA_20B76A:
	db $5D,$5C
endif

CODE_20B76C:
	STZ.b !RAM_SMB3_TitleScreen_Sprite_CurrentState+$01
	STZ.b !RAM_SMB3_TitleScreen_Sprite_CurrentState+$02
	STZ.b !RAM_SMB3_TitleScreen_Sprite_CurrentState+$03
	STZ.b !RAM_SMB3_TitleScreen_Sprite_CurrentState+$04
	LDA.b #$01
	STA.b !RAM_SMB3_TitleScreen_Sprite_CurrentState
	LDA.b #$14
	STA.b !RAM_SMB3_TitleScreen_WaitBeforeRestartingTitleScreenTimerHi
	LDA.b #$3C
	STA.b !RAM_SMB3_TitleScreen_WaitBeforeRestartingTitleScreenTimerLo
	REP.b #$20
	LDA.w #$0000
	STA.w SMB3_PaletteMirror[$81].LowByte
	LDA.w #$001F
	STA.w SMB3_PaletteMirror[$83].LowByte
	SEP.b #$20
	LDA.b #$01
	STA.w !RAM_SMB3_Global_UpdateEntirePaletteFlag
	INC.b !RAM_SMB3_TitleScreen_CurrentState
	RTS

DATA_20B798:
	db $8F,$9F,$AF
if !Define_Global_ROMToAssemble&(!ROM_SMB3_U|!ROM_SMB3_E|!ROM_SMB3_J) != $00
	db $BF
endif

CODE_20B79B:
if !Define_Global_ROMToAssemble&(!ROM_SMB3_U|!ROM_SMB3_E|!ROM_SMB3_J) != $00
	LDA.b !RAM_SMB3_TitleScreen_FileSelectProcess
	BNE.b +
	LDX.w !RAM_SMB3_TitleScreen_MenuSelectionIndex
	LDA.b !RAM_SMB3_TitleScreen_FileASelectedWorld,x
	STA.l !SRAM_SMAS_Global_InitialSelectedWorld
+:
else
	LDA.b !RAM_SMB3_Global_ControllerHold1P2
	AND.b #!Joypad_X|(!Joypad_Y>>8)|!Joypad_A|(!Joypad_B>>8)
	CMP.b #!Joypad_X|(!Joypad_Y>>8)|!Joypad_A|(!Joypad_B>>8)
	BNE.b CODE_20B7A8
	NOP #5
CODE_20B7A8:
	DEC.b !RAM_SMB3_TitleScreen_WaitBeforeRestartingTitleScreenTimerLo
	BNE.b CODE_20B7B8
	LDA.b #$60
	STA.b !RAM_SMB3_TitleScreen_WaitBeforeRestartingTitleScreenTimerLo
	DEC.b !RAM_SMB3_TitleScreen_WaitBeforeRestartingTitleScreenTimerHi
	BNE.b CODE_20B7B8
	LDA.b #$FF
	STA.b !RAM_SMB3_TitleScreen_ResetTitleScreenFlag
CODE_20B7B8:
endif
	JSR.w CODE_20C51D
if !Define_Global_ROMToAssemble&(!ROM_SMB3_U|!ROM_SMB3_E|!ROM_SMB3_J) == $00
	LDA.l !SRAM_SMAS_Global_RunningDemoFlag
	BEQ.b CODE_20B7C4
	JMP.w CODE_20B839
endif

CODE_20B7C4:
	LDA.b !RAM_SMB3_Global_ControllerPress1P1
	ORA.b !RAM_SMB3_Global_ControllerPress1P2
	AND.b #(!Joypad_DPadU>>8)|(!Joypad_DPadD>>8)|(!Joypad_Select>>8)
	BEQ.b CODE_20B81B
if !Define_Global_ROMToAssemble&(!ROM_SMB3_U|!ROM_SMB3_E|!ROM_SMB3_J) != $00
	JSL.l SMB3_MoveTitleScreenMenuCursor_Main
else
	LDX.b #!Define_SMAS_Sound0063_StepOnLevelTile
	STX.w !RAM_SMB3_Global_SoundCh3
	LDA.l !RAM_SMB3_Global_DisplayTitleScreenMenuOptionsIndex
	BMI.b CODE_20B7E9
	LDA.w !RAM_SMB3_TitleScreen_MenuSelectionIndex
	CMP.b #$02
	BNE.b CODE_20B7E5
	LDA.l !RAM_SMB3_Global_DisplayTitleScreenMenuOptionsIndex
	DEC
	BRA.b CODE_20B7FD

CODE_20B7E5:
	LDA.b #$02
	BRA.b CODE_20B7FD

CODE_20B7E9:
	LDA.b !RAM_SMB3_Global_ControllerPress1P1
	ORA.b !RAM_SMB3_Global_ControllerPress1P2
	BIT.b #!Joypad_Select>>8
	BEQ.b CODE_20B802
	INC.w !RAM_SMB3_TitleScreen_MenuSelectionIndex
	LDA.w !RAM_SMB3_TitleScreen_MenuSelectionIndex
	CMP.b #$03
	BNE.b CODE_20B7FD
	LDA.b #$00
CODE_20B7FD:
	STA.w !RAM_SMB3_TitleScreen_MenuSelectionIndex
	BRA.b CODE_20B81B

CODE_20B802:
	LDX.w !RAM_SMB3_TitleScreen_MenuSelectionIndex
	AND.b #$08
	BEQ.b CODE_20B80F
	DEX
	BPL.b CODE_20B818
	INX
	BRA.b CODE_20B815

CODE_20B80F:
	INX
	CPX.b #$03
	BNE.b CODE_20B818
	DEX
CODE_20B815:
	STZ.w !RAM_SMB3_Global_SoundCh3
CODE_20B818:
	STX.w !RAM_SMB3_TitleScreen_MenuSelectionIndex
endif
CODE_20B81B:
	LDX.w !RAM_SMB3_TitleScreen_MenuSelectionIndex
	LDA.b #$48
	STA.w SMB3_OAMBuffer[$7C].XDisp
	LDA.l DATA_20B798,x
	STA.w SMB3_OAMBuffer[$7C].YDisp
	LDA.b #$4F
	STA.w SMB3_OAMBuffer[$7C].Tile
	LDA.b #$20
	STA.w SMB3_OAMBuffer[$7C].Prop
	LDA.b #$00
	STA.w SMB3_OAMTileSizeBuffer[$7C].Slot
CODE_20B839:
	JSR.w SMB3_DrawCopyrightInfo_Main
	JSR.w SMB3_HandleTitleScreen3PaletteAnimation_Main
	JMP.w CODE_20B84D

CODE_00B842:
	LDA.b !RAM_SMB3_Global_ControllerPress2P1
	AND.b #$C0
	BEQ.b CODE_20B84D
	LDA.b #$01
	STA.w $078E
CODE_20B84D:
	LDA.l !RAM_SMB3_Global_InitialWorld
	STA.w !RAM_SMB3_Global_CurrentWorld
if !Define_Global_ROMToAssemble&(!ROM_SMB3_U|!ROM_SMB3_E|!ROM_SMB3_J) != $00
	LDA.b !RAM_SMB3_TitleScreen_FileSelectProcess
	BEQ.b CODE_20B872
endif
	LDA.l !SRAM_SMAS_Global_Controller1PluggedInFlag
	BNE.b CODE_20B872
	LDA.l !SRAM_SMAS_Global_Controller2PluggedInFlag
	BEQ.b CODE_20B872
	LDA.b !RAM_SMB3_Global_ControllerPress1P2
	AND.b #!Joypad_Start>>8
	BEQ.b CODE_20B872
	LDA.w !RAM_SMB3_TitleScreen_MenuSelectionIndex
	BNE.b CODE_20B892
	LDA.b #!Define_SMAS_Sound0063_Wrong
	STA.w !RAM_SMB3_Global_SoundCh3
if !Define_Global_ROMToAssemble&(!ROM_SMB3_U|!ROM_SMB3_E|!ROM_SMB3_J) != $00
	JMP.w CODE_20B8D7
else
	BRA.b CODE_20B8D7
endif

CODE_20B872:
	LDA.b !RAM_SMB3_Global_ControllerPress1P1
	ORA.b !RAM_SMB3_Global_ControllerPress1P2
	AND.b #!Joypad_Start>>8
	BNE.b CODE_20B892
if !Define_Global_ROMToAssemble&(!ROM_SMB3_U|!ROM_SMB3_E|!ROM_SMB3_J) != $00
	LDA.b !RAM_SMB3_TitleScreen_FileSelectProcess
	ORA.b !RAM_SMB3_TitleScreen_EraseFileProcess
	BNE.b +
	LDA.b !RAM_SMB3_Global_ControllerPress1P1
	ORA.b !RAM_SMB3_Global_ControllerPress1P2
	AND.b #(!Joypad_DPadL>>8)|(!Joypad_DPadR>>8)|(!Joypad_B>>8)
	BEQ.b +
	JSL.l SMB3_ChangeSelectedWorld_Main
	RTS
+:
endif
	LDA.b !RAM_SMB3_Global_ControllerHold2P1
	ORA.b !RAM_SMB3_Global_ControllerHold2P2
	AND.b #$40
if !Define_Global_ROMToAssemble&(!ROM_SMB3_U|!ROM_SMB3_E|!ROM_SMB3_J) != $00
	BNE.b +
	RTS

+:
	LDA.b !RAM_SMB3_TitleScreen_FileSelectProcess
	BNE.b +
	RTS

+:
	STZ.b !RAM_SMB3_TitleScreen_FileSelectProcess
	JSL.l SMB3_LoadFileSelectMenu_Main
	DEC.b !RAM_SMB3_TitleScreen_CurrentState
	STZ.w !RAM_SMB3_TitleScreen_MenuSelectionIndex
	LDA.b #$FF
	STA.l !RAM_SMB3_Global_DisplayTitleScreenMenuOptionsIndex
	BRA.b CODE_20B8A7
else
	BEQ.b CODE_20B886
	JML.l SMAS_ResetToSMASTitleScreen_Main				; Note: Call to SMAS function
endif

CODE_20B886:
if !Define_Global_ROMToAssemble&(!ROM_SMB3_U|!ROM_SMB3_E|!ROM_SMB3_J) == $00
	LDA.b !RAM_SMB3_Global_ControllerHold1P1
	ORA.b !RAM_SMB3_Global_ControllerHold1P2
	AND.b #!Joypad_X|(!Joypad_Y>>8)
	BEQ.b CODE_20B8D7
	JML.l SMAS_ResetToSMASTitleScreen_Main				; Note: Call to SMAS function
endif

CODE_20B892:
if !Define_Global_ROMToAssemble&(!ROM_SMB3_U|!ROM_SMB3_E|!ROM_SMB3_J) != $00
	LDA.b !RAM_SMB3_TitleScreen_FileSelectProcess
	BNE.b +
	LDA.w !RAM_SMB3_TitleScreen_MenuSelectionIndex
	CMP.b #$03
	BNE.b ++
	LDA.b !RAM_SMB3_TitleScreen_EraseFileProcess
	EOR.b #$01
	STA.b !RAM_SMB3_TitleScreen_EraseFileProcess
	JSL.l SMB3_LoadFileSelectMenu_Entry2
	LDA.b #!Define_SMAS_Sound0063_Correct
	STA.w !RAM_SMB3_Global_SoundCh3
	RTS

++:
	LDA.b !RAM_SMB3_TitleScreen_EraseFileProcess
	BEQ.b +++
	JSL.l SMB3_ClearSaveData_Main
	JSL.l SMB3_LoadFileSelectMenu_Entry2
	LDA.b #!Define_SMAS_Sound0063_1up
	STA.w !RAM_SMB3_Global_SoundCh3
	RTS

+++:
	INC.b !RAM_SMB3_TitleScreen_FileSelectProcess
	JSL.l SMB3_LoadSaveFileData_Main
-:
	DEC.b !RAM_SMB3_TitleScreen_CurrentState
	JSR.w CODE_20B5DA
	BRA.b CODE_20B8A7

+:
	LDA.w !RAM_SMB3_TitleScreen_MenuSelectionIndex
	CMP.b #$03
	BNE.b +
	LDA.l !SRAM_SMAS_Global_ControllerTypeX
	EOR.b #$01
	AND.b #$01
	STA.l !SRAM_SMAS_Global_ControllerTypeX
	LDA.b #!Define_SMAS_Sound0063_Coin
	STA.w !RAM_SMB3_Global_SoundCh3
	JSL.l SMB3_LoadPlayerSelectMenu_Entry2
	RTS

+:
else
	LDA.w !RAM_SMB3_TitleScreen_MenuSelectionIndex
endif
	CMP.b #$02
	BNE.b CODE_20B8A7
	LDA.l !SRAM_SMAS_Global_Controller1PluggedInFlag
	BNE.b CODE_20B8D8
	LDA.l !SRAM_SMAS_Global_Controller2PluggedInFlag
	CMP.b #$02
	BNE.b CODE_20B8D8
CODE_20B8A7:
	LDA.b #!Define_SMAS_Sound0063_Correct
	STA.w !RAM_SMB3_Global_SoundCh3
	LDA.w SMB3_OAMBuffer[$3C].YDisp
	STA.b $BD
if !Define_Global_ROMToAssemble&(!ROM_SMB3_U|!ROM_SMB3_E|!ROM_SMB3_J) == $00
	LDA.l !SRAM_SMAS_Global_RunningDemoFlag
	BEQ.b CODE_20B8BB
	JML.l SMAS_ResetToSMASTitleScreen_Main				; Note: Call to SMAS function
endif

CODE_20B8BB:
	JSR.w SMB3_WaitForVBlankDuringCutscene_Main
	INC.b !RAM_SMB3_TitleScreen_WaitBeforeRestartingTitleScreenTimerHi
	LDY.b #$F8
	LDA.b !RAM_SMB3_TitleScreen_WaitBeforeRestartingTitleScreenTimerHi
	AND.b #$18
	BEQ.b CODE_20B8CA
	LDY.b $BD
CODE_20B8CA:
	STY.w SMB3_OAMBuffer[$3C].YDisp
	JSR.w SMB3_HandleTitleScreen3PaletteAnimation_Main
	LDA.w $04E2
	BNE.b CODE_20B8BB
	INC.b !RAM_SMB3_TitleScreen_CurrentState
CODE_20B8D7:
	RTS

CODE_20B8D8:
	LDA.b #!Define_SMAS_Sound0063_Wrong
	STA.w !RAM_SMB3_Global_SoundCh3
	RTS

CODE_20B8DE:
	STZ.w $0747
	STZ.w $0748
	INC.w !RAM_SMB3_TitleScreen_MenuSelectionIndex
	LDA.w !RAM_SMB3_Global_CurrentWorld
	ASL
	TAX
	LDA.w SMB3_OverworldSpriteInitialYPosLoDataPtrs,x
	STA.b $0A
	LDA.w SMB3_OverworldSpriteInitialYPosLoDataPtrs+$01,x
	STA.b $0B
	LDA.w SMB3_OverworldSpriteInitialXPosHiDataPtrs,x
	STA.b $0C
	LDA.w SMB3_OverworldSpriteInitialXPosHiDataPtrs+$01,x
	STA.b $0D
	LDA.w SMB3_OverworldSpriteInitialXPosLoDataPtrs,x
	STA.b $0E
	LDA.w SMB3_OverworldSpriteInitialXPosLoDataPtrs+$01,x
	STA.b $0F
	LDA.w SMB3_OverworldSpriteIDDataPtrs,x
	STA.b $08
	LDA.w SMB3_OverworldSpriteIDDataPtrs+$01,x
	STA.b $09
	LDY.b #$08
CODE_20B916:
	LDA.b ($0A),y
	STA.w !RAM_SMB3_Overworld_OWSpr_InitialYPosLo,y
	LDA.b ($0C),y
	STA.w !RAM_SMB3_Overworld_OWSpr_InitialXPosHi,y
	LDA.b ($0E),y
	STA.w !RAM_SMB3_Overworld_OWSpr_InitialXPosLo,y
	LDA.b ($08),y
	STA.w !RAM_SMB3_Overworld_OWSpr_SpriteID,y
	DEY
	BPL.b CODE_20B916
	INC.b $AC
	REP.b #$20
	LDX.b #SMB3_IndividualPlayerData[$02].ReserveSlots-SMB3_IndividualPlayerData[$00].ReserveSlots-$02
	LDA.w #$0000
CODE_20B936:
	STA.w SMB3_IndividualPlayerData[$00].ReserveSlots,x
	DEX
	DEX
	BPL.b CODE_20B936
	SEP.b #$20
	RTS

;--------------------------------------------------------------------

CODE_20B940:
	JSR.w CODE_20C51D
	LDA.b !RAM_SMB3_Global_ControllerHold1P2
	AND.b #(!Joypad_DPadR>>8)|!Joypad_X|(!Joypad_Y>>8)|!Joypad_A|(!Joypad_B>>8)
	CMP.b #(!Joypad_DPadR>>8)|!Joypad_X|(!Joypad_Y>>8)|!Joypad_A|(!Joypad_B>>8)
	BNE.b CODE_20B94E
	JMP.w SMB3_ProcessEndingWorldRollcallScreen_Main

CODE_20B94E:
	LDA.b !RAM_SMB3_Global_ControllerHold1P2
	AND.b #(!Joypad_DPadD>>8)|!Joypad_X|(!Joypad_Y>>8)|!Joypad_A|(!Joypad_B>>8)
	CMP.b #(!Joypad_DPadD>>8)|!Joypad_X|(!Joypad_Y>>8)|!Joypad_A|(!Joypad_B>>8)
	BNE.b CODE_20B959
	JMP.w SMB3_ProcessPart1OfEnding_Main

CODE_20B959:
	LDA.b !RAM_SMB3_Global_ControllerPress1
	AND.b #(!Joypad_DPadU>>8)|(!Joypad_DPadD>>8)
	BEQ.b CODE_20B972
	LSR
	LSR
	LSR
	TAX
	LDA.w $03FE
	CLC
	ADC.w DATA_20A4B0,x
	AND.b #$07
	STA.w $03FE
	JMP.w CODE_20BA1C

CODE_20B972:
	LDA.b !RAM_SMB3_Global_ControllerPress1
	AND.b #!Joypad_Select>>8
	BEQ.b CODE_20B983
	INC.w $072B
	LDA.w $072B
	AND.b #$01
	STA.w $072B
CODE_20B983:
	LDY.w $072B
	LDA.b #$48
	STA.w SMB3_OAMBuffer[$7C].XDisp
	LDA.w DATA_20B798,y
	STA.w SMB3_OAMBuffer[$7C].YDisp
	LDA.b #$4F
	STA.w SMB3_OAMBuffer[$7C].Tile
	LDA.b #$20
	STA.w SMB3_OAMBuffer[$7C].Prop
	LDA.b #$00
	STA.w SMB3_OAMTileSizeBuffer[$7C].Slot
	LDA.b !RAM_SMB3_Global_ControllerPress1
	AND.b #!Joypad_A|(!Joypad_B>>8)
	BEQ.b CODE_20B9D4
	LDA.w !RAM_SMB3_Level_Player_MariosLives
	CMP.b #$63
	BEQ.b CODE_20B9B6
	LDA.w !RAM_SMB3_Level_Player_MariosLives
	CLC
	ADC.b #$05
	STA.w !RAM_SMB3_Level_Player_MariosLives
CODE_20B9B6:
	REP.b #$20
	LDA.w #$1401
	STA.w SMB3_StripeImageUploadTable[$00].LowByte
	LDA.w #$0100
	STA.w SMB3_StripeImageUploadTable[$01].LowByte
	LDA.w !RAM_SMB3_Level_Player_MariosLives
	AND.w #$00FF
	STA.w SMB3_StripeImageUploadTable[$02].LowByte
	SEP.b #$20
	LDA.b #$FF
	STA.w SMB3_StripeImageUploadTable[$03].LowByte
CODE_20B9D4:
	LDA.b !RAM_SMB3_Global_ControllerPress1
	AND.b #!Joypad_Start>>8
	BEQ.b CODE_20BA1C
	LDA.b #$80
	STA.w !RAM_SMB3_Global_EnableDebugModeFlag
	LDA.b #$04
	STA.b $AC
	LDX.w $072B
	LDY.w !RAM_SMB3_Level_Player_MariosLives
CODE_20B9E9:
	TYA
	STA.w !RAM_SMB3_Level_Player_MariosLives,x
	LDA.b #$00
CODE_20B9EE:
	STA.w $0747,x
	DEX
	BPL.b CODE_20B9E9
	LDA.w $03FE
	STA.w !RAM_SMB3_Global_CurrentWorld
	LDX.b #SMB3_IndividualPlayerData[$00].CardSlots-SMB3_IndividualPlayerData[$00].ReserveSlots-$01
	LDA.b #!Define_SMB3_ReservePowerupID_PWing
CODE_20B9FF:
	STA.w SMB3_IndividualPlayerData[$00].ReserveSlots,x
	STA.w SMB3_IndividualPlayerData[$01].ReserveSlots,x
	DEX
	BPL.b CODE_20B9FF
	LDX.b #$0D
	LDA.b #!Define_SMB3_ReservePowerupID_WarpWhistle
	STA.w SMB3_IndividualPlayerData[$00].ReserveSlots,x
	STA.w SMB3_IndividualPlayerData[$01].ReserveSlots,x
CODE_20BA12:
	TXA
	STA.w SMB3_IndividualPlayerData[$00].ReserveSlots-$01,x
	STA.w SMB3_IndividualPlayerData[$01].ReserveSlots-$01,x
	DEX
	BNE.b CODE_20BA12
CODE_20BA1C:
	LDA.w $03FE
	ASL
	ASL
	ASL
	ASL
	CLC
	ADC.b #$30
	STA.w SMB3_OAMBuffer[$14].YDisp
	LDA.b #$6F
	STA.w SMB3_OAMBuffer[$14].Tile
	LDA.b #$00
	STA.w SMB3_OAMBuffer[$14].Prop 
	LDA.b #$20
	STA.w SMB3_OAMBuffer[$14].XDisp
	LDA.b #$00
	STA.w SMB3_OAMTileSizeBuffer[$14].Slot
	RTS

;--------------------------------------------------------------------

DATA_20BA3E:
	db $00,$06,$0C,$12,$18,$1E,$24,$2A
	db $30,$36,$3C,$42,$48,$4E,$54,$5A
	db $60,$66,$6C,$72,$78,$7E,$84,$8A
	db $90,$96,$9C,$A2

DATA_20BA5A:
	db $00,$02,$10,$04,$06,$10,$0A,$0C
	db $10,$0E,$28,$10,$2C,$2E,$10,$18
	db $1A,$10,$00,$02,$10,$04,$06,$08
	db $0A,$0C,$10,$0E,$28,$2A,$2C,$2E
	db $10,$18,$1A,$1C,$30,$32,$10,$34
	db $36,$10,$30,$32,$10,$34,$36,$38
	db $00,$02,$10,$04,$06,$38,$00,$02
	db $10,$04,$06,$3A,$24,$24,$10,$26
	db $26,$10,$30,$32,$10,$34,$36,$10
	db $28,$2A,$10,$2C,$2E,$10,$26,$18
	db $10,$1C,$1E,$1A,$00,$02,$10,$04
	db $06,$08,$00,$02,$10,$0A,$0C,$0E
	db $00,$02,$10,$20,$22,$24,$10,$10
	db $10,$04,$06,$10,$10,$10,$10,$00
	db $02,$10,$10,$10,$10,$20,$22,$10
	db $18,$1A,$10,$1C,$20,$10,$18,$1A
	db $10,$1C,$20,$22,$00,$02,$04,$06
	db $08,$0A,$0C,$0E,$1E,$10,$12,$1E
	db $10,$10,$10,$10,$10,$10,$24,$26
	db $3E,$28,$2A,$3E,$2C,$2E,$3E,$18
	db $1A,$3E,$30,$32,$3E,$34,$36,$3E

;--------------------------------------------------------------------

DATA_20BB02:
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$F3,$10,$10,$10,$10
	db $10,$18,$18,$18,$18,$18,$F4,$F4
	db $00,$F5,$F5,$F5

DATA_20BB1E:
	db $11,$12,$11,$12

DATA_20BB22:
	db $00,$01,$02,$01,$03,$04,$05,$04

DATA_20BB2A:
	db $1A,$1B,$1A,$1B

;--------------------------------------------------------------------

DATA_20BB2E:
	db $12,$06,$07

DATA_20BB31:
	db $13,$0C

DATA_20BB33:
	db $09,$03,$08

DATA_20BB36:
	db $0E,$0F,$10,$0E

DATA_20BB3A:
	db $11,$0B,$11,$0B,$11,$0B,$02,$0B
	db $02,$0B,$02,$0B

;--------------------------------------------------------------------

; Note: Routine for handling the various sprites on the title screen (before the player select appears)

DATA_20BB46:
	db $F0,$00

DATA_20BB48:
	db $00,$40

CODE_20BB4A:
	JSL.l SMB3_ResetSpriteOAMRt_Main
	LDA.w $0510
	AND.b #$F0
	SEC
	SBC.b #$90
	STA.w $0510
	LDA.b #$10
	STA.b !RAM_SMB3_TitleScreen_Mario_OAMIndex
	LDA.b #$40
	STA.b !RAM_SMB3_TitleScreen_Luigi_OAMIndex
	LDX.b #$01
CODE_20BB63:
	STX.b !RAM_SMB3_TitleScreen_Player_SpriteIndex
	LDA.b !RAM_SMB3_TitleScreen_Player_HoldInPlaceFlag
	BEQ.b CODE_20BB92
	LDA.b #$08
	LDY.w $0512
	BEQ.b CODE_20BB75
	DEC.w $0512
	LDA.b #$00
CODE_20BB75:
	STA.b !RAM_SMB3_TitleScreen_Mario_XSpeed,x
	LDA.l DATA_20BB46,x
	STA.b !RAM_SMB3_TitleScreen_Mario_XPosLo,x
	LDA.b #$A0
	STA.b !RAM_SMB3_TitleScreen_Mario_YPosLo,x
	LDA.l DATA_20BB48,x
	STA.b !RAM_SMB3_TitleScreen_Mario_YXPPCCCT,x
	JSR.w CODE_20BD2C
	JSR.w SMB3_DrawCutscenePlayerSprites_TitleScreenEntry
	STZ.b !RAM_SMB3_TitleScreen_Mario_XSpeed,x
	JMP.w CODE_20BBC3

CODE_20BB92:
	JSR.w CODE_20BBD0
	JSR.w CODE_20BC5F
	JSR.w CODE_20BD2C
	JSR.w SMB3_CheckWhichTitleScreenPlayerTilesAreOffScreen_Main
	JSR.w SMB3_DrawTitleScreenPowerUpPoofAnimation_Main
	LDA.w !RAM_SMB3_TitleScreen_Mario_PowerUpPoofAnimationTimer
	BNE.b CODE_20BBA9
	JSR.w SMB3_DrawCutscenePlayerSprites_TitleScreenEntry
CODE_20BBA9:
	LDA.b !RAM_SMB3_TitleScreen_Mario_XPosHi,x
	BEQ.b CODE_20BBC3
	BPL.b CODE_20BBB9
	LDA.b !RAM_SMB3_TitleScreen_Mario_XPosLo,x
	CMP.b #$C0
	BCS.b CODE_20BBC3
	LDA.b #$C0
	BRA.b CODE_20BBC1

CODE_20BBB9:
	LDA.b !RAM_SMB3_TitleScreen_Mario_XPosLo,x
	CMP.b #$40
	BCC.b CODE_20BBC3
	LDA.b #$3F
CODE_20BBC1:
	STA.b !RAM_SMB3_TitleScreen_Mario_XPosLo,x
CODE_20BBC3:
	DEX
	BPL.b CODE_20BB63
	JSR.w CODE_20C0E4
	RTS

DATA_20BBCA:
	db $FF,$00,$01

DATA_20BBCD:
	db $60,$E0,$70

CODE_20BBD0:
	PHB
	PHK
	PLB
	LDY.b #$02
	LDA.b !RAM_SMB3_TitleScreen_Mario_XSpeed,x
	BPL.b CODE_20BBE0
	EOR.b #$FF
	CLC										;\ Optimization: INC
	ADC.b #$01									;/
	LDY.b #$01
CODE_20BBE0:
	BNE.b CODE_20BBE3
	TAY
CODE_20BBE3:
	STA.b $0E
	STY.b !RAM_SMB3_TitleScreen_Mario_MovementDirection,x
	LDY.b #$18
	LDA.b $B8,x
	AND.b #$40
	BEQ.b CODE_20BBF1
	LDY.b #$28
CODE_20BBF1:
	STY.b $0D
	LDY.b #$00
	LDA.b $B8,x
	AND.b #$03
	BNE.b CODE_20BC07
	LDA.b !RAM_SMB3_TitleScreen_Mario_InAirFlag,x
	BNE.b CODE_20BC4F
	LDA.b !RAM_SMB3_TitleScreen_Mario_XSpeed,x
	BEQ.b CODE_20BC4F
	BMI.b CODE_20BC21
	BPL.b CODE_20BC39							; Note: This will always branch.

CODE_20BC07:
	INY
	INY
	AND.b !RAM_SMB3_TitleScreen_Mario_MovementDirection,x
	BNE.b CODE_20BC1B
	DEY
	LDA.b $0E
	CMP.b $0D
	BEQ.b CODE_20BC4F
	BMI.b CODE_20BC1B
	LDA.b !RAM_SMB3_TitleScreen_Mario_InAirFlag,x
	BNE.b CODE_20BC4F
	DEY
CODE_20BC1B:
	LDA.b $B8,x
	AND.b #$01
	BNE.b CODE_20BC39
CODE_20BC21:
	LDA.b #$00
	SEC
CODE_20BC24:
	SBC.w DATA_20BBCD,y
	STA.b $00
	LDA.w DATA_20BBCA,y
	EOR.b #$FF
	STA.b $01
	LDA.b $00
	BNE.b CODE_20BC43
	INC.b $01
	JMP.w CODE_20BC43

CODE_20BC39:
	LDA.w DATA_20BBCD,y
	STA.b $00
	LDA.w DATA_20BBCA,y
	STA.b $01
CODE_20BC43:
	LDA.b $00
	CLC
	ADC.w $0510
	LDA.b !RAM_SMB3_TitleScreen_Mario_XSpeed,x
	ADC.b $01
	STA.b !RAM_SMB3_TitleScreen_Mario_XSpeed,x
CODE_20BC4F:
	JSR.w CODE_20BCDC
	PLB
	RTS

;--------------------------------------------------------------------

DATA_20BC54:
	db $D0,$CE,$CC,$CA,$CA,$CA

;--------------------------------------------------------------------

DATA_20BC5A:
	db $C8

DATA_20BC5B:
	db $00,$02,$04,$08

CODE_20BC5F:
	PHB
	PHK
	PLB
	LDA.b $BA,x
	AND.b #$80
	STA.b $00
	BEQ.b CODE_20BC8D
	LDA.b !RAM_SMB3_TitleScreen_Mario_InAirFlag,x
	BNE.b CODE_20BC8D
	LDA.b !RAM_SMB3_TitleScreen_Mario_XSpeed,x
	BPL.b CODE_20BC77
	EOR.b #$FF
	CLC									;\ Optimization: INC
	ADC.b #$01								;/
CODE_20BC77:
	LSR
	LSR
	LSR
	LSR
	TAY
	LDA.w DATA_20BC5A
	SEC
	SBC.w DATA_20BC5B,y
	STA.b !RAM_SMB3_TitleScreen_Mario_YSpeed,x
	LDA.b #$01
	STA.b !RAM_SMB3_TitleScreen_Mario_InAirFlag,x
	LDA.b #$00
	STA.b !RAM_SMB3_TitleScreen_Mario_TailGlideAnimationTimer,x
CODE_20BC8D:
	LDA.b !RAM_SMB3_TitleScreen_Mario_InAirFlag,x
	BEQ.b CODE_20BCBD
	LDY.b #$05
	LDA.b !RAM_SMB3_TitleScreen_Mario_YSpeed,x
	CMP.b #$E0
	BPL.b CODE_20BCA1
	LDA.b $B8,x
	AND.b #$80
	BEQ.b CODE_20BCA1
	LDY.b #$01
CODE_20BCA1:
	TYA
	CLC
	ADC.b !RAM_SMB3_TitleScreen_Mario_YSpeed,x
	STA.b !RAM_SMB3_TitleScreen_Mario_YSpeed,x
	LDA.b !RAM_SMB3_TitleScreen_Mario_GFXSet,x
	CMP.b #$02
	BNE.b CODE_20BCBD
	LDA.b $B8,x
	AND.b #$80
	BEQ.b CODE_20BCBD
	LDA.b !RAM_SMB3_TitleScreen_Mario_YSpeed,x
	CMP.b #$08
	BMI.b CODE_20BCBD
	LDA.b #$08
	STA.b !RAM_SMB3_TitleScreen_Mario_YSpeed,x
CODE_20BCBD:
	JSR.w CODE_20BD0B
	LDA.b !RAM_SMB3_TitleScreen_Mario_YPosHi,x
	BEQ.b CODE_20BCCA
	LDA.b #$20
	STA.b !RAM_SMB3_TitleScreen_Mario_YSpeed,x
	BNE.b CODE_20BCDA
CODE_20BCCA:
	LDA.b !RAM_SMB3_TitleScreen_Mario_YPosLo,x
	CMP.b #$A0
	BCC.b CODE_20BCDA
	LDA.b #$A0
	STA.b !RAM_SMB3_TitleScreen_Mario_YPosLo,x
	LDA.b #$00
	STA.b !RAM_SMB3_TitleScreen_Mario_InAirFlag,x
	STA.b !RAM_SMB3_TitleScreen_Mario_YSpeed,x
CODE_20BCDA:
	PLB
	RTS

;--------------------------------------------------------------------

; Note: Routine that updates the position of the title screen players.

CODE_20BCDC:
	LDA.b !RAM_SMB3_TitleScreen_Mario_XSpeed,x
	PHA
	ASL
	ASL
	ASL
	ASL
	STA.b $0B
	LDY.b #$00
	PLA
	LSR
	LSR
	LSR
	LSR
	CMP.b #$08
	BCC.b CODE_20BCF3
	DEY
	ORA.b #$F0
CODE_20BCF3:
	STA.b $0A
	STY.b $0C
	LDA.b !RAM_SMB3_TitleScreen_Mario_SubXPos,x
	CLC
	ADC.b $0B
	STA.b !RAM_SMB3_TitleScreen_Mario_SubXPos,x
	LDA.b !RAM_SMB3_TitleScreen_Mario_XPosLo,x
	ADC.b $0A
	STA.b !RAM_SMB3_TitleScreen_Mario_XPosLo,x
	LDA.b !RAM_SMB3_TitleScreen_Mario_XPosHi,x
	ADC.b $0C
	STA.b !RAM_SMB3_TitleScreen_Mario_XPosHi,x
	RTS

;--------------------------------------------------------------------

CODE_20BD0B:
	LDA.b !RAM_SMB3_TitleScreen_Mario_YSpeed,x
	BMI.b CODE_20BD17
	CMP.b #$40
	BMI.b CODE_20BD17
	LDA.b #$40
	STA.b !RAM_SMB3_TitleScreen_Mario_YSpeed,x
CODE_20BD17:
	TXA
	PHA
	CLC
	ADC.b #$08
	TAX
	JSR.w CODE_20BCDC
	PLA
	TAX
	RTS

;--------------------------------------------------------------------

DATA_20BD23:
	db $07,$06,$05,$04,$03,$02,$01,$01
	db $01

CODE_20BD2C:
	PHB
	PHK
	PLB
	LDA.b !RAM_SMB3_TitleScreen_Mario_XSpeed,x
	BPL.b CODE_20BD38
	EOR.b #$FF
	CLC										;\ Optimization: INC
	ADC.b #$01									;/
CODE_20BD38:
	LSR
	LSR
	LSR
	TAY
	INC.b !RAM_SMB3_TitleScreen_Mario_WalkingAnimationFrameCounter,x
	LDA.b !RAM_SMB3_TitleScreen_Mario_WalkingAnimationFrameCounter,x
	CMP.w DATA_20BD23,y
	BMI.b CODE_20BD55
	LDA.b #$00
	STA.b !RAM_SMB3_TitleScreen_Mario_WalkingAnimationFrameCounter,x
	INC.b !RAM_SMB3_TitleScreen_Mario_WalkingAnimationIndex,x
	LDA.b !RAM_SMB3_TitleScreen_Mario_WalkingAnimationIndex,x
	CMP.b #$04
	BMI.b CODE_20BD55
	LDA.b #$00
	STA.b !RAM_SMB3_TitleScreen_Mario_WalkingAnimationIndex,x
CODE_20BD55:
	LDA.b $B8,x
	AND.b #$03
	BNE.b CODE_20BD63
	LDA.b !RAM_SMB3_TitleScreen_Mario_XSpeed,x
	BNE.b CODE_20BD63
	LDA.b #$02
	STA.b !RAM_SMB3_TitleScreen_Mario_WalkingAnimationIndex,x
CODE_20BD63:
	LDA.b !RAM_SMB3_TitleScreen_Mario_YXPPCCCT,x
	STA.b $00
	LDA.b $B8,x
	AND.b #$03
	BEQ.b CODE_20BD77
	LDY.b #$00
	AND.b #$02
	BNE.b CODE_20BD75
	LDY.b #$40
CODE_20BD75:
	STY.b !RAM_SMB3_TitleScreen_Mario_YXPPCCCT,x
CODE_20BD77:
	LDA.b !RAM_SMB3_TitleScreen_Mario_YXPPCCCT,x
	EOR.b $00
	STA.b $00
	PHX
	LDA.b !RAM_SMB3_TitleScreen_Mario_GFXSet,x
	ASL
	ASL
	ORA.b !RAM_SMB3_TitleScreen_Mario_WalkingAnimationIndex,x
	TAX
	LDA.l DATA_20BB1E,x
	PLX
	STA.b !RAM_SMB3_TitleScreen_Mario_CurrentPose,x
	LDA.b !RAM_SMB3_TitleScreen_Mario_XSpeed,x
	CLC
	ADC.b #$01
	CMP.b #$03
	BCC.b CODE_20BDA6
	LDA.b !RAM_SMB3_TitleScreen_Mario_MovementDirection,x
	AND.b $B8,x
	BEQ.b CODE_20BDA6
	LDY.b !RAM_SMB3_TitleScreen_Mario_GFXSet,x
	BEQ.b CODE_20BDA1
	LDY.b #$01
CODE_20BDA1:
	LDA.w DATA_20BB31,y
	STA.b !RAM_SMB3_TitleScreen_Mario_CurrentPose,x
CODE_20BDA6:
	LDA.b $B8,x
	AND.b #$04
	BEQ.b CODE_20BDC7
	LDY.b !RAM_SMB3_TitleScreen_Mario_GFXSet,x
	LDA.w DATA_20BB2E,y
	STA.b !RAM_SMB3_TitleScreen_Mario_CurrentPose,x
	LDA.b $BA,x
	AND.b #$04
	BEQ.b CODE_20BDC7
	LDY.b #$00
	TXA
	BNE.b CODE_20BDBF
	INY
CODE_20BDBF:
	LDA.b #$A0
	STA.w !RAM_SMB3_TitleScreen_Mario_InAirFlag,y
	STA.w !RAM_SMB3_TitleScreen_Mario_YSpeed,y
CODE_20BDC7:
	LDA.b $B8,x
	AND.b #$08
	BEQ.b CODE_20BDD1
	LDA.b #$17
	STA.b !RAM_SMB3_TitleScreen_Mario_CurrentPose,x
CODE_20BDD1:
	LDA.b !RAM_SMB3_TitleScreen_Mario_InAirFlag,x
	BEQ.b CODE_20BE0B
	LDA.b !RAM_SMB3_TitleScreen_Mario_GFXSet,x
	BEQ.b CODE_20BE0B
	CMP.b #$02
	BNE.b CODE_20BE01
	LDA.b #$15
	LDY.b !RAM_SMB3_TitleScreen_Mario_YSpeed,x
	BMI.b CODE_20BE09
	LDA.b !RAM_SMB3_TitleScreen_Mario_TailGlideAnimationTimer,x
	BEQ.b CODE_20BDEC
	DEC.b !RAM_SMB3_TitleScreen_Mario_TailGlideAnimationTimer,x
	JMP.w CODE_20BDF6

CODE_20BDEC:
	LDA.b $B8,x
	AND.b #$80
	BEQ.b CODE_20BDF6
	LDA.b #$0A
	STA.b !RAM_SMB3_TitleScreen_Mario_TailGlideAnimationTimer,x
CODE_20BDF6:
	LDA.b !RAM_SMB3_TitleScreen_Mario_TailGlideAnimationTimer,x
	LSR
	LSR
	TAY
	LDA.w DATA_20BB33,y
	JMP.w CODE_20BE09

CODE_20BE01:
	LDA.b #$14
	LDY.b !RAM_SMB3_TitleScreen_Mario_YSpeed,x
	BMI.b CODE_20BE09
	LDA.b #$00
CODE_20BE09:
	STA.b !RAM_SMB3_TitleScreen_Mario_CurrentPose,x
CODE_20BE0B:
	LDA.b !RAM_SMB3_TitleScreen_Mario_KickAnimationTimer,x
	BEQ.b CODE_20BE15
	DEC.b !RAM_SMB3_TitleScreen_Mario_KickAnimationTimer,x
	LDA.b #$0D
	STA.b !RAM_SMB3_TitleScreen_Mario_CurrentPose,x
CODE_20BE15:
	LDA.b !RAM_SMB3_TitleScreen_Mario_BonkedAnimationTimer,x
	BEQ.b CODE_20BE1F
	DEC.b !RAM_SMB3_TitleScreen_Mario_BonkedAnimationTimer,x
	LDA.b #$16
	STA.b !RAM_SMB3_TitleScreen_Mario_CurrentPose,x
CODE_20BE1F:
	TXA
	BNE.b CODE_20BE3A
	LDA.b !RAM_SMB3_TitleScreen_Mario_ShrinkAnimationTimer
	BEQ.b CODE_20BE3A
	LSR
	LSR
	TAY
	LDA.w DATA_20BB3A,y
	STA.b !RAM_SMB3_TitleScreen_Mario_CurrentPose
	LDY.b #$00
	CMP.b #$11
	BEQ.b CODE_20BE36
	LDY.b #$01
CODE_20BE36:
	STY.b !RAM_SMB3_TitleScreen_Mario_GFXSet
	DEC.b !RAM_SMB3_TitleScreen_Mario_ShrinkAnimationTimer
CODE_20BE3A:
	LDA.b !RAM_SMB3_TitleScreen_Mario_CarryingSomethingFlag,x
	BNE.b CODE_20BE46
	LDA.b $BA,x
	AND.b #$20
	BEQ.b CODE_20BE73
	STA.b !RAM_SMB3_TitleScreen_Mario_CarryingSomethingFlag,x
CODE_20BE46:
	LDY.b !RAM_SMB3_TitleScreen_Mario_WalkingAnimationIndex,x
	LDA.b !RAM_SMB3_TitleScreen_Mario_InAirFlag,x
	BEQ.b CODE_20BE4E
	LDY.b #$00
CODE_20BE4E:
	LDA.w DATA_20BB36,y
	STA.b !RAM_SMB3_TitleScreen_Mario_CurrentPose,x
	LDA.b $00
	BEQ.b CODE_20BE5B
	LDA.b #$08
	STA.b !RAM_SMB3_TitleScreen_Mario_BonkedAnimationTimer,x
CODE_20BE5B:
	LDA.b !RAM_SMB3_TitleScreen_Mario_BonkedAnimationTimer,x
	BEQ.b CODE_20BE65
	DEC.b !RAM_SMB3_TitleScreen_Mario_BonkedAnimationTimer,x
	LDA.b #$0A
	STA.b !RAM_SMB3_TitleScreen_Mario_CurrentPose,x
CODE_20BE65:
	LDA.b $BA,x
	AND.b #$40
	BEQ.b CODE_20BE73
	STZ.b !RAM_SMB3_TitleScreen_Mario_CarryingSomethingFlag,x
	STZ.b !RAM_SMB3_TitleScreen_Mario_BonkedAnimationTimer,x
	LDA.b #$0A
	STA.b !RAM_SMB3_TitleScreen_Mario_KickAnimationTimer,x
CODE_20BE73:
	PLB
	RTS

;--------------------------------------------------------------------

	%ROUTINE_SMB3_DrawCutscenePlayerSprites(NULLROM)				; $20BE75

;--------------------------------------------------------------------

DATA_20C012:
	db $00,$00,$00,$00,$00,$FF

DATA_20C018:
	db $00,$08,$10,$00,$08,$F8

DATA_20C01E:
	db $80,$40,$20,$80,$40,$20

SMB3_CheckWhichTitleScreenPlayerTilesAreOffScreen:
.Main:
;$20C024
	PHB
	PHK
	PLB
	LDA.b #$00
	STA.b !RAM_SMB3_TitleScreen_Mario_OffscreenTileFlags,x
	LDY.b #$02
	LDA.b !RAM_SMB3_TitleScreen_Mario_YXPPCCCT,x
	AND.b #$40
	BEQ.b CODE_20C035
	LDY.b #$05
CODE_20C035:
	LDA.b !RAM_SMB3_TitleScreen_Mario_XPosLo,x
	CLC
	ADC.w DATA_20C018,y
	LDA.b !RAM_SMB3_TitleScreen_Mario_XPosHi,x
	ADC.w DATA_20C012,y
	BEQ.b CODE_20C049
	LDA.b !RAM_SMB3_TitleScreen_Mario_OffscreenTileFlags,x
	ORA.w DATA_20C01E,y
	STA.b !RAM_SMB3_TitleScreen_Mario_OffscreenTileFlags,x
CODE_20C049:
	DEY
	BMI.b CODE_20C050
	CPY.b #$02
	BNE.b CODE_20C035
CODE_20C050:
	PLB
	RTS

;--------------------------------------------------------------------

DATA_20C052:
	db $86,$84,$82,$80

SMB3_DrawTitleScreenPowerUpPoofAnimation:
.Main:
;$20C056
	PHX
	TXA
	BNE.b CODE_20C05F
	LDA.w !RAM_SMB3_TitleScreen_Mario_PowerUpPoofAnimationTimer
	BNE.b CODE_20C062
CODE_20C05F:
	BRL.w CODE_20C0E2

CODE_20C062:
	DEC.w !RAM_SMB3_TitleScreen_Mario_PowerUpPoofAnimationTimer
	AND.b #$0C
	LSR
	LSR
	TAX
	LDA.l DATA_20C052,x
	STA.b $01
	LDY.b !RAM_SMB3_TitleScreen_Mario_OAMIndex
	LDA.b #$C0
	STA.b $00
CODE_20C076:
	LDA.b !RAM_SMB3_TitleScreen_Mario_YPosLo
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$01].YDisp,y
	LDA.b $01
	STA.w SMB3_OAMBuffer[$00].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$01].Tile,y
	LDA.b $00
	ORA.b #$24
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$01].Prop,y
	LDA.b !RAM_SMB3_TitleScreen_Mario_XPosLo
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	LDA.b $00
	AND.b #$F0
	BEQ.b CODE_20C0BF
	LDA.w SMB3_OAMBuffer[$00].XDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	LDA.w SMB3_OAMBuffer[$00].YDisp,y
	PHA
	LDA.w SMB3_OAMBuffer[$01].YDisp,y
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	PLA
	STA.w SMB3_OAMBuffer[$01].YDisp,y
CODE_20C0BF:
	PHY
	TYA
	LSR
	LSR
	TAY
	LDA.b #$00
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	PLY
CODE_20C0CD:
	INY
	INY
	INY
	INY
	INY
	INY
	INY
	INY
	LDA.b $00
	SEC
	SBC.b #$C0
	STA.b $00
	BCS.b CODE_20C076
	STZ.b !RAM_SMB3_TitleScreen_Mario_YSpeed
	STZ.b !RAM_SMB3_TitleScreen_Mario_XSpeed
CODE_20C0E2:
	PLX
	RTS

;--------------------------------------------------------------------

CODE_20C0E4:
	LDX.b #$05
CODE_20C0E6:
	LDA.b !RAM_SMB3_TitleScreen_Sprite_CurrentState,x
	BEQ.b CODE_20C0F7
	CMP.b #$01
	BNE.b CODE_20C0F4
	JSR.w CODE_20C109
	JMP.w CODE_20C0F7

CODE_20C0F4:
	JSR.w CODE_20C13D
CODE_20C0F7:
	LDA.w $0513,x
	BEQ.b CODE_20C0FF
	DEC.w $0513,x
CODE_20C0FF:
	DEX
	BPL.b CODE_20C0E6
	RTS

DATA_20C103:
	db $D0,$20,$60,$43,$B0,$78

CODE_20C109:
	LDA.l DATA_20C103,x
	STA.b !RAM_SMB3_TitleScreen_Sprite_XPosLo,x
	STZ.b !RAM_SMB3_TitleScreen_Sprite_YPosLo,x
	STZ.b !RAM_SMB3_TitleScreen_Sprite_XSpeed,x
	STZ.b !RAM_SMB3_TitleScreen_Sprite_YSpeed,x
	INC.b !RAM_SMB3_TitleScreen_Sprite_CurrentState,x
	TXA
	JSL.l SMB3_ExecutePtr_Absolute

DATA_20C11C:
	dw CODE_20C136
	dw CODE_20C136
	dw CODE_20C128
	dw CODE_20C137
	dw CODE_20C136
	dw CODE_20C136

CODE_20C128:
	STZ.b !RAM_SMB3_TitleScreen_Sprite_XSpeed,x
	STZ.w $0519,x
	LDA.b #$10
	STA.w $0513,x
	LDA.b #$04
	STA.b !RAM_SMB3_TitleScreen_Sprite_YSpeed,x
CODE_20C136:
	RTS

CODE_20C137:
	LDA.b #$B9
	STA.w $0519,x
	RTS

CODE_20C13D:
	TXA
	JSL.l SMB3_ExecutePtr_Absolute

DATA_20C142:
	dw CODE_20C14E
	dw CODE_20C161
	dw CODE_20C177
	dw CODE_20C1DA
	dw CODE_20C226
	dw CODE_20C270

CODE_20C14E:
	JSR.w CODE_20C3AF
	BNE.b CODE_20C15B
	LDA.b #$20
	STA.b !RAM_SMB3_TitleScreen_Sprite_XSpeed,x
	LDA.b #$B0
	STA.b !RAM_SMB3_TitleScreen_Sprite_YSpeed,x
CODE_20C15B:
	JSR.w CODE_20C415
	JMP.w CODE_20C3CB

CODE_20C161:
	JSR.w CODE_20C3AF
	BNE.b CODE_20C16A
	LDA.b #$F0
	STA.b !RAM_SMB3_TitleScreen_Sprite_XSpeed,x
CODE_20C16A:
	JSR.w CODE_20C415
	JMP.w CODE_20C3CB

DATA_20C170:
	db $02,$FE

DATA_20C172:
	db $20,$E0

DATA_20C174:
	db $0A,$F6,$08

CODE_20C177:
	PHB
	PHK
	PLB
	LDA.w $0513,x
	BEQ.b CODE_20C18B
	JSR.w CODE_20C505
	INC.b !RAM_SMB3_TitleScreen_Sprite_YSpeed,x
	LDA.b !RAM_SMB3_TitleScreen_Sprite_YSpeed,x
	BNE.b CODE_20C1B4
	STZ.w $0513,x
CODE_20C18B:
	LDA.w $0519,x
	AND.b #$01
	TAY
	LDA.w DATA_20C170,y
	CLC
	ADC.b !RAM_SMB3_TitleScreen_Sprite_XSpeed,x
	STA.b !RAM_SMB3_TitleScreen_Sprite_XSpeed,x
	CMP.w DATA_20C172,y
	BNE.b CODE_20C1A1
	INC.w $0519,x
CODE_20C1A1:
	LDA.b !RAM_SMB3_TitleScreen_Sprite_XSpeed,x
	BPL.b CODE_20C1A6
	INY
CODE_20C1A6:
	LDA.w DATA_20C174,y
	CLC
	ADC.b #$06
	STA.b !RAM_SMB3_TitleScreen_Sprite_YSpeed,x
	JSR.w CODE_20C4FD
	JSR.w CODE_20C505
CODE_20C1B4:
	LDA.b #$40
	LDY.b !RAM_SMB3_TitleScreen_Sprite_XSpeed,x
	BEQ.b CODE_20C1C0
	BPL.b CODE_20C1BE
	LDA.b #$00
CODE_20C1BE:
	STA.b !RAM_SMB3_TitleScreen_Sprite_YXPPCCCT,x
CODE_20C1C0:
	JSR.w CODE_20C415
	LDA.b !RAM_SMB3_TitleScreen_Sprite_YPosLo,x
	AND.b #$F0
	CMP.b #$50
	BNE.b CODE_20C1D8
	LDA.b #$00
	STA.b !RAM_SMB3_TitleScreen_Sprite_CurrentState,x
	LDA.b #$13
	STA.w !RAM_SMB3_TitleScreen_Mario_PowerUpPoofAnimationTimer
	LDA.b #$02
	STA.b !RAM_SMB3_TitleScreen_Mario_GFXSet
CODE_20C1D8:
	PLB
	RTS

CODE_20C1DA:
	JSR.w CODE_20C3AF
	BNE.b CODE_20C21A
	LDA.w $0519,x
	BEQ.b CODE_20C1EA
	DEC.w $0519,x
	JMP.w CODE_20C415

CODE_20C1EA:
	LDA.b !RAM_SMB3_TitleScreen_Sprite_XPosLo,x
	CMP.b #$30
	BCS.b CODE_20C216
	LDA.w $0513,x
	BNE.b CODE_20C1FA
	LDA.b #$10
	STA.w $0513,x
CODE_20C1FA:
	CMP.b #$01
	BNE.b CODE_20C202
	LDA.b #$00
	STA.b !RAM_SMB3_TitleScreen_Sprite_CurrentState,x
CODE_20C202:
	LDA.b !RAM_SMB3_TitleScreen_Sprite_XSpeed,x
	BEQ.b CODE_20C20E
	LDA.b #$00
	STA.b !RAM_SMB3_TitleScreen_Sprite_XSpeed,x
	LDA.b #$D0
	STA.b !RAM_SMB3_TitleScreen_Mario_YSpeed
CODE_20C20E:
	LDA.b #$01
	STA.w $051F,x
	JMP.w CODE_20C415

CODE_20C216:
	LDA.b #$F8
	STA.b !RAM_SMB3_TitleScreen_Sprite_XSpeed,x
CODE_20C21A:
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$08
	ASL
	ASL
	ASL
	STA.b !RAM_SMB3_TitleScreen_Sprite_YXPPCCCT,x
	JMP.w CODE_20C415

CODE_20C226:
	LDA.w $0519,x
	BNE.b CODE_20C237
	LDA.b !RAM_SMB3_TitleScreen_Sprite_XPosLo,x
	SEC
	SBC.b $5A
	CMP.b #$10
	BCS.b CODE_20C25D
	INC.w $0519,x
CODE_20C237:
	LDA.b !RAM_SMB3_TitleScreen_Sprite_XSpeed,x
	BNE.b CODE_20C247
	LDA.b #$10
	STA.b !RAM_SMB3_TitleScreen_Sprite_XSpeed,x
	LDA.b #$C0
	STA.b !RAM_SMB3_TitleScreen_Sprite_YSpeed,x
CODE_20C243:
	LDA.b #$80
	STA.b !RAM_SMB3_TitleScreen_Sprite_YXPPCCCT,x
CODE_20C247:
	LDA.b !RAM_SMB3_TitleScreen_Sprite_YSpeed,x
	CLC
	ADC.b #$04
	STA.b !RAM_SMB3_TitleScreen_Sprite_YSpeed,x
	JSR.w CODE_20C4FD
	JSR.w CODE_20C505
	LDA.b !RAM_SMB3_TitleScreen_Sprite_YPosHi,x
	BEQ.b CODE_20C26D
	LDA.b #$00
	STA.b !RAM_SMB3_TitleScreen_Sprite_CurrentState,x
	RTS

CODE_20C25D:
	JSR.w CODE_20C3AF
	BNE.b CODE_20C26D
	LDA.b #$20
	SEC
	SBC.b !RAM_SMB3_TitleScreen_Sprite_YSpeed,x
	BCC.b CODE_20C26B
	LDA.b #$00
CODE_20C26B:
	STA.b !RAM_SMB3_TitleScreen_Sprite_YSpeed,x
CODE_20C26D:
	JMP.w CODE_20C415

CODE_20C270:
	LDA.b !RAM_SMB3_TitleScreen_Sprite_CurrentState,x
	SEC
	SBC.b #$02
	JSL.l SMB3_ExecutePtr_Absolute

DATA_20C279:
	dw CODE_20C283
	dw CODE_20C2A5
	dw CODE_20C2C7
	dw CODE_20C2F0
	dw CODE_20C317

CODE_20C283:
	JSR.w CODE_20C3AF
	BNE.b CODE_20C28E
	INC.b !RAM_SMB3_TitleScreen_Sprite_CurrentState,x
	STZ.b !RAM_SMB3_TitleScreen_Sprite_XSpeed,x
	BRA.b CODE_20C2A2

CODE_20C28E:
	LDA.b !RAM_SMB3_TitleScreen_Sprite_YPosLo,x
	CMP.b #$90
	BCC.b CODE_20C2A2
	LDA.b !RAM_SMB3_TitleScreen_Sprite_XSpeed,x
	BNE.b CODE_20C2A2
	LDA.b #$E8
	STA.b !RAM_SMB3_TitleScreen_Sprite_XSpeed,x
	STA.b !RAM_SMB3_TitleScreen_Sprite_YSpeed,x
	LDA.b #$10
	STA.b !RAM_SMB3_TitleScreen_Mario_BonkedAnimationTimer
CODE_20C2A2:
	JMP.w CODE_20C33F

CODE_20C2A5:
	JSR.w CODE_20C3AF
	LDA.b $BA
	AND.b #$10
	BEQ.b CODE_20C2B6
	LDA.b #$0A
	STA.b !RAM_SMB3_TitleScreen_Mario_KickAnimationTimer
	LDA.b #$30
	STA.b !RAM_SMB3_TitleScreen_Sprite_XSpeed,x
CODE_20C2B6:
	LDA.b !RAM_SMB3_TitleScreen_Sprite_XPosHi,x
	BEQ.b CODE_20C2BE
	LDA.b #$00
	STA.b !RAM_SMB3_TitleScreen_Sprite_XSpeed,x
CODE_20C2BE:
	LDA.b !RAM_SMB3_TitleScreen_Luigi_CarryingSomethingFlag
	BEQ.b CODE_20C2C4
	INC.b !RAM_SMB3_TitleScreen_Sprite_CurrentState,x
CODE_20C2C4:
	JMP.w CODE_20C33F

CODE_20C2C7:
	LDA.b !RAM_SMB3_TitleScreen_Luigi_CarryingSomethingFlag
	BEQ.b CODE_20C2D4
	LDA.b #$D0
	STA.b !RAM_SMB3_TitleScreen_Sprite_XSpeed,x
	LDY.b #$01
	JMP.w CODE_20C36C

CODE_20C2D4:
	JSR.w CODE_20C3AF
	LDA.b !RAM_SMB3_TitleScreen_Sprite_XPosLo,x
	CMP.b #$38
	BCS.b CODE_20C2E7
	LDA.b !RAM_SMB3_TitleScreen_Sprite_XSpeed,x
	BEQ.b CODE_20C2E7
	STZ.b !RAM_SMB3_TitleScreen_Sprite_XSpeed,x
	LDA.b #$D0
	STA.b $6B
CODE_20C2E7:
	LDA.b !RAM_SMB3_TitleScreen_Mario_CarryingSomethingFlag
	BEQ.b CODE_20C2ED
	INC.b !RAM_SMB3_TitleScreen_Sprite_CurrentState,x
CODE_20C2ED:
	JMP.w CODE_20C33F

CODE_20C2F0:
	LDA.b !RAM_SMB3_TitleScreen_Mario_CarryingSomethingFlag
	BEQ.b CODE_20C2F9
	LDY.b #$00
	JMP.w CODE_20C36C

CODE_20C2F9:
	JSR.w CODE_20C3AF
	LDA.b #$30
	STA.b !RAM_SMB3_TitleScreen_Sprite_XSpeed,x
	LDA.b !RAM_SMB3_TitleScreen_Sprite_XPosHi,x
	BEQ.b CODE_20C314
	LDA.b #$FF
	STA.b !RAM_SMB3_TitleScreen_Sprite_XPosHi,x
	LDA.b #$F0
	STA.b !RAM_SMB3_TitleScreen_Sprite_XPosLo,x
	LDA.b #$30
	STA.w $0513,x
	INC.b !RAM_SMB3_TitleScreen_Sprite_CurrentState,x
	RTS

CODE_20C314:
	JMP.w CODE_20C33F

CODE_20C317:
	LDA.w $0513,x
	BNE.b CODE_20C33E
	LDA.b !RAM_SMB3_TitleScreen_Mario_ShrinkAnimationTimer
	BNE.b CODE_20C338
	JSR.w CODE_20C3AF
	LDA.b !RAM_SMB3_TitleScreen_Sprite_XPosHi,x
	BNE.b CODE_20C338
	LDA.b !RAM_SMB3_TitleScreen_Mario_GFXSet
	BEQ.b CODE_20C338
	LDA.b !RAM_SMB3_TitleScreen_Mario_XPosLo
	SEC
	SBC.b !RAM_SMB3_TitleScreen_Sprite_XPosLo,x
	CMP.b #$10
	BCS.b CODE_20C338
	LDA.b #$2C
	STA.b !RAM_SMB3_TitleScreen_Mario_ShrinkAnimationTimer
CODE_20C338:
	JSR.w CODE_20C3CB
	JSR.w CODE_20C33F
CODE_20C33E:
	RTS

CODE_20C33F:
	LDA.b !RAM_SMB3_TitleScreen_Sprite_XSpeed,x
	BEQ.b CODE_20C359
	LDA.b !RAM_SMB3_TitleScreen_Mario_ShrinkAnimationTimer
	BNE.b CODE_20C359
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$06
	PHA
	LSR
	STA.w $051F,x
	PLA
	AND.b #$04
	ASL
	ASL
	ASL
	ASL
	STA.b !RAM_SMB3_TitleScreen_Sprite_YXPPCCCT,x
CODE_20C359:
	JMP.w CODE_20C415

DATA_20C35C:
	db $F4,$F6,$FA,$FE,$02,$06,$0A,$0C
	db $0C,$0A,$06,$02,$FE,$FA,$F6,$F4

CODE_20C36C:
	LDA.w !RAM_SMB3_TitleScreen_Mario_XPosLo,y
	STA.b !RAM_SMB3_TitleScreen_Sprite_XPosLo,x
	LDA.w !RAM_SMB3_TitleScreen_Mario_XPosHi,y
	STA.b !RAM_SMB3_TitleScreen_Sprite_XPosHi,x
	LDA.w !RAM_SMB3_TitleScreen_Mario_YPosLo,y
	CLC
	ADC.b #$0D
	STA.b !RAM_SMB3_TitleScreen_Sprite_YPosLo,x
	LDA.w !RAM_SMB3_TitleScreen_Mario_YXPPCCCT,y
	PHP
	LDA.w !RAM_SMB3_TitleScreen_Mario_BonkedAnimationTimer,y
	PLP
	PHA
	BEQ.b CODE_20C38C
	CLC
	ADC.b #$08
CODE_20C38C:
	STX.b $0F
	TAX
	LDA.l DATA_20C35C,x
	BPL.b CODE_20C399
	LDX.b $0F
	DEC.b !RAM_SMB3_TitleScreen_Sprite_XPosHi,x
CODE_20C399:
	LDX.b $0F
	CLC
	ADC.b !RAM_SMB3_TitleScreen_Sprite_XPosLo,x
	STA.b !RAM_SMB3_TitleScreen_Sprite_XPosLo,x
	BCC.b CODE_20C3A4
	INC.b !RAM_SMB3_TitleScreen_Sprite_XPosHi,x
CODE_20C3A4:
	PLA
	BNE.b CODE_20C3AA
	JMP.w CODE_20C415

CODE_20C3AA:
	LDA.b #$00
	JMP.w CODE_20C419

CODE_20C3AF:
	LDA.b !RAM_SMB3_TitleScreen_Sprite_YSpeed,x
	CLC
	ADC.b #$04
	STA.b !RAM_SMB3_TitleScreen_Sprite_YSpeed,x
	JSR.w CODE_20C505
	JSR.w CODE_20C4FD
	LDA.b !RAM_SMB3_TitleScreen_Sprite_YPosLo,x
	AND.b #$F0
	CMP.b #$B0
	BNE.b CODE_20C3C6
	STA.b !RAM_SMB3_TitleScreen_Sprite_YPosLo,x
CODE_20C3C6:
	RTS

DATA_20C3C7:
	db $F0,$30

DATA_20C3C9:
	db $FF,$00

CODE_20C3CB:
	PHX
	TXY
	LDX.b #$00
	LDA.w !RAM_SMB3_TitleScreen_Sprite_XPosHi,y
	BEQ.b CODE_20C3ED
	BPL.b CODE_20C3D7
	INX
CODE_20C3D7:
	LDA.w !RAM_SMB3_TitleScreen_Sprite_XPosLo,y
	CLC
	ADC.l DATA_20C3C7,x
	LDA.w !RAM_SMB3_TitleScreen_Sprite_XPosHi,y
	ADC.l DATA_20C3C9,x
	BEQ.b CODE_20C3ED
	LDA.b #$00
	STA.w !RAM_SMB3_TitleScreen_Sprite_CurrentState,y
CODE_20C3ED:
	PLX
	RTS

DATA_20C3EF:
	db $F8,$F8
	db $F4,$F4
	db $F0,$F2
	db $FA,$FC
	db $FE,$FE
	db $DC,$DC
	db $D4,$D4
	db $D6,$D8
	db $DA,$DA
	db $D6,$D8

DATA_20C403:
	db $00,$02,$04,$06,$0A,$0C

DATA_20C409:
	db $00,$10,$20,$50,$40,$30

DATA_20C40F:
	db $01,$01,$01,$01,$02,$02

CODE_20C415:
	LDA.l DATA_20C409,x
CODE_20C419:
	PHA
	LDA.l DATA_20C40F,x
	ASL
	STA.b $02
	PHX
	LDA.w $051F,x
	ASL
	CLC
	ADC.l DATA_20C403,x
	TAX
	LDA.l DATA_20C3EF,x
	STA.b $00
	LDA.l DATA_20C3EF+$01,x
	STA.b $01
	PLX
	PLA
	TAY
	LDA.b !RAM_SMB3_TitleScreen_Sprite_YPosLo,x
	CMP.b #$E8
	BCC.b CODE_20C442
	RTS

CODE_20C442:
	STA.w SMB3_OAMBuffer[$40].YDisp,y
	STA.w SMB3_OAMBuffer[$41].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$42].YDisp,y
	STA.w SMB3_OAMBuffer[$43].YDisp,y
	LDA.b !RAM_SMB3_TitleScreen_Sprite_XPosLo,x
	STA.w SMB3_OAMBuffer[$40].XDisp,y
	STA.w SMB3_OAMBuffer[$42].XDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$41].XDisp,y
	STA.w SMB3_OAMBuffer[$43].XDisp,y
	LDA.b $02
	ORA.b !RAM_SMB3_TitleScreen_Sprite_YXPPCCCT,x
	ORA.b #$30
	STA.w SMB3_OAMBuffer[$40].Prop,y
	STA.w SMB3_OAMBuffer[$41].Prop,y
	STA.w SMB3_OAMBuffer[$42].Prop,y
	STA.w SMB3_OAMBuffer[$43].Prop,y
	LDA.b $00
	PHA
	STA.w SMB3_OAMBuffer[$40].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$42].Tile,y
	LDA.b $01
	STA.w SMB3_OAMBuffer[$41].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$43].Tile,y
	LDA.b !RAM_SMB3_TitleScreen_Sprite_YXPPCCCT,x
	BEQ.b CODE_20C49D
	LDA.b $01
	STA.w SMB3_OAMBuffer[$40].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$42].Tile,y
	LDA.b $00
	STA.w SMB3_OAMBuffer[$41].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$43].Tile,y
CODE_20C49D:
	LDA.b !RAM_SMB3_TitleScreen_Sprite_YXPPCCCT,x
	AND.b #$80
	BEQ.b CODE_20C4B5
	LDA.b $01
	STA.w SMB3_OAMBuffer[$42].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$40].Tile,y
	LDA.b $00
	STA.w SMB3_OAMBuffer[$43].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$41].Tile,y
CODE_20C4B5:
	PLA
	CMP.b $01
	BNE.b CODE_20C4CD
	LDA.w SMB3_OAMBuffer[$40].Prop,y
	AND.b #$BF
	STA.w SMB3_OAMBuffer[$40].Prop,y
	STA.w SMB3_OAMBuffer[$42].Prop,y
	ORA.b #$40
	STA.w SMB3_OAMBuffer[$41].Prop,y
	STA.w SMB3_OAMBuffer[$43].Prop,y
CODE_20C4CD:
	STZ.b $D8
	STZ.b $D9
	LDA.b !RAM_SMB3_TitleScreen_Sprite_XPosHi,x
	BEQ.b CODE_20C4D7
	INC.b $D8
CODE_20C4D7:
	LDA.b !RAM_SMB3_TitleScreen_Sprite_XPosLo,x
	CLC
	ADC.b #$08
	LDA.b #$00
	ADC.b !RAM_SMB3_TitleScreen_Sprite_XPosHi,x
	BEQ.b CODE_20C4E4
	INC.b $D9
CODE_20C4E4:
	TYA
	LSR
	LSR
	TAY
	LDA.b $D8
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$40].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$42].Slot,y
	LDA.b $D9
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$41].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$43].Slot,y
	RTS

CODE_20C4FD:
	INX
	INX
	JSR.w CODE_20BCDC
	DEX
	DEX
	RTS

CODE_20C505:
	LDA.b !RAM_SMB3_TitleScreen_Sprite_YSpeed,x
	BMI.b CODE_20C511
	CMP.b #$60
	BMI.b CODE_20C511
	LDA.b #$60
	STA.b !RAM_SMB3_TitleScreen_Sprite_YSpeed,x
CODE_20C511:
	INX
	INX
	JSR.w CODE_20BD17
	DEX
	DEX
	RTS

;--------------------------------------------------------------------

DATA_20C519:
	db $00,$30,$60,$90

;--------------------------------------------------------------------

CODE_20C51D:
	JSL.l SMB3_ResetSpriteOAMRt_Main
	LDX.b #$03
CODE_20C523:
	LDA.b !RAM_SMB3_TitleScreen_Sprite_CurrentState,x
	BEQ.b CODE_20C533
	CMP.b #$01
	BNE.b CODE_20C530
	JSR.w CODE_20C537
	BRA.b CODE_20C533

CODE_20C530:
	JSR.w CODE_20C565
CODE_20C533:
	DEX
	BPL.b CODE_20C523
	RTS

CODE_20C537:
	INC.b !RAM_SMB3_TitleScreen_Sprite_CurrentState,x
	LDA.b #$FF
	STA.b !RAM_SMB3_TitleScreen_Sprite_XPosHi,x
	LDA.b #$F0
CODE_20C53F:
	STA.b !RAM_SMB3_TitleScreen_Sprite_XPosLo,x
	LDA.b #$08
CODE_20C542:
	CPX.b #$03
	BNE.b CODE_20C549
	LDA.b #$12
CODE_20C549:
	STA.b !RAM_SMB3_TitleScreen_Sprite_XSpeed,x
	RTS

DATA_20C54C:
	db $E0,$F0,$00

DATA_20C54F:
	db $20,$20,$90,$00

DATA_20C553:
	db $44,$44,$44

DATA_20C556:
	db $44,$44,$44

DATA_20C559:
	db $B0,$E4,$E8,$B0,$E4,$EE

DATA_20C55F:
	db $E0,$E2,$E6,$E0,$EA,$EC

CODE_20C565:
	JSR.w CODE_20C4FD
	JSR.w CODE_20C3CB
	LDA.b !RAM_SMB3_TitleScreen_Sprite_XPosHi,x
	BNE.b CODE_20C581
	LDA.l DATA_20C54F,x
	BEQ.b CODE_20C581
	CMP.b !RAM_SMB3_TitleScreen_Sprite_XPosLo,x
	BCS.b CODE_20C581
	INX
	LDA.b !RAM_SMB3_TitleScreen_Sprite_CurrentState,x
	BNE.b CODE_20C580
	INC.b !RAM_SMB3_TitleScreen_Sprite_CurrentState,x
CODE_20C580:
	DEX
CODE_20C581:
	LDA.b !RAM_SMB3_Global_FrameCounter
	LSR
	LSR
	CPX.b #$03
	BEQ.b CODE_20C58A
	LSR
CODE_20C58A:
	AND.b #$01
	BEQ.b CODE_20C590
	LDA.b #$03
CODE_20C590:
	STA.w $051F,x
	STX.b $02
	LDA.b !RAM_SMB3_TitleScreen_Sprite_XPosLo,x
	STA.b $00
	LDA.w $051F,x
	STA.b $01
	LDA.l DATA_20C519,x
	TAY
	LDX.b #$02
CODE_20C5A5:
	LDA.b #$BA
	CLC
	ADC.l DATA_20C54C,x
	STA.w SMB3_OAMBuffer[$40].YDisp,y
	STA.w SMB3_OAMBuffer[$41].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$42].YDisp,y
	STA.w SMB3_OAMBuffer[$43].YDisp,y
	TXA
	PHA
	CLC
	ADC.b $01
	TAX
	LDA.l DATA_20C559,x
	STA.w SMB3_OAMBuffer[$40].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$42].Tile,y
	LDA.l DATA_20C55F,x
	STA.w SMB3_OAMBuffer[$41].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$43].Tile,y
	PHY
	LDX.b $02
	JSR.w CODE_20C4CD
	PLY
	PLA
	TAX
	LDA.l DATA_20C553,x
	ORA.b #$20
	STA.w SMB3_OAMBuffer[$40].Prop,y
	STA.w SMB3_OAMBuffer[$42].Prop,y
	LDA.l DATA_20C556,x
	ORA.b #$20
	STA.w SMB3_OAMBuffer[$41].Prop,y
	STA.w SMB3_OAMBuffer[$43].Prop,y
	LDA.b $00
	STA.w SMB3_OAMBuffer[$40].XDisp,y
	STA.w SMB3_OAMBuffer[$42].XDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$41].XDisp,y
	STA.w SMB3_OAMBuffer[$43].XDisp,y
	TYA
	CLC
	ADC.b #$10
	TAY
	DEX
	BPL.b CODE_20C5A5
	LDX.b $02
	RTS

;--------------------------------------------------------------------

SMB3_ProcessPart1OfEnding:
.Main:
;$20C614
	STZ.w !RAM_SMB3_Level_GraphicsAndPaletteSettingFromHeader
	STZ.w !REGISTER_IRQNMIAndJoypadEnableFlags
	JSL.l SMB3_UploadMusicBank_Overworld
	REP.b #$20
	LDX.b #$80
	STX.w !REGISTER_VRAMAddressIncrementValue
	LDA.w #$2000
	STA.w !REGISTER_VRAMAddressLo
	LDA.w #(!REGISTER_WriteToVRAMPortLo&$0000FF<<8)+$01
	STA.w DMA[$00].Parameters
	LDA.w #SMB3_Bank45Graphics_FG_ToadHouse1
	STA.w DMA[$00].SourceLo
	LDX.b #SMB3_Bank45Graphics_FG_ToadHouse1>>16
	STX.w DMA[$00].SourceBank
	LDA.w #$2000
	STA.w DMA[$00].SizeLo
	LDX.b #$01
	STX.w !REGISTER_DMAEnable
	LDA.w #$3400
	STA.w !REGISTER_VRAMAddressLo
	LDA.w #(!REGISTER_WriteToVRAMPortLo&$0000FF<<8)+$01
	STA.w DMA[$00].Parameters
	LDA.w #SMB3_Bank42Graphics_BG_PeachsRoom1
	STA.w DMA[$00].SourceLo
	LDX.b #SMB3_Bank42Graphics_BG_PeachsRoom1>>16
	STX.w DMA[$00].SourceBank
	LDA.w #$1000
	STA.w DMA[$00].SizeLo
	LDX.b #$01
	STX.w !REGISTER_DMAEnable
	REP.b #$10
	PHB
	LDX.w #SpadeLevelPalette_Row01To07
	LDY.w #SMB3_PaletteMirror[$10].LowByte
	LDA.w #$00DF
	MVN SMB3_PaletteMirror[$10].LowByte>>16,SpadeLevelPalette_Row01To07>>16
	LDX.w #DATA_3CA8C0
	LDY.w #SMB3_PaletteMirror[$10].LowByte
	LDA.w #$001F
	MVN SMB3_PaletteMirror[$10].LowByte>>16,DATA_3CA8C0>>16
	LDX.w #SMB3_GlobalSpritePalette_Row08To0C
	LDY.w #SMB3_PaletteMirror[$80].LowByte
	LDA.w #$009F
	MVN SMB3_PaletteMirror[$80].LowByte>>16,SMB3_GlobalSpritePalette_Row08To0C>>16
	LDX.w #DATA_3C8BE0
	LDY.w #SMB3_PaletteMirror[$D0].LowByte
	LDA.w #$001F
	MVN SMB3_PaletteMirror[$D0].LowByte>>16,DATA_3C8BE0>>16
	PLB
	PHB
	LDX.w #RegularMarioPalette
	LDA.w !RAM_SMB3_Level_Player_CurrentCharacter
	AND.w #$00FF
	BEQ.b CODE_20C6AC
	LDX.w #RegularLuigiPalette
CODE_20C6AC:
	LDY.w #SMB3_PaletteMirror[$F0].LowByte
	LDA.w #$001F
	MVN SMB3_PaletteMirror[$F0].LowByte>>16,RegularMarioPalette>>16
	PLB
	SEP.b #$30
	REP.b #$20
	LDX.b #$00
	LDA.w #$00FF
CODE_20C6BF:
	STA.l !RAM_SMB3_Global_WindowHDMATable1,x
	STA.l !RAM_SMB3_Global_WindowHDMATable1+$70,x
	STA.l !RAM_SMB3_Global_WindowHDMATable1+$E0,x
	STA.l !RAM_SMB3_Global_WindowHDMATable1+$0150,x
	STA.l !RAM_SMB3_Global_WindowHDMATable2,x
	STA.l !RAM_SMB3_Global_WindowHDMATable2+$70,x
	STA.l !RAM_SMB3_Global_WindowHDMATable2+$E0,x
	STA.l !RAM_SMB3_Global_WindowHDMATable2+$0150,x
	INX
	INX
	CPX.b #$70
	BNE.b CODE_20C6BF
	LDA.w #(!REGISTER_Window1LeftPositionDesignation&$0000FF<<8)+$41
	STA.w HDMA[$07].Parameters
	LDA.w #DATA_2AF859
	STA.w HDMA[$07].SourceLo
	LDX.b #DATA_2AF859>>16
	STX.w HDMA[$07].SourceBank
	LDX.b #!RAM_SMB3_Global_WindowHDMATable1>>16
	STX.w HDMA[$07].IndirectSourceBank
	LDA.w #(!REGISTER_Window2LeftPositionDesignation&$0000FF<<8)+$41
	STA.w HDMA[$06].Parameters
	LDA.w #DATA_2AF860
	STA.w HDMA[$06].SourceLo
	LDX.b #DATA_2AF860>>16
	STX.w HDMA[$06].SourceBank
	LDX.b #!RAM_SMB3_Global_WindowHDMATable2>>16
	STX.w HDMA[$06].IndirectSourceBank
	STZ.w !REGISTER_BGWindowLogicSettings
	SEP.b #$20
	LDA.b #$25
	STA.w !RAM_SMB3_Global_FixedColorData1Mirror
	LDA.b #$45
	STA.w !RAM_SMB3_Global_FixedColorData2Mirror
	LDA.b #$85
	STA.w !RAM_SMB3_Global_FixedColorData3Mirror
	LDA.b #$A0
	STA.w !RAM_SMB3_Global_ObjectAndColorWindowSettingsMirror
	LDA.b #$10
	STA.w !RAM_SMB3_Global_ColorMathInitialSettingsMirror
	LDA.b #$32
	STA.w !RAM_SMB3_Global_ColorMathSelectAndEnableMirror
	LDX.b #$01
	STX.w !RAM_SMB3_Global_UpdateEntirePaletteFlag
	LDA.b #$FF
	STA.b $00
	STZ.b $01
	JSR.w CODE_20FA0B
	LDA.b #$80
	STA.w !RAM_SMB3_Global_CurrentRasterEffect
	LDX.b #$F5
CODE_20C749:
	STZ.b $00,x
	DEX
	BNE.b CODE_20C749
	LDA.b #$EF
	STA.w $0216
	LDA.b #$B0
	STA.w $0218
	JSR.w SMB3_UploadCurtainTilemap_Main
	LDA.b #$51
	ASL
	TAX
	LDA.l DATA_20D2FE,x
	STA.b !RAM_SMB3_Global_StripeImageDataLo
	LDA.l DATA_20D2FE+$01,x
	STA.b !RAM_SMB3_Global_StripeImageDataHi
	LDA.b #DATA_20DEFA>>16
	STA.b !RAM_SMB3_Global_StripeImageDataBank
	JSL.l SMB3_UploadStripeImage_Main
	LDA.b #$22
	STA.w !RAM_SMB3_Level_Layer2BGFromHeader
	JSL.l SMB3_BufferBGTilemap_Main
	LDA.b #$20
	STA.w $0612
	JSL.l CODE_2AB48E
	LDA.b #$C0
	STA.w !RAM_SMB3_Global_HDMAEnableMirror
	STZ.w $0249
	STZ.w $024A
	LDA.b #$01
	STA.w !RAM_SMB3_Global_SpecialLayerBGModeAndTileSizeSettingMirror
	LDA.b #$11
	STA.w $020F
	LDA.b #$00
	STA.b !RAM_SMB3_Global_ScreenDisplayRegisterMirror
	STA.w !REGISTER_ScreenDisplayRegister
	LDA.b #$09
	STA.w !RAM_SMB3_Global_BGModeAndTileSizeSettingMirror
	STA.w !REGISTER_BGModeAndTileSizeSetting
	LDA.b #$03
	STA.w !RAM_SMB3_Global_OAMSizeAndDataAreaDesignationMirror
	LDA.b #$17
	STA.w !RAM_SMB3_Global_MainScreenLayersMirror
	LDA.b #$80
	STA.w !REGISTER_IRQNMIAndJoypadEnableFlags
CODE_20C7B8:
	JSR.w SMB3_WaitForVBlankDuringCutscene_Main
	JSR.w CODE_20C7C7
	LDA.b !RAM_SMB3_PeachRescued_CurrentState
	CMP.b #$07
	BNE.b CODE_20C7B8
	JMP.w SMB3_ProcessEndingWorldRollcallScreen_Main

CODE_20C7C7:
	JSL.l SMB3_ResetSpriteOAMRt_Main
	LDA.b #$10
	STA.b !RAM_SMB3_PeachRescued_Player_OAMIndex
	LDA.b #$40
	STA.b !RAM_SMB3_PeachRescued_Peach_OAMIndex
	LDX.b #$02
CODE_20C7D5:
	LDA.b !RAM_SMB3_PeachRescued_PhaseTimer1,x
	BEQ.b CODE_20C7DB
	DEC.b !RAM_SMB3_PeachRescued_PhaseTimer1,x
CODE_20C7DB:
	DEX
	BPL.b CODE_20C7D5
	JSR.w CODE_20C806
	LDX.b #$00
	STX.b !RAM_SMB3_PeachRescued_Player_SpriteIndex
	JSR.w SMB3_DrawCutscenePlayerSprites_EndingEntry
	LDA.w !RAM_SMB3_Level_Player_CurrentCharacter
	BEQ.b CODE_20C7FF
	LDY.b #$24
CODE_20C7EF:
	LDA.w SMB3_OAMBuffer[$00].Prop,y
	ORA.b #$02
	STA.w SMB3_OAMBuffer[$00].Prop,y
	DEY
	DEY
	DEY
	DEY
	CPY.b #$10
	BPL.b CODE_20C7EF
CODE_20C7FF:
	INX
	STX.b !RAM_SMB3_PeachRescued_Player_SpriteIndex
	JSR.w SMB3_DrawCutscenePlayerSprites_CODE_20BE96
	RTS

CODE_20C806:
	LDA.b !RAM_SMB3_PeachRescued_CurrentState
	JSL.l SMB3_ExecutePtr_Absolute

DATA_20C80C:
	dw CODE_20C81C
	dw CODE_20C853
	dw CODE_20C860
	dw CODE_20C892
	dw CODE_20C8B2
	dw CODE_20C983
	dw CODE_20C9C3
	dw CODE_20C9CB

CODE_20C81C:
	LDA.b #$EC
	STA.b !RAM_SMB3_PeachRescued_Player_XPosLo
	LDA.b #$FF
	STA.b !RAM_SMB3_PeachRescued_Player_XPosHi
	LDA.b #$C8
	STA.b !RAM_SMB3_PeachRescued_Peach_XPosLo
	LDA.b #$A0
	STA.b !RAM_SMB3_PeachRescued_Player_YPosLo
	STA.b !RAM_SMB3_PeachRescued_Peach_YPosLo
	LDA.b #$18
	STA.b !RAM_SMB3_PeachRescued_Player_CurrentPose
	LDA.b #$19
	STA.b !RAM_SMB3_PeachRescued_Peach_CurrentPose
	LDA.b #$40
	STA.b !RAM_SMB3_PeachRescued_Player_YXPPCCCT
	STA.b !RAM_SMB3_PeachRescued_Peach_YXPPCCCT
	LDA.b #$01
	STA.b $8F
	LDA.b #$0F
	STA.b !RAM_SMB3_PeachRescued_PhaseTimer1
	INC.b !RAM_SMB3_PeachRescued_CurrentState
	LDA.b #$00
	STA.b $A6
	LDA.b #$50
	STA.b $A5
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	LDA.b #$C6
else
	LDA.b #$C7
endif
	STA.b $A4
	RTS

CODE_20C853:
	LDA.b !RAM_SMB3_PeachRescued_PhaseTimer1
	EOR.b #$0F
	STA.b !RAM_SMB3_Global_ScreenDisplayRegisterMirror
	CMP.b #$0F
	BNE.b CODE_20C85F
	INC.b !RAM_SMB3_PeachRescued_CurrentState
CODE_20C85F:
	RTS

CODE_20C860:
	LDA.b !RAM_SMB3_PeachRescued_Player_XPosLo
	CLC
	ADC.b #$01
	STA.b !RAM_SMB3_PeachRescued_Player_XPosLo
	LDA.b !RAM_SMB3_PeachRescued_Player_XPosHi
	ADC.b #$00
	STA.b !RAM_SMB3_PeachRescued_Player_XPosHi
	PHX
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$0C
	LSR
	LSR
	TAX
	LDA.l DATA_20BB22,x
	STA.b !RAM_SMB3_PeachRescued_Player_CurrentPose
	LDX.b #$00
	JSR.w SMB3_CheckWhichTitleScreenPlayerTilesAreOffScreen_Main
	PLX
	LDA.b !RAM_SMB3_PeachRescued_Player_XPosLo
	CMP.b #$20
	BNE.b CODE_20C891
	LDA.b #$02
	STA.b !RAM_SMB3_PeachRescued_Player_CurrentPose
	INC.b !RAM_SMB3_PeachRescued_CurrentState
	LDA.b #$30
	STA.b !RAM_SMB3_PeachRescued_PhaseTimer1
CODE_20C891:
	RTS

CODE_20C892:
	LDA.b !RAM_SMB3_PeachRescued_PhaseTimer1
	CMP.b #$01
	BNE.b CODE_20C8A5
	LDA.b #$02
	STA.b !RAM_SMB3_PeachRescued_Player_CurrentPose
	LDA.b #$80
	STA.b !RAM_SMB3_PeachRescued_PhaseTimer2
	LDA.b #!Define_SMB3_OverworldMusic_PeachRescued
	STA.w !RAM_SMB3_Global_MusicCh1
CODE_20C8A5:
	LDA.b !RAM_SMB3_PeachRescued_PhaseTimer2
	CMP.b #$01
	BNE.b CODE_20C8B1
	LDA.b #$13
	STA.b !RAM_SMB3_PeachRescued_PhaseTimer1
	INC.b !RAM_SMB3_PeachRescued_CurrentState
CODE_20C8B1:
	RTS

CODE_20C8B2:
	LDA.b !RAM_SMB3_PeachRescued_PhaseTimer1
	BEQ.b CODE_20C913
	LDY.b #$30
	STY.b !RAM_SMB3_PeachRescued_PhaseTimer2
	AND.b #$FE
	TAX
	LDA.b #DATA_2AEE91>>16
	STA.b $DA
	REP.b #$20
	LDA.l DATA_20C96F,x
	BEQ.b CODE_20C911
	STA.b $D8
	LDY.b #$00
CODE_20C8CD:
	LDA.b [$D8],y
	STA.w SMB3_PaletteMirror[$10].LowByte,y
	INY
	INY
	CPY.b #$20
	BNE.b CODE_20C8CD
	LDY.b #$01
	STY.w !RAM_SMB3_Global_UpdateEntirePaletteFlag
	LDY.b !RAM_SMB3_PeachRescued_PhaseTimer1
	CPY.b #$09
	BPL.b CODE_20C911
	PHB
	LDY.b #!RAM_SMB3_Global_WindowHDMATable1>>16
	PHY
	PLB
	REP.b #$10
	LDY.w #$0000
	LDA.l $000249
	TAX
CODE_20C8F2:
	LDA.l DATA_2AEEB1,x
	STA.w !RAM_SMB3_Global_WindowHDMATable1,x
	LDA.l DATA_2AF031,x
	STA.w !RAM_SMB3_Global_WindowHDMATable2,x
	INX
	INX
	INY
	INY
	CPY.w #$0030
	BNE.b CODE_20C8F2
	TXA
	STA.l $000249
	SEP.b #$10
	PLB
CODE_20C911:
	SEP.b #$20
CODE_20C913:
	LDA.b !RAM_SMB3_PeachRescued_PhaseTimer2
	BNE.b CODE_20C96E
	INC.b !RAM_SMB3_PeachRescued_CurrentState
	LDA.b #$80
	STA.b !RAM_SMB3_PeachRescued_PhaseTimer1
	LDA.b #$1A
	STA.b !RAM_SMB3_PeachRescued_Peach_CurrentPose
	BRA.b CODE_20C96E

;--------------------------------------------------------------------

; Note: Unreferenced routine (Mostly)? It's identical to the routine at CODE_29EDB9, except this one preserves X.

ADDR_20C923:
	PHX
	LDX.b #$00
	LDA.w !RAM_SMB3_Level_Player_CurrentCharacter
	BEQ.b ADDR_20C92D
	LDX.b #SMB3_IndividualPlayerData[$01].ReserveSlots-SMB3_IndividualPlayerData[$00].ReserveSlots
ADDR_20C92D:
	LDA.w !RAM_SMB3_Level_Player_CurrentScoreHi
	STA.w SMB3_IndividualPlayerData[$00].Score,x
	LDA.w !RAM_SMB3_Level_Player_CurrentScoreMid
	STA.w SMB3_IndividualPlayerData[$00].Score+$01,x
	LDA.w !RAM_SMB3_Level_Player_CurrentScoreLo
	STA.w SMB3_IndividualPlayerData[$00].Score+$02,x
	REP.b #$20
	LDX.b #$08
ADDR_20C943:
	LDA.w World8OverworldSpriteInitialYPosLoData,x
	STA.w !RAM_SMB3_Overworld_OWSpr_InitialYPosLo,x
	LDA.w World8OverworldSpriteInitialXPosHiData,x
	STA.w !RAM_SMB3_Overworld_OWSpr_InitialXPosHi,x
	LDA.w World8OverworldSpriteInitialXPosLoData,x
	STA.w !RAM_SMB3_Overworld_OWSpr_InitialXPosLo,x
	LDA.w World8OverworldSpriteIDData,x
	STA.w !RAM_SMB3_Overworld_OWSpr_SpriteID,x
	DEX
	DEX
	BPL.b ADDR_20C943
	SEP.b #$20
	LDX.b #$7F
ADDR_20C963:
	STZ.w !RAM_SMB3_Overworld_LevelsClearedBits,x
	DEX
	BPL.b ADDR_20C963
	JSL.l SMB3_SaveGame_Main
	PLX
CODE_20C96E:
	RTS

;--------------------------------------------------------------------

DATA_20C96F:
	dw DATA_2AEE91
	dw DATA_2AEE71
	dw DATA_2AEE51
	dw DATA_2AEE31
	dw DATA_2AEE11
	dw DATA_2AEDF1
	dw DATA_2AEDD1
	dw DATA_2AEDB1
	dw $0000
	dw $0000

CODE_20C983:
	LDA.b !RAM_SMB3_PeachRescued_PhaseTimer1
	BEQ.b CODE_20C990
	CMP.b #$60
	BCS.b CODE_20C98F
	LDA.b #$00
	STA.b !RAM_SMB3_PeachRescued_Peach_YXPPCCCT
CODE_20C98F:
	RTS

CODE_20C990:
	LDA.b !RAM_SMB3_PeachRescued_Player_XPosLo
	CMP.b #$68
	BCC.b CODE_20C9A5
	LDA.b #$02
	STA.b !RAM_SMB3_PeachRescued_Player_CurrentPose
	LDA.b #$1A
	STA.b !RAM_SMB3_PeachRescued_Peach_CurrentPose
	INC.b !RAM_SMB3_PeachRescued_CurrentState
	LDA.b #$B0
	STA.b !RAM_SMB3_PeachRescued_PhaseTimer1
	RTS

CODE_20C9A5:
	LDA.b #$50
	STA.b !RAM_SMB3_PeachRescued_PhaseTimer2
	INC.b !RAM_SMB3_PeachRescued_Player_XPosLo
	DEC.b !RAM_SMB3_PeachRescued_Peach_XPosLo
	PHX
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$0C
	LSR
	LSR
	TAX
	LDA.l DATA_20BB22,x
	STA.b !RAM_SMB3_PeachRescued_Player_CurrentPose
	LDA.l DATA_20BB2A,x
	STA.b !RAM_SMB3_PeachRescued_Peach_CurrentPose
	PLX
	RTS

CODE_20C9C3:
	LDA.b !RAM_SMB3_PeachRescued_PhaseTimer1
	BNE.b CODE_20C9CA
	JMP.w CODE_20C9E0

CODE_20C9CA:
	RTS

CODE_20C9CB:
	LDA.b !RAM_SMB3_PeachRescued_PhaseTimer1
	BNE.b CODE_20C9D8
	STA.b !RAM_SMB3_Global_ScreenDisplayRegisterMirror
	LDA.b !RAM_SMB3_PeachRescued_PhaseTimer2
	BNE.b CODE_20C9D7
	INC.b !RAM_SMB3_PeachRescued_CurrentState
CODE_20C9D7:
	RTS

CODE_20C9D8:
	STA.b !RAM_SMB3_Global_ScreenDisplayRegisterMirror
	LDA.b #$10
	STA.w $00A1
	RTS

CODE_20C9E0:
	LDA.b !RAM_SMB3_PeachRescued_CurrentTextBoxState
	JSL.l SMB3_ExecutePtr_Absolute

DATA_20C9E6:
	dw CODE_20CA66
	dw CODE_20CB23
	dw CODE_20CB88

PeachTextBoxWindowStripeImage:
.TopRow:
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	db $92,$21,$90,$21,$90,$21,$90,$21,$90,$21,$90,$21,$90,$21,$90,$21
	db $90,$21,$90,$21,$90,$21,$90,$21,$90,$21,$90,$21,$90,$21,$90,$21
	db $90,$21,$90,$21,$90,$21,$92,$61

.MiddleRow:
	db $91,$21,$FE,$21,$FE,$21,$FE,$21,$FE,$21,$FE,$21,$FE,$21,$FE,$21
	db $FE,$21,$FE,$21,$FE,$21,$FE,$21,$FE,$21,$FE,$21,$FE,$21,$FE,$21
	db $FE,$21,$FE,$21,$FE,$21,$91,$61

.BottomRow:
	db $92,$A1,$90,$A1,$90,$A1,$90,$A1,$90,$A1,$90,$A1,$90,$A1,$90,$A1
	db $90,$A1,$90,$A1,$90,$A1,$90,$A1,$90,$A1,$90,$A1,$90,$A1,$90,$A1
	db $90,$A1,$90,$A1,$90,$A1,$92,$E1
else
	db $92,$21,$90,$21,$90,$21,$90,$21,$90,$21,$90,$21,$90,$21,$90,$21
	db $90,$21,$90,$21,$90,$21,$90,$21,$90,$21,$90,$21,$90,$21,$90,$21
	db $90,$21,$90,$21,$92,$61

.MiddleRow:
	db $91,$21,$FE,$21,$FE,$21,$FE,$21,$FE,$21,$FE,$21,$FE,$21,$FE,$21
	db $FE,$21,$FE,$21,$FE,$21,$FE,$21,$FE,$21,$FE,$21,$FE,$21,$FE,$21
	db $FE,$21,$FE,$21,$91,$61

.BottomRow:
	db $92,$A1,$90,$A1,$90,$A1,$90,$A1,$90,$A1,$90,$A1,$90,$A1,$90,$A1
	db $90,$A1,$90,$A1,$90,$A1,$90,$A1,$90,$A1,$90,$A1,$90,$A1,$90,$A1
	db $90,$A1,$90,$A1,$92,$E1
endif

PeachTextBoxWindowRowIndex:
	db PeachTextBoxWindowStripeImage_TopRow-PeachTextBoxWindowStripeImage
	db PeachTextBoxWindowStripeImage_MiddleRow-PeachTextBoxWindowStripeImage
	db PeachTextBoxWindowStripeImage_MiddleRow-PeachTextBoxWindowStripeImage
	db PeachTextBoxWindowStripeImage_MiddleRow-PeachTextBoxWindowStripeImage
	db PeachTextBoxWindowStripeImage_MiddleRow-PeachTextBoxWindowStripeImage
	db PeachTextBoxWindowStripeImage_MiddleRow-PeachTextBoxWindowStripeImage
	db PeachTextBoxWindowStripeImage_MiddleRow-PeachTextBoxWindowStripeImage
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	db PeachTextBoxWindowStripeImage_MiddleRow-PeachTextBoxWindowStripeImage
	db PeachTextBoxWindowStripeImage_MiddleRow-PeachTextBoxWindowStripeImage
endif
	db PeachTextBoxWindowStripeImage_BottomRow-PeachTextBoxWindowStripeImage
.End:

CODE_20CA66:
	PHB
	PHK
	PLB
	LDX.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	LDA.b $A5
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,x
	LDA.b $A4
	STA.w SMB3_StripeImageUploadTable[$00].HighByte,x
	CLC
	ADC.b #$20
	STA.b $A4
	BCC.b CODE_20CA7F
	INC.b $A5
CODE_20CA7F:
	LDA.b #$00
	STA.w SMB3_StripeImageUploadTable[$01].LowByte,x
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	LDA.b #$27
else
	LDA.b #$25
endif
	STA.w SMB3_StripeImageUploadTable[$01].HighByte,x
	STA.b $00
	LDY.b !RAM_SMB3_PeachRescued_TextBoxStripeImageIndex
	LDA.w PeachTextBoxWindowRowIndex,y
	TAY
CODE_20CA91:
	LDA.w PeachTextBoxWindowStripeImage,y
	STA.w SMB3_StripeImageUploadTable[$02].LowByte,x
	INY
	INX
	DEC.b $00
	BPL.b CODE_20CA91
	LDA.b #$FF
	STA.w SMB3_StripeImageUploadTable[$02].LowByte,x
	INX
	INX
	INX
	INX
	STX.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	INC.b !RAM_SMB3_PeachRescued_TextBoxStripeImageIndex
	LDA.b !RAM_SMB3_PeachRescued_TextBoxStripeImageIndex
	CMP.b #PeachTextBoxWindowRowIndex_End-PeachTextBoxWindowRowIndex
	BCC.b CODE_20CAC6
	LDY.b #$00
	LDA.w DATA_20CB22,y
	STA.b !RAM_SMB3_PeachRescued_TextIndex
	LDA.b #$50
	STA.b $A5
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	LDA.b #$E7
else
	LDA.b #$E9
endif
	STA.b $A4
	LDA.b #$10
	STA.b !RAM_SMB3_PeachRescued_WaitBeforeDisplayingText
	INC.b !RAM_SMB3_PeachRescued_CurrentTextBoxState
CODE_20CAC6:
	PLB
	RTS

cleartable
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR] Note: # is a blank space that's not ignored by the code and thus creates a delay in the text.
	table "Tables/Fonts/Layer3_dialogue_br.txt"
else
	table "Tables/Fonts/ThroneRoom.txt"
endif

SMB3_PeachRescuedStripeImageText:
;$20CAC8
.TopHalf:
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	db $FE,$60,$A7,$AB,$86,$62,$CE,$FE,$C1,$CD,$86,$FE,$66,$8B,$69,$8B,$FE,$FE
	db $FE,$6F,$65,$61,$88,$93,$61,$CB,$AB,$A5,$C4,$A7,$A1,$6D,$80,$FE,$FE,$FE
	db $FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE
	db $FE,$FE,$FE,$FE,$FE,$FE,$64,$6D,$A1,$61,$CD,$CE,$FE,$FE,$FE,$FE,$FE,$FE

.LowerHalf:
	db $FE,$70,$B7,$75,$96,$72,$DE,$FE,$D1,$DD,$96,$EE,$76,$9B,$79,$9B,$FE,$FE
	db $FE,$7F,$75,$71,$98,$8C,$71,$DB,$75,$B5,$96,$B7,$B1,$7D,$81,$EF,$FE,$FE
	db $FA,$FA,$FA,$FA,$FA,$FA,$FA,$FA,$FA,$FA,$FA,$FA,$FA,$FA,$FA,$FA,$FA,$FA
	db $FE,$FE,$FE,$FE,$FE,$FE,$74,$7D,$B1,$71,$DD,$DE,$FE,$FE,$FE,$FE,$FE,$FE
elseif !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ; It follows Japanese/SMA4 text instead.
	db "Obrigada! A paz"
	db "enfim retornou "
	db "ao nosso Mundo "
	db "Cogumelo.      "
	db "      ###      "
	db "   E##F#I#M!   "
else
	db "Thank you. But "
	db "our Princess is"
	db "in another     "
	db "castle!...Just "
	db "kidding! Ha ha "
	db "ha! Bye bye.   "
endif
cleartable

DATA_20CB22:
	db $00

CODE_20CB23:
	PHB
	PHK
	PLB
	LDA.b !RAM_SMB3_PeachRescued_WaitBeforeDisplayingText
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	BEQ.b +
	PLB
	RTS

+:
else
	BNE.b CODE_20CB86
endif
	LDX.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	LDY.b !RAM_SMB3_PeachRescued_TextIndex
	LDA.b $A5
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,x
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	LDA.b #$80
else
	LDA.b #$00
endif
	STA.w SMB3_StripeImageUploadTable[$01].LowByte,x
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	LDA.b #$03
else
	LDA.b #$01
endif
	STA.w SMB3_StripeImageUploadTable[$01].HighByte,x
	LDA.w SMB3_PeachRescuedStripeImageText_TopHalf,y
	STA.w SMB3_StripeImageUploadTable[$02].LowByte,x
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	LDA.w SMB3_PeachRescuedStripeImageText_LowerHalf,y
	STA.w SMB3_StripeImageUploadTable[$03].LowByte,x
endif
	LDA.b #$21
	STA.w SMB3_StripeImageUploadTable[$02].HighByte,x
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	STA.w SMB3_StripeImageUploadTable[$03].HighByte,x
endif
	LDA.b #$FF
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	STA.w SMB3_StripeImageUploadTable[$04].LowByte,x
else
	STA.w SMB3_StripeImageUploadTable[$03].LowByte,x
endif
	TXA
	CLC
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	ADC.b #$08
else
	ADC.b #$06
endif
	STA.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	LDA.b $A4
	STA.w SMB3_StripeImageUploadTable[$00].HighByte,x
	INC.b !RAM_SMB3_PeachRescued_TextIndex
	INC.b $A4
	AND.b #$1F
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	CMP.b #$18
else
	CMP.b #$17
endif
	BNE.b CODE_20CB79
	LDA.b $A4
	CLC
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	ADC.b #$2E
else
	ADC.b #$11
endif
	STA.b $A4
	BCC.b CODE_20CB6F
	INC.b $A5
CODE_20CB6F:
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	CMP.b #$E7
else
	CMP.b #$A9
endif
	BNE.b CODE_20CB79
	INC.b !RAM_SMB3_PeachRescued_CurrentTextBoxState
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	LDA.b #$CF
else
	LDA.b #$4A
endif
	STA.b !RAM_SMB3_PeachRescued_PhaseTimer2
CODE_20CB79:
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDX.b #$0C
else
	LDX.b #$10
endif
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	LDA.b $A5
	AND.b #$01
	BEQ.b ++
	LDA.b $A4
	CMP.b #$A7
	BCC.b ++
	LDX.b #$20
	CMP.b #$B0
	BEQ.b +
	BCS.b +++
+:
	LDX.b #$28
++:
endif
	LDA.w SMB3_PeachRescuedStripeImageText_TopHalf,y
	CMP.b #$FE
	BNE.b CODE_20CB84
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	LDA.w SMB3_PeachRescuedStripeImageText_LowerHalf,y
	CMP.b #$FE
	BNE.b CODE_20CB84
+++:
endif
	LDX.b #$01
CODE_20CB84:
	STX.b !RAM_SMB3_PeachRescued_PhaseTimer1
CODE_20CB86:
	PLB
	RTS

CODE_20CB88:
	LDA.b !RAM_SMB3_PeachRescued_PhaseTimer2
	BNE.b CODE_20CB92
	LDA.b #$0F
	STA.b !RAM_SMB3_PeachRescued_PhaseTimer1
	INC.b !RAM_SMB3_PeachRescued_CurrentState
CODE_20CB92:
	RTS

;--------------------------------------------------------------------

	%ROUTINE_SMB3_ProcessEndingWorldRollcallScreen(NULLROM)				; $20CB93

;--------------------------------------------------------------------

CODE_20CF66:
	DEC.b $C2
	LDA.b $C2
	JSL.l SMB3_ExecutePtr_Absolute

DATA_20CF6E:
	dw CODE_20D117
	dw CODE_20D154

;--------------------------------------------------------------------

; Note: Seems to be the routine that loads the graphics during the ending rollcall.

WorldRollcallScreenGraphicsPtrBank:
;$20CF72
.GFXSlot00:
	db SMB3_Bank40Graphics_FG_ConstructedPlains>>16			; World 1
	db SMB3_Bank43Graphics_FG_Desert1>>16				; World 2
	db SMB3_Bank45Graphics_FG_Pipe>>16				; World 3
	db SMB3_Bank46Graphics_FG_Giant1>>16				; World 4
	db SMB3_Bank43Graphics_FG_Cloud1>>16				; World 5
	db SMB3_Bank41Graphics_FG_SnowAndIce>>16			; World 6
	db SMB3_Bank40Graphics_FG_ConstructedPlains>>16			; World 7
	db SMB3_Bank41Graphics_FG_Fortress>>16				; World 8

.GFXSlot01:
	db SMB3_Bank40Graphics_FG_ConstructedPlains+$0800>>16		; World 1
	db SMB3_Bank43Graphics_FG_Desert2>>16				; World 2
	db SMB3_Bank45Graphics_FG_Pipe+$0800>>16			; World 3
	db SMB3_Bank46Graphics_FG_Giant2>>16				; World 4
	db SMB3_Bank43Graphics_FG_Cloud2>>16				; World 5
	db SMB3_Bank41Graphics_FG_SnowAndIce+$0800>>16			; World 6
	db SMB3_Bank40Graphics_FG_ConstructedPlains+$0800>>16		; World 7
	db SMB3_Bank41Graphics_FG_Fortress+$0800>>16			; World 8

.GFXSlot02:
	db SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16		; World 1
	db SMB3_Bank3AGraphics_BG_BonusRoom>>16				; World 2
	db SMB3_Bank3AGraphics_FG_GrassPlain2>>16			; World 3
	db SMB3_Bank3AGraphics_FG_SkyPlains2>>16			; World 4
	db SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16		; World 5
	db SMB3_Bank3AGraphics_FG_EndOfLevelDecor>>16			; World 6
	db SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16		; World 7
	db SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16		; World 8

.GFXSlot03:
	db SMB3_Bank3AGraphics_BG_ConstructedPlain>>16			; World 1
	db SMB3_Bank2DGraphics_BG_Desert1>>16				; World 2
	db SMB3_Bank3AGraphics_BG_Underwater1>>16			; World 3
	db SMB3_Bank2DGraphics_BG_HillsAndTrees>>16			; World 4
	db SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16		; World 5
	db SMB3_Bank2DGraphics_BG_SnowyCheckeredHills1>>16		; World 6
	db SMB3_Bank2DGraphics_BG_DottedHills1>>16			; World 7
	db SMB3_Bank44Graphics_BG_BowsersCastle1>>16			; World 8

.GFXSlot04:
	db SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16		; World 1
	db SMB3_Bank2DGraphics_BG_Desert2>>16				; World 2
	db SMB3_Bank3AGraphics_BG_Underwater2>>16			; World 3
	db SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16		; World 4
	db SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16		; World 5
	db SMB3_Bank2DGraphics_BG_SnowyCheckeredHills2>>16		; World 6
	db SMB3_Bank2DGraphics_BG_DottedHills2>>16			; World 7
	db SMB3_Bank44Graphics_BG_BowsersCastle2>>16			; World 8

WorldRollcallScreenGraphicsPtrHi:
;$20CF9A
.GFXSlot00:
	db SMB3_Bank40Graphics_FG_ConstructedPlains>>8			; World 1
	db SMB3_Bank43Graphics_FG_Desert1>>8				; World 2
	db SMB3_Bank45Graphics_FG_Pipe>>8				; World 3
	db SMB3_Bank46Graphics_FG_Giant1>>8				; World 4
	db SMB3_Bank43Graphics_FG_Cloud1>>8				; World 5
	db SMB3_Bank41Graphics_FG_SnowAndIce>>8				; World 6
	db SMB3_Bank40Graphics_FG_ConstructedPlains>>8			; World 7
	db SMB3_Bank41Graphics_FG_Fortress>>8				; World 8

.GFXSlot01:
	db SMB3_Bank40Graphics_FG_ConstructedPlains+$0800>>8		; World 1
	db SMB3_Bank43Graphics_FG_Desert2>>8				; World 2
	db SMB3_Bank45Graphics_FG_Pipe+$0800>>8				; World 3
	db SMB3_Bank46Graphics_FG_Giant2>>8				; World 4
	db SMB3_Bank43Graphics_FG_Cloud2>>8				; World 5
	db SMB3_Bank41Graphics_FG_SnowAndIce+$0800>>8			; World 6
	db SMB3_Bank40Graphics_FG_ConstructedPlains+$0800>>8		; World 7
	db SMB3_Bank41Graphics_FG_Fortress+$0800>>8			; World 8

.GFXSlot02:
	db SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>8		; World 1
	db SMB3_Bank3AGraphics_BG_BonusRoom>>8				; World 2
	db SMB3_Bank3AGraphics_FG_GrassPlain2>>8			; World 3
	db SMB3_Bank3AGraphics_FG_SkyPlains2>>8				; World 4
	db SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>8		; World 5
	db SMB3_Bank3AGraphics_FG_EndOfLevelDecor>>8			; World 6
	db SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>8		; World 7
	db SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>8		; World 8

.GFXSlot03:
	db SMB3_Bank3AGraphics_BG_ConstructedPlain>>8			; World 1
	db SMB3_Bank2DGraphics_BG_Desert1>>8				; World 2
	db SMB3_Bank3AGraphics_BG_Underwater1>>8			; World 3
	db SMB3_Bank2DGraphics_BG_HillsAndTrees>>8			; World 4
	db SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>8		; World 5
	db SMB3_Bank2DGraphics_BG_SnowyCheckeredHills1>>8		; World 6
	db SMB3_Bank2DGraphics_BG_DottedHills1>>8			; World 7
	db SMB3_Bank44Graphics_BG_BowsersCastle1>>8			; World 8

.GFXSlot04:
	db SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>8		; World 1
	db SMB3_Bank2DGraphics_BG_Desert2>>8				; World 2
	db SMB3_Bank3AGraphics_BG_Underwater2>>8			; World 3
	db SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>8		; World 4
	db SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>8		; World 5
	db SMB3_Bank2DGraphics_BG_SnowyCheckeredHills2>>8		; World 6
	db SMB3_Bank2DGraphics_BG_DottedHills2>>8			; World 7
	db SMB3_Bank44Graphics_BG_BowsersCastle2>>8			; World 8

DATA_20CFC2:
	db $00,$08,$10,$18,$20

DATA_20CFC7:
	dw $0000,$0400,$1000,$1400
	dw $1800

DATA_20CFD1:
	dw $0000,$0800,$1000,$1800

CODE_20CFD9:
 	LDA.w $02D3
	CMP.b #$FF
	BEQ.b CODE_20D023
	BPL.b CODE_20D023
	AND.b #$7F
	CMP.b #$05
	BEQ.b CODE_20D024
	CMP.b #$06
	BNE.b CODE_20CFEF
	JMP.w CODE_20D06C

CODE_20CFEF:
	TAX
	ASL
	STA.b $00
	LDA.l DATA_20CFC2,x
	CLC
	ADC.w !RAM_SMB3_WorldRollcall_CurrentWorld
	TAX
	LDA.l WorldRollcallScreenGraphicsPtrBank,x
	STA.b $0F
	LDA.l WorldRollcallScreenGraphicsPtrHi,x
	STA.b $0E
	STZ.b $0D
	REP.b #$20
	LDA.w #$0800
	STA.b $0B
	LDX.b $00
	LDA.w #$2000
	CLC
	ADC.l DATA_20CFC7,x
	JSR.w SMB3_CopyOfDMADataToVRAM_Main
	SEP.b #$20
	INC.w $02D3
CODE_20D023:
	RTS

CODE_20D024:
	INC.w $02D3
	REP.b #$20
	LDX.b #$80
	STX.w !REGISTER_VRAMAddressIncrementValue
	LDA.w #(!REGISTER_WriteToVRAMPortLo&$0000FF<<8)+$01
	STA.w DMA[$00].Parameters
	LDA.w #$0800
	STA.w DMA[$00].SizeLo
	LDA.w #!RAM_SMB3_WorldRollcall_Layer1World1To4Tilemap
	LDY.w !RAM_SMB3_WorldRollcall_CurrentWorld
	CPY.b #$04
	BCC.b CODE_20D047
	LDA.w #!RAM_SMB3_WorldRollcall_Layer1World5To8Tilemap
CODE_20D047:
	STA.b $00
	TYA
	AND.w #$0003
	ASL
	TAX
	LDA.l DATA_20CFD1,x
	CLC
	ADC.b $00
	STA.w DMA[$00].SourceLo
	LDX.b #!RAM_SMB3_WorldRollcall_Layer1World1To4Tilemap>>16
	STX.w DMA[$00].SourceBank
	LDA.w #$0400
	STA.w !REGISTER_VRAMAddressLo
	LDX.b #$01
	STX.w !REGISTER_DMAEnable
	SEP.b #$20
	RTS

CODE_20D06C:
	LDA.b #$FF
	STA.w $02D3
	REP.b #$20
	LDA.w #$0800
	STA.w !REGISTER_VRAMAddressLo
	LDX.b #$80
	STX.w !REGISTER_VRAMAddressIncrementValue
	LDA.w #(!REGISTER_WriteToVRAMPortLo&$0000FF<<8)+$01
	STA.w DMA[$00].Parameters
	LDA.w #$7F2000
	STA.w DMA[$00].SourceLo
	LDX.b #$7F2000>>16
	STX.w DMA[$00].SourceBank
	LDA.w #$0600
	STA.w DMA[$00].SizeLo
	LDX.b #$01
	STX.w !REGISTER_DMAEnable
	SEP.b #$20
	RTS

;--------------------------------------------------------------------

CODE_20D09D:
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$18
	LSR
	LSR
	LSR
	TAX
	LDA.w DATA_21C9DF,x
	CMP.w $0245
	BEQ.b CODE_20D0B0
	STZ.w !RAM_SMB3_Global_AnimatedFGTileAnimationFrameIndex
CODE_20D0B0:
	STA.w $0245
	JSR.w SMB3_LevelTileAnimations_Main
	RTS

;--------------------------------------------------------------------

CODE_20D0B7:
	LDA.b #$00
	STA.b $C2
	LDA.b !RAM_SMB3_WorldRollcall_CurrentState
	JSL.l SMB3_ExecutePtr_Absolute

DATA_20D0C1:
	dw CODE_20D0DC
	dw CODE_20D0FF
	dw CODE_20D112
	dw CODE_20D0D7
	dw CODE_20D146
	dw CODE_20D14F
	dw CODE_20D15C
	dw SMB3_WorldRollCallState07_DrawSprites_Main
	dw CODE_20D1E6
	dw SMB3_WorldRollCallState09_LoadLayer2BGAndWait_Main
	dw CODE_20D265

CODE_20D0D7:
	INC.b !RAM_SMB3_WorldRollcall_CurrentState
	NOP #2
	RTS

CODE_20D0DC:
	LDY.b #$01
CODE_20D0DE:
	INC.w $0216
	LDA.w $0216
	CMP.b #$D0
	BEQ.b CODE_20D0EC
	DEY
	BPL.b CODE_20D0DE
	RTS

CODE_20D0EC:
	INC.b !RAM_SMB3_WorldRollcall_CurrentState
	LDA.b #$10
	STA.w $0216
	LDA.b #$01
	STA.w $0217
	STZ.w $0218
	STZ.w $0219
	RTS

CODE_20D0FF:
	LDA.b #$03
	STA.b $46
	LDA.b #$20
	STA.b $47
	LDA.b #$06
	STA.b $44
	LDA.b #$5C
	STA.b $45
	INC.b !RAM_SMB3_WorldRollcall_CurrentState
	RTS

CODE_20D112:
	LDA.b #$01
	STA.b $C2
	RTS

;--------------------------------------------------------------------

CODE_20D117:
	REP.b #$20
	LDX.b #$80
	STX.w !REGISTER_VRAMAddressIncrementValue
	LDA.b $46
	XBA
	STA.w !REGISTER_VRAMAddressLo
	LDY.b #$1F
	LDA.w #$085C
CODE_20D129:
	STA.w !REGISTER_WriteToVRAMPortLo
	DEY
	BPL.b CODE_20D129
	SEP.b #$20
	DEC.b $44
	BPL.b CODE_20D138
	INC.b $43
	RTS

CODE_20D138:
	JSR.w CODE_20D2BE
	RTS

;--------------------------------------------------------------------

; Note: Unreferenced routine?

ADDR_20D13C:
	INC.b $43
	LDA.b $47
	CLC
	ADC.b #$08
	STA.b $47
	RTS

;--------------------------------------------------------------------

CODE_20D146:
	INC.b !RAM_SMB3_WorldRollcall_CurrentState
	LDA.b #$0C
	STA.b $44
	STZ.b $48
	RTS

;--------------------------------------------------------------------

CODE_20D14F:
	LDA.b #$02
	STA.b $C2
	RTS

;--------------------------------------------------------------------

CODE_20D154:
	INC.b $43
	LDA.b #$80
	STA.w $02D3
	RTS

;--------------------------------------------------------------------

CODE_20D15C:
	INC.b !RAM_SMB3_WorldRollcall_CurrentState
	RTS

;--------------------------------------------------------------------

	%ROUTINE_SMB3_WorldRollCallState07_DrawSprites(NULLROM)				; $20D15F

;--------------------------------------------------------------------

CODE_20D1E6:
	JSR.w CODE_20D09D
	JSL.l CODE_29D09A
	JSL.l CODE_29D232
	LDA.w $02B3
	CMP.b #$02
	BNE.b CODE_20D202
	INC.b !RAM_SMB3_WorldRollcall_CurrentState
	LDA.b #$0F
	STA.b !RAM_SMB3_WorldRollcall_WaitBeforeDisplayingNextScreenTimerHi
	LDA.b #$16
	STA.b !RAM_SMB3_WorldRollcall_WaitBeforeDisplayingNextScreenTimerLo
CODE_20D202:
	RTS

;--------------------------------------------------------------------

	%ROUTINE_SMB3_WorldRollCallState09_LoadLayer2BGAndWait(NULLROM)			; $20D203

;--------------------------------------------------------------------

CODE_20D265:
	JSR.w CODE_20D09D
	JSL.l CODE_29D09A
	JSL.l CODE_29D232
	LDA.w $02B3
	BNE.b CODE_20D2BD
	LDA.b #$01
	STA.b !RAM_SMB3_WorldRollcall_CurrentState
	INC.b !RAM_SMB3_WorldRollcall_CurrentWorld
	LDA.b !RAM_SMB3_WorldRollcall_CurrentWorld
	CMP.b #$02
	BNE.b CODE_20D29B
	LDA.b #$EF
	STA.w $021A
	LDA.b #$00
	STA.w $021B
	LDA.b #$17
	STA.w !RAM_SMB3_Global_MainScreenLayersMirror
	LDA.b #$13
	STA.w !RAM_SMB3_Global_SubScreenLayersMirror
	LDA.b #$64
	STA.w !RAM_SMB3_Global_ColorMathSelectAndEnableMirror
	RTS

CODE_20D29B:
	STZ.w $021A
	STZ.w $021B
	LDA.b #$13
	STA.w !RAM_SMB3_Global_MainScreenLayersMirror
	LDA.b #$04
	STA.w !RAM_SMB3_Global_SubScreenLayersMirror
	LDA.b #$20
	STA.w !RAM_SMB3_Global_ColorMathSelectAndEnableMirror
	LDA.b #$20
	STA.w !RAM_SMB3_Global_FixedColorData1Mirror
	ASL
	STA.w !RAM_SMB3_Global_FixedColorData2Mirror
	ASL
	STA.w !RAM_SMB3_Global_FixedColorData3Mirror
CODE_20D2BD:
	RTS

;--------------------------------------------------------------------

CODE_20D2BE:
	LDA.b $47
	CLC
	ADC.b #$20
	STA.b $47
	LDA.b $46
	ADC.b #$00
	STA.b $46
	CMP.b #$18
	BCS.b CODE_20D2DD
	CMP.b #$14
	BCC.b CODE_20D2DD
	LDA.b #$18
	STA.b $46
	LDA.b $47
	AND.b #$1F
	STA.b $47
CODE_20D2DD:
	RTS

;--------------------------------------------------------------------

DATA_20D2DE:
	db $57,$53,$51,$00,$43,$02,$44,$54
	db $00,$04,$00,$76,$76,$76,$04,$76
	db $57,$4E,$1A,$1A,$00,$0B,$00,$00
	db $4F,$4F,$00,$00,$4F,$4F,$4F,$00

;--------------------------------------------------------------------

;Note: Stripe images.

DATA_20D2FE:
	dw SMB3_StripeImageUploadTable[$00].LowByte				; 00
if !Define_Global_ROMToAssemble&(!ROM_SMB3_U|!ROM_SMB3_E|!ROM_SMB3_J) != $00
	dw $0000				; 01
else
	dw SMB3_1PlayerGameStripeImage		; 01
endif
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR] Gone are the title screen's separate rows...
	%FREE_BYTES(NULLROM, 48, $00)
else
	dw DATA_20D4FF				; 02 \ (Title screen logo)
	dw DATA_20D544				; 03 |
	dw DATA_20D589				; 04 |
	dw DATA_20D5CE				; 05 |
	dw DATA_20D613				; 06 |
	dw DATA_20D64A				; 07 |
	dw DATA_20D681				; 08 |
	dw DATA_20D6B8				; 09 |
	dw DATA_20D6EF				; 0A |
	dw DATA_20D734				; 0B |
	dw DATA_20D779				; 0C |
	dw DATA_20D7BE				; 0D |
	dw DATA_20D803				; 0E |
	dw DATA_20D848				; 0F |
	dw DATA_20D877				; 10 |
	dw DATA_20D8A6				; 11 |
	dw DATA_20D8D5				; 12 |
	dw DATA_20D91A				; 13 |
	dw DATA_20D95F				; 14 |
	dw DATA_20D9A4				; 15 |
	dw DATA_20D9CB				; 16 |
	dw DATA_20D9F2				; 17 |
	dw DATA_20DA1D				; 18 |
	dw DATA_20DA4C				; 19 |
endif
	dw DATA_20DA7B				; 1A |
	dw DATA_20DA7B				; 1B |
	dw DATA_20DA7B				; 1C /
	dw DATA_20DA7C				; 1D (Title screen BG hills?)

	dw TitleScreenCheckerFloorStripeImage	; 1E
	dw SMB3_StripeImage1F_CurtainShadow_Main
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	dw $0000
else
	dw SMB3_StripeImage20_CheckerFloor_Main
endif
	dw DATA_20DDB7				; 21
	dw DATA_20DDF7				; 22
	dw DATA_20DE37				; 23
	dw DATA_20DE77				; 24
	dw DATA_20DEB7				; 25
	dw DATA_20DEF7				; 26
	dw DATA_20DEF7				; 27
	dw DATA_20DEF7				; 28
	dw DATA_20DEF8				; 29
	dw DATA_20DEF8				; 2A
	dw DATA_20DEF8				; 2B
	dw DATA_20DEF8				; 2C
	dw DATA_20DEF8				; 2D
	dw DATA_20DEF8				; 2E
	dw DATA_20DEF8				; 2F
	dw DATA_20DEF8				; 30
	dw DATA_20DEF8				; 31
	dw DATA_20DEF8				; 32
	dw DATA_20DEF8				; 33
	dw DATA_20DEF8				; 34
	dw DATA_20DEF8				; 35
	dw DATA_20DEF9				; 36
	dw DATA_20DEF9				; 37
	dw DATA_20DEF9				; 38
	dw DATA_20DEF9				; 39
	dw DATA_20DEF9				; 3A
	dw DATA_20DEF9				; 3B
	dw DATA_20DEF9				; 3C
	dw DATA_20DEF9				; 3D
	dw DATA_20DEF9				; 3E
	dw DATA_20DEF9				; 3F
	dw DATA_20DEF9				; 40
	dw DATA_20DEF9				; 41
	dw DATA_20DEF9				; 42
	dw DATA_20DEF9				; 43
	dw DATA_20DEF9				; 44
	dw DATA_20DEF9				; 45
	dw DATA_20DEF9				; 46
	dw DATA_20DEF9				; 47
	dw DATA_20DEF9				; 48
	dw DATA_20DEF9				; 49
	dw DATA_20DEF9				; 4A
	dw DATA_20DEF9				; 4B
	dw DATA_20DEF9				; 4C
	dw DATA_20DEF9				; 4D
	dw DATA_20DEF9				; 4E
	dw DATA_20DEF9				; 4F
	dw DATA_20DEF9				; 50
	dw DATA_20DEFA				; 51
	dw DATA_20DFFF				; 52
	dw DATA_20E03F				; 53
	dw DATA_20E03F				; 54
	dw DATA_20E03F				; 55
	dw DATA_20E03F				; 56
	dw DATA_20E040				; 57
	dw DATA_20E060				; 58
	dw DATA_20E060				; 59
	dw DATA_20E060				; 5A
	dw DATA_20E060				; 5B
if !Define_Global_ROMToAssemble&(!ROM_SMB3_U|!ROM_SMB3_E|!ROM_SMB3_J) == $00
	dw SMB3_2PlayerGameStripeImage		; 5C
	dw DATA_20DBF4				; 5D
endif

TitleScreenCheckerFloorStripeImage:
;$20D3BA
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	%InsertVersionExclusiveFile(incbin, ../SMB3/Images/TitleScreenCheckerFloorStripeImage_, SMASE.bin, )
else
	%InsertVersionExclusiveFile(incbin, ../SMB3/Images/TitleScreenCheckerFloorStripeImage_, SMASU.bin, )
endif

if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR] ...It is now free-real estate
	%CUSTOMDATA_SMB3_DrawTLCredits(NULLROM)

; New Time Up data location
TimeUpLetterTiles:
	;   T   E1    M   P   O
	db $20,$22,$24,$26,$28,$2A
	;   E2  S   G   O   T   A   D   O
	db $2C,$2E,$30,$3E,$20,$3A,$3C,$3E
.End:

TimeUpLetterXDisp:
	;   T   E1    M   P   O
	db $43,$4B,$53,$5B,$63,$6B
	;   E2  S   G   O   T   A   D   O
	db $78,$80,$88,$91,$9A,$A3,$AC,$B5

	%FREE_BYTES(NULLROM, 1404-144, $FF)
else
; Raised curtain
DATA_20D4FF:
	db $00,$00,$00,$3F
	db $F4,$01,$F5,$01,$F5,$41,$F4,$41,$F4,$01,$F5,$01,$F5,$41,$F4,$41
	db $F4,$01,$F5,$01,$F5,$41,$F4,$41,$F4,$01,$F5,$01,$F5,$41,$F4,$41
	db $F4,$01,$F5,$01,$F5,$41,$F4,$41,$F4,$01,$F5,$01,$F5,$41,$F4,$41
	db $F4,$01,$F5,$01,$F5,$41,$F4,$41,$F4,$01,$F5,$01,$F5,$41,$F4,$41

	db $FF

DATA_20D544:
	db $00,$20,$00,$3F
	db $F6,$01,$F7,$01,$F7,$41,$F6,$41,$F6,$01,$F7,$01,$F7,$41,$F6,$41
	db $F6,$01,$F7,$01,$F7,$41,$F6,$41,$F6,$01,$F7,$01,$F7,$41,$F6,$41
	db $F6,$01,$F7,$01,$F7,$41,$F6,$41,$F6,$01,$F7,$01,$F7,$41,$F6,$41
	db $F6,$01,$F7,$01,$F7,$41,$F6,$41,$F6,$01,$F7,$01,$F7,$41,$F6,$41
	
	db $FF

DATA_20D589:
	db $00,$40,$00,$3F
	db $F8,$01,$F9,$01,$F9,$41,$F8,$41,$F8,$01,$F9,$01,$F9,$41,$F8,$41
	db $F8,$01,$F9,$01,$F9,$41,$F8,$41,$F8,$01,$F9,$01,$F9,$41,$F8,$41
	db $F8,$01,$F9,$01,$F9,$41,$F8,$41,$F8,$01,$F9,$01,$F9,$41,$F8,$41
	db $F8,$01,$F9,$01,$F9,$41,$F8,$41,$F8,$01,$F9,$01,$F9,$41,$F8,$41

	db $FF

DATA_20D5CE:
	db $00,$60,$00,$3F
	db $5C,$00,$FA,$01,$FA,$41,$5C,$00,$5C,$00,$FA,$01,$FA,$41,$5C,$00
	db $5C,$00,$FA,$01,$FA,$41,$5C,$00,$5C,$00,$FA,$01,$FA,$41,$5C,$00
	db $5C,$00,$FA,$01,$FA,$41,$5C,$00,$5C,$00,$FA,$01,$FA,$41,$5C,$00
	db $5C,$00,$FA,$01,$FA,$41,$5C,$00,$5C,$00,$FA,$01,$FA,$41,$5C,$00

	db $FF

; Clear previous curtain + "SUPER"
DATA_20D613:
	db $00,$80,$40,$12
	db $5C,$00

	db $00,$8A,$00,$2B
	db $45,$09,$30,$08,$31,$08,$32,$08,$33,$08,$34,$08,$35,$08,$36,$08
	db $37,$08,$38,$08,$39,$08,$3A,$08,$5C,$00,$5C,$00,$5C,$00,$5C,$00
	db $3B,$1C,$3C,$1C,$3D,$1C,$3E,$1C,$5C,$00,$5C,$00,$FF

DATA_20D64A:
	db $00,$A0,$40,$12
	db $5C,$00

	db $00,$AA,$00,$2B
	db $46,$09,$40,$08,$41,$08,$42,$08,$43,$08,$44,$08,$45,$08,$46,$08
	db $47,$08,$48,$08,$49,$08,$4A,$08,$5C,$00,$5C,$00,$5C,$00,$5C,$00
	db $4B,$1C,$4C,$1C,$4D,$1C,$4E,$1C,$5C,$00,$5C,$00,$FF

DATA_20D681:
	db $00,$C0,$00,$2B
	db $5C,$00,$5C,$00,$3B,$1C,$3C,$1C,$3D,$1C,$3E,$1C,$5C,$00,$5C,$00
	db $5C,$00,$5C,$00,$47,$09,$50,$08,$51,$08,$52,$08,$53,$08,$54,$08
	db $55,$08,$56,$08,$57,$08,$58,$08,$59,$08,$5A,$08

	db $00,$D6,$40,$12
	db $5C,$00
	
	db $FF

DATA_20D6B8:
	db $00,$E0,$00,$2B
	db $5C,$00,$5C,$00,$4B,$1C,$4C,$1C,$4D,$1C,$4E,$1C,$5C,$00,$5C,$00
	db $5C,$00,$5C,$00,$48,$09,$60,$08,$61,$08,$62,$08,$63,$08,$64,$08
	db $5C,$00,$66,$08,$67,$08,$68,$08,$69,$08,$6A,$08

	db $00,$F6,$40,$12
	db $5C,$00

	db $FF

; Small cloud + "MARIO BROS.™" (full width stripes)
DATA_20D6EF:
	db $01,$00,$00,$3F
	db $5C,$00,$5C,$00,$5C,$00,$5C,$00,$40,$09,$70,$08,$71,$08,$72,$08
	db $73,$08,$74,$08,$75,$08,$76,$08,$77,$08,$78,$08,$79,$08,$5C,$00
	db $5C,$00,$5C,$00,$7D,$08,$7E,$08,$7F,$08,$C0,$08,$C1,$08,$C2,$08
	db $5C,$00,$C4,$08,$C5,$08,$CE,$08,$CF,$08,$5C,$00,$5C,$00,$5C,$00

	db $FF

DATA_20D734:
	db $01,$20,$00,$3F
	db $5C,$00,$5C,$00,$5C,$00,$5C,$00,$41,$09,$80,$08,$81,$08,$82,$08
	db $83,$08,$84,$08,$85,$08,$86,$08,$87,$08,$88,$08,$89,$08,$8A,$08
	db $8B,$08,$8C,$08,$8D,$08,$8E,$08,$8F,$08,$D0,$08,$D1,$08,$D2,$08
	db $D3,$08,$D4,$08,$D5,$08,$49,$09,$5C,$00,$5C,$00,$5C,$00,$5C,$00

	db $FF

DATA_20D779:
	db $01,$40,$00,$3F
	db $5C,$00,$5C,$00,$5C,$00,$5C,$00,$42,$09,$90,$08,$91,$08,$92,$08
	db $93,$08,$94,$08,$95,$08,$96,$08,$97,$08,$98,$08,$99,$08,$9A,$08
	db $9B,$08,$9C,$08,$9D,$08,$9E,$08,$9F,$08,$E0,$08,$E1,$08,$E2,$08
	db $E3,$08,$E4,$08,$E5,$08,$4A,$09,$5C,$00,$5C,$00,$5C,$00,$5C,$00

	db $FF

DATA_20D7BE:
	db $01,$60,$00,$3F
	db $5C,$00,$5C,$00,$5C,$00,$5C,$00,$43,$09,$A0,$08,$A1,$08,$A2,$08
	db $A3,$08,$A4,$08,$A5,$08,$A6,$08,$A7,$08,$A8,$08,$A9,$08,$AA,$08
	db $AB,$08,$AC,$08,$AD,$08,$AE,$08,$AF,$08,$F0,$08,$F1,$08,$F2,$08
	db $F3,$08,$F4,$08,$F5,$08,$4B,$09,$5C,$00,$5C,$00,$5C,$00,$5C,$00

	db $FF
	
	; (Tip of right bush at the end)
DATA_20D803:
	db $01,$80,$00,$3F
	db $5B,$1C,$6B,$1C,$5C,$00,$5C,$00,$44,$09,$B0,$08,$B1,$08,$B2,$08
	db $B3,$08,$B4,$08,$B5,$08,$B6,$08,$B7,$08,$B8,$08,$B9,$08,$BA,$08
	db $BB,$08,$BC,$08,$BD,$08,$BE,$08,$BF,$08,$C6,$08,$C7,$08,$C8,$08
	db $D6,$08,$D7,$08,$D8,$08,$E8,$08,$04,$1C,$05,$1C,$06,$1C,$07,$1C

	db $FF

; Clear previous curtain + top half of "3" + top of the right bush
DATA_20D848:
	db $01,$A0,$40,$1A
	db $5C,$00

	db $01,$AE,$00,$23
	db $C9,$04,$CA,$04,$CB,$04,$CC,$04,$CD,$04,$5C,$00,$5C,$00,$5C,$00
	db $5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$14,$1C,$3B,$1D
	db $3C,$1D,$17,$1C

	db $FF

DATA_20D877:
	db $01,$C0,$40,$1A
	db $5C,$00

	db $01,$CE,$00,$23
	db $D9,$04,$DA,$04,$DB,$04,$DC,$04,$DD,$04,$5C,$00,$5C,$00,$5C,$00
	db $5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$3F,$1D,$21,$1C
	db $3D,$1D,$12,$1C

	db $FF

DATA_20D8A6:
	db $01,$E0,$40,$1A
	db $5C,$00

	db $01,$EE,$00,$23
	db $E9,$04,$EA,$04,$EB,$04,$EC,$04,$ED,$04,$5C,$00,$5C,$00,$5C,$00
	db $5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$3F,$1D,$21,$1C
	db $3D,$1D,$12,$1C

	db $FF

; Top half of left bush + bottom half of "3" + Part of right bush (full width)
DATA_20D8D5:
	db $02,$00,$00,$3F
	db $04,$1C,$05,$1C,$06,$1C,$07,$1C,$5C,$00,$5C,$00,$5C,$00,$5C,$00
	db $5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$F9,$04,$FA,$04
	db $FB,$04,$FF,$04,$FD,$04,$FE,$04,$5C,$00,$5C,$00,$5C,$00,$5C,$00
	db $5C,$00,$5C,$00,$04,$1C,$05,$1C,$02,$1C,$03,$1C,$3D,$1D,$12,$1C

	db $FF

DATA_20D91A:
	db $02,$20,$00,$3F
	db $14,$1C,$3B,$1D,$3C,$1D,$17,$1C,$5C,$00,$5C,$00,$5C,$00,$5C,$00
	db $5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$6C,$04,$6D,$04
	db $6E,$04,$6F,$04,$DE,$04,$DF,$04,$5C,$00,$5C,$00,$5C,$00,$5C,$00
	db $5C,$00,$5C,$00,$14,$1C,$3B,$1D,$3C,$1D,$13,$1C,$3D,$1D,$12,$1C

	db $FF

DATA_20D95F:
	db $02,$40,$00,$3F
	db $3F,$1D,$21,$1C,$3D,$1D,$12,$1C,$5C,$00,$5C,$00,$5C,$00,$5C,$00
	db $5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00
	db $EE,$04,$EF,$04,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00
	db $5C,$00,$5C,$00,$3F,$1D,$21,$1C,$3D,$1D,$23,$1C,$3D,$1D,$12,$1C

	db $FF

; Clear previous curtain + bottom of the bushes
DATA_20D9A4:
	db $02,$60,$00,$0B
	db $3F,$1D,$21,$1C,$3D,$1D,$12,$1C,$5C,$00,$5C,$00

	db $02,$66,$40,$26
	db $5C,$00

	db $02,$7A,$00,$0B
	db $3F,$1D,$21,$1C,$3D,$1D,$23,$1C,$3D,$1D,$12,$1C

	db $FF

DATA_20D9CB:
	db $02,$80,$00,$0B
	db $3F,$1D,$21,$1C,$00,$1C,$01,$1C,$06,$1C,$07,$1C

	db $02,$86,$40,$26
	db $5C,$00

	db $02,$9A,$00,$0B
	db $3F,$1D,$21,$1C,$3D,$1D,$23,$1C,$3D,$1D,$12,$1C

	db $FF

DATA_20D9F2:
	db $02,$A0,$00,$0F
	db $3F,$1D,$21,$1C,$10,$1C,$3B,$1D,$3C,$1D,$17,$1C,$5C,$00,$5C,$00

	db $02,$A8,$40,$22
	db $5C,$00

	db $02,$BA,$00,$0B
	db $3F,$1D,$21,$1C,$3D,$1D,$23,$1C,$3D,$1D,$12,$1C

	db $FF

DATA_20DA1D:
	db $02,$C0,$00,$0F
	db $3F,$1D,$21,$1C,$20,$1C,$21,$1C,$3D,$1D,$12,$1C,$5C,$00,$5C,$00

	db $02,$C8,$40,$22
	db $5C,$00

	db $02,$D8,$00,$0F
	db $04,$1C,$05,$1C,$02,$1C,$03,$1C,$3D,$1D,$23,$1C,$3D,$1D,$12,$1C

	db $FF

DATA_20DA4C:
	db $02,$E0,$00,$0F
	db $3F,$1D,$21,$1C,$20,$1C,$21,$1C,$3D,$1D,$12,$1C,$5C,$00,$5C,$00

	db $02,$E8,$40,$22
	db $5C,$00

	db $02,$F8,$00,$0F
	db $14,$1C,$3B,$1D,$3C,$1D,$13,$1C,$3D,$1D,$23,$1C,$3D,$1D,$12,$1C

	db $FF
endif

DATA_20DA7B:
	db $FF

DATA_20DA7C:
	db $12,$08,$00,$01
	db $53,$11

	db $12,$27,$00,$05
	db $4C,$11,$55,$11,$56,$11

	db $12,$37,$00,$01
	db $53,$11

	db $12,$46,$00,$09
	db $4D,$11,$4E,$11,$58,$11,$57,$11,$56,$11

	db $12,$51,$00,$01
	db $53,$11

	db $12,$56,$00,$05
	db $4C,$11,$55,$11,$56,$11

	db $12,$65,$00,$0D
	db $54,$11,$4F,$11,$58,$11,$58,$11,$58,$11,$57,$11,$56,$11

	db $12,$70,$00,$05
	db $4C,$11,$55,$11,$56,$11

	db $12,$75,$00,$09
	db $4D,$11,$4E,$11,$58,$11,$57,$11,$56,$11

	db $12,$84,$00,$11
	db $54,$11,$50,$11,$51,$11,$58,$11,$58,$11,$58,$11,$58,$11,$57,$11
	db $56,$11

	db $12,$8F,$00,$17
	db $4D,$11,$4E,$11,$58,$11,$57,$11,$56,$11,$54,$11,$4F,$11,$58,$11
	db $58,$11,$58,$11,$57,$11,$56,$11

	db $12,$A5,$00,$2B
	db $52,$11,$5C,$11,$5B,$11,$5C,$11,$5B,$11,$58,$11,$58,$11,$57,$11
	db $56,$11,$54,$11,$4F,$11,$58,$11,$58,$11,$58,$11,$57,$11,$59,$11
	db $5A,$11,$58,$11,$58,$11,$5B,$11,$5C,$11,$57,$11

	db $12,$C5,$00,$2B
	db $51,$11,$5E,$11,$5F,$11,$5E,$11,$5F,$11,$5C,$11,$5B,$11,$5C,$11
	db $57,$11,$59,$11,$5A,$11,$58,$11,$5B,$11,$58,$11,$58,$11,$5B,$11
	db $58,$11,$5B,$11,$5C,$11,$5E,$11,$5F,$11,$58,$11

	db $12,$E5,$00,$2B
	db $58,$11,$60,$11,$61,$11,$60,$11,$61,$11,$5D,$11,$5E,$11,$5F,$11
	db $5C,$11,$5B,$11,$5C,$11,$5C,$11,$5D,$11,$5B,$11,$5C,$11,$5D,$11
	db $5C,$11,$5E,$11,$5F,$11,$60,$11,$61,$11,$58,$11

	db $FF

if !Define_Global_ROMToAssemble&(!ROM_SMB3_U|!ROM_SMB3_E|!ROM_SMB3_J) != $00
	%FREE_BYTES(NULLROM, 144, $FF)
elseif !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR]
table "Tables/Fonts/TitleScreen_br.txt"

	;             Layer,Map, X,Y, Dir, RLE, Size in bytes
SMB3_1PlayerGameStripeImage:
	%drawStripeHeader(0, 0, 10,18, 0, !FALSE, 9*2)
	dw "1 JOGADOR"

SMB3_2PlayerGameStripeImage:
	%drawStripeHeader(0, 0, 10,20, 0, !FALSE, 11*2)
	dw "2 JOGADORES"

.BattleMode:
	%drawStripeHeader(0, 0, 10,22, 0, !FALSE, 12*2)
	dw "MODO BATALHA"

	db $FF

DATA_20DBF4:
	%drawStripeHeader(0, 0, 10,22, 0, !FALSE, 12*2)
	dw "MODO BATALHA"

	%drawStripeHeader(0, 0, 10,18, 0, !FALSE, 9*2)
	dw "1 JOGADOR"

	db $FF
cleartable
else
SMB3_1PlayerGameStripeImage:
	db $02,$4A,$00,$19
	db $0E,$1C,$5C,$00,$0A,$1C,$0B,$1C,$0C,$1C,$1A,$1C,$1B,$1C,$0D,$1C
	db $5C,$00,$1C,$1C,$0C,$1C,$1D,$1C,$1B,$1C

SMB3_2PlayerGameStripeImage:
	db $02,$8A,$00,$19
	db $1E,$1C,$5C,$00,$0A,$1C,$0B,$1C,$0C,$1C,$1A,$1C,$1B,$1C,$0D,$1C
	db $5C,$00,$1C,$1C,$0C,$1C,$1D,$1C,$1B,$1C

.BattleMode:
	db $02,$CA,$00,$15
	db $08,$1C,$0C,$1C,$19,$1C,$19,$1C,$0B,$1C,$1B,$1C,$5C,$00,$1C,$1C
	db $0C,$1C,$1D,$1C,$1B,$1C

	db $FF

DATA_20DBF4:
	db $02,$CA,$00,$15
	db $08,$1C,$0C,$1C,$19,$1C,$19,$1C,$0B,$1C,$1B,$1C,$5C,$00,$1C,$1C
	db $0C,$1C,$1D,$1C,$1B,$1C

	db $02,$4A,$00,$19
	db $0E,$1C,$5C,$00,$0A,$1C,$0B,$1C,$0C,$1C,$1A,$1C,$1B,$1C,$0D,$1C
	db $5C,$00,$1C,$1C,$0C,$1C,$1D,$1C,$1B,$1C

	db $FF
endif

SMB3_StripeImage1F_CurtainShadow:
.Main:
;$20DC2D
	db $03,$00,$00,$3F
	db $F8,$01,$F9,$01,$F9,$41,$F8,$41,$F8,$01,$F9,$01,$F9,$41,$F8,$41
	db $F8,$01,$F9,$01,$F9,$41,$F8,$41,$F8,$01,$F9,$01,$F9,$41,$F8,$41
	db $F8,$01,$F9,$01,$F9,$41,$F8,$41,$F8,$01,$F9,$01,$F9,$41,$F8,$41
	db $F8,$01,$F9,$01,$F9,$41,$F8,$41,$F8,$01,$F9,$01,$F9,$41,$F8,$41

	db $FF

if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	db $FF
else
SMB3_StripeImage20_CheckerFloor:
.Main:
;$20DC72
	db $0B,$00,$01,$3F
	db $95,$22,$95,$22,$96,$22,$96,$22,$95,$22,$95,$22,$96,$22,$96,$22
	db $95,$22,$95,$22,$96,$22,$96,$22,$95,$22,$95,$22,$96,$22,$96,$22
	db $95,$22,$95,$22,$96,$22,$96,$22,$95,$22,$95,$22,$96,$22,$96,$22
	db $95,$22,$95,$22,$96,$22,$96,$22,$95,$22,$95,$22,$96,$22,$96,$22
	db $F6,$22,$F6,$22,$F7,$22,$F7,$22,$F6,$22,$F6,$22,$F7,$22,$F7,$22
	db $F6,$22,$F6,$22,$F7,$22,$F7,$22,$F6,$22,$F6,$22,$F7,$22,$F7,$22
	db $F6,$22,$F6,$22,$F7,$22,$F7,$22,$F6,$22,$F6,$22,$F7,$22,$F7,$22
	db $F6,$22,$F6,$22,$F7,$22,$F7,$22,$F6,$22,$F6,$22,$F7,$22,$F7,$22
	db $F8,$22,$F8,$22,$F9,$22,$F9,$22,$F8,$22,$F8,$22,$F9,$22,$F9,$22
	db $F8,$22,$F8,$22,$F9,$22,$F9,$22,$F8,$22,$F8,$22,$F9,$22,$F9,$22
	db $F8,$22,$F8,$22,$F9,$22,$F9,$22,$F8,$22,$F8,$22,$F9,$22,$F9,$22
	db $F8,$22,$F8,$22,$F9,$22,$F9,$22,$F8,$22,$F8,$22,$F9,$22,$F9,$22
	db $FD,$20,$FD,$20,$FC,$20,$FC,$20,$FD,$20,$FD,$20,$FC,$20,$FC,$20
	db $FD,$20,$FD,$20,$FC,$20,$FC,$20,$FD,$20,$FD,$20,$FC,$20,$FC,$20
	db $FD,$20,$FD,$20,$FC,$20,$FC,$20,$FD,$20,$FD,$20,$FC,$20,$FC,$20
	db $FD,$20,$FD,$20,$FC,$20,$FC,$20,$FD,$20,$FD,$20,$FC,$20,$FC,$20
	db $FD,$20,$FD,$20,$FC,$20,$FC,$20,$FD,$20,$FD,$20,$FC,$20,$FC,$20
	db $FD,$20,$FD,$20,$FC,$20,$FC,$20,$FD,$20,$FD,$20,$FC,$20,$FC,$20
	db $FD,$20,$FD,$20,$FC,$20,$FC,$20,$FD,$20,$FD,$20,$FC,$20,$FC,$20
	db $FD,$20,$FD,$20,$FC,$20,$FC,$20,$FD,$20,$FD,$20,$FC,$20,$FC,$20

	db $FF
endif

DATA_20DDB7:													; Todo: These are stripe images? They don't look like them.
	db $00,$00,$00,$00,$FF,$7F,$1F,$00,$00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00

DATA_20DDF7:
	db $00,$00,$00,$00,$FF,$7F,$1F,$00,$00,$00,$00,$00,$00,$00,$4A,$29
	db $00,$00,$00,$00,$4A,$29,$00,$00,$00,$00,$00,$00,$4A,$29,$4A,$29
	db $00,$00,$00,$00,$00,$00,$4A,$29,$00,$00,$4A,$29,$00,$00,$00,$00
	db $00,$00,$4A,$29,$00,$00,$00,$00,$00,$00,$4A,$29,$00,$00,$00,$00

DATA_20DE37:
	db $00,$00,$00,$00,$FF,$7F,$1F,$00,$00,$00,$00,$00,$4A,$29,$B5,$56
	db $00,$00,$4A,$29,$B5,$56,$4A,$29,$00,$00,$4A,$29,$B5,$56,$B5,$56
	db $00,$00,$4A,$29,$4A,$29,$B5,$56,$00,$00,$B5,$56,$4A,$29,$4A,$29
	db $00,$00,$B5,$56,$4A,$29,$4A,$29,$00,$00,$B5,$56,$4A,$29,$4A,$29

DATA_20DE77:
	db $00,$00,$00,$00,$FF,$7F,$1F,$00,$00,$00,$4A,$29,$B5,$56,$FF,$7F
	db $00,$00,$B5,$56,$FF,$7F,$B5,$56,$00,$00,$B5,$56,$FF,$7F,$FF,$7F
	db $00,$00,$B5,$56,$B5,$56,$FF,$7F,$00,$00,$FF,$7F,$B5,$56,$B5,$56
	db $00,$00,$FF,$7F,$B5,$56,$B5,$56,$00,$00,$FF,$7F,$B5,$56,$B5,$56

DATA_20DEB7:
	db $00,$00,$00,$00,$FF,$7F,$1F,$00,$00,$00,$FF,$02,$34,$23,$DF,$3A
	db $00,$00,$F6,$6B,$FF,$7F,$FF,$03,$00,$00,$F1,$76,$34,$23,$DF,$3A
	db $00,$00,$B5,$56,$DF,$3A,$00,$00,$00,$00,$5F,$62,$DF,$3A,$00,$00
	db $00,$00,$10,$03,$DF,$3A,$00,$00,$00,$00,$10,$03,$DF,$3A,$00,$00

DATA_20DEF7:
	db $FF

DATA_20DEF8:
	db $FF

DATA_20DEF9:
	db $FF

DATA_20DEFA:
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	%InsertVersionExclusiveFile(incbin, ../SMB3/Images/TitleScreenUnknownStripeImage_, SMASE.bin, )
else
	%InsertVersionExclusiveFile(incbin, ../SMB3/Images/TitleScreenUnknownStripeImage_, SMASU.bin, )
endif

DATA_20DFFF:
	db $00,$00,$00,$00,$FF,$7F,$F6,$6B,$00,$00,$40,$30,$8B,$62,$96,$7F
	db $00,$00,$FF,$02,$FF,$7F,$7A,$11,$00,$00,$B6,$5D,$F7,$7F,$F1,$76
	db $00,$00,$1F,$00,$DF,$3A,$00,$00,$00,$00,$DF,$3A,$5F,$62,$B0,$14
	db $00,$00,$34,$23,$DF,$3A,$00,$00,$00,$00,$FF,$7F,$FF,$7F,$FF,$7F

DATA_20E03F:
	db $FF

DATA_20E040:
	db $00,$00,$F1,$76,$FF,$7F,$00,$00,$00,$00,$31,$72,$B5,$56,$00,$00
	db $00,$00,$B6,$5D,$4A,$29,$00,$00,$00,$00,$40,$30,$00,$00,$00,$00

DATA_20E060:
	db $FF

;--------------------------------------------------------------------

	%ROUTINE_SMB3_SetPointersForCutscenePlayerGraphics(NULLROM)				; $20E061
if !Define_Global_ROMToAssemble&(!ROM_SMAS_U) != $00
	%FREE_BYTES(NULLROM, 94, $FF)
elseif !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2) != $00
	%FREE_BYTES(NULLROM, 74, $FF)
elseif !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	%FREE_BYTES(NULLROM, 154, $FF)
else
	%FREE_BYTES(NULLROM, 97, $FF)
endif

;--------------------------------------------------------------------

; Note: Routine that draws the player character in levels.

DATA_20E230:
	db $D0,$D2,$D2,$D4,$D6,$D6,$D2

CODE_20E237:
	PHX
	JSL.l CODE_22E000
	PLX
	LDX.b !RAM_SMB3_Level_Player_CurrentPose
	LDA.b !RAM_SMB3_Level_Player_XPosLo
	STA.b $00
	LDA.b !RAM_SMB3_Level_Player_XPosHi
	STA.b $01
	REP.b #$20
	LDA.b $00
	SEC
	SBC.w $0210
	STA.b $D8
	CLC
	ADC.w #$0008
	STA.b $DA
	CLC
	ADC.w #$0008
	STA.b $DC
	SEP.b #$20
	LDA.b $D8
	STA.b !RAM_SMB3_Level_Player_OnScreenXPos
	LDA.w !RAM_SMB3_Level_IsVerticalLevelFlag
	BEQ.b CODE_20E26E
	STZ.b $D9
	STZ.b $DB
	STZ.b $DD
CODE_20E26E:
	LDA.b !RAM_SMB3_Level_Player_YPosLo
	SEC
	SBC.w $0543
	STA.b !RAM_SMB3_Level_Player_OnScreenYPos
	LDA.b !RAM_SMB3_Level_Player_YPosHi
	SBC.w $0542
	STA.w !RAM_SMB3_Level_Player_IsAboveTopOfLevelFlag
	LDA.w !RAM_SMB3_Level_Player_HurtTimer
	BEQ.b CODE_20E28D
	DEC.w !RAM_SMB3_Level_Player_HurtTimer
	AND.b #$02
	BEQ.b CODE_20E28D
	JMP.w CODE_20E5EA

CODE_20E28D:
	LDA.w !RAM_SMB3_Level_Player_FireFlowerGetPaletteAnimationTimer
	BNE.b CODE_20E2A0
	LDA.w !RAM_SMB3_Level_Player_StarPowerTimer
	BEQ.b CODE_20E2C1
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$01
	BEQ.b CODE_20E2A0
	DEC.w !RAM_SMB3_Level_Player_StarPowerTimer
CODE_20E2A0:
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$0F
	LDY.w !RAM_SMB3_Level_Player_FireFlowerGetPaletteAnimationTimer
	BNE.b CODE_20E2BD
	LDY.w !RAM_SMB3_Level_Player_StarPowerTimer
	CPY.b #$20
	BNE.b CODE_20E2BB
	LDY.w !RAM_SMB3_Level_PSwitchTimer
	BNE.b CODE_20E2BB
	LDY.w $1062
	STY.w !RAM_SMB3_Global_MusicCh1
CODE_20E2BB:
	BCS.b CODE_20E2BF
CODE_20E2BD:
	LSR
	LSR
CODE_20E2BF:
	AND.b #$03
CODE_20E2C1:
	ASL
	ORA.b #$20
	CMP.b #$20
	BNE.b CODE_20E2CA
	ORA.b #$0E
CODE_20E2CA:
	STA.b $00
	LDA.w !RAM_SMB3_Level_Player_StarPowerTimer
	BEQ.b CODE_20E2DD
	JSL.l CODE_29CD83
	LDA.b $00
	AND.b #$F1
	ORA.b #$0E
	STA.b $00
CODE_20E2DD:
	LDA.w !RAM_SMB3_Level_Player_BehindLayer1Timer
	ORA.w !RAM_SMB3_Level_Player_InQuicksandFlag
	BEQ.b CODE_20E2ED
	LDA.b $00
	AND.b #$CF
	ORA.b #$10
	STA.b $00
CODE_20E2ED:
	REP.b #$10
	LDX.b $C4
	LDA.b #$00
	STA.w SMB3_OAMBuffer[$06].Tile,x
	INC
	STA.w SMB3_OAMBuffer[$07].Tile,x
	INC
	STA.w SMB3_OAMBuffer[$08].Tile,x
	INC
	STA.w SMB3_OAMBuffer[$09].Tile,x
	INC
	STA.w SMB3_OAMBuffer[$0A].Tile,x
	INC
	STA.w SMB3_OAMBuffer[$0B].Tile,x
	INC
	STA.w SMB3_OAMBuffer[$00].Tile,x
	INC
	STA.w SMB3_OAMBuffer[$01].Tile,x
	INC
	STA.w SMB3_OAMBuffer[$02].Tile,x
	INC
	STA.w SMB3_OAMBuffer[$03].Tile,x
	INC
	STA.w SMB3_OAMBuffer[$04].Tile,x
	INC
	STA.w SMB3_OAMBuffer[$05].Tile,x
	LDA.b $BD
	AND.b #$C0
	ORA.b $00
	STA.w SMB3_OAMBuffer[$00].Prop,x
	STA.w SMB3_OAMBuffer[$01].Prop,x
	STA.w SMB3_OAMBuffer[$02].Prop,x
	STA.w SMB3_OAMBuffer[$03].Prop,x
	STA.w SMB3_OAMBuffer[$04].Prop,x
	STA.w SMB3_OAMBuffer[$05].Prop,x
	STA.w SMB3_OAMBuffer[$06].Prop,x
	STA.w SMB3_OAMBuffer[$07].Prop,x
	STA.w SMB3_OAMBuffer[$08].Prop,x
	STA.w SMB3_OAMBuffer[$09].Prop,x
	STA.w SMB3_OAMBuffer[$0A].Prop,x
	STA.w SMB3_OAMBuffer[$0B].Prop,x
	REP.b #$20
	LDA.w $0226
	CMP.w $0228
	BNE.b CODE_20E377
	SEP.b #$20
	LDA.w SMB3_OAMBuffer[$06].Prop,x
	AND.b #$BF
	STA.w SMB3_OAMBuffer[$06].Prop,x
	STA.w SMB3_OAMBuffer[$07].Prop,x
	STA.w SMB3_OAMBuffer[$00].Prop,x
	STA.w SMB3_OAMBuffer[$01].Prop,x
	ORA.b #$40
	STA.w SMB3_OAMBuffer[$02].Prop,x
	STA.w SMB3_OAMBuffer[$03].Prop,x
	STA.w SMB3_OAMBuffer[$08].Prop,x
	STA.w SMB3_OAMBuffer[$09].Prop,x
CODE_20E377:
	SEP.b #$20
	LDA.b !RAM_SMB3_Level_Player_OnScreenYPos
	STA.w SMB3_OAMBuffer[$06].YDisp,x
	STA.w SMB3_OAMBuffer[$08].YDisp,x
	STA.w SMB3_OAMBuffer[$0A].YDisp,x
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$07].YDisp,x
	STA.w SMB3_OAMBuffer[$09].YDisp,x
	STA.w SMB3_OAMBuffer[$0B].YDisp,x
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$00].YDisp,x
	STA.w SMB3_OAMBuffer[$02].YDisp,x
	STA.w SMB3_OAMBuffer[$04].YDisp,x
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$01].YDisp,x
	STA.w SMB3_OAMBuffer[$03].YDisp,x
	STA.w SMB3_OAMBuffer[$05].YDisp,x
	LDA.b !RAM_SMB3_Level_Player_OnScreenXPos
	STA.w SMB3_OAMBuffer[$00].XDisp,x
	STA.w SMB3_OAMBuffer[$01].XDisp,x
	STA.w SMB3_OAMBuffer[$06].XDisp,x
	STA.w SMB3_OAMBuffer[$07].XDisp,x
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$02].XDisp,x
	STA.w SMB3_OAMBuffer[$03].XDisp,x
	STA.w SMB3_OAMBuffer[$08].XDisp,x
	STA.w SMB3_OAMBuffer[$09].XDisp,x
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$04].XDisp,x
	STA.w SMB3_OAMBuffer[$05].XDisp,x
	STA.w SMB3_OAMBuffer[$0A].XDisp,x
	STA.w SMB3_OAMBuffer[$0B].XDisp,x
	PHX
	REP.b #$20
	TXA
	LSR
	LSR
	TAX
	SEP.b #$20
	LDA.b $D9
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,x
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,x
	STA.w SMB3_OAMTileSizeBuffer[$06].Slot,x
	STA.w SMB3_OAMTileSizeBuffer[$07].Slot,x
	LDA.b $DB
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$02].Slot,x
	STA.w SMB3_OAMTileSizeBuffer[$03].Slot,x
	STA.w SMB3_OAMTileSizeBuffer[$08].Slot,x
	STA.w SMB3_OAMTileSizeBuffer[$09].Slot,x
	LDA.b $DD
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$04].Slot,x
	STA.w SMB3_OAMTileSizeBuffer[$05].Slot,x
	STA.w SMB3_OAMTileSizeBuffer[$0A].Slot,x
	STA.w SMB3_OAMTileSizeBuffer[$0B].Slot,x
	PLX
	LDA.b $BD
	AND.b #$40
	BNE.b CODE_20E417
	BRL.w CODE_20E4C3

CODE_20E417:
	LDA.w SMB3_OAMBuffer[$00].Tile,x
	PHA
	LDA.w SMB3_OAMBuffer[$02].Tile,x
	STA.w SMB3_OAMBuffer[$00].Tile,x
	PLA
	STA.w SMB3_OAMBuffer[$02].Tile,x
	LDA.w SMB3_OAMBuffer[$01].Tile,x
	PHA
	LDA.w SMB3_OAMBuffer[$03].Tile,x
	STA.w SMB3_OAMBuffer[$01].Tile,x
	PLA
	STA.w SMB3_OAMBuffer[$03].Tile,x
	LDA.w SMB3_OAMBuffer[$04].XDisp,x
	CLC
	ADC.b #$E8
	STA.w SMB3_OAMBuffer[$04].XDisp,x
	STA.w SMB3_OAMBuffer[$05].XDisp,x
	STA.w SMB3_OAMBuffer[$0A].XDisp,x
	STA.w SMB3_OAMBuffer[$0B].XDisp,x
	LDA.w !RAM_SMB3_Level_IsVerticalLevelFlag
	BNE.b CODE_20E46C
	PHX
	REP.b #$20
	LDA.b $DC
	SEC
	SBC.w #$0018
	STA.b $DC
	TXA
	LSR
	LSR
	TAX
	SEP.b #$20
	LDA.b $DD
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$04].Slot,x
	STA.w SMB3_OAMTileSizeBuffer[$05].Slot,x
	STA.w SMB3_OAMTileSizeBuffer[$0A].Slot,x
	STA.w SMB3_OAMTileSizeBuffer[$0B].Slot,x
	PLX
CODE_20E46C:
	LDA.w SMB3_OAMBuffer[$06].Tile,x
	PHA
	LDA.w SMB3_OAMBuffer[$08].Tile,x
	STA.w SMB3_OAMBuffer[$06].Tile,x
	PLA
	STA.w SMB3_OAMBuffer[$08].Tile,x
	LDA.w SMB3_OAMBuffer[$07].Tile,x
	PHA
	LDA.w SMB3_OAMBuffer[$09].Tile,x
	STA.w SMB3_OAMBuffer[$07].Tile,x
	PLA
	STA.w SMB3_OAMBuffer[$09].Tile,x
	LDA.w !RAM_SMB3_Level_Player_SomersaultJumpFlag
	BEQ.b CODE_20E4C3
	LDA.w SMB3_OAMBuffer[$00].XDisp,x
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$00].XDisp,x
	STA.w SMB3_OAMBuffer[$01].XDisp,x
	STA.w SMB3_OAMBuffer[$06].XDisp,x
	STA.w SMB3_OAMBuffer[$07].XDisp,x
	LDA.w SMB3_OAMBuffer[$02].XDisp,x
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$02].XDisp,x
	STA.w SMB3_OAMBuffer[$03].XDisp,x
	STA.w SMB3_OAMBuffer[$08].XDisp,x
	STA.w SMB3_OAMBuffer[$09].XDisp,x
	LDA.w SMB3_OAMBuffer[$04].XDisp,x
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$04].XDisp,x
	STA.w SMB3_OAMBuffer[$05].XDisp,x
	STA.w SMB3_OAMBuffer[$0A].XDisp,x
	STA.w SMB3_OAMBuffer[$0B].XDisp,x
CODE_20E4C3:
	LDA.w !RAM_SMB3_Level_Player_InKuriboShoeFlag
	BNE.b CODE_20E4CB
	BRL.w CODE_20E559

CODE_20E4CB:
	LDY.w #$0000
	LDA.b !RAM_SMB3_Level_Player_CurrentPowerUp
	BNE.b CODE_20E4D5
	LDY.w #$0006
CODE_20E4D5:
	STY.b $00
	LDA.b $A6
	BEQ.b CODE_20E4EE
	LDA.b !RAM_SMB3_Level_Player_YSpeed
	BPL.b CODE_20E4E1
	EOR.b #$FF
CODE_20E4E1:
	LSR
	LSR
	LSR
	LSR
	SEC
	SBC.b #$03
	EOR.b #$FF
	BPL.b CODE_20E4EE
	LDA.b #$00
CODE_20E4EE:
	CLC
	ADC.b $00
	CLC
	ADC.b !RAM_SMB3_Level_Player_OnScreenYPos
	STA.w SMB3_OAMBuffer[$06].YDisp,x
	STA.w SMB3_OAMBuffer[$08].YDisp,x
	STA.w SMB3_OAMBuffer[$0A].YDisp,x
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$07].YDisp,x
	STA.w SMB3_OAMBuffer[$09].YDisp,x
	STA.w SMB3_OAMBuffer[$0B].YDisp,x
	LDA.b #$28
	STA.w SMB3_OAMBuffer[$00].Tile,x
	LDA.b #$29
	STA.w SMB3_OAMBuffer[$01].Tile,x
	LDY.w #$002A
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$08
	BEQ.b CODE_20E51E
	INY
	INY
CODE_20E51E:
	TYA
	STA.w SMB3_OAMBuffer[$02].Tile,x
	INC
	STA.w SMB3_OAMBuffer[$03].Tile,x
	LDA.w SMB3_OAMBuffer[$00].Prop,x
	AND.b #$F0
	ORA.b #$05
	STA.w SMB3_OAMBuffer[$00].Prop,x
	STA.w SMB3_OAMBuffer[$01].Prop,x
	STA.w SMB3_OAMBuffer[$02].Prop,x
	STA.w SMB3_OAMBuffer[$03].Prop,x
	AND.b #$40
	BEQ.b CODE_20E559
	LDA.w SMB3_OAMBuffer[$02].Tile,x
	PHA
	LDA.w SMB3_OAMBuffer[$00].Tile,x
	STA.w SMB3_OAMBuffer[$02].Tile,x
	PLA
	STA.w SMB3_OAMBuffer[$00].Tile,x
	LDA.w SMB3_OAMBuffer[$03].Tile,x
	PHA
	LDA.w SMB3_OAMBuffer[$01].Tile,x
	STA.w SMB3_OAMBuffer[$03].Tile,x
	PLA
	STA.w SMB3_OAMBuffer[$01].Tile,x
CODE_20E559:
	LDA.b !RAM_SMB3_Level_Player_CurrentPose
	CMP.b #$5A
	BNE.b CODE_20E5B4
	LDA.w !RAM_SMB3_Level_Player_SomersaultJumpFlag
	BNE.b CODE_20E5B4
	LDA.w SMB3_OAMBuffer[$00].YDisp,x
	STA.w SMB3_OAMBuffer[$0A].YDisp,x
	LDA.w SMB3_OAMBuffer[$01].YDisp,x
	STA.w SMB3_OAMBuffer[$0B].YDisp,x
	REP.b #$20
	LDA.b $BD
	AND.w #$00FF
	TAY
	SEP.b #$20
	LDA.b #$F8
	CPY.w #$0000
	BEQ.b CODE_20E583
	LDA.b #$10
CODE_20E583:
	CLC
	ADC.w SMB3_OAMBuffer[$06].XDisp,x
	STA.w SMB3_OAMBuffer[$0A].XDisp,x
	STA.w SMB3_OAMBuffer[$0B].XDisp,x
	PHX
	REP.b #$20
	LDA.b !RAM_SMB3_Level_Player_CurrentPowerUp
	AND.w #$00FF
	TAX
	SEP.b #$20
	LDA.l DATA_20E230,x
	PLX
	STA.w SMB3_OAMBuffer[$0A].Tile,x
	INC
	STA.w SMB3_OAMBuffer[$0B].Tile,x
	LDA.w SMB3_OAMBuffer[$06].Prop,x
	ORA.b #$01
	STA.w SMB3_OAMBuffer[$0A].Prop,x
	LDA.w SMB3_OAMBuffer[$07].Prop,x
	ORA.b #$01
	STA.w SMB3_OAMBuffer[$0B].Prop,x
CODE_20E5B4:
	LDA.b $BD
	AND.b #$80
	BEQ.b CODE_20E5EA
	LDA.w SMB3_OAMBuffer[$00].YDisp,x
	STA.w SMB3_OAMBuffer[$07].YDisp,x
	STA.w SMB3_OAMBuffer[$09].YDisp,x
	STA.w SMB3_OAMBuffer[$0B].YDisp,x
	CLC
	ADC.b #$F8
	STA.w SMB3_OAMBuffer[$00].YDisp,x
	STA.w SMB3_OAMBuffer[$02].YDisp,x
	STA.w SMB3_OAMBuffer[$04].YDisp,x
	LDA.w SMB3_OAMBuffer[$01].YDisp,x
	STA.w SMB3_OAMBuffer[$06].YDisp,x
	STA.w SMB3_OAMBuffer[$08].YDisp,x
	STA.w SMB3_OAMBuffer[$0A].YDisp,x
	CLC
	ADC.b #$E8
	STA.w SMB3_OAMBuffer[$01].YDisp,x
	STA.w SMB3_OAMBuffer[$03].YDisp,x
	STA.w SMB3_OAMBuffer[$05].YDisp,x
CODE_20E5EA:
	REP.b #$10
	STZ.w $0583
	LDY.w #$00F0
	LDA.w !RAM_SMB3_Level_Player_IsAboveTopOfLevelFlag
	BPL.b CODE_20E63A
	LDA.b !RAM_SMB3_Level_Player_OnScreenYPos
	CLC
	ADC.b #$10
	LDA.b #$00
	ADC.w !RAM_SMB3_Level_Player_IsAboveTopOfLevelFlag
	BEQ.b CODE_20E638
	INC.w $0583
	TYA
	STA.w SMB3_OAMBuffer[$06].YDisp,x
	STA.w SMB3_OAMBuffer[$08].YDisp,x
	STA.w SMB3_OAMBuffer[$0A].YDisp,x
	STA.w SMB3_OAMBuffer[$07].YDisp,x
	STA.w SMB3_OAMBuffer[$09].YDisp,x
	STA.w SMB3_OAMBuffer[$0B].YDisp,x
	LDA.b !RAM_SMB3_Level_Player_OnScreenYPos
	CLC
	ADC.b #$20
	LDA.b #$00
	ADC.w !RAM_SMB3_Level_Player_IsAboveTopOfLevelFlag
	BEQ.b CODE_20E638
	TYA
	STA.w SMB3_OAMBuffer[$00].YDisp,x
	STA.w SMB3_OAMBuffer[$02].YDisp,x
	STA.w SMB3_OAMBuffer[$04].YDisp,x
	STA.w SMB3_OAMBuffer[$01].YDisp,x
	STA.w SMB3_OAMBuffer[$03].YDisp,x
	STA.w SMB3_OAMBuffer[$05].YDisp,x
CODE_20E638:
	BRA.b CODE_20E671

CODE_20E63A:
	BNE.b CODE_20E648
	LDA.b !RAM_SMB3_Level_Player_OnScreenYPos
	CMP.b #$C0
	BCS.b CODE_20E648
	CMP.b #$B0
	BCS.b CODE_20E65E
	BCC.b CODE_20E671							; Note: This will always branch.

CODE_20E648:
	INC.w $0583
	TYA
	STA.w SMB3_OAMBuffer[$06].YDisp,x
	STA.w SMB3_OAMBuffer[$08].YDisp,x
	STA.w SMB3_OAMBuffer[$0A].YDisp,x
	STA.w SMB3_OAMBuffer[$07].YDisp,x
	STA.w SMB3_OAMBuffer[$09].YDisp,x
	STA.w SMB3_OAMBuffer[$0B].YDisp,x
CODE_20E65E:
	TYA
	STA.w SMB3_OAMBuffer[$00].YDisp,x
	STA.w SMB3_OAMBuffer[$02].YDisp,x
	STA.w SMB3_OAMBuffer[$04].YDisp,x
	STA.w SMB3_OAMBuffer[$01].YDisp,x
	STA.w SMB3_OAMBuffer[$03].YDisp,x
	STA.w SMB3_OAMBuffer[$05].YDisp,x
CODE_20E671:
	SEP.b #$10
	LDA.b $52
	CMP.b $53
	BNE.b CODE_20E67C
	INC
	BEQ.b CODE_20E681
CODE_20E67C:
	LDA.w $0571
	BNE.b CODE_20E684
CODE_20E681:
	BRL.w CODE_20E761

CODE_20E684:
	LDA.w !RAM_SMB3_Level_Layer2BGFromHeader
	CMP.b #$03
	BEQ.b CODE_20E681
	LDA.b #$00
	STA.l $7FC522
	STA.l $7FC523
	LDA.b $52
	SEC
	SBC.w $0210
	STA.w SMB3_OAMBuffer[$00].XDisp
	STA.w SMB3_OAMBuffer[$01].XDisp
	STA.w SMB3_OAMBuffer[$02].XDisp
	STA.w SMB3_OAMBuffer[$03].XDisp
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$04].XDisp
	STA.w SMB3_OAMBuffer[$05].XDisp
	STA.w SMB3_OAMBuffer[$06].XDisp
	STA.w SMB3_OAMBuffer[$07].XDisp
	LDA.b $53
	SEC
	SBC.w $0543
	PHA
	CMP.b #$F0
	BCC.b CODE_20E6C3
	LDA.b #$00
CODE_20E6C3:
	STA.w SMB3_OAMBuffer[$00].YDisp
	STA.w SMB3_OAMBuffer[$04].YDisp
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$01].YDisp
	STA.w SMB3_OAMBuffer[$05].YDisp
	PLA
	CLC
	ADC.b #$10
	STA.w SMB3_OAMBuffer[$02].YDisp
	STA.w SMB3_OAMBuffer[$06].YDisp
	CLC
	ADC.b #$07
	STA.w SMB3_OAMBuffer[$03].YDisp
	STA.w SMB3_OAMBuffer[$07].YDisp
	LDA.b #$FE
	STA.w SMB3_OAMBuffer[$00].Tile
	STA.w SMB3_OAMBuffer[$01].Tile
	STA.w SMB3_OAMBuffer[$02].Tile
	STA.w SMB3_OAMBuffer[$03].Tile
	STA.w SMB3_OAMBuffer[$04].Tile
	STA.w SMB3_OAMBuffer[$05].Tile
	STA.w SMB3_OAMBuffer[$06].Tile
	STA.w SMB3_OAMBuffer[$07].Tile
	LDA.b #$11
	STA.w SMB3_OAMBuffer[$00].Prop
	STA.w SMB3_OAMBuffer[$01].Prop
	STA.w SMB3_OAMBuffer[$02].Prop
	STA.w SMB3_OAMBuffer[$03].Prop
	STA.w SMB3_OAMBuffer[$04].Prop
	STA.w SMB3_OAMBuffer[$05].Prop
	STA.w SMB3_OAMBuffer[$06].Prop
	STA.w SMB3_OAMBuffer[$07].Prop
	LDA.b #$00
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot
	STA.w SMB3_OAMTileSizeBuffer[$02].Slot
	STA.w SMB3_OAMTileSizeBuffer[$03].Slot
	LDA.w $0571
	CMP.b #$10
	BNE.b CODE_20E742
CODE_20E72E:
	LDA.w SMB3_OAMBuffer[$06].YDisp
	DEC
	DEC
	STA.w SMB3_OAMBuffer[$06].YDisp
	STA.w SMB3_OAMBuffer[$07].YDisp
	LDA.b #$EE
	STA.w SMB3_OAMBuffer[$07].Tile
	LDA.b #$02
	BRA.b CODE_20E752

CODE_20E742:
	LDA.w !RAM_SMB3_Level_PreviousLevelDataLo				;\ Todo: Does !RAM_SMB3_Level_PreviousLevelDataLo have another purpose?
	CMP.b #$A4								;|
	BNE.b CODE_20E750							;|
	LDA.w !RAM_SMB3_Level_PreviousLevelDataHi				;|
	CMP.b #$B7								;|
	BEQ.b CODE_20E72E							;/
CODE_20E750:
	LDA.b #$00
CODE_20E752:
	STA.w SMB3_OAMTileSizeBuffer[$04].Slot
	STA.w SMB3_OAMTileSizeBuffer[$05].Slot
	STA.w SMB3_OAMTileSizeBuffer[$06].Slot
	STA.w SMB3_OAMTileSizeBuffer[$07].Slot
	BRL.w CODE_20E802

CODE_20E761:
	LDX.b $C4
	LDA.w !RAM_SMB3_Level_IsVerticalLevelFlag
	BEQ.b CODE_20E783
	LDY.b #$00
	LDA.w SMB3_OAMBuffer[$00].XDisp,x
	CMP.b #$F8
	BCS.b CODE_20E785
	LDY.b #$08
	LDA.w SMB3_OAMBuffer[$02].XDisp,x
	CMP.b #$F8
	BCS.b CODE_20E785
	LDY.b #$10
	LDA.w SMB3_OAMBuffer[$04].XDisp,x
	CMP.b #$F8
	BCS.b CODE_20E785
CODE_20E783:
	BRA.b CODE_20E802

CODE_20E785:
	STY.b $D8
	TXA
	CLC
	ADC.b $D8
	TAY
	LDA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$00].XDisp
	STA.w SMB3_OAMBuffer[$01].XDisp
	STA.w SMB3_OAMBuffer[$02].XDisp
	STA.w SMB3_OAMBuffer[$03].XDisp
	LDA.w SMB3_OAMBuffer[$00].YDisp,y
	STA.w SMB3_OAMBuffer[$00].YDisp
	LDA.w SMB3_OAMBuffer[$01].YDisp,y
	STA.w SMB3_OAMBuffer[$01].YDisp
	LDA.w SMB3_OAMBuffer[$06].YDisp,y
	STA.w SMB3_OAMBuffer[$02].YDisp
	LDA.w SMB3_OAMBuffer[$07].YDisp,y
	STA.w SMB3_OAMBuffer[$03].YDisp
	LDA.w SMB3_OAMBuffer[$00].Tile,y
	STA.w SMB3_OAMBuffer[$00].Tile
	LDA.w SMB3_OAMBuffer[$01].Tile,y
	STA.w SMB3_OAMBuffer[$01].Tile
	LDA.w SMB3_OAMBuffer[$06].Tile,y
	STA.w SMB3_OAMBuffer[$02].Tile
	LDA.w SMB3_OAMBuffer[$07].Tile,y
	STA.w SMB3_OAMBuffer[$03].Tile
	LDA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$00].Prop
	LDA.w SMB3_OAMBuffer[$01].Prop,y
	STA.w SMB3_OAMBuffer[$01].Prop
	LDA.w SMB3_OAMBuffer[$06].Prop,y
	STA.w SMB3_OAMBuffer[$02].Prop
	LDA.w SMB3_OAMBuffer[$07].Prop,y
	STA.w SMB3_OAMBuffer[$03].Prop
	TYA
	LSR
	LSR
	TAY
	LDA.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$06].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$07].Slot,y
	DEC
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot
	STA.w SMB3_OAMTileSizeBuffer[$02].Slot
	STA.w SMB3_OAMTileSizeBuffer[$03].Slot
CODE_20E802:
	RTL

;--------------------------------------------------------------------

SMB3_GetToadHouseChestItem:
.Main:
;$20E803
	LDA.b #$84
	SEC
	SBC.w $0602
	CMP.b #$04
	BCS.b CODE_20E853
	LDY.b #$00
	LDA.b !RAM_SMB3_Level_Player_XPosLo
	CMP.b #$60
	BCC.b CODE_20E81B
	INY
	CMP.b #$90
	BCC.b CODE_20E81B
	INY
CODE_20E81B:
	LDA.b #$80
	STA.w $052B
	LDA.b #$01
	STA.w $052A
	LSR
	STA.w $0528
	LDA.w DATA_218AA7,y
	STA.w $0529
	LDA.b #$14
	STA.w $037B
	STA.w $0564
	LDX.w !RAM_SMB3_Level_ToadHouseChestContentsIndex
	DEX
	CPX.b #SMB3_ToadHouseChestContents_RandomSuits-SMB3_ToadHouseChestContents
	BMI.b CODE_20E84D
	LDA.w !RAM_SMB3_Global_RandomByte02
	AND.b #$0F
	TAY
	LDA.w DATA_218A97,y
	CLC
	ADC.w DATA_218A92-$05,x
	TAX
CODE_20E84D:
	LDA.w SMB3_ToadHouseChestContents,x
	TAX
	INX
	RTL

CODE_20E853:
	LDX.b #$00
	RTL

;--------------------------------------------------------------------

CODE_20E856:
	LDA.w !RAM_SMB3_Level_Player_FreezePlayerTimer
	BEQ.b CODE_20E86C
	DEC.w !RAM_SMB3_Level_Player_FreezePlayerTimer
	JSL.l CODE_20E237
	LDA.w $05FC
	BEQ.b CODE_20E86B
	JSL.l CODE_23D10E
CODE_20E86B:
	RTL

CODE_20E86C:
	LDA.b !RAM_SMB3_Level_Player_DeathState
	BEQ.b CODE_20E874
	JSR.w CODE_20EE03
	RTL

CODE_20E874:
	LDA.w !RAM_SMB3_Level_WarpToCoinHeavenTimer
	BPL.b CODE_20E8A4
	LDA.b #$00
	STA.w !RAM_SMB3_Level_Player_ShowCarryingAnimationFlag
	STA.b !RAM_SMB3_Level_Player_XSpeed
	INC.w !RAM_SMB3_Level_WarpToCoinHeavenTimer
	LDA.w !RAM_SMB3_Level_WarpToCoinHeavenTimer
	STA.b !RAM_SMB3_Level_Player_YSpeed
	BNE.b CODE_20E88D
	INC.w !RAM_SMB3_Level_WarpToCoinHeavenTimer
CODE_20E88D:
	LDA.b !RAM_SMB3_Level_Player_YPosHi
	BPL.b CODE_20E8A4
	LDA.b #$01
	STA.b !RAM_SMB3_Level_Player_YPosHi
	LDA.b #$B0
	STA.b !RAM_SMB3_Level_Player_YPosLo
	LDA.b #$D0
	STA.w !RAM_SMB3_Level_WarpToCoinHeavenTimer
	LDA.b #$03
	STA.w $0414
	RTL

CODE_20E8A4:
	LDA.w !RAM_SMB3_Level_Player_SmokePuffAnimationTimer
	BEQ.b CODE_20E8AD
	JSR.w CODE_20EF39
	RTL

CODE_20E8AD:
	LDA.w !RAM_SMB3_Level_Player_FireFlowerGetPaletteAnimationTimer
	BEQ.b CODE_20E8C4
	CMP.b #$1F
	BNE.b CODE_20E8BC
	DEC.w !RAM_SMB3_Level_Player_FireFlowerGetPaletteAnimationTimer
	JMP.w CODE_20E8C4

CODE_20E8BC:
	JSL.l CODE_20E237
	DEC.w !RAM_SMB3_Level_Player_FireFlowerGetPaletteAnimationTimer
	RTL

CODE_20E8C4:
	LDA.w !RAM_SMB3_Level_Player_SizeChangeAnimationTimer
	BEQ.b CODE_20E8F3
	LSR
	LSR
	TAX
	LDY.b !RAM_SMB3_Level_Player_CurrentPowerUp
	BNE.b CODE_20E8D8
	STX.b $00
	LDA.b #$0B
	SEC
	SBC.b $00
	TAX
CODE_20E8D8:
	AND.b #$01
	PHP
	LDA.w DATA_21E974,x
	STA.b !RAM_SMB3_Level_Player_CurrentPose
	PLP
	LDA.b !RAM_SMB3_Level_Player_CurrentPowerUp
	PHA
	LDA.b #$01
	STA.b !RAM_SMB3_Level_Player_CurrentPowerUp
	JSL.l CODE_20E237
	PLA
	STA.b !RAM_SMB3_Level_Player_CurrentPowerUp
	DEC.w !RAM_SMB3_Level_Player_SizeChangeAnimationTimer
	RTL

CODE_20E8F3:
	LDA.w !RAM_SMB3_Level_Player_GoalWalkAnimationTimer
	BEQ.b CODE_20E928
	LDA.w !RAM_SMB3_Level_Player_InKuriboShoeFlag
	BEQ.b CODE_20E905
	STZ.w !RAM_SMB3_Level_Player_InKuriboShoeFlag
	LDA.b #$18
	STA.w !RAM_SMB3_Level_Player_SmokePuffAnimationTimer
CODE_20E905:
	LDA.b #$41
	STA.b $BD
	JSL.l CODE_20E237
	LDA.b $A6
	BNE.b CODE_20E928
	DEC.w !RAM_SMB3_Level_Player_GoalWalkAnimationTimer
	LDA.b #$14
	STA.b !RAM_SMB3_Level_Player_XSpeed
	JSR.w CODE_20EB60
	LDA.w !RAM_SMB3_Level_Player_IsTanookiStatueTimer
	BEQ.b CODE_20E927
	STZ.w !RAM_SMB3_Level_Player_IsTanookiStatueTimer
	JSL.l CODE_23C463
CODE_20E927:
	RTL

CODE_20E928:
	LDA.w !RAM_SMB3_Level_Player_BoardAirshipAnimationState
	BNE.b CODE_20E930
	BRL.w CODE_20EA0C

CODE_20E930:
	PHA
	LDA.b #$00
	STA.b $25
	INC.w $0210
	BNE.b CODE_20E93F
	INC.b $12
	INC.w $0211
CODE_20E93F:
	REP.b #$20
	LDA.w $0210
	LSR
	LSR
	STA.w $0212
	SEP.b #$20
	LDA.b $12
	BNE.b CODE_20E956
	LDA.w $0210
	CMP.b #$60
	BCC.b CODE_20E970
CODE_20E956:
	INC.w $0550
	LDA.w $0550
	CLC
	ADC.w $055C
	BCC.b CODE_20E970
	INC.w $0216
	LDA.b $75
	SEC
	SBC.b #$01
	STA.b $75
	BCS.b CODE_20E970
	DEC.b $5A
CODE_20E970:
	PLA
	JSR.w CODE_20E975
	RTL

CODE_20E975:
	JSL.l SMB3_ExecutePtr_Absolute

DATA_20E979:
	dw CODE_20E983
	dw CODE_20E984
	dw CODE_20E9A2
	dw CODE_20E9CD
	dw CODE_20E9E8

CODE_20E983:
	RTS

;--------------------------------------------------------------------

CODE_20E984:
	LDA.b #$EF
	STA.w $0543
	LDA.w $0210
	CMP.b #$80
	BCC.b CODE_20E997
	LDA.b #$A0
	STA.b !RAM_SMB3_Level_Player_YSpeed
	INC.w !RAM_SMB3_Level_Player_BoardAirshipAnimationState
CODE_20E997:
	LDA.b #$01
	STA.b $BD
	LDA.b #$20
	STA.b !RAM_SMB3_Level_Player_XSpeed
	JMP.w CODE_20EB60

;--------------------------------------------------------------------

CODE_20E9A2:
	LDA.b !RAM_SMB3_Level_Player_XPosLo
	CMP.b #$36
	BCC.b CODE_20E9CA
	JSL.l CODE_23DEA3
	JSL.l CODE_23DE53
	LDA.b !RAM_SMB3_Level_Player_YSpeed
	CLC
	ADC.b #$04
	STA.b !RAM_SMB3_Level_Player_YSpeed
	CMP.b #$0F
	BMI.b CODE_20E9BE
	INC.w !RAM_SMB3_Level_Player_BoardAirshipAnimationState
CODE_20E9BE:
	LDY.b !RAM_SMB3_Level_Player_CurrentPowerUp
	LDA.w DATA_21E9E5,y
	STA.b !RAM_SMB3_Level_Player_CurrentPose
	JSL.l CODE_20E237
	RTS

CODE_20E9CA:
	JMP.w CODE_20EB60

;--------------------------------------------------------------------

CODE_20E9CD:
	LDA.b #$02
	STA.b $BD
	LDA.b #$EC
	STA.b !RAM_SMB3_Level_Player_YSpeed
	JSR.w CODE_20EB60
	LDA.w $0216
	CMP.b #$70
	BCC.b CODE_20E9E7
	LDA.b #$03
	STA.w $0414
	INC.w !RAM_SMB3_Level_Player_BoardAirshipAnimationState
CODE_20E9E7:
	RTS

;--------------------------------------------------------------------

CODE_20E9E8:
	LDA.w $05FC
	BEQ.b CODE_20EA0B
	JSL.l CODE_23DEA3
	LDA.b !RAM_SMB3_Level_Player_YSpeed
	BMI.b CODE_20E9FD
	LDA.b #$00
	STA.w !RAM_SMB3_Level_Player_BoardAirshipAnimationState
	STA.w !RAM_SMB3_Level_FreezeTimeLimitFlag
CODE_20E9FD:
	LDA.b !RAM_SMB3_Level_Player_YSpeed
	CLC
	ADC.b #$04
	STA.b !RAM_SMB3_Level_Player_YSpeed
	JSL.l CODE_23CFCA
	JSR.w CODE_20E9BE
CODE_20EA0B:
	RTS

CODE_20EA0C:
	LDA.w $07BE
	CMP.b #$03
	BMI.b CODE_20EA31
	CMP.b #$07
	BMI.b CODE_20EA22
	LDA.b !RAM_SMB3_Level_Player_YPosLo
	CLC
	ADC.b #$02
	STA.b !RAM_SMB3_Level_Player_YPosLo
	BCC.b CODE_20EA22
	INC.b !RAM_SMB3_Level_Player_YPosHi
CODE_20EA22:
	LDY.b !RAM_SMB3_Level_Player_CurrentPowerUp
	LDA.w DATA_21E9E5,y
	STA.b !RAM_SMB3_Level_Player_CurrentPose
	JSL.l CODE_20E237
	JSR.w CODE_20EADC
	RTL

CODE_20EA31:
	LDA.w $0571
	BPL.b CODE_20EA3A
	JSR.w CODE_20EBBA
	RTL

CODE_20EA3A:
	BNE.b CODE_20EA3F
	JMP.w CODE_20EADB

CODE_20EA3F:
	LDA.w $0510
	BNE.b CODE_20EA70
	LDA.w $0571
	AND.b #$1C
	CMP.b #$14
	BNE.b CODE_20EA54
	LDA.b #$05
	STA.w $0377
	BRA.b CODE_20EA65

CODE_20EA54:
	LSR
	LSR
	STA.w $0414
	CMP.b #$01
	BNE.b CODE_20EA65
	INC.b $14
	LDA.b #$00
	STA.w $0713
	RTL

CODE_20EA65:
	LDA.w $0571
	AND.b #$03
	ORA.b #$80
	STA.w $0571
	RTL

CODE_20EA70:
	LDA.w $0571
	AND.b #$03
	CMP.b #$02
	BPL.b CODE_20EAB2
	LDA.w $0510
	CMP.b #$10
	BMI.b CODE_20EAB1
	PHA
	JSR.w CODE_20EEF2
	PLA
	CMP.b #$24
	BPL.b CODE_20EAB1
	LDX.b $C4
	LDA.b #$F0
	STA.w SMB3_OAMBuffer[$00].YDisp,x
	STA.w SMB3_OAMBuffer[$01].YDisp,x
	STA.w SMB3_OAMBuffer[$02].YDisp,x
	STA.w SMB3_OAMBuffer[$03].YDisp,x
	STA.w SMB3_OAMBuffer[$04].YDisp,x
	STA.w SMB3_OAMBuffer[$05].YDisp,x
	STA.w SMB3_OAMBuffer[$06].YDisp,x
	STA.w SMB3_OAMBuffer[$07].YDisp,x
	STA.w SMB3_OAMBuffer[$08].YDisp,x
	STA.w SMB3_OAMBuffer[$09].YDisp,x
	STA.w SMB3_OAMBuffer[$0A].YDisp,x
	STA.w SMB3_OAMBuffer[$0B].YDisp,x
CODE_20EAB1:
	RTL

CODE_20EAB2:
	JSR.w CODE_20EF15
	LDA.w $0510
	CMP.b #$10
	BCS.b CODE_20EADA
	LDA.b $C4
	LDX.b !RAM_SMB3_Level_Player_YSpeed
	BPL.b CODE_20EAC5
	CLC
	ADC.b #$18
CODE_20EAC5:
	TAX
	LDA.b #$F0
	STA.w SMB3_OAMBuffer[$00].YDisp,x
	STA.w SMB3_OAMBuffer[$01].YDisp,x
	STA.w SMB3_OAMBuffer[$02].YDisp,x
	STA.w SMB3_OAMBuffer[$03].YDisp,x
	STA.w SMB3_OAMBuffer[$04].YDisp,x
	STA.w SMB3_OAMBuffer[$05].YDisp,x
CODE_20EADA:
	RTL

CODE_20EADB:
	RTL

CODE_20EADC:
	LDY.b #$40
	LDX.b !RAM_SMB3_Level_Player_CurrentPowerUp
	LDA.b $BD
	PHP
	LDA.w DATA_218AB1,x
	PLP
	BNE.b CODE_20EAEC
	LDA.w DATA_218AAA,x
CODE_20EAEC:
	CLC
	ADC.b !RAM_SMB3_Level_Player_OnScreenXPos
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$02].XDisp,y
	STA.w SMB3_OAMBuffer[$03].XDisp,y
	LDA.b !RAM_SMB3_Level_Player_YPosHi
	STA.b $00
	LDA.w DATA_218AB8,x
	BPL.b CODE_20EB09
	DEC.b $00
CODE_20EB09:
	CLC
	ADC.b !RAM_SMB3_Level_Player_OnScreenYPos
	BCC.b CODE_20EB10
	INC.b $00
CODE_20EB10:
	LDX.b $00
	CPX.b #$01
	BPL.b CODE_20EB5F
	CMP.b #$F0
	BCS.b CODE_20EB5F
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	STA.w SMB3_OAMBuffer[$02].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$01].YDisp,y
	STA.w SMB3_OAMBuffer[$03].YDisp,y
	LDA.b #$B0
	STA.w SMB3_OAMBuffer[$00].Tile,y
	STA.w SMB3_OAMBuffer[$02].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$01].Tile,y
	STA.w SMB3_OAMBuffer[$03].Tile,y
	JSL.l CODE_27AA8E
	ASL
	ORA.b #$20
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$01].Prop,y
	ORA.b #$40
	STA.w SMB3_OAMBuffer[$02].Prop,y
	STA.w SMB3_OAMBuffer[$03].Prop,y
	TYA
	LSR
	LSR
	TAY
	LDA.b #$00
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$02].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$03].Slot,y
CODE_20EB5F:
	RTS

CODE_20EB60:
	LDA.b $BD
	AND.b #$02
	BEQ.b CODE_20EB72
	JSL.l CODE_23DEA3
	LDY.b !RAM_SMB3_Level_Player_CurrentPowerUp
	LDA.w DATA_2199C7,y
	JMP.w CODE_20EBA7

CODE_20EB72:
	LDA.b $BD
	AND.b #$01
	TAY
	LDA.w DATA_218ABF,y
	ORA.b $BD
	STA.b $BD
	JSL.l CODE_23DE53
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$06
	LSR
	STA.b $00
CODE_20EB89:
	LDY.w !RAM_SMB3_Level_Player_InKuriboShoeFlag
	BEQ.b CODE_20EB9D
	ASL
	AND.b #$02
	LDY.b !RAM_SMB3_Level_Player_CurrentPowerUp
	BEQ.b CODE_20EB97
	LDY.b #$01
CODE_20EB97:
	CLC
	ADC.w DATA_21E9A4,y
	BNE.b CODE_20EBA7
CODE_20EB9D:
	LDA.b !RAM_SMB3_Level_Player_CurrentPowerUp
	ASL
	ASL
	ORA.b $00
	TAY
	LDA.w DATA_21E958,y
CODE_20EBA7:
	STA.b !RAM_SMB3_Level_Player_CurrentPose
	JSL.l CODE_20E237
	RTS

DATA_20EBAE:
	dw CODE_20EBD5
	dw CODE_20EBD6
	dw CODE_20EBF1
	dw CODE_20EC17
	dw CODE_20EC6C
	dw CODE_20EC7A

CODE_20EBBA:							; Note: Something related to exiting a pipe.
	LDA.b #$08
	STA.w $1A45
	LDA.w $0377
	ASL
	TAY
	PHB
	PHK
	PLB
	LDA.w DATA_20EBAE,y
	STA.b !RAM_SMB3_Global_ScratchRAM00
	LDA.w DATA_20EBAE+$01,y
	STA.b !RAM_SMB3_Global_ScratchRAM01
	PLB
	JMP.w (!RAM_SMB3_Global_ScratchRAM00)

CODE_20EBD5:
	RTS

CODE_20EBD6:
	LDA.b #$83
	STA.w $0571
	JSR.w CODE_20EF15
	LDA.w $0510
	BNE.b CODE_20EBE6
	JMP.w CODE_20EF2D

CODE_20EBE6:
	CMP.b #$20
	LDA.b $C4
	BCC.b CODE_20EBF0
	JSL.l CODE_20EAC5
CODE_20EBF0:
	RTS

CODE_20EBF1:
	LDA.b #$82
	STA.w $0571
	STA.b $A6
	LDA.b #$30
	STA.b !RAM_SMB3_Level_Player_YSpeed
	JSL.l CODE_23DEA3
	JSR.w CODE_20EF15
	LDA.w $0510
	BNE.b CODE_20EC16
	LDA.b #$00
	STA.w !RAM_SMB3_Level_Player_DuckingFlag
	STA.w $0571
	STA.b !RAM_SMB3_Level_Player_XSpeed
	LDA.b #$38
	STA.b !RAM_SMB3_Level_Player_YSpeed
CODE_20EC16:
	RTS

CODE_20EC17:
	LDA.b #$80
	STA.w $0571
	LDA.b #$40
	STA.b $BD
	LDY.b #$00
CODE_20EC22:
	LDA.b !RAM_SMB3_Global_FrameCounter
	LSR
	BCC.b CODE_20EC56
	LDA.w DATA_218AC5,y
	STA.b $25
	LDA.w $0210
	LDX.b $12
	BNE.b CODE_20EC37
	CMP.b #$80
	BCC.b CODE_20EC56
CODE_20EC37:
	CLC
	ADC.w DATA_218AC7,y
	STA.w $0210
	STA.w $0212
	LDA.w DATA_218AC9,y
	ADC.b $12
	STA.b $12
	STA.w $0211
	LSR
	STA.w $0213
	LDA.w $0212
	ROR
	STA.w $0212
CODE_20EC56:
	JSR.w CODE_20EEF2
	LDX.b $C4
	LDA.b #$F0
	STA.w SMB3_OAMBuffer[$04].YDisp,x
	STA.w SMB3_OAMBuffer[$05].YDisp,x
	LDA.w $0510
	BNE.b CODE_20EC6B
	JSR.w CODE_20EF2D
CODE_20EC6B:
	RTS

CODE_20EC6C:
	LDA.b #$81
	STA.w $0571
	LDA.b #$00
	STA.b $BD
	LDY.b #$01
	JMP.w CODE_20EC22

CODE_20EC7A:
	LDA.w !RAM_SMB3_Level_IsVerticalLevelFlag
	BEQ.b CODE_20EC82
	JMP.w CODE_20ED06

CODE_20EC82:
	LDA.b #$FE
	LDX.b #$01
	LDY.b !RAM_SMB3_Level_Player_YSpeed
	BMI.b CODE_20EC8D
	LDA.b #$02
	DEX
CODE_20EC8D:
	STA.w $0780
	CLC
	ADC.w $0216
	STA.w $0216
	STA.w $0543
	LDY.b !RAM_SMB3_Level_Player_YSpeed
	BPL.b CODE_20ECA4
	BCS.b CODE_20ECBF
	LDA.b #$00
	BEQ.b CODE_20ECAA
CODE_20ECA4:
	CMP.b #$EF
	BCC.b CODE_20ECBF
	LDA.b #$EF
CODE_20ECAA:
	STA.w $0216
	LDA.b #$01
	STA.w $0377
	LDY.b !RAM_SMB3_Level_Player_YSpeed
	BMI.b CODE_20ECB9
	INC.w $0377
CODE_20ECB9:
	JSL.l CODE_23C227
	BRA.b CODE_20ECE8

CODE_20ECBF:
	LDA.w DATA_218ACB,x
	STA.b $09
	LDA.b #$08
	STA.b $0A
	JSL.l CODE_23D2B6
	SEC
	SBC.b #$B3
	CMP.b #$02
	BCC.b CODE_20ECE8
	LDA.b #$10
	CPX.b #$00
	BEQ.b CODE_20ECDD
	DEC.b !RAM_SMB3_Level_Player_YPosHi
	LDA.b #$F0
CODE_20ECDD:
	CLC
	ADC.b !RAM_SMB3_Level_Player_YPosLo
	AND.b #$F0
	STA.b !RAM_SMB3_Level_Player_YPosLo
	BCC.b CODE_20ECE8
	INC.b !RAM_SMB3_Level_Player_YPosHi
CODE_20ECE8:
	LDA.w $0216
	LSR
	LSR
	STA.w $0218
	LDA.w $0216
	SEC
	SBC.w $0218
	STA.w $0218
	LDA.w $034F
	BEQ.b CODE_20ED05
	LDA.w $0216
	STA.w $0218
CODE_20ED05:
	RTS

CODE_20ED06:
	LDA.w $0571
	AND.b #$03
	PHA
	TAY
	LDX.b #$00
	CPY.b #$02
	BMI.b CODE_20ED2F
	LDX.b #$12
	LDA.w DATA_218ADD,y
	BPL.b CODE_20ED27
	LDA.b !RAM_SMB3_Level_Player_OnScreenYPos
	CMP.b #$68
	LDA.b #$00
	BCC.b CODE_20ED32
	DEC.b !RAM_SMB3_Level_Player_XPosHi,x
	JMP.w CODE_20ED2F

CODE_20ED27:
	LDA.b !RAM_SMB3_Level_Player_OnScreenYPos
	CMP.b #$38
	LDA.b #$00
	BCS.b CODE_20ED32
CODE_20ED2F:
	LDA.w DATA_218ADD,y
CODE_20ED32:
	CLC
	ADC.b !RAM_SMB3_Level_Player_XPosLo,x
	AND.b #$FE
	STA.b !RAM_SMB3_Level_Player_XPosLo,x
	BCC.b CODE_20ED3D
	INC.b $43,x
CODE_20ED3D:
	AND.b #$0F
	TAX
	CPY.b #$02
	BMI.b CODE_20ED95
	LDA.b !RAM_SMB3_Level_Player_XPosLo
	AND.b #$F0
	ORA.b #$08
	STA.b !RAM_SMB3_Level_Player_XPosLo
	LDA.b #$01
	STA.b $25
	LDA.w DATA_218ADD,y
	BPL.b CODE_20ED5A
	DEC.b $25
	DEC.w $0542
CODE_20ED5A:
	STA.w $0780
	CLC
	ADC.w $0543
	STA.w $0543
	BCC.b CODE_20ED69
	INC.w $0542
CODE_20ED69:
	STA.w $0216
	LDY.w $0542
	STY.w $0217
	STY.b $13
	STY.w $0219
	REP.b #$20
	LDA.w $0216
	LSR
	LSR
	STA.w $0218
	LDA.w $0216
	SEC
	SBC.w $0218
	STA.w $0218
	SEP.b #$20
	LDA.b !RAM_SMB3_Level_Player_YPosLo
	SEC
	SBC.w $0543
	STA.b !RAM_SMB3_Level_Player_OnScreenYPos
CODE_20ED95:
	PLA
	CPX.b #$00
	BNE.b CODE_20EDE0
	ASL
	ASL
	LDX.b #$01
	TAY
CODE_20ED9F:
	LDA.w DATA_218ACD,y
	STA.b $09
	LDA.w DATA_218ACD+$01,y
	STA.b $0A
	JSL.l CODE_23D2B6
	STA.b $00
	SEC
	SBC.b #$92
	CMP.b #$02
	BCS.b CODE_20EDB9
	JMP.w CODE_20EDE1

CODE_20EDB9:
	LDA.b $00
	CMP.b #$9E
	BNE.b CODE_20EDC2
	JMP.w CODE_20EDE1

CODE_20EDC2:
	LDA.b $00
	SEC
	SBC.b #$50
	CMP.b #$04
	BCS.b CODE_20EDDB
	STX.b $00
	LDA.w $0571
	AND.b #$82
	EOR.b #$02
	ORA.b $00
	STA.w $0571
	LDX.b #$00
CODE_20EDDB:
	INY
	INY
	DEX
	BPL.b CODE_20ED9F
CODE_20EDE0:
	RTS

CODE_20EDE1:
	LDA.w $0571
	AND.b #$03
	TAY
	BNE.b CODE_20EDF0
	LDA.b !RAM_SMB3_Level_Player_XPosLo
	CLC
	ADC.b #$10
	STA.b !RAM_SMB3_Level_Player_XPosLo
CODE_20EDF0:
	LDA.w DATA_218AE1,y
	STA.w $0377
	JSL.l CODE_23C227
	RTS

DATA_20EDFB:					; Info: 
	dw CODE_20EBD5				; 00 - Player not dead
	dw CODE_20EE16				; 01 - Normal death
	dw CODE_20EE3F				; 02 - Fell down pit death
	dw CODE_20EE5A				; 03 - Time up death

CODE_20EE03:
	LDA.b !RAM_SMB3_Level_Player_DeathState
	ASL
	TAX
	LDA.l DATA_20EDFB,x
	STA.b $00
	LDA.l DATA_20EDFB+$01,x
	STA.b $01
	JMP.w ($0000)

CODE_20EE16:
	LDA.w !RAM_SMB3_Level_Player_IsAboveTopOfLevelFlag
	BNE.b CODE_20EE23
	LDA.b !RAM_SMB3_Level_Player_OnScreenYPos
	AND.b #$F0
	CMP.b #$B0
	BEQ.b CODE_20EE2E
CODE_20EE23:
	LDA.w $0510
	BNE.b CODE_20EE2B
	JMP.w CODE_20EEDF

CODE_20EE2B:
	JMP.w CODE_20EEE9

CODE_20EE2E:
	LDA.w $0510
	BNE.b CODE_20EE38
	LDA.b #$40
	STA.w $0510
CODE_20EE38:
	CMP.b #$01
	BNE.b CODE_20EE3E
	BEQ.b CODE_20EE44
CODE_20EE3E:
	RTS

CODE_20EE3F:
	LDA.w $0510
	BNE.b CODE_20EE4B
CODE_20EE44:
	INC.b $14
	LDA.b #$01
	STA.w $0713
CODE_20EE4B:
	RTS

; Note: Processing Time Up animation
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) == $0000 ;[BR] Moved these to the new empty space
TimeUpLetterTiles:
	db $00,$02,$04,$06,$FF,$2C,$2E
.End:

TimeUpLetterXDisp:
	db $60,$68,$70,$78,$80,$88,$90
endif

CODE_20EE5A:
	LDA.w !RAM_SMB3_Level_Player_IsAboveTopOfLevelFlag
	BNE.b CODE_20EE67
	LDA.b !RAM_SMB3_Level_Player_OnScreenYPos
	AND.b #$F0
	CMP.b #$B0
	BEQ.b CODE_20EE72
CODE_20EE67:
	LDA.w $0510
	BNE.b CODE_20EE6F
	JMP.w CODE_20EEDF

CODE_20EE6F:
	JMP.w CODE_20EEE9

CODE_20EE72:
	DEC.b $53
	LDA.b $52
	CMP.b #$60
	BCC.b CODE_20EE84
	CLC
	ADC.b $53
	STA.b $52
	LDA.b #$70
	STA.w $0510
CODE_20EE84:
	LDA.w $0510
	BEQ.b CODE_20EE44

if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR] Upload all letters of DynamicDoorAndLetters to VRAM
	LDA.b $53							;\ Make it so it only runs this block a few times before it shows on screen.
	CMP.b #$F8							;| (Saves processing time)
	BCC.b +								;/
	CMP.b #$FC							;\ Uploads one row at a time.
	BCC.b ++							;/ (Due to loading limitations)
	
	; First row
	REP.b #$20
	LDA.w #SMB3_Bank42Graphics_Sprite_DynamicDoorAndLetters+$0400
	STA.b !RAM_SMB3_Global_ScratchRAM0D
	LDX.b #SMB3_Bank42Graphics_Sprite_DynamicDoorAndLetters+$0400>>16
	STX.b !RAM_SMB3_Global_ScratchRAM0F
	LDA.w #$0200
	STA.b !RAM_SMB3_Global_ScratchRAM0B
	LDA.w #$C400/2
	JSR.w SMB3_CopyOfDMADataToVRAM_Main
	SEP.b #$20
	BRA.b +
	
++:	; Second row
	REP.b #$20
	LDA.w #SMB3_Bank42Graphics_Sprite_DynamicDoorAndLetters+$0600
	STA.b !RAM_SMB3_Global_ScratchRAM0D
	LDX.b #SMB3_Bank42Graphics_Sprite_DynamicDoorAndLetters+$0600>>16
	STX.b !RAM_SMB3_Global_ScratchRAM0F
	LDA.w #$0200
	STA.b !RAM_SMB3_Global_ScratchRAM0B
	LDA.w #$C600/2
	JSR.w SMB3_CopyOfDMADataToVRAM_Main
	SEP.b #$20
+:
else
	LDA.b #$A2									;\ Note: this seems to upload the "TIME" in Time Up onto the player graphic slots.
	STA.b !RAM_SMB3_Level_Player_CurrentPose	;|
	JSL.l CODE_22E000							;/
endif

	;LDX.b #$06 (Table size - 1)
	LDX.b #TimeUpLetterTiles_End-TimeUpLetterTiles-1
	LDY.b $C4									; OAM offset
CODE_20EE95:
	LDA.l TimeUpLetterTiles,x
	CMP.b #$FF
	BEQ.b CODE_20EEB3
	STA.w SMB3_OAMBuffer[$00].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$01].Tile,y
	LDA.b $52
	CMP.b #$E0
	BCS.b CODE_20EEB3
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$01].YDisp,y
CODE_20EEB3:
	LDA.l TimeUpLetterXDisp,x
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	LDA.b #$32
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$01].Prop,y
	PHY
	TYA
	LSR
	LSR
	TAY
	LDA.b #$00
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	PLY
	INY
	INY
	INY
	INY
	INY
	INY
	INY
	INY
	DEX
	BPL.b CODE_20EE95
	RTS

CODE_20EEDF:
	INC.b !RAM_SMB3_Level_Player_YSpeed
	INC.b !RAM_SMB3_Level_Player_YSpeed
	LDX.b #$00
	JSL.l CODE_23DEA3
CODE_20EEE9:
	LDA.b #$96
	STA.b !RAM_SMB3_Level_Player_CurrentPose
	JSL.l CODE_20E237
	RTS

CODE_20EEF2:
	LDA.w $0571
	AND.b #$01
	TAY
	LDA.w DATA_218AC1,y
	STA.b !RAM_SMB3_Level_Player_XSpeed
	JSL.l CODE_23DE53
	DEC.b !RAM_SMB3_Level_Player_YPosLo
	DEC.b !RAM_SMB3_Level_Player_YPosLo
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$0C
	LSR
	LSR
	STA.b $00
	JSR.w CODE_20EB89
	INC.b !RAM_SMB3_Level_Player_YPosLo
	INC.b !RAM_SMB3_Level_Player_YPosLo
	RTS

CODE_20EF15:
	LDA.w $0571
	AND.b #$01
	TAY
	LDA.w DATA_218AC3,y
	STA.b !RAM_SMB3_Level_Player_YSpeed
	JSL.l CODE_23DEA3
	JSL.l CODE_23DDBB
	JSL.l CODE_20E237
	RTS

CODE_20EF2D:
	LDA.b #$00
	STA.w $0571
	STA.b !RAM_SMB3_Level_Player_XSpeed
	STA.b !RAM_SMB3_Level_Player_YSpeed
	STA.b $A6
	RTS

CODE_20EF39:
	DEC.w !RAM_SMB3_Level_Player_SmokePuffAnimationTimer
	AND.b #$0C
	LSR
	LSR
	TAY
	LDA.w DATA_218AE5,y
	STA.b $01
	REP.b #$10
	LDY.b $C4
	LDA.b #$C2
	STA.b $00
CODE_20EF4E:
	LDA.b !RAM_SMB3_Level_Player_OnScreenYPos
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$01].YDisp,y
	LDA.w $0070
	SEC
	SBC.w $0216
	LDA.w $0055
	SBC.w $0217
	BPL.b CODE_20EF73
	LDA.b #$F0
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	STA.w SMB3_OAMBuffer[$01].YDisp,y
CODE_20EF73:
	LDA.b $01
	STA.w SMB3_OAMBuffer[$00].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$01].Tile,y
	PHX
	LDA.b #$20
	LDX.w !RAM_SMB3_Level_Player_BehindLayer1Timer
	BEQ.b CODE_20EF86
	LDA.b #$10
CODE_20EF86:
	ORA.b $00
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$01].Prop,y
	AND.b #$80
	BEQ.b CODE_20EFA0
	LDA.w SMB3_OAMBuffer[$00].Tile,y
	PHA
	LDA.w SMB3_OAMBuffer[$01].Tile,y
	STA.w SMB3_OAMBuffer[$00].Tile,y
	PLA
	STA.w SMB3_OAMBuffer[$01].Tile,y
CODE_20EFA0:
	PLX
	LDA.b !RAM_SMB3_Level_Player_XPosLo
	SEC
	SBC.w $0210
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	LDA.b $00
	AND.b #$F0
	BEQ.b CODE_20EFBF
	LDA.w SMB3_OAMBuffer[$00].XDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$01].XDisp,y
CODE_20EFBF:
	PHY
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b #$00
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	PLY
	INY
	INY
	INY
	INY
	INY
	INY
	INY
	INY
	LDA.b $00
	SEC
	SBC.b #$C0
	STA.b $00
	BCC.b CODE_20EFE5
	JMP.w CODE_20EF4E

CODE_20EFE5:
	SEP.b #$10
	RTS

if !Define_Global_ROMToAssemble&(!ROM_SMB3_U|!ROM_SMB3_E|!ROM_SMB3_J) == $00
%FREE_BYTES(NULLROM, 24, $FF)
endif

;--------------------------------------------------------------------

	%ROUTINE_SMB3_VBlankRoutine(NULLROM)					; $20F000
	%ROUTINE_SMB3_IRQRoutine(NULLROM)					; $20F304

;--------------------------------------------------------------------

; Note: Seems to be the routine that initializes the values in the status bar.

CODE_20F58A:
	JSR.w CODE_20F60D
CODE_20F58D:
	LDA.w !RAM_SMB3_Level_Player_CurrentCharacter
	BEQ.b CODE_20F594
	LDA.b #SMB3_IndividualPlayerData[$01].ReserveSlots-SMB3_IndividualPlayerData[$00].ReserveSlots
CODE_20F594:
	STA.b $00
	LDA.b #$02
	STA.b $01
CODE_20F59A:
	LDY.b $00
	JSL.l CODE_20F5A7
	INC.b $00
	DEC.b $01
	BPL.b CODE_20F59A
	RTL

CODE_20F5A7:
	STY.b $02
	LDA.w SMB3_IndividualPlayerData[$00].CardSlots,y
	ASL
	TAX
	LDY.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	REP.b #$20
	LDA.w DATA_21CF0D,x
	STA.w SMB3_StripeImageUploadTable[$02].LowByte,y
	LDA.w DATA_21CF15,x
	STA.w SMB3_StripeImageUploadTable[$03].LowByte,y
	LDA.w DATA_21CF1D,x
	STA.w SMB3_StripeImageUploadTable[$06].LowByte,y
	LDA.w DATA_21CF25,x
	STA.w SMB3_StripeImageUploadTable[$07].LowByte,y
	SEP.b #$20
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	BEQ.b CODE_20F5D4
	LDX.b #$23
CODE_20F5D4:
	LDA.b $02
	STX.b $02
	SEC
	SBC.b $02
	TAX
	LDA.w DATA_21CF2D,x
	STA.w SMB3_StripeImageUploadTable[$00].HighByte,y
	LDA.w DATA_21CF30,x
	STA.w SMB3_StripeImageUploadTable[$04].HighByte,y
	LDA.b #$0F
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,y
	STA.w SMB3_StripeImageUploadTable[$04].LowByte,y
	LDA.b #$00
	STA.w SMB3_StripeImageUploadTable[$01].LowByte,y
	STA.w SMB3_StripeImageUploadTable[$05].LowByte,y
	LDA.b #$03
	STA.w SMB3_StripeImageUploadTable[$01].HighByte,y
	STA.w SMB3_StripeImageUploadTable[$05].HighByte,y
	LDA.b #$FF
	STA.w SMB3_StripeImageUploadTable[$08].LowByte,y
	TYA
	CLC
	ADC.b #$10
	STA.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	RTL

;--------------------------------------------------------------------

CODE_20F60D:
	PHA
	LDY.w !RAM_SMB3_Level_Player_CurrentCharacter
	BEQ.b CODE_20F615
	LDY.b #SMB3_IndividualPlayerData[$01].ReserveSlots-SMB3_IndividualPlayerData[$00].ReserveSlots
CODE_20F615:
	LDA.w SMB3_IndividualPlayerData[$00].CardSlots,y
	BEQ.b CODE_20F630
	INY
	CPY.b #$03
	BEQ.b CODE_20F623
	CPY.b #SMB3_IndividualPlayerData[$01].ReserveSlots-SMB3_IndividualPlayerData[$00].ReserveSlots+$03
	BNE.b CODE_20F615
CODE_20F623:
	LDA.w $1D9A,y
	STA.w $1D99,y
	LDA.w $1D9B,y
	STA.w $1D9A,y
	DEY
CODE_20F630:
	PLA
	STA.w SMB3_IndividualPlayerData[$00].CardSlots,y
	RTL

;--------------------------------------------------------------------

SMB3_AddNewItemToReserveInventory:
.Main:
;$20F635
	PHA
	LDY.w !RAM_SMB3_Level_Player_CurrentCharacter
	BEQ.b CODE_20F63D
	LDY.b #SMB3_IndividualPlayerData[$01].ReserveSlots-SMB3_IndividualPlayerData[$00].ReserveSlots
CODE_20F63D:
	LDX.b #SMB3_IndividualPlayerData[$00].CardSlots-SMB3_IndividualPlayerData[$00].ReserveSlots-$01
CODE_20F63F:
	LDA.w SMB3_IndividualPlayerData[$00].ReserveSlots,y
	BEQ.b CODE_20F648
	INY
	DEX
	BNE.b CODE_20F63F
CODE_20F648:
	PLA
	STA.w SMB3_IndividualPlayerData[$00].ReserveSlots,y
	RTL

;--------------------------------------------------------------------

CODE_20F64D:
	PHD
	BRL.w CODE_20F94C

;--------------------------------------------------------------------

CODE_20F651:
	PHB
	LDA.b #SMB3_MainDataBank_Main>>16
	PHA
	PLB
	PHD
	LDA.b #DMA[$00].Parameters>>8
	XBA
	LDA.b #DMA[$00].Parameters
	TCD
	LDA.b #$80
	STA.w !REGISTER_VRAMAddressIncrementValue
	REP.b #$10
	LDX.w #(!REGISTER_WriteToVRAMPortLo&$0000FF<<8)+$01
	STX.b DMA[$00].Parameters
	LDA.w $0238
	BNE.b CODE_20F671
	JMP.w CODE_20F704

CODE_20F671:
	STA.b DMA[$00].SourceBank
	LDX.w #$6000
	STX.w !REGISTER_VRAMAddressLo
	LDX.w $0220
	STX.b DMA[$00].SourceLo
	LDY.w #$0040
	STY.b DMA[$00].SizeLo
	LDA.b #$01
	STA.w !REGISTER_DMAEnable
	LDX.w $0222
	STX.b DMA[$00].SourceLo
	STY.b DMA[$00].SizeLo
	STA.w !REGISTER_DMAEnable
	LDX.w $0224
	STX.b DMA[$00].SourceLo
	STY.b DMA[$00].SizeLo
	STA.w !REGISTER_DMAEnable
	LDX.w $0226
	STX.b DMA[$00].SourceLo
	STY.b DMA[$00].SizeLo
	STA.w !REGISTER_DMAEnable
	LDX.w $0228
	STX.b DMA[$00].SourceLo
	STY.b DMA[$00].SizeLo
	STA.w !REGISTER_DMAEnable
	LDX.w $022A
	STX.b DMA[$00].SourceLo
	STY.b DMA[$00].SizeLo
	STA.w !REGISTER_DMAEnable
	LDX.w #$6100
	STX.w !REGISTER_VRAMAddressLo
	LDX.w $0239
	STX.b DMA[$00].SourceBank
	LDX.w $022C
	STX.b DMA[$00].SourceLo
	STY.b DMA[$00].SizeLo
	STA.w !REGISTER_DMAEnable
	LDX.w $022E
	STX.b DMA[$00].SourceLo
	STY.b DMA[$00].SizeLo
	STA.w !REGISTER_DMAEnable
	LDX.w $0230
	STX.b DMA[$00].SourceLo
	STY.b DMA[$00].SizeLo
	STA.w !REGISTER_DMAEnable
	LDX.w $0232
	STX.b DMA[$00].SourceLo
	STY.b DMA[$00].SizeLo
	STA.w !REGISTER_DMAEnable
	LDX.w $0234
	STX.b DMA[$00].SourceLo
	STY.b DMA[$00].SizeLo
	STA.w !REGISTER_DMAEnable
	LDX.w $0236
	STX.b DMA[$00].SourceLo
	STY.b DMA[$00].SizeLo
	STA.w !REGISTER_DMAEnable
	STZ.w $0238
CODE_20F704:
	LDA.w $072B
	CMP.b #$03
	BNE.b CODE_20F77B
	REP.b #$20
	SEP.b #$10
	LDA.l !RAM_SMB3_BattleMode_Mode2ScreenScrollVRAMAddressLo
	BEQ.b CODE_20F733
	STA.w !REGISTER_VRAMAddressLo
	LDA.w #!RAM_SMB3_BattleMode_Mode2LayerScrollingDataTable
	STA.b DMA[$00].SourceLo
	LDX.b #!RAM_SMB3_BattleMode_Mode2LayerScrollingDataTable>>16
	STX.b DMA[$00].SourceBank
	LDA.l !RAM_SMB3_BattleMode_Mode2ScreenScrollDataSizeLo
	STA.b DMA[$00].SizeLo
	LDX.b #$01
	STX.w !REGISTER_DMAEnable
	LDA.w #$0000
	STA.l !RAM_SMB3_BattleMode_Mode2ScreenScrollVRAMAddressLo
CODE_20F733:
	LDA.l !RAM_SMB3_BattleMode_ResultsScreenTilemapVRAMAddressLo
	BEQ.b CODE_20F755
	STA.w !REGISTER_VRAMAddressLo
	LDA.w #!RAM_SMB3_BattleMode_ResultsScreenTilemapData
	STA.b DMA[$00].SourceLo
	LDA.w #!RAM_SMB3_BattleMode_ResultsScreenTilemapData>>16
	STA.b DMA[$00].SourceBank
	LDA.w #$0800
	STA.b DMA[$00].SizeLo
	STX.w !REGISTER_DMAEnable
	LDA.w #$0000
	STA.l !RAM_SMB3_BattleMode_ResultsScreenTilemapVRAMAddressLo
CODE_20F755:
	LDA.l !RAM_SMB3_BattleMode_UnusedTilemapVRAMAddressLo
	BEQ.b CODE_20F777
	STA.w !REGISTER_VRAMAddressLo
	LDA.w #!RAM_SMB3_BattleMode_UnusedTilemapData
	STA.b DMA[$00].SourceLo
	LDA.w #!RAM_SMB3_BattleMode_UnusedTilemapData>>16
	STA.b DMA[$00].SourceBank
	LDA.w #$0800
	STA.b DMA[$00].SizeLo
	STX.w !REGISTER_DMAEnable
	LDA.w #$0000
	STA.l !RAM_SMB3_BattleMode_UnusedTilemapVRAMAddressLo
CODE_20F777:
	SEP.b #$20
	REP.b #$10
CODE_20F77B:
	LDA.w $02D1
	BPL.b CODE_20F7CD
	REP.b #$20
	SEP.b #$10
	STZ.w !REGISTER_VRAMAddressIncrementValue
	LDA.w #$21FF
	STA.w $0002
	LDA.w #$5000
	STA.w !REGISTER_VRAMAddressLo
	LDA.w #(!REGISTER_WriteToVRAMPortLo&$0000FF<<8)+$08
	STA.b DMA[$00].Parameters
	STZ.b DMA[$00].SourceBank
	LDA.w #$0002
	STA.b DMA[$00].SourceLo
	LDA.w #$0300
	STA.b DMA[$00].SizeLo
	LDY.b #$01
	STY.w !REGISTER_DMAEnable
	LDX.b #$80
	STX.w !REGISTER_VRAMAddressIncrementValue
	STA.b DMA[$00].SizeLo
	LDA.w #$5000
	STA.w !REGISTER_VRAMAddressLo
	LDA.w #(!REGISTER_WriteToVRAMPortHi&$0000FF<<8)+$08
	STA.b DMA[$00].Parameters
	LDA.w #$0003
	STA.b DMA[$00].SourceLo
	STY.w !REGISTER_DMAEnable
	SEP.b #$20
	LDA.b #$01
	STA.w $02D1
	JMP.w CODE_20F924

CODE_20F7CD:
	LDX.w $023E
	BEQ.b CODE_20F7EF
	STX.w !REGISTER_VRAMAddressLo
	LDA.w $0242
	STA.b DMA[$00].SourceBank
	LDX.w $0240
	STX.b DMA[$00].SourceLo
	LDX.w $02CA
	STX.b DMA[$00].SizeLo
	LDA.b #$01
	STA.w !REGISTER_DMAEnable
	STZ.w $023E
	STZ.w $023F
CODE_20F7EF:
	SEP.b #$10
	LDA.w $02D3
	BMI.b CODE_20F850
	LDA.w !RAM_SMB3_Level_GraphicsAndPaletteSettingFromHeader
	BNE.b CODE_20F82E
	LDA.w !RAM_SMB3_Global_CurrentWorld
	CMP.b #$02
	BNE.b CODE_20F82B
	LDA.w $02D7
	BNE.b CODE_20F82B
	LDX.w !RAM_SMB3_Overworld_DrawbridgeState
	REP.b #$20
	LDA.w #$2320
	STA.w !REGISTER_VRAMAddressLo
	LDA.w #$0100
	STA.b DMA[$00].SizeLo
	SEP.b #$20
	LDA.b #SMB3_Bank47Graphics_FG_AnimatedOverworldTiles2>>16
	STA.b DMA[$00].SourceBank
	LDA.w DrawbridgeAnimationPtrs,x
	STA.b DMA[$00].SourceHi
	LDA.b #SMB3_Bank47Graphics_FG_AnimatedOverworldTiles2+$0640
	STA.b DMA[$00].SourceLo
	LDA.b #$01
	STA.w !REGISTER_DMAEnable
CODE_20F82B:
	JMP.w CODE_20F924

CODE_20F82E:
	CMP.b #$07
	BEQ.b CODE_20F82B
	CMP.b #$0F
	BCC.b CODE_20F849
	CMP.b #$11
	BNE.b CODE_20F83D
	JMP.w CODE_20F9C5

CODE_20F83D:
	CMP.b #$13
	BCC.b CODE_20F82B
	CMP.b #$16
	BEQ.b CODE_20F82B
	CMP.b #$2C
	BEQ.b CODE_20F82B
CODE_20F849:
	LDX.b #$00
	LDA.w !RAM_SMB3_Level_PSwitchTimer
	BNE.b CODE_20F8A8
CODE_20F850:
	REP.b #$20
	LDA.w #$2980
	STA.w !REGISTER_VRAMAddressLo
	SEP.b #$20
	LDA.w !RAM_SMB3_Level_CoinAndQuestionBlockAnimationFrameIndex
	AND.b #$18
	LSR
	LSR
	LSR
	TAX
	LDA.b #SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16
	STA.b DMA[$00].SourceBank
	LDA.w DATA_21CA2C,x
	STA.b DMA[$00].SourceHi
	STZ.b DMA[$00].SourceLo
	LDY.b #$80
	STY.b DMA[$00].SizeLo
	LDA.b #$01
	STA.w !REGISTER_DMAEnable
	REP.b #$20
	LDA.w #$2DC0
	STA.w !REGISTER_VRAMAddressLo
	SEP.b #$20
	LDA.w DATA_21CA30,x
	STA.b DMA[$00].SourceHi
	LDA.b #$80
	STA.b DMA[$00].SourceLo
	STY.b DMA[$00].SizeLo
	LDA.b #$01
	STA.w !REGISTER_DMAEnable
	INC.w !RAM_SMB3_Level_CoinAndQuestionBlockAnimationFrameIndex
	LDX.w $0245
	BMI.b CODE_20F8C9
	BEQ.b CODE_20F8A8
	LDA.w !RAM_SMB3_Global_AnimatedFGTileAnimationFrameIndex
	CMP.b #$04
	BNE.b CODE_20F8A5
	STX.w $02B2
CODE_20F8A5:
	LDX.w $02B2
CODE_20F8A8:
	REP.b #$20
	LDA.w #$60C0
	STA.w !REGISTER_VRAMAddressLo
	SEP.b #$20
	LDA.b #SMB3_Bank41Graphics_Sprite_LavaLotus>>16			; Note: Something related to the fake brick blocks
	STA.b DMA[$00].SourceBank
	LDA.w DATA_21CA34,x
	STA.b DMA[$00].SourceHi
	LDA.w DATA_21CA39,x
	STA.b DMA[$00].SourceLo
	LDY.b #$80
	STY.b DMA[$00].SizeLo
	LDA.b #$01
	STA.w !REGISTER_DMAEnable
CODE_20F8C9:
	LDX.b #$00
	LDA.w !RAM_SMB3_Level_Layer3BGFromHeader
	CMP.b #$01
	BEQ.b CODE_20F8E4
	CMP.b #$05
	BEQ.b CODE_20F8E4
	CMP.b #$06
	BEQ.b CODE_20F8E4
	CMP.b #$07
	BEQ.b CODE_20F8E4
	LDX.b #$04
	CMP.b #$0D
	BNE.b CODE_20F924
CODE_20F8E4:
	STX.w $0004
	REP.b #$20
	LDA.w #$5A00
	STA.w !REGISTER_VRAMAddressLo
	LDA.w #$0100
	STA.b DMA[$00].SizeLo
	SEP.b #$20
	LDA.w $02C2
	INC
	CMP.b #$0A
	BNE.b CODE_20F909
	LDA.w $02C0
	INC
	AND.b #$03
	STA.w $02C0
	LDA.b #$00
CODE_20F909:
	STA.w $02C2
	LDA.w $02C0
	CLC
	ADC.w $0004
	TAX
	LDA.b #SMB3_Bank38Graphics_Layer3>>16
	STA.b DMA[$00].SourceBank
	LDA.w DATA_21CA40,x
	STA.b DMA[$00].SourceHi
	STZ.b DMA[$00].SourceLo
	LDA.b #$01
	STA.w !REGISTER_DMAEnable
CODE_20F924:
	LDA.w !RAM_SMB3_Global_UpdateEntirePaletteFlag
	BEQ.b CODE_20F94B
	STZ.w !REGISTER_CGRAMAddress
	REP.b #$20
	LDA.w #(!REGISTER_WriteToCGRAMPort&$0000FF<<8)+$00
	STA.b DMA[$01].Parameters
	LDA.w #SMB3_PaletteMirror[$00].LowByte
	STA.b DMA[$01].SourceLo
	LDY.b #SMB3_PaletteMirror[$00].LowByte>>16
	STY.b DMA[$01].SourceBank
	LDA.w #$0200
	STA.b DMA[$01].SizeLo
	SEP.b #$20
	LDA.b #$02
	STA.w !REGISTER_DMAEnable
	STZ.w !RAM_SMB3_Global_UpdateEntirePaletteFlag
CODE_20F94B:
	PLB
CODE_20F94C:
	LDA.b #SMB3_UpperOAMBuffer[$00].Slot>>8
	XBA
	LDA.b #SMB3_UpperOAMBuffer[$00].Slot
	TCD
	LDY.b #$1C
CODE_20F954:
	TYA
	ASL
	ASL
	TAX
	LDA.b SMB3_OAMTileSizeBuffer[$03].Slot,x
	ASL
	ASL
	ORA.b SMB3_OAMTileSizeBuffer[$02].Slot,x
	ASL
	ASL
	ORA.b SMB3_OAMTileSizeBuffer[$01].Slot,x
	ASL
	ASL
	ORA.b SMB3_OAMTileSizeBuffer[$00].Slot,x
	STA.w SMB3_UpperOAMBuffer[$00].Slot,y
	LDA.b SMB3_OAMTileSizeBuffer[$07].Slot,x
	ASL
	ASL
	ORA.b SMB3_OAMTileSizeBuffer[$06].Slot,x
	ASL
	ASL
	ORA.b SMB3_OAMTileSizeBuffer[$05].Slot,x
	ASL
	ASL
	ORA.b SMB3_OAMTileSizeBuffer[$04].Slot,x
	STA.w SMB3_UpperOAMBuffer[$01].Slot,y
	LDA.b SMB3_OAMTileSizeBuffer[$0B].Slot,x
	ASL
	ASL
	ORA.b SMB3_OAMTileSizeBuffer[$0A].Slot,x
	ASL
	ASL
	ORA.b SMB3_OAMTileSizeBuffer[$09].Slot,x
	ASL
	ASL
	ORA.b SMB3_OAMTileSizeBuffer[$08].Slot,x
	STA.w SMB3_UpperOAMBuffer[$02].Slot,y
	LDA.b SMB3_OAMTileSizeBuffer[$0F].Slot,x
	ASL
	ASL
	ORA.b SMB3_OAMTileSizeBuffer[$0E].Slot,x
	ASL
	ASL
	ORA.b SMB3_OAMTileSizeBuffer[$0D].Slot,x
	ASL
	ASL
	ORA.b SMB3_OAMTileSizeBuffer[$0C].Slot,x
	STA.w SMB3_UpperOAMBuffer[$03].Slot,y
	DEY
	DEY
	DEY
	DEY
	BPL.b CODE_20F954
	REP.b #$20
	LDA.w #DMA[$00].Parameters
	TCD
	STZ.w !REGISTER_OAMAddressLo
	LDA.w #(!REGISTER_OAMDataWritePort&$0000FF<<8)+$00
	STA.b DMA[$00].Parameters
	LDA.w #SMB3_OAMBuffer[$00].XDisp
	STA.b DMA[$00].SourceLo
	STZ.b DMA[$00].SourceBank
	LDA.w #$0220
	STA.b DMA[$00].SizeLo
	LDY.b #$01
	STY.w !REGISTER_DMAEnable
	SEP.b #$20
	PLD
	RTS

CODE_20F9C5:
	REP.b #$20
	LDA.w #$3060
	STA.w !REGISTER_VRAMAddressLo
	SEP.b #$20
	LDX.w $02D2
	LDA.b #SMB3_Bank43Graphics_FG_AnimatedStripeNSpadeTiles>>16
	STA.b DMA[$00].SourceBank
	LDA.w DATA_21CA48,x
	STA.b DMA[$00].SourceHi
	LDA.w DATA_21CA4C,x
	STA.b DMA[$00].SourceLo
	LDY.b #$80
	STY.b DMA[$00].SizeLo
	LDA.b #$01
	STA.w !REGISTER_DMAEnable
	JMP.w CODE_20F924

;--------------------------------------------------------------------

CODE_20F9EC:
	REP.b #$20
	STZ.w $0210
	STZ.w $0212
	STZ.w $0214
	STZ.w $0216
	STZ.w $0218
	STZ.w $021A
	SEP.b #$20
	RTS

;--------------------------------------------------------------------

CODE_20FA03:
	LDA.b #$80
	STA.b !RAM_SMB3_Global_ScreenDisplayRegisterMirror
	STA.w !REGISTER_ScreenDisplayRegister
	RTS

;--------------------------------------------------------------------

CODE_20FA0B:
	REP.b #$20
	STZ.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	LDA.w #$FFFF
	STA.w SMB3_StripeImageUploadTable[$00].LowByte
	SEP.b #$20
CODE_20FA18:
	JSR.w CODE_20FA03
CODE_20FA1B:
	REP.b #$20
	STZ.w !REGISTER_VRAMAddressIncrementValue
	STZ.w !REGISTER_VRAMAddressLo
	LDA.w #(!REGISTER_WriteToVRAMPortLo&$0000FF<<8)+$08
	STA.w DMA[$01].Parameters
	STZ.w DMA[$01].SourceBank
	LDA.w #$0000
	STA.w DMA[$01].SourceLo
	LDA.w #$2000
	STA.w DMA[$01].SizeLo
	LDY.b #$02
	STY.w !REGISTER_DMAEnable
	LDX.b #$80
	STX.w !REGISTER_VRAMAddressIncrementValue
	STZ.w !REGISTER_VRAMAddressLo
	STA.w DMA[$01].SizeLo
	LDA.w #(!REGISTER_WriteToVRAMPortHi&$0000FF<<8)+$08
	STA.w DMA[$01].Parameters
	LDA.w #$0001
	STA.w DMA[$01].SourceLo
	STY.w !REGISTER_DMAEnable
	STZ.w !REGISTER_VRAMAddressIncrementValue
	LDA.w #$01FF
	STA.b $02
	LDA.w #$5000
	STA.w !REGISTER_VRAMAddressLo
	LDA.w #(!REGISTER_WriteToVRAMPortLo&$0000FF<<8)+$08
	STA.w DMA[$01].Parameters
	LDA.w #$0002
	STA.w DMA[$01].SourceLo
	LDA.w #$0800
	STA.w DMA[$01].SizeLo
	STY.w !REGISTER_DMAEnable
	STX.w !REGISTER_VRAMAddressIncrementValue
	STA.w DMA[$01].SizeLo
	LDA.w #$5000
	STA.w !REGISTER_VRAMAddressLo
	LDA.w #(!REGISTER_WriteToVRAMPortHi&$0000FF<<8)+$08
	STA.w DMA[$01].Parameters
	LDA.w #$0003
	STA.w DMA[$01].SourceLo
	STY.w !REGISTER_DMAEnable
	SEP.b #$20
	RTS

;--------------------------------------------------------------------

CODE_20FA98:
	STZ.w !REGISTER_VRAMAddressIncrementValue
	REP.b #$20
	STZ.w !REGISTER_VRAMAddressLo
	LDA.w #(!REGISTER_WriteToVRAMPortLo&$0000FF<<8)+$08
	STA.w DMA[$01].Parameters
	STZ.w DMA[$01].SourceBank
	LDA.w #$0739
	STA.w DMA[$01].SourceLo
	LDA.w #$2000
	STA.w DMA[$01].SizeLo
	LDY.b #$02
	STY.w !REGISTER_DMAEnable
	LDX.b #$80
	STX.w !REGISTER_VRAMAddressIncrementValue
	STZ.w !REGISTER_VRAMAddressLo
	STA.w DMA[$01].SizeLo
	LDA.w #(!REGISTER_WriteToVRAMPortHi&$0000FF<<8)+$08
	STA.w DMA[$01].Parameters
	LDA.w #$073A
	STA.w DMA[$01].SourceLo
	STY.w !REGISTER_DMAEnable
	SEP.b #$20
	RTS

;--------------------------------------------------------------------

CODE_20FAD7:
	LDY.b #$04
	LDA.w $0216
CODE_20FADC:
	CMP.w DATA_21CF33,y
	BEQ.b CODE_20FAE4
	DEY
	BPL.b CODE_20FADC
CODE_20FAE4:
	LDA.w DATA_21CF38,y
	STA.b $01
	LDA.w DATA_21CF3D,y
	STA.b $00
	REP.b #$10
	LDY.w #$0300
	LDA.b #$80
	STA.w !REGISTER_VRAMAddressIncrementValue
CODE_20FAF8:
	REP.b #$20
	LDA.b $00
	STA.w !REGISTER_VRAMAddressLo
CODE_20FAFF:
	LDA.w $0739
	STA.w !REGISTER_WriteToVRAMPortLo
	DEY
	BEQ.b CODE_20FB1D
	LDA.b $00
	CLC
	ADC.w #$0001
	STA.b $00
	AND.w #$03FF
	BNE.b CODE_20FAFF
	LDA.w #$0800
	STA.b $00
	JMP.w CODE_20FAF8

CODE_20FB1D:
	SEP.b #$30
	RTS

;--------------------------------------------------------------------

	%ROUTINE_SMB3_ExecutePtr(NULLROM)					; $20FB20

;--------------------------------------------------------------------

SMB3_PollJoypadInputs:
.Main:
;$20FB5F
	STZ.w !REGISTER_JoypadSerialPort1
	LDA.l !SRAM_SMAS_Global_Controller1PluggedInFlag
	TAX
	LDA.w !REGISTER_Joypad1Lo,x
	STA.b !RAM_SMB3_Global_ScratchRAM00
	LDA.w !REGISTER_Joypad1Hi,x
	STA.b !RAM_SMB3_Global_ScratchRAM01
	LDA.b !RAM_SMB3_Global_ScratchRAM00
	STA.b !RAM_SMB3_Global_ControllerHold2P1
	TAY
	EOR.b !RAM_SMB3_Global_P1CtrlDisableHi
	AND.b !RAM_SMB3_Global_ControllerHold2P1
	STA.b !RAM_SMB3_Global_ControllerPress2P1
	STY.b !RAM_SMB3_Global_P1CtrlDisableHi
	LDA.b !RAM_SMB3_Global_ScratchRAM01
	STA.b !RAM_SMB3_Global_ControllerHold1P1
	STA.b !RAM_SMB3_Global_ControllerHold1
	TAY
	EOR.b !RAM_SMB3_Global_P1CtrlDisableLo
	AND.b !RAM_SMB3_Global_ControllerHold1P1
	STA.b !RAM_SMB3_Global_ControllerPress1P1
	STA.b !RAM_SMB3_Global_ControllerPress1
	STY.b !RAM_SMB3_Global_P1CtrlDisableLo
	LDA.l !SRAM_SMAS_Global_Controller2PluggedInFlag
	TAX
	LDA.w !REGISTER_Joypad1Lo,x
	STA.b !RAM_SMB3_Global_ScratchRAM00
	LDA.w !REGISTER_Joypad1Hi,x
	STA.b !RAM_SMB3_Global_ScratchRAM01
	LDA.b !RAM_SMB3_Global_ScratchRAM00
	STA.b !RAM_SMB3_Global_ControllerHold2P2
	TAY
	EOR.b !RAM_SMB3_Global_P2CtrlDisableHi
	AND.b !RAM_SMB3_Global_ControllerHold2P2
	STA.b !RAM_SMB3_Global_ControllerPress2P2
	STY.b !RAM_SMB3_Global_P2CtrlDisableHi
	LDA.b !RAM_SMB3_Global_ScratchRAM01
	STA.b !RAM_SMB3_Global_ControllerHold1P2
	TAY
	EOR.b !RAM_SMB3_Global_P2CtrlDisableLo
	AND.b !RAM_SMB3_Global_ControllerHold1P2
	STA.b !RAM_SMB3_Global_ControllerPress1P2
	STY.b !RAM_SMB3_Global_P2CtrlDisableLo
	LDA.w !RAM_SMB3_Level_Player_CurrentCharacter
	BEQ.b CODE_20FBC5
	LDA.b !RAM_SMB3_Global_ControllerHold1P2
	STA.b !RAM_SMB3_Global_ControllerHold1
	LDA.b !RAM_SMB3_Global_ControllerPress1P2
	STA.b !RAM_SMB3_Global_ControllerPress1
CODE_20FBC5:
	RTS

;--------------------------------------------------------------------

CODE_20FBC6:
	LDA.w $0210
	STA.w !REGISTER_BG1HorizScrollOffset
	LDA.w $0211
	STA.w !REGISTER_BG1HorizScrollOffset
	LDA.w $0216
	STA.w !REGISTER_BG1VertScrollOffset
	STA.b $02
	LDA.w $0217
	STA.w !REGISTER_BG1VertScrollOffset
	STA.b $03
	LDA.w $0212
	STA.w !REGISTER_BG2HorizScrollOffset
	LDA.w $0213
	STA.w !REGISTER_BG2HorizScrollOffset
	LDA.w $0218
	STA.w !REGISTER_BG2VertScrollOffset
	LDA.w $0219
	STA.w !REGISTER_BG2VertScrollOffset
	LDA.w !RAM_SMB3_Global_CurrentVBlankRoutinePath
	CMP.b #$20
	BNE.b CODE_20FC04
	JMP.w CODE_20FCA7

CODE_20FC04:
	LDA.w !RAM_SMB3_Level_Layer3BGFromHeader
	CMP.b #$01
	BNE.b CODE_20FC48
	LDX.w $02C1
	CPX.b #$1C
	BNE.b CODE_20FC3D
	REP.b #$20
	LDA.w #$0000
	STA.w $02CC
	LDA.w $0216
	CMP.w #$0950
	BCC.b CODE_20FC2C
	LDA.w $0216
	SEC
	SBC.w #$0950
	STA.w $02CC
CODE_20FC2C:
	SEP.b #$20
	LDA.w $02CC
	STA.w !REGISTER_BG3VertScrollOffset
	LDA.w $02CD
	STA.w !REGISTER_BG3VertScrollOffset
	JMP.w CODE_20FCB3

CODE_20FC3D:
	STZ.w !REGISTER_BG3VertScrollOffset
	LDA.b #$01
	STA.w !REGISTER_BG3VertScrollOffset
	JMP.w CODE_20FCB3

CODE_20FC48:
	CMP.b #$08
	BNE.b CODE_20FC7C
	REP.b #$20
	LDA.w $0210
	LSR
	LSR
	LSR
	STA.b $00
	LDA.b $02
	LSR
	LSR
	LSR
	STA.w $02C3
	LDA.b $02
	SEC
	SBC.w $02C3
	STA.w $02C3
	SEP.b #$20
	LDA.b $00
	STA.w !REGISTER_BG3HorizScrollOffset
	LDA.b $01
	STA.w !REGISTER_BG3HorizScrollOffset
	LDA.b #$17
	STA.w !REGISTER_BG3VertScrollOffset
	STZ.w !REGISTER_BG3VertScrollOffset
	RTS

CODE_20FC7C:
	CMP.b #$09
	BNE.b CODE_20FCA7
	REP.b #$20
	LDA.w $0210
	LSR
	LSR
	STA.b $00
	SEP.b #$20
	LDA.b $00
	STA.w !REGISTER_BG3HorizScrollOffset
	LDA.b $01
	STA.w !REGISTER_BG3HorizScrollOffset
	LDA.w $0218
	CLC
	ADC.b #$11
	STA.w !REGISTER_BG3VertScrollOffset
	LDA.w $0219
	ADC.b #$00
	STA.w !REGISTER_BG3VertScrollOffset
	RTS

CODE_20FCA7:
	LDA.w $021A
	STA.w !REGISTER_BG3VertScrollOffset
	LDA.w $021B
	STA.w !REGISTER_BG3VertScrollOffset
CODE_20FCB3:
	LDA.w $0214
	STA.w !REGISTER_BG3HorizScrollOffset
	LDA.w $0215
	STA.w !REGISTER_BG3HorizScrollOffset
	RTS

;--------------------------------------------------------------------

CODE_20FCC0:
	LDA.w $0210
	STA.w !REGISTER_BG1HorizScrollOffset
	LDA.w $0211
	STA.w !REGISTER_BG1HorizScrollOffset
	LDA.w $0216
	CLC
	ADC.w !RAM_SMB3_Level_ShakeLayer1YOffset
	STA.w !REGISTER_BG1VertScrollOffset
	STA.b $02
	LDA.w $0217
	STA.w !REGISTER_BG1VertScrollOffset
	STA.b $03
	LDA.w !RAM_SMB3_Level_Layer3BGFromHeader
	CMP.b #$03
	BEQ.b CODE_20FCED
	CMP.b #$04
	BEQ.b CODE_20FCED
	BRA.b CODE_20FD26

CODE_20FCED:
	LDA.b $9C
	BNE.b CODE_20FCF9
	LDA.w $037A
	BNE.b CODE_20FCF9
	JSR.w CODE_20FF4B
CODE_20FCF9:
	LDA.w $0353
	STA.w !REGISTER_BG2HorizScrollOffset
	LDA.w $0354
	STA.w !REGISTER_BG2HorizScrollOffset
	LDA.b #$3F
	STA.w !REGISTER_BG2VertScrollOffset
	STZ.w !REGISTER_BG2VertScrollOffset
	LDA.w $0212
	STA.w !REGISTER_BG3HorizScrollOffset
	LDA.w $0213
	STA.w !REGISTER_BG3HorizScrollOffset
	LDA.w $0218
	STA.w !REGISTER_BG3VertScrollOffset
	LDA.w $0219
	STA.w !REGISTER_BG3VertScrollOffset
	RTS

CODE_20FD26:
	LDA.w !RAM_SMB3_Level_Layer2BGFromHeader
	CMP.b #$12
	BNE.b CODE_20FD86
	LDA.w !RAM_SMB3_Level_Layer3BGFromHeader
	BEQ.b CODE_20FD6B
	REP.b #$20
	LDA.w $0210
	LSR
	STA.b $00
	LDA.b $02
	LSR
	LSR
	LSR
	STA.w $02C3
	LDA.b $02
	SEC
	SBC.w $02C3
	STA.w $02C3
	SEP.b #$20
	LDA.b $00
	STA.w !REGISTER_BG2HorizScrollOffset
	LDA.b $01
	STA.w !REGISTER_BG2HorizScrollOffset
	LDA.w $02C3
	CLC
	ADC.b #$20
	STA.w !REGISTER_BG2VertScrollOffset
	LDA.w $02C4
	ADC.b #$00
	STA.w !REGISTER_BG2VertScrollOffset
	JMP.w CODE_20FEEE

CODE_20FD6B:
	LDA.w $02CC
	STA.w !REGISTER_BG2VertScrollOffset
	LDA.w $02CD
	STA.w !REGISTER_BG2VertScrollOffset
	LDA.w $02CE
	STA.w !REGISTER_BG2HorizScrollOffset
	LDA.w $02CF
	STA.w !REGISTER_BG2HorizScrollOffset
	JMP.w CODE_20FEEE

CODE_20FD86:
	LDA.w $0212
	STA.w !REGISTER_BG2HorizScrollOffset
	LDA.w $0213
	STA.w !REGISTER_BG2HorizScrollOffset
	LDA.w $0218
	STA.w !REGISTER_BG2VertScrollOffset
	LDA.w $0219
	STA.w !REGISTER_BG2VertScrollOffset
	LDA.w !RAM_SMB3_Level_Layer3BGFromHeader
	CMP.b #$01
	BNE.b CODE_20FDCD
	LDA.w $02C1
	CMP.b #$34
	BNE.b CODE_20FDB6
	STZ.w !REGISTER_BG3VertScrollOffset
	LDA.b #$01
	STA.w !REGISTER_BG3VertScrollOffset
	BRA.b CODE_20FDC0

CODE_20FDB6:
	LDA.b $02
	STA.w !REGISTER_BG3VertScrollOffset
	LDA.b $03
	STA.w !REGISTER_BG3VertScrollOffset
CODE_20FDC0:
	LDA.w $0210
	STA.w !REGISTER_BG3HorizScrollOffset
	LDA.w $0211
	STA.w !REGISTER_BG3HorizScrollOffset
	RTS

;--------------------------------------------------------------------

CODE_20FDCD:
	CMP.b #$08
	BNE.b CODE_20FDDB
	LDA.b #$17
	STA.w !REGISTER_BG3VertScrollOffset
	STZ.w !REGISTER_BG3VertScrollOffset
	BRA.b CODE_20FDC0

CODE_20FDDB:
	CMP.b #$05
	BNE.b CODE_20FDE7
	STZ.w !REGISTER_BG3VertScrollOffset
	STZ.w !REGISTER_BG3VertScrollOffset
	BRA.b CODE_20FDC0

CODE_20FDE7:
	CMP.b #$06
	BNE.b CODE_20FDF5
	STZ.w !REGISTER_BG3VertScrollOffset
	LDA.b #$01
	STA.w !REGISTER_BG3VertScrollOffset
	BRA.b CODE_20FDC0

CODE_20FDF5:
	CMP.b #$07
	BNE.b CODE_20FE11
	REP.b #$20
	LDA.w #$00B8
	CLC
	ADC.b $02
	STA.b $04
	SEP.b #$20
	LDA.b $04
	STA.w !REGISTER_BG2VertScrollOffset
	LDA.b $05
	STA.w !REGISTER_BG2VertScrollOffset
	BRA.b CODE_20FDB6

CODE_20FE11:
	CMP.b #$02
	BEQ.b CODE_20FE4B
	CMP.b #$09
	BEQ.b CODE_20FE24
	CMP.b #$0A
	BEQ.b CODE_20FE24
	CMP.b #$0F
	BEQ.b CODE_20FE24
	JMP.w CODE_20FE86

CODE_20FE24:
	REP.b #$20
	LDA.w $0210
	LSR
	LSR
	STA.b $00
	SEP.b #$20
	LDA.b $00
	STA.w !REGISTER_BG3HorizScrollOffset
	LDA.b $01
	STA.w !REGISTER_BG3HorizScrollOffset
	LDA.w $0218
	CLC
	ADC.b #$11
	STA.w !REGISTER_BG3VertScrollOffset
	LDA.w $0219
	ADC.b #$00
	STA.w !REGISTER_BG3VertScrollOffset
	RTS

CODE_20FE4B:
	REP.b #$20
	LDA.w $0210
	LSR
	LSR
	STA.b $00
	STA.w $0353
	LDA.b $02
	LSR
	LSR
	LSR
	STA.w $02C3
	LDA.b $02
	SEC
	SBC.w $02C3
	STA.w $02C3
	SEP.b #$20
	LDA.b $00
	STA.w !REGISTER_BG3HorizScrollOffset
	LDA.b $01
	STA.w !REGISTER_BG3HorizScrollOffset
	LDA.w $02C3
	CLC
	ADC.b #$20
	STA.w !REGISTER_BG3VertScrollOffset
	LDA.w $02C4
	ADC.b #$00
	STA.w !REGISTER_BG3VertScrollOffset
	RTS

CODE_20FE86:
	CMP.b #$0E
	BNE.b CODE_20FEAB
	LDA.b $02
	STA.w !REGISTER_BG3VertScrollOffset
	LDA.b $03
	STA.w !REGISTER_BG3VertScrollOffset
	REP.b #$20
	LDA.w $0210
	LSR
	LSR
	LSR
	STA.b $00
	SEP.b #$20
	LDA.b $00
	STA.w !REGISTER_BG3HorizScrollOffset
	LDA.b $01
	STA.w !REGISTER_BG3HorizScrollOffset
	RTS

CODE_20FEAB:
	CMP.b #$0B
	BNE.b CODE_20FEEE
	LDA.b $9C
	BNE.b CODE_20FEBB
	LDA.w $037A
	BNE.b CODE_20FEBB
	JSR.w CODE_20FF4B
CODE_20FEBB:
	REP.b #$20
	LDA.b $02
	LSR
	LSR
	LSR
	STA.w $02C3
	LDA.b $02
	SEC
	SBC.w $02C3
	STA.w $02C3
	SEP.b #$20
	LDA.w $0353
	STA.w !REGISTER_BG3HorizScrollOffset
	LDA.w $0354
	STA.w !REGISTER_BG3HorizScrollOffset
	LDA.w $02C3
	CLC
	ADC.b #$28
	STA.w !REGISTER_BG3VertScrollOffset
	LDA.w $02C4
	ADC.b #$00
	STA.w !REGISTER_BG3VertScrollOffset
	RTS

CODE_20FEEE:
	LDA.w $0214
	STA.w !REGISTER_BG3HorizScrollOffset
	LDA.w $0215
	STA.w !REGISTER_BG3HorizScrollOffset
	LDA.w $021A
	STA.w !REGISTER_BG3VertScrollOffset
	LDA.w $021B
	STA.w !REGISTER_BG3VertScrollOffset
	RTS

;--------------------------------------------------------------------

CODE_20FF07:
	LDA.w $0210
	CLC
	ADC.b #$10
	LDA.w $0211
	ADC.b #$00
	AND.b #$01
	TAY
	REP.b #$20
	LDX.b #$80
	STX.w !REGISTER_VRAMAddressIncrementValue
	LDA.w #(!REGISTER_WriteToVRAMPortLo&$0000FF<<8)+$01
	STA.w DMA[$00].Parameters
	LDA.w #$0400
	STA.w DMA[$00].SizeLo
	LDA.w #$7FA000
	STA.w DMA[$00].SourceLo
	LDX.b #$7FA000>>16
	STX.w DMA[$00].SourceBank
	LDA.w #$0080
	LDX.b #$01
	CPY.b #$00
	BEQ.b CODE_20FF3F
	LDA.w #$0480
CODE_20FF3F:
	STA.w !REGISTER_VRAMAddressLo
	STX.w !REGISTER_DMAEnable
	SEP.b #$20
	STZ.w $02BB
	RTS

;--------------------------------------------------------------------

CODE_20FF4B:
	LDA.w $0351
	ASL
	ASL
	ASL
	ASL
	CLC
	ADC.w $0352
	STA.w $0352
	PHP
	LDY.b #$00
	LDA.w $0351
	LSR
	LSR
	LSR
	LSR
	CMP.b #$08
	BCC.b CODE_20FF6A
	ORA.b #$F0
	DEY
CODE_20FF6A:
	PLP
	ADC.w $0353
	STA.w $0353
	TYA
	ADC.w $0354
	STA.w $0354
	RTS

;--------------------------------------------------------------------

if !Define_Global_ROMToAssemble&(!ROM_SMAS_U|!ROM_SMAS_J1) != $00
%FREE_BYTES(NULLROM, 136, $FF)
elseif !Define_Global_ROMToAssemble&(!ROM_SMB3_U|!ROM_SMB3_E) != $00
%FREE_BYTES(NULLROM, 125, $FF)
elseif !Define_Global_ROMToAssemble&(!ROM_SMB3_J) != $00
%FREE_BYTES(NULLROM, 41, $FF)
else
%FREE_BYTES(NULLROM, 135, $FF)
endif
%BANK_END(<EndBank>)
endmacro

;#############################################################################################################
;#############################################################################################################

macro SMB3Bank21Macros(StartBank, EndBank)
%BANK_START(<StartBank>)
SMB3_MainDataBank:
.Main:
DATA_218000:
	db $00,$00,$00,$00,$10,$00,$08,$00,$00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00,$09,$00,$00,$00,$00,$02,$00,$00
	db $00,$00,$00,$00,$00,$80,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$01,$00,$01,$08,$02,$00,$00,$00,$00,$00,$02
	db $00,$00,$00,$00,$00,$00,$30,$00,$00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$08,$00,$00,$08,$00
	db $00,$00,$00,$20,$20,$00,$10,$00,$00,$02,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$08,$08,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$08,$02,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$08,$00,$00,$28,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00,$08,$82,$00,$00,$00,$00,$00,$00
	db $00,$00,$08,$00,$00,$08,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$20,$00,$40
	db $00,$00,$00,$00,$00,$00,$00,$04,$00,$00,$00,$00,$04,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00,$20,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$10,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00,$04,$00,$00,$00,$08,$00,$00,$00
	db $00,$00,$00,$00,$00,$04,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00

;--------------------------------------------------------------------

; Note: Indexes for the level RAM tables

DATA_218200:
	dw $7E2000,$7E21B0,$7E2360,$7E2510
	dw $7E26C0,$7E2870,$7E2A20,$7E2BD0
	dw $7E2D80,$7E2F30,$7E30E0,$7E3290
	dw $7E3440,$7E35F0,$7E37A0

DATA_21821E:
	dw $7E4000,$7E41B0,$7E4360,$7E4510
	dw $7E46C0,$7E4870,$7E4A20,$7E4BD0
	dw $7E4D80,$7E4F30,$7E50E0,$7E5290
	dw $7E5440,$7E55F0,$7E57A0

;--------------------------------------------------------------------

DATA_21823C:
	db $7E2000,$7E20F0,$7E21E0,$7E22D0,$7E23C0,$7E24B0,$7E25A0,$7E2690
	db $7E2780,$7E2870,$7E2960,$7E2A50,$7E2B40,$7E2C30,$7E2D20,$7E2E10

DATA_21824C:
	db $7E2000>>8,$7E20F0>>8,$7E21E0>>8,$7E22D0>>8,$7E23C0>>8,$7E24B0>>8,$7E25A0>>8,$7E2690>>8
	db $7E2780>>8,$7E2870>>8,$7E2960>>8,$7E2A50>>8,$7E2B40>>8,$7E2C30>>8,$7E2D20>>8,$7E2E10>>8

;--------------------------------------------------------------------

; Note: Scroll sprite related tables.

DATA_21825C:
	db $00,$04,$00,$04,$04,$04,$04,$00
	db $00,$00,$00,$04,$04,$04,$03,$00
	db $00,$04,$00,$00,$00

SMB3_AutoScrollMovementsTable:
;$218271
.Level1_4:
.Level3_6:
	db $04,$10,$00

.World3Airship:
	db $04,$00,$01,$00,$02,$00,$01,$00
	db $02,$00,$01,$00,$00,$02,$00,$01
	db $00

.Level6_2:
	db $70

.World5Airship:
	db $04,$00,$01,$00,$02,$00,$01,$00
	db $01,$00,$02,$00,$01,$00,$02,$00
	db $01,$00

.UNK_218274:
	db $04,$00,$01,$00,$02,$00,$01,$00
	db $02,$00,$01,$00

.World4Airship:
	db $05,$04,$00,$02,$00,$01,$00,$02
	db $00,$01,$00,$02,$00,$01,$00,$02
	db $00,$01,$00,$02,$00,$01,$00,$00
	db $02,$00,$01

.World6Airship:
	db $04,$00,$01,$00,$02,$00,$01,$00
	db $02,$00,$0A,$02,$00,$05,$01,$00
	db $02,$00,$01

.Level5_6:
	db $04,$10

.UNK_2182D4:
	db $04,$00,$01,$00,$02,$00,$00,$02
	db $00,$01,$00,$01,$00,$02,$00

.UNK_2182E3:
	db $01,$00,$06,$00,$01,$00,$02,$00
	db $02,$00,$01,$00,$02,$00,$01,$00
	db $01,$00,$02,$00

.Level6_7:
	db $04,$00,$01,$00,$02,$00,$00,$02
	db $00,$01,$00

.World1Airship:
	db $04,$00,$00,$01,$00,$02,$00,$01
	db $00,$02,$00,$02,$00,$01,$00,$02
	db $00,$02,$00,$01,$00

.World7Airship:
	db $05,$00,$20,$00,$02,$30,$00,$30
	db $02,$00,$01,$00,$30,$00,$02,$00
	db $01,$00,$20,$02,$00,$01,$00,$02
	db $00,$01,$00,$30,$02,$00,$01,$00
	db $01

.World8Airship:
	db $04,$10,$00

.World8Boat:
	db $06,$04,$00,$01,$00,$30

.Level7_4:
	db $04,$00,$00,$0A,$00,$04,$00,$01
	db $00,$02,$00,$01,$50,$01,$00,$08
	db $00,$06,$02,$00,$00

.CoinHeaven:
	db $60

.CoinShip:
	db $80

.UNK_218358:
	db $04,$00

.World8Tank1:
	db $04,$10,$00

.World8Tank2:
	db $04,$10

.End:

SMB3_AutoScrollMovementRepeatTable:
;$21835F
.Level_1_4:
.Level_3_6:
	db $08,$03,$80

.World3Airship:
	db $08,$40,$08,$3C,$10,$1E,$08,$87
	db $08,$19,$08,$FF,$88,$08,$45,$08
	db $35

.Level6_2:
	db $01

.World5Airship:
	db $08,$62,$06,$6E,$10,$62,$0A,$60
	db $06,$4C,$08,$6C,$06,$2C,$08,$31
	db $04,$93

.UNK_218386:
	db $08,$FF,$08,$2E,$0E,$68,$10,$6A
	db $16,$56,$0C,$DF

.World4Airship:
	db $01,$03,$60,$03,$80,$04,$80,$04
	db $80,$04,$80,$04,$80,$04,$80,$04
	db $80,$06,$32,$08,$32,$06,$77,$FF
	db $05,$FF,$03

.World6Airship:
	db $08,$67,$01,$80,$03,$82,$0A,$87
	db $08,$9F,$08,$08,$63,$08,$0C,$40
	db $06,$78

.Level5_6:
	db $02,$08

.UNK_2183C1:
	db $03,$08,$EE,$10,$67,$10,$FF,$48
	db $10,$67,$10,$34,$10,$67,$10

.UNK_2183D0:
	db $78,$08,$48,$08,$38,$10,$26,$10
	db $1C,$08,$36,$08,$90,$0A,$68,$0A
	db $BF,$0D,$60,$0D

.Level6_7:
	db $56,$08,$7A,$11,$5F,$11,$FF,$94
	db $15,$45,$15

.World1Airship:
	db $80,$08,$71,$47,$06,$20,$0E,$18
	db $0E,$23,$06,$31,$06,$25,$14,$27
	db $0E,$35,$0A,$2C,$0A

.World7Airship:
	db $27,$08,$20,$02,$0E,$03,$01,$18
	db $02,$0C,$28,$0C,$20,$01,$2C,$0D
	db $10,$10,$20,$02,$10,$20,$12,$18
	db $17,$16,$12,$20,$03,$0C,$28,$06
	db $42

.World8Airship:
	db $01,$0F,$02

.World8Boat:
	db $E6,$05,$03,$27,$0A,$27

.Level7_4:
	db $0B,$08,$FF,$79,$08,$48,$08,$0E
	db $0C,$0E,$10,$0E,$04,$04,$18,$10
	db $08,$18,$08,$08,$FF

.CoinHeaven:
	db $8A

.CoinShip:
	db $01

.UNK_218445:
	db $01,$08

.World8Tank1:
	db $F9,$08,$05

.World8Tank2:
	db $E8,$08

.End:
	db $04

DATA_21844D:
	db $00,$01,$FF

DATA_218450:
	db $10,$10,$10,$08,$10,$10,$10,$18

DATA_218458:
	db $08,$FF,$00,$04,$08,$0D,$11,$14
	db $1F,$2D

DATA_218462:
	db $00,$02,$00,$01,$00,$02,$00,$01
	db $00,$02,$00,$01,$00,$02,$01,$00
	db $02,$00,$04,$00,$00,$04,$00,$00
	db $02,$00,$01,$00,$01,$00,$02,$00
	db $05,$04,$00,$02,$00,$01,$00,$02
	db $00,$01,$00,$02,$00,$01

DATA_218490:
	db $FF,$10,$20,$10,$20,$0A,$26,$0A
	db $26,$04,$08,$08,$08,$04,$10,$0E
	db $10,$0E,$08,$FF,$68,$08,$F0,$F4
	db $10,$66,$10,$76,$10,$66,$10,$95
	db $02,$02,$90,$04,$78,$04,$78,$04
	db $78,$04,$78,$04,$78,$02

;--------------------------------------------------------------------

DATA_2184BE:
	db $27,$27,$27,$17,$07,$17

;--------------------------------------------------------------------

; Note: Something related to auto-scrolling.

DATA_2184C4:
	db $8C,$90

DATA_2184C6:
	db $FF,$01

DATA_2184C8:
	db $F8,$08

DATA_2184CA:
	db $7C,$EF,$CF,$EF

DATA_2184CE:
	db $FC,$04

DATA_2184D0:
	db $C4,$EA,$94,$EA,$C4,$EA,$D4,$EA
	db $90,$EA,$B4,$EA

DATA_2184DC:
	db $CF,$EA,$70,$D0,$60,$C0,$90,$30
	db $F0,$00

;--------------------------------------------------------------------

DATA_2184E6:
	db $41,$80,$BC,$72,$2E,$71,$67,$5F
	db $D7,$89,$6B,$C8,$80,$E2,$5B,$66
	db $40,$F2

DATA_2184F8:
	db $05,$00,$07,$00,$06,$00,$08,$00
	db $05,$00,$07,$00,$06,$00,$08,$00
	db $B8,$14,$BA,$14,$B9,$14,$BB,$14
	db $44,$12,$46,$12,$45,$12,$47,$12
	db $B8,$14,$BA,$14,$B9,$14,$BB,$14
	db $B8,$10,$BA,$10,$B9,$10,$BB,$10
	db $B4,$1C,$B6,$1C,$B5,$1C,$B7,$1C
	db $54,$1E,$56,$1E,$55,$1E,$57,$1E
	db $FF,$00,$FF,$00,$E6,$0C,$E7,$0C
	db $60,$00,$61,$00,$6D,$00,$6F,$00
	db $B4,$1C,$B6,$1C,$B5,$1C,$B7,$1C
	db $52,$1C,$50,$1C,$62,$1C,$60,$1C
	db $05,$00,$07,$00,$06,$00,$08,$00
	db $18,$00,$1A,$00,$19,$00,$1B,$00
	db $5C,$10,$5E,$10,$5D,$10,$5F,$10
	db $92,$1C,$CA,$1C,$93,$1C,$CB,$1C
	db $DC,$1C,$DE,$1C,$DD,$1C,$DF,$1C
	db $E0,$0C,$E2,$0C,$E1,$0C,$E3,$0C

;--------------------------------------------------------------------

DATA_218588:
	db $00,$00,$C0,$04
	db $FC,$00

	db $00,$00,$C0,$04
	db $FC,$00

	db $FF

;--------------------------------------------------------------------

; Note: Stripe image used in toad houses.

DATA_218595:
	db $00,$00,$00,$07
	db $50,$18,$51,$18,$52,$18,$53,$18

	db $00,$00,$00,$07
	db $54,$18,$55,$18,$56,$18,$57,$18
	db $FF,$FF

;--------------------------------------------------------------------

; Note: Some tables related to the rotating cannonball shooter.

DATA_2185AF:
	db $00,$31,$62,$93,$C4

DATA_2185B4:
	db $00,$00,$00,$07
	db $FF,$14,$A6,$14,$A7,$14,$FF,$14

	db $00,$00,$00,$07
	db $8D,$14,$B2,$14,$BC,$14,$8D,$14

	db $00,$00,$00,$07
	db $9D,$14,$B3,$14,$BD,$14,$9D,$14

	db $00,$00,$00,$07
	db $FF,$14,$AE,$14,$AF,$14,$FF,$14

	db $FF

	db $00,$00,$00,$07
	db $09,$14,$28,$14,$36,$14,$49,$14

	db $00,$00,$00,$07
	db $EC,$14,$ED,$14,$EE,$14,$EF,$14

	db $00,$00,$00,$07
	db $E8,$14,$E9,$14,$EA,$14,$EB,$14

	db $00,$00,$00,$07
	db $F8,$14,$F9,$14,$FA,$14,$FB,$14

	db $FF

	db $00,$00,$00,$07
	db $05,$00,$07,$00,$05,$00,$07,$00

	db $00,$00,$00,$07
	db $06,$00,$08,$00,$06,$00,$08,$00

	db $00,$00,$00,$07
	db $05,$00,$07,$00,$05,$00,$07,$00

	db $00,$00,$00,$07
	db $06,$00,$08,$00,$06,$00,$08,$00

	db $FF

	db $00,$00,$00,$07
	db $06,$1D,$0D,$1C,$0D,$1C,$0E,$1C

	db $00,$00,$00,$07
	db $24,$1C,$04,$1D,$04,$1D,$05,$1D

	db $00,$00,$00,$07
	db $24,$1C,$04,$1D,$04,$1D,$05,$1D

	db $00,$00,$00,$07
	db $34,$1C,$48,$1C,$48,$1C,$37,$1C

	db $FF

	db $00,$00,$00,$07
	db $00,$1C,$01,$1C,$02,$1C,$00,$1C

	db $00,$00,$00,$07
	db $10,$1C,$11,$1C,$12,$1C,$10,$1C

	db $00,$00,$00,$07
	db $20,$1C,$21,$1C,$22,$1C,$23,$1C

	db $00,$00,$00,$07
	db $30,$1C,$31,$1C,$32,$1C,$33,$1C

	db $FF

UNK_2186A9:
	db $96,$92

DATA_2186AB:
	db $92,$93,$94,$95,$96,$97,$98,$99
	db $80,$80,$80,$80,$53,$54,$55,$56
	db $47,$48,$49,$4A

;--------------------------------------------------------------------

DATA_2186BF:
	db $3C,$0F,$36,$27,$3C,$0F,$36,$17
	db $3C,$0F,$36,$07,$3C,$0F,$36,$0F

;--------------------------------------------------------------------

DATA_2186CF:
	dw $0000,$0006,$000C,$0012,$0018,$001E,$0024,$002A
	dw $0030,$0036,$003C,$0042,$0048,$004E,$0054,$005A
	dw $0060,$0066,$006C,$0072,$0078,$007E,$0084,$008A
	dw $0090,$0096,$009C,$00A2,$00A8,$00AE,$00B4,$00BA
	dw $00C0,$00C6,$00CC,$00D2,$00D8,$00DE,$00E4,$00EA
	dw $00F0,$00F6,$00FC,$0102,$0108,$010E,$0114,$011A
	dw $0120,$0126,$012C,$0132,$0138,$013E,$0144,$014A
	dw $0150,$0156,$015C,$0162,$0168,$016E,$0174,$017A
	dw $0180,$0186,$018C,$0192,$0198,$019E,$01A4,$01AA
	dw $01B0,$01B6,$01BC,$01C2,$01C8,$01CE,$01D4,$01DA
	dw $01E0,$01E6,$01EC,$01F2

DATA_218777:
	db $00,$02,$10,$04,$06,$08,$0A,$0C,$10,$0E,$28,$2A,$2C,$2E,$10,$18
	db $1A,$1C,$2C,$2E,$10,$18,$1A,$08,$20,$20,$10,$22,$22,$10,$24,$24
	db $10,$26,$26,$10,$00,$02,$10,$04,$06,$10,$30,$32,$10,$34,$36,$38
	db $00,$02,$10,$04,$06,$38,$00,$02,$10,$04,$06,$08,$00,$02,$10,$04
	db $06,$3A,$10,$10,$10,$3C,$3E,$10,$00,$02,$10,$04,$06,$10,$0A,$0C
	db $10,$0E,$28,$10,$2C,$2E,$10,$18,$1A,$10,$30,$32,$10,$34,$36,$10
	db $08,$12,$10,$1C,$1E,$10,$2C,$2E,$10,$38,$3A,$10,$30,$30,$10,$32
	db $32,$10,$34,$34,$10,$36,$36,$10,$38,$38,$10,$3A,$3A,$10,$00,$02
	db $10,$04,$06,$08,$0A,$0C,$10,$0E,$28,$2A,$2C,$2E,$10,$18,$1A,$1C
	db $2C,$2E,$10,$A8,$AA,$10,$2C,$2E,$10,$A8,$AC,$10,$00,$02,$04,$06
	db $08,$0A,$0C,$0E,$38,$3A,$3C,$3E,$18,$1A,$1C,$1E,$20,$22,$24,$26
	db $28,$2A,$2C,$2E,$30,$32,$10,$34,$36,$10,$24,$28,$2C,$32,$36,$0C
	db $24,$28,$2C,$32,$36,$0E,$18,$1C,$20,$1A,$1E,$22,$24,$28,$2C,$26
	db $2A,$2E,$24,$28,$2C,$32,$36,$3A,$00,$00,$10,$02,$02,$10,$04,$04
	db $10,$06,$06,$10,$08,$08,$10,$0A,$0A,$10,$30,$32,$10,$34,$36,$10
	db $30,$34,$10,$38,$3C,$10,$00,$02,$10,$04,$06,$08,$00,$02,$10,$0A
	db $0C,$0E,$00,$02,$10,$20,$22,$24,$30,$32,$10,$34,$36,$10,$26,$18
	db $10,$1C,$1E,$10,$10,$10,$10,$34,$36,$10,$10,$10,$10,$30,$32,$10
	db $28,$2A,$10,$2C,$2E,$10,$38,$3A,$10,$3C,$3E,$10,$10,$10,$10,$2E
	db $2E,$10,$10,$10,$10,$2A,$2C,$10,$28,$2A,$10,$0C,$0E,$26,$28,$2A
	db $10,$08,$0A,$24,$28,$2A,$10,$00,$02,$3E,$28,$2A,$10,$00,$02,$04
	db $28,$2A,$10,$00,$02,$06,$28,$2A,$10,$30,$32,$3C,$28,$2A,$10,$34
	db $36,$3C,$28,$2A,$10,$38,$3A,$3C,$28,$2A,$10,$0C,$1E,$24,$28,$2A
	db $10,$0C,$2C,$2E,$10,$10,$10,$04,$06,$10,$10,$10,$10,$00,$02,$10
	db $10,$10,$10,$18,$1A,$10,$10,$10,$10,$20,$22,$10,$10,$10,$10,$1C
	db $1E,$10,$04,$06,$10,$A8,$AA,$10,$04,$06,$10,$A8,$AC,$10,$28,$2A
	db $10,$00,$02,$04,$10,$10,$10,$24,$26,$10,$10,$10,$10,$28,$2A,$10
	db $10,$10,$10,$28,$2E,$10,$10,$10,$10,$24,$2C,$10,$10,$10,$10,$08
	db $0A,$10,$10,$10,$10,$0C,$0C,$10,$10,$10,$10,$30,$32,$10,$10,$10
	db $10,$34,$36,$10,$10,$10,$10,$0E,$3E,$10,$18,$1A,$10,$1C,$20,$10
	db $18,$1A,$10,$1C,$20,$22,$20,$22,$24,$26,$00,$00,$28,$2A,$2C,$2E
	db $30,$00,$32,$34,$36,$38,$00,$00

DATA_21896F:
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$08,$08,$08,$08,$08,$08
	db $08,$08,$08,$08,$08,$08,$08,$48
	db $08,$10,$10,$10,$10,$10,$10,$10
	db $10,$10,$10,$10,$18,$18,$18,$18
	db $18,$18,$18,$18,$18,$18,$18,$18
	db $18,$18,$18,$18,$18,$18,$18,$18
	db $18,$18,$18,$18,$18,$18,$18,$18
	db $18,$40,$40,$40

DATA_2189C3:
	db SMB3_Bank3EGraphics_Mario_Small>>8,SMB3_Bank3FGraphics_Mario_Big>>8,SMB3_Bank3FGraphics_Mario_Big>>8
	db SMB3_Bank3EGraphics_Mario_Raccoon>>8,SMB3_Bank3EGraphics_Mario_Frog>>8,SMB3_Bank3EGraphics_Mario_Tanooki>>8
	db SMB3_Bank3EGraphics_Mario_Hammer>>8,SMB3_Bank3EGraphics_Mario_Raccoon>>8,SMB3_Bank42Graphics_BG_PeachsRoom1>>8

	db SMB3_Bank2EGraphics_Luigi_Small>>8,SMB3_Bank3FGraphics_Luigi_Big>>8,SMB3_Bank3FGraphics_Luigi_Big>>8
	db SMB3_Bank2EGraphics_Luigi_Raccoon>>8,SMB3_Bank2EGraphics_Luigi_Frog>>8,SMB3_Bank2EGraphics_Luigi_Tanooki>>8
	db SMB3_Bank2EGraphics_Luigi_Hammer>>8,SMB3_Bank3EGraphics_Mario_Raccoon>>8,SMB3_Bank42Graphics_BG_PeachsRoom1>>8

DATA_2189D5:
	db SMB3_Bank3EGraphics_Mario_Small>>16,SMB3_Bank3FGraphics_Mario_Big>>16,SMB3_Bank3FGraphics_Mario_Big>>16
	db SMB3_Bank3EGraphics_Mario_Raccoon>>16,SMB3_Bank3EGraphics_Mario_Frog>>16,SMB3_Bank3EGraphics_Mario_Tanooki>>16
	db SMB3_Bank3EGraphics_Mario_Hammer>>16,SMB3_Bank3EGraphics_Mario_Raccoon>>16,SMB3_Bank42Graphics_BG_PeachsRoom1>>16

	db SMB3_Bank2EGraphics_Luigi_Small>>16,SMB3_Bank3FGraphics_Luigi_Big>>16,SMB3_Bank3FGraphics_Luigi_Big>>16
	db SMB3_Bank2EGraphics_Luigi_Raccoon>>16,SMB3_Bank2EGraphics_Luigi_Frog>>16,SMB3_Bank2EGraphics_Luigi_Tanooki>>16
	db SMB3_Bank2EGraphics_Luigi_Hammer>>16,SMB3_Bank3EGraphics_Mario_Raccoon>>16,SMB3_Bank42Graphics_BG_PeachsRoom1>>16

DATA_2189E7:
	dw $0000,$0040,$0080,$00C0,$0100,$0140,$0180,$01C0
	dw $0200,$0240,$0280,$02C0,$0300,$0340,$0380,$03C0
	dw $0400,$0440,$0480,$04C0,$0500,$0540,$0580,$05C0
	dw $0600,$0640,$0680,$06C0,$0700,$0740,$0780,$07C0
	dw $0800,$0840,$0880,$08C0,$0900,$0940,$0980,$09C0
	dw $0A00,$0A40,$0A80,$0AC0,$0B00,$0B40,$0B80,$0BC0
	dw $0C00,$0C40,$0C80,$0CC0,$0D00,$0D40,$0D80,$0DC0
	dw $0E00,$0E40,$0E80,$0EC0,$0F00,$0F40,$0F80,$0FC0

;--------------------------------------------------------------------

UNK_218A67:
	db $F8,$0A,$F8,$12,$08,$0A,$08,$12
	db $01,$09,$00,$08,$02,$0A,$FE,$06
	db $50,$54,$54,$00,$50,$40,$44

;--------------------------------------------------------------------

SMB3_ToadHouseChestContents:
;$218A7E
	db !Define_SMB3_ReservePowerupID_WarpWhistle
	db !Define_SMB3_ReservePowerupID_PWing
	db !Define_SMB3_ReservePowerupID_FrogSuit
	db !Define_SMB3_ReservePowerupID_TanookiSuit
	db !Define_SMB3_ReservePowerupID_HammerSuit
.RandomSuits:
	db !Define_SMB3_ReservePowerupID_FrogSuit
	db !Define_SMB3_ReservePowerupID_TanookiSuit
	db !Define_SMB3_ReservePowerupID_HammerSuit
.RandomBasicPowerups:
	db !Define_SMB3_ReservePowerupID_Mushroom
	db !Define_SMB3_ReservePowerupID_FireFlower
	db !Define_SMB3_ReservePowerupID_RaccoonLeaf
.RandomItems1:
	db !Define_SMB3_ReservePowerupID_FrogSuit
	db !Define_SMB3_ReservePowerupID_FireFlower
	db !Define_SMB3_ReservePowerupID_RaccoonLeaf
.RandomItems2:
	db !Define_SMB3_ReservePowerupID_TanookiSuit
	db !Define_SMB3_ReservePowerupID_FireFlower
	db !Define_SMB3_ReservePowerupID_RaccoonLeaf
.RandomAnchors:
	db !Define_SMB3_ReservePowerupID_Anchor
	db !Define_SMB3_ReservePowerupID_Anchor
	db !Define_SMB3_ReservePowerupID_Anchor

DATA_218A92:
	db SMB3_ToadHouseChestContents_RandomSuits-SMB3_ToadHouseChestContents
	db SMB3_ToadHouseChestContents_RandomBasicPowerups-SMB3_ToadHouseChestContents
	db SMB3_ToadHouseChestContents_RandomItems1-SMB3_ToadHouseChestContents
	db SMB3_ToadHouseChestContents_RandomItems2-SMB3_ToadHouseChestContents
	db SMB3_ToadHouseChestContents_RandomAnchors-SMB3_ToadHouseChestContents

DATA_218A97:
	db $00,$01,$02,$00,$01,$02,$00,$01
	db $02,$00,$01,$02,$00,$01,$02,$00

DATA_218AA7:
	db $40,$70,$A0

;--------------------------------------------------------------------

DATA_218AAA:
	db $FB,$FB,$FB,$FB,$F9,$FB,$FB

DATA_218AB1:
	db $06,$06,$06,$06,$08,$06,$06

DATA_218AB8:
	db $01,$F7,$F7,$F7,$03,$F7,$F7

DATA_218ABF:
	db $00,$40

;--------------------------------------------------------------------

DATA_218AC1:				;\ Note: Player speeds when entering a pipe.
	db $08,$F8			;|
					;|
DATA_218AC3:				;|
	db $08,$F8			;/

DATA_218AC5:
	db $00,$01

DATA_218AC7:
	db $01,$FF

DATA_218AC9:
	db $00,$FF

DATA_218ACB:
	db $1F,$00

DATA_218ACD:
	dw $121E,$1202,$021E,$0202
	dw $0E1E,$021E,$0E02,$0202

DATA_218ADD:				; Note: Screen scrolling pipe speed
	db $02,$FE,$02,$FE

DATA_218AE1:
	db $03,$04,$02,$01

DATA_218AE5:
	db $46,$44,$42,$40

;--------------------------------------------------------------------

; Note: Stripe image data of some sort.

DATA_218AE9:
	db $50,$01,$51,$01,$57,$01,$5D,$01,$6B,$01,$FF
	db $5A,$01,$54,$01,$5D,$01,$59,$01,$5D,$01,$FF

;--------------------------------------------------------------------

; Note: Speed table for overworld camera scrolling

DATA_218AFF:
	db $02,$FE

DATA_218B01:
	db $00,$FF

;--------------------------------------------------------------------

; Note: This is the music set to play when loading a world after starting the game (ie. From leaving a level)

WorldMapMusic:
;$218B03
	db !Define_SMB3_OverworldMusic_World1
	db !Define_SMB3_OverworldMusic_World2
	db !Define_SMB3_OverworldMusic_World3
	db !Define_SMB3_OverworldMusic_World4
	db !Define_SMB3_OverworldMusic_World5
	db !Define_SMB3_OverworldMusic_World6
	db !Define_SMB3_OverworldMusic_World7
	db !Define_SMB3_OverworldMusic_World8
	db !Define_SMB3_OverworldMusic_WarpWhistle

;--------------------------------------------------------------------

World5CloudSpriteOAMData:
;$218B0C
	db $48,$30,$A4,$20
	db $58,$30,$A6,$20

;--------------------------------------------------------------------

DATA_218B14:
	db $84,$60,$2C,$3E

DATA_218B18:
	db $2C,$2C,$2C,$CC,$6E,$6C,$82,$4C
	db $4C,$4C,$4A,$48,$46,$44

;--------------------------------------------------------------------

GameOver_DeadPlayerOAMData:
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR]
	db $78,$3B-3,$CE,$3E
else
	db $78,$3B,$CE,$3E
endif

;--------------------------------------------------------------------

; Note: Tables related to updating an overworld tile after grabbing a goal sphere.

OverworldEventTileStripeImageHeaderByte1:
;$218B2A
	db $09,$0A,$09,$0D,$0C,$09,$09,$0D
	db $09,$0C,$09,$08,$0D,$08,$0D,$09
	db $0D

OverworldEventTileStripeImageHeaderByte2:
;$218B3B
	db $08,$10,$D2,$0C,$C6,$56,$46,$4E
	db $5A,$52,$4A,$DA,$8E,$D0,$12,$58
	db $8A

OverworldEventTileClearFlags:
;$218B4C
	db $04,$10,$08,$01,$09,$02,$16,$10
	db $13,$20,$0B,$08,$03,$08,$17,$08
	db $0D,$08,$19,$80,$25,$08,$0D,$20
	db $17,$04,$08,$20,$19,$10,$2C,$08
	db $35,$04

OverworldEventTileStripeImageTileData:
;$218B6E						; Info: 
	dw $1CFE,$1CC0,$1CFE,$1CC0			; 00 - | Path Tile
	dw $1CFE,$1CC0,$1CFE,$1CC0			; 01 - | Path Tile
	dw $1CFE,$1CFE,$1CE1,$1CE1			; 02 - _ Path Tile
	dw $1CFE,$1CC0,$1CFE,$1CC0			; 03 - | Path Tile
	dw $1CFE,$1CFE,$1CE1,$1CE1			; 04 - _ Path Tile
	dw $14D4,$14D6,$14D5,$14D7			; 05 - Bridge Tile
	dw $14D4,$14D6,$14D5,$14D7			; 06 - Bridge Tile
	dw $10FC,$10FC,$1CE1,$1CE1			; 07 - _ Path Tile (Cloud)
	dw $1CFE,$1CFE,$1CE1,$1CE1			; 08 - _ Path Tile
	dw $14D4,$14D6,$14D5,$14D7			; 09 - Bridge Tile
	dw $1CFE,$1CFE,$1CE1,$1CE1			; 0A - _ Path Tile
	dw $1CFE,$1CC0,$1CFE,$1CC0			; 0B - | Path Tile
	dw $1CFE,$1CFE,$1CE1,$1CE1			; 0C - _ Path Tile
	dw $1CFE,$1CC0,$1CFE,$1CC0			; 0D - | Path Tile
	dw $1CFE,$1CFE,$1CE1,$1CE1			; 0E - _ Path Tile
	dw $1CFE,$1CC0,$1CFE,$1CC0			; 0F - | Path Tile
	dw $1CFE,$1CFE,$1CE1,$1CE1			; 10 - _ Path Tile

OverworldEventTileYPos:
;$218BF6
	db $50,$90,$80,$50,$40,$60,$60,$60
	db $60,$20,$60,$40,$70,$40,$50,$60
	db $70

OverworldEventTileXPos:
;$218C07
	db $40,$80,$90,$61,$31,$B0,$30,$71
	db $D0,$91,$52,$D0,$71,$80,$91,$C2
	db $53

OverworldEventMap16TileIDs:
;$218C18
	db $46,$46,$45,$46,$45,$B3,$B3,$DA
	db $DA,$B3,$45,$46,$45,$46,$45,$46
	db $45

OverworldEventIndexes:
;$218C29
	db $00,$00,$00,$00				; World 1
	db $01,$00,$00,$00				; World 2
	db $02,$03,$00,$00				; World 3
	db $04,$05,$00,$00				; World 4
	db $06,$07,$00,$00				; World 5
	db $08,$09,$0A,$00				; World 6
	db $0B,$0C,$00,$00				; World 7
	db $0D,$0E,$0F,$10				; World 8

DATA_218C49:
	db $00,$04,$08,$0C,$10,$14,$18,$1C
	db $20,$24,$28,$2C,$30,$34,$38,$3C
	db $40

;--------------------------------------------------------------------

DATA_218C5A:
	db $00,$0E,$CC,$CC,$CC,$CC,$CC,$CC
	db $33,$33,$33,$33,$33,$33,$11,$11
	db $11,$11,$11,$11,$44,$44,$44,$44
	db $44,$44,$08,$20,$00,$01,$00,$14
	db $08,$40,$C0,$24,$00,$14,$0A,$A0
	db $00,$01,$00,$14,$FF,$FF,$80,$81
	db $FF,$FF,$CC,$CC,$FF,$FF,$82,$83
	db $FF,$00,$01,$1E,$1F

;--------------------------------------------------------------------

DATA_218C97:
	db $00,$00,$00,$00

;--------------------------------------------------------------------

; Note: Tables related to moving on the overworld.

DATA_218C9B:
	db $00,$00,$00,$00,$02,$00,$00,$00
	db $FE

DATA_218CA4:
	db $00,$02,$FE,$00,$00,$00,$00,$00
	db $00

DATA_218CAD:
	db $00,$00,$FF,$00,$00,$00,$00,$00
	db $00

DATA_218CB6:
	db $00,$00,$00,$00,$01,$00,$00,$00
	db $FF

DATA_218CBF:
	db $00,$01,$FF,$00,$00,$00,$00,$00
	db $00

DATA_218CC8:
	db $00,$00,$FF,$00,$00,$00,$00,$00
	db $00

UNK_218CD1:
	db $06,$05,$0A,$09,$09,$0A,$05,$06

DATA_218CD9:					; Note: Special overworld tiles?
	db $50,$E8,$BC,$E0,$C9,$5F,$DF,$66
	db $BD,$E6,$CC

;--------------------------------------------------------------------

UNK_218CE4:
	dw $001F,$001F,$02FF,$001F
	dw $2334,$117A,$7FFF,$001F
	dw $26D2,$0000,$0000,$001F
	dw $0000,$0000,$0000,$0000

;--------------------------------------------------------------------

MaxOverworldScreenXPos:
;$218D04
	db $10,$20,$30,$30,$00,$30,$20,$00

DATA_218D0C:
.Frame1
	db $26,$2C,$4A,$6A,$4A,$6A,$80,$6A
	db $40,$60,$44,$64,$48,$68,$26,$8E
	db $80,$A2

.Frame2
	db $26,$2C,$4A,$6A,$4A,$6A,$80,$6A
	db $42,$62,$46,$66,$48,$68,$26,$8E
	db $80,$A0

DATA_218D30:
.Frame1
	db $2A,$4C,$00,$20,$00,$20,$02,$20
	db $80,$A0,$84,$A4,$04,$24,$2A,$CE
	db $02,$40

.Frame2
	db $2A,$4C,$00,$20,$00,$20,$02,$20
	db $82,$A2,$86,$A6,$04,$24,$2A,$CE
	db $02,$42

DATA_218D54:
.Frame1
	db $2E,$2E,$2E,$2E,$2E,$2E,$2E,$2E
	db $2E,$6E,$2E,$6E,$2E,$2E,$2E,$6E
	db $2E,$2E

.Frame2
	db $2E,$6E,$2E,$6E,$2E,$6E,$2E,$6E
	db $2E,$2E,$2E,$2E,$2E,$6E,$2E,$2E
	db $2E,$2E

DATA_218D78:
	db $86,$84

DATA_218D7A:
	db $22,$24

UNK_218D7C:
	db $00,$04,$05,$06

DATA_218D80:
	db $0C,$2C,$0C,$2E

DATA_218D84:
	db $6E,$2E,$2E,$2E

UNK_218D88:
	db $00,$10,$AC,$22,$F0,$10,$AE,$22
	db $00,$B0,$C0,$22,$F0,$B0,$C2,$22

World9PipeNumbersOAMData:
;$218D98
	db $64,$47,$61,$23,$84,$47,$63,$23
	db $A4,$47,$65,$23,$64,$67,$67,$23
	db $84,$67,$69,$23,$A4,$67,$6B,$23
	db $A4,$87,$6D,$23

;--------------------------------------------------------------------

; Note: Tables related to moving on the overworld.

DATA_218DB4:
	db $01,$02,$04,$08

DATA_218DB8:
	db $02,$01,$08,$04

DATA_218DBC:
	dw DATA_218DC4
	dw DATA_218DCD
	dw DATA_218DD6
	dw DATA_218DDF

DATA_218DC4:
	db $45,$B2,$B3,$AC,$B7,$B8,$DA,$B9,$E6

DATA_218DCD:
	db $45,$B2,$B3,$AC,$B7,$B8,$DA,$B9,$E6

DATA_218DD6:
	db $46,$46,$46,$B1,$AA,$AB,$B0,$DB,$BA

DATA_218DDF:
	db $46,$46,$46,$B1,$AA,$AB,$B0,$DB,$BA

DATA_218DE8:
	db $B2,$B2,$B1,$B1

DATA_218DEC:
	db $00,$00,$01,$01

DATA_218DF0:
	db $00,$00,$10,$F0

DATA_218DF4:
	db $10,$F0,$00,$00

DATA_218DF8:
	db $00,$FF,$00,$00

DATA_218DFC:
	db $F0,$F0,$00,$E0

DATA_218E00:
	db $00,$FF,$00,$00

DATA_218E04:
	db $10,$F0,$00,$00

;--------------------------------------------------------------------

DATA_218E08:
	db $F0,$20,$20,$F0

DATA_218E0C:
	db $F0,$20,$20,$F0

;--------------------------------------------------------------------

DATA_218E10:
	dw $001F,$3ADF,$0000
	dw $2334,$3ADF,$0000
	dw $2334,$3ADF,$0000
	dw $117A,$3ADF,$0000
	dw $7FFF,$3ADF,$0000
	dw $02FF,$3ADF,$001F

DATA_218E34:
	db $04,$0A,$10,$16,$1C,$22

;--------------------------------------------------------------------

DATA_218E3A:
	db $FD,$10,$A0,$10,$FD,$10,$A1,$10,$FD,$10,$A1,$10,$FD,$10,$A1,$10
	db $FD,$10,$A2,$10,$FD,$10,$FD,$10,$A6,$10,$A6,$10,$FE,$10,$FE,$10
	db $A7,$10,$A7,$10,$FD,$10,$FD,$10,$A8,$10,$FD,$10,$A4,$10,$FD,$10
	db $A4,$10,$FD,$10,$A4,$10,$FD,$10,$A5,$10,$FD,$10,$FD,$10,$FD,$10
	db $FE,$10,$FE,$10,$FE,$10,$FE,$10,$6F,$18,$6F,$18,$6F,$18,$6F,$18
	db $FC,$00,$FC,$00,$FC,$00,$FC,$00,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $72,$10,$73,$10,$73,$10,$72,$10,$50,$1C,$51,$1C,$52,$1C,$53,$1C
	db $54,$1C,$55,$1C,$FC,$00,$FC,$00,$72,$10,$73,$10,$56,$1C,$57,$1C
	db $58,$1C,$59,$1C,$5A,$1C,$5B,$1C,$5C,$1C,$5D,$1C,$FC,$00,$FC,$00
	db $FC,$00,$FC,$00,$66,$1C,$67,$1C,$40,$1C,$41,$1C,$42,$1C,$43,$1C
	db $44,$1C,$55,$1C,$FC,$00,$FC,$00,$72,$10,$73,$10,$45,$1C,$FC,$00
	db $74,$1C,$75,$1C,$76,$1C,$77,$1C,$08,$14,$18,$14,$09,$14,$19,$14
	db $0A,$14,$1A,$14,$0B,$14,$1B,$14,$28,$14,$38,$14,$29,$14,$39,$14
	db $2A,$14,$3A,$14,$2B,$14,$3B,$14,$48,$14,$58,$14,$49,$14,$59,$14
	db $4A,$14,$5A,$14,$4B,$14,$5B,$14,$68,$14,$78,$14,$69,$14,$79,$14
	db $6A,$14,$7A,$14,$6B,$14,$7B,$14,$FE,$14,$FE,$14,$FE,$14,$FE,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $72,$10,$73,$10,$5E,$1C,$5F,$1C,$60,$1C,$61,$1C,$62,$1C,$63,$1C
	db $64,$1C,$65,$1C,$FC,$00,$FC,$00,$68,$1C,$69,$1C,$6A,$1C,$6B,$1C
	db $6C,$1C,$6D,$1C,$FC,$00,$FC,$00,$46,$1C,$69,$1C,$6A,$1C,$6B,$1C
	db $78,$1C,$79,$1C,$7A,$1C,$7B,$1C,$20,$18,$21,$18,$22,$18,$23,$18
	db $24,$18,$25,$18,$26,$18,$27,$18,$21,$18,$29,$18,$2A,$18,$2B,$18
	db $2C,$18,$2B,$18,$27,$18,$2F,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $70,$18,$71,$18,$71,$18,$70,$18,$6F,$18,$6F,$18,$6F,$18,$00,$18
	db $6F,$18,$6F,$18,$06,$18,$06,$18,$6F,$18,$6F,$18,$06,$18,$03,$18
	db $6F,$18,$01,$18,$6F,$18,$01,$18,$70,$18,$04,$18,$71,$18,$04,$18
	db $6F,$18,$02,$18,$6F,$18,$6F,$18,$07,$18,$07,$18,$6F,$18,$6F,$18
	db $07,$18,$05,$18,$6F,$18,$6F,$18,$80,$1C,$90,$1C,$81,$1C,$91,$1C
	db $82,$1C,$92,$1C,$83,$1C,$93,$1C,$84,$1C,$94,$1C,$85,$1C,$95,$1C
	db $86,$1C,$96,$1C,$87,$1C,$97,$1C,$72,$14,$73,$14,$73,$14,$72,$14
	db $10,$18,$11,$18,$12,$18,$13,$18,$12,$18,$14,$18,$12,$18,$14,$18
	db $12,$18,$13,$18,$15,$18,$16,$18,$17,$18,$18,$18,$19,$18,$1A,$18
	db $1F,$18,$FC,$00,$1F,$18,$FC,$00,$1B,$18,$1C,$18,$1D,$18,$1E,$18
	db $72,$14,$73,$10,$73,$14,$72,$10,$72,$14,$73,$10,$73,$14,$72,$14
	db $72,$14,$73,$14,$73,$14,$72,$10,$72,$10,$FC,$00,$73,$10,$72,$10
	db $72,$10,$73,$10,$73,$10,$FC,$00,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C

;--------------------------------------------------------------------

; Note: This table affects what levels are used as the minigame intros seen in the Spade/N-Spade levels.
; Note that only the first one is ever used.

MiniGameIntroLevelDataPtrs:
;$21963A
	dl SMB3_LevelData_MiniGameIntro1_Level_Main			; Minigame intro 1 (table)
	dl SMB3_LevelData_MiniGameIntro2_Level_Main			; Minigame intro 2 (no table, unused)
	dl SMB3_LevelData_MiniGameIntro3_Level_Main			; Minigame intro 3 (glitch object)
	dl SMB3_LevelData_MiniGameIntro4_Level_Main			; Minigame intro 4 (mostly empty)
	dl SMB3_LevelData_MiniGameIntro5_Level_Main			; Minigame intro 5 (mostly empty)

SMB3_LevelData_MiniGameIntro1_Level_Main:
;$219649
	dl $000000
	dl $000000
	incbin "Levels/MinigameIntro1_Level.bin":6-

SMB3_LevelData_MiniGameIntro2_Level_Main:
;$219666
	dl $000000
	dl $000000
	incbin "Levels/MinigameIntro2_Level.bin":6-

SMB3_LevelData_MiniGameIntro3_Level_Main:
;$219680
	dl $000000
	dl $000000
	incbin "Levels/MinigameIntro3_Level.bin":6-

SMB3_LevelData_MiniGameIntro4_Level_Main:
;$21969D
	dl $000000
	dl $000000
	incbin "Levels/MinigameIntro4_Level.bin":6-

SMB3_LevelData_MiniGameIntro5_Level_Main:
;$2196AB
	dl $000000
	dl $000000
	incbin "Levels/MinigameIntro5_Level.bin":6-

;--------------------------------------------------------------------

DATA_2196B9:
	db $CE,$CF,$D0
	db $D1,$D2,$D3

DATA_2196BF:
	db $0D,$80,$0D,$80,$30,$10,$30,$10
	db $40,$50,$10,$30,$13,$40,$50,$80
	db $10,$70,$21,$60,$14,$40,$50,$10
	db $40,$80,$70,$22,$60,$70,$22,$60
	db $70,$20,$60,$10,$80,$70,$2B,$60
	db $80,$2D,$FF

DATA_2196EA:
	db $CD,$40,$0A,$D4,$D5,$D6,$D7,$D8

DATA_2196F2:
	db $40,$47,$48,$43,$44,$45,$80,$81
	db $82,$49,$85,$84,$40,$41,$42,$43
	db $44,$45,$80,$81,$82,$46,$83,$84
	db $40,$D8,$0A,$D8,$0A,$0A,$D8,$4A
	db $0A,$0A,$86,$0A

DATA_219716:
	db $01,$03,$00

DATA_219719:
	db $00,$0C,$18

DATA_21971C:
	db $4B,$4C,$4D,$4E,$4F,$50,$51,$52

DATA_219724:
	db $C9,$CA,$CB,$CC

DATA_219728:
	db $87,$88,$89,$8A

;--------------------------------------------------------------------

DATA_21972C:
	db $60,$60,$60,$60,$70,$70,$70,$70
	db $80,$80,$80

DATA_219737:
	db $C0,$C8,$D0,$D8,$C0,$C8,$D0,$D8
	db $C0,$C8,$D0

DATA_219742:
	db $60,$60,$60,$70,$70,$70,$70,$80
	db $80,$80

DATA_21974C:
	db $C0,$C8,$D0,$C0,$C8,$D0,$D8,$C8
	db $D0,$D8

DATA_219756:
	db $60,$60,$60,$70,$70,$70,$70,$80
	db $80,$80,$80

DATA_219761:
	db $C0,$C8,$D0,$C0,$C8,$D0,$D8,$C0
	db $C8,$D0,$D8

DATA_21976C:
	db $70,$70,$70,$70,$80,$80,$80,$80

DATA_219774:
	db $70,$78,$80,$88,$70,$78,$80,$88

DATA_21977C:
	db $40,$00

DATA_21977E:
	db $21,$25,$23,$27

;--------------------------------------------------------------------

; Note: Pointers to the spade level message text.

DATA_219782:						; Note: Most of these messages are untranslated japanese
	db SMB3_UnusedSpadeGameText1
	db SMB3_SlidingTileMinigameIntroText
	db SMB3_CardFlipMinigameIntroText
	db SMB3_UnusedSpadeGameText2
	db SMB3_UnusedSpadeGameText3
	db SMB3_UnusedSpadeGameText4
	db SMB3_UnusedSpadeGameText5
	db SMB3_UnusedSpadeGameText6

DATA_21978A:
	db SMB3_UnusedSpadeGameText1>>8
	db SMB3_SlidingTileMinigameIntroText>>8
	db SMB3_CardFlipMinigameIntroText>>8
	db SMB3_UnusedSpadeGameText2>>8
	db SMB3_UnusedSpadeGameText3>>8
	db SMB3_UnusedSpadeGameText4>>8
	db SMB3_UnusedSpadeGameText5>>8
	db SMB3_UnusedSpadeGameText6>>8

UNK_219792:
	db DATA_2198FC
	db DATA_219906
	db DATA_219912
	db DATA_219933
	db DATA_21993D
	db DATA_219942
	db DATA_21994E
	db DATA_21996F

UNK_21979A:
	db DATA_2198FC>>8
	db DATA_219906>>8
	db DATA_219912>>8
	db DATA_219933>>8
	db DATA_21993D>>8
	db DATA_219942>>8
	db DATA_21994E>>8
	db DATA_21996F>>8

UNK_2197A2:
	db $28,$28,$29,$CA,$EA,$0A,$28,$A8
	db $01,$94,$28,$A9,$54,$90,$28,$BD
	db $01,$96,$00,$28,$C8,$01,$92,$28
	db $C9,$54,$FE,$28,$DD,$01,$93,$00
	db $28,$E8,$01,$92,$28,$E9,$54,$FE
	db $28,$FD,$01,$93,$00,$29,$08,$01
	db $92,$29,$09,$54,$FE,$29,$1D,$01
	db $93,$00,$29,$28,$01,$95,$29,$29
	db $54,$91,$29,$3D,$01,$97,$00

cleartable
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR]
	table "Tables/Fonts/Layer3_dialogue_br.txt"
else
	table "Tables/Fonts/ThroneRoom.txt"
endif

SMB3_UnusedSpadeGameText1:
;$2197E9
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	db $9D,$B5,$DD,$C2,$DD,$BF,$D6,$FE,$9D,$00
	db $9E,$B5,$DD,$C2,$DD,$BF,$D6,$FE,$B5,$B6,$DD,$DF,$00
	db $BE,$D9,$B1,$B5,$DD,$B1,$C9,$FE,$B9,$B1,$DC,$DF,$B0,$B8,$DD,$D5,$B2,$FF,$00
else
	db $9D,$B5,$DD,$C2,$DD,$BF,$D6,$FD,$9D,$00
	db $9E,$B5,$DD,$C2,$DD,$BF,$D6,$FD,$B5,$B6,$DD,$DF,$00
	db $BE,$D9,$B1,$B5,$DD,$B1,$C9,$FD,$B9,$B1,$DC,$DF,$B0,$B8,$DD,$D5,$B2,$FF,$00
endif

SMB3_SlidingTileMinigameIntroText:
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	db $63,$60,$CB,$6F,$FE,$63,$60,$CB,$6F,$FE,$62,$A1,$67,$61,$CD,$80,$A6,$FE,$FE,$FE,$00
	db $64,$80,$8B,$6D,$A2,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$00
	db $61,$CD,$65,$61,$66,$A7,$8B,$C0,$61,$CF,$E0,$E1,$E2,$CE,$FE,$FE,$FE,$FE,$FE,$FE,$FF
elseif !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000
	db "Alinhe as imagens pra",$00
	db "ganhar um pr^mio!",$00
	db "Voc^ s% tem uma chance.",$FF
else
	db "Line up the pictures and",$00
	db "get a prize!",$00
	db "You only get one try.",$FF
endif

SMB3_CardFlipMinigameIntroText:
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	db $67,$A8,$A7,$E8,$FE,$67,$A8,$A7,$E8,$FE,$C8,$FE,$C9,$CC,$A4,$67,$CD,$85,$FE,$FE,$00
	db $61,$AA,$61,$AA,$60,$80,$A8,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$00
	db $64,$85,$84,$66,$8D,$FE,$61,$CD,$65,$61,$C0,$68,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FF
elseif !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000
	db "Vire duas cartas e veja",$00
	db "se elas batem.",$00
	db "Dois erros e acabou!",$FF
else
	db "Flip over any two cards",$00
	db "and see if they match.",$00
	db "Miss twice and your out!",$FF
endif

if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
DATA_219891:
	db $73,$70,$DB,$7F,$FE,$73,$70,$DB,$7F,$FE,$72,$B1,$77,$71,$DD,$81,$B6,$EF,$EF,$EF,$00
	db $74,$81,$9B,$7D,$B2,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$00
	db $71,$DD,$75,$71,$76,$B7,$9B,$81,$71,$DF,$E3,$E4,$E5,$DE,$FE,$FE,$FE,$FE,$FE,$FE,$FF

DATA_2198D0:
	db $77,$B8,$B7,$D4,$FE,$77,$B8,$B7,$D4,$FE,$D8,$FA,$D9,$DC,$B4,$77,$DD,$95,$FE,$FE,$00
	db $71,$BA,$71,$BA,$70,$81,$B8,$EF,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$00
	db $74,$95,$94,$76,$9D,$FE,$71,$DD,$75,$71,$81,$78,$EF,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FF

SMB3_UnusedSpadeGameText2:
	db $B2,$B2,$B2,$B2,$B2,$B2,$B2,$00
	db $B2,$B2,$B2,$B2,$B2,$B2,$B2,$FF,$00

SMB3_UnusedSpadeGameText3:
	db $B3,$B3,$B3,$B3,$B3,$B3,$B3,$FF,$00

SMB3_UnusedSpadeGameText4:
	db $B6,$BC,$B2,$B5,$DD,$FE,$C2,$DD,$BF,$D6,$00
	db $D8,$88,$D9,$E5,$C3,$B8,$DD,$88,$D0,$DF,$00
	db $D3,$D6,$BD,$C2,$FE,$B0,$B8,$DD,$D5,$B2,$FF,$05

SMB3_UnusedSpadeGameText5:
	db $B7,$DD,$88,$BC,$B2,$B5,$DD,$C2,$DD,$BF,$D6,$00
	db $B5,$88,$C3,$DD,$B8,$DD,$88,$D0,$DF,$00
	db $BA,$BD,$C2,$FE,$B0,$B8,$DD,$D5,$B2,$FF,$06

SMB3_UnusedSpadeGameText6:
	db $9E,$FE,$D2,$C3,$DD,$D9,$FF,$00

DATA_2198FC:
	db $FE,$D2,$C8,$DF,$FE,$D3,$DA,$B2,$EB,$FF

DATA_219906:
	db $9F,$B5,$B1,$FE,$CB,$DE,$D9,$B1,$BF,$DD,$D5,$FF

DATA_219912:
	db $C0,$E4,$DC,$BC,$C9,$FE,$9E,$B5,$B1,$00
	db $B4,$C4,$BB,$DD,$FE,$B5,$88,$C3,$DD,$DF,$00
	db $9E,$CE,$B1,$FE,$B0,$C2,$C2,$B9,$DD,$D6,$DC,$FF

DATA_219933:
	db $B2,$B2,$B2,$B2,$00
	db $B2,$B2,$B2,$B2,$FF

DATA_21993D:
	db $B3,$B3,$B3,$B3,$FF

DATA_219942:
	db $9F,$B5,$B1,$FE,$CB,$DE,$D9,$B1,$BF,$DD,$D5,$FF

DATA_21994E:
	db $C0,$E4,$DC,$BC,$C9,$FE,$9E,$B5,$B1,$00
	db $B4,$C4,$BB,$DD,$FE,$B5,$88,$C3,$DD,$DF,$00
	db $9E,$CE,$B1,$FE,$B0,$C2,$C2,$B9,$DD,$D6,$DC,$FF

DATA_21996F:
	db $9E,$FE,$D2,$C3,$DD,$D9,$FF
else
SMB3_UnusedSpadeGameText2:
	db $B2,$B2,$B2,$B2,$B2,$B2,$B2,$00
	db $B2,$B2,$B2,$B2,$B2,$B2,$B2,$FF,$00

SMB3_UnusedSpadeGameText3:
	db $B3,$B3,$B3,$B3,$B3,$B3,$B3,$FF,$00

SMB3_UnusedSpadeGameText4:
	db $B6,$BC,$B2,$B5,$DD,$FD,$C2,$DD,$BF,$D6,$00
	db $D8,$88,$D9,$E5,$C3,$B8,$DD,$88,$D0,$DF,$00
	db $D3,$D6,$BD,$C2,$FD,$B0,$B8,$DD,$D5,$B2,$FF,$05

SMB3_UnusedSpadeGameText5:
	db $B7,$DD,$88,$BC,$B2,$B5,$DD,$C2,$DD,$BF,$D6,$00
	db $B5,$88,$C3,$DD,$B8,$DD,$88,$D0,$DF,$00
	db $BA,$BD,$C2,$FD,$B0,$B8,$DD,$D5,$B2,$FF,$06

SMB3_UnusedSpadeGameText6:
	db $9E,$FD,$D2,$C3,$DD,$D9,$FF,$00

DATA_2198FC:
	db $FD,$D2,$C8,$DF,$FD,$D3,$DA,$B2,$E5,$FF

DATA_219906:
	db $9F,$B5,$B1,$FD,$CB,$DE,$D9,$B1,$BF,$DD,$D5,$FF

DATA_219912:
	db $C0,$E4,$DC,$BC,$C9,$FD,$9E,$B5,$B1,$00
	db $B4,$C4,$BB,$DD,$FD,$B5,$88,$C3,$DD,$DF,$00
	db $9E,$CE,$B1,$FD,$B0,$C2,$C2,$B9,$DD,$D6,$DC,$FF

DATA_219933:
	db $B2,$B2,$B2,$B2,$00
	db $B2,$B2,$B2,$B2,$FF

DATA_21993D:
	db $B3,$B3,$B3,$B3,$FF

DATA_219942:
	db $9F,$B5,$B1,$FD,$CB,$DE,$D9,$B1,$BF,$DD,$D5,$FF

DATA_21994E:
	db $C0,$E4,$DC,$BC,$C9,$FD,$9E,$B5,$B1,$00
	db $B4,$C4,$BB,$DD,$FD,$B5,$88,$C3,$DD,$DF,$00
	db $9E,$CE,$B1,$FD,$B0,$C2,$C2,$B9,$DD,$D6,$DC,$FF

DATA_21996F:
	db $9E,$FD,$D2,$C3,$DD,$D9,$FF
endif
cleartable

;--------------------------------------------------------------------

DATA_219976:
	db $50,$40,$80,$60

DATA_21997A:
	db $50,$A0,$40,$A0

;--------------------------------------------------------------------

DATA_21997E:
	db $00,$01

DATA_219980:
	db $05,$06

;--------------------------------------------------------------------

DATA_219982:					; Todo: This seems like it might be text.
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	db $CB,$DE,$E5,$BB,$E7,$FE,$B3,$88
	db $FF
else
	db $CB,$DE,$E5,$BB,$E7,$FD,$B3,$88
	db $FF
endif

;--------------------------------------------------------------------

DATA_21998B:
	db $08,$0F,$72,$2A,$F0,$0F,$74,$2A
	db $F8,$0F,$7A,$2A,$08,$AF,$78,$2A
	db $F0,$AF,$76,$2A,$F8,$AF,$7A,$2A
	db $08,$17,$73,$2A,$F0,$17,$75,$2A
	db $F8,$17,$7B,$2A,$08,$B7,$79,$2A
	db $F0,$B7,$77,$2A,$F8,$B7,$7B,$2A

;--------------------------------------------------------------------

DATA_2199BB:
	db $00,$02,$01,$01,$02,$00,$03,$03

DATA_2199C3:
	db $02,$03,$02,$05

;--------------------------------------------------------------------

DATA_2199C7:
	db $94,$58,$58,$58,$50,$58,$58

;--------------------------------------------------------------------

; Note: N-Spade minigame related tables.

DATA_2199CE:
	db $8A,$8A,$8C,$8C,$8A,$8A

DATA_2199D4:
	db $24,$64,$24,$64,$A4,$E4

DATA_2199DA:
	db $20,$40,$60,$80,$A0,$C0,$20,$40
	db $60,$80,$A0,$C0,$20,$40,$60,$80
	db $A0,$C0

DATA_2199EC:
	db $1F,$1F,$1F,$1F,$1F,$1F,$4F,$4F
	db $4F,$4F,$4F,$4F,$7F,$7F,$7F,$7F
	db $7F,$7F,$02,$02,$02,$06,$06

DATA_219A03:
	db $B8,$B8,$BA,$BA,$BC,$BC,$BE,$BE
	db $B0,$B0,$B1,$B1,$B4,$B4,$B5,$B5
	db $B6,$B6,$B7,$B7

DATA_219A17:
	db $10,$0C,$08,$04,$00

DATA_219A1C:
	db $00,$01,$03,$00,$04,$02,$05,$02
	db $00,$04,$03,$01,$05,$01,$02,$00
	db $01,$02

DATA_219A2E:
	db $00,$A4,$00,$A8,$00,$AC,$00,$B0
	db $00,$B4,$00,$B8,$01,$64,$01,$68
	db $01,$6C,$01,$70,$01,$74,$01,$78
	db $02,$24,$02,$28,$02,$2C,$02,$30
	db $02,$34,$02,$38

DATA_219A52:
	db $58,$0C,$5A,$0C,$59,$0C,$5B,$0C
	db $5C,$04,$5E,$04,$5D,$04,$5F,$04
	db $AC,$0C,$AD,$0C,$AE,$0C,$AF,$0C
	db $6C,$18,$6E,$18,$6D,$18,$6F,$18
	db $7C,$0C,$7E,$0C,$7D,$0C,$7F,$0C
	db $7C,$0C,$7E,$0C,$7D,$0C,$7F,$0C

DATA_219A82:
	db $7F,$BF,$FF,$7F,$7F

DATA_219A87:
	db $78,$18,$9D,$0C,$9E,$0C

DATA_219A8D:
	db $79,$18,$7B,$0C,$7B,$0C

; Note: N-Spade minigame border palette tables.
DATA_219A93:
	db $34,$7B,$1F,$4E,$8F,$6E,$DB,$24

DATA_219A9B:
	db $8F,$6E,$DB,$24,$87,$4D,$13,$04

DATA_219AA3:
	db $5F,$35,$0B,$5E,$57,$14,$03,$3D

DATA_219AAB:
	db $1F,$4E,$8F,$6E,$DB,$24,$87,$4D

DATA_219AB3:
	db $BF,$62,$D4,$7A,$5F,$35,$0B,$5E

DATA_219ABB:
	db $D4,$7A,$5F,$35,$0B,$5E,$57,$14

DATA_219AC3:
	db $00,$00,$00,$07,$2C,$0D,$77,$0C
	db $77,$0C,$0E,$0D,$00,$00,$00,$07
	db $64,$0C,$00,$1C,$00,$1C,$3D,$0D
	db $00,$00,$00,$07,$64,$0C,$00,$1C
	db $00,$1C,$3D,$0D,$00,$00,$00,$07
	db $2C,$8D,$77,$0C,$77,$0C,$3E,$0D
	db $00,$00,$00,$07,$FF,$0C,$0B,$0D
	db $0B,$0D,$1B,$0D

DATA_219AFF:
	db $00,$00,$00,$07,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$00,$00,$00,$07
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $00,$00,$00,$07,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$00,$00,$00,$07
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $00,$00,$00,$07,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$FF

DATA_219B3D:
	db $00,$00,$00,$07,$0C,$0D,$0D,$0D
	db $0D,$4D,$0F,$0D,$00,$00,$00,$07
	db $1C,$0D,$2E,$0C,$2F,$0C,$1F,$0D
	db $00,$00,$00,$07,$1C,$8D,$3E,$0C
	db $3F,$0C,$2F,$0D,$00,$00,$00,$07
	db $0C,$8D,$0D,$8D,$0D,$CD,$3F,$0D
	db $00,$00,$00,$07,$FF,$0C,$0B,$0D
	db $0B,$0D,$1B,$0D

;--------------------------------------------------------------------

DATA_219B79:
	db $FC,$10,$FC,$10,$FC,$10,$FC,$10,$3B,$10,$3A,$10,$FC,$10,$FC,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$CC,$10,$CD,$10,$CE,$10,$CF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $BC,$10,$BD,$10,$BE,$10,$BF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $DC,$14,$DD,$14,$DE,$14,$DF,$14,$EC,$14,$ED,$14,$EE,$14,$EF,$14
	db $EC,$14,$ED,$14,$EE,$14,$EF,$14,$EC,$14,$ED,$14,$EE,$14,$EF,$14
	db $FF,$0C,$24,$18,$FF,$0C,$28,$18,$FF,$0C,$28,$18,$FF,$0C,$28,$18
	db $FF,$0C,$25,$18,$FF,$0C,$FF,$0C,$FF,$0C,$FF,$0C,$FF,$0C,$24,$1C
	db $FF,$0C,$28,$1C,$FF,$0C,$25,$1C,$29,$18,$26,$18,$2A,$18,$28,$18
	db $28,$18,$28,$18,$2D,$18,$28,$18,$2D,$18,$28,$18,$2D,$18,$28,$18
	db $29,$18,$27,$18,$FF,$0C,$FF,$0C,$FF,$0C,$FF,$0C,$29,$1C,$26,$1C
	db $2B,$1C,$28,$1C,$28,$1C,$28,$1C,$2D,$1C,$28,$1C,$29,$1C,$27,$1C
	db $00,$18,$10,$18,$01,$18,$11,$18,$14,$14,$15,$14,$16,$14,$17,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $50,$1C,$51,$1C,$70,$1C,$71,$1C,$40,$1C,$41,$1C,$40,$1C,$41,$1C
	db $52,$1C,$53,$1C,$72,$1C,$73,$1C,$42,$1C,$43,$1C,$42,$1C,$43,$1C
	db $BC,$18,$BD,$18,$E8,$18,$E9,$18,$B0,$18,$B1,$18,$B0,$18,$B1,$18
	db $BE,$18,$BF,$18,$EA,$18,$EB,$18,$B2,$18,$B3,$18,$B2,$18,$B3,$18
	db $B2,$18,$B3,$18,$B2,$18,$B3,$18,$B2,$18,$B3,$18,$B2,$18,$B3,$18
	db $B2,$18,$B3,$18,$B2,$18,$B3,$18,$B2,$18,$B3,$18,$B2,$18,$B3,$18
	db $B2,$18,$B3,$18,$B2,$18,$B3,$18,$B2,$18,$B3,$18,$B2,$18,$B3,$18
	db $B2,$18,$B3,$18,$B2,$18,$B3,$18,$B2,$18,$B3,$18,$B2,$18,$B3,$18
	db $B2,$18,$B3,$18,$B2,$18,$B3,$18,$B2,$18,$B3,$18,$B2,$18,$B3,$18
	db $B2,$18,$B3,$18,$B2,$18,$B3,$18,$B2,$18,$B3,$18,$B2,$18,$B3,$18
	db $B2,$18,$B3,$18,$B2,$18,$B3,$18,$B2,$18,$B3,$18,$B2,$18,$B3,$18
	db $B2,$18,$B3,$18,$B2,$18,$B3,$18,$B2,$18,$B3,$18,$B2,$18,$B3,$18
	db $B2,$18,$B3,$18,$B2,$18,$B3,$18,$B2,$18,$B3,$18,$B2,$18,$B3,$18
	db $B2,$18,$B3,$18,$B2,$18,$B3,$18,$B2,$18,$B3,$18,$B2,$18,$B3,$18
	db $B2,$18,$B3,$18,$B2,$18,$B3,$18,$B2,$18,$B3,$18,$B2,$18,$B3,$18
	db $B2,$18,$B3,$18,$B2,$18,$B3,$18,$B2,$18,$B3,$18,$B2,$18,$B3,$18
	db $B2,$18,$B3,$18,$B2,$18,$B3,$18,$B2,$18,$B3,$18,$B2,$18,$B3,$18
	db $B2,$18,$B3,$18,$B2,$18,$B3,$18,$B2,$18,$B3,$18,$B2,$18,$B3,$18
	db $B2,$18,$B3,$18,$B2,$18,$B3,$18,$B2,$18,$B3,$18,$B2,$18,$B3,$18
	db $B2,$18,$B3,$18,$B2,$18,$B3,$18,$B2,$18,$B3,$18,$B2,$18,$B3,$18
	db $B2,$18,$B3,$18,$B2,$18,$B3,$18,$B2,$18,$B3,$18,$B2,$18,$B3,$18
	db $B2,$18,$B3,$18,$B2,$18,$B3,$18,$B2,$18,$B3,$18,$B2,$18,$B3,$18
	db $B2,$18,$B3,$18,$B2,$18,$B3,$18,$8C,$18,$9C,$18,$8D,$18,$9D,$18
	db $8E,$18,$9E,$18,$8F,$18,$9F,$18,$8C,$18,$9C,$18,$8D,$18,$9D,$18
	db $8E,$18,$9E,$18,$8F,$18,$9F,$18,$40,$1E,$50,$1E,$41,$1E,$51,$1E
	db $42,$1E,$52,$1E,$43,$1E,$53,$1E,$8C,$18,$9C,$18,$8D,$18,$9D,$18
	db $8E,$18,$9E,$18,$8F,$18,$9F,$18,$52,$18,$53,$18,$72,$18,$73,$18
	db $52,$18,$53,$18,$72,$18,$73,$18,$50,$18,$51,$18,$70,$18,$71,$18
	db $40,$18,$41,$18,$40,$18,$41,$18,$42,$18,$43,$18,$42,$18,$43,$18
	db $60,$1E,$60,$1E,$61,$1E,$61,$1E,$62,$1E,$62,$1E,$63,$1E,$63,$1E
	db $98,$1C,$99,$1C,$9A,$1C,$9B,$1C,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $18,$18,$18,$18,$19,$18,$19,$18,$02,$18,$12,$18,$03,$18,$13,$18
	db $02,$1C,$12,$1C,$03,$1C,$13,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$0C,$28,$1C,$FF,$0C,$28,$1C,$2D,$1C,$28,$1C,$2D,$1C,$28,$1C

;--------------------------------------------------------------------

DATA_21A379:
	db $00,$0F,$1E,$2D,$3C,$4B,$5A,$69

;--------------------------------------------------------------------

; Note: This table affects what level to go to when entering a 2 player duel.
; The counter for this is incremented each time you enter a duel this way and resets after stage 12.

BattleModeLevelDataPtrs:
;$21A381
	dw SMB3_LevelData_BattleModeStage01_Level
	dw SMB3_LevelData_BattleModeStage02_Level
	dw SMB3_LevelData_BattleModeStage03_Level
	dw SMB3_LevelData_BattleModeStage04_Level
	dw SMB3_LevelData_BattleModeStage05_Level
	dw SMB3_LevelData_BattleModeStage06_Level
	dw SMB3_LevelData_BattleModeStage07_Level
	dw SMB3_LevelData_BattleModeStage08_Level
	dw SMB3_LevelData_BattleModeStage09_Level
	dw SMB3_LevelData_BattleModeStage10_Level
	dw SMB3_LevelData_BattleModeStage11_Level
	dw SMB3_LevelData_BattleModeStage12_Level

SMB3_LevelData_BattleModeStage01_Level:
SMB3_LevelData_BattleModeStage02_Level:
SMB3_LevelData_BattleModeStage03_Level:
SMB3_LevelData_BattleModeStage04_Level:
SMB3_LevelData_BattleModeStage05_Level:
SMB3_LevelData_BattleModeStage06_Level:
SMB3_LevelData_BattleModeStage07_Level:
SMB3_LevelData_BattleModeStage09_Level:
SMB3_LevelData_BattleModeStage10_Level:
SMB3_LevelData_BattleModeStage11_Level:
;$21A399
	dl $000000
	dl $000000
	incbin "Levels/BattleMode/BattleMode1_Level.bin":6-

SMB3_LevelData_BattleModeStage12_Level:
;$21A403
	dl $000000
	dl $000000
	incbin "Levels/BattleMode/BattleMode2_Level.bin":6-

SMB3_LevelData_BattleModeStage08_Level:
;$21A450
	dl $000000
	dl $000000
	incbin "Levels/BattleMode/BattleMode3_Level.bin":6-

;--------------------------------------------------------------------

DATA_21A464:
	db $50,$C1,$51

DATA_21A467:
	db $81,$80,$83,$82
	db $80,$81,$82,$83

DATA_21A46F:
	db $44,$45,$45,$45,$46,$47,$FE,$FE
	db $FE,$48,$49,$4A,$4B,$4B,$4C,$4D
	db $4E,$FF,$FF,$4F

;--------------------------------------------------------------------

; Note: Something related to object loading?

DATA_21A483:
	db $AD,$AE
	db $B1,$B2
	db $AF,$B0
	db $B3,$B4
	db $BD,$BE

DATA_21A48D:
	db $B7,$B7,$B7

DATA_21A490:
	db $B5,$B6,$BF

DATA_21A493:
	db $01,$00

DATA_21A495:
	db $60,$61,$62,$64,$65,$66,$68,$69
	db $6A,$6C,$6D,$6E,$6F,$70,$44,$45
	db $03,$2F,$30,$31,$73,$74,$75,$46
	db $F2

DATA_21A4AE:
	db $67,$63,$6B,$79,$BC,$2E,$72,$40
	db $32

DATA_21A4B7:
	db $80,$90,$91,$80,$80,$90,$93,$95
	db $90,$91,$94,$92,$93,$98,$95,$94
	db $98,$98,$98,$95,$FF,$80,$90,$91
	db $80,$80,$94,$92,$91,$90,$93,$98
	db $95,$FF,$80,$80,$90,$91,$80,$80
	db $80,$80,$94,$92,$91,$80,$80,$80
	db $94,$98,$95,$80,$80,$90,$93,$98
	db $95,$80,$90,$93,$98,$98,$95,$80
	db $94,$98,$98,$98,$95,$80,$94,$98
	db $98,$98,$92,$91,$94,$98,$98,$98
	db $98,$95,$FF

DATA_21A50A:
	db $80,$90,$91,$80,$80,$90,$93,$95
	db $90,$91,$94,$92,$02,$03,$95,$94
	db $03,$98,$03,$95,$FF,$80,$90,$91
	db $80,$80,$94,$92,$91,$90,$93,$03
	db $95,$FF,$80,$80,$90,$91,$80,$80
	db $80,$80,$94,$92,$91,$80,$80,$80
	db $94,$03,$95,$80,$80,$90,$93,$03
	db $95,$80,$90,$93,$98,$03,$95,$80
	db $94,$98,$98,$03,$95,$80,$94,$98
	db $98,$03,$92,$91,$94,$98,$98,$03
	db $03,$95,$FF

DATA_21A55D:
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$01,$01,$00,$00
	db $01,$00,$01,$00,$FF,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$01
	db $00,$FF,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$01,$00,$00,$00,$00,$00,$01
	db $00,$00,$00,$00,$00,$01,$00,$00
	db $00,$00,$00,$01,$00,$00,$00,$00
	db $00,$01,$00,$00,$00,$00,$00,$01
	db $01,$00,$FF

DATA_21A5B0:
	db $04,$03,$05

DATA_21A5B3:
	db $C8,$09

DATA_21A5B5:
	db $C9,$0A

DATA_21A5B7:
	db $CA,$0B

DATA_21A5B9:
	db $CB,$0C

DATA_21A5BB:
	db $CC,$0D

DATA_21A5BD:
	db $CD,$0E

DATA_21A5BF:
	db $CE,$0F

DATA_21A5C1:
	db $CF,$10

DATA_21A5C3:
	db $94,$95

DATA_21A5C5:
	db $84,$81

DATA_21A5C7:
	db $86,$82

DATA_21A5C9:
	db $87,$83,$92,$8F

DATA_21A5CD:
	db $91,$8D

DATA_21A5CF:
	db $04,$05

DATA_21A5D1:
	db $F1,$C1

DATA_21A5D3:
	db $E0,$DB,$DC,$DD,$D8,$F0,$7A,$49
	db $01

DATA_21A5DC:
	db $E1,$DE,$DE,$DE,$02,$F0,$7B,$4A
	db $01

DATA_21A5E5:
	db $2C,$2D

DATA_21A5E7:
	db $34,$35,$F4

DATA_21A5EA:
	db $26,$25,$27,$51,$50,$52,$A1,$A0
	db $A2,$E3,$E2,$E4

DATA_21A5F6:
	db $07,$09,$08,$47,$49,$48,$87,$89
	db $88,$C7,$C9,$C8

DATA_21A602:
	db $0D,$0A,$0E,$4D,$4A,$4E,$8D,$8A
	db $8E,$CD,$CA,$CE

DATA_21A60E:
	db $07,$09,$0A,$0D,$47,$49,$4A,$4D
	db $87,$89,$8A,$8D,$C7,$C9,$CA,$CD
	db $90,$94,$91,$95,$92,$96,$93,$97
	db $98

DATA_21A627:
	db $0C,$0C,$0F,$0F,$4C,$4C,$4F,$4F
	db $8C,$8C,$8F,$8F,$CC,$CC,$CF,$CF
	db $99,$9E,$9A,$9F,$9B,$9E,$9C,$9E
	db $9E,$00,$40,$80,$C0

DATA_21A644:
	db $00,$03,$06,$09

DATA_21A648:
	db $26,$0D,$C2,$51,$4D,$C2,$A1,$8D
	db $C2,$E3,$CD,$C2

DATA_21A654:
	db $25,$0A,$C5,$50,$4A,$C5,$A0,$8A
	db $C5,$E2,$CA,$C5

DATA_21A660:
	db $27,$0E,$C5
	db $52,$4E,$C5
	db $A2,$8E,$C5
	db $E4,$CE,$C5

UNK_21A66C:
	db $C0,$C4,$C3,$C0,$C4,$C3,$C0,$C4
	db $C3,$C0,$C4,$C3,$10,$11,$12

DATA_21A67B:
	db $57,$58,$F8,$F9

DATA_21A67F:
	db $80,$80,$DE,$DE

DATA_21A683:
	db $55,$56,$F6,$F7

DATA_21A687:
	db $55,$53,$57
	db $F6,$F4,$F8

DATA_21A68D:
	db $56,$54,$58
	db $F7,$F5,$F9

DATA_21A693:
	db $00,$03,$1F,$22,$20,$23,$21,$24

DATA_21A69B:
	db $33,$A7,$F5,$35,$A9,$F7,$FF,$AC
	db $FA,$FF,$BF,$FB

;--------------------------------------------------------------------

; Note: Slope tile map16 tiles?

DATA_21A6A7:
	db $37,$AB,$AB

DATA_21A6AA:
	db $27,$9B,$E4

DATA_21A6AD:
	db $25,$99,$E2

DATA_21A6B0:
	db $FF,$A0,$E9

DATA_21A6B3:
	db $FF,$A1,$EA

DATA_21A6B6:
	db $2A,$9E,$E7

DATA_21A6B9:
	db $2B,$9F,$E8

DATA_21A6BC:
	db $28,$9C,$E5

DATA_21A6BF:
	db $29,$9D,$E6

DATA_21A6C2:
	db $FF,$A2,$EB

DATA_21A6C5:
	db $FF,$A3,$EC

DATA_21A6C8:
	db $FF,$A4,$ED

DATA_21A6CB:
	db $FF,$A5,$EE

;--------------------------------------------------------------------

; Note: Map16 data for the 1-2 ground tiles?

DATA_21A6CE:
	db $34,$A8,$F6,$36,$AA,$F8

DATA_21A6D4:
	db $37,$AB,$AB,$26,$9A,$E3

DATA_21A6DA:
	db $37,$AB,$AB,$37,$AB,$F9

;--------------------------------------------------------------------

DATA_21A6E0:
	db $FF,$AB,$AB

DATA_21A6E3:
	db $FF,$A6,$F4

DATA_21A6E6:
	db $86,$86,$C2

DATA_21A6E9:
	db $86,$86,$C3

;--------------------------------------------------------------------

; Note: Something related to the air map16 tiles in 1-2.

DATA_21A6EC:
	db $02,$86,$C0

;--------------------------------------------------------------------

DATA_21A6EF:
	db $06,$09

DATA_21A6F1:
	db $07,$0A

DATA_21A6F3:
	db $08,$0B

;--------------------------------------------------------------------

DATA_21A6F5:
	db $87,$48

;--------------------------------------------------------------------

DATA_21A6F7:
	db $0C,$88,$89

;--------------------------------------------------------------------

DATA_21A6FA:
	db $35,$AA,$AA,$AA,$AB,$AB

DATA_21A700:
	db $02

DATA_21A701:
	db $86

DATA_21A702:
	db $86

DATA_21A703:
	db $86

DATA_21A704:
	db $9B

DATA_21A705:
	db $AB

DATA_21A706:
	db $A0

DATA_21A707:
	db $02

DATA_21A708:
	db $86

DATA_21A709:
	db $86

DATA_21A70A:
	db $86

DATA_21A70B:
	db $86

DATA_21A70C:
	db $86

DATA_21A70D:
	db $A9,$AB,$AB,$AB,$AB,$AB

DATA_21A713:
	db $33,$A8,$A8,$A0

DATA_21A717:
	db $86,$86,$9A,$A6

DATA_21A71B:
	db $86,$86,$A7,$AC

DATA_21A71F:
	db $86,$86,$A9,$BF,$86

DATA_21A724:
	db $86,$9C,$A8,$F6,$F6,$AB

DATA_21A72A:
	db $02,$86,$86,$86,$86,$9B

DATA_21A730:
	db $26,$AB,$AB,$AB,$A0

DATA_21A735:
	db $86,$9D,$AB,$AB,$AB,$AB

DATA_21A73B:
	db $26,$AB,$AB,$AB,$AB,$A0

DATA_21A741:
	db $26,$AB,$AB,$AB,$AB,$AB

DATA_21A747:
	db $26,$AB,$AB,$AB,$AB,$A1

DATA_21A74D:
	db $26,$AB,$AB,$AB,$A1

DATA_21A752:
	db $86,$9E,$AB,$AB,$AB,$AB

DATA_21A758:
	db $35,$AA,$AA,$A1,$86

DATA_21A75D:
	db $86,$9F,$AB,$AB,$AB,$AB

DATA_21A763:
	db $02,$86,$86,$86,$86,$99

DATA_21A769:
	db $33,$A8,$A8,$A8,$AB,$AB

DATA_21A76F:
	db $02

DATA_21A770:
	db $86

DATA_21A771:
	db $86

DATA_21A772:
	db $86

DATA_21A773:
	db $99

DATA_21A774:
	db $AB

DATA_21A775:
	db $A1

DATA_21A776:
	db $86

DATA_21A777:
	db $86

DATA_21A778:
	db $86

DATA_21A779:
	db $86

DATA_21A77A:
	db $86

DATA_21A77B:
	db $86

DATA_21A77C:
	db $A7,$AB,$AB,$AB,$AB,$AB

DATA_21A782:
	db $A8,$A8,$A8,$A8,$A8,$A8

DATA_21A788:
	db $AA,$AA,$AA,$AA,$AA,$AA

DATA_21A78E:
	db $86

DATA_21A78F:
	db $86

DATA_21A790:
	db $86

DATA_21A791:
	db $9C,$AB,$A4

DATA_21A794:
	db $86

DATA_21A795:
	db $86

DATA_21A796:
	db $86

DATA_21A797:
	db $9D,$AB,$A5

DATA_21A79A:
	db $86

DATA_21A79B:
	db $86

DATA_21A79C:
	db $86

DATA_21A79D:
	db $9F,$AB,$A3

DATA_21A7A0:
	db $86

DATA_21A7A1:
	db $86

DATA_21A7A2:
	db $86

DATA_21A7A3:
	db $9E,$AB,$A2

DATA_21A7A6:
	db $86,$86,$86

DATA_21A7A9:
	db $9A,$AB,$AB,$AB,$AB,$AB

DATA_21A7AF:
	db $A7,$A2

DATA_21A7B1:
	db $86,$86,$86,$86,$9C,$AC

DATA_21A7B7:
	db $9A,$A3

DATA_21A7B9:
	db $86,$86,$86,$86,$9D,$A6

DATA_21A7BF:
	db $9A,$AB,$A2

DATA_21A7C2:
	db $86,$86,$86,$9C,$AB,$A6

DATA_21A7C8:
	db $9A,$AB,$A3

DATA_21A7CB:
	db $86,$86,$86,$9D,$AB,$A6

DATA_21A7D1:
	db $9A,$AB,$A4

DATA_21A7D4:
	db $86,$86,$86,$9E,$AB,$A6

DATA_21A7DA:
	db $9A,$AB,$A5

DATA_21A7DD:
	db $86,$86,$86,$9F,$AB,$A6

DATA_21A7E3:
	db $9A,$A4

DATA_21A7E5:
	db $86,$86,$86,$86,$9E,$A6

DATA_21A7EB:
	db $A9,$A5

DATA_21A7ED:
	db $86,$86,$86,$86,$9F,$BF

DATA_21A7F3:
	db $86,$86

DATA_21A7F5:
	db $86,$F7,$F8,$AB,$AB,$AB

DATA_21A7FB:
	db $86,$86

DATA_21A7FD:
	db $86,$C2,$C3,$E3,$AB,$AB

DATA_21A803:
	db $86,$86

DATA_21A805:
	db $86,$F5,$F6,$AB,$AB,$AB

DATA_21A80B:
	db $A7,$F6,$F6,$AB,$AB,$AB

DATA_21A811:
	db $A9,$F8,$F8,$AB,$AB,$AB

DATA_21A817:
	dw DATA_21A6FA,DATA_21A700,DATA_21A72A,DATA_21A707,DATA_21A713,DATA_21A730,DATA_21A73B,DATA_21A741
	dw DATA_21A741,DATA_21A747,DATA_21A74D,DATA_21A758,DATA_21A707,DATA_21A763,DATA_21A76F,DATA_21A769
	dw DATA_21A770,DATA_21A771,DATA_21A772,DATA_21A773,DATA_21A774,DATA_21A775,DATA_21A776,DATA_21A776
	dw DATA_21A776,DATA_21A776,DATA_21A706,DATA_21A705,DATA_21A704,DATA_21A703,DATA_21A702,DATA_21A701
	dw DATA_21A717,DATA_21A717,DATA_21A717,DATA_21A717,DATA_21A717,DATA_21A717,DATA_21A717,DATA_21A717
	dw DATA_21A776,DATA_21A776,DATA_21A776,DATA_21A782,DATA_21A788,DATA_21A776,DATA_21A776,DATA_21A776
	dw DATA_21A78E,DATA_21A794,DATA_21A78F,DATA_21A795,DATA_21A790,DATA_21A796,DATA_21A791,DATA_21A797
	dw DATA_21A7A3,DATA_21A79D,DATA_21A7A2,DATA_21A79C,DATA_21A7A1,DATA_21A79B,DATA_21A7A0,DATA_21A79A
	dw DATA_21A7AF,DATA_21A7B7,DATA_21A7BF,DATA_21A7C8,DATA_21A7D1,DATA_21A7DA,DATA_21A7E3,DATA_21A7EB
	dw DATA_21A7B1,DATA_21A7B9,DATA_21A7C2,DATA_21A7CB,DATA_21A7D4,DATA_21A7DD,DATA_21A7E5,DATA_21A7ED
	dw DATA_21A776,DATA_21A777,DATA_21A778,DATA_21A779,DATA_21A77A,DATA_21A77B,DATA_21A77C,DATA_21A7A9
	dw DATA_21A7A9,DATA_21A70D,DATA_21A70C,DATA_21A70B,DATA_21A70A,DATA_21A709,DATA_21A708,DATA_21A776
	dw DATA_21A776,DATA_21A776,DATA_21A776,DATA_21A71B,DATA_21A71F,DATA_21A776,DATA_21A776,DATA_21A776
	dw DATA_21A7F3,DATA_21A7FB,DATA_21A803,DATA_21A7A6,DATA_21A7F3,DATA_21A7FB,DATA_21A803,DATA_21A7A6
	dw DATA_21A7F3,DATA_21A7FB,DATA_21A724,DATA_21A735,DATA_21A7F5,DATA_21A7FD,DATA_21A80B,DATA_21A7A9
	dw DATA_21A811,DATA_21A7FD,DATA_21A805,DATA_21A752,DATA_21A75D,DATA_21A7FB,DATA_21A803,DATA_21A7A6

;--------------------------------------------------------------------

; Note: Throne Room object data?

DATA_21A917:
	db $02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02
	db $02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02
	db $02,$02,$47,$48,$48,$48,$48,$48,$48,$48,$48,$48,$48,$49,$02,$02
	db $02,$02,$4A,$4B,$4B,$4B,$4B,$4B,$4B,$4B,$4B,$4B,$4B,$4C,$02,$02
	db $02,$02,$4A,$4B,$4B,$4B,$4B,$4B,$4B,$4B,$4B,$4B,$4B,$4C,$02,$02
	db $02,$02,$4A,$4B,$4B,$4B,$4B,$4B,$4B,$4B,$4B,$4B,$4B,$4C,$02,$02
	db $02,$02,$4A,$4B,$4B,$4B,$4B,$4B,$4B,$4B,$4B,$4B,$4B,$4C,$02,$02
	db $02,$02,$4A,$4B,$4B,$4B,$4B,$4B,$4B,$4B,$4B,$4B,$4B,$4C,$02,$02
	db $02,$02,$4A,$4B,$4B,$4B,$4B,$4B,$4B,$4B,$4B,$4B,$4B,$4C,$02,$02
	db $02,$02,$4A,$4B,$4B,$4B,$4B,$4B,$4B,$4B,$4B,$4B,$4B,$4C,$02,$02
	db $02,$02,$4A,$4B,$4B,$4B,$4B,$4B,$4B,$4B,$4B,$4B,$4B,$4C,$02,$02
	db $02,$02,$4A,$4B,$4B,$4B,$4B,$4B,$4B,$4B,$4B,$4B,$4B,$4F,$02,$02
	db $02,$02,$4D,$4E,$4E,$4E,$4E,$4E,$4E,$4E,$4E,$4E,$50,$51,$02,$02
	db $02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02
	db $02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02
	db $9C,$9C,$9C,$9C,$9C,$9C,$9C,$9C,$9C,$9C,$9C,$9C,$9C,$9C,$9C,$9C
	db $C7,$96,$C0,$BF,$C4,$E7,$C5,$C4,$C4,$C4,$C4,$C4,$C4,$C4,$C4,$E7
	db $C7,$82,$CD,$CE,$D1,$82,$CA,$CB,$CB,$CB,$CB,$CB,$CB,$CB,$CB,$82
	db $C7,$82,$C6,$C8,$CE,$82,$CA,$CB,$CB,$CB,$CB,$CB,$CB,$CB,$CB,$82
	db $C7,$82,$C6,$C7,$D3,$82,$CA,$CB,$CF,$D0,$C9,$D1,$CB,$CF,$D0,$82
	db $C7,$82,$C6,$C7,$C7,$82,$CC,$D5,$D2,$C7,$C8,$CE,$D5,$D2,$C7,$82
	db $C7,$82,$C6,$C7,$C7,$82,$CD,$D4,$C7,$C7,$C7,$D3,$52,$53,$C7,$82
	db $C7,$82,$C6,$C7,$C7,$82,$C6,$C7,$C7,$C7,$C7,$D6,$54,$55,$C7,$82
	db $C7,$82,$C6,$C7,$C7,$82,$C6,$C7,$C7,$C7,$C7,$D6,$56,$57,$C7,$82
	db $C7,$83,$C6,$C7,$C7,$83,$C6,$C7,$D6,$58,$59,$59,$59,$59,$59,$59
	db $FF

;--------------------------------------------------------------------

DATA_21AAA8:
	db $80,$40,$20,$10,$08,$04,$02,$01

;--------------------------------------------------------------------

UNK_21AAB0:
	dw DATA_21AAD0,DATA_21AAD0,DATA_21AAD0,DATA_21AAD0
	dw DATA_21AAD0,DATA_21AAD0,DATA_21AAD0,DATA_21AAD0
	dw DATA_21AAD0,DATA_21AAD0,DATA_21AAD0,DATA_21AAD0
	dw DATA_21AAD0,DATA_21AAD0,DATA_21AAD0,DATA_21AAD0

DATA_21AAD0:
	dw DATA_21AAD8
	dw DATA_21AAF8
	dw DATA_21AB15
	dw DATA_21AB3C

DATA_21AAD8:
	db $01,$07,$02,$0C,$0D,$0E,$0F,$07
	db $03,$03,$03,$03,$03,$03,$07,$04
	db $07,$04,$04,$03,$03,$03,$03,$03
	db $07,$04,$07,$04,$04,$04,$04,$04

DATA_21AAF8:
	db $03,$03,$03,$03,$03,$03,$03,$03
	db $03,$03,$03,$03,$03,$03,$03,$03
	db $03,$03,$03,$03,$03,$03,$03,$03
	db $03,$03,$03,$03,$03

DATA_21AB15:
	db $01,$07,$02,$0C,$0D,$0E,$0F,$05
	db $06,$11,$12,$13,$14,$08,$07,$04
	db $07,$04,$04,$08,$03,$03,$03,$03
	db $03,$03,$03,$03,$03,$03,$03,$03
	db $03,$03,$03,$03,$03,$03,$08

DATA_21AB3C:
	db $01,$07,$02,$0C,$0D,$0E,$0F,$05
	db $06,$11,$12,$13,$14,$07,$03,$03
	db $03,$03,$08,$07,$04,$07,$04,$04
	db $08,$08,$04

DATA_21AB57:
	dw DATA_21AB77
	dw DATA_21AB77
	dw DATA_21AB9A
	dw DATA_21AB9F
	dw DATA_21ABC5
	dw DATA_21ABD1
	dw DATA_21ABD7
	dw DATA_21ABD9
	dw DATA_21ABD7
	dw DATA_21ABE5
	dw DATA_21AC07
	dw DATA_21ABD1
	dw DATA_21ABC5
	dw DATA_21ABD1
	dw DATA_21AB9F
	dw DATA_21AC0B

DATA_21AB77:
	db $43,$DE,$93,$98,$AB,$93,$AB,$AB
	db $AB,$37,$A1,$87,$8D,$2C,$13,$13
	db $13,$13,$13,$F0,$F0,$F0,$F0,$F0
	db $F0,$F0,$F0,$F0,$F0,$F0,$F0,$F0
	db $F0,$F0,$F0

DATA_21AB9A:
	db $43,$DE,$42,$42,$02

DATA_21AB9F:
	db $43,$DE,$AB,$E4,$AB,$AB,$AB,$AB
	db $AB,$37,$37,$37,$37,$9A,$13,$13
	db $13,$13,$E2,$F0,$F0,$F0,$F0,$F0
	db $F0,$F0,$F0,$F0,$F0,$F0,$F0,$F0
	db $A8,$A8,$F7,$F5,$A8,$A8

DATA_21ABC5:
	db $43,$DE,$11,$13,$11,$12,$13,$14
	db $15,$16,$16,$16

DATA_21ABD1:
	db $43,$DE,$57,$57,$57,$57

DATA_21ABD7:
	db $43,$DE

DATA_21ABD9:
	db $43,$00,$E6,$E6,$E6,$E6,$E6,$E6
	db $E6,$E6,$E6,$E6

DATA_21ABE5:
	db $43,$00,$00,$14,$15,$AB,$AB,$AB
	db $AB,$37,$37,$37,$37,$9A,$13,$13
	db $13,$13,$E2,$F0,$F0,$F0,$F0,$F0
	db $F0,$F0,$F0,$F0,$F0,$F0,$F0,$F0
	db $56,$56

DATA_21AC07:
	db $43,$DE,$B1,$B2

DATA_21AC0B:							; Something related to slopes collision.
	db $10,$10,$10,$10,$10,$10,$10,$10,$10,$10,$10,$10,$10,$10,$10,$10
	db $0F,$0E,$0D,$0C,$0B,$0A,$09,$08,$07,$06,$05,$04,$03,$02,$01,$00
	db $00,$01,$02,$03,$04,$05,$06,$07,$08,$09,$0A,$0B,$0C,$0D,$0E,$0F
	db $F0,$F0,$F0,$F0,$F0,$F0,$F0,$F0,$F0,$F0,$F0,$F0,$F0,$F0,$F0,$F0
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
	db $00,$10,$20,$30,$40,$50,$60,$70,$80,$90,$A0,$B0,$C0,$D0,$E0,$F0
	db $F0,$E0,$D0,$C0,$B0,$A0,$90,$80,$70,$60,$50,$40,$30,$20,$10,$00
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
	db $F0,$F0,$F0,$F0,$F0,$F0,$F0,$F0,$F0,$F0,$F0,$F0,$F0,$F0,$F0,$F0
	db $F0,$F0,$F0,$F0,$F0,$F0,$F0,$F0,$F0,$F0,$F0,$F0,$F0,$F0,$F0,$F0
	db $02,$02,$02,$02,$03,$03,$03,$03,$04,$04,$04,$04,$03,$03,$03,$02
	db $F0,$F0,$F0,$F0,$F0,$F0,$F0,$F0,$F0,$F0,$F0,$F0,$F0,$F0,$F0,$F0
	db $0F,$0E,$0E,$0D,$0D,$0D,$0C,$0C,$0B,$0B,$0A,$0A,$09,$09,$08,$08
	db $07,$06,$06,$05,$05,$05,$04,$04,$03,$03,$02,$02,$01,$01,$00,$00
	db $00,$00,$01,$01,$02,$02,$03,$03,$04,$04,$05,$05,$05,$06,$06,$07
	db $08,$08,$09,$09,$0A,$0A,$0B,$0B,$0C,$0C,$0D,$0D,$0D,$0E,$0E,$0F
	db $0E,$0D,$0B,$0A,$09,$09,$08,$08,$08,$08,$08,$09,$09,$0A,$0B,$0D
	db $00,$00,$10,$10,$20,$20,$30,$30,$40,$40,$50,$50,$50,$60,$60,$70
	db $80,$80,$90,$90,$A0,$A0,$B0,$B0,$C0,$C0,$D0,$D0,$D0,$E0,$E0,$F0
	db $F0,$E0,$E0,$D0,$D0,$D0,$C0,$C0,$B0,$B0,$A0,$A0,$90,$90,$80,$80
	db $70,$60,$60,$50,$50,$50,$40,$40,$30,$30,$20,$20,$10,$10,$00,$00

DATA_21AD5B:
	db $00,$FD,$03,$00,$00,$00,$00,$00,$00,$00,$00,$00,$FE,$FE,$02,$02
	db $00,$00,$00,$00,$00

DATA_21AD70:
	db $00,$FE,$02,$00,$00,$80,$80,$00
	db $00,$80,$00,$80,$FF,$FF,$01,$01

;--------------------------------------------------------------------

DATA_21AD80:
	;db $BC,$1E
	dw !RAM_SMB3_Level_PreviousLevelDataHi

DATA_21AD82:
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	db $83,$AC
else
	;db $0B,$AC (This is a relative pointer to one of the tables above.)
	dw DATA_21AC0B
endif

;--------------------------------------------------------------------

DATA_21AD84:
	db $FF,$FF
	db $FF,$DA
	db $FF,$FF
	db $FF,$DA
	db $FF,$FF
	db $FF,$C1
	db $FF,$FF
	db $FF,$DA
	db $FF,$FF
	db $FF,$DA
	db $02,$3F
	db $8A,$C0
	db $FF,$FF
	db $FF,$DA
	db $FF,$FF
	db $8A,$DA
	db $FF,$FF
	db $FF,$DA
	db $FF,$FF
	db $FF,$DA
	db $FF,$FF
	db $FF,$DA
	db $FF,$FF
	db $FF,$DA
	db $FF,$FF
	db $FF,$DA
	db $FF,$FF
	db $FF,$C1

;--------------------------------------------------------------------

DATA_21ADBC:
	db $00,$01,$00,$01,$00,$00,$00,$00
	db $01,$00,$00,$00,$03,$00

;--------------------------------------------------------------------

; Note: Something related to the normal sprite tile collision

DATA_21ADCA:
	db $10,$03,$00,$03,$0A,$01,$0A,$07
	db $10,$08,$00,$08,$09,$00,$09,$0F
	db $20,$08,$0C,$08,$15,$00,$15,$0F
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $10,$08,$00,$08,$08,$01,$08,$0E
	db $10,$0C,$00,$0C,$0A,$01,$0A,$17
	db $20,$0C,$00,$0C,$11,$01,$11,$17
	db $10,$08,$00,$08,$08,$08,$08,$08
	db $20,$08,$10,$08,$18,$01,$18,$0E
	db $04,$14,$04,$1C,$0C,$14,$0C,$1C
	db $10,$08,$00,$08,$0A,$00,$0A,$1F
	db $30,$08,$00,$08,$10,$01,$10,$0E
	db $30,$08,$00,$08,$23,$01,$23,$0E
	db $02,$01,$02,$0E,$04,$08

;--------------------------------------------------------------------

DATA_21AE38:
	db $02,$04,$02,$08
	db $01,$0D,$02,$08
	db $02,$0C,$02,$18
	db $0A,$1B,$FE,$12
	db $01,$0E,$02,$1A
	db $05,$0E,$0A,$12
	db $02,$1B,$FE,$22
	db $02,$14,$02,$0C
	db $02,$2B,$FE,$12
	db $02,$14,$02,$1C
	db $02,$0C,$02,$14
	db $00,$1F,$FF,$0E
	db $01,$0E,$FE,$0D
	db $04,$11,$0A,$13
	db $04,$08,$05,$28
	db $02,$2B,$02,$0C

DATA_21AE78:							; Note: Sprite property table
	db $00,$C1,$C1,$00,$02,$01,$C1,$E2,$E0,$C1,$C1,$CC,$CC,$CC,$89,$00
	db $00,$00,$00,$00,$00,$00,$00,$01,$0D,$CC,$C1,$C1,$01,$00,$C1,$C0
	db $00,$C1,$C1,$C1,$A8,$E0,$A8,$A8,$A8,$01,$02,$41,$A8,$07,$AB,$41
	db $40,$41,$41,$01,$C2,$00,$A8,$A8,$A8,$01,$A3,$01,$A8,$01,$A8,$51
	db $01,$C1,$01,$01,$A8,$40,$02,$A6,$01,$A1,$C1,$0D,$0D,$00,$00,$41
	db $41,$A1,$C1,$41,$CC,$41,$07,$07,$01,$41,$A1,$A1,$C1,$A1,$A1,$A1
	db $A1,$01,$01,$0D,$01,$A0,$A0,$4D,$41,$01,$01,$4C,$11,$11,$11,$11
	db $51,$11,$11,$01,$01,$C1,$01,$01,$41,$41,$1D,$1D,$1D,$0D,$1D,$0D
	db $11,$02,$02,$01,$01,$11,$0D,$02,$01,$41,$4D,$4D,$4D,$4D,$4D,$4D
	db $A1,$A1,$A1,$A1,$C6,$C6,$C6,$C6,$C6,$C6,$C6,$00,$00,$AE,$41,$41
	db $02,$02,$0A,$0A,$02,$02,$0A,$0A,$AB,$AB,$A0,$A0,$AF,$0C,$AB,$41
	db $4D,$AF,$AE,$01

;--------------------------------------------------------------------

UNK_21AF2C:
	db $67,$67,$67,$67,$67,$67,$67,$67
	db $67,$67,$67,$67,$67,$67

SMB3_SpikeMap16TilePerTileset:
;$21AF3A
	db $FF,$E3,$FF,$FF,$FF,$FF,$FF,$0D
	db $7E,$FF,$FF,$FF,$FF,$FF

DATA_21AF48:
	db $00,$35,$00,$35,$35,$00,$00,$00
	db $00,$00,$00,$00,$00,$00

DATA_21AF56:
	db $66,$66,$66,$66,$66,$F4,$66,$66
	db $66,$66,$66,$F4,$66,$66

;--------------------------------------------------------------------

; Note: Some kind of power up related table. The $01s seem to be the powerup states that allow for slow falling.

DATA_21AF64:
	db $00,$00,$00,$01,$02,$01,$02

;--------------------------------------------------------------------

DATA_21AF6B:
	db $00,$30,$D0

;--------------------------------------------------------------------

DATA_21AF6E:
	db $80,$00,$D0,$01,$B0,$00,$A0,$01
	db $E0,$00,$70,$01,$10,$01,$40,$01
	db $80,$00,$D0,$01,$B0,$00,$A0,$01
	db $E0,$00,$70,$01,$10

;--------------------------------------------------------------------

DATA_21AF8B:
	db $01,$32,$05

;--------------------------------------------------------------------

DATA_21AF8E:
	db $FF,$01

DATA_21AF90:
	db $FF,$00

;--------------------------------------------------------------------

DATA_21AF92:
	db $40,$67,$66,$05

DATA_21AF96:
	db $67,$40,$40,$40

DATA_21AF9A:
	db $03,$00,$00,$00

UNK_21AF9E:
	db $FC,$04,$01,$02

;--------------------------------------------------------------------

DATA_21AFA2:
	db !Define_SMB3_SpriteID_NorSpr000_UnusedSprite
	db !Define_SMB3_SpriteID_NorSpr024_FastLeftMovingCloudPlatform
	db !Define_SMB3_SpriteID_NorSpr048_MiniBossBass
	db !Define_SMB3_SpriteID_NorSpr06C_GreenKoopa
	db !Define_SMB3_SpriteID_NorSpr090_WeightedPeaPlatform

;--------------------------------------------------------------------

DATA_21AFA7:
	db $46,$44,$40,$42

DATA_21AFAB:
	db $02,$02,$04,$08,$10,$10

;--------------------------------------------------------------------

DATA_21AFB1:
	db $09,$FC

;--------------------------------------------------------------------

DATA_21AFB3:
	db $18,$E8

DATA_21AFB5:
	db $00,$00,$00,$40

DATA_21AFB9:
	db $04,$06,$05,$06

;--------------------------------------------------------------------

DATA_21AFBD:					; Note: Kick speed for certain sprites.
	db $D0,$30

DATA_21AFBF:
	db $00,$40

DATA_21AFC1:
	db $D8,$28

DATA_21AFC3:					;\ Note: X position offsets for carried sprites
	db $0B,$F5,$04,$FC,$04,$0B,$ED,$04	;|
	db $F8,$04,$00				;|
						;|
DATA_21AFCE:					;|
	db $00,$FF,$00,$FF,$00,$00,$FF,$00	;|
	db $FF,$00,$00				;/

DATA_21AFD9:
	db $F8,$08

;--------------------------------------------------------------------

; Note: Seems to be the gravity values for sprites.

DATA_21AFDB:
	db $40,$10

DATA_21AFDD:
	db $03,$01

;--------------------------------------------------------------------

DATA_21AFDF:
	db $40,$00

;--------------------------------------------------------------------

DATA_21AFE1:
	db $F8,$08

DATA_21AFE3:
	db $40,$B0

DATA_21AFE5:
	db $01,$FF

DATA_21AFE7:
	db $20,$D0,$80,$80,$40,$B0

DATA_21AFED:
	db $01,$FF,$01,$FF,$01,$FF

;--------------------------------------------------------------------

UNK_21AFF3:
	db $10,$00,$F0,$E0

;--------------------------------------------------------------------

DATA_21AFF7:
	db $08,$04,$02,$01

;--------------------------------------------------------------------

DATA_21AFFB:
	db $00,$01,$02,$03,$04,$05,$03,$07
	db $00,$01,$02,$03,$04,$05,$02

;--------------------------------------------------------------------

DATA_21B00A:
	db $00,$08,$10,$18,$20,$28

DATA_21B010:
	db $80,$40,$20,$10,$08,$04

DATA_21B016:					; Note: End level card clipping values?
	db $04,$08,$11,$0D
	db $03,$0A,$05,$19

DATA_21B01E:
	db $F8,$08,$F0,$00,$10,$20

DATA_21B024:
	db $00,$00,$00,$00,$01,$02,$03

DATA_21B02B:
	db $F8,$08

DATA_21B02D:
	db $11,$F6,$F6,$11

DATA_21B031:
	db $10,$F0

DATA_21B033:
	db $01,$01,$00,$00,$00,$00,$01,$01
	db $01

DATA_21B03C:
	db $15,$0E,$07,$00

DATA_21B040:
	db $48,$60,$78,$90,$A8,$C0,$D8

;--------------------------------------------------------------------

; Note: Sprite Property tables?

DATA_21B047:
	db $00,$10,$11,$21,$15,$12,$10,$14,$17,$21,$12,$12,$10,$11,$26,$00
	db $00,$00,$00,$00,$00,$00,$21,$27,$39,$12,$13,$10,$11,$25,$11,$12
	db $00,$10,$10,$10,$51,$00,$53,$53,$53,$12,$16,$22,$51,$25,$32,$11
	db $01,$11,$11,$12,$16,$00,$53,$53,$53,$12,$52,$11,$53,$12,$53,$12
	db $13,$11,$11,$11,$53,$01,$16,$34,$11,$51,$11,$37,$37,$00,$00,$11
	db $13,$11,$13,$11,$13,$13,$21,$21,$11,$11,$11,$11,$16,$02,$11,$11
	db $11,$13,$13,$25,$11,$30,$30,$26,$13,$11,$12,$13,$16,$15,$16,$15
	db $17,$15,$17,$15,$17,$15,$15,$16,$17,$17,$2A,$29,$2B,$2A,$2A,$29
	db $16,$1B,$1A,$15,$15,$16,$2A,$19,$17,$11,$56,$56,$56,$56,$56,$56
	db $00,$00,$00,$00,$04,$04,$04,$04,$04,$04,$04,$00,$00,$15,$11,$14
	db $1E,$1D,$1D,$1D,$1E,$1D,$1D,$1D,$00,$00,$01,$14,$14,$15,$B6,$17
	db $35,$11,$15,$B0

DATA_21B0FB:
	db $00,$10,$10,$50,$20,$10,$10,$00,$00,$10,$10,$10,$10,$10,$60,$00
	db $00,$00,$00,$00,$00,$00,$50,$10,$C4,$10,$10,$10,$10,$20,$10,$10
	db $00,$10,$10,$10,$20,$00,$20,$20,$20,$11,$20,$11,$20,$00,$20,$10
	db $00,$10,$10,$10,$20,$00,$20,$20,$20,$10,$90,$11,$90,$11,$90,$10
	db $13,$00,$11,$11,$90,$00,$20,$10,$11,$00,$11,$24,$24,$00,$00,$11
	db $14,$11,$14,$11,$11,$14,$00,$00,$11,$11,$11,$11,$12,$11,$11,$11
	db $11,$11,$11,$11,$11,$00,$00,$00,$10,$10,$11,$11,$12,$12,$10,$10
	db $12,$12,$12,$10,$10,$14,$11,$11,$11,$11,$22,$22,$22,$21,$22,$21
	db $12,$21,$21,$11,$12,$12,$21,$21,$11,$11,$21,$21,$21,$21,$21,$21
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$14
	db $11,$11,$11,$11,$11,$11,$11,$11,$00,$00,$00,$14,$14,$14,$A4,$14
	db $01,$00,$00,$B0

DATA_21B1AF:
	db $00,$81,$81,$06,$02,$01,$85,$A5,$A5,$01,$81,$85,$85,$85,$85,$00
	db $00,$00,$00,$00,$00,$00,$0C,$25,$85,$85,$01,$85,$81,$04,$81,$8A
	db $00,$8A,$8A,$8A,$85,$A5,$85,$85,$85,$03,$0E,$08,$85,$05,$81,$81
	db $80,$81,$81,$21,$82,$80,$85,$85,$85,$21,$85,$01,$85,$21,$85,$A5
	db $0D,$8B,$01,$01,$85,$80,$0E,$85,$25,$85,$85,$85,$85,$00,$00,$25
	db $05,$A5,$A5,$A5,$85,$05,$25,$25,$05,$25,$A5,$A5,$A5,$85,$A5,$A5
	db $A5,$25,$25,$25,$05,$85,$85,$A5,$05,$25,$25,$05,$45,$45,$45,$45
	db $45,$65,$15,$15,$15,$85,$05,$25,$05,$05,$45,$45,$15,$25,$45,$25
	db $45,$05,$05,$05,$25,$25,$05,$05,$25,$A5,$A5,$A5,$A5,$A5,$A5,$A5
	db $05,$05,$05,$05,$85,$85,$85,$85,$85,$85,$85,$00,$00,$A5,$A5,$05
	db $25,$25,$25,$25,$25,$25,$25,$25,$85,$85,$85,$85,$A5,$05,$85,$85
	db $85,$A5,$A5,$A5

DATA_21B263:
	db $00,$00,$01,$01,$01,$02,$00,$00,$04,$06,$02,$02,$00,$01,$04,$00
	db $00,$00,$00,$00,$00,$00,$01,$03,$01,$02,$03,$00,$01,$01,$01,$01
	db $00,$00,$00,$00,$00,$00,$06,$06,$06,$05,$02,$02,$00,$01,$06,$05
	db $05,$05,$05,$05,$05,$00,$06,$06,$06,$05,$06,$11,$06,$05,$06,$06
	db $02,$11,$11,$11,$06,$01,$12,$30,$01,$00,$11,$04,$04,$00,$00,$11
	db $05,$11,$01,$11,$06,$02,$21,$21,$05,$05,$01,$01,$02,$02,$01,$01
	db $01,$05,$05,$01,$01,$30,$30,$05,$02,$03,$05,$00,$12,$11,$12,$11
	db $02,$03,$01,$02,$01,$01,$01,$02,$03,$03,$02,$01,$01,$02,$2A,$22
	db $12,$03,$02,$03,$11,$12,$02,$01,$13,$05,$05,$05,$05,$05,$05,$05
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$11,$01,$01
	db $02,$01,$01,$01,$02,$01,$01,$01,$00,$00,$01,$01,$01,$05,$06,$01
	db $02,$01,$01,$B0

DATA_21B317:
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$02,$02,$02,$05,$00
	db $00,$00,$00,$00,$00,$00,$00,$01,$09,$02,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$05,$00,$00,$09,$00,$00
	db $07,$07,$07,$00,$00,$00,$00,$00,$00,$00,$00,$09,$00,$00,$00,$05
	db $00,$00,$00,$00,$00,$07,$09,$00,$01,$00,$00,$05,$05,$00,$00,$05
	db $01,$00,$00,$02,$00,$01,$07,$07,$09,$09,$00,$00,$09,$00,$00,$00
	db $00,$09,$02,$05,$01,$00,$00,$05,$02,$02,$09,$09,$02,$02,$02,$02
	db $02,$02,$02,$02,$02,$01,$01,$05,$08,$08,$06,$06,$06,$07,$06,$07
	db $02,$03,$03,$09,$01,$05,$05,$03,$01,$01,$05,$05,$05,$05,$05,$05
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$02,$01
	db $07,$07,$07,$07,$07,$07,$07,$07,$00,$00,$00,$00,$00,$05,$00,$05
	db $05,$00,$00,$05

DATA_21B3CB:
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$01,$00
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$01
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$01,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$01,$01,$01,$00,$00,$00
	db $00,$00,$01,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$01,$00,$00,$00,$00,$00,$00,$00,$00
	db $00,$01,$00,$00,$00,$01,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
	db $00,$01,$01,$01,$01,$00,$01,$01,$00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00

;--------------------------------------------------------------------

DATA_21B47F:
	dl DATA_21B49D
	dl DATA_21B4C1
	dl DATA_21B4E5
	dl DATA_21B509
	dl DATA_21B52D

DATA_21B48E:
	dl DATA_21B551
	dl DATA_21B5A2
	dl DATA_21B662
	dl DATA_21B744
	dl DATA_21B81E

DATA_21B49D:
	db $00,$06,$08,$00,$0E,$16,$1C,$00,$47,$24,$27,$33,$2B,$33,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$35,$37,$1C,$39,$00,$3B,$3D
	db $00,$41,$43,$45

DATA_21B4C1:
	db $5A,$00,$14,$14,$14,$72,$7C,$1A,$5A,$30,$92,$00,$04,$0A,$0A,$1E
	db $26,$00,$14,$14,$14,$1E,$8C,$86,$14,$2A,$14,$60,$B8,$96,$86,$86
	db $14,$04,$7C,$00

DATA_21B4E5:
	db $4C,$00,$4A,$52,$52,$00,$00,$00,$42,$C6,$06,$22,$36,$3A,$AA,$AA
	db $BA,$C0,$C6,$C6,$24,$00,$C6,$C6,$C6,$CA,$CA,$D0,$DC,$00,$00,$AE
	db $2A,$30,$CA,$28

DATA_21B509:
	db $46,$46,$46,$46,$54,$62,$70,$70,$70,$00,$82,$82,$78,$78,$2A,$2A
	db $36,$22,$2A,$22,$46,$C2,$C2,$9A,$8E,$94,$A6,$B6,$82,$10,$16,$16
	db $16,$16,$16,$16

DATA_21B52D:
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$12,$00,$44
	db $24,$24,$24,$24,$34,$34,$34,$34,$00,$00,$6C,$6A,$00,$5A,$52,$4A
	db $0E,$00,$12,$06

DATA_21B551:
	db $AC,$AE,$B8,$BA,$B8,$BA,$80,$80,$8E,$8E,$98,$9A,$9C,$9E,$B0,$B2
	db $B4,$B6,$B8,$BA,$BC,$BE,$A4,$A6,$A0,$A2,$A0,$A2,$78,$7A,$78,$7A
	db $76,$76,$74,$74,$C4,$C8,$C4,$80,$82,$84,$86,$54,$54,$92,$92,$90
	db $90,$94,$94,$50,$50,$52,$52,$58,$5A,$74,$76,$5C,$5E,$C8,$C8,$CA
	db $CA,$50,$50,$52,$52,$54,$54,$FA,$FA,$FA,$FA,$B4,$B2,$B2,$B4,$B8
	db $B6

DATA_21B5A2:
	db $94,$96,$B8,$BE,$8E,$9E,$86,$96,$80,$82,$A0,$A2,$A4,$A6,$A8,$AA
	db $B4,$B6,$70,$70,$8E,$9C,$9C,$9C,$9C,$9E,$28,$2A,$28,$2C,$A0,$A2
	db $AC,$AE,$A4,$A6,$A8,$AA,$B8,$BA,$BC,$BE,$A0,$A2,$A4,$A6,$A8,$AA
	db $80,$82,$92,$8C,$A0,$8A,$80,$82,$92,$86,$88,$8A,$80,$82,$92,$86
	db $88,$90,$80,$82,$92,$8C,$A0,$8A,$80,$82,$92,$8C,$A0,$90,$70,$A2
	db $A4,$70,$70,$70,$70,$98,$9A,$70,$70,$70,$80,$82,$82,$82,$84,$86
	db $C0,$C2,$C4,$C6,$C8,$CA,$CC,$CE,$D0,$D2,$D4,$F8,$DC,$DE,$94,$94
	db $D8,$DA,$80,$82,$84,$86,$88,$8A,$8C,$8E,$96,$98,$E4,$E4,$E0,$E0
	db $E0,$E0,$BC,$BE,$E2,$E2,$E6,$E8,$E6,$EE,$E6,$EE,$70,$E0,$E2,$E0
	db $E2,$70,$E0,$E2,$E0,$E2,$50,$50,$52,$52,$54,$54,$50,$50,$52,$52
	db $54,$54,$22,$22,$24,$24,$34,$34,$3C,$3C,$3C,$3C,$3C,$3C,$22,$22
	db $24,$24,$34,$34,$CE,$DE,$EA,$EC,$B0,$B2,$B4,$B6,$B8,$BA,$74,$74

DATA_21B662:
	db $90,$92,$9C,$9E,$9C,$9E,$AA,$AC,$84,$84,$86,$86,$9C,$9E,$80,$80
	db $82,$82,$8A,$8A,$B4,$B6,$90,$92,$A8,$A8,$94,$96,$98,$9A,$A0,$A2
	db $88,$8C,$FC,$FC,$FE,$FE,$D6,$D6,$0C,$0E,$94,$96,$90,$92,$A0,$A0
	db $80,$82,$84,$86,$88,$88,$90,$92,$90,$92,$30,$32,$34,$36,$26,$2E
	db $26,$38,$90,$8E,$8A,$8C,$8A,$8C,$8A,$8C,$3C,$3E,$84,$94,$84,$96
	db $84,$96,$40,$40,$4E,$4C,$40,$40,$44,$46,$40,$40,$4E,$4C,$40,$40
	db $44,$46,$40,$40,$4E,$4C,$40,$40,$44,$46,$52,$52,$6C,$6C,$58,$58
	db $5C,$5C,$78,$78,$66,$68,$78,$78,$68,$66,$40,$40,$46,$46,$40,$40
	db $44,$44,$00,$00,$04,$06,$00,$00,$0C,$0E,$08,$08,$10,$12,$00,$00
	db $06,$04,$00,$00,$0E,$0C,$08,$08,$12,$10,$78,$78,$2C,$18,$78,$78
	db $1C,$1E,$20,$20,$24,$24,$26,$26,$2A,$2A,$80,$82,$86,$88,$00,$04
	db $02,$06,$08,$0C,$0A,$0E,$10,$14,$12,$26,$AC,$AE,$98,$9A,$94,$96
	db $A0,$A2,$A4,$A6,$A4,$A6,$98,$9A,$9C,$9E,$B0,$B0,$B2,$B2,$B0,$B0
	db $80,$82,$8C,$A0,$80,$82,$86,$88,$80,$82,$86,$88,$E6,$E8,$E6,$EE
	db $E6,$EE

DATA_21B744:
	db $7C,$7E,$5A,$5C,$5E,$5E,$5C,$5A,$5E,$5E,$8A,$9A,$8C,$9C,$8E,$9E
	db $90,$92,$9C,$9E,$9C,$9E,$B0,$B2,$BA,$B8,$B0,$B2,$BA,$B8,$B0,$B2
	db $BA,$B8,$A0,$A2,$A4,$A6,$A8,$AA,$AC,$AE,$8C,$8E,$92,$94,$98,$8E
	db $9A,$9C,$A8,$AA,$AC,$AE,$80,$82,$86,$88,$80,$82,$86,$88,$80,$82
	db $86,$88,$70,$70,$BC,$BE,$CA,$C4,$C2,$C4,$FC,$FC,$FC,$FC,$FC,$FC
	db $D0,$D0,$D2,$D4,$94,$96,$90,$92,$9A,$9A,$9A,$9A,$A0,$A0,$9A,$9A
	db $A2,$A4,$00,$02,$04,$06,$08,$08,$08,$08,$08,$08,$0E,$0E,$0A,$0C
	db $D8,$DA,$DA,$D8,$D8,$DA,$EA,$EA,$DC,$DE,$DC,$DE,$DC,$DE,$DC,$DC
	db $DE,$DE,$E6,$E8,$E6,$EE,$E6,$EE,$AC,$AE,$B8,$BA,$B8,$BA,$18,$18
	db $3A,$3A,$00,$02,$18,$18,$3A,$3A,$18,$18,$1E,$1E,$1E,$1E,$1E,$1E
	db $00,$00,$1C,$1C,$1E,$1E,$50,$5C,$68,$6A,$50,$5C,$56,$58,$50,$52
	db $68,$6A,$50,$52,$56,$58,$40,$42,$64,$66,$40,$42,$74,$76,$44,$46
	db $7A,$66,$70,$72,$74,$76,$70,$72,$64,$66,$7C,$7E,$74,$76,$7C,$7E
	db $64,$66,$60,$62,$6E,$78,$48,$4A,$4C,$4E

DATA_21B81E:
	db $FC,$FC,$FE,$FE,$D6,$D6,$BC,$BC,$BA,$BA,$BC,$BC,$98,$98,$94,$98
	db $94,$98,$9C,$70,$9E,$70,$98,$70,$9A,$70,$8C,$92,$8E,$94,$70,$70
	db $70,$70,$8A,$90,$E0,$E0,$E2,$E2,$E4,$E4,$E2,$E2,$E0,$E0,$70,$70
	db $E4,$E4,$70,$70,$F0,$F2,$E2,$E2,$F4,$F6,$E2,$E2,$F0,$F2,$70,$70
	db $F4,$F6,$70,$70,$B0,$B2,$B4,$B6,$B0,$B2,$B8,$B8,$BA,$BA,$B2,$B2
	db $B4,$B4,$F4,$F4,$F6,$F6,$F8,$F8,$FA,$FA,$E0,$E2,$FC,$FE,$D8,$DA
	db $EA,$EC,$E4,$E8,$E6,$E6,$E8,$E4,$E6,$E6,$A4,$A6,$A8,$70

;--------------------------------------------------------------------

DATA_21B88C:
	db $08,$F8

DATA_21B88E:
	db $01,$FF

DATA_21B890:
	db $08,$F8

;--------------------------------------------------------------------

DATA_21B892:
	db $04,$01,$00,$00,$00,$00

;--------------------------------------------------------------------

DATA_21B898:
	db $00,$00,$01,$01,$02,$02,$02,$01
	db $01,$01,$00,$08,$20,$10,$20,$05
	db $20,$0C,$20,$03,$04

;--------------------------------------------------------------------

DATA_21B8AD:
	db !Define_SMB3_SpriteID_NorSpr000_UnusedSprite,!Define_SMB3_SpriteID_NorSpr000_UnusedSprite,!Define_SMB3_SpriteID_NorSpr019_FireFlower
	db !Define_SMB3_SpriteID_NorSpr01E_RaccoonLeaf,!Define_SMB3_SpriteID_NorSpr00C_BouncingPowerUps,!Define_SMB3_SpriteID_NorSpr00D_Mushroom
	db !Define_SMB3_SpriteID_NorSpr01F_VineHead,!Define_SMB3_SpriteID_NorSpr00B_1upMushroom

DATA_21B8B5:
	db $03,$06,$08,$07,$05,$04,$0B,$0E

DATA_21B8BD:
	db $00,$C0,$C0,$D0,$E0,$F0,$00,$10
	db $20,$30,$40

;--------------------------------------------------------------------

DATA_21B8C8:
	db $00,$03,$00,$00,$00,$00,$00,$00
	db $10,$00,$20,$00

;--------------------------------------------------------------------

; Note: Sprite tile data for bounce sprites?

DATA_21B8D4:
	db $78,$7A,$78,$7A,$58,$5A,$0C,$0E
	db $78,$7A,$60,$62,$0C,$0E,$7A,$7A

;--------------------------------------------------------------------

DATA_21B8E4:
	db $00,$01,$02,$03

;--------------------------------------------------------------------

DATA_21B8E8:
	db $00,$05,$04,$06,$1C,$0E,$1C,$14
	db $18,$0A,$18,$17

;--------------------------------------------------------------------

DATA_21B8F4:
	db $04,$E0,$E0,$E0

DATA_21B8F8:
	db $08,$FF,$FF,$FF

;--------------------------------------------------------------------

DATA_21B8FC:
	db $02,$FE

DATA_21B8FE:
	db $20,$E0

DATA_21B900:
	db $0A,$F6,$08

;--------------------------------------------------------------------

DATA_21B903:
	db $00,$08

;--------------------------------------------------------------------

DATA_21B905:
	dw $0000,$021F,$7FFF,$4310
	dw $0000,$117A,$7FFF,$56B5
	dw $0000,$021F,$7FFF,$001F
	dw $0000,$02FF,$7FFF,$7231
	dw $0000,$117A,$7FFF,$3DFF
	dw $0000,$02FF,$7FFF,$26D2
	dw $0000,$1239,$7FFF,$628B

;--------------------------------------------------------------------

UNK_21B93D:
	db $48,$49,$4A,$48,$49,$48,$4A,$37
	db $37,$4A,$37,$37,$48,$37

;--------------------------------------------------------------------

DATA_21B94B:
	db $10,$F0

DATA_21B94D:
	db $00,$07,$0E

DATA_21B950:
	db $63,$63,$9F,$63,$63,$00,$3F,$63
	db $3F,$9F,$23,$63,$00,$33,$33,$33
	db $9F,$43,$63,$00,$23

DATA_21B965:
	db $BF,$BF,$41,$83,$FF,$00,$7F,$BF
	db $BF,$41,$83,$FF,$00,$7F,$DF,$DF
	db $41,$83,$7F,$00,$9F

DATA_21B97A:
	db $D0,$D0,$F0,$D0,$B0,$00,$B0,$C0
	db $C8,$E0,$C0,$A0,$00,$A0,$B0,$B0
	db $B0,$B0,$90,$00,$90

DATA_21B98F:
	db $F2,$1E

;--------------------------------------------------------------------

DATA_21B991:
	db $0A,$12

DATA_21B993:
	db $04,$0A

DATA_21B995:
	db $00

DATA_21B996:
	db $40,$00,$40,$00,$00,$40,$40,$00
	db $00,$00,$00,$00,$40,$40,$40,$00
	db $00

DATA_21B9A7:
	db $12,$15,$18,$1B,$1E,$21,$24,$38

UNK_21B9AF:
	db $3E,$38,$20,$22,$24,$3A,$3E,$3A
	db $2C,$2E,$30,$3C,$3E,$3C,$20,$22
	db $24,$38,$3E,$38,$26,$28,$2A,$3A
	db $3E,$3A,$32,$34,$36,$3C,$3E,$3C
	db $26,$28,$2A,$0C,$0E,$3E,$10,$12
	db $3E,$04,$06,$3E,$08,$0A,$3E,$00
	db $00,$3E,$02,$02,$3E,$3E,$04,$06
	db $3E,$08,$0A,$3E,$0C,$0E,$3E,$10
	db $12,$3E,$14,$16,$3E,$18,$1A,$1C
	db $1C,$3E,$1E,$1E,$3E,$14,$16,$3E
	db $18,$1A,$3E,$40,$42,$44,$46,$48
	db $4A,$40,$42,$44,$46,$4C,$4E,$40
	db $50,$44,$52,$54,$4A,$60,$62,$64
	db $66,$68,$6A,$60,$62,$64,$6C,$6E
	db $70,$60,$72,$64,$74,$76,$6A,$54
	db $40,$42,$52,$44,$46,$54,$40,$42
	db $52,$48,$4A,$54,$4C,$42,$4E,$50
	db $46,$6E,$70,$72,$60,$62,$64,$6E
	db $70,$72,$60,$66,$68,$6E,$74,$72
	db $6A,$6C,$64,$50,$52,$40,$42,$44
	db $46,$50,$52,$40,$48,$4A,$4C,$50
	db $54,$40,$4E,$56,$46,$62,$68,$3E
	db $6A,$6C,$66,$62,$68,$3E,$6A,$6E
	db $70,$62,$60,$3E,$3E,$64,$66,$40
	db $42,$44,$46,$48,$4A,$40,$42,$44
	db $4C,$4E,$50,$40,$52,$44,$54,$56
	db $4A

DATA_21BA80:
	db $4B,$4B,$4D,$4F

DATA_21BA84:
	db $05,$05,$FB,$0A,$0A,$0A,$FF,$0F
	db $08,$08,$FB,$0D

DATA_21BA90:
	db $F4,$F4,$0C,$F2,$FA,$FA,$0A,$F8
	db $F5,$F5,$0C,$F3,$14,$14,$FC,$16
	db $0E,$0E,$FE,$10,$13,$13,$FC,$15

DATA_21BAA8:
	db $FF,$FF,$00,$FF,$FF,$FF,$00,$FF
	db $FF,$FF,$00,$FF

DATA_21BAB4:
	db $00,$00,$FF,$00,$00,$00,$FF,$00
	db $00,$00,$FF,$00

DATA_21BAC0:
	db $04,$00,$04,$04,$00,$04,$08

;--------------------------------------------------------------------

DATA_21BAC7:
	db $30,$18,$C0,$58,$80,$98,$18,$70

DATA_21BACF:
	db $10,$48,$68,$70,$98,$00,$30,$58

;--------------------------------------------------------------------

DATA_21BAD7:
	db $C0,$D5,$C9,$D3,$DF

DATA_21BADC:
	db $03,$02,$02,$03,$03,$AF,$BF,$81
	db $41

DATA_21BAE5:
	db $01,$02,$04,$08

DATA_21BAE9:
	db $20,$30,$40

DATA_21BAEC:
	db $D0,$20

DATA_21BAEE:
	db $18,$E8

DATA_21BAF0:
	db $01,$FF

DATA_21BAF2:
	db $40,$00

DATA_21BAF4:
	db $00,$20,$40,$50,$60,$70,$80,$A0

DATA_21BAFC:
	db $7C,$7E,$7E,$7C

DATA_21BB00:
	db $7E,$7C,$7C,$7E

DATA_21BB04:
	db $29,$69,$E9,$A9

;--------------------------------------------------------------------

DATA_21BB08:
	db $F8,$08

;--------------------------------------------------------------------

DATA_21BB0A:
	db $10,$F0

;--------------------------------------------------------------------

UNK_21BB0C:
	db $51,$00,$53,$53,$53,$12,$16,$12
	db $51,$25,$32,$11,$01,$11,$11,$12
	db $16,$00,$53,$53,$53,$12,$52,$11
	db $53,$12,$53,$12,$13,$11,$11,$11
	db $53,$01,$16,$34

;--------------------------------------------------------------------

DATA_21BB30:
	db $20,$00,$20,$20,$20,$11,$20,$11,$20,$00,$20,$10,$00,$10,$10,$10
	db $20,$00,$20,$20,$20,$10,$90,$11,$90,$11,$90,$10,$13,$00,$11,$11
	db $90,$00,$20,$10,$85,$A5,$85,$85,$85,$03,$0E,$08,$85,$05,$81,$81
	db $80,$81,$81,$21,$82,$80,$85,$85,$85,$21,$85,$01,$85,$21,$85,$A5
	db $0D,$8B,$01,$01,$85,$80,$0E,$85,$0E,$00,$0E,$0E,$0E,$0A,$0A,$0B
	db $0E,$1A,$93,$12,$12,$12,$12,$0A,$05,$05,$0E,$0E,$0E,$0A,$93,$CF
	db $0E,$0A,$1A,$93,$0A,$00,$CF,$CF,$0E,$12,$0A,$00,$00,$00,$00,$00
	db $00,$00,$05,$00,$00,$09,$00,$00,$07,$07,$07,$00,$00,$00,$00,$00
	db $00,$00,$00,$09,$00,$00,$00,$05,$00,$00,$00,$00,$00,$07,$09,$00

;--------------------------------------------------------------------

DATA_21BBC0:
	db $18,$17,$17,$16

DATA_21BBC4:
	db $47,$4B,$5B

DATA_21BBC7:
	db $00,$08,$08,$00

DATA_21BBCB:
	db $00,$00,$50,$40,$30,$20,$00,$E0
	db $D0,$C0,$B0

DATA_21BBD6:
	db $00,$10,$00,$10

DATA_21BBDA:
	db $00,$00,$10,$10

DATA_21BBDE:
	db $F0,$10,$F0,$10

DATA_21BBE2:
	db $C0,$C0,$D8,$D8

DATA_21BBE6:
	db $A0,$A2,$A4,$A0,$A6,$A8,$AA,$AC
	db $80,$82,$84,$86,$88,$8A,$8C,$8E

DATA_21BBF6:
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00

;--------------------------------------------------------------------

DATA_21BC06:
	db $F0,$10

;--------------------------------------------------------------------

DATA_21BC08:
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$02,$03,$02,$01,$00
	db $01,$03,$05,$07,$08,$09,$0A,$0A

DATA_21BC20:
	db $F2,$F2,$F2,$F2,$F2,$F2,$F2,$F2
	db $F2,$F2,$F2,$F3,$F4,$F3,$F2,$F2
	db $F1,$F2,$F3,$F5,$F7,$FA,$FD,$00

;--------------------------------------------------------------------

; Note: Tables for normal sprite 25.

DATA_21BC38:							; Note: Player X position (High)
	db $10,$00,$00,$11,$00,$00,$00,$01
	db $01,$01,$11,$11,$01,$12,$23,$01
	db $12,$22,$00,$01,$12,$01,$01,$00

DATA_21BC50:							; Note: Player X position (Low)
	db $8C,$8E,$4E,$06,$43,$6D,$59,$50
	db $81,$B6,$2D,$3A,$8C,$22,$62,$6A
	db $8C,$4C,$4A,$A6,$4D,$4A,$22,$46

DATA_21BC68:							; Note: Player Y position (Low)
	db $44,$86,$84,$62,$57,$53,$73,$99
	db $95,$57,$74,$53,$37,$55,$57,$53
	db $57,$99,$A8,$A6,$68,$48,$84,$44

DATA_21BC80:							; Note: Screen X Position
	db $10,$08,$08,$81,$00,$08,$00,$08
	db $08,$01,$81,$81,$01,$12,$23,$01
	db $12,$22,$00,$01,$12,$01,$08,$00

;--------------------------------------------------------------------

DATA_21BC98:
	db $F0,$F0,$10,$10,$F0,$10

DATA_21BC9E:
	db $CA,$CA,$B9,$B9,$C1,$C1

DATA_21BCA4:
	db $20,$20,$E0,$E0,$00,$00

DATA_21BCAA:
	db $13,$D7,$F9,$36,$7F

;--------------------------------------------------------------------

DATA_21BCAF:
	db $01,$FF

DATA_21BCB1:
	db $10,$F0

DATA_21BCB3:
	db $F0,$10

;--------------------------------------------------------------------

DATA_21BCB5:
	db $00,$40,$00

;--------------------------------------------------------------------

DATA_21BCB8:
	db $7F,$1F,$1F,$17

;--------------------------------------------------------------------

DATA_21BCBC:
	db $F0,$10

DATA_21BCBE:
	db $FF,$01

DATA_21BCC0:
	db $41,$23

;--------------------------------------------------------------------

DATA_21BCC2:
	db $02,$06,$0A

DATA_21BCC5:
	db $02,$FF,$FC

;--------------------------------------------------------------------

; Note: Line guided platform tables.

DATA_21BCC8:
	db $FA,$06,$FB,$05,$FC,$04,$FD,$03
	db $FE,$02,$FF,$01,$00

DATA_21BCD5:
	db $03,$02,$02,$02,$02,$00,$00,$00
	db $01,$01,$01,$01,$03,$03,$03,$03

DATA_21BCE5:
	db $C9,$CF,$CE,$CB,$C8,$CA,$CD,$CC
	db $C9,$CE,$CF,$CB,$C8,$CA,$CC,$CD

DATA_21BCF5:
	db $0A,$10,$0F,$0C,$09,$0B,$0E,$0D
	db $0A,$0F,$10,$0C,$09,$0B,$0D,$0E

DATA_21BD05:
	db $F0,$F0,$F0,$F0,$00,$10,$10,$10
	db $10,$10,$10,$10,$00,$F0,$F0,$F0
	db $00

DATA_21BD16:
	db $00,$08,$08,$10,$10,$10,$08,$08
	db $00,$F8,$F8,$F0,$F0,$F0,$F8,$F8
	db $00

;--------------------------------------------------------------------

DATA_21BD27:
	db $00,$40

DATA_21BD29:
	db $F8,$08

;--------------------------------------------------------------------

DATA_21BD2B:
	db $04,$04,$04,$04,$04,$02,$02,$03
	db $03,$03,$03,$02,$02,$02,$02

DATA_21BD3A:
	db $00,$02,$03,$02,$01,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00

DATA_21BD58:
	db $00,$F4,$F4,$F4,$F4,$F4,$F4,$F2
	db $F0,$EF,$EE,$EE,$EF,$F0,$F2,$F4
	db $F6,$F9,$FC,$FF,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00

;--------------------------------------------------------------------

DATA_21BD76:
	db $00,$FF,$FE,$FD,$FD,$FD,$FE,$FF
	db $00,$01,$02,$03,$03,$03,$02,$01
	db $00,$FF,$FF,$FF,$00,$01,$01,$01

;--------------------------------------------------------------------

DATA_21BD8E:
	db $00,$00,$FF,$FF,$00,$00,$01,$00

;--------------------------------------------------------------------

DATA_21BD96:
	db $00,$FE,$FC,$FA,$F8,$F8,$F8,$F8
	db $F8,$FA,$FC,$FE,$F4,$F8,$FC,$08
	db $04,$02,$01

;--------------------------------------------------------------------

SMB3_ToadHouseTextBoxStripeImage:
;$21BDA9
.TopRow:
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	db $92,$21,$90,$21,$90,$21,$90,$21
	db $90,$21,$90,$21,$90,$21,$90,$21
	db $90,$21,$90,$21,$90,$21,$90,$21
	db $90,$21,$90,$21,$90,$21,$92,$61

.MiddleRow:
	db $91,$21,$FE,$21,$FE,$21,$FE,$21
	db $FE,$21,$FE,$21,$FE,$21,$FE,$21
	db $FE,$21,$FE,$21,$FE,$21,$FE,$21
	db $FE,$21,$FE,$21,$FE,$21,$91,$61

.BottomRow:
	db $92,$A1,$90,$A1,$90,$A1,$90,$A1
	db $90,$A1,$90,$A1,$90,$A1,$90,$A1
	db $90,$A1,$90,$A1,$90,$A1,$90,$A1
	db $90,$A1,$90,$A1,$90,$A1,$92,$E1
else
	db $92,$21,$90,$21,$90,$21,$90,$21
	db $90,$21,$90,$21,$90,$21,$90,$21
	db $90,$21,$90,$21,$90,$21,$90,$21
	db $90,$21,$90,$21,$90,$21,$90,$21
	db $90,$21,$92,$61

.MiddleRow:
	db $91,$21,$FE,$21,$FE,$21,$FE,$21
	db $FE,$21,$FE,$21,$FE,$21,$FE,$21
	db $FE,$21,$FE,$21,$FE,$21,$FE,$21
	db $FE,$21,$FE,$21,$FE,$21,$FE,$21
	db $FE,$21,$91,$61

.BottomRow:
	db $92,$A1,$90,$A1,$90,$A1,$90,$A1
	db $90,$A1,$90,$A1,$90,$A1,$90,$A1
	db $90,$A1,$90,$A1,$90,$A1,$90,$A1
	db $90,$A1,$90,$A1,$90,$A1,$90,$A1
	db $90,$A1,$92,$E1
endif

SMB3_ToadHouseToadTextBoxWindowRowIndex:
	db SMB3_ToadHouseTextBoxStripeImage_TopRow-SMB3_ToadHouseTextBoxStripeImage
	db SMB3_ToadHouseTextBoxStripeImage_MiddleRow-SMB3_ToadHouseTextBoxStripeImage
	db SMB3_ToadHouseTextBoxStripeImage_MiddleRow-SMB3_ToadHouseTextBoxStripeImage
	db SMB3_ToadHouseTextBoxStripeImage_MiddleRow-SMB3_ToadHouseTextBoxStripeImage
	db SMB3_ToadHouseTextBoxStripeImage_MiddleRow-SMB3_ToadHouseTextBoxStripeImage
	db SMB3_ToadHouseTextBoxStripeImage_MiddleRow-SMB3_ToadHouseTextBoxStripeImage
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	db SMB3_ToadHouseTextBoxStripeImage_MiddleRow-SMB3_ToadHouseTextBoxStripeImage
endif
	db SMB3_ToadHouseTextBoxStripeImage_BottomRow-SMB3_ToadHouseTextBoxStripeImage
.End:

cleartable
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR]
	table "Tables/Fonts/Layer3_dialogue_br.txt"
else
	table "Tables/Fonts/ThroneRoom.txt"
endif

SMB3_ToadHouseToadText:
.TopHalf:
..RegularToadHouse:
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	db $FE,$6E,$66,$87,$8D,$69,$FE,$8E,$86,$84,$C0,$68,$FE,$FE
	db $FE,$60,$AE,$A8,$FE,$66,$CD,$86,$87,$88,$65,$8B,$FE,$FE
	db $FE,$C1,$67,$88,$80,$84,$65,$A6,$FE,$FE,$FE,$FE,$FE,$FE
elseif !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000
	db "Escolha um ba). "
	db "Tal conte)do    "
	db "vai te ajudar   "
	db "na sua jornada. "
	db "                "
else
	db "Pick a box.   "
	db "Its contents  "
	db "will help you "
	db "on your way.  "
	db "              "
endif

..Secret1_3_ToadHouse:
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	db $FE,$FE,$69,$8B,$8F,$63,$FE,$8F,$61,$80,$A6,$FE,$FE,$FE
	db $FE,$FE,$86,$64,$67,$8B,$FE,$67,$88,$93,$A5,$FE,$FE,$FE
	db $FE,$FE,$8E,$86,$CD,$86,$C6,$CE,$FE,$FE,$FE,$FE,$FE,$FE
elseif !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000
	db "Um sopro nessa  "
	db "flauta vai te   "
	db "mandar para uma "
	db "terra distante! "
	db "                "
else
	db "One toot on   "
	db "this whistle  "
	db "will send you "
	db "to a far away "
	db "land!         "
endif

..BlueToadHouse:
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	db $FE,$60,$A9,$CD,$FE,$A2,$84,$65,$CD,$82,$CA,$CD,$80,$FE
	db $FE,$C3,$7A,$88,$8D,$87,$61,$FE,$86,$67,$D6,$84,$8B,$FE
	db $FE,$A5,$8B,$C5,$65,$A7,$C0,$C3,$FE,$FE,$FE,$FE,$FE,$FE
elseif !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000
	db "Ol/! Voc^ achou "
	db "a minha loja de "
	db "itens m|sticos  "
	db "e maravilhosos! "
	db "                "
else
	db "Hello! You    "
	db "found my shop "
	db "of strange and"
	db "wonderful     "
	db "things!       "
endif

if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
.LowerHalf:
..RegularToadHouse:
	db $FE,$7E,$76,$97,$9D,$79,$FE,$9E,$96,$94,$81,$78,$FE,$FE
	db $FE,$70,$78,$B8,$EF,$76,$DD,$96,$97,$98,$75,$9B,$FE,$FE
	db $FE,$D1,$77,$98,$81,$94,$75,$B6,$EF,$EF,$EF,$FE,$FE,$FE

..Secret1_3_ToadHouse:
	db $FE,$FE,$79,$9B,$C7,$73,$FE,$C7,$71,$81,$B6,$FE,$FE,$FE
	db $FE,$FE,$96,$74,$77,$9B,$FE,$77,$98,$8C,$B5,$FE,$FE,$FE
	db $FE,$FE,$9E,$96,$DD,$96,$9E,$DE,$EF,$EF,$FE,$FE,$FE,$FE

..BlueToadHouse:
	db $FE,$70,$B9,$DD,$FE,$B2,$94,$75,$DD,$83,$DA,$DD,$81,$FE
	db $FE,$D3,$7B,$98,$9D,$97,$71,$FE,$96,$77,$8C,$94,$9B,$FE
	db $FE,$B5,$9B,$9D,$75,$B7,$81,$D3,$FE,$FE,$FE,$FE,$FE,$FE
endif

cleartable

DATA_21BEEE:
	db SMB3_ToadHouseToadText_TopHalf_Secret1_3_ToadHouse-SMB3_ToadHouseToadText
	db SMB3_ToadHouseToadText_TopHalf_RegularToadHouse-SMB3_ToadHouseToadText
	db SMB3_ToadHouseToadText_TopHalf_BlueToadHouse-SMB3_ToadHouseToadText

;--------------------------------------------------------------------

; Note: Power up tile data (toad house)

DATA_21BEF1:
	db $84,$86,$9C,$80,$82,$8A,$B4
	db $90,$A8,$94,$98,$A0,$88

DATA_21BEFE:
	db $84,$86,$9E,$80,$82,$8A,$B6
	db $92,$A8,$96,$9A,$A2,$8C

DATA_21BF0B:
	db $42,$44,$02,$44,$42,$46,$00
	db $02,$40,$00,$00,$06,$00

;--------------------------------------------------------------------

; Note: Dry bones related tables.

DATA_21BF18:
	db $08,$08,$0A

DATA_21BF1B:
	db $04,$08

DATA_21BF1D:
	db $08,$01,$02,$03,$03,$03,$03,$03

DATA_21BF25:
	db $02,$10,$0A,$06,$06,$06,$06

DATA_21BF2C:
	db $FF,$0A,$68,$6B

DATA_21BF30:
	db $00,$00,$00,$FF,$FE,$FF,$00,$00
	db $00

;--------------------------------------------------------------------

DATA_21BF39:
	db $A0,$60

DATA_21BF3B:
	db $00,$FF

;--------------------------------------------------------------------

DATA_21BF3D:
	db $08,$F7

DATA_21BF3F:
	db $30,$50

DATA_21BF41:
	db $FC,$04

DATA_21BF43:
	db $10,$70

DATA_21BF45:
	db $01,$03,$FE,$02,$05,$FB,$01,$02
	db $03,$00

;--------------------------------------------------------------------

DATA_21BF4F:
	db $06,$FA

DATA_21BF51:
	db $20,$60

DATA_21BF53:
	db $FF,$01

DATA_21BF55:
	db $10,$70

;--------------------------------------------------------------------

DATA_21BF57:
	db $02,$04,$02,$02,$04,$02,$02,$04
	db $02,$02,$04,$02,$02,$04,$02

;--------------------------------------------------------------------

DATA_21BF66:
	db $0F,$0F,$0F,$10,$0F,$10,$10,$10

DATA_21BF6E:
	db $00,$21,$42

DATA_21BF71:
	db $02,$D7,$00,$03,$FE,$00,$FE,$00
	db $02,$F7,$00,$03,$FE,$00,$FE,$00
	db $06,$D7,$00,$03,$FE,$00,$FE,$00
	db $06,$F7,$00,$03,$FE,$00,$FE,$00
	db $FF,$08,$D7,$00,$03,$FE,$00,$FE
	db $00,$08,$F7,$00,$03,$FE,$00,$FE
	db $00,$0C,$D7,$00,$03,$FE,$00,$FE
	db $00,$0C,$F7,$00,$03,$FE,$00,$FE
	db $00

DATA_21BFB2:
	db $FF,$02,$03,$05,$01

DATA_21BFB7:
	db $00,$2C

DATA_21BFB9:
	db $2E

DATA_21BFBA:
	db $74,$7C

DATA_21BFBC:
	db $84,$02,$04,$06,$00,$A7,$02,$A7
	db $02,$A7,$42,$A7,$42,$A9,$02,$A9
	db $02,$A9,$42,$A9,$42

;--------------------------------------------------------------------

DATA_21BFD1:
	db $AB,$02,$AB,$02,$AB,$42,$AB,$42
	db $A8,$02,$A8,$02,$A8,$42,$A8,$42
	db $AA,$02,$AA,$02,$AA,$42,$AA,$42
	db $AC,$02,$AC,$02,$AC,$42,$AC,$42

;--------------------------------------------------------------------

DATA_21BFF1:
	db $26,$27,$28

DATA_21BFF4:
	db $03,$04,$05,$11,$51,$11,$37,$37,$00,$00,$11,$13,$11,$13,$11,$13
	db $13,$21,$21,$11,$11,$11,$11,$16,$02,$11,$11,$11,$13,$13,$25,$11
	db $30,$30,$26,$13,$11,$12,$13,$11,$00,$11,$24,$24,$00,$00,$11,$14
	db $11,$14,$11,$11,$14,$00,$00,$11,$11,$11,$11,$12,$11,$11,$11,$11
	db $11,$11,$11,$11,$00,$00,$00,$10,$10,$11,$11,$25,$85,$85,$85,$85
	db $00,$00,$25,$05,$A5,$A5,$A5,$85,$05,$25,$25,$05,$25,$A5,$A5,$A5
	db $85,$A5,$A5,$A5,$25,$25,$25,$05,$85,$85,$A5,$05,$25,$25,$05,$1A
	db $36,$13,$B3,$B3,$00,$00,$0A,$36,$12,$05,$12,$0E,$0B,$5A,$5A,$0E
	db $0E,$12,$12,$CF,$00,$12,$12,$12,$1A,$1A,$1A,$CF,$00,$00,$9B,$0B
	db $0B,$1A,$CF,$01,$00,$00,$05,$05,$00,$00,$05,$01,$00,$00,$02,$00
	db $01,$07,$07,$09,$09,$00,$00,$09,$00,$00,$00,$00,$09,$02,$05,$01
	db $00,$00,$05,$02,$02,$09,$09

;--------------------------------------------------------------------

DATA_21C0AB:
	db $00,$81,$82,$03,$80,$81,$82,$03
	db $00,$81,$02,$03,$00,$01

;--------------------------------------------------------------------

DATA_21C0B9:
	db $10,$F0

DATA_21C0BB:
	db $01,$00,$02,$04,$05,$02

DATA_21C0C1:
	db $FC,$FC,$04,$04,$00

DATA_21C0C6:
	db $FF,$FF,$00,$00,$00,$00,$08,$00
	db $08,$04

DATA_21C0D0:
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	db $B0,$B0,$C0,$C0,$C0

DATA_21C0D5:
	db $F4,$0C,$F4,$0C,$00
else
	db $C0,$C0,$D0,$D0,$D0

DATA_21C0D5:
	db $F8,$08,$F8,$08,$00
endif

;--------------------------------------------------------------------

DATA_21C0DA:
	db $08,$F8,$F8,$08,$00,$40,$00,$00
	db $40,$40,$00,$40

;--------------------------------------------------------------------

DATA_21C0E6:
	db $08,$F8

;--------------------------------------------------------------------

DATA_21C0E8:
	db $10,$F0,$10,$20,$30,$40,$FC,$F8
	db $F4,$F0

;--------------------------------------------------------------------

DATA_21C0F2:
	db $FC,$04,$08,$04,$FC,$F8,$00,$08
	db $08,$00,$F8,$F8

DATA_21C0FE:
	db $F8,$F8,$00,$08,$08,$00,$08,$04
	db $FC,$F8,$FC,$04

;--------------------------------------------------------------------

DATA_21C10A:
	db $D4,$D6,$FE,$70,$70,$70,$00,$00
	db $D4,$D6,$D6,$FE,$70,$70,$00,$00
	db $D4,$D6,$D6,$D6,$FE,$70,$00,$00
	db $D4,$D6,$D6,$D6,$D6,$FE,$00,$00

;--------------------------------------------------------------------

; Note: Tables related to Boom Boom

DATA_21C12A:
	db $10,$F0

DATA_21C12C:
	db $20,$E0,$18,$E8

DATA_21C130:
	db $0A,$06,$07,$07,$07,$07,$06,$0A
	db $10,$14,$15,$15,$15,$15,$14,$10

DATA_21C140:
	db $10,$F0

DATA_21C142:
	db $30,$D0

DATA_21C144:
	db $01,$FF

DATA_21C146:
	db $02,$FE

DATA_21C148:
	db $48,$50,$42,$42,$4A,$48,$54,$5A
	db $5E,$6A,$42,$42,$02,$0A,$78,$02
	db $0A,$78,$14,$1A,$22,$28

DATA_21C15E:
	db $42,$4A,$48,$48,$50,$42,$54,$5A
	db $6A,$5E,$42,$42,$02,$0A,$78,$02
	db $0A,$78,$14,$1A,$22,$28

DATA_21C174:
	db $08,$10,$10,$10,$10,$08,$10,$10
	db $10,$10,$10,$10,$08,$10,$10,$08
	db $10,$10,$10,$10,$10,$10

DATA_21C18A:
	db $10,$10,$08,$08,$10,$10,$10,$10
	db $10,$10,$10,$10,$08,$10,$10,$08
	db $10,$10,$10,$10,$10,$10,$00,$02
	db $08,$0E,$10,$0E,$08,$02,$04,$03
	db $00,$03,$04,$07,$08,$07

DATA_21C1B0:
	db $E0,$E9,$00,$17,$20,$17,$00,$E9

;--------------------------------------------------------------------

DATA_21C1B8:
	db $10,$00

;--------------------------------------------------------------------

DATA_21C1BA:
	db $00,$08,$10

DATA_21C1BD:
	db $02,$0A,$12

DATA_21C1C0:
	db $03,$0D,$06,$0B,$08

DATA_21C1C5:
	db $FB,$05,$FD,$03,$00

DATA_21C1CA:
	db $F5,$F5,$F0,$F0,$EE

;--------------------------------------------------------------------

DATA_21C1CF:
	db $FD,$FD,$FE,$FF,$00,$00,$00,$00
	db $00

DATA_21C1D8:
	db $03,$02,$01,$00,$00,$00,$00,$00
	db $00

;--------------------------------------------------------------------

DATA_21C1E1:
	db $01,$FF

DATA_21C1E3:
	db $18,$E8

DATA_21C1E5:
	db $08,$F8

DATA_21C1E7:
	db $F0,$10

DATA_21C1E9:
	db $FF,$00,$20,$80

DATA_21C1ED:
	db $10,$00

DATA_21C1EF:
	db $D8,$28

DATA_21C1F1:
	db $00,$08

DATA_21C1F3:
	db $00,$40

;--------------------------------------------------------------------

DATA_21C1F5:
	db $08,$F8

DATA_21C1F7:
	db $FF,$01

;--------------------------------------------------------------------

DATA_21C1F9:
	db $0C,$F4

;--------------------------------------------------------------------

DATA_21C1FB:
	db $08,$F8

;--------------------------------------------------------------------

DATA_21C1FD:
	db $18,$18,$17,$17,$16,$15,$14,$13
	db $11,$0F,$0D,$0B,$09,$07,$05,$02
	db $12,$12,$11,$11,$10,$0F,$0F,$0E
	db $0C,$0B,$09,$08,$06,$05,$03,$01
	db $0E,$0E,$0D,$0D,$0C,$0C,$0B,$0B
	db $09,$08,$07,$06,$05,$04,$02,$01
	db $0A,$0A,$09,$09,$09,$08,$08,$07
	db $07,$06,$05,$04,$03,$02,$02,$00
	db $07,$07,$06,$06,$06,$06,$05,$05
	db $04,$04,$03,$03,$02,$02,$01,$00
	db $03,$03,$02,$02,$02,$02,$02,$02
	db $02,$01,$01,$01,$01,$00,$00,$00
	db $02,$02,$01,$01,$01,$01,$01,$01
	db $01,$01,$01,$00,$00,$00,$00,$00
	db $01,$01,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00

DATA_21C27D:
	db $00,$0C,$18,$24,$30,$3C,$48,$54

DATA_21C285:
	db $38,$30,$28,$20,$18,$10,$08,$00

DATA_21C28D:
	db $01,$02,$01,$02,$01,$FF,$20,$E0

DATA_21C295:
	db $09,$09,$09,$08,$07,$06,$07,$08

DATA_21C29D:
	db $40,$C0

DATA_21C29F:
	db $04,$FC

DATA_21C2A1:
	db $F8,$08

DATA_21C2A3:
	db $18,$10,$0A,$06,$00,$00,$00,$00

DATA_21C2AB:
	db $10,$04,$F8,$F8,$F8,$F8,$F8,$F8
	db $FE,$FE,$FE,$FE,$10,$10,$10,$10

DATA_21C2BB:
	db $00,$02,$04,$06,$08,$06,$04,$02
	db $00,$02,$04,$06,$08,$06,$04,$50

DATA_21C2CB:
	db $0F,$03,$01,$00,$00,$00,$00,$00

;--------------------------------------------------------------------

DATA_21C2D3:
	db $02,$FE

DATA_21C2D5:
	db $24,$DC,$00,$10,$00,$01,$FF

DATA_21C2DC:
	db $40,$00

DATA_21C2DE:
	db $F8,$08,$08,$F8

DATA_21C2E2:
	db $08,$08,$F8,$F8

DATA_21C2E6:
	db $00,$00,$01,$01

DATA_21C2EA:
	db $00,$01,$01,$00

;--------------------------------------------------------------------

DATA_21C2EE:
	db $C0,$A0

DATA_21C2F0:
	db $30,$D0

;--------------------------------------------------------------------

; Note: Roto disk speed related tables.

DATA_21C2F2:
	db $01,$FF,$01,$FF,$01,$FF,$01,$FF
	db $02,$FE,$02

DATA_21C2FD:
	db $FE,$00,$03,$01

DATA_21C301:
	db $10,$F0,$10,$F0,$10,$F0,$10,$F0

;--------------------------------------------------------------------

DATA_21C309:
	db $28,$D8,$28,$D8

;--------------------------------------------------------------------

DATA_21C30D:
	db $0A,$F6,$10,$F0

DATA_21C311:
	db $01,$FF,$01,$FF

DATA_21C315:
	db $40,$00

DATA_21C317:
	db $12,$EE

DATA_21C319:
	db $01,$FF

;--------------------------------------------------------------------

DATA_21C31B:
	db $64,$66,$64,$66

DATA_21C31F:
	db $02,$02,$C2,$C2

;--------------------------------------------------------------------

DATA_21C323:
	db $12,$04

DATA_21C325:
	db $0E,$18

;--------------------------------------------------------------------

DATA_21C327:
	db $08,$F8

DATA_21C329:
	db $00,$00,$40,$40

DATA_21C32D:
	db $00,$01,$00,$01

DATA_21C331:
	db $E8,$DC

DATA_21C333:
	db $50,$70,$00,$70,$50,$00,$00,$00
	db $16,$15,$16,$15,$17,$15,$17,$15
	db $17,$15,$15,$16,$17,$17,$2A,$29
	db $2B,$2A,$2A,$29,$16,$1B,$1A,$15
	db $15,$16,$2A,$19,$17,$11,$56,$56
	db $56,$56,$56,$56,$12,$12,$10,$10
	db $12,$12,$12,$10,$10,$14,$11,$11
	db $11,$11,$22,$22,$22,$21,$22,$21
	db $12,$21,$21,$11,$12,$12,$21,$21
	db $11,$11,$21,$21,$21,$21,$21,$21

;--------------------------------------------------------------------

DATA_21C383:
	db $45,$45,$45,$45,$45,$65,$15,$15
	db $15,$85,$05,$25,$05,$05,$45,$45
	db $15,$35,$45,$25,$45,$05,$05,$05
	db $25,$25,$05,$05,$25,$A5,$A5,$A5
	db $A5,$A5,$A5,$A5,$CF,$CF,$CF,$CF
	db $0B,$0B,$CF,$CF,$CF,$00,$CF,$00
	db $CF,$CF,$3D,$3D,$3D,$3D,$3D,$3D
	db $CF,$4E,$4E,$0B,$0B,$0B,$4E,$4E
	db $CF,$0A,$12,$12,$12,$12,$12,$12
	db $02,$02,$02,$02,$02,$02,$02,$02
	db $02,$01,$01,$05,$08,$08,$06,$06
	db $06,$07,$06,$07,$02,$03,$03,$09
	db $01,$05,$05,$03,$01,$01,$05,$05
	db $05,$05,$05,$05

;--------------------------------------------------------------------

; Note: Bowser fire sprite tables.

DATA_21C3EF:
	db $10,$F0

DATA_21C3F1:
	db $C0,$C4,$C8,$CC

DATA_21C3F5:
	db $00,$40,$C0,$80

DATA_21C3F9:
	dw $0100,$0110,$0120,$0130

DATA_21C401:
	db $01,$02,$03,$04

;--------------------------------------------------------------------

; Note: Hammer Bro. related tables.

DATA_21C405:
	db !Define_SMB3_SpriteID_NorSpr000_UnusedSprite
	db !Define_SMB3_SpriteID_NorSpr000_UnusedSprite
	db !Define_SMB3_SpriteID_NorSpr000_UnusedSprite
	db !Define_SMB3_SpriteID_NorSpr081_HammerBro
	db !Define_SMB3_SpriteID_NorSpr082_BoomerangBro
	db !Define_SMB3_SpriteID_NorSpr086_SledgeBro
	db !Define_SMB3_SpriteID_NorSpr087_FireBro
	db !Define_SMB3_SpriteID_NorSpr000_UnusedSprite
	db !Define_SMB3_SpriteID_NorSpr000_UnusedSprite
	db !Define_SMB3_SpriteID_NorSpr000_UnusedSprite

DATA_21C40F:
	db $40,$00

DATA_21C411:
	db $D0,$00,$A0

DATA_21C414:
	db $28,$00,$20
	db $01,$00,$FF

DATA_21C41A:
	db $40,$00

DATA_21C41C:
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	db $16,$EA
else
	db $12,$EE
endif

;--------------------------------------------------------------------

DATA_21C41E:
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	db $30,$D0
else
	db $20,$E0
endif

DATA_21C420:
	db $01,$00

;--------------------------------------------------------------------

; Note: Sideways moving thwomp speed tables.

DATA_21C422:
	db $02,$FE

DATA_21C424:
	db $20,$E0

DATA_21C426:
	db $F8,$08

;--------------------------------------------------------------------

DATA_21C428:
	db $00,$10,$10

DATA_21C42B:
	db $10,$10,$F0

;--------------------------------------------------------------------

DATA_21C42E:
	db $01,$FF

DATA_21C430:
	db $10,$F0

;--------------------------------------------------------------------

DATA_21C432:
	db $40,$00

DATA_21C434:
	db $20,$E0

;--------------------------------------------------------------------

DATA_21C436:
	db $40,$00,$20,$80

DATA_21C43A:
	db $10,$00

DATA_21C43C:
	db $40,$00

;--------------------------------------------------------------------

DATA_21C43E:
	db $40,$00

;--------------------------------------------------------------------

; Note: Lakitu related tables.

DATA_21C440:
	db $01,$FF

DATA_21C442:
	db $20,$E0

DATA_21C444:
	db $F1,$F2,$F1,$F0

;--------------------------------------------------------------------

DATA_21C448:
	db $01,$FF

DATA_21C44A:
	db $14,$EC

;--------------------------------------------------------------------

; Note: Cheep cheep speed tables.

DATA_21C44C:
	db $01,$FF

DATA_21C44E:
	db $04,$FC

;--------------------------------------------------------------------

DATA_21C450:
	db $01,$FF

DATA_21C452:
	db $18,$E8

DATA_21C454:
	db $40,$00

;--------------------------------------------------------------------

DATA_21C456:
	db $40,$00

;--------------------------------------------------------------------

DATA_21C458:
	db $08,$F8

;--------------------------------------------------------------------

DATA_21C45A:
	db $01,$FF

DATA_21C45C:
	db $10,$F0

;--------------------------------------------------------------------

DATA_21C45E:
	db $04,$08,$08,$08,$10

DATA_21C463:
	db $FF,$C0,$80,$60,$40

;--------------------------------------------------------------------

DATA_21C468:
	db $F8,$08,$FA,$06,$FB,$05,$F0,$10
	db $F4,$0C,$F7,$09

;--------------------------------------------------------------------

DATA_21C474:
	db $06,$05

;--------------------------------------------------------------------

DATA_21C476:
	db $C6,$C8,$C6,$F8,$FA,$F8

;--------------------------------------------------------------------

DATA_21C47C:
	db $30,$30,$30,$30

;--------------------------------------------------------------------

DATA_21C480:
	db $E0,$C0,$D0,$B0

DATA_21C484:
	db $50,$30,$40,$20

DATA_21C488:
	db $03,$0D,$08,$0D

DATA_21C48C:
	db $0C,$0A,$0A,$08

DATA_21C490:
	db $1F,$0F

DATA_21C492:
	db $10,$20,$00,$00,$00,$00,$34,$34
	db $34,$34,$34,$34,$34,$00,$00,$19
	db $15,$15,$16,$16,$15,$15,$16,$16
	db $15,$15,$30,$30,$02,$32,$51,$15
	db $36,$17,$37,$51,$19,$11,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$14,$11,$11
	db $11,$11,$11,$11,$11,$11,$00,$00
	db $00,$14,$14,$14,$A4,$14,$01,$00
	db $00,$B0,$05,$05,$05,$05,$85,$85
	db $85,$85,$85,$85,$85,$00,$00,$A5
	db $A5,$05,$25,$25,$25,$25,$25,$25
	db $25,$25,$85,$85,$85,$85,$A5,$05
	db $85,$85,$85,$A5,$A5,$A5,$CF,$CF
	db $CF,$CF,$4C,$4C,$4C,$4C,$4C,$4C
	db $4C,$00,$00,$B7,$12,$0E,$CF,$CF
	db $CF,$CF,$CF,$CF,$CF,$CF,$5A,$5A
	db $36,$36,$B7,$36,$36,$32,$36,$B7
	db $B7,$0B,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $02,$01,$07,$07,$07,$07,$07,$07
	db $07,$07,$00,$00,$00,$00,$00,$05
	db $00,$05,$05,$00,$00,$05

;--------------------------------------------------------------------

DATA_21C548:
	db $F0,$DC,$D0,$C8,$C0,$B8,$B2,$AC
	db $A6,$A0,$9A,$96,$92,$8C,$88,$84
	db $80,$04,$08,$0C,$10,$14

;--------------------------------------------------------------------

DATA_21C55E:
	db $0A,$F6

;--------------------------------------------------------------------

DATA_21C560:
	db $03,$01,$02,$01,$A1,$A1,$A1,$A9
	db $AF,$B5,$A1,$10,$08,$10,$10,$10
	db $10,$10,$08,$10,$10,$10,$10,$10
	db $10,$03,$83,$03,$03,$03,$03,$03
	db $C3,$43,$43,$43,$43,$43,$43,$00
	db $03,$08,$0D,$10,$0D,$08,$03,$04
	db $03,$00,$03,$04,$07,$08,$07

;--------------------------------------------------------------------

; Note: Stuff related to the spawning flames.

DATA_21C597:
	db $78,$08,$08,$60,$02,$02

DATA_21C59D:
	db $FF,$00,$01,$02,$01,$00

DATA_21C5A3:
	db $70,$70,$70,$AA,$AC,$AE,$01,$01
	db $70,$A0,$A2,$A4,$A6,$A8,$01,$01
	db $96,$80,$82,$84,$86,$88,$01,$01

;--------------------------------------------------------------------

DATA_21C5BB:
	db $00,$01,$00,$01,$80,$81,$80,$81

DATA_21C5C3:
	db $40,$00

DATA_21C5C5:
	db $00,$80

DATA_21C5C7:
	db $0B,$05

DATA_21C5C9:
	db $0B,$0E

;--------------------------------------------------------------------

DATA_21C5CB:
	db $F0,$08

DATA_21C5CD:
	db $00,$F8

;--------------------------------------------------------------------

DATA_21C5CF:
	db $60,$20

DATA_21C5D1:
	db $00,$20,$16,$20,$20,$10

DATA_21C5D7:
	db $00,$F0,$E0,$F0,$00,$F0,$E0,$F0

;--------------------------------------------------------------------

UNK_21C5DF:
	db $60,$70,$80,$90,$A0,$B0,$C0,$D0

;--------------------------------------------------------------------

DATA_21C5E7:
	db $08,$F8,$08,$F8

DATA_21C5EB:
	db $40,$C0,$40,$C0

;--------------------------------------------------------------------

DATA_21C5EF:
	db $40,$60,$80,$A0

;--------------------------------------------------------------------

DATA_21C5F3:
	db $B6,$B0

DATA_21C5F5:
	db $08,$00

;--------------------------------------------------------------------

; Note: Speeds for the outline platforms.

DATA_21C5F7:
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	db $00,$F6,$00,$0A

DATA_21C5FB:
	db $F6,$00,$F6,$00
else
	db $00,$F8,$00,$08

DATA_21C5FB:
	db $F8,$00,$F8,$00
endif

;--------------------------------------------------------------------

DATA_21C5FF:
	db $A2,$A4,$A6,$A8,$A2,$AA,$AC,$A8
	db $A2,$A4,$A6,$A8,$A8,$AC,$AA,$A2
	db $A2,$AE,$AE,$A8

DATA_21C613:
	db $04,$04,$04,$44,$04

;--------------------------------------------------------------------

DATA_21C618:
	db $02,$02,$04,$04

;--------------------------------------------------------------------

; Note: Parabuzzy speed.

DATA_21C61C:
	db $08,$F8

;--------------------------------------------------------------------

; Note: Tables related to the rotating pea platforms

DATA_21C61E:
	db $20,$50,$20,$50

DATA_21C622:
	db $F8,$08,$08,$F8

DATA_21C626:
	db $00,$40,$00,$C0

DATA_21C62A:
	db $18,$18,$17,$17,$16,$15,$14,$13
	db $11,$0F,$0D,$0B,$09,$07,$05,$02
	db $00

DATA_21C63B:
	db $00,$01,$01,$02,$FF,$FF,$FE,$00
	db $FF,$FF,$FE,$01,$01,$02

DATA_21C649:
	db $01,$FF

DATA_21C64B:
	db $10,$F0

DATA_21C64D:
	db $05,$03,$01,$01,$03,$05

DATA_21C653:
	db $80,$40,$20,$10,$08,$04,$02

DATA_21C65A:
	db $80,$40,$20,$02,$04,$08,$10

;--------------------------------------------------------------------

DATA_21C661:
	db $80,$40,$20,$10,$08,$04,$02,$01

DATA_21C669:
	db $00,$40,$30,$20,$10,$00,$F0,$E0
	db $D0,$C0

DATA_21C673:
	db $0B,$0D,$19,$1E,$0C,$0C,$0C

DATA_21C67A:
	db $01,$01,$80,$01,$01,$02,$03

DATA_21C681:
	db $86,$9A,$84,$98,$82,$98,$80,$96

DATA_21C689:
	db $8E,$9E,$8C,$9C,$8A,$9C,$88,$88
	db $1C,$FF,$1C,$FA,$1C,$10,$1C,$15

;--------------------------------------------------------------------

; Note: Tables related to sprite spawning (from screen scrolling)?

DATA_21C699:
	db $10,$E0

DATA_21C69B:
	db $01,$FF

;--------------------------------------------------------------------

DATA_21C69D:
	db $40,$00

DATA_21C69F:
	db $E0,$20

DATA_21C6A1:
	db $FF,$00

DATA_21C6A3:
	db $0B,$FB,$F5

DATA_21C6A6:
	db $01,$01,$00

;--------------------------------------------------------------------

DATA_21C6A9:
	db $E0

DATA_21C6AA:
	db $20

DATA_21C6AB:
	db $FF,$01

DATA_21C6AD:
	db $FC,$F8,$FA,$F8

;--------------------------------------------------------------------

DATA_21C6B1:
	db $00,$01,$02,$01

DATA_21C6B5:
	db $10,$12,$14,$12

;--------------------------------------------------------------------

DATA_21C6B9:
	db $10,$18,$20,$28

DATA_21C6BD:
	db $18,$1A,$1C,$1E

;--------------------------------------------------------------------

; Note: Related to the cheep cheep spawner.

DATA_21C6C1:
	db $00,$FF

DATA_21C6C3:
	db $08,$F0

;--------------------------------------------------------------------

DATA_21C6C5:
	db $00,$FF

DATA_21C6C7:
	db $08,$F8

;--------------------------------------------------------------------

DATA_21C6C9:
	db !Define_SMB3_SpriteID_NorSpr0A8_StaticOutlinePlatform,!Define_SMB3_SpriteID_NorSpr0A8_StaticOutlinePlatform
	db !Define_SMB3_SpriteID_NorSpr0A8_StaticOutlinePlatform,!Define_SMB3_SpriteID_NorSpr0A8_StaticOutlinePlatform
	db !Define_SMB3_SpriteID_NorSpr0A8_StaticOutlinePlatform,!Define_SMB3_SpriteID_NorSpr0A8_StaticOutlinePlatform
	db !Define_SMB3_SpriteID_NorSpr0A9_SwitchableOutlinePlatform,!Define_SMB3_SpriteID_NorSpr000_UnusedSprite,!Define_SMB3_SpriteID_NorSpr0A9_SwitchableOutlinePlatform

DATA_21C6D2:
	db $00,$00,$03
	db $03,$01,$01
	db $00,$00,$00

DATA_21C6DB:
	db $00,$F0,$00
	db $F0,$00,$F0
	db $00,$00,$F0

;--------------------------------------------------------------------

DATA_21C6E4:
	db $1F,$02,$34,$23,$94,$7E,$DF,$3A

DATA_21C6EC:
	db $64,$66,$64,$66

DATA_21C6F0:
	db $02,$02,$C2,$C2

DATA_21C6F4:
	db $00,$80,$C0,$40

DATA_21C6F8:
	db $00,$06,$06,$00,$00

DATA_21C6FD:
	db $18,$18,$28,$18,$18,$18,$18,$18
	db $18,$18,$20,$18,$18,$28,$18,$18

DATA_21C70D:
	db $10,$10,$10,$10,$10,$10,$10,$10
	db $10,$10,$10,$10,$10,$18,$10,$10

;--------------------------------------------------------------------

DATA_21C71D:
	db $44,$40,$42,$46

;--------------------------------------------------------------------

DATA_21C721:
	db $04,$04,$08,$08,$0D,$0D,$00,$00

DATA_21C729:
	db $00,$0B,$00,$0B,$05,$05,$05,$05

;--------------------------------------------------------------------

DATA_21C731:
	db $00,$01,$00,$FF

DATA_21C735:
	db $10,$14,$0C,$FF,$10,$14,$0C

;--------------------------------------------------------------------

DATA_21C73C:
	db $C0,$C2,$C4,$46,$46

;--------------------------------------------------------------------

DATA_21C741:
	db $46,$FF,$FF,$FF,$FF,$6A,$6B,$6C
	db $6D,$6A,$6B,$6C,$6D

DATA_21C74E:
	db $6E,$6A,$6B,$6C,$6D,$68,$68,$68
	db $68,$69,$69,$69,$69

DATA_21C75B:
	db $6F,$01,$02,$04,$08,$0A,$14,$28
	db $50,$64,$C8,$90,$20

DATA_21C768:
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$01,$03,$00

DATA_21C776:
	db $03,$01,$00,$00

DATA_21C77A:
	db $30,$40

;--------------------------------------------------------------------

DATA_21C77C:
	db $10,$20

;--------------------------------------------------------------------

DATA_21C77E:
	db $48,$4E,$4C,$4E

DATA_21C782:
	db $20,$60,$20,$20

;--------------------------------------------------------------------

DATA_21C786:
	db $48,$4E,$4C,$4E

DATA_21C78A:
	db $26,$66,$26,$26

;--------------------------------------------------------------------

; Note: Related to the mini blooper extended sprite

DATA_21C78E:
	db $01,$FF

DATA_21C790:
	db $10,$F0

DATA_21C792:
	db $00,$01,$02,$03,$04,$05,$06,$07
	db $08,$07,$06,$05,$04,$03,$02,$01

;--------------------------------------------------------------------

DATA_21C7A2:
	db $07,$03,$01,$00

;--------------------------------------------------------------------

DATA_21C7A6:
	db $B0,$B2,$B6,$B2,$B0,$B4,$B8,$B4

DATA_21C7AE:
	db $B0,$B4,$B8,$B4,$B0,$B2,$B6,$B2

DATA_21C7B6:
	db $22,$22,$22,$A2,$A2,$A2,$22,$22

;--------------------------------------------------------------------

DATA_21C7BE:
	db $10,$00

DATA_21C7C0:
	db $10,$20

;--------------------------------------------------------------------

DATA_21C7C2:
	db $F2,$EE,$F0,$EE

DATA_21C7C6:
	db $00,$80,$00,$00

;--------------------------------------------------------------------

DATA_21C7CA:
	db $28,$2A,$D8,$D8,$DA,$DA,$DC,$DC

DATA_21C7D2:
	db $25,$23,$23,$23

;--------------------------------------------------------------------

DATA_21C7D6:
	db $01,$FF

DATA_21C7D8:
	db $10,$F0

DATA_21C7DA:
	db $00,$00,$08,$00,$10,$00,$18,$00
	db $20,$00,$28,$00,$30,$00,$38,$00
	db $40,$00,$48,$00

;--------------------------------------------------------------------

DATA_21C7EE:
	db $08,$F8,$08,$F8,$10,$F8

DATA_21C7F4:
	db $03,$03,$03,$03,$FA,$FA

;--------------------------------------------------------------------

; Note: Related to extended sprite collision with the player.

DATA_21C7FA:
	db $12,$0A

DATA_21C7FC:
	db $10,$16

UNK_21C7FE:
	db $00,$10

;--------------------------------------------------------------------

DATA_21C800:
	db $00,$40,$40,$C0,$C0,$80,$80,$00

DATA_21C808:
	db $60,$62,$78,$78

DATA_21C80C:
	db $62,$60,$6E,$6E,$60,$62,$78,$78

;--------------------------------------------------------------------

DATA_21C814:
	db $01,$FF

DATA_21C816:
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	db $30,$D0
else
	db $20,$E0
endif

DATA_21C818:
	db $01,$FF

DATA_21C81A:
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	db $16,$EA
else
	db $12,$EE
endif

;--------------------------------------------------------------------

DATA_21C81C:
	db $C0,$C0,$00,$00

DATA_21C820:
	db $4A,$4E

DATA_21C822:
	db $48,$4C,$4A,$4E

;--------------------------------------------------------------------

DATA_21C826:
	db $01,$FF

DATA_21C828:
	db $20,$E0

DATA_21C82A:
	db $04,$FF

DATA_21C82C:
	db $0F,$EE

;--------------------------------------------------------------------

DATA_21C82E:
	db $64,$66,$64,$66

DATA_21C832:
	db $02,$02,$C2,$C2

;--------------------------------------------------------------------

DATA_21C836:
	db $46,$44,$42,$40,$20,$40,$00,$20
	db $40,$10,$30,$50,$30

--------------------------------------------------------------------

DATA_21C843:
	db $40,$00,$00,$08,$10,$18,$20,$28
	db $30,$38

;--------------------------------------------------------------------

DATA_21C84D:
	db $00,$0B,$10,$0B,$00,$F5,$F0,$F5
	db $F0,$F0,$F5,$0B,$F5,$0B,$F5,$0B
	db $F5,$0B,$10,$10

DATA_21C861:
	db $F0,$F5,$00,$0B,$10,$0B,$00,$F5
	db $00,$00,$F5,$F5,$0B,$0B,$F5,$F5
	db $0B,$0B,$00,$00

DATA_21C875:
	db $08,$18,$1C,$18,$08,$F8,$F4,$F8
	db $F4,$F4,$F8,$08,$F8,$08,$00,$00
	db $00,$00,$0C,$0C,$0C,$F4

DATA_21C88B:
	db $F3,$F7,$07,$17,$1B,$17,$07,$F7
	db $00,$08,$F8,$F8,$08,$08,$00,$00
	db $00,$00,$00,$00,$00,$00

;--------------------------------------------------------------------

; Note: Bullet/Homing bill shooter tables.

DATA_21C8A1:
	db $18,$E8

DATA_21C8A3:
	db $40,$00

DATA_21C8A5:
	db $01,$00

;--------------------------------------------------------------------

; Note: Bowser's tables

DATA_21C8A7:
	db $10,$F0

DATA_21C8A9:
	db $08,$10,$18,$20,$28,$30,$38,$40
	db $48,$50,$50,$50,$50,$50,$50,$50

DATA_21C8B9:
	db $08,$05,$04,$05,$08

DATA_21C8BE:
	db $40,$40,$00,$00,$00

DATA_21C8C3:
	db $00,$80

DATA_21C8C5:
	db $04,$05,$05,$05,$04,$05,$05,$05

DATA_21C8CD:
	db $00,$00,$00,$00,$00,$40,$40,$40

DATA_21C8D5:
	db $40,$00

DATA_21C8D7:
	db $00,$00,$03,$02,$00,$00,$00,$00

DATA_21C8DF:
	db $F0,$10

DATA_21C8E1:
	db $F8,$18

DATA_21C8E3:
	db $00,$08,$10,$18,$08,$00,$00,$10

DATA_21C8EB:
	db $08,$18

DATA_21C8ED:
	db $00,$02,$20,$22,$40,$42,$00,$02
	db $20,$22,$04,$06,$24,$26,$44,$46
	db $40,$42,$08,$0A,$28,$2A,$48,$42
	db $0C,$0C,$2C,$2C,$4C,$4C,$60,$62
	db $80,$82,$A0,$A2,$0E,$0E,$2E,$2E
	db $4E,$4E,$0C,$0C,$2C,$2C,$6C,$6C
	db $64,$66,$84,$86,$A4,$A6

DATA_21C923:
	db $00,$10,$00,$10,$00,$10,$10,$00
	db $10,$00,$10,$00

DATA_21C92F:
	db $00,$00,$10,$10,$20,$20,$20,$20
	db $10,$10,$00,$00,$80,$40,$20,$10

DATA_21C93F:
	db $01,$01,$02,$02,$04,$04

DATA_21C945:
	dw $0080,$0084,$0088,$008C
	dw $0090,$0094,$01A0,$01A4
	dw $01A8,$01AC,$01B0,$01B4

DATA_21C95D:
	db $60,$70

DATA_21C95F:
	db $E8,$E8,$80,$88

DATA_21C963:
	dw $76F1,$2334,$7FF7,$021F,$11AF

;--------------------------------------------------------------------

SMB3_StartingOverworldPlayerYPos:
;$21C96D
	db $40,$A0,$A0,$40,$80,$60,$30,$50

;--------------------------------------------------------------------

DATA_21C975:
	db $FF

DATA_21C976:
	db $FC,$FF,$FC,$FC,$FC,$FC,$FF,$FF
	db $FC,$FC,$FC,$FC,$FC,$FC,$FF,$FF
	db $FF,$FC

;--------------------------------------------------------------------

; Note: Something related to the muncher level tile animations.

UNK_21C988:
	dw DATA_21C98E
	dw DATA_21C9A9
	dw DATA_21C9B0

DATA_21C98E:
	db $1A

DATA_21C98F:
	db $01,$01,$01,$01,$01,$01,$01,$01
	db $01,$01,$02,$03,$04,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$04
	db $03,$02

DATA_21C9A9:
	db $06,$34,$36,$38,$3A,$3C,$3E

DATA_21C9B0:
	db $08,$34,$36,$38,$36,$34,$3A,$3E
	db $3A,$0A,$0E,$0E,$0E,$0E,$0E,$0E
	db $0E,$0E,$0E,$0E,$0E,$0E,$0E,$0E
	db $16,$16,$16,$0E,$0B,$0F,$15,$10
	db $11,$13,$12,$12,$12,$14,$17,$13
	db $11,$13,$0D,$1A,$1A,$1A,$09

;--------------------------------------------------------------------

DATA_21C9DF:
	db $01,$02,$03,$04,$60,$58,$00,$32
	db $70,$58,$02,$32,$80,$58,$04,$32
	db $90,$58,$06,$32,$A0,$58,$08,$32
	db $60,$60,$01,$32,$70,$60,$03,$32
	db $80,$60,$05,$32,$90,$60,$07,$32
	db $A0,$60,$09,$32

;--------------------------------------------------------------------

; Note: This is the music set to play when initially loading a world (ie. From the title screen)

SMB3_InitialWorldMapMusic:
;$21CA0B
	db !Define_SMB3_OverworldMusic_World1
	db !Define_SMB3_OverworldMusic_World2
	db !Define_SMB3_OverworldMusic_World3
	db !Define_SMB3_OverworldMusic_World4
	db !Define_SMB3_OverworldMusic_World5
	db !Define_SMB3_OverworldMusic_World6
	db !Define_SMB3_OverworldMusic_World7
	db !Define_SMB3_OverworldMusic_World8
	db !Define_SMB3_OverworldMusic_WarpWhistle

;--------------------------------------------------------------------

DATA_21CA14:
	db SMB3_Bank43Graphics_FG_AnimatedLevelTiles1>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles3>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles4>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles5>>16

DATA_21CA19:
	db SMB3_Bank43Graphics_FG_AnimatedLevelTiles1>>8,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>8,SMB3_Bank46Graphics_FG_AnimatedLevelTiles3>>8,SMB3_Bank46Graphics_FG_AnimatedLevelTiles4>>8,SMB3_Bank46Graphics_FG_AnimatedLevelTiles5>>8

DATA_21CA1E:
	db SMB3_Bank43Graphics_FG_AnimatedLevelTiles1,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles3,SMB3_Bank46Graphics_FG_AnimatedLevelTiles4,SMB3_Bank46Graphics_FG_AnimatedLevelTiles5

;--------------------------------------------------------------------

; Note: Pointer tables used for animating the tank level tiles.

DATA_21CA23:
	db SMB3_Bank47Graphics_FG_AnimatedOverworldTiles2>>16
	db SMB3_Bank47Graphics_FG_AnimatedOverworldTiles3>>16
	db SMB3_Bank47Graphics_FG_AnimatedOverworldTiles4>>16

DATA_21CA26:
	db SMB3_Bank47Graphics_FG_AnimatedOverworldTiles2>>8
	db SMB3_Bank47Graphics_FG_AnimatedOverworldTiles3>>8
	db SMB3_Bank47Graphics_FG_AnimatedOverworldTiles4>>8

DATA_21CA29:
	db SMB3_Bank47Graphics_FG_AnimatedOverworldTiles2
	db SMB3_Bank47Graphics_FG_AnimatedOverworldTiles3
	db SMB3_Bank47Graphics_FG_AnimatedOverworldTiles4

;--------------------------------------------------------------------

; Note: Pointer tables used for animating coins/? Blocks and maybe other stuff.

DATA_21CA2C:						; Note: ? Block
	db SMB3_Bank46Graphics_FG_AnimatedLevelTiles2+$0300>>8
	db SMB3_Bank46Graphics_FG_AnimatedLevelTiles3+$0300>>8
	db SMB3_Bank46Graphics_FG_AnimatedLevelTiles4+$0300>>8
	db SMB3_Bank46Graphics_FG_AnimatedLevelTiles5+$0300>>8

DATA_21CA30:						; Note: Coin
	db SMB3_Bank46Graphics_FG_AnimatedLevelTiles2+$0B80>>8
	db SMB3_Bank46Graphics_FG_AnimatedLevelTiles3+$0B80>>8
	db SMB3_Bank46Graphics_FG_AnimatedLevelTiles4+$0B80>>8
	db SMB3_Bank46Graphics_FG_AnimatedLevelTiles5+$0B80>>8

DATA_21CA34:						; Note: Fake brick block
	db SMB3_Bank41Graphics_Sprite_LavaLotus+$0600>>8
	db SMB3_Bank41Graphics_Sprite_LavaLotus+$0600>>8
	db SMB3_Bank41Graphics_Sprite_LavaLotus+$0680>>8
	db SMB3_Bank41Graphics_Sprite_LavaLotus+$0780>>8
	db SMB3_Bank41Graphics_Sprite_LavaLotus+$0700>>8

DATA_21CA39:						; Note: Fake brick block
	db SMB3_Bank41Graphics_Sprite_LavaLotus+$0600
	db SMB3_Bank41Graphics_Sprite_LavaLotus+$0600
	db SMB3_Bank41Graphics_Sprite_LavaLotus+$0680
	db SMB3_Bank41Graphics_Sprite_LavaLotus+$0780
	db SMB3_Bank41Graphics_Sprite_LavaLotus+$0700

DrawbridgeAnimationPtrs:
;$21CA3E
	db SMB3_Bank47Graphics_FG_AnimatedOverworldTiles2+$0640>>8
	db SMB3_Bank47Graphics_FG_AnimatedOverworldTiles3+$0640>>8

DATA_21CA40:
	db SMB3_Bank38Graphics_Layer3_Water>>8
	db SMB3_Bank38Graphics_Layer3_Water+$0100>>8
	db SMB3_Bank38Graphics_Layer3_Water+$0200>>8
	db SMB3_Bank38Graphics_Layer3_Water+$0300>>8
	db SMB3_Bank38Graphics_Layer3_Water+$0400>>8
	db SMB3_Bank38Graphics_Layer3_Water+$0500>>8
	db SMB3_Bank38Graphics_Layer3_Water+$0600>>8
	db SMB3_Bank38Graphics_Layer3_Water+$0700>>8

DATA_21CA48:
	db SMB3_Bank43Graphics_FG_AnimatedStripeNSpadeTiles+$0000>>8
	db SMB3_Bank43Graphics_FG_AnimatedStripeNSpadeTiles+$0080>>8
	db SMB3_Bank43Graphics_FG_AnimatedStripeNSpadeTiles+$0100>>8
	db SMB3_Bank43Graphics_FG_AnimatedStripeNSpadeTiles+$0180>>8

DATA_21CA4C:
	db SMB3_Bank43Graphics_FG_AnimatedStripeNSpadeTiles+$0000
	db SMB3_Bank43Graphics_FG_AnimatedStripeNSpadeTiles+$0080
	db SMB3_Bank43Graphics_FG_AnimatedStripeNSpadeTiles+$0100
	db SMB3_Bank43Graphics_FG_AnimatedStripeNSpadeTiles+$0180

;--------------------------------------------------------------------

; Note: Something related to the layer 3 water tilemap

DATA_21CA50:
	db $40,$29,$41,$29,$42,$29,$43,$29
	db $44,$2D,$45,$2D,$46,$2D,$47,$2D
	db $48,$2D,$49,$2D

;--------------------------------------------------------------------

DATA_21CA64:
	db $C0,$25,$C1,$25,$C4,$25,$C5,$25,$D0,$25,$D1,$25,$D4,$25,$D5,$25
	db $C0,$25,$C1,$25,$C2,$25,$C3,$25,$D3,$25,$D1,$25,$D1,$25,$D4,$25
	db $C2,$25,$C3,$25,$C4,$25,$C5,$25,$C0,$25,$C1,$25,$C2,$25,$C3,$25
	db $C4,$25,$C5,$25,$D0,$25,$D1,$25,$D1,$25,$D1,$25,$D1,$25,$D1,$25
	db $D1,$25,$D1,$25,$D1,$25,$D1,$25,$D4,$25,$D5,$25,$D0,$25,$D1,$25
	db $D1,$25,$D1,$25,$D4,$25,$D5,$25,$C0,$25,$C1,$25,$C4,$25,$C5,$25
	db $C0,$25,$C1,$25,$C2,$25,$C3,$25,$C4,$25,$C5,$25,$C0,$25,$C1,$25
	db $D3,$25,$D4,$25,$D3,$25,$D1,$25,$D1,$25,$D1,$25,$D1,$25,$D4,$25
	db $C4,$25,$C5,$25,$D0,$25,$D1,$25,$D4,$25,$D5,$25,$D0,$25,$D1,$25
	db $D1,$25,$D1,$25,$D4,$25,$D5,$25,$D0,$25,$D4,$25,$D5,$25,$D3,$25
	db $D1,$25,$D1,$25,$D4,$25,$D3,$25,$D1,$25,$D1,$25,$D1,$25,$D1,$25
	db $D4,$25,$D3,$25,$D4,$25,$C0,$25,$C1,$25,$C4,$25,$C5,$25,$D0,$25
	db $D1,$25,$D4,$25,$D5,$25,$C0,$25,$C1,$25,$C2,$25,$C3,$25,$D3,$25
	db $D1,$25,$D1,$25,$D4,$25,$C2,$25,$C3,$25,$C4,$25,$C5,$25,$FF,$20
	db $FF,$20,$C0,$25,$C1,$25,$C4,$25,$C5,$25,$D0,$25,$D4,$25,$D5,$25
	db $FF,$20,$FF,$20,$D0,$25,$D1,$25,$D4,$25,$D5,$25,$FF,$20,$FF,$20
	db $C2,$25,$C3,$25,$C2,$25,$C3,$25,$C4,$25,$C5,$25,$FF,$20,$FF,$20
	db $C0,$25,$C1,$25,$C2,$25,$C3,$25,$D3,$25,$D4,$25,$C2,$25,$C3,$25
	db $D3,$25,$D1,$25,$D1,$25,$D4,$25,$C2,$25,$C3,$25,$D4,$25,$D5,$25
	db $FF,$20,$FF,$20,$D0,$25,$D4,$25,$C2,$25,$C3,$25,$D3,$25

DATA_21CBA2:
	db $04,$04,$12,$12,$0D,$09,$0B,$02
	db $0B,$01,$04,$04,$12,$01,$0A,$0D
	db $09,$05,$04

DATA_21CBB5:
	dw $05A0,$05E0,$0618,$0658,$0680,$06AE,$06C0,$06FC
	dw $0700,$073E,$0E20,$0E60,$0E98,$0ED8,$0EEC,$0F00
	dw $0F2E,$0F48,$0F8A

;--------------------------------------------------------------------

DATA_21CBDB:
	db $0C,$09,$0D,$09,$0E,$09,$0F,$09
	db $0C,$09,$0D,$09,$0E,$09,$0F,$09
	db $2C,$09,$2D,$09,$2E,$09,$2F,$09
	db $1C,$09,$1D,$09,$1E,$09,$1F,$09
	db $FF,$09,$FF,$09,$FF,$09,$FF,$09
	db $3C,$09,$3D,$09,$3E,$09,$3F,$09

DATA_21CC0B:
	db $00,$00,$ED,$3D,$12,$C2

;--------------------------------------------------------------------

; Note: Tables related to the layer 3 cave pillar BG.

DATA_21CC11:
	db $00,$09,$00,$09,$03,$09,$04,$09,$01,$09,$02,$09,$00,$09,$00,$09
	db $08,$09,$09,$09,$0A,$09,$0B,$09,$05,$09,$06,$09,$07,$09,$00,$09
	db $10,$09,$11,$09,$12,$09,$13,$09,$0C,$09,$0D,$09,$0E,$09,$0F,$09
	db $17,$09,$18,$09,$19,$09,$1A,$09,$00,$09,$14,$09,$15,$09,$16,$09
	db $1C,$09,$00,$09,$1D,$09,$1E,$09,$00,$09,$00,$09,$00,$09,$1B,$09
	db $20,$09,$00,$09,$00,$09,$00,$09,$00,$09,$00,$09,$00,$09,$1F,$09
	db $22,$09,$00,$09,$00,$09,$00,$09,$00,$09,$00,$09,$00,$09,$21,$09
	db $24,$09,$00,$09,$00,$09,$00,$09,$00,$09,$00,$09,$00,$09,$23,$09
	db $26,$09,$00,$09,$00,$09,$00,$09,$00,$09,$00,$09,$00,$09,$25,$09
	db $26,$89,$00,$89,$00,$89,$00,$89,$00,$89,$00,$89,$00,$89,$25,$89
	db $24,$89,$00,$89,$00,$89,$00,$89,$00,$89,$00,$89,$00,$89,$23,$89
	db $22,$89,$00,$89,$00,$89,$00,$89,$00,$89,$00,$89,$00,$89,$21,$89
	db $20,$89,$00,$89,$00,$89,$00,$89,$00,$89,$00,$89,$00,$89,$1F,$89
	db $1C,$89,$00,$89,$1D,$89,$1E,$89,$00,$89,$00,$89,$00,$89,$1B,$89
	db $17,$89,$18,$89,$19,$89,$1A,$89,$00,$89,$14,$89,$15,$89,$16,$89
	db $10,$89,$11,$89,$12,$89,$13,$89,$0C,$89,$0D,$89,$0E,$89,$0F,$89
	db $08,$89,$09,$89,$0A,$89,$0B,$89,$05,$89,$06,$89,$07,$89,$00,$89
	db $00,$89,$00,$89,$03,$89,$04,$89,$01,$89,$02,$89,$00,$89,$00,$89

DATA_21CD31:
	db $00,$09,$00,$09,$00,$09,$00,$09,$08,$09,$09,$09,$07,$09,$00,$09
	db $10,$09,$11,$09,$0E,$09,$0F,$09,$17,$09,$18,$09,$15,$09,$16,$09
	db $1C,$09,$00,$09,$00,$09,$1B,$09,$20,$09,$00,$09,$00,$09,$1F,$09
	db $22,$09,$00,$09,$00,$09,$21,$09,$24,$09,$00,$09,$00,$09,$23,$09
	db $26,$09,$00,$09,$00,$09,$25,$09,$26,$89,$00,$89,$00,$89,$25,$89
	db $24,$89,$00,$89,$00,$89,$23,$89,$22,$89,$00,$89,$00,$89,$21,$89
	db $20,$89,$00,$89,$00,$89,$1F,$89,$1C,$89,$00,$89,$00,$89,$1B,$89
	db $17,$89,$18,$89,$15,$89,$16,$89,$10,$89,$11,$89,$0E,$89,$0F,$89
	db $08,$89,$09,$89,$07,$89,$00,$09

DATA_21CDB9:
	db $80,$00,$90,$00,$A0,$00,$B0,$00,$B8,$00

;--------------------------------------------------------------------

; Note: Tables related to the layer 3 brown water.

DATA_21CDC3:
	db $40,$2D,$41,$2D,$42,$2D,$43,$2D,$43,$2D,$42,$2D,$42,$2D,$43,$2D
	db $FC,$21,$FC,$21,$FC,$21,$FC,$21

;--------------------------------------------------------------------

DATA_21CDDB:
	db !Define_SMB3_SpriteID_OWSpr09_NSpade,!Define_SMB3_SpriteID_OWSpr0A_BlueToadHouse,!Define_SMB3_SpriteID_OWSpr0C_UnusedAirshipFleet

;--------------------------------------------------------------------

DATA_21CDDE:
	db $00,$30,$70,$B0,$EF

DATA_21CDE3:
	db $01,$02,$03,$08,$09

DATA_21CDE8:
	db $4E,$0E,$0E,$4E,$0E

DATA_21CDED:
	db $6E,$2E,$2E,$6E,$2E

DATA_21CDF2:
	db $52,$12,$12,$52,$12

DATA_21CDF7:
	db $4D,$0D,$0D,$4D,$0D,$00,$08,$10
	db $1C,$0C,$58,$58,$5C,$58,$30,$34
	db $6E,$18,$38,$1C,$24,$2C,$5C,$58
	db $6C,$68,$34,$28,$00,$60,$60,$60
	db $60,$3E,$60,$5E,$60,$60,$6A,$60
	db $60,$60,$60,$5E,$2E,$5E,$60,$60
	db $60,$70,$60

;--------------------------------------------------------------------

SMB3_InitialPlayerYPosHi:
;$21CE2A
	db $01,$00,$00,$01,$00,$00,$00,$01

SMB3_InitialPlayerYPosLo:
;$21CE32
	db $70,$40,$00,$40,$70,$B0,$F0,$80

DATA_21CE3A:						; Note: Initial FG camera position?
	db $EF,$00,$00,$EF,$30,$70,$B0,$EF

SMB3_TimeSettingTable:
;$21CE42
	db $03,$04,$02,$00

SMB3_LevelMusicTable:
;$21CE46
	db !Define_SMB3_LevelMusic_Overworld
	db !Define_SMB3_LevelMusic_Underground
	db !Define_SMB3_LevelMusic_Underwater
	db !Define_SMB3_LevelMusic_Fortress
	db !Define_SMB3_LevelMusic_BossBattle
	db !Define_SMB3_LevelMusic_Airship
	db !Define_SMB3_LevelMusic_HammerBroEncounter
	db !Define_SMB3_OverworldMusic_ToadHouse
	db !Define_SMB3_LevelMusic_Athletic
	db !Define_SMB3_LevelMusic_ThroneRoom
	db !Define_SMB3_LevelMusic_CloudBonusRoom
	db !Define_SMB3_OverworldMusic_Underground

;--------------------------------------------------------------------

DATA_21CE52:
	db $80,$40,$20,$10,$08,$04,$02,$01

;--------------------------------------------------------------------

; Note: Map16 data pointers

CODE_21CE5A:
	dw DATA_21CF56			; Overworld?
	dw DATA_248000
	dw DATA_268000
	dw DATA_24A480
	dw DATA_24DE00
	dw DATA_25A800
	dw DATA_258000
	dw DATA_258000
	dw DATA_258000
	dw DATA_25CC00
	dw DATA_26A800
	dw DATA_25A800
	dw DATA_24DE00
	dw DATA_25A800
	dw DATA_24A480
	dw DATA_218E3A
	dw DATA_218E3A
	dw DATA_218E3A
	dw DATA_219B79

CODE_21CE80:
	db DATA_21CF56>>16
	db DATA_248000>>16
	db DATA_268000>>16
	db DATA_24A480>>16
	db DATA_24DE00>>16
	db DATA_25A800>>16
	db DATA_258000>>16
	db DATA_258000>>16
	db DATA_258000>>16
	db DATA_25CC00>>16
	db DATA_26A800>>16
	db DATA_25A800>>16
	db DATA_24DE00>>16
	db DATA_25A800>>16
	db DATA_24A480>>16
	db DATA_218E3A>>16
	db DATA_218E3A>>16
	db DATA_218E3A>>16
	db DATA_219B79>>16

;--------------------------------------------------------------------

DATA_21CE93:
	db $01,$FF

DATA_21CE95:
	db $08,$F8

DATA_21CE97:
	db $00,$08,$0C,$0F,$15,$10,$11,$13
	db $12,$12,$12,$14,$17,$13,$11,$13
	db $0D,$17,$17,$17,$10,$00,$01,$F1
	db $01,$FF,$0F

;--------------------------------------------------------------------

DATA_21CEB2:
	db $00,$10,$20,$30,$40,$50,$60,$70
	db $80,$90,$A0,$B0,$C0,$D0,$E0,$F0
	db $F0

;--------------------------------------------------------------------

DATA_21CEC3:
	db $20,$A0,$40,$A0,$A0,$A0,$A0,$95

DATA_21CECB:
	db $A0,$40,$60,$A0,$55,$40,$75,$95
	db $A5,$5C,$5E,$48,$49,$05,$4B,$5C
	db $5E,$7E,$7E,$7E,$7E,$02,$02,$02
	db $06

;--------------------------------------------------------------------

; Note: Something related to IRQs used in the tile sliding minigame?

DATA_21CEE4:
	db $54,$88,$C0,$00

; Note: Something related to IRQs used in airships?

DATA_21CEE8:
	db $9E,$A5,$AC,$C0,$00

;--------------------------------------------------------------------

; Note: Something vertical level related

DATA_21CEED:
	db $00,$00,$01,$02,$03,$04,$05,$06
	db $07,$08,$09,$0A,$0B,$0C,$0D,$0E

DATA_21CEFD:
	db $00,$F0,$E0,$D0,$C0,$B0,$A0,$90
	db $80,$70,$60,$50,$40,$30,$20,$10

;--------------------------------------------------------------------

; Note: Status bar tables. The first 4 seem to be the tilemap of the cards.

DATA_21CF0D:
	dw $22AD,$22A7,$22A9,$22AB

DATA_21CF15:
	dw $22AD,$62A7,$62A9,$62AB

DATA_21CF1D:
	dw $22AD,$22A8,$22AA,$22AC

DATA_21CF25:
	dw $22AD,$62A8,$62AA,$62AC

DATA_21CF2D:
	db $36,$39,$3C

DATA_21CF30:
	db $56,$59,$5C

;--------------------------------------------------------------------

DATA_21CF33:
	db $00,$30,$70,$B0,$EF

DATA_21CF38:
	db $00,$00,$01,$02,$03

DATA_21CF3D:
	db $00,$C0,$C0,$C0,$C0

UNK_21CF42:
	db $00,$01,$02,$00,$04,$05,$06,$04
	db $08,$09,$0A,$08,$00,$01,$02,$00
	db $00,$50,$00,$48

;--------------------------------------------------------------------

; Note: Overworld map16 data.

DATA_21CF56:
	db $88,$10,$89,$10,$8A,$10,$8B,$10,$DC,$18,$DD,$18,$DE,$18,$DF,$18
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$27,$08,$27,$88,$8D,$08,$8F,$08
	db $27,$08,$27,$88,$8D,$08,$A4,$08,$27,$08,$27,$88,$8D,$08,$A5,$08
	db $27,$08,$27,$88,$8D,$08,$A6,$08,$27,$08,$27,$88,$8D,$08,$A7,$08
	db $27,$08,$27,$88,$8D,$08,$C8,$08,$27,$08,$27,$88,$8D,$08,$C9,$08
	db $27,$08,$27,$88,$8D,$08,$CA,$08,$27,$08,$27,$88,$8D,$08,$CB,$08
	db $27,$08,$27,$88,$8D,$08,$BF,$08,$8C,$10,$BE,$10,$8D,$10,$8F,$10
	db $8C,$10,$BE,$10,$8D,$10,$A4,$10,$8C,$10,$BE,$10,$8D,$10,$A5,$10
	db $8C,$10,$BE,$10,$8D,$10,$A6,$10,$8C,$10,$BE,$10,$8D,$10,$A7,$10
	db $8C,$10,$BE,$10,$8D,$10,$C8,$10,$8C,$10,$BE,$10,$8D,$10,$C9,$10
	db $8C,$10,$BE,$10,$8D,$10,$CA,$10,$8C,$10,$BE,$10,$8D,$10,$CB,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $88,$10,$89,$10,$8A,$10,$8B,$10,$DC,$18,$DD,$18,$DE,$18,$DF,$18
	db $FE,$14,$FE,$14,$FE,$14,$FE,$14,$CF,$10,$CF,$10,$CF,$10,$CF,$10
	db $FE,$14,$FE,$14,$FE,$14,$28,$04,$FE,$14,$E1,$1C,$FE,$14,$E1,$1C
	db $FE,$14,$FE,$14,$C0,$1C,$C0,$1C,$FE,$14,$E1,$1C,$FE,$14,$28,$04
	db $FE,$14,$FE,$14,$C0,$1C,$28,$04,$FE,$14,$E1,$1C,$FE,$14,$E1,$1C
	db $FE,$14,$E1,$1C,$C0,$1C,$28,$04,$78,$10,$79,$10,$7A,$10,$7B,$10
	db $FC,$14,$FC,$14,$FC,$14,$FC,$14,$FD,$14,$FD,$14,$FD,$14,$FD,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FE,$14,$FF,$14,$FE,$14,$FF,$14
	db $90,$18,$91,$18,$92,$18,$93,$18,$0C,$10,$0D,$10,$0E,$10,$0F,$10
	db $0C,$10,$0D,$10,$0E,$10,$0F,$10,$0C,$10,$0D,$10,$0E,$10,$0F,$10
	db $B6,$1C,$B7,$1C,$B8,$1C,$B9,$1C,$58,$1C,$59,$1C,$5A,$1C,$5B,$1C
	db $B6,$1C,$B7,$1C,$B8,$1C,$B9,$1C,$4B,$18,$48,$18,$4A,$18,$FE,$14
	db $4A,$18,$4A,$18,$4B,$18,$4F,$18,$4A,$18,$49,$18,$4A,$18,$49,$18
	db $4B,$18,$4D,$18,$4A,$18,$4A,$18,$FE,$14,$4C,$18,$FE,$14,$49,$18
	db $4A,$18,$49,$18,$4B,$18,$48,$18,$4A,$18,$4A,$18,$4A,$18,$4A,$18
	db $4A,$18,$4A,$18,$4A,$18,$4A,$18,$60,$18,$61,$18,$62,$18,$63,$18
	db $BA,$18,$BB,$18,$BC,$18,$BD,$18,$50,$18,$51,$18,$52,$18,$53,$18
	db $54,$18,$55,$18,$54,$18,$55,$18,$FE,$14,$42,$18,$FE,$14,$43,$18
	db $56,$18,$56,$18,$57,$18,$57,$18,$FF,$14,$42,$18,$FF,$14,$43,$18
	db $FE,$14,$E1,$14,$FE,$14,$CD,$14,$C4,$18,$C5,$18,$C6,$18,$C7,$18
	db $04,$1C,$05,$1C,$06,$1C,$07,$1C,$2E,$1C,$2F,$1C,$30,$1C,$31,$1C
	db $64,$14,$65,$14,$66,$14,$67,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $88,$18,$89,$18,$8A,$18,$8B,$18,$DC,$18,$DD,$18,$DE,$18,$DF,$18
	db $9F,$14,$96,$14,$9C,$14,$95,$14,$9E,$14,$97,$14,$9D,$14,$94,$14
	db $AC,$14,$99,$14,$9D,$14,$1F,$10,$9E,$14,$1E,$10,$9D,$14,$1F,$10
	db $9E,$14,$10,$10,$AD,$14,$98,$14,$10,$10,$1E,$10,$11,$10,$94,$14
	db $10,$10,$97,$14,$11,$10,$1F,$10,$10,$10,$97,$14,$11,$10,$94,$14
	db $9B,$14,$99,$14,$9C,$14,$94,$14,$9F,$14,$97,$14,$9A,$14,$98,$14
	db $9B,$14,$99,$14,$11,$10,$1F,$10,$10,$10,$1E,$10,$11,$10,$1F,$10
	db $10,$10,$1E,$10,$9A,$14,$98,$14,$10,$10,$1E,$10,$9C,$14,$1F,$10
	db $9F,$14,$1E,$10,$11,$10,$1F,$10,$9F,$14,$1E,$10,$9C,$14,$1F,$10
	db $10,$10,$1E,$10,$9C,$14,$94,$14,$9F,$14,$97,$14,$11,$10,$1F,$10
	db $9B,$14,$AE,$14,$11,$10,$95,$14,$10,$10,$96,$14,$11,$10,$95,$14
	db $10,$10,$96,$14,$9A,$14,$AF,$14,$9B,$14,$99,$14,$11,$10,$94,$14
	db $10,$10,$97,$14,$9A,$14,$98,$14,$AC,$14,$9B,$14,$9E,$14,$94,$14
	db $9D,$14,$97,$14,$AD,$14,$9A,$14,$9E,$14,$1E,$10,$9D,$14,$94,$14
	db $9E,$14,$97,$14,$9D,$14,$1F,$10,$9B,$14,$99,$14,$9A,$14,$98,$14
	db $9F,$14,$1E,$10,$11,$10,$94,$14,$10,$10,$97,$14,$9C,$14,$1F,$10
	db $9F,$14,$97,$14,$9C,$14,$94,$14,$AC,$14,$AE,$14,$9D,$14,$95,$14
	db $9E,$14,$96,$14,$9D,$14,$95,$14,$9E,$14,$96,$14,$AD,$14,$AF,$14
	db $9B,$14,$99,$14,$9C,$14,$1F,$10,$9F,$14,$1E,$10,$9A,$14,$98,$14
	db $99,$14,$AE,$14,$9C,$14,$96,$14,$9F,$14,$95,$14,$98,$14,$AF,$14
	db $10,$10,$96,$14,$9C,$14,$95,$14,$9F,$14,$96,$14,$11,$10,$95,$14
	db $9E,$14,$1E,$10,$86,$14,$C1,$14,$10,$10,$95,$14,$C1,$14,$87,$14
	db $10,$10,$C2,$14,$11,$10,$C2,$14,$94,$14,$9C,$14,$97,$14,$9F,$14
	db $10,$10,$C2,$14,$11,$10,$29,$08,$10,$10,$C2,$14,$C1,$14,$29,$08
	db $10,$10,$1E,$10,$C1,$14,$C1,$14,$32,$14,$33,$14,$34,$14,$35,$14
	db $36,$14,$37,$14,$38,$14,$39,$14,$D4,$14,$D5,$14,$D6,$14,$D7,$14
	db $00,$1C,$01,$1C,$02,$1C,$03,$1C,$10,$10,$1E,$10,$C1,$14,$29,$08
	db $10,$18,$1E,$18,$11,$18,$29,$08,$9B,$14,$84,$14,$11,$10,$C2,$14
	db $10,$10,$C2,$14,$9A,$14,$85,$14,$9B,$14,$84,$14,$9A,$14,$85,$14
	db $9E,$14,$95,$14,$86,$14,$87,$14,$08,$1C,$09,$1C,$0A,$1C,$0B,$1C
	db $E0,$1C,$E2,$1C,$EF,$1C,$FA,$1C,$2A,$1C,$2B,$1C,$2C,$1C,$2D,$1C
	db $16,$1C,$17,$1C,$1C,$1C,$1D,$1C,$AC,$14,$AE,$14,$AD,$14,$AF,$14
	db $88,$10,$89,$10,$8A,$10,$8B,$10,$DC,$18,$DD,$18,$DE,$18,$DF,$18
	db $10,$10,$1E,$10,$11,$10,$30,$10,$10,$10,$32,$10,$11,$10,$33,$10
	db $10,$10,$3A,$10,$11,$10,$39,$10,$10,$10,$34,$10,$11,$10,$1F,$10
	db $FE,$10,$3E,$10,$46,$10,$BE,$10,$3B,$10,$BE,$10,$FE,$10,$35,$10
	db $FE,$10,$B0,$10,$FE,$10,$B3,$10,$B1,$10,$B2,$10,$B4,$10,$B5,$10
	db $70,$14,$74,$14,$71,$14,$75,$14,$72,$14,$76,$14,$73,$14,$77,$14
	db $64,$14,$7C,$14,$65,$14,$7D,$14,$66,$14,$7E,$14,$67,$14,$7F,$14
	db $10,$10,$1E,$10,$31,$10,$37,$10,$21,$10,$FE,$10,$BE,$10,$39,$10
	db $10,$10,$3A,$10,$38,$10,$FC,$10,$3A,$10,$3B,$10,$3C,$10,$3D,$10
	db $10,$10,$1E,$10,$38,$10,$35,$10,$3B,$10,$1E,$10,$36,$10,$1F,$10
	db $3F,$10,$1E,$10,$11,$10,$1F,$10,$FC,$1C,$FC,$1C,$FC,$1C,$FC,$1C
	db $BE,$1C,$BE,$1C,$BE,$1C,$BE,$1C,$FC,$10,$FC,$10,$FC,$10,$FC,$10
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FC,$10,$FC,$10,$FC,$10,$28,$04
	db $FC,$10,$E1,$1C,$FC,$10,$E1,$1C,$FC,$10,$FC,$10,$C0,$1C,$C0,$1C
	db $FC,$10,$E1,$1C,$FC,$10,$28,$04,$FC,$10,$FC,$10,$C0,$1C,$28,$04
	db $FC,$10,$E1,$1C,$C0,$1C,$28,$04,$60,$1C,$61,$1C,$62,$1C,$63,$1C
	db $90,$10,$91,$10,$92,$10,$93,$10,$21,$10,$23,$10,$24,$10,$46,$10
	db $6C,$18,$6D,$18,$6E,$18,$6F,$18,$BA,$10,$BB,$10,$BC,$10,$BD,$10
	db $B6,$1C,$B7,$1C,$B8,$1C,$B9,$1C,$D0,$10,$D1,$10,$D2,$10,$D3,$10
	db $26,$10,$26,$90,$26,$50,$26,$D0,$FC,$10,$FF,$00,$FC,$10,$FF,$00
	db $68,$10,$6A,$10,$69,$10,$6B,$10,$58,$18,$59,$18,$5A,$18,$5B,$18
	db $12,$10,$13,$10,$14,$10,$15,$10,$C4,$10,$C5,$10,$C6,$10,$C7,$10
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$10,$10,$FF,$00,$11,$10,$FF,$00
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $AC,$14,$99,$14,$9D,$14,$5B,$10,$9E,$14,$5A,$10,$9D,$14,$5B,$10
	db $9E,$14,$58,$10,$AD,$14,$98,$14,$58,$10,$97,$14,$59,$10,$94,$14
	db $58,$10,$5A,$10,$9C,$14,$5B,$10,$9F,$14,$5A,$10,$9C,$14,$5B,$10
	db $9B,$14,$AE,$14,$59,$10,$95,$14,$58,$10,$96,$14,$59,$10,$95,$14
	db $58,$10,$96,$14,$9A,$14,$AF,$14,$9B,$14,$99,$14,$59,$10,$94,$14
	db $58,$10,$97,$14,$9A,$14,$98,$14,$9E,$14,$5A,$10,$9D,$14,$94,$14
	db $9F,$14,$5A,$10,$9A,$14,$98,$14,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $9E,$14,$5A,$10,$86,$14,$C1,$14,$58,$10,$C2,$14,$C1,$14,$C3,$14
	db $9B,$14,$84,$14,$59,$10,$C2,$14,$03,$67,$BF,$E9,$03,$67,$BF,$E9

;--------------------------------------------------------------------

; Note: Some tables related to the overworld.

DATA_21D776:
	db $00,$01,$00,$03,$04,$05,$06,$07
	db $02

DATA_21D77F:
	db $08,$08,$08,$08,$08,$08,$08,$09
	db $08

DATA_21D788:
	db $80,$40,$20,$10,$08,$04,$02,$01

DATA_21D790:
	db $51,$52,$54,$67,$EB,$E4,$56,$9D

DATA_21D798:
	db $45,$46,$46,$60,$E3,$DA,$45,$B3

DATA_21D7A0:
	db $50,$E8,$E6,$BD,$E0

DATA_21D7A5:
	db $00,$01,$40,$41,$80,$81,$C0,$C1

DATA_21D7AD:
	db $4F,$4F,$4F,$4F,$E7,$4F,$4F,$4F

UNK_21D7B5:
	db $ED,$4A,$44,$47,$48,$AE,$AF,$B5
	db $B6,$DE,$D9,$DC,$DD

;--------------------------------------------------------------------

; Note: These tables affect what level to go to after defeating a koopa kid.
; Note that all of these levels share a sprite list pointer.

PostKoopaKidThroneRoomLevelDataPtrs:
;$21D7C2
	dl SMB3_LevelData_World1ThroneRoom_Level		; World 1
	dl SMB3_LevelData_World2ThroneRoom_Level		; World 2
	dl SMB3_LevelData_World3ThroneRoom_Level		; World 3
	dl SMB3_LevelData_World4ThroneRoom_Level		; World 4
	dl SMB3_LevelData_World5ThroneRoom_Level		; World 5
	dl SMB3_LevelData_World6ThroneRoom_Level		; World 6
	dl SMB3_LevelData_World7ThroneRoom_Level		; World 7
	dl SMB3_LevelData_World8ThroneRoom_Level		; World 8

PostKoopaKidThroneRoomSpriteDataPtrs:
;$21D7DA
	dl SMB3_LevelData_BlankSpriteData

;--------------------------------------------------------------------

; Note: These tables affect what levels overworld sprite 02 (airship, specifically the one that moves around the map when you die) takes you to.
; Note that while world 8 has an airship level (ie. The one seen after the 3 hand levels), the corresponding pointers in the below tables are unused.

FleeingAirshipSpriteLevelDataPtrs:
;$21D7DD
	dl SMB3_LevelData_World1Airship_Level_Main		; World 1
	dl SMB3_LevelData_World2Airship_Level_Main		; World 2
	dl SMB3_LevelData_World3Airship_Level_Main		; World 3
	dl SMB3_LevelData_World4Airship_Level_Main		; World 4
	dl SMB3_LevelData_World5Airship_Level_Main		; World 5
	dl SMB3_LevelData_World6Airship_Level_Main		; World 6
	dl SMB3_LevelData_World7Airship_Level_Main		; World 7
	dl SMB3_LevelData_World8Airship_Level_Main		; World 8

FleeingAirshipSpriteSpriteDataPtrs:
;$21D7F5
	dl SMB3_LevelData_World1Airship_Sprite_Main		; World 1
	dl SMB3_LevelData_World2Airship_Sprite_Main		; World 2
	dl SMB3_LevelData_World3Airship_Sprite_Main		; World 3
	dl SMB3_LevelData_World4Airship_Sprite_Main		; World 4
	dl SMB3_LevelData_World5Airship_Sprite_Main		; World 5
	dl SMB3_LevelData_World6Airship_Sprite_Main		; World 6
	dl SMB3_LevelData_World7Airship_Sprite_Main		; World 7
	dl SMB3_LevelData_World8Airship_Sprite_Main		; World 8

;--------------------------------------------------------------------

; Note: These tables affect what levels overworld sprite 0A (Blue Toad House) takes you to.

BlueToadHouseSpriteLevelDataPtrs:
;$21D80D
	dl SMB3_LevelData_SpecialToadHouse_Level_Main		; World 1
	dl SMB3_LevelData_SpecialToadHouse_Level_Main		; World 2
	dl SMB3_LevelData_SpecialToadHouse_Level_Main		; World 3
	dl SMB3_LevelData_SpecialToadHouse_Level_Main		; World 4
	dl SMB3_LevelData_SpecialToadHouse_Level_Main		; World 5
	dl SMB3_LevelData_SpecialToadHouse_Level_Main		; World 6
	dl SMB3_LevelData_SpecialToadHouse_Level_Main		; World 7
	dl SMB3_LevelData_SpecialToadHouse_Level_Main		; World 8

DATA_21D825:
	dw $0200						; World 1
	dw $0A00						; World 2
	dw $0200						; World 3
	dw $0A00						; World 4
	dw $0200						; World 5
	dw $0A00						; World 6
	dw $0200						; World 7
	dw $0A00						; World 8

;--------------------------------------------------------------------

; Note: These tables affect what levels overworld sprite 0B (Coin Ship) takes you to.

CoinShipSpriteLevelDataPtrs:
;$21D835
	dl SMB3_LevelData_CoinShip_Level_Main
	dl SMB3_LevelData_CoinShip_Level_Main
	dl SMB3_LevelData_CoinShip_Level_Main
	dl SMB3_LevelData_CoinShip_Level_Main
	dl SMB3_LevelData_CoinShip_Level_Main
	dl SMB3_LevelData_CoinShip_Level_Main
	dl SMB3_LevelData_CoinShip_Level_Main
	dl SMB3_LevelData_CoinShip_Level_Main

CoinShipSpriteSpriteDataPtrs:
;$21D84D
	dl SMB3_LevelData_CoinShip_Sprite_Main
	dl SMB3_LevelData_CoinShip_Sprite_Main
	dl SMB3_LevelData_CoinShip_Sprite_Main
	dl SMB3_LevelData_CoinShip_Sprite_Main
	dl SMB3_LevelData_CoinShip_Sprite_Main
	dl SMB3_LevelData_CoinShip_Sprite_Main
	dl SMB3_LevelData_CoinShip_Sprite_Main
	dl SMB3_LevelData_CoinShip_Sprite_Main

;--------------------------------------------------------------------

; Note: These tables affect what level overworld sprite 0C (Unused airship fleet?) takes you to.

DATA_21D865:
	dl SMB3_LevelData_7_5_Level_Sub

DATA_21D868:
	dl SMB3_LevelData_7_5_Sprite_Sub

;--------------------------------------------------------------------

OverworldLevelXCoordinateHiTablePtrs:
;$21D86B
	dw World1LevelXCoordinateHi		; World 1
	dw World2LevelXCoordinateHi		; World 2
	dw World3LevelXCoordinateHi		; World 3
	dw World4LevelXCoordinateHi		; World 4
	dw World5LevelXCoordinateHi		; World 5
	dw World6LevelXCoordinateHi		; World 6
	dw World7LevelXCoordinateHi		; World 7
	dw World8LevelXCoordinateHi		; World 8
	dw World9LevelXCoordinateHi		; World 9 (Warp Whistle)

OverworldLevelYCoordinateAndTilesetTablePtrs:
;$21D87D
	dw World1LevelYCoordinateLoAndTilemap	; World 1
	dw World2LevelYCoordinateLoAndTilemap	; World 2
	dw World3LevelYCoordinateLoAndTilemap	; World 3
	dw World4LevelYCoordinateLoAndTilemap	; World 4
	dw World5LevelYCoordinateLoAndTilemap	; World 5
	dw World6LevelYCoordinateLoAndTilemap	; World 6
	dw World7LevelYCoordinateLoAndTilemap	; World 7
	dw World8LevelYCoordinateLoAndTilemap	; World 8
	dw World9LevelYCoordinateLoAndTilemap	; World 9 (Warp Whistle)

OverworldLevelXCoordinateLoTablePtrs:
;$21D88F
	dw World1LevelXCoordinateLo		; World 1
	dw World2LevelXCoordinateLo		; World 2
	dw World3LevelXCoordinateLo		; World 3
	dw World4LevelXCoordinateLo		; World 4
	dw World5LevelXCoordinateLo		; World 5
	dw World6LevelXCoordinateLo		; World 6
	dw World7LevelXCoordinateLo		; World 7
	dw World8LevelXCoordinateLo		; World 8
	dw World9LevelXCoordinateLo		; World 9 (Warp Whistle)

SpriteDataListTablePointers:
;$21D8A1
	dw World1SpritePtrs			; World 1
	dw World2SpritePtrs			; World 2
	dw World3SpritePtrs			; World 3
	dw World4SpritePtrs			; World 4
	dw World5SpritePtrs			; World 5
	dw World6SpritePtrs			; World 6
	dw World7SpritePtrs			; World 7
	dw World8SpritePtrs			; World 8
	dw World9SpritePtrs			; World 9 (Warp Whistle)

LevelDataListTablePointers:
;$21D8B3
	dw World1LevelDataPtrs			; World 1
	dw World2LevelDataPtrs			; World 2
	dw World3LevelDataPtrs			; World 3
	dw World4LevelDataPtrs			; World 4
	dw World5LevelDataPtrs			; World 5
	dw World6LevelDataPtrs			; World 6
	dw World7LevelDataPtrs			; World 7
	dw World8LevelDataPtrs			; World 8
	dw World9LevelDataPtrs			; World 9 (Warp Whistle)

World1LevelXCoordinateHi:
;$21D8C5
	db ((World1SpritePtrs_Screen00-World1SpritePtrs)+(World1LevelDataPtrs_Screen00-World1LevelDataPtrs))/6
	db ((World1SpritePtrs_Screen01-World1SpritePtrs)+(World1LevelDataPtrs_Screen01-World1LevelDataPtrs))/6
	db ((World1SpritePtrs_Screen02-World1SpritePtrs)+(World1LevelDataPtrs_Screen02-World1LevelDataPtrs))/6
	db ((World1SpritePtrs_Screen03-World1SpritePtrs)+(World1LevelDataPtrs_Screen03-World1LevelDataPtrs))/6

World1LevelYCoordinateLoAndTilemap:
;$21D8C9
.Screen00:
	db $21,$23,$23,$21,$23,$44,$43,$43
	db $44,$47,$63,$62,$6F,$83,$87,$83
	db $83,$82,$AE,$A3,$A4
.Screen01:
.Screen02:
.Screen03:

World1LevelXCoordinateLo:
;$21D8DE
.Screen00:
	db $04,$06,$08,$0A,$0C,$02,$04,$08
	db $0A,$0C,$04,$06,$08,$04,$06,$08
	db $0A,$0C,$04,$06,$08
.Screen01:
.Screen02:
.Screen03:

World1SpritePtrs:
;$21D8F3
.Screen00:
	dl SMB3_LevelData_1_1_Sprite_Main
	dl SMB3_LevelData_World1HammerBro_Sprite_Main
	dl SMB3_LevelData_1_2_Sprite_Main
	dl SMB3_LevelData_1_3_Sprite_Main
	dl SMB3_LevelData_World1HammerBro_Sprite_Main
	dl SMB3_LevelData_Unused06_Sprite_Main
	dl SMB3_LevelData_World1HammerBro_Sprite_Main
	dl SMB3_LevelData_World1HammerBro_Sprite_Main
	dl SMB3_LevelData_1_4_Sprite_Main
	dl $000700
	dl SMB3_LevelData_World1HammerBro_Sprite_Main
	dl SMB3_LevelData_World1Fortress_Sprite_Main
	dl $000001
	dl SMB3_LevelData_World1HammerBro_Sprite_Main
	dl $000700
	dl SMB3_LevelData_World1HammerBro_Sprite_Main
	dl SMB3_LevelData_World1HammerBro_Sprite_Main
	dl SMB3_LevelData_ThroneRoom_Sprite
	dl SMB3_LevelData_1_5_Sprite_Main
	dl SMB3_LevelData_World1HammerBro_Sprite_Main
	dl SMB3_LevelData_1_6_Sprite_Main
.Screen01:
.Screen02:
.Screen03:

World1LevelDataPtrs:
;$21D932
.Screen00:
	dl SMB3_LevelData_1_1_Level_Main
	dl SMB3_LevelData_World1HammerBro1_Level_Main
	dl SMB3_LevelData_1_2_Level_Main
	dl SMB3_LevelData_1_3_Level_Main
	dl SMB3_LevelData_World1HammerBro1_Level_Main
	dl SMB3_LevelData_Unused06_Level_Main
	dl SMB3_LevelData_World1HammerBro1_Level_Main
	dl SMB3_LevelData_World1HammerBro1_Level_Main
	dl SMB3_LevelData_1_4_Level_Main
	dl SMB3_LevelData_ToadHouse_Level_Main
	dl SMB3_LevelData_World1HammerBro2_Level_Main
	dl SMB3_LevelData_World1Fortress_Level_Main
	dl $000000
	dl SMB3_LevelData_World1HammerBro1_Level_Main
	dl SMB3_LevelData_ToadHouse_Level_Main
	dl SMB3_LevelData_World1HammerBro2_Level_Main
	dl SMB3_LevelData_World1HammerBro1_Level_Main
	dl SMB3_LevelData_World1ThroneRoom_Level
	dl SMB3_LevelData_1_5_Level_Main
	dl SMB3_LevelData_World1HammerBro1_Level_Main
	dl SMB3_LevelData_1_6_Level_Main
.Screen01:
.Screen02:
.Screen03:

World2LevelXCoordinateHi:
;$21D971
	db ((World2SpritePtrs_Screen00-World2SpritePtrs)+(World2LevelDataPtrs_Screen00-World2LevelDataPtrs))/6
	db ((World2SpritePtrs_Screen01-World2SpritePtrs)+(World2LevelDataPtrs_Screen01-World2LevelDataPtrs))/6
	db ((World2SpritePtrs_Screen02-World2SpritePtrs)+(World2LevelDataPtrs_Screen02-World2LevelDataPtrs))/6
	db ((World2SpritePtrs_Screen03-World2SpritePtrs)+(World2LevelDataPtrs_Screen03-World2LevelDataPtrs))/6

World2LevelYCoordinateLoAndTilemap:
;$21D975
.Screen00:
	db $2F,$29,$23,$29,$29,$27,$49,$49
	db $49,$49,$49,$49,$69,$69,$69,$69
	db $6E,$89,$87,$8E,$89,$89,$A3,$A9
	db $A9,$A9,$AF

.Screen01:
	db $29,$29,$29,$29,$27,$43,$49,$49
	db $69,$62,$69,$69,$69,$89,$89,$89
	db $89,$A9,$A9,$A9

.Screen02:
.Screen03:

World2LevelXCoordinateLo:
;$21D9A4
.Screen00:
	db $04,$06,$08,$0A,$0C,$0E,$04,$06
	db $08,$0A,$0C,$0E,$04,$08,$0A,$0C
	db $0E,$04,$06,$08,$0C,$0E,$02,$04
	db $06,$08,$0E

.Screen01:
	db $10,$12,$14,$16,$18,$10,$14,$18
	db $10,$12,$14,$18,$1A,$10,$12,$14
	db $1A,$10,$12,$14

.Screen02:
.Screen03:

World2SpritePtrs:
;$21D9D3
.Screen00:
	dl $000001
	dl SMB3_LevelData_World2HammerBro_Sprite1_Main
	dl SMB3_LevelData_2_2_Sprite_Main
	dl SMB3_LevelData_World2HammerBro_Sprite1_Main
	dl SMB3_LevelData_World2HammerBro_Sprite1_Main
	dl $000700
	dl SMB3_LevelData_World2HammerBro_Sprite1_Main
	dl SMB3_LevelData_World2HammerBro_Sprite1_Main
	dl SMB3_LevelData_World2HammerBro_Sprite1_Main
	dl SMB3_LevelData_World2HammerBro_Sprite1_Main
	dl SMB3_LevelData_2_3_Sprite_Main
	dl SMB3_LevelData_World2HammerBro_Sprite1_Main
	dl SMB3_LevelData_2_1_Sprite_Main
	dl SMB3_LevelData_World2Fortress_Sprite_Main
	dl SMB3_LevelData_World2HammerBro_Sprite1_Main
	dl SMB3_LevelData_World2HammerBro_Sprite1_Main
	dl SMB3_LevelData_World2PipeLevel1Set1_Sprite_Main
	dl SMB3_LevelData_World2HammerBro_Sprite1_Main
	dl $000700
	dl SMB3_LevelData_World2PipeLevel1Set1_Sprite_Main
	dl SMB3_LevelData_World2HammerBro_Sprite1_Main
	dl SMB3_LevelData_World2HammerBro_Sprite1_Main
	dl SMB3_LevelData_World2HammerBro_Sprite2_Main
	dl SMB3_LevelData_World2HammerBro_Sprite1_Main
	dl SMB3_LevelData_World2HammerBro_Sprite1_Main
	dl SMB3_LevelData_World2HammerBro_Sprite1_Main
	dl $000001
.Screen01:
	dl SMB3_LevelData_World2HammerBro_Sprite1_Main
	dl SMB3_LevelData_2_4_Sprite_Main
	dl SMB3_LevelData_World2HammerBro_Sprite1_Main
	dl SMB3_LevelData_World2HammerBro_Sprite1_Main
	dl $000300
	dl SMB3_LevelData_AngrySun_Sprite_Main
	dl SMB3_LevelData_World2HammerBro_Sprite1_Main
	dl SMB3_LevelData_World2HammerBro_Sprite3_Main
	dl SMB3_LevelData_World2HammerBro_Sprite1_Main
	dl SMB3_LevelData_ThroneRoom_Sprite
	dl SMB3_LevelData_World2HammerBro_Sprite1_Main
	dl SMB3_LevelData_World2HammerBro_Sprite3_Main
	dl SMB3_LevelData_World2HammerBro_Sprite3_Main
	dl SMB3_LevelData_2_5_Sprite_Main
	dl SMB3_LevelData_World2HammerBro_Sprite1_Main
	dl SMB3_LevelData_Pyramid_Sprite_Main
	dl SMB3_LevelData_World2HammerBro_Sprite3_Main
	dl SMB3_LevelData_World2HammerBro_Sprite1_Main
	dl SMB3_LevelData_World2HammerBro_Sprite1_Main
	dl SMB3_LevelData_World2HammerBro_Sprite1_Main
.Screen02:
.Screen03:

World2LevelDataPtrs:
;$21DA60
.Screen00:
	dl $000000
	dl SMB3_LevelData_World2HammerBro_Level_Main
	dl SMB3_LevelData_2_2_Level_Main
	dl SMB3_LevelData_World2HammerBro_Level_Main
	dl SMB3_LevelData_World2HammerBro_Level_Main
	dl SMB3_LevelData_ToadHouse_Level_Main
	dl SMB3_LevelData_World2HammerBro_Level_Main
	dl SMB3_LevelData_World2HammerBro_Level_Main
	dl SMB3_LevelData_World2HammerBro_Level_Main
	dl SMB3_LevelData_World2HammerBro_Level_Main
	dl SMB3_LevelData_2_3_Level_Main
	dl SMB3_LevelData_World2HammerBro_Level_Main
	dl SMB3_LevelData_2_1_Level_Main
	dl SMB3_LevelData_World2Fortress_Level_Main
	dl SMB3_LevelData_World2HammerBro_Level_Main
	dl SMB3_LevelData_World2HammerBro_Level_Main
	dl SMB3_LevelData_PipeLevel1B_Level_Main				; Right side
	dl SMB3_LevelData_World2HammerBro_Level_Main
	dl SMB3_LevelData_ToadHouse_Level_Main
	dl SMB3_LevelData_PipeLevel1A_Level_Main				; Left side
	dl SMB3_LevelData_World2HammerBro_Level_Main
	dl SMB3_LevelData_World2HammerBro_Level_Main
	dl SMB3_LevelData_World5HammerBro1_Level_Main
	dl SMB3_LevelData_World2HammerBro_Level_Main
	dl SMB3_LevelData_World2HammerBro_Level_Main
	dl SMB3_LevelData_World2HammerBro_Level_Main
	dl $000000
.Screen01:
	dl SMB3_LevelData_World2HammerBro_Level_Main
	dl SMB3_LevelData_2_4_Level_Main
	dl SMB3_LevelData_World2HammerBro_Level_Main
	dl SMB3_LevelData_World2HammerBro_Level_Main
	dl SMB3_LevelData_ToadHouse_Level_Main
	dl SMB3_LevelData_AngrySun_Level_Main
	dl SMB3_LevelData_World2HammerBro_Level_Main
	dl SMB3_LevelData_World2HammerBro_Level_Main
	dl SMB3_LevelData_World2HammerBro_Level_Main
	dl SMB3_LevelData_World2ThroneRoom_Level
	dl SMB3_LevelData_World2HammerBro_Level_Main
	dl SMB3_LevelData_World2HammerBro_Level_Main
	dl SMB3_LevelData_World2HammerBro_Level_Main
	dl SMB3_LevelData_2_5_Level_Main
	dl SMB3_LevelData_World2HammerBro_Level_Main
	dl SMB3_LevelData_Pyramid_Level_Main
	dl SMB3_LevelData_World2HammerBro_Level_Main
	dl SMB3_LevelData_World2HammerBro_Level_Main
	dl SMB3_LevelData_World2HammerBro_Level_Main
	dl SMB3_LevelData_World2HammerBro_Level_Main
.Screen02:
.Screen03:

World3LevelXCoordinateHi:
;$21DAED
	db ((World3SpritePtrs_Screen00-World3SpritePtrs)+(World3LevelDataPtrs_Screen00-World3LevelDataPtrs))/6
	db ((World3SpritePtrs_Screen01-World3SpritePtrs)+(World3LevelDataPtrs_Screen01-World3LevelDataPtrs))/6
	db ((World3SpritePtrs_Screen02-World3SpritePtrs)+(World3LevelDataPtrs_Screen02-World3LevelDataPtrs))/6
	db ((World3SpritePtrs_Screen03-World3SpritePtrs)+(World3LevelDataPtrs_Screen03-World3LevelDataPtrs))/6

World3LevelYCoordinateLoAndTilemap:
;$21DAF1
.Screen00:
	db $27,$21,$21,$21,$27,$21,$21,$44
	db $41,$43,$41,$61,$6F,$62,$61,$61
	db $61,$86,$81,$8E,$86,$81,$A1,$AE
	db $AF,$A1,$AE

.Screen01:
	db $24,$21,$21,$21,$43,$41,$4F,$42
	db $5F,$57,$61,$61,$6E,$6E,$73,$77
	db $7F,$81,$81,$81

.Screen02:
	db $21,$27,$82,$81,$8E

.Screen03:

World3LevelXCoordinateLo:
;$21DB25
.Screen00:
	db $02,$04,$06,$08,$0A,$0C,$0E,$04
	db $08,$0C,$0E,$04,$06,$08,$0A,$0C
	db $0E,$04,$08,$0A,$0C,$0E,$02,$04
	db $06,$08,$0A

.Screen01:
	db $10,$12,$14,$16,$10,$12,$14,$16
	db $1A,$1C,$10,$12,$14,$16,$18,$1A
	db $1C,$10,$12,$14

.Screen02:
	db $20,$22,$29,$2B,$2D

.Screen03:

World3SpritePtrs:
;$21DB59
.Screen00:
	dl $000300
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_3_3_Sprite_Main
	dl $000800
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_3_2_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_3_4_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl $000001
	dl SMB3_LevelData_World3Fortress1_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_3_1_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_World3PipeLevel2Set1_Sprite_Main
	dl SMB3_LevelData_3_5_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_World3PipeLevel2Set1_Sprite_Main
	dl $000001
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_World3PipeLevel3Set1_Sprite_Main
.Screen01:
	dl SMB3_LevelData_3_6_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_3_7_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_3_8_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl $000001
	dl SMB3_LevelData_World3Fortress2_Sprite_Main
	dl $000001
	dl $000800
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_3_9_Sprite_Main
	dl SMB3_LevelData_World3PipeLevel4Set1_Sprite_Main
	dl SMB3_LevelData_World3PipeLevel3Set1_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl $000800
	dl $000001
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
.Screen02:
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl $000700
	dl SMB3_LevelData_ThroneRoom_Sprite
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_World3PipeLevel4Set1_Sprite_Main
.Screen03:

World3LevelDataPtrs:
;$21DBF5
.Screen00:
	dl SMB3_LevelData_ToadHouse_Level_Main
	dl SMB3_LevelData_World3HammerBro1_Level_Main
	dl SMB3_LevelData_World3HammerBro2_Level_Main
	dl SMB3_LevelData_3_3_Level_Main
	dl SMB3_LevelData_ToadHouse_Level_Main
	dl SMB3_LevelData_World3HammerBro1_Level_Main
	dl SMB3_LevelData_World3HammerBro1_Level_Main
	dl SMB3_LevelData_3_2_Level_Main
	dl SMB3_LevelData_World3HammerBro2_Level_Main
	dl SMB3_LevelData_3_4_Level_Main
	dl SMB3_LevelData_World3HammerBro1_Level_Main
	dl SMB3_LevelData_World3HammerBro3_Level_Main
	dl $000000
	dl SMB3_LevelData_World3Fortress1_Level_Main
	dl SMB3_LevelData_World3HammerBro1_Level_Main
	dl SMB3_LevelData_World3HammerBro3_Level_Main
	dl SMB3_LevelData_World3HammerBro1_Level_Main
	dl SMB3_LevelData_3_1_Level_Main
	dl SMB3_LevelData_World3HammerBro4_Level_Main
	dl SMB3_LevelData_PipeLevel2B_Level_Main
	dl SMB3_LevelData_3_5_Level_Main
	dl SMB3_LevelData_World3HammerBro4_Level_Main
	dl SMB3_LevelData_World3HammerBro1_Level_Main
	dl SMB3_LevelData_PipeLevel2A_Level_Main
	dl $000000
	dl SMB3_LevelData_World3HammerBro1_Level_Main
	dl SMB3_LevelData_PipeLevel3A_Level_Main
.Screen01:
	dl SMB3_LevelData_3_6_Level_Main
	dl SMB3_LevelData_World3HammerBro1_Level_Main
	dl SMB3_LevelData_3_7_Level_Main
	dl SMB3_LevelData_World3HammerBro1_Level_Main
	dl SMB3_LevelData_3_8_Level_Main
	dl SMB3_LevelData_World3HammerBro1_Level_Main
	dl $000000
	dl SMB3_LevelData_World3Fortress2_Level_Main
	dl $000000
	dl SMB3_LevelData_ToadHouse_Level_Main
	dl SMB3_LevelData_World3HammerBro1_Level_Main
	dl SMB3_LevelData_3_9_Level_Main
	dl SMB3_LevelData_PipeLevel4A_Level_Main
	dl SMB3_LevelData_PipeLevel3B_Level_Main
	dl SMB3_LevelData_World3HammerBro1_Level_Main
	dl SMB3_LevelData_ToadHouse_Level_Main
	dl $000000
	dl SMB3_LevelData_World3HammerBro1_Level_Main
	dl SMB3_LevelData_World3HammerBro1_Level_Main
	dl SMB3_LevelData_World3HammerBro1_Level_Main
.Screen02:
	dl SMB3_LevelData_World3HammerBro1_Level_Main
	dl SMB3_LevelData_ToadHouse_Level_Main
	dl SMB3_LevelData_World3ThroneRoom_Level
	dl SMB3_LevelData_World3HammerBro1_Level_Main
	dl SMB3_LevelData_PipeLevel4B_Level_Main
.Screen03:

World4LevelXCoordinateHi:
;$21DC91
	db ((World4SpritePtrs_Screen00-World4SpritePtrs)+(World4LevelDataPtrs_Screen00-World4LevelDataPtrs))/6
	db ((World4SpritePtrs_Screen01-World4SpritePtrs)+(World4LevelDataPtrs_Screen01-World4LevelDataPtrs))/6
	db ((World4SpritePtrs_Screen02-World4SpritePtrs)+(World4LevelDataPtrs_Screen02-World4LevelDataPtrs))/6
	db ((World4SpritePtrs_Screen03-World4SpritePtrs)+(World4LevelDataPtrs_Screen03-World4LevelDataPtrs))/6

World4LevelYCoordinateLoAndTilemap:
;$21DC95
.Screen00:
	db $4B,$4E,$47,$41,$4B,$6B,$62,$6B
	db $6B,$62,$8E,$8F,$8B,$8B

.Screen01:
	db $4B,$4E,$42,$4B,$4B,$4B,$4B,$6B
	db $6B,$6B,$6F,$67,$6B,$8B,$8B,$8B
	db $87,$8E,$8B,$A7

.Screen02:
.Screen03:

World4LevelXCoordinateLo:
;$21DCB7
.Screen00:
	db $02,$04,$0A,$0C,$0E,$02,$08,$0A
	db $0C,$0E,$02,$0A,$0C,$0E

.Screen01:
	db $10,$12,$14,$16,$18,$1A,$1C,$10
	db $12,$14,$16,$1A,$1C,$10,$12,$14
	db $18,$1A,$1C,$14

.Screen02:
.Screen03:

World4SpritePtrs:
;$21DCD9
.Screen00:
	dl SMB3_LevelData_World4HammerBro_Sprite_Main
	dl SMB3_LevelData_World4PipeLevel1Set1_Sprite_Main
	dl $000900
	dl SMB3_LevelData_4_6_Sprite_Main
	dl SMB3_LevelData_World4HammerBro_Sprite_Main
	dl SMB3_LevelData_World4HammerBro_Sprite_Main
	dl SMB3_LevelData_ThroneRoom_Sprite
	dl SMB3_LevelData_World4HammerBro_Sprite_Main
	dl SMB3_LevelData_World4HammerBro_Sprite_Main
	dl SMB3_LevelData_World4Fortress2_Sprite_Main
	dl SMB3_LevelData_World4PipeLevel2Set1_Sprite_Main
	dl $000001
	dl SMB3_LevelData_4_5_Sprite_Main
	dl SMB3_LevelData_World4HammerBro_Sprite_Main
.Screen01:
	dl SMB3_LevelData_World4HammerBro_Sprite_Main
	dl SMB3_LevelData_World4PipeLevel2Set1_Sprite_Main
	dl SMB3_LevelData_World4Fortress1_Sprite_Main
	dl SMB3_LevelData_World4HammerBro_Sprite_Main
	dl SMB3_LevelData_4_3_Sprite_Main
	dl SMB3_LevelData_World4HammerBro_Sprite_Main
	dl SMB3_LevelData_4_2_Sprite_Main
	dl SMB3_LevelData_World4HammerBro_Sprite_Main
	dl SMB3_LevelData_World4HammerBro_Sprite_Main
	dl SMB3_LevelData_World4HammerBro_Sprite_Main
	dl $000001
	dl $000700
	dl SMB3_LevelData_World4HammerBro_Sprite_Main
	dl SMB3_LevelData_World4HammerBro_Sprite_Main
	dl SMB3_LevelData_World4HammerBro_Sprite_Main
	dl SMB3_LevelData_4_4_Sprite_Main
	dl $000400
	dl SMB3_LevelData_World4PipeLevel1Set1_Sprite_Main
	dl SMB3_LevelData_4_1_Sprite_Main
	dl $000700
.Screen02:
.Screen03:

World4LevelDataPtrs:
;$21DD3F
.Screen00:
	dl SMB3_LevelData_World4HammerBro_Level_Main
	dl SMB3_LevelData_PipeLevel1A_Level_Main
	dl SMB3_LevelData_ToadHouse_Level_Main
	dl SMB3_LevelData_4_6_Level_Main
	dl SMB3_LevelData_World4HammerBro_Level_Main
	dl SMB3_LevelData_World4HammerBro_Level_Main
	dl SMB3_LevelData_World4ThroneRoom_Level
	dl SMB3_LevelData_World4HammerBro_Level_Main
	dl SMB3_LevelData_World4HammerBro_Level_Main
	dl SMB3_LevelData_World4Fortress2_Level_Main
	dl SMB3_LevelData_PipeLevel2A_Level_Main
	dl $000000
	dl SMB3_LevelData_4_5_Level_Main
	dl SMB3_LevelData_World4HammerBro_Level_Main
.Screen01:
	dl SMB3_LevelData_World4HammerBro_Level_Main
	dl SMB3_LevelData_PipeLevel2B_Level_Main
	dl SMB3_LevelData_World4Fortress1_Level_Main
	dl SMB3_LevelData_World4HammerBro_Level_Main
	dl SMB3_LevelData_4_3_Level_Main
	dl SMB3_LevelData_World4HammerBro_Level_Main
	dl SMB3_LevelData_4_2_Level_Main
	dl SMB3_LevelData_World4HammerBro_Level_Main
	dl SMB3_LevelData_World4HammerBro_Level_Main
	dl SMB3_LevelData_World4HammerBro_Level_Main
	dl $000000
	dl SMB3_LevelData_ToadHouse_Level_Main
	dl SMB3_LevelData_World4HammerBro_Level_Main
	dl SMB3_LevelData_World4HammerBro_Level_Main
	dl SMB3_LevelData_World4HammerBro_Level_Main
	dl SMB3_LevelData_4_4_Level_Main
	dl SMB3_LevelData_ToadHouse_Level_Main
	dl SMB3_LevelData_PipeLevel1B_Level_Main
	dl SMB3_LevelData_4_1_Level_Main
	dl SMB3_LevelData_ToadHouse_Level_Main
.Screen02:
.Screen03:

World5LevelXCoordinateHi:
;$21DDA5
	db ((World5SpritePtrs_Screen00-World5SpritePtrs)+(World5LevelDataPtrs_Screen00-World5LevelDataPtrs))/6
	db ((World5SpritePtrs_Screen01-World5SpritePtrs)+(World5LevelDataPtrs_Screen01-World5LevelDataPtrs))/6
	db ((World5SpritePtrs_Screen02-World5SpritePtrs)+(World5LevelDataPtrs_Screen02-World5LevelDataPtrs))/6
	db ((World5SpritePtrs_Screen03-World5SpritePtrs)+(World5LevelDataPtrs_Screen03-World5LevelDataPtrs))/6

World5LevelYCoordinateLoAndTilemap:
;$21DDA9
.Screen00:
	db $23,$2E,$27,$21,$23,$41,$4E,$4E
	db $43,$43,$42,$63,$62,$63,$63,$63
	db $83,$83,$8F,$83

.Screen01:
	db $27,$4D,$4D,$44,$6D,$6D,$6D,$6D
	db $6F,$8F,$8D,$82,$8D,$8D,$8D,$A2
	db $AD,$AD,$AD,$AD,$A7,$AD

.Screen02:
.Screen03:

World5LevelXCoordinateLo:
;$21DDD3
.Screen00:
	db $02,$04,$06,$08,$0A,$02,$04,$06
	db $08,$0A,$0C,$02,$04,$06,$08,$0A
	db $02,$04,$06,$08

.Screen01:
	db $1E,$18,$1C,$1E,$16,$18,$1A,$1C
	db $1E,$14,$16,$18,$1A,$1C,$1E,$12
	db $14,$16,$18,$1A,$1C,$1E

.Screen02:
.Screen03:

World5SpritePtrs:
;$21DDFD
.Screen00:
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_5_2_Sprite_Main
	dl $000400
	dl SMB3_LevelData_BlankSpriteData
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_5_1_Sprite_Main
	dl SMB3_LevelData_World5PipeLevel4Set1_Sprite_Main
	dl SMB3_LevelData_World5PipeLevel4Set1_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_World5Tower_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_World5Fortress1_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl $000001
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
.Screen01:
	dl $000900
	dl SMB3_LevelData_ExitToSurface_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_5_5_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_5_4_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl $000001
	dl $000001
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_World5Fortress2_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_5_7_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_ThroneRoom_Sprite
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_5_9_Sprite_Main
	dl SMB3_LevelData_5_8_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl $000700
	dl SMB3_LevelData_5_6_Sprite_Main
.Screen02:
.Screen03:

World5LevelDataPtrs:
;$21DE7B
.Screen00:
	dl SMB3_LevelData_World5HammerBro1_Level_Main
	dl SMB3_LevelData_5_2_Level_Main
	dl SMB3_LevelData_ToadHouse_Level_Main
	dl SMB3_LevelData_5_3_Level_Main
	dl SMB3_LevelData_World5HammerBro1_Level_Main
	dl SMB3_LevelData_5_1_Level_Main
	dl SMB3_LevelData_PipeLevel4A_Level_Main
	dl SMB3_LevelData_PipeLevel4B_Level_Main
	dl SMB3_LevelData_World5HammerBro1_Level_Main
	dl SMB3_LevelData_World5HammerBro1_Level_Main
	dl SMB3_LevelData_World5Tower_Level_Main
	dl SMB3_LevelData_World5HammerBro1_Level_Main
	dl SMB3_LevelData_World5Fortress1_Level_Main
	dl SMB3_LevelData_World5HammerBro1_Level_Main
	dl SMB3_LevelData_World5HammerBro1_Level_Main
	dl SMB3_LevelData_World5HammerBro1_Level_Main
	dl SMB3_LevelData_World5HammerBro1_Level_Main
	dl SMB3_LevelData_World5HammerBro1_Level_Main
	dl $000000
	dl SMB3_LevelData_World5HammerBro3_Level_Main
.Screen01:
	dl SMB3_LevelData_ToadHouse_Level_Main
	dl SMB3_LevelData_ExitToSurface_Level_Main
	dl SMB3_LevelData_World5HammerBro4_Level_Main
	dl SMB3_LevelData_5_5_Level_Main
	dl SMB3_LevelData_World5HammerBro2_Level_Main
	dl SMB3_LevelData_World5HammerBro2_Level_Main
	dl SMB3_LevelData_5_4_Level_Main
	dl SMB3_LevelData_World5HammerBro2_Level_Main
	dl $000000
	dl $000000
	dl SMB3_LevelData_World5HammerBro2_Level_Main
	dl SMB3_LevelData_World5Fortress2_Level_Main
	dl SMB3_LevelData_World5HammerBro2_Level_Main
	dl SMB3_LevelData_5_7_Level_Main
	dl SMB3_LevelData_World5HammerBro2_Level_Main
	dl SMB3_LevelData_World5ThroneRoom_Level
	dl SMB3_LevelData_World5HammerBro2_Level_Main
	dl SMB3_LevelData_5_9_Level_Main
	dl SMB3_LevelData_5_8_Level_Main
	dl SMB3_LevelData_World5HammerBro2_Level_Main
	dl SMB3_LevelData_ToadHouse_Level_Main
	dl SMB3_LevelData_5_6_Level_Main
.Screen02:
.Screen03:

World6LevelXCoordinateHi:
;$21DEF9
	db ((World6SpritePtrs_Screen00-World6SpritePtrs)+(World6LevelDataPtrs_Screen00-World6LevelDataPtrs))/6
	db ((World6SpritePtrs_Screen01-World6SpritePtrs)+(World6LevelDataPtrs_Screen01-World6LevelDataPtrs))/6
	db ((World6SpritePtrs_Screen02-World6SpritePtrs)+(World6LevelDataPtrs_Screen02-World6LevelDataPtrs))/6
	db ((World6SpritePtrs_Screen03-World6SpritePtrs)+(World6LevelDataPtrs_Screen03-World6LevelDataPtrs))/6

World6LevelYCoordinateLoAndTilemap:
;$21DEFD
.Screen00:
	db $27,$4C,$4C,$4C,$4E,$6C,$6C,$6C
	db $6F,$62,$6C,$6C,$8E,$8C,$8C,$8C
	db $8F

.Screen01:
	db $2E,$2C,$2C,$4C,$4C,$4C,$6E,$6C
	db $6C,$6C,$6C,$6C,$63,$6C,$8C,$8C
	db $87,$8C,$8C,$8C,$8C,$AC,$AC,$AC
	db $AC,$AF,$AC

.Screen02:
	db $4C,$4C,$4C,$6C,$62,$6C,$6C,$6C
	db $6C,$62,$8C,$8C,$8C

.Screen03:

World6LevelXCoordinateLo:
;$21DF36
.Screen00:
	db $0C,$08,$0A,$0C,$0E,$02,$04,$06
	db $08,$0A,$0C,$0E,$04,$08,$0A,$0C
	db $0E

.Screen01:
	db $16,$18,$1A,$18,$1A,$1C,$10,$12
	db $14,$16,$18,$1A,$1C,$1E,$10,$12
	db $14,$16,$18,$1A,$1C,$12,$14,$16
	db $18,$1A,$1C

.Screen02:
	db $20,$22,$24,$20,$22,$24,$26,$28
	db $2A,$2C,$20,$22,$24

.Screen03:

World6SpritePtrs:
;$21DF6F
.Screen00:
	dl $000500
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_6_2_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_World6PipeLevel1Set1_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_6_1_Sprite_Main
	dl $000001
	dl SMB3_LevelData_World6Fortress1_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_World6PipeLevel1Set1_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_6_3_Sprite_Main
	dl $000001
.Screen01:
	dl SMB3_LevelData_World6PipeLevel5Set1_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_World6PipeLevel5Set1_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_6_6_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_World6Fortress2_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_6_8_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_6_4_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl $000500
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_6_7_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_6_5_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl $000001
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
.Screen02:
	dl SMB3_LevelData_6_9_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_World6Fortress3_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_ThroneRoom_Sprite
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_6_10_Sprite_Main
.Screen03:

World6LevelDataPtrs:
;$21E01A
.Screen00:
	dl SMB3_LevelData_ToadHouse_Level_Main
	dl SMB3_LevelData_World6HammerBro1_Level_Main
	dl SMB3_LevelData_6_2_Level_Main
	dl SMB3_LevelData_World6HammerBro2_Level_Main
	dl SMB3_LevelData_PipeLevel1B_Level_Main
	dl SMB3_LevelData_World6HammerBro2_Level_Main
	dl SMB3_LevelData_World6HammerBro2_Level_Main
	dl SMB3_LevelData_6_1_Level_Main
	dl $000000
	dl SMB3_LevelData_World6Fortress1_Level_Main
	dl SMB3_LevelData_World6HammerBro2_Level_Main
	dl SMB3_LevelData_World6HammerBro2_Level_Main
	dl SMB3_LevelData_PipeLevel1A_Level_Main
	dl SMB3_LevelData_World6HammerBro2_Level_Main
	dl SMB3_LevelData_World6HammerBro2_Level_Main
	dl SMB3_LevelData_6_3_Level_Main
	dl $000000
.Screen01:
	dl SMB3_LevelData_PipeLevel5B_Level_Main
	dl SMB3_LevelData_World6HammerBro2_Level_Main
	dl SMB3_LevelData_World6HammerBro2_Level_Main
	dl SMB3_LevelData_World6HammerBro2_Level_Main
	dl SMB3_LevelData_World6HammerBro2_Level_Main
	dl SMB3_LevelData_World6HammerBro2_Level_Main
	dl SMB3_LevelData_PipeLevel5A_Level_Main
	dl SMB3_LevelData_World6HammerBro2_Level_Main
	dl SMB3_LevelData_6_6_Level_Main
	dl SMB3_LevelData_World6HammerBro1_Level_Main
	dl SMB3_LevelData_World6Fortress2_Level_Main
	dl SMB3_LevelData_World6HammerBro2_Level_Main
	dl SMB3_LevelData_6_8_Level_Main
	dl SMB3_LevelData_World6HammerBro2_Level_Main
	dl SMB3_LevelData_6_4_Level_Main
	dl SMB3_LevelData_World6HammerBro2_Level_Main
	dl SMB3_LevelData_ToadHouse_Level_Main
	dl SMB3_LevelData_World6HammerBro2_Level_Main
	dl SMB3_LevelData_World6HammerBro2_Level_Main
	dl SMB3_LevelData_World6HammerBro2_Level_Main
	dl SMB3_LevelData_6_7_Level_Main
	dl SMB3_LevelData_World6HammerBro1_Level_Main
	dl SMB3_LevelData_6_5_Level_Main
	dl SMB3_LevelData_World6HammerBro2_Level_Main
	dl SMB3_LevelData_World6HammerBro2_Level_Main
	dl $000000
	dl SMB3_LevelData_World6HammerBro2_Level_Main
.Screen02:
	dl SMB3_LevelData_6_9_Level_Main
	dl SMB3_LevelData_World6HammerBro2_Level_Main
	dl SMB3_LevelData_World6HammerBro2_Level_Main
	dl SMB3_LevelData_World6HammerBro2_Level_Main
	dl SMB3_LevelData_World6Fortress3_Level_Main
	dl SMB3_LevelData_World6HammerBro2_Level_Main
	dl SMB3_LevelData_World6HammerBro2_Level_Main
	dl SMB3_LevelData_World6HammerBro2_Level_Main
	dl SMB3_LevelData_World6HammerBro2_Level_Main
	dl SMB3_LevelData_World6ThroneRoom_Level
	dl SMB3_LevelData_World6HammerBro2_Level_Main
	dl SMB3_LevelData_World6HammerBro2_Level_Main
	dl SMB3_LevelData_6_10_Level_Main
.Screen03:

World7LevelXCoordinateHi:
;$21E0C5
	db ((World7SpritePtrs_Screen00-World7SpritePtrs)+(World7LevelDataPtrs_Screen00-World7LevelDataPtrs))/6
	db ((World7SpritePtrs_Screen01-World7SpritePtrs)+(World7LevelDataPtrs_Screen01-World7LevelDataPtrs))/6
	db ((World7SpritePtrs_Screen02-World7SpritePtrs)+(World7LevelDataPtrs_Screen02-World7LevelDataPtrs))/6
	db ((World7SpritePtrs_Screen03-World7SpritePtrs)+(World7LevelDataPtrs_Screen03-World7LevelDataPtrs))/6

World7LevelYCoordinateLoAndTilemap:
;$21E0C9
.Screen00:
	db $31,$31,$31,$3E,$3E,$32,$51,$5E
	db $5E,$57,$5E,$55,$51,$7E,$7E,$71
	db $71,$7F,$71,$99,$9E,$9E,$93

.Screen01:
	db $3F,$31,$31,$31,$3E,$4E,$5E,$5E
	db $5F,$51,$51,$57,$71,$7E,$7E,$79
	db $71,$72,$9E,$97,$92,$91,$95

.Screen02:
.Screen03:

World7LevelXCoordinateLo:
;$21E0F7
.Screen00:
	db $02,$04,$06,$09,$0D,$0F,$02,$04
	db $06,$09,$0B,$0D,$0F,$03,$05,$08
	db $0A,$0C,$0E,$03,$05,$08,$0E

.Screen01:
	db $11,$13,$16,$18,$1A,$1D,$11,$13
	db $16,$18,$1A,$1C,$10,$12,$16,$18
	db $1A,$1C,$10,$12,$18,$1A,$1C

.Screen02:
.Screen03:

World7SpritePtrs:
;$21E125
.Screen00:
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_World7PipeLevel5Set1_Sprite_Main
	dl SMB3_LevelData_World7PipeLevel3Set1_Sprite_Main
	dl SMB3_LevelData_World7Fortress1_Sprite_Main
	dl SMB3_LevelData_7_1_Sprite_Main
	dl SMB3_LevelData_World7PipeLevel1Set1_Sprite_Main
	dl SMB3_LevelData_World7PipeLevel3Set1_Sprite_Main
	dl $000700
	dl SMB3_LevelData_World7PipeLevel1Set2_Sprite_Main
	dl SMB3_LevelData_Muncher1_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_World7PipeLevel1Set1_Sprite_Main
	dl SMB3_LevelData_World7PipeLevel5Set1_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_7_4_Sprite_Main
	dl $000001
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_7_2_Sprite_Main
	dl SMB3_LevelData_World7PipeLevel4Set1_Sprite_Main
	dl SMB3_LevelData_World7PipeLevel3Set2_Sprite_Main
	dl SMB3_LevelData_7_3_Sprite_Main
.Screen01:
	dl $000001
	dl SMB3_LevelData_7_6_Sprite_Main
	dl SMB3_LevelData_7_7_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_World7PipeLevel2Set1_Sprite_Main
	dl SMB3_LevelData_World7PipeLevel3Set3_Sprite_Main
	dl SMB3_LevelData_World7PipeLevel3Set2_Sprite_Main
	dl SMB3_LevelData_World7PipeLevel2Set1_Sprite_Main
	dl $000001
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_7_8_Sprite_Main
	dl $000600
	dl SMB3_LevelData_7_5_Sprite_Main
	dl SMB3_LevelData_World7PipeLevel3Set3_Sprite_Main
	dl SMB3_LevelData_World7PipeLevel1Set2_Sprite_Main
	dl SMB3_LevelData_7_9_Sprite_Main
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_World7Fortress2_Sprite_Main
	dl SMB3_LevelData_World7PipeLevel4Set1_Sprite_Main
	dl $000600
	dl SMB3_LevelData_ThroneRoom_Sprite
	dl SMB3_LevelData_World3HammerBro_Sprite_Main
	dl SMB3_LevelData_Muncher2_Sprite_Main
.Screen02:
.Screen03:

World7LevelDataPtrs:
;$21E1AF
.Screen00:
	dl SMB3_LevelData_World7HammerBro_Level_Main
	dl SMB3_LevelData_World7HammerBro_Level_Main
	dl SMB3_LevelData_World7HammerBro_Level_Main
	dl SMB3_LevelData_PipeLevel5B_Level_Main
	dl SMB3_LevelData_PipeLevel3B_Level_Main
	dl SMB3_LevelData_World7Fortress1_Level_Main
	dl SMB3_LevelData_7_1_Level_Main
	dl SMB3_LevelData_PipeLevel1A_Level_Main
	dl SMB3_LevelData_PipeLevel3A_Level_Main
	dl SMB3_LevelData_ToadHouse_Level_Main
	dl SMB3_LevelData_PipeLevel1A_Level_Main
	dl SMB3_LevelData_Muncher1_Level_Main
	dl SMB3_LevelData_World7HammerBro_Level_Main
	dl SMB3_LevelData_PipeLevel1B_Level_Main
	dl SMB3_LevelData_PipeLevel5A_Level_Main
	dl SMB3_LevelData_World7HammerBro_Level_Main
	dl SMB3_LevelData_7_4_Level_Main
	dl $000000
	dl SMB3_LevelData_World7HammerBro_Level_Main
	dl SMB3_LevelData_7_2_Level_Main
	dl SMB3_LevelData_PipeLevel4A_Level_Main
	dl SMB3_LevelData_PipeLevel3A_Level_Main
	dl SMB3_LevelData_7_3_Level_Main
.Screen01:
	dl $000000
	dl SMB3_LevelData_7_6_Level_Main
	dl SMB3_LevelData_7_7_Level_Main
	dl SMB3_LevelData_World7HammerBro_Level_Main
	dl SMB3_LevelData_PipeLevel2B_Level_Main
	dl SMB3_LevelData_PipeLevel3B_Level_Main
	dl SMB3_LevelData_PipeLevel3B_Level_Main
	dl SMB3_LevelData_PipeLevel2A_Level_Main
	dl $000000
	dl SMB3_LevelData_World7HammerBro_Level_Main
	dl SMB3_LevelData_7_8_Level_Main
	dl SMB3_LevelData_ToadHouse_Level_Main
	dl SMB3_LevelData_7_5_Level_Main
	dl SMB3_LevelData_PipeLevel3A_Level_Main
	dl SMB3_LevelData_PipeLevel1B_Level_Main
	dl SMB3_LevelData_7_9_Level_Main
	dl SMB3_LevelData_World7HammerBro_Level_Main
	dl SMB3_LevelData_World7Fortress2_Level_Main
	dl SMB3_LevelData_PipeLevel4B_Level_Main
	dl SMB3_LevelData_ToadHouse_Level_Main
	dl SMB3_LevelData_World7ThroneRoom_Level
	dl SMB3_LevelData_World7HammerBro_Level_Main
	dl SMB3_LevelData_Muncher2_Level_Main
.Screen02:
.Screen03:

World8LevelXCoordinateHi:
;$21E239
	db ((World8SpritePtrs_Screen00-World8SpritePtrs)+(World8LevelDataPtrs_Screen00-World8LevelDataPtrs))/6
	db ((World8SpritePtrs_Screen01-World8SpritePtrs)+(World8LevelDataPtrs_Screen01-World8LevelDataPtrs))/6
	db ((World8SpritePtrs_Screen02-World8SpritePtrs)+(World8LevelDataPtrs_Screen02-World8LevelDataPtrs))/6
	db ((World8SpritePtrs_Screen03-World8SpritePtrs)+(World8LevelDataPtrs_Screen03-World8LevelDataPtrs))/6

World8LevelYCoordinateLoAndTilemap:
;$21E23D
.Screen00:
	db $3E,$51,$5E,$51,$71,$7A,$71,$7A

.Screen01:
	db $3E,$5E,$5A,$5E,$51,$71,$7B,$7B
	db $7B,$7E

.Screen02:
	db $5E,$51,$5E,$51,$51,$51,$71,$71
	db $72,$71,$7E,$93,$9E,$91,$91,$91
	db $9E

.Screen03:
	db $7E,$7A,$71,$71,$71,$72

World8LevelXCoordinateLo:
;$21E266
.Screen00:
	db $08,$02,$06,$08,$02,$04,$06,$08

.Screen01:
	db $1A,$12,$14,$18,$1A,$14,$16,$18
	db $1A,$1C

	db $22,$24,$26,$28,$2A,$2C,$22,$24
	db $28,$2A,$2C,$22,$24,$26,$28,$2A
	db $2C

.Screen03:
	db $32,$34,$36,$38,$3A,$3C

World8SpritePtrs:
;$21E28F
.Screen00:
	dl SMB3_LevelData_World8PipeLevel6Set2_Sprite_Main
	dl SMB3_LevelData_UnknownSpriteData_27E5ED
	dl SMB3_LevelData_World8PipeLevel6Set1_Sprite_Main
	dl SMB3_LevelData_UnknownSpriteData_27E5ED
	dl SMB3_LevelData_UnknownSpriteData_27E5ED
	dl SMB3_LevelData_Tank1_Sprite_Main
	dl SMB3_LevelData_UnknownSpriteData_27E5ED
	dl SMB3_LevelData_Navy_Sprite_Main
.Screen01:
	dl SMB3_LevelData_World8PipeLevel6Set1_Sprite_Main
	dl SMB3_LevelData_World8PipeLevel6Set3_Sprite_Main
	dl SMB3_LevelData_World8Airship_Sprite_Main
	dl SMB3_LevelData_World8PipeLevel6Set4_Sprite_Main
	dl SMB3_LevelData_UnknownSpriteData_27E5ED
	dl SMB3_LevelData_UnknownSpriteData_27E5ED
	dl SMB3_LevelData_Hand3_Sprite_Main
	dl SMB3_LevelData_Hand2_Sprite_Main
	dl SMB3_LevelData_Hand1_Sprite_Main
	dl SMB3_LevelData_World8PipeLevel6Set2_Sprite_Main
.Screen02:
	dl SMB3_LevelData_World8PipeLevel6Set3_Sprite_Main
	dl SMB3_LevelData_UnknownSpriteData_27E5ED
	dl SMB3_LevelData_World8PipeLevel6Set5_Sprite_Main
	dl SMB3_LevelData_UnknownSpriteData_27E5ED
	dl SMB3_LevelData_UnknownSpriteData_27E5ED
	dl SMB3_LevelData_UnknownSpriteData_27E5ED
	dl SMB3_LevelData_UnknownSpriteData_27E5ED
	dl SMB3_LevelData_8_1_Sprite_Main
	dl SMB3_LevelData_World8Fortress_Sprite_Main
	dl SMB3_LevelData_UnknownSpriteData_27E5ED
	dl SMB3_LevelData_World8PipeLevel6Set4_Sprite_Main
	dl SMB3_LevelData_8_2_Sprite_Main
	dl SMB3_LevelData_World8PipeLevel1Set1_Sprite_Main
	dl SMB3_LevelData_UnknownSpriteData_27E5ED
	dl SMB3_LevelData_UnknownSpriteData_27E5ED
	dl SMB3_LevelData_UnknownSpriteData_27E5ED
	dl SMB3_LevelData_World8PipeLevel1Set1_Sprite_Main
.Screen03:
	dl SMB3_LevelData_World8PipeLevel6Set5_Sprite_Main
	dl SMB3_LevelData_Tank2_Sprite_Main
	dl SMB3_LevelData_UnknownSpriteData_27E5ED
	dl SMB3_LevelData_UnknownSpriteData_27E5ED
	dl SMB3_LevelData_UnknownSpriteData_27E5ED
	dl SMB3_LevelData_BowsersCastle_Sprite_Main

World8LevelDataPtrs:
;$21E30A
.Screen00:
	dl SMB3_LevelData_PipeLevel6A_Level_Main
	dl SMB3_LevelData_7_7_Level_Main
	dl SMB3_LevelData_PipeLevel6A_Level_Main
	dl SMB3_LevelData_7_7_Level_Main
	dl SMB3_LevelData_7_7_Level_Main
	dl SMB3_LevelData_Tank1_Level_Main
	dl SMB3_LevelData_7_7_Level_Main
	dl SMB3_LevelData_Navy_Level_Main
.Screen01:
	dl SMB3_LevelData_PipeLevel6B_Level_Main
	dl SMB3_LevelData_PipeLevel6A_Level_Main
	dl SMB3_LevelData_World8Airship_Level_Main
	dl SMB3_LevelData_PipeLevel6A_Level_Main
	dl SMB3_LevelData_7_7_Level_Main
	dl SMB3_LevelData_7_7_Level_Main
	dl SMB3_LevelData_Hand3_Level_Main
	dl SMB3_LevelData_Hand2_Level_Main
	dl SMB3_LevelData_Hand1_Level_Main
	dl SMB3_LevelData_PipeLevel6B_Level_Main
.Screen02:
	dl SMB3_LevelData_PipeLevel6B_Level_Main
	dl SMB3_LevelData_7_7_Level_Main
	dl SMB3_LevelData_PipeLevel6A_Level_Main
	dl SMB3_LevelData_7_7_Level_Main
	dl SMB3_LevelData_7_7_Level_Main
	dl SMB3_LevelData_7_7_Level_Main
	dl SMB3_LevelData_7_7_Level_Main
	dl SMB3_LevelData_8_1_Level_Main
	dl SMB3_LevelData_World8Fortress_Level_Main
	dl SMB3_LevelData_7_7_Level_Main
	dl SMB3_LevelData_PipeLevel6B_Level_Main
	dl SMB3_LevelData_8_2_Level_Main
	dl SMB3_LevelData_PipeLevel1A_Level_Main
	dl SMB3_LevelData_7_7_Level_Main
	dl SMB3_LevelData_7_7_Level_Main
	dl SMB3_LevelData_7_7_Level_Main
	dl SMB3_LevelData_PipeLevel1B_Level_Main
.Screen03:
	dl SMB3_LevelData_PipeLevel6B_Level_Main
	dl SMB3_LevelData_Tank2_Level_Main
	dl SMB3_LevelData_7_7_Level_Main
	dl SMB3_LevelData_7_7_Level_Main
	dl SMB3_LevelData_7_7_Level_Main
	dl SMB3_LevelData_BowsersCastle_Level_Main

World9LevelXCoordinateHi:
;$21E385
	db $00,$0A,$0A,$0A

World9LevelYCoordinateLoAndTilemap:
;$21E389
.Screen00:
	db $50,$51,$52,$53,$73,$74,$75,$76				;\ Note: The "tilemap" bits affect what world you get taken to.
	db $96,$97							;/
.Screen01:
.Screen02:
.Screen03:

World9LevelXCoordinateLo:
;$21E393
.Screen00:
	db $04,$06,$08,$0A,$04,$06,$08,$0A
	db $08,$0A
.Screen01:
.Screen02:
.Screen03:

World9SpritePtrs:
.Screen00:
.Screen01:
.Screen02:
.Screen03:
World9LevelDataPtrs:
;$21E39D
.Screen00:
	db $00,$01,$02,$03,$04,$05,$06,$07
.Screen01:
.Screen02:
.Screen03:

;--------------------------------------------------------------------

DATA_21E3A5:
	db $02,$04,$03,$FF,$03,$04,$03,$05

SMB3_OverworldSpriteInitialYPosLoDataPtrs:
;$21E3AD
	dw World1OverworldSpriteInitialYPosLoData
	dw World2OverworldSpriteInitialYPosLoData
	dw World3OverworldSpriteInitialYPosLoData
	dw World4OverworldSpriteInitialYPosLoData
	dw World5OverworldSpriteInitialYPosLoData
	dw World6OverworldSpriteInitialYPosLoData
	dw World7OverworldSpriteInitialYPosLoData
	dw World8OverworldSpriteInitialYPosLoData

SMB3_OverworldSpriteInitialXPosHiDataPtrs:
;$21E3BD
	dw World1OverworldSpriteInitialXPosHiData
	dw World2OverworldSpriteInitialXPosHiData
	dw World3OverworldSpriteInitialXPosHiData
	dw World4OverworldSpriteInitialXPosHiData
	dw World5OverworldSpriteInitialXPosHiData
	dw World6OverworldSpriteInitialXPosHiData
	dw World7OverworldSpriteInitialXPosHiData
	dw World8OverworldSpriteInitialXPosHiData

SMB3_OverworldSpriteInitialXPosLoDataPtrs:
;$21E3CD
	dw World1OverworldSpriteInitialXPosLoData
	dw World2OverworldSpriteInitialXPosLoData
	dw World3OverworldSpriteInitialXPosLoData
	dw World4OverworldSpriteInitialXPosLoData
	dw World5OverworldSpriteInitialXPosLoData
	dw World6OverworldSpriteInitialXPosLoData
	dw World7OverworldSpriteInitialXPosLoData
	dw World8OverworldSpriteInitialXPosLoData

SMB3_OverworldSpriteIDDataPtrs:
;$21E3DD
	dw World1OverworldSpriteIDData
	dw World2OverworldSpriteIDData
	dw World3OverworldSpriteIDData
	dw World4OverworldSpriteIDData
	dw World5OverworldSpriteIDData
	dw World6OverworldSpriteIDData
	dw World7OverworldSpriteIDData
	dw World8OverworldSpriteIDData

SMB3_OverworldHammerBroPrizeDataPtrs:
;$21E3ED
	dw World1OverworldHammerBroPrizeData
	dw World2OverworldHammerBroPrizeData
	dw World3OverworldHammerBroPrizeData
	dw World4OverworldHammerBroPrizeData
	dw World5OverworldHammerBroPrizeData
	dw World6OverworldHammerBroPrizeData
	dw World7OverworldHammerBroPrizeData
	dw World8OverworldHammerBroPrizeData


World1OverworldSpriteInitialYPosLoData:
;$21E3FD
	db $70,$80,$80,$00,$00,$00,$00,$00
	db $00

World2OverworldSpriteInitialYPosLoData:
;$21E406
	db $50,$60,$40,$60,$60,$00,$00,$00
	db $00

World3OverworldSpriteInitialYPosLoData:
;$21E40F
	db $70,$80,$A0,$40,$80,$00,$00,$00
	db $00

World4OverworldSpriteInitialYPosLoData:
;$21E418
	db $50,$60,$40,$60,$60,$00,$00,$00
	db $00

World5OverworldSpriteInitialYPosLoData:
;$21E421
	db $90,$A0,$60,$80,$20,$00,$00,$00
	db $00

World6OverworldSpriteInitialYPosLoData:
;$21E42A
	db $50,$60,$60,$80,$A0,$00,$00,$00
	db $00

World7OverworldSpriteInitialYPosLoData:
;$21E433
	db $80,$90,$50,$90,$00,$00,$00,$00
	db $00

World8OverworldSpriteInitialYPosLoData:
;$21E43C
	db $10,$00,$70,$70,$50,$70,$00,$00
	db $00


World1OverworldSpriteInitialXPosHiData:
;$21E445
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00

World2OverworldSpriteInitialXPosHiData:
;$21E44E
	db $01,$01,$00,$01,$01,$00,$00,$00
	db $00

World3OverworldSpriteInitialXPosHiData:
;$21E457
	db $02,$02,$00,$00,$01,$00,$00,$00
	db $00

World4OverworldSpriteInitialXPosHiData:
;$21E460
	db $00,$00,$01,$01,$00,$00,$00,$00
	db $00

World5OverworldSpriteInitialXPosHiData:
;$21E469
	db $01,$01,$00,$01,$00,$00,$00,$00
	db $00

World6OverworldSpriteInitialXPosHiData:
;$21E472
	db $02,$02,$00,$01,$01,$00,$00,$00
	db $00

World7OverworldSpriteInitialXPosHiData:
;$21E47B
	db $01,$01,$00,$01,$00,$00,$00,$00
	db $00

World8OverworldSpriteInitialXPosHiData:
;$21E484
	db $05,$00,$00,$00,$01,$03,$00,$00
	db $00


World1OverworldSpriteInitialXPosLoData:
;$21E48D
	db $D0,$C0,$A0,$00,$00,$00,$00,$00
	db $00

World2OverworldSpriteInitialXPosLoData:
;$21E496
	db $30,$20,$E0,$40,$A0,$00,$00,$00
	db $00

World3OverworldSpriteInitialXPosLoData:
;$21E49F
	db $A0,$90,$80,$E0,$50,$00,$00,$00
	db $00

World4OverworldSpriteInitialXPosLoData:
;$21E4A8
	db $90,$80,$60,$00,$C0,$00,$00,$00
	db $00

World5OverworldSpriteInitialXPosLoData:
;$21E4B1
	db $30,$20,$A0,$A0,$A0,$00,$00,$00
	db $00

World6OverworldSpriteInitialXPosLoData:
;$21E4BA
	db $D0,$C0,$C0,$60,$80,$00,$00,$00
	db $00

World7OverworldSpriteInitialXPosLoData:
;$21E4C3
	db $90,$80,$D0,$C0,$00,$00,$00,$00
	db $00

World8OverworldSpriteInitialXPosLoData:
;$21E4CC
	db $00,$00,$40,$80,$40,$40,$00,$00
	db $00


World1OverworldSpriteIDData:
;$21E4D5
	db !Define_SMB3_SpriteID_OWSpr01_Help,!Define_SMB3_SpriteID_OWSpr00_NoSprite,!Define_SMB3_SpriteID_OWSpr03_HammerBro,!Define_SMB3_SpriteID_OWSpr00_NoSprite,!Define_SMB3_SpriteID_OWSpr00_NoSprite,!Define_SMB3_SpriteID_OWSpr00_NoSprite,!Define_SMB3_SpriteID_OWSpr00_NoSprite,!Define_SMB3_SpriteID_OWSpr00_NoSprite
	db !Define_SMB3_SpriteID_OWSpr00_NoSprite

World2OverworldSpriteIDData:
;$21E4DE
	db !Define_SMB3_SpriteID_OWSpr01_Help,!Define_SMB3_SpriteID_OWSpr00_NoSprite,!Define_SMB3_SpriteID_OWSpr04_BoomerangBro,!Define_SMB3_SpriteID_OWSpr04_BoomerangBro,!Define_SMB3_SpriteID_OWSpr06_FireBro,!Define_SMB3_SpriteID_OWSpr00_NoSprite,!Define_SMB3_SpriteID_OWSpr00_NoSprite,!Define_SMB3_SpriteID_OWSpr00_NoSprite
	db !Define_SMB3_SpriteID_OWSpr00_NoSprite

World3OverworldSpriteIDData:
;$21E4E7
	db !Define_SMB3_SpriteID_OWSpr01_Help,!Define_SMB3_SpriteID_OWSpr00_NoSprite,!Define_SMB3_SpriteID_OWSpr03_HammerBro,!Define_SMB3_SpriteID_OWSpr03_HammerBro,!Define_SMB3_SpriteID_OWSpr10_Canoe,!Define_SMB3_SpriteID_OWSpr00_NoSprite,!Define_SMB3_SpriteID_OWSpr00_NoSprite,!Define_SMB3_SpriteID_OWSpr00_NoSprite
	db !Define_SMB3_SpriteID_OWSpr00_NoSprite

World4OverworldSpriteIDData:
;$21E4F0
	db !Define_SMB3_SpriteID_OWSpr01_Help,!Define_SMB3_SpriteID_OWSpr00_NoSprite,!Define_SMB3_SpriteID_OWSpr05_SledgeBro,!Define_SMB3_SpriteID_OWSpr05_SledgeBro,!Define_SMB3_SpriteID_OWSpr05_SledgeBro,!Define_SMB3_SpriteID_OWSpr00_NoSprite,!Define_SMB3_SpriteID_OWSpr00_NoSprite,!Define_SMB3_SpriteID_OWSpr00_NoSprite
	db !Define_SMB3_SpriteID_OWSpr00_NoSprite

World5OverworldSpriteIDData:
;$21E4F9
	db !Define_SMB3_SpriteID_OWSpr01_Help,!Define_SMB3_SpriteID_OWSpr00_NoSprite,!Define_SMB3_SpriteID_OWSpr03_HammerBro,!Define_SMB3_SpriteID_OWSpr03_HammerBro,!Define_SMB3_SpriteID_OWSpr03_HammerBro,!Define_SMB3_SpriteID_OWSpr00_NoSprite,!Define_SMB3_SpriteID_OWSpr00_NoSprite,!Define_SMB3_SpriteID_OWSpr00_NoSprite
	db !Define_SMB3_SpriteID_OWSpr00_NoSprite

World6OverworldSpriteIDData:
;$21E502
	db !Define_SMB3_SpriteID_OWSpr01_Help,!Define_SMB3_SpriteID_OWSpr00_NoSprite,!Define_SMB3_SpriteID_OWSpr03_HammerBro,!Define_SMB3_SpriteID_OWSpr03_HammerBro,!Define_SMB3_SpriteID_OWSpr03_HammerBro,!Define_SMB3_SpriteID_OWSpr00_NoSprite,!Define_SMB3_SpriteID_OWSpr00_NoSprite,!Define_SMB3_SpriteID_OWSpr00_NoSprite
	db !Define_SMB3_SpriteID_OWSpr00_NoSprite

World7OverworldSpriteIDData:
;$21E50B
	db !Define_SMB3_SpriteID_OWSpr01_Help,!Define_SMB3_SpriteID_OWSpr00_NoSprite,!Define_SMB3_SpriteID_OWSpr07_Muncher,!Define_SMB3_SpriteID_OWSpr07_Muncher,!Define_SMB3_SpriteID_OWSpr00_NoSprite,!Define_SMB3_SpriteID_OWSpr00_NoSprite,!Define_SMB3_SpriteID_OWSpr00_NoSprite,!Define_SMB3_SpriteID_OWSpr00_NoSprite
	db !Define_SMB3_SpriteID_OWSpr00_NoSprite

World8OverworldSpriteIDData:
;$21E514
	db !Define_SMB3_SpriteID_OWSpr01_Help,!Define_SMB3_SpriteID_OWSpr00_NoSprite,!Define_SMB3_SpriteID_OWSpr0E_Tank,!Define_SMB3_SpriteID_OWSpr0D_Boat,!Define_SMB3_SpriteID_OWSpr0F_AirshipFleet,!Define_SMB3_SpriteID_OWSpr0E_Tank,!Define_SMB3_SpriteID_OWSpr00_NoSprite,!Define_SMB3_SpriteID_OWSpr00_NoSprite
	db !Define_SMB3_SpriteID_OWSpr00_NoSprite

World1OverworldHammerBroPrizeData:
;$21E51D
	db $00,$00,!Define_SMB3_ReservePowerupID_Star,$00,$00,$00,$00,$00
	db $00

World2OverworldHammerBroPrizeData:
;$21E526
	db $00,$00,!Define_SMB3_ReservePowerupID_MusicBox,!Define_SMB3_ReservePowerupID_Hammer,!Define_SMB3_ReservePowerupID_WarpWhistle,$00,$00,$00
	db $00

World3OverworldHammerBroPrizeData:
;$21E52F
	db $00,$00,!Define_SMB3_ReservePowerupID_Hammer,!Define_SMB3_ReservePowerupID_Star,$00,$00,$00,$00
	db $00

World4OverworldHammerBroPrizeData:
;$21E538
	db $00,$00,!Define_SMB3_ReservePowerupID_Cloud,!Define_SMB3_ReservePowerupID_Star,!Define_SMB3_ReservePowerupID_PWing,$00,$00,$00
	db $00

World5OverworldHammerBroPrizeData:
;$21E541
	db $00,$00,!Define_SMB3_ReservePowerupID_PWing,!Define_SMB3_ReservePowerupID_MusicBox,!Define_SMB3_ReservePowerupID_Star,$00,$00,$00
	db $00

World6OverworldHammerBroPrizeData:
;$21E54A
	db $00,$00,!Define_SMB3_ReservePowerupID_Hammer,!Define_SMB3_ReservePowerupID_Cloud,!Define_SMB3_ReservePowerupID_Star,$00,$00,$00
	db $00

World7OverworldHammerBroPrizeData:
;$21E553
	db $00,$00,!Define_SMB3_ReservePowerupID_PWing,!Define_SMB3_ReservePowerupID_Mushroom,$00,$00,$00,$00
	db $00

World8OverworldHammerBroPrizeData:
;$21E55C
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00

UNK_21E565:
	db $03,$04,$05,$01,$03,$05,$01,$01
	db $00,$00,$00,$00,$00,$00,$00,$00

;--------------------------------------------------------------------

DATA_21E575:
	db $00,$03,$06,$09,$0C,$0F,$12,$15

DATA_21E57D:
	db $00,$01,$02,$00,$01,$02,$00,$01
	db $02,$00,$01,$02,$00,$01,$02,$00

;--------------------------------------------------------------------

DATA_21E58D:
	db $00,$23

;--------------------------------------------------------------------

DATA_21E58F:
	db $00,$F0

;--------------------------------------------------------------------

DATA_21E591:
	db $02,$FE

DATA_21E593:
	db $F0,$00

World9PlayerStartingYPos:
;$21E595
	db $50,$70,$70,$70,$70,$70,$90,$90
	db $90

UNK_21E59E:							; Note: This was likely a high X position table judging from its values and the tables surrounding it.
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00

World9PlayerStartingXPosLo:
;$21E5A7
	db $40,$40,$40,$40,$40,$40,$80,$80
	db $80

;--------------------------------------------------------------------

DATA_21E5B0:
	db $FF,$01

;--------------------------------------------------------------------

DATA_21E5B2:
	db $22,$20

DATA_21E5B4:
	db $24,$20

DATA_21E5B6:
	db $26,$22

;--------------------------------------------------------------------

DATA_21E5B8:						; Note: Sprite tile data for the level clear animation on the overworld
	db $06,$06,$08,$0A,$0C,$0E
	db $26,$28,$26,$C0

DATA_21E5C2:
	db $00,$01,$40,$41,$80,$81,$C0,$C1
	db $60,$E3,$E3

DATA_21E5CD:
	db $50,$E8,$E6,$BD,$E0

DATA_21E5D2:						; Note: Stripe image data for the M/L and destroyed fortress tiles, used for completed levels.
	db $88,$10,$89,$10,$8A,$10,$8B,$10
	db $DC,$18,$DD,$18,$DE,$18,$DF,$18
	db $BA,$18,$BB,$18,$BC,$18,$BD,$18
	db $BA,$10,$BB,$10,$BC,$10,$BD,$10

DATA_21E5F2:
	db $50,$E0,$E8,$BC,$5F

;--------------------------------------------------------------------

DATA_21E5F7:
	db !Define_SMB3_SpriteID_OWSpr09_NSpade
	db !Define_SMB3_SpriteID_OWSpr0A_BlueToadHouse
	db !Define_SMB3_SpriteID_OWSpr0B_CoinShip
	db !Define_SMB3_SpriteID_OWSpr0C_UnusedAirshipFleet

DATA_21E5FB:
	db $60

;--------------------------------------------------------------------

DATA_21E5FC:
	db $60

DATA_21E5FD:
	db $00,$00,$00,$20,$20,$20,$20,$20
	db $20,$00,$00,$20,$00,$00,$00,$00
	db $00,$00,$00,$00

;--------------------------------------------------------------------

DATA_21E611:
	db $00,$00,$01,$FF

DATA_21E615:
	db $01,$FF,$00,$00

DATA_21E619:
	db $00,$FF,$00,$00

;--------------------------------------------------------------------

DATA_21E61D:
	db $F8,$F9,$FA,$FB,$FC,$FD,$FE,$FF
	db $00,$01,$02,$03,$04,$05,$06,$07
	db $08,$07,$06,$05,$04,$03,$02,$01
	db $00,$FF,$FE,$FD,$FC,$FB,$FA,$F9

DATA_21E63D:
	db $FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$FF,$FF,$FF,$FF,$FF,$FF,$FF

;--------------------------------------------------------------------

SMB3_FleeingAirshipYPosPtrs:
;$21E65D
	dw SMB3_FleeingAirshipYPosTable_World1_Set1
	dw SMB3_FleeingAirshipYPosTable_World1_Set2
	dw SMB3_FleeingAirshipYPosTable_World1_Set3
	dw SMB3_FleeingAirshipYPosTable_World2_Set1
	dw SMB3_FleeingAirshipYPosTable_World2_Set2
	dw SMB3_FleeingAirshipYPosTable_World2_Set3
	dw SMB3_FleeingAirshipYPosTable_World3_Set1
	dw SMB3_FleeingAirshipYPosTable_World3_Set2
	dw SMB3_FleeingAirshipYPosTable_World3_Set3
	dw SMB3_FleeingAirshipYPosTable_World4_Set1
	dw SMB3_FleeingAirshipYPosTable_World4_Set2
	dw SMB3_FleeingAirshipYPosTable_World4_Set3
	dw SMB3_FleeingAirshipYPosTable_World5_Set1
	dw SMB3_FleeingAirshipYPosTable_World5_Set2
	dw SMB3_FleeingAirshipYPosTable_World5_Set3
	dw SMB3_FleeingAirshipYPosTable_World6_Set1
	dw SMB3_FleeingAirshipYPosTable_World6_Set2
	dw SMB3_FleeingAirshipYPosTable_World6_Set3
	dw SMB3_FleeingAirshipYPosTable_World7_Set1
	dw SMB3_FleeingAirshipYPosTable_World7_Set2
	dw SMB3_FleeingAirshipYPosTable_World7_Set3
	dw SMB3_FleeingAirshipYPosTable_World8_Set1
	dw SMB3_FleeingAirshipYPosTable_World8_Set2
	dw SMB3_FleeingAirshipYPosTable_World8_Set3

SMB3_FleeingAirshipXPosPtrs:
;$21E68D
	dw SMB3_FleeingAirshipXPosTable_World1_Set1
	dw SMB3_FleeingAirshipXPosTable_World1_Set2
	dw SMB3_FleeingAirshipXPosTable_World1_Set3
	dw SMB3_FleeingAirshipXPosTable_World2_Set1
	dw SMB3_FleeingAirshipXPosTable_World2_Set2
	dw SMB3_FleeingAirshipXPosTable_World2_Set3
	dw SMB3_FleeingAirshipXPosTable_World3_Set1
	dw SMB3_FleeingAirshipXPosTable_World3_Set2
	dw SMB3_FleeingAirshipXPosTable_World3_Set3
	dw SMB3_FleeingAirshipXPosTable_World4_Set1
	dw SMB3_FleeingAirshipXPosTable_World4_Set2
	dw SMB3_FleeingAirshipXPosTable_World4_Set3
	dw SMB3_FleeingAirshipXPosTable_World5_Set1
	dw SMB3_FleeingAirshipXPosTable_World5_Set2
	dw SMB3_FleeingAirshipXPosTable_World5_Set3
	dw SMB3_FleeingAirshipXPosTable_World6_Set1
	dw SMB3_FleeingAirshipXPosTable_World6_Set2
	dw SMB3_FleeingAirshipXPosTable_World6_Set3
	dw SMB3_FleeingAirshipXPosTable_World7_Set1
	dw SMB3_FleeingAirshipXPosTable_World7_Set2
	dw SMB3_FleeingAirshipXPosTable_World7_Set3
	dw SMB3_FleeingAirshipXPosTable_World8_Set1
	dw SMB3_FleeingAirshipXPosTable_World8_Set2
	dw SMB3_FleeingAirshipXPosTable_World8_Set3

SMB3_FleeingAirshipYPosTable:
.World1:
..Set1:
	db $A0,$20,$20,$A0,$20,$20

..Set2:
	db $20,$20,$A0,$A0,$20,$20

..Set3:
	db $20,$20,$A0,$A0,$A0,$A0

.World2:
..Set1:
	db $20,$60,$20,$40,$40,$40

..Set2:
	db $60,$40,$20,$20,$60,$20

..Set3:
	db $20,$20,$60,$40,$20,$60

.World3:
..Set1:
	db $80,$80,$60,$20,$60,$60

..Set2:
	db $80,$20,$60,$60,$20,$60

..Set3:
	db $60,$20,$60,$60,$60,$20

.World4:
..Set1:
	db $80,$60,$40,$60,$60,$40

..Set2:
	db $80,$40,$60,$60,$40,$60

..Set3:
	db $60,$80,$40,$60,$60,$40

.World5:
..Set1:
	db $80,$80,$40,$80,$40,$80

..Set2:
	db $40,$80,$80,$60,$40,$20

..Set3:
	db $60,$40,$20,$60,$40,$20

.World6:
..Set1:
	db $80,$A0,$40,$40,$80,$80

..Set2:
	db $A0,$40,$40,$80,$80,$80

..Set3:
	db $80,$80,$A0,$A0,$40,$40

.World7:
..Set1:
	db $90,$70,$30,$90,$70,$30

..Set2:
	db $70,$30,$90,$50,$30,$90

..Set3:
	db $50,$50,$30,$30,$30,$30

.World8:
..Set1:
	db $00,$00,$00,$00,$00,$00

..Set2:
	db $00,$00,$00,$00,$00,$00

..Set3:
	db $00,$00,$00,$00,$00,$00

SMB3_FleeingAirshipXPosTable:
.World1:
..Set1:
	db $60,$60,$C0,$60,$60,$C0

..Set2:
	db $C0,$C0,$60,$60,$60,$60

..Set3:
	db $60,$C0,$60,$60,$60,$60

.World2:
..Set1:
	db $A0,$01,$01,$80,$80,$80

..Set2:
	db $01,$80,$01,$A0,$01,$01

..Set3:
	db $01,$A0,$01,$80,$01,$01

.World3:
..Set1:
	db $B2,$B2,$01,$21,$01,$A0

..Set2:
	db $B2,$21,$01,$A0,$40,$A0

..Set3:
	db $01,$21,$E0,$A0,$A0,$40

.World4:
..Set1:
	db $E0,$21,$A1,$41,$C1,$01

..Set2:
	db $E0,$01,$21,$41,$A1,$C1

..Set3:
	db $21,$E0,$A1,$C1,$41,$01

.World5:
..Set1:
	db $E1,$61,$C1,$E1,$C1,$61

..Set2:
	db $C1,$61,$E1,$80,$80,$20

..Set3:
	db $80,$80,$20,$80,$80,$20

.World6:
..Set1:
	db $02,$61,$C1,$C0,$A0,$21

..Set2:
	db $61,$C1,$C0,$02,$21,$A0

..Set3:
	db $02,$02,$61,$61,$C0,$C1

.World7:
..Set1:
	db $A1,$A1,$81,$A1,$A1,$81

..Set2:
	db $A1,$81,$A1,$F0,$81,$A1

..Set3:
	db $F0,$F0,$40,$40,$81,$81

.World8:
..Set1:
	db $00,$00,$00,$00,$00,$00

..Set2:
	db $00,$00,$00,$00,$00,$00

..Set3:
	db $00,$00,$00,$00,$00,$00

;--------------------------------------------------------------------

UNK_21E7DD:
	db $03,$04,$05,$00,$00,$05,$00,$00

;--------------------------------------------------------------------

DATA_21E7E5:
	db $00,$00,$10,$F0,$00,$00,$20,$E0

DATA_21E7ED:
	db $10,$F0,$00,$00,$20,$E0,$00,$00
	
DATA_21E7F5:
	db $00,$FF,$00,$00,$00,$FF,$00

DATA_21E7FC:
	db $00,$40,$41,$00,$01,$BB,$B4,$BC
	db $E8,$5F,$DF,$60,$80,$81,$C0,$C1
	db $E3

DATA_21E80D:
	db $E5,$50

;--------------------------------------------------------------------

; Note: Seems to be overworld sprite OAM tile and property data.
; Not sure what the latter two tables do.
; (Edit: because of how it worked on the NES, the table pointers are 3 bytes behind the actual beginning of the table.
; Thus, the second-to-last table is the canoe's property data.)

DATA_21E80F:
	db $E0,$C9,$66					; This seems to be related to the table above.
	db $00,$EE,$06						; 01_Help
	db $00,$C8,$CA						; 02_Airship
	db $EC,$C4,$C6						; 03_HammerBro
	db $EC,$78,$7A						; 04_BoomerangBro
	db $EC,$C4,$C6						; 05_SledgeBro
	db $EC,$98,$9A						; 06_FireBro
	db $2A,$E0,$E2						; 07_Muncher
	db $00,$00,$00						; 08_UnusedSprite
	db $00,$00,$00						; 09_NSpade
	db $02,$02,$02						; 0A_BlueToadHouse
	db $04,$04,$04						; 0B_CoinShip
	db $88,$88,$8A						; 0C_UnusedAirshipFleet
	db $E8,$E8,$EA						; 0D_Boat
	db $E4,$E4,$E6						; 0E_Tank
	db $88,$88,$8A						; 0F_AirshipFleet

DATA_21E83F:
	db $00,$08,$0A						; 10_Canoe
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR] Bigger priority
	db $30,$32,$32
else
	db $20,$22,$22						; 01_Help
endif
	db $20,$22,$22						; 02_Airship
	db $26,$26,$26						; 03_HammerBro
	db $24,$25,$25						; 04_BoomerangBro
	db $24,$24,$24						; 05_SledgeBro
	db $22,$23,$23						; 06_FireBro
	db $24,$24,$24						; 07_Muncher
	db $24,$24,$24						; 08_UnusedSprite
	db $26,$26,$26						; 09_NSpade
	db $24,$24,$24						; 0A_BlueToadHouse
	db $22,$22,$22						; 0B_CoinShip
	db $22,$22,$22						; 0C_UnusedAirshipFleet
	db $22,$22,$22						; 0D_Boat
	db $22,$22,$22						; 0E_Tank
	db $22,$22,$22						; 0F_AirshipFleet

DATA_21E86F:
	db $22,$22,$22						; 10_Canoe

DATA_21E872:
	db $08,$60,$10,$58

;--------------------------------------------------------------------

DATA_21E876:
	db $18,$50,$20,$48,$28,$40,$30,$38

DATA_21E87E:
	db $F0,$F0,$00,$E0

DATA_21E882:
	db $00,$FF,$00,$00

DATA_21E886:
	db $10,$F0,$00,$00

;--------------------------------------------------------------------

DATA_21E88A:
	db $14,$10,$0C,$08,$04,$00,$1C,$18

;--------------------------------------------------------------------

DATA_21E892:
	db $00,$18,$30,$47,$5A,$6A,$76,$7D
	db $80,$7D,$76,$6A,$5A,$47,$30,$18

DATA_21E8A2:
	db $4C,$4E

;--------------------------------------------------------------------

DATA_21E8A4:
	db $20,$30,$40,$50,$60,$70,$80

DATA_21E8AB:
	db $80,$40,$20,$10,$08,$04,$02,$01

;--------------------------------------------------------------------

UNK_21E8B3:
	db $E8,$00,$23,$E8,$E8,$02,$23,$F8
	db $E8,$02,$63,$08,$E8,$00,$23,$18
	db $F8,$20,$23,$E8,$F8,$20,$63,$18
	db $08,$20,$A3,$E8,$08,$20,$E3,$18
	db $18,$00,$23,$E8,$18,$02,$A3,$F8
	db $18,$02,$E3,$08,$18,$00,$23,$18
	db $E0,$E8,$D8,$F0,$D0,$F8

;--------------------------------------------------------------------

; Note: Tables related to tile animations.

DATA_21E8E9:		; Note: Seems to be the animation speed of overworld tiles.
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	db $0D,$0D,$0D,$0D,$19,$19,$19,$19
	db $12,$12,$12,$12,$13,$13,$13,$13
	db $14,$14,$14,$14,$09,$09,$09,$09
	db $19,$19,$19,$19,$0D,$0D,$0D,$0D
	db $10,$10,$10,$10
else
	db $11,$11,$11,$11,$1F,$1F,$1F,$1F
	db $17,$17,$17,$17,$17,$17,$17,$17
	db $19,$19,$19,$19,$0B,$0B,$0B,$0B
	db $1D,$1D,$1D,$1D,$0F,$0F,$0F,$0F
	db $14,$14,$14,$14
endif

DATA_21E90D:
	db SMB3_Bank41Graphics_FG_AnimatedOverworldTiles1>>16,SMB3_Bank47Graphics_FG_AnimatedOverworldTiles2>>16
	db SMB3_Bank47Graphics_FG_AnimatedOverworldTiles3>>16,SMB3_Bank47Graphics_FG_AnimatedOverworldTiles4>>16
	db SMB3_Bank39Graphics_FG_AnimatedOverworldTiles5>>16,SMB3_Bank39Graphics_FG_AnimatedOverworldTiles6>>16
	db SMB3_Bank39Graphics_FG_AnimatedOverworldTiles7>>16,SMB3_Bank39Graphics_FG_AnimatedOverworldTiles8>>16

DATA_21E915:
	db SMB3_Bank41Graphics_FG_AnimatedOverworldTiles1>>8,SMB3_Bank47Graphics_FG_AnimatedOverworldTiles2>>8
	db SMB3_Bank47Graphics_FG_AnimatedOverworldTiles3>>8,SMB3_Bank47Graphics_FG_AnimatedOverworldTiles4>>8
	db SMB3_Bank39Graphics_FG_AnimatedOverworldTiles5>>8,SMB3_Bank39Graphics_FG_AnimatedOverworldTiles6>>8
	db SMB3_Bank39Graphics_FG_AnimatedOverworldTiles7>>8,SMB3_Bank39Graphics_FG_AnimatedOverworldTiles8>>8

DATA_21E91D:
	db SMB3_Bank41Graphics_FG_AnimatedOverworldTiles1,SMB3_Bank47Graphics_FG_AnimatedOverworldTiles2
	db SMB3_Bank47Graphics_FG_AnimatedOverworldTiles3,SMB3_Bank47Graphics_FG_AnimatedOverworldTiles4
	db SMB3_Bank39Graphics_FG_AnimatedOverworldTiles5,SMB3_Bank39Graphics_FG_AnimatedOverworldTiles6
	db SMB3_Bank39Graphics_FG_AnimatedOverworldTiles7,SMB3_Bank39Graphics_FG_AnimatedOverworldTiles8

DATA_21E925:
	dw $0000,$0200,$0400,$0600,$0800,$0A00,$0C00,$0E00

DATA_21E935:
	dw $0000,$0100,$0200,$0300,$0400,$0500,$0600,$0700

;--------------------------------------------------------------------

DATA_21E945:
	db $FF,$00,$01,$02,$03,$04,$05,$06
	db $07,$08,$09,$0A,$0B,$0C,$0D,$FF
	db $FF,$FF,$FF

;--------------------------------------------------------------------

; Note: Something player graphics related in levels.

DATA_21E958:
	db $7C,$7E,$7C,$7E,$18,$1A,$1C,$1A
	db $18,$1A,$1C,$1A,$00,$02,$04,$02
	db $00,$02,$04,$02,$00,$02,$04,$02
	db $18,$1A,$1C,$1A

;--------------------------------------------------------------------

DATA_21E974:
	db $1C,$4E,$1C,$4E,$1C,$4E,$16,$4E
	db $16,$4E,$16,$4E

;--------------------------------------------------------------------

DATA_21E980:
	db $64,$86,$0A,$30

;--------------------------------------------------------------------

DATA_21E984:
	db $82

DATA_21E985:
	db $60

;--------------------------------------------------------------------

DATA_21E986:
	db $68,$6A,$6C,$68,$6A,$6C,$8C,$8E
	db $90,$8C,$8E,$90

DATA_21E992:
	db $78,$7A,$68,$7A,$8C,$8C,$92,$92

;--------------------------------------------------------------------

DATA_21E99A:					; Note: Player tail swipe poses.
	db $06,$08,$06,$0A,$06
	db $12,$08,$12,$0A,$12

;--------------------------------------------------------------------

DATA_21E9A4:
	db $86,$30

DATA_21E9A6:					; Note: Player ducking poses.
	db $1E,$0E

DATA_21E9A8:					; Note: Player fireball shooting poses
	db $1C,$22,$20,$68,$6A,$6C

DATA_21E9AE:
	db $2A,$2E,$2C,$2A

DATA_21E9B2:					; Note: Player P-Speed Running poses
	db $72,$74,$76,$74,$98,$9A,$98,$9A

;--------------------------------------------------------------------

DATA_21E9BA:
	db $70,$6E,$6C,$6E,$70,$6C,$A0,$A0
	db $A0,$14,$12,$10

;--------------------------------------------------------------------

DATA_21E9C6:
	db $52,$54,$56,$54,$5C,$5E,$5C,$5E

DATA_21E9CE:
	db $7C,$64,$7C,$64,$1C,$08,$1C,$0A
	db $04,$08,$04,$08,$54,$08,$54,$0A

DATA_21E9DE:
	db $94,$58,$58,$58,$50,$58,$58

DATA_21E9E5:
	db $80,$9E,$9E,$A0,$04,$A0,$9E

DATA_21E9EC:
	db $7C,$1C,$1C,$04,$00,$04,$1C,$FE
	db $02,$05,$FB,$01,$02,$03,$00

;--------------------------------------------------------------------

DATA_21E9FB:
	db $10,$16,$13

DATA_21E9FE:
	db $00,$04,$0B

;--------------------------------------------------------------------

DATA_21EA01:
	db $18,$70,$D8,$80

;--------------------------------------------------------------------

; Note: Table handling how long the pipe animation lasts?

DATA_21EA05:
	db $00,$3F,$07,$20,$20

;--------------------------------------------------------------------

DATA_21EA0A:
	db $00,$02,$03,$01,$00,$FE,$FD,$FF
	db $00,$00,$1F,$00,$DF,$3A,$00,$00
	db $00,$00,$34,$23,$DF,$3A,$00,$00
	db $00,$00,$FF,$02,$DF,$3A,$1F,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$34,$23,$DF,$3A,$00,$00
	db $00,$00,$7A,$11,$DF,$3A,$00,$00
	db $00,$00,$FF,$7F,$FF,$02,$00,$00
	db $00,$00,$00,$00,$B5,$56,$00,$00

;--------------------------------------------------------------------

; Note: Player acceleration values?

DATA_21EA52:
	db $FF,$00,$02,$00,$FF,$00,$02,$00
	db $FF,$00,$02,$00,$FF,$00,$02,$00
	db $FF,$00,$02,$00,$FF,$00,$02,$00
	db $FF,$00,$02,$00,$FF,$00,$02,$00
	db $FF,$02,$02,$00,$FF,$02,$02,$00
	db $FF,$00,$02,$00,$FF,$00,$02,$00
	db $FF,$00,$02,$00,$FF,$00,$02,$00
	db $FF,$01,$01,$00,$FF,$00,$00,$00
	db $FF,$00,$00,$00,$FF,$00,$01,$00
	db $FF,$00,$00,$00,$FF,$00,$00,$00

DATA_21EAA2:
	db $60,$E0,$00,$00,$60,$E0,$00,$00
	db $20,$E0,$00,$00,$20,$E0,$00,$00
	db $20,$E0,$00,$00,$20,$E0,$00,$00
	db $20,$E0,$00,$00,$20,$E0,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $60,$E0,$00,$00,$60,$E0,$00,$00
	db $60,$E0,$00,$00,$60,$E0,$00,$00
	db $30,$00,$00,$00,$E0,$30,$80,$00
	db $A0,$E0,$C0,$00,$A0,$E0,$20,$00
	db $D0,$E0,$60,$00,$D0,$E0,$C0,$00

UNK_21EAF2:
	db $10,$F0

;--------------------------------------------------------------------

DATA_21EAF4:
	db $07,$06,$05,$04,$03,$02,$01,$01
	db $01

DATA_21EAFD:
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	db $B8

DATA_21EAFE:
	db $00,$06,$08,$0C,$00,$03,$06,$08
	db $08,$08,$08,$06,$03,$00,$04,$08
	db $12,$16,$16,$12,$08,$04
else
	db $C8

DATA_21EAFE:
	db $00,$02,$04,$08,$00,$03,$06,$08
	db $08,$08,$08,$06,$03,$00,$04,$08
	db $12,$16,$16,$12,$08,$04
endif

;--------------------------------------------------------------------

DATA_21EB14:
	db $00,$00,$00,$00,$C0,$C0,$C0,$C0
	db $80,$01

;--------------------------------------------------------------------

DATA_21EB1E:
	db $40,$80

;--------------------------------------------------------------------

DATA_21EB20:
	db $03,$07

DATA_21EB22:
	db $48,$24,$42

DATA_21EB25:
	db $04,$04,$04,$02,$00,$02,$04,$04

DATA_21EB2D:					; Note: Something frog suit related.
	db $10,$F0

DATA_21EB2F:
	db $00,$16,$15,$14,$13,$12,$11,$10
	db $0F,$0E,$0D

;--------------------------------------------------------------------

DATA_21EB3A:
	db $D0,$CE,$CC,$CA,$CA,$CA

;--------------------------------------------------------------------

DATA_21EB40:
	db $00,$40

;--------------------------------------------------------------------

DATA_21EB42:
	dw $0420,$0B20,$0E1B,$0E0E,$0420,$0B20,$011B,$010E
	dw $0806,$0806,$0E1B,$0E0E,$0806,$0806,$011B,$010E
	dw $0420,$0B20,$0D1B,$0D14,$0420,$0B20,$021B,$0214
	dw $0810,$0810,$0D1B,$0D14,$0810,$0810,$021B,$0214

DATA_21EB82:
	dw $0820,$0805,$0318,$030C,$0820,$0805,$0D18,$0D0C
	dw $0820,$0812,$0318,$0317,$0820,$0812,$0D18,$0D17
	dw $0420,$0B20

DATA_21EBA6:
	db $12,$05

DATA_21EBA8:
	db $02,$0E,$03,$0D

DATA_21EBAC:
	db $04,$0D

DATA_21EBAE:
	db $01,$00,$00,$00,$00,$01,$01,$00
	db $01,$01,$00,$01,$00,$00,$00,$00
	db $01,$01,$01,$01,$01

;--------------------------------------------------------------------

DATA_21EBC3:
	db $00,$00,$00,$01,$02,$03,$00,$01
	db $02,$03,$01,$02,$03,$04,$05,$04
	db $00,$06,$01,$02,$03,$04,$05,$08
	db $09,$07,$0A,$04,$09,$00,$00,$0B

DATA_21EBE3:							; Info: Bounce sprites: 00 = 4 sided note block, 10 = Red note block, 20 = Used block, 30 = Brick block, 40 = Note block, 50 = Side bounce wood block, 60 = Coin brick block, 70 = Unused?
	db $00,$10,$40,$40,$40,$40,$50,$50
	db $50,$50,$20,$20,$20,$20,$20,$20
	db $20,$30,$20,$20,$20,$20,$20,$60
	db $20,$20,$20,$20,$20,$10,$40,$70

DATA_21EC03:
	db $01,$01,$04,$04,$11,$03,$01,$01

DATA_21EC0B:
	db $00,$01,$02,$06,$0A,$1B,$1E,$1F

DATA_21EC13:
	db $BC,$71,$2E,$72,$60,$44,$03,$E2

DATA_21EC1B:
	db $0F,$0F,$03,$0C,$02,$02,$02,$02

DATA_21EC23:
	db $01,$02,$04,$08,$0F

;--------------------------------------------------------------------

DATA_21EC28:
	db $1C,$FA
	db $1C,$15

;--------------------------------------------------------------------

DATA_21EC2C:
	db $FF,$00

DATA_21EC2E:
	db $FF,$10

DATA_21EC30:
	db $00,$02

;--------------------------------------------------------------------

DATA_21EC32:
	db $00,$00,$80,$00,$00,$00,$00,$C0
	db $40,$00,$C0,$00,$C0,$80

DATA_21EC40:
	db $08,$04,$04

DATA_21EC43:
	db !Joypad_DPadR>>8,!Joypad_DPadL>>8,!Joypad_DPadD>>8,!Joypad_DPadU>>8

DATA_21EC47:
	db $10,$F0,$01,$0F

DATA_21EC4B:
	db $C2,$C0

DATA_21EC4D:
	db $9A,$98

;--------------------------------------------------------------------

DATA_21EC4F:
	db $10,$00,$00,$00,$00,$20,$00,$F0

;--------------------------------------------------------------------

; Note: Something battle mode related.

DATA_21EC57:
	db $45,$4B

UNK_21EC59:
	db $00

DATA_21EC5A:
	db $02,$03,$01,$05,$01,$01,$01,$00

DATA_21EC62:
	db !Define_SMAS_Sound0063_1up,!Define_SMAS_Sound0063_1up,!Define_SMAS_Sound0063_1up,!Define_SMAS_Sound0063_1up,!Define_SMAS_Sound0063_1up,!Define_SMAS_Sound0063_1up,!Define_SMAS_Sound0063_1up,$00

DATA_21EC6A:
	db $01,$01,$01,$01,$01,$01,$01,$00

DATA_21EC72:
	db $01,$02,$04

DATA_21EC75:
	db $66,$68,$6A,$FE,$6C

DATA_21EC7A:
	db $60,$70

DATA_21EC7C:
	db $00,$00,$00,$01,$2C,$1C,$FF,$FF
	db $00,$00,$00,$01,$FF,$1C,$FF,$FF

DATA_21EC8C:
	db $48,$53

DATA_21EC8E:
	db $00,$10

DATA_21EC90:
	db $20,$20,$22,$24

DATA_21EC94:
	db $14,$34,$54,$A4,$C4,$E4,$14,$34
	db $54,$A4,$C4,$E4,$24,$D4

DATA_21ECA2:
	db $20,$20,$20,$20,$20,$20,$70,$70
	db $70,$70,$70,$70,$C0,$C0

DATA_21ECB0:
	db $10,$E8,$2C,$CC,$7C

DATA_21ECB5:
	db $48,$48,$B0,$B0

DATA_21ECB9:
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	db $30,$AA,$AA,$BD
else
	db $30,$B8,$B8,$C8
endif

DATA_21ECBD:
	db $40,$B0,$10,$E0

DATA_21ECC1:
	db $01,$02

DATA_21ECC3:
	db $10,$20,$40,$60,$80,$A0,$C0

DATA_21ECCA:
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	db $E0,$05,$FB
else
	db $E0,$04,$FC
endif

DATA_21ECCD:
	db $00,$00,$00,$00,$00,$00,$00,$01
	db $00,$00,$00,$01

DATA_21ECD9:					; Note: Something player speed related in the battle mode.
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	db $B1,$B1,$B1,$B1,$B1,$B1,$B1,$C0
	db $BD,$BB,$B8,$B6,$B4,$B1
else
	db $BE,$BE,$BE,$BE,$BE,$BE,$BE,$CA
	db $C8,$C6,$C4,$C2,$C0,$BE
endif

DATA_21ECE7:
	db $08,$08,$02,$0E,$04,$0C,$04,$04
	db $00,$08,$04,$04

DATA_21ECF3:
	db $00,$00,$08,$08,$10,$10

DATA_21ECF9:
	db $05,$05,$12,$12,$20,$20

DATA_21ECFF:
	db $08,$08,$02,$01,$04,$04

DATA_21ED05:
	db $00,$00,$00,$00,$80,$40

DATA_21ED0B:
	db $1A,$10,$00,$02,$04,$06,$08,$0A
	db $0C,$0E

DATA_21ED15:
	db $30

DATA_21ED16:				; Note: Something related to the plater in battle mode.
	db $A0,$60,$20

if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
DATA_21ED19:
	db $13,$ED,$13,$ED

DATA_21ED1D:
	db $C7,$00,$C7
	db $00,$0C,$00
	db $00,!Define_SMAS_Sound0060_Contact,$00

DATA_21ED26:
	db $23,$DD,$23,$DD
else
DATA_21ED19:
	db $10,$F0,$10,$F0

DATA_21ED1D:
	db $D0,$00,$D0
	db $00,$0C,$00
	db $00,!Define_SMAS_Sound0060_Contact,$00

DATA_21ED26:
	db $20,$E0,$20,$E0
endif

;--------------------------------------------------------------------

; Note: Something speed related to the battle mode player.

if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
DATA_21ED2A:
	db $0E,$11,$EF,$F2

DATA_21ED2E:
	db $1E,$23,$E3,$DE
else
DATA_21ED2A:
	db $0C,$0E,$F2,$F4

DATA_21ED2E:
	db $18,$1D,$E9,$E4
endif

;--------------------------------------------------------------------

DATA_21ED32:
	db $10,$E0

DATA_21ED34:
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	db $07,$F9,$07,$10,$F0,$10
else
	db $06,$FA,$06,$10,$F0,$10
endif

;--------------------------------------------------------------------

; Note: Speed of the battle mode boo?

if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
DATA_21ED3A:
	db $09,$E7

DATA_21ED3C:
	db $13,$ED
else
DATA_21ED3A:
	db $08,$E8

DATA_21ED3C:
	db $10,$F0
endif

;--------------------------------------------------------------------

; Note: Battle mode sprite OAM indexes?

DATA_21ED3E:
	db $00,$68,$08,$60,$10,$58,$18,$50
	db $20,$48,$28,$40

;--------------------------------------------------------------------

DATA_21ED4A:
	db $30,$38,$00,$68,$08,$60,$10,$58
	db $18,$50,$20,$48,$28,$40,$30

;--------------------------------------------------------------------

DATA_21ED59:
	db $60,$64,$62,$64

DATA_21ED5D:
	db $4C,$4C,$4C,$4E,$4C,$4E,$4E

;--------------------------------------------------------------------

DATA_21ED64:
	db $4E,$D0

DATA_21ED66:
	db $20,$E0

DATA_21ED68:
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	db $10,$D2
else
	db $10,$CF
endif

;--------------------------------------------------------------------

DATA_21ED6A:
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	db $1F,$07,$F9
else
	db $1F,$06,$FA
endif

;--------------------------------------------------------------------

; Note: Sprite tile property data for battle mode sprites?

DATA_21ED6D:
	db $02,$02,$02,$04,$02,$02,$02,$06
	db $06,$06,$04,$00,$04,$04,$04,$00
	db $02,$02,$04,$00

DATA_21ED81:
	db $00,$00,$02,$08,$04,$04,$04,$06
	db $06,$06,$20,$0A,$0C,$0E,$10,$12
	db $14,$16,$16,$0A

DATA_21ED95:
	db $26,$28,$2C,$2E,$46,$48,$E6,$4A
	db $40,$42,$60,$60,$20,$20,$22,$22
	db $24,$24,$6E,$6E,$8C,$8C,$0E,$0E
	db $4C,$4E,$28,$2A,$AC,$AA,$0C,$4C
	db $EA,$CE

;--------------------------------------------------------------------

DATA_21EDB7:
	db $E0,$E2,$E4,$E2,$E4,$AE

;--------------------------------------------------------------------

DATA_21EDBD:
	db $08,$08,$08,$00,$08,$00,$00,$00
	db $00,$00,$00,$08,$00,$08,$08,$08

;--------------------------------------------------------------------

DATA_21EDCD:
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	db $DA,$26
else
	db $E0,$20
endif

;--------------------------------------------------------------------

DATA_21EDCF:
	db $02,$02,$04,$08,$10,$10

DATA_21EDD5:
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	db $0C,$F4,$0E,$F2,$10,$F0,$1C,$E4
else
	db $0A,$F6,$0C,$F4,$10,$F0,$18,$E8
endif

;--------------------------------------------------------------------

; Note: Something related to the battle mode pow block

DATA_21EDDD:
	db $00,$01,$04,$03

DATA_21EDE1:
	db $82,$84,$86

DATA_21EDE4:
	db $01,$04,$06

;--------------------------------------------------------------------

DATA_21EDE7:
	db $FF,$01

DATA_21EDE9:
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	db $ED

DATA_21EDEA:
	db $13,$E8,$08
else
	db $F0

DATA_21EDEA:
	db $10,$E8,$08
endif

;--------------------------------------------------------------------

DATA_21EDED:
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	db $E7,$09

DATA_21EDEF:
	db $00,$60,$20,$40
else
	db $00,$60,$20,$40
endif

;--------------------------------------------------------------------

; Todo: Animation data for the reserve item box?

DATA_21EDF1:
	dw DATA_2290F1,DATA_229021

DATA_21EDF5:
	dw $0000,$0017,$002E,$0035
	dw $0067,$00AC,$003C,$00F1
	dw $00D0,$00E7,$00FE,$0105
	dw $0023,$0068,$0000,$00AD

DATA_21EE15:
	dw $0017,$002E,$0035,$003C
	dw $00AC,$00F1,$0067,$011C
	dw $00E7,$00FE,$0105,$010C
	dw $0068,$00AD,$0023,$00D0

DATA_21EE35:
	dw DATA_21EEA9,DATA_21EE39

DATA_21EE39:
	db $AF,$02,$AF,$02,$AF,$02,$AF,$02
	db $BF,$02,$BF,$42,$CF,$02,$CF,$42
	db $DD,$02,$DD,$42,$ED,$02,$ED,$42
	db $BD,$02,$BE,$02,$CD,$02,$CE,$02
	db $B4,$02,$B4,$42,$C4,$02,$C4,$42
	db $B0,$02,$B0,$42,$C0,$02,$C0,$42
	db $B8,$02,$B8,$42,$C8,$02,$C8,$42
	db $B3,$02,$B3,$42,$C3,$02,$C3,$42
	db $BB,$02,$BC,$02,$CB,$02,$CC,$02
	db $B7,$02,$B7,$42,$C7,$02,$C7,$42
	db $B1,$02,$B1,$42,$C1,$02,$C1,$42
	db $B5,$02,$B6,$02,$C5,$02,$C6,$02
	db $B2,$02,$B2,$42,$C2,$02,$C2,$42
	db $B9,$02,$BA,$02,$C9,$02,$CA,$02

DATA_21EEA9:
	db $AD,$02,$AD,$02,$AD,$02,$AD,$02
	db $A7,$02,$A7,$42,$A8,$02,$A8,$42
	db $A9,$02,$A9,$42,$AA,$02,$AA,$42
	db $AB,$02,$AB,$42,$AC,$02,$AC,$42

DATA_21EEC9:
	db $07,$F9

DATA_21EECB:
	db $1C,$F9

DATA_21EECD:
	db $00,$15

DATA_21EECF:
	db $18,$E8

DATA_21EED1:
	db $F0,$30

DATA_21EED3:
	db $48,$D8

DATA_21EED5:
	db $01,$FF

DATA_21EED7:
	db $00,$06

DATA_31EED9:
	db $00,$23

DATA_21EEDB:
	db $1F,$00,$1F,$00,$34,$23,$34,$23
	db $34,$23,$7A,$11,$FF,$02,$1F,$00
	db $FF,$02,$1F,$00,$B0,$14,$7A,$11
	db $FF,$02,$FF,$02

;--------------------------------------------------------------------

; Note: Sounds when using reserve powerups.

DATA_21EEF7:
	db $00,!Define_SMAS_Sound0060_GetPowerup,!Define_SMAS_Sound0060_GetPowerup,!Define_SMAS_Sound0060_CarryItemToGoal
	db !Define_SMAS_Sound0060_GetPowerup,!Define_SMAS_Sound0060_CarryItemToGoal,!Define_SMAS_Sound0060_GetPowerup,!Define_SMAS_Sound0060_GetPowerup
	db !Define_SMAS_Sound0060_GetPowerup

DATA_21EF00:
	db $00,$01,$02,$03,$04,$05,$06,$07
	db $08

; Note: Player palette pointers when using reserve powerups

DATA_21EF09:
	dw RegularMarioPalette
	dw RegularMarioPalette
	dw FireMarioPalette
	dw RegularMarioPalette
	dw RegularLuigiPalette
	dw TanookiSuitPalette
	dw HammerSuitPalette
	dw SMB3_GlobalSpritePalette_Row08To0C
	dw RegularMarioPalette

	dw RegularLuigiPalette
	dw RegularLuigiPalette
	dw FireLuigiPalette
	dw RegularLuigiPalette
	dw RegularLuigiPalette
	dw TanookiSuitPalette
	dw HammerSuitPalette
	dw SMB3_GlobalSpritePalette_Row08To0C
	dw RegularLuigiPalette

;--------------------------------------------------------------------

DATA_21EF2D:
	db $45,$46

DATA_21EF2F:
	db $FE,$14,$FE,$14

DATA_21EF33:
	db $E1,$14,$FE,$14

DATA_21EF37:
	db $FE,$14,$C0,$14

DATA_21EF3B:
	db $E1,$14,$C0,$14

;--------------------------------------------------------------------

; Note: Something warp whistle related

DATA_21EF3F:
	db $00,$F0

;--------------------------------------------------------------------

DATA_21EF41:
	db $0E,$0C,$0A,$08,$06,$06

DATA_21EF47:
	db $20,$30,$40,$50,$60,$70,$80

DATA_21EF4E:
	db $80,$40,$20,$10,$08,$04,$02,$01

;--------------------------------------------------------------------

; Note: These tables affect what levels are used as the generic bonus rooms.
; Note that while the sprite pointers are 24-bit, the sprite data is assumed to be in bank $07/$27.

GenericBonusRoomLevelDataPtrs:
;$21EF56
	dl SMB3_LevelData_World1GenericBonusRoom_Level			; World 1
	dl SMB3_LevelData_World2GenericBonusRoom_Level			; World 2
	dl SMB3_LevelData_World3GenericBonusRoom_Level			; World 3
	dl SMB3_LevelData_World4GenericBonusRoom_Level			; World 4
	dl SMB3_LevelData_World5GenericBonusRoom_Level			; World 5
	dl SMB3_LevelData_World6GenericBonusRoom_Level			; World 6
	dl SMB3_LevelData_World7GenericBonusRoom_Level			; World 7
	dl SMB3_LevelData_World8GenericBonusRoom_Level			; World 8

GenericBonusRoomSpriteDataPtrs:
;$21EF6E
	dl SMB3_LevelData_World1GenericBonusRoom_Sprite			; World 1
	dl SMB3_LevelData_World2GenericBonusRoom_Sprite			; World 2
	dl SMB3_LevelData_World3GenericBonusRoom_Sprite			; World 3
	dl SMB3_LevelData_World4GenericBonusRoom_Sprite			; World 4
	dl SMB3_LevelData_World5GenericBonusRoom_Sprite			; World 5
	dl SMB3_LevelData_World6GenericBonusRoom_Sprite			; World 6
	dl SMB3_LevelData_World7GenericBonusRoom_Sprite			; World 7
	dl SMB3_LevelData_World8GenericBonusRoom_Sprite			; World 8

GenericBonusRoomTileset:
;$21EF86
	db $0E								; World 1
	db $0E								; World 2
	db $0E								; World 3
	db $0E								; World 4
	db $0E								; World 5
	db $0E								; World 6
	db $0E								; World 7
	db $0E								; World 8

;--------------------------------------------------------------------

; Note: Tables related to sublevel starting positions?

DATA_21EF8E:
	db $00,$40,$70,$B0,$F0,$41,$71,$81

DATA_21EF96:
	db $00,$00,$30,$70,$B0,$EF,$EF,$EF

;--------------------------------------------------------------------

; Note: These tables affect what levels are used as the generic end levels.
; Note that while the sprite pointers are 24-bit, the sprite data is assumed to be in bank $07/$27.

GenericEndLevelLevelDataPtrs:
;$21EF9E
	dl SMB3_LevelData_GenericLevelEnd_Level			; World 1
	dl SMB3_LevelData_GenericLevelEnd_Level			; World 2
	dl SMB3_LevelData_GenericLevelEnd_Level			; World 3
	dl SMB3_LevelData_GenericLevelEndCopy_Level		; World 4
	dl SMB3_LevelData_GenericLevelEnd_Level			; World 5
	dl SMB3_LevelData_GenericLevelEnd_Level			; World 6
	dl SMB3_LevelData_GenericLevelEnd_Level			; World 7
	dl SMB3_LevelData_GenericLevelEnd_Level			; World 8

GenericEndLevelSpriteDataPtrs:
;$21EFB6
	dl SMB3_LevelData_GenericLevelEnd_Sprite		; World 1
	dl SMB3_LevelData_GenericLevelEnd_Sprite		; World 2
	dl SMB3_LevelData_GenericLevelEnd_Sprite		; World 3
	dl SMB3_LevelData_GenericLevelEnd_Sprite		; World 4
	dl SMB3_LevelData_GenericLevelEnd_Sprite		; World 5
	dl SMB3_LevelData_GenericLevelEnd_Sprite		; World 6
	dl SMB3_LevelData_GenericLevelEnd_Sprite		; World 7
	dl SMB3_LevelData_GenericLevelEnd_Sprite		; World 8

GenericEndLevelTileset:
;$21EFCE:
	db $01							; World 1
	db $01							; World 2
	db $01							; World 3
	db $01							; World 4
	db $01							; World 5
	db $01							; World 6
	db $01							; World 7
	db $01							; World 8

;--------------------------------------------------------------------

DATA_21EFD6:
	db $40,$40,$20,$00,$00,$00

DATA_21EFDC:
	db $00,$00,$00,$00,$03

DATA_21EFE1:
	db $20,$20,$20,$20,$C0

DATA_21EFE6:
	db $03,$00,$00,$00,$0A

;--------------------------------------------------------------------

SMB3_StatusBarPlayerLetterTiles:
;$21EFEB
	db $88,$89
	db $8A,$8B

;--------------------------------------------------------------------

DATA_21EFEF:
	db $0F,$48,$00,$0B
	db $00,$22,$00,$22,$00,$22,$00,$22,$00,$22,$00,$22

	db $FF

;--------------------------------------------------------------------

DATA_21F000:
	db $00,$00,$00,$00,$00,$01

DATA_21F006:
	db $00,$00,$00,$03,$27,$86

DATA_21F00C:
	db $01,$0A,$64,$E8,$10,$A0

DATA_21F012:
	db $0F,$42,$3F,$53,$28,$00

UNK_21F018:
	db $0F,$EF,$21,$EF,$21,$EF,$21,$EF
	db $21,$EF,$21,$EF,$21,$3C,$21,$3D
	db $21,$FF

;--------------------------------------------------------------------

DATA_21F02A:
	db $0F,$28,$00,$17
	db $9F,$22,$9F,$22,$9F,$22,$9F,$22,$9F,$22,$9F,$22,$8C,$22,$8D,$22
	db $AD,$22,$A6,$22,$90,$22,$90,$22

	db $0F,$45,$00,$1D
	db $AD,$22,$90,$22,$AD,$22,$AD,$22,$90,$22,$90,$22,$90,$22,$90,$22
	db $90,$22,$90,$22,$AD,$22,$A5,$22,$90,$22,$90,$22,$90,$22

	db $FF

UNK_21F069:
	db $00,$00,$00,$00,$FF,$7F,$F6,$6B
	db $00,$00,$B5,$56,$BF,$56,$FF,$7F
	db $00,$00,$4A,$29,$B5,$56,$FF,$7F
	db $00,$00,$EB,$2E,$34,$67,$F6,$6B
	db $00,$00,$FF,$7F,$1F,$00,$00,$00
	db $00,$00,$1F,$00,$5F,$62,$FF,$7F
	db $00,$00,$FF,$7F,$F1,$76,$00,$00
	db $00,$00,$FF,$7F,$FF,$02,$00,$00

;--------------------------------------------------------------------

DATA_21F0A9:
	db !Define_SMB3_ReservePowerupID_PWing
	db !Define_SMB3_ReservePowerupID_Cloud
	db !Define_SMB3_ReservePowerupID_MusicBox
	db !Define_SMB3_ReservePowerupID_PWing
	db !Define_SMB3_ReservePowerupID_Cloud
	db !Define_SMB3_ReservePowerupID_PWing

;--------------------------------------------------------------------

DATA_21F0AF:
	db $00,$06,$08,$0A,$0C,$0E,$20,$22
	db $24,$26,$28,$2A,$2C

DATA_21F0BC:
	db $2E,$25,$27,$27,$25,$27,$27,$21
	db $23,$21,$27,$27,$27,$21

DATA_21F0CA:
	db $04,$02

DATA_21F0CC:
	db $00,$38,$88,$00,$2B,$38,$78,$E8
	db $2A,$28,$88,$EA,$2A,$28,$98,$EC
	db $2A,$38,$98,$EE,$2A,$C0,$98,$EE
	db $2B

DATA_21F0E5:		; Note: Palette data for the flasing on Bowser's letter.
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR]
	;	0		2		4		6
	db $00,$00,$1F,$00,$00,$00,$1F,$00
else
	db $00,$00,$1F,$00,$15,$0E,$07,$00
endif

;--------------------------------------------------------------------

; Note: Tables related to the throne room (post boss)

SMB3_KingTextBoxStripeImage:
;$21F0ED
.TopRow:
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	db $92,$21,$90,$21,$90,$21,$90,$21
	db $90,$21,$90,$21,$90,$21,$90,$21
	db $90,$21,$90,$21,$90,$21,$90,$21
	db $90,$21,$90,$21,$90,$21,$90,$21
	db $90,$21,$90,$21,$90,$21,$90,$21
	db $90,$21,$90,$21,$90,$21,$90,$21
	db $92,$61

.MiddleRow:
	db $91,$21,$FE,$21,$FE,$21,$FE,$21
	db $FE,$21,$FE,$21,$FE,$21,$FE,$21
	db $FE,$21,$FE,$21,$FE,$21,$FE,$21
	db $FE,$21,$FE,$21,$FE,$21,$FE,$21
	db $FE,$21,$FE,$21,$FE,$21,$FE,$21
	db $FE,$21,$FE,$21,$FE,$21,$FE,$21
	db $91,$61

.BottomRow:
	db $92,$A1,$90,$A1,$90,$A1,$90,$A1
	db $90,$A1,$90,$A1,$90,$A1,$90,$A1
	db $90,$A1,$90,$A1,$90,$A1,$90,$A1
	db $90,$A1,$90,$A1,$90,$A1,$90,$A1
	db $90,$A1,$90,$A1,$90,$A1,$90,$A1
	db $90,$A1,$90,$A1,$90,$A1,$90,$A1
	db $92,$E1
else
	db $92,$21,$90,$21,$90,$21,$90,$21
	db $90,$21,$90,$21,$90,$21,$90,$21
	db $90,$21,$90,$21,$90,$21,$90,$21
	db $90,$21,$90,$21,$90,$21,$90,$21
	db $90,$21,$90,$21,$90,$21,$90,$21
	db $90,$21,$90,$21,$90,$21,$92,$61

.MiddleRow:
	db $91,$21,$FE,$21,$FE,$21,$FE,$21
	db $FE,$21,$FE,$21,$FE,$21,$FE,$21
	db $FE,$21,$FE,$21,$FE,$21,$FE,$21
	db $FE,$21,$FE,$21,$FE,$21,$FE,$21
	db $FE,$21,$FE,$21,$FE,$21,$FE,$21
	db $FE,$21,$FE,$21,$FE,$21,$91,$61

.BottomRow:
	db $92,$A1,$90,$A1,$90,$A1,$90,$A1
	db $90,$A1,$90,$A1,$90,$A1,$90,$A1
	db $90,$A1,$90,$A1,$90,$A1,$90,$A1
	db $90,$A1,$90,$A1,$90,$A1,$90,$A1
	db $90,$A1,$90,$A1,$90,$A1,$90,$A1
	db $90,$A1,$90,$A1,$90,$A1,$92,$E1
endif

SMB3_KingTextBoxWindowRowIndex:
	db SMB3_KingTextBoxStripeImage_TopRow-SMB3_KingTextBoxStripeImage
	db SMB3_KingTextBoxStripeImage_MiddleRow-SMB3_KingTextBoxStripeImage
	db SMB3_KingTextBoxStripeImage_MiddleRow-SMB3_KingTextBoxStripeImage
	db SMB3_KingTextBoxStripeImage_MiddleRow-SMB3_KingTextBoxStripeImage
	db SMB3_KingTextBoxStripeImage_MiddleRow-SMB3_KingTextBoxStripeImage
	db SMB3_KingTextBoxStripeImage_MiddleRow-SMB3_KingTextBoxStripeImage
	db SMB3_KingTextBoxStripeImage_MiddleRow-SMB3_KingTextBoxStripeImage
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	db SMB3_KingTextBoxStripeImage_MiddleRow-SMB3_KingTextBoxStripeImage
	db SMB3_KingTextBoxStripeImage_MiddleRow-SMB3_KingTextBoxStripeImage
endif
	db SMB3_KingTextBoxStripeImage_BottomRow-SMB3_KingTextBoxStripeImage
.End:

cleartable
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR]
table "Tables/Fonts/Layer3_dialogue_br.txt"
else
table "Tables/Fonts/ThroneRoom.txt"
endif

SMB3_KingSavedText:
;$21F185
.TopHalf:
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
..Small:
..Big:
..FireFlower:
..Raccoon:
	db $C3,$65,$CD,$80,$FE,$C3,$65,$CD,$80,$FE,$A5,$86,$8B,$6E,$AB,$80,$88,$A5,$C4,$A9,$80,$FE
	db $60,$A7,$AB,$86,$62,$CE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE
	db $FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE
	db $E9,$FE,$EB,$8E,$A4,$65,$A6,$85,$AB,$A2,$AB,$FE,$66,$85,$64,$A7,$A1,$6E,$FE,$FE,$FE,$FE

..FrogSuit:
	db $60,$A9,$60,$A9,$FE,$7A,$E8,$87,$6E,$AB,$80,$88,$65,$63,$A6,$A9,$85,$6D,$A1,$CD,$85,$FE
	db $FE,$FE,$FE,$FE,$FE,$69,$8B,$84,$63,$AC,$A5,$86,$8B,$FE,$6E,$AB,$80,$88,$FE,$FE,$FE,$FE
	db $A5,$C4,$6D,$85,$6C,$6D,$60,$AE,$C3,$62,$65,$EC,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE
	db $FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE

..TanookiSuit:
	db $6D,$E8,$6F,$84,$87,$FE,$80,$89,$66,$6C,$E8,$FE,$FE,$C4,$62,$A5,$60,$A7,$AB,$86,$62,$FE
	db $FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE
	db $64,$87,$A1,$63,$CC,$FE,$66,$65,$6F,$85,$67,$C0,$6C,$61,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE
	db $FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE

..HammerSuit:
	db $7A,$8B,$8F,$67,$CC,$FE,$CB,$6D,$88,$C2,$BD,$CD,$85,$67,$A9,$87,$61,$65,$FE,$FE,$FE,$FE
	db $C0,$A4,$65,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE
	db $FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE
	db $6D,$65,$80,$AB,$87,$61,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE
elseif !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR]
..Small:
..Big:
..FireFlower:
..Raccoon:
	db "  Espl^ndido!         "
	db "  Retornei ` minha    "
	db "  forma original.     "
	db "  Muito obrigado.     "
	db "  Eis aqui uma carta  "
	db "  da princesa.        "

..FrogSuit:
	db " Minha nossa!         "
	db " Transformaram voc^!  "
	db "                      "
	db " Devo te ajudar com   "
	db " esta varinha?        "
	db "                      "

..TanookiSuit:
	db "  Obrigado, meu       "
	db "  bondoso guaxinim.   "
	db "                      "
	db "  Diga-me, qual & o   "
	db "  seu nome?           "
	db "                      "

..HammerSuit:
	db " Ei!                  "
	db " Poderia me emprestar "
	db " essa roupa?          "
	db "                      "
	db " Sem chance?!         "
	db " Que coisa chata.     "
else
..Small:
..Big:
..FireFlower:
..Raccoon:
	db " Oh,thank heavens!    "
	db " I'm back to my old   "
	db " self again.          "
	db " Thank you so much.   "
	db " Here is a letter     "
	db " from the Princess.   "

..FrogSuit:
	db " Oh me,oh my!         "
	db " You've been          "
	db " transformed!         "
	db " Shall I change you   "
	db " back with this wand? "
	db "                      "

..TanookiSuit:
	db " Thank you,kind       "
	db " raccoon.             "
	db "                      "
	db " Please tell me your  "
	db " name.                "
	db "                      "

..HammerSuit:
	db " Hey,you!             "
	db " How about lending me "
	db " your clothes?        "
	db " No dice?!            "
	db " What a drag.         "
	db "                      "
endif

if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
.LowerHalf:
..Small:
..Big:
..FireFlower:
..Raccoon:
	db $D3,$75,$DD,$81,$FE,$D3,$75,$DD,$81,$FE,$B5,$96,$9B,$7E,$75,$81,$98,$B5,$96,$B9,$81,$FE
	db $70,$B7,$75,$96,$72,$DE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE
	db $FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE
	db $E6,$FA,$E7,$9E,$B4,$75,$B6,$95,$75,$B2,$75,$EE,$76,$95,$74,$B7,$B1,$7E,$EF,$FE,$FE,$FE

..FrogSuit:
	db $70,$B9,$70,$B9,$FE,$7B,$D4,$97,$7E,$75,$81,$98,$75,$73,$B6,$B9,$95,$7D,$B1,$DD,$95,$FE
	db $EF,$EF,$EF,$EF,$FE,$79,$9B,$94,$73,$95,$B5,$96,$9B,$FE,$7E,$75,$81,$98,$FE,$FE,$FE,$FE
	db $B5,$96,$7D,$95,$7C,$7D,$70,$78,$D3,$72,$75,$ED,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE
	db $FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE

..TanookiSuit:
	db $7D,$D4,$7F,$94,$97,$FE,$81,$99,$76,$7C,$D4,$EF,$FE,$96,$72,$B5,$70,$B7,$75,$96,$72,$FE
	db $FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE
	db $74,$97,$B1,$73,$DC,$FE,$76,$75,$7F,$95,$77,$81,$7C,$71,$EF,$FE,$FE,$FE,$FE,$FE,$FE,$FE
	db $FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE

..HammerSuit:
	db $7B,$9B,$C7,$77,$DC,$FE,$DB,$7D,$98,$D2,$7E,$DD,$95,$77,$B9,$97,$71,$75,$EF,$EF,$EF,$FE
	db $81,$B4,$75,$EF,$EF,$EF,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE
	db $FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE
	db $7D,$75,$81,$75,$97,$71,$EF,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE
endif

cleartable

SMB3_KingsTextPerPowerupIndexes:
	dw SMB3_KingSavedText_TopHalf_Small-SMB3_KingSavedText
	dw SMB3_KingSavedText_TopHalf_Big-SMB3_KingSavedText
	dw SMB3_KingSavedText_TopHalf_FireFlower-SMB3_KingSavedText
	dw SMB3_KingSavedText_TopHalf_Raccoon-SMB3_KingSavedText
	dw SMB3_KingSavedText_TopHalf_FrogSuit-SMB3_KingSavedText
	dw SMB3_KingSavedText_TopHalf_TanookiSuit-SMB3_KingSavedText
	dw SMB3_KingSavedText_TopHalf_HammerSuit-SMB3_KingSavedText

UNK_21F3A3:
	db $1E,$1F,$1F,$1F,$1F,$1E,$1E,$24
	db $24,$24,$24,$24,$24,$24,$26,$24
	db $26,$24,$24,$26,$24

;--------------------------------------------------------------------

DATA_21F3B8:
	db $00,$08,$10,$18,$20,$28,$30

DATA_21F3BF:
	db $0C,$0C,$42,$44,$64,$64,$62,$62
	db $0C,$0C,$46,$48,$65,$65,$67,$67
	db $0C,$0C,$4A,$4C,$6B,$6B,$69,$69
	db $6C,$6C,$6E,$6E,$82,$83,$80,$85
	db $89,$89,$87,$87,$8A,$8A,$8C,$8E
	db $0C,$0C,$4E,$60,$A2,$A2,$A0,$A0
	db $A3,$A3,$A5,$AC,$A7,$A7,$A9,$AE

DATA_21F3F7:
	db $2C,$2C,$2C,$2C,$6C,$6C,$6C,$6C
	db $2C,$2C,$2C,$2C,$2C,$2C,$2C,$2C
	db $2C,$2C,$2C,$2C,$6C,$6C,$6C,$6C
	db $2C,$2C,$2C,$2C,$6C,$2C,$6C,$2C
	db $6C,$6C,$6C,$6C,$2C,$2C,$2C,$2C
	db $2C,$2C,$2C,$2C,$6C,$6C,$6C,$6C
	db $2C,$2C,$2C,$2C,$2C,$2C,$2C,$2C

DATA_21F42F:
	db $E2,$E4,$E6,$E4,$E2,$E4,$E6,$E4

DATA_21F437:
	db $22,$22,$22,$A2,$A2,$E2,$62,$62

DATA_21F43F:
	db $03,$00

DATA_21F441:
	db $FF

DATA_21F442:
	db $01,$B8,$6B,$0C,$22,$C8,$7A,$00
	db $00,$B8,$7A,$00,$00,$C8,$6A,$00
	db $00,$B8,$6A,$00,$00,$A8,$80,$00
	db $2A,$A8,$70,$00,$2A

DATA_21F45F:
	db $C8,$CA,$C0,$C2,$C4,$C6,$CC,$CE
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	db $CC,$CE,$CC,$CE
endif

DATA_21F467:
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	db $02,$04,$02,$00,$02,$04,$02,$00
	db $06,$08,$0A,$08,$06,$00,$06,$08
	db $0A,$08,$06,$00
else
	db $02,$04,$02,$00,$02,$04,$02,$00
endif

DATA_21F46F:
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	db $08,$08,$08,$0F,$08,$08,$08,$0F
	db $04,$06,$08,$06,$04,$04,$04,$06
	db $08,$06,$04,$18
else
	db $08,$08,$08,$0F,$08,$08,$08,$0F
endif

;--------------------------------------------------------------------

DATA_21F477:
	db $7E,$18,$18,$00,$04,$00,$18

DATA_21F47E:
	db $7C,$1C,$1C,$04,$00,$04,$1C

;--------------------------------------------------------------------

cleartable
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR]
table "Tables/Fonts/Letter_br.txt"
else
table "Tables/Fonts/Letter.txt"
endif

SMB3_BodyOfLetterPtrs:
;$21F485
	dw .World1
	dw .World2
	dw .World3
	dw .World4
	dw .World5
	dw .World6
	dw .World7

.World1:
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	db $4D,$C2,$8B,$84,$F7,$88,$A5,$4D,$EA,$80,$E1,$8F,$C6,$00
	db $4D,$D2,$9B,$94,$B9,$98,$B5,$4D,$B2,$90,$F1,$9F,$D6,$00
	db $8D,$A4,$85,$CC,$4D,$C0,$88,$A2,$81,$C8,$A3,$4D,$84,$81,$85,$88,$A2,$87,$C8,$00
	db $9D,$B4,$95,$DC,$4D,$D0,$98,$B2,$91,$D8,$B3,$4D,$94,$91,$95,$98,$B2,$97,$D8,$00
	db $A8,$EA,$4D,$86,$CC,$A1,$88,$A2,$87,$E7,$8A,$81,$A7,$4D,$00
	db $B8,$B2,$4D,$96,$DC,$B1,$98,$B2,$97,$9F,$9A,$91,$B7,$ED,$00
	db $00
	db $FF
elseif !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000
	db "Se encontrar algum",$00
	db "fantasma, tenha",$00
	db "cuidado. Eles te",$00
	db "perseguir~o quando",$00
	db "lhes der as costas.",$00
	db $FF
else
	db "If you see any",$00
	db "ghosts,be careful.",$00
	db "They will give chase",$00
	db "if you turn away.",$00
	db $00
	db $FF
endif

if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
.World3:
	db $53,$70,$72,$51,$A8,$87,$A1,$CC,$A1,$85,$82,$A3,$00
	db $63,$71,$73,$61,$B8,$97,$B1,$DC,$B1,$95,$92,$B3,$00
	db $81,$CA,$CD,$A4,$A2,$86,$CC,$4D,$AB,$AF,$A1,$88,$C6,$C9,$C8,$A8,$C5,$4D,$00
	db $91,$DA,$DD,$B4,$B2,$96,$DC,$4D,$BB,$BF,$B1,$98,$D6,$D9,$D8,$B8,$D5,$ED,$00
	db $00
	db $00
	db $00
	db $FF
elseif !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000
.World2:
	db "Os tijolos brancos",$00
	db "cont^m uma magia que",$00
	db "lhe permite derrotar",$00
	db "seus inimigos.",$00
	db $00
	db $FF
else
.World3:
	db "The White Block",$00
	db "contains magic",$00
	db "powers that will",$00
	db "enable you to defeat",$00
	db "your enemies.",$00
	db $FF
endif

if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
.World2:
	db $4D,$8B,$CA,$81,$5D,$66,$54,$53,$A9,$4D,$A2,$86,$CC,$4D,$88,$A0,$C6,$8C,$00
	db $4D,$9B,$DA,$91,$6D,$76,$64,$63,$B9,$4D,$B2,$96,$DC,$4D,$98,$B0,$D6,$9C,$00
	db $AE,$AD,$82,$A8,$4D,$A0,$85,$C6,$E2,$80,$C8,$8E,$82,$C5,$4D,$00
	db $BE,$BD,$92,$B8,$4D,$B0,$95,$D6,$95,$90,$D8,$9E,$92,$D5,$ED,$00
	db $00
	db $00
	db $00
	db $FF
elseif !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000
.World3:
	db "Usando um Sapato de",$00
	db "Gumba, voc^ pode",$00
	db "pisar em qualquer",$00
	db "inimigo.",$00
	db $00
	db $FF
else
.World2:
	db "You can stomp on",$00
	db "your enemies using",$00
	db "Kuribo's shoe.",$00
	db $00
	db $00
	db $FF
endif

.World4:
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	db $4D,$AB,$83,$CC,$4D,$A6,$8C,$CD,$E7,$EB,$CA,$FB,$82,$E2,$00
	db $4D,$BB,$93,$DC,$4D,$B6,$9C,$DD,$9F,$B3,$DA,$BD,$92,$95,$00
	db $8A,$F7,$87,$A8,$4D,$AA,$E2,$8B,$A5,$4D,$A5,$E5,$A2,$81,$E1,$8F,$00
	db $9A,$B9,$97,$B8,$4D,$BA,$95,$9B,$B5,$4D,$B5,$98,$B2,$91,$F1,$9F,$00
	db $C6,$8B,$81,$CB,$C5,$4D,$00
	db $D6,$9B,$91,$DB,$D5,$ED,$00
	db $00
	db $FF
elseif !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000
	db "O ladr~o que roubou",$00
	db "uma flauta fugiu",$00
	db "para o leste das",$00
	db "dunas de areia.",$00
	db $00
	db $FF
else
	db "The thief who stole",$00
	db "the Whistle has",$00
	db "escaped to the east",$00
	db "side of the sand",$00
	db "Dunes.",$00
	db $FF
endif

.World5:
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	db $89,$84,$C7,$A8,$8D,$85,$81,$A9,$4D,$86,$CC,$A1,$88,$A2,$00
	db $99,$94,$D7,$B8,$9D,$95,$91,$B9,$4D,$96,$DC,$B1,$98,$B2,$00
	db $89,$84,$C7,$A5,$A3,$F3,$89,$C1,$C6,$C9,$8F,$4D,$C2,$A8,$8F,$A0,$A9,$00
	db $99,$94,$D7,$B5,$B3,$9B,$99,$D1,$D6,$D9,$9F,$4D,$D2,$B8,$9F,$B0,$B9,$00
	db $AD,$A8,$84,$EA,$4D,$C5,$AF,$E2,$83,$C8,$A9,$F4,$EA,$8C,$4D,$00
	db $BD,$B8,$94,$B2,$4D,$D5,$BF,$95,$93,$D8,$B9,$9C,$B2,$9C,$ED,$00
	db $00
	db $FF
elseif !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000
	db "Muito cuidado na",$00
	db "Terra Glacial.",$00
	db "Criaturas presas no",$00
	db "gelo voltar~o ` vida",$00
	db "se forem aquecidas.",$00
	db $FF
else
	db "Be careful in the",$00
	db "Ice World. The",$00
	db "creatures trapped in",$00
	db "the ice will come to",$00
	db "life if warmed.",$00
	db $FF
endif

.World6:
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	db $4D,$50,$51,$52,$A9,$4D,$A3,$A2,$C2,$4D,$E5,$CD,$86,$C5,$00
	db $4D,$60,$61,$62,$B9,$4D,$B3,$B2,$D2,$4D,$98,$DD,$96,$D5,$00
	db $6E,$67,$51,$68,$69,$A8,$4D,$AF,$E1,$A1,$C1,$A8,$4D,$74,$51,$68,$A8,$00
	db $6F,$77,$61,$78,$79,$B8,$4D,$BF,$F1,$B1,$D1,$B8,$4D,$75,$61,$78,$B8,$00
	db $85,$E5,$EA,$5B,$5A,$50,$5C,$85,$C6,$4D,$AE,$AD,$82,$A8,$AB,$83,$CC,$00
	db $95,$98,$B2,$6B,$6A,$60,$6C,$95,$D6,$4D,$BE,$BD,$92,$B8,$BB,$93,$DC,$00
	db $C2,$C6,$E1,$A2,$87,$E7,$8A,$81,$4D,$00
	db $D2,$D6,$F1,$B2,$97,$9F,$9A,$91,$ED,$FF
elseif !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000
	db "Eu estou bem.",$00
	db "Por favor, recupere",$00
	db "a Flauta Transporte",$00
	db "escondida no fim do",$00
	db "terceiro caminho, no",$00
	db "meio do escuro.",$FF
else
	db "I am well. Please",$00
	db "retrieve the Magic",$00
	db "Whistle hidden in",$00
	db "the darkness at the",$00
	db "end of the Third",$00
	db "world.",$FF
endif

.World7:
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	db $50,$51,$52,$A9,$4D,$80,$F4,$85,$E1,$8F,$F5,$E1,$4D,$00
	db $60,$61,$62,$B9,$4D,$90,$9C,$95,$F1,$9F,$9D,$F1,$ED,$00
	db $87,$C3,$8B,$85,$E1,$8F,$C6,$4D,$84,$C9,$8A,$AE,$A8,$8B,$CA,$AE,$EA,$00
	db $97,$D3,$9B,$95,$F1,$9F,$D6,$4D,$94,$D9,$9A,$BE,$B8,$9B,$DA,$BE,$B2,$00
	db $86,$A2,$AF,$C3,$E2,$C9,$02,$00
	db $96,$B2,$BF,$D3,$95,$D9,$03,$00
	db $00
	db $00
	db $00
	db $FF
elseif !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000
	db "enquanto voc^s",$00
	db "ficaram correndo que",$00
	db "nem barata tonta.",$00
	db "Ela 't/ aqui no meu",$00
	db "castelo, se ainda se",$00
	db "atreve a resgat/-la!",$FF
else
	db "princess while you",$00
	db "were running around.",$00
	db "She's here in my",$00
	db "castle,if you dare",$00
	db "to try and rescue",$00
	db "her.",$FF
endif

if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
DATA_21F6DB:
	db $06,$E6,$C6,$A6,$86,$66,$46,$26

DATA_21F6E1:
	db $02,$01,$01,$01,$01,$01,$01,$01
else
DATA_21F6DB:
	db $C6,$A6,$86,$66,$46,$26

DATA_21F6E1:
	db $01,$01,$01,$01,$01,$01
endif

SMB3_BowserInLetterTilemap:
	dw $00FF,$00FF,$0541,$0542,$0543,$0544,$FFFF,$00FF
	dw $0550,$0551,$0552,$0553,$0554,$0555,$FFFF,$00FF
	dw $0560,$0561,$0562,$0563,$0564,$0565,$0566,$0567
	dw $FFFF,$00FF,$0570,$0571,$0572,$0573,$0574,$0575
	dw $0576,$0577,$FFFF,$0548,$0549,$054A,$054B,$054C
	dw $054D,$054E,$054F,$0540,$0545,$FFFF,$0558,$0559
	dw $055A,$055B,$055C,$055D,$055E,$055F,$0546,$0547
	dw $FFFF,$0568,$0569,$056A,$056B,$056C,$056D,$056E
	dw $056F,$0556,$0557,$FFFF,$0578,$0579,$057A,$057B
	dw $057C,$057D,$057E,$057F,$041C,$041D,$FFFF

SMB3_LetterHeaderAndFooterText:
.Peach:
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	db $84,$E5,$CD,$86,$EA,$8C,$85,$EE,$00,$94,$98,$DD,$96,$B2,$9C,$95,$EF,$00
	db $8F,$85,$C6,$C2,$A8,$CC,$4D,$AA,$A3,$A1,$84,$87,$C7,$AE,$8C,$4D,$00
	db $9F,$95,$D6,$D2,$B8,$DC,$4D,$BA,$B3,$B1,$94,$97,$D7,$BE,$9C,$ED,$00
	db $A4,$A5,$85,$A8,$84,$C3,$87,$A5,$8F,$A2,$A2,$87,$E7,$8A,$81,$4D,$00
	db $B4,$B5,$95,$B8,$94,$D3,$97,$B5,$9F,$B2,$B2,$97,$9F,$9A,$91,$ED,$00
	db $50,$51,$52,$00
	db $60,$61,$62,$FF

elseif !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000
	db "Sauda;_es,",$00
	db $00

	db "Eu inclu| um tesouro",$00
	db "que pode ajud/-lo.",$00
	db $00
	db "     Princesa",$00
	db "        Cogumelo",$FF
else
	db "Greetings,",$00
	db $00

	db "I have enclosed a",$00
	db "jewel that helps",$00
	db "    protect you.",$00
	db "     Princess",$00
	db "       toadstool.",$FF
endif

.Bowser:
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	db $AC,$E1,$02,$4D,$84,$AE,$83,$E2,$82,$CA,$82,$CA,$8B,$A2,$C8,$80,$81,$E7,$A5,$00
	db $BC,$F1,$03,$4D,$94,$BE,$93,$95,$92,$DA,$92,$DA,$9B,$B2,$D8,$90,$91,$9F,$B5,$00
	db $4D,$4D,$4D,$4D,$4D,$E4,$CB,$E1,$A9,$E1,$A9,$E1,$A9,$E1,$4D,$4D,$00
	db $4D,$4D,$4D,$4D,$4D,$97,$DB,$F1,$B9,$F1,$B9,$F1,$B9,$F1,$ED,$ED,$00
	db $00
	db $00
	db $53,$54,$55,$00
	db $63,$64,$65,$FF
elseif !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000
	db "A|, vacil~o!",$00
	db "Eu raptei a princesa",$00

	db "        Mua ha ha,",$00
	db $00
	db $00
	db "          Rei dos",$00
	db "             Koopas",$FF
else
	db "Yo!",$00
	db "I kidnapped the",$00

	db "        Ha ha ha...",$00
	db $00
	db $00
	db "         King of",$00
	db "          the Koopa",$FF

.Unused:
	db $FF
endif

cleartable

SMB3_LetterHeaderAndFooterStartingIndex:
	db SMB3_LetterHeaderAndFooterText_Peach-SMB3_LetterHeaderAndFooterText
	db SMB3_LetterHeaderAndFooterText_Peach-SMB3_LetterHeaderAndFooterText
	db SMB3_LetterHeaderAndFooterText_Peach-SMB3_LetterHeaderAndFooterText
	db SMB3_LetterHeaderAndFooterText_Peach-SMB3_LetterHeaderAndFooterText
	db SMB3_LetterHeaderAndFooterText_Peach-SMB3_LetterHeaderAndFooterText
	db SMB3_LetterHeaderAndFooterText_Peach-SMB3_LetterHeaderAndFooterText
	db SMB3_LetterHeaderAndFooterText_Bowser-SMB3_LetterHeaderAndFooterText

DATA_21F83C:
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	db $02,$02,$02,$02,$02,$02,$01,$00
else
	db $02,$02,$02,$02,$02,$01,$00
endif

DATA_21F843:
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	db $F4,$D4,$8A,$6A,$4A,$2A,$06,$E6
else
	db $E6,$C6,$66,$46,$26,$06,$E6
endif

;--------------------------------------------------------------------

UNK_21F84A:
	db $00,$80,$80,$80,$00,$81,$80,$81,$00,$82,$80,$82,$00,$83,$80,$83
	db $00,$84,$80,$84,$00,$85,$80,$85

UNK_21F862:
	db $00,$86,$80,$86,$00,$87,$80,$87,$00,$88,$80,$88,$00,$89,$80,$89
	db $00,$8A,$80,$8A,$00,$8B,$80,$8B

UNK_21F87A:
	db $00,$8C,$80,$8C,$00,$8D,$80,$8D,$00,$8E,$80,$8E,$00,$8F,$80,$8F
	db $00,$90,$80,$90,$00,$91,$80,$91

UNK_21F892:
	db $00,$92,$80,$92,$00,$93,$80,$93,$00,$94,$80,$94,$00,$95,$80,$95
	db $00,$96,$80,$96,$00,$97,$80,$97

UNK_21F8AA:
	db $00,$98,$80,$98,$00,$99,$80,$99,$00,$9A,$80,$9A,$00,$9B,$80,$9B
	db $00,$9C,$80,$9C,$00,$9D,$80,$9D

UNK_21F8C2:
	db $00,$9E,$80,$9E,$00,$9F,$80,$9F,$00,$A0,$80,$A0,$00,$A1,$80,$A1
	db $00,$A2,$80,$A2,$00,$A3,$80,$A3

UNK_21F8DA:
	db $00,$A4,$80,$A4,$00,$A5,$80,$A5,$00,$A6,$80,$A6,$00,$A7,$80,$A7
	db $00,$A8,$80,$A8,$00,$A9,$80,$A9

UNK_21F8F2:
	db $00,$AA,$80,$AA,$00,$AB,$80,$AB,$00,$AC,$80,$AC,$00,$AD,$80,$AD
	db $00,$AE,$80,$AE,$00,$AF,$80,$AF

UNK_21F90A:
	db $00,$B0,$80,$B0,$00,$B1,$80,$B1,$00,$B2,$80,$B2,$00,$B3,$80,$B3
	db $00,$B4,$80,$B4,$00,$B5,$80,$B5

UNK_21F922:
	db $00,$B6,$80,$B6,$00,$B7,$80,$B7,$00,$B8,$80,$B8,$00,$B9,$80,$B9
	db $00,$BA,$80,$BA,$00,$BB,$80,$BB

UNK_21F93A:
	db $00,$BC,$80,$BC,$00,$BD,$80,$BD,$00,$BE,$80,$BE,$00,$BF,$80,$BF
	db $00,$C0,$80,$C0,$00,$C1,$80,$C1

UNK_21F952:
	db $00,$C2,$80,$C2,$00,$C3,$80,$C3,$00,$C4,$80,$C4,$00,$C5,$80,$C5
	db $00,$C6,$80,$C6,$00,$C7,$80,$C7

UNK_21F96A:
	db $00,$C8,$80,$C8,$00,$C9,$80,$C9,$00,$CA,$80,$CA,$00,$CB,$80,$CB
	db $00,$CC,$80,$CC,$00,$CD,$80,$CD

UNK_21F982:
	db $00,$CE,$80,$CE,$00,$CF,$80,$CF,$00,$D0,$80,$D0,$00,$D1,$80,$D1
	db $00,$D2,$80,$D2,$00,$D3,$80,$D3

UNK_21F99A:
	db $00,$D4,$80,$D4,$00,$D5,$80,$D5,$00,$D6,$80,$D6,$00,$D7,$80,$D7
	db $00,$D8,$80,$D8,$00,$D9,$80,$D9

UNK_21F9B2:
	db $00,$DA,$80,$DA,$00,$DB,$80,$DB,$00,$DC,$80,$DC,$00,$DD,$80,$DD
	db $00,$DE,$80,$DE,$00,$DF,$80,$DF

UNK_21F9CA:
	dw UNK_21F84A
	dw UNK_21F862
	dw UNK_21F87A
	dw UNK_21F892
	dw UNK_21F8AA
	dw UNK_21F8C2
	dw UNK_21F8DA
	dw UNK_21F8F2
	dw UNK_21F90A
	dw UNK_21F922
	dw UNK_21F93A
	dw UNK_21F952
	dw UNK_21F96A
	dw UNK_21F982
	dw UNK_21F892
	dw UNK_21F9B2
	dw UNK_21F9B2
	dw UNK_21F9B2
	dw UNK_21F99A

UNK_21F9F0:
	db $00,$01,$02,$03,$04,$05,$06,$07,$08,$00,$00,$1F,$00,$DF,$3A,$00
	db $00,$00,$00,$1F,$00,$DF,$3A,$00,$00,$00,$00,$FF,$02,$DF,$3A,$1F
	db $00,$00,$00,$1F,$00,$DF,$3A,$00,$00,$00,$00,$34,$23,$DF,$3A,$00
	db $00,$00,$00,$7A,$11,$DF,$3A,$00,$00,$00,$00,$FF,$7F,$DF,$3A,$00
	db $00,$00,$00,$FF,$7F,$DF,$3A,$00,$00,$00,$00,$1F,$00,$DF,$3A,$00
	db $00

;--------------------------------------------------------------------

; Note: Tables related to the throne room.

SMB3_ThroneRoomTextBoxStripeImage:
;$21FA41
.TopRow:
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	db $92,$21,$90,$21,$90,$21,$90,$21
	db $90,$21,$90,$21,$90,$21,$90,$21
	db $90,$21,$90,$21,$90,$21,$90,$21
	db $90,$21,$90,$21,$90,$21,$90,$21
	db $90,$21,$90,$21,$90,$21,$90,$21
	db $90,$21,$90,$21,$90,$21,$90,$21
	db $92,$61

.MiddleRow:
	db $91,$21,$FE,$21,$FE,$21,$FE,$21
	db $FE,$21,$FE,$21,$FE,$21,$FE,$21
	db $FE,$21,$FE,$21,$FE,$21,$FE,$21
	db $FE,$21,$FE,$21,$FE,$21,$FE,$21
	db $FE,$21,$FE,$21,$FE,$21,$FE,$21
	db $FE,$21,$FE,$21,$FE,$21,$FE,$21
	db $91,$61

.BottomRow:
	db $92,$A1,$90,$A1,$90,$A1,$90,$A1
	db $90,$A1,$90,$A1,$90,$A1,$90,$A1
	db $90,$A1,$90,$A1,$90,$A1,$90,$A1
	db $90,$A1,$90,$A1,$90,$A1,$90,$A1
	db $90,$A1,$90,$A1,$90,$A1,$90,$A1
	db $90,$A1,$90,$A1,$90,$A1,$90,$A1
	db $92,$E1
else
	db $92,$21,$90,$21,$90,$21,$90,$21
	db $90,$21,$90,$21,$90,$21,$90,$21
	db $90,$21,$90,$21,$90,$21,$90,$21
	db $90,$21,$90,$21,$90,$21,$90,$21
	db $90,$21,$90,$21,$90,$21,$90,$21
	db $90,$21,$90,$21,$90,$21,$92,$61

.MiddleRow:
	db $91,$21,$FE,$21,$FE,$21,$FE,$21
	db $FE,$21,$FE,$21,$FE,$21,$FE,$21
	db $FE,$21,$FE,$21,$FE,$21,$FE,$21
	db $FE,$21,$FE,$21,$FE,$21,$FE,$21
	db $FE,$21,$FE,$21,$FE,$21,$FE,$21
	db $FE,$21,$FE,$21,$FE,$21,$91,$61

.BottomRow:
	db $92,$A1,$90,$A1,$90,$A1,$90,$A1
	db $90,$A1,$90,$A1,$90,$A1,$90,$A1
	db $90,$A1,$90,$A1,$90,$A1,$90,$A1
	db $90,$A1,$90,$A1,$90,$A1,$90,$A1
	db $90,$A1,$90,$A1,$90,$A1,$90,$A1
	db $90,$A1,$90,$A1,$90,$A1,$92,$E1
endif

SMB3_ThroneRoomToadTextBoxWindowRowIndex:
	db SMB3_ThroneRoomTextBoxStripeImage_TopRow-SMB3_ThroneRoomTextBoxStripeImage
	db SMB3_ThroneRoomTextBoxStripeImage_MiddleRow-SMB3_ThroneRoomTextBoxStripeImage
	db SMB3_ThroneRoomTextBoxStripeImage_MiddleRow-SMB3_ThroneRoomTextBoxStripeImage
	db SMB3_ThroneRoomTextBoxStripeImage_MiddleRow-SMB3_ThroneRoomTextBoxStripeImage
	db SMB3_ThroneRoomTextBoxStripeImage_MiddleRow-SMB3_ThroneRoomTextBoxStripeImage
	db SMB3_ThroneRoomTextBoxStripeImage_MiddleRow-SMB3_ThroneRoomTextBoxStripeImage
	db SMB3_ThroneRoomTextBoxStripeImage_MiddleRow-SMB3_ThroneRoomTextBoxStripeImage
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	db SMB3_ThroneRoomTextBoxStripeImage_MiddleRow-SMB3_ThroneRoomTextBoxStripeImage
	db SMB3_ThroneRoomTextBoxStripeImage_MiddleRow-SMB3_ThroneRoomTextBoxStripeImage
endif
	db SMB3_ThroneRoomTextBoxStripeImage_BottomRow-SMB3_ThroneRoomTextBoxStripeImage
.End:

cleartable
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR]
table "Tables/Fonts/Layer3_dialogue_br.txt"
else
table "Tables/Fonts/ThroneRoom.txt"
endif

SMB3_ThroneRoomToadText:
;$21FAD9
.TopHalf:
..EnterThroneRoom:
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	db $80,$61,$93,$E8,$CE,$80,$61,$93,$E8,$CE,$FE,$64,$62,$6C,$A1,$AB,$69,$E8,$87,$FE,$FE,$FE
	db $6E,$AB,$80,$88,$FE,$65,$63,$A6,$A9,$80,$C3,$CE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE
	db $A1,$A0,$62,$8B,$84,$63,$CC,$FE,$86,$A7,$65,$63,$6D,$85,$67,$C0,$6C,$61,$FE,$FE,$FE,$FE
	db $FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE
elseif !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR]
	db " Que terr|vel!        "
	db " Transformaram o rei! "
	db " Por favor, recupere  "
	db " a Varinha M/gica.    "
	db " S% assim ele voltar/ "
	db " ao normal!           "
else
	db " Oh,it's terrible!    "
	db " The King has been    "
	db " transformed!         "
	db " Please find the      "
	db " Magic Wand so we can "
	db " change him back.     "
endif

..ReEnterThroneRoom:
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	db $FE,$8D,$C1,$67,$CE,$8D,$C1,$67,$CE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE
	db $FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE
	db $8D,$C1,$67,$AD,$BB,$BE,$D5,$65,$A6,$FE,$A1,$A0,$62,$8B,$84,$63,$CC,$FE,$FE,$FE,$FE,$FE
	db $86,$A7,$65,$63,$6D,$85,$67,$C0,$6C,$61,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE 
elseif !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR]
	db "  R/pido! R/pido!     "
	db "  Pegue a varinha     "
	db "  daquele Kapanga     "
	db "  Koopa e traga ela   "
	db "  de volta!           "
	db "                      "
else
	db " Hurry! Hurry!        "
	db " Get the Magic Wand   "
	db " back from Little     "
	db " Koopa.               "
	db "                      "
	db "                      "
endif

if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
.LowerHalf:
..EnterThroneRoom:
	db $81,$71,$8C,$D4,$DE,$81,$71,$8C,$D4,$DE,$FE,$74,$72,$7C,$B1,$75,$79,$D4,$97,$FE,$FE,$FE
	db $7E,$75,$81,$98,$FE,$75,$73,$B6,$B9,$81,$D3,$DE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE
	db $B1,$B0,$72,$9B,$94,$73,$DC,$FE,$96,$B7,$75,$73,$7D,$95,$77,$81,$7C,$71,$EF,$FE,$FE,$FE
	db $FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE

..ReEnterThroneRoom:
	db $FE,$9D,$D1,$77,$DE,$9D,$D1,$77,$DE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE
	db $FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE
	db $9D,$D1,$77,$AF,$BC,$BF,$D7,$75,$B6,$FE,$B1,$B0,$72,$9B,$94,$73,$DC,$FE,$FE,$FE,$FE,$FE
	db $96,$B7,$75,$73,$7D,$95,$77,$81,$7C,$71,$EF,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE
endif

cleartable

DATA_21FBE1:
	db $B8,$81,$00,$6A,$A8,$81,$00,$6A
	db $B8,$71,$00,$2A,$A8,$71,$00,$2A

DATA_21FBF1:
	db $27,$29,$2C,$2A,$20,$22,$25,$23
	db $0E,$0C,$40,$0C

DATA_21FBFD:
	db $00,$04,$08

DATA_21FC00:
	db $10,$00,$00,$01,$00,$10,$00

DATA_21FC07:
	db $00,$B0,$00,$01,$00,$10,$00

DATA_21FC0E:
	db $30,$08,$10,$18,$20,$28,$00

DATA_21FC15:
	db $60,$62,$65,$63,$67,$69,$6C,$6A
	db $62,$60,$63,$65,$69,$67,$6A,$6C
	db $46,$00,$00,$00,$44,$00,$00,$00
	db $A0,$A2,$A5,$A3,$A7,$A9,$AC,$AA
	db $80,$82,$87,$89,$85,$83,$8B,$AE
	db $C0,$C2,$00,$00,$C4,$C6,$00,$00
	db $C8,$CA,$00,$00,$CC,$CE,$00,$00
	db $40,$00,$00,$00,$42,$00,$00,$00
	db $48,$00,$4A,$00,$4C,$00,$4E,$00
	db $40,$00,$00,$00,$42,$00,$00,$00
	db $48,$00,$4A,$00,$4C,$00,$4E,$00

DATA_21FC6D:
	db $2D,$2D,$6D,$6D,$2D,$2D,$6D,$6D
	db $6D,$6D,$2D,$2D,$6D,$6D,$2D,$2D
	db $2D,$00,$00,$00,$2D,$00,$00,$00
	db $2D,$2D,$6D,$6D,$2D,$2D,$6D,$6D
	db $2D,$2D,$2D,$2D,$6D,$6D,$2D,$2D
	db $2D,$2D,$00,$00,$2D,$2D,$00,$00
	db $2D,$2D,$00,$00,$2D,$2D,$00,$00
	db $2D,$00,$00,$00,$2D,$00,$00,$00
	db $2D,$00,$2D,$00,$2D,$00,$2D,$00
	db $6D,$00,$00,$00,$6D,$00,$00,$00
	db $6D,$00,$6D,$00,$6D,$00,$6D,$00

DATA_21FCC5:
	db $C8,$70,$00,$00,$D8,$70,$00,$00
	db $C8,$80,$00,$00,$D8,$80,$00,$00

DATA_21FCD5:
	db $0C,$08,$0C,$08,$04,$00,$04,$00
	db $14,$10,$14,$10,$14,$10,$14,$10
	db $1C,$18,$1C,$18,$1C,$18,$1C,$18
	db $24,$20,$24,$20,$24,$20,$24,$20
	db $34,$30,$2C,$28,$34,$30,$2C,$28
	db $3C,$38,$3C,$38,$3C,$38,$3C,$38
	db $44,$40,$44,$40,$44,$40,$44,$40

DATA_21FD0D:
	db $0C,$0C,$0C,$0C,$0C,$0C,$0C,$0C
	db $04,$04,$04,$04,$04,$04,$04,$04
	db $18,$18,$18,$18,$18,$18,$18,$18
	db $08,$06,$08,$06,$08,$06,$08,$06
	db $08,$08,$08,$08,$08,$08,$08,$08
	db $08,$08,$08,$08,$08,$08,$08,$08
	db $08,$08,$08,$08,$08,$08,$08,$08

DATA_21FD45:
	db $F5,$F4,$F5,$F4,$F2,$F2,$FA,$FC
	db $F3,$F2,$F8,$F7,$F4,$F3,$F2,$F3
	db $F3,$F3,$F2,$F3,$F3,$F3

DATA_21FD5B:
	db $FF,$FF,$11,$11,$FC,$FC,$00,$0F
	db $FB,$FB,$FA,$FA,$FA,$FA,$FD,$FD
	db $FD,$FE,$03,$03,$03,$02

if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
%FREE_BYTES(NULLROM, 653, $FF)
elseif !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
%FREE_BYTES(NULLROM, 144, $FF)
elseif !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000
	;[BR] The Wide HELP Saga pt. 1: second half's tiles
	Tiles_01_Help2:
		db $FF,$FF,$FF
		db $00,$EE,$28

	%FREE_BYTES(NULLROM, 655-74, $FF)
else
%FREE_BYTES(NULLROM, 655, $FF)
endif
%BANK_END(<EndBank>)
endmacro

;#############################################################################################################
;#############################################################################################################

macro SMB3Bank22Macros(StartBank, EndBank)
%BANK_START(<StartBank>)
SMB3_OverworldTitleCardStripeImage_Mario:
;$228000
	db $51,$08,$00,$01
	db $92,$01

	db $51,$09,$40,$1A
	db $90,$01

	db $51,$17,$00,$01
	db $92,$41

	db $51,$28,$C0,$0A
	db $91,$01

	db $51,$29,$40,$1A
	db $FE,$01

	db $51,$37,$C0,$0A
	db $91,$41

	db $51,$49,$40,$1A
	db $FE,$01

	db $51,$69,$40,$1A
	db $FE,$01

	db $51,$89,$40,$1A
	db $FE,$01

	db $51,$A9,$40,$1A
	db $FE,$01

	db $51,$C9,$40,$1A
	db $FE,$01

	db $51,$E8,$00,$01
	db $92,$81

	db $51,$E9,$40,$1A
	db $90,$81

	db $51,$F7,$00,$01
	db $92,$C1

	db $51,$4C,$00,$09
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR]
	table "Tables/Fonts/Layer3_outlined_br.txt"
	
	dw "MUNDO"
else
	db $52,$01,$6B,$01,$57,$01,$5A,$01,$5C,$01
endif

	db $51,$AA,$00,$09
	db $50,$01,$51,$01,$57,$01,$5D,$01,$6B,$01

	db $51,$B3,$00,$01
	db $FB,$01

	db $FF

DATA_228077:
	db $FF

;--------------------------------------------------------------------

DATA_228078:
	db $FF

;--------------------------------------------------------------------

SMB3_GameOverCardStripeImage_1PlayerGame:
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR] Expanded window
	;             Layer,Map, X,Y, Dir, RLE, Size in bytes
	;Top border
	%drawStripeHeader(3, 0, 06,06, 0, !FALSE, 2)
	db $92,$01

	%drawStripeHeader(3, 0, 07,06, 0, !TRUE, 17*2)
	db $90,$01

	%drawStripeHeader(3, 0, 25,06, 0, !FALSE, 2)
	db $92,$41

	; Left border
	%drawStripeHeader(3, 0, 06,07, 1, !TRUE, 9*2)
	db $91,$01

	; Right border
	%drawStripeHeader(3, 0, 25,07, 1, !TRUE, 9*2)
	db $91,$41

	; Box fillers
	%drawStripeHeader(3, 0, 07,07, 0, !TRUE, 17*2)
	db $FE,$01

	%drawStripeHeader(3, 0, 07,08, 0, !TRUE, 17*2)
	db $FE,$01

	%drawStripeHeader(3, 0, 07,09, 0, !TRUE, 17*2)
	db $FE,$01

	%drawStripeHeader(3, 0, 07,10, 0, !TRUE, 17*2)
	db $FE,$01

	%drawStripeHeader(3, 0, 07,11, 0, !TRUE, 17*2)
	db $FE,$01

	%drawStripeHeader(3, 0, 07,12, 0, !TRUE, 17*2)
	db $FE,$01

	%drawStripeHeader(3, 0, 07,13, 0, !TRUE, 17*2)
	db $FE,$01

	%drawStripeHeader(3, 0, 07,14, 0, !TRUE, 17*2)
	db $FE,$01

	%drawStripeHeader(3, 0, 07,15, 0, !TRUE, 17*2)
	db $FE,$01

	%drawStripeHeader(3, 0, 07,16, 0, !TRUE, 17*2)
	db $FE,$01

	; Bottom border
	%drawStripeHeader(3, 0, 06,17, 0, !FALSE, 2)
	db $92,$81

	%drawStripeHeader(3, 0, 07,17, 0, !TRUE, 17*2)
	db $90,$81

	%drawStripeHeader(3, 0, 25,17, 0, !FALSE, 2)
	db $92,$C1

	%drawStripeHeader(3, 0, 11,09, 0, !FALSE, 11*2)
	dw "FIM DE JOGO"
else
	;Top border
	db $50,$C7,$00,$01
	db $92,$01

	db $50,$C8,$40,$1E
	db $90,$01

	db $50,$D8,$00,$01
	db $92,$41

	; Left border
	db $50,$E7,$C0,$12
	db $91,$01

	; Right border
	db $50,$F8,$C0,$12
	db $91,$41

	; Box fillers
	db $50,$E8,$40,$1E
	db $FE,$01

	db $51,$08,$40,$1E
	db $FE,$01

	db $51,$28,$40,$1E
	db $FE,$01

	db $51,$48,$40,$1E
	db $FE,$01

	db $51,$68,$40,$1E
	db $FE,$01

	db $51,$88,$40,$1E
	db $FE,$01

	db $51,$A8,$40,$1E
	db $FE,$01

	db $51,$C8,$40,$1E
	db $FE,$01

	db $51,$E8,$40,$1E
	db $FE,$01

	db $52,$08,$40,$1E
	db $FE,$01

	; Bottom border
	db $52,$27,$00,$01
	db $92,$81

	db $52,$28,$40,$1E
	db $90,$81

	db $52,$38,$00,$01
	db $92,$C1

	; "GAME    OVER"
	db $51,$0A,$00,$17
	db $59,$01,$51,$01,$50,$01,$56,$01,$FE,$01,$FE,$01,$FE,$01,$FE,$01
	db $6B,$01,$5F,$01,$56,$01,$57,$01
endif

if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	db $51,$4D,$00,$01
	db $0C,$01

	db $51,$51,$00,$07
	db $0C,$01,$FE,$01,$FE,$01,$0C,$01

	db $51,$6B,$00,$17
	db $00,$01,$01,$01,$02,$01,$03,$01,$0A,$01,$0B,$01,$04,$01,$FE,$01
	db $05,$01,$05,$01,$06,$01,$07,$01

	db $51,$8D,$00,$01
	db $0C,$01

	db $51,$92,$00,$01
	db $0C,$01

	db $51,$AB,$00,$13
	db $00,$01,$01,$01,$02,$01,$03,$01,$04,$01,$FE,$01,$05,$01,$05,$01
	db $06,$01,$07,$01

	db $51,$CD,$00,$01
	db $0C,$01

	db $51,$EB,$00,$11
	db $00,$01,$01,$01,$02,$01,$03,$01,$04,$01,$FE,$01,$08,$01,$09,$01
	db $07,$01
elseif !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000
	; CONTINUAR
	%drawStripeHeader(3, 0, 09,11, 0, !FALSE, 9*2)
	dw "CONT" : db $04,$01,$05,$01,$06,$01,$07,$01,$13,$01

	; SALVAR&CONTINUAR
	%drawStripeHeader(3, 0, 09,13, 0, !FALSE, 16*2)
	dw "SA" : db $0A,$01,$0B,$01,$07,$01,$0C,$01
	dw "&CONT" : db $04,$01,$05,$01,$06,$01,$07,$01,$13,$01

	; SALVAR&SAIR
	%drawStripeHeader(3, 0, 09,15, 0, !FALSE, 11*2)
	dw "SA" : db $0A,$01,$0B,$01,$07,$01,$0C,$01
	dw "&SA" : db $12,$01,$13,$01
else
	; CONTINUE
	db $51,$6B,$00,$0F
	db $00,$01,$01,$01,$02,$01,$03,$01,$04,$01,$05,$01,$06,$01,$07,$01

	; SAVE&CONTINUE
	db $51,$AB,$00,$19
	db $08,$01,$09,$01,$0A,$01,$0B,$01,$0C,$01,$00,$01,$01,$01,$02,$01
	db $03,$01,$04,$01,$05,$01,$06,$01,$07,$01

	; SAVE&QUIT
	db $51,$EB,$00,$11
	db $08,$01,$09,$01,$0A,$01,$0B,$01,$0C,$01,$10,$01,$11,$01,$12,$01
	db $13,$01
endif
	db $FF

;--------------------------------------------------------------------

DATA_22814A:
	db $FF

;--------------------------------------------------------------------

SMB3_GameOverCardStripeImage_2PlayerGame:
	db $50,$E7,$00,$01
	db $92,$01

	db $50,$E8,$40,$1E
	db $90,$01

	db $50,$F8,$00,$01
	db $92,$41

	db $51,$07,$C0,$0E
	db $91,$01

	db $51,$18,$C0,$0E
	db $91,$41

	db $51,$08,$40,$1E
	db $FE,$01

	db $51,$28,$40,$1E
	db $FE,$01

	db $51,$48,$40,$1E
	db $FE,$01

	db $51,$68,$40,$1E
	db $FE,$01

	db $51,$88,$40,$1E
	db $FE,$01

	db $51,$A8,$40,$1E
	db $FE,$01

	db $51,$C8,$40,$1E
	db $FE,$01

	db $51,$E8,$40,$1E
	db $FE,$01

	db $52,$07,$00,$01
	db $92,$81

	db $52,$08,$40,$1E
	db $90,$81

	db $52,$18,$00,$01
	db $92,$C1

if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR]
	;             Layer,Map, X,Y, Dir, RLE, Size in bytes
	%drawStripeHeader(3, 0, 11,10, 0, !FALSE, 11*2)
	dw "FIM DE JOGO"
else
	; "GAME    OVER"
	db $51,$2A,$00,$17
	db $59,$01,$51,$01,$50,$01,$56,$01,$FE,$01,$FE,$01,$FE,$01,$FE,$01
	db $6B,$01,$5F,$01,$56,$01,$57,$01
endif

if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	db $51,$6C,$00,$07
	db $0C,$01,$FE,$01,$FE,$01,$0C,$01

	db $51,$8B,$00,$0D
	db $10,$01,$11,$01,$FE,$01,$05,$01,$05,$01,$06,$01,$07,$01

	db $51,$CB,$00,$0B
	db $12,$01,$13,$01,$FE,$01,$0D,$01,$0E,$01,$07,$01
elseif !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000
	; CONTINUAR
	%drawStripeHeader(3, 0, 10,12, 0, !FALSE, 9*2)
	dw "CONT" : db $04,$01,$05,$01,$06,$01,$07,$01,$13,$01

	; SAIR
	%drawStripeHeader(3, 0, 10,14, 0, !FALSE, 4*2)
	dw "SA" : db $12,$01,$13,$01
else
	; CONTINUE
	db $51,$8B,$00,$0F
	db $00,$01,$01,$01,$02,$01,$03,$01,$04,$01,$05,$01,$06,$01,$07,$01

	; QUIT
	db $51,$CB,$00,$07
	db $10,$01,$11,$01,$12,$01,$13,$01
endif
	db $FF

;--------------------------------------------------------------------

SMB3_WelcomeToWarpZoneTextBoxStripeImage:
.Main:
;$2281E8
	; Left border
	db $50,$84,$80,$07
	db $92,$21,$91,$21,$91,$21,$92,$A1

	; Top border
	db $50,$85,$40,$2A
	db $90,$21
	
	; Right border
	db $50,$9B,$80,$07
	db $92,$61,$91,$61,$91,$61,$92,$E1

if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR]
	table "Tables/Fonts/WelcomeToWarpZone_br.txt"

	;             Layer,Map, X,Y, Dir, RLE, Size in bytes
	%drawStripeHeader(3, 0, 05,05, 0, !FALSE, 22*2)
	dw "    BOAS-VINDAS AO    "
	%drawStripeHeader(3, 0, 05,06, 0, !FALSE, 22*2)
	dw "   MUNDO TRANSPORTE   "

	cleartable
else
	; " WELCOME TO WARP ZONE "
	db $50,$A5,$00,$2B
	db $FE,$21,$52,$21,$56,$21,$5A,$21,$5B,$21,$6B,$21,$50,$21,$56,$21
	db $FE,$21,$58,$21,$6B,$21,$FE,$21,$52,$21,$51,$21,$57,$21,$53,$21
	db $FE,$21,$5E,$21,$6B,$21,$55,$21,$56,$21,$FE,$21

	; Bottom fill
	db $50,$C5,$40,$2A
	db $FE,$21
endif
	; Bottom border
	db $50,$E5,$40,$2A
	db $90,$A1

	db $FF

;--------------------------------------------------------------------

SMB3_OverworldTitleCardStripeImage_Luigi:
	db $51,$08,$00,$01
	db $92,$01

	db $51,$09,$40,$1A
	db $90,$01

	db $51,$17,$00,$01
	db $92,$41

	db $51,$28,$C0,$0A
	db $91,$01

	db $51,$29,$40,$1A
	db $FE,$01

	db $51,$37,$C0,$0A
	db $91,$41

	db $51,$49,$40,$1A
	db $FE,$01

	db $51,$69,$40,$1A
	db $FE,$01

	db $51,$89,$40,$1A
	db $FE,$01

	db $51,$A9,$40,$1A
	db $FE,$01

	db $51,$C9,$40,$1A
	db $FE,$01

	db $51,$E8,$00,$01
	db $92,$81

	db $51,$E9,$40,$1A
	db $90,$81

	db $51,$F7,$00,$01
	db $92,$C1

	db $51,$4C,$00,$09
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR]
	table "Tables/Fonts/Layer3_outlined_br.txt"
	dw "MUNDO"

	db $51,$AA,$00,$09
	dw "LUIGI"
	cleartable
else
	db $52,$01,$6B,$01,$57,$01,$5A,$01,$5C,$01

	db $51,$AA,$00,$09
	db $5A,$01,$54,$01,$5D,$01,$59,$01,$5D,$01
endif
	db $51,$B3,$00,$01
	db $FB,$01

	db $FF

;--------------------------------------------------------------------

DATA_2282BA:
	db $FF

;--------------------------------------------------------------------

DATA_2282BB:
	dl SMB3_StripeImageUploadTable[$00].LowByte
	dl $000000
	dl $000000
	dl $000000
	dl $000000
	dl $000000
	dl $0007BF

;--------------------------------------------------------------------

; Note: Stripe image related to the tile sliding minigame

DATA_2282D0:
	db $00,$00,$40,$3E
	db $A3,$1C

	db $00,$20,$40,$3E
	db $A3,$1C

	db $00,$40,$40,$3E
	db $A3,$1C

	db $00,$60,$00,$01
	db $A3,$1C

	db $00,$61,$40,$3A
	db $A1,$18

	db $02,$E0,$40,$3E

	db $A1,$18

	db $06,$E0,$40,$3E
	db $A1,$18
	
	db $FF

;--------------------------------------------------------------------

DATA_2282FB:
	dl SMB3_SlidingPictureMiniGameStarTilemap
	dl SMB3_SlidingPictureMiniGameMushroomTilemap
	dl SMB3_SlidingPictureMiniGameFlowerTilemap

SMB3_SlidingPictureMiniGameStarTilemap:
;$228304
	db $FC,$00,$FC,$00,$FC,$00,$FC,$00,$FC,$00,$9D,$08,$9E,$08,$FC,$00
	db $FC,$00,$FC,$00,$FC,$00,$FC,$00,$FC,$00,$FC,$00,$FC,$00,$FC,$00
	db $AC,$08,$AD,$08,$AE,$08,$AF,$08,$FC,$00,$FC,$00,$FC,$00,$FC,$00
	db $FC,$00,$FC,$00,$FC,$00,$FC,$00,$BC,$08,$EF,$09,$E0,$09,$BF,$08
	db $FC,$00,$FC,$00,$FC,$00,$FC,$00,$FC,$00,$FC,$00,$FC,$00,$9C,$08
	db $CC,$08,$E1,$09,$EF,$09,$CF,$08,$9F,$08,$FC,$00,$FC,$00,$FC,$00
	db $96,$08,$97,$08,$97,$08,$CD,$08,$E2,$09,$EF,$09,$EF,$09,$E6,$09
	db $84,$08,$97,$08,$97,$08,$C0,$08,$A6,$08,$EF,$09,$EF,$09,$EE,$09
	db $D4,$09,$EF,$09,$E6,$09,$D6,$09,$EF,$09,$EF,$09,$F9,$08,$D0,$08
	db $BD,$08,$BE,$08,$E1,$09,$EF,$09,$D5,$09,$E6,$09,$E4,$09,$D7,$09
	db $EF,$09,$EF,$09,$F0,$08,$E0,$08,$FC,$00,$CE,$08,$D0,$09,$EF,$09
	db $E6,$09,$E4,$09,$EE,$09,$EF,$09,$EF,$09,$ED,$08,$B2,$08,$FC,$00
	db $FC,$00,$D1,$08,$D1,$09,$E6,$09,$E7,$09,$E8,$09,$E9,$09,$EA,$09
	db $EF,$09,$D3,$09,$EE,$08,$FC,$00,$FC,$00,$E1,$08,$E6,$09,$E4,$09
	db $EF,$09,$EF,$09,$EF,$09,$EF,$09,$EF,$09,$EF,$09,$E3,$08,$FC,$00
	db $E2,$08,$E3,$09,$E4,$09,$E5,$09,$EF,$09,$EC,$09,$ED,$09,$EF,$09
	db $EF,$09,$EF,$09,$F3,$08,$E4,$08,$F2,$08,$E4,$09,$E5,$09,$D2,$09
	db $DC,$08,$DD,$08,$DE,$08,$DF,$08,$EF,$09,$EF,$09,$EB,$09,$F4,$08
	db $E5,$08,$E5,$09,$E7,$08,$E8,$08,$DA,$08,$FC,$00,$FC,$00,$DB,$08
	db $E9,$08,$EA,$08,$EF,$09,$EC,$08,$F5,$08,$F6,$08,$F7,$08,$FC,$00
	db $FC,$00,$FC,$00,$FC,$00,$FC,$00,$FC,$00,$FA,$08,$FB,$08,$EF,$08

SMB3_SlidingPictureMiniGameMushroomTilemap:
;$228454
	db $FC,$00,$FC,$00,$FC,$00,$0A,$08,$0B,$08,$0C,$08,$0D,$08,$0E,$08
	db $0F,$08,$FC,$00,$FC,$00,$FC,$00,$FC,$00,$FC,$00,$1C,$08,$1D,$08
	db $A0,$09,$A1,$09,$06,$08,$B8,$09,$1E,$08,$1F,$08,$FC,$00,$FC,$00
	db $FC,$00,$13,$08,$14,$08,$15,$08,$16,$08,$17,$08,$B6,$09,$B7,$09
	db $18,$08,$00,$08,$01,$08,$FC,$00,$26,$08,$2A,$08,$B0,$09,$B1,$09
	db $B2,$09,$B3,$09,$B4,$09,$B5,$09,$2C,$08,$BF,$09,$2D,$08,$2E,$08
	db $2F,$08,$CE,$09,$3C,$08,$3D,$08,$3E,$08,$3F,$08,$CF,$09,$C9,$09
	db $33,$08,$BD,$09,$BE,$09,$36,$08,$31,$08,$CC,$09,$38,$08,$BB,$09
	db $BC,$09,$3A,$08,$CD,$09,$C9,$09,$4C,$08,$4D,$08,$4E,$08,$4F,$08
	db $41,$08,$C8,$09,$43,$08,$B9,$09,$BA,$09,$45,$08,$C9,$09,$CA,$09
	db $C6,$09,$C6,$09,$CB,$09,$46,$08,$5C,$08,$5D,$08,$5E,$08,$5F,$08
	db $48,$08,$4A,$08,$C4,$09,$C5,$09,$C6,$09,$C6,$09,$C7,$09,$51,$08
	db $56,$08,$5A,$08,$C1,$09,$62,$08,$63,$08,$64,$08,$64,$08,$65,$08
	db $66,$08,$C2,$09,$C3,$09,$67,$08,$6C,$08,$6D,$08,$6E,$08,$6F,$08
	db $C0,$09,$DC,$09,$DC,$09,$C0,$49,$7C,$08,$7D,$08,$7E,$08,$7F,$08
	db $FC,$00,$FC,$00,$70,$08,$DC,$09,$C0,$89,$DC,$09,$DC,$09,$C0,$C9
	db $DD,$09,$71,$08,$FC,$00,$FC,$00,$FC,$00,$FC,$00,$7A,$08,$DC,$09
	db $DC,$09,$DC,$09,$DC,$09,$DC,$09,$DE,$09,$7B,$08,$FC,$00,$FC,$00
	db $FC,$00,$FC,$00,$68,$08,$DC,$09,$8C,$08,$8D,$08,$8E,$08,$8F,$08
	db $DF,$09,$76,$08,$FC,$00,$FC,$00,$FC,$00,$FC,$00,$89,$08,$8A,$08
	db $8B,$08,$8B,$08,$8B,$08,$D9,$09,$87,$08,$88,$08,$FC,$00,$FC,$00

SMB3_SlidingPictureMiniGameFlowerTilemap:
;$2285A4
	db $FC,$00,$FC,$00,$02,$04,$03,$04,$04,$04,$05,$04,$05,$04,$07,$04
	db $08,$04,$09,$04,$FC,$00,$FC,$00,$10,$04,$11,$04,$12,$04,$FE,$05
	db $FD,$45,$FC,$45,$FC,$05,$FD,$05,$FE,$05,$19,$04,$1A,$04,$1B,$04
	db $20,$04,$21,$04,$22,$04,$23,$04,$24,$04,$25,$04,$25,$04,$27,$04
	db $28,$04,$29,$04,$F9,$05,$2B,$04,$30,$04,$F7,$05,$32,$04,$FF,$05
	db $34,$04,$FF,$05,$FF,$05,$37,$04,$FF,$05,$39,$04,$F5,$05,$3B,$04
	db $40,$04,$F8,$05,$42,$04,$FF,$05,$44,$04,$FF,$05,$FF,$05,$47,$04
	db $FF,$05,$49,$04,$F6,$05,$4B,$04,$50,$04,$F1,$05,$52,$04,$53,$04
	db $54,$04,$55,$04,$55,$04,$57,$04,$58,$04,$59,$04,$F2,$05,$5B,$04
	db $60,$04,$61,$04,$F0,$05,$FE,$05,$FA,$05,$FB,$05,$FB,$45,$FA,$45
	db $FE,$05,$69,$04,$6A,$04,$6B,$04,$FC,$00,$FC,$00,$72,$04,$73,$04
	db $74,$04,$75,$04,$75,$04,$77,$04,$78,$04,$79,$04,$FC,$00,$FC,$00
	db $80,$04,$81,$04,$82,$04,$83,$04,$FC,$04,$85,$04,$86,$04,$FC,$00
	db $FC,$00,$FC,$00,$FC,$00,$FC,$00,$90,$04,$91,$04,$92,$04,$93,$04
	db $94,$04,$95,$04,$FC,$00,$FC,$00,$98,$04,$99,$04,$9A,$04,$9B,$04
	db $E6,$04,$F3,$05,$EB,$04,$35,$04,$A4,$04,$A5,$04,$FC,$00,$A7,$04
	db $A8,$04,$A9,$04,$AA,$04,$AB,$04,$B0,$04,$B1,$04,$F4,$05,$B3,$04
	db $B4,$04,$B5,$04,$B6,$04,$B7,$04,$B8,$04,$B9,$04,$BA,$04,$BB,$04
	db $FC,$00,$C1,$04,$C2,$04,$C3,$04,$C4,$04,$C5,$04,$C6,$04,$C7,$04
	db $C8,$04,$C9,$04,$CA,$04,$FC,$00,$FC,$00,$FC,$00,$D2,$04,$D3,$04
	db $D4,$04,$D5,$04,$D6,$04,$D7,$04,$D8,$04,$D9,$04,$FC,$00,$FC,$00

;--------------------------------------------------------------------

DATA_2286F4:
	db $00,$00,$00,$3F
	db $08,$11,$09,$11,$08,$11,$09,$11,$08,$11,$09,$11,$08,$11,$09,$11
	db $08,$11,$09,$11,$08,$11,$09,$11,$08,$11,$09,$11,$08,$11,$09,$11
	db $08,$11,$09,$11,$08,$11,$09,$11,$08,$11,$09,$11,$08,$11,$09,$11
	db $08,$11,$09,$11,$08,$11,$09,$11,$08,$11,$09,$11,$08,$11,$09,$11

	db $00,$20,$00,$3F
	db $06,$11,$07,$11,$06,$11,$07,$11,$06,$11,$07,$11,$06,$11,$07,$11
	db $06,$11,$07,$11,$06,$11,$07,$11,$06,$11,$07,$11,$06,$11,$07,$11
	db $06,$11,$07,$11,$06,$11,$07,$11,$06,$11,$07,$11,$06,$11,$07,$11
	db $06,$11,$07,$11,$06,$11,$07,$11,$06,$11,$07,$11,$06,$11,$07,$11

	db $00,$40,$00,$3F
	db $08,$11,$09,$11,$08,$11,$09,$11,$08,$11,$09,$11,$08,$11,$09,$11
	db $08,$11,$09,$11,$08,$11,$09,$11,$08,$11,$09,$11,$08,$11,$09,$11
	db $08,$11,$09,$11,$08,$11,$09,$11,$08,$11,$09,$11,$08,$11,$09,$11
	db $08,$11,$09,$11,$08,$11,$09,$11,$08,$11,$09,$11,$08,$11,$09,$11

	db $00,$60,$80,$25
	db $06,$11,$08,$11,$06,$11,$08,$11,$06,$11,$08,$11,$06,$11,$08,$11
	db $06,$11,$08,$11,$06,$11,$08,$11,$06,$11,$08,$11,$06,$11,$08,$11
	db $06,$11,$08,$11,$06,$11

	db $00,$61,$80,$25
	db $07,$11,$09,$11,$07,$11,$09,$11,$07,$11,$09,$11,$07,$11,$09,$11
	db $07,$11,$09,$11,$07,$11,$09,$11,$07,$11,$09,$11,$07,$11,$09,$11
	db $07,$11,$09,$11,$07,$11

	db $00,$7E,$80,$25
	db $06,$11,$08,$11,$06,$11,$08,$11,$06,$11,$08,$11,$06,$11,$08,$11
	db $06,$11,$08,$11,$06,$11,$08,$11,$06,$11,$08,$11,$06,$11,$08,$11
	db $06,$11,$08,$11,$06,$11

	db $00,$7F,$80,$25
	db $07,$11,$09,$11,$07,$11,$09,$11,$07,$11,$09,$11,$07,$11,$09,$11
	db $07,$11,$09,$11,$07,$11,$09,$11,$07,$11,$09,$11,$07,$11,$09,$11
	db $07,$11,$09,$11,$07,$11

	db $02,$C0,$00,$3F
	db $08,$11,$09,$11,$08,$11,$09,$11,$08,$11,$09,$11,$08,$11,$09,$11
	db $08,$11,$09,$11,$08,$11,$09,$11,$08,$11,$09,$11,$08,$11,$09,$11
	db $08,$11,$09,$11,$08,$11,$09,$11,$08,$11,$09,$11,$08,$11,$09,$11
	db $08,$11,$09,$11,$08,$11,$09,$11,$08,$11,$09,$11,$08,$11,$09,$11

	db $02,$E0,$00,$3F
	db $06,$11,$07,$11,$06,$11,$07,$11,$06,$11,$07,$11,$06,$11,$07,$11
	db $06,$11,$07,$11,$06,$11,$07,$11,$06,$11,$07,$11,$06,$11,$07,$11
	db $06,$11,$07,$11,$06,$11,$07,$11,$06,$11,$07,$11,$06,$11,$07,$11
	db $06,$11,$07,$11,$06,$11,$07,$11,$06,$11,$07,$11,$06,$11,$07,$11

	db $00,$62,$40,$36
	db $3C,$11

	db $00,$82,$C0,$22
	db $3C,$11

	db $FF

;--------------------------------------------------------------------

DATA_2288FD:
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $03,$00,$00,$C0,$03,$00,$00,$C0
	db $03,$00,$00,$C0,$03,$00,$00,$C0
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00

DATA_22893D:
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$03,$00,$00,$C0
	db $07,$00,$00,$E0,$07,$00,$00,$E0
	db $07,$00,$00,$E0,$03,$00,$00,$C0
	db $0F,$00,$00,$F0,$02,$00,$00,$40
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00

DATA_22897D:
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $3E,$00,$00,$7C,$2C,$00,$00,$34
	db $00,$00,$00,$00,$03,$00,$00,$C0
	db $27,$00,$00,$E4,$27,$00,$00,$E4
	db $27,$00,$00,$E4,$03,$00,$00,$C0
	db $1F,$00,$00,$F8,$32,$00,$00,$4C
	db $22,$00,$00,$44,$20,$00,$00,$04
	db $00,$00,$00,$00,$00,$00,$00,$00

DATA_2289BD:
	db $07,$00,$00,$E0,$1E,$00,$00,$78
	db $3E,$00,$00,$7C,$6C,$00,$00,$36
	db $40,$00,$00,$02,$C3,$00,$00,$C3
	db $E7,$00,$00,$E7,$E7,$00,$00,$E7
	db $E7,$00,$00,$E7,$C3,$00,$00,$C3
	db $9F,$00,$00,$F9,$F2,$00,$00,$4F
	db $62,$00,$00,$46,$20,$00,$00,$04
	db $30,$00,$00,$0C,$1F,$00,$00,$F8

DATA_2289FD:
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $03,$00,$00,$C0,$00,$00,$00,$00
	db $03,$00,$00,$C0,$02,$00,$00,$40
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00

DATA_228A3D:
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $03,$00,$00,$C0,$04,$00,$00,$20
	db $07,$00,$00,$E0,$00,$00,$00,$00
	db $0F,$00,$00,$F0,$02,$00,$00,$40
	db $0A,$00,$00,$50,$06,$00,$00,$60
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00

DATA_228A7D:
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $07,$00,$00,$E0,$1C,$00,$00,$38
	db $13,$00,$00,$C8,$14,$00,$00,$28
	db $07,$00,$00,$E0,$30,$00,$00,$0C
	db $1F,$00,$00,$F8,$22,$00,$00,$44
	db $1A,$00,$00,$58,$26,$00,$00,$64
	db $12,$00,$00,$48,$0A,$00,$00,$50
	db $00,$00,$00,$00,$00,$00,$00,$00

DATA_228ABD:
	db $1F,$00,$00,$F8,$70,$00,$00,$0E
	db $C7,$00,$00,$E3,$9C,$00,$00,$39
	db $93,$00,$00,$C9,$94,$00,$00,$29
	db $C7,$00,$00,$E3,$70,$00,$00,$0E
	db $1F,$00,$00,$F8,$62,$00,$00,$46
	db $9A,$00,$00,$59,$A6,$00,$00,$65
	db $92,$00,$00,$49,$4A,$00,$00,$52
	db $36,$00,$00,$6C,$0F,$00,$00,$F0

;--------------------------------------------------------------------

DATA_228AFD:
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	db $50,$88,$00,$01
	db $92,$21

	db $50,$89,$40,$26
	db $90,$21

	db $50,$9D,$00,$01
	db $92,$61
else
	db $50,$A2,$00,$01
	db $92,$21

	db $50,$A3,$40,$32
	db $90,$21

	db $50,$BD,$00,$01
	db $92,$61
endif
	db $FF

;--------------------------------------------------------------------

; Note: Stripe images related to spade levels.

DATA_228B10:
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	db $50,$A8,$00,$01
	db $91,$21

	db $50,$A9,$40,$26
	db $FE,$21

	db $50,$BD,$00,$01
	db $91,$61

	db $50,$C8,$00,$01
	db $91,$21

	db $50,$C9,$40,$26
	db $FE,$21

	db $50,$DD,$00,$01
	db $91,$61
else
	db $50,$C2,$00,$01
	db $91,$21

	db $50,$C3,$40,$32
	db $FE,$21

	db $50,$DD,$00,$01
	db $91,$61
endif
	db $FF

DATA_228B23:
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	db $50,$E8,$00,$01
	db $91,$21

	db $50,$E9,$40,$26
	db $FE,$21

	db $50,$FD,$00,$01
	db $91,$61

	db $51,$08,$00,$01
	db $91,$21

	db $51,$09,$40,$26
	db $FE,$21

	db $51,$1D,$00,$01
	db $91,$61
else
	db $50,$E2,$00,$01
	db $91,$21

	db $50,$E3,$40,$32
	db $FE,$21

	db $50,$FD,$00,$01
	db $91,$61
endif
	db $FF

DATA_228B36:
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	db $51,$28,$00,$01
	db $91,$21

	db $51,$29,$40,$26
	db $FE,$21

	db $51,$3D,$00,$01
	db $91,$61

	db $51,$48,$00,$01
	db $91,$21

	db $51,$49,$40,$26
	db $FE,$21

	db $51,$5D,$00,$01
	db $91,$61
else
	db $51,$02,$00,$01
	db $91,$21

	db $51,$03,$40,$32
	db $FE,$21

	db $51,$1D,$00,$01
	db $91,$61
endif
	db $FF

DATA_228B49:
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	db $51,$68,$00,$01
	db $92,$A1

	db $51,$69,$40,$26
	db $90,$A1

	db $51,$7D,$00,$01
	db $92,$E1
else
	db $51,$22,$00,$01
	db $92,$A1

	db $51,$23,$40,$32
	db $90,$A1

	db $51,$3D,$00,$01
	db $92,$E1
endif
	db $FF

;--------------------------------------------------------------------

DATA_228B5C:
	dl SMB3_StripeImageUploadTable[$00].LowByte		; 00
	dl DATA_228BF2		; 03
	dl DATA_228BF2		; 06
	dl DATA_229021		; 09
	dl DATA_229021		; 0C
	dl DATA_228BF2		; 0F
	dl $0007BF		; 12
	dl DATA_2282D0		; 15
	dl DATA_228AFD		; 18
	dl DATA_228B10		; 1B
	dl DATA_228B23		; 1E
	dl DATA_228B36		; 21
	dl DATA_228B49		; 24
	dl DATA_2286F4		; 27
	dl SMB3_OverworldTitleCardStripeImage_Mario				; 2A
	dl SMB3_OverworldTitleCardStripeImage_Luigi				; 2D
	dl DATA_228078		; 30
	dl DATA_2282BA		; 33
	dl DATA_228077		; 36
	dl DATA_22814A		; 39
	dl SMB3_GameOverCardStripeImage_1PlayerGame				; 3C
	dl SMB3_GameOverCardStripeImage_2PlayerGame				; 3F
	dl DATA_228DDB		; 42
	dl DATA_2288FD		; 45
	dl DATA_2289FD		; 48
	dl DATA_228CDB		; 4B
	dl DATA_22893D		; 4E
	dl DATA_228A3D		; 51
	dl DATA_228D1B		; 54
	dl DATA_22897D		; 57
	dl DATA_228A7D		; 5A
	dl DATA_228D5B		; 5D
	dl DATA_2289BD		; 60
	dl DATA_228ABD		; 63
	dl DATA_228D9B		; 66
	dl DATA_2289FD		; 69
	dl DATA_228AFD		; 6C
	dl DATA_228DDB		; 6F
	dl DATA_228DDB		; 72
	dl DATA_228DDB		; 75
	dl DATA_228DDB		; 78
	dl DATA_228DDB		; 7B
	dl DATA_228DDB		; 7E
	dl DATA_228DDB		; 81
	dl DATA_228DDB		; 84
	dl SMB3_WelcomeToWarpZoneTextBoxStripeImage_Main		; 87
	dl SMB3_YouGotACardStripeImage_3MatchingCards			; 8A
	dl SMB3_CourseClearStripeImage							; 8D
	dl SMB3_YouGotACardStripeImage_Normal					; 90
	dl DATA_22920D		; 93

;--------------------------------------------------------------------

;Note: Seems to be the non-updating parts of the status bar

DATA_228BF2:
	db $0F,$00,$00,$03
	db $AE,$22,$80,$22

	db $0F,$02,$40,$22
	db $81,$22

	db $0F,$14,$00,$17
	db $80,$62,$80,$22,$81,$22,$81,$22,$82,$22,$81,$22,$81,$22,$82,$22
	db $81,$22,$81,$22,$80,$62,$AE,$22

	db $0F,$20,$00,$3F
	db $AE,$22,$83,$22,$84,$22,$85,$22,$86,$22,$87,$22,$AD,$22,$AD,$22
	db $9E,$22,$9E,$22,$9E,$22,$9E,$22,$9E,$22,$9E,$22,$8C,$22,$8D,$22
	db $AD,$22,$A6,$22,$96,$22,$96,$22,$83,$62,$83,$22,$AD,$22,$AD,$22
	db $9A,$22,$AD,$22,$AD,$22,$9A,$22,$AD,$22,$AD,$22,$83,$62,$AE,$22

	db $0F,$40,$00,$3F
	db $AE,$22,$83,$22,$AD,$22,$AD,$22,$A4,$22,$AD,$22,$AD,$22,$AD,$22
	db $90,$22,$90,$22,$90,$22,$90,$22,$90,$22,$90,$22,$90,$22,$AD,$22
	db $A5,$22,$90,$22,$90,$22,$90,$22,$83,$62,$83,$22,$AD,$22,$AD,$22
	db $9A,$22,$AD,$22,$AD,$22,$9A,$22,$AD,$22,$AD,$22,$83,$62,$AE,$22

	db $0F,$60,$00,$03
	db $AE,$22,$80,$A2

	db $0F,$62,$40,$22
	db $81,$A2

	db $0F,$74,$00,$17
	db $80,$E2,$80,$A2,$81,$A2,$81,$A2,$82,$A2,$81,$A2,$81,$A2,$82,$A2
	db $81,$A2,$81,$A2,$80,$E2,$AE,$22

	db $0F,$80,$40,$3E
	db $AE,$22

	db $0F,$A0,$40,$3E
	db $AE,$22

	db $FF

;--------------------------------------------------------------------

DATA_228CDB:
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $02,$00,$00,$40,$02,$00,$00,$40
	db $02,$00,$00,$40,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00

DATA_228D1B:
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $0C,$00,$00,$30,$00,$00,$00,$00
	db $02,$00,$00,$40,$02,$00,$00,$40
	db $02,$00,$00,$40,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00

DATA_228D5B:
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $02,$00,$00,$40,$04,$00,$00,$20
	db $3C,$00,$00,$3C,$00,$00,$00,$00
	db $02,$00,$00,$40,$22,$00,$00,$44
	db $12,$00,$00,$48,$10,$00,$00,$08
	db $20,$00,$00,$04,$20,$00,$00,$04
	db $01,$00,$00,$80,$06,$00,$00,$60
	db $00,$00,$00,$00,$00,$00,$00,$00

DATA_228D9B:
	db $01,$00,$00,$80,$02,$00,$00,$40
	db $02,$00,$00,$40,$04,$00,$00,$20
	db $FC,$00,$00,$3F,$80,$00,$00,$01
	db $42,$00,$00,$42,$22,$00,$00,$44
	db $12,$00,$00,$48,$10,$00,$00,$08
	db $20,$00,$00,$04,$20,$00,$00,$04
	db $41,$00,$00,$82,$46,$00,$00,$62
	db $98,$00,$00,$19,$E0,$00,$00,$07

;--------------------------------------------------------------------

DATA_228DDB:
	db $FF,$00,$00,$FF,$7F,$F6,$6B,$00
	db $00,$B5,$56,$34,$67,$00,$00,$00
	db $00,$00,$00

;--------------------------------------------------------------------

; Note: "YOU GOT A CARD" stripe image (3 matching cards level end)
; [BR] Turned every repeated instance into new macros.

SMB3_YouGotACardStripeImage_3MatchingCards:
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000
	db $02,$C6										; Header bytes 1 and 2 (X, Y, Layer)
	%CUSTOMDATA_SMB3_YouGotACardTextData_Top(NULLROM)

	db $02,$B6,$00,$07
	db $80,$02,$81,$02,$81,$02,$80,$42

	db $02,$E6										; Header bytes 1 and 2 (X, Y, Layer)
	%CUSTOMDATA_SMB3_YouGotACardTextData_Bottom(NULLROM)

	db $03,$16,$00,$07
	db $80,$82,$81,$82,$81,$82,$80,$C2

	db $06,$C6										; Header bytes 1 and 2 (X, Y, Layer)
	%CUSTOMDATA_SMB3_YouGotACardTextData_Top(NULLROM)

	db $06,$B6,$00,$07
	db $80,$02,$81,$02,$81,$02,$80,$42

	db $06,$E6										; Header bytes 1 and 2 (X, Y, Layer)
	%CUSTOMDATA_SMB3_YouGotACardTextData_Bottom(NULLROM)

	db $07,$16,$00,$07
	db $80,$82,$81,$82,$81,$82,$80,$C2
else
	db $02,$C7,$00,$25
	db $DA,$02,$DB,$02,$D8,$02,$FD,$00,$D5,$02,$DB,$02,$D7,$02,$FD,$00
	db $D0,$02,$FD,$00,$D4,$02,$D0,$02,$D1,$02,$D6,$02,$FD,$00,$83,$02
	db $FE,$00,$FE,$00,$83,$42

	db $02,$B6,$00,$07
	db $80,$02,$81,$02,$81,$02,$80,$42

	db $02,$E7,$00,$25
	db $EA,$02,$EB,$02,$E8,$02,$FD,$00,$E5,$02,$EB,$02,$E7,$02,$FD,$00
	db $E0,$02,$FD,$00,$E4,$02,$E0,$02,$E1,$02,$E6,$02,$FD,$00,$83,$02
	db $FE,$00,$FE,$00,$83,$42

	db $03,$16,$00,$07
	db $80,$82,$81,$82,$81,$82,$80,$C2

	db $06,$C7,$00,$25
	db $DA,$02,$DB,$02,$D8,$02,$FD,$00,$D5,$02,$DB,$02,$D7,$02,$FD,$00
	db $D0,$02,$FD,$00,$D4,$02,$D0,$02,$D1,$02,$D6,$02,$FD,$00,$83,$02
	db $FE,$00,$FE,$00,$83,$42

	db $06,$B6,$00,$07
	db $80,$02,$81,$02,$81,$02,$80,$42

	db $06,$E7,$00,$25
	db $EA,$02,$EB,$02,$E8,$02,$FD,$00,$E5,$02,$EB,$02,$E7,$02,$FD,$00
	db $E0,$02,$FD,$00,$E4,$02,$E0,$02,$E1,$02,$E6,$02,$FD,$00,$83,$02
	db $FE,$00,$FE,$00,$83,$42

	db $07,$16,$00,$07
	db $80,$82,$81,$82,$81,$82,$80,$C2
endif
	db $FF

;--------------------------------------------------------------------

; Note: "COURSE CLEAR!" stripe image

SMB3_CourseClearStripeImage:
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR]
	db $08,$68										; Header bytes 1 and 2 (X, Y, Layer)
	%CUSTOMDATA_SMB3_CourseClearTextData_Top(NULLROM)

	db $08,$88										; Header bytes 1 and 2 (X, Y, Layer)
	%CUSTOMDATA_SMB3_CourseClearTextData_Bottom(NULLROM)

	db $0C,$68										; Header bytes 1 and 2 (X, Y, Layer)
	%CUSTOMDATA_SMB3_CourseClearTextData_Top(NULLROM)

	db $0C,$88										; Header bytes 1 and 2 (X, Y, Layer)
	%CUSTOMDATA_SMB3_CourseClearTextData_Bottom(NULLROM)
else
	db $08,$69,$00,$1B
	db $D4,$02,$DB,$02,$D8,$02,$D1,$02,$D2,$02,$D3,$02,$FD,$00,$D4,$02
	db $D9,$02,$D3,$02,$D0,$02,$D1,$02,$FD,$00,$DC,$02

	db $08,$89,$00,$1B
	db $E4,$02,$EB,$02,$E8,$02,$E1,$02,$E2,$02,$E3,$02,$FD,$00,$E4,$02
	db $E9,$02,$E3,$02,$E0,$02,$E1,$02,$FD,$00,$EC,$02

	db $0C,$69,$00,$1B
	db $D4,$02,$DB,$02,$D8,$02,$D1,$02,$D2,$02,$D3,$02,$FD,$00,$D4,$02
	db $D9,$02,$D3,$02,$D0,$02,$D1,$02,$FD,$00,$DC,$02

	db $0C,$89,$00,$1B
	db $E4,$02,$EB,$02,$E8,$02,$E1,$02,$E2,$02,$E3,$02,$FD,$00,$E4,$02
	db $E9,$02,$E3,$02,$E0,$02,$E1,$02,$FD,$00,$EC,$02
endif
	db $FF

;--------------------------------------------------------------------

; Note: "YOU GOT A CARD" stripe image (normal level end)

SMB3_YouGotACardStripeImage_Normal:
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR]
	db $08,$C6										; Header bytes 1 and 2 (X, Y, Layer)
	%CUSTOMDATA_SMB3_YouGotACardTextData_Top(NULLROM)

	db $08,$B6,$00,$07
	db $80,$02,$81,$02,$81,$02,$80,$42
	
	db $08,$E6										; Header bytes 1 and 2 (X, Y, Layer)
	%CUSTOMDATA_SMB3_YouGotACardTextData_Bottom(NULLROM)

	db $09,$16,$00,$07
	db $80,$82,$81,$82,$81,$82,$80,$C2

	db $0C,$C6										; Header bytes 1 and 2 (X, Y, Layer)
	%CUSTOMDATA_SMB3_YouGotACardTextData_Top(NULLROM)

	db $0C,$B6,$00,$07
	db $80,$02,$81,$02,$81,$02,$80,$42

	db $0C,$E6										; Header bytes 1 and 2 (X, Y, Layer)
	%CUSTOMDATA_SMB3_YouGotACardTextData_Bottom(NULLROM)

	db $0D,$16,$00,$07
	db $80,$82,$81,$82,$81,$82,$80,$C2
else
	db $08,$C7,$00,$25
	db $DA,$02,$DB,$02,$D8,$02,$FD,$00,$D5,$02,$DB,$02,$D7,$02,$FD,$00
	db $D0,$02,$FD,$00,$D4,$02,$D0,$02,$D1,$02,$D6,$02,$FD,$00,$83,$02
	db $FE,$00,$FE,$00,$83,$42

	db $08,$B6,$00,$07
	db $80,$02,$81,$02,$81,$02,$80,$42
	
	db $08,$E7,$00,$25
	db $EA,$02,$EB,$02,$E8,$02,$FD,$00,$E5,$02,$EB,$02,$E7,$02,$FD,$00
	db $E0,$02,$FD,$00,$E4,$02,$E0,$02,$E1,$02,$E6,$02,$FD,$00,$83,$02
	db $FE,$00,$FE,$00,$83,$42

	db $09,$16,$00,$07
	db $80,$82,$81,$82,$81,$82,$80,$C2

	db $0C,$C7,$00,$25
	db $DA,$02,$DB,$02,$D8,$02,$FD,$00,$D5,$02,$DB,$02,$D7,$02,$FD,$00
	db $D0,$02,$FD,$00,$D4,$02,$D0,$02,$D1,$02,$D6,$02,$FD,$00,$83,$02
	db $FE,$00,$FE,$00,$83,$42

	db $0C,$B6,$00,$07
	db $80,$02,$81,$02,$81,$02,$80,$42

	db $0C,$E7,$00,$25
	db $EA,$02,$EB,$02,$E8,$02,$FD,$00,$E5,$02,$EB,$02,$E7,$02,$FD,$00
	db $E0,$02,$FD,$00,$E4,$02,$E0,$02,$E1,$02,$E6,$02,$FD,$00,$83,$02
	db $FE,$00,$FE,$00,$83,$42

	db $0D,$16,$00,$07
	db $80,$82,$81,$82,$81,$82,$80,$C2
endif
	db $FF

;--------------------------------------------------------------------

; Todo: Stripe image data for the item reserve.
;[BR] Fixed borders of the World/Lives section.

DATA_229021:
	db $0F,$00,$00,$0F
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000
	db $AE,$02,$80,$02,$81,$02,$81,$02,$81,$02,$81,$02,$81,$02,$A0,$02
else
	db $AE,$02,$9B,$02,$9C,$02,$9C,$02,$9C,$02,$9C,$02,$9C,$02,$A0,$02
endif

	db $0F,$08,$40,$2C
	db $9C,$02

	db $0F,$1E,$00,$03
	db $9B,$42,$AE,$02

	db $FF

	db $0F,$20,$00,$3F
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000
	db $AE,$02,$83,$02,$84,$02,$85,$02,$86,$02,$87,$02,$AF,$02,$A1,$02
else
	db $AE,$02,$9D,$02,$84,$02,$85,$02,$86,$02,$87,$02,$AF,$02,$A1,$02
endif
	db $AF,$02,$AF,$02,$AF,$02,$AF,$02,$AF,$02,$AF,$02,$AF,$02,$AF,$02
	db $AF,$02,$AF,$02,$AF,$02,$AF,$02,$AF,$02,$AF,$02,$AF,$02,$AF,$02
	db $AF,$02,$AF,$02,$AF,$02,$AF,$02,$AF,$02,$AF,$02,$9D,$42,$AE,$02

	db $FF

	db $0F,$40,$00,$3F
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000
	db $AE,$02,$83,$02,$88,$02,$89,$02,$A4,$02,$AF,$02,$AF,$02,$A1,$02
else
	db $AE,$02,$9D,$02,$88,$02,$89,$02,$A4,$02,$AF,$02,$AF,$02,$A1,$02
endif
	db $AF,$02,$AF,$02,$AF,$02,$AF,$02,$AF,$02,$AF,$02,$AF,$02,$AF,$02
	db $AF,$02,$AF,$02,$AF,$02,$AF,$02,$AF,$02,$AF,$02,$AF,$02,$AF,$02
	db $AF,$02,$AF,$02,$AF,$02,$AF,$02,$AF,$02,$AF,$02,$9D,$42,$AE,$02

	db $FF

	db $0F,$60,$00,$0F
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000
	db $AE,$02,$80,$82,$81,$82,$81,$82,$81,$82,$81,$82,$81,$82,$A0,$82
else
	db $AE,$02,$9B,$82,$9C,$82,$9C,$82,$9C,$82,$9C,$82,$9C,$82,$A0,$82
endif

	db $0F,$68,$40,$2C
	db $9C,$82,$0F,$7E,$00,$03,$9B,$C2,$AE,$02

	db $FF

DATA_2290F1:
	db $0F,$20,$00,$03
	db $AE,$02,$80,$02

	db $0F,$22,$40,$36
	db $81,$02

	db $0F,$3E,$00,$03
	db $80,$42,$AE,$02

	db $FF

	db $0F,$40,$00,$03
	db $AE,$02,$80,$82

	db $0F,$42,$40,$36
	db $81,$82

	db $0F,$5E,$00,$03
	db $80,$C2,$AE,$02

	db $FF

	db $0F,$20,$40,$3E
	db $AE,$02

	db $FF

	db $0F,$40,$40,$3E
	db $AE,$02

	db $FF

	db $0F,$00,$00,$03
	db $AE,$02,$80,$02

	db $0F,$02,$40,$22
	db $81,$02

	db $0F,$14,$00,$17
	db $80,$42,$80,$02,$81,$02,$81,$02,$82,$02,$81,$02,$81,$02,$82,$02
	db $81,$02,$81,$02,$80,$42,$AE,$02

	db $FF

	db $0F,$20,$00,$3F
	db $AE,$02,$83,$02,$84,$02,$85,$02,$86,$02,$87,$02,$AD,$02,$AD,$02
	db $9F,$02,$9F,$02,$9F,$02,$9F,$02,$9F,$02,$9F,$02,$8C,$02,$8D,$02
	db $AD,$02,$A6,$02,$AD,$02,$90,$02,$83,$42,$83,$02,$AD,$02,$AD,$02
	db $9A,$02,$AD,$02,$AD,$02,$9A,$02,$AD,$02,$AD,$02,$83,$42,$AE,$02

	db $FF

	db $0F,$40,$00,$3F
	db $AE,$02,$83,$02,$88,$02,$89,$02,$A4,$02,$AD,$02,$AD,$02,$AD,$02
	db $90,$02,$90,$02,$90,$02,$90,$02,$90,$02,$90,$02,$90,$02,$AD,$02
	db $A5,$02,$90,$02,$90,$02,$90,$02,$83,$42,$83,$02,$AD,$02,$AD,$02
	db $9A,$02,$AD,$02,$AD,$02,$9A,$02,$AD,$02,$AD,$02,$83,$C2,$AE,$02

	db $FF

DATA_2291E2:
	db $0F,$60,$00,$03
	db $AE,$02,$80,$82

	db $0F,$62,$40,$22
	db $81,$82

	db $0F,$74,$00,$17
	db $80,$C2,$80,$82,$81,$82,$81,$82,$82,$82,$81,$82,$81,$82,$82,$82
	db $81,$82,$81,$82,$80,$C2,$AE,$02

	db $FF

;--------------------------------------------------------------------

DATA_22920D:
	db $0D,$CC,$00,$13
	db $3A,$3C,$3C,$3C,$3A,$3C,$3C,$3C,$3A,$3C,$3C,$3C,$3A,$3C,$3C,$3C
	db $3A,$3C,$3C,$3C

	db $0D,$EC,$00,$13
	db $3B,$3C,$3D,$3C,$3B,$3C,$3D,$3C,$3B,$3C,$3D,$3C,$3B,$3C,$3D,$3C
	db $3B,$3C,$3D,$3C

	db $FF

;--------------------------------------------------------------------

	%DATATABLE_SMB3_WorldRollcallSpriteData(NULLROM)			; $22923E
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	%FREE_BYTES(NULLROM, 6468, $FF)
elseif !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR]
	%FREE_BYTES(NULLROM, 6574-204, $FF)
else
	%FREE_BYTES(NULLROM, 6574, $FF)
endif
	%ROUTINE_SMB3_NorSpr075_BossProjectile_Status01(NULLROM)		; $22B000
	%ROUTINE_SMB3_NorSpr075_BossProjectile_Status02(NULLROM)		; $22B015

;--------------------------------------------------------------------

SMB3_NorSpr081_HammerBro_Status01:
.Main:
;$22B1DB
	LDA.w !RAM_SMB3_Level_GenSpr_SpriteID
	CMP.b #!Define_SMB3_SpriteID_GenSpr07_SpawnMiniChest
	BNE.b CODE_22B1F8
	LDY.w !RAM_SMB3_Overworld_OWSprIDBeingEntered
	LDA.w DATA_21C405,y
	CMP.b #!Define_SMB3_SpriteID_NorSpr081_HammerBro
	BEQ.b CODE_22B1F9
	STA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	DEC.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	RTL

;--------------------------------------------------------------------

SMB3_NorSpr082_BoomerangBro_Status01:
.Main:
;$22B1F3
	LDA.w !RAM_SMB3_Global_RandomByte02,x
	STA.b !RAM_SMB3_NorSpr082_BoomerangBro_CurrentState,x
CODE_22B1F8:
	RTL

;--------------------------------------------------------------------

CODE_22B1F9:
	LDA.w !RAM_SMB3_Global_RandomByte02,x
	STA.w !RAM_SMB3_NorSpr081_HammerBro_WaitBeforeReadyingHammer,x
	RTL

;--------------------------------------------------------------------

SMB3_NorSpr082_BoomerangBro_Status02:
.Main:
;$22B200
	JSL.l CODE_279BC4
	JSL.l CODE_22B32C
	LDA.b $9C
	BNE.b CODE_22B1F8
	JSL.l SMB3_HandleNormalSpriteGravity_Main
	JSL.l CODE_279B6C
	LDA.b $A7,x
	AND.b #$04
	BEQ.b CODE_22B21E
	JSL.l CODE_278B67
CODE_22B21E:
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$0F
	BNE.b CODE_22B22E
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.w DATA_21C40F,y
	STA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
CODE_22B22E:
	JSR.w CODE_22B232
	RTL

CODE_22B232:
	LDA.b !RAM_SMB3_NorSpr082_BoomerangBro_CurrentState,x
	AND.b #$03
	JSL.l SMB3_ExecutePtr_Absolute

DATA_22B23A:
	dw CODE_22B242
	dw CODE_22B255
	dw CODE_22B242
	dw CODE_22B251

CODE_22B242:
	LDA.w !RAM_SMB3_NorSpr082_BoomerangBro_PhaseTimer,x
	BNE.b CODE_22B24E
	INC.b !RAM_SMB3_NorSpr082_BoomerangBro_CurrentState,x
	LDA.b #$40
	STA.w !RAM_SMB3_NorSpr082_BoomerangBro_PhaseTimer,x
CODE_22B24E:
	STZ.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	RTS

CODE_22B251:
	LDA.b #$F8
	BNE.b CODE_22B257				; Note: This will always branch.

CODE_22B255:
	LDA.b #$08
CODE_22B257:
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	INC.b !RAM_SMB3_NorSpr082_BoomerangBro_WalkingFrameCounter,x
	INC.b !RAM_SMB3_NorSpr082_BoomerangBro_WalkingFrameCounter,x
	LDA.b !RAM_SMB3_Global_FrameCounter
	BNE.b CODE_22B26A
	LDA.w !RAM_SMB3_Global_RandomByte02,x
	BPL.b CODE_22B26A
	LDA.b #$D0
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_22B26A:
	LDA.w !RAM_SMB3_NorSpr082_BoomerangBro_PhaseTimer,x
	BNE.b CODE_22B276
	INC.b !RAM_SMB3_NorSpr082_BoomerangBro_CurrentState,x
	LDA.b #$10
	STA.w !RAM_SMB3_NorSpr082_BoomerangBro_PhaseTimer,x
CODE_22B276:
	LDA.w !RAM_SMB3_NorSpr082_BoomerangBro_WaitBeforeReadyingBoomerang,x
	INC.w !RAM_SMB3_NorSpr082_BoomerangBro_WaitBeforeReadyingBoomerang,x
	AND.b #$BF
	CMP.b #$1F
	BNE.b CODE_22B28A
	LDA.b #$0F
	STA.w !RAM_SMB3_NorSpr082_BoomerangBro_ThrowAnimationTimer,x
	JSR.w CODE_22B3A3
CODE_22B28A:
	RTS

;--------------------------------------------------------------------

SMB3_NorSpr081_HammerBro_Status02:
.Main:
;$22B28B
	JSL.l CODE_279BC4
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.w DATA_21C41A,y
	STA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	LDA.b $9C
	BEQ.b CODE_22B2A0
	JMP.w CODE_22B32C

CODE_22B2A0:
	INC.b !RAM_SMB3_NorSpr081_HammerBro_HorizontalMovementTimer,x
	LDY.b #$06
	LDA.b !RAM_SMB3_NorSpr081_HammerBro_HorizontalMovementTimer,x
	AND.b #$40
	BNE.b CODE_22B2AC
	LDY.b #$FA
CODE_22B2AC:
	STY.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	LDA.b $A7,x
	AND.b #$04
	BNE.b CODE_22B2B8
	STA.b !RAM_SMB3_NorSpr081_HammerBro_WalkingFrameCounter,x
	BEQ.b CODE_22B2EF
CODE_22B2B8:
	LDA.w !RAM_SMB3_NorSpr081_HammerBro_PassThroughGroundTimer,x
	BNE.b CODE_22B2EF
	INC.b !RAM_SMB3_NorSpr081_HammerBro_WalkingFrameCounter,x
	JSL.l CODE_278B67
	LDA.w !RAM_SMB3_NorSpr081_HammerBro_WaitBeforeJumping,x
	BNE.b CODE_22B2EF
	LDA.w !RAM_SMB3_Global_RandomByte02,x
	AND.b #$3E
	ADC.b #$C0
	STA.w !RAM_SMB3_NorSpr081_HammerBro_WaitBeforeJumping,x
	LDY.b #$02
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	BMI.b CODE_22B2E4
	LDY.b #$00
	CMP.b #$30
	BCC.b CODE_22B2E4
	LDA.w !RAM_SMB3_Global_RandomByte02,x
	AND.b #$02
	TAY
CODE_22B2E4:
	LDA.w DATA_21C411,y
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	LDA.w DATA_21C414,y
	STA.w !RAM_SMB3_NorSpr081_HammerBro_PassThroughGroundTimer,x
CODE_22B2EF:
	JSL.l SMB3_HandleNormalSpriteGravity_Main
	JSL.l CODE_279B6C
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	CMP.b #$06
	BNE.b CODE_22B303
	LDA.b #!Define_SMAS_Sound0060_KickShell
	STA.w !RAM_SMB3_Global_SoundCh1
CODE_22B303:
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$07
	BEQ.b CODE_22B30C
	INC.w !RAM_SMB3_NorSpr081_HammerBro_WaitBeforeReadyingHammer,x
CODE_22B30C:
	LDY.b #$3F
	LDA.b $A7,x
	AND.b #$04
	BEQ.b CODE_22B316
	LDY.b #$1F
CODE_22B316:
	TYA
	AND.w !RAM_SMB3_NorSpr081_HammerBro_WaitBeforeReadyingHammer,x
	CMP.b #$1F
	BNE.b CODE_22B32C
	LDA.w !RAM_SMB3_NorSpr081_HammerBro_ThrowAnimationTimer,x
	BNE.b CODE_22B32C
	LDA.b #$0F
	STA.w !RAM_SMB3_NorSpr081_HammerBro_ThrowAnimationTimer,x
	JSL.l CODE_22B366
CODE_22B32C:
	LDY.b #$00
	LDA.b !RAM_SMB3_NorSpr081_HammerBro_WalkingFrameCounter,x
	AND.b #$10
	BEQ.b CODE_22B335
	INY
CODE_22B335:
	LDA.w !RAM_SMB3_NorSpr081_HammerBro_ThrowAnimationTimer,x
	BEQ.b CODE_22B33C
	INY
	INY
CODE_22B33C:
	TYA
	STA.w !RAM_SMB3_NorSpr081_HammerBro_AnimationFrame,x
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	PHA
	CLC
	ADC.b #$08
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	PHA
	ADC.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	JSL.l SMB3_CheckIfSpriteIsHorizontallyOffScreen_Main
	JSL.l SMB3_CheckIfSpriteIsVerticallyOffScreen_Main
	JSL.l CODE_279F52
	PLA
	STA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	PLA
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	JSL.l SMB3_GetNormalSpriteOnScreenPosition_Main
	RTL

CODE_22B366:
	LDA.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,x
	BNE.b CODE_22B3A2
	LDY.b #$05
CODE_22B36D:
	LDA.w !RAM_SMB3_Level_ExtSpr_SpriteID,y
	BEQ.b CODE_22B376
	DEY
	BPL.b CODE_22B36D
	RTL

CODE_22B376:
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	STA.w !RAM_SMB3_Level_ExtSpr_XPosLo,y
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	STA.w !RAM_SMB3_Level_ExtSpr_XPosHi,y
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	STA.w !RAM_SMB3_Level_ExtSpr_YPosLo,y
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	STA.w !RAM_SMB3_Level_ExtSpr_YPosHi,y
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$C6
else
	LDA.b #$D0
endif
	STA.w !RAM_SMB3_Level_ExtSpr_YSpeed,y
	STY.b $00
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.w DATA_21C41C,y
	LDY.b $00
	STA.w !RAM_SMB3_Level_ExtSpr_XSpeed,y
	LDA.b #!Define_SMB3_SpriteID_ExtSpr01_Hammer
	JSR.w CODE_22B3E2
CODE_22B3A2:
	RTL

CODE_22B3A3:
	JSL.l SMB3_FindFreeExtendedSpriteSlot_FixedPriority
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	STA.w !RAM_SMB3_Level_ExtSpr_XPosLo,y
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	STA.w !RAM_SMB3_Level_ExtSpr_XPosHi,y
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	STA.w !RAM_SMB3_Level_ExtSpr_YPosLo,y
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	STA.w !RAM_SMB3_Level_ExtSpr_YPosHi,y
	STY.b $00
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.w DATA_21C41E,y
	PHA
	LDA.w DATA_21C420,y
	LDY.b $00
	STA.w $0597,y
	PLA
	STA.w !RAM_SMB3_Level_ExtSpr_XSpeed,y
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$E4
else
	LDA.b #$EA
endif
	STA.w !RAM_SMB3_Level_ExtSpr_YSpeed,y
	LDA.b #$00
	STA.w $05B5,y
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$28
else
	LDA.b #$40
endif
	STA.w $06D1,y
	LDA.b #!Define_SMB3_SpriteID_ExtSpr02_Boomerang
CODE_22B3E2:
	STA.w !RAM_SMB3_Level_ExtSpr_SpriteID,y
	TXA
	ASL
	ASL
	ASL
	ASL
	ORA.b #$0F
	STA.w $06C7,y
	LDA.b #$00
	STA.w $06BD,y
	RTS

;--------------------------------------------------------------------

SMB3_NorSpr08A_NormalThwomp_Status01:
.Main:
;$22B3F5
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	STA.b !RAM_SMB3_NorSpr08A_NormalThwomp_InitialYPosLo,x
CODE_22B3F9:
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	CLC
	ADC.b #$04
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
CODE_22B400:
	RTL

;--------------------------------------------------------------------

	%ROUTINE_SMB3_NorSpr08A_NormalThwomp_Status02(NULLROM)		; $22B401

;--------------------------------------------------------------------

; Note: Thwomp graphics routine.

CODE_22B489:
	LDA.w $0520,x
	BEQ.b CODE_22B492
	JSL.l CODE_27DF2F
CODE_22B492:
	STZ.w $0679,x
	JSL.l CODE_279F52
	LDA.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,x
	STA.b $DC
	REP.b #$10
	LDY.b $C6,x
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenXPos,x
	CLC
	ADC.b #$10
	STA.w SMB3_OAMBuffer[$04].XDisp,y
	STA.w SMB3_OAMBuffer[$05].XDisp,y
	STA.w SMB3_OAMBuffer[$06].XDisp,y
	STA.w SMB3_OAMBuffer[$07].XDisp,y
	LDA.w !RAM_SMB3_Level_NorSpr_YOffscreenFlag,x
	STA.b $00
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenYPos,x
	LSR.b $00
	BCS.b CODE_22B4C9
	PHA
	STA.w SMB3_OAMBuffer[$04].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$06].YDisp,y
	PLA
CODE_22B4C9:
	LSR.b $00
	BCS.b CODE_22B4D9
	CLC
	ADC.b #$10
	STA.w SMB3_OAMBuffer[$05].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$07].YDisp,y
CODE_22B4D9:
	LDA.w SMB3_OAMBuffer[$00].Prop,y
	ORA.b #$40
	STA.w SMB3_OAMBuffer[$04].Prop,y
	STA.w SMB3_OAMBuffer[$05].Prop,y
	STA.w SMB3_OAMBuffer[$06].Prop,y
	STA.w SMB3_OAMBuffer[$07].Prop,y
	LDA.b #$B0
	STA.w SMB3_OAMBuffer[$04].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$06].Tile,y
	LDA.b #$BA
	STA.w SMB3_OAMBuffer[$05].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$07].Tile,y
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b $DC
	ROL
	ROL
	ROL
	ROL
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$04].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$05].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$06].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$07].Slot,y
	SEP.b #$10
	RTS

;--------------------------------------------------------------------

SMB3_NorSpr08B_LeftMovingThwomp_Status01:
.Main:
SMB3_NorSpr08C_RightMovingThwomp_Status01:
.Main:
CODE_22B51B:
	JSL.l CODE_22B3F9
	STA.b !RAM_SMB3_NorSprXXX_SidewaysMovingThwomp_InitialXPosLo,x
	RTL

;--------------------------------------------------------------------

SMB3_NorSpr08B_LeftMovingThwomp_Status02:
.Main:
SMB3_NorSpr08C_RightMovingThwomp_Status02:
.Main:
CODE_22B522:
	JSR.w CODE_22B489
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	CMP.b #$06
	BEQ.b CODE_22B53B
	LDA.b $9C
	BNE.b CODE_22B53B
	JSL.l CODE_279BC8
	JSL.l CODE_279B70
	JSR.w CODE_22B53C
CODE_22B53B:
	RTL

CODE_22B53C:
	LDA.b !RAM_SMB3_NorSprXXX_SidewaysMovingThwomp_CurrentState,x
	JSL.l SMB3_ExecutePtr_Absolute

DATA_22B542:
	dw CODE_22B548
	dw CODE_22B575
	dw CODE_22B596

CODE_22B548:
	JSL.l SMB3_CheckIfNormalSpriteOffScreen_Main
	BNE.b CODE_22B574
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.b $0F
	CLC
	ADC.b #$70
	CMP.b #$E8
	BCS.b CODE_22B574
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	SEC
	SBC.b #!Define_SMB3_SpriteID_NorSpr08B_LeftMovingThwomp
	STA.b $00
	CPY.b $00
	BEQ.b CODE_22B574
	TYA
	STA.w !RAM_SMB3_NorSprXXX_SidewaysMovingThwomp_XSpeedIndex,x
	INC.b !RAM_SMB3_NorSprXXX_SidewaysMovingThwomp_CurrentState,x
	STZ.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	LDA.b #$3B
	STA.w !RAM_SMB3_NorSprXXX_SidewaysMovingThwomp_PhaseTimer,x
CODE_22B574:
	RTS

CODE_22B575:
	LDA.w !RAM_SMB3_NorSprXXX_SidewaysMovingThwomp_PhaseTimer,x
	BNE.b CODE_22B581
	INC.b !RAM_SMB3_NorSprXXX_SidewaysMovingThwomp_CurrentState,x
	LDA.b #$40
	STA.w !RAM_SMB3_NorSprXXX_SidewaysMovingThwomp_PhaseTimer,x
CODE_22B581:
	JSL.l CODE_27A7F0
	LDY.w !RAM_SMB3_NorSprXXX_SidewaysMovingThwomp_XSpeedIndex,x
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	CMP.w DATA_21C424,y
	BEQ.b CODE_22B595
	CLC
	ADC.w DATA_21C422,y
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_22B595:
	RTS

CODE_22B596:
	LDA.w !RAM_SMB3_NorSprXXX_SidewaysMovingThwomp_PhaseTimer,x
	BNE.b CODE_22B5B0
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	CMP.b !RAM_SMB3_NorSprXXX_SidewaysMovingThwomp_InitialXPosLo,x
	BNE.b CODE_22B5A4
	STZ.b !RAM_SMB3_NorSprXXX_SidewaysMovingThwomp_CurrentState,x
	RTS

CODE_22B5A4:
	LDY.w !RAM_SMB3_NorSprXXX_SidewaysMovingThwomp_XSpeedIndex,x
	LDA.w DATA_21C426,y
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	JSL.l CODE_27A7F0
CODE_22B5B0:
	RTS

;--------------------------------------------------------------------

SMB3_NorSpr08D_FixedVerticalMovementThwomp_Status01:
.Main:
SMB3_NorSpr08E_FixedDiagonalTLToBRMovementThwomp_Status01:
.Main:
SMB3_NorSpr08F_FixedDiagonalTRToBLMovementThwomp_Status01:
.Main:
;$22B5B1
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	SEC
	SBC.b #!Define_SMB3_SpriteID_NorSpr08D_FixedVerticalMovementThwomp
	TAY
	LDA.w DATA_21C428,y
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	LDA.w DATA_21C42B,y
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	JMP.w CODE_22B3F9

;--------------------------------------------------------------------

SMB3_NorSpr08D_FixedVerticalMovementThwomp_Status02:
.Main:
SMB3_NorSpr08E_FixedDiagonalTLToBRMovementThwomp_Status02:
.Main:
SMB3_NorSpr08F_FixedDiagonalTRToBLMovementThwomp_Status02:
.Main:
;$22B5C5
	JSR.w CODE_22B489
	LDA.b $9C
	BNE.b CODE_22B5D7
	JSL.l CODE_279BC8
	JSL.l CODE_279B70
	JSR.w CODE_22B5D8
CODE_22B5D7:
	RTL

CODE_22B5D8:
	LDA.b !RAM_SMB3_NorSprXXX_FixedMovementThwomp_CurrentState,x
	AND.b #$03
	JSL.l SMB3_ExecutePtr_Absolute

DATA_22B5E0:
	dw CODE_22B5E8
	dw CODE_22B605
	dw CODE_22B5E8
	dw CODE_22B605

CODE_22B5E8:
	LDA.w !RAM_SMB3_NorSprXXX_FixedMovementThwomp_PhaseTimer,x
	BNE.b CODE_22B604
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	JSL.l SMB3_UnnecessaryInvertARt_Main
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	JSL.l SMB3_UnnecessaryInvertARt_Main
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	INC.b !RAM_SMB3_NorSprXXX_FixedMovementThwomp_CurrentState,x
	LDA.b #$80
	STA.w !RAM_SMB3_NorSprXXX_FixedMovementThwomp_PhaseTimer,x
CODE_22B604:
	RTS

CODE_22B605:
	LDA.w !RAM_SMB3_NorSprXXX_FixedMovementThwomp_PhaseTimer,x
	BNE.b CODE_22B611
	INC.b !RAM_SMB3_NorSprXXX_FixedMovementThwomp_CurrentState,x
	LDA.b #$3C
	STA.w !RAM_SMB3_NorSprXXX_FixedMovementThwomp_PhaseTimer,x
CODE_22B611:
	JSL.l CODE_27A7F0
	JSL.l CODE_27A7E5
	RTS

;--------------------------------------------------------------------

SMB3_NorSpr088_YellowWavyCheepCheep_Status02:
.Main:
;$22B61A
	LDA.b $9C
	BNE.b CODE_22B659
	LDA.b #$10
	LDY.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	BNE.b CODE_22B627
	LDA.b #$F0
CODE_22B627:
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	JSL.l CODE_279BB8
	JSL.l CODE_279BC4
	INC.b !RAM_SMB3_NorSpr088_YellowWavyCheepCheep_AnimationFrameCounter,x
	JSL.l CODE_27A7F0
	JSL.l CODE_27A7E5
	LDA.b !RAM_SMB3_NorSpr088_YellowWavyCheepCheep_AnimationFrameCounter,x
	AND.b #$01
	BNE.b CODE_22B655
	LDA.b !RAM_SMB3_NorSpr088_YellowWavyCheepCheep_VerticalMovementDirection,x
	AND.b #$01
	TAY
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	CLC
	ADC.w DATA_21C42E,y
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	CMP.w DATA_21C430,y
	BNE.b CODE_22B655
	INC.b !RAM_SMB3_NorSpr088_YellowWavyCheepCheep_VerticalMovementDirection,x
CODE_22B655:
	JSL.l CODE_279B70
CODE_22B659:
	LDA.b !RAM_SMB3_NorSpr088_YellowWavyCheepCheep_AnimationFrameCounter,x
	LSR
	LSR
	LSR
	AND.b #$01
	STA.w !RAM_SMB3_NorSpr088_YellowWavyCheepCheep_AnimationFrame,x
	JSR.w CODE_22D34B
	JSR.w CODE_22CBA6
	RTL

;--------------------------------------------------------------------

SMB3_NorSpr087_FireBro_Status01:
.Main:
;$22B66A
	LDA.w !RAM_SMB3_Global_RandomByte02,x
	STA.w !RAM_SMB3_NorSpr087_FireBro_WaitBeforeJumpingTimer,x
	LDA.b #$90
	STA.w !RAM_SMB3_NorSpr087_FireBro_WaitBeforeSpitting,x
SMB3_NorSpr088_YellowWavyCheepCheep_Status01:
.Main:
	RTL

;--------------------------------------------------------------------

SMB3_NorSpr087_FireBro_Status02:
.Main:
;$22B676
	JSL.l CODE_279BC4
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.w DATA_21C432,y
	STA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	INC.w !RAM_SMB3_NorSpr087_FireBro_WaitBeforeSpitting,x
	LDA.w !RAM_SMB3_NorSpr087_FireBro_WaitBeforeSpitting,x
	CMP.b #$A0
	BNE.b CODE_22B69F
	STZ.w !RAM_SMB3_NorSpr087_FireBro_WaitBeforeSpitting,x
	LDA.b #$50
	LDY.w !RAM_SMB3_Global_RandomByte02,x
	BPL.b CODE_22B69A
	LDA.b #$30
CODE_22B69A:
	STA.w !RAM_SMB3_NorSpr087_FireBro_SpitAnimationTimer,x
	STZ.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_22B69F:
	LDY.b #$00
	LDA.w !RAM_SMB3_NorSpr087_FireBro_WalkingFrameCounter,x
	AND.b #$08
	BEQ.b CODE_22B6A9
	INY
CODE_22B6A9:
	LDA.w !RAM_SMB3_NorSpr087_FireBro_SpitAnimationTimer,x
	BEQ.b CODE_22B6C3
	CMP.b #$20
	BNE.b CODE_22B6C1
	LDA.w !RAM_SMB3_Global_RandomByte02,x
	BMI.b CODE_22B6C1
	LDA.b $A7,x
	AND.b #$04
	BEQ.b CODE_22B6C1
	LDA.b #$C8
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_22B6C1:
	LDY.b #$02
CODE_22B6C3:
	TYA
	STA.w !RAM_SMB3_NorSpr087_FireBro_AnimationFrame,x
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	PHA
	CLC
	ADC.b #$08
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	PHA
	ADC.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	JSL.l CODE_279F52
	PLA
	STA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	PLA
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	JSL.l SMB3_GetNormalSpriteOnScreenPosition_Main
	LDA.b $9C
	BNE.b CODE_22B715
	JSL.l CODE_279B6C
	LDA.w !RAM_SMB3_NorSpr087_FireBro_SpitAnimationTimer,x
	CMP.b #$40
	BCS.b CODE_22B6FC
	AND.b #$1F
	CMP.b #$0F
	BNE.b CODE_22B6FC
	JSR.w CODE_22B7AB
CODE_22B6FC:
	LDA.w !RAM_SMB3_NorSpr087_FireBro_SpitAnimationTimer,x
	BNE.b CODE_22B705
	LDA.b !RAM_SMB3_NorSpr087_FireBro_IsJumpingFlag,x
	BEQ.b CODE_22B716
CODE_22B705:
	JSL.l SMB3_HandleNormalSpriteGravity_Main
	LDA.b $A7,x
	AND.b #$04
	BEQ.b CODE_22B715
	STZ.b !RAM_SMB3_NorSpr087_FireBro_IsJumpingFlag,x
	JSL.l CODE_278B67
CODE_22B715:
	RTL

CODE_22B716:
	LDA.w !RAM_SMB3_NorSpr087_FireBro_PhaseTimer,x
	BEQ.b CODE_22B71E
	DEC.w !RAM_SMB3_NorSpr087_FireBro_PhaseTimer,x
CODE_22B71E:
	INC.w !RAM_SMB3_NorSpr087_FireBro_WaitBeforeJumpingTimer,x
	LDA.w !RAM_SMB3_NorSpr087_FireBro_WaitBeforeJumpingTimer,x
	AND.b #$1F
	BNE.b CODE_22B73E
	LDA.w !RAM_SMB3_Global_RandomByte02,x
	AND.b #$01
	BNE.b CODE_22B73E
	LDA.b $A7,x
	AND.b #$04
	BEQ.b CODE_22B73E
	INC.b !RAM_SMB3_NorSpr087_FireBro_IsJumpingFlag,x
	LDA.b #$D8
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	STZ.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	RTL

CODE_22B73E:
	JSR.w CODE_22B742
	RTL

CODE_22B742:
	LDA.b !RAM_SMB3_NorSpr087_FireBro_CurrentState,x
	AND.b #$03
	JSL.l SMB3_ExecutePtr_Absolute

DATA_22B74A:
	dw CODE_22B752
	dw CODE_22B765
	dw CODE_22B773
	dw CODE_22B765

CODE_22B752:
	LDA.w !RAM_SMB3_NorSpr087_FireBro_PhaseTimer,x
	BNE.b CODE_22B75E
	INC.b !RAM_SMB3_NorSpr087_FireBro_CurrentState,x
	LDA.b #$10
	STA.w !RAM_SMB3_NorSpr087_FireBro_PhaseTimer,x
CODE_22B75E:
	LDA.b #$F8
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	JMP.w CODE_22B783

CODE_22B765:
	LDA.w !RAM_SMB3_NorSpr087_FireBro_PhaseTimer,x
	BNE.b CODE_22B771
	INC.b !RAM_SMB3_NorSpr087_FireBro_CurrentState,x
	LDA.b #$20
	STA.w !RAM_SMB3_NorSpr087_FireBro_PhaseTimer,x
CODE_22B771:
	BRA.b CODE_22B799

CODE_22B773:
	LDA.w !RAM_SMB3_NorSpr087_FireBro_PhaseTimer,x
	BNE.b CODE_22B77F
	INC.b !RAM_SMB3_NorSpr087_FireBro_CurrentState,x
	LDA.b #$10
	STA.w !RAM_SMB3_NorSpr087_FireBro_PhaseTimer,x
CODE_22B77F:
	LDA.b #$08
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_22B783:
	LDA.w !RAM_SMB3_NorSpr087_FireBro_PhaseTimer,x
	AND.b #$3F
	BNE.b CODE_22B799
	LDA.w !RAM_SMB3_NorSpr087_FireBro_PhaseTimer,x
	AND.b #$40
	ASL
	ASL
	LDA.b #$E0
	BCC.b CODE_22B797
	LDA.b #$D8
CODE_22B797:
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_22B799:
	JSL.l SMB3_HandleNormalSpriteGravity_Main
	LDA.b $A7,x
	AND.b #$04
	BEQ.b CODE_22B7AA
	INC.w !RAM_SMB3_NorSpr087_FireBro_WalkingFrameCounter,x
	JSL.l CODE_278B67
CODE_22B7AA:
	RTS

CODE_22B7AB:
	JSL.l SMB3_FindFreeExtendedSpriteSlot_FixedPriority
	LDA.b #!Define_SMAS_Sound0063_ShootFireball
	STA.w !RAM_SMB3_Global_SoundCh3
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	CLC
	ADC.b #$04
	STA.w !RAM_SMB3_Level_ExtSpr_XPosLo,y
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	ADC.b #$00
	STA.w !RAM_SMB3_Level_ExtSpr_XPosHi,y
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	CLC
	ADC.b #$03
	STA.w !RAM_SMB3_Level_ExtSpr_YPosLo,y
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	ADC.b #$00
	STA.w !RAM_SMB3_Level_ExtSpr_YPosHi,y
	LDA.b #$20
	STA.w !RAM_SMB3_Level_ExtSpr_YSpeed,y
	STY.b $00
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.w DATA_21C434,y
	LDY.b $00
	STA.w !RAM_SMB3_Level_ExtSpr_XSpeed,y
	LDA.b #!Define_SMB3_SpriteID_ExtSpr0C_FireBroFire
	STA.w !RAM_SMB3_Level_ExtSpr_SpriteID,y
	LDA.b #$00
	STA.w $06C7,y
	RTS

;--------------------------------------------------------------------

SMB3_NorSpr086_SledgeBro_Status01:
.Main:
;$22B7F0
	INC.w $1FF9,x
	RTL

;--------------------------------------------------------------------

SMB3_NorSpr086_SledgeBro_Status02:
.Main:
;$22B7F4
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	CMP.b #$02
	BEQ.b CODE_22B7FF
	JSR.w CODE_22B943
	RTL

CODE_22B7FF:
	LDA.w !RAM_SMB3_NorSpr086_SledgeBro_StunPlayerTimer,x
	BEQ.b CODE_22B81C
	LDA.b $A6
	BNE.b CODE_22B81C
	INC.b $A6
	LDA.b #$20
	STA.w !RAM_SMB3_Level_Player_DisableControlsTimer
	LDA.b #$F0
	STA.b !RAM_SMB3_Level_Player_YSpeed
	DEC.b !RAM_SMB3_Level_Player_YPosLo
	LDY.b !RAM_SMB3_Level_Player_YPosLo
	INY
	BNE.b CODE_22B81C
	DEC.b !RAM_SMB3_Level_Player_YPosHi
CODE_22B81C:
	JSL.l CODE_279BC4
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.w DATA_21C436,y
	STA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	LDA.w !RAM_SMB3_NorSpr086_SledgeBro_DisplaySmokeTimer,x
	BEQ.b CODE_22B836
	DEC.w !RAM_SMB3_NorSpr086_SledgeBro_DisplaySmokeTimer,x
	JSL.l CODE_27DF2F
CODE_22B836:
	TXA
	ASL
	ASL
	ASL
	ADC.w $0565
	AND.b #$3F
	ORA.w !RAM_SMB3_NorSpr086_SledgeBro_ThrowAnimationTimer,x
	BNE.b CODE_22B84D
	LDA.b #$10
	STA.w !RAM_SMB3_NorSpr086_SledgeBro_ThrowAnimationTimer,x
	JSL.l CODE_22B366
CODE_22B84D:
	LDY.b #$00
	LDA.w !RAM_SMB3_NorSpr086_SledgeBro_WalkingFrameCounter,x
	AND.b #$10
	BEQ.b CODE_22B857
	INY
CODE_22B857:
	LDA.w !RAM_SMB3_NorSpr086_SledgeBro_ThrowAnimationTimer,x
	BEQ.b CODE_22B85E
	INY
	INY
CODE_22B85E:
	TYA
	STA.w !RAM_SMB3_NorSpr086_SledgeBro_AnimationFrame,x
	JSR.w CODE_22B943
	LDA.b $9C
	BNE.b CODE_22B8BD
	LDA.b !RAM_SMB3_NorSpr086_SledgeBro_IsJumpingFlag,x
	BEQ.b CODE_22B8BE
	JSL.l CODE_27A7F0
	JSL.l CODE_27A7E5
	JSL.l CODE_278B93
	JSL.l CODE_279B6C
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	BMI.b CODE_22B887
	CMP.b #$70
	BCS.b CODE_22B89B
	BCC.b CODE_22B88C						; Note: This will always branch.

CODE_22B887:
	EOR.b #$FF
	CLC
	ADC.b #$01
CODE_22B88C:
	LSR
	LSR
	LDY.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	BPL.b CODE_22B894
	LSR
	LSR
CODE_22B894:
	CLC
	ADC.b #$01
	ADC.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_22B89B:
	LDA.b $A7,x
	AND.b #$04
	BEQ.b CODE_22B8BD
	STZ.b !RAM_SMB3_NorSpr086_SledgeBro_IsJumpingFlag,x
	LDA.b #$0C
	STA.w !RAM_SMB3_Level_ShakeLayer1Timer
	STA.w !RAM_SMB3_NorSpr086_SledgeBro_DisplaySmokeTimer,x
	LDA.b #!Define_SMAS_Sound0063_BulletShoot
	STA.w !RAM_SMB3_Global_SoundCh3
	JSL.l CODE_278B67
	LDA.b $A6
	BNE.b CODE_22B8BD
	LDA.b #$40
	STA.w !RAM_SMB3_NorSpr086_SledgeBro_StunPlayerTimer,x
CODE_22B8BD:
	RTL

CODE_22B8BE:
	LDA.w !RAM_SMB3_NorSpr086_SledgeBro_PhaseTimer,x
	BEQ.b CODE_22B8C6
	DEC.w !RAM_SMB3_NorSpr086_SledgeBro_PhaseTimer,x
CODE_22B8C6:
	TXA
	ASL
	ASL
	ASL
	ASL
	ADC.w $0565
	AND.b #$7F
	BNE.b CODE_22B8E2
	LDA.w !RAM_SMB3_Global_RandomByte02,x
	AND.b #$03
	BEQ.b CODE_22B8E2
	INC.b !RAM_SMB3_NorSpr086_SledgeBro_IsJumpingFlag,x
	LDA.b #$A8
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	STZ.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	RTL

CODE_22B8E2:
	JSR.w CODE_22B8E6
	RTL

CODE_22B8E6:
	LDA.b !RAM_SMB3_NorSpr086_SledgeBro_CurrentState,x
	AND.b #$03
	JSL.l SMB3_ExecutePtr_Absolute

DATA_22B8EE:
	dw CODE_22B8F6
	dw CODE_22B908
	dw CODE_22B91D
	dw CODE_22B908

CODE_22B8F6:
	LDA.w !RAM_SMB3_NorSpr086_SledgeBro_PhaseTimer,x
	BNE.b CODE_22B902
	INC.b !RAM_SMB3_NorSpr086_SledgeBro_CurrentState,x
	LDA.b #$20
	STA.w !RAM_SMB3_NorSpr086_SledgeBro_PhaseTimer,x
CODE_22B902:
	LDA.b #$FC
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	BRA.b CODE_22B92D

CODE_22B908:
	LDA.w !RAM_SMB3_NorSpr086_SledgeBro_PhaseTimer,x
	BNE.b CODE_22B914
	INC.b !RAM_SMB3_NorSpr086_SledgeBro_CurrentState,x
	LDA.b #$40
	STA.w !RAM_SMB3_NorSpr086_SledgeBro_PhaseTimer,x
CODE_22B914:
	JSL.l CODE_278B93
	JSL.l CODE_279B6C
	RTS

CODE_22B91D:
	LDA.w !RAM_SMB3_NorSpr086_SledgeBro_PhaseTimer,x
	BNE.b CODE_22B929
	INC.b !RAM_SMB3_NorSpr086_SledgeBro_CurrentState,x
	LDA.b #$20
	STA.w !RAM_SMB3_NorSpr086_SledgeBro_PhaseTimer,x
CODE_22B929:
	LDA.b #$04
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_22B92D:
	JSL.l SMB3_HandleNormalSpriteGravity_Main
	JSL.l CODE_279B6C
	LDA.b $A7,x
	AND.b #$04
	BEQ.b CODE_22B942
	INC.w !RAM_SMB3_NorSpr086_SledgeBro_WalkingFrameCounter,x
	JSL.l CODE_278B67
CODE_22B942:
	RTS

CODE_22B943:
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	PHA
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	PHA
	LDA.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,x
	STA.w $1CEF
	LDA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	AND.b #$40
	BEQ.b CODE_22B966
	ASL.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,x
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	CLC
	ADC.b #$08
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	ADC.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
CODE_22B966:
	JSL.l CODE_279F52
	PLA
	STA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	PLA
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	JSL.l SMB3_GetNormalSpriteOnScreenPosition_Main
	LDY.b #$00
	LDA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	AND.b #$40
	BEQ.b CODE_22B97E
	INY
CODE_22B97E:
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenXPos,x
	CLC
	ADC.w DATA_21C43A,y
	STA.b $01
	REP.b #$10
	LDY.b $C6,x
	LDA.b $01
	STA.w SMB3_OAMBuffer[$04].XDisp,y
	STA.w SMB3_OAMBuffer[$05].XDisp,y
	STA.w SMB3_OAMBuffer[$06].XDisp,y
	STA.w SMB3_OAMBuffer[$07].XDisp,y
	LDA.w !RAM_SMB3_Level_NorSpr_YOffscreenFlag,x
	STA.b $00
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenYPos,x
	LSR.b $00
	BCS.b CODE_22B9AC
	STA.w SMB3_OAMBuffer[$04].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$06].YDisp,y
CODE_22B9AC:
	LSR.b $00
	BCS.b CODE_22B9BC
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$05].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$07].YDisp,y
CODE_22B9BC:
	LDA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$04].Prop,y
	STA.w SMB3_OAMBuffer[$05].Prop,y
	STA.w SMB3_OAMBuffer[$06].Prop,y
	STA.w SMB3_OAMBuffer[$07].Prop,y
	LDA.b #$00
	CMP.w !RAM_SMB3_NorSpr086_SledgeBro_ThrowAnimationTimer,x
	LDA.b #$5E
	BCS.b CODE_22B9D6
	LDA.b #$54
CODE_22B9D6:
	STA.w SMB3_OAMBuffer[$04].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$06].Tile,y
	LDA.w !RAM_SMB3_NorSpr086_SledgeBro_AnimationFrame,x
	LSR
	LDA.b #$5A
	BCS.b CODE_22B9E7
	LDA.b #$6C
CODE_22B9E7:
	STA.w SMB3_OAMBuffer[$05].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$07].Tile,y
	LDA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	BPL.b CODE_22BA0F
	LDA.w SMB3_OAMBuffer[$04].Tile,y
	PHA
	LDA.w SMB3_OAMBuffer[$07].Tile,y
	STA.w SMB3_OAMBuffer[$04].Tile,y
	PLA
	STA.w SMB3_OAMBuffer[$07].Tile,y
	LDA.w SMB3_OAMBuffer[$06].Tile,y
	PHA
	LDA.w SMB3_OAMBuffer[$05].Tile,y
	STA.w SMB3_OAMBuffer[$06].Tile,y
	PLA
	STA.w SMB3_OAMBuffer[$05].Tile,y
CODE_22BA0F:
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	AND.b #$40
	BEQ.b CODE_22BA25
	LDA.w $1CEF
	ROL
	ROL
	BRA.b CODE_22BA2C

CODE_22BA25:
	LDA.w $1CEF
	ROL
	ROL
	ROL
	ROL
CODE_22BA2C:
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$04].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$05].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$06].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$07].Slot,y
	SEP.b #$10
	RTS

;--------------------------------------------------------------------

SMB3_NorSpr085_GreenSpinyEgg_Status02:
.Main:
;$22BA3D
	LDA.b $9C
	BNE.b CODE_22BAAD
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	CMP.b #$02
	BNE.b CODE_22BAAD
	JSL.l CODE_279BC4
	LDA.w $06B7,x
	PHA
	JSL.l SMB3_HandleNormalSpriteGravity_Main
	PLA
	BNE.b CODE_22BA61
	LDA.w $06B7,x
	BEQ.b CODE_22BA61
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	ASL
	ROR.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_22BA61:
	LDA.b $A7,x
	AND.b #$03
	BEQ.b CODE_22BA6B
	JSL.l CODE_279906
CODE_22BA6B:
	LDA.b $A7,x
	AND.b #$04
	BEQ.b CODE_22BA9C
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	PHA
	JSL.l CODE_278B67
	PLA
	CMP.b #$10
	BMI.b CODE_22BA91
	LSR
	EOR.b #$FF
	CLC
	ADC.b #$01
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.w DATA_21C43C,y
	STA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	BRA.b CODE_22BA9C

CODE_22BA91:
	LDA.b #$0C
	LDY.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	BNE.b CODE_22BA9A
	LDA.b #$F4
CODE_22BA9A:
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_22BA9C:
	LDA.b $A7,x
	AND.b #$08
	BEQ.b CODE_22BAA6
	LDA.b #$10
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_22BAA6:
	JSL.l CODE_279B6C
	JSR.w CODE_22C3F9
CODE_22BAAD:
	LDY.b #$00
	LDA.w $0565
	AND.b #$08
	BEQ.b CODE_22BAB7
	INY
CODE_22BAB7:
	TYA
	STA.w $0669,x
	JSL.l SMB3_CheckIfSpriteIsHorizontallyOffScreen_Main
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	XBA
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	REP.b #$20
	SEC
	SBC.w $0210
	SEP.b #$20
	XBA
	BPL.b CODE_22BAD2
	EOR.b #$FF
	INC
CODE_22BAD2:
	CMP.b #$02
	BCS.b CODE_22BADA
	JSL.l CODE_22BADB
CODE_22BADA:
	RTL

CODE_22BADB:
	JSR.w CODE_22CBA0
	REP.b #$10
	LDY.b $C6,x
	LDA.w SMB3_OAMBuffer[$00].Prop,y
	PHA
	AND.b #$7F
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$02].Prop,y
	ORA.b #$40
	STA.w SMB3_OAMBuffer[$01].Prop,y
	STA.w SMB3_OAMBuffer[$03].Prop,y
	PLA
	AND.b #$80
	BEQ.b CODE_22BB17
	LDA.w SMB3_OAMBuffer[$00].Tile,y
	PHA
	LDA.w SMB3_OAMBuffer[$02].Tile,y
	STA.w SMB3_OAMBuffer[$00].Tile,y
	PLA
	STA.w SMB3_OAMBuffer[$02].Tile,y
	LDA.w SMB3_OAMBuffer[$01].Tile,y
	PHA
	LDA.w SMB3_OAMBuffer[$03].Tile,y
	STA.w SMB3_OAMBuffer[$01].Tile,y
	PLA
	STA.w SMB3_OAMBuffer[$03].Tile,y
CODE_22BB17:
	SEP.b #$10
	RTL

;--------------------------------------------------------------------

SMB3_NorSpr084_RedSpinyEgg_Status02:
.Main:
;$22BB1A
	LDA.b $9C
	BNE.b CODE_22BB7C
	JSL.l CODE_279BC4
	LDA.b !RAM_SMB3_Global_FrameCounter
	LSR
	LSR
	LSR
	AND.b #$01
	STA.w !RAM_SMB3_NorSpr084_RedSpinyEgg_AnimationFrame,x
	LDA.w $06B7,x
	BEQ.b CODE_22BB40
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	PHA
	ASL
	ROR.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	JSL.l SMB3_HandleNormalSpriteGravity_Main
	PLA
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	BRA.b CODE_22BB56

CODE_22BB40:
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	CMP.b #$30
	BPL.b CODE_22BB4A
	INC.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	INC.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_22BB4A:
	JSL.l CODE_27A7E5
	JSL.l CODE_27A7F0
	JSL.l CODE_278B9B
CODE_22BB56:
	JSL.l CODE_279B6C
	LDA.b $A7,x
	AND.b #$04
	BEQ.b CODE_22BB7C
	LDA.b #!Define_SMB3_SpriteID_NorSpr071_Spiny
	STA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.w DATA_21C43E,y
	STA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	JSL.l CODE_278B67
	LDA.w $06B7,x
	BNE.b CODE_22BB7C
	LDA.b #$F2
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_22BB7C:
	LDA.b $A7,x
	AND.b #$03
	BEQ.b CODE_22BB86
	JSL.l CODE_279906
CODE_22BB86:
	JSL.l SMB3_CheckIfSpriteIsHorizontallyOffScreen_Main
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	XBA
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	REP.b #$20
	SEC
	SBC.w $0210
	SEP.b #$20
	XBA
	BPL.b CODE_22BB9D
	EOR.b #$FF
	INC
CODE_22BB9D:
	CMP.b #$02
	BCS.b CODE_22BBC8
	JSR.w CODE_22CBA0
	REP.b #$10
	LDY.b $C6,x
	LDA.w SMB3_OAMBuffer[$01].Prop,y
	ORA.b #$80
	STA.w SMB3_OAMBuffer[$01].Prop,y
	LDA.w SMB3_OAMBuffer[$03].Prop,y
	ORA.b #$80
	STA.w SMB3_OAMBuffer[$03].Prop,y
	LDA.w SMB3_OAMBuffer[$01].Tile,y
	PHA
	LDA.w SMB3_OAMBuffer[$03].Tile,y
	STA.w SMB3_OAMBuffer[$01].Tile,y
	PLA
	STA.w SMB3_OAMBuffer[$03].Tile,y
	SEP.b #$10
CODE_22BBC8:
	RTL

;--------------------------------------------------------------------

	%ROUTINE_SMB3_NorSpr083_Lakitu_Status01(NULLROM)			; $22BBC9
	%ROUTINE_SMB3_NorSpr083_Lakitu_Status02(NULLROM)			; $22BBD9

;--------------------------------------------------------------------

SMB3_NorSpr073_HoppingRedGoomba_Status02:
.Main:
;$22BDDB
	JSL.l CODE_279BC4
	LDA.b $9C
	BEQ.b CODE_22BDE7
	JSR.w CODE_22BE70
	RTL

CODE_22BDE7:
	LDY.b #$08
	LDA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	BNE.b CODE_22BDF0
	LDY.b #$F8
CODE_22BDF0:
	STY.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	JSL.l SMB3_HandleNormalSpriteGravity_Main
	DEC.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	LDA.b !RAM_SMB3_Global_FrameCounter
	LSR
	LSR
	LSR
	AND.b #$01
	STA.w !RAM_SMB3_NorSpr073_HoppingRedGoomba_AnimationFrame,x
	JSL.l SMB3_CheckIfSpriteIsHorizontallyOffScreen_Main
	JSR.w CODE_22BE70
	INC.b !RAM_SMB3_NorSpr073_HoppingRedGoomba_TurnAroundTimer,x
	LDA.b !RAM_SMB3_NorSpr073_HoppingRedGoomba_HopCounter,x
	BNE.b CODE_22BE19
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	BPL.b CODE_22BE19
	INC.w !RAM_SMB3_NorSpr073_HoppingRedGoomba_WingAnimationFrameCounter,x
	INC.w !RAM_SMB3_NorSpr073_HoppingRedGoomba_WingAnimationFrameCounter,x
CODE_22BE19:
	INC.w !RAM_SMB3_NorSpr073_HoppingRedGoomba_WingAnimationFrameCounter,x
	LDA.b $A7,x
	AND.b #$08
	BEQ.b CODE_22BE26
	LDA.b #$01
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_22BE26:
	LDA.b $A7,x
	AND.b #$04
	BEQ.b CODE_22BE61
	LDA.b !RAM_SMB3_NorSpr073_HoppingRedGoomba_TurnAroundTimer,x
	AND.b #$3F
	BNE.b CODE_22BE3C
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.w DATA_21C456,y
	STA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
CODE_22BE3C:
	JSL.l CODE_278B67
	LDA.b !RAM_SMB3_NorSpr073_HoppingRedGoomba_HopCounter,x
	BNE.b CODE_22BE47
	STZ.w !RAM_SMB3_NorSpr073_HoppingRedGoomba_WingAnimationFrameCounter,x
CODE_22BE47:
	LDA.w !RAM_SMB3_NorSpr073_HoppingRedGoomba_WaitBeforeNext4Hops,x
	BNE.b CODE_22BE61
	INC.b !RAM_SMB3_NorSpr073_HoppingRedGoomba_HopCounter,x
	LDY.b #$F0
	LDA.b !RAM_SMB3_NorSpr073_HoppingRedGoomba_HopCounter,x
	CMP.b #$04
	BNE.b CODE_22BE5F
	STZ.b !RAM_SMB3_NorSpr073_HoppingRedGoomba_HopCounter,x
	LDA.b #$50
	STA.w !RAM_SMB3_NorSpr073_HoppingRedGoomba_WaitBeforeNext4Hops,x
	LDY.b #$D0
CODE_22BE5F:
	STY.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_22BE61:
	LDA.b $A7,x
	AND.b #$03
	BEQ.b CODE_22BE6B
	JSL.l CODE_27990E
CODE_22BE6B:
	JSL.l CODE_279B6C
	RTL

;--------------------------------------------------------------------

CODE_22BE70:
	JSR.w CODE_22CBA0
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	XBA
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	REP.b #$30
	SEC
	SBC.w $0210
	PHA
	SEC
	SBC.w #$0002
	STA.b $D8
	PLA
	CLC
	ADC.w #$000A
	STA.b $DA
	SEP.b #$20
	LDY.b $C6,x
	LDA.w SMB3_OAMBuffer[$00].YDisp,y
	CMP.b #$F0
	BEQ.b CODE_22BEA3
	SEC
	SBC.b #$0A
	STA.w SMB3_OAMBuffer[$04].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$06].YDisp,y
CODE_22BEA3:
	LDA.w SMB3_OAMBuffer[$01].YDisp,y
	CMP.b #$F0
	BEQ.b CODE_22BEB6
	SEC
	SBC.b #$0A
	STA.w SMB3_OAMBuffer[$05].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$07].YDisp,y
CODE_22BEB6:
	LDA.w SMB3_OAMBuffer[$00].XDisp,y
	SEC
	SBC.b #$02
	STA.w SMB3_OAMBuffer[$04].XDisp,y
	STA.w SMB3_OAMBuffer[$06].XDisp,y
	LDA.w SMB3_OAMBuffer[$01].XDisp,y
	CLC
	ADC.b #$02
	STA.w SMB3_OAMBuffer[$05].XDisp,y
	STA.w SMB3_OAMBuffer[$07].XDisp,y
	LDA.b #$60
	STA.w SMB3_OAMBuffer[$04].Prop,y
	STA.w SMB3_OAMBuffer[$06].Prop,y
	LDA.b #$20
	STA.w SMB3_OAMBuffer[$05].Prop,y
	STA.w SMB3_OAMBuffer[$07].Prop,y
	LDA.w !RAM_SMB3_NorSpr073_HoppingRedGoomba_WingAnimationFrameCounter,x
	LDX.w #$00CC
	AND.b #$08
	BNE.b CODE_22BEEB
	LDX.w #$00CE
CODE_22BEEB:
	TXA
	STA.w SMB3_OAMBuffer[$04].Tile,y
	STA.w SMB3_OAMBuffer[$05].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$06].Tile,y
	STA.w SMB3_OAMBuffer[$07].Tile,y
	REP.b #$20
	TYA
	CLC
	ADC.w #$0010
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b $D9
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$02].Slot,y
	LDA.b $DB
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$03].Slot,y
	SEP.b #$10
	LDX.b $9B
	RTS

;--------------------------------------------------------------------

SMB3_NorSpr074_Paragoomba_Status02:
.Main:
;$22BF1E
	JSL.l CODE_279BC4
	LDA.b $9C
	BEQ.b CODE_22BF2A
	JSR.w CODE_22BE70
	RTL

CODE_22BF2A:
	LDY.w $07B5
	INY
	INY
	LDA.w DATA_21C45E,y
	LDY.b #$00
	AND.b !RAM_SMB3_NorSpr074_Paragoomba_TurnAroundOnGroundTimer,x
	BEQ.b CODE_22BF39
	INY
CODE_22BF39:
	TYA
	STA.w !RAM_SMB3_NorSpr074_Paragoomba_AnimationFrame,x
	JSR.w CODE_22BE70
	JSL.l CODE_22BE6B
	JSR.w CODE_22BF48
	RTL

CODE_22BF48:
	LDA.b !RAM_SMB3_NorSpr074_Paragoomba_CurrentState,x
	JSL.l SMB3_ExecutePtr_Absolute

DATA_22BF4E:
	dw CODE_22BF54
	dw CODE_22BFA5
	dw CODE_22BFD2

CODE_22BF54:
	INC.b !RAM_SMB3_NorSpr074_Paragoomba_TurnAroundOnGroundTimer,x
	LDY.b #$08
	LDA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	BNE.b CODE_22BF5F
	LDY.b #$F8
CODE_22BF5F:
	STY.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	JSL.l SMB3_HandleNormalSpriteGravity_Main
	DEC.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	DEC.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	LDY.b #$08
	LDA.b $A7,x
	AND.b #$04
	BEQ.b CODE_22BF92
	LDA.b !RAM_SMB3_NorSpr074_Paragoomba_TurnAroundOnGroundTimer,x
	AND.b #$3F
	BNE.b CODE_22BF81
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.w DATA_21C456,y
	STA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
CODE_22BF81:
	JSL.l CODE_278B67
	LDY.b #$00
	LDA.w !RAM_SMB3_NorSpr074_Paragoomba_PhaseTimer,x
	BEQ.b CODE_22BF98
	CMP.b #$20
	BCS.b CODE_22BF92
	LDY.b #$08
CODE_22BF92:
	TYA
	STA.w !RAM_SMB3_NorSpr074_Paragoomba_WingAnimationFrameCounter,x
	BRA.b CODE_22BF9A

CODE_22BF98:
	INC.b !RAM_SMB3_NorSpr074_Paragoomba_CurrentState,x
CODE_22BF9A:
	LDA.b $A7,x
	AND.b #$03
	BEQ.b CODE_22BFA4
	JSL.l CODE_27990E
CODE_22BFA4:
	RTS

CODE_22BFA5:
	INC.w !RAM_SMB3_NorSpr074_Paragoomba_WingAnimationFrameCounter,x
	INC.w !RAM_SMB3_NorSpr074_Paragoomba_WingAnimationFrameCounter,x
	INC.w !RAM_SMB3_NorSpr074_Paragoomba_WingAnimationFrameCounter,x
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_Y
	CPY.b #$00
	BNE.b CODE_22BFC8
	LDA.b $0F
	CMP.b #$38
	BCC.b CODE_22BFC8
	INC.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	BNE.b CODE_22BFCC
	INC.b !RAM_SMB3_NorSpr074_Paragoomba_CurrentState,x
	LDA.b #$80
	STA.w !RAM_SMB3_NorSpr074_Paragoomba_PhaseTimer,x
	RTS

CODE_22BFC8:
	LDA.b #$F0
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_22BFCC:
	JSL.l CODE_27A7E5
	BRA.b CODE_22BFFB

CODE_22BFD2:
	LDY.w !RAM_SMB3_NorSpr074_Paragoomba_PhaseTimer,x
	BNE.b CODE_22BFDE
	STZ.b !RAM_SMB3_NorSpr074_Paragoomba_CurrentState,x
	LDA.b #$80
	STA.w !RAM_SMB3_NorSpr074_Paragoomba_PhaseTimer,x
CODE_22BFDE:
	INC.w !RAM_SMB3_NorSpr074_Paragoomba_WingAnimationFrameCounter,x
	INC.w !RAM_SMB3_NorSpr074_Paragoomba_WingAnimationFrameCounter,x
	INC.b !RAM_SMB3_NorSpr074_Paragoomba_VerticalMovementTimer,x
	LDA.b !RAM_SMB3_NorSpr074_Paragoomba_VerticalMovementTimer,x
	AND.b #$1F
	BNE.b CODE_22BFEF
	JSR.w CODE_22C02D
CODE_22BFEF:
	LDY.b #$08
	LDA.b !RAM_SMB3_NorSpr074_Paragoomba_VerticalMovementTimer,x
	AND.b #$10
	BEQ.b CODE_22BFF9
	LDY.b #$F8
CODE_22BFF9:
	STY.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_22BFFB:
	LDY.b #$00
	LDA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	BNE.b CODE_22C003
	INY
CODE_22C003:
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	CMP.w DATA_21C44A,y
	BEQ.b CODE_22C010
	CLC
	ADC.w DATA_21C448,y
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_22C010:
	INC.w !RAM_SMB3_NorSpr074_Paragoomba_TurnAroundInAirTimer,x
	LDA.w !RAM_SMB3_NorSpr074_Paragoomba_TurnAroundInAirTimer,x
	AND.b #$3F
	BNE.b CODE_22C024
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.w DATA_21C456,y
	STA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
CODE_22C024:
	JSL.l CODE_27A7F0
	JSL.l CODE_27A7E5
	RTS

CODE_22C02D:
	LDY.b #$05
	JSL.l SMB3_FindFreeExtendedSpriteSlot_VariablePriority
	LDA.b #!Define_SMB3_SpriteID_ExtSpr06_MicroGoomba
	STA.w !RAM_SMB3_Level_ExtSpr_SpriteID,y
	LDA.b #$00
	STA.w $06C7,y
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	CLC
	ADC.b #$04
	STA.w !RAM_SMB3_Level_ExtSpr_YPosLo,y
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	ADC.b #$00
	STA.w !RAM_SMB3_Level_ExtSpr_YPosHi,y
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	CLC
	ADC.b #$04
	STA.w !RAM_SMB3_Level_ExtSpr_XPosLo,y
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	ADC.b #$00
	STA.w !RAM_SMB3_Level_ExtSpr_XPosHi,y
	LDA.b #$00
	STA.w !RAM_SMB3_Level_ExtSpr_YSpeed,y
	STA.w !RAM_SMB3_Level_ExtSpr_XSpeed,y
	RTS

;--------------------------------------------------------------------

	%ROUTINE_SMB3_NorSpr076_FlyingRedCheepCheep_Status02(NULLROM)		; $22C064
	%ROUTINE_SMB3_NorSpr077_GreenCheepCheep_Status02(NULLROM)		; $22C0A1
	%ROUTINE_SMB3_NorSpr0XX_BulletBills_Status02(NULLROM)			; $22C121

;--------------------------------------------------------------------

ADDR_22C1EF:							; Note: Unreferenced code?
	LDA.b #$10
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	BNE.b CODE_22C1F8					; Note: This will always branch

SMB3_NorSpr07A_GiantGreenKoopa_Status01:
.Main:
SMB3_NorSpr07B_GiantRedKoopa_Status01:
.Main:
SMB3_NorSpr07C_GiantGoomba_Status01:
.Main:
SMB3_NorSpr07E_BouncingGiantGreenParakoopa_Status01:
.Main:
	INC.w $1FF9,x
SMB3_NorSpr06C_GreenKoopa_Status01:
.Main:
SMB3_NorSpr06D_RedKoopa_Status01:
.Main:
SMB3_NorSpr06E_BouncingGreenParakoopa_Status01:
.Main:
SMB3_NorSpr06F_VerticalRedParaKoopa_Status01:
.Main:
SMB3_NorSpr070_BuzzyBeetle_Status01:
.Main:
SMB3_NorSpr071_Spiny_Status01:
.Main:
SMB3_NorSpr072_Goomba_Status01:
.Main:
SMB3_NorSpr073_HoppingRedGoomba_Status01:
.Main
SMB3_NorSpr074_Paragoomba_Status01:
.Main:
CODE_22C1F8:
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.w DATA_21C456,y
	STA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
SMB3_NorSpr076_FlyingRedCheepCheep_Status01:
.Main:
SMB3_NorSpr078_BulletBill_Status01:
.Main:
SMB3_NorSpr079_HomingBill_Status01:
.Main:
SMB3_NorSpr080_HorizontalGreenParakoopa_Status01:
.Main:
SMB3_NorSpr084_RedSpinyEgg_Status01:
.Main:
SMB3_NorSpr085_GreenSpinyEgg_Status01:
.Main:
	RTL

;--------------------------------------------------------------------

SMB3_NorSpr077_GreenCheepCheep_Status01:
.Main:
;$22C203
	INC.w $06B7,x
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.w DATA_21C458,y
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	STZ.w $0689,x
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	SEC
	SBC.b #$30
	STA.w $1CC8,x
	CLC
	ADC.b #$60
	STA.w $1CCD,x
	RTL

;--------------------------------------------------------------------

SMB3_NorSpr06D_RedKoopa_Status02:
.Main:
SMB3_NorSpr07B_GiantRedKoopa_Status02:
.Main:
;$22C221
	JSL.l CODE_279BC4
	LDA.b $68,x
	LSR
	LSR
	LSR
	AND.b #$01
	STA.w $0669,x
	JSR.w CODE_22C48B
	LDA.b $9C
	BNE.b CODE_22C276
	INC.b $68,x
	JSR.w CODE_22C3F9
	LDA.b #$08
	LDY.w $0679,x
	BNE.b CODE_22C244
	LDA.b #$F8
CODE_22C244:
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	JSL.l SMB3_HandleNormalSpriteGravity_Main
	LDA.b $A7,x
	AND.b #$03
	BEQ.b CODE_22C254
	JSL.l CODE_27990E
CODE_22C254:
	LDA.b $A7,x
	AND.b #$04
	BNE.b CODE_22C26E
	LDA.b $4D,x
	BNE.b CODE_22C276
	INC.b $4D,x
	JSL.l CODE_279906
	JSL.l CODE_27A7F0
	JSL.l CODE_27A7F0
	BRA.b CODE_22C272

CODE_22C26E:
	LDA.b #$00
	STA.b $4D,x
CODE_22C272:
	JSL.l CODE_278B67
CODE_22C276:
	JSL.l CODE_279B6C
	RTL

;--------------------------------------------------------------------

SMB3_NorSpr080_HorizontalGreenParakoopa_Status02:
.Main:
;$22C27B
	JSL.l CODE_279BC8
	JSR.w CODE_22C4BF
	LDA.b $9C
	BNE.b CODE_22C2D0
	LDY.b #$40
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	BEQ.b CODE_22C294
	BPL.b CODE_22C290
	LDY.b #$00
CODE_22C290:
	TYA
	STA.w $0679,x
CODE_22C294:
	INC.b $68,x
	LDA.b $68,x
	LSR
	LSR
	LSR
	AND.b #$01
	STA.w $0669,x
	JSL.l CODE_27A7F0
	JSL.l CODE_27A7E5
	LDA.w $0518,x
	BNE.b CODE_22C2D0
	INC.b $4D,x
	LDA.b $4D,x
	AND.b #$03
	BNE.b CODE_22C2D0
	LDA.w $1FD2,x
	AND.b #$01
	TAY
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	CLC
	ADC.w DATA_21C45A,y
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	CMP.w DATA_21C45C,y
	BNE.b CODE_22C2D0
	INC.w $1FD2,x
	LDA.b #$30
	STA.w $0518,x
CODE_22C2D0:
	LDY.b #$02
	LDA.b $68,x
	AND.b #$20
	BEQ.b CODE_22C2DA
	LDY.b #$FE
CODE_22C2DA:
	STY.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	JSL.l CODE_279B70
	RTL

;--------------------------------------------------------------------

SMB3_NorSpr06F_VerticalRedParaKoopa_Status02:
.Main:
;$22C2E1
	JSL.l CODE_279BC4
	JSR.w CODE_22C4BF
	LDA.b $9C
	BNE.b CODE_22C324
	INC.b $68,x
	LDA.b $68,x
	LSR
	LSR
	LSR
	AND.b #$01
	STA.w $0669,x
	JSL.l CODE_27A7E5
	LDA.w $0518,x
	BNE.b CODE_22C324
	INC.b $4D,x
	LDA.b $4D,x
	AND.b #$03
	BNE.b CODE_22C324
	LDA.w $1FD2,x
	AND.b #$01
	TAY
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	CLC
	ADC.w DATA_21C45A,y
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	CMP.w DATA_21C45C,y
	BNE.b CODE_22C324
	INC.w $1FD2,x
	LDA.b #$30
	STA.w $0518,x
CODE_22C324:
	JSL.l CODE_279B70
	RTL

;--------------------------------------------------------------------

SMB3_NorSpr06C_GreenKoopa_Status02:
.Main:
SMB3_NorSpr06E_BouncingGreenParakoopa_Status02:
.Main:
SMB3_NorSpr070_BuzzyBeetle_Status02:
.Main:
SMB3_NorSpr071_Spiny_Status02:
.Main:
SMB3_NorSpr072_Goomba_Status02:
.Main:
SMB3_NorSpr07A_GiantGreenKoopa_Status02:
.Main:
SMB3_NorSpr07C_GiantGoomba_Status02:
.Main:
SMB3_NorSpr07E_BouncingGiantGreenParakoopa_Status02:
.Main:
CODE_22C329:
	JSL.l CODE_279BC4
	LDA.b $9C
	BEQ.b CODE_22C335
	JSR.w CODE_22C48B
	RTL

CODE_22C335:
	LDA.w $0679,x
	ASL
	ASL
	ROL
	AND.b #$01
	TAY
	LDA.w $0776,x
	BPL.b CODE_22C34B
	INY
	INY
	CMP.b #$FE
	BNE.b CODE_22C34B
	INY
	INY
CODE_22C34B:
	LDA.w DATA_21C468,y
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	LDA.b $68,x
	LSR
	LSR
	AND.b #$01
	STA.w $0669,x
	LDA.w $0689,x
	BEQ.b CODE_22C38A
	DEC.w $0689,x
	JSL.l CODE_27A7F0
	JSL.l SMB3_CheckIfSpriteIsHorizontallyOffScreen_Main
	INC.b $68,x
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	XBA
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	REP.b #$20
	SEC
	SBC.w $0210
	SEP.b #$20
	XBA
	BPL.b CODE_22C37E
	EOR.b #$FF
	INC
CODE_22C37E:
	CMP.b #$02
	BCS.b CODE_22C389
	JSR.w CODE_22C48B
	JSL.l CODE_279B70
CODE_22C389:
	RTL

CODE_22C38A:
	JSR.w CODE_22C48B
	JSL.l SMB3_HandleNormalSpriteGravity_Main
	LDA.w $07B5
	STA.w $0776,x
	JSR.w CODE_22C3F9
	LDY.w $07B5
	INY
	INY
	LDA.w $1021,x
	CLC
	ADC.w DATA_21C463,y
	STA.w $1021,x
	BCC.b CODE_22C3AD
	INC.b $68,x
CODE_22C3AD:
	LDA.b $A7,x
	AND.b #$04
	BNE.b CODE_22C3D0
	LDA.b $A7,x
	AND.b #$08
	BEQ.b CODE_22C3BD
	LDA.b #$01
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_22C3BD:
	LDY.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CPY.b #!Define_SMB3_SpriteID_NorSpr06E_BouncingGreenParakoopa
	BEQ.b CODE_22C3CC
	CPY.b #!Define_SMB3_SpriteID_NorSpr07E_BouncingGiantGreenParakoopa
	BEQ.b CODE_22C3CC
	STA.b $68,x
	BRA.b CODE_22C3EA

CODE_22C3CC:
	DEC.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	BRA.b CODE_22C3EA

CODE_22C3D0:
	JSL.l CODE_278B67
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_NorSpr07E_BouncingGiantGreenParakoopa
	BEQ.b CODE_22C3DF
	CMP.b #!Define_SMB3_SpriteID_NorSpr06E_BouncingGreenParakoopa
	BNE.b CODE_22C3EA
CODE_22C3DF:
	LDA.b #$D0
	LDY.w $06B7,x
	BEQ.b CODE_22C3E8
	LDA.b #$E8
CODE_22C3E8:
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_22C3EA:
	LDA.b $A7,x
	AND.b #$03
	BEQ.b CODE_22C3F4
	JSL.l CODE_27990E
CODE_22C3F4:
	JSL.l CODE_279B6C
	RTL

;--------------------------------------------------------------------

CODE_22C3F9:
	TXA
	CLC
	ADC.b !RAM_SMB3_Global_FrameCounter
	LSR
	BCS.b CODE_22C401
CODE_22C400:
	RTS

CODE_22C401:
	LDA.w !RAM_SMB3_Level_NorSpr_YOffscreenFlag,x
	BNE.b CODE_22C400
	LDA.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,x
	AND.b #$C0
	CMP.b #$C0
	BEQ.b CODE_22C48A
	JSL.l CODE_27A43A
	TXA
	BEQ.b CODE_22C48A
	DEX
CODE_22C417:
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	CMP.b #$02
	BEQ.b CODE_22C422
	CMP.b #$03
	BNE.b CODE_22C485
CODE_22C422:
	LDY.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	LDA.w DATA_21AE78,y
	AND.b #$10
	BEQ.b CODE_22C485
	LDA.w $0689,x
	BNE.b CODE_22C485
	LDA.w !RAM_SMB3_Level_NorSpr_YOffscreenFlag,x
	BNE.b CODE_22C485
	LDA.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,x
	AND.b #$C0
	CMP.b #$C0
	BEQ.b CODE_22C485
	JSL.l SMB3_GetNormalSpriteOnScreenPosition_Main
	JSL.l CODE_27A414
	JSL.l CODE_27A460
	BCC.b CODE_22C485
	LDY.b $9B
	LDA.b $5F,x
	SBC.w $005F,y
	PHA
	LDA.b $44,x
	SBC.w $0044,y
	STA.b $00
	ROL.b $01
	PLA
	ADC.b #$80
	LDA.b $00
	ADC.b #$00
	BNE.b CODE_22C485
	LSR.b $01
	LDY.b #$00
	BCS.b CODE_22C46F
	LDY.b #$40
CODE_22C46F:
	TYA
	STA.b $00
	LDY.b $9B
	STA.w $0679,y
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	CMP.b #$02
	BNE.b CODE_22C485
	LDA.b $00
	EOR.b #$40
	STA.w $0679,x
CODE_22C485:
	DEX
	BPL.b CODE_22C417
	LDX.b $9B
CODE_22C48A:
	RTS

;--------------------------------------------------------------------

CODE_22C48B:
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_NorSpr070_BuzzyBeetle
	BCC.b CODE_22C4BF
	CMP.b #!Define_SMB3_SpriteID_NorSpr07A_GiantGreenKoopa
	BCC.b CODE_22C499
	JMP.w CODE_22C71D

CODE_22C499:
	LDY.w $0689,x
	BEQ.b CODE_22C4AF
	LDA.w $0679,x
	PHA
	ORA.b #$10
	STA.w $0679,x
	JSR.w CODE_22CBA0
	PLA
	STA.w $0679,x
	RTS

CODE_22C4AF:
	LDY.w $0418
	LDA.w DATA_21C383,y
	AND.b #$10
	BNE.b CODE_22C4BC
	JMP.w CODE_22CBA6

CODE_22C4BC:
	JMP.w CODE_22CBA0

CODE_22C4BF:
	REP.b #$20
	LDA.b $C6,x
	CLC
	ADC.w #$0020
	STA.b $C6,x
	SEP.b #$20
	LDY.w $0669,x
	LDA.w DATA_21C474,y
	TAY
	JSR.w CODE_22CBA8
	REP.b #$10
	LDY.b $C6,x
	LDA.w $0679,x
	STA.b $01
	LDA.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,x
	STA.b $02
	LDA.w SMB3_OAMBuffer[$00].YDisp,y
	CMP.b #$F0
	BEQ.b CODE_22C546
	SEC
	SBC.b #$08
	STA.w $07E9,y
	LDA.b #$C1
	STA.w $07EA,y
	PHX
	TYX
	LDA.b $01
	AND.b #$40
	BEQ.b CODE_22C501
	INX
	INX
	INX
	INX
CODE_22C501:
	LDA.w SMB3_OAMBuffer[$00].XDisp,x
	STA.w $07E8,y
	REP.b #$20
	TXA
	LSR
	LSR
	TAX
	SEP.b #$20
	LDA.w SMB3_OAMTileSizeBuffer[$00].Slot,x
	STA.b $D8
	PLX
	LDA.w SMB3_OAMBuffer[$00].Prop,y
	AND.b #$F9
	ORA.b #$06
	STA.w $07EB,y
	AND.b #$40
	BNE.b CODE_22C52E
	LDA.w $07EB,y
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$02].Prop,y
	BRA.b CODE_22C537

CODE_22C52E:
	LDA.w $07EB,y
	STA.w SMB3_OAMBuffer[$01].Prop,y
	STA.w SMB3_OAMBuffer[$03].Prop,y
CODE_22C537:
	PHY
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b $D8
	STA.w $0A1A,y
	PLY
CODE_22C546:
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_NorSpr06E_BouncingGreenParakoopa
	BCC.b CODE_22C5B7
	LDA.w SMB3_OAMBuffer[$00].YDisp,y
	CMP.b #$F0
	BEQ.b CODE_22C5B7
	SEC
	SBC.b #$08
	STA.w $07E1,y
	CLC
	ADC.b #$08
	STA.w $07E5,y
	LDA.b #$CC
	STA.b $00
	LDA.b $68,x
	ADC.b #$02
	AND.b #$04
	BEQ.b CODE_22C570
	LDA.b #$CE
	STA.b $00
CODE_22C570:
	LDA.b $00
	STA.w $07E2,y
	INC
	STA.w $07E6,y
	PHX
	TYX
	LDA.b $01
	AND.b #$40
	BNE.b CODE_22C585
	INX
	INX
	INX
	INX
CODE_22C585:
	LDA.w SMB3_OAMBuffer[$00].XDisp,x
	STA.w $07E0,y
	STA.w $07E4,y
	REP.b #$20
	TXA
	LSR
	LSR
	TAX
	SEP.b #$20
	LDA.w SMB3_OAMTileSizeBuffer[$00].Slot,x
	STA.b $D8
	PLX
	LDA.w SMB3_OAMBuffer[$00].Prop,y
	AND.b #$F9
	STA.w $07E3,y
	STA.w $07E7,y
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b $D8
	STA.w $0A18,y
	STA.w $0A19,y
CODE_22C5B7:
	LDY.b $C6,x
	LDA.w SMB3_OAMBuffer[$00].YDisp,y
	CMP.b #$F0
	BEQ.b CODE_22C5C6
	CLC
	ADC.b #$10
	STA.w $07F9,y
CODE_22C5C6:
	LDA.w SMB3_OAMBuffer[$01].YDisp,y
	CMP.b #$F0
	BEQ.b CODE_22C5D3
	CLC
	ADC.b #$10
	STA.w $07FD,y
CODE_22C5D3:
	LDA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w $07F8,y
	LDA.w SMB3_OAMBuffer[$01].XDisp,y
	STA.w $07FC,y
	LDA.w SMB3_OAMBuffer[$00].Prop,y
	AND.b #$F9
	ORA.b #$06
	STA.w $07FB,y
	STA.w $07FF,y
	LDA.w $0669,x
	LDX.w #$0000
	LSR
	BCC.b CODE_22C5F8
	INX
	INX
	INX
CODE_22C5F8:
	LDA.b $01
	BEQ.b CODE_22C5FD
	INX
CODE_22C5FD:
	LDA.w DATA_21C476,x
	STA.w $07FA,y
	LDA.w DATA_21C476+$01,x
	STA.w $07FE,y
	PHY
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w $0A1E,y
	LDA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	STA.w $0A1F,y
	PLY
	LDA.w !RAM_SMB3_Level_IsVerticalLevelFlag
	BEQ.b CODE_22C661
	PHY
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b #$00
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$02].Slot,y
	STA.w $0A1E,y
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$03].Slot,y
	STA.w $0A1F,y
	STA.w $0A1A,y
	SEP.b #$10
	JSL.l CODE_27A19E
	REP.b #$10
	PLY
	LDX.w #$0000
	LDA.w SMB3_OAMBuffer[$00].XDisp,y
	CMP.b #$F8
	BCS.b CODE_22C664
	LDX.w #$0004
	LDA.w SMB3_OAMBuffer[$01].XDisp,y
	CMP.b #$F8
	BCS.b CODE_22C664
CODE_22C661:
	BRL.w CODE_22C718

CODE_22C664:
	STX.b $DC
	REP.b #$20
	TYA
	STA.b $DA
	CLC
	ADC.b $DC
	TAY
	LDA.b $D8
	CLC
	ADC.w #$0020
	STA.b $D8
	CLC
	ADC.b $DC
	TAX
	SEP.b #$20
	LDA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$00].XDisp,x
	STA.w SMB3_OAMBuffer[$02].XDisp,x
	STA.w $07F8,x
	LDA.w SMB3_OAMBuffer[$00].YDisp,y
	STA.w SMB3_OAMBuffer[$00].YDisp,x
	LDA.w SMB3_OAMBuffer[$02].YDisp,y
	STA.w SMB3_OAMBuffer[$02].YDisp,x
	LDA.w $07F9,y
	STA.w $07F9,x
	LDA.w SMB3_OAMBuffer[$00].Tile,y
	STA.w SMB3_OAMBuffer[$00].Tile,x
	LDA.w SMB3_OAMBuffer[$02].Tile,y
	STA.w SMB3_OAMBuffer[$02].Tile,x
	LDA.w $07FA,y
	STA.w $07FA,x
	LDA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$00].Prop,x
	LDA.w SMB3_OAMBuffer[$02].Prop,y
	STA.w SMB3_OAMBuffer[$02].Prop,x
	LDA.w $07FB,y
	STA.w $07FB,x
	REP.b #$20
	TXA
	LSR
	LSR
	TAX
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b #$00
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,x
	STA.w SMB3_OAMTileSizeBuffer[$02].Slot,x
	STA.w $0A1E,x
	INC
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$02].Slot,y
	STA.w $0A1E,y
	LDX.b $D8
	LDY.b $DA
	LDA.w $07E8,y
	CMP.b #$F8
	BCC.b CODE_22C718
	LDA.w $07E8,y
	STA.w $07E8,x
	LDA.w $07E9,y
	STA.w $07E9,x
	LDA.w $07EA,y
	STA.w $07EA,x
	LDA.w $07EB,y
	STA.w $07EB,x
	REP.b #$20
	TXA
	LSR
	LSR
	TAX
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b #$00
	STA.w $0A1A,x
	INC
	STA.w $0A1A,y
CODE_22C718:
	SEP.b #$10
	LDX.b $9B
	RTS

CODE_22C71D:
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_NorSpr07C_GiantGoomba
	BNE.b CODE_22C741
	LDA.w $0679,x
	PHA
	AND.b #$BF
	STA.b $00
	LDA.b $68,x
	AND.b #$04
	ASL
	ASL
	ASL
	ASL
	ORA.b $00
	STA.w $0679,x
	JSR.w CODE_22C741
	PLA
	STA.w $0679,x
	RTS

CODE_22C741:
	LDA.b $5F,x
	PHA
	LDA.b $44,x
	PHA
	LDA.b $71,x
	PHA
	CLC
	LDY.w $0679,x
	BMI.b CODE_22C752
	ADC.b #$08
CODE_22C752:
	STA.b $71,x
	LDA.b $56,x
	PHA
	ADC.b #$00
	STA.b $56,x
	LDA.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,x
	STA.w $1CEF
	LDA.w $0679,x
	AND.b #$40
	BEQ.b CODE_22C778
	ASL.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,x
	LDA.b $5F,x
	CLC
	ADC.b #$08
	STA.b $5F,x
	LDA.b $44,x
	ADC.b #$00
	STA.b $44,x
CODE_22C778:
	JSL.l CODE_279F52
	PLA
	STA.b $56,x
	PLA
	STA.b $71,x
	PLA
	STA.b $44,x
	PLA
	STA.b $5F,x
	JSL.l SMB3_GetNormalSpriteOnScreenPosition_Main
	LDY.b #$00
	LDA.w $0679,x
	AND.b #$40
	BEQ.b CODE_22C796
	INY
CODE_22C796:
	SEC
	LDA.w $06AB,x
	BEQ.b CODE_22C79D
	LSR
CODE_22C79D:
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenXPos,x
	SBC.b #$00
	CLC
	ADC.w DATA_21C43A,y
	STA.b $01
	REP.b #$10
	LDY.b $C6,x
	LDA.b $01
	STA.w SMB3_OAMBuffer[$04].XDisp,y
	STA.w SMB3_OAMBuffer[$05].XDisp,y
	STA.w SMB3_OAMBuffer[$06].XDisp,y
	STA.w SMB3_OAMBuffer[$07].XDisp,y
	LDA.w !RAM_SMB3_Level_NorSpr_YOffscreenFlag,x
	STA.b $00
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenYPos,x
	CLC
	ADC.b #$08
	LSR.b $00
	BCS.b CODE_22C7D0
	STA.w SMB3_OAMBuffer[$04].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$06].YDisp,y
CODE_22C7D0:
	LSR.b $00
	BCS.b CODE_22C7DF
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$05].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$07].YDisp,y
CODE_22C7DF:
	LDA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$04].Prop,y
	STA.w SMB3_OAMBuffer[$05].Prop,y
	STA.w SMB3_OAMBuffer[$06].Prop,y
	STA.w SMB3_OAMBuffer[$07].Prop,y
	LDA.w $0679,x
	BPL.b CODE_22C814
	LDA.w SMB3_OAMBuffer[$04].YDisp,y
	CMP.b #$F0
	BEQ.b CODE_22C814
	LDA.w SMB3_OAMBuffer[$04].YDisp,y
	PHA
	SEC
	SBC.b #$08
	STA.w SMB3_OAMBuffer[$07].YDisp,y
	PLA
	STA.w SMB3_OAMBuffer[$05].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$06].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$04].YDisp,y
CODE_22C814:
	PHY
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.w $0679,x
	AND.b #$40
	BEQ.b CODE_22C82B
	LDA.w $1CEF
	ROL
	ROL
	BRA.b CODE_22C832

CODE_22C82B:
	LDA.w $1CEF
	ROL
	ROL
	ROL
	ROL
CODE_22C832:
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$04].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$05].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$06].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$07].Slot,y
	PLY
	REP.b #$10
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_NorSpr07C_GiantGoomba
	BNE.b CODE_22C84D
	JMP.w CODE_22C902

CODE_22C84D:
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	CMP.b #$02
	BEQ.b CODE_22C857
	JMP.w CODE_22C93E

CODE_22C857:
	LDY.w #$0000
	LDA.w $0679,x
	AND.b #$40
	BEQ.b CODE_22C864
	LDY.w #$0004
CODE_22C864:
	STY.b $03
	REP.b #$20
	TYA
	CLC
	ADC.b $C6,x
	SEC
	SBC.w #$0010
	TAY
	SEP.b #$20
	LDA.w SMB3_OAMBuffer[$00].YDisp,y
	CMP.b #$F0
	BEQ.b CODE_22C883
	STA.w SMB3_OAMBuffer[$02].YDisp,y
	SEC
	SBC.b #$08
	STA.w SMB3_OAMBuffer[$00].YDisp,y
CODE_22C883:
	LDA.w SMB3_OAMBuffer[$04].YDisp,y
	CMP.b #$F0
	BEQ.b CODE_22C893
	STA.w SMB3_OAMBuffer[$06].YDisp,y
	SEC
	SBC.b #$08
	STA.w SMB3_OAMBuffer[$04].YDisp,y
CODE_22C893:
	LDA.w SMB3_OAMBuffer[$00].Prop,y
	ORA.b #$06
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$02].Prop,y
	STA.w SMB3_OAMBuffer[$04].Prop,y
	STA.w SMB3_OAMBuffer[$06].Prop,y
	REP.b #$20
	LDA.b $03
	AND.w #$00FF
	EOR.w #$0004
	CLC
	ADC.b $C6,x
	SEC
	SBC.w #$0010
	TAY
	SEP.b #$20
	LDA.w SMB3_OAMBuffer[$04].Prop,y
	ORA.b #$06
	STA.w SMB3_OAMBuffer[$04].Prop,y
	LDY.b $C6,x
	LDA.b #$90
	STA.w SMB3_OAMBuffer[$04].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$06].Tile,y
	LDA.w $0669,x
	LSR
	LDA.b #$9E
	BCS.b CODE_22C8D5
	LDA.b #$96
CODE_22C8D5:
	STA.w SMB3_OAMBuffer[$05].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$07].Tile,y
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_NorSpr07E_BouncingGiantGreenParakoopa
	BCC.b CODE_22C8F4
	LDA.w $0669,x
	LSR
	LDA.b #$B8
	BCC.b CODE_22C8ED
	LDA.b #$BA
CODE_22C8ED:
	STA.w SMB3_OAMBuffer[$04].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$06].Tile,y
CODE_22C8F4:
	LDA.w SMB3_OAMBuffer[$05].Prop,y
	ORA.b #$06
	STA.w SMB3_OAMBuffer[$05].Prop,y
	STA.w SMB3_OAMBuffer[$07].Prop,y
	SEP.b #$10
	RTS

CODE_22C902:
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	CMP.b #$07
	BEQ.b CODE_22C91E
	LDA.b #$84
	STA.w SMB3_OAMBuffer[$04].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$06].Tile,y
	LDA.b #$8A
	STA.w SMB3_OAMBuffer[$05].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$07].Tile,y
	SEP.b #$10
	RTS

CODE_22C91E:
	LDA.b #$70
	STA.w SMB3_OAMBuffer[$04].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$06].Tile,y
	LDA.b #$BC
	STA.w SMB3_OAMBuffer[$05].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$07].Tile,y
	LDA.w SMB3_OAMBuffer[$05].Prop,y
	EOR.b #$40
	STA.w SMB3_OAMBuffer[$05].Prop,y
	STA.w SMB3_OAMBuffer[$07].Prop,y
	SEP.b #$10
	RTS

CODE_22C93E:
	LDA.b #$A8
	STA.w SMB3_OAMBuffer[$04].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$06].Tile,y
	LDA.b #$AC
	STA.w SMB3_OAMBuffer[$05].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$07].Tile,y
	LDA.w SMB3_OAMBuffer[$04].Prop,y
	EOR.b #$40
	STA.w SMB3_OAMBuffer[$04].Prop,y
	STA.w SMB3_OAMBuffer[$05].Prop,y
	STA.w SMB3_OAMBuffer[$06].Prop,y
	STA.w SMB3_OAMBuffer[$07].Prop,y
	SEP.b #$10
	RTS

;--------------------------------------------------------------------

CODE_22C964:
	JSR.w CODE_22C71D
	RTL

;--------------------------------------------------------------------

SMB3_NorSpr07D_GiantPiranhaPlantInSmallPipe_Status01:
.Main:
;$22C968
	LDA.b #$04
	BNE.b CODE_22C96E					; Note: This will always branch.

SMB3_NorSpr07F_GiantPiranhaPlantInGiantPipe_Status01:
.Main:
	LDA.b #$0C
CODE_22C96E:
	CLC
	ADC.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	LDY.b #$21
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	STA.b $68,x
	TYA
	STA.w $077B,x
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	STA.w $1021,x
	LDA.b #$20
	STA.w $0679,x
	INC.w $1FF9,x
	RTL

;--------------------------------------------------------------------

SMB3_NorSpr07D_GiantPiranhaPlantInSmallPipe_Status02:
.Main:
SMB3_NorSpr07F_GiantPiranhaPlantInGiantPipe_Status02:
.Main:
;$22C98B
	JSL.l CODE_279BC4
	LDA.b $4D,x
	AND.b #$03
	BNE.b CODE_22C99E
	LDA.b #$FF
	STA.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,x
	JSR.w CODE_22C9B4
	RTL

CODE_22C99E:
	LDA.w $0565
	LSR
	LSR
	LSR
	AND.b #$01
	STA.w $0669,x
	JSR.w CODE_22CA2C
	JSL.l CODE_279B70
	JSR.w CODE_22C9B4
	RTL

CODE_22C9B4:
	LDA.b $9C
	BEQ.b CODE_22C9B9
	RTS

CODE_22C9B9:
	INC.w $1FD2,x
	LDA.b $4D,x
	AND.b #$03
	JSL.l SMB3_ExecutePtr_Absolute

DATA_22C9C4:
	dw CODE_22CA19
	dw CODE_22C9CC
	dw CODE_22CA06
	dw CODE_22C9E7

CODE_22C9CC:
	LDA.b $68,x
	SEC
	SBC.w $077B,x
	PHA
	LDA.w $1021,x
	SBC.b #$00
	STA.b $00
	PLA
	CMP.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	LDA.b $00
	SBC.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	BCS.b CODE_22CA0B
	LDA.b #$F0
	BNE.b CODE_22C9FF					; Note: This will always branch.

CODE_22C9E7:
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	CLC
	ADC.b #$01
	PHA
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	ADC.b #$00
	STA.b $00
	PLA
	CMP.b $68,x
	LDA.b $00
	SBC.w $1021,x
	BCS.b CODE_22CA0B
	LDA.b #$10
CODE_22C9FF:
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	JSL.l CODE_27A7E5
	RTS

CODE_22CA06:
	LDA.w $0518,x
	BNE.b CODE_22CA2B
CODE_22CA0B:
	INC.b $4D,x
	LDA.b $4D,x
	AND.b #$03
	TAY
	LDA.w DATA_21C47C,y
	STA.w $0518,x
	RTS

CODE_22CA19:
	LDA.w $0518,x
	BNE.b CODE_22CA2B
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.b $0F
	CLC
	ADC.b #$18
	CMP.b #$31
	BCS.b CODE_22CA0B
CODE_22CA2B:
	RTS

CODE_22CA2C:
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	PHA
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	PHA
	LDA.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,x
	STA.w $1CEF
	LDA.w $0679,x
	AND.b #$40
	BEQ.b CODE_22CA4F
	ASL.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,x
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	CLC
	ADC.b #$08
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	ADC.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
CODE_22CA4F:
	LDA.w $0679,x
	AND.b #$CF
	ORA.b #$20
	STA.w $0679,x
	JSR.w CODE_22D35C
	PLA
	STA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	PLA
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	JSL.l SMB3_GetNormalSpriteOnScreenPosition_Main
	RTS

;--------------------------------------------------------------------

; Todo: Unreferrenced routine.

CODE_22CA67:
	LDY.b #$00
	LDA.w $0679,x
	AND.b #$40
	BEQ.b CODE_22CA71
	INY
CODE_22CA71:
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenXPos,x
	CLC
	ADC.w DATA_21C43A,y
	STA.b $01
	REP.b #$10
	LDY.b $C6,x
	LDA.b $01
	STA.w SMB3_OAMBuffer[$04].XDisp,y
	STA.w SMB3_OAMBuffer[$05].XDisp,y
	STA.w SMB3_OAMBuffer[$06].XDisp,y
	STA.w SMB3_OAMBuffer[$07].XDisp,y
	LDA.w !RAM_SMB3_Level_NorSpr_YOffscreenFlag,x
	STA.b $00
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenYPos,x
	LSR.b $00
	BCS.b CODE_22CA9F
	STA.w SMB3_OAMBuffer[$04].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$05].YDisp,y
CODE_22CA9F:
	LSR.b $00
	BCS.b CODE_22CAAF
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$06].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$07].YDisp,y
CODE_22CAAF:
	LDA.w SMB3_OAMBuffer[$00].Prop,y
	EOR.b #$40
	STA.w SMB3_OAMBuffer[$04].Prop,y
	STA.w SMB3_OAMBuffer[$05].Prop,y
	STA.w SMB3_OAMBuffer[$06].Prop,y
	STA.w SMB3_OAMBuffer[$07].Prop,y
	LDA.w $0669,x
	LSR
	LDA.b #$A0
	BCC.b CODE_22CACA
	LDA.b #$A8
CODE_22CACA:
	STA.w SMB3_OAMBuffer[$04].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$05].Tile,y
	LDA.b #$A4
	BCC.b CODE_22CAD7
	LDA.b #$AC
CODE_22CAD7:
	STA.w SMB3_OAMBuffer[$06].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$07].Tile,y
	LDA.w $0679,x
	BPL.b CODE_22CAFF
	LDA.w SMB3_OAMBuffer[$04].YDisp,y
	PHA
	LDA.w SMB3_OAMBuffer[$05].YDisp,y
	PHA
	LDA.w SMB3_OAMBuffer[$06].YDisp,y
	STA.w SMB3_OAMBuffer[$04].YDisp,y
	LDA.w SMB3_OAMBuffer[$07].YDisp,y
	STA.w SMB3_OAMBuffer[$05].YDisp,y
	PLA
	STA.w SMB3_OAMBuffer[$07].YDisp,y
	PLA
	STA.w SMB3_OAMBuffer[$06].YDisp,y
CODE_22CAFF:
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,x
	ROL
	ROL
	ROL
	ROL
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$04].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$05].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$06].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$07].Slot,y
	SEP.b #$10
	RTS

;--------------------------------------------------------------------

; Todo: Unreferrenced routine (aside from CODE_22CB9D)

CODE_22CB1F:
	STA.b $01
	TXA
	PHA
	TYA
	PHA
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_Y
	STY.b $02
	LDA.b $0F
	BPL.b CODE_22CB34
	EOR.b #$FF
	CLC
	ADC.b #$01
CODE_22CB34:
	STA.b $0C
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	STY.b $03
	LDA.b $0F
	BPL.b CODE_22CB45
	EOR.b #$FF
	CLC
	ADC.b #$01
CODE_22CB45:
	STA.b $0D
	LDY.b #$00
	LDA.b $0D
	CMP.b $0C
	BCS.b CODE_22CB58
	INY
	PHA
	LDA.b $0C
	STA.b $0D
	PLA
	STA.b $0C
CODE_22CB58:
	LDA.b #$00
	STA.b $0B
	STA.b $00
	LDX.b $01
CODE_22CB60:
	LDA.b $0B
	CLC
	ADC.b $0C
	CMP.b $0D
	BCC.b CODE_22CB6D
	SBC.b $0D
	INC.b $00
CODE_22CB6D:
	STA.b $0B
	DEX
	BNE.b CODE_22CB60
	TYA
	BEQ.b CODE_22CB7F
	LDA.b $00
	PHA
	LDA.b $01
	STA.b $00
	PLA
	STA.b $01
CODE_22CB7F:
	LDA.b $00
	LDY.b $02
	BEQ.b CODE_22CB8C
	EOR.b #$FF
	CLC
	ADC.b #$01
	STA.b $00
CODE_22CB8C:
	LDA.b $01
	LDY.b $03
	BEQ.b CODE_22CB99
	EOR.b #$FF
	CLC
	ADC.b #$01
	STA.b $01
CODE_22CB99:
	PLA
	TAY
	PLA
	TAX
CODE_22CB9D:
	SEP.b #$10
	RTS

;--------------------------------------------------------------------

; Note: Is this a generic sprite graphics routine?

CODE_22CBA0:
	LDY.b #$00
	LDA.b #$80
	BNE.b CODE_22CBAA							; Note: This will always branch.

CODE_22CBA6:
	LDY.b #$00
CODE_22CBA8:
	LDA.b #$00
CODE_22CBAA:
	STA.b $08
	STY.b $00
	JSL.l SMB3_GetNormalSpriteOnScreenPosition_Main
	REP.b #$10
	LDY.b $C6,x
	LDA.w !RAM_SMB3_Level_NorSpr_YOffscreenFlag,x
	LSR
	BCS.b CODE_22CB9D
	LDA.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,x
	STA.b $02
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenYPos,x
	SEC
	SBC.b $00
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	STA.w SMB3_OAMBuffer[$01].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$02].YDisp,y
	STA.w SMB3_OAMBuffer[$03].YDisp,y
	SEC
	LDA.w $06AB,x
	BEQ.b CODE_22CBE2
	CMP.b #$40
	BCC.b CODE_22CBE1
	LSR
	LSR
CODE_22CBE1:
	LSR
CODE_22CBE2:
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenXPos,x
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$02].XDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	STA.w SMB3_OAMBuffer[$03].XDisp,y
	LDA.w $0679,x
	STA.b $00
	AND.b #$10
	BNE.b CODE_22CC05
	LDA.w $0679,x
	AND.b #$CF
	ORA.b #$20
	STA.b $00
CODE_22CC05:
	STZ.b $D8
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_NorSpr071_Spiny
	BEQ.b CODE_22CC1A
	CMP.b #!Define_SMB3_SpriteID_NorSpr083_Lakitu
	BEQ.b CODE_22CC1A
	CMP.b #!Define_SMB3_SpriteID_NorSpr084_RedSpinyEgg
	BEQ.b CODE_22CC1A
	CMP.b #!Define_SMB3_SpriteID_NorSpr085_GreenSpinyEgg
	BNE.b CODE_22CC1C
CODE_22CC1A:
	INC.b $D8
CODE_22CC1C:
	LDA.w $1FE9,x
	ASL
	ORA.b $00
	ASL.b $08
	BCC.b CODE_22CC28
	AND.b #$BF
CODE_22CC28:
	ORA.b $D8
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$02].Prop,y
	BCC.b CODE_22CC34
	ORA.b #$40
CODE_22CC34:
	STA.w SMB3_OAMBuffer[$01].Prop,y
	STA.w SMB3_OAMBuffer[$03].Prop,y
	LDA.b #$00
	XBA
	LDA.w $0669,x
	PHA
	LDA.w $0418
	TAX
	PLA
	ASL
	CLC
	ADC.w DATA_21B509,x
	TAX
	LDA.w DATA_21B744,x
	BIT.b $00
	BVS.b CODE_22CC66
	STA.w SMB3_OAMBuffer[$00].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$02].Tile,y
	LDA.w DATA_21B744+$01,x
	STA.w SMB3_OAMBuffer[$01].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$03].Tile,y
	BRA.b CODE_22CC77

CODE_22CC66:
	STA.w SMB3_OAMBuffer[$01].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$03].Tile,y
	LDA.w DATA_21B744+$01,x
	STA.w SMB3_OAMBuffer[$00].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$02].Tile,y
CODE_22CC77:
	LDA.w SMB3_OAMBuffer[$00].Prop,y
	AND.b #$80
	BEQ.b CODE_22CC9A
	LDA.w SMB3_OAMBuffer[$00].Tile,y
	PHA
	LDA.w SMB3_OAMBuffer[$02].Tile,y
	STA.w SMB3_OAMBuffer[$00].Tile,y
	PLA
	STA.w SMB3_OAMBuffer[$02].Tile,y
	LDA.w SMB3_OAMBuffer[$01].Tile,y
	PHA
	LDA.w SMB3_OAMBuffer[$03].Tile,y
	STA.w SMB3_OAMBuffer[$01].Tile,y
	PLA
	STA.w SMB3_OAMBuffer[$03].Tile,y
CODE_22CC9A:
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b $02
	ROL
	ROL
	PHP
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$02].Slot,y
	PLP
	ROL
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$03].Slot,y
	SEP.b #$10
	LDX.b $9B
	RTS

;--------------------------------------------------------------------

	%ROUTINE_SMB3_NorSpr089_ChainChomp_Status01(NULLROM)			; $22CCBE
	%ROUTINE_SMB3_NorSpr089_ChainChomp_Status02(NULLROM)			; $22CD16

;--------------------------------------------------------------------

CODE_22D34B:
	LDA.w $0679,x
	AND.b #$BF
	LDY.b $8C,x
	BEQ.b CODE_22D35B
	BMI.b CODE_22D358
	ORA.b #$40
CODE_22D358:
	STA.w $0679,x
CODE_22D35B:
	RTS

;--------------------------------------------------------------------

CODE_22D35C:
	REP.b #$10
	LDY.w $00C6,x
	LDA.b $44,x
	XBA
	LDA.b $5F,x
	REP.b #$20
	SEC
	SBC.w $0210
	STA.b $00
	CLC
	ADC.w #$0008
	STA.b $02
	SEP.b #$20
	LDA.b $00
	STA.w SMB3_OAMBuffer[$04].XDisp,y
	STA.w SMB3_OAMBuffer[$06].XDisp,y
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$02].XDisp,y
	LDA.b $02
	STA.w SMB3_OAMBuffer[$05].XDisp,y
	STA.w SMB3_OAMBuffer[$07].XDisp,y
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	STA.w SMB3_OAMBuffer[$03].XDisp,y
	LDA.b $71,x
	SEC
	SBC.w $0216
	STA.w SMB3_OAMBuffer[$04].YDisp,y
	STA.w SMB3_OAMBuffer[$05].YDisp,y
	CLC
	ADC.b #$10
	STA.w SMB3_OAMBuffer[$06].YDisp,y
	STA.w SMB3_OAMBuffer[$07].YDisp,y
	LDA.w $0691,x
	DEC
	SEC
	SBC.w $0216
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	STA.w SMB3_OAMBuffer[$01].YDisp,y
	CLC
	ADC.b #$10
	STA.w SMB3_OAMBuffer[$02].YDisp,y
	STA.w SMB3_OAMBuffer[$03].YDisp,y
	LDA.b #$28
	STA.w SMB3_OAMBuffer[$00].Tile,y
	STA.w SMB3_OAMBuffer[$01].Tile,y
	STA.w SMB3_OAMBuffer[$02].Tile,y
	STA.w SMB3_OAMBuffer[$03].Tile,y
	LDA.b #$12
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$01].Prop,y
	STA.w SMB3_OAMBuffer[$02].Prop,y
	STA.w SMB3_OAMBuffer[$03].Prop,y
	LDA.w $0669,x
	ASL
	ASL
	ORA.b #$A0
	STA.w SMB3_OAMBuffer[$04].Tile,y
	STA.w SMB3_OAMBuffer[$05].Tile,y
	INC
	INC
	STA.w SMB3_OAMBuffer[$06].Tile,y
	STA.w SMB3_OAMBuffer[$07].Tile,y
	LDA.b #$24
	STA.w SMB3_OAMBuffer[$04].Prop,y
	STA.w SMB3_OAMBuffer[$06].Prop,y
	LDA.b #$64
	STA.w SMB3_OAMBuffer[$05].Prop,y
	STA.w SMB3_OAMBuffer[$07].Prop,y
	PHY
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b $01
	BEQ.b CODE_22D40E
	LDA.b #$01
CODE_22D40E:
	ORA.b #$02
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$02].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$04].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$06].Slot,y
	LDA.b $03
	BEQ.b CODE_22D422
	LDA.b #$01
CODE_22D422:
	ORA.b #$02
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$03].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$05].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$07].Slot,y
	PLY
	LDA.b $56,x
	XBA
	LDA.b $71,x
	REP.b #$20
	SEC
	SBC.w $0216
	STA.b $00
	CLC
	ADC.w #$0010
	STA.b $02
	SEP.b #$20
	LDA.b $00
	CMP.b #$EF
	BCS.b CODE_22D450
	LDA.b $01
	BEQ.b CODE_22D458
CODE_22D450:
	LDA.b #$F0
	STA.w SMB3_OAMBuffer[$04].YDisp,y
	STA.w SMB3_OAMBuffer[$05].YDisp,y
CODE_22D458:
	LDA.b $02
	CMP.b #$EF
	BCS.b CODE_22D462
	LDA.b $03
	BEQ.b CODE_22D46A
CODE_22D462:
	LDA.b #$F0
	STA.w SMB3_OAMBuffer[$06].YDisp,y
	STA.w SMB3_OAMBuffer[$07].YDisp,y
CODE_22D46A:
	LDA.b $56,x
	XBA
	LDA.w $0691,x
	REP.b #$20
	SEC
	SBC.w $0216
	STA.b $00
	CLC
	ADC.w #$0010
	STA.b $02
	SEP.b #$20
	LDA.b $00
	CMP.b #$EF
	BCS.b CODE_22D48A
	LDA.b $01
	BEQ.b CODE_22D492
CODE_22D48A:
	LDA.b #$F0
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	STA.w SMB3_OAMBuffer[$01].YDisp,y
CODE_22D492:
	LDA.b $02
	CMP.b #$EF
	BCS.b CODE_22D49C
	LDA.b $03
	BEQ.b CODE_22D4A4
CODE_22D49C:
	LDA.b #$F0
	STA.w SMB3_OAMBuffer[$02].YDisp,y
	STA.w SMB3_OAMBuffer[$03].YDisp,y
CODE_22D4A4:
	SEP.b #$10
	RTS

%FREE_BYTES(NULLROM, 2905, $FF)

;--------------------------------------------------------------------

; Note: Routine that sets the pointer to the player graphics

CODE_22E000:
	LDA.w !RAM_SMB3_Level_Player_CurrentCharacter
	BEQ.b CODE_22E007
	LDA.b #$09									; Different value at ScratchRAM04 for Luigi
CODE_22E007:
	STA.b $04
	LDA.b !RAM_SMB3_Level_Player_CurrentPose
	LSR
	TAX
	LDA.w DATA_21896F,x
	LDX.b !RAM_SMB3_Level_Player_CurrentPowerUp
	CMP.b #$20
	BCC.b CODE_22E01D
	LDX.b #$07
	CMP.b #$48
	BEQ.b CODE_22E01D
	INX
CODE_22E01D:
	TAY
	TXA
	CLC
	ADC.b $04
	TAX
	TYA
	CLC
	ADC.w DATA_2189C3,x
	STA.b $01
	STZ.b $00
	LDA.w DATA_2189D5,x
	STA.w $0238
	LDA.b #DATA_218777>>16
	STA.b $06
	REP.b #$30
	LDA.w #DATA_218777
	STA.b $04
	LDA.b !RAM_SMB3_Level_Player_CurrentPose
	AND.w #$00FF
	TAX
	LDA.w DATA_2186CF,x
	TAY
	LDA.b [$04],y
	AND.w #$00FF
	TAX
	LDA.w DATA_2189E7,x
	CLC
	ADC.b $00
	STA.w $0220
	INY
	LDA.b [$04],y
	AND.w #$00FF
	TAX
	LDA.w DATA_2189E7,x
	CLC
	ADC.b $00
	STA.w $0222
	INY
	LDA.b [$04],y
	AND.w #$00FF
	TAX
	LDA.w DATA_2189E7,x
	CLC
	ADC.b $00
	STA.w $0224
	INY
	LDA.b [$04],y
	AND.w #$00FF
	TAX
	LDA.w DATA_2189E7,x
	CLC
	ADC.b $00
	STA.w $0226
	INY
	LDA.b [$04],y
	AND.w #$00FF
	TAX
	LDA.w DATA_2189E7,x
	CLC
	ADC.b $00
	STA.w $0228
	INY
	LDA.b [$04],y
	AND.w #$00FF
	TAX
	LDA.w DATA_2189E7,x
	CLC
	ADC.b $00
	STA.w $022A
	SEP.b #$30
	RTL

;--------------------------------------------------------------------

	%ROUTINE_SMB3_ResetSpriteOAMRt(NULLROM)				; $22E0A9
	%ROUTINE_SMB3_GetRand(NULLROM)					; $22E103

;--------------------------------------------------------------------

; Note: Routine that loads the transparent layer 3 water
; Optimization: This is a pretty bad way of determining what the water level is...

CODE_22E134:
	REP.b #$20
	LDY.b #$00
	LDX.w !RAM_SMB3_Level_PreviousLevelDataBank
	LDA.w !RAM_SMB3_Level_PreviousLevelDataLo
	CPX.b #SMB3_LevelData_3_1_Level_Main>>16
	BNE.b CODE_22E173
	CMP.w #SMB3_LevelData_3_1_Level_Main
	BNE.b CODE_22E149
	LDY.b #$04
CODE_22E149:
	CMP.w #SMB3_LevelData_3_5_Level_Main
	BNE.b CODE_22E150
	LDY.b #$14
CODE_22E150:
	CMP.w #SMB3_LevelData_5_2_Level_Sub
	BNE.b CODE_22E157
	LDY.b #$1C
CODE_22E157:
	CMP.w #SMB3_LevelData_7_4_Level_Sub
	BNE.b CODE_22E15E
	LDY.b #$04
CODE_22E15E:
	CMP.w #SMB3_LevelData_4_2_Level_Main
	BNE.b CODE_22E165
	LDY.b #$34
CODE_22E165:
	CMP.w #SMB3_LevelData_4_4_Level_Main
	BNE.b CODE_22E16C
	LDY.b #$18
CODE_22E16C:
	CMP.w #SMB3_LevelData_4_1_Level_Sub
	BNE.b CODE_22E1C2
	LDY.b #$24
CODE_22E173:
	CPX.b #SMB3_LevelData_World3Fortress1_Level_Sub>>16
	BNE.b CODE_22E1A2
	CMP.w #SMB3_LevelData_World3Fortress1_Level_Sub
	BNE.b CODE_22E189
	LDY.b #$2A
	LDA.w $0210
	CMP.w #$0580
	BCC.b CODE_22E1C2
	JMP.w CODE_22E29D

CODE_22E189:
	CMP.w #SMB3_LevelData_World3Fortress2_Level_Main
	BNE.b CODE_22E190
	LDY.b #$0E
CODE_22E190:
	CMP.w #SMB3_LevelData_World3Fortress2_Level_Sub
	BNE.b CODE_22E1C2
	LDY.b #$03
	LDA.w $0210
	CMP.w #$0380
	BCC.b CODE_22E1C2
	JMP.w CODE_22E29D

CODE_22E1A2:
	CPX.b #SMB3_LevelData_3_2_Level_Main>>16
	BNE.b CODE_22E1C2
	CMP.w #SMB3_LevelData_3_2_Level_Main
	BNE.b CODE_22E1AD
	LDY.b #$34
CODE_22E1AD:
	CMP.w #SMB3_LevelData_3_9_Level_Main
	BNE.b CODE_22E1B4
	LDY.b #$1E
CODE_22E1B4:
	CMP.w #SMB3_LevelData_3_3_Level_Main
	BNE.b CODE_22E1BB
	LDY.b #$34
CODE_22E1BB:
	CMP.w #SMB3_LevelData_3_8_Level_Main
	BNE.b CODE_22E1C2
	LDY.b #$34
CODE_22E1C2:
	STY.w $02C1
CODE_22E1C5:
	REP.b #$10
	LDX.w #$0FFE
	LDA.w #$31FF
CODE_22E1CD:
	STA.l !RAM_SMB3_Global_DecompressionBuffer,x
	STA.l !RAM_SMB3_Global_DecompressionBuffer+$1000,x
	DEX
	DEX
	BPL.b CODE_22E1CD
	LDA.w $02C1
	AND.w #$00FF
	ASL
	ASL
	ASL
	ASL
	ASL
	ASL
	TAX
	CPX.w #$0800
	BCC.b CODE_22E1F0
	CLC
	ADC.w #$0800
	TAX
CODE_22E1F0:
	LDY.w #$0000
	LDA.w #$0005
	STA.b $02
CODE_22E1F8:
	LDA.w #$0010
	STA.b $04
CODE_22E1FD:
	LDA.w DATA_21CA50,y
	STA.l !RAM_SMB3_Global_DecompressionBuffer,x
	STA.l !RAM_SMB3_Global_DecompressionBuffer+$0800,x
	INX
	INX
	INY
	INY
	LDA.w DATA_21CA50,y
	STA.l !RAM_SMB3_Global_DecompressionBuffer,x
	STA.l !RAM_SMB3_Global_DecompressionBuffer+$0800,x
	INX
	INX
	CPX.w #$0800
	BNE.b CODE_22E221
	LDX.w #$1000
CODE_22E221:
	CPX.w #$1800
	BEQ.b CODE_22E250
	DEC.b $04
	BEQ.b CODE_22E22E
	DEY
	DEY
	BRA.b CODE_22E1FD

CODE_22E22E:
	DEC.b $02
	BEQ.b CODE_22E236
	INY
	INY
	BRA.b CODE_22E1F8

CODE_22E236:
	LDA.w #$2D9F
CODE_22E239:
	STA.l !RAM_SMB3_Global_DecompressionBuffer,x
	STA.l !RAM_SMB3_Global_DecompressionBuffer+$0800,x
	INX
	INX
	CPX.w #$0800
	BNE.b CODE_22E24B
	LDX.w #$1000
CODE_22E24B:
	CPX.w #$1800
	BNE.b CODE_22E239
CODE_22E250:
	SEP.b #$30
	LDA.b #$52
	STA.w !REGISTER_BG3AddressAndSize
	LDA.w !RAM_SMB3_Global_BGModeAndTileSizeSettingMirror
	ORA.b #$08
	STA.w !RAM_SMB3_Global_BGModeAndTileSizeSettingMirror
	JMP.w CODE_22E262

;--------------------------------------------------------------------

CODE_22E262:								; Note: Something related to loading layer 3?
	REP.b #$20
	LDX.b #$80
	STX.w !REGISTER_VRAMAddressIncrementValue
	LDA.w #(!REGISTER_WriteToVRAMPortLo&$0000FF<<8)+$01
	STA.w DMA[$00].Parameters
	LDA.w #!RAM_SMB3_Global_DecompressionBuffer
	STA.w DMA[$00].SourceLo
	LDX.b #!RAM_SMB3_Global_DecompressionBuffer>>16
	STX.w DMA[$00].SourceBank
	LDA.w #$5000
	STA.w !REGISTER_VRAMAddressLo
	LDA.w #$0800
	STA.w DMA[$00].SizeLo
	LDX.b #$01
	STX.w !REGISTER_DMAEnable
	STA.w DMA[$00].SizeLo
	LDA.w #$5400
	STA.w !REGISTER_VRAMAddressLo
	LDA.w #$7FB500
	STA.w DMA[$00].SourceLo
	STX.w !REGISTER_DMAEnable
CODE_22E29D:
	SEP.b #$20
	RTL

;--------------------------------------------------------------------

CODE_22E2A0:
	REP.b #$20
	LDY.b #$80
	STY.w !REGISTER_VRAMAddressIncrementValue
	LDA.w #(!REGISTER_WriteToVRAMPortLo&$0000FF<<8)+$01
	STA.w DMA[$00].Parameters
	LDA.w #!RAM_SMB3_Global_DecompressionBuffer
	CLC
	ADC.b $00
	STA.w DMA[$00].SourceLo
	LDY.b #!RAM_SMB3_Global_DecompressionBuffer>>16
	STY.w DMA[$00].SourceBank
	LDA.w #$5000
	STA.w !REGISTER_VRAMAddressLo
	LDA.w #$0800
	STA.w DMA[$00].SizeLo
	LDY.b #$01
	STY.w !REGISTER_DMAEnable
	STA.w DMA[$00].SizeLo
	LDA.w #$5400
	STA.w !REGISTER_VRAMAddressLo
	LDA.w #$7FAD00
	CLC
	ADC.b $00
	STA.w DMA[$00].SourceLo
	STY.w !REGISTER_DMAEnable
	SEP.b #$20
	RTL

;--------------------------------------------------------------------

CODE_22E2E4:
	LDA.b #SMB3_CompressedTilemaps_Layer3CloudsBG
	LDX.b #SMB3_CompressedTilemaps_Layer3CloudsBG>>8
	LDY.b #SMB3_CompressedTilemaps_Layer3CloudsBG>>16
	JSL.l SMB3_GraphicsDecompressionRoutines_Main
	LDA.b #$52
	STA.w !REGISTER_BG3AddressAndSize
	LDA.w $020C
	ORA.b #$08
	STA.w $020C
	JMP.w CODE_22E262

;--------------------------------------------------------------------

CODE_22E2FE:
	LDA.l $7F2000
	BMI.b CODE_22E337
	REP.b #$20
	LDA.l $7F2000
	XBA
	STA.w !REGISTER_VRAMAddressLo
	LDX.b #$81
	STX.w !REGISTER_VRAMAddressIncrementValue
	LDA.w #(!REGISTER_WriteToVRAMPortLo&$0000FF<<8)+$01
	STA.w DMA[$00].Parameters
	LDA.w #$7F2002
	STA.w DMA[$00].SourceLo
	LDX.b #$7F2002>>16
	STX.w DMA[$00].SourceBank
	LDA.w #$0040
	STA.w DMA[$00].SizeLo
	LDX.b #$01
	STX.w !REGISTER_DMAEnable
	SEP.b #$20
	LDA.b #$FF
	STA.l $7F2000
CODE_22E337:
	RTL

;--------------------------------------------------------------------

; Note: Something related to loading the transparent layer 2 cloud BG seen in airship levels?

CODE_22E338:
	REP.b #$30
	LDX.w #$0FFE
	LDA.w #$20FF
CODE_22E340:
	STA.l $7F2000,x
	STA.l $7F3000,x
	DEX
	DEX
	BPL.b CODE_22E340
	LDX.w #$069A
	LDA.w #$25D1
CODE_22E352:
	STA.l $7F2000,x
	INX
	INX
	CPX.w #$0800
	BNE.b CODE_22E352
	LDX.w #$0EDA
CODE_22E360:
	STA.l $7F2000,x
	INX
	INX
	CPX.w #$1000
	BNE.b CODE_22E360
	STZ.b $00
	STZ.b $02
CODE_22E36F:
	LDY.b $00
	CPY.w #$0013
	BEQ.b CODE_22E3A3
	LDA.w DATA_21CBA2,y
	AND.w #$00FF
	STA.b $04
	STA.b $06
	TYA
	ASL
	TAY
	LDX.w DATA_21CBB5,y
	LDY.b $02
CODE_22E388:
	LDA.w DATA_21CA64,y
	STA.l $7F2000,x
	INX
	INX
	INY
	INY
	DEC.b $04
	BNE.b CODE_22E388
	LDA.b $06
	ASL
	CLC
	ADC.b $02
	STA.b $02
	INC.b $00
	BRA.b CODE_22E36F

CODE_22E3A3:
	LDA.w $0350
	AND.w #$00FF
	CMP.w #$0002
	BEQ.b CODE_22E3B3
	CMP.w #$0023
	BNE.b CODE_22E3B9
CODE_22E3B3:
	LDA.w #$0040
	STA.w $0218
CODE_22E3B9:
	SEP.b #$10
	LDX.b #$80
	STX.w !REGISTER_VRAMAddressIncrementValue
	LDA.w #(!REGISTER_WriteToVRAMPortLo&$0000FF<<8)+$01
	STA.w DMA[$00].Parameters
	LDA.w #$2000
	STA.w DMA[$00].SizeLo
	LDA.w #$7F2000
	STA.w DMA[$00].SourceLo
	LDX.b #$7F2000>>16
	STX.w DMA[$00].SourceBank
	LDA.w #$1000
	STA.w !REGISTER_VRAMAddressLo
	LDX.b #$01
	STX.w !REGISTER_DMAEnable
	SEP.b #$20
	RTL

;--------------------------------------------------------------------

; Note: Something related to loading the layer 3 cave pillar BG

CODE_22E3E5:
	REP.b #$30
	LDX.w #$0FFE
	LDA.w #$05FF
CODE_22E3ED:
	STA.l !RAM_SMB3_Global_DecompressionBuffer,x
	DEX
	DEX
	BPL.b CODE_22E3ED
	LDX.w #$0FFE
	LDA.w #$8900
CODE_22E3FB:
	STA.l !RAM_SMB3_Global_DecompressionBuffer+$1000,x
	DEX
	DEX
	BPL.b CODE_22E3FB
	STZ.b $00
CODE_22E405:
	LDY.b $00
	LDX.w DATA_21CDB9,y
	LDY.w #$0000
	LDA.w #$0011
	STA.b $04
CODE_22E412:
	LDA.w #$0008
	STA.b $06
CODE_22E417:
	LDA.w DATA_21CC11,y
	STA.l !RAM_SMB3_Global_DecompressionBuffer+$1000,x
	STA.l !RAM_SMB3_Global_DecompressionBuffer+$1800,x
	INX
	INX
	INY
	INY
	DEC.b $06
	BNE.b CODE_22E417
	TXA
	CLC
	ADC.w #$0030
	TAX
	DEC.b $04
	BNE.b CODE_22E412
	LDA.b $00
	INC
	INC
	STA.b $00
	CMP.w #$0006
	BNE.b CODE_22E405
CODE_22E43F:
	LDY.b $00
	LDX.w DATA_21CDB9,y
	LDY.w #$0000
	LDA.w #$0011
	STA.b $04
CODE_22E44C:
	LDA.w #$0004
	STA.b $06
CODE_22E451:
	LDA.w DATA_21CD31,y
	STA.l !RAM_SMB3_Global_DecompressionBuffer+$1000,x
	STA.l !RAM_SMB3_Global_DecompressionBuffer+$1800,x
	INX
	INX
	INY
	INY
	DEC.b $06
	BNE.b CODE_22E451
	TXA
	CLC
	ADC.w #$0038
	TAX
	DEC.b $04
	BNE.b CODE_22E44C
	LDA.b $00
	INC
	INC
	STA.b $00
	CMP.w #$000A
	BNE.b CODE_22E43F
	SEP.b #$30
	LDA.b #$52
	STA.w !REGISTER_BG3AddressAndSize
	JMP.w CODE_22E262

;--------------------------------------------------------------------

CODE_22E483:
	LDA.b #SMB3_CompressedTilemaps_Layer3VariableWater
	LDX.b #SMB3_CompressedTilemaps_Layer3VariableWater>>8
	LDY.b #SMB3_CompressedTilemaps_Layer3VariableWater>>16
	JSL.l SMB3_GraphicsDecompressionRoutines_Main
	LDA.b #$51
	STA.w !REGISTER_BG3AddressAndSize
	STZ.b $00
	STZ.b $01
	JMP.w CODE_22E2A0

;--------------------------------------------------------------------

; Note: Routine that loads the variable height water seen in the 4-4 sublevel.

CODE_22E499:
	LDA.b #SMB3_CompressedTilemaps_Layer3VariableWater
	LDX.b #SMB3_CompressedTilemaps_Layer3VariableWater>>8
	LDY.b #SMB3_CompressedTilemaps_Layer3VariableWater>>16
	JSL.l SMB3_GraphicsDecompressionRoutines_Main
	LDA.b #$51
	STA.w !REGISTER_BG3AddressAndSize
	STZ.b $00
	LDA.b #$10
	STA.b $01
	JMP.w CODE_22E2A0

;--------------------------------------------------------------------

; Note: Something related to loading the layer 3 fog BG

CODE_22E4B1:
	LDA.b #SMB3_CompressedTilemaps_Layer3PillarsBG
	LDX.b #SMB3_CompressedTilemaps_Layer3PillarsBG>>8
	LDY.b #SMB3_CompressedTilemaps_Layer3PillarsBG>>16
	JSL.l SMB3_GraphicsDecompressionRoutines_Main
	LDA.b #$00
	STA.l $7FC522
	STA.l $7FC523
	LDA.b #$51
	STA.w !REGISTER_BG3AddressAndSize
	STZ.b $00
	STZ.b $01
	JMP.w CODE_22E2A0

;--------------------------------------------------------------------

; Note: Something related to loading the layer 3 fortress bar BG

CODE_22E4D1:
	LDA.b #SMB3_CompressedTilemaps_Layer3PillarsBG
	LDX.b #SMB3_CompressedTilemaps_Layer3PillarsBG>>8
	LDY.b #SMB3_CompressedTilemaps_Layer3PillarsBG>>16
	JSL.l SMB3_GraphicsDecompressionRoutines_Main
	REP.b #$30
	LDX.w #$0FFE
	LDA.w #$05FF
CODE_22E4E3:
	STA.l !RAM_SMB3_Global_DecompressionBuffer,x
	DEX
	DEX
	BPL.b CODE_22E4E3
	SEP.b #$30
	LDA.b #$52
	STA.w !REGISTER_BG3AddressAndSize
	JMP.w CODE_22E262

;--------------------------------------------------------------------

; Note: Something related to loading the layer 3 cloud BG seen in 3-7.

CODE_22E4F5:
	LDA.b #SMB3_CompressedTilemaps_Layer3ThinCloudsBG
	LDX.b #SMB3_CompressedTilemaps_Layer3ThinCloudsBG>>8
	LDY.b #SMB3_CompressedTilemaps_Layer3ThinCloudsBG>>16
	JSL.l SMB3_GraphicsDecompressionRoutines_Main
	LDA.b #$03
	STA.w $0351
	LDA.b #$51
	STA.w !REGISTER_BG3AddressAndSize
	STZ.b $00
	STZ.b $01
	LDA.w $020C
	ORA.b #$08
	STA.w $020C
	JMP.w CODE_22E2A0

;--------------------------------------------------------------------

; Note: Routine that loads the layer 3 brown water seen in the world 8 ship level

CODE_22E518:
	REP.b #$30
	LDX.w #$0FFE
	LDA.w #$21FF
CODE_22E520:
	STA.l !RAM_SMB3_Global_DecompressionBuffer,x
	STA.l !RAM_SMB3_Global_DecompressionBuffer+$1000,x
	DEX
	DEX
	BPL.b CODE_22E520
	LDX.w #$1500
	LDY.w #$0000
CODE_22E532:
	LDA.w #$0010
	STA.b $04
CODE_22E537:
	LDA.w DATA_21CDC3,y
	STA.l !RAM_SMB3_Global_DecompressionBuffer,x
	STA.l !RAM_SMB3_Global_DecompressionBuffer+$0800,x
	INX
	INX
	INY
	INY
	LDA.w DATA_21CDC3,y
	STA.l !RAM_SMB3_Global_DecompressionBuffer,x
	STA.l !RAM_SMB3_Global_DecompressionBuffer+$0800,x
	INX
	INX
	CPX.w #$1680
	BEQ.b CODE_22E564
	DEC.b $04
	BEQ.b CODE_22E560
	DEY
	DEY
	BRA.b CODE_22E537

CODE_22E560:
	INY
	INY
	BRA.b CODE_22E532

CODE_22E564:
	SEP.b #$30
	LDA.b #$52
	STA.w !REGISTER_BG3AddressAndSize
	LDA.w $020C
	ORA.b #$08
	STA.w $020C
	JMP.w CODE_22E262

;--------------------------------------------------------------------

; Note: Routine that loads the layer 2 cloud BG (seen in certain bonus rooms)

CODE_22E576:
	LDA.b #SMB3_CompressedTilemaps_Layer2CloudsBG
	LDX.b #SMB3_CompressedTilemaps_Layer2CloudsBG>>8
	LDY.b #SMB3_CompressedTilemaps_Layer2CloudsBG>>16
	JSL.l SMB3_GraphicsDecompressionRoutines_Main
	REP.b #$20
	LDX.b #$80
	STX.w !REGISTER_VRAMAddressIncrementValue
	LDA.w #(!REGISTER_WriteToVRAMPortLo&$0000FF<<8)+$01
	STA.w DMA[$00].Parameters
	LDA.w #$2000
	STA.w DMA[$00].SizeLo
	LDA.w #!RAM_SMB3_Global_DecompressionBuffer
	STA.w DMA[$00].SourceLo
	LDX.b #!RAM_SMB3_Global_DecompressionBuffer>>16
	STX.w DMA[$00].SourceBank
	LDA.w #$1000
	STA.w !REGISTER_VRAMAddressLo
	LDX.b #$01
	STX.w !REGISTER_DMAEnable
	SEP.b #$20
	RTL

;--------------------------------------------------------------------

; Note: Used to load the layer 3 clouds seen in 5-3.

CODE_22E5AC:
	REP.b #$30
	LDX.w #$0FFE
	LDA.w #$21FF
CODE_22E5B4:
	STA.l !RAM_SMB3_Global_DecompressionBuffer,x
	STA.l !RAM_SMB3_Global_DecompressionBuffer+$1000,x
	DEX
	DEX
	BPL.b CODE_22E5B4
	LDX.w #$00BE
CODE_22E5C3:
	LDA.w #$09FC
	STA.l !RAM_SMB3_Global_DecompressionBuffer,x
	STA.l !RAM_SMB3_Global_DecompressionBuffer+$0800,x
	DEX
	DEX
	BPL.b CODE_22E5C3
	LDX.w #$00C0
	STZ.b $00
	LDA.w #$0008
	STA.b $02
	STZ.b $06
CODE_22E5DE:
	LDY.b $06
	LDA.w DATA_21CC0B,y
	XBA
	AND.w #$FF00
	STA.b $08
	LDA.w #$0008
	STA.b $04
CODE_22E5EE:
	LDA.w #$0004
	STA.b $0A
	LDY.b $00
	ASL.b $08
	BCC.b CODE_22E5FB
	LDY.b $02
CODE_22E5FB:
	LDA.w DATA_21CBDB,y
	STA.l !RAM_SMB3_Global_DecompressionBuffer,x
	INY
	INY
	INX
	INX
	DEC.b $0A
	BNE.b CODE_22E5FB
	DEC.b $04
	BNE.b CODE_22E5EE
	TXA
	CLC
	ADC.w #$07C0
	TAX
	LDA.b $06
	INC
	STA.b $06
	CMP.w #$0006
	BEQ.b CODE_22E63B
	AND.w #$0001
	BNE.b CODE_22E5DE
	TXA
	SEC
	SBC.w #$0FC0
	TAX
	LDA.b $00
	CLC
	ADC.w #$0010
	STA.b $00
	LDA.b $02
	CLC
	ADC.w #$0010
	STA.b $02
	BRA.b CODE_22E5DE

CODE_22E63B:
	SEP.b #$30
	LDA.b #$52
	STA.w !REGISTER_BG3AddressAndSize
	LDA.w $020C
	ORA.b #$08
	STA.w $020C
	JMP.w CODE_22E262

;--------------------------------------------------------------------

; Note: Used to load the layer 3 pillars seen in Bowser's Castle.

CODE_22E64D:
	LDA.b #SMB3_CompressedTilemaps_Layer3BowsersCastlePillarsBG
	LDX.b #SMB3_CompressedTilemaps_Layer3BowsersCastlePillarsBG>>8
	LDY.b #SMB3_CompressedTilemaps_Layer3BowsersCastlePillarsBG>>16
	JSL.l SMB3_GraphicsDecompressionRoutines_Main
	LDA.b #$52
	STA.w !REGISTER_BG3AddressAndSize
	JMP.w CODE_22E262

;--------------------------------------------------------------------

CODE_22E65F:
	REP.b #$30
	PHB
	LDX.w #SMB3TitleScreenPalette_Row01To03
	LDY.w #SMB3_PaletteMirror[$00].LowByte
	LDA.w #$00FF
	MVN SMB3_PaletteMirror[$00].LowByte>>16,SMB3TitleScreenPalette_Row01To03>>16
	PLB
	SEP.b #$30
	LDA.b #$01
	STA.w !RAM_SMB3_Global_UpdateEntirePaletteFlag
	RTL

;--------------------------------------------------------------------

CODE_22E677:
	LDA.w !RAM_SMB3_Global_SoundCh1
	BNE.b CODE_22E690
	LDA.w !REGISTER_APUPort0
	CMP.w $1204
	BEQ.b CODE_22E68E
	INC.w $120A
	LDA.w $120A
	CMP.b #$03
	BCC.b CODE_22E699
CODE_22E68E:
	LDA.b #$00
CODE_22E690:
	STA.w !REGISTER_APUPort0
	STA.w $1204
	STZ.w $120A
CODE_22E699:
	LDA.w !RAM_SMB3_Global_SoundCh2
	BNE.b CODE_22E6B4
	LDA.w !REGISTER_APUPort1
	AND.b #$0F
	CMP.w $1205
	BEQ.b CODE_22E6B2
	INC.w $120B
	LDA.w $120B
	CMP.b #$03
	BCC.b CODE_22E6BF
CODE_22E6B2:
	LDA.b #$00
CODE_22E6B4:
	STA.w !REGISTER_APUPort1
	AND.b #$0F
	STA.w $1205
	STZ.w $120B
CODE_22E6BF:
	LDA.w !RAM_SMB3_Global_MusicCh1
	BEQ.b CODE_22E73A
	LDY.b #$04
	STY.w $120C
	STA.w !REGISTER_APUPort2
	CMP.b #!Define_SMB3_LevelMusic_StopMusicCommand
	BCS.b CODE_22E6D3
	STA.w $1206
CODE_22E6D3:
	LDA.w !RAM_SMB3_Global_SoundCh3
	BNE.b CODE_22E6F9
	LDA.w !REGISTER_APUPort3
	AND.b #$7F
	CMP.w $1207
	BEQ.b CODE_22E6EC
	INC.w $120D
	LDA.w $120D
	CMP.b #$03
	BCC.b CODE_22E71D
CODE_22E6EC:
	LDA.b #$00
	STA.w !REGISTER_APUPort3
	STA.w $1207
	STZ.w $120D
	BRA.b CODE_22E71D

CODE_22E6F9:
	STA.w $1207
	CMP.b #!Define_SMAS_Sound0063_Coin
	BEQ.b CODE_22E70C
	CMP.b #!Define_SMAS_Sound0063_1up
	BEQ.b CODE_22E70C
	CMP.b #!Define_SMAS_Sound0063_ShootFireball
	BEQ.b CODE_22E70C
	CMP.b #!Define_SMAS_Sound0063_CannonShoot
	BNE.b CODE_22E72A
CODE_22E70C:
	ORA.w $120F
	STA.w !REGISTER_APUPort3
	LDA.w $120F
	EOR.b #$80
	STA.w $120F
	STZ.w $120D
CODE_22E71D:
	STZ.w !RAM_SMB3_Global_SoundCh1
	STZ.w !RAM_SMB3_Global_SoundCh2
	STZ.w !RAM_SMB3_Global_MusicCh1
	STZ.w !RAM_SMB3_Global_SoundCh3
	RTL

CODE_22E72A:
	STA.w !REGISTER_APUPort3
	STZ.w !RAM_SMB3_Global_SoundCh1
	STZ.w !RAM_SMB3_Global_SoundCh2
	STZ.w !RAM_SMB3_Global_MusicCh1
	STZ.w !RAM_SMB3_Global_SoundCh3
	RTL

CODE_22E73A:
	LDY.w !REGISTER_APUPort2
	CPY.w $1206
	BNE.b CODE_22E6D3
	DEC.w $120C
	LDA.w $120C
	BNE.b CODE_22E6D3
	INC.w $120C
	STA.w !REGISTER_APUPort2
	BRA.b CODE_22E6D3

%FREE_BYTES(NULLROM, 2222, $FF)

;--------------------------------------------------------------------

; Note: Something throne room related.

CODE_22F000:
	JSR.w CODE_22F004
	RTL

CODE_22F004:
	LDA.w $05FD
	LSR
	BNE.b CODE_22F068
	LDX.b #$00
	JSL.l CODE_279C97
	LDA.b #$81
	STA.w $05F3
	LDA.b #$20
	STA.b $A2
	LDA.b #$50
	STA.w $070B
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	LDA.b #$43
else
	LDA.b #$64
endif
	STA.w $070C
	STZ.w $02D4
	LDA.b #$A8
	STA.b $5F
	STZ.w $02E2
	LDA.b #$00
	LDY.w !RAM_SMB3_Global_CurrentWorld
	CPY.b #$01
	BNE.b CODE_22F037
	DEC
CODE_22F037:
	STA.w $077B
	STZ.w $02E1
	LDY.w !RAM_SMB3_Global_CurrentWorld
	LDA.w DATA_21FC0E,y
	STA.w $1021
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	LDX.b #$00
else
	LDX.b #$02
endif
	LDA.b #$D8
	STA.b $8C,x
	STZ.b $4F,x
	STZ.b $5F,x
	STZ.w $0669
	LDA.b #$07
	STA.w $0518,x
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	INX
else
	DEX
endif
	LDA.b #$F0
	STA.b $8C,x
	STZ.b $4F,x
	STZ.b $5F,x
	STZ.w $0669,x
	INC.w $05FD
	RTS

CODE_22F068:
	STZ.w !RAM_SMB3_Level_FireSpr_CurrentState
	STZ.w !RAM_SMB3_Level_FireSpr_CurrentState+$01
	DEC.b $A2
	LDA.b $A2
	BPL.b CODE_22F076
	STZ.b $A2
CODE_22F076:
	LDA.b #$02
	STA.w !RAM_SMB3_Level_Player_FreezePlayerTimer
	LDA.w $009C
	BNE.b CODE_22F086
	JSR.w CODE_22F371
	JSR.w CODE_22F089
CODE_22F086:
	JMP.w CODE_22F1C2

CODE_22F089:
	LDA.b $4D
	JSL.l SMB3_ExecutePtr_Absolute

DATA_22F08F:
	dw CODE_22F095
	dw CODE_22F113
	dw CODE_22F197

CODE_22F095:
	LDA.b $A2
	BNE.b CODE_22F09E
	LDA.w $077B
	BPL.b CODE_22F09F
CODE_22F09E:
	RTS

CODE_22F09F:
	LDX.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	LDA.w $070B
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,x
	LDA.w $070C
	STA.w SMB3_StripeImageUploadTable[$00].HighByte,x
	CLC
	ADC.b #$20
	STA.w $070C
	BCC.b CODE_22F0B9
	INC.w $070B
CODE_22F0B9:
	LDA.b #$00
	STA.w SMB3_StripeImageUploadTable[$01].LowByte,x
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	LDA.b #$31
else
	LDA.b #$2F
endif
	STA.w SMB3_StripeImageUploadTable[$01].HighByte,x
	INC
	LSR
	STA.b $00
	LDY.w $02D4
	LDA.w SMB3_ThroneRoomToadTextBoxWindowRowIndex,y
	TAY
CODE_22F0CE:
	REP.b #$20
	LDA.w SMB3_ThroneRoomTextBoxStripeImage,y
	STA.w SMB3_StripeImageUploadTable[$02].LowByte,x
	SEP.b #$20
	INY
	INY
	INX
	INX
	DEC.b $00
	BNE.b CODE_22F0CE
	LDA.b #$FF
	STA.w SMB3_StripeImageUploadTable[$02].LowByte,x
	INX
	INX
	INX
	INX
	STX.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	INC.w $02D4
	LDA.w $02D4
	CMP.b #SMB3_ThroneRoomToadTextBoxWindowRowIndex_End-SMB3_ThroneRoomToadTextBoxWindowRowIndex
	BCC.b CODE_22F112
	LDA.b #SMB3_ThroneRoomToadText_TopHalf_EnterThroneRoom-SMB3_ThroneRoomToadText
	LDY.w !RAM_SMB3_Overworld_OWSpr_SpriteID
	BNE.b CODE_22F0FF
	LDA.b #SMB3_ThroneRoomToadText_TopHalf_ReEnterThroneRoom-SMB3_ThroneRoomToadText
CODE_22F0FF:
	STA.w $02D4
	LDA.b #$50
	STA.w $070B
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	LDA.b #$65
else
	LDA.b #$85
endif
	STA.w $070C
	LDA.b #$10
	STA.b $A2
	INC.b $4D
CODE_22F112:
	RTS

CODE_22F113:
	LDA.b $A2
	BEQ.b CODE_22F11A
	JMP.w CODE_22F196

CODE_22F11A:
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) == $00
	REP.b #$10
endif
	LDX.w $02D4
	LDA.w SMB3_ThroneRoomToadText_TopHalf,x
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) == $00
	STA.b $00
	SEP.b #$10
endif
	LDY.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	STA.w SMB3_StripeImageUploadTable[$02].LowByte,y
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	LDA.w SMB3_ThroneRoomToadText_LowerHalf,x
	STA.w SMB3_StripeImageUploadTable[$03].LowByte,y
endif
	LDA.b #$21
	STA.w SMB3_StripeImageUploadTable[$02].HighByte,y
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	STA.w SMB3_StripeImageUploadTable[$03].HighByte,y
endif
	LDA.w $070B
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,y
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	LDA.b #$80
else
	LDA.b #$00
endif
	STA.w SMB3_StripeImageUploadTable[$01].LowByte,y
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	LDA.b #$03
else
	LDA.b #$01
endif
	STA.w SMB3_StripeImageUploadTable[$01].HighByte,y
	LDA.b #$FF
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	STA.w SMB3_StripeImageUploadTable[$04].LowByte,y	
else
	STA.w SMB3_StripeImageUploadTable[$03].LowByte,y
endif
	TYA
	CLC
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	ADC.b #$08
else
	ADC.b #$06
endif
	STA.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	LDA.w $070C
	STA.w SMB3_StripeImageUploadTable[$00].HighByte,y
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	INC.w $02D4
else
	REP.b #$20
	INC.w $02D4
	SEP.b #$20
endif
	INC.w $070C
	LDA.w $070C
	AND.b #$1F
	CMP.b #$1B
	BNE.b CODE_22F179
	LDA.w $070C
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	ADC.b #$29
else
	ADC.b #$09
endif
	STA.w $070C
	BCC.b CODE_22F173
	INC.w $070B
CODE_22F173:
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	CMP.b #$65
else
	CMP.b #$45
endif
	BNE.b CODE_22F179
	INC.b $4D
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	STZ.w $02D4
	STZ.w $02D5
endif
CODE_22F179:
	LDA.w !RAM_SMB3_Overworld_OWSpr_SpriteID
	BNE.b CODE_22F18A
	LDY.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.w !RAM_SMB3_Global_ControllerPress2P1,y
	ORA.b !RAM_SMB3_Global_ControllerPress1
	AND.b #!Joypad_A|(!Joypad_B>>8)
	BNE.b CODE_22F1A3
CODE_22F18A:
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDY.b #$03
else
	LDY.b #$04
endif
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	LDA.w SMB3_ThroneRoomToadText_TopHalf,x
else
	LDA.b $00
endif
	CMP.b #$FE
	BNE.b CODE_22F194
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	LDA.w SMB3_ThroneRoomToadText_LowerHalf,x
	CMP.b #$FE
	BNE.b CODE_22F194
endif
	LDY.b #$01
CODE_22F194:
	STY.b $A2
CODE_22F196:
	RTS

CODE_22F197:
	LDY.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.w !RAM_SMB3_Global_ControllerPress2P1,y
	ORA.b !RAM_SMB3_Global_ControllerPress1
	AND.b #!Joypad_A|(!Joypad_B>>8)
	BEQ.b CODE_22F1C1
CODE_22F1A3:
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) == $00
	STZ.w $02D4
	STZ.w $02D5
endif
	LDA.w !RAM_SMB3_Overworld_OWSpr_SpriteID
	BEQ.b CODE_22F1BB
	LDA.b #!Define_SMB3_SpriteID_OWSpr02_Airship
	STA.w !RAM_SMB3_Overworld_OWSpr_SpriteID+$01
	INC
	STA.w $0414
	STZ.w !RAM_SMB3_Overworld_OWSpr_SpriteID
	RTS

CODE_22F1BB:
	STZ.w $0713
	INC.w $0014
CODE_22F1C1:
	RTS

CODE_22F1C2:
	LDY.b #$0E
	REP.b #$20
CODE_22F1C6:
	LDA.w DATA_21FBE1,y
	STA.w SMB3_OAMBuffer[$20].XDisp,y
	DEY
	DEY
	BPL.b CODE_22F1C6
	SEP.b #$20
	LDX.b #$00
	LDY.b #$0C
CODE_22F1D6:
	LDA.w SMB3_OAMBuffer[$20].YDisp,y
	CLC
	ADC.b $5F,x
	STA.w SMB3_OAMBuffer[$20].YDisp,y
	DEY
	DEY
	DEY
	DEY
	BPL.b CODE_22F1D6
	LDY.w $0669,x
	LDX.w DATA_21FBFD,y
	LDY.b #$0C
CODE_22F1ED:
	LDA.w DATA_21FBF1,x
	STA.w SMB3_OAMBuffer[$20].Tile,y
	INX
	DEY
	DEY
	DEY
	DEY
	BPL.b CODE_22F1ED
	LDX.b #$03
	LDA.b #$02
CODE_22F1FE:
	STA.w SMB3_OAMTileSizeBuffer[$20].Slot,x
	DEX
	BPL.b CODE_22F1FE
	LDY.b #$00
	LDA.w !RAM_SMB3_Global_CurrentWorld
	CMP.b #$01
	BEQ.b CODE_22F216
	LDX.b #$01
	LDA.w $0669,x
	BEQ.b CODE_22F216
	LDY.b #$10
CODE_22F216:
	STY.b $06
	LDA.b #$10
	STA.b $03
	LDX.b #$00
	LDY.b #$B4
CODE_22F220:
	LDA.w DATA_21FCC5,x
	STA.w SMB3_OAMBuffer[$2D].XDisp-$B4,y
	INY
	INX
	DEC.b $03
	BNE.b CODE_22F220
	LDX.b #$03
	LDA.b #$02
CODE_22F230:
	STA.w SMB3_OAMTileSizeBuffer[$2D].Slot,x
	DEX
	BPL.b CODE_22F230
	LDA.b #$03
	STA.b $03
	STA.b $04
	LDY.w !RAM_SMB3_Global_CurrentWorld
	LDX.b #$B4
CODE_22F241:
	LDA.w SMB3_OAMBuffer[$00].XDisp,x
	CLC
	ADC.w DATA_21FC00,y
	PHX
	LDX.b #$01
	CLC
	ADC.b $5F,x
	PLX
	STA.w SMB3_OAMBuffer[$00].XDisp,x
	LDA.w SMB3_OAMBuffer[$00].YDisp,x
	CLC
	ADC.w DATA_21FC07,y
	CLC
	ADC.w $02E2
	STA.w SMB3_OAMBuffer[$00].YDisp,x
	INX
	INX
	INX
	INX
	DEC.b $03
	BPL.b CODE_22F241
	LDY.w !RAM_SMB3_Global_CurrentWorld
	LDA.w DATA_21FC0E,y
	STA.b $05
	LDY.w $1021
	LDA.w $02E1
	BNE.b CODE_22F28C
	DEY
	CPY.b $05
	BPL.b CODE_22F283
	LDA.b $05
	CLC
	ADC.b #$07
	TAY
CODE_22F283:
	STY.w $1021
	LDA.w DATA_21FD0D,y
	STA.w $02E1
CODE_22F28C:
	LDA.w DATA_21FCD5,y
	CLC
	ADC.b $06
	STA.b $03
	TAX
	LDY.b #$B4
CODE_22F297:
	LDA.w DATA_21FC15,x
	BNE.b CODE_22F2A3
	LDA.b #$F0
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	BRA.b CODE_22F2AC

CODE_22F2A3:
	STA.w SMB3_OAMBuffer[$00].Tile,y
	LDA.w DATA_21FC6D,x
	STA.w SMB3_OAMBuffer[$00].Prop,y
CODE_22F2AC:
	INX
	INY
	INY
	INY
	INY
	DEC.b $04
	BPL.b CODE_22F297
	DEC.w $02E1
	LDA.b $03
	LSR
	LSR
	TAY
	LDA.b #$00
	CPY.b #$02
	BEQ.b CODE_22F2CB
	CPY.b #$03
	BEQ.b CODE_22F2CB
	CPY.b #$12
	BCC.b CODE_22F2CD
CODE_22F2CB:
	LDA.b #$40
CODE_22F2CD:
	STA.b $02
	LDX.b #$B4
	LDA.w SMB3_OAMBuffer[$00].XDisp,x
	STA.b $00
	LDA.w SMB3_OAMBuffer[$00].YDisp,x
	STA.b $01
	LDX.b #$C4
	LDA.w !RAM_SMB3_Global_CurrentWorld
	CMP.b #$01
	BEQ.b CODE_22F2EC
	CMP.b #$06
	BEQ.b CODE_22F2EE
	CMP.b #$03
	BCC.b CODE_22F2EE
CODE_22F2EC:
	LDX.b #$B0
CODE_22F2EE:
	LDA.b $00
	CLC
	ADC.w DATA_21FD5B,y
	STA.w SMB3_OAMBuffer[$00].XDisp,x
	LDA.b $01
	CLC
	ADC.w DATA_21FD45,y
	STA.w SMB3_OAMBuffer[$00].YDisp,x
	LDA.b #$8E
	CPY.b #$07
	BNE.b CODE_22F307
	DEC
CODE_22F307:
	STA.w SMB3_OAMBuffer[$00].Tile,x
	LDA.b #$23
	ORA.b $02
	STA.w SMB3_OAMBuffer[$00].Prop,x
	TXA
	LSR
	LSR
	TAY
	LDA.b #$02
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	LDA.w !RAM_SMB3_Global_CurrentWorld
	CMP.b #$01
	BEQ.b CODE_22F322
	RTS

CODE_22F322:
	LDA.b #$10
	STA.b $02
	LDA.b #$6E
	STA.b $01
	LDA.b #$2D
	STA.b $03
	LDA.b #$3C
	STA.b $04
	LDY.b #$40
CODE_22F334:
	LDA.b #$C8
	STA.w SMB3_OAMBuffer[$2C].XDisp,y
	LDA.b $02
	STA.w SMB3_OAMBuffer[$2C].YDisp,y
	LDA.b $01
	STA.w SMB3_OAMBuffer[$2C].Tile,y
	LDA.b $03
	STA.w SMB3_OAMBuffer[$2C].Prop,y
	PHY
	LDY.b $04
	LDA.b #$02
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	INC.b $04
	PLY
	INY
	INY
	INY
	INY
	LDA.b $02
	CLC
	ADC.b #$10
	STA.b $02
	CMP.b #$50
	BCC.b CODE_22F334
	CMP.b #$60
	BEQ.b CODE_22F370
	LDA.b #$2E
	STA.b $01
	LDA.b #$2C
	STA.b $03
	BRA.b CODE_22F334

CODE_22F370:
	RTS

CODE_22F371:
	LDX.b #$00
	LDA.w $0669
	CMP.b #$01
	BEQ.b CODE_22F397
	LDA.w $0518,x
	BNE.b CODE_22F3B6
	LDA.w $0669
	BEQ.b CODE_22F38E
	STZ.w $0669
	LDA.b #$07
	STA.w $0518,x
	BRA.b CODE_22F3B6

CODE_22F38E:
	INC.w $0669
	LDA.b #$D8
	STA.b $8C,x
	STZ.b $5F,x
CODE_22F397:
	STX.b $9B
	LDA.b $8C,x
	CLC
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	ADC.b #$05
else
	ADC.b #$04
endif
	STA.b $8C,x
	JSL.l CODE_27A7F0
	LDA.b $5F,x
	BNE.b CODE_22F3B6
	STZ.b $8C,x
	STZ.b $4F,x
	LDA.b #$02
	STA.w $0669
	LDA.b #$07
	STA.w $0518,x
CODE_22F3B6:
	LDA.w !RAM_SMB3_Global_CurrentWorld
	JSL.l SMB3_ExecutePtr_Absolute

DATA_22F3BD:
	dw CODE_22F421
	dw CODE_22F3D1
	dw CODE_22F420
	dw CODE_22F420
	dw CODE_22F420
	dw CODE_22F421
	dw CODE_22F420

CODE_22F3CB:
	RTS

DATA_22F3CC:
	db $00,$F4,$F8,$F8,$F8

CODE_22F3D1:
	LDX.b #$01
	LDA.w $077B
	BEQ.b CODE_22F420
	LDA.w $02E2
	CMP.b #$30
	BCS.b CODE_22F3F0
	INC.w $02E2
	LDA.w $02E2
	STA.b $71,x
	STZ.b $9E,x
	STZ.w $0761,x
	STZ.w $0669,x
	RTS

CODE_22F3F0:
	STX.b $9B
	LDA.b $9E,x
	CLC
	ADC.b #$01
	STA.b $9E,x
	JSL.l CODE_27A7E5
	LDA.w $0071,x
	STA.w $02E2
	CMP.b #$60
	BCC.b CODE_22F420
	INC.w $0669,x
	LDA.w $0669,x
	TAX
	PHX
	LDA.l DATA_22F3CC,x
	LDX.b $9B
	STA.w $009E,x
	PLX
	CPX.b #$04
	BNE.b CODE_22F420
	INC.w $077B
CODE_22F420:
	RTS

CODE_22F421:
	LDX.b #$01
	STX.b $9B
	JSL.l CODE_27A7F0
	LDA.b $5F,x
	CMP.b #$E0
	BNE.b CODE_22F43C
	LDA.b #$10
	STA.b $8C,x
	STZ.b $4F,x
	LDA.b #$01
	STA.w $0669,x
	BRA.b CODE_22F449

CODE_22F43C:
	CMP.b #$00
	BNE.b CODE_22F449
	LDA.b #$F0
	STA.b $8C,x
	STZ.b $4F,x
	STZ.w $0669,x
CODE_22F449:
	RTS

if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
SMB3_StripeImage20_CheckerFloor:
.Main:
;$22F44A
	db $0B,$00,$01,$BF
	db $95,$22,$95,$22,$96,$22,$96,$22,$95,$22,$95,$22,$96,$22,$96,$22
	db $95,$22,$95,$22,$96,$22,$96,$22,$95,$22,$95,$22,$96,$22,$96,$22
	db $95,$22,$95,$22,$96,$22,$96,$22,$95,$22,$95,$22,$96,$22,$96,$22
	db $95,$22,$95,$22,$96,$22,$96,$22,$95,$22,$95,$22,$96,$22,$96,$22
	db $F6,$22,$F6,$22,$F7,$22,$F7,$22,$F6,$22,$F6,$22,$F7,$22,$F7,$22
	db $F6,$22,$F6,$22,$F7,$22,$F7,$22,$F6,$22,$F6,$22,$F7,$22,$F7,$22
	db $F6,$22,$F6,$22,$F7,$22,$F7,$22,$F6,$22,$F6,$22,$F7,$22,$F7,$22
	db $F6,$22,$F6,$22,$F7,$22,$F7,$22,$F6,$22,$F6,$22,$F7,$22,$F7,$22
	db $F8,$22,$F8,$22,$F9,$22,$F9,$22,$F8,$22,$F8,$22,$F9,$22,$F9,$22
	db $F8,$22,$F8,$22,$F9,$22,$F9,$22,$F8,$22,$F8,$22,$F9,$22,$F9,$22
	db $F8,$22,$F8,$22,$F9,$22,$F9,$22,$F8,$22,$F8,$22,$F9,$22,$F9,$22
	db $F8,$22,$F8,$22,$F9,$22,$F9,$22,$F8,$22,$F8,$22,$F9,$22,$F9,$22
	db $FD,$20,$FD,$20,$FC,$20,$FC,$20,$FD,$20,$FD,$20,$FC,$20,$FC,$20
	db $FD,$20,$FD,$20,$FC,$20,$FC,$20,$FD,$20,$FD,$20,$FC,$20,$FC,$20
	db $FD,$20,$FD,$20,$FC,$20,$FC,$20,$FD,$20,$FD,$20,$FC,$20,$FC,$20
	db $FD,$20,$FD,$20,$FC,$20,$FC,$20,$FD,$20,$FD,$20,$FC,$20,$FC,$20
	db $FC,$20,$FC,$20,$FD,$20,$FD,$20,$FC,$20,$FC,$20,$FD,$20,$FD,$20
	db $FC,$20,$FC,$20,$FD,$20,$FD,$20,$FC,$20,$FC,$20,$FD,$20,$FD,$20
	db $FC,$20,$FC,$20,$FD,$20,$FD,$20,$FC,$20,$FC,$20,$FD,$20,$FD,$20
	db $FC,$20,$FC,$20,$FD,$20,$FD,$20,$FC,$20,$FC,$20,$FD,$20,$FD,$20
	db $FC,$20,$FC,$20,$FD,$20,$FD,$20,$FC,$20,$FC,$20,$FD,$20,$FD,$20
	db $FC,$20,$FC,$20,$FD,$20,$FD,$20,$FC,$20,$FC,$20,$FD,$20,$FD,$20
	db $FC,$20,$FC,$20,$FD,$20,$FD,$20,$FC,$20,$FC,$20,$FD,$20,$FD,$20
	db $FC,$20,$FC,$20,$FD,$20,$FD,$20,$FC,$20,$FC,$20,$FD,$20,$FD,$20
	db $FD,$20,$FD,$20,$FC,$20,$FC,$20,$FD,$20,$FD,$20,$FC,$20,$FC,$20
	db $FD,$20,$FD,$20,$FC,$20,$FC,$20,$FD,$20,$FD,$20,$FC,$20,$FC,$20
	db $FD,$20,$FD,$20,$FC,$20,$FC,$20,$FD,$20,$FD,$20,$FC,$20,$FC,$20
	db $FD,$20,$FD,$20,$FC,$20,$FC,$20,$FD,$20,$FD,$20,$FC,$20,$FC,$20

	db $FF

%FREE_BYTES(NULLROM, 2545, $FF)
elseif !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
%FREE_BYTES(NULLROM, 2991, $FF)
else
%FREE_BYTES(NULLROM, 2998, $FF)
endif
%BANK_END(<EndBank>)
endmacro

;#############################################################################################################
;#############################################################################################################

macro SMB3Bank23Macros(StartBank, EndBank)
%BANK_START(<StartBank>)
CODE_238000:
	RTL

;--------------------------------------------------------------------

CODE_238001:
	LDY.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDX.b #$00
	CPY.b #$00
	BEQ.b CODE_23800C
	LDX.b #$0B
CODE_23800C:
	LDY.b #$00
CODE_23800E:
	LDA.w DATA_218AE9,x
	STA.w SMB3_StripeImageUploadTable[$02].LowByte,y
	INX
	INY
	CPY.b #$0B
	BNE.b CODE_23800E
	LDA.b #$51
	STA.w SMB3_StripeImageUploadTable[$00].LowByte
	STZ.w SMB3_StripeImageUploadTable[$01].LowByte
	LDA.b #$09
	STA.w SMB3_StripeImageUploadTable[$01].HighByte
	LDA.b #$2A
	STA.w SMB3_StripeImageUploadTable[$00].HighByte
	LDA.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	CLC
	ADC.b #$0E
	STA.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	RTL

;--------------------------------------------------------------------

CODE_238036:
	LDX.b #$51
	STX.w SMB3_StripeImageUploadTable[$00].LowByte
	LDA.b #$52
	STA.w SMB3_StripeImageUploadTable[$00].HighByte
	STZ.w SMB3_StripeImageUploadTable[$01].LowByte
	LDA.b #$01
	STA.w SMB3_StripeImageUploadTable[$01].HighByte
	LDA.w !RAM_SMB3_Global_CurrentWorld
	INC
	ORA.b #$F0
	STA.w SMB3_StripeImageUploadTable[$02].LowByte
	STX.w SMB3_StripeImageUploadTable[$03].LowByte
	LDA.b #$B4
	STA.w SMB3_StripeImageUploadTable[$03].HighByte
	STZ.w SMB3_StripeImageUploadTable[$04].LowByte
	LDA.b #$03
	STA.w SMB3_StripeImageUploadTable[$04].HighByte
	LDA.w $1F4A
	CMP.b #$AD
	BNE.b CODE_23806A
	LDA.b #$0E
CODE_23806A:
	AND.b #$0F
	ORA.b #$F0
	STA.w SMB3_StripeImageUploadTable[$05].LowByte
	LDA.w $1F4B
	AND.b #$0F
	ORA.b #$F0
	STA.w SMB3_StripeImageUploadTable[$06].LowByte
	LDA.b #$01
	STA.w SMB3_StripeImageUploadTable[$02].HighByte
	STA.w SMB3_StripeImageUploadTable[$05].HighByte
	STA.w SMB3_StripeImageUploadTable[$06].HighByte
	LDA.b #$FF
	STA.w SMB3_StripeImageUploadTable[$07].LowByte
	RTL

;--------------------------------------------------------------------

CODE_23808C:
	LDX.b #$80
	STX.w !REGISTER_VRAMAddressIncrementValue
	STZ.w !REGISTER_IRQNMIAndJoypadEnableFlags
	REP.b #$30
	LDA.w #$0840
	STA.w !REGISTER_VRAMAddressLo
	LDY.w #$0260
	LDA.w #$00FF
CODE_2380A2:
	STA.w !REGISTER_WriteToVRAMPortLo
	DEY
	BNE.b CODE_2380A2
	SEP.b #$30
	RTL

;--------------------------------------------------------------------

CODE_2380AB:
	JSL.l SMB3_DrawWorld5CloudSprite_Main
	LDA.w !RAM_SMB3_Overworld_CurrentProcess
	CMP.b #$0D
	BNE.b CODE_23810B
	LDX.w !RAM_SMB3_Global_CurrentWorld
	LDY.w WorldMapMusic,x
	CPX.b #$04
	BNE.b CODE_2380C9
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b !RAM_SMB3_Overworld_Mario_XPosHi,x
	BEQ.b CODE_2380C9
	LDY.b #!Define_SMB3_OverworldMusic_CloudBonusRoom
CODE_2380C9:
	LDA.w !RAM_SMB3_Overworld_ActiveMusicBoxFlag
	BEQ.b CODE_2380D0
	LDY.b #!Define_SMB3_OverworldMusic_MusicBox
CODE_2380D0:
	LDA.w $1206
	BPL.b CODE_2380E0
	CMP.b #!Define_SMB3_LevelMusic_LowerVolumeCommand
	BEQ.b CODE_2380E0
	CMP.b #!Define_SMB3_LevelMusic_RestoreVolumeCommand
	BEQ.b CODE_2380E0
	STY.w !RAM_SMB3_Global_MusicCh1
CODE_2380E0:
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b !RAM_SMB3_Overworld_Mario_MovementTimer,x
	BNE.b CODE_238102
	LDA.l !RAM_SMB3_Overworld_AutoMoveWhenDirectionHeldTimer,x
	CMP.b #$18
	BEQ.b CODE_2380F8
	LDA.l !RAM_SMB3_Overworld_AutoMoveWhenDirectionHeldTimer,x
	INC
	STA.l !RAM_SMB3_Overworld_AutoMoveWhenDirectionHeldTimer,x
CODE_2380F8:
	LDA.b !RAM_SMB3_Global_ControllerHold1
	BNE.b CODE_238102
	LDA.b #$FF
	STA.l !RAM_SMB3_Overworld_AutoMoveWhenDirectionHeldTimer,x
CODE_238102:
	LDA.b !RAM_SMB3_Overworld_CurrentWarpWhistleState
	BEQ.b CODE_23810B
	JSL.l CODE_29A833
	RTL

CODE_23810B:
	LDA.w !RAM_SMB3_Overworld_ScrollMapTimer
	BEQ.b CODE_238113
	JMP.w CODE_2381ED

CODE_238113:
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b !RAM_SMB3_Overworld_Mario_MovementTimer,x
	BEQ.b CODE_23811D
	JMP.w CODE_238226

CODE_23811D:
	LDA.w !RAM_SMB3_Overworld_CurrentProcess
	CMP.b #$0D
	BEQ.b CODE_238127
	JMP.w CODE_238226

CODE_238127:
	LDA.w $0349
	BEQ.b CODE_238132
	DEC.w $0349
	JMP.w CODE_23818F

CODE_238132:
	LDA.w !RAM_SMB3_Global_CurrentWorld
	CMP.b #$08
	BEQ.b CODE_23818F
	LDA.w !RAM_SMB3_Level_PauseMenuStatus
	CMP.b #$01
	BEQ.b CODE_23818F
	CMP.b #$03
	BEQ.b CODE_23818F
	LDA.b !RAM_SMB3_Global_ControllerPress1
	AND.b #!Joypad_Start>>8
	BEQ.b CODE_23818F
	LDA.w !RAM_SMB3_Level_PauseMenuStatus
	BNE.b CODE_238177
	LDA.w !RAM_SMB3_Overworld_EnableDarknessFlag
	BEQ.b CODE_238175
	LDA.b #$04
	STA.w $0291
	JSL.l CODE_2AF9A9
	LDA.b #$03
	STA.w !RAM_SMB3_Global_BG1And2WindowMaskSettingsMirror
CODE_238162:
	JSL.l CODE_2AFA63
	JSL.l CODE_20804D
	LDA.w $1050
	BPL.b CODE_238162
	STZ.w $1050
	STZ.w !RAM_SMB3_Global_HDMAEnableMirror
CODE_238175:
	BRA.b CODE_238177

CODE_238177:
	JSL.l CODE_29EBB7
	LDA.w !RAM_SMB3_Overworld_EnableDarknessFlag
	BEQ.b CODE_23818F
	LDA.b #$13
	STA.w !RAM_SMB3_Global_MainScreenLayersMirror
	LDA.b #$23
	STA.w !RAM_SMB3_Global_BG1And2WindowMaskSettingsMirror
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) == $00
	LDA.b #$33
	STA.w !RAM_SMB3_Global_ObjectAndColorWindowSettingsMirror
endif
CODE_23818F:
	LDA.w !RAM_SMB3_Level_PauseMenuStatus
	BEQ.b CODE_2381D1
	JSL.l CODE_29EBF7
	LDA.w !RAM_SMB3_Overworld_EnableDarknessFlag
	BEQ.b CODE_2381CF
	LDA.w !RAM_SMB3_Level_PauseMenuStatus
	BNE.b CODE_2381CF
	LDA.b #$05
	STA.w $0291
	JSL.l CODE_2AF9A9
	LDA.w !RAM_SMB3_Overworld_EnableDarknessFlag
	BEQ.b CODE_2381BF
	LDA.b #$23
	STA.w !RAM_SMB3_Global_BG1And2WindowMaskSettingsMirror
	LDA.b #$03
	STA.w !RAM_SMB3_Global_BG3And4WindowMaskSettingsMirror
	LDA.b #$30
	STA.w !RAM_SMB3_Global_ObjectAndColorWindowSettingsMirror
CODE_2381BF:
	JSL.l CODE_2AFA63
	JSL.l CODE_20804D
	LDA.w $1050
	BPL.b CODE_2381BF
	STZ.w $1050
CODE_2381CF:
	BRA.b CODE_238226

CODE_2381D1:
	LDY.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.w !RAM_SMB3_Global_ControllerPress2P1,y
	ORA.b !RAM_SMB3_Global_ControllerPress1
	AND.b #!Joypad_X|(!Joypad_Y>>8)
	BEQ.b CODE_238226
	LDA.b #!Define_SMAS_Sound0063_OverworldSwitchBlockEjection
	STA.w !RAM_SMB3_Global_SoundCh3
	LDA.w !RAM_SMB3_Global_OpenReserveBoxFlag
	EOR.b #$01
	STA.w !RAM_SMB3_Global_OpenReserveBoxFlag
	BRL.w CODE_238C1B

CODE_2381ED:
	LDA.w $0417
	BEQ.b CODE_2381F9
	JSL.l CODE_238891
	BRL.w CODE_238C1B

CODE_2381F9:
	LDY.b $25
	LDA.w $0210
	CLC
	ADC.w DATA_218AFF,y
	STA.w $0210
	STA.b $B7
	LDA.w $0211
	ADC.w DATA_218B01,y
	STA.w $0211
	STA.b $12
	JSL.l CODE_2097BA
	JSL.l CODE_209D1F
	JSL.l CODE_238DD7
	DEC.w !RAM_SMB3_Overworld_ScrollMapTimer
	DEC.w !RAM_SMB3_Overworld_ScrollMapTimer
	BEQ.b CODE_23822B
CODE_238226:
	LDA.w $0417
	BEQ.b CODE_23823E
CODE_23822B:
	JSL.l CODE_238891
	JSL.l CODE_238C1B
	LDA.w $0417
	BNE.b CODE_23823E
	LDA.b #$01
	STA.w $0728
	RTL

CODE_23823E:
	LDA.w $0500
	BNE.b CODE_238269
	LDY.b #$0D
CODE_238245:
	LDA.w !RAM_SMB3_Overworld_OWSpr_InitialYPosLo,y
	STA.w !RAM_SMB3_Overworld_OWSpr_YPosLo,y
	LDA.w !RAM_SMB3_Overworld_OWSpr_InitialXPosHi,y
	STA.w !RAM_SMB3_Overworld_OWSpr_XPosHi,y
	LDA.w !RAM_SMB3_Overworld_OWSpr_InitialXPosLo,y
	STA.w !RAM_SMB3_Overworld_OWSpr_XPosLo,y
	LDA.w !RAM_SMB3_Overworld_OWSpr_SpriteID,y
	CMP.b #!Define_SMB3_SpriteID_OWSpr10_Canoe
	BCS.b CODE_238266
	LDA.w !RAM_SMB3_Global_RandomByte02,y
	AND.b #$03
	STA.w $052D,y
CODE_238266:
	DEY
	BPL.b CODE_238245
CODE_238269:
	LDA.w !RAM_SMB3_Level_PauseMenuStatus
	BEQ.b CODE_23826F
	RTL

CODE_23826F:
	LDA.w !RAM_SMB3_Overworld_CurrentProcess
	JSL.l SMB3_ExecutePtr_Long

DATA_238275:
	dl CODE_2382C5			; 00 Appear on Title card
	dl CODE_238631			; 01 Initialize player (?)
	dl CODE_29AC7A			; 02 Kicked back to last completed level on current screen
	dl CODE_29ADFC			; 03 Kicked back to last completed level on different screen (Part 1)
	dl CODE_29AE52			; 04 Kicked back to last completed level on different screen (Part 2)
	dl CODE_29AEAA			; 05 Kicked back to last completed level on different screen (Part 3)
	dl CODE_23863B			; 06 Beat level (Part 1)
	dl CODE_29AF05			; 07 Beat level (Part 2)
	dl CODE_238652			; 08 Beat level (Part 3)
	dl CODE_29B17F			; 09 Beat level (Part 4)
	dl CODE_23863B			; 0A Beat level (Part 5)
	dl CODE_2387E4			; 0B Beat level (Part 6)
	dl CODE_23882E			; 0C Beat level (Part 7)
	dl CODE_238A4E			; 0D Normal
	dl CODE_29A9AE			; 0E Hand pulls Mario into level

;--------------------------------------------------------------------

	%ROUTINE_SMB3_DrawWorld5CloudSprite(NULLROM)					; $2382A3

;--------------------------------------------------------------------

CODE_2382C5:
	LDA.w $0728
	JSL.l SMB3_ExecutePtr_Absolute

DATA_2382CC:
	dw CODE_2382D2
	dw CODE_238338
	dw CODE_2383D1

CODE_2382D2:
	JSR.w CODE_238306
	LDA.w $0711
	BNE.b CODE_2382E3
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$68
else
	LDA.b #$80
endif
	STA.w $0711
	JSL.l CODE_2AF800
CODE_2382E3:
	DEC.w $0711
	BNE.b CODE_2382EE
	INC.w $0285
	INC.w $0728
CODE_2382EE:
	JSL.l CODE_2AF867
	RTL

;--------------------------------------------------------------------

CODE_2382F3:
	LDA.w $0711
	BNE.b CODE_2382FD
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$68
else
	LDA.b #$80
endif
	STA.w $0711
CODE_2382FD:
	DEC.w $0711
	BNE.b CODE_238305
	INC.w $0728
CODE_238305:
	RTL

;--------------------------------------------------------------------

CODE_238306:
	LDY.b #$03
CODE_238308:
	LDA.w DATA_218B14,y
	STA.w SMB3_OAMBuffer[$21].XDisp,y
	DEY
	BPL.b CODE_238308
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	BEQ.b CODE_238329
	LDY.b #$03
	LDA.w SMB3_OAMBuffer[$21].XDisp,y
	ORA.b #$01
	STA.w SMB3_OAMBuffer[$21].XDisp,y
	LDA.w $0747,x
	CLC
	ADC.b #$07
	TAY
	BRA.b CODE_23832C

CODE_238329:
	LDY.w $0747,x
CODE_23832C:
	LDA.w DATA_218B18,y
	STA.w SMB3_OAMBuffer[$21].Tile
	LDA.b #$02
	STA.w SMB3_OAMTileSizeBuffer[$21].Slot
	RTS

;--------------------------------------------------------------------

CODE_238338:
	JSL.l CODE_2AF867
	RTL

;--------------------------------------------------------------------

CODE_23833D:
	LDA.b $20
	BNE.b CODE_23836A
	LDA.b $23
	AND.b #$08
	CLC
	ADC.b #$34
	STA.b $20
	LDA.b $24
	AND.b #$F0
	LSR
	LSR
	LSR
	TAY
	LDA.w DATA_218200,y
	STA.b $2E
	LDA.w DATA_218200+$01,y
	STA.b $2F
	INC.b $2F
	LDA.b #$7E2000>>16
	STA.b $30
	LDA.b #$08
	STA.b $9B
	LDA.b #$02
	STA.b $92
CODE_23836A:
	REP.b #$20
	LDA.w #$20FF
	STA.w SMB3_StripeImageUploadTable[$02].LowByte
	STA.w SMB3_StripeImageUploadTable[$05].LowByte
	SEP.b #$20
	LDA.b #$11
	STA.w SMB3_StripeImageUploadTable[$00].LowByte
	STA.w SMB3_StripeImageUploadTable[$03].LowByte
	LDA.b #$C0
	STA.w SMB3_StripeImageUploadTable[$01].LowByte
	STA.w SMB3_StripeImageUploadTable[$04].LowByte
	LDA.b #$0E
	STA.w SMB3_StripeImageUploadTable[$01].HighByte
	STA.w SMB3_StripeImageUploadTable[$04].HighByte
	LDX.b $9B
	STX.w SMB3_StripeImageUploadTable[$00].HighByte
	INX
	STX.w SMB3_StripeImageUploadTable[$03].HighByte
	LDA.b #$FF
	STA.w SMB3_StripeImageUploadTable[$06].LowByte
	LDX.b $20
	INX
	STX.b $20
	TXA
	AND.b #$01
	BNE.b CODE_2383B6
	LDX.b $9C
	INX
	TXA
	AND.b #$07
	BNE.b CODE_2383B4
	LDA.b $9C
	AND.b #$F0
	TAX
CODE_2383B4:
	STX.b $9C
CODE_2383B6:
	LDX.b $9B
	INX
	INX
	TXA
	AND.b #$1F
	BNE.b CODE_2383C1
	LDX.b #$00
CODE_2383C1:
	STX.b $9B
	INC.b $9A
	LDA.b $9A
	CMP.b #$08
	BNE.b CODE_2383D0
	STZ.b $20
	INC.w $0728
CODE_2383D0:
	RTS

;--------------------------------------------------------------------

CODE_2383D1:
	JSL.l CODE_29B9D1
	LDA.w $0059
	BNE.b CODE_2383F1
	INC.w !RAM_SMB3_Overworld_CurrentProcess
	STZ.w $0728
	JSR.w CODE_238C27
	LDA.w !RAM_SMB3_Overworld_EnableDarknessFlag
	BEQ.b CODE_2383F1
	LDA.b #$03
	STA.w $0291
	JSL.l CODE_2AF9A9
CODE_2383F1:
	RTL

;--------------------------------------------------------------------

CODE_2383F2:
	LDA.w $0711
	BNE.b CODE_2383FC
	LDA.b #$10
	STA.w $0711
CODE_2383FC:
	JSL.l CODE_2382FD
	LDA.w $0711
	BNE.b CODE_238408
	STZ.w $0500
CODE_238408:
	JSL.l CODE_238C1B
	RTL

;--------------------------------------------------------------------

; Note: Routine for handling game overs.

CODE_23840D:
	LDA.w $0728
	JSL.l SMB3_ExecutePtr_Long

DATA_238414:
	dl CODE_23842F
	dl CODE_238441
	dl CODE_238606
	dl CODE_23860B
	dl CODE_29AAFE
	dl CODE_29ABE7
	dl CODE_29AC4C
	dl CODE_29AC61
	dl CODE_2383F2

;--------------------------------------------------------------------

CODE_23842F:
	DEC.w $02D8
	BNE.b CODE_23843A
	INC.w $0728
	STZ.w $02DD
CODE_23843A:
	JSL.l CODE_2AF867
	JMP.w CODE_2385B0

;--------------------------------------------------------------------

; Note: Something related to the game over prompt.

CODE_238441:
	LDA.w $02DD
	BEQ.b CODE_238452
	DEC.w $02DD
	BNE.b CODE_23844F
if !Define_Global_ROMToAssemble&(!ROM_SMB3_U|!ROM_SMB3_E|!ROM_SMB3_J) != $00
	JML.l SMB3_ResetGame_Main
else
	JML.l SMAS_ResetToSMASTitleScreen_Main				; Note: Call to SMAS function
endif

CODE_23844F:
	JMP.w CODE_238577

CODE_238452:
	JSL.l CODE_2AF867
	LDA.w $034D
	BEQ.b CODE_2384AD
	LDA.b !RAM_SMB3_Global_ControllerPress1
	AND.b #!Joypad_Select>>8
	BEQ.b CODE_238478
	LDA.b #!Define_SMAS_Sound0063_StepOnLevelTile
	STA.w !RAM_SMB3_Global_SoundCh3
	LDA.w $1DCB
	CLC
	ADC.b #$10
	CMP.b #$88
	BNE.b CODE_238472
	LDA.b #$58
CODE_238472:
	STA.w $1DCB
	JMP.w CODE_238577

CODE_238478:
	LDA.b !RAM_SMB3_Global_ControllerPress1
	AND.b #(!Joypad_DPadU>>8)|(!Joypad_DPadD>>8)
	BEQ.b CODE_2384E5
	LDX.b #!Define_SMAS_Sound0063_StepOnLevelTile
	STX.w !RAM_SMB3_Global_SoundCh3
	AND.b #!Joypad_DPadU>>8
	BEQ.b CODE_238498
	LDA.w $1DCB
	SEC
	SBC.b #$10
	CMP.b #$48
	BNE.b CODE_2384A7
	STZ.w !RAM_SMB3_Global_SoundCh3
	LDA.b #$58
	BRA.b CODE_2384A7

CODE_238498:
	LDA.w $1DCB
	CLC
	ADC.b #$10
	CMP.b #$88
	BNE.b CODE_2384A7
	STZ.w !RAM_SMB3_Global_SoundCh3
	LDA.b #$78
CODE_2384A7:
	STA.w $1DCB
	JMP.w CODE_238577

CODE_2384AD:
	LDA.b !RAM_SMB3_Global_ControllerPress1
	AND.b #!Joypad_Select>>8
	BEQ.b CODE_2384C3
	LDA.b #!Define_SMAS_Sound0063_StepOnLevelTile
	STA.w !RAM_SMB3_Global_SoundCh3
	LDA.w $1DCB
	EOR.b #$10
	STA.w $1DCB
	JMP.w CODE_238577

CODE_2384C3:
	LDA.b !RAM_SMB3_Global_ControllerPress1
	AND.b #(!Joypad_DPadU>>8)|(!Joypad_DPadD>>8)
	BEQ.b CODE_2384E5
	LDX.b #!Define_SMAS_Sound0063_StepOnLevelTile
	STX.w !RAM_SMB3_Global_SoundCh3
	LDX.b #$60
	AND.b #!Joypad_DPadU>>8
	BNE.b CODE_2384D6
	LDX.b #$70
CODE_2384D6:
	TXA
	EOR.w $1DCB
	BNE.b CODE_2384DF
	STZ.w !RAM_SMB3_Global_SoundCh3
CODE_2384DF:
	STX.w $1DCB
	JMP.w CODE_238577

CODE_2384E5:
	LDA.b !RAM_SMB3_Global_ControllerPress1
	AND.b #!Joypad_Start>>8
	BNE.b CODE_2384EE
	JMP.w CODE_238577

CODE_2384EE:
	LDA.b #!Define_SMAS_Sound0063_Coin
	STA.w !RAM_SMB3_Global_SoundCh3
	LDX.b #$02
	LDA.w $1DCB
	CMP.b #$70
	BCC.b CODE_2384FE
	LDX.b #$09
CODE_2384FE:
	STX.w $0728
	STX.w $0285
	LDA.w $1DCB
	CMP.b #$68
	BCC.b CODE_23853E
	JSL.l CODE_238593
	LDA.w $034D
	BEQ.b CODE_23853E
	LDA.b #!Define_SMAS_Sound0060_SaveGame
	STA.w !RAM_SMB3_Global_SoundCh1
	LDA.w $1DCB
	CMP.b #$78
	BNE.b CODE_238525
	LDA.b #!Define_SMB3_LevelMusic_CopyOfMusicFade
	STA.w !RAM_SMB3_Global_MusicCh1
CODE_238525:
	JSL.l SMB3_SaveGame_Main
	LDA.w $1DCB
	CMP.b #$78
	BNE.b CODE_23853E
	LDA.b #$20
	STA.w $02DD
	LDA.b #$01
	STA.w $0728
	STZ.w $0285
	RTL

CODE_23853E:
	CPX.b #$09
	BNE.b CODE_238573
	STZ.w $0285
	STZ.w !RAM_SMB3_Global_ObjectAndColorWindowSettingsMirror
	STZ.w !RAM_SMB3_Global_BG3And4WindowMaskSettingsMirror
	STZ.w !RAM_SMB3_Global_BG1And2WindowMaskSettingsMirror
	STZ.w !RAM_SMB3_Global_HDMAEnableMirror
	STZ.w $0291
	STZ.w !RAM_SMB3_Global_MainScreenWindowMaskMirror
	LDA.b #$03
	STA.w !RAM_SMB3_Global_MainScreenLayersMirror
	LDA.w $072B
	CMP.b #$02
	BNE.b CODE_238568
	LDA.w $034D
	BEQ.b CODE_2385D8
CODE_238568:
	STZ.w $0103
	LDY.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b #$00
	STA.w $073F,y
CODE_238573:
	LDA.b #$F0
	STA.b $95
CODE_238577:
	LDY.b #$0D
	LDA.b #$F0
CODE_23857B:
	STA.w !RAM_SMB3_Overworld_OWSpr_YPosLo,y
	DEY
	BPL.b CODE_23857B
	LDA.b !RAM_SMB3_Global_ControllerPress1
	AND.b #(!Joypad_DPadU>>8)|(!Joypad_DPadD>>8)|(!Joypad_Select>>8)
	BNE.b CODE_238590
	LDA.w $028F
	AND.b #$10
	BEQ.b CODE_238593
	BRA.b CODE_2385AD

CODE_238590:
	STZ.w $028F
CODE_238593:											; Note: Yellow arrow sprite.
	LDA.w $1DCB
	STA.w SMB3_OAMBuffer[$25].YDisp
	LDA.b #$73
	STA.w SMB3_OAMBuffer[$25].Tile
	LDA.b #$33
	STA.w SMB3_OAMBuffer[$25].Prop
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR] Game over cursor adjustment
	LDA.w $034D								;\ Push arrow more to the left if it's the 1-player game box.
	BNE.b +									;/

	LDA.b #$4F-8
	STA.w SMB3_OAMBuffer[$25].XDisp
	BRA.b ++
+:
	LDA.b #$4F-16
	STA.w SMB3_OAMBuffer[$25].XDisp

++:
else
	LDA.b #$4F
	STA.w SMB3_OAMBuffer[$25].XDisp
endif
	LDA.b #$00
	STA.w SMB3_OAMTileSizeBuffer[$25].Slot
CODE_2385AD:
	INC.w $028F
CODE_2385B0:
	LDY.b #$03
CODE_2385B2:
	LDA.w GameOver_DeadPlayerOAMData,y
	STA.w SMB3_OAMBuffer[$21].XDisp,y
	DEY
	BPL.b CODE_2385B2
	LDA.w $034D
	BNE.b CODE_2385C5
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000
	LDA.b #$42-3
else
	LDA.b #$42											; Note: Dead sprite's Y position on 2-player game.
endif
	STA.w SMB3_OAMBuffer[$21].YDisp
CODE_2385C5:
	LDA.w !RAM_SMB3_Level_Player_CurrentCharacter
	BEQ.b CODE_2385D2
	LDA.b #$7E											; Note: Luigi's dead tiles index.
	STA.w SMB3_OAMBuffer[$21].Tile
	INC.w SMB3_OAMBuffer[$21].Prop
CODE_2385D2:
	LDA.b #$02
	STA.w SMB3_OAMTileSizeBuffer[$21].Slot
	RTL

CODE_2385D8:
	PHX
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.l $7E397D,x
	STA.l $7E3975,x
	LDA.l $7E397F,x
	STA.l $7E3977,x
	LDA.l $7E3981,x
	STA.l $7E3979,x
	LDA.l $7E3985,x
	STA.w $0722,x
	LDA.l $7E3987,x
	STA.w $0724,x
	PLX
	JMP.w CODE_238573

;--------------------------------------------------------------------

CODE_238606:
	JSL.l CODE_2AF867
	RTL

;--------------------------------------------------------------------

CODE_23860B:
	LDA.w $0711
	BNE.b CODE_238615
	LDA.b #$10
	STA.w $0711
CODE_238615:
	JSL.l CODE_2382F3
	LDA.w $0728
	CMP.b #$04
	BNE.b CODE_23862C
	LDA.b $12
	BNE.b CODE_238629
	LDA.w $0210
	BEQ.b CODE_23862C
CODE_238629:
	INC.w $0728
CODE_23862C:
	JSL.l CODE_238C1B
	RTL

;--------------------------------------------------------------------

CODE_238631:
	LDA.b #$0D
	STA.w !RAM_SMB3_Overworld_CurrentProcess
	JSL.l CODE_238C1B
	RTL

;--------------------------------------------------------------------

CODE_23863B:
	LDA.w $0711
	BNE.b CODE_238645
	LDA.b #$0E
	STA.w $0711
CODE_238645:
	DEC.w $0711
	BNE.b CODE_23864D
	INC.w !RAM_SMB3_Overworld_CurrentProcess
CODE_23864D:
	JSL.l CODE_238C1B
	RTL

;--------------------------------------------------------------------

CODE_238652:
	LDA.b $20
	BEQ.b CODE_238659
	JMP.w CODE_238758

CODE_238659:
	LDA.w $0746
	BNE.b CODE_238661
	JMP.w CODE_238785

CODE_238661:
	LDA.w $0711
	BNE.b CODE_23866B
	LDA.b #$20
	STA.w $0711
CODE_23866B:
	JSL.l CODE_23878D
	LDA.w $0711
	BEQ.b CODE_238679
	JSL.l CODE_238C1B
	RTL

CODE_238679:
	DEC.w $0746
	LDA.b #!Define_SMAS_Sound0063_OverworldTileReveal
	STA.w !RAM_SMB3_Global_SoundCh3
	LDY.w !RAM_SMB3_Global_CurrentWorld
	LDA.w DATA_218C49,y
	CLC
	ADC.w $0746
	TAY
	LDA.w OverworldEventIndexes,y
	STA.w $0746
	LDA.b #$01
	STA.b $20
	LDY.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	LDX.w $0746
	LDA.w OverworldEventTileStripeImageHeaderByte1,x
	STA.b $0A
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,y
	INY
	LDA.w OverworldEventTileStripeImageHeaderByte2,x
	STA.b $0B
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,y
	INY
	LDA.b #$00
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,y
	INY
	LDA.b #$03
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,y
	INY
	LDA.w $0746
	ASL
	ASL
	ASL
	TAX
	REP.b #$20
	LDA.w OverworldEventTileStripeImageTileData,x
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,y
	INY
	INY
	LDA.w OverworldEventTileStripeImageTileData+$02,x
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,y
	INY
	INY
	LDA.b $0A
	CLC
	ADC.w #$2000
	STA.b $0A
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,y
	INY
	INY
	LDA.w #$0300
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,y
	INY
	INY
	LDA.w OverworldEventTileStripeImageTileData+$04,x
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,y
	INY
	INY
	LDA.w OverworldEventTileStripeImageTileData+$06,x
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,y
	INY
	INY
	SEP.b #$20
	LDA.b #$FF
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,y
	STY.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	LDA.w $0746
	ASL
	TAY
	LDA.w OverworldEventTileClearFlags,y
	STA.b $0A
	INY
	LDA.w OverworldEventTileClearFlags,y
	STA.b $0B
	LDY.b $0A
	LDA.w !RAM_SMB3_Overworld_LevelsClearedBits,y
	AND.b $0B
	BNE.b CODE_238780
	LDA.w !RAM_SMB3_Overworld_LevelsClearedBits,y
	ORA.b $0B
	STA.w !RAM_SMB3_Overworld_LevelsClearedBits,y
	LDA.w !RAM_SMB3_Overworld_LevelsClearedBits+$40,y
	ORA.b $0B
	STA.w !RAM_SMB3_Overworld_LevelsClearedBits+$40,y
	LDX.w $0746
	LDA.w OverworldEventTileXPos,x
	AND.b #$0F
	ASL
	TAY
	LDA.w DATA_218200,y
	CLC
	ADC.b #$F0
	STA.b $0D
	LDA.w DATA_218200+$01,y
	ADC.b #$00
	STA.b $0E
	LDA.b #$7E2000>>16
	STA.b $0F
	LDA.w OverworldEventTileXPos,x
	LSR
	LSR
	LSR
	LSR
	ORA.w OverworldEventTileYPos,x
	TAY
	LDA.w OverworldEventMap16TileIDs,x
	STA.b [$0D],y
CODE_238758:
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$03
	BNE.b CODE_238766
	INC.b $20
	LDA.b $20
	CMP.b #$05
	BEQ.b CODE_238780
CODE_238766:
	LDY.w $0746
	LDA.w OverworldEventTileYPos,y
	STA.b $00
	LDA.w OverworldEventTileXPos,y
	AND.b #$F0
	STA.b $01
	LDY.b $20
	JSL.l CODE_29B11F
	JSL.l CODE_238C1B
	RTL

CODE_238780:
	STZ.w $0746
	STZ.b $20
CODE_238785:
	INC.w !RAM_SMB3_Overworld_CurrentProcess
	JSL.l CODE_238C1B
	RTL

CODE_23878D:
	LDA.w $0711
	AND.b #$1F
	BNE.b CODE_2387B2
	LDA.b #$12
	STA.w !RAM_SMB3_Global_MainScreenLayersMirror
	LDA.b #$01
	STA.w !RAM_SMB3_Global_SubScreenLayersMirror
	LDA.b #$02
	STA.w !RAM_SMB3_Global_ColorMathInitialSettingsMirror
	LDA.b #$20
	STA.w !RAM_SMB3_Global_ColorMathSelectAndEnableMirror
	LDA.w !RAM_SMB3_Overworld_EnableDarknessFlag
	BEQ.b CODE_2387B2
	LDA.b #$01
	STA.w !RAM_SMB3_Global_SubScreenWindowMaskMirror
CODE_2387B2:
	LDA.w $0711
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR] Reducing flashing speed.
	AND.b #$08
else
	AND.b #$04
endif
	LSR
	TAX
	REP.b #$20
	LDA.l DATA_2387E0,x
	STA.w SMB3_PaletteMirror[$00].LowByte
	SEP.b #$20
	LDA.b #$01
	STA.w !RAM_SMB3_Global_UpdateEntirePaletteFlag
	DEC.w $0711
	BNE.b CODE_2387DF
	LDA.b #$17
	STA.w !RAM_SMB3_Global_MainScreenLayersMirror
	STZ.w !RAM_SMB3_Global_SubScreenLayersMirror
	STZ.w !RAM_SMB3_Global_ColorMathInitialSettingsMirror
	STZ.w !RAM_SMB3_Global_ColorMathSelectAndEnableMirror
	STZ.w !RAM_SMB3_Global_SubScreenWindowMaskMirror
CODE_2387DF:
	RTL

DATA_2387E0:
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000
	dw $0000,$0000,$7FFF,$7FFF
else
	dw $0000,$7FFF
endif

;--------------------------------------------------------------------

CODE_2387E4:
	LDA.l $7E396D
	BEQ.b CODE_2387F4
	LDA.b #$0C
	STA.w !RAM_SMB3_Overworld_CurrentProcess
	JSL.l CODE_238C1B
	RTL

CODE_2387F4:
	JSL.l CODE_238C1B
	LDY.b #$0D
CODE_2387FA:
	LDA.w $053C,y
	BNE.b CODE_23882D
	DEY
	BPL.b CODE_2387FA
	LDA.b #$08
	STA.w $053C
	INC.w !RAM_SMB3_Overworld_CurrentProcess
	LDY.b #$0D
CODE_23880C:
	LDA.w !RAM_SMB3_Overworld_OWSpr_YPosLo,y
	CLC
	ADC.b #$08
	AND.b #$F0
	STA.w !RAM_SMB3_Overworld_OWSpr_InitialYPosLo,y
	LDA.w !RAM_SMB3_Overworld_OWSpr_XPosLo,y
	CLC
	ADC.b #$08
	AND.b #$F0
	STA.w !RAM_SMB3_Overworld_OWSpr_InitialXPosLo,y
	LDA.w !RAM_SMB3_Overworld_OWSpr_XPosHi,y
	ADC.b #$00
	STA.w !RAM_SMB3_Overworld_OWSpr_InitialXPosHi,y
	DEY
	BPL.b CODE_23880C
CODE_23882D:
	RTL

;--------------------------------------------------------------------

CODE_23882E:
	LDA.w $0711
	BNE.b CODE_238838
	LDA.b #$08
	STA.w $0711
CODE_238838:
	DEC.w $0711
	BNE.b CODE_23887F
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	STZ.b !RAM_SMB3_Global_ControllerHold1P1
	STZ.b !RAM_SMB3_Global_ControllerPress1P1
	STZ.b !RAM_SMB3_Global_ControllerHold1P2
	STZ.b !RAM_SMB3_Global_ControllerPress1P2
	LDA.b #$FF
	STA.l !RAM_SMB3_Overworld_AutoMoveWhenDirectionHeldTimer,x
	LDA.l $7E396D
	BNE.b CODE_238879
	LDA.w !RAM_SMB3_Global_CurrentWorld
	CMP.b #$02
	BNE.b CODE_238863
	LDA.w !RAM_SMB3_Overworld_DrawbridgeState
	EOR.b #$01
	STA.w !RAM_SMB3_Overworld_DrawbridgeState
CODE_238863:
	LDA.w $072B
	CMP.b #$01
	BEQ.b CODE_238879
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b #$01
	STA.w $073F,x
	LDA.b #$0F
	STA.w !RAM_SMB3_Overworld_CurrentProcess
	BRA.b CODE_23887F

CODE_238879:
	INC.w !RAM_SMB3_Overworld_CurrentProcess
	STZ.w $0728
CODE_23887F:
	JSL.l CODE_238C1B
	RTL

;--------------------------------------------------------------------

CODE_238884:
	LDA.w $0728
	JSL.l SMB3_ExecutePtr_Long

DATA_23888B:
	dl CODE_238A0E
	dl CODE_238A4E

;--------------------------------------------------------------------

CODE_238891:
	LDA.w $0417
	JSL.l SMB3_ExecutePtr_Absolute

DATA_238898:
	dw CODE_2388A6
	dw CODE_2388A6
	dw CODE_238922
	dw CODE_238922
	dw CODE_238951
	dw CODE_238956
	dw CODE_2389FE

;--------------------------------------------------------------------

CODE_2388A6:
	LDX.b $20
	LDA.b $24
	CLC
	ADC.w DATA_218C5A,x
	PHA
	AND.b #$F0
	LSR
	LSR
	LSR
	TAY
	LDA.w DATA_218200,y
	CLC
	ADC.b #$F0
	STA.b $2E
	LDA.w DATA_218200+$01,y
	ADC.b #$00
	STA.b $2F
	PLA
	AND.b #$0F
	STA.b $04
	LDX.b #$00
	LDA.b $20
	AND.b #$01
	BEQ.b CODE_2388D3
	LDX.b #$06
CODE_2388D3:
	LDY.b $04
	LDA.b [$2E],y
	AND.b #$C0
	STA.b $00
	INY
	LDA.b [$2E],y
	AND.b #$C0
	STA.b $01
	TYA
	CLC
	ADC.b #$0F
	TAY
	LDA.b [$2E],y
	AND.b #$C0
	STA.b $02
	INY
	LDA.b [$2E],y
	AND.b #$C0
	STA.b $03
	LDA.b $00
	LSR
	LSR
	ORA.b $01
	LSR
	LSR
	ORA.b $02
	LSR
	LSR
	ORA.b $03
	STA.w $1EC0,x
	INX
	LDA.b $04
	CLC
	ADC.b #$20
	STA.b $04
	AND.b #$F0
	CMP.b #$C0
	BNE.b CODE_2388D3
	INC.b $20
	LDA.b $20
	AND.b #$01
	BNE.b CODE_23891F
	LDA.b #$00
	STA.b $20
CODE_23891F:
	JMP.w CODE_23894C

;--------------------------------------------------------------------

CODE_238922:
	LDA.w $0417
	CMP.b #$02
	BNE.b CODE_23893D
	LDY.b #$12
	INC.b $20
	LDA.b $20
	CMP.b #$04
	BNE.b CODE_23893A
	LDA.b #$00
	STA.b $20
	INC.w $0417
CODE_23893A:
	JMP.w CODE_23894C

CODE_23893D:
	INC.b $20
	LDA.b $20
	AND.b #$01
	BNE.b CODE_23894C
	LDA.b #$00
	STA.w $0417
	STA.b $20
CODE_23894C:
	JSL.l CODE_238DD7
	RTL

;--------------------------------------------------------------------

CODE_238951:
	STZ.b $20
	INC.w $0417
CODE_238956:
	LDY.b $20
	LDA.b $24
	CLC
	ADC.w DATA_218C97,y
	STA.b $24
	AND.b #$F0
	LSR
	LSR
	LSR
	TAY
	LDA.w DATA_218200,y
	STA.b $2E
	LDA.w DATA_218200+$01,y
	STA.b $2F
	INC.b $2F
	LDA.b #$7E2000>>16
	STA.b $30
	LDA.b $24
	AND.b #$0F
	STA.b $00
	LDX.b #$00
CODE_23897E:
	LDA.w !RAM_SMB3_Global_TilesetFromHeader
	ASL
	TAY
	LDA.w CODE_21CE5A,y
	STA.b $0D
	LDA.w CODE_21CE5A+$01,y
	STA.b $0E
	LDY.w !RAM_SMB3_Global_TilesetFromHeader
	LDA.w CODE_21CE80,y
	STA.b $0F
	LDY.b $00
	LDA.b [$2E],y
	REP.b #$30
	AND.w #$00FF
	ASL
	ASL
	ASL
	TAY
	TXA
	AND.w #$00FF
	TAX
	LDA.b $20
	AND.w #$0001
	BNE.b CODE_2389B2
	INY
	INY
	INY
	INY
CODE_2389B2:
	LDA.b [$0D],y
	STA.w $03C2,x
	INY
	INY
	LDA.b [$0D],y
	STA.w $03C4,x
	INX
	INX
	INX
	INX
	SEP.b #$30
	LDA.b $00
	CLC
	ADC.b #$10
	STA.b $00
	AND.b #$F0
	CMP.b #$B0
	BNE.b CODE_23897E
	LDA.b $24
	AND.b #$0F
	ASL
	TAY
	LDA.b $20
	AND.b #$01
	BNE.b CODE_2389DE
	INY
CODE_2389DE:
	STY.w $0381
	LDX.b #$00
	LDA.b $24
	AND.b #$10
	BEQ.b CODE_2389EB
	LDX.b #$04
CODE_2389EB:
	STX.w $0380
	INC.b $20
	LDA.b $20
	CMP.b #$04
	BNE.b CODE_2389FB
	STZ.b $20
	INC.w $0417
CODE_2389FB:
	JMP.w CODE_23894C

;--------------------------------------------------------------------

CODE_2389FE:
	INC.b $20
	LDA.b $20
	AND.b #$01
	BNE.b CODE_238A0B
	STZ.w $0417
	STZ.b $20
CODE_238A0B:
	JMP.w CODE_23894C

;--------------------------------------------------------------------

CODE_238A0E:
	INC.w $0728
	JSL.l CODE_238C1B
	RTL

;--------------------------------------------------------------------

CODE_238A16:
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b #$00
	STA.w $072C
	STA.l $7E3994
	STA.w $073D,x
	STA.w $070F
	JSL.l CODE_238C1B
	RTS

;--------------------------------------------------------------------

CODE_238A2D:
	LDA.b #$03
	STA.w $0713
	LDA.b #$80
	STA.w $0711
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b #$00
	STA.w $072C
	STA.l $7E3994
	STA.w $073D,x
	INC.w $0728
	JSL.l CODE_238C1B
	RTS

;--------------------------------------------------------------------

CODE_238A4E:
	LDA.b #$00
	STA.l $7E396D
	STA.l !RAM_SMB3_Overworld_DontDestroyEnteredSpriteFlag
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b $49,x
	BEQ.b CODE_238A62
	JMP.w CODE_238BD5

CODE_238A62:
	LDA.w !RAM_SMB3_Overworld_ScrollMapTimer
	BEQ.b CODE_238A6A
	BRL.w CODE_238B9D

CODE_238A6A:
	LDA.b !RAM_SMB3_Global_ControllerPress1
	AND.b #(!Joypad_DPadL>>8)|(!Joypad_DPadR>>8)|(!Joypad_DPadU>>8)|(!Joypad_DPadD>>8)
	BEQ.b CODE_238A75
	LDA.b #!Define_SMAS_Sound0060_HitHead
	STA.w !RAM_SMB3_Global_SoundCh1
CODE_238A75:
	JSL.l SMB3_GetOverworldTilePlayerIsOn_Main
	AND.b #$C0
	CLC
	ROL
	ROL
	ROL
	TAY
	LDA.b !RAM_SMB3_Global_CurrentlyProcessedMap16TileLo
	CMP.w !RAM_SMB3_Global_Map16WallTileAttributeTable,y
	BCC.b CODE_238A9F
	LDA.b !RAM_SMB3_Global_ControllerHold1
	AND.b #(!Joypad_DPadL>>8)|(!Joypad_DPadR>>8)|(!Joypad_DPadU>>8)|(!Joypad_DPadD>>8)
	BEQ.b CODE_238A9F
	LDY.b #$03
CODE_238A8F:
	CMP.w DATA_218DB4,y
	BEQ.b CODE_238A97
	DEY
	BNE.b CODE_238A8F
CODE_238A97:
	LDA.w $1DD5
	CMP.w DATA_218DB8,y
	BNE.b CODE_238AA2
CODE_238A9F:
	BRL.w CODE_238B1A

CODE_238AA2:
	LDA.w $1DD5
	PHA
	JSR.w CODE_238E15
	PLA
	STA.w $1DD5
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.l !SRAM_SMAS_Global_EnableSMASDebugModeFlag
	BNE.b CODE_238B17
endif
	LDA.w !RAM_SMB3_Global_SoundCh3
	; BRA.b CODE_238B17 ;[DEBUG] Move Anywhere on the Map A
	BEQ.b CODE_238B17
	LDA.w !RAM_SMB3_Overworld_PlayerPowerUpPose
	CMP.b #$07
	BEQ.b CODE_238ACB
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b #$00
	STA.b !RAM_SMB3_Overworld_Mario_MovementTimer,x
	STA.w !RAM_SMB3_Global_SoundCh3
	LDA.b #!Define_SMAS_Sound0060_HitHead
	STA.w !RAM_SMB3_Global_SoundCh1
	JMP.w CODE_238B27

CODE_238ACB:
	LDA.b $03
	AND.b #$0F
	STA.w $1DD5
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.w $0747,x
	STA.w !RAM_SMB3_Overworld_PlayerPowerUpPose
	REP.b #$30
	LDA.w !RAM_SMB3_Overworld_PlayerPowerUpPose
	AND.w #$00FF
	ASL
	STA.b $D8
	LDA.l DATA_29C81D,x
	AND.w #$00FF
	ASL
	CLC
	ADC.b $D8
	TAX
	LDA.l DATA_29C7E3,x
	PHB
	TAX
	LDY.w #SMB3_PaletteMirror[$F0].LowByte
	LDA.w #$001F
	MVN SMB3_PaletteMirror[$F0].LowByte>>16,RegularMarioPalette>>16
	PLB
	LDX.w #$001E
CODE_238B05:
	LDA.w SMB3_PaletteMirror[$F0].LowByte,x
	STA.l !RAM_SMB3_Level_Player_CurrentPaletteDataTable,x
	DEX
	DEX
	BPL.b CODE_238B05
	SEP.b #$30
	LDA.b #$01
	STA.w !RAM_SMB3_Global_UpdateEntirePaletteFlag
CODE_238B17:
	JMP.w CODE_238B1D

CODE_238B1A:
	JSR.w CODE_238E15
CODE_238B1D:
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b $49,x
	BEQ.b CODE_238B27
	JMP.w CODE_238BD5

CODE_238B27:
	LDA.b !RAM_SMB3_Global_CurrentlyProcessedMap16TileLo
	CMP.b #$BC
	BNE.b CODE_238B3C
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b !RAM_SMB3_Global_ControllerPress2P1,x
	BMI.b CODE_238B4D						; Note: !Joypad_A
	LDA.b !RAM_SMB3_Global_ControllerPress1P1,x
	AND.b #!Joypad_B>>8
	BNE.b CODE_238B4D
	BRA.b CODE_238B4A

CODE_238B3C:
	LDA.b !RAM_SMB3_Global_ControllerPress2P1
	ORA.b !RAM_SMB3_Global_ControllerPress2P2
	BMI.b CODE_238B4D						; Note: !Joypad_A
	LDA.b !RAM_SMB3_Global_ControllerPress1P1
	ORA.b !RAM_SMB3_Global_ControllerPress1P2
	AND.b #!Joypad_B>>8
	BNE.b CODE_238B4D
CODE_238B4A:
	JMP.w CODE_238BD0

CODE_238B4D:								; Note: This is called when pressing A/B on the overworld.
	LDA.w $072B
	CMP.b #$02
	BNE.b CODE_238BA7
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	TXA
	EOR.b #$01
	TAY
	LDA.w !RAM_SMB3_Level_Player_MariosLives,y
	CMP.b #$FF
	BEQ.b CODE_238BA7
	LDA.b !RAM_SMB3_Overworld_Mario_XPosHi,x
	CMP.w !RAM_SMB3_Overworld_Mario_XPosHi,y
	BNE.b CODE_238BA7
	LDA.b !RAM_SMB3_Overworld_Mario_YPosLo,x
	CMP.w !RAM_SMB3_Level_Player_XPosHi,y
	BNE.b CODE_238BA7
	LDA.b !RAM_SMB3_Overworld_Mario_XPosLo,x
	CMP.w !RAM_SMB3_Overworld_Mario_XPosLo,y
	BNE.b CODE_238BA7
	LDA.l !SRAM_SMAS_Global_Controller1PluggedInFlag
	BNE.b CODE_238BA2
	LDA.l !SRAM_SMAS_Global_Controller2PluggedInFlag
	CMP.b #$02
	BNE.b CODE_238BA2
	LDA.b #$12
	STA.b !RAM_SMB3_Overworld_Load2PlayerBattleFlag
CODE_238B89:
	LDA.b #$10
	STA.w !RAM_SMB3_Overworld_CurrentProcess
CODE_238B8E:
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b #$00
	STA.w $073F,x
	STA.w $0728
	STA.l $7E396D
CODE_238B9D:
	JSL.l CODE_238C1B
	RTL

CODE_238BA2:
	LDA.b #!Define_SMAS_Sound0063_Wrong
	STA.w !RAM_SMB3_Global_SoundCh3
CODE_238BA7:
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b !RAM_SMB3_Global_ControllerPress2P1,x
	BMI.b CODE_238BB4
	LDA.b !RAM_SMB3_Global_ControllerPress1
	AND.b #!Joypad_A|(!Joypad_B>>8)
	BEQ.b CODE_238BD0
CODE_238BB4:
	LDA.b !RAM_SMB3_Global_CurrentlyProcessedMap16TileLo
	LDY.b #$0A
CODE_238BB8:
	CMP.w DATA_218CD9,y
	BEQ.b CODE_238B89
	DEY
	BPL.b CODE_238BB8
	LDA.b !RAM_SMB3_Global_CurrentlyProcessedMap16TileLo
	AND.b #$C0
	CLC
	ROL
	ROL
	ROL
	TAY
	LDA.b !RAM_SMB3_Global_CurrentlyProcessedMap16TileLo
	CMP.w !RAM_SMB3_Global_Map16WallTileAttributeTable,y
	BCS.b CODE_238B89
CODE_238BD0:
	JSL.l CODE_238C1B
	RTL

CODE_238BD5:
	DEC.b !RAM_SMB3_Overworld_Mario_MovementTimer,x
	DEC.b !RAM_SMB3_Overworld_Mario_MovementTimer,x
	LDA.b !RAM_SMB3_Overworld_Mario_MovementDirection,x
	LDY.w !RAM_SMB3_Overworld_Player_InCanoeFlag
	BEQ.b CODE_238BE5
	CLC
	ADC.b #$1B
	INC.b !RAM_SMB3_Overworld_Mario_MovementTimer,x
CODE_238BE5:
	TAY
	LDA.b !RAM_SMB3_Overworld_Mario_YPosLo,x
	CLC
	ADC.w DATA_218C9B,y
	STA.b !RAM_SMB3_Overworld_Mario_YPosLo,x
	LDA.b !RAM_SMB3_Overworld_Mario_XPosLo,x
	CLC
	ADC.w DATA_218CA4,y
	STA.b !RAM_SMB3_Overworld_Mario_XPosLo,x
	LDA.b !RAM_SMB3_Overworld_Mario_XPosHi,x
	ADC.w DATA_218CAD,y
	STA.b !RAM_SMB3_Overworld_Mario_XPosHi,x
	LDA.b !RAM_SMB3_Overworld_Mario_MovementTimer,x
	AND.b #$1F
	BNE.b CODE_238C1B
	JSL.l SMB3_GetOverworldTilePlayerIsOn_Main
	CMP.b #$E6
	BNE.b CODE_238C1B
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.w !RAM_SMB3_Global_RandomByte02,x
	AND.b #$01
	BNE.b CODE_238C1B
	INC.w !RAM_SMB3_Overworld_CurrentProcess
	JMP.w CODE_238B8E

;--------------------------------------------------------------------

CODE_238C1B:
	LDY.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.w !RAM_SMB3_Overworld_Mario_UnusedRAM2,y
	STA.b $02
	JSR.w CODE_238C27
	RTL

CODE_238C27:
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b !RAM_SMB3_Overworld_Mario_YPosLo,x
	CMP.b #$F0
	BEQ.b CODE_238C39
	STA.w SMB3_OAMBuffer[$22].YDisp
	SEC
	SBC.b #$10
	STA.w SMB3_OAMBuffer[$21].YDisp
CODE_238C39:
	LDA.b !RAM_SMB3_Overworld_Mario_XPosLo,x
	SEC
	SBC.w $0210
	STA.w SMB3_OAMBuffer[$21].XDisp
	STA.w SMB3_OAMBuffer[$22].XDisp
	LDA.w !RAM_SMB3_Overworld_PlayerPowerUpPose
	ASL
	TAX
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$08
	BEQ.b CODE_238C55
	TXA
	CLC
	ADC.b #$12
	TAX
CODE_238C55:
	LDA.w !RAM_SMB3_Level_Player_CurrentCharacter
	BEQ.b CODE_238C6A
	LDA.w DATA_218D54,x
	ORA.b #$01
	STA.w SMB3_OAMBuffer[$21].Prop
	LDA.w DATA_218D30,x
	STA.w SMB3_OAMBuffer[$21].Tile
	BRA.b CODE_238C76

CODE_238C6A:
	LDA.w DATA_218D54,x
	STA.w SMB3_OAMBuffer[$21].Prop
	LDA.w DATA_218D0C,x
	STA.w SMB3_OAMBuffer[$21].Tile
CODE_238C76:
	LDA.w !RAM_SMB3_Level_Player_CurrentCharacter
	BEQ.b CODE_238C8B
	LDA.w DATA_218D30+$01,x
	STA.w SMB3_OAMBuffer[$22].Tile
	LDA.w DATA_218D54+$01,x
	ORA.b #$01
	STA.w SMB3_OAMBuffer[$22].Prop
	BRA.b CODE_238C97

CODE_238C8B:
	LDA.w DATA_218D0C+$01,x
	STA.w SMB3_OAMBuffer[$22].Tile
	LDA.w DATA_218D54+$01,x
	STA.w SMB3_OAMBuffer[$22].Prop
CODE_238C97:
	LDA.w !RAM_SMB3_Overworld_UsedReserveStarFlag
	BEQ.b CODE_238CAD
	DEC.w $02C6
	BPL.b CODE_238CA9
	LDA.b #$03
	STA.w $02C6
	INC.w $02C7
CODE_238CA9:
	JSL.l CODE_29CDB2
CODE_238CAD:
	LDA.b #$02
	STA.w SMB3_OAMTileSizeBuffer[$21].Slot
	STA.w SMB3_OAMTileSizeBuffer[$22].Slot
	LDA.w SMB3_OAMBuffer[$21].Tile
	CMP.b #$26
	BNE.b CODE_238CC1
	LDA.b #$F0
	STA.w SMB3_OAMBuffer[$21].YDisp
CODE_238CC1:
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.w $005A,x
	BNE.b CODE_238CEE
	LDA.w !RAM_SMB3_Overworld_CurrentProcess
	CMP.b #$06
	BCC.b CODE_238D02
	CMP.b #$0D
	BCC.b CODE_238CD8
	CMP.b #$0F
	BNE.b CODE_238D02
CODE_238CD8:
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.w DATA_218D78,x
	STA.w SMB3_OAMBuffer[$22].Tile
	LDA.w DATA_218D7A,x
	STA.w SMB3_OAMBuffer[$22].Prop
	LDA.b #$F0
	STA.w SMB3_OAMBuffer[$21].YDisp
	BRA.b CODE_238D02

CODE_238CEE:
	DEC.b $64
	LDA.b $64
	AND.b #$06
	LSR
	TAY
	LDA.w DATA_218D80,y
	STA.w SMB3_OAMBuffer[$22].Tile
	LDA.w DATA_218D84,y
	STA.w SMB3_OAMBuffer[$22].Prop
CODE_238D02:
	LDA.w !RAM_SMB3_Overworld_CurrentProcess
	CMP.b #$02
	BEQ.b CODE_238D15
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.w $073F,x
	BNE.b CODE_238D53
	LDA.b !RAM_SMB3_Overworld_CurrentWarpWhistleState
	BNE.b CODE_238D53
CODE_238D15:
	LDA.w !RAM_SMB3_Overworld_ScrollMapTimer
	BNE.b CODE_238D53
	LDA.w !RAM_SMB3_Global_CurrentWorld
	CMP.b #$07
	BEQ.b CODE_238D53
	CMP.b #$04
	BEQ.b CODE_238D53
	LDA.w SMB3_OAMBuffer[$21].XDisp
	CMP.b #$D0
	BCC.b CODE_238D3A
	LDY.w !RAM_SMB3_Global_CurrentWorld
	LDA.b $23
	CMP.w MaxOverworldScreenXPos,y
	BEQ.b CODE_238D53
	LDX.b #$00
	BRA.b CODE_238D47

CODE_238D3A:
	LDA.b $24
	BEQ.b CODE_238D53
	LDA.w SMB3_OAMBuffer[$21].XDisp
	CMP.b #$21
	BCS.b CODE_238D53
	LDX.b #$01
CODE_238D47:
	STX.b $25
	LDA.b #$80
	STA.w !RAM_SMB3_Overworld_ScrollMapTimer
	LDA.b #$04
	STA.w $0417
CODE_238D53:
	LDA.w $072B
	CMP.b #$01
	BEQ.b CODE_238D9E
	LDA.w !RAM_SMB3_Global_CurrentWorld
	CMP.b #$08
	BEQ.b CODE_238D9E
	LDA.w !RAM_SMB3_Level_Player_CurrentCharacter				; Note: This code draws the M/L token sprite where the other player is on the overworld.
	EOR.b #$01
	TAX
	LDA.w !RAM_SMB3_Level_Player_MariosLives,x
	BMI.b CODE_238D9E
	LDA.b !RAM_SMB3_Overworld_Mario_XPosLo,x
	SEC
	SBC.w $0210
	BEQ.b CODE_238D9E
	LDA.b !RAM_SMB3_Overworld_Mario_XPosHi,x
	SBC.b #$00
	CMP.b $12
	BNE.b CODE_238D9E
	LDA.b !RAM_SMB3_Overworld_Mario_YPosLo,x
	STA.w SMB3_OAMBuffer[$25].YDisp
	LDA.w DATA_218D78,x
	STA.w SMB3_OAMBuffer[$25].Tile
	LDA.w DATA_218D7A,x
	STA.w SMB3_OAMBuffer[$25].Prop
	LDA.b !RAM_SMB3_Overworld_Mario_XPosLo,x
	SEC
	SBC.w $0210
	SEC
	SBC.b #$04
	STA.w SMB3_OAMBuffer[$25].XDisp
	LDA.b #$02
	STA.w SMB3_OAMTileSizeBuffer[$25].Slot
CODE_238D9E:
	LDA.w !RAM_SMB3_Overworld_CurrentProcess
	CMP.b #$01
	BCC.b CODE_238DA9
	JSL.l SMB3_ProcessOverworldSprites_Main
CODE_238DA9:
	LDA.w !RAM_SMB3_Global_CurrentWorld
	CMP.b #$08
	BNE.b CODE_238DB3
	JSR.w DrawWorldNumbersAbovePipes
CODE_238DB3:
	RTS

DrawWorldNumbersAbovePipes:
;$238DB4
	LDY.b #$1B
CODE_238DB6:
	LDA.w World9PipeNumbersOAMData,y
	STA.w SMB3_OAMBuffer[$26].XDisp,y
	DEY
	BPL.b CODE_238DB6
	LDA.b #$00
	STA.w SMB3_OAMTileSizeBuffer[$26].Slot
	STA.w SMB3_OAMTileSizeBuffer[$27].Slot
	STA.w SMB3_OAMTileSizeBuffer[$28].Slot
	STA.w SMB3_OAMTileSizeBuffer[$29].Slot
	STA.w SMB3_OAMTileSizeBuffer[$2A].Slot
	STA.w SMB3_OAMTileSizeBuffer[$2B].Slot
	STA.w SMB3_OAMTileSizeBuffer[$2C].Slot
	RTS

;--------------------------------------------------------------------

CODE_238DD7:
	RTL

;--------------------------------------------------------------------

SMB3_GetOverworldTilePlayerIsOn:
.Main:
;$238DD8
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b !RAM_SMB3_Overworld_Mario_XPosHi,x
	ASL
	TAY
	LDA.b #$7E2000>>16
	STA.b $30
	LDA.w DATA_218200,y
	STA.b $2E
	LDA.w DATA_218200+$01,y
	INC
	STA.b $2F
	LDA.b !RAM_SMB3_Overworld_Mario_XPosLo,x
	LSR
	LSR
	LSR
	LSR
	STA.b $00
	LDA.b !RAM_SMB3_Overworld_Mario_YPosLo,x
	SEC
	SBC.b #$10
	AND.b #$F0
	ORA.b $00
	TAY
	LDA.b [$2E],y
	STA.b !RAM_SMB3_Global_CurrentlyProcessedMap16TileLo
	RTL

;--------------------------------------------------------------------

CODE_238E05:
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b $4B,x
	EOR.b #$03
	CMP.b #$03
	BNE.b CODE_238E12
	EOR.b #$0F
CODE_238E12:
	STA.b $4B,x
	RTS

;--------------------------------------------------------------------

; Note: Routine related to moving on the overworld.

CODE_238E15:
	LDA.b !RAM_SMB3_Global_ControllerHold1
	STA.b $03
	LDA.w !RAM_SMB3_Overworld_Player_InCanoeFlag
	BNE.b CODE_238E2C
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.l !RAM_SMB3_Overworld_AutoMoveWhenDirectionHeldTimer,x
	BEQ.b CODE_238E2C
	CMP.b #$18
	BEQ.b CODE_238E2C
	RTS

CODE_238E2C:
	LDY.b #$03
	LDA.b $03
	AND.b #(!Joypad_DPadL>>8)|(!Joypad_DPadR>>8)|(!Joypad_DPadU>>8)|(!Joypad_DPadD>>8)
CODE_238E32:
	CMP.w DATA_218DB4,y
	BEQ.b CODE_238E3B
	DEY
	BPL.b CODE_238E32
	RTS

CODE_238E3B:
	LDY.b #$00
CODE_238E3D:
	LSR
	BCS.b CODE_238E43
	INY
	BNE.b CODE_238E3D
CODE_238E43:
	TYA
	STA.b $04
	ASL
	TAX
	LDA.w DATA_218DBC,x
	STA.b $00
	LDA.w DATA_218DBC+$01,x
	STA.b $01
	LDA.b #DATA_218DBC>>16
	STA.b $02
	JSL.l CODE_238EFC
	LDY.b #$08
CODE_238E5C:
	CMP.b [$00],y
	; BRA.b CODE_238ED1 ;[DEBUG] Move Anywhere on the Map B
	BEQ.b CODE_238ED1
	DEY
	BPL.b CODE_238E5C
	LDY.w !RAM_SMB3_Overworld_Player_InCanoeFlag
	BEQ.b CODE_238E7C
	CMP.b #$4B
	BNE.b CODE_238E73
	LDA.b #$00
	STA.w !RAM_SMB3_Overworld_Player_InCanoeFlag
	BEQ.b CODE_238ECD							; Note: This will always branch

CODE_238E73:
	CMP.b #$82
	BCC.b CODE_238EAB
	CMP.b #$AA
	BCC.b CODE_238ECD
	RTS

CODE_238E7C:
	LDY.w !RAM_SMB3_Global_CurrentlyProcessedMap16TileLo
	CPY.b #$4B
	BNE.b CODE_238EAB
	LDY.b $04
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b !RAM_SMB3_Overworld_Mario_YPosLo,x
	CLC
	ADC.w DATA_218DF0,y
	STA.b $00
	LDA.b !RAM_SMB3_Overworld_Mario_XPosLo,x
	CLC
	ADC.w DATA_218DF4,y
	STA.b $01
	LDA.b $45,x
	ADC.w DATA_218DF8,y
	STA.b $04
	LDX.b #$0D
CODE_238EA1:
	LDY.w !RAM_SMB3_Overworld_OWSpr_SpriteID,x
	CPY.b #!Define_SMB3_SpriteID_OWSpr10_Canoe
	BEQ.b CODE_238EB8
	DEX
	BNE.b CODE_238EA1
CODE_238EAB:
	LDA.w !RAM_SMB3_Global_ControllerPress1					; Optimization: Unnecessary absolute addressing
	AND.b #(!Joypad_DPadL>>8)|(!Joypad_DPadR>>8)|(!Joypad_DPadU>>8)|(!Joypad_DPadD>>8)
	BEQ.b CODE_238EB7
	LDA.b #!Define_SMAS_Sound0060_HitHead
	STA.w !RAM_SMB3_Global_SoundCh1
CODE_238EB7:
	RTS

CODE_238EB8:
	LDY.w !RAM_SMB3_Overworld_OWSpr_YPosLo,x
	CPY.b $00
	BNE.b CODE_238EAB
	LDY.w !RAM_SMB3_Overworld_OWSpr_XPosLo,x
	CPY.b $01
	BNE.b CODE_238EAB
	LDY.w !RAM_SMB3_Overworld_OWSpr_XPosHi,x
	CPY.b $04
	BNE.b CODE_238EAB
CODE_238ECD:
	LDA.b #$10
	BNE.b CODE_238EE2
CODE_238ED1:
	LDY.b $04
	CMP.w DATA_218DE8,y
	BNE.b CODE_238EE0
	LDA.w !RAM_SMB3_Overworld_DrawbridgeState
	CMP.w DATA_218DEC,y
	BNE.b CODE_238EF8
CODE_238EE0:
	LDA.b #$20
CODE_238EE2:
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	STA.b $49,x
	LDA.b $03
	AND.b #$0F
	STA.b $4B,x
	STA.w $1DD5
	LDX.b #!Define_SMAS_Sound0063_StepOnLevelTile
	STX.w !RAM_SMB3_Global_SoundCh3
	STZ.w !RAM_SMB3_Global_SoundCh1
CODE_238EF8:
	RTS

;--------------------------------------------------------------------

DATA_238EF9:
	db $AA,$AF,$B7

CODE_238EFC:
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b !RAM_SMB3_Overworld_Mario_YPosLo,x
	CLC
	ADC.w DATA_218DFC,y
	AND.b #$F0
	STA.b $0E
	LDA.b !RAM_SMB3_Overworld_Mario_XPosLo,x
	CLC
	ADC.w DATA_218E04,y
	STA.b $0F
	LDA.b $45,x
	ADC.w DATA_218E00,y
	ASL
	TAX
	LDA.w DATA_218200,x
	STA.b $2E
	STA.b $D8
	LDA.w DATA_218200+$01,x
	INC
	STA.b $2F
	CLC
	ADC.b #($7E4000-$7E2000)>>8
	STA.b $D9
	LDA.b #$7E2000>>16
	STA.b $30
	STA.b $DA
	LDA.b $0F
	LSR
	LSR
	LSR
	LSR
	ORA.b $0E
	TAY
	PHX
	LDA.b [$2E],y
	TAX
	PHA
	LDA.b [$D8],y
	BEQ.b CODE_238F48
	PLA
	LDA.l DATA_238EF9,x
	PHA
CODE_238F48:
	PLA
	PLX
	RTL

;--------------------------------------------------------------------

; Todo: Unreferrenced routine.

CODE_238F4B:
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) == $0000 ;[BR] Free space (I think)
	STA.w $1059
	STY.w $1058
endif
	STX.w $105B
	LDY.b #$00
	LDX.b #$00
	LDA.w $105B
	AND.b #$03
	BEQ.b CODE_238F85
	LDY.b #$86
	STY.b $02
	AND.b #$02
	BNE.b CODE_238F68
	INX
CODE_238F68:
	LDA.w $105E
	BEQ.b CODE_238F6F
	INX
	INX
CODE_238F6F:
	LDA.w $1059
	CLC
	ADC.w DATA_218E08,x
	STA.w $105C
	LDA.w $1058
	SEC
	SBC.b #$10
	STA.w $105D
	JMP.w CODE_238FAD

CODE_238F85:
	LDY.b #$06
	STY.b $02
	LDX.b #$00
	LDA.w $105B
	AND.b #$08
	BNE.b CODE_238F93
	INX
CODE_238F93:
	LDA.w $105E
	BEQ.b CODE_238F9A
	INX
	INX
CODE_238F9A:
	LDA.w $1058
	CLC
	ADC.w DATA_218E0C,x
	STA.w $105D
	LDA.w $1059
	SEC
	SBC.b #$10
	STA.w $105C
CODE_238FAD:
	LDA.w $105D
	SEC
	SBC.b #$10
	LDX.w $105C
	JSR.w CODE_2390AA
	LDA.b $0E
	STA.w $1047
	LDA.b $0F
	STA.w $104B
	JSR.w CODE_239052
	LDA.w $1047
	STA.w $1051
	LDA.w $104B
	STA.w $1053
	JSR.w CODE_238FDE
	LDA.b #$FF
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,y
	STY.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	RTL

CODE_238FDE:
	LDA.w $105B
	AND.b #$03
	BNE.b CODE_238FEA
	LDA.b #$01
	TAX
	BNE.b CODE_238FEE
CODE_238FEA:
	LDA.b #$20
	LDX.b #$10
CODE_238FEE:
	STA.b $05
	STX.b $06
	LDY.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	LDX.b #$05
	LDA.w $1051
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,y
	INY
	LDA.w $1053
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,y
	INY
	LDA.b $02
	AND.b #$C0
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,y
	INY
	LDA.b $02
	AND.b #$3F
	ASL
	DEC
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,y
	INY
CODE_239017:
	LDA.w $105E
	BEQ.b CODE_239025
	LDA.b #$00
	STA.w SMB3_StripeImageUploadTable[$00].HighByte,y
	LDA.b #$FF
	BNE.b CODE_23902A

CODE_239025:
	JSR.w CODE_239068
	BRA.b CODE_23902D

CODE_23902A:
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,y
CODE_23902D:
	INY
	INY
	LDA.w $1053
	CLC
	ADC.b $05
	STA.w $1053
	LDA.w $1051
	ADC.b #$00
	STA.w $1051
	TXA
	AND.b #$01
	BNE.b CODE_23904E
	LDA.w $105A
	CLC
	ADC.b $06
	STA.w $105A
CODE_23904E:
	DEX
	BPL.b CODE_239017
	RTS

CODE_239052:
	LDA.w $105D
	AND.b #$F0
	STA.w $105A
	LDA.w $105C
	LSR
	LSR
	LSR
	LSR
	ORA.w $105A
	STA.w $105A
	RTS

CODE_239068:
	STY.b $01
	STX.b $04
	JSR.w CODE_2390C9
	LDX.w $105A
	LDA.l $7E2450,x
	STA.b $0A
	JSL.l CODE_209EFC
	REP.b #$30
	LDA.b $02
	PHA
	LDA.w $1055
	AND.w #$00FF
	ASL
	STA.b $02
	LDA.b $01
	AND.w #$00FF
	TAX
	TYA
	AND.w #$00FF
	ASL
	ASL
	ASL
	CLC
	ADC.b $02
	TAY
	LDA.b [$0C],y
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,x
	PLA
	STA.b $02
	SEP.b #$30
	LDY.b $01
	LDX.b $04
	RTS

CODE_2390AA:
	ASL
	ADC.b #$00
	ASL
	ADC.b #$00
	STA.b $0C
	TXA
	LSR
	LSR
	LSR
	STA.b $0D
	LDA.b $0C
	AND.b #$03
	ORA.b #$08
	STA.b $0E
	LDA.b $0C
	AND.b #$E0
	ORA.b $0D
	STA.b $0F
	RTS

CODE_2390C9:
	LDA.w $1053
	AND.b #$01
	STA.w $1055
	LDA.w $1053
	AND.b #$20
	BNE.b CODE_2390DD
	ASL.w $1055
	BRA.b CODE_2390E1

CODE_2390DD:
	SEC
	ROL.w $1055
CODE_2390E1:
	RTS

;--------------------------------------------------------------------

; Todo: Unreferrenced routine.

CODE_2390E2:
	LDY.w DATA_218E34,x
	LDX.b #$04
	REP.b #$20
CODE_2390E9:
	LDA.w DATA_218E10,y
	STA.w SMB3_PaletteMirror[$81].LowByte,x
	DEY
	DEY
	DEX
	DEX
	BPL.b CODE_2390E9
	LDA.w #$0001
	STA.w !RAM_SMB3_Global_UpdateEntirePaletteFlag
	RTS

if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
%FREE_BYTES(NULLROM, 14, $FF)
elseif !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
%FREE_BYTES(NULLROM, 9, $FF)
elseif !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR]
%FREE_BYTES(NULLROM, 20-12, $FF)
else
%FREE_BYTES(NULLROM, 20, $FF)
endif

;--------------------------------------------------------------------

	%ROUTINE_SMB3_InitializeTilesetXXLevel_Minigame(NULLROM)		; $239110

;--------------------------------------------------------------------

SMB3_ProcessSpadeLevelIntroResizableObjects:
.Main:
SMB3_ProcessSlidingTileMinigameResizableObjects:
.Main:
SMB3_ProcessCardFlipMinigameResizableObjects:
.Main:
;$239135
	JSR.w CODE_239139
	RTL

CODE_239139:
	LDA.w $0706
	LSR
	LSR
	LSR
	LSR
	TAX
	DEX
	TXA
	JSL.l SMB3_ExecutePtr_Long

DATA_239147:
	dl CODE_2392D2

;--------------------------------------------------------------------

; Note: Something to do with the spade levels.

CODE_23914A:
	JSR.w CODE_23914E
	RTL

CODE_23914E:
	LDA.w $0706
	JSL.l SMB3_ExecutePtr_Long

DATA_239155:
	dl CODE_2391EF
	dl CODE_23922C
	dl CODE_23924F
	dl CODE_23928C
	dl CODE_23916A
	dl CODE_2391AF
	dl CODE_2392AF

;--------------------------------------------------------------------

CODE_23916A:
	LDA.b #$00
	STA.b $00
CODE_23916E:
	LDX.b $00
	LDA.w DATA_2196B9,x
	STA.b $01
	LDA.w DATA_2196B9+$01,x
	STA.b $02
	LDA.w DATA_2196B9+$02,x
	STA.b $03
	TXA
	CLC
	ADC.b #$03
	STA.b $00
	LDX.b #$00
	LDY.w $0700
	LDA.b $01
	STA.b [$2E],y
CODE_23918E:
	INY
	INX
	LDA.b $02
	STA.b [$2E],y
	TXA
	AND.b #$07
	CMP.b #$05
	BNE.b CODE_23918E
	LDA.b $03
	STA.b [$2E],y
	LDA.w $0700
	CLC
	ADC.b #$10
	STA.w $0700
	LDA.b $00
	CMP.b #$06
	BNE.b CODE_23916E
	RTS

;--------------------------------------------------------------------

CODE_2391AF:
	LDY.w $0700
	LDX.b #$00
	STX.b $0B
CODE_2391B6:
	LDX.b $0B
	LDA.w DATA_2196BF,x
	STA.b $00
	CMP.b #$FF
	BNE.b CODE_2391C2
	RTS

CODE_2391C2:
	CMP.b #$80
	BNE.b CODE_2391D5
	LDA.w $0700
	CLC
	ADC.b #$10
	STA.w $0700
	TAY
	INC.b $0B
	JMP.w CODE_2391B6

CODE_2391D5:
	LSR
	LSR
	LSR
	LSR
	TAX
	LDA.b $00
	AND.b #$0F
	STA.b $0A
CODE_2391E0:
	LDA.w DATA_2196EA,x
	STA.b [$2E],y
	INY
	DEC.b $0A
	BPL.b CODE_2391E0
	INC.b $0B
	JMP.w CODE_2391B6

;--------------------------------------------------------------------

CODE_2391EF:
	LDX.b #$02
	LDY.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.w $0747,y
CODE_2391F7:
	CMP.w DATA_219716,x
	BEQ.b CODE_2391FF
	DEX
	BNE.b CODE_2391F7
CODE_2391FF:
	LDA.w DATA_219719,x
	TAX
	LDA.b #$00
	STA.b $02
	LDY.w $0700
CODE_23920A:
	LDA.b #$02
	STA.b $00
CODE_23920E:
	LDA.w DATA_2196F2,x
	STA.b [$2E],y
	INY
	INX
	INC.b $02
	DEC.b $00
	BPL.b CODE_23920E
	LDA.w $0700
	CLC
	ADC.b #$10
	STA.w $0700
	TAY
	LDA.b $02
	CMP.b #$0C
	BNE.b CODE_23920A
	RTS

;--------------------------------------------------------------------

CODE_23922C:
	LDX.b #$00
	LDY.w $0700
CODE_239231:
	LDA.b #$01
	STA.b $00
CODE_239235:
	LDA.w DATA_21971C,x
	STA.b [$2E],y
	INY
	INX
	DEC.b $00
	BPL.b CODE_239235
	LDA.w $0700
	CLC
	ADC.b #$10
	STA.w $0700
	TAY
	CPX.b #$08
	BNE.b CODE_239231
	RTS

;--------------------------------------------------------------------

CODE_23924F:
	LDY.w $0700
	LDA.b #$C1
	STA.b [$2E],y
CODE_239256:
	INY
	LDA.b #$C4
	STA.b [$2E],y
	CPY.b #$0F
	BNE.b CODE_239256
	LDA.b #$C6
	STA.b [$2E],y
CODE_239263:
	INY
	TYA
	AND.b #$0F
	BNE.b CODE_23926D
	LDA.b #$C2
	BNE.b CODE_239273

CODE_23926D:
	CMP.b #$0F
	BNE.b CODE_239263
	LDA.b #$C7
CODE_239273:
	STA.b [$2E],y
	CPY.b #$9F
	BNE.b CODE_239263
	INY
	LDA.b #$C3
	STA.b [$2E],y
CODE_23927E:
	INY
	LDA.b #$C5
	STA.b [$2E],y
	CPY.b #$AF
	BNE.b CODE_23927E
	LDA.b #$C8
	STA.b [$2E],y
	RTS

;--------------------------------------------------------------------

CODE_23928C:
	LDX.b #$00
	LDY.w $0700
CODE_239291:
	LDA.b #$01
	STA.b $00
CODE_239295:
	LDA.w DATA_219724,x
	STA.b [$2E],y
	INY
	INX
	DEC.b $00
	BPL.b CODE_239295
	LDA.w $0700
	CLC
	ADC.b #$10
	STA.w $0700
	TAY
	CPX.b #$04
	BNE.b CODE_239291
	RTS

;--------------------------------------------------------------------

CODE_2392AF:
	LDX.b #$00
	LDY.w $0700
CODE_2392B4:
	LDA.b #$01
	STA.b $00
CODE_2392B8:
	LDA.w DATA_219728,x
	STA.b [$2E],y
	INY
	INX
	DEC.b $00
	BPL.b CODE_2392B8
	LDA.w $0700
	CLC
	ADC.b #$10
	STA.w $0700
	TAY
	CPX.b #$04
	BNE.b CODE_2392B4
	RTS

;--------------------------------------------------------------------

CODE_2392D2:
	LDA.b #$01
	STA.b $00
	LDY.w $0700
CODE_2392D9:
	LDA.w $0706
	AND.b #$0F
	TAX
CODE_2392DF:
	LDA.b #$C0
	STA.b [$2E],y
	INY
	DEX
	BPL.b CODE_2392DF
	LDA.w $0700
	CLC
	ADC.b #$10
	STA.w $0700
	TAY
	DEC.b $00
	BPL.b CODE_2392D9
	RTS

;--------------------------------------------------------------------

; Todo: Unreferrenced routine.

CODE_2392F6:
	TYA
	CLC
	ADC.b #$10
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	RTS

;--------------------------------------------------------------------

; Todo: Unreferrenced routine.

CODE_239302:
	LDA.b $05
	STA.b $2F
	LDY.w $0700
	INY
	TYA
	AND.b #$0F
	BNE.b CODE_239340
	LDY.b #$00
	LDA.b $0E
	AND.b #$10
	BEQ.b CODE_239318
	INY
CODE_239318:
	STY.b $09
	LDA.b $2E
	CLC
	ADC.b #$B0
	STA.b $2E
	LDA.b $2F
	ADC.b $09
	STA.b $2F
	STA.b $05
	LDA.b $0F
	AND.b #$F0
	LSR
	LSR
	LSR
	TAY
	INY
	INY
	LDA.w DATA_218200+$01,y
	STA.b $04
	INC.b $04
	LDA.w $0700
	AND.b #$F0
	TAY
CODE_239340:
	STY.w $0700
	RTS

;--------------------------------------------------------------------

; Note: Routine that draws the spade minigame host.

CODE_239344:
	LDA.w !RAM_SMB3_Level_GraphicsAndPaletteSettingFromHeader
	CMP.b #$0F
	BNE.b CODE_23934E
	JSR.w CODE_23934F
CODE_23934E:
	RTL

CODE_23934F:
	LDA.w $1034
	JSL.l SMB3_ExecutePtr_Absolute

DATA_239345:
	dw CODE_23935E
	dw CODE_239362
	dw CODE_23936B
	dw CODE_23936F

;--------------------------------------------------------------------

CODE_23935E:
	JSR.w CODE_239373
	RTS

;--------------------------------------------------------------------

CODE_239362:
	JSR.w CODE_2393BC
	LDA.b #$3F
	JSR.w CODE_239410
	RTS

;--------------------------------------------------------------------

CODE_23936B:
	JSR.w CODE_2393BC
	RTS

;--------------------------------------------------------------------

CODE_23936F:
	JSR.w CODE_2393E6
	RTS

;--------------------------------------------------------------------

; Note: Routine that draws the spade level toad.

CODE_239373:
	LDA.b #$94
	STA.b $0A
	LDY.b #$00
	LDX.b #$0A
CODE_23937B:
	LDA.w DATA_219737,x
	STA.w SMB3_OAMBuffer[$04].XDisp,y
	STA.w SMB3_OAMBuffer[$05].XDisp,y
	LDA.w DATA_21972C,x
	STA.w SMB3_OAMBuffer[$04].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$05].YDisp,y
	LDA.b $0A
	STA.w SMB3_OAMBuffer[$04].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$05].Tile,y
	LDA.b #$2A
	STA.w SMB3_OAMBuffer[$04].Prop,y
	STA.w SMB3_OAMBuffer[$05].Prop,y
	PHY
	TYA
	LSR
	LSR
	TAY
	LDA.b #$00
	STA.w SMB3_OAMTileSizeBuffer[$04].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$05].Slot,y
	PLY
	DEC.b $0A
	DEC.b $0A
	TYA
	CLC
	ADC.b #$08
	TAY
	DEX
	BPL.b CODE_23937B
	RTS

;--------------------------------------------------------------------

CODE_2393BC:
	LDA.b #$99
	STA.b $0A
	LDY.b #$00
	LDX.b #$09
CODE_2393C4:
	LDA.w DATA_219742,x
	STA.w SMB3_OAMBuffer[$04].XDisp,y
	INY
	LDA.b $0A
	STA.w SMB3_OAMBuffer[$04].XDisp,y
	INY
	LDA.b #$00
	STA.w SMB3_OAMBuffer[$04].XDisp,y
	INY
	LDA.w DATA_21974C,x
	STA.w SMB3_OAMBuffer[$04].XDisp,y
	INY
	DEC.b $0A
	DEC.b $0A
	DEX
	BPL.b CODE_2393C4
	RTS

;--------------------------------------------------------------------

CODE_2393E6:
	LDA.b #$AF
	STA.b $0A
	LDY.b #$00
	LDX.b #$0A
CODE_2393EE:
	LDA.w DATA_219756,x
	STA.w SMB3_OAMBuffer[$04].XDisp,y
	INY
	LDA.b $0A
	STA.w SMB3_OAMBuffer[$04].XDisp,y
	INY
	LDA.b #$00
	STA.w SMB3_OAMBuffer[$04].XDisp,y
	INY
	LDA.w DATA_219761,x
	STA.w SMB3_OAMBuffer[$04].XDisp,y
	INY
	DEC.b $0A
	DEC.b $0A
	DEX
	BPL.b CODE_2393EE
	RTS

;--------------------------------------------------------------------

CODE_239410:
	STA.b $0A
	LDX.b #$07
CODE_239414:
	LDA.w DATA_21976C,x
	STA.w SMB3_OAMBuffer[$04].XDisp,y
	INY
	LDA.b $0A
	STA.w SMB3_OAMBuffer[$04].XDisp,y
	INY
	LDA.b #$00
	STA.w SMB3_OAMBuffer[$04].XDisp,y
	INY
	LDA.w DATA_219774,x
	STA.w SMB3_OAMBuffer[$04].XDisp,y
	INY
	DEC.b $0A
	DEC.b $0A
	DEX
	BPL.b CODE_239414
	LDA.w !RAM_SMB3_SpadeGame_CurrentState
	CMP.b #$02
	BCC.b CODE_239485
	LDX.w $1043
	LDA.w DATA_21977E,x
	STA.b $0A
	LDA.w !RAM_SMB3_Global_ScratchRAM7E1026
	STA.b $0B
	LDX.b #$01
CODE_23944B:
	LDA.w !RAM_SMB3_Global_ScratchRAM7E1027
	STA.w SMB3_OAMBuffer[$04].XDisp,y
	INY
	LDA.b $0A
	STA.w SMB3_OAMBuffer[$04].XDisp,y
	INY
	LDA.w DATA_21977C,x
	STA.w SMB3_OAMBuffer[$04].XDisp,y
	INY
	LDA.b $0B
	STA.w SMB3_OAMBuffer[$04].XDisp,y
	INY
	LDA.b $0B
	CLC
	ADC.b #$08
	STA.b $0B
	DEX
	BPL.b CODE_23944B
	LDA.w !RAM_SMB3_Global_ScratchRAM7E1027
	CMP.b #$60
	BEQ.b CODE_239485
	DEC.w !RAM_SMB3_Global_ScratchRAM7E1027
	LDA.w !RAM_SMB3_Global_ScratchRAM7E1027
	CMP.b #$5F
	BCS.b CODE_239485
	LDA.b #$60
	STA.w !RAM_SMB3_Global_ScratchRAM7E1027
CODE_239485:
	RTS

;--------------------------------------------------------------------

SMB3_ProcessSpadeGameIntro:
.Main:
;$239486
	JSR.w CODE_23934F
	LDA.w !RAM_SMB3_SpadeGame_CurrentState
	CMP.b #$07
	BCC.b CODE_23949E
	JSR.w SMB3_CheckIfAXYBArePressed_Main
	BCC.b CODE_23949E
	LDA.b #$09
	STA.w !RAM_SMB3_SpadeGame_CurrentState
	LDA.b #$01
	STA.b $14
CODE_23949E:
	JSR.w CODE_2394A2
	RTL

CODE_2394A2:
	LDA.w !RAM_SMB3_SpadeGame_CurrentState
	JSL.l SMB3_ExecutePtr_Absolute

DATA_2394A9:
	dw SMB3_SpadeGameIntroState00_DrawTextBox_Main
	dw SMB3_SpadeGameIntroState01_DisplayText_Main
	dw SMB3_SpadeGameIntroState02_RollDice_Main
	dw CODE_239752
	dw CODE_239853
	dw CODE_2396EB
	dw SMB3_SpadeGameIntroState06_DoNothing_Main
	dw SMB3_SpadeGameIntroState07_DisplayText_Main
	dw SMB3_SpadeGameIntroState08_DelayFadeOut_Main
	dw CODE_2395B1

;--------------------------------------------------------------------

SMB3_SpadeGameIntroState00_DrawTextBox:
.Main:
;$2394BD
	LDA.b #$51
	STA.w !REGISTER_BG3AddressAndSize
	LDA.w !RAM_SMB3_CardFlipGame_CursorPosIndex
	CLC
	ADC.b #$08
	STA.b $28
	INC.w !RAM_SMB3_CardFlipGame_CursorPosIndex
	CMP.b #$0C
	BNE.b CODE_2394FB
	LDA.b #$00
	STA.w $070F
	INC.w !RAM_SMB3_SpadeGame_CurrentState
	LDY.w !RAM_SMB3_SpadeGame_GameType
	LDA.w DATA_219782,y
	STA.b $2E
	LDA.w DATA_21978A,y
	STA.b $2F
	LDA.b #DATA_219782>>16
	STA.b $30
	CPY.b #$01
	BEQ.b CODE_2394F2
	CPY.b #$02
	BNE.b CODE_2394FB
CODE_2394F2:
	LDA.b #$F8							;\ Note: This is a code hack to disable the unused dice portion of the spade games.
	STA.b $95							;| If you want to partially restore the functionality, set $95 to something like #$78...
	LDA.b #$07							;| ... And remove the lines that set the state to #$07.
	STA.w !RAM_SMB3_SpadeGame_CurrentState				;/
CODE_2394FB:
	RTS

;--------------------------------------------------------------------

SMB3_SpadeGameIntroState08_DelayFadeOut:
.Main:
;$2394FC
	LDA.w $0711
	BNE.b CODE_239506
	LDA.b #$A0
	STA.w $0711
CODE_239506:
	DEC.w $0711
	BNE.b CODE_239512
	INC.w !RAM_SMB3_SpadeGame_CurrentState
	LDA.b #$01
	STA.b $14
CODE_239512:
	RTS

;--------------------------------------------------------------------

SMB3_SpadeGameIntroState01_DisplayText:
.Main:
SMB3_SpadeGameIntroState07_DisplayText:
.Main:
;$239513
	DEC.w $070E
	BEQ.b CODE_239519
	RTS

CODE_239519:
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$03
else
	LDA.b #$04
endif
	STA.w $070E
CODE_23951E:
	LDA.w $02D4
	AND.b #$01
	BEQ.b CODE_23952A
	LDA.b #!Define_SMAS_Sound0060_Stomp7
	STA.w !RAM_SMB3_Global_SoundCh1
CODE_23952A:
	LDY.w $02D4
	LDA.b [$2E],y
	BNE.b CODE_23954D
	LDA.w $05E8
	CLC
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	ADC.b #$40
else
	ADC.b #$20
endif
	TAY
	LDA.w $05E7
	ADC.b #$00
	STA.w $05E7
	TYA
	AND.b #$E0
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	ORA.b #$09
else
	ORA.b #$04
endif
	STA.w $05E8
	INC.w $02D4
	BRA.b CODE_23951E

CODE_23954D:
	CMP.b #$FF
	BEQ.b CODE_239592
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	PHA
	PHY
	TYX
	LDA.l DATA_219891,x
	LDY.w $1042
	CPY.b #$01
	BEQ.b +
	LDA.l DATA_2198D0,x
+:
	STA.b $00
endif
	CMP.b #$FE
	BNE.b CODE_23955C
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	LDA.b #$00
	STA.w !RAM_SMB3_Global_SoundCh1
else
	LDY.b #$00							;\ Optimization: STZ.w !RAM_SMB3_Global_SoundCh1
	STY.w !RAM_SMB3_Global_SoundCh1					;/
	BRA.b CODE_23958B
endif

CODE_23955C:
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	PLY
	PLA
endif
	LDX.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	STA.w SMB3_StripeImageUploadTable[$02].LowByte,x
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	LDA.b $00
	STA.w SMB3_StripeImageUploadTable[$03].LowByte,x
endif
	LDA.b #$21
	STA.w SMB3_StripeImageUploadTable[$02].HighByte,x
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	STA.w SMB3_StripeImageUploadTable[$03].HighByte,x
endif
	LDA.w $05E7
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,x
	LDA.w $05E8
	STA.w SMB3_StripeImageUploadTable[$00].HighByte,x
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	LDA.b #$80
else
	LDA.b #$00
endif
	STA.w SMB3_StripeImageUploadTable[$01].LowByte,x
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	LDA.b #$03
else
	LDA.b #$01
endif
	STA.w SMB3_StripeImageUploadTable[$01].HighByte,x
	LDA.b #$FF
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	STA.w SMB3_StripeImageUploadTable[$04].LowByte,x
else
	STA.w SMB3_StripeImageUploadTable[$03].LowByte,x
endif
	LDA.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	CLC
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	ADC.b #$08
else
	ADC.b #$06
endif
	STA.w !RAM_SMB3_Global_StripeImageUploadIndexLo
CODE_23958B:
	INC.w $05E8
	INC.w $02D4
	RTS

CODE_239592:
	LDA.w !RAM_SMB3_SpadeGame_CurrentState
	CMP.b #$07
	BEQ.b CODE_2395A1
	LDA.b #$78
	STA.w !RAM_SMB3_Global_ScratchRAM7E1027
	STA.w !RAM_SMB3_Global_ScratchRAM7E1026
CODE_2395A1:
	LDA.b #$00
	STA.w $02D4
	INC.w !RAM_SMB3_SpadeGame_CurrentState
	INY
	LDA.b [$2E],y
	STA.w !RAM_SMB3_Global_ScratchRAM7E102A
	RTS

;--------------------------------------------------------------------

SMB3_SpadeGameIntroState06_DoNothing:
.Main:
;$2395B0
	RTS

;--------------------------------------------------------------------

CODE_2395B1:
	LDA.w $1034
	CMP.b #$01
	BNE.b CODE_2395BF
	LDA.w !RAM_SMB3_Global_ScratchRAM7E1027
	CMP.b #$60
	BNE.b CODE_2395BF
CODE_2395BF:
	RTS

;--------------------------------------------------------------------

; Note: This routine will never be called because it's in a different bank from the JSR leading to it.

CODE_2395C0:
	RTS

CODE_2395C1:
	LDA.w $1043
	ASL
	STA.b $00
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.l $7E3992,x
	AND.b #$0A
	BEQ.b CODE_2395D4
	INC.b $00
CODE_2395D4:
	LDY.b $00
	LDA.w DATA_219976,y
	STA.l $7E397D,x
	LDA.w DATA_21997A,y
	AND.b #$F0
	STA.l $7E3981,x
	LDA.w DATA_21997A,y
	AND.b #$0F
	STA.l $7E397F,x
	LDA.b #$01
	STA.w $0713
	RTS

;--------------------------------------------------------------------

SMB3_SpadeGameIntroState02_RollDice:
.Main:
;$2395F5
	INC.w $069A
	LDA.w $069A
	AND.b #$03
	BNE.b CODE_239612
	LDA.l !RAM_SMB3_SpadeGame_CurrentDiceRoll
	INC
	STA.l !RAM_SMB3_SpadeGame_CurrentDiceRoll
	CMP.b #$06
	BNE.b CODE_239612
	LDA.b #$00
	STA.l !RAM_SMB3_SpadeGame_CurrentDiceRoll
CODE_239612:
	LDA.b !RAM_SMB3_Global_ControllerPress1
	AND.b #!Joypad_B>>8
	BEQ.b CODE_239657
	LDA.b #$00
	STA.w $069A
	STA.w $070F
	LDY.b #$00
	LDA.w !RAM_SMB3_SpadeGame_GameType
	CMP.b #$01
	BEQ.b CODE_23962E
	INY
	CMP.b #$02
	BNE.b CODE_239647
CODE_23962E:
	LDA.l !RAM_SMB3_SpadeGame_CurrentDiceRoll
	AND.b #$01
	CMP.w DATA_21997E,y
	BNE.b CODE_23963F
	LDA.w DATA_219980,y
	STA.w $069A
CODE_23963F:
	LDA.b #$04
	STA.w !RAM_SMB3_SpadeGame_CurrentState
	JMP.w CODE_239657

CODE_239647:
	LDA.l !RAM_SMB3_SpadeGame_CurrentDiceRoll
	TAX
	CPX.b #$02
	BCC.b CODE_239654
	INX
	STX.w !RAM_SMB3_Global_PointsToGiveLo
CODE_239654:
	INC.w !RAM_SMB3_SpadeGame_CurrentState
CODE_239657:
	LDA.b $96
	STA.w SMB3_OAMBuffer[$3E].XDisp
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$3F].XDisp
	LDA.b $95
	STA.w SMB3_OAMBuffer[$3E].YDisp
	STA.w SMB3_OAMBuffer[$3F].YDisp
	LDA.l !RAM_SMB3_SpadeGame_CurrentDiceRoll
	ASL
	ORA.b #$10
	STA.w SMB3_OAMBuffer[$3E].Tile
	STA.w SMB3_OAMBuffer[$3F].Tile
	LDA.b #$26
	STA.w SMB3_OAMBuffer[$3E].Prop
	LDA.b #$E6
	STA.w SMB3_OAMBuffer[$3F].Prop
	LDA.b #$00
	STA.w SMB3_OAMTileSizeBuffer[$3E].Slot
	STA.w SMB3_OAMTileSizeBuffer[$3F].Slot
	RTS

;--------------------------------------------------------------------

; Todo: Unreferrenced routine.

CODE_23968A:
	RTS

CODE_23968B:
	LDA.w $070F
	BNE.b CODE_2396EA
	INC.w $070E
	LDA.w $070E
	AND.b #$03
	BNE.b CODE_2396EA
CODE_23969A:
	LDX.w $02D4
	LDA.w DATA_219982,x
	BNE.b CODE_2396AD
	LDA.b #$55
	STA.w $070C
	INC.w $02D4
	JMP.w CODE_23969A

CODE_2396AD:
	CMP.b #$FF
	BNE.b CODE_2396BF
	LDA.b #$35
	STA.w $070C
	LDA.b #$00
	STA.w $02D4
	INC.w $070F
	RTS

CODE_2396BF:
	LDY.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	STA.w SMB3_StripeImageUploadTable[$02].LowByte-$02,y
	LDA.w $070B
	STA.w SMB3_StripeImageUploadTable[$00].HighByte-$02,y				; Todo: Not sure what RAM_SMB3_Misc_StripeImageUploadIndexLo is normally when getting to here, but I doubt it's #$0000.
	LDA.w $070C
	STA.w SMB3_StripeImageUploadTable[$01].LowByte-$02,y
	LDA.b #$01
	STA.w SMB3_StripeImageUploadTable[$01].HighByte-$02,y
	LDA.b #$00
	STA.w SMB3_StripeImageUploadTable[$02].HighByte-$02,y
	LDA.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	CLC
	ADC.b #$04
	STA.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	INC.w $070C
	INC.w $02D4
CODE_2396EA:
	RTS

;--------------------------------------------------------------------

CODE_2396EB:
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$01
	BNE.b CODE_239704
	LDA.l !RAM_SMB3_SpadeGame_CurrentDiceRoll
	INC
	STA.l !RAM_SMB3_SpadeGame_CurrentDiceRoll
	CMP.b #$06
	BNE.b CODE_239704
	LDA.b #$00
	STA.l !RAM_SMB3_SpadeGame_CurrentDiceRoll
CODE_239704:
	LDA.b $97
	CMP.b #$80
	BEQ.b CODE_23970F
	SEC
	SBC.b #$08
	STA.b $97
CODE_23970F:
	LDA.b $97
	ASL
	ASL
	ASL
	ASL
	STA.b $00
	LDA.b $97
	LSR
	LSR
	LSR
	LSR
	CMP.b #$08
	BCC.b CODE_239723
	ORA.b #$F0
CODE_239723:
	STA.b $01
	LDA.b $98
	CLC
	ADC.b $00
	STA.b $98
	LDA.b $95
	ADC.b $01
	STA.b $95
	LDA.b $95
	CMP.b #$F8
	BCC.b CODE_239751
	LDA.b #$F8
	STA.b $95
	LDA.b #$00
	STA.b $97
	STA.w $070F
	LDA.w $069A
	BEQ.b CODE_23974C
	INC.w !RAM_SMB3_SpadeGame_CurrentState
	RTS

CODE_23974C:
	LDA.b #$08
	STA.w !RAM_SMB3_SpadeGame_CurrentState
CODE_239751:
	RTS

;--------------------------------------------------------------------

CODE_239752:
	LDA.l !RAM_SMB3_SpadeGame_CurrentDiceRoll
	CMP.b #$02
	BCS.b CODE_239772
	CMP.b #$01
	BNE.b CODE_239768
	LDX.b #$03
	JSL.l SMB3_GiveDiceRollReward_Main
	INC.w !RAM_SMB3_SpadeGame_CurrentState
	RTS

CODE_239768:
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	INC.w !RAM_SMB3_Level_Player_MariosLives,x
	INC.w !RAM_SMB3_SpadeGame_CurrentState
	RTS

CODE_239772:
	LDA.w $0059
	JSL.l SMB3_ExecutePtr_Absolute

DATA_239779:
	dw CODE_23977D
	dw CODE_2397B1

;--------------------------------------------------------------------

CODE_23977D:
	LDA.l !RAM_SMB3_SpadeGame_CurrentDiceRoll
	TAY
CODE_239782:
	LDA.b #$78
	STA.w $061F,y
	STA.w $062B,y
	LDX.b #$F0
	LDA.w !RAM_SMB3_Global_RandomByte02,y
	ASL
	PHA
	BCC.b CODE_239795
	LDX.b #$00
CODE_239795:
	TXA
	STA.b $00
	PLA
	AND.b #$0F
	ORA.b $00
	STA.w $0625,y
	LDA.w !RAM_SMB3_Global_RandomByte02,y
	AND.b #$07
	ORA.b #$C0
	STA.w $0619,y
	DEY
	BPL.b CODE_239782
	INC.w $0059
	RTS

;--------------------------------------------------------------------

CODE_2397B1:
	LDA.l !RAM_SMB3_SpadeGame_CurrentDiceRoll
	TAY
CODE_2397B6:
	JSR.w CODE_2397EC
	JSR.w CODE_2397DE
	LDA.w $0619,y
	CLC
	ADC.b #$02
	STA.w $0619,y
	DEY
	BPL.b CODE_2397B6
	JSR.w CODE_239827
	LDA.l !RAM_SMB3_SpadeGame_CurrentDiceRoll
	TAY
CODE_2397D0:
	LDA.w $061F,y
	CMP.b #$F8
	BNE.b CODE_2397DD
	DEY
	BPL.b CODE_2397D0
	INC.w !RAM_SMB3_SpadeGame_CurrentState
CODE_2397DD:
	RTS

CODE_2397DE:
	TYA
	CLC
	ADC.b #$0C
	TAY
	JSR.w CODE_2397FA
	TYA
	SEC
	SBC.b #$0C
	TAY
	RTS

CODE_2397EC:
	LDA.w $0619,y
	BMI.b CODE_2397FA
	CMP.b #$40
	BMI.b CODE_2397FA
	LDA.b #$40
	STA.w $0619,y
CODE_2397FA:
	LDA.w $0619,y
	ASL
	ASL
	ASL
	ASL
	STA.b $00
	LDX.b #$00
	LDA.w $0619,y
	LSR
	LSR
	LSR
	LSR
	CMP.b #$08
	BCC.b CODE_239813
	DEX
	ORA.b #$F0
CODE_239813:
	STA.b $01
	LDA.w $0631,y
	CLC
	ADC.b $00
	STA.w $0631,y
	LDA.w $061F,y
	ADC.b $01
	STA.w $061F,y
	RTS

CODE_239827:
	LDA.l !RAM_SMB3_SpadeGame_CurrentDiceRoll
	TAY
CODE_23982C:
	TYA
	ASL
	ASL
	TAX
	LDA.w $061F,y
	CMP.b #$C0
	BCC.b CODE_23983C
	LDA.b #$F8
	STA.w $061F,y
CODE_23983C:
	STA.w SMB3_OAMBuffer[$20].XDisp,x
	LDA.b #$61
	STA.w SMB3_OAMBuffer[$20].YDisp,x
	LDA.b #$01
	STA.w SMB3_OAMBuffer[$20].Tile,x
	LDA.w $062B,y
	STA.w SMB3_OAMBuffer[$20].Prop,x
	DEY
	BPL.b CODE_23982C
	RTS

;--------------------------------------------------------------------

CODE_239853:
	LDA.w $0711
	BNE.b CODE_23985D
	LDA.b #$80
	STA.w $0711
CODE_23985D:
	DEC.w $0711
	BNE.b CODE_239870
	INC.w !RAM_SMB3_SpadeGame_CurrentState
	LDA.w !RAM_SMB3_SpadeGame_CurrentState
	CMP.b #$09
	BNE.b CODE_239870
	LDA.b #$01
	STA.b $14
CODE_239870:
	RTS

;--------------------------------------------------------------------

; Optimization: This routine draws more sprite tiles than it needs to.

SMB3_DrawSpadeGameSideBorders:
.Main:
;$239871
	REP.b #$10
	LDA.b #$1F
	STA.b $00
	LDY.w #$0160
CODE_23987A:
	LDA.b #$08
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	LDA.b #$F0
	STA.w SMB3_OAMBuffer[$02].XDisp,y
	STA.w SMB3_OAMBuffer[$03].XDisp,y
	LDA.b #$F8
	STA.w SMB3_OAMBuffer[$04].XDisp,y
	STA.w SMB3_OAMBuffer[$05].XDisp,y
	LDA.b #$00
	STA.w SMB3_OAMBuffer[$06].XDisp,y
	STA.w SMB3_OAMBuffer[$07].XDisp,y
	LDA.b $00
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	STA.w SMB3_OAMBuffer[$02].YDisp,y
	STA.w SMB3_OAMBuffer[$04].YDisp,y
	STA.w SMB3_OAMBuffer[$06].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$01].YDisp,y
	STA.w SMB3_OAMBuffer[$03].YDisp,y
	STA.w SMB3_OAMBuffer[$05].YDisp,y
	STA.w SMB3_OAMBuffer[$07].YDisp,y
	LDA.b #$70
	STA.w SMB3_OAMBuffer[$00].Tile,y
	STA.w SMB3_OAMBuffer[$02].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$01].Tile,y
	STA.w SMB3_OAMBuffer[$03].Tile,y
	LDA.b #$7A
	STA.w SMB3_OAMBuffer[$04].Tile,y
	STA.w SMB3_OAMBuffer[$06].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$05].Tile,y
	STA.w SMB3_OAMBuffer[$07].Tile,y
	LDA.b #$2A
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$01].Prop,y
	STA.w SMB3_OAMBuffer[$02].Prop,y
	STA.w SMB3_OAMBuffer[$03].Prop,y
	STA.w SMB3_OAMBuffer[$04].Prop,y
	STA.w SMB3_OAMBuffer[$05].Prop,y
	STA.w SMB3_OAMBuffer[$06].Prop,y
	STA.w SMB3_OAMBuffer[$07].Prop,y
	PHY
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b #$00
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$02].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$03].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$04].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$05].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$06].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$07].Slot,y
	PLY
	LDA.b $00
	CLC
	ADC.b #$10
	STA.b $00
	REP.b #$20
	TYA
	SEC
	SBC.w #$0020
	TAY
	SEP.b #$20
	CPY.w #$0020
	BEQ.b CODE_23992C
	BRL.w CODE_23987A

CODE_23992C:
	SEP.b #$10
	LDY.b #$2F
CODE_239930:
	LDA.w DATA_21998B,y
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	DEY
	BPL.b CODE_239930
	REP.b #$20
	LDA.w #$0000
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot
	STA.w SMB3_OAMTileSizeBuffer[$02].Slot
	STA.w SMB3_OAMTileSizeBuffer[$04].Slot
	STA.w SMB3_OAMTileSizeBuffer[$06].Slot
	STA.w SMB3_OAMTileSizeBuffer[$08].Slot
	STA.w SMB3_OAMTileSizeBuffer[$0A].Slot
	SEP.b #$20
	RTL

;--------------------------------------------------------------------

SMB3_ProcessSlidingPictureSpadeGame:
.Main:
;$239953
	JSR.w CODE_239957
	RTL

CODE_239957:
	LDA.w $1009
	ASL
	TAX
	JMP.w (DATA_23995F,x)

DATA_23995F:
	dw CODE_239963
	dw CODE_23997B

;--------------------------------------------------------------------

CODE_239963:
	LDA.w $100A
	JSL.l SMB3_ExecutePtr_Absolute

DATA_23996A:
	dw CODE_23996E
	dw CODE_239972

;--------------------------------------------------------------------

CODE_23996E:
	INC.w $100A
	RTS

;--------------------------------------------------------------------

CODE_239972:
	INC.w $1009
	LDA.b #$00
	STA.w !RAM_SMB3_SlidingPictureGame_NumberOfRoundsToPlay
	RTS

;--------------------------------------------------------------------

CODE_23997B:
	JSL.l SMB3_HandleSlidingPictureBGWinningAnimations_Main
	LDA.w !RAM_SMB3_SlidingPictureGame_CurrentState
	ASL
	TAX
	JMP.w (DATA_239987,x)

DATA_239987:
	dw SMB3_SlidingPictureGameState00_InitializeRowRAM_Main
	dw SMB3_SlidingPictureGameState01_PlayGame_Main
	dw SMB3_SlidingPictureGameState02_FadeOut_Main
	dw SMB3_SlidingPictureGameState03_ExitToOverworld_Main
	dw SMB3_SlidingPictureGameState04_DelayXUpText_Main
	dw SMB3_SlidingPictureGameState05_RewardLivesAndDisplayXUpText_Main

;--------------------------------------------------------------------

SMB3_SlidingPictureGameState00_InitializeRowRAM:
.Main:
;$239993
	STZ.w !RAM_SMB3_SlidingPictureGame_TopRowState
	STZ.w !RAM_SMB3_SlidingPictureGame_MiddleRowState
	STZ.w !RAM_SMB3_SlidingPictureGame_BottomRowState
	STZ.w !RAM_SMB3_SlidingPictureGame_NumberOfLivesToAward
	LDA.b #$70
	STA.w !RAM_SMB3_SlidingPictureGame_TopRowXSpeed
	LDA.b #$90
	STA.w !RAM_SMB3_SlidingPictureGame_MiddleRowXSpeed
	LDA.b #$7F
	STA.w !RAM_SMB3_SlidingPictureGame_BottomRowXSpeed
	STZ.w !RAM_SMB3_SlidingPictureGame_BeepNoiseCounter
	STZ.w !RAM_SMB3_SlidingPictureGame_TopRowSubXPos
	STZ.w !RAM_SMB3_SlidingPictureGame_MiddleRowSubXPos
	STZ.w !RAM_SMB3_SlidingPictureGame_BottomRowSubXPos
	STZ.w !RAM_SMB3_SlidingPictureGame_TopRowXPosLo
	STZ.w !RAM_SMB3_SlidingPictureGame_MiddleRowXPosLo
	STZ.w !RAM_SMB3_SlidingPictureGame_BottomRowXPosLo
	STZ.w !RAM_SMB3_SlidingPictureGame_TopRowXPosHi
	STZ.w !RAM_SMB3_SlidingPictureGame_MiddleRowXPosHi
	STZ.w !RAM_SMB3_SlidingPictureGame_BottomRowXPosHi
	LDA.b #$30
	STA.w !RAM_SMB3_SlidingPictureGame_BeepNoiseCounterOffset
	INC.w !RAM_SMB3_SlidingPictureGame_CurrentState
	RTS

;--------------------------------------------------------------------

SMB3_SlidingPictureGameState01_PlayGame:
.Main:
;$2399D5
	JSR.w SMB3_CheckIfAXYBArePressed_Main
	BCC.b CODE_239A29
	LDA.w !RAM_SMB3_SlidingPictureGame_TopRowState
	BNE.b CODE_2399EF
	INC.w !RAM_SMB3_SlidingPictureGame_TopRowState
	LDA.w !RAM_SMB3_Global_RandomByte02
	AND.b #$0F
	ORA.b #$20
	STA.w !RAM_SMB3_SlidingPictureGame_TopRowDelayTimer
	JMP.w CODE_239A24

CODE_2399EF:
	LDA.w !RAM_SMB3_SlidingPictureGame_MiddleRowState
	BNE.b CODE_239A0B
	LDA.w !RAM_SMB3_SlidingPictureGame_TopRowState
	CMP.b #$02
	BCC.b CODE_239A0B
	INC.w !RAM_SMB3_SlidingPictureGame_MiddleRowState
	LDA.w !RAM_SMB3_Global_RandomByte03
	AND.b #$1F
	ORA.b #$20
	STA.w !RAM_SMB3_SlidingPictureGame_MiddleRowDelayTimer
	JMP.w CODE_239A24

CODE_239A0B:
	LDA.w !RAM_SMB3_SlidingPictureGame_BottomRowState
	BNE.b CODE_239A29
	LDA.w !RAM_SMB3_SlidingPictureGame_MiddleRowState
	CMP.b #$02
	BCC.b CODE_239A29
	INC.w !RAM_SMB3_SlidingPictureGame_BottomRowState
	LDA.w !RAM_SMB3_Global_RandomByte04
	AND.b #$3F
	ORA.b #$40
	STA.w !RAM_SMB3_SlidingPictureGame_BottomRowDelayTimer
CODE_239A24:
	LDA.b #!Define_SMAS_Sound0063_StepOnLevelTile
	STA.w !RAM_SMB3_Global_SoundCh3
CODE_239A29:
	LDX.b #$02
CODE_239A2B:
	STX.b $19
	LDA.w !RAM_SMB3_SlidingPictureGame_TopRowDelayTimer,x
	BEQ.b CODE_239A35
	DEC.w !RAM_SMB3_SlidingPictureGame_TopRowDelayTimer,x
CODE_239A35:
	JSR.w CODE_239A3C
	DEX
	BPL.b CODE_239A2B
	RTS

CODE_239A3C:
	LDA.w !RAM_SMB3_SlidingPictureGame_TopRowState,x
	JSL.l SMB3_ExecutePtr_Absolute

DATA_239A43:
	dw SMB3_SlidingPictureRowState00_Sliding_Main
	dw SMB3_SlidingPictureRowState01_DelaySlidingIntoPlace_Main
	dw SMB3_SlidingPictureRowState02_SlowDown_Main
	dw SMB3_SlidingPictureRowState03_LockInPlace_Main
	dw SMB3_SlidingPictureRowState04_JiggleAndCheckIfPictureIsLinedUp_Main
	dw SMB3_SlidingPictureRowState05_CheckIfAnotherRoundShouldBegin_Main

;--------------------------------------------------------------------

SMB3_SlidingPictureRowState00_Sliding:
.Main:
CODE_239A4F:
	CPX.b #$02
	BNE.b CODE_239A6C
	LDA.w !RAM_SMB3_SlidingPictureGame_BeepNoiseCounter
	CLC
	ADC.w !RAM_SMB3_SlidingPictureGame_BeepNoiseCounterOffset
	STA.w !RAM_SMB3_SlidingPictureGame_BeepNoiseCounter
	DEC.w $02E0							; Note: If this line were removed, it would allow the beeping to "slow down" as the last row slows down.
	BPL.b CODE_239A6C
	LDA.b #$06
	STA.w $02E0
	LDA.b #!Define_SMAS_Sound0060_SelectCard
	STA.w !RAM_SMB3_Global_SoundCh1
CODE_239A6C:
	JMP.w CODE_239CC5

;--------------------------------------------------------------------

SMB3_SlidingPictureRowState01_DelaySlidingIntoPlace:
.Main:
;$239A6F
	LDA.w !RAM_SMB3_SlidingPictureGame_TopRowDelayTimer,x
	BNE.b CODE_239A4F
	INC.w !RAM_SMB3_SlidingPictureGame_TopRowState,x
	JMP.w CODE_239A4F

;--------------------------------------------------------------------

SMB3_SlidingPictureRowState02_SlowDown:
.Main:
;$239A7A
	LDA.w !RAM_SMB3_SlidingPictureGame_TopRowXSpeed,x
	CLC
	ADC.b #$3F
	CMP.b #$7F
	BCS.b CODE_239A8A
	INC.w !RAM_SMB3_SlidingPictureGame_TopRowState,x
	JMP.w CODE_239A4F

CODE_239A8A:
	CPX.b #$02
	BNE.b CODE_239AA1
	LDA.w !RAM_SMB3_SlidingPictureGame_BeepNoiseCounterOffset
	CMP.b #$11
	BCC.b CODE_239AA1
	DEC.w !RAM_SMB3_SlidingPictureGame_BeepNoiseCounterOffset
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$01
	BNE.b CODE_239AA1
	DEC.w !RAM_SMB3_SlidingPictureGame_BeepNoiseCounterOffset
CODE_239AA1:
	LDA.w !RAM_SMB3_SlidingPictureGame_TopRowXSpeed,x
	BPL.b CODE_239AAF
	LDA.w !RAM_SMB3_SlidingPictureGame_TopRowXSpeed,x
	CLC
	ADC.b #$04
	STA.w !RAM_SMB3_SlidingPictureGame_TopRowXSpeed,x
CODE_239AAF:
	LDA.w !RAM_SMB3_SlidingPictureGame_TopRowXSpeed,x
	SEC
	SBC.b #$02
	STA.w !RAM_SMB3_SlidingPictureGame_TopRowXSpeed,x
	JMP.w CODE_239A4F

;--------------------------------------------------------------------

SMB3_SlidingPictureRowState03_LockInPlace:
.Main:
;$239ABB
	LDA.w !RAM_SMB3_SlidingPictureGame_TopRowXPosLo,x
	AND.b #$7C
	BNE.b CODE_239AE2
	LDA.b #!Define_SMAS_Sound0063_OpenBox2
	STA.w !RAM_SMB3_Global_SoundCh3
	LDA.b #$12
	STA.w !RAM_SMB3_SlidingPictureGame_TopRowDelayTimer,x
	LDA.w !RAM_SMB3_SlidingPictureGame_TopRowXPosLo,x
	CLC
	ADC.b #$20
	AND.b #$80
	STA.w !RAM_SMB3_SlidingPictureGame_TopRowXPosLo,x
	LDA.w !RAM_SMB3_SlidingPictureGame_TopRowXPosHi,x
	ADC.b #$00
	STA.w !RAM_SMB3_SlidingPictureGame_TopRowXPosHi,x
	INC.w !RAM_SMB3_SlidingPictureGame_TopRowState,x
CODE_239AE2:
	JMP.w CODE_239A4F

;--------------------------------------------------------------------

SMB3_SlidingPictureRowState04_JiggleAndCheckIfPictureIsLinedUp:
.Main:
;$239AE5
	LDA.w !RAM_SMB3_SlidingPictureGame_TopRowDelayTimer,x
	BNE.b CODE_239B5E
	LDA.w !RAM_SMB3_SlidingPictureGame_TopRowXPosLo,x
	CLC
	ADC.b #$20
	AND.b #$80
	STA.w !RAM_SMB3_SlidingPictureGame_TopRowXPosLo,x
	STA.b $00
	LDA.w !RAM_SMB3_SlidingPictureGame_TopRowXPosHi,x
	ADC.b #$00
	STA.w !RAM_SMB3_SlidingPictureGame_TopRowXPosHi,x
	ASL.b $00
	ROL
	AND.b #$03
	STA.w !RAM_SMB3_SlidingPictureGame_TopRowImage,x
	CPX.b #$02
	BNE.b CODE_239B58
	LDA.b #$50
	STA.w !RAM_SMB3_SlidingPictureGame_TopRowDelayTimer,x
	LDA.w !RAM_SMB3_SlidingPictureGame_TopRowImage
	ASL
	TAX
	LDY.b #$01
CODE_239B17:
	LDA.w !RAM_SMB3_SlidingPictureGame_MiddleRowImage,y
	CMP.l DATA_2199BB,x
	BEQ.b CODE_239B26
	CMP.l DATA_2199BB+$01,x
	BNE.b CODE_239B53
CODE_239B26:
	DEY
	BPL.b CODE_239B17
	LDX.w !RAM_SMB3_SlidingPictureGame_TopRowImage
	LDA.l DATA_2199C3,x
	STA.w !RAM_SMB3_SlidingPictureGame_NumberOfLivesToAward
	JSL.l CODE_2A810D
	LDA.b #!Define_SMB3_LevelMusic_Victory
	STA.w !RAM_SMB3_Global_MusicCh1
	LDA.b #$60
	STA.w $02D8
	LDA.b #$04
	STA.w !RAM_SMB3_SlidingPictureGame_CurrentState
	LDA.b #$F0
	STA.w !RAM_SMB3_SlidingPictureGame_XUpTextYPosLo
	STZ.w !RAM_SMB3_SlidingPictureGame_WaitBeforeGoingBackToOverworldTimer
	LDX.b $19
	PLA
	PLA
	RTS

CODE_239B53:
	LDA.b #!Define_SMAS_Sound0063_Wrong
	STA.w !RAM_SMB3_Global_SoundCh3
CODE_239B58:
	LDX.b $19
	INC.w !RAM_SMB3_SlidingPictureGame_TopRowState,x
	RTS

CODE_239B5E:
	LDY.b #$10
	AND.b #$04
	BNE.b CODE_239B66
	LDY.b #$F0
CODE_239B66:
	TYA
	STA.w !RAM_SMB3_SlidingPictureGame_TopRowXSpeed,x
	JMP.w CODE_239A4F

;--------------------------------------------------------------------

SMB3_SlidingPictureRowState05_CheckIfAnotherRoundShouldBegin:
.Main:
;$239B6D
	CPX.b #$02
	BNE.b CODE_239B76
	LDA.w !RAM_SMB3_SlidingPictureGame_TopRowDelayTimer,x
	BEQ.b CODE_239B77
CODE_239B76:
	RTS

CODE_239B77:
	LDA.w !RAM_SMB3_SlidingPictureGame_NumberOfRoundsToPlay
	BEQ.b CODE_239B8B
	LDA.b !RAM_SMB3_Global_ControllerHold1
	AND.b #(!Joypad_Start>>8)|!Joypad_X|(!Joypad_Y>>8)|!Joypad_A|(!Joypad_B>>8)
	BEQ.b CODE_239B8A
	DEC.w !RAM_SMB3_SlidingPictureGame_NumberOfRoundsToPlay
	LDA.b #$00
	STA.w !RAM_SMB3_SlidingPictureGame_CurrentState
CODE_239B8A:
	RTS

CODE_239B8B:
	PLA										;\ Note: Destructive return
	PLA										;/
CODE_239B8D:
	LDA.b #$02
	STA.w !RAM_SMB3_SlidingPictureGame_CurrentState
	LDA.b #$00
	STA.w !RAM_SMB3_SlidingPictureGame_XUpTextYPosLo
	RTS

;--------------------------------------------------------------------

SMB3_SlidingPictureGameState02_FadeOut:
.Main:
;$239B98
	LDA.w !RAM_SMB3_SlidingPictureGame_XUpTextYPosLo
	BNE.b CODE_239BA5
	INC.w !RAM_SMB3_SlidingPictureGame_XUpTextYPosLo
	JSL.l CODE_29E26B
	RTS

CODE_239BA5:
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$01
	BNE.b CODE_239BB4
	DEC.b !RAM_SMB3_Global_ScreenDisplayRegisterMirror
	LDA.b !RAM_SMB3_Global_ScreenDisplayRegisterMirror
	BNE.b CODE_239BB4
	INC.w !RAM_SMB3_SlidingPictureGame_CurrentState
CODE_239BB4:
	RTS

;--------------------------------------------------------------------

SMB3_SlidingPictureGameState03_ExitToOverworld:
.Main:
;$239BB5
	LDA.b #$01
	STA.w $101E
	LDA.b #$01
	STA.b $14
	LDA.b #$80
	STA.b !RAM_SMB3_Global_ScreenDisplayRegisterMirror
	LDA.b #$C0
	STA.w !RAM_SMB3_Global_CurrentVBlankRoutinePath
	LDA.b #$00
	STA.w $0427
	RTS

;--------------------------------------------------------------------

SMB3_SlidingPictureGameState04_DelayXUpText:
.Main:
;$239BCD
	LDA.w $02D8
	BNE.b CODE_239BD8
	LDA.b #$05
	STA.w !RAM_SMB3_SlidingPictureGame_CurrentState
	RTS

CODE_239BD8:
	DEC.w $02D8
	RTS

;--------------------------------------------------------------------

DATA_239BDC:
	db $32,$34,$36,$00,$38

SMB3_SlidingPictureGameState05_RewardLivesAndDisplayXUpText:
.Main:
;$239BE1
	LDA.w !RAM_SMB3_SlidingPictureGame_WaitBeforeGoingBackToOverworldTimer
	BEQ.b CODE_239C14
	DEC.w !RAM_SMB3_SlidingPictureGame_WaitBeforeGoingBackToOverworldTimer
	BNE.b CODE_239BEE
	JMP.w CODE_239B8D

CODE_239BEE:
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$1F
	BNE.b CODE_239C11
	LDA.w !RAM_SMB3_SlidingPictureGame_RemainingLivesToAward
	BEQ.b CODE_239C11
	LDA.b #$A0
	STA.w !RAM_SMB3_SlidingPictureGame_WaitBeforeGoingBackToOverworldTimer
	DEC.w !RAM_SMB3_SlidingPictureGame_RemainingLivesToAward
	LDA.b #!Define_SMAS_Sound0063_1up
	STA.w !RAM_SMB3_Global_SoundCh3
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.w !RAM_SMB3_Level_Player_MariosLives,x
	BMI.b CODE_239C11
	INC.w !RAM_SMB3_Level_Player_MariosLives,x
CODE_239C11:
	JMP.w CODE_239C32

CODE_239C14:
	DEC.w !RAM_SMB3_SlidingPictureGame_XUpTextYPosLo
	DEC.w !RAM_SMB3_SlidingPictureGame_XUpTextYPosLo
	DEC.w !RAM_SMB3_SlidingPictureGame_XUpTextYPosLo
	DEC.w !RAM_SMB3_SlidingPictureGame_XUpTextYPosLo
	LDA.w !RAM_SMB3_SlidingPictureGame_XUpTextYPosLo
	CMP.b #$60
	BCS.b CODE_239C32
	LDA.w !RAM_SMB3_SlidingPictureGame_NumberOfLivesToAward
	STA.w !RAM_SMB3_SlidingPictureGame_RemainingLivesToAward
	LDA.b #$50
	STA.w !RAM_SMB3_SlidingPictureGame_WaitBeforeGoingBackToOverworldTimer
CODE_239C32:
	LDA.b #$70
	STA.w SMB3_OAMBuffer[$74].XDisp
	STA.w SMB3_OAMBuffer[$77].XDisp
	LDA.b #$7C
	STA.w SMB3_OAMBuffer[$75].XDisp
	STA.w SMB3_OAMBuffer[$78].XDisp
	LDA.b #$84
	STA.w SMB3_OAMBuffer[$76].XDisp
	STA.w SMB3_OAMBuffer[$79].XDisp
	LDA.w !RAM_SMB3_SlidingPictureGame_XUpTextYPosLo
	STA.w SMB3_OAMBuffer[$74].YDisp
	STA.w SMB3_OAMBuffer[$75].YDisp
	STA.w SMB3_OAMBuffer[$76].YDisp
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$77].YDisp
	STA.w SMB3_OAMBuffer[$78].YDisp
	STA.w SMB3_OAMBuffer[$79].YDisp
	LDX.w !RAM_SMB3_SlidingPictureGame_NumberOfLivesToAward
	LDA.l DATA_239BDC-$01,x
	STA.w SMB3_OAMBuffer[$74].Tile
	INC
	STA.w SMB3_OAMBuffer[$77].Tile
	LDA.b #$0C
	STA.w SMB3_OAMBuffer[$75].Tile
	INC
	STA.w SMB3_OAMBuffer[$78].Tile
	INC
	STA.w SMB3_OAMBuffer[$76].Tile
	INC
	STA.w SMB3_OAMBuffer[$79].Tile
	LDA.b #$22
	STA.w SMB3_OAMBuffer[$74].Prop
	STA.w SMB3_OAMBuffer[$77].Prop
	STA.w SMB3_OAMBuffer[$75].Prop
	STA.w SMB3_OAMBuffer[$78].Prop
	STA.w SMB3_OAMBuffer[$76].Prop
	STA.w SMB3_OAMBuffer[$79].Prop
	LDA.b #$00
	STA.w SMB3_OAMTileSizeBuffer[$74].Slot
	STA.w SMB3_OAMTileSizeBuffer[$75].Slot
	STA.w SMB3_OAMTileSizeBuffer[$76].Slot
	STA.w SMB3_OAMTileSizeBuffer[$77].Slot
	STA.w SMB3_OAMTileSizeBuffer[$78].Slot
	STA.w SMB3_OAMTileSizeBuffer[$79].Slot
	RTS

;--------------------------------------------------------------------

; Note: Unreferenced routine?

CODE_239CAA:
	LDA.w $101C
	BEQ.b CODE_239CB2
	DEC.w $101C
CODE_239CB2:
	LDA.w $101D
	BEQ.b CODE_239CC4
	LDA.w $101C
	BNE.b CODE_239CC4
	LDA.b #$04
	STA.w $101C
	DEC.w $101D
CODE_239CC4:
	RTS

;--------------------------------------------------------------------

CODE_239CC5:
	LDA.w !RAM_SMB3_SlidingPictureGame_TopRowXSpeed,x
	ASL
	ASL
	ASL
	ASL
	STA.b $01
	LDA.w !RAM_SMB3_SlidingPictureGame_TopRowXSpeed,x
	LSR
	LSR
	LSR
	LSR
	CMP.b #$08
	BCC.b CODE_239CDB
	ORA.b #$F0
CODE_239CDB:
	STA.b $00
	LDY.b #$00
	CMP.b #$00
	BPL.b CODE_239CE4
	DEY
CODE_239CE4:
	STY.b $02
	LDA.w !RAM_SMB3_SlidingPictureGame_TopRowSubXPos,x
	CLC
	ADC.b $01
	STA.w !RAM_SMB3_SlidingPictureGame_TopRowSubXPos,x
	LDA.w !RAM_SMB3_SlidingPictureGame_TopRowXPosLo,x
	ADC.b $00
	STA.w !RAM_SMB3_SlidingPictureGame_TopRowXPosLo,x
	LDA.w !RAM_SMB3_SlidingPictureGame_TopRowXPosHi,x
	ADC.b $02
	STA.w !RAM_SMB3_SlidingPictureGame_TopRowXPosHi,x
	RTS

;--------------------------------------------------------------------

; Note: Something related to the spade levels

CODE_239D00:
	JSL.l CODE_2A81A5
	LDX.b #$80
	STX.w !REGISTER_VRAMAddressIncrementValue
	LDA.b #$80
	STA.w !REGISTER_VRAMAddressLo
	LDA.b #$00
	STA.w !REGISTER_VRAMAddressHi
	JSL.l CODE_239D21
	LDA.b #$80
	STA.w !REGISTER_VRAMAddressLo
	LDA.b #$04
	STA.w !REGISTER_VRAMAddressHi
CODE_239D21:
	REP.b #$30
	LDY.w #$0000
CODE_239D26:
	LDA.w #$00FC
	STA.w !REGISTER_WriteToVRAMPortLo
	STA.w !REGISTER_WriteToVRAMPortLo
	INY
	CPY.w #$0130
	BNE.b CODE_239D26
	AND.w #$0000
	SEP.b #$30
	REP.b #$10
	STZ.b $01
	STZ.b $04
CODE_239D40:
	LDA.b #$C0
	STA.b $00
	LDY.w #$000C
CODE_239D47:
	LDA.b $04
	ASL
	CLC
	ADC.b $04
	TAX
	LDA.l DATA_2282FB,x
	STA.b $0D
	LDA.l DATA_2282FB+$01,x
	STA.b $0E
	LDA.l DATA_2282FB+$02,x
	STA.b $0F
CODE_239D60:
	REP.b #$20
	LDA.b $00
	STA.w !REGISTER_VRAMAddressLo
	LDX.w #$0000
CODE_239D6A:
	LDA.b [$0D],y
	STA.w !REGISTER_WriteToVRAMPortLo
	INY
	INY
	INX
	CPX.w #$0006
	BNE.b CODE_239D6A
	TYA
	CLC
	ADC.w #$000C
	TAY
	AND.w #$00FF
	SEP.b #$20
	LDA.b $00
	CLC
	ADC.b #$20
	BCC.b CODE_239D8B
	INC.b $01
CODE_239D8B:
	STA.b $00
	AND.b #$E0
	CMP.b #$80
	BNE.b CODE_239D60
	LDA.b $01
	AND.b #$03
	CMP.b #$02
	BNE.b CODE_239D60
	DEC.b $01
	DEC.b $01
	LDA.b $00
	CLC
	ADC.b #$46
	STA.b $00
	LDA.b $04
	CMP.b #$01
	BNE.b CODE_239DB6
	CPY.w #$015C
	BEQ.b CODE_239DB6
	LDY.w #$000C
	BRA.b CODE_239D60

CODE_239DB6:
	LDA.b $00
	CLC
	ADC.b #$04
	STA.b $00
	LDY.w #$0000
	LDA.b $01
	CMP.b #$04
	BEQ.b CODE_239DD5
	INC.b $04
	LDA.b $04
	CMP.b #$03
	BEQ.b CODE_239DD1
	BRL.w CODE_239D47

CODE_239DD1:
	LDA.b #$04
	STA.b $01
CODE_239DD5:
	DEC.b $04
	BMI.b CODE_239DE2
	LDA.b $04
	CMP.b #$02
	BEQ.b CODE_239DE5
	JMP.w CODE_239D47

CODE_239DE2:
	SEP.b #$10
	RTL

CODE_239DE5:
	BRL.w CODE_239D40

;--------------------------------------------------------------------

SMB3_ProcessInitializationOfCardFlipGame:
.Main:
;$239DE8
	JSR.w CODE_239DEC
	RTL

CODE_239DEC:
	LDA.w !RAM_SMB3_CardFlipGame_CurrentInitializationState
	JSL.l SMB3_ExecutePtr_Absolute

DATA_239DF3:
	dw SMB3_CardFlipGameInitState00_ShuffleDeck_Main
	dw SMB3_CardFlipGameInitState01_BufferCardStripeImages_Main
	dw SMB3_CardFlipGameInitState02_InitializeRAM_Main

;--------------------------------------------------------------------

SMB3_CardFlipGameInitState00_ShuffleDeck:
.Main:
;$239DF9
	LDA.w !RAM_SMB3_Global_DontShuffleCardGameDeckFlag
	BNE.b CODE_239E0F
	LDY.b #$11
CODE_239E00:
	LDA.w DATA_219A1C,y
	STA.w !RAM_SMB3_Global_CardFlipGameCardContentsTable,y
	DEY
	BPL.b CODE_239E00
	JSR.w CODE_239FE6
	INC.w !RAM_SMB3_Global_DontShuffleCardGameDeckFlag
CODE_239E0F:
	INC.w !RAM_SMB3_CardFlipGame_CurrentInitializationState
	LDA.b #$11
	STA.w !RAM_SMB3_CardFlipGame_CursorPosIndex
	RTS

;--------------------------------------------------------------------

SMB3_CardFlipGameInitState01_BufferCardStripeImages:
.Main:
;$239E18
	LDY.w !RAM_SMB3_CardFlipGame_CursorPosIndex
	STY.b $0A
	LDA.w !RAM_SMB3_Global_CardFlipGameCardContentsTable,y
	AND.b #$80
	BNE.b CODE_239E2A
	JSR.w SMB3_BufferCardFlipGameFaceDownCardStripeImage_Main
	JMP.w CODE_239E2D

CODE_239E2A:
	JSR.w SMB3_BufferCardFlipGameFaceUpCardStripeImage_Main
CODE_239E2D:
	DEC.w !RAM_SMB3_CardFlipGame_CursorPosIndex
	BPL.b CODE_239E35
	INC.w !RAM_SMB3_CardFlipGame_CurrentInitializationState
CODE_239E35:
	RTS

;--------------------------------------------------------------------

SMB3_CardFlipGameInitState02_InitializeRAM:
.Main:
;$239E36
	INC.w !RAM_SMB3_CardFlipGame_CurrentInitializationState
	LDY.b #$19
CODE_239E3B:
	LDA.b #$00
	STA.w !RAM_SMB3_Global_ScratchRAM7E1026,y
	DEY
	BPL.b CODE_239E3B
	LDY.b #$03
CODE_239E45:
	LDA.b #$FF
	STA.w $1037,y
	DEY
	BPL.b CODE_239E45
	LDA.b #$20
	STA.w $1032
	LDA.b #$DA
	STA.w $1033
	LDA.b #$CE
	STA.w $103B
	LDA.b #$01
	STA.w !RAM_SMB3_CardFlipGame_RemainingTries
	RTS

;--------------------------------------------------------------------

SMB3_ProcessCardFlipSpadeGame:
.Main:
;$239E62
	LDA.w !RAM_SMB3_CardFlipGame_CoinsToGive
	BEQ.b CODE_239E72
	INC.w !RAM_SMB3_Global_CoinsToGive
	LDA.b #$0A
	STA.w !RAM_SMB3_Global_PointsToGiveLo
	DEC.w !RAM_SMB3_CardFlipGame_CoinsToGive
CODE_239E72:
	JSR.w CODE_239E76
	RTL

CODE_239E76:
	LDA.w !RAM_SMB3_CardFlipGame_CurrentState
	JSL.l SMB3_ExecutePtr_Absolute

DATA_239E7D:
	dw SMB3_CardFlipGameState00_Normal_Main
	dw SMB3_CardFlipGameState01_InitializeCardFlip_Main
	dw SMB3_CardFlipGameState02_CardFlipAnimation_Main
	dw SMB3_CardFlipGameState03_CheckForMatch_Main
	dw SMB3_CardFlipGameState04_GivePrizeAndDoWinAnimation_Main
	dw SMB3_CardFlipGameState05_InitializeFailedMatch_Main
	dw SMB3_CardFlipGameState06_ExitToOverworld_Main
	dw SMB3_CardFlipGameState07_WaitAfterFailedMatch_Main
	dw SMB3_CardFlipGameState08_FlipCardOverAgain_Main

;--------------------------------------------------------------------

SMB3_CardFlipGameState00_Normal:
.Main:
;$239E8F
	JSR.w SMB3_HandleCardFlipCursorMovement_Main
	JSR.w SMB3_DrawCardFlipCursor_Main
	STZ.w $02D2
	RTS

;--------------------------------------------------------------------

SMB3_CardFlipGameState01_InitializeCardFlip:
.Main:
;$239E99
	LDY.w !RAM_SMB3_CardFlipGame_CursorPosIndex
	LDA.w !RAM_SMB3_Global_CardFlipGameCardContentsTable,y
	AND.b #$80
	BNE.b CODE_239EC0
	LDA.b #$04
	STA.w !RAM_SMB3_CardFlipGame_CardFlipAnimationFrame
	LDA.w !RAM_SMB3_CardFlipGame_CursorPosIndex
	STA.b $0A
	JSR.w CODE_23A1C0
	LDA.b #$00
	STA.w !RAM_SMB3_CardFlipGame_CardFlipAnimationTimer
	INC.w !RAM_SMB3_CardFlipGame_CurrentState
	LDA.b #!Define_SMAS_Sound0060_SelectCard
	STA.w !RAM_SMB3_Global_SoundCh1
	JMP.w SMB3_CardFlipGameState02_CardFlipAnimation_Main

CODE_239EC0:
	DEC.w !RAM_SMB3_CardFlipGame_CurrentState
	RTS

;--------------------------------------------------------------------

SMB3_CardFlipGameState02_CardFlipAnimation:
.Main:
;$239EC4
	LDA.w !RAM_SMB3_CardFlipGame_CardFlipAnimationTimer
	BEQ.b CODE_239ECD
	DEC.w !RAM_SMB3_CardFlipGame_CardFlipAnimationTimer
	RTS

CODE_239ECD:
	LDA.w !RAM_SMB3_CardFlipGame_CursorPosIndex
	STA.b $0A
	JSR.w SMB3_DrawFlippingCardFlipGameCard_Main
	DEC.w !RAM_SMB3_CardFlipGame_CardFlipAnimationFrame
	LDA.w !RAM_SMB3_CardFlipGame_CardFlipAnimationFrame
	CMP.b #$FE
	BNE.b CODE_239EEA
	LDA.w !RAM_SMB3_CardFlipGame_CursorPosIndex
	STA.b $0A
	JSR.w SMB3_BufferCardFlipGameFaceUpCardStripeImage_Main
	INC.w !RAM_SMB3_CardFlipGame_CurrentState
CODE_239EEA:
	LDA.b #$04
	STA.w !RAM_SMB3_CardFlipGame_CardFlipAnimationTimer
	RTS

;--------------------------------------------------------------------

SMB3_CardFlipGameState03_CheckForMatch:
.Main:
;$239EF0
	INC.w !RAM_SMB3_CardFlipGame_NumberOfCardsFlipped
	JSR.w CODE_23A20B
	RTS

;--------------------------------------------------------------------

SMB3_CardFlipGameState04_GivePrizeAndDoWinAnimation:
.Main:
;$239EF7
	LDY.w !RAM_SMB3_CardFlipGame_CursorPosIndex
	LDA.w !RAM_SMB3_Global_CardFlipGameCardContentsTable,y
	ORA.b #$80
	STA.w !RAM_SMB3_Global_CardFlipGameCardContentsTable,y
	LDA.b #$04
	STA.w !RAM_SMB3_CardFlipGame_CurrentState
	LDA.w !RAM_SMB3_CardFlipGame_BorderPaletteAnimationTimer
	BNE.b CODE_239F12
	JSR.w SMB3_DetermineCardFlipPrizeForCorrectMatch_Main
	INC.w !RAM_SMB3_Global_NumberOfCardGameMatches
CODE_239F12:
	INC.w !RAM_SMB3_CardFlipGame_BorderPaletteAnimationTimer
	LDA.w !RAM_SMB3_CardFlipGame_BorderPaletteAnimationTimer
	CMP.b #$51
	BEQ.b CODE_239F20
	JSR.w SMB3_CyclePaletteOfCardFlipGameBorder_Main
	RTS

CODE_239F20:
	STZ.w !RAM_SMB3_CardFlipGame_CurrentState
	STZ.w !RAM_SMB3_CardFlipGame_BorderPaletteAnimationTimer
	LDY.b #$00
	JSR.w CODE_23A4B0
	STZ.w $02D2
	LDA.w !RAM_SMB3_Global_NumberOfCardGameMatches
	CMP.b #$09
	BNE.b CODE_239F45
	LDA.b #$06
	STA.w !RAM_SMB3_CardFlipGame_CurrentState
	LDA.b #$40
	STA.w !RAM_SMB3_CardFlipGame_DelayTimer
	STZ.w !RAM_SMB3_Global_DontShuffleCardGameDeckFlag
	STZ.w !RAM_SMB3_Global_NumberOfCardGameMatches
CODE_239F45:
	RTS

;--------------------------------------------------------------------

SMB3_CardFlipGameState05_InitializeFailedMatch:
.Main:
;$239F46
	LDA.b #$00
	STA.w !RAM_SMB3_CardFlipGame_CardFlipAnimationFrame
	LDA.b #$01
	STA.b $0B
	INC.w !RAM_SMB3_CardFlipGame_CurrentState
	INC.w !RAM_SMB3_CardFlipGame_CurrentState
	LDA.b #$40
	STA.w !RAM_SMB3_CardFlipGame_DelayTimer
	LDY.w !RAM_SMB3_CardFlipGame_CursorPosIndex
	LDA.w !RAM_SMB3_Global_CardFlipGameCardContentsTable,y
	AND.b #$7F
	STA.w !RAM_SMB3_Global_CardFlipGameCardContentsTable,y
	LDY.w !RAM_SMB3_CardFlipGame_FirstCardFlippedIndex
	LDA.w !RAM_SMB3_Global_CardFlipGameCardContentsTable,y
	AND.b #$7F
	STA.w !RAM_SMB3_Global_CardFlipGameCardContentsTable,y
	LDA.b #!Define_SMAS_Sound0063_Wrong
	STA.w !RAM_SMB3_Global_SoundCh3
	DEC.w !RAM_SMB3_CardFlipGame_RemainingTries
	BPL.b CODE_239F7D
	DEC.w !RAM_SMB3_CardFlipGame_CurrentState
CODE_239F7D:
	RTS

;--------------------------------------------------------------------

SMB3_CardFlipGameState06_ExitToOverworld:
.Main:
;$239F7E
	DEC.w !RAM_SMB3_CardFlipGame_DelayTimer
	BPL.b CODE_239F85
	INC.b $14
CODE_239F85:
	RTS

;--------------------------------------------------------------------

SMB3_CardFlipGameState07_WaitAfterFailedMatch:
.Main:
;$239F86
	LDA.w !RAM_SMB3_CardFlipGame_DelayTimer
	BEQ.b CODE_239F8F
	DEC.w !RAM_SMB3_CardFlipGame_DelayTimer
	RTS

CODE_239F8F:
	LDA.b #$00
	STA.w !RAM_SMB3_CardFlipGame_CardFlipAnimationFrame
	LDY.b $0B
	LDA.w !RAM_SMB3_CardFlipGame_CursorPosIndex,y
	STA.b $0A
	JSR.w CODE_23A1C0
	INC.w !RAM_SMB3_CardFlipGame_CurrentState
	LDA.b #$00
	STA.w !RAM_SMB3_CardFlipGame_CardFlipAnimationTimer
SMB3_CardFlipGameState08_FlipCardOverAgain:
.Main:
	LDA.w !RAM_SMB3_CardFlipGame_CardFlipAnimationTimer
	BEQ.b CODE_239FAF
	DEC.w !RAM_SMB3_CardFlipGame_CardFlipAnimationTimer
	RTS

CODE_239FAF:
	LDY.b $0B
	LDA.w !RAM_SMB3_CardFlipGame_CursorPosIndex,y
	STA.b $0A
	JSR.w SMB3_DrawFlippingCardFlipGameCard_Main
	INC.w !RAM_SMB3_CardFlipGame_CardFlipAnimationFrame
	LDA.w !RAM_SMB3_CardFlipGame_CardFlipAnimationFrame
	CMP.b #$06
	BCC.b CODE_239FE0
	LDY.b $0B
	LDA.w !RAM_SMB3_CardFlipGame_CursorPosIndex,y
	STA.b $0A
	JSR.w SMB3_BufferCardFlipGameFaceDownCardStripeImage_Main
	DEC.b $0B
	BPL.b CODE_239FD7
	LDA.b #$00
	STA.w !RAM_SMB3_CardFlipGame_CurrentState
	RTS

CODE_239FD7:
	LDA.b #$02
	STA.w !RAM_SMB3_CardFlipGame_DelayTimer
	DEC.w !RAM_SMB3_CardFlipGame_CurrentState
	RTS

CODE_239FE0:
	LDA.b #$04
	STA.w !RAM_SMB3_CardFlipGame_CardFlipAnimationTimer
	RTS

;--------------------------------------------------------------------

CODE_239FE6:
	LDA.b #$02
	STA.b $0A
CODE_239FEA:
	JSL.l SMB3_GetRand_Main
	AND.b #$1F
	TAY
CODE_239FF1:
	LDA.w !RAM_SMB3_Global_CardFlipGameCardContentsTable+$0E
	STA.b $0B
	LDX.b #$0D
CODE_239FF8:
	LDA.w !RAM_SMB3_Global_CardFlipGameCardContentsTable,x
	STA.w !RAM_SMB3_Global_CardFlipGameCardContentsTable+$01,x
	DEX
	BPL.b CODE_239FF8
	LDA.b $0B
	STA.w !RAM_SMB3_Global_CardFlipGameCardContentsTable
	DEY
	BPL.b CODE_239FF1
	LDX.b #$00
CODE_23A00B:
	LDA.w !RAM_SMB3_Global_CardFlipGameCardContentsTable,x
	STA.b $0B
	LDA.w !RAM_SMB3_Global_CardFlipGameCardContentsTable+$05,x
	STA.w !RAM_SMB3_Global_CardFlipGameCardContentsTable,x
	LDA.w !RAM_SMB3_Global_CardFlipGameCardContentsTable+$0A,x
	STA.w !RAM_SMB3_Global_CardFlipGameCardContentsTable+$05,x
	LDA.b $0B
	STA.w !RAM_SMB3_Global_CardFlipGameCardContentsTable+$0A,x
	DEX
	DEX
	BPL.b CODE_23A00B
	DEC.b $0A
	BPL.b CODE_239FEA
	RTS

;--------------------------------------------------------------------

SMB3_BufferCardFlipGameFaceUpCardStripeImage:
.Main:
;$23A02A
	REP.b #$20
	LDY.b #$3A
CODE_23A02E:
	LDA.w DATA_219AC3,y
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,y
	DEY
	DEY
	BPL.b CODE_23A02E
	LDA.b $0A
	AND.w #$00FF
	ASL
	TAY
	LDA.w DATA_219A2E,y
	STA.w $102E
	LDY.b #$00
	LDX.b #$04
CODE_23A049:
	LDA.w $102E
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,y
	SEP.b #$20
	TYA
	CLC
	ADC.b #$0C
	TAY
	LDA.w $102F
	CLC
	ADC.b #$20
	STA.w $102F
	LDA.w $102E
	ADC.b #$00
	STA.w $102E
	REP.b #$20
	DEX
	BPL.b CODE_23A049
	SEP.b #$20
	LDY.b $0A
	LDA.w !RAM_SMB3_Global_CardFlipGameCardContentsTable,y
	AND.b #$7F
	STA.b $0B
	ASL
	ASL
	ASL
	TAY
	REP.b #$20
	LDA.w DATA_219A52,y
	STA.w SMB3_StripeImageUploadTable[$09].LowByte
	INY
	INY
	LDA.w DATA_219A52,y
	STA.w SMB3_StripeImageUploadTable[$0A].LowByte
	INY
	INY
	LDA.w DATA_219A52,y
	STA.w SMB3_StripeImageUploadTable[$0F].LowByte
	INY
	INY
	LDA.w DATA_219A52,y
	STA.w SMB3_StripeImageUploadTable[$10].LowByte
	LDA.w #$FFFF
	STA.w SMB3_StripeImageUploadTable[$1E].LowByte
	SEP.b #$20
	LDA.b #$3C
	STA.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	LDA.b $0B
	CMP.b #$03
	BCC.b CODE_23A0BF
	SEC
	SBC.b #$03
	ASL
	TAY
	LDA.w DATA_219A87,y
	STA.w SMB3_StripeImageUploadTable[$15].LowByte
	LDA.w DATA_219A8D,y
	STA.w SMB3_StripeImageUploadTable[$16].LowByte
CODE_23A0BF:
	LDA.b #$F0
	STA.w SMB3_OAMBuffer[$07].YDisp
	STA.w SMB3_OAMBuffer[$08].YDisp
	STA.w SMB3_OAMBuffer[$09].YDisp
	STA.w SMB3_OAMBuffer[$0A].YDisp
	STA.w SMB3_OAMBuffer[$0B].YDisp
	STA.w SMB3_OAMBuffer[$0C].YDisp
	STA.w SMB3_OAMBuffer[$0D].YDisp
	STA.w SMB3_OAMBuffer[$0E].YDisp
	RTS

;--------------------------------------------------------------------

SMB3_BufferCardFlipGameFaceDownCardStripeImage:
.Main:
;$23A0DA
	REP.b #$20
	LDY.b #$3A
CODE_23A0DE:
	LDA.w DATA_219B3D,y
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,y
	DEY
	DEY
	BPL.b CODE_23A0DE
	LDA.b $0A
	AND.w #$00FF
	ASL
	TAY
	LDA.w DATA_219A2E,y
	STA.w $102E
	LDY.b #$00
	LDX.b #$04
CODE_23A0F9:
	LDA.w $102E
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,y
	SEP.b #$20
	TYA
	CLC
	ADC.b #$0C
	TAY
	LDA.w $102F
	CLC
	ADC.b #$20
	STA.w $102F
	LDA.w $102E
	ADC.b #$00
	STA.w $102E
	REP.b #$20
	DEX
	BPL.b CODE_23A0F9
	LDA.w #$FFFF
	STA.w SMB3_StripeImageUploadTable[$1E].LowByte
	SEP.b #$20
	LDA.b #$3C
	STA.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	LDA.b #$F0
	STA.w SMB3_OAMBuffer[$07].YDisp
	STA.w SMB3_OAMBuffer[$08].YDisp
	STA.w SMB3_OAMBuffer[$09].YDisp
	STA.w SMB3_OAMBuffer[$0A].YDisp
	STA.w SMB3_OAMBuffer[$0B].YDisp
	STA.w SMB3_OAMBuffer[$0C].YDisp
	STA.w SMB3_OAMBuffer[$0D].YDisp
	STA.w SMB3_OAMBuffer[$0E].YDisp
	RTS

;--------------------------------------------------------------------

CODE_23A144:
	LDY.b #$00
	LDA.b #$01
	STA.b $0A
	LDX.w !RAM_SMB3_CardFlipGame_CursorPosIndex
	LDA.w !RAM_SMB3_Global_CardFlipGameCardContentsTable,x
	STA.b $0B
	ASL
	ASL
	TAX
CODE_23A155:
	REP.b #$20
	LDA.w $1033
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,y
	INY
	INY
	SEP.b #$20
	LDA.b #$02
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,y
	INY
	LDA.w DATA_219A52,x
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,y
	INY
	INX
	LDA.w DATA_219A52,x
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,y
	INY
	INX
	LDA.w $1033
	CLC
	ADC.b #$20
	STA.w $1033
	LDA.w $1032
	ADC.b #$00
	STA.w $1032
	DEC.b $0A
	BPL.b CODE_23A155
	LDA.w !RAM_SMB3_CardFlipGame_BorderPaletteAnimationTimer
	AND.b #$01
	BEQ.b CODE_23A1A1
	INC.w $103C
	LDA.w DATA_219A82,x
	LSR
	LSR
	LSR
	LSR
	ORA.b #$F0
	BNE.b CODE_23A1AD
CODE_23A1A1:
	LDA.w $103B
	CLC
	ADC.b #$08
	STA.w $103B
	LDA.w DATA_219A82,x
CODE_23A1AD:
	LDX.w $103C
	AND.w $1037,x
	STA.w $1037,x
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,y
	INY
	LDA.b #$FF
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,y
	RTS

;--------------------------------------------------------------------

CODE_23A1C0:
	REP.b #$20
	LDY.b #$3C
CODE_23A1C4:
	LDA.w DATA_219AFF,y
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,y
	DEY
	DEY
	BPL.b CODE_23A1C4
	LDA.b $0A
	AND.w #$00FF
	ASL
	TAY
	LDA.w DATA_219A2E,y
	STA.w $102E
	LDA.w #$003C
	STA.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	LDY.b #$00
	LDX.b #$04
CODE_23A1E5:
	LDA.w $102E
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,y
	SEP.b #$20
	TYA
	CLC
	ADC.b #$0C
	TAY
	LDA.w $102F
	CLC
	ADC.b #$20
	STA.w $102F
	LDA.w $102E
	ADC.b #$00
	STA.w $102E
	REP.b #$20
	DEX
	BPL.b CODE_23A1E5
	SEP.b #$20
	RTS

;--------------------------------------------------------------------

CODE_23A20B:
	LDA.w !RAM_SMB3_CardFlipGame_NumberOfCardsFlipped
	AND.b #$01
	BNE.b CODE_23A24B
	LDY.w !RAM_SMB3_CardFlipGame_CursorPosIndex
	LDA.w !RAM_SMB3_Global_CardFlipGameCardContentsTable,y
	CMP.w !RAM_SMB3_CardFlipGame_ContentsOfFirstCardFlipped
	BEQ.b CODE_23A265
	LDA.w !RAM_SMB3_Global_CardFlipGameCardContentsTable,y
	CMP.b #$08
	BNE.b CODE_23A22A
	LDA.w !RAM_SMB3_CardFlipGame_ContentsOfFirstCardFlipped
	JMP.w CODE_23A239

CODE_23A22A:
	LDA.w !RAM_SMB3_CardFlipGame_ContentsOfFirstCardFlipped
	CMP.b #$08
	BNE.b CODE_23A23F
	LDA.w !RAM_SMB3_Global_CardFlipGameCardContentsTable,y
	ORA.b #$80
	LDY.w !RAM_SMB3_CardFlipGame_FirstCardFlippedIndex
CODE_23A239:
	STA.w !RAM_SMB3_Global_CardFlipGameCardContentsTable,y
	JMP.w CODE_23A265

CODE_23A23F:
	INC.w !RAM_SMB3_CardFlipGame_CurrentState
	INC.w !RAM_SMB3_CardFlipGame_CurrentState
	LDA.b #$30
	STA.w !RAM_SMB3_CardFlipGame_DelayTimer
	RTS

CODE_23A24B:
	LDY.w !RAM_SMB3_CardFlipGame_CursorPosIndex
	STY.w !RAM_SMB3_CardFlipGame_FirstCardFlippedIndex
	LDA.w !RAM_SMB3_Global_CardFlipGameCardContentsTable,y
	STA.w !RAM_SMB3_CardFlipGame_ContentsOfFirstCardFlipped
	LDA.w !RAM_SMB3_Global_CardFlipGameCardContentsTable,y
	ORA.b #$80
	STA.w !RAM_SMB3_Global_CardFlipGameCardContentsTable,y
	LDA.b #$00
	STA.w !RAM_SMB3_CardFlipGame_CurrentState
	RTS

CODE_23A265:
	INC.w !RAM_SMB3_CardFlipGame_CurrentState
	RTS

;--------------------------------------------------------------------

SMB3_HandleCardFlipCursorMovement:
.Main:
;$23A269
	LDA.w !RAM_SMB3_CardFlipGame_DelayTimer
	BEQ.b CODE_23A272
	DEC.w !RAM_SMB3_CardFlipGame_DelayTimer
	RTS

CODE_23A272:
	JSR.w SMB3_CheckIfAXYBArePressed_Main
	BCC.b CODE_23A27B
	INC.w !RAM_SMB3_CardFlipGame_CurrentState
	RTS

CODE_23A27B:
	LDA.b !RAM_SMB3_Global_ControllerHold1
	AND.b #(!Joypad_DPadL>>8)|(!Joypad_DPadR>>8)|(!Joypad_DPadU>>8)|(!Joypad_DPadD>>8)
	BEQ.b CODE_23A2E9
	LDA.b #$08
	STA.w !RAM_SMB3_CardFlipGame_DelayTimer
	LDA.b #!Define_SMAS_Sound0063_Coin
	STA.w !RAM_SMB3_Global_SoundCh3
	LDA.b !RAM_SMB3_Global_ControllerHold1
	AND.b #!Joypad_DPadU>>8
	BEQ.b CODE_23A2A5
	LDA.w !RAM_SMB3_CardFlipGame_CursorPosIndex
	SEC
	SBC.b #$06
	STA.w !RAM_SMB3_CardFlipGame_CursorPosIndex
	BCS.b CODE_23A2A5
	LDA.w !RAM_SMB3_CardFlipGame_CursorPosIndex
	CLC
	ADC.b #$12
	STA.w !RAM_SMB3_CardFlipGame_CursorPosIndex
CODE_23A2A5:
	LDA.b !RAM_SMB3_Global_ControllerHold1
	AND.b #!Joypad_DPadD>>8
	BEQ.b CODE_23A2C4
	LDA.w !RAM_SMB3_CardFlipGame_CursorPosIndex
	CLC
	ADC.b #$06
	STA.w !RAM_SMB3_CardFlipGame_CursorPosIndex
	LDA.w !RAM_SMB3_CardFlipGame_CursorPosIndex
	CMP.b #$12
	BCC.b CODE_23A2C4
	LDA.w !RAM_SMB3_CardFlipGame_CursorPosIndex
	SEC
	SBC.b #$12
	STA.w !RAM_SMB3_CardFlipGame_CursorPosIndex
CODE_23A2C4:
	LDA.b !RAM_SMB3_Global_ControllerHold1
	AND.b #!Joypad_DPadR>>8
	BEQ.b CODE_23A2D9
	INC.w !RAM_SMB3_CardFlipGame_CursorPosIndex
	LDA.w !RAM_SMB3_CardFlipGame_CursorPosIndex
	CMP.b #$12
	BCC.b CODE_23A2D9
	LDA.b #$00
	STA.w !RAM_SMB3_CardFlipGame_CursorPosIndex
CODE_23A2D9:
	LDA.b !RAM_SMB3_Global_ControllerHold1
	AND.b #!Joypad_DPadL>>8
	BEQ.b CODE_23A2E9
	DEC.w !RAM_SMB3_CardFlipGame_CursorPosIndex
	BPL.b CODE_23A2E9
	LDA.b #$11
	STA.w !RAM_SMB3_CardFlipGame_CursorPosIndex
CODE_23A2E9:
	RTS

;--------------------------------------------------------------------

CODE_23A2EA:
	LDA.w !RAM_SMB3_Global_ScratchRAM7E1026
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	LDA.w !RAM_SMB3_Global_ScratchRAM7E1027
	STA.w SMB3_OAMBuffer[$01].YDisp,y
	LDA.w DATA_2199CE,x
	STA.w SMB3_OAMBuffer[$01].Tile,y
	LDA.w DATA_2199D4,x
	STA.w SMB3_OAMBuffer[$01].Prop,y
	TYA
	CLC
	ADC.b #$04
	TAY
	INX
	RTS

SMB3_DrawCardFlipCursor:
.Main:
;$23A309
	LDX.w !RAM_SMB3_CardFlipGame_CursorPosIndex
	LDA.w DATA_2199DA,x
	STA.w !RAM_SMB3_Global_ScratchRAM7E1026
	STA.w !RAM_SMB3_Global_ScratchRAM7E102A
	LDA.w DATA_2199EC,x
	STA.w !RAM_SMB3_Global_ScratchRAM7E1027
	LDX.b #$00
	LDY.b #$00
CODE_23A31F:
	JSR.w CODE_23A2EA
	LDA.w !RAM_SMB3_Global_ScratchRAM7E1026
	CLC
	ADC.b #$10
	STA.w !RAM_SMB3_Global_ScratchRAM7E1026
	CPX.b #$02
	BCC.b CODE_23A31F
	LDA.w !RAM_SMB3_Global_ScratchRAM7E1027
	CLC
	ADC.b #$10
	STA.w !RAM_SMB3_Global_ScratchRAM7E1027
	LDA.w !RAM_SMB3_Global_ScratchRAM7E102A
	STA.w !RAM_SMB3_Global_ScratchRAM7E1026
	JSR.w CODE_23A2EA
	LDA.w !RAM_SMB3_Global_ScratchRAM7E1026
	CLC
	ADC.b #$10
	STA.w !RAM_SMB3_Global_ScratchRAM7E1026
	JSR.w CODE_23A2EA
	LDA.w !RAM_SMB3_Global_ScratchRAM7E1027
	CLC
	ADC.b #$10
	STA.w !RAM_SMB3_Global_ScratchRAM7E1027
	LDA.w !RAM_SMB3_Global_ScratchRAM7E102A
	STA.w !RAM_SMB3_Global_ScratchRAM7E1026
CODE_23A35C:
	JSR.w CODE_23A2EA
	LDA.w !RAM_SMB3_Global_ScratchRAM7E1026
	CLC
	ADC.b #$10
	STA.w !RAM_SMB3_Global_ScratchRAM7E1026
	CPX.b #$06
	BCC.b CODE_23A35C
	STY.w !RAM_SMB3_CardFlipGame_CardOAMIndex
	REP.b #$20
	LDA.w #$0202
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot
	STA.w SMB3_OAMTileSizeBuffer[$02].Slot
	STA.w SMB3_OAMTileSizeBuffer[$04].Slot
	STA.w SMB3_OAMTileSizeBuffer[$06].Slot
	SEP.b #$20
	RTS

;--------------------------------------------------------------------

SMB3_DrawFlippingCardFlipGameCard:
.Main:
;$23A383
	LDX.b $0A
	LDA.w DATA_2199DA,x
	CLC
	ADC.b #$08
	STA.w !RAM_SMB3_Global_ScratchRAM7E1026
	STA.w !RAM_SMB3_Global_ScratchRAM7E102A
	LDA.w DATA_2199EC,x
	CLC
	ADC.b #$08
	STA.w !RAM_SMB3_Global_ScratchRAM7E1027
	LDX.b #$00
	LDY.w !RAM_SMB3_CardFlipGame_CardOAMIndex
CODE_23A39F:
	LDA.w !RAM_SMB3_Global_ScratchRAM7E1026
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	STA.w SMB3_OAMBuffer[$02].XDisp,y
	INY
	LDA.w !RAM_SMB3_Global_ScratchRAM7E1027
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$02].XDisp,y
	INY
	JSR.w CODE_23A439
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	CPX.b #$02
	BCC.b CODE_23A3C7
	LDA.b $00
	STA.w SMB3_OAMBuffer[$02].XDisp,y
	BRA.b CODE_23A3CB

CODE_23A3C7:
	INC
	STA.w SMB3_OAMBuffer[$02].XDisp,y
CODE_23A3CB:
	INY
	LDA.b #$00
	LDA.b #$0C
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	STA.w SMB3_OAMBuffer[$02].XDisp,y
	TYA
	CLC
	ADC.b #$05
	TAY
	INX
	CPX.b #$04
	BCS.b CODE_23A400
	LDA.w !RAM_SMB3_Global_ScratchRAM7E1026
	CLC
	ADC.b #$08
	STA.w !RAM_SMB3_Global_ScratchRAM7E1026
	TXA
	AND.b #$01
	BNE.b CODE_23A3FD
	LDA.w !RAM_SMB3_Global_ScratchRAM7E1027
	CLC
	ADC.b #$10
	STA.w !RAM_SMB3_Global_ScratchRAM7E1027
	LDA.w !RAM_SMB3_Global_ScratchRAM7E102A
	STA.w !RAM_SMB3_Global_ScratchRAM7E1026
CODE_23A3FD:
	JMP.w CODE_23A39F

CODE_23A400:
	LDA.w SMB3_OAMBuffer[$09].Prop
	ORA.b #$40
	STA.w SMB3_OAMBuffer[$09].Prop
	LDA.w SMB3_OAMBuffer[$0A].Prop
	ORA.b #$40
	STA.w SMB3_OAMBuffer[$0A].Prop
	LDA.w SMB3_OAMBuffer[$0C].Prop
	ORA.b #$80
	STA.w SMB3_OAMBuffer[$0C].Prop
	LDA.w SMB3_OAMBuffer[$0D].Prop
	ORA.b #$40
	STA.w SMB3_OAMBuffer[$0D].Prop
	LDA.w SMB3_OAMBuffer[$0E].Prop
	ORA.b #$C0
	STA.w SMB3_OAMBuffer[$0E].Prop
	REP.b #$20
	STZ.w SMB3_OAMTileSizeBuffer[$07].Slot
	STZ.w SMB3_OAMTileSizeBuffer[$09].Slot
	STZ.w SMB3_OAMTileSizeBuffer[$0B].Slot
	STZ.w SMB3_OAMTileSizeBuffer[$0D].Slot
	SEP.b #$20
	RTS

CODE_23A439:
	STX.b $0A
	LDX.w !RAM_SMB3_CardFlipGame_CardFlipAnimationFrame
	LDA.w DATA_219A17,x
	CLC
	ADC.b $0A
	TAX
	LDA.w DATA_219A03,x
	LDX.b $0A
	CPX.b #$02
	BCS.b CODE_23A450
	STA.b $00
CODE_23A450:
	RTS

;--------------------------------------------------------------------

DATA_23A451:
	db !Define_SMB3_ReservePowerupID_Mushroom
	db !Define_SMB3_ReservePowerupID_FireFlower
	db !Define_SMB3_ReservePowerupID_Star

SMB3_DetermineCardFlipPrizeForCorrectMatch:
.Main:
;$23A454
	LDY.w !RAM_SMB3_CardFlipGame_CursorPosIndex
	LDA.w !RAM_SMB3_Global_CardFlipGameCardContentsTable,y
	AND.b #$0F
	STA.b $0C
	CMP.b #$03
	BNE.b CODE_23A46F
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	INC.w !RAM_SMB3_Level_Player_MariosLives,x
	LDA.b #!Define_SMAS_Sound0063_1up
	STA.w !RAM_SMB3_Global_SoundCh3
	BNE.b CODE_23A49E							; Note: This will always branch

CODE_23A46F:
	CMP.b #$04
	BCC.b CODE_23A48A
	LDY.b #$0A
	CMP.b #$04
	BEQ.b CODE_23A47B
	LDY.b #$14
CODE_23A47B:
	TYA
	CLC
	ADC.w !RAM_SMB3_CardFlipGame_CoinsToGive
	STA.w !RAM_SMB3_CardFlipGame_CoinsToGive
	LDA.b #!Define_SMAS_Sound0063_Coin
	STA.w !RAM_SMB3_Global_SoundCh3
	BNE.b CODE_23A49E							; Note: This will always branch

CODE_23A48A:
	LDA.b $0C
	CMP.b #$03
	BCS.b CODE_23A49E
	TAX
	LDA.l DATA_23A451,x
	JSL.l SMB3_AddNewItemToReserveInventory_Main
	LDA.b #!Define_SMAS_Sound0063_Correct
	STA.w !RAM_SMB3_Global_SoundCh3
CODE_23A49E:
	RTS

;--------------------------------------------------------------------

SMB3_CyclePaletteOfCardFlipGameBorder:
.Main:
;$23A49F
	LDA.w !RAM_SMB3_CardFlipGame_BorderPaletteAnimationTimer
	DEC
	PHA
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR] Reducing flashing speed
	AND.b #$0C
	LSR
else
	AND.b #$06
endif
	TAY
	PLA
	AND.b #$18
	LSR
	LSR
	LSR
	STA.w $02D2
CODE_23A4B0:
	REP.b #$20
	LDA.w DATA_219A93,y
	STA.w SMB3_PaletteMirror[$43].LowByte
	LDA.w DATA_219A9B,y
	STA.w SMB3_PaletteMirror[$49].LowByte
	LDA.w DATA_219AA3,y
	STA.w SMB3_PaletteMirror[$4A].LowByte
	LDA.w DATA_219AAB,y
	STA.w SMB3_PaletteMirror[$4B].LowByte
	LDA.w DATA_219AB3,y
	STA.w SMB3_PaletteMirror[$4C].LowByte
	LDA.w DATA_219ABB,y
	STA.w SMB3_PaletteMirror[$4E].LowByte
	SEP.b #$20
	INC.w !RAM_SMB3_Global_UpdateEntirePaletteFlag
	RTS

;--------------------------------------------------------------------

SMB3_CheckIfAXYBArePressed:
.Main:
;$23A4DC
	LDA.b !RAM_SMB3_Global_ControllerPress1
	AND.b #(!Joypad_Y>>8)|(!Joypad_B>>8)
	BNE.b CODE_23A4EC
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.w !RAM_SMB3_Global_ControllerPress2P1,x
	AND.b #!Joypad_X|!Joypad_A
	BEQ.b CODE_23A4EE
CODE_23A4EC:
	SEC
	RTS

CODE_23A4EE:
	CLC
	RTS

if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
%FREE_BYTES(NULLROM, 68, $FF)
else
%FREE_BYTES(NULLROM, 80, $FF)
endif

;--------------------------------------------------------------------

DATA_23A540:
	db $32,$50,$AD,$C1,$32,$50,$AD,$C1

;--------------------------------------------------------------------

	%ROUTINE_SMB3_InitializeTileset12Level_BattleMode(NULLROM)		; $23A548

;--------------------------------------------------------------------

SMB3_ProcessBattleModeResizableObjects:
.Main:
;$23A569
	LDA.b $0E
	AND.b #$E0
	LSR
	LSR
	LSR
	LSR
	LSR
	TAX
	LDA.w $0706
	LSR
	LSR
	LSR
	LSR
	CLC
	ADC.w DATA_21A379,x
	TAX
	DEX
	TXA
	JSL.l SMB3_ExecutePtr_Long

DATA_23A585:
	dl CODE_23A5FE
	dl CODE_23A603
	dl CODE_23A608
	dl CODE_23A920
	dl CODE_23A61F
	dl $000000
	dl $000000
	dl $000000
	dl $000000
	dl $000000
	dl $000000
	dl $000000
	dl $000000
	dl $000000
	dl $000000
	dl $000000
	dl $000000
	dl $000000
	dl $000000
	dl $000000
	dl $000000
	dl $000000
	dl $000000
	dl $000000
	dl CODE_23A6C1
	dl CODE_23A6C1
	dl CODE_23A6C1
	dl CODE_23A728
	dl CODE_23A728
	dl CODE_23A81D
	dl CODE_23A81D
	dl CODE_23A8AE
	dl CODE_23A8AE

;--------------------------------------------------------------------

; Note: Something related to battle mode.

CODE_23A5E8:
	LDA.b $0E
	AND.b #$E0
	LSR
	CLC
	ADC.w $0706
	TAX
	JSL.l SMB3_ExecutePtr_Absolute

DATA_23A5F6:
	dw CODE_23A635
	dw CODE_23A63A
	dw CODE_23A658
	dw CODE_23A660

;--------------------------------------------------------------------

CODE_23A5FE:
	LDX.b #$00
	JMP.w CODE_23A60A

CODE_23A603:
	LDX.b #$01
	JMP.w CODE_23A60A

CODE_23A608:
	LDX.b #$02
CODE_23A60A:
	LDA.w $0706
	AND.b #$0F
	STA.b $00
	LDY.w $0700
CODE_23A614:
	LDA.w DATA_21A464,x
	STA.b [$2E],y
	INY
	DEC.b $00
	BPL.b CODE_23A614
	RTL

;--------------------------------------------------------------------

CODE_23A61F:
	LDA.w $0706
	AND.b #$0F
	TAX
	LDY.w $0700
CODE_23A628:
	LDA.b #$C0
	STA.b [$2E],y
	TYA
	CLC
	ADC.b #$10
	TAY
	DEX
	BPL.b CODE_23A628
	RTL

;--------------------------------------------------------------------

CODE_23A635:
	LDX.b #$00
	JMP.w CODE_23A63C

CODE_23A63A:
	LDX.b #$04
CODE_23A63C:
	LDY.w $0700
CODE_23A63F:
	LDA.w DATA_21A467,x
	STA.b [$2E],y
	INY
	INX
	TXA
	AND.b #$01
	BNE.b CODE_23A63F
	LDA.w $0700
	CLC
	ADC.b #$10
	TAY
	TXA
	AND.b #$03
	BNE.b CODE_23A63F
	RTL

;--------------------------------------------------------------------

CODE_23A658:
	LDY.w $0700
	LDA.b #$BC
	STA.b [$2E],y
	RTL

;--------------------------------------------------------------------

CODE_23A660:
	LDX.b #$00
CODE_23A662:
	LDY.w $0700
	LDA.b #$09
	STA.b $00
CODE_23A669:
	LDA.w DATA_21A46F,x
	STA.b [$2E],y
	INY
	INX
	DEC.b $00
	BPL.b CODE_23A669
	LDA.w $0700
	CLC
	ADC.b #$10
	STA.w $0700
	CPX.b #$14
	BNE.b CODE_23A662
	RTL

;--------------------------------------------------------------------

CODE_23A682:
	LDY.w $0700
	LDA.b #$42
	STA.b [$2E],y
	TYA
	CLC
	ADC.b #$10
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	LDA.b #$42
	STA.b [$2E],y
	RTL

;--------------------------------------------------------------------

CODE_23A699:
	LDY.w $0700
	LDA.b #$00
	STA.b [$2E],y
	REP.b #$30
	TYA
	ORA.w #$2000
	TAY
	LDA.w #$0100
	XBA
	SEP.b #$20
	STA.b [$2E],y
	SEP.b #$10
	TYA
	CLC
	ADC.b #$10
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	LDA.b #$43
	STA.b [$2E],y
	RTL

;--------------------------------------------------------------------

SMB3_ConstructedPlainResizableObj17_ExitEnabledVerticalUpPipe:
.Main:
SMB3_ConstructedPlainResizableObj18_VerticalUpPipe:
.Main:
SMB3_ConstructedPlainResizableObj19_AltExitEnabledVerticallUpPipe:
.Main:
CODE_23A6C1:
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDA.w $0706
	SEC
	SBC.b #$90
	AND.b #$F0
	LSR
	LSR
	LSR
	TAX
	LDA.w $0706
	AND.b #$0F
	STA.b $02
	LDY.w $0700
	LDA.w DATA_21A483,x
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	JSL.l CODE_23BEBB
	LDA.w DATA_21A483+$01,x
	STA.b [$2E],y
	BRA.b CODE_23A706

CODE_23A6F3:
	LDY.w $0700
	LDA.b #$BA
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	JSL.l CODE_23BEBB
	LDA.b #$BB
	STA.b [$2E],y
CODE_23A706:
	JSL.l CODE_2AB73A
	LDA.b $00
	STA.b $2E
	LDA.b $01
	STA.b $2F
	LDA.w $0700
	CLC
	ADC.b #$10
	STA.w $0700
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	STA.b $01
	DEC.b $02
	BPL.b CODE_23A6F3
	RTL

;--------------------------------------------------------------------

SMB3_ConstructedPlainResizableObj1A_ExitEnabledVerticalDownPipe:
.Main:
SMB3_ConstructedPlainResizableObj1B_VerticalDownPipe:
.Main:
CODE_23A728:
	LDA.w $0706
	PHA
	SEC
	SBC.b #$C0
	AND.b #$F0
	LSR
	LSR
	LSR
	TAX
	PLA
	AND.b #$0F
	STA.b $02
CODE_23A73A:
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
CODE_23A742:
	LDY.w $0700
	LDA.b #$BA
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	JSL.l CODE_23BEBB
	LDA.b #$BB
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	LDA.b $00
	STA.b $2E
	LDA.b $01
	STA.b $2F
	LDA.w $0700
	CLC
	ADC.b #$10
	STA.w $0700
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	STA.b $01
	DEC.b $02
	BNE.b CODE_23A742
	LDY.w $0700
	LDA.w DATA_21A483,x
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	JSL.l CODE_23BEBB
	LDA.w DATA_21A483+$01,x
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	RTL

;--------------------------------------------------------------------

SMB3_ConstructedPlainResizableObj2C_VerticalScreenScrollingPipe:
.Main:
CODE_23A790:
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDX.b #$06
	LDA.w $0706
	AND.b #$0F
	STA.b $02
	LDY.w $0700
	LDA.b [$2E],y
	CMP.w DATA_21A483,x
	BEQ.b CODE_23A7C3
	LDA.w DATA_21A483,x
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	JSL.l CODE_23BEBB
	LDA.w DATA_21A483+$01,x
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	BRA.b CODE_23A7DA

CODE_23A7C3:
	LDY.w $0700
	LDA.b #$BA
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	JSL.l CODE_23BEBB
	LDA.b #$BB
	STA.b [$2E],y
	JSL.l CODE_2AB73A
CODE_23A7DA:
	LDA.b $00
	STA.b $2E
	LDA.b $01
	STA.b $2F
	LDA.w $0700
	CLC
	ADC.b #$10
	STA.w $0700
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	STA.b $01
	DEC.b $02
	BNE.b CODE_23A7C3
	LDY.w $0700
	LDA.w DATA_21A483,x
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	JSL.l CODE_23BEBB
	LDA.w DATA_21A483+$01,x
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	RTL

;--------------------------------------------------------------------

CODE_23A811:
	LDX.b #$08
	LDA.w $0706
	AND.b #$0F
	STA.b $02
	JMP.w CODE_23A73A

;--------------------------------------------------------------------

SMB3_ConstructedPlainResizableObj1C_ExitEnabledLeftPipe:
.Main:
CODE_23A81D:
	LDA.w $0706
	SEC
	SBC.b #$E0
	LSR
	LSR
	LSR
	LSR
	TAX
CODE_23A828:
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDA.w $0706
	AND.b #$0F
	STA.b $02
	LDY.w $0700
	LDA.w DATA_21A48D,x
	STA.b [$2E],y
	BRA.b CODE_23A857

CODE_23A841:
	LDA.b [$2E],y
	CMP.b #$BA
	BEQ.b CODE_23A84F
	CMP.b #$BB
	BEQ.b CODE_23A853
	LDA.b #$B8
	BRA.b CODE_23A855

CODE_23A84F:
	LDA.b #$A5
	BRA.b CODE_23A855

CODE_23A853:
	LDA.b #$A6
CODE_23A855:
	STA.b [$2E],y
CODE_23A857:
	JSL.l CODE_2AB73A
	JSL.l CODE_23BEBB
	DEC.b $02
	BPL.b CODE_23A841
	LDA.b $00
	STA.b $2E
	LDA.b $01
	STA.b $2F
	LDA.w $0700
	CLC
	ADC.b #$10
	STA.w $0700
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	STA.b $01
	LDA.w $0706
	AND.b #$0F
	STA.b $02
	LDA.w DATA_21A490,x
	STA.b [$2E],y
	BRA.b CODE_23A8A1

CODE_23A88B:
	LDA.b [$2E],y
	CMP.b #$BA
	BEQ.b CODE_23A899
	CMP.b #$BB
	BEQ.b CODE_23A89D
	LDA.b #$B9
	BRA.b CODE_23A89F

CODE_23A899:
	LDA.b #$AA
	BRA.b CODE_23A89F

CODE_23A89D:
	LDA.b #$AB
CODE_23A89F:
	STA.b [$2E],y
CODE_23A8A1:
	JSL.l CODE_2AB73A
	JSL.l CODE_23BEBB
	DEC.b $02
	BPL.b CODE_23A88B
	RTL

;--------------------------------------------------------------------

CODE_23A8AE:
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDA.w $0706
	SEC
	SBC.b #$10
	LSR
	LSR
	LSR
	LSR
	TAX
	LDA.w $0706
	AND.b #$0F
	STA.b $02
	LDY.w $0700
CODE_23A8CB:
	LDA.b #$B8
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	JSL.l CODE_23BEBB
	DEC.b $02
	BNE.b CODE_23A8CB
	LDA.w DATA_21A48D,x
	STA.b [$2E],y
	LDA.b $00
	STA.b $2E
	LDA.b $01
	STA.b $2F
	LDA.w $0700
	CLC
	ADC.b #$10
	STA.w $0700
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	STA.b $01
	LDA.w $0706
	AND.b #$0F
	STA.b $02
CODE_23A901:
	LDA.b #$B9
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	JSL.l CODE_23BEBB
	DEC.b $02
	BNE.b CODE_23A901
	LDA.w DATA_21A490,x
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	RTL

;--------------------------------------------------------------------

CODE_23A91B:
	LDX.b #$02
	JMP.w CODE_23A828

;--------------------------------------------------------------------

CODE_23A920:
	LDA.w $0706
	AND.b #$0F
	STA.b $02
	LDY.w $0700
CODE_23A92A:
	LDX.b #$41
	JSR.w CODE_23BE71
	CMP.b #$00
	BNE.b CODE_23A935
	LDX.b #$40
CODE_23A935:
	TXA
	STA.b [$2E],y
	INC.b $0F
	JSL.l CODE_23BEBB
	DEC.b $02
	BPL.b CODE_23A92A
	RTL

;--------------------------------------------------------------------

; Note: Object that draws the black backdrop, decorations, and end level card box at the end of a level.

CODE_23A943:
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDX.b #$00
	STX.b $03
CODE_23A94F:
	LDA.b #$19
	STA.b $02
	LDY.w $0700
CODE_23A956:
	LDA.w DATA_21A493,x
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	TYA
	CLC
	ADC.b #$10
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	DEC.b $02
	BPL.b CODE_23A956
	LDA.b [$2E],y
	CMP.b #$2C
	BEQ.b CODE_23A978
	CMP.b #$9A
	BNE.b CODE_23A987
CODE_23A978:
	LDA.b #$0D
	STA.b [$2E],y
	LDA.b $2F
	CLC
	ADC.b #$20
	STA.b $2F
	LDA.b #$01
	STA.b [$2E],y
CODE_23A987:
	REP.b #$20
	LDA.b $00
	STA.b $2E
	SEP.b #$20
	LDY.w $0700
	INY
	TYA
	AND.b #$0F
	BNE.b CODE_23A9D6
	LDA.w !RAM_SMB3_Global_TilesetFromHeader
	CMP.b #$01
	BEQ.b CODE_23A9B7
	CMP.b #$04
	BEQ.b CODE_23A9B7
	CMP.b #$0C
	BEQ.b CODE_23A9B7
	CMP.b #$09
	BEQ.b CODE_23A9B7
	CMP.b #$03
	BEQ.b CODE_23A9B7
	CMP.b #$0E
	BEQ.b CODE_23A9B7
	CMP.b #$0D
	BNE.b CODE_23A9C0
CODE_23A9B7:
	LDA.b $03
	CMP.b #$01
	BNE.b CODE_23A9C0
	JSR.w CODE_23A9E5
CODE_23A9C0:
	REP.b #$20
	LDA.b $2E
	CLC
	ADC.w #$01B0
	STA.b $2E
	STA.b $00
	SEP.b #$20
	INC.b $03
	LDA.w $0700
	AND.b #$F0
	TAY
CODE_23A9D6:
	STY.w $0700
	LDX.b #$01
	LDA.b $03
	CMP.b #$02
	BEQ.b CODE_23A9E4
	JMP.w CODE_23A94F

CODE_23A9E4:
	RTL

CODE_23A9E5:
	PHB
	LDA.b #DATA_2AB9F1>>16
	PHA
	PLB
	INC.b $2F
	LDA.b $2E
	CLC
	ADC.b #$40
	STA.b $2E
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	LDY.b #$00
	STY.b $06
	LDX.b #$06
	LDA.w !RAM_SMB3_Global_TilesetFromHeader
CODE_23AA02:
	CMP.w DATA_2AB9F1,x
	BEQ.b CODE_23AA0A
	DEX
	BNE.b CODE_23AA02
CODE_23AA0A:
	TXA
	ASL
	TAX
	REP.b #$20
	LDA.w DATA_2AB9E3,x
	STA.b $0C
	LDA.w DATA_2ABBD8,x
	STA.b $D8
	LDA.b $2E
	CLC
	ADC.w #$2000
	STA.b $DB
	SEP.b #$20
	LDA.b $30
	STA.b $DD
CODE_23AA27:
	LDX.b #$0F
CODE_23AA29:
	LDA.b ($0C),y
	STA.b [$2E],y
	LDA.b ($D8),y
	STA.b [$DB],y
	INY
	DEX
	BPL.b CODE_23AA29
	INC.b $06
	LDA.b $06
	CMP.b #$06
	BNE.b CODE_23AA27
	LDA.b $00
	STA.b $2E
	LDA.b $01
	STA.b $2F
	PLB
	RTS

;--------------------------------------------------------------------

CODE_23AA47:
	TXA
	SEC
	SBC.b #$10
	TAX
	LDY.w $0700
	CPX.b #$0B
	BEQ.b CODE_23AA57
	CPX.b #$0F
	BNE.b CODE_23AA67
CODE_23AA57:
	JSR.w CODE_23BE71
	CMP.b #$00
	BEQ.b CODE_23AA67
	LDA.b #$5F
	CPX.b #$0B
	BEQ.b CODE_23AA6A
	JMP.w CODE_23AA89

CODE_23AA67:
	LDA.w DATA_21A495,x
CODE_23AA6A:
	STA.b [$2E],y
	PHA
	JSL.l CODE_2AB73A
	PLA
	CMP.b #$70
	BNE.b CODE_23AA89
	TYA
	SEC
	SBC.b #$10
	TAY
	LDA.b $2F
	SBC.b #$00
	STA.b $2F
	LDA.b #$C1
	STA.b [$2E],y
	JSL.l CODE_2AB73A
CODE_23AA89:
	RTL

;--------------------------------------------------------------------

SMB3_ConstructedPlainResizableObj0F_BrickBlocks:
.Main:
SMB3_ConstructedPlainResizableObj10_CoinQuestionMarkBlocks:
.Main:
SMB3_ConstructedPlainResizableObj11_CoinBrickBlocks:
.Main:
SMB3_ConstructedPlainResizableObj12_WoodBlocks:
.Main:
SMB3_ConstructedPlainResizableObj14_NoteBlocks:
.Main:
SMB3_ConstructedPlainResizableObj16_Coins:
.Main:
CODE_23AA8A:
	LDA.w $0706
	SEC
	SBC.b #$10
	LSR
	LSR
	LSR
	LSR
	TAX
CODE_23AA95:
	LDA.w $0706
	AND.b #$0F
	STA.b $02
	LDY.w $0700
CODE_23AA9F:
	CPX.b #$07
	BNE.b CODE_23AAAA
	JSR.w CODE_23BE71
	CMP.b #$00
	BNE.b CODE_23AAB3
CODE_23AAAA:
	LDA.w DATA_21A4AE,x
	STA.b [$2E],y
	JSL.l CODE_2AB73A
CODE_23AAB3:
	JSL.l CODE_23BEBB
	DEC.b $02
	BPL.b CODE_23AA9F
	RTL

SMB3_ConstructedPlainResizableObj2B_ThrowBlocks:
.Main:
CODE_23AABC:
	LDX.b #$08
	JMP.w CODE_23AA95

;--------------------------------------------------------------------

CODE_23AAC1:
	LDX.b #$00
	LDY.b #$00
	BRA.b CODE_23AAD1

CODE_23AAC7:
	LDX.b #$15
	LDY.b #$01
	BRA.b CODE_23AAD1

CODE_23AACD:
	LDX.b #$22
	LDY.b #$02
CODE_23AAD1:
	LDA.b $30
	STA.b $DA
	STZ.b $DB
	LDA.w !RAM_SMB3_Level_GraphicsAndPaletteSettingFromHeader
	CMP.b #$01
	BEQ.b CODE_23AAF2
	CMP.b #$14
	BEQ.b CODE_23AAF2
	CMP.b #$1C
	BEQ.b CODE_23AAF2
	CMP.b #$1F
	BEQ.b CODE_23AAF2
	CMP.b #$20
	BEQ.b CODE_23AAF2
	CMP.b #$29
	BNE.b CODE_23AAF4
CODE_23AAF2:
	INC.b $DB
CODE_23AAF4:
	REP.b #$21
	LDA.b $2E
	STA.b $00
	SEP.b #$20
	STY.b $0C
CODE_23AAFE:
	LDY.b $0C
	LDA.w DATA_21A5B0,y
	STA.b $02
	LDY.w $0700
CODE_23AB08:
	REP.b #$21
	LDA.b $2E
	ADC.w #$2000
	STA.b $D8
	SEP.b #$20
	LDA.b $DB
	BNE.b CODE_23AB1C
	LDA.w DATA_21A4B7,x
	BRA.b CODE_23AB1F

CODE_23AB1C:
	LDA.w DATA_21A50A,x
CODE_23AB1F:
	CMP.b #$80
	BNE.b CODE_23AB26
	JMP.w CODE_23ABE9

CODE_23AB26:
	STA.b $03
	CMP.b #$92
	BEQ.b CODE_23AB34
	CMP.b #$93
	BNE.b CODE_23AB3B
	LDA.b $DB
	BNE.b CODE_23AB3B
CODE_23AB34:
	LDA.b #$00
	STA.b [$D8],y
	JMP.w CODE_23ABD9

CODE_23AB3B:
	LDA.b $DB
	BNE.b CODE_23AB46
	LDA.b [$D8],y
	BEQ.b CODE_23AB46
CODE_23AB43:
	JMP.w CODE_23ABE9

CODE_23AB46:
	LDA.w DATA_21A55D,x
	STA.b [$D8],y
	BEQ.b CODE_23AB50
	JMP.w CODE_23ABD9

CODE_23AB50:
	LDA.b [$2E],y
	CMP.b #$03
	BEQ.b CODE_23ABBB
	CMP.b #$90
	BCC.b CODE_23ABD9
	CMP.b #$9F
	BCS.b CODE_23ABD9
	CMP.b $03
	BEQ.b CODE_23AB43
	LDA.b $DB
	BEQ.b CODE_23AB8C
	LDA.b $03
	CMP.b #$94
	BEQ.b CODE_23AB70
	CMP.b #$95
	BNE.b CODE_23AB8C
CODE_23AB70:
	LDA.b [$2E],y
	CMP.b #$94
	BEQ.b CODE_23ABD5
	CMP.b #$91
	BEQ.b CODE_23ABBB
	CMP.b #$95
	BEQ.b CODE_23ABBB
	CMP.b #$98
	BEQ.b CODE_23ABD5
	LDA.b #$01
	STA.b [$D8],y
	LDA.b #$03
	STA.b $03
	BRA.b CODE_23ABD9

CODE_23AB8C:
	LDA.b $03
	CMP.b #$94
	BCS.b CODE_23ABBB
	INC.b $03
	INC.b $03
	LDA.w !RAM_SMB3_Level_GraphicsAndPaletteSettingFromHeader
	CMP.b #$01
	BEQ.b CODE_23ABAB
	LDA.w !RAM_SMB3_Global_CurrentWorld
	CMP.b #$06
	BNE.b CODE_23ABD9
	LDA.w !RAM_SMB3_Level_GraphicsAndPaletteSettingFromHeader
	CMP.b #$29
	BNE.b CODE_23ABD9
CODE_23ABAB:
	LDA.b [$2E],y
	CMP.b #$98
	BNE.b CODE_23ABD9
	LDA.b #$01
	STA.b [$D8],y
	LDA.b #$02
	STA.b $03
	BRA.b CODE_23ABD9

CODE_23ABBB:
	LDA.b $DB
	BEQ.b CODE_23ABD5
	LDA.b $03
	CMP.b #$93
	BEQ.b CODE_23ABD9
	LDA.b [$2E],y
	INC
	INC
	STA.b $03
	AND.b #$F0
	BNE.b CODE_23ABD9
	LDA.b #$01
	STA.b [$D8],y
	BRA.b CODE_23ABD9

CODE_23ABD5:
	LDA.b #$98
	STA.b $03
CODE_23ABD9:
	LDA.b $03
	STA.b [$2E],y
	CMP.b #$98
	BNE.b CODE_23ABE5
	JSL.l CODE_2AB73A
CODE_23ABE5:
	JSL.l CODE_2A8794
CODE_23ABE9:
	JSL.l CODE_23BEBB
	INX
	DEC.b $02
	BMI.b CODE_23ABF5
	JMP.w CODE_23AB08

CODE_23ABF5:
	LDA.b $00
	STA.b $2E
	LDA.b $01
	STA.b $2F
	LDA.w $0700
	CLC
	ADC.b #$10
	STA.w $0700
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	STA.b $01
	LDA.w DATA_21A4B7,x
	CMP.b #$FF
	BEQ.b CODE_23AC18
	JMP.w CODE_23AAFE

CODE_23AC18:
	RTL

;--------------------------------------------------------------------

CODE_23AC19:
	JSR.w CODE_23ACF3
CODE_23AC1C:
	LDA.w DATA_21A5B3,x
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	DEC.b $02
	BPL.b CODE_23AC1C
	RTL

;--------------------------------------------------------------------

CODE_23AC2A:
	JSR.w CODE_23ACF3
CODE_23AC2D:
	LDA.w DATA_21A5B5,x
	STA.b [$2E],y
	TYA
	CLC
	ADC.b #$10
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	DEC.b $02
	BPL.b CODE_23AC2D
	RTL

;--------------------------------------------------------------------

CODE_23AC42:
	JSR.w CODE_23ACF3
CODE_23AC45:
	LDA.w DATA_21A5B7,x
	STA.b [$2E],y
	TYA
	CLC
	ADC.b #$10
	TAY
	STA.w $0700
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	JSL.l CODE_23BEBB
	DEC.b $02
	BPL.b CODE_23AC45
	RTL

;--------------------------------------------------------------------

CODE_23AC61:
	JSR.w CODE_23ACF3
CODE_23AC64:
	LDA.w DATA_21A5B9,x
	STA.b [$2E],y
	TYA
	SEC
	SBC.b #$10
	TAY
	STA.w $0700
	LDA.b $2F
	SBC.b #$00
	STA.b $2F
	JSL.l CODE_23BEBB
	DEC.b $02
	BPL.b CODE_23AC64
	RTL

;--------------------------------------------------------------------

CODE_23AC80:
	JSR.w CODE_23ACF3
CODE_23AC83:
	LDA.w DATA_21A5BB,x
	STA.b [$2E],y
	TYA
	CLC
	ADC.b #$10
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	LDA.w DATA_21A5BD,x
	STA.b [$2E],y
	TYA
	CLC
	ADC.b #$10
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	STY.w $0700
	JSL.l CODE_23BEBB
	DEC.b $02
	BPL.b CODE_23AC83
	RTL

;--------------------------------------------------------------------

CODE_23ACAF:
	JSR.w CODE_23ACF3
CODE_23ACB2:
	LDA.w DATA_21A5BF,x
	STA.b [$2E],y
	TYA
	CLC
	ADC.b #$10
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	LDA.w DATA_21A5C1,x
	STA.b [$2E],y
	TYA
	CLC
	ADC.b #$10
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	DEY
	TYA
	AND.b #$0F
	CMP.b #$0F
	BNE.b CODE_23ACEE
	LDA.b $2E
	SEC
	SBC.b #$B0
	STA.b $2E
	LDA.b $2F
	SBC.b #$01
	STA.b $2F
	INY
	TYA
	AND.b #$F0
	ORA.b #$0F
	TAY
CODE_23ACEE:
	DEC.b $02
	BPL.b CODE_23ACB2
	RTL

;--------------------------------------------------------------------

CODE_23ACF3:
	LDA.w $0706
	AND.b #$0F
	STA.b $02
	LDY.w $0700
	LDX.b #$00
	LDA.w !RAM_SMB3_Global_TilesetFromHeader
	CMP.b #$02
	BNE.b CODE_23AD08
	LDX.b #$01
CODE_23AD08:
	RTS

;--------------------------------------------------------------------

; Note: Routine for handling the lava object?

CODE_23AD09:
	LDY.b #$00
	LDA.b [!RAM_SMB3_Level_LevelDataPtrLo],y
	STA.b $02
	REP.b #$20
	INC.b !RAM_SMB3_Level_LevelDataPtrLo
	LDA.b $2E
	STA.b $00
	SEP.b #$20
	LDA.w $0706
	AND.b #$0F
	STA.b $03
	LDX.b #$00
CODE_23AD22:
	STZ.b $D8
	LDY.w $0700
	LDA.b $02
	STA.b $04
	BPL.b CODE_23AD3A
	LDA.w !RAM_SMB3_Global_CurrentWorld
	CMP.b #$04
	BNE.b CODE_23AD3A
	DEC.b $04
	LDA.b #$8B
	STA.b $D8
CODE_23AD3A:
	LDA.b $D8
	BNE.b CODE_23AD41
	LDA.w DATA_21A5C3,x
CODE_23AD41:
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	DEC.b $04
	LDA.b $04
	CMP.b #$FF
	BNE.b CODE_23AD3A
	REP.b #$20
	LDA.b $00
	STA.b $2E
	SEP.b #$20
	LDA.w $0700
	CLC
	ADC.b #$10
	STA.w $0700
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	STA.b $01
	LDX.b #$01
	DEC.b $03
	BPL.b CODE_23AD22
	RTL

;--------------------------------------------------------------------

CODE_23AD6F:
	LDX.b #$00
	BEQ.b CODE_23AD75

CODE_23AD73:
	LDX.b #$01
CODE_23AD75:
	STX.b $02
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDA.w $0706
	AND.b #$0F
	STA.b $03
	LDY.w $0700
CODE_23AD89:
	LDX.b $02
	LDA.w DATA_21A5C5,x
	STA.b [$2E],y
CODE_23AD90:
	TYA
	CLC
	ADC.b #$10
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	LDA.b [$2E],y
	CMP.b #$02
	BNE.b CODE_23ADA8
	LDA.w DATA_21A5C7,x
	STA.b [$2E],y
	BRA.b CODE_23AD90

CODE_23ADA8:
	TYA
	SEC
	SBC.b #$10
	TAY
	LDA.b $2F
	SBC.b #$00
	STA.b $2F
	LDA.w DATA_21A5C9,x
	STA.b [$2E],y
	LDA.b $00
	STA.b $2E
	LDA.b $01
	STA.b $2F
	LDY.w $0700
	INY
	TYA
	AND.b #$0F
	BNE.b CODE_23ADDD
	REP.b #$20
	LDA.b $2E
	CLC
	ADC.w #$01B0
	STA.b $2E
	STA.b $00
	SEP.b #$20
	LDA.w $0700
	AND.b #$F0
	TAY
CODE_23ADDD:
	STY.w $0700
CODE_23ADE0:
	TYA
	CLC
	ADC.b #$10
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	LDA.b [$2E],y
	CMP.w DATA_21A5CF,x
	BNE.b CODE_23ADF9
	LDA.w DATA_21A5CD,x
	STA.b [$2E],y
	BRA.b CODE_23ADE0

CODE_23ADF9:
	DEC.b $03
	BMI.b CODE_23AE2D
	LDA.b $00
	STA.b $2E
	LDA.b $01
	STA.b $2F
	LDX.b #$02
	LDY.w $0700
CODE_23AE0A:
	INY
	TYA
	AND.b #$0F
	BNE.b CODE_23AE24
	REP.b #$20
	LDA.b $2E
	CLC
	ADC.w #$01B0
	STA.b $2E
	STA.b $00
	SEP.b #$20
	LDA.w $0700
	AND.b #$F0
	TAY
CODE_23AE24:
	DEX
	BPL.b CODE_23AE0A
	STY.w $0700
	JMP.w CODE_23AD89

CODE_23AE2D:
	RTL

;--------------------------------------------------------------------

CODE_23AE2E:
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDY.w $0700
	LDA.w $0706
	AND.b #$0F
	TAX
CODE_23AE3F:
	LDA.b #$9C
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	DEX
	BPL.b CODE_23AE3F
	LDA.b $00
	STA.b $2E
	LDA.b $01
	STA.b $2F
	LDA.w $0700
	CLC
	ADC.b #$10
	STA.w $0700
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	LDA.w $0706
	AND.b #$0F
	TAX
	LDA.b #$90
	STA.b [$2E],y
	JMP.w CODE_23AE73

CODE_23AE6F:
	LDA.b #$8E
	STA.b [$2E],y
CODE_23AE73:
	JSL.l CODE_23BEBB
	DEX
	BPL.b CODE_23AE6F
	RTL

;--------------------------------------------------------------------

SMB3_ConstructedPlainResizableObj20_BulletBillShooter:
.Main:
CODE_23AE7B:
	LDA.w $0706
	AND.b #$0F
	TAX
	LDY.w $0700
	LDA.b #$76
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	TYA
	CLC
	ADC.b #$10
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	DEX
	BMI.b CODE_23AEC6
	LDA.b #$77
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	TYA
	CLC
	ADC.b #$10
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	DEX
	BMI.b CODE_23AEC6
CODE_23AEB0:
	LDA.b #$78
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	TYA
	CLC
	ADC.b #$10
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	DEX
	BPL.b CODE_23AEB0
CODE_23AEC6:
	RTL

;--------------------------------------------------------------------

SMB3_ConstructedPlainResizableObj22_PSwitchCoins:
.Main:
CODE_23AEC7:
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDA.w $0706
	PHA
	SEC
	SBC.b #$40
	LSR
	LSR
	LSR
	LSR
	TAX
	PLA
	AND.b #$0F
	STA.b $02
	STA.b $03
	LDY.w $0700
CODE_23AEE5:
	LDA.w DATA_21A5CF,x
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	JSL.l CODE_23BEBB
	DEC.b $03
	BPL.b CODE_23AEE5
	LDA.b $00
	STA.b $2E
	LDA.b $01
	STA.b $2F
	LDA.w $0700
	CLC
	ADC.b #$10
	STA.w $0700
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	STA.b $01
	LDA.b $02
	STA.b $03
CODE_23AF14:
	LDA.w DATA_21A5D1,x
	CMP.b #$C1
	BEQ.b CODE_23AF29
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	JSL.l CODE_23BEBB
	DEC.b $03
	BPL.b CODE_23AF14
CODE_23AF29:
	RTL

;--------------------------------------------------------------------

; Note: Object that draws water?

SMB3_ConstructedPlainResizableObj25_WaterWithNoCurrent:
.Main:
SMB3_ConstructedPlainResizableObj28_DiamondBlocks:
.Main:
CODE_23AF2A:
	LDY.b #$00
	LDA.b [!RAM_SMB3_Level_LevelDataPtrLo],y
	STA.b $02
	REP.b #$20
	INC.b !RAM_SMB3_Level_LevelDataPtrLo
	LDA.b $2E
	STA.b $00
	SEP.b #$20
	LDA.w $0706
	PHA
	SEC
	SBC.b #$60
	LSR
	LSR
	LSR
	LSR
	TAX
	PLA
	AND.b #$0F
	STA.b $03
	LDA.b $02
	STA.b $04
	LDY.w $0700
	LDA.w !RAM_SMB3_Level_Layer3BGFromHeader
	CMP.b #$01
	BEQ.b CODE_23AF69
	CMP.b #$05
	BEQ.b CODE_23AF69
	CMP.b #$06
	BEQ.b CODE_23AF69
	CMP.b #$07
	BEQ.b CODE_23AF69
	CMP.b #$0D
	BNE.b CODE_23AF6D
CODE_23AF69:
	CPX.b #$02
	BEQ.b CODE_23AF87					; If this is object 25 in a level with a layer 3 tide, make the water invisible.
CODE_23AF6D:
	LDA.w DATA_21A5D3,x
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	JSL.l CODE_23BEBB
	DEC.b $04
	LDA.b $04
	CMP.b #$FF
	BNE.b CODE_23AF6D
CODE_23AF82:
	DEC.b $03
	BPL.b CODE_23AFB1
	RTL

CODE_23AF87:
	LDX.b #$08
	LDA.w DATA_21A5D3,x
	STA.b [$2E],y
	REP.b #$30
	TYA
	AND.w #$00FF
	ORA.w #$2000
	TAY
	SEP.b #$20
	LDA.b #$01
	STA.b [$2E],y
	SEP.b #$10
	JSL.l CODE_23BEBB
	DEC.b $04
	LDA.b $04
	CMP.b #$FF
	BNE.b CODE_23AF87
	DEC.b $03
	BPL.b CODE_23AFB1
	RTL

CODE_23AFB1:
	LDA.b $00
	STA.b $2E
	LDA.b $01
	STA.b $2F
	LDA.w $0700
	CLC
	ADC.b #$10
	STA.w $0700
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	STA.b $01
	LDA.b $02
	STA.b $04
CODE_23AFCF:
	CPX.b #$07
	BNE.b CODE_23AFE2
	REP.b #$30
	TYA
	ORA.w #$2000
	TAY
	SEP.b #$20
	LDA.b #$00
	STA.b [$2E],y
	SEP.b #$10
CODE_23AFE2:
	CPX.b #$08
	BEQ.b CODE_23AFFE
	LDA.w DATA_21A5DC,x
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	JSL.l CODE_23BEBB
	DEC.b $04
	LDA.b $04
	CMP.b #$FF
	BNE.b CODE_23AFCF
	JMP.w CODE_23AF82

CODE_23AFFE:
	LDA.w DATA_21A5DC,x
	STA.b [$2E],y
	REP.b #$30
	TYA
	AND.w #$00FF
	ORA.w #$2000
	TAY
	SEP.b #$20
	LDA.b #$01
	STA.b [$2E],y
	SEP.b #$10
	JSL.l CODE_23BEBB
	DEC.b $04
	LDA.b $04
	CMP.b #$FF
	BNE.b CODE_23AFCF
	JMP.w CODE_23AF82

;--------------------------------------------------------------------

CODE_23B024:
	LDX.b #$01
	BEQ.b CODE_23B02A				; Glitch: This should be a BNE/BRA!

SMB3_ConstructedPlainResizableObj0A_SmilingClouds:
.Main:
CODE_23B028:
	LDX.b #$00
CODE_23B02A:
	LDA.w $0706
	AND.b #$0F
	STA.b $02
	LDY.w $0700
CODE_23B034:
	LDA.w DATA_21A5E5,x
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	DEC.b $02
	BPL.b CODE_23B034
	RTL

;--------------------------------------------------------------------

CODE_23B042:
	LDX.b #$02
	LDA.w $0706
	JMP.w CODE_23B057

CODE_23B04A:
	LDA.w $0706
	PHA
	SEC
	SBC.b #$50
	LSR
	LSR
	LSR
	LSR
	TAX
	PLA
CODE_23B057:
	AND.b #$0F
	STA.b $02
	LDY.w $0700
CODE_23B05E:
	LDA.w DATA_21A5E7,x
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	DEC.b $02
	BPL.b CODE_23B05E
	RTL

;--------------------------------------------------------------------

CODE_23B06C:
	LDY.w $0700
	LDA.b #$06
	STA.b [$2E],y
	RTL

;--------------------------------------------------------------------

CODE_23B074:
	LDA.w $0706
	AND.b #$0F
	TAX
	LDY.w $0700
CODE_23B07D:
	LDA.b #$5B
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	DEX
	BPL.b CODE_23B07D
	RTL

;--------------------------------------------------------------------

SMB3_ConstructedPlainResizableObj00_GroundedWhiteScrewPanel:
.Main:
SMB3_ConstructedPlainResizableObj01_GroundedOrangeScrewPanel:
.Main:
SMB3_ConstructedPlainResizableObj02_GroundedGreenScrewPanel:
.Main:
SMB3_ConstructedPlainResizableObj03_GroundedBlueScrewPanel:
.Main:
;$23B089
	STX.b $0B
	REP.b #$20
	LDA.b $2E
	STA.b $02
	SEP.b #$20
	LDA.w $0706
	AND.b #$0F
	STA.b $00
	LDX.b #$00
CODE_23B09C:
	TXA
	LDX.b $0B
	CLC
	ADC.w DATA_21A644,x
	STA.b $0C
	TAX
	LDA.w $0706
	AND.b #$C0
	STA.b $01
	LDY.w $0700
	CPX.b #$06
	BNE.b CODE_23B0C8
	LDA.w $0350
	CMP.b #$0C
	BNE.b CODE_23B0C8
	LDA.b [$2E],y
	CMP.b #$80
	BEQ.b CODE_23B0C8
	JSR.w CODE_23B1A5
	LDA.b #$0A
	BRA.b CODE_23B0CB

CODE_23B0C8:
	LDA.w DATA_21A5EA,x
CODE_23B0CB:
	STA.b [$2E],y
CODE_23B0CD:
	JSR.w CODE_23B36A
	LDA.b [$2E],y
	CMP.b #$53
	BEQ.b CODE_23B0FB
	CMP.b #$55
	BEQ.b CODE_23B0FB
	LDX.b $0C
	CPX.b #$06
	BNE.b CODE_23B0F4
	LDA.w $0350
	CMP.b #$0C
	BNE.b CODE_23B0F4
	LDA.b [$2E],y
	CMP.b #$80
	BEQ.b CODE_23B0F4
	JSR.w CODE_23B1A5
	LDA.b #$0B
	BRA.b CODE_23B0F7

CODE_23B0F4:
	LDA.w DATA_21A5F6,x
CODE_23B0F7:
	STA.b [$2E],y
	BRA.b CODE_23B0CD

CODE_23B0FB:
	TYA
	SEC
	SBC.b #$10
	TAY
	LDA.b $2F
	SBC.b #$00
	STA.b $2F
	LDX.b $0C
	CPX.b #$06
	BNE.b CODE_23B11D
	LDA.w $0350
	CMP.b #$0C
	BNE.b CODE_23B11D
	LDA.b [$2E],y
	CMP.b #$0B
	BNE.b CODE_23B11D
	LDA.b #$0C
	BRA.b CODE_23B120

CODE_23B11D:
	LDA.w DATA_21A602,x
CODE_23B120:
	STA.b [$2E],y
	REP.b #$20
	LDA.b $02
	STA.b $2E
	SEP.b #$20
	LDY.w $0700
	INY
	TYA
	AND.b #$0F
	BNE.b CODE_23B153
	LDA.w $0700
	AND.b #$F0
	TAY
	REP.b #$20
	LDA.b $2E
	CLC
	ADC.w #$01B0
	STA.b $2E
	STA.b $02
	SEP.b #$20
	LDA.b $03
	STA.b $04
	LDA.b $0E
	AND.b #$10
	BNE.b CODE_23B153
	INC.b $04
CODE_23B153:
	STY.w $0700
	DEC.b $00
	LDX.b #$01
	LDA.b $00
	CMP.b #$01
	BPL.b CODE_23B165
	INX
	CMP.b #$00
	BNE.b CODE_23B16A
CODE_23B165:
	STX.b $0C
	JMP.w CODE_23B09C

CODE_23B16A:
	LDA.b [$2E],y
	CMP.b #$80
	BEQ.b CODE_23B182
	CMP.b #$90
	BCC.b CODE_23B17C
	CMP.b #$9F
	BCS.b CODE_23B17C
	LDA.b #$9D
	BRA.b CODE_23B180

CODE_23B17C:
	AND.b #$C0
	ORA.b #$0B
CODE_23B180:
	STA.b [$2E],y
CODE_23B182:
	JSR.w CODE_23B36A
	LDA.b [$2E],y
	CMP.b #$53
	BEQ.b CODE_23B18F
	CMP.b #$57
	BNE.b CODE_23B190
CODE_23B18F:
	RTL

CODE_23B190:
	LDX.b #$18
	LDA.b [$2E],y
CODE_23B194:
	CMP.w DATA_21A60E,x
	BEQ.b CODE_23B19E
	DEX
	BPL.b CODE_23B194
	BRA.b CODE_23B182

CODE_23B19E:
	LDA.w DATA_21A627,x
	STA.b [$2E],y
	BRA.b CODE_23B182

CODE_23B1A5:
	PHX
	PHY
	REP.b #$30
	TYA
	AND.w #$00FF
	ORA.w #$2000
	TAY
	SEP.b #$20
	LDA.b #$01
	STA.b [$2E],y
	SEP.b #$10
	PLY
	PLX
	RTS

;--------------------------------------------------------------------

SMB3_ConstructedPlainResizableObj04_FloatingWhiteScrewPanel:
.Main:
SMB3_ConstructedPlainResizableObj05_FloatingOrangeScrewPanel:
.Main:
SMB3_ConstructedPlainResizableObj06_FloatingGreenScrewPanel:
.Main:
SMB3_ConstructedPlainResizableObj07_FloatingBlueScrewPanel:
.Main:
;$23B1BC
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDA.w $0706
	SEC
	SBC.b #$50
	PHA
	AND.b #$F0
	LSR
	LSR
	LSR
	LSR
	STA.b $02
	PLA
	AND.b #$0F
	STA.b $03
	STA.b $05
	STZ.b $04
CODE_23B1DC:
	LDX.b $02
	LDA.b $04
	CLC
	ADC.w DATA_21A644,x
	TAX
	LDY.w $0700
	LDA.w DATA_21A648,x
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	DEC.b $05
CODE_23B1F3:
	LDA.w DATA_21A654,x
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	DEC.b $05
	LDA.b $05
	CMP.b #$01
	BNE.b CODE_23B1F3
	LDA.w DATA_21A660,x
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	LDA.b $00
	STA.b $2E
	LDA.b $01
	STA.b $2F
	LDA.w $0700
	CLC
	ADC.b #$10
	STA.w $0700
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	STA.b $01
	LDA.b $03
	STA.b $05
	INC.b $04
	LDA.b $04
	CMP.b #$02
	BNE.b CODE_23B1DC
	RTL

;--------------------------------------------------------------------

CODE_23B233:
	LDA.b #$3B
	STA.w $05ED
	JSL.l SMB3_GetRand_Main
	RTL

;--------------------------------------------------------------------

CODE_23B23D:
	LDY.w $0700
CODE_23B240:
	LDA.b [$2E],y
	CMP.b #$80
	BEQ.b CODE_23B24A
	CMP.b #$80
	BNE.b CODE_23B253
CODE_23B24A:
	LDA.b #$85
	STA.b [$2E],y
	JSR.w CODE_23B36A
	BRA.b CODE_23B240

CODE_23B253:
	RTL

;--------------------------------------------------------------------

; Note: Object that draws a line of bushes (like the one seen at the start of 1-1)

SMB3_ConstructedPlainResizableObj08_LineOfBushes:
.Main:
;$23B254
	LDA.w $0706
	AND.b #$0F
	TAX
	LDY.w $0700
CODE_23B25D:
	LDA.b #$86
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	DEX
	BPL.b CODE_23B25D
	RTL

;--------------------------------------------------------------------

SMB3_ConstructedPlainResizableObj09_Hole:
.Main:
;$23B269
	LDX.b #$00
	BEQ.b CODE_23B26F					; Note: This will always branch.

CODE_23B26D:
	LDX.b #$02
CODE_23B26F:
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDA.w $0706
	AND.b #$0F
	STA.b $02
	LDY.w $0700
CODE_23B281:
	LDA.b $02
	STA.b $03
	LDA.w DATA_21A67B,x
	STA.b [$2E],y
	BRA.b CODE_23B291

CODE_23B28C:
	LDA.w DATA_21A67F,x
	STA.b [$2E],y
CODE_23B291:
	JSL.l CODE_23BEBB
	DEC.b $03
	BNE.b CODE_23B28C
	LDA.w DATA_21A683,x
	STA.b [$2E],y
	LDA.b $00
	STA.b $2E
	LDA.b $01
	STA.b $2F
	LDA.w $0700
	CLC
	ADC.b #$10
	STA.w $0700
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	STA.b $01
	INX
	CPY.b #$B0
	BCC.b CODE_23B281
	RTL

;--------------------------------------------------------------------

SMB3_ConstructedPlainResizableObj0B_WoodenGround:
.Main:
SMB3_ConstructedPlainResizableObj0C_UnderwaterWoodenGround:
.Main:
;$23B2BE
	LDY.b #$00
	LDA.b [!RAM_SMB3_Level_LevelDataPtrLo],y
	STA.b $02
	LDA.b !RAM_SMB3_Level_LevelDataPtrLo
	CLC
	ADC.b #$01
	STA.b !RAM_SMB3_Level_LevelDataPtrLo
	LDA.b !RAM_SMB3_Level_LevelDataPtrHi
	ADC.b #$00
	STA.b !RAM_SMB3_Level_LevelDataPtrHi
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDA.w $0706
	PHA
	SEC
	SBC.b #$C0
	LSR
	LSR
	LSR
	LSR
	TAY
	LDX.w DATA_21A693,y
	PLA
	AND.b #$0F
	STA.b $03
	LDA.b $02
	STA.b $04
	LDY.w $0700
	LDA.w DATA_21A687,x
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	JSL.l CODE_23BEBB
	DEC.b $04
	BEQ.b CODE_23B316
CODE_23B305:
	LDA.w DATA_21A687+$01,x
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	JSL.l CODE_23BEBB
	DEC.b $04
	BNE.b CODE_23B305
CODE_23B316:
	LDA.w DATA_21A687+$02,x
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	LDA.b $00
	STA.b $2E
	LDA.b $01
	STA.b $2F
	LDA.w $0700
	CLC
	ADC.b #$10
	STA.w $0700
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	STA.b $01
	DEC.b $03
	BMI.b CODE_23B368
	LDA.b $02
	STA.b $04
	LDA.w DATA_21A68D,x
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	JSL.l CODE_23BEBB
	DEC.b $04
	BEQ.b CODE_23B363
CODE_23B352:
	LDA.w DATA_21A68D+$01,x
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	JSL.l CODE_23BEBB
	DEC.b $04
	BNE.b CODE_23B352
CODE_23B363:
	LDA.w DATA_21A68D+$02,x
	STA.b [$2E],y
CODE_23B368:
	RTL

;--------------------------------------------------------------------

CODE_23B369:
	RTL

;--------------------------------------------------------------------

CODE_23B36A:
	TYA
	CLC
	ADC.b #$10
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	RTS

;--------------------------------------------------------------------

; Todo: Unreferrenced routine.

CODE_23B376:
	LDA.b $05
	STA.b $2F
	LDY.w $0700
	INY
	TYA
	AND.b #$0F
	BNE.b CODE_23B3B4
	LDY.b #$00
	LDA.b $0E
	AND.b #$10
	BEQ.b CODE_23B38C
	INY
CODE_23B38C:
	STY.b $09
	LDA.b $2E
	CLC
	ADC.b #$B0
	STA.b $2E
	LDA.b $2F
	ADC.b $09
	STA.b $2F
	STA.b $05
	LDA.b $0F
	AND.b #$F0
	LSR
	LSR
	LSR
	TAY
	INY
	INY
	LDA.w DATA_218200+$01,y
	STA.b $04
	INC.b $04
	LDA.w $0700
	AND.b #$F0
	TAY
CODE_23B3B4:
	STY.w $0700
	RTS

;--------------------------------------------------------------------

CODE_23B3B8:
	LDX.w $0706
	LDY.w $0700
	LDA.w DATA_21A69B,x
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	PHX
	LDX.b #$00
	CMP.b #$33
	BEQ.b CODE_23B3E5
	CMP.b #$35
	BEQ.b CODE_23B3E4
	CMP.b #$A7
	BEQ.b CODE_23B3E3
	CMP.b #$AC
	BEQ.b CODE_23B3E2
	CMP.b #$A9
	BEQ.b CODE_23B3E1
	JMP.w CODE_23B48E

CODE_23B3E1:
	INX
CODE_23B3E2:
	INX
CODE_23B3E3:
	INX
CODE_23B3E4:
	INX
CODE_23B3E5:
	LDA.b $30
	STA.b $DA
	STA.b $DD
	REP.b #$20
	LDA.b $2E
	SEC
	SBC.w #$000F
	STA.b $D8
	CLC
	ADC.w #$0020
	STA.b $DB
	SEP.b #$20
	PHY
	INY
	TYA
	AND.b #$0F
	BNE.b CODE_23B417
	REP.b #$21
	LDA.b $D8
	ADC.w #$01A0
	STA.b $D8
	LDA.b $DB
	CLC
	ADC.w #$01A0
	STA.b $DB
	SEP.b #$20
CODE_23B417:
	PLY
	LDA.b [$D8],y
	CMP.b #$34
	BEQ.b CODE_23B43F
	LDA.b [$DB],y
	CMP.b #$9A
	BEQ.b CODE_23B433
	CMP.b #$26
	BEQ.b CODE_23B433
	DEY
	DEY
	LDA.b [$D8],y
	CMP.b #$A0
	BNE.b CODE_23B472
	INY
	BRA.b CODE_23B44A

CODE_23B433:
	REP.b #$20
	LDA.b $DB
	SEC
	SBC.w #$0011
	STA.b $D8
	SEP.b #$20
CODE_23B43F:
	REP.b #$21
	LDA.b $D8
	ADC.w #$0010
	STA.b $D8
	SEP.b #$20
CODE_23B44A:
	PHY
	INY
	TYA
	AND.b #$0F
	BNE.b CODE_23B45D
	REP.b #$20
	LDA.b $D8
	SEC
	SBC.w #$01A0
	STA.b $D8
	SEP.b #$20
CODE_23B45D:
	PLY
	LDA.l DATA_23B49E,x
	STA.b [$D8],y
	LDA.b $D9
	CLC
	ADC.b #$20
	STA.b $D9
	LDA.b #$01
	STA.b [$D8],y
	PLX
	BRA.b CODE_23B49D

CODE_23B472:
	REP.b #$20
	LDA.b $D8
	CLC
	ADC.w #$0020
	STA.b $D8
	SEP.b #$20
	LDA.b [$D8],y
	CMP.b #$9A
	BNE.b CODE_23B48E
	LDA.w $0350
	CMP.b #$1D
	BEQ.b CODE_23B48E
	INY
	BRA.b CODE_23B44A

CODE_23B48E:
	PLX
	LDA.b [$2E],y
	CMP.b #$0D
	BEQ.b CODE_23B49D
	CMP.b #$04
	BEQ.b CODE_23B49D
	JSL.l CODE_2AB73A
CODE_23B49D:
	RTL

DATA_23B49E:
	db $09,$0A,$02,$05,$04

;--------------------------------------------------------------------

CODE_23B4A3:
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	STZ.b $02
	LDA.w $0706
	PHA
	AND.b #$0F
	STA.b $03
	PLA
	SEC
	SBC.b #$10
	AND.b #$C0
	CLC
	ROL
	ROL
	ROL
	TAX
CODE_23B4C0:
	LDY.w $0700
	LDA.b $02
	STA.b $04
	BEQ.b CODE_23B4E5
CODE_23B4C9:
	TXA
	BNE.b CODE_23B4D2
	JSL.l CODE_2AB73A
	BRA.b CODE_23B4D8

CODE_23B4D2:
	LDA.b [$2E],y
	CMP.b #$04
	BEQ.b CODE_23B4DD
CODE_23B4D8:
	LDA.w DATA_21A6A7,x
	STA.b [$2E],y
CODE_23B4DD:
	JSL.l CODE_23BEBB
	DEC.b $04
	BNE.b CODE_23B4C9
CODE_23B4E5:
	LDA.w DATA_21A6AA,x
	STA.b [$2E],y
	JSL.l CODE_2A89DC
	LDA.b $00
	STA.b $2E
	LDA.b $01
	STA.b $2F
	LDA.w $0700
	CLC
	ADC.b #$10
	STA.w $0700
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	STA.b $01
	INC.b $02
	DEC.b $03
	BPL.b CODE_23B4C0
	RTL

;--------------------------------------------------------------------

CODE_23B50E:
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	STZ.b $02
	LDA.w $0706
	PHA
	AND.b #$0F
	STA.b $03
	PLA
	SEC
	SBC.b #$10
	AND.b #$C0
	CLC
	ROL
	ROL
	ROL
	TAX
CODE_23B52B:
	LDY.w $0700
	LDA.b $02
	STA.b $04
	LDA.w DATA_21A6AD,x
	STA.b [$2E],y
	JSL.l CODE_2A8AE2
	BRA.b CODE_23B55F

CODE_23B53D:
	REP.b #$21
	LDA.b $2E
	ADC.w #$2000
	STA.b $D8
	SEP.b #$20
	LDA.b $30
	STA.b $DA
	LDA.b [$D8],y
	BEQ.b CODE_23B55A
	LDA.b [$2E],y
	CMP.b #$02
	BEQ.b CODE_23B55F
	CMP.b #$09
	BEQ.b CODE_23B55F
CODE_23B55A:
	LDA.w DATA_21A6A7,x
	STA.b [$2E],y
CODE_23B55F:
	JSL.l CODE_23BEBB
	DEC.b $04
	BPL.b CODE_23B53D
	INC.b $02
	LDA.b $00
	STA.b $2E
	LDA.b $01
	STA.b $2F
	LDA.w $0700
	CLC
	ADC.b #$0F
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	STA.b $01
	TYA
	AND.b #$0F
	CMP.b #$0F
	BNE.b CODE_23B5A2
	REP.b #$20
	LDA.b $2E
	SEC
	SBC.w #$01B0
	STA.b $2E
	STA.b $00
	SEP.b #$20
	TYA
	CLC
	ADC.b #$10
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	STA.b $01
CODE_23B5A2:
	STY.w $0700
	DEC.b $03
	BPL.b CODE_23B52B
	RTL

;--------------------------------------------------------------------

CODE_23B5AA:
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDA.w $0706
	PHA
	AND.b #$0F
	STA.b $02
	PLA
	SEC
	SBC.b #$10
	AND.b #$C0
	CLC
	ROL
	ROL
	ROL
	TAX
CODE_23B5C5:
	LDY.w $0700
	LDA.b $02
	STA.b $04
	LDA.w DATA_21A6B0,x
	STA.b [$2E],y
	TXA
	BEQ.b CODE_23B5DF
	JSL.l CODE_2A881E
	BRA.b CODE_23B5DF

CODE_23B5DA:
	LDA.w DATA_21A6A7,x
	STA.b [$2E],y
CODE_23B5DF:
	JSL.l CODE_23BEBB
	DEC.b $04
	BPL.b CODE_23B5DA
	LDA.b $00
	STA.b $2E
	LDA.b $01
	STA.b $2F
	LDA.w $0700
	CLC
	ADC.b #$10
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	STA.b $01
	INY
	TYA
	AND.b #$0F
	BNE.b CODE_23B617
	REP.b #$20
	LDA.b $2E
	CLC
	ADC.w #$01B0
	STA.b $2E
	STA.b $00
	SEP.b #$20
	DEY
	TYA
	AND.b #$F0
	TAY
CODE_23B617:
	STY.w $0700
	DEC.b $02
	BMI.b CODE_23B621
	JMP.w CODE_23B5C5

CODE_23B621:
	RTL

;--------------------------------------------------------------------

CODE_23B622:
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDA.w $0706
	PHA
	AND.b #$0F
	STA.b $02
	PLA
	SEC
	SBC.b #$10
	AND.b #$C0
	CLC
	ROL
	ROL
	ROL
	TAX
CODE_23B63D:
	LDY.w $0700
	LDA.b $02
	STA.b $04
	BEQ.b CODE_23B666
CODE_23B646:
	REP.b #$21
	LDA.b $2E
	ADC.w #$2000
	STA.b $D8
	SEP.b #$20
	LDA.b $30
	STA.b $DA
	LDA.b [$D8],y
	BNE.b CODE_23B65E
	LDA.w DATA_21A6A7,x
	STA.b [$2E],y
CODE_23B65E:
	JSL.l CODE_23BEBB
	DEC.b $04
	BNE.b CODE_23B646
CODE_23B666:
	LDA.w DATA_21A6B3,x
	STA.b [$2E],y
	TXA
	BEQ.b CODE_23B67A
	PHX
	LDX.b #$00
	JSL.l CODE_2A8844
	JSL.l CODE_2A87B2
	PLX
CODE_23B67A:
	LDA.b $00
	STA.b $2E
	LDA.b $01
	STA.b $2F
	LDA.w $0700
	CLC
	ADC.b #$10
	STA.w $0700
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	STA.b $01
	DEC.b $02
	BPL.b CODE_23B63D
	RTL

;--------------------------------------------------------------------

CODE_23B698:
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDA.b #$00
	STA.b $02
	LDA.w $0706
	PHA
	AND.b #$0F
	STA.b $03
	PLA
	SEC
	SBC.b #$10
	AND.b #$C0
	CLC
	ROL
	ROL
	ROL
	TAX
CODE_23B6B7:
	LDY.w $0700
	LDA.b $02
	STA.b $04
	BEQ.b CODE_23B6DF
CODE_23B6C0:
	LDA.w DATA_21A6A7,x
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	TXA
	BEQ.b CODE_23B6D2
	LDA.b [$2E],y
	CMP.b #$08
	BEQ.b CODE_23B6D7
CODE_23B6D2:
	LDA.w DATA_21A6A7,x
	STA.b [$2E],y
CODE_23B6D7:
	JSL.l CODE_23BEBB
	DEC.b $04
	BNE.b CODE_23B6C0
CODE_23B6DF:
	LDA.w DATA_21A6B6,x
	STA.b [$2E],y
	TXA
	BNE.b CODE_23B6EF
	PHX
	LDX.b #$04
	JSL.l CODE_2A89DC
	PLX
CODE_23B6EF:
	JSL.l CODE_23BEBB
	LDA.w DATA_21A6B9,x
	STA.b [$2E],y
	CMP.b #$9F
	BNE.b CODE_23B700
	JSL.l CODE_2A89DC
CODE_23B700:
	LDA.b $00
	STA.b $2E
	LDA.b $01
	STA.b $2F
	LDA.w $0700
	CLC
	ADC.b #$10
	STA.w $0700
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	STA.b $01
	INC.b $02
	DEC.b $03
	BPL.b CODE_23B6B7
	RTL

;--------------------------------------------------------------------

CODE_23B720:
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDA.b #$00
	STA.b $02
	LDA.w $0706
	PHA
	AND.b #$0F
	STA.b $03
	PLA
	SEC
	SBC.b #$10
	AND.b #$C0
	CLC
	ROL
	ROL
	ROL
	TAX
CODE_23B73F:
	LDY.w $0700
	LDA.b $02
	STA.b $04
	LDA.w DATA_21A6BC,x
	STA.b [$2E],y
	CMP.b #$9C
	BNE.b CODE_23B757
	PHX
	LDX.b #$03
	JSL.l CODE_2A8AE2
	PLX
CODE_23B757:
	JSL.l CODE_23BEBB
	LDA.w DATA_21A6BF,x
	STA.b [$2E],y
	CMP.b #$9D
	BNE.b CODE_23B795
	JSL.l CODE_2A87B2
	BRA.b CODE_23B795

CODE_23B76A:
	REP.b #$21
	LDA.b $2E
	ADC.w #$2000
	STA.b $D8
	SEP.b #$20
	LDA.b $30
	STA.b $DA
	LDA.b [$D8],y
	BEQ.b CODE_23B787
	LDA.b [$2E],y
	CMP.b #$02
	BEQ.b CODE_23B78C
	CMP.b #$07
	BEQ.b CODE_23B78C
CODE_23B787:
	LDA.w DATA_21A6A7,x
	STA.b [$2E],y
CODE_23B78C:
	JSL.l CODE_23BEBB
	LDA.w DATA_21A6A7,x
	STA.b [$2E],y
CODE_23B795:
	JSL.l CODE_23BEBB
	DEC.b $04
	BPL.b CODE_23B76A
	LDA.b $00
	STA.b $2E
	LDA.b $01
	STA.b $2F
	LDA.w $0700
	CLC
	ADC.b #$0E
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	STA.b $01
	TYA
	AND.b #$0F
	CMP.b #$0E
	BCC.b CODE_23B7D7
	LDA.b $2E
	SEC
	SBC.b #$B0
	STA.b $2E
	STA.b $00
	LDA.b $2F
	SBC.b #$01
	STA.b $2F
	TYA
	CLC
	ADC.b #$10
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	STA.b $01
CODE_23B7D7:
	STY.w $0700
	INC.b $02
	DEC.b $03
	BMI.b CODE_23B7E3
	JMP.w CODE_23B73F

CODE_23B7E3:
	RTL

;--------------------------------------------------------------------

CODE_23B7E4:
	REP.b #$20
	LDA.b $2E
	STA.b $00
	SEP.b #$20
	LDA.w $0706
	PHA
	AND.b #$0F
	STA.b $02
	PLA
	SEC
	SBC.b #$10
	AND.b #$C0
	CLC
	ROL
	ROL
	ROL
	TAX
CODE_23B7FF:
	LDY.w $0700
	LDA.b $02
	STA.b $04
	LDA.w DATA_21A6C2,x
	STA.b [$2E],y
	JSL.l CODE_2A8776
	JSL.l CODE_23BEBB
	LDA.w DATA_21A6C5,x
	STA.b [$2E],y
	BRA.b CODE_23B828

CODE_23B81A:
	LDA.w DATA_21A6A7,x
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	LDA.w DATA_21A6A7,x
	STA.b [$2E],y
CODE_23B828:
	JSL.l CODE_23BEBB
	DEC.b $04
	BPL.b CODE_23B81A
	REP.b #$20
	LDA.b $00
	STA.b $2E
	SEP.b #$20
	LDA.w $0700
	CLC
	ADC.b #$10
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	STA.b $01
	INY
	INY
	TYA
	AND.b #$0F
	CMP.b #$02
	BCS.b CODE_23B863
	REP.b #$21
	LDA.b $2E
	ADC.w #$01B0
	STA.b $2E
	STA.b $00
	SEP.b #$20
	DEY
	DEY
	TYA
	AND.b #$F1
	TAY
CODE_23B863:
	STY.w $0700
	DEC.b $02
	BPL.b CODE_23B7FF
	RTL

;--------------------------------------------------------------------

CODE_23B86B:
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDA.w $0706
	PHA
	AND.b #$0F
	STA.b $02
	PLA
	SEC
	SBC.b #$10
	AND.b #$C0
	CLC
	ROL
	ROL
	ROL
	TAX
CODE_23B886:
	LDY.w $0700
	LDA.b $02
	STA.b $04
	BEQ.b CODE_23B8A5
CODE_23B88F:
	LDA.w DATA_21A6A7,x
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	LDA.w DATA_21A6A7,x
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	DEC.b $04
	BNE.b CODE_23B88F
CODE_23B8A5:
	LDA.w DATA_21A6C8,x
	STA.b [$2E],y
	CPX.b #$01
	BNE.b CODE_23B8B2
	JSL.l CODE_2A87B2
CODE_23B8B2:
	JSL.l CODE_23BEBB
	LDA.w DATA_21A6CB,x
	STA.b [$2E],y
	CMP.b #$A5
	BNE.b CODE_23B8C7
	PHX
	LDX.b #$01
	JSL.l CODE_2A8844
	PLX
CODE_23B8C7:
	LDA.b $00
	STA.b $2E
	LDA.b $01
	STA.b $2F
	LDA.w $0700
	CLC
	ADC.b #$10
	STA.w $0700
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	STA.b $01
	DEC.b $02
	BPL.b CODE_23B886
	RTL

;--------------------------------------------------------------------

CODE_23B8E5:
	LDA.w $0706
	PHA
	AND.b #$0F
	STA.b $00
	PLA
	SEC
	SBC.b #$D0
	LSR
	LSR
	LSR
	LSR
	TAX
	LDY.w $0700
CODE_23B8F9:
	LDA.w DATA_21A6CE,x
	STA.b [$2E],y
	TXA
	BNE.b CODE_23B932
	PHY
	REP.b #$20
	LDA.b $2E
	STA.b $D8
	SEP.b #$20
	LDA.b $30
	STA.b $DA
	TYA
	CLC
	ADC.b #$0F
	TAY
	LDA.b [$D8],y
	CMP.b #$25
	BEQ.b CODE_23B921
	CMP.b #$26
	BEQ.b CODE_23B921
	CMP.b #$33
	BNE.b CODE_23B931
CODE_23B921:
	INY
	LDA.b #$09
	STA.b [$D8],y
	LDA.b $D9
	CLC
	ADC.b #$20
	STA.b $D9
	LDA.b #$01
	STA.b [$D8],y
CODE_23B931:
	PLY
CODE_23B932:
	JSL.l CODE_2AB73A
	TYA
	CLC
	ADC.b #$10
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	DEC.b $00
	BPL.b CODE_23B8F9
	RTL

;--------------------------------------------------------------------

CODE_23B946:
	LDA.w $0706
	PHA
	AND.b #$0F
	STA.b $00
	PLA
	SEC
	SBC.b #$D0
	LSR
	LSR
	LSR
	LSR
	CLC
	ADC.b #$03
	TAX
	LDY.w $0700
	JMP.w CODE_23B8F9

;--------------------------------------------------------------------

CODE_23B960:
	LDY.b #$00
	LDA.b [!RAM_SMB3_Level_LevelDataPtrLo],y
	STA.b $02
	LDA.b !RAM_SMB3_Level_LevelDataPtrLo
	CLC
	ADC.b #$01
	STA.b !RAM_SMB3_Level_LevelDataPtrLo
	LDA.b !RAM_SMB3_Level_LevelDataPtrHi
	ADC.b #$00
	STA.b !RAM_SMB3_Level_LevelDataPtrHi
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDA.w $0706
	PHA
	AND.b #$0F
	STA.b $04
	PLA
	SEC
	SBC.b #$40
	LSR
	LSR
	LSR
	LSR
	TAX
	LDY.w $0700
	LDA.b $02
	STA.b $03
CODE_23B993:
	CPX.b #$03
	BCS.b CODE_23B9C4
	REP.b #$21
	LDA.b $2E
	ADC.w #$2000
	STA.b $D8
	SEP.b #$20
	LDA.b $30
	STA.b $DA
	LDA.b [$D8],y
	BEQ.b CODE_23B9C4
	LDA.b [$2E],y
	CMP.b #$02
	BEQ.b CODE_23B9D9
	CMP.b #$04
	BEQ.b CODE_23B9D9
	CMP.b #$05
	BEQ.b CODE_23B9D9
	CMP.b #$07
	BEQ.b CODE_23B9D9
	CMP.b #$09
	BEQ.b CODE_23B9D9
	CMP.b #$0A
	BEQ.b CODE_23B9D9
CODE_23B9C4:
	JSL.l CODE_2AB73A
	LDA.w DATA_21A6D4,x
	STA.b [$2E],y
	CMP.b #$37
	BEQ.b CODE_23B9D9
	CMP.b #$AB
	BEQ.b CODE_23B9D9
	JSL.l CODE_2A892C
CODE_23B9D9:
	JSL.l CODE_23BEBB
	DEC.b $03
	LDA.b $03
	CMP.b #$FF
	BNE.b CODE_23B993
	BRA.b CODE_23BA0F

CODE_23B9E7:
	REP.b #$21
	LDA.b $2E
	ADC.w #$2000
	STA.b $D8
	SEP.b #$20
	LDA.b $30
	STA.b $DA
	LDA.b [$D8],y
	BNE.b CODE_23BA03
	LDA.w DATA_21A6DA,x
	STA.b [$2E],y
	JSL.l CODE_2AB73A
CODE_23BA03:
	JSL.l CODE_23BEBB
	DEC.b $03
	LDA.b $03
	CMP.b #$FF
	BNE.b CODE_23B9E7
CODE_23BA0F:
	LDA.b $00
	STA.b $2E
	LDA.b $01
	STA.b $2F
	LDA.w $0700
	CLC
	ADC.b #$10
	STA.w $0700
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	STA.b $01
	LDA.b $02
	STA.b $03
	DEC.b $04
	BPL.b CODE_23B9E7
	RTL

;--------------------------------------------------------------------

CODE_23BA32:
	LDY.b #$00
	LDA.b [!RAM_SMB3_Level_LevelDataPtrLo],y
	STA.b $02
	LDA.b !RAM_SMB3_Level_LevelDataPtrLo
	CLC
	ADC.b #$01
	STA.b !RAM_SMB3_Level_LevelDataPtrLo
	LDA.b !RAM_SMB3_Level_LevelDataPtrHi
	ADC.b #$00
	STA.b !RAM_SMB3_Level_LevelDataPtrHi
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDA.w $0706
	SEC
	SBC.b #$A0
	LSR
	LSR
	LSR
	LSR
	TAX
	LDA.w $0706
	AND.b #$0F
	STA.b $04
CODE_23BA5F:
	LDA.b $02
	STA.b $03
	LDY.w $0700
	LDA.b $04
	BEQ.b CODE_23BAD0
CODE_23BA6A:
	REP.b #$21
	LDA.b $2E
	ADC.w #$2000
	STA.b $D8
	LDA.b $2E
	SEC
	SBC.w #$0010
	STA.b $DB
	SEP.b #$20
	LDA.b $30
	STA.b $DA
	STA.b $DD
	LDA.b [$DB],y
	CMP.b #$26
	BEQ.b CODE_23BA97
	LDA.b [$D8],y
	BEQ.b CODE_23BA97
	LDA.b [$2E],y
	CMP.b #$02
	BEQ.b CODE_23BAA0
	CMP.b #$04
	BEQ.b CODE_23BAA0
CODE_23BA97:
	LDA.w DATA_21A6E0,x
	STA.b [$2E],y
	JSL.l CODE_2AB73A
CODE_23BAA0:
	JSL.l CODE_23BEBB
	DEC.b $03
	LDA.b $03
	CMP.b #$FF
	BNE.b CODE_23BA6A
	LDA.b $00
	STA.b $2E
	LDA.b $01
	STA.b $2F
	LDA.w $0700
	CLC
	ADC.b #$10
	STA.w $0700
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	STA.b $01
	DEC.b $04
	BNE.b CODE_23BA5F
	LDA.b $02
	STA.b $03
	LDY.w $0700
CODE_23BAD0:
	PHY
	REP.b #$20
	LDA.b $2E
	STA.b $D8
	SEP.b #$20
CODE_23BAD9:
	LDA.w DATA_21A6E3,x
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	JSL.l CODE_2A886F
	JSL.l CODE_23BEBB
	DEC.b $03
	LDA.b $03
	CMP.b #$FF
	BNE.b CODE_23BAD9
	PLY
	LDA.b [$D8],y
	CMP.b #$F4
	BEQ.b CODE_23BAFD
	CMP.b #$A6
	BNE.b CODE_23BB31
CODE_23BAFD:
	REP.b #$21
	LDA.b $D8
	ADC.w #$000F
	STA.b $D8
	SEP.b #$20
	LDA.b [$D8],y
	CMP.b #$F8
	BEQ.b CODE_23BB16
	CMP.b #$AA
	BEQ.b CODE_23BB16
	CMP.b #$BF
	BNE.b CODE_23BB31
CODE_23BB16:
	REP.b #$20
	LDA.b $D8
	SEC
	SBC.w #$0010
	STA.b $D8
	SEP.b #$20
	LDA.b #$06
	STA.b [$D8],y
	LDA.b $D9
	CLC
	ADC.b #$20
	STA.b $D9
	LDA.b #$01
	STA.b [$D8],y
CODE_23BB31:
	RTL

;--------------------------------------------------------------------

CODE_23BB32:
	LDY.b #$00
	LDA.b [!RAM_SMB3_Level_LevelDataPtrLo],y
	STA.b $02
	LDA.b !RAM_SMB3_Level_LevelDataPtrLo
	CLC
	ADC.b #$01
	STA.b !RAM_SMB3_Level_LevelDataPtrLo
	LDA.b !RAM_SMB3_Level_LevelDataPtrHi
	ADC.b #$00
	STA.b !RAM_SMB3_Level_LevelDataPtrHi
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDA.w $0706
	PHA
	SEC
	SBC.b #$10
	LSR
	LSR
	LSR
	LSR
	TAX
	PLA
	AND.b #$0F
	STA.b $03
	LDY.w $0700
	LDA.b $02
	STA.b $04
	LDA.b $03
	BEQ.b CODE_23BB83
CODE_23BB69:
	LDA.w DATA_21A6E6,x
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	DEC.b $04
	LDA.b $04
	CMP.b #$FF
	BNE.b CODE_23BB69
	BRA.b CODE_23BB90

CODE_23BB7C:
	LDA.b $02
	STA.b $04
	LDY.w $0700
CODE_23BB83:
	LDA.w DATA_21A6E9,x
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	DEC.b $04
	BPL.b CODE_23BB83
CODE_23BB90:
	LDA.b $00
	STA.b $2E
	LDA.b $01
	STA.b $2F
	LDA.w $0700
	CLC
	ADC.b #$10
	STA.w $0700
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	STA.b $01
	DEC.b $03
	BPL.b CODE_23BB7C
	RTL

;--------------------------------------------------------------------

CODE_23BBAE:
	RTL

;--------------------------------------------------------------------

CODE_23BBAF:
	LDA.w $0706
	SEC
	SBC.b #$0D
	TAY
	LDX.w $0700
	LDA.b $0E
	AND.b #$10
	BNE.b CODE_23BBC3
	CPX.b #$C0
	BCC.b CODE_23BBCB
CODE_23BBC3:
	TXA
	SEC
	SBC.b #$C0
	TAX
	JMP.w CODE_23BBD6

CODE_23BBCB:
	LDA.w DATA_21A6EC,y
	JSL.l CODE_209809
	CPX.b #$00
	BNE.b CODE_23BBCB
CODE_23BBD6:
	LDA.w DATA_21A6EC,y
	JSL.l CODE_20986D
	INX
	CPX.b #$F0
	BNE.b CODE_23BBD6
	RTL

;--------------------------------------------------------------------

CODE_23BBE3:
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDA.w $0706
	AND.b #$0F
	STA.b $02
	LDA.b $0F
	LSR
	LSR
	LSR
	LSR
	STA.b $03
CODE_23BBFA:
	LDY.w $0700
CODE_23BBFD:
	LDA.b #$47
	STA.b [$2E],y
	TYA
	CLC
	ADC.b #$10
	TAY
	BCC.b CODE_23BC0E
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
CODE_23BC0E:
	LDA.b $04
	CMP.b $2F
	BNE.b CODE_23BBFD
	CPY.b #$B0
	BCC.b CODE_23BBFD
	LDA.b $00
	STA.b $2E
	LDA.b $01
	STA.b $2F
	LDY.w $0700
	INY
	TYA
	AND.b #$0F
	BNE.b CODE_23BC51
	LDA.w $0700
	AND.b #$F0
	TAY
	INC.b $03
	LDA.b $03
	ASL
	TAX
	LDA.w DATA_218200,x
	STA.b $2E
	STA.b $00
	LDA.w DATA_218200+$01,x
	STA.b $2F
	STA.b $01
	STA.b $04
	INC.b $04
	LDA.b $0E
	AND.b #$10
	BEQ.b CODE_23BC51
	INC.b $2F
	INC.b $01
CODE_23BC51:
	STY.w $0700
	DEC.b $02
	BPL.b CODE_23BBFA
	RTS

;--------------------------------------------------------------------

CODE_23BC59:
	LDA.w $0706
	AND.b #$0F
	STA.b $02
	LDA.b $30
	STA.b $DA
	LDY.w $0700
	LDA.b #$81
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	JSR.w CODE_23BC93
	BRA.b CODE_23BC7F

CODE_23BC74:
	LDA.b #$82
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	JSR.w CODE_23BC93
CODE_23BC7F:
	JSL.l CODE_23BEBB
	DEC.b $02
	BNE.b CODE_23BC74
	LDA.b #$83
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	JSR.w CODE_23BC93
	RTL

CODE_23BC93:
	REP.b #$20
	LDA.b $2E
	CLC
	ADC.w #$0010
	STA.b $D8
	SEP.b #$20
	LDA.b [$D8],y
	CMP.b #$9A
	BNE.b CODE_23BCB4
	LDA.b #$0D
	STA.b [$D8],y
	LDA.b $D9
	CLC
	ADC.b #$20
	STA.b $D9
	LDA.b #$01
	STA.b [$D8],y
CODE_23BCB4:
	RTS

;--------------------------------------------------------------------

CODE_23BCB5:
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDA.w $0706
	AND.b #$0F
	STA.b $02
	LDY.w $0700
	LDX.b #$00
CODE_23BCC9:
	LDA.b $02
	STA.b $03
	LDA.w DATA_21A6EF,x
	STA.b [$2E],y
	BRA.b CODE_23BCD9

CODE_23BCD4:
	LDA.w DATA_21A6F1,x
	STA.b [$2E],y
CODE_23BCD9:
	JSL.l CODE_23BEBB
	DEC.b $03
	BNE.b CODE_23BCD4
	LDA.w DATA_21A6F3,x
	STA.b [$2E],y
	LDA.b $00
	STA.b $2E
	LDA.b $01
	STA.b $2F
	LDA.w $0700
	CLC
	ADC.b #$10
	STA.w $0700
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	STA.b $01
	INX
	CPX.b #$02
	BNE.b CODE_23BCC9
	RTL

;--------------------------------------------------------------------

CODE_23BD06:
	LDA.w $0706
	PHA
	SEC
	SBC.b #$10
	AND.b #$F0
	LSR
	LSR
	LSR
	LSR
	TAX
	BNE.b CODE_23BD2F
	PLA
	AND.b #$0F
	STA.b $03
	LDY.w $0700
CODE_23BD1E:
	LDA.w DATA_21A6F5,x
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	JSL.l CODE_23BEBB
	DEC.b $03
	BPL.b CODE_23BD1E
CODE_23BD2F:
	RTL

;--------------------------------------------------------------------

CODE_23BD30:
	LDX.w $0706
	LDY.w $0700
	LDA.w DATA_21A6F7,x
	STA.b [$2E],y
	RTL

;--------------------------------------------------------------------

; Note: I don't know what this routine is, but I do know it's called when loading 1-5.

CODE_23BD3C:
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDA.w $0706
	ASL
	ASL
	ASL
	STA.b $04
CODE_23BD4C:
	LDA.w $0700
	STA.b $05
	STZ.b $06
	LDA.b $04
	ASL
	TAX
	LDA.w DATA_21A817,x
	STA.b $02
	LDA.w DATA_21A817+$01,x
	STA.b $03
CODE_23BD61:
	LDY.b $05
	REP.b #$21
	LDA.b $2E
	ADC.w #$2000
	STA.b $D8
	SEP.b #$20
	LDA.b $30
	STA.b $DA
	LDA.b [$D8],y
	BEQ.b CODE_23BD84
	LDA.b [$2E],y
	CMP.b #$02
	BEQ.b CODE_23BDAD
	CMP.b #$04
	BEQ.b CODE_23BDAD
	CMP.b #$06
	BEQ.b CODE_23BDAD
CODE_23BD84:
	LDY.b $06
	LDA.b ($02),y
	LDY.b $05
	REP.b #$21
	LDA.b $2E
	ADC.w #$2000
	STA.b $D8
	SEP.b #$20
	LDA.b [$D8],y
	BNE.b CODE_23BDA1
	LDY.b $06
	LDA.b ($02),y
	LDY.b $05
	STA.b [$2E],y
CODE_23BDA1:
	CMP.b #$E3
	BNE.b CODE_23BDAD
	PHX
	LDX.b #$02
	JSL.l CODE_2A89DC
	PLX
CODE_23BDAD:
	CMP.b #$99
	BNE.b CODE_23BDB9
	PHX
	LDX.b #$02
	JSL.l CODE_2A8AE2
	PLX
CODE_23BDB9:
	CMP.b #$A8
	BEQ.b CODE_23BDC1
	CMP.b #$F6
	BNE.b CODE_23BDC9
CODE_23BDC1:
	PHX
	LDX.b #$00
	JSL.l CODE_2A88E8
	PLX
CODE_23BDC9:
	CMP.b #$A1
	BNE.b CODE_23BDD5
	PHX
	LDX.b #$00
	JSL.l CODE_2A8844
	PLX
CODE_23BDD5:
	CMP.b #$A0
	BNE.b CODE_23BDDD
	JSL.l CODE_2A881E
CODE_23BDDD:
	CMP.b #$26
	BNE.b CODE_23BDE5
	JSL.l CODE_2A892C
CODE_23BDE5:
	CMP.b #$A7
	BNE.b CODE_23BE14
	LDA.b $30
	STA.b $DA
	REP.b #$20
	LDA.b $2E
	CLC
	ADC.w #$000F
	STA.b $D8
	SEP.b #$20
	LDA.b [$D8],y
	CMP.b #$A7
	BEQ.b CODE_23BE03
	CMP.b #$9A
	BNE.b CODE_23BE14
CODE_23BE03:
	INC.b $D8
	LDA.b #$02
	STA.b [$D8],y
	LDA.b $D9
	CLC
	ADC.b #$20
	STA.b $D9
	LDA.b #$01
	STA.b [$D8],y
CODE_23BE14:
	TYA
	CLC
	ADC.b #$10
	STA.b $05
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	INC.b $06
	LDA.b $06
	CMP.b #$06
	BEQ.b CODE_23BE2B
	JMP.w CODE_23BD61

CODE_23BE2B:
	LDA.b $00
	STA.b $2E
	LDA.b $01
	STA.b $2F
	LDY.w $0700
	JSL.l CODE_23BEBB
	STY.w $0700
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	INC.b $04
	LDA.b $04
	AND.b #$07
	BEQ.b CODE_23BE50
	JMP.w CODE_23BD4C

CODE_23BE50:
	RTL

;--------------------------------------------------------------------

; Note: Some routine called in the throne rooms.

CODE_23BE51:
	LDY.w $0700
	LDA.b #DATA_21A917
	STA.b $00
	LDA.b #DATA_21A917>>8
	STA.b $01
CODE_23BE5C:
	LDA.b ($00),y
	CMP.b #$FF
	BEQ.b CODE_23BE70
	STA.b [$2E],y
	INY
	CPY.b #$00
	BNE.b CODE_23BE6D
	INC.b $2F
	INC.b $01
CODE_23BE6D:
	INX
	BRA.b CODE_23BE5C

CODE_23BE70:
	RTL

;--------------------------------------------------------------------

CODE_23BE71:
	STX.b $0B
	STY.b $0C
	LDA.b $0E
	AND.b #$10
	LSR
	LSR
	LSR
	LSR
	STA.b $0D
	LDY.b $0F
	LDA.w $0706
	AND.b #$F0
	BEQ.b CODE_23BE94
	LDA.w $0706
	AND.b #$0F
	SEC
	SBC.b $02
	CLC
	ADC.b $0F
	TAY
CODE_23BE94:
	TYA
	AND.b #$F8
	LSR
	LSR
	ORA.b $0D
	STA.b $0D
	LDA.w $0415
	BEQ.b CODE_23BEA9
	LDA.b $0D
	CLC
	ADC.b #$40
	STA.b $0D
CODE_23BEA9:
	LDA.b $0C
	AND.b #$07
	TAX
	LDY.b $0D
	LDA.w !RAM_SMB3_Level_ItemMemoryBits,y
	AND.w DATA_21AAA8,x
	LDX.b $0B
	LDY.b $0C
	RTS

;--------------------------------------------------------------------

CODE_23BEBB:
	INY
	TYA
	AND.b #$0F
	BNE.b CODE_23BED3
	REP.b #$20
	LDA.b $2E
	CLC
	ADC.w #$01B0
	STA.b $2E
	SEP.b #$20
	LDA.w $0700
	AND.b #$F0
	TAY
CODE_23BED3:
	RTL

;--------------------------------------------------------------------

; Note: Screen exit object?

CODE_23BED4:
	LDA.b $0E
	AND.b #$0F
	TAY
	LDA.b $0F
	STA.w !RAM_SMB3_Level_SubscreenExitProperties,y
	LDA.w $0706
	STA.w !RAM_SMB3_Level_SubscreenExitEntranceXPosition,y
	RTL

%FREE_BYTES(NULLROM, 27, $FF)

;--------------------------------------------------------------------

CODE_23BF00:
	LDA.b !RAM_SMB3_Level_Player_OnScreenYPos
	CMP.b #$B8
	BCS.b CODE_23BF7D
	LDA.w $1A45
	BNE.b CODE_23BF65
	STA.b $00
	LDA.b !RAM_SMB3_Level_Player_CurrentPowerUp
	BEQ.b CODE_23BF16
	LDA.w !RAM_SMB3_Level_Player_DuckingFlag
	BEQ.b CODE_23BF1A
CODE_23BF16:
	LDA.b #$0A
	STA.b $00
CODE_23BF1A:
	LDA.b #$01
	STA.w !RAM_SMB3_Level_SplashSpr_DespawnTimer
	LSR
	STA.w !RAM_SMB3_Level_SplashSpr_Table7E1F99
	LDA.w $05FC
	BEQ.b CODE_23BF38
	LDA.b !RAM_SMB3_Level_Player_OnScreenYPos
	CMP.b #$80
	BCC.b CODE_23BF38
	LDA.b #$00
	XBA
	LDA.b #$93
	STA.w !RAM_SMB3_Level_SplashSpr_Table7E1F99
	BNE.b CODE_23BF53
CODE_23BF38:
	STZ.b $D9
	LDA.b $00
	STA.b $D8
	BPL.b CODE_23BF42
	DEC.b $D9
CODE_23BF42:
	LDA.b !RAM_SMB3_Level_Player_YPosHi
	XBA
	LDA.b !RAM_SMB3_Level_Player_YPosLo
	REP.b #$20
	CLC
	ADC.b $D8
	AND.w #$FFF0
	CLC
	ADC.w #$0002
CODE_23BF53:
	SEP.b #$20
	STA.w !RAM_SMB3_Level_SplashSpr_YPosLo
	XBA
	STA.w !RAM_SMB3_Level_SplashSpr_YPosHi
	LDA.b !RAM_SMB3_Level_Player_XPosLo
	STA.w !RAM_SMB3_Level_SplashSpr_XPosLo
	LDA.b $43
	STA.b !RAM_SMB3_Level_SplashSpr_XPosHi
CODE_23BF65:
	LDA.b !RAM_SMB3_Level_Player_YSpeed
	BMI.b CODE_23BF7D
	LDA.b #$00
	STA.b !RAM_SMB3_Level_Player_YSpeed
	LDY.b $A6
	BEQ.b CODE_23BF73
	STA.b !RAM_SMB3_Level_Player_XSpeed
CODE_23BF73:
	LDY.b #$02
CODE_23BF75:
	LDA.w !RAM_SMB3_Level_BreathSpr_MovementTimer,y
	BEQ.b CODE_23BF7E
CODE_23BF7A:
	DEY
	BPL.b CODE_23BF75
CODE_23BF7D:
	RTL

CODE_23BF7E:
	LDA.w !RAM_SMB3_Global_RandomByte02,y
	ORA.b #$10
	STA.w !RAM_SMB3_Level_BreathSpr_MovementTimer,y
	LDA.b !RAM_SMB3_Level_Player_YPosLo
	ADC.w DATA_21E9FB,y
	STA.w !RAM_SMB3_Level_BreathSpr_YPosLo,y
	LDA.b !RAM_SMB3_Level_Player_YPosHi
	ADC.b #$00
	STA.w !RAM_SMB3_Level_BreathSpr_YPosHi,y
	LDA.b !RAM_SMB3_Level_Player_XPosLo
	ADC.w DATA_21E9FE,y
	STA.w !RAM_SMB3_Level_BreathSpr_XPosLo,y
	LDA.b !RAM_SMB3_Level_Player_XPosHi
	ADC.b #$00
	STA.w !RAM_SMB3_Level_BreathSpr_XPosHi,y
	JMP.w CODE_23BF7A

;--------------------------------------------------------------------

CODE_23BFA7:
	LDY.w !RAM_SMB3_Global_TilesetFromHeader
	LDA.w DATA_21E945,y
	STA.w $0560
	JSL.l CODE_23DF67
	JSR.w CODE_23C0CD
	JSR.w CODE_23C1E7
	LDA.w !RAM_SMB3_Global_TilesetFromHeader
	CMP.b #$07
	BEQ.b CODE_23BFCD
	LDA.w !RAM_SMB3_Level_FreezeTimeLimitFlag
	BEQ.b CODE_23BFD2
	LDA.w $0350
	CMP.b #$0B
	BNE.b CODE_23BFD2
CODE_23BFCD:
	STZ.w !RAM_SMB3_Overworld_UsedReserveStarFlag
	BRA.b CODE_23BFF7

CODE_23BFD2:
	LDA.w !RAM_SMB3_Overworld_UsedReserveStarFlag
	BEQ.b CODE_23BFF7
	LDA.w $1B41
	CMP.b #$D5
	BEQ.b CODE_23BFF7
	CMP.b #$09
	BEQ.b CODE_23BFF7
	DEC.w !RAM_SMB3_Overworld_UsedReserveStarFlag
	LDA.b #$E0
	STA.w !RAM_SMB3_Level_Player_StarPowerTimer
	STZ.w $02C7
	LDA.b #$03
	STA.w $02C6
	LDA.b #!Define_SMB3_LevelMusic_HaveStar
	STA.w !RAM_SMB3_Global_MusicCh1
CODE_23BFF7:
	LDA.w $055C
	AND.b #$F0
	SEC
	SBC.b #$90
	STA.w $055C
	JSR.w CODE_23C261
	LDA.w !RAM_SMB3_Level_Player_HurtTimer
	BEQ.b CODE_23C022
	LDA.l $7FC586
	BEQ.b CODE_23C022
	LDA.l $7FC586
	DEC
	STA.l $7FC586
	LDA.b #$02
	ORA.b !RAM_SMB3_Level_Player_DeathState
	STA.w !RAM_SMB3_Level_Player_FreezePlayerTimer
	BRA.b CODE_23C024

CODE_23C022:
	LDA.b !RAM_SMB3_Level_Player_DeathState
CODE_23C024:
	ORA.w $0571
	ORA.w !RAM_SMB3_Level_Player_SmokePuffAnimationTimer
	ORA.w !RAM_SMB3_Level_Player_FireFlowerGetPaletteAnimationTimer
	ORA.w !RAM_SMB3_Level_Player_SizeChangeAnimationTimer
	STA.w $009C
	BNE.b CODE_23C038
	INC.w $0565
CODE_23C038:
	LDA.w $0564
	CMP.b #$01
	BNE.b CODE_23C054
	LDA.w !RAM_SMB3_Global_PointsToGiveLo
	CLC
	ADC.b #$05
	STA.w !RAM_SMB3_Global_PointsToGiveLo
	INC.w !RAM_SMB3_Global_CoinsToGive
	LDA.l $7E3966
	INC
	STA.l $7E3966
CODE_23C054:
	LDA.b #$00
	STA.w !RAM_SMB3_Level_Player_BigInSmallSpaceFlag
	LDX.b #$07
CODE_23C05B:
	LDA.w $0510,x
	BEQ.b CODE_23C063
	DEC.w $0510,x
CODE_23C063:
	DEX
	BPL.b CODE_23C05B
	LDA.w !RAM_SMB3_Level_PSwitchTimer
	BEQ.b CODE_23C089
	CMP.b #$01
	BNE.b CODE_23C080
	LDY.b #!Define_SMB3_LevelMusic_HaveStar
	LDA.w !RAM_SMB3_Level_Player_StarPowerTimer
	CMP.b #$20
	BCS.b CODE_23C07B
	LDY.w $1062
CODE_23C07B:
	STY.w !RAM_SMB3_Global_MusicCh1
	BNE.b CODE_23C086
CODE_23C080:
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$03
	BNE.b CODE_23C089
CODE_23C086:
	DEC.w !RAM_SMB3_Level_PSwitchTimer
CODE_23C089:
	RTL

;--------------------------------------------------------------------

CODE_23C08A:
	JSL.l CODE_20E237
	RTS

;--------------------------------------------------------------------

; Note: Seems to be responsible for temporarily disabling the level timer (ex. During the player power up animation.

CODE_23C08F:
	STZ.w !RAM_SMB3_Level_TemporarilyDisableTimeLimitFlag
	JSL.l CODE_20E856
	LDA.w $0280
	BEQ.b CODE_23C09F
	STZ.b !RAM_SMB3_Global_ControllerHold1
	STZ.b !RAM_SMB3_Global_ControllerPress1
CODE_23C09F:
	LDA.w $0414
	CMP.b #$03
	BEQ.b CODE_23C0C6
	LDA.w $07BE
	CMP.b #$03
	BCS.b CODE_23C0C6
	LDA.w !RAM_SMB3_Level_Player_FreezePlayerTimer
	ORA.b !RAM_SMB3_Level_Player_DeathState
	ORA.w !RAM_SMB3_Level_Player_SmokePuffAnimationTimer
	ORA.w !RAM_SMB3_Level_Player_FireFlowerGetPaletteAnimationTimer
	ORA.w !RAM_SMB3_Level_Player_SizeChangeAnimationTimer
	ORA.w !RAM_SMB3_Level_Player_GoalWalkAnimationTimer
	ORA.w $0571
	ORA.w !RAM_SMB3_Level_Player_BoardAirshipAnimationState
	BEQ.b CODE_23C0CB
CODE_23C0C6:
	INC.w !RAM_SMB3_Level_TemporarilyDisableTimeLimitFlag
	PLA
	PLA
CODE_23C0CB:
	RTS

;--------------------------------------------------------------------

CODE_23C0CC:
	RTS

;--------------------------------------------------------------------

CODE_23C0CD:
	LDA.b $B9
	BEQ.b CODE_23C0D2
	RTS

CODE_23C0D2:
	STA.w $0561
	LDA.b #$50
	STA.b $C4
	STZ.b $C5
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.w $0747,x
	STA.b !RAM_SMB3_Level_Player_CurrentPowerUp
	JSR.w CODE_23C467
	LDA.b #$40
	STA.b $BD
	LDY.w $0426
	LDA.w DATA_21EA01,y
	STA.b !RAM_SMB3_Level_Player_XPosLo
	STA.b $B9
	JSR.w CODE_23C14C
	LDA.w !RAM_SMB3_Overworld_PlayerPowerUpPose
	CMP.b #$08
	BNE.b CODE_23C108
	LDA.b #$7F
	STA.w !RAM_SMB3_Global_FilledInPMeterSegments
	LDA.b #$FF
	STA.w !RAM_SMB3_Level_Player_FlightTimer
CODE_23C108:
	JSR.w CODE_23C1C9
CODE_23C10B:
	LDA.w !RAM_SMB3_Level_IsVerticalLevelFlag
	BEQ.b CODE_23C130
	LDY.b !RAM_SMB3_Level_Player_YPosHi
	LDA.w DATA_21CEED,y
	STA.w $0542
	LDA.w DATA_21CEFD,y
	STA.w $0543
	LDA.b !RAM_SMB3_Level_Player_YPosLo
	LDY.b !RAM_SMB3_Level_Player_YPosHi
	JSL.l CODE_209F99
	STY.b !RAM_SMB3_Level_Player_YPosHi
	STA.b !RAM_SMB3_Level_Player_YPosLo
	LDA.b #$01
	STA.w $0562
	RTS

CODE_23C130:
	LDA.w $0216
	STA.w $0543
	LDA.b $13
	STA.w $0542
	RTS

;--------------------------------------------------------------------

DATA_23C13C:
	dw CODE_23C173
	dw CODE_23C167
	dw CODE_23C174
	dw CODE_23C17B
	dw CODE_23C182
	dw CODE_23C189
	dw CODE_23C190
	dw CODE_23C19F

CODE_23C14C:
	PHB
	PHK
	PLB
	LDA.w !RAM_SMB3_Level_EntranceSettings
	ASL
	TAY
	LDA.w DATA_23C13C,y
	STA.b $00
	LDA.w DATA_23C13C+$01,y
	STA.b $01
	LDA.b #$00
	STA.w !RAM_SMB3_Level_EntranceSettings
	PLB
	JMP.w ($0000)

;--------------------------------------------------------------------

CODE_23C167:
	LDY.b !RAM_SMB3_Level_Player_CurrentPowerUp
	LDA.w DATA_21AF64,y
	AND.b #$02
	BNE.b CODE_23C173
	INC.w !RAM_SMB3_Level_EntranceSettings
CODE_23C173:
	RTS

;--------------------------------------------------------------------

CODE_23C174:
	LDA.b #$83
	LDY.b #$01
	JMP.w CODE_23C1BF

;--------------------------------------------------------------------

CODE_23C17B:
	LDA.b #$82
	LDY.b #$02
	JMP.w CODE_23C1BF

;--------------------------------------------------------------------

CODE_23C182:
	LDA.b #$80
	LDY.b #$03
	JMP.w CODE_23C1BF

;--------------------------------------------------------------------

CODE_23C189:
	LDA.b #$81
	LDY.b #$04
	JMP.w CODE_23C1BF

;--------------------------------------------------------------------

CODE_23C190:
	LDA.b #$01
	STA.w !RAM_SMB3_Level_Player_BoardAirshipAnimationState
	LDA.b #$06
	STA.w $0427
	LSR
	STA.w $0216
	RTS

;--------------------------------------------------------------------

CODE_23C19F:
	LDA.b #$04
	STA.w !RAM_SMB3_Level_Player_BoardAirshipAnimationState
	LDA.b #$40
	STA.b $BD
	STA.b $A6
	LDA.b #$90
	STA.b !RAM_SMB3_Level_Player_YSpeed
	STA.b !RAM_SMB3_Level_Player_XPosLo
	LDA.w $0216
	CLC
	ADC.b #$80
	STA.b !RAM_SMB3_Level_Player_YPosLo
	LDA.b #$00
	ADC.b #$00
	STA.b !RAM_SMB3_Level_Player_YPosHi
	RTS

;--------------------------------------------------------------------

CODE_23C1BF:
	STA.w $0571
	STY.w $0377
	JSL.l CODE_23C227
CODE_23C1C9:
	LDY.b #$01
	LDA.w !RAM_SMB3_Global_TilesetFromHeader
	CMP.b #$03
	BEQ.b CODE_23C1E3
	CMP.b #$0E
	BEQ.b CODE_23C1E3
	CMP.b #$05
	BNE.b CODE_23C1E1
	LDA.w $1E9E
	CMP.b #$02
	BEQ.b CODE_23C1E3
CODE_23C1E1:
	LDY.b #$00
CODE_23C1E3:
	STY.w $0563
	RTS

;--------------------------------------------------------------------

CODE_23C1E7:
	LDA.w $055F
	BEQ.b CODE_23C226
	LDA.b #$00
	STA.w $055F
	STA.w !RAM_SMB3_Level_RunScrollSpritesFlag
	STA.w $05FC
	STA.w $0569
	STA.w $0561
	JSR.w CODE_23C467
	JSR.w CODE_23C10B
	JSR.w CODE_23C1C9
	LDA.w !RAM_SMB3_Level_Player_BoardAirshipAnimationState
	BEQ.b CODE_23C215
	LDA.b #$00
	STA.b !RAM_SMB3_Level_Player_XSpeed
	STA.w !RAM_SMB3_Level_Player_SlidingXSpeed
	JSR.w CODE_23C19F
CODE_23C215:
	LDA.w !RAM_SMB3_Level_Player_SlidingXSpeed
	CMP.b #$06
	BNE.b CODE_23C21F
	JSR.w CODE_23C190
CODE_23C21F:
	JSL.l CODE_23C227
	PLA
	PLA
	RTL

CODE_23C226:
	RTS

;--------------------------------------------------------------------

CODE_23C227:
	LDA.w $0571
	BEQ.b CODE_23C260
	LDA.b #!Define_SMAS_Sound0060_IntoPipe
	STA.w !RAM_SMB3_Global_SoundCh1
	LDA.b !RAM_SMB3_Level_Player_XPosLo
	STA.b $52
	LDA.b !RAM_SMB3_Level_Player_YPosLo
	AND.b #$F0
	STA.b $53
	DEC.b $53
	LDA.w !RAM_SMB3_Level_IsVerticalLevelFlag
	BNE.b CODE_23C24D
	LDA.w $0216
	STA.w $0543
	LDA.b $13
	STA.w $0542
CODE_23C24D:
	LDA.w $0377
	BNE.b CODE_23C257
	LDA.b #$02
	STA.w $0377
CODE_23C257:
	AND.b #$0F
	TAY
	LDA.w DATA_21EA05,y
	STA.w $0510
CODE_23C260:
	RTL

;--------------------------------------------------------------------

CODE_23C261:
	LDA.w $0578
	BEQ.b CODE_23C2C2
	CMP.b #$0F
	BMI.b CODE_23C286
	CMP.b #$80
	BNE.b CODE_23C276
	INC.w !RAM_SMB3_Level_Player_InKuriboShoeFlag
	STZ.w !RAM_SMB3_Level_Player_IsTanookiStatueTimer
	BRA.b CODE_23C2BA

CODE_23C276:
	CMP.b #$40
	BEQ.b CODE_23C281
	LDA.b #$C0
	STA.w !RAM_SMB3_Level_Player_IsTanookiStatueTimer
	BNE.w CODE_23C2BA
CODE_23C281:
	INC.w !RAM_SMB3_Level_Player_IsSwimmingFlag
	BNE.b CODE_23C2BA
CODE_23C286:
	AND.b #$0F
	TAY
	LDA.b !RAM_SMB3_Level_Player_CurrentPowerUp
	CMP.b #$02
	BEQ.b CODE_23C293
	CMP.b #$03
	BNE.b CODE_23C2A2
CODE_23C293:
	LDA.w !RAM_SMB3_Level_TimerHundreds
	ORA.w !RAM_SMB3_Level_TimerTens
	ORA.w !RAM_SMB3_Level_TimerOnes
	BEQ.b CODE_23C29E
CODE_23C29E:
	LDA.b #$20
	BRA.b CODE_23C2A4

CODE_23C2A2:
	LDA.b #$00
CODE_23C2A4:
	STA.l $7FC586
	DEY
	STY.b !RAM_SMB3_Level_Player_CurrentPowerUp
	PHY
	PHX
	JSR.w CODE_23CC62
	LDA.b !RAM_SMB3_Level_Player_CurrentPowerUp
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	STA.w $0747,x
	PLX
	PLY
CODE_23C2BA:
	LDA.b #$00
	STA.w $0578
	JSR.w CODE_23C467
CODE_23C2C2:
	LDA.b !RAM_SMB3_Level_Player_DeathState
	ORA.w !RAM_SMB3_Level_Player_FreezePlayerTimer
	BNE.b CODE_23C33D
CODE_23C2C9:
	LDA.w $07BE
	CMP.b #$03
	BPL.b CODE_23C33D
	LDA.w !RAM_SMB3_Level_Player_IsAboveTopOfLevelFlag
	BNE.b CODE_23C2F0
	LDA.b !RAM_SMB3_Level_Player_OnScreenYPos
	AND.b #$F0
	CMP.b #$C0
	BNE.b CODE_23C2F0
	LDA.b #$00
	STA.b !RAM_SMB3_Level_Player_CurrentPowerUp
	JSL.l CODE_27A547
	LDA.b #$C0
	STA.w $0510
	LDA.b #$02
	STA.b !RAM_SMB3_Level_Player_DeathState
	BNE.b CODE_23C33D
CODE_23C2F0:
	LDA.w !RAM_SMB3_Global_EnableDebugModeFlag
	CMP.b #$80
	BEQ.b CODE_23C324
	LDA.w !RAM_SMB3_Level_FreezeTimeLimitFlag
	AND.b #$7F
	BNE.b CODE_23C33D
	LDA.w !RAM_SMB3_Level_TimerHundreds
	ORA.w !RAM_SMB3_Level_TimerTens
	ORA.w !RAM_SMB3_Level_TimerOnes
	BNE.b CODE_23C324
	JSL.l CODE_27A547
	LDA.b #$03
	STA.b !RAM_SMB3_Level_Player_DeathState
	LDA.b #$FF
	STA.b $52
	STA.b $53
CODE_23C317:
	LDA.b #$01
	STA.w $0578
	LDA.b #$50
	STA.w $0510
	JMP.w CODE_23C33D

CODE_23C324:
	LDA.b !RAM_SMB3_Level_Player_OnScreenXPos
	CMP.b #$F8
	BCC.b CODE_23C33D
	LDA.w !RAM_SMB3_Level_IsVerticalLevelFlag
	ORA.w !RAM_SMB3_Level_Player_GoalWalkAnimationTimer
	BNE.b CODE_23C33D
	JSL.l CODE_27A547
	LDA.b #$01
	STA.b !RAM_SMB3_Level_Player_DeathState
	JMP.w CODE_23C317

CODE_23C33D:
	JSR.w CODE_23C08F
	LDA.l !SRAM_SMAS_Global_EnableSMASDebugModeFlag
	BEQ.b CODE_23C37D
	LDA.b !RAM_SMB3_Global_ControllerPress1P1
	ORA.b !RAM_SMB3_Global_ControllerPress1P2
	AND.b #!Joypad_Select>>8
	BEQ.b CODE_23C35B
	LDA.b #$E0
	STA.w !RAM_SMB3_Level_Player_StarPowerTimer
	LDA.b #$03
	STA.w $02C6
	STZ.w $02C7
CODE_23C35B:
	LDA.b !RAM_SMB3_Global_ControllerPress2P1
	ORA.b !RAM_SMB3_Global_ControllerPress2P2
	AND.b #$80
	BEQ.b CODE_23C36B
	LDA.w $023D
	EOR.b #$01
	STA.w $023D
CODE_23C36B:
	LDA.b !RAM_SMB3_Global_ControllerPress2P1
	ORA.b !RAM_SMB3_Global_ControllerPress2P2
	AND.b #$40
	BEQ.b CODE_23C37D
	INC.b !RAM_SMB3_Level_Player_CurrentPowerUp
	LDA.b !RAM_SMB3_Level_Player_CurrentPowerUp
	CMP.b #$07
	BNE.b CODE_23C37D
	STZ.b !RAM_SMB3_Level_Player_CurrentPowerUp
CODE_23C37D:
	LDA.w !RAM_SMB3_Level_GraphicsAndPaletteSettingFromHeader
	CMP.b #$16
	BNE.b CODE_23C390
	STZ.b !RAM_SMB3_Global_ControllerHold1P1
	STZ.b !RAM_SMB3_Global_ControllerPress1P1
	STZ.b !RAM_SMB3_Global_ControllerHold1P2
	STZ.b !RAM_SMB3_Global_ControllerPress1P2
	STZ.b !RAM_SMB3_Global_ControllerHold1
	STZ.b !RAM_SMB3_Global_ControllerPress1
CODE_23C390:
	JSR.w CODE_23C4FA
	JSR.w CODE_23C3DE
	JSL.l CODE_23CFCA
	JSL.l CODE_27A93D
	JSR.w CODE_23D364
	JSR.w CODE_23D810
	JSR.w CODE_23DAF9
	JSR.w CODE_23C3BC
	LDA.b !RAM_SMB3_Level_Player_CurrentPose
	CMP.b #$2E
	BEQ.b CODE_23C3B3
	JSR.w CODE_23CD71
CODE_23C3B3:
	JSR.w CODE_23C08A
	LDA.b #$00
	STA.w !RAM_SMB3_Level_Player_SuctionXOffset
	RTS

;--------------------------------------------------------------------

; Note: Seems to be related to screen shaking.

CODE_23C3BC:
	LDA.w !RAM_SMB3_Level_ShakeLayer1Timer
	BEQ.b CODE_23C3DA
	DEC.w !RAM_SMB3_Level_ShakeLayer1Timer
	AND.b #$03
	LDY.w $0216
	BPL.b CODE_23C3CD
	ORA.b #$04
CODE_23C3CD:
	TAY
	LDA.w DATA_21EA0A,y
	PHA
	CLC
	ADC.w $0543
	STA.w $0543
	PLA
CODE_23C3DA:
	STA.w !RAM_SMB3_Level_ShakeLayer1YOffset
	RTS

;--------------------------------------------------------------------

CODE_23C3DE:
	LDY.w !RAM_SMB3_Level_Player_FlightTimer
	BEQ.b CODE_23C40C
	CPY.b #$FF
	BEQ.b CODE_23C3F7
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$01
	BEQ.b CODE_23C3F1
	DEY
	STY.w !RAM_SMB3_Level_Player_FlightTimer
CODE_23C3F1:
	TYA
	BNE.b CODE_23C3F7
	STY.w !RAM_SMB3_Global_FilledInPMeterSegments
CODE_23C3F7:
	LDA.w $02D8
	BNE.b CODE_23C40B
	DEC.w $02E0
	BPL.b CODE_23C40B
	LDA.b #$06
	STA.w $02E0
	LDA.b #!Define_SMAS_Sound0060_SelectCard
	STA.w !RAM_SMB3_Global_SoundCh1
CODE_23C40B:
	RTS

CODE_23C40C:
	LDA.w !RAM_SMB3_Global_FilledInPMeterSegments
	CMP.b #$7F
	BNE.b CODE_23C420
	JSR.w CODE_23C3F7
	LDA.w !RAM_SMB3_Level_Player_CantBuildUpPSpeedFlag
	BEQ.b CODE_23C420
	LDY.b #$10
	JMP.w CODE_23C442

CODE_23C420:
	LDA.w $0515
	BNE.b CODE_23C44B
	SEC
	ROL.w !RAM_SMB3_Global_FilledInPMeterSegments
	LDA.w !RAM_SMB3_Level_Player_CantBuildUpPSpeedFlag
	BNE.b CODE_23C434
	ROR.w !RAM_SMB3_Global_FilledInPMeterSegments
	LSR.w !RAM_SMB3_Global_FilledInPMeterSegments
CODE_23C434:
	LDY.b #$18
	LDA.w !RAM_SMB3_Global_FilledInPMeterSegments
	BEQ.b CODE_23C448
	LDA.w !RAM_SMB3_Level_Player_CantBuildUpPSpeedFlag
	BEQ.b CODE_23C442
	LDY.b #$08
CODE_23C442:
	STY.w $0515
	JMP.w CODE_23C44B

CODE_23C448:
	STA.w !RAM_SMB3_Level_Player_FlightTimer
CODE_23C44B:
	LDA.b #$00
	STA.w !RAM_SMB3_Level_Player_CantBuildUpPSpeedFlag
	RTS

;--------------------------------------------------------------------

; Note: Routine that updates the player palette in levels.

DATA_23C451:
	dw RegularMarioPalette		; Regular Mario
	dw RegularLuigiPalette		; Regular Luigi
	dw FireMarioPalette		; Fire Mario
	dw RegularMarioPalette		; Regular Mario
	dw RegularLuigiPalette		; Regular Luigi
	dw TanookiSuitPalette		; Tanooki Suit
	dw HammerSuitPalette		; Hammer Suit
	dw TanookiSuitPalette		; Tanooki Suit
	dw FireLuigiPalette		; Fire Luigi

CODE_23C463:
;$23C463
	JSR.w CODE_23C467
	RTL

CODE_23C467:
;$23C467
	LDY.b #$07
	LDA.w !RAM_SMB3_Level_Player_CurrentCharacter
	BEQ.b CODE_23C477
	LDA.b !RAM_SMB3_Level_Player_CurrentPowerUp
	CMP.b #$02
	BNE.b CODE_23C477
	INY
	BRA.b CODE_23C48A

CODE_23C477:
	LDA.w !RAM_SMB3_Level_Player_IsTanookiStatueTimer
	BNE.b CODE_23C48A
	LDA.b !RAM_SMB3_Level_Player_CurrentPowerUp
	TAY
	CMP.b #$03
	BEQ.b CODE_23C487
	CMP.b #$02
	BPL.b CODE_23C48A
CODE_23C487:
	LDY.w !RAM_SMB3_Level_Player_CurrentCharacter
CODE_23C48A:
	PHX
	REP.b #$30
	TYA
	AND.w #$00FF
	ASL
	TAX
	LDA.l DATA_23C451,x
	PHB
	TAX
	LDY.w #SMB3_PaletteMirror[$F0].LowByte
	LDA.w #$001F
	MVN SMB3_PaletteMirror[$F0].LowByte>>16,RegularMarioPalette>>16
	PLB
	LDX.w #$001E
CODE_23C4A6:
	LDA.w SMB3_PaletteMirror[$F0].LowByte,x
	STA.l !RAM_SMB3_Level_Player_CurrentPaletteDataTable,x
	DEX
	DEX
	BPL.b CODE_23C4A6
	SEP.b #$30
	PLX
	LDA.b #$01
	STA.w !RAM_SMB3_Global_UpdateEntirePaletteFlag
	RTS

;--------------------------------------------------------------------

; Note: Something related to swimming?

CODE_23C4BA:
	LDY.b #$01
	STY.b $0E
	LDA.w $0584
	AND.w DATA_21EB1E,x
	BNE.b CODE_23C4F8
	LDA.b $00,x
	ASL
	ROL
	ROL
	AND.b #$03
	TAY
	LDA.b $00,x
	CMP.w !RAM_SMB3_Global_Map16FloorTileAttributeTable,y
	BCS.b CODE_23C4F9
	CMP.b #$D7
	BNE.b CODE_23C4DD
	LDY.b #$00
	BEQ.b CODE_23C4F6
CODE_23C4DD:
	TYA
	ORA.b $02
	TAY
	LDA.w DATA_21AD84,y
	LDY.b #$00
	CMP.b $00,x
	BCS.b CODE_23C4F6
	INY
	LDA.b $00,x
	CMP.b #$E0
	BEQ.b CODE_23C4F5
	CMP.b #$E1
	BNE.b CODE_23C4F6
CODE_23C4F5:
	INY
CODE_23C4F6:
	STY.b $0E
CODE_23C4F8:
	CLC
CODE_23C4F9:
	RTS

;--------------------------------------------------------------------

; Note: Routine that handles the player physics?

CODE_23C4FA:
	LDA.l !SRAM_SMAS_Global_EnableSMASDebugModeFlag
	BEQ.b CODE_23C538
	LDA.w $023D
	BEQ.b CODE_23C538
	STZ.b !RAM_SMB3_Level_Player_XSpeed
	STZ.b !RAM_SMB3_Level_Player_YSpeed
	LDX.b #$C0
	LDA.b !RAM_SMB3_Global_ControllerHold1P1
	ORA.b !RAM_SMB3_Global_ControllerHold1P2
	AND.b #(!Joypad_DPadL>>8)|(!Joypad_DPadR>>8)
	BEQ.b CODE_23C51B
	AND.b #!Joypad_DPadL>>8
	BNE.b CODE_23C519
	LDX.b #$30
CODE_23C519:
	STX.b !RAM_SMB3_Level_Player_XSpeed
CODE_23C51B:
	LDX.b #$C0
	LDA.b !RAM_SMB3_Global_ControllerHold1P1
	ORA.b !RAM_SMB3_Global_ControllerHold1P2
	AND.b #(!Joypad_DPadU>>8)|(!Joypad_DPadD>>8)
	BEQ.b CODE_23C52D
	AND.b #!Joypad_DPadU>>8
	BNE.b CODE_23C52B
	LDX.b #$30
CODE_23C52B:
	STX.b !RAM_SMB3_Level_Player_YSpeed
CODE_23C52D:
	JSL.l CODE_23DE53
	JSL.l CODE_23DEA3
	JMP.w CODE_23C08A

CODE_23C538:
	LDA.b $BD
	STA.w $056C
	LDA.w !RAM_SMB3_Level_Player_GoalWalkAnimationTimer
	BNE.b CODE_23C54A
	LDA.w !RAM_SMB3_Level_Player_DisableControlsTimer
	BEQ.b CODE_23C552
	DEC.w !RAM_SMB3_Level_Player_DisableControlsTimer
CODE_23C54A:
	LDA.b #$00
	STA.b !RAM_SMB3_Level_Player_XSpeed
	STA.b !RAM_SMB3_Global_ControllerHold1
	STA.b !RAM_SMB3_Global_ControllerPress1
CODE_23C552:
	LDA.w !RAM_SMB3_Level_Player_SlidingXSpeed
	BEQ.b CODE_23C55D
	LDA.b !RAM_SMB3_Global_ControllerPress1
	AND.b #(!Joypad_X|(!Joypad_Y>>8))^$FF
	STA.b !RAM_SMB3_Global_ControllerPress1
CODE_23C55D:
	LDY.b !RAM_SMB3_Level_Player_CurrentPowerUp
	BEQ.b CODE_23C579
	CPY.b #$04
	BEQ.b CODE_23C579
	LDA.w !RAM_SMB3_Level_Player_ShowCarryingAnimationFlag
	ORA.w !RAM_SMB3_Level_Player_SlidingXSpeed
	ORA.w !RAM_SMB3_Level_Player_InKuriboShoeFlag
	BNE.b CODE_23C579
	LDA.b $A6
	BEQ.b CODE_23C587
	LDA.w !RAM_SMB3_Level_Player_IsSwimmingFlag
	BEQ.b CODE_23C580
CODE_23C579:
	LDA.b #$00
	STA.w !RAM_SMB3_Level_Player_DuckingFlag
	BEQ.b CODE_23C5A1
CODE_23C580:
	LDA.w !RAM_SMB3_Level_Player_DuckingFlag
	BNE.b CODE_23C59E
	BEQ.b CODE_23C5A1

CODE_23C587:
	LDA.b #$00
	STA.w !RAM_SMB3_Level_Player_DuckingFlag
	LDA.w $0563
	BEQ.b CODE_23C596
	LDA.w $0569
	BNE.b CODE_23C5A1
CODE_23C596:
	LDA.b !RAM_SMB3_Global_ControllerHold1
	AND.b #(!Joypad_DPadL>>8)|(!Joypad_DPadR>>8)|(!Joypad_DPadU>>8)|(!Joypad_DPadD>>8)
	CMP.b #!Joypad_DPadD>>8
	BNE.b CODE_23C5A1
CODE_23C59E:
	STY.w !RAM_SMB3_Level_Player_DuckingFlag
CODE_23C5A1:
	LDY.b #$14
	LDA.b !RAM_SMB3_Level_Player_CurrentPowerUp
	BEQ.b CODE_23C5AE
	LDA.w !RAM_SMB3_Level_Player_DuckingFlag
	BNE.b CODE_23C5AE
	LDY.b #$0A
CODE_23C5AE:
	STY.b $09
	LDA.b #$08
	STA.b $0A
	JSL.l CODE_23D2B6
	STA.w $0602
	STA.b $00
	LDA.w $0603
	STA.b $01
	LDA.w !RAM_SMB3_Level_Player_BehindLayer1Timer
	STA.w !RAM_SMB3_Level_Player_BehindLayer1Flag
	BEQ.b CODE_23C5EA
	LDA.b !RAM_SMB3_Global_FrameCounter
	LSR
	BCC.b CODE_23C5D2
	DEC.w !RAM_SMB3_Level_Player_BehindLayer1Timer
CODE_23C5D2:
	LDY.b #$00
	LDA.b $00
	CMP.b #$41
	BEQ.b CODE_23C5E7
	CMP.b #$80
	BEQ.b CODE_23C5E7
	INY
	LDA.w !RAM_SMB3_Level_Player_BehindLayer1Timer
	BNE.b CODE_23C5E7
	STY.w !RAM_SMB3_Level_Player_BehindLayer1Timer
CODE_23C5E7:
	STY.w !RAM_SMB3_Level_Player_BehindLayer1Flag
CODE_23C5EA:
	LDA.b $00
	AND.b #$C0
	ASL
	ROL
	ROL
	TAY
	LDA.b $00
	CMP.w !RAM_SMB3_Global_Map16WallTileAttributeTable,y
	BCC.b CODE_23C619
	LDA.b $A6
	ORA.w !RAM_SMB3_Level_Player_IsSwimmingFlag
	ORA.w $0571
	BNE.b CODE_23C619
	STA.b !RAM_SMB3_Level_Player_XSpeed
	STA.b !RAM_SMB3_Global_ControllerPress1
	AND.b #(!Joypad_A|(!Joypad_B>>8))^$FF
	STA.b !RAM_SMB3_Global_ControllerPress1
	LDA.b #$01
	STA.w !RAM_SMB3_Level_Player_BigInSmallSpaceFlag
	CLC
	ADC.b !RAM_SMB3_Level_Player_XPosLo
	STA.b !RAM_SMB3_Level_Player_XPosLo
	BCC.b CODE_23C619
	INC.b $43
CODE_23C619:
	LDA.w $0560
	ASL
	ASL
	STA.b $02
	LDX.b #$00
	JSR.w CODE_23C4BA
	BCS.b CODE_23C62A
	TYA
	BNE.b CODE_23C67E
CODE_23C62A:
	LDA.w !RAM_SMB3_Level_Player_IsSwimmingFlag
	BEQ.b CODE_23C694
	LDA.b $A6
	BNE.b CODE_23C637
	BCS.b CODE_23C694
	BCC.b CODE_23C677							; Note: This will always branch.

CODE_23C637:
	BCS.b CODE_23C63D
	LDA.b !RAM_SMB3_Level_Player_YSpeed
	BMI.b CODE_23C64E
CODE_23C63D:
	ROR
	STA.b $0F
	LDX.b #$01
	JSR.w CODE_23C4BA
	BCS.b CODE_23C64A
	TYA
	BEQ.b CODE_23C677
CODE_23C64A:
	LDA.b $0F
	BMI.b CODE_23C67E
CODE_23C64E:
	LDY.b !RAM_SMB3_Level_Player_YSpeed
	CPY.b #$F4
	BPL.b CODE_23C656
	LDY.b #$F4
CODE_23C656:
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$07
	BNE.b CODE_23C65D
	INY
CODE_23C65D:
	STY.b !RAM_SMB3_Level_Player_YSpeed
	LDA.b !RAM_SMB3_Global_ControllerPress1
	AND.b #(!Joypad_A|(!Joypad_B>>8))^$FF
	STA.b !RAM_SMB3_Global_ControllerPress1
	LDA.b !RAM_SMB3_Global_ControllerHold1
	TAY
	AND.b #(!Joypad_DPadU>>8)^$FF
	STA.b !RAM_SMB3_Global_ControllerHold1
	TYA
	AND.b #$88
	CMP.b #$88
	BNE.b CODE_23C694
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$BC
else
	LDA.b #$CC
endif
	STA.b !RAM_SMB3_Level_Player_YSpeed
CODE_23C677:
	LDY.b #$00
	STY.w $0576
	BEQ.b CODE_23C685
CODE_23C67E:
	LDY.b $0E
	CPY.w !RAM_SMB3_Level_Player_IsSwimmingFlag
	BEQ.b CODE_23C694
CODE_23C685:
	TYA
	ORA.w !RAM_SMB3_Level_Player_IsSwimmingFlag
	STY.w !RAM_SMB3_Level_Player_IsSwimmingFlag
	CMP.b #$02
	BEQ.b CODE_23C694
	JSL.l CODE_23BF00
CODE_23C694:
	LDA.b $BD
	AND.b #$7F
	STA.b $BD
	LDX.b #$00
	LDY.w $0560
	LDA.b #$43
	SEC
	SBC.b $00
	BEQ.b CODE_23C6AF
	CPY.b #$01
	BNE.b CODE_23C704
	CMP.b #$01
	BNE.b CODE_23C704
	INX
CODE_23C6AF:
	LDA.b !RAM_SMB3_Global_ControllerPress1
	AND.b #!Joypad_DPadU>>8
	BEQ.b CODE_23C704
	LDA.b $A6
	BNE.b CODE_23C704
	LDY.b #$01
	LDA.w $0379
	BEQ.b CODE_23C6C2
	LDY.b #$03
CODE_23C6C2:
	STY.w $0414
	STZ.w $0713
	STZ.b !RAM_SMB3_Level_Player_XSpeed
	STZ.w $034E
	CPX.b #$01
	BEQ.b CODE_23C704
	LDA.b $43
	STA.b $D9
	XBA
	LDA.b !RAM_SMB3_Level_Player_XPosLo
	STA.b $D8
	REP.b #$30
	LDY.w #$0000
	AND.w #$0008
	BEQ.b CODE_23C6E7
	LDY.w #$0010
CODE_23C6E7:
	TYA
	CLC
	ADC.b $D8
	AND.w #$FFF0
	SEP.b #$30
	STA.b !RAM_SMB3_Level_Player_XPosLo
	XBA
	STA.b $43
	LDY.b #$01
	STY.w $034E
	LDY.b #!Define_SMAS_Sound0063_Door1
	STY.w !RAM_SMB3_Global_SoundCh3
	PHX
	JSR.w CODE_23DEB6
	PLX
CODE_23C704:
	LDA.w !RAM_SMB3_Level_Player_IsSwimmingFlag
	ORA.w !RAM_SMB3_Level_Player_ShowCarryingAnimationFlag
	ORA.w !RAM_SMB3_Level_Player_InKuriboShoeFlag
	BNE.b CODE_23C728
	LDA.b $00
	CMP.b #$85
	BNE.b CODE_23C728
	LDA.w !RAM_SMB3_Level_Player_IsClimbingFlag
	BNE.b CODE_23C730
	LDA.b !RAM_SMB3_Global_ControllerHold1
	AND.b #(!Joypad_DPadU>>8)|(!Joypad_DPadD>>8)
	BEQ.b CODE_23C728
	LDY.b $A6
	BNE.b CODE_23C730
	AND.b #$08
	BNE.b CODE_23C730
CODE_23C728:
	LDA.b #$00
	STA.w !RAM_SMB3_Level_Player_IsClimbingFlag
	JMP.w CODE_23C79F

CODE_23C730:
	LDA.b #$01
	STA.w !RAM_SMB3_Level_Player_IsClimbingFlag
	LDA.b #$00
	STA.b !RAM_SMB3_Level_Player_XSpeed
	STA.b !RAM_SMB3_Level_Player_YSpeed
	LDY.b #$10
	LDA.b !RAM_SMB3_Global_ControllerHold1
	AND.b #(!Joypad_DPadU>>8)|(!Joypad_DPadD>>8)
	BEQ.b CODE_23C76E
	AND.b #!Joypad_DPadU>>8
	BEQ.b CODE_23C76C
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$07
	BNE.b CODE_23C752
	LDA.b #!Define_SMAS_Sound0060_ClimbVine
	STA.w !RAM_SMB3_Global_SoundCh1
CODE_23C752:
	LDY.b #$10
	LDA.b !RAM_SMB3_Level_Player_CurrentPowerUp
	BEQ.b CODE_23C75A
	LDY.b #$00
CODE_23C75A:
	STY.b $09
	LDA.b #$08
	STA.b $0A
	JSL.l CODE_23D2B6
	CMP.b #$85
	BNE.b CODE_23C76E
	LDY.b #$F0
	STY.b $A6
CODE_23C76C:
	STY.b !RAM_SMB3_Level_Player_YSpeed
CODE_23C76E:
	LDY.b #$10
	LDA.b !RAM_SMB3_Global_ControllerHold1
	AND.b #(!Joypad_DPadL>>8)|(!Joypad_DPadR>>8)
	BEQ.b CODE_23C77E
	AND.b #!Joypad_DPadL>>8
	BEQ.b CODE_23C77C
	LDY.b #$F0
CODE_23C77C:
	STY.b !RAM_SMB3_Level_Player_XSpeed
CODE_23C77E:
	LDA.w !RAM_SMB3_Level_Player_IsClimbingFlag
	BEQ.b CODE_23C790
	LDA.b $A6
	BNE.b CODE_23C790
	LDA.b !RAM_SMB3_Global_ControllerHold1
	AND.b #(!Joypad_DPadU>>8)|(!Joypad_DPadD>>8)
	BNE.b CODE_23C790
	STA.w !RAM_SMB3_Level_Player_IsClimbingFlag
CODE_23C790:
	JSL.l CODE_23DE53
	JSL.l CODE_23DEA3
	JSR.w CODE_23CECA
	JSR.w CODE_23C08A
	RTS

CODE_23C79F:
	LDA.w $0569
	BEQ.b CODE_23C7AC
	LDA.b !RAM_SMB3_Level_Player_XSpeed
	CLC
	ADC.w $0569
	STA.b !RAM_SMB3_Level_Player_XSpeed
CODE_23C7AC:
	JSL.l CODE_23DE53
	LDA.w $0569
	BEQ.b CODE_23C7BD
	LDA.b !RAM_SMB3_Level_Player_XSpeed
	SEC
	SBC.w $0569
	STA.b !RAM_SMB3_Level_Player_XSpeed
CODE_23C7BD:
	LDA.b #$00
	STA.w $0569
	LDY.b #$02
	LDA.b !RAM_SMB3_Level_Player_XSpeed
	BPL.b CODE_23C7CD
	JSL.l SMB3_UnnecessaryInvertARt_Main
	DEY
CODE_23C7CD:
	BNE.b CODE_23C7D0
	TAY
CODE_23C7D0:
	STA.b $02
	STY.w $0573
	LDA.b $A6
	BEQ.b CODE_23C7E9
	LDA.b !RAM_SMB3_Level_Player_YPosHi
	BPL.b CODE_23C7E5
	LDA.b !RAM_SMB3_Level_Player_YPosLo
	BMI.b CODE_23C7E5
	LDA.b !RAM_SMB3_Level_Player_YSpeed
	BMI.b CODE_23C7E9
CODE_23C7E5:
	JSL.l CODE_23DEA3
CODE_23C7E9:
	JSR.w CODE_23CC62
	LDA.w !RAM_SMB3_Level_Player_InKuriboShoeFlag
	BEQ.b CODE_23C7F5
	LDA.b #$0E
	BNE.b CODE_23C7FF
CODE_23C7F5:
	LDA.b !RAM_SMB3_Level_Player_CurrentPowerUp
	LDY.w !RAM_SMB3_Level_Player_IsSwimmingFlag
	BEQ.b CODE_23C7FF
	CLC
	ADC.b #$07
CODE_23C7FF:
	PHX
	ASL
	TAX
	PHB
	PHK
	PLB
	LDA.l DATA_23C816,x
	STA.b !RAM_SMB3_Global_ScratchRAM00
	LDA.l DATA_23C816+$01,x
	STA.b !RAM_SMB3_Global_ScratchRAM01
	PLB
	PLX
	JMP.w (!RAM_SMB3_Global_ScratchRAM00)

DATA_23C816:
	dw CODE_23C834
	dw CODE_23C85F
	dw CODE_23C86A
	dw CODE_23C884
	dw CODE_23C892
	dw CODE_23C972
	dw CODE_23C86A
	dw CODE_23C855
	dw CODE_23C855
	dw CODE_23C877
	dw CODE_23C855
	dw CODE_23C8D2
	dw CODE_23C982
	dw CODE_23C877
	dw CODE_23C98F

;--------------------------------------------------------------------

CODE_23C834:
	JSR.w CODE_23C9D8
	JSR.w CODE_23CAB6
	LDA.w !RAM_SMB3_Level_Player_InQuicksandFlag
	LSR
	BCS.b CODE_23C854
	LDA.w $101F
	BNE.b CODE_23C854
	LDA.b $A6
	BEQ.b CODE_23C854
	LDA.b #$80
	LDY.w !RAM_SMB3_Level_Player_FlightTimer
	BEQ.b CODE_23C852
	LDA.b #$9C
CODE_23C852:
	STA.b !RAM_SMB3_Level_Player_CurrentPose
CODE_23C854:
	RTS

;--------------------------------------------------------------------

CODE_23C855:
	JSR.w CODE_23CA96
	JSR.w CODE_23CBBB
	JSR.w CODE_23CC08
	RTS

;--------------------------------------------------------------------

CODE_23C85F:
	JSR.w CODE_23C9D8
	JSR.w CODE_23CAB6
	JSR.w CODE_23CF4E
	RTS

;--------------------------------------------------------------------

CODE_23C869:
	RTS

;--------------------------------------------------------------------

CODE_23C86A:
	JSR.w CODE_23C9D8
	JSR.w CODE_23CAB6
	JSR.w CODE_23CF4E
	JSR.w CODE_23CFB5
	RTS

;--------------------------------------------------------------------

CODE_23C877:
	JSR.w CODE_23CA96
	JSR.w CODE_23CBBB
	JSR.w CODE_23CC08
	JSR.w CODE_23CFB5
	RTS

;--------------------------------------------------------------------

CODE_23C884:
	JSR.w CODE_23C9D8
	JSR.w CODE_23CAB6
	JSR.w CODE_23CEE6
	JSR.w CODE_23CF74
	RTS

;--------------------------------------------------------------------

CODE_23C891:
	RTS

;--------------------------------------------------------------------

CODE_23C892:
	JSR.w CODE_23C9D8
	JSR.w CODE_23CAB6
	LDA.w !RAM_SMB3_Level_Player_ShowCarryingAnimationFlag
	BNE.b CODE_23C8D1
	LDA.b $A6
	BEQ.b CODE_23C8B1
	LDA.w !RAM_SMB3_Level_Player_InQuicksandFlag
	LSR
	BCS.b CODE_23C8B1
	LDA.b #$00
	STA.w $0513
	LDY.b #$01
	JMP.w CODE_23C8CC

CODE_23C8B1:
	LDA.w $0513
	BNE.b CODE_23C8C8
	STA.b !RAM_SMB3_Level_Player_XSpeed
	LDA.b !RAM_SMB3_Global_ControllerHold1
	AND.b #(!Joypad_DPadL>>8)|(!Joypad_DPadR>>8)
	BEQ.b CODE_23C8C8
	LDA.b #!Define_SMAS_Sound0060_FrogHop
	STA.w !RAM_SMB3_Global_SoundCh1
	LDA.b #$1F
	STA.w $0513
CODE_23C8C8:
	LSR
	LSR
	LSR
	TAY
CODE_23C8CC:
	LDA.w DATA_21E9AE,y
	STA.b !RAM_SMB3_Level_Player_CurrentPose
CODE_23C8D1:
	RTS

;--------------------------------------------------------------------

CODE_23C8D2:
	LDX.b #$FF
	LDA.b !RAM_SMB3_Global_ControllerHold1
	AND.b #(!Joypad_DPadU>>8)|(!Joypad_DPadD>>8)
	BEQ.b CODE_23C900
	STA.b $A6
	LSR
	LSR
	LSR
	TAX
	LDA.w DATA_21EB2D,x
	BPL.b CODE_23C8EC
	LDY.w !RAM_SMB3_Level_Player_IsAboveTopOfLevelFlag
	BPL.b CODE_23C8EC
	LDA.b #$00
CODE_23C8EC:
	LDY.b !RAM_SMB3_Global_ControllerHold1
	BPL.b CODE_23C8F1						; Note: !Joypad_A|(!Joypad_B>>8)
	ASL
CODE_23C8F1:
	CMP.b #$E1
	BCC.b CODE_23C8FB
	LDY.b $A6
	BNE.b CODE_23C8FB
	LDA.b #$E0
CODE_23C8FB:
	STA.b !RAM_SMB3_Level_Player_YSpeed
	JMP.w CODE_23C90D

CODE_23C900:
	LDY.b !RAM_SMB3_Level_Player_YSpeed
	BEQ.b CODE_23C90D
	INY
	LDA.b !RAM_SMB3_Level_Player_YSpeed
	BMI.b CODE_23C90B
	DEY
	DEY
CODE_23C90B:
	STY.b !RAM_SMB3_Level_Player_YSpeed
CODE_23C90D:
	LDA.b !RAM_SMB3_Global_ControllerHold1
	AND.b #(!Joypad_DPadL>>8)|(!Joypad_DPadR>>8)
	BEQ.b CODE_23C923
	LSR
	TAY
	LDA.w DATA_21EB2D,y
	LDY.b !RAM_SMB3_Global_ControllerHold1
	BPL.b CODE_23C91D						; Note: !Joypad_A|(!Joypad_B>>8)
	ASL
CODE_23C91D:
	STA.b !RAM_SMB3_Level_Player_XSpeed
	LDX.b #$02
	BNE.b CODE_23C93B
CODE_23C923:
	LDY.b !RAM_SMB3_Level_Player_XSpeed
	BEQ.b CODE_23C933
	INY
	LDA.b !RAM_SMB3_Level_Player_XSpeed
	BMI.b CODE_23C92E
	DEY
	DEY
CODE_23C92E:
	STY.b !RAM_SMB3_Level_Player_XSpeed
	JMP.w CODE_23C93B

CODE_23C933:
	LDA.b $A6
	BNE.b CODE_23C93B
	LDA.b #$2A
	BNE.b CODE_23C96F
CODE_23C93B:
	TXA
	BMI.b CODE_23C964
	LDA.b !RAM_SMB3_Global_FrameCounter
	LSR
	LSR
	LDY.b #$00
	BIT.b !RAM_SMB3_Global_ControllerHold1
	BMI.b CODE_23C94A						; Note: !Joypad_A|(!Joypad_B>>8)
	LSR
	INY
CODE_23C94A:
	AND.b #$07
	TAY
	BNE.b CODE_23C95B
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.w DATA_21EB20,y
	BNE.b CODE_23C95B
	LDA.b #!Define_SMAS_Sound0060_Swim
	STA.w !RAM_SMB3_Global_SoundCh1
CODE_23C95B:
	LDA.w DATA_21EB22,x
	CLC
	ADC.w DATA_21EB25,y
	BNE.b CODE_23C96F
CODE_23C964:
	LDY.b #$3E
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$08
	BEQ.b CODE_23C96E
	INY
	INY
CODE_23C96E:
	TYA
CODE_23C96F:
	STA.b !RAM_SMB3_Level_Player_CurrentPose
	RTS

;--------------------------------------------------------------------

CODE_23C972:
	JSR.w CODE_23CE61
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	JSR.w CODE_23C884
else
	JSR.w CODE_23C9D8
	JSR.w CODE_23CAB6
	JSR.w CODE_23CEE6
	JSR.w CODE_23CF74
endif
	RTS

;--------------------------------------------------------------------

CODE_23C982:
	JSR.w CODE_23CE61
	JSR.w CODE_23CA96
	JSR.w CODE_23CBBB
	JSR.w CODE_23CC08
	RTS

;--------------------------------------------------------------------

CODE_23C98F:
	JSR.w CODE_23C9D8
	JSR.w CODE_23CAB6
	LDA.b $A6
	BNE.b CODE_23C99C
	STA.w $0550
CODE_23C99C:
	LDA.w $0550
	BNE.b CODE_23C9B4
	LDA.b $A6
	BNE.b CODE_23C9C2
	LDA.b !RAM_SMB3_Global_ControllerHold1
	AND.b #(!Joypad_DPadL>>8)|(!Joypad_DPadR>>8)
	STA.w $0550
	BEQ.b CODE_23C9C2
	INC.b $A6
	LDY.b #$E0
	STY.b !RAM_SMB3_Level_Player_YSpeed
CODE_23C9B4:
	LDA.b !RAM_SMB3_Global_ControllerPress1
	BPL.b CODE_23C9C2						; Note: !Joypad_A|(!Joypad_B>>8)
	LDA.b #$00
	STA.w $0550
	LDY.w DATA_21EAFD
	STY.b !RAM_SMB3_Level_Player_YSpeed
CODE_23C9C2:
	LDY.b !RAM_SMB3_Level_Player_CurrentPowerUp
	BEQ.b CODE_23C9C8
	LDY.b #$01
CODE_23C9C8:
	LDA.w DATA_21E9A4,y
	STA.b !RAM_SMB3_Level_Player_CurrentPose
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$08
	BEQ.b CODE_23C9D7
	INC.b !RAM_SMB3_Level_Player_CurrentPose
	INC.b !RAM_SMB3_Level_Player_CurrentPose
CODE_23C9D7:
	RTS

CODE_23C9D8:
	LDA.w $0546
	BEQ.b CODE_23C9EA
	INC.w !RAM_SMB3_Level_Player_WalkingAnimationFrameCounter
	LDY.b #$0A
	BIT.b !RAM_SMB3_Global_ControllerHold1
	BVC.b CODE_23C9EF						; Note: !Joypad_X|(!Joypad_Y>>8)
	LDY.b #$01
	BNE.b CODE_23C9EF
CODE_23C9EA:
	LDY.w !RAM_SMB3_Level_Player_NumberOfClingingMicroGoombas
	BEQ.b CODE_23C9F6
CODE_23C9EF:
	LDA.w DATA_21EB2F,y
	TAY
	JMP.w CODE_23CA17

CODE_23C9F6:
	LDY.b #$18
	BIT.b !RAM_SMB3_Global_ControllerHold1
	BVC.b CODE_23CA17						; Note: !Joypad_X|(!Joypad_Y>>8)
	LDA.b $A6
	ORA.w !RAM_SMB3_Level_Player_SlidingXSpeed
	BNE.b CODE_23CA0C
	LDA.b $02
	CMP.b #$28
	BMI.b CODE_23CA0C
	INC.w !RAM_SMB3_Level_Player_CantBuildUpPSpeedFlag
CODE_23CA0C:
	LDY.b #$28
	LDA.w !RAM_SMB3_Global_FilledInPMeterSegments
	CMP.b #$7F
	BNE.b CODE_23CA17
	LDY.b #$38
CODE_23CA17:
	STY.b $0D
	LDY.w !RAM_SMB3_Level_Player_OnSlipperyGroundFlag
	BEQ.b CODE_23CA2C
	INC.w !RAM_SMB3_Level_Player_WalkingAnimationFrameCounter
	DEY
	TYA
	ASL
	ASL
	ASL
	CLC
	ADC.b #$40
	TAY
	BNE.b CODE_23CA32
CODE_23CA2C:
	LDA.b !RAM_SMB3_Level_Player_CurrentPowerUp
	ASL
	ASL
	ASL
	TAY
CODE_23CA32:
	BIT.b !RAM_SMB3_Global_ControllerHold1
	BVC.b CODE_23CA3A						; Note: !Joypad_X|(!Joypad_Y>>8)
	INY
	INY
	INY
	INY
CODE_23CA3A:
	LDA.b !RAM_SMB3_Global_ControllerHold1
	AND.b #(!Joypad_DPadL>>8)|(!Joypad_DPadR>>8)
	BNE.b CODE_23CA4C
	LDA.b $A6
	BNE.b CODE_23CA95
	LDA.b !RAM_SMB3_Level_Player_XSpeed
	BEQ.b CODE_23CA95
	BMI.b CODE_23CA67
	BPL.b CODE_23CA7F

CODE_23CA4C:
	INY
	INY
	AND.w $0573
	BNE.b CODE_23CA61
	DEY
	LDA.b $02
	CMP.b $0D
	BEQ.b CODE_23CA95
	BMI.b CODE_23CA61
	LDA.b $A6
	BNE.b CODE_23CA95
	DEY
CODE_23CA61:
	LDA.b !RAM_SMB3_Global_ControllerHold1
	AND.b #!Joypad_DPadR>>8
	BNE.b CODE_23CA7F
CODE_23CA67:
	LDA.b #$00
	SEC
	SBC.w DATA_21EAA2,y
	STA.b $00
	LDA.w DATA_21EA52,y
	EOR.b #$FF
	STA.b $01
	LDA.b $00
	BNE.b CODE_23CA89
	INC.b $01
	JMP.w CODE_23CA89

CODE_23CA7F:
	LDA.w DATA_21EAA2,y
	STA.b $00
	LDA.w DATA_21EA52,y
	STA.b $01
CODE_23CA89:
	LDA.b $00
	CLC
	ADC.w $055C
	LDA.b !RAM_SMB3_Level_Player_XSpeed
	ADC.b $01
	STA.b !RAM_SMB3_Level_Player_XSpeed
CODE_23CA95:
	RTS

CODE_23CA96:
	LDY.b #$38
	LDA.b #$08
	STA.b $0D
	LDA.b $A6
	BEQ.b CODE_23CAA8
	LDA.b #$18
	STA.b $0D
	INY
	INY
	INY
	INY
CODE_23CAA8:
	LDA.b $A6
	PHA
	LDA.b #$00
	STA.b $A6
	JSR.w CODE_23CA3A
	PLA
	STA.b $A6
	RTS

CODE_23CAB6:
	LDA.w $101F
	BEQ.b CODE_23CABE
	DEC.w $101F
CODE_23CABE:
	LDA.b !RAM_SMB3_Global_ControllerPress1
	AND.b #!Joypad_A|(!Joypad_B>>8)
	STA.b $00
	BEQ.b CODE_23CB2A
	LDA.w $101F
	BNE.b CODE_23CACF
	LDA.b $A6
	BNE.b CODE_23CB2A
CODE_23CACF:
	LDA.b #!Define_SMAS_Sound0061_Jump
	STA.w !RAM_SMB3_Global_SoundCh2
	LDA.w !RAM_SMB3_Level_Player_StarPowerTimer
	BEQ.b CODE_23CAF7
	LDA.w !RAM_SMB3_Global_FilledInPMeterSegments
	CMP.b #$7F
	BEQ.b CODE_23CAF7
	LDA.w !RAM_SMB3_Level_Player_ShowCarryingAnimationFlag
	BNE.b CODE_23CAF7
	LDA.b !RAM_SMB3_Level_Player_CurrentPowerUp
	BEQ.b CODE_23CAF7
	CMP.b #$04
	BEQ.b CODE_23CAF7
	STA.w !RAM_SMB3_Level_Player_SomersaultJumpFlag
	STA.b $A6
	LDA.b #$00
	STA.w $101F
CODE_23CAF7:
	LDA.b !RAM_SMB3_Level_Player_XSpeed
	BPL.b CODE_23CAFF
	JSL.l SMB3_UnnecessaryInvertARt_Main
CODE_23CAFF:
	LSR
	LSR
	LSR
	LSR
	TAX
	LDA.w DATA_21EAFD
	SEC
	SBC.w DATA_21EAFE,x
	STA.b !RAM_SMB3_Level_Player_YSpeed
	LDA.b #$01
	STA.b $A6
	LDA.b #$00
	STA.w $00BE
	STA.w $101F
	LDA.w !RAM_SMB3_Global_FilledInPMeterSegments
	CMP.b #$7F
	BNE.b CODE_23CB2A
	LDA.w !RAM_SMB3_Level_Player_FlightTimer
	BNE.b CODE_23CB2A
	LDA.b #$80
	STA.w !RAM_SMB3_Level_Player_FlightTimer
CODE_23CB2A:
	LDA.b $A6
	BNE.b CODE_23CB3F
	LDY.b !RAM_SMB3_Level_Player_CurrentPowerUp
	LDA.w DATA_21AF64,y
	AND.b #$01
	BNE.b CODE_23CBA6
	LDA.b #$00
	STA.w !RAM_SMB3_Level_Player_FlightTimer
	JMP.w CODE_23CBA6

CODE_23CB3F:
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDY.b #$07
else
	LDY.b #$05
endif
	LDA.b !RAM_SMB3_Level_Player_YSpeed
	CMP.b #$E0
	BPL.b CODE_23CB54
	LDA.w $0579
	BNE.b CODE_23CB59
	LDA.b !RAM_SMB3_Global_ControllerHold1
	BPL.b CODE_23CB54						; Note: !Joypad_A|(!Joypad_B>>8)
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDY.b #$02
else
	LDY.b #$01
endif
	BNE.b CODE_23CB59
CODE_23CB54:
	LDA.b #$00
	STA.w $0579
CODE_23CB59:
	TYA
	CLC
	ADC.b !RAM_SMB3_Level_Player_YSpeed
	STA.b !RAM_SMB3_Level_Player_YSpeed
	LDA.b $BE
	BEQ.b CODE_23CB65
	DEC.b $BE
CODE_23CB65:
	LDA.w !RAM_SMB3_Level_Player_InKuriboShoeFlag
	BNE.b CODE_23CB7B
	LDX.b !RAM_SMB3_Level_Player_CurrentPowerUp
	LDA.w DATA_21AF64,x
	AND.b #$01
	BEQ.b CODE_23CB7B
	LDY.b $00
	BEQ.b CODE_23CB7B
	LDA.b #$10
	STA.b $BE
CODE_23CB7B:
	LDA.b $BE
	BEQ.b CODE_23CBA6
	LDA.b !RAM_SMB3_Level_Player_YSpeed
	CMP.b #$E8
	BMI.b CODE_23CBA6
	LDY.b #$E8
	LDA.w !RAM_SMB3_Level_Player_FlightTimer
	BEQ.b CODE_23CB9A
	CMP.b #$0F
	BCS.b CODE_23CBA4
	LDY.b #$F0
	AND.b #$08
	BNE.b CODE_23CBA4
	LDY.b #$00
	BEQ.b CODE_23CBA4
CODE_23CB9A:
	LDA.b !RAM_SMB3_Level_Player_YSpeed
	BMI.b CODE_23CBA6
	CMP.b #$10
	BCC.b CODE_23CBA6
	LDY.b #$10
CODE_23CBA4:
	STY.b !RAM_SMB3_Level_Player_YSpeed
CODE_23CBA6:
	LDA.w !RAM_SMB3_Level_Player_NumberOfClingingMicroGoombas
	BEQ.b CODE_23CBBA
	LSR
	TAY
	LDA.b !RAM_SMB3_Level_Player_YSpeed
	BPL.b CODE_23CBBA
	CMP.w DATA_21EB3A,y
	BMI.b CODE_23CBBA
	LDA.b #$20
	STA.b !RAM_SMB3_Level_Player_YSpeed
CODE_23CBBA:
	RTS

;--------------------------------------------------------------------

CODE_23CBBB:						; Note: Something to do with the player swimming.
	LDA.b !RAM_SMB3_Global_ControllerPress1
	BPL.b CODE_23CBD5								; Note: !Joypad_A|(!Joypad_B>>8)
	LDA.b #!Define_SMAS_Sound0060_Swim
	STA.w !RAM_SMB3_Global_SoundCh1
	LDY.b $A6
	BNE.b CODE_23CBCE
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$D0
else
	LDA.b #$E0
endif
	STA.b $A6
	BNE.b CODE_23CBD3
CODE_23CBCE:
	LDA.b !RAM_SMB3_Level_Player_YSpeed
	SEC
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	SBC.b #$30
else
	SBC.b #$20
endif
CODE_23CBD3:
	STA.b !RAM_SMB3_Level_Player_YSpeed
CODE_23CBD5:
	LDA.b $A6
	BEQ.b CODE_23CC07
	LDA.b !RAM_SMB3_Level_Player_YSpeed
	BMI.b CODE_23CBE3
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$02
	BNE.b CODE_23CBE5
CODE_23CBE3:
	INC.b !RAM_SMB3_Level_Player_YSpeed
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	INC.b !RAM_SMB3_Level_Player_YSpeed
CODE_23CBE5:
	LDY.b #$30
else
CODE_23CBE5:
	LDY.b #$20
endif
	LDA.b !RAM_SMB3_Level_Player_YSpeed
	BPL.b CODE_23CBFE
	LDY.w !RAM_SMB3_Level_Player_IsAboveTopOfLevelFlag
	BPL.b CODE_23CBFC
	LDY.w $0082
	CPY.b #$F8
	BCS.b CODE_23CBFC
	CLC
	ADC.b #$10
	STA.b !RAM_SMB3_Level_Player_YSpeed
CODE_23CBFC:
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDY.b #$D0
else
	LDY.b #$E0
endif
CODE_23CBFE:
	CLC
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	ADC.b #$30
	CMP.b #$60
else
	ADC.b #$20
	CMP.b #$40
endif
	BCC.b CODE_23CC07
	STY.b !RAM_SMB3_Level_Player_YSpeed
CODE_23CC07:
	RTS

CODE_23CC08:
	LDA.b $A6
	BEQ.b CODE_23CC45
	LDA.b !RAM_SMB3_Global_ControllerPress1
	BPL.b CODE_23CC23							; Note: !Joypad_A|(!Joypad_B>>8)
	LDA.w $0576
	BNE.b CODE_23CC20
CODE_23CC15:
	LDA.b #$00
	STA.w $0576
	STA.w $057F
	STA.w !RAM_SMB3_Level_Player_WalkingAnimationFrameCounter
CODE_23CC20:
	INC.w $0576
CODE_23CC23:
	LDA.w $0576
	BNE.b CODE_23CC46
	LDA.b !RAM_SMB3_Level_Player_XSpeed
	BNE.b CODE_23CC36
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$30
	LSR
	LSR
	LSR
	LSR
	STA.b $BA
CODE_23CC36:
	LDY.b $BA
	LDA.b !RAM_SMB3_Level_Player_CurrentPowerUp
	BNE.b CODE_23CC40
	INY
	INY
	INY
	INY
CODE_23CC40:
	LDA.w DATA_21E992,y
	STA.b !RAM_SMB3_Level_Player_CurrentPose
CODE_23CC45:
	RTS

CODE_23CC46:
	LDA.w $057F
	CMP.b #$06
	BCC.b CODE_23CC54
	DEC.w $0576
	BNE.b CODE_23CC15
	LDA.b #$05
CODE_23CC54:
	LDY.b !RAM_SMB3_Level_Player_CurrentPowerUp
	BNE.b CODE_23CC5B
	CLC
	ADC.b #$06
CODE_23CC5B:
	TAY
	LDA.w DATA_21E986,y
	STA.b !RAM_SMB3_Level_Player_CurrentPose
	RTS

;--------------------------------------------------------------------

CODE_23CC62:
	LDA.b !RAM_SMB3_Level_Player_XSpeed
	BPL.b CODE_23CC6A
	JSL.l SMB3_UnnecessaryInvertARt_Main
CODE_23CC6A:
	LSR
	LSR
	LSR
	TAY
	INC.w !RAM_SMB3_Level_Player_WalkingAnimationFrameCounter
	LDA.w !RAM_SMB3_Level_Player_WalkingAnimationFrameCounter
	CMP.w DATA_21EAF4,y
	BMI.b CODE_23CC8D
	LDA.b #$00
	STA.w !RAM_SMB3_Level_Player_WalkingAnimationFrameCounter
	INC.b $BA
	INC.w $057F
	LDA.b $BA
	CMP.b #$04
	BMI.b CODE_23CC8D
	LDA.b #$00
	STA.b $BA
CODE_23CC8D:
	LDA.b !RAM_SMB3_Global_ControllerHold1
	AND.b #(!Joypad_DPadL>>8)|(!Joypad_DPadR>>8)
	BNE.b CODE_23CC9B
	LDA.b !RAM_SMB3_Level_Player_XSpeed
	BNE.b CODE_23CC9B
	LDA.b #$02
	STA.b $BA
CODE_23CC9B:
	LDA.w !RAM_SMB3_Level_Player_TailSwipeTimer
	BNE.b CODE_23CCB0
	LDA.b !RAM_SMB3_Global_ControllerHold1
	AND.b #(!Joypad_DPadL>>8)|(!Joypad_DPadR>>8)
	BEQ.b CODE_23CCB0
	LDY.b #$00
	AND.b #$02
	BNE.b CODE_23CCAE
	LDY.b #$40
CODE_23CCAE:
	STY.b $BD
CODE_23CCB0:
	LDA.w !RAM_SMB3_Global_EnableDebugModeFlag
	CMP.b #$80
	BNE.b CODE_23CCE2
	LDA.b !RAM_SMB3_Global_ControllerPress1
	AND.b #!Joypad_Select>>8
	BEQ.b CODE_23CCE2
	LDA.b !RAM_SMB3_Global_ControllerHold1
	AND.b #!Joypad_A|(!Joypad_B>>8)|!Joypad_X|(!Joypad_Y>>8)
	BNE.b CODE_23CCDA
	LDA.b !RAM_SMB3_Level_Player_CurrentPowerUp
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	INC
else
	CLC
	ADC.b #$01
endif
	STA.w $0578
	CMP.b #$07
	BMI.b CODE_23CCD1
	LDA.b #$00
CODE_23CCD1:
	STA.w $0578
	INC.w $0578
	JMP.w CODE_23CCE2

CODE_23CCDA:
	LDA.w !RAM_SMB3_Level_Player_InKuriboShoeFlag
	EOR.b #$01
	STA.w !RAM_SMB3_Level_Player_InKuriboShoeFlag
CODE_23CCE2:
	LDA.b !RAM_SMB3_Level_Player_CurrentPowerUp
	ASL
	ASL
	ORA.b $BA
	TAY
	LDA.w DATA_21E958,y
	STA.b !RAM_SMB3_Level_Player_CurrentPose
	LDA.w !RAM_SMB3_Level_Player_IsSwimmingFlag
	BNE.b CODE_23CD40
	LDA.b !RAM_SMB3_Level_Player_XSpeed
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	INC
else
	CLC
	ADC.b #$01
endif
	CMP.b #$03
	BCC.b CODE_23CD40
	LDA.w $0573
	AND.b !RAM_SMB3_Global_ControllerHold1
	BEQ.b CODE_23CD40
	LDY.b !RAM_SMB3_Level_Player_CurrentPowerUp
	BEQ.b CODE_23CD09
	LDY.b #$01
CODE_23CD09:
	LDA.b $A6
	BNE.b CODE_23CD40
	LDA.w DATA_21E984,y
	STA.b !RAM_SMB3_Level_Player_CurrentPose
	LDA.l $7FC522
	ORA.l $7FC523
	BNE.b CODE_23CD40
	LDA.b #$10
	STA.l $7FC522
	LDA.b !RAM_SMB3_Level_Player_XPosLo
	STA.l $7FC524
	LDA.b $43
	STA.l $7FC526
	LDA.b !RAM_SMB3_Level_Player_YPosLo
	STA.l $7FC528
	LDA.b !RAM_SMB3_Level_Player_YPosHi
	STA.l $7FC52A
	LDA.b $BD
	STA.l $7FC52C
CODE_23CD40:
	LDA.w !RAM_SMB3_Level_Player_DuckingFlag
	BEQ.b CODE_23CD52
	LDY.b !RAM_SMB3_Level_Player_CurrentPowerUp
	LDA.w DATA_21AF64,y
	AND.b #$01
	TAY
	LDA.w DATA_21E9A6,y
	STA.b !RAM_SMB3_Level_Player_CurrentPose
CODE_23CD52:
	LDA.w !RAM_SMB3_Level_Player_SlidingXSpeed
	BEQ.b CODE_23CD70
	LDA.b $A6
	BNE.b CODE_23CD61
	LDA.b !RAM_SMB3_Global_ControllerHold1
	AND.b #(!Joypad_DPadL>>8)|(!Joypad_DPadR>>8)|(!Joypad_DPadU>>8)
	BEQ.b CODE_23CD66
CODE_23CD61:
	LDA.b #$00
	STA.w !RAM_SMB3_Level_Player_SlidingXSpeed
CODE_23CD66:
	LDA.b #$62
	LDY.b !RAM_SMB3_Level_Player_CurrentPowerUp
	BNE.b CODE_23CD6E
	LDA.b #$66
CODE_23CD6E:
	STA.b !RAM_SMB3_Level_Player_CurrentPose
CODE_23CD70:
	RTS

;--------------------------------------------------------------------

CODE_23CD71:
	LDA.b !RAM_SMB3_Level_Player_XSpeed
	BPL.b CODE_23CD79
	JSL.l SMB3_UnnecessaryInvertARt_Main
CODE_23CD79:
	CMP.b #$37
	BCC.b CODE_23CD9F
	LDA.w !RAM_SMB3_Level_Player_FlightTimer
	BNE.b CODE_23CD9F
	LDA.w !RAM_SMB3_Level_Player_DuckingFlag
	ORA.w !RAM_SMB3_Level_Player_InKuriboShoeFlag
	ORA.w !RAM_SMB3_Level_Player_IsClimbingFlag
	ORA.w !RAM_SMB3_Level_Player_SlidingXSpeed
	BNE.b CODE_23CD9F
	LDY.b $BA
	LDA.b !RAM_SMB3_Level_Player_CurrentPowerUp
	BNE.b CODE_23CD9A
	INY
	INY
	INY
	INY
CODE_23CD9A:
	LDA.w DATA_21E9B2,y
	STA.b !RAM_SMB3_Level_Player_CurrentPose
CODE_23CD9F:
	LDA.w !RAM_SMB3_Level_Player_SomersaultJumpFlag
	BEQ.b CODE_23CDBF
	LDA.b !RAM_SMB3_Global_FrameCounter
	LSR
	PHA
	AND.b #$07
	TAY
	LDA.w DATA_21EB14,y
	LDY.b !RAM_SMB3_Level_Player_XSpeed
	BPL.b CODE_23CDB4
	EOR.b #$40
CODE_23CDB4:
	STA.b $BD
	PLA
	AND.b #$03
	ASL
	CLC
	ADC.b #$34
	STA.b !RAM_SMB3_Level_Player_CurrentPose
CODE_23CDBF:
	LDA.w !RAM_SMB3_Level_Player_ShowCarryingAnimationFlag
	BEQ.b CODE_23CDDE
	LDY.b $BA
	LDA.b $A6
	BEQ.b CODE_23CDD1
	LDY.b #$00
	LDA.b !RAM_SMB3_Level_Player_CurrentPowerUp
	BNE.b CODE_23CDD1
	INY
CODE_23CDD1:
	LDA.b !RAM_SMB3_Level_Player_CurrentPowerUp
	BNE.b CODE_23CDD9
	INY
	INY
	INY
	INY
CODE_23CDD9:
	LDA.w DATA_21E9C6,y
	STA.b !RAM_SMB3_Level_Player_CurrentPose
CODE_23CDDE:
	LDA.w !RAM_SMB3_Level_Player_EnterVerticalPipeAnimationTimer
	BNE.b CODE_23CDF4
	LDA.w !RAM_SMB3_Level_Player_ShowCarryingAnimationFlag
	BEQ.b CODE_23CE01
	LDA.b $BD
	CMP.w $056C
	BEQ.b CODE_23CE01
	LDA.b #$07
	STA.w !RAM_SMB3_Level_Player_EnterVerticalPipeAnimationTimer
CODE_23CDF4:
	DEC.w !RAM_SMB3_Level_Player_EnterVerticalPipeAnimationTimer
	LDA.b #$0A
	LDY.b !RAM_SMB3_Level_Player_CurrentPowerUp
	BNE.b CODE_23CDFF
	LDA.b #$64
CODE_23CDFF:
	STA.b !RAM_SMB3_Level_Player_CurrentPose
CODE_23CE01:
	LDA.w !RAM_SMB3_Level_Player_KickAnimationTimer
	BEQ.b CODE_23CE18
	LDA.b #$00
	STA.w !RAM_SMB3_Level_Player_TailSwipeTimer
	LDY.b #$84
	LDA.b !RAM_SMB3_Level_Player_CurrentPowerUp
	BEQ.b CODE_23CE13
	LDY.b #$5A
CODE_23CE13:
	STY.b !RAM_SMB3_Level_Player_CurrentPose
	DEC.w !RAM_SMB3_Level_Player_KickAnimationTimer
CODE_23CE18:
	LDA.w !RAM_SMB3_Level_Player_SpinningTimer
	BEQ.b CODE_23CE54
	DEC.w !RAM_SMB3_Level_Player_SpinningTimer
	LDY.b #$00
	LDA.b !RAM_SMB3_Level_Player_CurrentPowerUp
	BEQ.b CODE_23CE3A
	CMP.b #$04
	BNE.b CODE_23CE2E
	LDY.b #$0C
	BRA.b CODE_23CE3A

CODE_23CE2E:
	LDY.b #$04
	TAX
	LDA.w DATA_21AF64,x
	AND.b #$01
	BEQ.b CODE_23CE3A
	LDY.b #$08
CODE_23CE3A:
	STY.b $00
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$0C
	LSR
	LSR
	PHA
	LSR
	TAY
	LDA.w DATA_21EB40,y
	STA.b $BD
	PLA
	CLC
	ADC.b $00
	TAY
	LDA.w DATA_21E9CE,y
	STA.b !RAM_SMB3_Level_Player_CurrentPose
CODE_23CE54:
	LDA.w !RAM_SMB3_Level_Player_DisableControlsTimer
	BEQ.b CODE_23CE60
	LDY.b !RAM_SMB3_Level_Player_CurrentPowerUp
	LDA.w DATA_21E9EC,y
	STA.b !RAM_SMB3_Level_Player_CurrentPose
CODE_23CE60:
	RTS

;--------------------------------------------------------------------

CODE_23CE61:
	LDA.b !RAM_SMB3_Global_ControllerHold1
	AND.b #!Joypad_DPadD>>8
	TAY
	BEQ.b CODE_23CE96
	BIT.b !RAM_SMB3_Global_ControllerPress1
	BVC.b CODE_23CE96						; Note: !Joypad_X|(!Joypad_Y>>8)
	LDA.w !RAM_SMB3_Level_Player_IsTanookiStatueTimer
	BNE.b CODE_23CE96
	JSR.w CODE_23CEC4
	LDA.b #$20
	STA.w $0578
	LDA.b #$17
	STA.w !RAM_SMB3_Level_Player_SmokePuffAnimationTimer
	BNE.b CODE_23CEC3
CODE_23CE80:
	LDA.b #$3C
	STA.b !RAM_SMB3_Level_Player_CurrentPose
	LDA.b #$00
	STA.b !RAM_SMB3_Level_Player_XSpeed
	LDA.b $A6
	BEQ.b CODE_23CE93
	LDA.b !RAM_SMB3_Level_Player_YSpeed
	CLC
	ADC.b #$07
	STA.b !RAM_SMB3_Level_Player_YSpeed
CODE_23CE93:
	PLA
	PLA
	RTS

;--------------------------------------------------------------------

CODE_23CE96:
	LDA.w !RAM_SMB3_Level_Player_IsTanookiStatueTimer
	BEQ.b CODE_23CEC3
	CMP.b #$01
	BEQ.b CODE_23CEAE
	CMP.b #$60
	BNE.b CODE_23CEA8
	LDA.b #$60
	STA.w !RAM_SMB3_Level_Player_HurtTimer
CODE_23CEA8:
	DEC.w !RAM_SMB3_Level_Player_IsTanookiStatueTimer
	TYA
	BNE.b CODE_23CE80
CODE_23CEAE:
	LDA.b #$00
	STA.w !RAM_SMB3_Level_Player_IsTanookiStatueTimer
	STA.w !RAM_SMB3_Level_Player_HurtTimer
	JSR.w CODE_23C467
	JSR.w CODE_23CEC4
	LDA.b #$17
	STA.w !RAM_SMB3_Level_Player_SmokePuffAnimationTimer
	BNE.b CODE_23CE80
CODE_23CEC3:
	RTS

CODE_23CEC4:
	LDA.b #!Define_SMAS_Sound0060_CarryItemToGoal
	STA.w !RAM_SMB3_Global_SoundCh1
	RTS

;--------------------------------------------------------------------

CODE_23CECA:
	LDA.w !RAM_SMB3_Level_Player_IsClimbingFlag
	BEQ.b CODE_23CEE5
	LDY.b !RAM_SMB3_Level_Player_CurrentPowerUp
	LDA.w DATA_21E9DE,y
	STA.b !RAM_SMB3_Level_Player_CurrentPose
	LDA.b !RAM_SMB3_Global_ControllerHold1
	AND.b #(!Joypad_DPadU>>8)|(!Joypad_DPadD>>8)
	BEQ.b CODE_23CEE5
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$08
	ASL
	ASL
	ASL
	STA.b $BD
CODE_23CEE5:
	RTS

;--------------------------------------------------------------------

CODE_23CEE6:
	LDA.w !RAM_SMB3_Level_Player_InQuicksandFlag
	LSR
	BCS.b CODE_23CF4D
	LDA.w $101F
	BNE.b CODE_23CF4D
	LDA.b $A6
	BEQ.b CODE_23CF4D
	LDA.w !RAM_SMB3_Level_Player_DuckingFlag
	BNE.b CODE_23CF2F
	LDA.b !RAM_SMB3_Global_ControllerPress1
	BPL.b CODE_23CF0F							; Note: !Joypad_A|(!Joypad_B>>8)
	LDA.w !RAM_SMB3_Global_SoundCh2
	CMP.b #!Define_SMAS_Sound0061_Jump
	BEQ.b CODE_23CF0A
	LDA.b #!Define_SMAS_Sound0063_SpinJump
	STA.w !RAM_SMB3_Global_SoundCh3
CODE_23CF0A:
	LDA.b #$0A
	STA.w $0511
CODE_23CF0F:
	LDA.w $0511
	LSR
	LSR
	STA.b $00
	LDA.b #$00
	LDY.w !RAM_SMB3_Level_Player_FlightTimer
	BNE.b CODE_23CF1F
	LDA.b #$06
CODE_23CF1F:
	LDY.b !RAM_SMB3_Level_Player_YSpeed
	BMI.b CODE_23CF26
	CLC
	ADC.b #$03
CODE_23CF26:
	CLC
	ADC.b $00
	TAY
	LDA.w DATA_21E9BA,y
	STA.b !RAM_SMB3_Level_Player_CurrentPose
CODE_23CF2F:
	LDA.w !RAM_SMB3_Level_Player_FlightTimer
	ORA.w $00BE
	BEQ.b CODE_23CF4D
	LDY.b #$FF
	LDA.b !RAM_SMB3_Level_Player_XSpeed
	BPL.b CODE_23CF43
	LDY.b #$01
	JSL.l SMB3_UnnecessaryInvertARt_Main
CODE_23CF43:
	CMP.b #$18
	BMI.b CODE_23CF4D
	TYA
	CLC
	ADC.b !RAM_SMB3_Level_Player_XSpeed
	STA.b !RAM_SMB3_Level_Player_XSpeed
CODE_23CF4D:
	RTS

;--------------------------------------------------------------------

CODE_23CF4E:
	LDA.w !RAM_SMB3_Level_Player_InQuicksandFlag
	LSR
	BCS.b CODE_23CF73
	LDA.w $101F
	BNE.b CODE_23CF73
	LDA.b $A6
	BEQ.b CODE_23CF73
	LDA.w !RAM_SMB3_Level_Player_DuckingFlag
	BNE.b CODE_23CF73
	LDA.b #$70
	LDY.w !RAM_SMB3_Level_Player_FlightTimer
	BNE.b CODE_23CF71
	LDA.b #$9E
	LDY.b !RAM_SMB3_Level_Player_YSpeed
	BMI.b CODE_23CF71
	LDA.b #$0C
CODE_23CF71:
	STA.b !RAM_SMB3_Level_Player_CurrentPose
CODE_23CF73:
	RTS

;--------------------------------------------------------------------

CODE_23CF74:
	LDA.b !RAM_SMB3_Global_ControllerHold1
	AND.b #!Joypad_DPadD>>8
	BNE.b CODE_23CFB4
	BIT.b !RAM_SMB3_Global_ControllerPress1
	BVC.b CODE_23CF8D					; Note: !Joypad_X|(!Joypad_Y>>8)
	LDA.w !RAM_SMB3_Level_Player_TailSwipeTimer
	BNE.b CODE_23CF8D
	LDA.b #$12
	STA.w !RAM_SMB3_Level_Player_TailSwipeTimer
	LDA.b #!Define_SMAS_Sound0063_SpinJump
	STA.w !RAM_SMB3_Global_SoundCh3
CODE_23CF8D:
	LDA.w !RAM_SMB3_Level_Player_TailSwipeTimer
	BEQ.b CODE_23CFB4
	LSR
	LSR
	TAY
	LDA.b $A6
	BEQ.b CODE_23CF9E
	INY
	INY
	INY
	INY
	INY
CODE_23CF9E:
	LDA.w DATA_21E99A,y
	STA.b !RAM_SMB3_Level_Player_CurrentPose
	LDA.w !RAM_SMB3_Level_Player_TailSwipeTimer
	CMP.b #$0B
	BEQ.b CODE_23CFAE
	CMP.b #$03
	BNE.b CODE_23CFB4
CODE_23CFAE:
	LDA.b $BD
	EOR.b #$40
	STA.b $BD
CODE_23CFB4:
	RTS

;--------------------------------------------------------------------

CODE_23CFB5:
	LDA.w $0513
	BEQ.b CODE_23CFC9
	LSR
	LSR
	LDY.b $A6
	BEQ.b CODE_23CFC3
	CLC
	ADC.b #$03
CODE_23CFC3:
	TAY
	LDA.w DATA_21E9A8,y
	STA.b !RAM_SMB3_Level_Player_CurrentPose
CODE_23CFC9:
	RTS

;--------------------------------------------------------------------

CODE_23CFCA:
	LDA.w !RAM_SMB3_Level_IsVerticalLevelFlag
	BEQ.b CODE_23CFD2
	JMP.w CODE_23D1FC

CODE_23CFD2:
	LDA.w !RAM_SMB3_Level_DisableScrollingFlag
	BEQ.b CODE_23CFDA
	JMP.w CODE_23D093

CODE_23CFDA:
	LDY.w $05FC
	BEQ.b CODE_23D00A
	BMI.b CODE_23D00A
	LDA.w !RAM_SMB3_Level_AutoscrollLayerXPosLo
	PHA
	SEC
	SBC.w $0210
	STA.w $0781
	PLA
	STA.w $0210
	STA.w $0212
	LDA.w !RAM_SMB3_Level_AutoscrollLayerXPosHi
	STA.b $12
	STA.w $0211
	LSR
	STA.w $0213
	ROR.w $0212
	LDA.w $1A07
	STA.b $25
	JMP.w CODE_23D0FA

CODE_23D00A:
	LDA.b !RAM_SMB3_Level_Player_XPosLo
	SEC
	SBC.w $0210
	BPL.b CODE_23D052
	LDA.b $12
	STA.b $00
	LDA.b #$80
	CLC
	ADC.w $0210
	STA.b $01
	BCC.b CODE_23D022
	INC.b $00
CODE_23D022:
	LDA.b $43
	CMP.b $00
	BMI.b CODE_23D093
	LDA.b !RAM_SMB3_Level_Player_XPosLo
	SEC
	SBC.b $01
	BEQ.b CODE_23D093
	BMI.b CODE_23D093
	STA.w $0781
	CLC
	ADC.w $0210
	STA.w $0210
	BCC.b CODE_23D042
	INC.b $12
	INC.w $0211
CODE_23D042:
	STZ.b $25
	LDA.b $12
	CMP.b !RAM_SMB3_Level_ScreensInLvl
	BMI.b CODE_23D093
	STZ.w $0210
	STZ.w $0781
	BRA.b CODE_23D093

CODE_23D052:
	LDA.b $12
	STA.b $00
	LDA.b #$70
	CLC
	ADC.w $0210
	STA.b $01
	BCC.b CODE_23D062
	INC.b $00
CODE_23D062:
	LDA.b $00
	CMP.b $43
	BMI.b CODE_23D093
	LDA.b !RAM_SMB3_Level_Player_XPosLo
	SEC
	SBC.b $01
	BPL.b CODE_23D093
	STA.w $0781
	CLC
	ADC.w $0210
	STA.w $0210
	BCS.b CODE_23D080
	DEC.b $12
	DEC.w $0211
CODE_23D080:
	LDA.b #$01
	STA.b $25
	LDA.b $12
	BPL.b CODE_23D093
	STZ.b $12
	STZ.w $0210
	STZ.w $0211
	STZ.w $0781
CODE_23D093:
	LDA.w !RAM_SMB3_Level_Layer3BGFromHeader
	CMP.b #$0B
	BNE.b CODE_23D0B0
	LDY.b #$00
	LDA.w $0781
	BPL.b CODE_23D0A2
	DEY
CODE_23D0A2:
	CLC
	ADC.w $0353
	STA.w $0353
	TYA
	ADC.w $0354
	STA.w $0354
CODE_23D0B0:
	REP.b #$20
	LDA.w $0210
	LSR
	STA.w $0212
	SEP.b #$20
	LDA.w !RAM_SMB3_Level_Player_GoalWalkAnimationTimer
	BNE.b CODE_23D0FA
	LDA.b !RAM_SMB3_Level_Player_OnScreenXPos
	LDY.b !RAM_SMB3_Level_Player_XSpeed
	BMI.b CODE_23D0CF
	CMP.b #$E8
	BCC.b CODE_23D0FA
	LDA.b #$E8
	JMP.w CODE_23D0D5

CODE_23D0CF:
	CMP.b #$11
	BCS.b CODE_23D0FA
	LDA.b #$10
CODE_23D0D5:
	STA.b !RAM_SMB3_Level_Player_OnScreenXPos
	LDY.b #$00
	SEC
	SBC.b !RAM_SMB3_Level_Player_XPosLo
	BPL.b CODE_23D0E0
	LDY.b #$FF
CODE_23D0E0:
	CLC
	ADC.b !RAM_SMB3_Level_Player_XPosLo
	STA.b !RAM_SMB3_Level_Player_XPosLo
	BCC.b CODE_23D0E8
	INY
CODE_23D0E8:
	TYA
	CLC
	ADC.b $43
	STA.b $43
	LDA.b !RAM_SMB3_Level_Player_XSpeed
	PHP
	AND.b #$0F
	PLP
	BPL.b CODE_23D0F8
	ORA.b #$F0
CODE_23D0F8:
	STA.b !RAM_SMB3_Level_Player_XSpeed
CODE_23D0FA:
	LDA.w !RAM_SMB3_Level_Layer1VerticalScrollSetting
	BEQ.b CODE_23D109
	CMP.b #$01
	BNE.b CODE_23D106
	JMP.w CODE_23D18A

CODE_23D106:
	JMP.w CODE_23D1EF

CODE_23D109:
	LDA.w $05FC
	BEQ.b CODE_23D177
CODE_23D10E:
	LDA.w !RAM_SMB3_Level_AutoscrollLayerYPosLo
	PHA
	SEC
	SBC.w $0216
	STA.w $0780
	PLA
	STA.w $0216
	STA.w $0543
	LDA.w $0350
	CMP.b #$01
	BEQ.b CODE_23D136
	CMP.b #$02
	BEQ.b CODE_23D15A
	CMP.b #$23
	BEQ.b CODE_23D15A
	LDA.w !RAM_SMB3_Global_CurrentWorld
	CMP.b #$05
	BNE.b CODE_23D15A
CODE_23D136:
	REP.b #$20
	LDA.w $0216
	LSR
	LSR
	STA.w $0218
	LDA.w $0216
	SEC
	SBC.w $0218
	STA.w $0218
	LDA.w $034F
	AND.w #$00FF
	BEQ.b CODE_23D158
	LDA.w $0216
	STA.w $0218
CODE_23D158:
	SEP.b #$20
CODE_23D15A:
	LDA.b $A6
	BEQ.b CODE_23D176
	LDA.w !RAM_SMB3_Level_Player_IsClimbingFlag
	ORA.w $05FE
	BNE.b CODE_23D176
	LDA.w $0780
	BPL.b CODE_23D16D
	DEC.b !RAM_SMB3_Level_Player_YPosHi
CODE_23D16D:
	CLC
	ADC.b !RAM_SMB3_Level_Player_YPosLo
	STA.b !RAM_SMB3_Level_Player_YPosLo
	BCC.b CODE_23D176
	INC.b !RAM_SMB3_Level_Player_YPosHi
CODE_23D176:
	RTL

CODE_23D177:
	LDA.w $0216
	CMP.b #$EF
	BNE.b CODE_23D18A
	LDA.w !RAM_SMB3_Level_Player_FlightTimer
	ORA.w !RAM_SMB3_Level_Player_IsClimbingFlag
	PHP
	LDA.b #$EF
	PLP
	BEQ.b CODE_23D1F2
CODE_23D18A:
	LDA.b !RAM_SMB3_Level_Player_YPosLo
	SEC
	SBC.w $0543
	STA.b $00
	LDA.b !RAM_SMB3_Level_Player_YPosHi
	SBC.w $0542
	BMI.b CODE_23D1A4
	LDA.b $00
	SEC
	SBC.b #$30
	BCS.b CODE_23D1B7
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	CMP.b #$FC
else
	CMP.b #$FD
endif
	BCS.b CODE_23D1A6
CODE_23D1A4:
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$FC
else
	LDA.b #$FD
endif
CODE_23D1A6:
	STA.w $0780
	CLC
	ADC.w $0216
	BCS.b CODE_23D1B4
	LDA.b #$00
	STA.w $0780
CODE_23D1B4:
	JMP.w CODE_23D1D2

CODE_23D1B7:
	LDA.b $00
	SEC
	SBC.b #$79
	BCC.b CODE_23D1EF
	STA.w $0780
	CLC
	ADC.w $0216
	BCS.b CODE_23D1CB
	CMP.b #$EF
	BCC.b CODE_23D1D2
CODE_23D1CB:
	LDA.b #$00
	STA.w $0780
	LDA.b #$EF
CODE_23D1D2:
	STA.w $0216
	LSR
	LSR
	STA.w $0218
	LDA.w $0216
	SEC
	SBC.w $0218
	STA.w $0218
	LDA.w $034F
	BEQ.b CODE_23D1EF
	LDA.w $0216
	STA.w $0218
CODE_23D1EF:
	LDA.w $0216
CODE_23D1F2:
	STA.w $0543
	LDA.w $0217
	STA.w $0542
	RTL

CODE_23D1FC:
	LDA.b #$00
	STA.b $43
	LDY.b !RAM_SMB3_Level_ScreensInLvl
	LDA.w DATA_21CEED,y
	STA.b $00
	LDA.w DATA_21CEFD,y
	STA.b $01
	LDA.b !RAM_SMB3_Level_Player_YPosLo
	SEC
	SBC.w $0543
	TAY
	LDA.b !RAM_SMB3_Level_Player_YPosHi
	SBC.w $0542
	BEQ.b CODE_23D21D
	JMP.w CODE_23D2B5

CODE_23D21D:
	TYA
	SEC
	SBC.b #$30
	BCS.b CODE_23D24D
	DEC.w $0542
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	CMP.b #$FC
else
	CMP.b #$FD
endif
	BCS.b CODE_23D22C
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$FC
else
	LDA.b #$FD
endif
CODE_23D22C:
	STA.w $0780
	CLC
	ADC.w $0543
	STA.w $0543
	LDA.b #$00
	STA.b $25
	ADC.w $0542
	BPL.b CODE_23D247
	LDA.b #$00
	STA.w $0543
	STA.w $0780
CODE_23D247:
	STA.w $0542
	JMP.w CODE_23D28C

CODE_23D24D:
	TYA
	SBC.b #$58
	BCC.b CODE_23D2B5
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	CMP.b #$05
else
	CMP.b #$04
endif
	BCC.b CODE_23D258
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$05
else
	LDA.b #$04
endif
CODE_23D258:
	STA.w $0780
	CLC
	ADC.w $0543
	STA.w $0543
	LDA.b #$00
	ADC.w $0542
	STA.w $0542
	CMP.b $00
	PHP
	LDA.b #$01
	STA.b $25
	PLP
	BCC.b CODE_23D28C
	BNE.b CODE_23D27D
	LDA.w $0543
	CMP.b $01
	BCC.b CODE_23D28C
CODE_23D27D:
	LDA.b $00
	STA.w $0542
	LDA.b $01
	STA.w $0543
	LDA.b #$00
	STA.w $0780
CODE_23D28C:
	REP.b #$20
	LDA.w $0542
	XBA
	STA.w $0216
	LSR
	LSR
	STA.w $0218
	LDA.w $0216
	SEC
	SBC.w $0218
	STA.w $0218
	SEP.b #$20
	LDA.w $0542
	STA.b $13
	LDA.w !RAM_SMB3_Level_IsVerticalLevelFlag
	BEQ.b CODE_23D2B5
	LDA.b #$0F
	STA.w !RAM_SMB3_Global_ScreenDisplayRegisterMirror
CODE_23D2B5:
	RTL

;--------------------------------------------------------------------

CODE_23D2B6:
	STZ.w $1CEF
	LDA.w !RAM_SMB3_Level_IsVerticalLevelFlag
	BNE.b CODE_23D331
	LDA.w $058B
	BEQ.b CODE_23D2E4
	LDA.w !RAM_SMB3_Level_Player_IsAboveTopOfLevelFlag
	BNE.b CODE_23D2E4
	LDA.b !RAM_SMB3_Level_Player_YPosLo
	CLC
	ADC.b $09
	SEC
	SBC.w $0543
	CMP.b #$A0
	BCC.b CODE_23D2E4
	SBC.b #$10
	AND.b #$F0
	STA.b $0D
	LDA.b #$01
	STA.b $0C
	STA.w $1CEF
	BNE.b CODE_23D2F3
CODE_23D2E4:
	LDA.b !RAM_SMB3_Level_Player_YPosHi
	STA.b $0C
	LDA.b $09
	CLC
	ADC.b !RAM_SMB3_Level_Player_YPosLo
	STA.b $0D
	BCC.b CODE_23D2F3
	INC.b $0C
CODE_23D2F3:
	LDA.b $0C
	BEQ.b CODE_23D306
	CMP.b #$01
	BNE.b CODE_23D301
	LDA.b $0D
	CMP.b #$B0
	BCC.b CODE_23D306
CODE_23D301:
	LDA.b #$00
	STA.b $B4
	RTL

CODE_23D306:
	LDA.b $43
	STA.b $0E
	LDA.b $0A
	BPL.b CODE_23D310
	DEC.b $0E
CODE_23D310:
	LDA.b !RAM_SMB3_Level_Player_XPosLo
	CLC
	ADC.b $0A
	STA.b $0F
	BCC.b CODE_23D31B
	INC.b $0E
CODE_23D31B:
	STY.b $09
	STX.b $0A
	JSL.l CODE_209FA5
	LDX.b $0A
	LDY.w $0571
	BNE.b CODE_23D32E
	JSL.l SMB3_ModifyMap16IDForPSwitchAffectedBlocks_Main
CODE_23D32E:
	LDY.b $09
	RTL

CODE_23D331:
	LDA.b !RAM_SMB3_Level_Player_YPosHi
	STA.b $0C
	LDA.b $09
	CLC
	ADC.b !RAM_SMB3_Level_Player_YPosLo
	STA.b $0D
	BCC.b CODE_23D340
	INC.b $0C
CODE_23D340:
	LDA.b $0C
	BPL.b CODE_23D347
	LDA.b #$00
	RTL

CODE_23D347:
	LDA.b !RAM_SMB3_Level_Player_XPosLo
	CLC
	ADC.b $0A
	STA.b $0F
	STY.b $09
	JSL.l CODE_209F2E
	LDY.w $0571
	BNE.b CODE_23D35D
	JSL.l SMB3_ModifyMap16IDForPSwitchAffectedBlocks_Main
CODE_23D35D:
	LDY.b #$00
	STY.b $0E
	LDY.b $09
	RTL

;--------------------------------------------------------------------

CODE_23D364:
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	STZ.w !RAM_SMB3_Level_Player_HitCeilingFlag
else
	LDA.b #$00
	STA.w !RAM_SMB3_Level_Player_HitCeilingFlag
endif
	LDA.w $0571
	BEQ.b CODE_23D36F
	RTS

CODE_23D36F:
	LDA.w DATA_21AD82
	STA.b $52
	LDA.w DATA_21AD82+$01
	STA.b $53
	LDA.w $0563
	BEQ.b CODE_23D396
	LDA.w !RAM_SMB3_Global_TilesetFromHeader
	CMP.b #$03
	BEQ.b CODE_23D393
	CMP.b #$0E
	BEQ.b CODE_23D393
	LDA.w DATA_21AD80
	STA.b $52
	LDA.w DATA_21AD80+$01
	STA.b $53
CODE_23D393:
	JMP.w CODE_23D896

CODE_23D396:
	LDY.b #$26
	LDA.b !RAM_SMB3_Level_Player_CurrentPowerUp
	BEQ.b CODE_23D3A3
	LDA.w !RAM_SMB3_Level_Player_DuckingFlag
	BNE.b CODE_23D3A3
	LDY.b #$06
CODE_23D3A3:
	LDX.b #$03
	LDA.b !RAM_SMB3_Level_Player_YSpeed
	BPL.b CODE_23D3AE
	TYA
	CLC
	ADC.b #$10
	TAY
CODE_23D3AE:
	LDA.b !RAM_SMB3_Level_Player_XPosLo
	AND.b #$0F
	CMP.b #$08
	BMI.b CODE_23D3BB
	TYA
	CLC
	ADC.b #$08
	TAY
CODE_23D3BB:
	TYA
	PHA
	LDA.w DATA_21EB42,y
	STA.b $09
	LDA.w DATA_21EB42+$01,y
	STA.b $0A
	JSL.l CODE_23D2B6
	STA.w $0603,x
	PHA
	AND.b #$C0
	ASL
	ROL
	ROL
	STA.w $0608,x
	PLA
	JSR.w CODE_23D4C9
	PLA
	TAY
	DEY
	DEY
	DEX
	BMI.b CODE_23D3E5
	JMP.w CODE_23D3BB

CODE_23D3E5:
	LDY.b #$02
	JSR.w CODE_23D4B4
	BCC.b CODE_23D42D
	LDA.w !RAM_SMB3_Level_Player_BigInSmallSpaceFlag
	BNE.b CODE_23D42D
	INC.w !RAM_SMB3_Level_Player_WalkingAnimationFrameCounter
	LDY.b #$01
	LDX.b #$00
	LDA.b !RAM_SMB3_Level_Player_XPosLo
	AND.b #$0F
	CMP.b #$08
	BPL.b CODE_23D403
	LDY.b #$FF
	INX
CODE_23D403:
	LDA.b !RAM_SMB3_Level_Player_CurrentPowerUp
	BNE.b CODE_23D409
	INX
	INX
CODE_23D409:
	LDA.w DATA_21EBA8,x
	CLC
	ADC.b !RAM_SMB3_Level_Player_XPosLo
	AND.b #$0F
	BEQ.b CODE_23D42D
	TYA
	BPL.b CODE_23D418
	DEC.b $43
CODE_23D418:
	CLC
	ADC.b !RAM_SMB3_Level_Player_XPosLo
	STA.b !RAM_SMB3_Level_Player_XPosLo
	BCC.b CODE_23D421
	INC.b $43
CODE_23D421:
	INY
	LDA.b !RAM_SMB3_Level_Player_XSpeed
	BPL.b CODE_23D428
	DEY
	DEY
CODE_23D428:
	TYA
	BNE.b CODE_23D42D
	STA.b !RAM_SMB3_Level_Player_XSpeed
CODE_23D42D:
	LDA.b !RAM_SMB3_Level_Player_YSpeed
	BPL.b CODE_23D453
	LDA.b $A6
	BEQ.b CODE_23D453
	LDY.b #$00
	JSR.w CODE_23D4B4
	BCC.b CODE_23D452
	LDA.b #!Define_SMAS_Sound0060_HitHead
	STA.w !RAM_SMB3_Global_SoundCh1
	INY
	STY.w !RAM_SMB3_Level_Player_HitCeilingFlag
	LDA.w !RAM_SMB3_Level_AutoscrollLayerYSpeed
	JSL.l SMB3_UnnecessaryInvertARt_Main
	BPL.b CODE_23D450
	LDA.b #$01
CODE_23D450:
	STA.b !RAM_SMB3_Level_Player_YSpeed
CODE_23D452:
	RTS

CODE_23D453:
	LDX.w $0609
	LDA.w $0604
	CMP.w !RAM_SMB3_Global_Map16FloorTileAttributeTable,x
	BCS.b CODE_23D476
	LDX.w $0608
	LDA.w $0603
	CMP.w !RAM_SMB3_Global_Map16FloorTileAttributeTable,x
	BCS.b CODE_23D476
	LDA.b $A6
	BNE.b CODE_23D4B3
	STA.b !RAM_SMB3_Level_Player_YSpeed
	LDA.b #$01
	STA.b $A6
	JMP.w CODE_23D4B3

CODE_23D476:
	LDA.w $1CEF
	BEQ.b CODE_23D494
	LDA.b !RAM_SMB3_Level_Player_YPosLo
	SEC
	SBC.w $0543
	AND.b #$F0
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	INC
else
	CLC
	ADC.b #$01
endif
	CLC
	ADC.w $0543
	STA.b !RAM_SMB3_Level_Player_YPosLo
	LDA.b #$00
	ADC.b #$00
	STA.b !RAM_SMB3_Level_Player_YPosHi
	BPL.b CODE_23D4AA
CODE_23D494:
	LDA.b !RAM_SMB3_Level_Player_YPosLo
	AND.b #$0F
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	CMP.b #$08
else
	CMP.b #$06
endif
	BCS.b CODE_23D4B3
	LDA.b !RAM_SMB3_Level_Player_YPosLo
	AND.b #$0F
	BEQ.b CODE_23D4AA
	CMP.b #$01
	BEQ.b CODE_23D4A8
	DEC.b !RAM_SMB3_Level_Player_YPosLo
CODE_23D4A8:
	DEC.b !RAM_SMB3_Level_Player_YPosLo
CODE_23D4AA:
	LDA.b #$00
	STA.b $A6
	STA.b !RAM_SMB3_Level_Player_YSpeed
	STA.w !RAM_SMB3_Level_ConsecutiveEnemiesStompedCounter
CODE_23D4B3:
	RTS

CODE_23D4B4:
	LDX.w $0609,y
	LDA.w $0604,y
	CMP.w !RAM_SMB3_Global_Map16WallTileAttributeTable,x
	BCS.b CODE_23D4C8
	LDX.w $0608,y
	LDA.w $0603,y
	CMP.w !RAM_SMB3_Global_Map16WallTileAttributeTable,x
CODE_23D4C8:
	RTS

CODE_23D4C9:
	TYA
	PHA
	LDY.w !RAM_SMB3_Level_Player_InKuriboShoeFlag
	BNE.b CODE_23D4FC
	LDA.b #$32
	CMP.w $0603,x
	BNE.b CODE_23D4FC
	BIT.b !RAM_SMB3_Global_ControllerPress1
	BVC.b CODE_23D4FC						; Note: !Joypad_X|(!Joypad_Y>>8)
	CPX.b #$03
	BEQ.b CODE_23D4FC
	LDA.w $0564
	BNE.b CODE_23D4FC
	TXA								; Glitch: It seems Nintendo forgot that both X and Y can pickup blocks, and didn't add a check for if you're already holding something...
	PHA
	JSR.w CODE_23D548
	TXA
	ASL
	PLA
	TAX
	BCS.b CODE_23D4FC
	LDA.b #$00
	STA.w !RAM_SMB3_Level_Player_TailSwipeTimer
	LDA.b #$02
	JSR.w CODE_23DE37
	JMP.w CODE_23D545

CODE_23D4FC:
	LDA.w $0603,x
	CMP.b #$40
	BNE.b CODE_23D519
	LDA.b #$01
	JSR.w CODE_23DE37
	JSL.l CODE_209B7C
	LDA.b #!Define_SMAS_Sound0063_Coin
	STA.w !RAM_SMB3_Global_SoundCh3
	LDA.b #$00
	STA.w $0604
	JMP.w CODE_23D545

CODE_23D519:
	CMP.b #$F2
	BNE.b CODE_23D542
	CPX.b #$02
	BPL.b CODE_23D542
	LDA.b #$09
	CMP.w $0564
	BEQ.b CODE_23D542
	JSR.w CODE_23DE37
	LDA.b #$10
	STA.w !RAM_SMB3_Level_ShakeLayer1Timer
	LDA.b #!Define_SMAS_Sound0060_ONOFFSwitch
	STA.w !RAM_SMB3_Global_SoundCh1
	LDA.b #$84
	STA.w !RAM_SMB3_Level_PSwitchTimer
	LDA.b #!Define_SMB3_LevelMusic_ToadHouse
	STA.w !RAM_SMB3_Global_MusicCh1
	JMP.w CODE_23D545

CODE_23D542:
	JSR.w CODE_23D567
CODE_23D545:
	PLA
	TAY
	RTS

CODE_23D548:
	LDX.b #$04
CODE_23D54A:
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	BEQ.b CODE_23D553
	DEX
	BPL.b CODE_23D54A
	RTS

CODE_23D553:
	JSL.l CODE_279C97
	LDA.b #$04
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	LDA.b #!Define_SMB3_SpriteID_NorSpr05C_ThrowBlock
	STA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	LDA.b #$80
	STA.w !RAM_SMB3_NorSpr05C_ThrowBlock_DespawnTimer,x
	RTS

CODE_23D567:
	TYA
	PHA
	LDY.b #$03
	CPX.b #$04
	BEQ.b CODE_23D573
	LDA.b !RAM_SMB3_Level_Player_YSpeed
	BPL.b CODE_23D57E
CODE_23D573:
	INY
	INY
	INY
	LDA.w $0560
	CMP.b #$08
	BNE.b CODE_23D57E
	INY
CODE_23D57E:
	LDA.w $0603,x
	SEC
	SBC.w DATA_21EC13,y
	CMP.w DATA_21EC03,y
	BCC.b CODE_23D590
CODE_23D58A:
	DEY
	BPL.b CODE_23D57E
	JMP.w CODE_23D619

CODE_23D590:
	CLC
	ADC.w DATA_21EC0B,y
	STA.b $05
	LDA.w DATA_21EC23,x
	AND.w DATA_21EC1B,y
	BEQ.b CODE_23D58A
	LDA.b #$10
	STA.w $1A45
	LDY.b $05
	LDA.w DATA_21EBC3,y
	JSR.w CODE_23D61C
	TYA
	BNE.b CODE_23D5B1
	JMP.w CODE_23D619

CODE_23D5B1:
	BMI.b CODE_23D5D6
	LDY.b $05
	ORA.w DATA_21EBE3,y
	STA.w $057C
	LDA.b #!Define_SMAS_Sound0060_HitHead
	STA.w !RAM_SMB3_Global_SoundCh1
	LDA.b #$02
	STA.b $0B
	CPX.b #$02
	BMI.b CODE_23D5D6
	LDY.b #$02
	LDA.b !RAM_SMB3_Level_Player_XPosLo
	AND.b #$0F
	CMP.b #$08
	BMI.b CODE_23D5D3
	INY
CODE_23D5D3:
	JMP.w CODE_23D5E7

CODE_23D5D6:
	LDY.b #$00
	LDA.w $0563
	BEQ.b CODE_23D5E2
	TXA
	BEQ.b CODE_23D5E7
	BNE.b CODE_23D5E6
CODE_23D5E2:
	LDA.b !RAM_SMB3_Level_Player_YSpeed
	BPL.b CODE_23D5E7
CODE_23D5E6:
	INY
CODE_23D5E7:
	STY.w $057D
	LDY.b #$06
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,y
	BEQ.b CODE_23D5F2
	INY
CODE_23D5F2:
	LDA.b $0D
	AND.b #$F0
	STA.b $0D
	STA.w !RAM_SMB3_Level_NorSpr_YPosLo,y
	LDA.b $0C
	STA.w !RAM_SMB3_Level_NorSpr_YPosHi,y
	LDA.b $0E
	STA.w !RAM_SMB3_Level_NorSpr_XPosHi,y
	LDA.b $0F
	STA.w !RAM_SMB3_Level_NorSpr_XPosLo,y
	JSL.l CODE_27A8B2
	LDA.w $057D
	BEQ.b CODE_23D619
	LDA.b #$F3
	JSL.l CODE_27A75E
CODE_23D619:
	PLA
	TAY
	RTS

CODE_23D61C:
	STA.b $00
	LDA.w $057C
	BNE.b CODE_23D645
	LDY.b #$06
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,y
	ORA.w $052E
	BEQ.b CODE_23D635
	LDA.w $0662,y
	ORA.w $052F
	BNE.b CODE_23D645
CODE_23D635:
	LDY.b #$05
	LDA.w $0518,y
	BEQ.b CODE_23D648
	LDA.b $0F
	AND.b #$F0
	CMP.w !RAM_SMB3_Level_NorSpr_XPosLo,y
	BNE.b CODE_23D648
CODE_23D645:
	LDY.b #$00
	RTS

CODE_23D648:
	LDA.b $0F
	AND.b #$F0
	STA.b $0F
	LDA.b $00
	ASL
	TAY
	PHB
	PHK
	PLB
	LDA.w DATA_23DD63,y
	STA.b $00
	LDA.w DATA_23DD63+$01,y
	STA.b $01
	PLB
	JMP.w ($0000)

DATA_23DD63:
	dw CODE_23D67B
	dw CODE_23D67E
	dw CODE_23D68C
	dw CODE_23D69A
	dw CODE_23D6A2
	dw CODE_23D6C2
	dw CODE_23D6D2
	dw CODE_23D74D
	dw CODE_23D757
	dw CODE_23D76B
	dw CODE_23D777
	dw CODE_23D7C8

;--------------------------------------------------------------------

CODE_23D67B:
	LDY.b #$01
	RTS

;--------------------------------------------------------------------

CODE_23D67E:
	LDA.b #$00
	STA.w $0586
	LDY.b #$05
	LDA.b !RAM_SMB3_Level_Player_CurrentPowerUp
	BEQ.b CODE_23D68B
	LDY.b #$02
CODE_23D68B:
	RTS

;--------------------------------------------------------------------

CODE_23D68C:
	LDA.b #$00
	STA.w $0586
	LDY.b #$05
	LDA.b !RAM_SMB3_Level_Player_CurrentPowerUp
	BEQ.b CODE_23D699
	LDY.b #$03
CODE_23D699:
	RTS

;--------------------------------------------------------------------

CODE_23D69A:
	LDA.b #$80
	STA.w $0586
	LDY.b #$04
	RTS

;--------------------------------------------------------------------

CODE_23D6A2:
	JSR.w CODE_23D7D2
	LDY.b #$01
	LDA.b $0F
	ORA.b $0E
	CMP.w $0582
	BNE.b CODE_23D6C1
	LDA.w $0516
	BEQ.b CODE_23D6C1
	LDA.w !RAM_SMB3_Level_10CoinBlockCounter
	BMI.b CODE_23D6C1
	DEC.w !RAM_SMB3_Level_10CoinBlockCounter
	LDA.b #$17
	STA.b $05
CODE_23D6C1:
	RTS

;--------------------------------------------------------------------

CODE_23D6C2:
	LDA.b #$80
	STA.w $0586
	LDY.b #$04
	LDA.w !RAM_SMB3_Level_Player_StarPowerTimer
	BNE.b CODE_23D6D1
	JMP.w CODE_23D6A2

CODE_23D6D1:
	RTS

;--------------------------------------------------------------------

CODE_23D6D2:
	JSR.w CODE_23D7ED
	CPX.b #$04
	BEQ.b CODE_23D6E0
	LDA.b !RAM_SMB3_Level_Player_CurrentPowerUp
	BNE.b CODE_23D6E0
	LDY.b #$01
	RTS

CODE_23D6E0:
	LDA.b #!Define_SMAS_Sound0063_BreakBlock
	STA.w !RAM_SMB3_Global_SoundCh3
	JSL.l CODE_279545
	LDA.b #$02
	STA.w !RAM_SMB3_Level_MExtSpr_SpriteID
	LDA.w $0543
	STA.b $D8
	LDA.w $0542
	STA.b $D9
	LDA.b $0C
	XBA
	LDA.b $0D
	REP.b #$20
	AND.w #$FFF0
	SEC
	SBC.b $D8
	STA.b $DA
	CLC
	ADC.w #$0008
	STA.b $DC
	SEP.b #$20
	LDA.b $DA
	STA.w !RAM_SMB3_Level_MExtSpr_YPosLo
	LDA.b $DB
	STA.w !RAM_SMB3_Level_MExtSpr_Table7E1FB1
	LDA.b $DC
	STA.w !RAM_SMB3_Level_MExtSpr_Table7E1FAB
	LDA.b $DD
	STA.b !RAM_SMB3_Level_MExtSpr_Table7E00DF
	LDA.b $0E
	XBA
	LDA.b $0F
	REP.b #$20
	SEC
	SBC.w $0210
	SEP.b #$20
	STA.w !RAM_SMB3_Level_MExtSpr_XPosLo
	XBA
	STA.w !RAM_SMB3_Level_MExtSpr_XPosHi
	STZ.w !RAM_SMB3_Level_MExtSpr_Table7E1FA8
	STZ.w !RAM_SMB3_Level_MExtSpr_Table7E1FAE
	LDA.b #$FA
	STA.w !RAM_SMB3_Level_MExtSpr_Table7E1FA5
	LDA.b #$01
	STA.w !RAM_SMB3_Global_PointsToGiveLo
	LDY.b #$02
	STY.b $0B
	LDY.b #$80
	RTS

;--------------------------------------------------------------------

CODE_23D74D:
	LDY.b #$00
	LDA.b #!Define_SMAS_Sound0063_HitVineBlock
	STA.w !RAM_SMB3_Global_SoundCh3
	LDY.b #$06
	RTS

;--------------------------------------------------------------------

CODE_23D757:
	LDA.b $0F
	ORA.b $0E
	STA.w $0582
	LDA.b #$09
	STA.w !RAM_SMB3_Level_10CoinBlockCounter
	LDA.b #$C8
	STA.w $0516
	JMP.w CODE_23D6A2

;--------------------------------------------------------------------

CODE_23D76B:
	JSL.l CODE_209B7C
	LDA.b #$00
	STA.w $0586
	LDY.b #$07
	RTS

;--------------------------------------------------------------------

CODE_23D777:
	LDY.b #$05
CODE_23D779:
	LDA.w !RAM_SMB3_Level_ExtSpr_SpriteID,y
	BEQ.b CODE_23D784
	DEY
	BPL.b CODE_23D779
	JMP.w CODE_23D78E

CODE_23D784:
	LDA.b #!Define_SMB3_SpriteID_ExtSpr16_SmokePuff
	STA.w !RAM_SMB3_Level_ExtSpr_SpriteID,y
	LDA.b #$20
	STA.w $06C7,y
CODE_23D78E:
	LDA.b $0D
	AND.b #$F0
	SEC
	SBC.b #$10
	PHP
	CPY.b #$00
	BMI.b CODE_23D79D
	STA.w !RAM_SMB3_Level_ExtSpr_YPosLo,y
CODE_23D79D:
	STA.w $052B
	PLP
	LDA.b $0C
	SBC.b #$00
	CPY.b #$00
	BMI.b CODE_23D7AC
	STA.w !RAM_SMB3_Level_ExtSpr_YPosHi,y
CODE_23D7AC:
	STA.w $052A
	LDA.b $0F
	CPY.b #$00
	BMI.b CODE_23D7B8
	STA.w !RAM_SMB3_Level_ExtSpr_XPosLo,y
CODE_23D7B8:
	STA.w $0529
	LDA.b $0E
	STA.w $0528
	LDA.b #$12
	STA.w $0564
	LDY.b #$01
	RTS

;--------------------------------------------------------------------

CODE_23D7C8:
	JSR.w CODE_23D6D2
	BEQ.b CODE_23D7D1
	LDA.b #$0C
	STA.b $0B
CODE_23D7D1:
	RTS

;--------------------------------------------------------------------

CODE_23D7D2:
	INC.w !RAM_SMB3_Global_CoinsToGive
	LDA.l $7E3966
	INC
	STA.l $7E3966
	LDA.b $0D
	STA.b $00
	LDA.b $0F
	ORA.b #$04
	STA.b $01
	JSL.l CODE_278AE8
	RTS

;--------------------------------------------------------------------

CODE_23D7ED:
	LDA.b $0D
	PHA
	SEC
	SBC.b #$10
	STA.b $0D
	STX.b $04
	JSL.l CODE_209FA5
	LDX.b $04
	CMP.b #$40
	BNE.b CODE_23D80C
	LDA.b #$02
	JSR.w CODE_23DE37
	PLA
	STA.b $0D
	JMP.w CODE_23D7D2

CODE_23D80C:
	PLA
	STA.b $0D
	RTS

;--------------------------------------------------------------------

CODE_23D810:
	LDA.w !RAM_SMB3_Level_Player_TailSwipeTimer
	CMP.b #$09
	BNE.b CODE_23D83A
	LDY.b #$00
	LDA.b $BD
	BNE.b CODE_23D81F
	LDY.b #$02
CODE_23D81F:
	LDA.w DATA_21EC28,y
	STA.b $09
	LDA.w DATA_21EC28+$01,y
	STA.b $0A
	JSL.l CODE_23D2B6
	LDX.b #$04
	STA.w $0603,x
	JSR.w CODE_23D567
	LDA.b #$01
	STA.w $057D
CODE_23D83A:
	RTS

;--------------------------------------------------------------------

CODE_23D83B:
	LDX.b #$04
	STA.w $0603,x
	LDA.w $057C
	BNE.b CODE_23D895
	JSR.w CODE_23D567
	LDA.w $057C
	BEQ.b CODE_23D855
	LDA.b #$01
	STA.w $057D
	STA.w $057E
CODE_23D855:
	LDA.w $0560
	CMP.b #$0A
	BNE.b CODE_23D895
	LDX.b #$04
	LDA.w $0518,x
	BNE.b CODE_23D895
	LDA.b $0C
	STA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	LDA.b $0D
	SEC
	SBC.b #$10
	BCS.b CODE_23D870
	DEC.b !RAM_SMB3_Level_NorSpr_YPosHi,x
CODE_23D870:
	AND.b #$E0
	ORA.b #$10
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	LDA.b $0E
	STA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	LDA.b $0F
	AND.b #$E0
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	SEC
	SBC.w $0210
	TAY
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	SBC.b $12
	BNE.b CODE_23D895
	CPY.b #$E0
	BCS.b CODE_23D895
	LDA.w $0607
	STA.w $0691,x
CODE_23D895:
	RTL

;--------------------------------------------------------------------

CODE_23D896:
	LDY.b #$16
	LDA.w !RAM_SMB3_Level_Player_DuckingFlag
	BNE.b CODE_23D8A3
	LDA.b !RAM_SMB3_Level_Player_CurrentPowerUp
	BEQ.b CODE_23D8A3
	LDY.b #$06
CODE_23D8A3:
	LDA.b !RAM_SMB3_Level_Player_XPosLo
	AND.b #$0F
	CMP.b #$08
	BPL.b CODE_23D8B0
	TYA
	CLC
	ADC.b #$08
	TAY
CODE_23D8B0:
	LDX.b #$03
CODE_23D8B2:
	JSR.w CODE_23DADA
	JSR.w CODE_23D4C9
	DEY
	DEY
	DEX
	BPL.b CODE_23D8B2
	LDX.b #$00
	LDY.b #$00
	LDA.w $060D,x
	CMP.b #$04
	BEQ.b CODE_23D915
	CMP.b #$08
	BEQ.b CODE_23D915
	LDY.b $A6
	BNE.b CODE_23D8D9
	LDY.w $027F
	BNE.b CODE_23D8D9
	CMP.b #$00
	BEQ.b CODE_23D90C
CODE_23D8D9:
	STZ.w $027F
	INX
	LDA.w $060D,x
	CMP.b #$07
	BEQ.b CODE_23D8E8
	CMP.b #$04
	BNE.b CODE_23D934
CODE_23D8E8:
	LDX.b !RAM_SMB3_Level_Player_CurrentPowerUp
	BEQ.b CODE_23D8F4
	LDX.b #$01
	LDA.w !RAM_SMB3_Level_Player_DuckingFlag
	BEQ.b CODE_23D8F4
	DEX
CODE_23D8F4:
	LDA.b !RAM_SMB3_Level_Player_YPosLo
	CLC
	ADC.w DATA_21EBA6,x
	JSL.l SMB3_UnnecessaryInvertARt_Main
	AND.b #$0F
	CLC
	ADC.b !RAM_SMB3_Level_Player_YPosLo
	BCC.b CODE_23D907
	INC.b !RAM_SMB3_Level_Player_YPosHi
CODE_23D907:
	STA.b !RAM_SMB3_Level_Player_YPosLo
	JMP.w CODE_23D926

CODE_23D90C:
	LDA.b !RAM_SMB3_Level_Player_YPosLo
	AND.b #$0F
	CMP.b #$0A
	BMI.b CODE_23D934
	INY
CODE_23D915:
	LDA.b !RAM_SMB3_Level_Player_YPosLo
	AND.b #$F0
	CLC
	ADC.w DATA_21EC2E,y
	STA.b !RAM_SMB3_Level_Player_YPosLo
	LDA.b !RAM_SMB3_Level_Player_YPosHi
	ADC.w DATA_21EC2C,y
	STA.b !RAM_SMB3_Level_Player_YPosHi
CODE_23D926:
	LDA.w DATA_21EC30,x
	LDY.b !RAM_SMB3_Level_Player_CurrentPowerUp
	BEQ.b CODE_23D930
	CLC
	ADC.b #$10
CODE_23D930:
	TAY
	JSR.w CODE_23DADA
CODE_23D934:
	LDY.b #$02
	JSR.w CODE_23D4B4
	BCC.b CODE_23D979
	LDA.w !RAM_SMB3_Level_Player_BigInSmallSpaceFlag
	BNE.b CODE_23D979
	LDX.b #$00
	LDY.b #$01
	LDA.b !RAM_SMB3_Level_Player_XPosLo
	AND.b #$0F
	CMP.b #$08
	BPL.b CODE_23D94F
	INX
	LDY.b #$FF
CODE_23D94F:
	LDA.w DATA_21EBAC,x
	CLC
	ADC.b !RAM_SMB3_Level_Player_XPosLo
	AND.b #$0F
	BEQ.b CODE_23D979
	TYA
	BPL.b CODE_23D95E
	DEC.b $43
CODE_23D95E:
	CLC
	ADC.b !RAM_SMB3_Level_Player_XPosLo
	STA.b !RAM_SMB3_Level_Player_XPosLo
	BCC.b CODE_23D967
	INC.b $43
CODE_23D967:
	INY
	LDA.b !RAM_SMB3_Level_Player_XSpeed
	BPL.b CODE_23D96E
	DEY
	DEY
CODE_23D96E:
	TYA
	BNE.b CODE_23D979
	STA.b !RAM_SMB3_Level_Player_XSpeed
	STA.w !RAM_SMB3_Level_Player_SlidingXSpeed
	INC.w !RAM_SMB3_Level_Player_WalkingAnimationFrameCounter
CODE_23D979:
	LDX.b #$00
	LDY.w $060D
	LDA.w DATA_21EBAE,y
	BEQ.b CODE_23D984
	INX
CODE_23D984:
	LDA.b !RAM_SMB3_Level_Player_XPosLo
	CLC
	ADC.w DATA_21EB82+$01
	AND.b #$0F
	STA.b $00
	LDA.w $060D,x
	TAY
	LSR
	LSR
	LSR
	LSR
	CLC
	ADC.b $53
	STA.b $53
	TYA
	ASL
	ASL
	ASL
	ASL
	ORA.b $00
	STA.b $00
	LDA.w DATA_21AD5B,y
	STA.b $0F
	LDY.b $00
	TXA
	BNE.b CODE_23D9B1
	JMP.w CODE_23DA2C

CODE_23D9B1:
	LDA.w $060E
	CMP.b #$00
	BNE.b CODE_23D9D8
	LDA.b $A6
	BNE.b CODE_23D9D7
	LDX.b #$04
	LDY.b #$20
	LDA.b !RAM_SMB3_Level_Player_XPosLo
	AND.b #$0F
	CMP.b #$08
	BPL.b CODE_23D9CA
	INY
	INY
CODE_23D9CA:
	JSR.w CODE_23DADA
	CMP.b #$03
	BEQ.b CODE_23D9D7
	LDA.b #$00
	STA.b !RAM_SMB3_Level_Player_YSpeed
	INC.b $A6
CODE_23D9D7:
	RTS

CODE_23D9D8:
	LDX.b !RAM_SMB3_Level_Player_CurrentPowerUp
	BEQ.b CODE_23D9E4
	LDX.b #$01
	LDA.w !RAM_SMB3_Level_Player_DuckingFlag
	BEQ.b CODE_23D9E4
	DEX
CODE_23D9E4:
	LDA.b !RAM_SMB3_Level_Player_YPosLo
	CLC
	ADC.w DATA_21EBA6,x
	AND.b #$0F
	STA.b $00
	LDA.b ($52),y
	LSR
	LSR
	LSR
	LSR
	STA.b $01
	SEC
	SBC.b $00
	BMI.b CODE_23DA2B
	INC.w !RAM_SMB3_Level_Player_HitCeilingFlag
	PHA
	LDA.b !RAM_SMB3_Level_Player_YSpeed
	BPL.b CODE_23DA15
	LDA.w !RAM_SMB3_Level_AutoscrollLayerYSpeed
	JSL.l SMB3_UnnecessaryInvertARt_Main
	BPL.b CODE_23DA0E
	LDA.b #$00
CODE_23DA0E:
	STA.b !RAM_SMB3_Level_Player_YSpeed
	LDA.b #!Define_SMAS_Sound0060_HitHead
	STA.w !RAM_SMB3_Global_SoundCh1
CODE_23DA15:
	PLA
	LDY.w $060E
	CPY.b #$03
	BNE.b CODE_23DA22
	LDY.w !RAM_SMB3_Level_Player_BigInSmallSpaceFlag
	BNE.b CODE_23DA2B
CODE_23DA22:
	CLC
	ADC.b !RAM_SMB3_Level_Player_YPosLo
	STA.b !RAM_SMB3_Level_Player_YPosLo
	BCC.b CODE_23DA2B
	INC.b !RAM_SMB3_Level_Player_YPosHi
CODE_23DA2B:
	RTS

CODE_23DA2C:
	LDX.b $0F
	LDA.b $A6
	BEQ.b CODE_23DA41
	LDA.b !RAM_SMB3_Level_Player_YSpeed
	CMP.b #$E4
	BMI.b CODE_23D9D7
	LDA.b !RAM_SMB3_Level_Player_YPosLo
	AND.b #$0F
	SEC
	SBC.b ($52),y
	BMI.b CODE_23D9D7
CODE_23DA41:
	LDA.b #$00
	STA.b $A6
	STA.b !RAM_SMB3_Level_Player_YSpeed
	STA.w !RAM_SMB3_Level_ConsecutiveEnemiesStompedCounter
	LDA.b ($52),y
	AND.b #$0F
	STA.b $00
	LDA.b !RAM_SMB3_Level_Player_YPosLo
	AND.b #$F0
	CLC
	ADC.b $00
	STA.b !RAM_SMB3_Level_Player_YPosLo
	BCC.b CODE_23DA5D
	INC.b !RAM_SMB3_Level_Player_YPosHi
CODE_23DA5D:
	TXA
	BEQ.b CODE_23DA64
	EOR.b !RAM_SMB3_Level_Player_XSpeed
	AND.b #$80
CODE_23DA64:
	STA.w $0546
	LDA.w !RAM_SMB3_Level_Player_IsSwimmingFlag
	BEQ.b CODE_23DA73
	LDA.b #$00
	STA.w !RAM_SMB3_Level_Player_SlidingXSpeed
	BEQ.b CODE_23DAD2
CODE_23DA73:
	TXA
	LDY.w !RAM_SMB3_Level_Player_SlidingXSpeed
	BEQ.b CODE_23DA83
	BPL.b CODE_23DA7F
	JSL.l SMB3_UnnecessaryInvertARt_Main
CODE_23DA7F:
	CMP.b #$00
	BMI.b CODE_23DAC2
CODE_23DA83:
	LDA.w !RAM_SMB3_Level_Player_SlidingXSpeed
	BNE.b CODE_23DAA4
	TXA
	BEQ.b CODE_23DAD2
	LDY.b !RAM_SMB3_Level_Player_CurrentPowerUp
	LDA.w DATA_21AF64,y
	AND.b #$02
	BNE.b CODE_23DAD2
	LDA.w !RAM_SMB3_Level_Player_InKuriboShoeFlag
	BNE.b CODE_23DAD2
	LDA.b !RAM_SMB3_Global_ControllerHold1
	AND.b #(!Joypad_DPadL>>8)|(!Joypad_DPadR>>8)|(!Joypad_DPadD>>8)
	CMP.b #!Joypad_DPadD>>8
	BNE.b CODE_23DAD2
	JSR.w CODE_23CD66
CODE_23DAA4:
	TXA
	CLC
	ADC.w !RAM_SMB3_Level_Player_SlidingXSpeed
	STA.w !RAM_SMB3_Level_Player_SlidingXSpeed
	BPL.b CODE_23DAB2
	JSL.l SMB3_UnnecessaryInvertARt_Main
CODE_23DAB2:
	CMP.b #$40
	BMI.b CODE_23DAC2
	LDY.b #$40
	LDA.w !RAM_SMB3_Level_Player_SlidingXSpeed
	BPL.b CODE_23DABF
	LDY.b #$C0
CODE_23DABF:
	STY.w !RAM_SMB3_Level_Player_SlidingXSpeed
CODE_23DAC2:
	DEC.w !RAM_SMB3_Level_Player_SlidingXSpeed
	BPL.b CODE_23DACD
	INC.w !RAM_SMB3_Level_Player_SlidingXSpeed
	INC.w !RAM_SMB3_Level_Player_SlidingXSpeed
CODE_23DACD:
	LDA.w !RAM_SMB3_Level_Player_SlidingXSpeed
	STA.b !RAM_SMB3_Level_Player_XSpeed
CODE_23DAD2:
	LDA.b !RAM_SMB3_Level_Player_XSpeed
	BEQ.b CODE_23DAD9
	STX.w $0569
CODE_23DAD9:
	RTS

CODE_23DADA:
	LDA.w DATA_21EB82,y
	STA.b $09
	LDA.w DATA_21EB82+$01,y
	STA.b $0A
	JSL.l CODE_23D2B6
	STA.w $0603,x
	AND.b #$C0
	ASL
	ROL
	ROL
	STA.w $0608,x
	LDA.b $B4
	STA.w $060D,x
	RTS

;--------------------------------------------------------------------

CODE_23DAF9:
	LDA.w !RAM_SMB3_Level_Player_IsTanookiStatueTimer
	ORA.w !RAM_SMB3_Level_Player_TailSwipeTimer
	ORA.w !RAM_SMB3_Level_Player_SomersaultJumpFlag
	BNE.b CODE_23DB4E
	LDY.w $0560
	LDA.w DATA_21EC32,y
	STA.b $0F
	LDA.b $A6
	BNE.b CODE_23DB51
	LDA.w $0605
	LDY.w !RAM_SMB3_Level_IsVerticalLevelFlag
	BEQ.b CODE_23DB20
	LDY.b #$02
	CMP.b #$9E
	BEQ.b CODE_23DB2E
	LDY.b #$00
CODE_23DB20:
	CMP.b #$B5
	BEQ.b CODE_23DB2E
	BIT.b $0F
	BVC.b CODE_23DB51
	LDY.b #$03
	CMP.b #$BF
	BNE.b CODE_23DB51
CODE_23DB2E:
	LDX.b #$00
	LDA.b !RAM_SMB3_Level_Player_XPosLo
	AND.b #$0F
	CMP.b #$08
	BMI.b CODE_23DB39
	INX
CODE_23DB39:
	LDA.b !RAM_SMB3_Global_ControllerHold1
	AND.w DATA_21EC43,x
	BEQ.b CODE_23DB51
	TYA
	BNE.b CODE_23DB4B
	LDY.b #$01
	LDA.w !RAM_SMB3_Level_DisableScrollingFlag
	BEQ.b CODE_23DB4B
	DEY
CODE_23DB4B:
	JSR.w CODE_23DDCD
CODE_23DB4E:
	JMP.w CODE_23DBF3

CODE_23DB51:
	LDX.b #$02
	LDA.w $0603
	LDY.b $A6
	BEQ.b CODE_23DB6B
	LDY.w !RAM_SMB3_Level_Player_HitCeilingFlag
	BEQ.b CODE_23DB4E
	LDY.w !RAM_SMB3_Level_Player_DuckingFlag
	BEQ.b CODE_23DB67
	JMP.w CODE_23DBF3

CODE_23DB67:
	INX
	LDA.w $0604
CODE_23DB6B:
	STA.b $00
	STX.b $02
	LDA.b #$B0
	SEC
	SBC.b $00
	CMP.b #$04
	LDY.w !RAM_SMB3_Level_DisableScrollingFlag
	BEQ.b CODE_23DB7D
	AND.b #$01
CODE_23DB7D:
	TAY
	BCC.b CODE_23DBA1
	LDY.b $0F
	BPL.b CODE_23DB8F
	LDA.b #$BE
	SEC
	SBC.b $00
	CMP.b #$02
	LDY.b #$06
	BCC.b CODE_23DBA1
CODE_23DB8F:
	LDA.b #$B4
	LDY.w !RAM_SMB3_Level_IsVerticalLevelFlag
	BEQ.b CODE_23DB98
	LDA.b #$92
CODE_23DB98:
	SEC
	SBC.b $00
	CMP.b #$02
	BCS.b CODE_23DBF3
	LDY.b #$04
CODE_23DBA1:
	STY.b $00
	AND.b #$01
	ASL
	ASL
	ASL
	ASL
	STA.b $01
	LDA.b !RAM_SMB3_Global_ControllerHold1
	AND.w DATA_21EC43,x
	BEQ.b CODE_23DBF3
	LDA.w $0571
	BNE.b CODE_23DBF3
	LDY.b #$00
	LDA.b $A6
	ORA.w $0563
	BNE.b CODE_23DBC6
	INY
	LDA.b !RAM_SMB3_Level_Player_CurrentPowerUp
	BNE.b CODE_23DBC6
	INY
CODE_23DBC6:
	LDA.b !RAM_SMB3_Level_Player_XPosLo
	AND.b #$0F
	PHA
	CLC
	ADC.w DATA_21EC40,y
	AND.b #$10
	BNE.b CODE_23DBD7
	PLA
	ORA.b #$F0
	PHA
CODE_23DBD7:
	PLA
	CLC
	ADC.b $01
	SEC
	SBC.b #$03
	CMP.b #$0A
	BCS.b CODE_23DBF3
	LDA.b $00
	LSR
	TAY
	JSR.w CODE_23DDCD
	JSL.l CODE_23DDBB
	JSR.w CODE_23C08A
	PLA
	PLA
	RTS

CODE_23DBF3:
	LDY.w $0560
	LDA.b $A6
	BNE.b CODE_23DC1B
	LDA.w !RAM_SMB3_Level_PSwitchTimer
	BNE.b CODE_23DC1B
	LDX.b #$01
CODE_23DC01:
	LDA.w DATA_21AF48,y
	BEQ.b CODE_23DC1B
	SEC
	SBC.w $0603,x
	CMP.b #$02
	BCS.b CODE_23DC18
	TAX
	LDA.w DATA_21EC47,x
	STA.w $0569
	JMP.w CODE_23DC1B

CODE_23DC18:
	DEX
	BPL.b CODE_23DC01
CODE_23DC1B:
	LDX.b #$02
CODE_23DC1D:
	LDA.w SMB3_SpikeMap16TilePerTileset,y
	CMP.b #$FF
	BEQ.b CODE_23DC40
	SEC
	SBC.w $0602,x
	CMP.b #$02
	BCC.b CODE_23DC31
	DEX
	BPL.b CODE_23DC1D
	BMI.b CODE_23DC40						; Note: This will always branch.

CODE_23DC31:
	LDA.w !RAM_SMB3_Level_Player_InKuriboShoeFlag
	BEQ.b CODE_23DC3B
	LDA.w !RAM_SMB3_Level_Player_HitCeilingFlag
	BEQ.b CODE_23DC40
CODE_23DC3B:
	JSL.l CODE_27A4C7
	RTS

CODE_23DC40:
	LDX.b #$03
CODE_23DC42:
	LDA.w $0603,x
	CMP.w DATA_21AF56,y
	BEQ.b CODE_23DC4E
	CMP.b #$66
	BNE.b CODE_23DC5D
CODE_23DC4E:
	LDA.w !RAM_SMB3_Level_Player_InKuriboShoeFlag
	BEQ.b CODE_23DC58
	LDA.w !RAM_SMB3_Level_Player_HitCeilingFlag
	BEQ.b CODE_23DC60
CODE_23DC58:
	JSL.l CODE_27A4C7
	RTS

CODE_23DC5D:
	DEX
	BPL.b CODE_23DC42
CODE_23DC60:
	LDA.w !RAM_SMB3_Global_TilesetFromHeader
	CMP.b #$05
	BNE.b CODE_23DC98
	LDY.b #$00
	LDA.w $0245
	CMP.b #$01
	BEQ.b CODE_23DC75
	INY
	CMP.b #$00
	BNE.b CODE_23DC98
CODE_23DC75:
	LDX.b #$02
CODE_23DC77:
	LDA.w $0602,x
	PHA
	SEC
	SBC.w DATA_21EC4B,y
	CMP.b #$01
	PLA
	BCC.b CODE_23DC8F
	CMP.w DATA_21EC4D,y
	BEQ.b CODE_23DC8F
	DEX
	BPL.b CODE_23DC77
	JMP.w CODE_23DC98

CODE_23DC8F:
	LDA.w !RAM_SMB3_Level_Player_InKuriboShoeFlag
	BNE.b CODE_23DC98
	JSL.l CODE_27A4C7
CODE_23DC98:
	LDA.b #$00
	STA.w !RAM_SMB3_Level_Player_OnSlipperyGroundFlag
	LDA.w $0560
	CMP.b #$0B
	BNE.b CODE_23DCDE
	LDA.b $A6
	BNE.b CODE_23DCDE
	LDX.b #$01
CODE_23DCAA:
	LDA.w $0603,x
	TAY
	SEC
	SBC.b #$22
	CMP.b #$03
	BCC.b CODE_23DCBD
	TYA
	SEC
	SBC.b #$4A
	CMP.b #$03
	BCS.b CODE_23DCC3
CODE_23DCBD:
	INC.w !RAM_SMB3_Level_Player_OnSlipperyGroundFlag
	JMP.w CODE_23DCDE

CODE_23DCC3:
	TYA
	SEC
	SBC.b #$36
	CMP.b #$05
	BCC.b CODE_23DCD3
	CPY.b #$55
	BEQ.b CODE_23DCD3
	CPY.b #$56
	BNE.b CODE_23DCDB
CODE_23DCD3:
	LDA.b #$02
	STA.w !RAM_SMB3_Level_Player_OnSlipperyGroundFlag
	JMP.w CODE_23DCDE

CODE_23DCDB:
	DEX
	BPL.b CODE_23DCAA
CODE_23DCDE:
	LDA.w $0560
	CMP.b #$00
	BNE.b CODE_23DD23
	LDY.b #$01
CODE_23DCE7:
	LDA.w $0603,y
	SEC
	SBC.b #$25
	CMP.b #$03
	BCC.b CODE_23DCFB
	DEY
	BPL.b CODE_23DCE7
CODE_23DCF4:
	LDA.b #$00
	STA.w !RAM_SMB3_Level_Player_DuckingOnWhiteScrewBlockTimer
	BEQ.b CODE_23DD23
CODE_23DCFB:
	LDA.b !RAM_SMB3_Global_ControllerHold1
	AND.b #!Joypad_DPadD>>8
	BEQ.b CODE_23DCF4
	INC.w !RAM_SMB3_Level_Player_DuckingOnWhiteScrewBlockTimer
	LDA.w !RAM_SMB3_Level_Player_DuckingOnWhiteScrewBlockTimer
	CMP.b #$F0
	BNE.b CODE_23DD23
	LDA.b #$F0
	STA.w !RAM_SMB3_Level_Player_BehindLayer1Timer
	LDA.b #$00
	STA.b !RAM_SMB3_Level_Player_YSpeed
	LDA.b !RAM_SMB3_Level_Player_YPosLo
	CLC
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	ADC.b #$08
else
	ADC.b #$06
endif
	STA.b !RAM_SMB3_Level_Player_YPosLo
	INC.b $A6
	LDA.b !RAM_SMB3_Global_ControllerPress1
	AND.b #(!Joypad_A|(!Joypad_B>>8))^$FF
	STA.b !RAM_SMB3_Global_ControllerPress1
CODE_23DD23:
	LDA.w $0560
	CMP.b #$02
	BEQ.b CODE_23DD2E
	CMP.b #$0D
	BNE.b CODE_23DD8F
CODE_23DD2E:
	LDA.b !RAM_SMB3_Level_Player_YSpeed
	BMI.b CODE_23DD8F
	LDX.b #$03
CODE_23DD34:
	LDA.w $0603,x
	CMP.b #$49
	BEQ.b CODE_23DD4A
	CMP.b #$4A
	BEQ.b CODE_23DD4A
	DEX
	BPL.b CODE_23DD34
	LDA.b #$00
	STA.w !RAM_SMB3_Level_Player_InQuicksandFlag
	JMP.w CODE_23DD8F

CODE_23DD4A:
	LDA.b #$00
	STA.w !RAM_SMB3_Level_Player_DuckingFlag
	STA.w !RAM_SMB3_Level_Player_SlidingXSpeed
	LDA.w !RAM_SMB3_Level_Player_InQuicksandFlag
	BNE.b CODE_23DD59
	LDA.b !RAM_SMB3_Level_Player_YPosLo
CODE_23DD59:
	AND.b #$F0
	STA.w !RAM_SMB3_Level_Player_InQuicksandFlag
	LDA.b !RAM_SMB3_Level_Player_YPosLo
	SEC
	SBC.w !RAM_SMB3_Level_Player_InQuicksandFlag
	LDY.b #$E0
	TAX
	AND.b #$F0
	BNE.b CODE_23DD74
	TXA
	AND.b #$0F
	CMP.b #$03
	BCS.b CODE_23DD74
	LDY.b #$D0
CODE_23DD74:
	LDA.b !RAM_SMB3_Global_ControllerPress1
	BMI.b CODE_23DD7F							; Note: !Joypad_A|(!Joypad_B>>8)
	INC.w !RAM_SMB3_Level_Player_InQuicksandFlag
	LDY.b #$06
	BNE.b CODE_23DD84							; Note: This will always branch

CODE_23DD7F:
	LDA.b #!Define_SMAS_Sound0061_Jump
	STA.w !RAM_SMB3_Global_SoundCh2
CODE_23DD84:
	STY.b !RAM_SMB3_Level_Player_YSpeed
	LDA.b !RAM_SMB3_Level_Player_XSpeed
	ASL
	ROR.b !RAM_SMB3_Level_Player_XSpeed
	BPL.b CODE_23DD8F
	INC.b !RAM_SMB3_Level_Player_XSpeed
CODE_23DD8F:
	LDY.w $0560
	CPY.b #$06
	BNE.b CODE_23DDBA
	LDA.b !RAM_SMB3_Global_ControllerPress1
	BIT.b #!Joypad_X|(!Joypad_Y>>8)
	BNE.b CODE_23DDAB
	LDA.w !RAM_SMB3_Global_ControllerPress2P1					; Optimization: Unnecessary absolute addressing
	LDY.w !RAM_SMB3_Level_Player_CurrentCharacter
	BEQ.b CODE_23DDA7
	LDA.w !RAM_SMB3_Global_ControllerPress2P2					; Optimization: Unnecessary absolute addressing
CODE_23DDA7:
	AND.b #!Joypad_X|(!Joypad_Y>>8)
	BEQ.b CODE_23DDBA
CODE_23DDAB:
	JSL.l SMB3_GetToadHouseChestItem_Main
	TXA
	BEQ.b CODE_23DDBA
	DEX
	LDA.w $0529
	JSL.l CODE_27A8D9
CODE_23DDBA:
	RTS

;--------------------------------------------------------------------

CODE_23DDBB:
	LDY.b !RAM_SMB3_Level_Player_CurrentPowerUp
	BEQ.b CODE_23DDC1
	LDY.b #$02
CODE_23DDC1:
	LDA.w !RAM_SMB3_Level_Player_InKuriboShoeFlag
	BEQ.b CODE_23DDC7
	INY
CODE_23DDC7:
	LDA.w DATA_21E980,y
	STA.b !RAM_SMB3_Level_Player_CurrentPose
	RTL

;--------------------------------------------------------------------

; Note: Something related to going down a pipe?

CODE_23DDCD:
	STX.w $0571
	LDA.b #!Define_SMAS_Sound0060_IntoPipe
	STA.w !RAM_SMB3_Global_SoundCh1
	LDA.w !RAM_SMB3_Global_LoadOverworldMusicBank
	BNE.b CODE_23DDDF
	LDA.b #!Define_SMB3_LevelMusic_MusicFade
	STA.w !RAM_SMB3_Global_MusicCh1
CODE_23DDDF:
	LDA.b #$04
	CPY.b #$03
	BEQ.b CODE_23DDFF
	LDA.b #$05
	CPY.b #$02
	BEQ.b CODE_23DDFF
	LDA.b #$02
	CPY.b #$00
	BEQ.b CODE_23DDFF
	LDA.b #$01
	LDY.w $0379
	BNE.b CODE_23DDFD
	LDY.w !RAM_SMB3_Level_DisableScrollingFlag
	BEQ.b CODE_23DDFF
CODE_23DDFD:
	LDA.b #$03
CODE_23DDFF:
	ASL
	ASL
	ORA.w $0571
	STA.w $0571
	LDA.b #$3C
	STA.w $0510
	TXA
	ASL
	TAX
	LDA.b $5E
	CLC
	ADC.w DATA_21EC4F,x
	CPX.b #$04
	BPL.b CODE_23DE1B
	AND.b #$F0
CODE_23DE1B:
	STA.b $52
	LDA.b $70
	CPX.b #$06
	BNE.b CODE_23DE27
	LDY.b !RAM_SMB3_Level_Player_CurrentPowerUp
	BEQ.b CODE_23DE2B
CODE_23DE27:
	CLC
	ADC.w DATA_21EC4F+$01,x
CODE_23DE2B:
	AND.b #$F0
	CPX.b #$04
	BMI.b CODE_23DE34
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	DEC
else
	SEC
	SBC.b #$01
endif
CODE_23DE34:
	STA.b $53
	RTS

;--------------------------------------------------------------------

; Note: Something related to touching a coin tile?

CODE_23DE37:
	STA.w $0564
	LDA.b $0C
	STA.w $052A
	LDA.b $0D
	AND.b #$F0
	STA.w $052B
	LDA.b $0E
	STA.w $0528
	LDA.b $0F
	AND.b #$F0
	STA.w $0529
	RTS

;--------------------------------------------------------------------

CODE_23DE53:
	LDX.b #$00
	LDY.b #$40
	LDA.b !RAM_SMB3_Level_Player_XSpeed
	BPL.b CODE_23DE62
	LDY.b #$C0
	EOR.b #$FF
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	INC
else
	CLC
	ADC.b #$01
endif
CODE_23DE62:
	STA.b $0F
	CMP.b #$40
	BMI.b CODE_23DE6A
	STY.b !RAM_SMB3_Level_Player_XSpeed
CODE_23DE6A:
	LDA.b !RAM_SMB3_Level_Player_XSpeed,x
	CPX.b #$00
	BNE.b CODE_23DE74
	CLC
	ADC.w !RAM_SMB3_Level_Player_SuctionXOffset
CODE_23DE74:
	PHA
	ASL
	ASL
	ASL
	ASL
	STA.b $0B
	LDY.b #$00
	PLA
	LSR
	LSR
	LSR
	LSR
	CMP.b #$08
	BCC.b CODE_23DE89
	DEY
	ORA.b #$F0
CODE_23DE89:
	STA.b $0A
	STY.b $0C
	LDA.w $074E,x
	CLC
	ADC.b $0B
	STA.w $074E,x
	LDA.b !RAM_SMB3_Level_Player_XPosLo,x
	ADC.b $0A
	STA.b !RAM_SMB3_Level_Player_XPosLo,x
	LDA.b $43,x
	ADC.b $0C
	STA.b $43,x
	RTL

;--------------------------------------------------------------------

CODE_23DEA3:
	LDA.b !RAM_SMB3_Level_Player_YSpeed
	BMI.b CODE_23DEAF
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	CMP.b #$50
else
	CMP.b #$40
endif
	BMI.b CODE_23DEAF
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$50
else
	LDA.b #$F40
endif
	STA.b !RAM_SMB3_Level_Player_YSpeed
CODE_23DEAF:
	LDX.b #$12
	JSL.l CODE_23DE6A
	RTL

;--------------------------------------------------------------------

; Note: Something related to entering a door

CODE_23DEB6:
	REP.b #$20
	STZ.b $0A
	AND.w #$0001
	BEQ.b CODE_23DEC4
	LDA.w #$0400
	TSB.b $0A
CODE_23DEC4:
	LDA.b $55
	AND.w #$0001
	BEQ.b CODE_23DED0
	LDA.w #$0800
	TSB.b $0A
CODE_23DED0:
	LDA.b $5E
	AND.w #$00F8
	LSR
	LSR
	LSR
	TSB.b $0A
	LDA.b $70
	AND.w #$0007
	BEQ.b CODE_23DEEC
	LDA.b $70
	AND.w #$00F8
	CLC
	ADC.w #$0008
	BRA.b CODE_23DEF1

CODE_23DEEC:
	LDA.b $70
	AND.w #$00F8
CODE_23DEF1:
	ASL
	ASL
	CLC
	ADC.b $0A
	STA.b $0A
	PHB
	PHK
	PLB
	LDX.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	LDA.b $0A
	XBA
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,x
	INX
	INX
CODE_23DF06:
	LDA.w DATA_23DF47-$02,x
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,x
	INX
	INX
	CMP.w #$FFFF
	BNE.b CODE_23DF06
	LDA.b $0A
	INC
	XBA
	STA.w $15E8,x
	LDA.b $0A
	PHA
	AND.w #$03FF
	CMP.w #$03C0
	BCC.b CODE_23DF2C
	PLA
	CLC
	ADC.w #$0400
	BRA.b CODE_23DF2D

CODE_23DF2C:
	PLA
CODE_23DF2D:
	CLC
	ADC.w #$0040
	AND.w #$0FFF
	XBA
	STA.w $15F0,x
	XBA
	INC
	XBA
	STA.w $15F8,x
	DEX
	DEX
	STX.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	SEP.b #$20
	PLB
	RTS

DATA_23DF47:
	db $80,$03,$5A,$16,$5B,$16,$00,$00
	db $80,$03,$5A,$56,$5B,$56,$00,$00
	db $80,$03,$5B,$16,$5A,$96,$00,$00
	db $80,$03,$5B,$56,$5A,$D6,$FF,$FF

;--------------------------------------------------------------------

CODE_23DF67:
	PHB
	PHK
	PLB
	LDA.l !SRAM_SMAS_Global_ControllerTypeX
	BNE.b CODE_23DF8A
	LDA.b !RAM_SMB3_Global_ControllerHold2P1
	AND.b #$C0
	TSB.b !RAM_SMB3_Global_ControllerHold1P1
	LDA.b !RAM_SMB3_Global_ControllerPress2P1
	AND.b #$C0
	TSB.b !RAM_SMB3_Global_ControllerPress1P1
	LDA.b !RAM_SMB3_Global_ControllerHold2P2
	AND.b #$C0
	TSB.b !RAM_SMB3_Global_ControllerHold1P2
	LDA.b !RAM_SMB3_Global_ControllerPress2P2
	AND.b #$C0
	TSB.b !RAM_SMB3_Global_ControllerPress1P2
	BRA.b CODE_23DFDE

CODE_23DF8A:
	LDA.b !RAM_SMB3_Global_ControllerHold1P1
	AND.b #$80
	LSR
	TSB.b !RAM_SMB3_Global_ControllerHold1P1
	LDA.b !RAM_SMB3_Global_ControllerHold2P1
	AND.b #$C0
	STA.b $00
	LDA.b !RAM_SMB3_Global_ControllerHold1P1
	AND.b #$7F
	ORA.b $00
	STA.b !RAM_SMB3_Global_ControllerHold1P1
	LDA.b !RAM_SMB3_Global_ControllerPress1P1
	AND.b #$80
	LSR
	TSB.b !RAM_SMB3_Global_ControllerPress1P1
	LDA.b !RAM_SMB3_Global_ControllerPress2P1
	AND.b #$C0
	STA.b $00
	LDA.b !RAM_SMB3_Global_ControllerPress1P1
	AND.b #$7F
	ORA.b $00
	STA.b !RAM_SMB3_Global_ControllerPress1P1
	LDA.b !RAM_SMB3_Global_ControllerHold1P2
	AND.b #$80
	LSR
	TSB.b !RAM_SMB3_Global_ControllerHold1P2
	LDA.b !RAM_SMB3_Global_ControllerHold2P2
	AND.b #$C0
	STA.b $00
	LDA.b !RAM_SMB3_Global_ControllerHold1P2
	AND.b #$7F
	ORA.b $00
	STA.b !RAM_SMB3_Global_ControllerHold1P2
	LDA.b !RAM_SMB3_Global_ControllerPress1P2
	AND.b #$80
	LSR
	TSB.b !RAM_SMB3_Global_ControllerPress1P2
	LDA.b !RAM_SMB3_Global_ControllerPress2P2
	AND.b #$C0
	STA.b $00
	LDA.b !RAM_SMB3_Global_ControllerPress1P2
	AND.b #$7F
	ORA.b $00
	STA.b !RAM_SMB3_Global_ControllerPress1P2
CODE_23DFDE:
	PHX
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b !RAM_SMB3_Global_ControllerHold1P1,x
	STA.b !RAM_SMB3_Global_ControllerHold1
	LDA.b !RAM_SMB3_Global_ControllerPress1P1,x
	STA.b !RAM_SMB3_Global_ControllerPress1
	PLX
	PLB
	RTL

if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
%FREE_BYTES(NULLROM, 26, $FF)
elseif !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
%FREE_BYTES(NULLROM, 31, $FF)
else
%FREE_BYTES(NULLROM, 19, $FF)
endif

;--------------------------------------------------------------------

; Note: Something related to the in-game battle minigame.

CODE_23E000:
	JSR.w CODE_23E071
	LDX.b #$00
	LDY.b #$00
	JSR.w CODE_23E00E
	LDX.b #SMB3_IndividualPlayerData[$01].ReserveSlots-SMB3_IndividualPlayerData[$00].ReserveSlots
	LDY.b #$01
CODE_23E00E:
	STY.b $00
	STX.b $01
	LDA.w SMB3_IndividualPlayerData[$00].CardSlots,x
	BEQ.b CODE_23E021
	LDA.w SMB3_IndividualPlayerData[$00].CardSlots+$01,x
	BEQ.b CODE_23E021
	LDA.w SMB3_IndividualPlayerData[$00].CardSlots+$02,x
	BNE.b CODE_23E022
CODE_23E021:
	RTS

CODE_23E022:
	LDY.w SMB3_IndividualPlayerData[$00].CardSlots,x
	LDA.w DATA_21EC72-$01,y
	LDY.w SMB3_IndividualPlayerData[$00].CardSlots+$01,x
	ORA.w DATA_21EC72-$01,y
	LDY.w SMB3_IndividualPlayerData[$00].CardSlots+$02,x
	ORA.w DATA_21EC72-$01,y
	TAY
	LDX.b $00
	ORA.w DATA_21EC62-$01,y						; Glitch: This should be LDA, not ORA! This will cause the wrong sound to play on occasion!
	STA.w !RAM_SMB3_Global_SoundCh3
	LDA.w DATA_21EC6A-$01,y
	STA.w $19A1,x
	LDA.w !RAM_SMB3_BattleMode_MariosXPosLo,x
	STA.w $19A5,x
	LDA.w !RAM_SMB3_BattleMode_MariosYPosLo,x
	SEC
	SBC.b #$08
	STA.w $19A3,x
	LDA.w DATA_21EC5A-$01,y
	PHA
	STA.w $19A7,x
	CLC
	ADC.w !RAM_SMB3_Level_Player_MariosLives,x
	STA.w !RAM_SMB3_Level_Player_MariosLives,x
	PLA
	BEQ.b CODE_23E070
	LDX.b $01
	LDA.b #$00
	STA.w SMB3_IndividualPlayerData[$00].CardSlots,x
	STA.w SMB3_IndividualPlayerData[$00].CardSlots+$01,x
	STA.w SMB3_IndividualPlayerData[$00].CardSlots+$02,x
CODE_23E070:
	RTS

CODE_23E071:
	LDX.b #$01
CODE_23E073:
	STX.b $00
	JSR.w CODE_23E07C
	DEX
	BPL.b CODE_23E073
	RTS

CODE_23E07C:
	LDA.w $19A1,x
	BEQ.b CODE_23E08A
	CMP.b #$20
	BCC.b CODE_23E08B
	LDA.b #$00
	STA.w $19A1,x
CODE_23E08A:
	RTS

CODE_23E08B:
	LDA.w $0076
	BNE.b CODE_23E098
	LDA.b !RAM_SMB3_Global_FrameCounter
	LSR
	BCC.b CODE_23E098
	INC.w $19A1,x
CODE_23E098:
	LDY.w DATA_21EC7A,x
	LDA.w $19A3,x
	SEC
	SBC.w $19A1,x
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	LDA.w $19A5,x
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	LDA.b #$22
	STA.w SMB3_OAMBuffer[$00].Prop,y
	LDA.w $19A7,x
	TAX
	LDA.w DATA_21EC75-$01,x
	STA.w SMB3_OAMBuffer[$00].Tile,y
	LDA.w $19A5,x
	SEC
	SBC.b #$08
	CMP.b #$F1
	BCC.b CODE_23E0E7
	LDA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	LDA.w SMB3_OAMBuffer[$00].YDisp,y
	STA.w SMB3_OAMBuffer[$01].YDisp,y
	LDA.w SMB3_OAMBuffer[$00].Tile,y
	STA.w SMB3_OAMBuffer[$01].Tile,y
	LDA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$01].Prop,y
	TYA
	LSR
	LSR
	TAY
	LDA.b #$03
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	BRA.b CODE_23E0EB

CODE_23E0E7:
	TYA
	LSR
	LSR
	TAY
CODE_23E0EB:
	LDA.b #$02
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	LDX.b $00
	RTS

;--------------------------------------------------------------------

; Note: Something related to the in-game battle minigame.

CODE_23E0F3:
	STZ.b $00
	LDA.b #$02
CODE_23E0F7:
	STA.b $01
	LDX.b #$02
CODE_23E0FB:
	LDY.b $01
	STX.b $03
	LDA.w SMB3_IndividualPlayerData[$00].CardSlots,y
	BEQ.b CODE_23E148
	TAY
	LDA.w DATA_21EC90,y
	LDY.b $00
	STA.w SMB3_OAMBuffer[$78].Tile,y
	LDA.b #$D0
	STA.w SMB3_OAMBuffer[$78].YDisp,y
	LDX.b #$00
	CPY.b #$04
	BEQ.b CODE_23E11D
	INX
	CPY.b #$0C
	BNE.b CODE_23E129
CODE_23E11D:
	LDA.w $1989,x
	BEQ.b CODE_23E129
	LSR
	LSR
	LSR
	AND.b #$0E
	BRA.b CODE_23E12B

CODE_23E129:
	LDA.b #$24
CODE_23E12B:
	STA.w SMB3_OAMBuffer[$78].Prop,y
	LDX.b $03
	LDA.b #$10
	CPY.b #$0C
	BCC.b CODE_23E138
	LDA.b #$C0
CODE_23E138:
	CLC
	ADC.w DATA_21EC8E,x
	STA.w SMB3_OAMBuffer[$78].XDisp,y
	TYA
	LSR
	LSR
	TAY
	LDA.b #$02
	STA.w SMB3_OAMTileSizeBuffer[$78].Slot,y
CODE_23E148:
	LDA.b $00
	CLC
	ADC.b #$04
	STA.b $00
	DEC.b $01
	DEX
	BMI.b CODE_23E156
	BRA.b CODE_23E0FB

CODE_23E156:
	LDA.b #$0C
	STA.b $00
	LDA.b #$25
	LDY.b $01
	BMI.b CODE_23E0F7
	RTS

;--------------------------------------------------------------------

CODE_23E161:
	TXA
	PHA
	REP.b #$30
	LDY.w #$0000
	LDX.w !RAM_SMB3_Global_StripeImageUploadIndexLo
CODE_23E16B:
	LDA.w DATA_21EC7C,y
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,x
	INX
	INX
	INY
	INY
	CPY.w #$0008
	BNE.b CODE_23E16B
	SEP.b #$30
	LDY.b $0F
	LDA.w DATA_21EC8C,y
	CLC
	ADC.w !RAM_SMB3_BattleMode_MariosCoinCount,y
	STA.w $15FB,x
	DEX
	DEX
	STX.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	PLA
	TAX
	RTS

;--------------------------------------------------------------------

; Note: Something related to the in-game battle minigame.

CODE_23E190:
	LDA.w !RAM_SMB3_BattleMode_PlayerHasWonTimer
	BNE.b CODE_23E1D3
	LDA.b !RAM_SMB3_Global_ControllerPress1P1
	ORA.b !RAM_SMB3_Global_ControllerPress1P2
	AND.b #!Joypad_Start>>8
	BEQ.b CODE_23E1D3
	LDA.w $0076
	EOR.b #$01
	STA.w $0076
	BNE.b CODE_23E1BE
	LDA.b #!Define_SMB3_LevelMusic_RestoreVolumeCommand
	STA.w !RAM_SMB3_Global_MusicCh1
	LDA.b #!Define_SMAS_Sound0060_Pause1
	STA.w !RAM_SMB3_Global_SoundCh1
	LDX.b #$0E
CODE_23E1B3:
	LDA.w $198B,x
	STA.w $18CB,x
	DEX
	BPL.b CODE_23E1B3
	BMI.b CODE_23E1D3							; Note: This will always branch.

CODE_23E1BE:
	LDA.b #!Define_SMB3_LevelMusic_LowerVolumeCommand
	STA.w !RAM_SMB3_Global_MusicCh1
	LDA.b #!Define_SMAS_Sound0060_Pause1
	STA.w !RAM_SMB3_Global_SoundCh1
	LDX.b #$0E
CODE_23E1CA:
	LDA.w $18CB,x
	STA.w $198B,x
	DEX
	BPL.b CODE_23E1CA
CODE_23E1D3:
	LDA.w $0076
	BEQ.b CODE_23E1E2
	LDX.b #$0E
	LDA.b #$FF
CODE_23E1DC:
	STA.w $18CB,x
	DEX
	BPL.b CODE_23E1DC
CODE_23E1E2:
	JSR.w CODE_23E1E6
	RTL

CODE_23E1E6:
	LDA.w !RAM_SMB3_BattleMode_CurrentState						; Optimization: Unnecessary absolute addressing
	JSL.l SMB3_ExecutePtr_Absolute

DATA_23E1ED:
	dw CODE_23E1FD
	dw CODE_23E2AB

DATA_23E1F1:
	db $00,$01,$02,$00,$03,$04,$05,$00
	db $00,$01,$05,$00

CODE_23E1FD:
	REP.b #$30
	LDA.w #$0058
	STA.b !RAM_SMB3_BattleMode_MariosPose
	STA.b !RAM_SMB3_BattleMode_LuigisPose
	LDY.w #$0200
	LDA.w #$0000
CODE_23E20C:
	STA.w !RAM_SMB3_BattleMode_MariosState,y
	DEY
	DEY
	BPL.b CODE_23E20C
	SEP.b #$30
	LDA.b !RAM_SMB3_Global_FrameCounter
	ORA.b #$91
	STA.w $192B
	INC.w !RAM_SMB3_BattleMode_CurrentState						; Optimization: Unnecessary absolute addressing
	LDX.w !RAM_SMB3_BattleMode_CurrentStage
	LDA.l DATA_23E1F1,x
	STA.w $199A
	TXA
	JSL.l SMB3_ExecutePtr_Absolute

DATA_23E22E:
	dw CODE_23E24B
	dw CODE_23E24B
	dw CODE_23E24B
	dw CODE_23E28E
	dw CODE_23E24B
	dw CODE_23E24B
	dw CODE_23E24B
	dw CODE_23E246
	dw CODE_23E24B
	dw CODE_23E24B
	dw CODE_23E24B
	dw CODE_23E24C

CODE_23E246:
	LDA.b #$01
	STA.w $1A6D
CODE_23E24B:
	RTS

CODE_23E24C:
	LDX.b #$0D
CODE_23E24E:
	TXA
	STA.b $00,x
	DEX
	BPL.b CODE_23E24E
	LDA.b #$FF
	STA.b $0E
	STA.b $0F
	LDX.b #$04
CODE_23E25C:
	JSR.w CODE_23E27A
	TAY
	LDA.w DATA_21EC94,y
	STA.w !RAM_SMB3_BattleNorSpr_XPosLo,x
	LDA.w DATA_21ECA2,y
	STA.w !RAM_SMB3_BattleNorSpr_YPosLo,x
	LDA.b #$01
	STA.w !RAM_SMB3_BattleNorSpr_CurrentStatus,x
	LDA.b #!Define_SMB3_SpriteID_BattleNorSpr0B_Coin
	STA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	DEX
	BPL.b CODE_23E25C
	RTS

CODE_23E27A:
	JSL.l CODE_25F805
	AND.b #$0F
	TAY
	LDA.w $0000,y
	BMI.b CODE_23E27A
	PHA
	LDA.b #$FF
	STA.w $0000,y
	PLA
	RTS

CODE_23E28E:
	LDX.b #$04
CODE_23E290:
	INC.w !RAM_SMB3_BattleNorSpr_CurrentStatus,x
	LDA.b #!Define_SMB3_SpriteID_BattleNorSpr0B_Coin
	STA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	LDA.w DATA_21ECB5,x
	STA.w !RAM_SMB3_BattleNorSpr_YPosLo,x
	LDA.w DATA_21ECB0,x
	STA.w !RAM_SMB3_BattleNorSpr_XPosLo,x
	JSR.w CODE_23ED8D
	DEX
	BPL.b CODE_23E290
	RTS

CODE_23E2AB:
	JSR.w CODE_23E0F3
	JSR.w CODE_23E000
	LDA.w !RAM_SMB3_BattleMode_CurrentStage
	JSL.l SMB3_ExecutePtr_Absolute

DATA_23E2B8:
	dw CODE_23E2D0
	dw CODE_23E2D0
	dw CODE_23E2D0
	dw CODE_23E2FA
	dw CODE_23E2D0
	dw CODE_23E2D0
	dw CODE_23E2D0
	dw CODE_23E2ED
	dw CODE_23E2D0
	dw CODE_23E2D0
	dw CODE_23E2D0
	dw CODE_23E2E3

CODE_23E2D0:
	JSR.w CODE_23E3FA
	JSR.w CODE_23ED04
	JSR.w CODE_23EE51
	JSR.w CODE_23F85D
	JSR.w CODE_23F6D9
	JSR.w CODE_23F9C3
	RTS

CODE_23E2E3:
	JSR.w CODE_23E3FA
	JSR.w CODE_23EE51
	JSR.w CODE_23F9C3
	RTS

CODE_23E2ED:
	JSR.w CODE_23E3FA
	JSR.w CODE_23E31B
	JSR.w CODE_23EE51
	JSR.w CODE_23F9C3
	RTS

CODE_23E2FA:
	JSR.w CODE_23E3FA
	JSR.w CODE_23EE51
	JSR.w CODE_23F85D
	JSR.w CODE_23F9C3
	RTS

;--------------------------------------------------------------------

CODE_23E307:
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$07
	BNE.b CODE_23E31A
	INC.w $1941
	BNE.b CODE_23E31A
	LDA.b #$01
	STA.w $078C
	JMP.w CODE_23E492

CODE_23E31A:
	RTS

;--------------------------------------------------------------------

CODE_23E31B:
	LDA.w $18CB
	ORA.w $18CC
	ORA.w !RAM_SMB3_BattleMode_PlayerHasWonTimer
	ORA.w $0076
	BNE.b CODE_23E348
	DEC.w $1A6D
	BNE.b CODE_23E338
	LDA.b #$20
	STA.w $1A6D
	LDA.b #!Define_SMAS_Sound0060_YoshiCoin
	STA.w !RAM_SMB3_Global_SoundCh1
CODE_23E338:
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$07
	BNE.b CODE_23E348
	LDX.b #$09
CODE_23E340:
	LDA.w !RAM_SMB3_BattleNorSpr_CurrentStatus,x
	BEQ.b CODE_23E349
	DEX
	BPL.b CODE_23E340
CODE_23E348:
	RTS

CODE_23E349:
	INC.w !RAM_SMB3_BattleNorSpr_CurrentStatus,x
	LDY.b #!Define_SMB3_SpriteID_BattleNorSpr0B_Coin
	LDA.w $192D
	AND.b #$1C
	BNE.b CODE_23E357
	LDY.b #!Define_SMB3_SpriteID_BattleNorSpr06_FallingFireball
CODE_23E357:
	TYA
	STA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	LDA.b #$B0
	STA.w !RAM_SMB3_BattleNorSpr_YPosLo,x
	LDA.b #$7C
	STA.w !RAM_SMB3_BattleNorSpr_XPosLo,x
	JSL.l CODE_25F805
	AND.b #$0F
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	ADC.b #$97
else
	ADC.b #$A8
endif
	STA.w !RAM_SMB3_BattleNorSpr_YSpeed,x
	JSL.l CODE_25F805
	AND.b #$1F
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	CLC
	ADC.b #$06
	SEC
	SBC.b #$13
else
	SBC.b #$10
endif
	STA.w !RAM_SMB3_BattleNorSpr_XSpeed,x
	JSR.w CODE_23ED8D
	INC.w $18A6,x
	LDA.b #$30
	STA.w !RAM_SMB3_BattleNorSpr_InsidePipeTimer,x
	RTS

;--------------------------------------------------------------------

CODE_23E387:
	LDX.b #$02
	LDY.b #$02
	LDA.w $190E
	BEQ.b CODE_23E392
	LDY.b #SMB3_IndividualPlayerData[$01].ReserveSlots-SMB3_IndividualPlayerData[$00].ReserveSlots+$02
CODE_23E392:
	STY.b $00
	LDA.w SMB3_IndividualPlayerData[$00].CardSlots,y
	BNE.b CODE_23E3A1
	DEY
	DEX
	BPL.b CODE_23E392
	LDX.w $190E
	RTS

CODE_23E3A1:
	LDX.b #$0B
CODE_23E3A3:
	LDA.w !RAM_SMB3_BattleNorSpr_CurrentStatus,x
	BEQ.b CODE_23E3B1
	DEX
	CPX.b #$0A
	BNE.b CODE_23E3A3
	LDX.w $190E
	RTS

CODE_23E3B1:
	LDA.b #!Define_SMAS_Sound0060_HurtWhileFlying
	STA.w !RAM_SMB3_Global_SoundCh1
	LDA.w SMB3_IndividualPlayerData[$00].CardSlots,y
	TAY
	CLC
	ADC.b #!Define_SMB3_SpriteID_BattleNorSpr0C_MovingCard-$01
	STA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	LDA.w DATA_21ECB9,y
	STA.w !RAM_SMB3_BattleNorSpr_YSpeed,x
	INC.w !RAM_SMB3_BattleNorSpr_CurrentStatus,x
	LDY.b $00
	LDA.b #$00
	STA.w SMB3_IndividualPlayerData[$00].CardSlots,y
	JSR.w CODE_23ED8D
	LDY.w $190E
	LDA.w !RAM_SMB3_BattleMode_MariosXPosLo,y
	STA.w !RAM_SMB3_BattleNorSpr_XPosLo,x
	ASL
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$07
else
	LDA.b #$06
endif
	BCC.b CODE_23E3E3
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$F9
else
	LDA.b #$FA
endif
CODE_23E3E3:
	STA.w !RAM_SMB3_BattleNorSpr_XSpeed,x
	LDA.w !RAM_SMB3_BattleMode_MariosYPosLo,y
	STA.w !RAM_SMB3_BattleNorSpr_YPosLo,x
	LDA.b #$00
	STA.w !RAM_SMB3_BattleNorSpr_YPosHi,x
	LDA.b #$20
	STA.w !RAM_SMB3_BattleNorSpr_DecrementingTable7E18E9,x
	LDX.w $190E
	RTS

;--------------------------------------------------------------------

CODE_23E3FA:
	JSL.l CODE_23DF67
	LDA.w !RAM_SMB3_BattleMode_PlayerHasWonTimer
	BEQ.b CODE_23E40A
	STZ.w $0076
	STZ.b !RAM_SMB3_Global_ControllerHold1P1
	STZ.b !RAM_SMB3_Global_ControllerHold1P2
CODE_23E40A:
	LDX.b #$01
CODE_23E40C:
	STX.w $190E
	LDA.b !RAM_SMB3_Global_ControllerHold1P1,x
	AND.b #(!Joypad_DPadL>>8)|(!Joypad_DPadR>>8)
	CMP.b #(!Joypad_DPadL>>8)|(!Joypad_DPadR>>8)
	BNE.b CODE_23E419
	DEC.b !RAM_SMB3_Global_ControllerHold1P1,x
CODE_23E419:
	LDA.b !RAM_SMB3_Global_ControllerHold1P1,x
	AND.b #(!Joypad_DPadU>>8)|(!Joypad_DPadD>>8)
	CMP.b #(!Joypad_DPadU>>8)|(!Joypad_DPadD>>8)
	BNE.b CODE_23E427
	LDA.b !RAM_SMB3_Global_ControllerHold1P1,x
	AND.b #(!Joypad_DPadU>>8)^$FF
	STA.b !RAM_SMB3_Global_ControllerHold1P1,x
CODE_23E427:
	LDA.w $0076
	BNE.b CODE_23E43C
	LDA.w !RAM_SMB3_BattleMode_MariosDeathFreezeTimer,x
	BEQ.b CODE_23E434
	DEC.w !RAM_SMB3_BattleMode_MariosDeathFreezeTimer,x
CODE_23E434:
	LDA.w $1989,x
	BEQ.b CODE_23E43C
	DEC.w $1989,x
CODE_23E43C:
	JSR.w CODE_23E452
	STZ.w $193F,x
	DEX
	BPL.b CODE_23E40C
	LDA.w $0076
	BNE.b CODE_23E44D
	JSR.w CODE_23EBDD
CODE_23E44D:
	JSL.l SMB3_BattleMode_SetPlayerGraphicsPointer_Main
	RTS

;--------------------------------------------------------------------

CODE_23E452:
	LDA.w !RAM_SMB3_BattleMode_PlayerHasWonTimer
	BEQ.b CODE_23E45A
	JMP.w CODE_23E46C

CODE_23E45A:
	LDA.w $18CB,x
	BEQ.b CODE_23E467
	DEC.w $18CB,x
	BEQ.b CODE_23E467
	JMP.w CODE_23E49B

CODE_23E467:
	LDY.w !RAM_SMB3_BattleMode_PlayerHasWonTimer
	BEQ.b CODE_23E4D6
CODE_23E46C:
	TXA
	BEQ.b CODE_23E478
	LDA.w !RAM_SMB3_BattleMode_LuigisState
	CMP.b #$02
	BEQ.b CODE_23E4D6
	BRA.b CODE_23E49B

CODE_23E478:
	LDA.w $0076
	BNE.b CODE_23E480
	DEC.w !RAM_SMB3_BattleMode_PlayerHasWonTimer
CODE_23E480:
	LDA.w !RAM_SMB3_BattleMode_MariosState
	CMP.b #$02
	BEQ.b CODE_23E4D6
	LDA.w !RAM_SMB3_BattleMode_PlayerHasWonTimer
	BNE.b CODE_23E49B
	INC.w !RAM_SMB3_BattleMode_PlayerHasWonTimer
	JSR.w CODE_23E6CC
CODE_23E492:
	LDA.b #$01
	STA.w $0014
	STZ.w !RAM_SMB3_BattleMode_CurrentState						; Optimization: Unnecessary absolute addressing
CODE_23E49A:
	RTS

CODE_23E49B:
	LDA.w !RAM_SMB3_BattleMode_MariosState,x
	BEQ.b CODE_23E49A
	LDA.w $0076
	ORA.w !RAM_SMB3_BattleMode_PlayerHasWonTimer
	BEQ.b CODE_23E4B9
	LDA.w $193F,x
	BEQ.b CODE_23E4B9
	LDA.w !RAM_SMB3_BattleMode_MariosYPosLo,x
	AND.b #$F8
	CLC
	ADC.w $193F,x
	STA.w !RAM_SMB3_BattleMode_MariosYPosLo,x
CODE_23E4B9:
	LDA.w !RAM_SMB3_BattleMode_MariosState,x
	CMP.b #$03
	BNE.b CODE_23E4D2
	LDA.w !RAM_SMB3_BattleMode_PlayerHasWonTimer
	BEQ.b CODE_23E4CF
	LDA.w !RAM_SMB3_BattleMode_MariosTileCollisionFlags,x
	ORA.b #$04
	STA.w !RAM_SMB3_BattleMode_MariosTileCollisionFlags,x
	BRA.b CODE_23E4D2

CODE_23E4CF:
	JMP.w CODE_23E816

CODE_23E4D2:
	JSR.w CODE_23E6CC
	RTS

CODE_23E4D6:
	LDA.w !RAM_SMB3_BattleMode_MariosState,x
	JSL.l SMB3_ExecutePtr_Absolute

DATA_23E4DD:
	dw CODE_23E4E5
	dw CODE_23E51E
	dw CODE_23E82C
	dw CODE_23E78E

;--------------------------------------------------------------------

CODE_23E4E5:
	LDY.w !RAM_SMB3_BattleMode_MariosDeathFreezeTimer,x
	BEQ.b CODE_23E4F4
	DEY
	BNE.b CODE_23E51D
	INX
	STX.w $078C
	JMP.w CODE_23E492

CODE_23E4F4:
	LDA.b #$00
	STA.w !RAM_SMB3_BattleMode_MariosXSpeed,x
	STA.w !RAM_SMB3_BattleMode_MariosYSpeed,x
	LDA.b #$01
	STA.w !RAM_SMB3_BattleMode_MariosState,x
	TXA
	TAY
	LDA.w DATA_21ECC1,y
	STA.w !RAM_SMB3_BattleMode_MariosFacingDirection,x
	LDA.b #$90
	STA.w !RAM_SMB3_BattleMode_MariosYPosLo,x
	LDA.w !RAM_SMB3_BattleMode_CurrentStage
	CMP.b #$07
	BNE.b CODE_23E517
	INY
	INY
CODE_23E517:
	LDA.w DATA_21ECBD,y
	STA.w !RAM_SMB3_BattleMode_MariosXPosLo,x
CODE_23E51D:
	RTS

;--------------------------------------------------------------------

CODE_23E51E:
	JSR.w CODE_23E525
	JSR.w CODE_23E6CC
	RTS

CODE_23E525:
	LDA.w !RAM_SMB3_BattleMode_DisableMarioToLuigiCollision
	BNE.b CODE_23E54C
	LDA.b !RAM_SMB3_Global_ControllerHold1P1,x
	AND.b #(!Joypad_DPadU>>8)|(!Joypad_DPadD>>8)
	BEQ.b CODE_23E54C
	AND.w !RAM_SMB3_BattleMode_MariosTileCollisionFlags,x
	BNE.b CODE_23E54C
	LDA.w !RAM_SMB3_BattleMode_TileMariosHeadIsIn,x
	CMP.b #$C0
	BNE.b CODE_23E54C
	LDA.b #$00
	STA.w !RAM_SMB3_BattleMode_MariosXSpeed,x
	STA.w !RAM_SMB3_BattleMode_MariosYSpeed,x
	LDA.b #$03
	STA.w !RAM_SMB3_BattleMode_MariosState,x
	JMP.w CODE_23EAA1

CODE_23E54C:
	LDA.b !RAM_SMB3_Global_ControllerHold1P1,x
	BEQ.b CODE_23E555
	LDA.b #$00
	STA.w !RAM_SMB3_BattleMode_MariosUnusedFlashingTimer,x
CODE_23E555:
	LDA.w !RAM_SMB3_BattleMode_MariosSquishAnimationTimer,x
	BEQ.b CODE_23E567
	CMP.b #$08
	BNE.b CODE_23E561
	JSR.w CODE_23E387
CODE_23E561:
	LDA.b #!Joypad_None
	STA.b !RAM_SMB3_Global_ControllerHold1P1,x
	STA.b !RAM_SMB3_Global_ControllerPress1P1,x
CODE_23E567:
	LDA.b !RAM_SMB3_Global_ControllerHold1P1,x
	AND.b #(!Joypad_DPadL>>8)|(!Joypad_DPadR>>8)
	BEQ.b CODE_23E5C3
	STA.w !RAM_SMB3_BattleMode_MariosFacingDirection,x
	LSR
	BCC.b CODE_23E59B
	LDA.b !RAM_SMB3_Global_ControllerHold1P1,x
	AND.b #!Joypad_X|(!Joypad_Y>>8)
	BEQ.b CODE_23E586
	LDA.w !RAM_SMB3_BattleMode_MariosXSpeed,x
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	CMP.b #$1C
else
	CMP.b #$18
endif
	BPL.b CODE_23E583
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	JSR.w CODE_23FAF3
else
	CLC
	ADC.b #$01
endif
CODE_23E583:
	JMP.w CODE_23E5C0

CODE_23E586:
	LDA.w !RAM_SMB3_BattleMode_MariosXSpeed,x
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	CMP.b #$0E
else
	CMP.b #$0C
endif
	BEQ.b CODE_23E598
	BPL.b CODE_23E595
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	JSR.w CODE_23FAF3
else
	CLC
	ADC.b #$01
endif
	JMP.w CODE_23E5C0

CODE_23E595:
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	JSR.w CODE_23FB01
else
	SEC
	SBC.b #$01
endif
CODE_23E598:
	JMP.w CODE_23E5C0

CODE_23E59B:
	LDA.b !RAM_SMB3_Global_ControllerHold1P1,x
	AND.b #!Joypad_X|(!Joypad_Y>>8)
	BEQ.b CODE_23E5AE
	LDA.w !RAM_SMB3_BattleMode_MariosXSpeed,x
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	CMP.b #$E5
else
	CMP.b #$E9
endif
	BMI.b CODE_23E5AB
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	JSR.w CODE_23FB01
else
	SEC
	SBC.b #$01
endif
CODE_23E5AB:
	JMP.w CODE_23E5C0

CODE_23E5AE:
	LDA.w !RAM_SMB3_BattleMode_MariosXSpeed,x
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	CMP.b #$F2
else
	CMP.b #$F4
endif
	BEQ.b CODE_23E5C0
	BMI.b CODE_23E5BD
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	JSR.w CODE_23FB01
else
	SEC
	SBC.b #$01
endif
	JMP.w CODE_23E5C0

CODE_23E5BD:
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	JSR.w CODE_23FAF3
else
	CLC
	ADC.b #$01
endif
CODE_23E5C0:
	STA.w !RAM_SMB3_BattleMode_MariosXSpeed,x
CODE_23E5C3:
	LDA.w !RAM_SMB3_BattleMode_MariosTileCollisionFlags,x
	AND.b #$04
	BEQ.b CODE_23E5CF
	LDA.w !RAM_SMB3_BattleMode_MariosYSpeed,x
	BPL.b CODE_23E5D2
CODE_23E5CF:
	JMP.w CODE_23E656

CODE_23E5D2:
	LDA.w !RAM_SMB3_BattleMode_MariosYPosLo,x
	AND.b #$F8
	CLC
	ADC.w $193F,x
	STA.w !RAM_SMB3_BattleMode_MariosYPosLo,x
	LDA.b #$00
	STA.w !RAM_SMB3_BattleMode_MariosYSpeed,x
	STA.w !RAM_SMB3_BattleMode_MarioIsJumpingFlag,x
	LDY.w !RAM_SMB3_BattleMode_TileMariosFeetAreTouching,x
	CPY.b #$C2
	BNE.b CODE_23E605
	LDA.w !RAM_SMB3_BattleMode_MariosTileCollisionFlags,x
	AND.b #$C0
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDY.b #$09
else
	LDY.b #$08
endif
	CMP.b #$C0
	BEQ.b CODE_23E602
	CMP.b #$80
	BEQ.b CODE_23E5FE
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDY.b #$F7
else
	LDY.b #$F8
endif
CODE_23E5FE:
	TYA
	STA.w !RAM_SMB3_BattleMode_MariosXSpeed,x
CODE_23E602:
	JMP.w CODE_23E60A

CODE_23E605:
	LDY.w !RAM_SMB3_BattleMode_POWBlockQuakeTimer
	BEQ.b CODE_23E619
CODE_23E60A:
	LDA.b #$12
	STA.w !RAM_SMB3_BattleMode_MariosSquishAnimationTimer,x
	LDA.b #!Define_SMAS_Sound0060_Contact
	STA.w !RAM_SMB3_Global_SoundCh1
	LDA.b #$C8
	JMP.w CODE_23E637

CODE_23E619:
	LDA.b !RAM_SMB3_Global_ControllerPress1P1,x
	BPL.b CODE_23E63A								; Note: !Joypad_A|(!Joypad_B>>8)
	LDA.b #!Define_SMAS_Sound0061_Jump
	STA.w !RAM_SMB3_Global_SoundCh2
	LDA.b #$01
	STA.w !RAM_SMB3_BattleMode_MarioIsJumpingFlag,x
	LDA.w !RAM_SMB3_BattleMode_MariosXSpeed,x
	BPL.b CODE_23E631
	EOR.b #$FF
	CLC
	ADC.b #$01
CODE_23E631:
	LSR
	LSR
	TAY
	LDA.w DATA_21ECD9,y
CODE_23E637:
	STA.w !RAM_SMB3_BattleMode_MariosYSpeed,x
CODE_23E63A:
	LDA.b !RAM_SMB3_Global_ControllerHold1P1,x
	AND.b #(!Joypad_DPadL>>8)|(!Joypad_DPadR>>8)
	BNE.b CODE_23E656
	LDA.w !RAM_SMB3_BattleMode_MariosXSpeed,x
	BEQ.b CODE_23E656
	BPL.b CODE_23E650
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	JSR.w CODE_23FAF3
else
	CLC
	ADC.b #$01
endif
	STA.w !RAM_SMB3_BattleMode_MariosXSpeed,x
	JMP.w CODE_23E656

CODE_23E650:
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	JSR.w CODE_23FB01
else
	SEC
	SBC.b #$01
endif
	STA.w !RAM_SMB3_BattleMode_MariosXSpeed,x
CODE_23E656:
	LDY.w !RAM_SMB3_BattleMode_CurrentStage
	LDA.w DATA_21ECCD,y
	BEQ.b CODE_23E679
	LDA.b #$01
	LDY.w !RAM_SMB3_BattleMode_MariosXSpeed,x
	BPL.b CODE_23E666
	ASL
CODE_23E666:
	AND.w !RAM_SMB3_BattleMode_MariosTileCollisionFlags,x
	BEQ.b CODE_23E679
	AND.b !RAM_SMB3_Global_ControllerHold1P1,x
	BEQ.b CODE_23E673
	TAY
	LDA.w DATA_21ECCA,y
CODE_23E673:
	STA.w !RAM_SMB3_BattleMode_MariosXSpeed,x
	JMP.w CODE_23E67C

CODE_23E679:
	JSR.w CODE_23F983
CODE_23E67C:
	LDA.w $18B7,x
	BEQ.b CODE_23E686
	DEC.w $18B7,x
	BNE.b CODE_23E6CB
CODE_23E686:
	LDY.w !RAM_SMB3_BattleMode_MariosYSpeed,x
	BPL.b CODE_23E6AD
	LDA.w !RAM_SMB3_BattleMode_MariosTileCollisionFlags,x
	AND.b #$08
	BEQ.b CODE_23E6AD
	TYA
	EOR.b #$FF
	LSR
	LSR
	LSR
	ADC.b #$04
	STA.w $18B7,x
	LDA.b #$00
	STA.w !RAM_SMB3_BattleMode_MariosYSpeed,x
	LDA.w !RAM_SMB3_BattleMode_MariosYPosLo,x
	AND.b #$F0
	CLC
	ADC.b #$0E
	STA.w !RAM_SMB3_BattleMode_MariosYPosLo,x
CODE_23E6AD:
	JSR.w CODE_23F98F
	LDA.w !RAM_SMB3_BattleMode_MariosYSpeed,x
	BMI.b CODE_23E6B9
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	CMP.b #$4C
else
	CMP.b #$40
endif
	BCS.b CODE_23E6CB
CODE_23E6B9:
	LDA.w !RAM_SMB3_BattleMode_MariosYSpeed,x
	BPL.b CODE_23E6C2
	LDY.b !RAM_SMB3_Global_ControllerHold1P1,x
	BMI.b CODE_23E6C5							; Note: !Joypad_A|(!Joypad_B>>8)
CODE_23E6C2:
	CLC
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	ADC.b #$06
	BRA.b +++

CODE_23E6C5:
	PHA
	LDA.b !RAM_SMB3_Global_FrameCounter
	BIT.b #$01
	BNE.b +
	PLA
	BRA.b ++

+:
	PLA
	INC
++:
	INC
	INC
+++:
else
	ADC.b #$03
CODE_23E6C5:
	CLC
	ADC.b #$02
endif
	STA.w !RAM_SMB3_BattleMode_MariosYSpeed,x
CODE_23E6CB:
	RTS

;--------------------------------------------------------------------

CODE_23E6CC:
	LDA.w !RAM_SMB3_BattleMode_PlayerHasWonTimer
	BEQ.b CODE_23E6F5
	TXA
	EOR.w $078C
	AND.b #$01
	BNE.b CODE_23E6F5
	LDA.w !RAM_SMB3_BattleMode_MariosTileCollisionFlags,x
	BIT.b #$04
	BEQ.b CODE_23E6F2
	LDA.b !RAM_SMB3_BattleMode_MariosPose,x
	CMP.b #$98
	BEQ.b CODE_23E6EA
	CMP.b #$58
	BNE.b CODE_23E6F2
CODE_23E6EA:
	LDA.b #$98
	STA.b !RAM_SMB3_BattleMode_MariosPose,x
	JSR.w CODE_23EAA1
	RTS

CODE_23E6F2:
	JSR.w CODE_23E525
CODE_23E6F5:
	LDY.b #$58
	LDA.w !RAM_SMB3_BattleMode_MariosXSpeed,x
	BNE.b CODE_23E701
	STA.w !RAM_SMB3_BattleMode_MariosClimbingAnimationFrameCounter,x
	BEQ.b CODE_23E748
CODE_23E701:
	LDY.b #$01
	ASL
	BCC.b CODE_23E707
	INY
CODE_23E707:
	TYA
	LDY.b #$68
	CMP.w !RAM_SMB3_BattleMode_MariosFacingDirection,x
	BNE.b CODE_23E748
	LDA.w $18CB
	ORA.w $18CC
	ORA.w !RAM_SMB3_BattleMode_PlayerHasWonTimer
	BNE.b CODE_23E734
	LDA.w !RAM_SMB3_BattleMode_MariosXSpeed,x
	BPL.b CODE_23E722
	EOR.b #$FF
	INC
CODE_23E722:
	LSR
	LSR
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	CMP.b #$08
	BCC.b +
	LDA.b #$07
+:
endif
	TAY
	LDA.w !RAM_SMB3_BattleMode_MariosWalkingFrameCounter,x
	CLC
	ADC.w DATA_21ECC3,y
	STA.w !RAM_SMB3_BattleMode_MariosWalkingFrameCounter,x
	BCC.b CODE_23E734
	INC.w !RAM_SMB3_BattleMode_MariosWalkingPose,x
CODE_23E734:
	LDA.w !RAM_SMB3_BattleMode_MariosWalkingPose,x
	TAY
	TYA
	BEQ.b CODE_23E742
	BIT.b #$01
	BNE.b CODE_23E746
	STZ.w !RAM_SMB3_BattleMode_MariosWalkingPose,x
CODE_23E742:
	LDY.b #$58
	BRA.b CODE_23E748

CODE_23E746:
	LDY.b #$60
CODE_23E748:
	LDA.w !RAM_SMB3_BattleMode_MariosTileCollisionFlags,x
	AND.b #$04
	BNE.b CODE_23E75E
	LDA.w !RAM_SMB3_BattleMode_MarioIsJumpingFlag,x
	BNE.b CODE_23E759
	LDY.b #$60
	JMP.w CODE_23E776

CODE_23E759:
	LDY.b #$70
	JMP.w CODE_23E776

CODE_23E75E:
	LDA.w !RAM_SMB3_BattleMode_MariosSquishAnimationTimer,x
	BEQ.b CODE_23E76A
	DEC.w !RAM_SMB3_BattleMode_MariosSquishAnimationTimer,x
	LDY.b #$78
	BRA.b CODE_23E776

CODE_23E76A:
	LDA.w !RAM_SMB3_BattleMode_MariosKickAnimationTimer,x
	BEQ.b CODE_23E776
	DEC.w !RAM_SMB3_BattleMode_MariosKickAnimationTimer,x
	LDY.b #$80
	BRA.b CODE_23E776

CODE_23E776:
	TYA
	STA.b !RAM_SMB3_BattleMode_MariosPose,x
	CMP.b #$68
	BNE.b CODE_23E787
	LDA.w !RAM_SMB3_Global_SoundCh2
	BNE.b CODE_23E787
	LDA.b #!Define_SMAS_Sound0061_TurnAround
	STA.w !RAM_SMB3_Global_SoundCh2
CODE_23E787:
	JSR.w CODE_23EAA1
	JSR.w CODE_23E864
	RTS

;--------------------------------------------------------------------

CODE_23E78E:
	LDA.b !RAM_SMB3_Global_ControllerHold1P1,x
	AND.b #(!Joypad_DPadU>>8)|(!Joypad_DPadD>>8)
	BEQ.b CODE_23E7B0
	AND.w !RAM_SMB3_BattleMode_MariosTileCollisionFlags,x
	BNE.b CODE_23E7B0
	LDA.w !RAM_SMB3_BattleMode_MariosXPosLo,x
	AND.b #$0F
	BEQ.b CODE_23E7B0
	CMP.b #$08
	LDY.b #$01
	BCS.b CODE_23E7A8
	LDY.b #$FF
CODE_23E7A8:
	TYA
	CLC
	ADC.w !RAM_SMB3_BattleMode_MariosXPosLo,x
	STA.w !RAM_SMB3_BattleMode_MariosXPosLo,x
CODE_23E7B0:
	LDA.b !RAM_SMB3_Global_ControllerHold1P1,x
	AND.b #(!Joypad_DPadU>>8)|(!Joypad_DPadD>>8)
	BEQ.b CODE_23E7E6
	STA.b $00
	AND.w !RAM_SMB3_BattleMode_MariosTileCollisionFlags,x
	BNE.b CODE_23E806
	LDA.b $00
	CMP.b #$08
	BNE.b CODE_23E7E0
	LDA.b #$C0
	CMP.w !RAM_SMB3_BattleMode_TileMariosHeadIsIn,x
	BNE.b CODE_23E806
	DEC.w !RAM_SMB3_BattleMode_MariosYPosLo,x
	JSR.w CODE_23E864
	LDA.w !RAM_SMB3_BattleMode_TileMariosHeadIsIn,x
	CMP.b #$C0
	BEQ.b CODE_23E7DA
	INC.w !RAM_SMB3_BattleMode_MariosYPosLo,x
CODE_23E7DA:
	INC.w !RAM_SMB3_BattleMode_MariosClimbingAnimationFrameCounter,x
	JMP.w CODE_23E816

CODE_23E7E0:
	INC.w !RAM_SMB3_BattleMode_MariosYPosLo,x
	INC.w !RAM_SMB3_BattleMode_MariosClimbingAnimationFrameCounter,x
CODE_23E7E6:
	LDA.b !RAM_SMB3_Global_ControllerHold1P1,x
	AND.b #(!Joypad_DPadL>>8)|(!Joypad_DPadR>>8)
	STA.b $00
	AND.w !RAM_SMB3_BattleMode_MariosTileCollisionFlags,x
	BNE.b CODE_23E7FF
	LSR.b $00
	BCC.b CODE_23E7F8
	INC.w !RAM_SMB3_BattleMode_MariosXPosLo,x
CODE_23E7F8:
	LSR.b $00
	BCC.b CODE_23E7FF
	DEC.w !RAM_SMB3_BattleMode_MariosXPosLo,x
CODE_23E7FF:
	LDA.w !RAM_SMB3_BattleMode_TileMariosHeadIsIn,x
	CMP.b #$C0
	BEQ.b CODE_23E816
CODE_23E806:
	LDA.b #$01
	STA.w !RAM_SMB3_BattleMode_MariosState,x
	LDA.b #$00
	STA.w !RAM_SMB3_BattleMode_MariosXSpeed,x
	STA.w !RAM_SMB3_BattleMode_MariosYSpeed,x
	STA.w !RAM_SMB3_BattleMode_MarioIsJumpingFlag,x
CODE_23E816:
	LDA.b #$88
	STA.b !RAM_SMB3_BattleMode_MariosPose,x
	JSR.w CODE_23E864
	LDA.w !RAM_SMB3_BattleMode_MariosClimbingAnimationFrameCounter,x
	AND.b #$04
	LSR
	LSR
	ADC.b #$01
	STA.w !RAM_SMB3_BattleMode_MariosFacingDirection,x
	JMP.w CODE_23EAA1

;--------------------------------------------------------------------

CODE_23E82C:
	LDA.b #$90
	STA.b !RAM_SMB3_BattleMode_MariosPose,x
	JSR.w CODE_23EAA1
	LDA.w !RAM_SMB3_BattleMode_MariosDeathFreezeTimer,x
	BNE.b CODE_23E863
	JSR.w CODE_23F98F
	LDA.w !RAM_SMB3_BattleMode_MariosYSpeed,x
	BMI.b CODE_23E844
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	CMP.b #$4C
else
	CMP.b #$40
endif
	BCS.b CODE_23E84A
CODE_23E844:
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b !RAM_SMB3_Global_FrameCounter
	BIT.b #$01
	BNE.b +
	INC.w !RAM_SMB3_BattleMode_MariosYSpeed,x
+:
endif
	INC.w !RAM_SMB3_BattleMode_MariosYSpeed,x
	INC.w !RAM_SMB3_BattleMode_MariosYSpeed,x
CODE_23E84A:
	LDA.w !RAM_SMB3_BattleMode_MariosYPosLo,x
	CMP.b #$EF
	BCC.b CODE_23E863
	LDA.w !RAM_SMB3_BattleMode_MariosYPosHi,x
	BNE.b CODE_23E863
	LDA.b #$40
	STA.w !RAM_SMB3_BattleMode_MariosDeathFreezeTimer,x
	STA.w !RAM_SMB3_BattleMode_MariosUnusedFlashingTimer,x
	LDA.b #$00
	STA.w !RAM_SMB3_BattleMode_MariosState,x
CODE_23E863:
	RTS

;--------------------------------------------------------------------

CODE_23E864:
	LDA.b #$00
	STA.w !RAM_SMB3_BattleMode_MariosTileCollisionFlags,x
	STA.w !RAM_SMB3_BattleMode_TileMariosFeetAreTouching,x
	STA.w !RAM_SMB3_BattleMode_TileMariosHeadIsIn,x
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.w !RAM_SMB3_BattleMode_MariosYPosHi,x
	BEQ.b +
	CPX.b #$02
	BCS.b +
	RTS

+:
endif
	LDY.b #$05
CODE_23E871:
	STY.b $0F
	LDA.w !RAM_SMB3_BattleMode_MariosYPosLo,x
	CLC
	ADC.w DATA_21ECF3,y
	AND.b #$F0
	STA.b $00
	CPX.b #$02
	BCC.b CODE_23E88E
	LDA.w !RAM_SMB3_BattleMode_DisableMarioToLuigiCollision,x
	CMP.b #$0B
	BNE.b CODE_23E88E
	TYA
	CLC
	ADC.b #$06
	TAY
CODE_23E88E:
	LDA.w !RAM_SMB3_BattleMode_MariosXPosLo,x
	CLC
	ADC.w DATA_21ECE7,y
	STA.b $01
	JSR.w CODE_23EA61
	LDY.b $0F
	BCS.b CODE_23E8A1
	JMP.w CODE_23E9E8

CODE_23E8A1:
	CPY.b #$02
	BCS.b CODE_23E900
	LDA.w !RAM_SMB3_BattleMode_MariosYPosLo,x
	CMP.b #$D0
	BCS.b CODE_23E8FD
	AND.b #$0F
	CMP.b #$09
	BCS.b CODE_23E8B5
	JMP.w CODE_23E9E8

CODE_23E8B5:
	CPX.b #$02
	BCS.b CODE_23E8FD
	LDA.w !RAM_SMB3_BattleMode_MariosYSpeed,x
	BPL.b CODE_23E8FD
	LDA.w !RAM_SMB3_BattleBounceSpr_DespawnTimer,x
	BNE.b CODE_23E8FD
	LDA.w !RAM_SMB3_BattleMode_CurrentStage
	CMP.b #$0B
	BEQ.b CODE_23E8FD
	LDA.b #$7E2000
	STA.b $2E
	LDA.b #$7E2000>>8
	STA.b $2F
	LDA.b #$7E2000>>16
	STA.b $30
	LDY.b $02
	LDA.b #$C2
	STA.b [$2E],y
	TYA
	STA.w $1908,x
	LDA.w !RAM_SMB3_BattleMode_MariosYPosLo,x
	AND.b #$F0
	STA.w !RAM_SMB3_BattleBounceSpr_YPosLo,x
	LDA.w !RAM_SMB3_BattleMode_MariosXPosLo,x
	CLC
	ADC.b #$08
	AND.b #$F0
	STA.w !RAM_SMB3_BattleBounceSpr_XPosLo,x
	LDA.b #$0E
	STA.w !RAM_SMB3_BattleBounceSpr_DespawnTimer,x
	LDA.b #$E0
	STA.w !RAM_SMB3_BattleBounceSpr_YSpeed,x
CODE_23E8FD:
	JMP.w CODE_23E9B3

CODE_23E900:
	CPY.b #$04
	BCS.b CODE_23E981
	CPX.b #$02
	BCS.b CODE_23E97E
	CMP.b #$50
	BEQ.b CODE_23E97E
	LDA.w !RAM_SMB3_BattleMode_CurrentStage
	CMP.b #$0B
	BNE.b CODE_23E97E
	LDA.b !RAM_SMB3_Global_ControllerPress1P1,x
	AND.b #!Joypad_X|(!Joypad_Y>>8)
	BEQ.b CODE_23E97E
	LDA.b #$0C
	STA.w !RAM_SMB3_BattleMode_MariosKickAnimationTimer,x
	LDA.b #!Define_SMAS_Sound0060_KickShell
	STA.w !RAM_SMB3_Global_SoundCh1
	LDA.b #$7E2000
	STA.b $2E
	LDA.b #$7E2000>>8
	STA.b $2F
	LDA.b #$7E2000>>16
	STA.b $30
	LDY.b $02
	LDA.b #$00
	STA.b [$2E],y
	JSR.w CODE_23EA0F
	LDX.b #$06
CODE_23E93A:
	LDA.w !RAM_SMB3_BattleNorSpr_CurrentStatus,x
	BEQ.b CODE_23E944
	DEX
	BPL.b CODE_23E93A
	LDX.b #$06
CODE_23E944:
	STX.b $00
	JSR.w CODE_23ED8D
	INC.w !RAM_SMB3_BattleNorSpr_CurrentStatus,x
	LDA.b #!Define_SMB3_SpriteID_BattleNorSpr0F_KickedBlock
	STA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	LDA.b $02
	AND.b #$F0
	STA.w !RAM_SMB3_BattleNorSpr_YPosLo,x
	LDA.b $02
	ASL
	ASL
	ASL
	ASL
	STA.w !RAM_SMB3_BattleNorSpr_XPosLo,x
	LDA.b #$C0
	STA.w !RAM_SMB3_BattleNorSpr_YSpeed,x
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDY.b #$13
else
	LDY.b #$10
endif
	LDA.w !RAM_SMB3_BattleNorSpr_XPosLo,x
	LDX.w $190E
	CMP.w !RAM_SMB3_BattleMode_MariosXPosLo,x
	BCS.b CODE_23E975
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDY.b #$ED
else
	LDY.b #$F0
endif
CODE_23E975:
	LDX.b $00
	TYA
	STA.w !RAM_SMB3_BattleNorSpr_XSpeed,x
	LDX.w $190E
CODE_23E97E:
	JMP.w CODE_23E9B3

CODE_23E981:
	LDA.w !RAM_SMB3_BattleMode_MariosYPosLo,x
	AND.b #$0F
	CMP.b #$06
	BCS.b CODE_23E9E8
	LDA.w !RAM_SMB3_BattleMode_MariosYSpeed,x
	BMI.b CODE_23E9E8
	LDY.b $02
	LDA.w !RAM_SMB3_BattleMode_TileMariosFeetAreTouching,x
	CMP.b #$C2
	BEQ.b CODE_23E9B3
	LDA.b #$7E2000
	STA.b $2E
	LDA.b #$7E2000>>8
	STA.b $2F
	LDA.b #$7E2000>>16
	STA.b $30
	LDA.b [$2E],y
	CMP.b #$FE
	BCC.b CODE_23E9B0
	AND.b #$01
	TAY
	LDA.w DATA_21EC57,y
CODE_23E9B0:
	STA.w !RAM_SMB3_BattleMode_TileMariosFeetAreTouching,x
CODE_23E9B3:
	LDY.b $0F
	LDA.w !RAM_SMB3_BattleMode_MariosTileCollisionFlags,x
	ORA.w DATA_21ECFF,y
	STA.w !RAM_SMB3_BattleMode_MariosTileCollisionFlags,x
	CPX.b #$02
	BCC.b CODE_23E9C9
	LDA.w !RAM_SMB3_BattleMode_DisableMarioToLuigiCollision,x
	CMP.b #$01
	BEQ.b CODE_23E9DF
CODE_23E9C9:
	LDY.b $02
	LDA.b #$7E2000
	STA.b $2E
	LDA.b #$7E2000>>8
	STA.b $2F
	LDA.b #$7E2000>>16
	STA.b $30
	LDA.b [$2E],y
	LDY.b $0F
	CMP.b #$C2
	BNE.b CODE_23E9E8
CODE_23E9DF:
	LDA.w !RAM_SMB3_BattleMode_MariosTileCollisionFlags,x
	ORA.w DATA_21ED05,y
	STA.w !RAM_SMB3_BattleMode_MariosTileCollisionFlags,x
CODE_23E9E8:
	CPY.b #$02
	BCS.b CODE_23EA06
	LDY.b $02
	LDA.w !RAM_SMB3_BattleMode_TileMariosHeadIsIn,x
	CMP.b #$C0
	BEQ.b CODE_23EA06
	LDA.b #$7E2000
	STA.b $2E
	LDA.b #$7E2000>>8
	STA.b $2F
	LDA.b #$7E2000>>16
	STA.b $30
	LDA.b [$2E],y
	STA.w !RAM_SMB3_BattleMode_TileMariosHeadIsIn,x
CODE_23EA06:
	LDY.b $0F
	DEY
	BMI.b CODE_23EA0E
	JMP.w CODE_23E871

CODE_23EA0E:
	RTS

CODE_23EA0F:
	LDY.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	LDA.b #$08
	STA.b $03
	LDA.b $02
	AND.b #$F0
	ASL
	ROL.b $03
	ASL
	ROL.b $03
	STA.b $04
	LDA.b $02
	ASL
	AND.b #$1F
	CLC
	ADC.b $04
	STA.w SMB3_StripeImageUploadTable[$00].HighByte,y
	CLC
	ADC.b #$20
	STA.w SMB3_StripeImageUploadTable[$03].HighByte,y
	LDA.b $03
	AND.b #$DF
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,y
	STA.w SMB3_StripeImageUploadTable[$03].LowByte,y
	REP.b #$20
	LDA.w #$0240
	STA.w SMB3_StripeImageUploadTable[$01].LowByte,y
	STA.w SMB3_StripeImageUploadTable[$04].LowByte,y
	LDA.w #$1CFF
	STA.w SMB3_StripeImageUploadTable[$02].LowByte,y
	STA.w SMB3_StripeImageUploadTable[$05].LowByte,y
	LDA.w #$FFFF
	STA.w SMB3_StripeImageUploadTable[$06].LowByte,y
	SEP.b #$20
	TYA
	CLC
	ADC.b #$0C
	STA.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	RTS

;--------------------------------------------------------------------

CODE_23EA61:
	LDA.b $01
	LSR
	LSR
	LSR
	LSR
	ORA.b $00
	TAY
	STY.b $02
	LDA.b #$7E2000
	STA.b $2E
	LDA.b #$7E2000>>8
	STA.b $2F
	LDA.b #$7E2000>>16
	STA.b $30
	LDA.b [$2E],y
	CMP.b #$FE
	BCC.b CODE_23EA84
	AND.b #$01
	TAY
	LDA.w DATA_21EC57,y
CODE_23EA84:
	PHA
	ASL
	ROL.b $0E
	ASL
	ROL.b $0E
	LDA.b $0E
	AND.b #$03
	TAY
	PLA
	CMP.w !RAM_SMB3_Global_Map16WallTileAttributeTable,y
	RTS

;--------------------------------------------------------------------

CODE_23EA95:
	TXA
	CLC
	ADC.b #$02
	TAX
	JSR.w CODE_23E864
	LDX.w $190E
	RTS

;--------------------------------------------------------------------

CODE_23EAA1:
	LDA.w !RAM_SMB3_BattleMode_MariosYPosHi,x
	BPL.b CODE_23EAAE
	LDA.w !RAM_SMB3_BattleMode_MariosYPosLo,x
	CMP.b #$F0
	BCS.b CODE_23EAB1
	RTS

CODE_23EAAE:
	BEQ.b CODE_23EAB1
	RTS

CODE_23EAB1:
	LDA.w !RAM_SMB3_BattleMode_MariosUnusedFlashingTimer,x
	BEQ.b CODE_23EABD
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$02
	BEQ.b CODE_23EABD
	RTS

CODE_23EABD:
	TXA
	ASL
	ASL
	ASL
	ASL
	ASL
	TAY
	LDA.w !RAM_SMB3_BattleMode_MariosXPosLo,x
	STA.w SMB3_OAMBuffer[$20].XDisp,y
	LDA.w !RAM_SMB3_BattleMode_MariosYPosLo,x
	STA.w SMB3_OAMBuffer[$20].YDisp,y
	LDA.b #$0E
	STA.b $0A
	LDA.w $190E
	BEQ.b CODE_23EADD
	LDA.b #$0A
	STA.b $0A
CODE_23EADD:
	LDA.w !RAM_SMB3_BattleMode_MariosFacingDirection,x
	TAX
	LDA.w DATA_21ED16,x
	ORA.b $0A
	STA.w SMB3_OAMBuffer[$20].Prop,y
	LDX.w $190E
	LDA.w !RAM_SMB3_BattleMode_MariosState,x
	CMP.b #$02
	BEQ.b CODE_23EAFA
	LDA.w !RAM_SMB3_BattleMode_MariosFacingDirection,x
	BIT.b #$01
	BNE.b CODE_23EB02
CODE_23EAFA:
	LDA.w SMB3_OAMBuffer[$20].Prop,y
	AND.b #$BF
	STA.w SMB3_OAMBuffer[$20].Prop,y
CODE_23EB02:
	LDA.w !RAM_SMB3_BattleMode_MariosState,x
	CMP.b #$02
	BEQ.b CODE_23EB3A
	LDA.w !RAM_SMB3_BattleMode_MariosFacingDirection,x
	BIT.b #$01
	BEQ.b CODE_23EB3A
	LDA.w !RAM_SMB3_BattleMode_PlayerHasWonTimer
	BEQ.b CODE_23EB2D
	TXA
	EOR.w $078C
	AND.b #$01
	BNE.b CODE_23EB2D
	LDA.b !RAM_SMB3_BattleMode_MariosPose,x
	CMP.b #$98
	BNE.b CODE_23EB2D
	LDA.w SMB3_OAMBuffer[$20].Prop,y
	AND.b #$BF
	STA.w SMB3_OAMBuffer[$20].Prop,y
	BRA.b CODE_23EB3A

CODE_23EB2D:
	LDA.w SMB3_OAMBuffer[$20].XDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$20].XDisp,y
	LDA.b #$F8
	BRA.b CODE_23EB3C

CODE_23EB3A:
	LDA.b #$08
CODE_23EB3C:
	STA.w $0000
	LDA.b #$04
	STA.w SMB3_OAMBuffer[$20].Tile,y
	CPX.b #$00
	BEQ.b CODE_23EB4D
	LDA.b #$14
	STA.w SMB3_OAMBuffer[$20].Tile,y
CODE_23EB4D:
	LDA.w SMB3_OAMBuffer[$20].XDisp,y
	STA.w SMB3_OAMBuffer[$22].XDisp,y
	CLC
	ADC.w $0000
	STA.w SMB3_OAMBuffer[$21].XDisp,y
	STA.w SMB3_OAMBuffer[$23].XDisp,y
	LDA.w SMB3_OAMBuffer[$20].YDisp,y
	STA.w SMB3_OAMBuffer[$21].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$22].YDisp,y
	STA.w SMB3_OAMBuffer[$23].YDisp,y
	LDA.w SMB3_OAMBuffer[$20].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$21].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$22].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$23].Tile,y
	LDA.w SMB3_OAMBuffer[$20].Prop,y
	STA.w SMB3_OAMBuffer[$21].Prop,y
	STA.w SMB3_OAMBuffer[$22].Prop,y
	STA.w SMB3_OAMBuffer[$23].Prop,y
	STA.b $00
	LDA.w !RAM_SMB3_BattleMode_MariosXPosLo,x
	CMP.b #$F1
	BCC.b CODE_23EBCA
	PHY
	LDA.b #$08
	STA.b $00
CODE_23EB95:
	LDA.w SMB3_OAMBuffer[$20].XDisp,y
	STA.w SMB3_OAMBuffer[$30].XDisp,y
	LDA.w SMB3_OAMBuffer[$20].YDisp,y
	STA.w SMB3_OAMBuffer[$30].YDisp,y
	LDA.w SMB3_OAMBuffer[$20].Tile,y
	STA.w SMB3_OAMBuffer[$30].Tile,y
	LDA.w SMB3_OAMBuffer[$20].Prop,y
	STA.w SMB3_OAMBuffer[$30].Prop,y
	TYA
	CLC
	ADC.b #$04
	TAY
	DEC.b $00
	BNE.b CODE_23EB95
	PLA
	LSR
	LSR
	TAY
	LDA.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$30].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$32].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$31].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$33].Slot,y
	BRA.b CODE_23EBCE

CODE_23EBCA:
	TYA
	LSR
	LSR
	TAY
CODE_23EBCE:
	LDA.b #$00
	STA.w SMB3_OAMTileSizeBuffer[$20].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$21].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$22].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$23].Slot,y
	RTS

;--------------------------------------------------------------------

CODE_23EBDD:
	LDA.w !RAM_SMB3_BattleMode_MariosState
	CMP.b #$02
	BEQ.b CODE_23EC16
	LDA.w !RAM_SMB3_BattleMode_LuigisState
	CMP.b #$02
	BEQ.b CODE_23EC16
	LDA.w !RAM_SMB3_BattleMode_DisableMarioToLuigiCollision
	BNE.b CODE_23EC13
	LDX.b #$01
	LDY.b #$04
CODE_23EBF4:
	JSR.w CODE_23ECAC
	DEY
	DEY
	DEY
	DEY
	DEX
	BPL.b CODE_23EBF4
	JSR.w CODE_23ECC9
	BCC.b CODE_23EC16
	LDA.b #$01
	STA.w !RAM_SMB3_BattleMode_MariosState
	STA.w !RAM_SMB3_BattleMode_LuigisState
	LDA.b #$08
	STA.w !RAM_SMB3_BattleMode_DisableMarioToLuigiCollision
	JMP.w CODE_23EC17

CODE_23EC13:
	DEC.w !RAM_SMB3_BattleMode_DisableMarioToLuigiCollision
CODE_23EC16:
	RTS

CODE_23EC17:
	LDA.w !RAM_SMB3_BattleMode_MariosYPosLo
	SEC
	SBC.w !RAM_SMB3_BattleMode_LuigisYPosLo
	PHP
	BPL.b CODE_23EC26
	EOR.b #$FF
	CLC
	ADC.b #$01
CODE_23EC26:
	CMP.b #$08
	BCC.b CODE_23EC73
	LDY.b #$00
	PLP
	BCC.b CODE_23EC30
	INY
CODE_23EC30:
	LDA.w DATA_21ED1D,y
	AND.w !RAM_SMB3_BattleMode_MariosYSpeed
	BMI.b CODE_23EC51
	LDA.w DATA_21ED1D,y
	STA.w !RAM_SMB3_BattleMode_MariosYSpeed
	LDA.w !RAM_SMB3_BattleMode_MariosTileCollisionFlags
	AND.b #$04
	BEQ.b CODE_23EC51
	LDA.w DATA_21ED1D+$03,y
	STA.w !RAM_SMB3_BattleMode_MariosSquishAnimationTimer
	LDA.w DATA_21ED1D+$06,y
	STA.w !RAM_SMB3_Global_SoundCh1
CODE_23EC51:
	LDA.w DATA_21ED1D+$01,y
	AND.w !RAM_SMB3_BattleMode_LuigisYSpeed
	BMI.b CODE_23EC72
	LDA.w DATA_21ED1D+$01,y
	STA.w !RAM_SMB3_BattleMode_LuigisYSpeed
	LDA.w !RAM_SMB3_BattleMode_LuigisTileCollisionFlags
	AND.b #$04
	BEQ.b CODE_23EC72
	LDA.w DATA_21ED1D+$04,y
	STA.w !RAM_SMB3_BattleMode_LuigisSquishAnimationTimer
	LDA.w DATA_21ED1D+$07,y
	STA.w !RAM_SMB3_Global_SoundCh1
CODE_23EC72:
	RTS

CODE_23EC73:
	PLP
	LDY.b #$00
	LDA.w !RAM_SMB3_BattleMode_MariosXPosLo
	CMP.w !RAM_SMB3_BattleMode_LuigisXPosLo
	BCS.b CODE_23EC7F
	INY
CODE_23EC7F:
	EOR.w !RAM_SMB3_BattleMode_LuigisXPosLo
	BPL.b CODE_23EC91
	LDA.b #$EF
	CMP.w !RAM_SMB3_BattleMode_MariosXPosLo
	BCC.b CODE_23EC90
	CMP.w !RAM_SMB3_BattleMode_LuigisXPosLo
	BCS.b CODE_23EC91
CODE_23EC90:
	INY
CODE_23EC91:
	LDA.w DATA_21ED19,y
	STA.w !RAM_SMB3_BattleMode_MariosXSpeed
	LDA.w DATA_21ED19+$01,y
	STA.w !RAM_SMB3_BattleMode_LuigisXSpeed
	TYA
	AND.b #$01
	CLC
	ADC.b #$01
	STA.w !RAM_SMB3_BattleMode_LuigisFacingDirection
	EOR.b #$03
	STA.w !RAM_SMB3_BattleMode_MariosFacingDirection
	RTS

;--------------------------------------------------------------------

CODE_23ECAC:
	LDA.w !RAM_SMB3_BattleMode_MariosYPosLo,x
	CLC
	ADC.b #$02
	STA.w $0000,y
	LDA.b #$0E
	STA.w $0002,y
	LDA.w !RAM_SMB3_BattleMode_MariosXPosLo,x
	CLC
	ADC.b #$04
	STA.w $0001,y
	LDA.b #$08
	STA.w $0003,y
	RTS

;--------------------------------------------------------------------

CODE_23ECC9:
	TXA
	PHA
	LDX.b #$01
CODE_23ECCD:
	LDA.b $04,x
	SEC
	SBC.b $00,x
	CLC
	ADC.b $06,x
	STA.b $08
	LDA.b $02,x
	CLC
	ADC.b $06,x
	CMP.b $08
	BCC.b CODE_23ECE3
	DEX
	BPL.b CODE_23ECCD
CODE_23ECE3:
	PLA
	TAX
	RTS

;--------------------------------------------------------------------

DATA_23ECE6:
	db $00,$00,$00,$00,$00,$01,$01,$01
	db $01,$01,$00,$01,$00,$01,$00,$00
	db $02,$00,$02,$00,$01,$02,$01,$02
	db $01,$02,$02,$02,$02,$02

CODE_23ED04:
	LDA.w $18CB
	ORA.w $18CC
	ORA.w !RAM_SMB3_BattleMode_PlayerHasWonTimer
	BNE.b CODE_23ED2C
	INC.b $A9
	LDA.b $A9
	AND.b #$1F
	BNE.b CODE_23ED2D
	INC.w $190D
	BNE.b CODE_23ED2D
	JSR.w CODE_23ED3D
	TXA
	BMI.b CODE_23ED2D
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$13
else
	LDA.b #$10
endif
	STA.w !RAM_SMB3_BattleNorSpr_YSpeed,x
	LDA.b #!Define_SMB3_SpriteID_BattleNorSpr05_WallBouncingFireball
	STA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
CODE_23ED2C:
	RTS

CODE_23ED2D:
	LDA.b $A9
	CMP.b #$80
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	BEQ.b +
	JMP.w CODE_23EDB1

+:
else
	BNE.b CODE_23EDB1
endif
	INC.w $190C
	LDA.w $190C
	AND.b #$07
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	BEQ.b +
	JMP.w CODE_23EDB1

+:
else
	BNE.b CODE_23EDB1
endif
CODE_23ED3D:
	LDX.b #$06
	JSR.w CODE_23EE04
	TXA
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	BPL.b +
	JMP.w CODE_23EDB0

+:
else
	BMI.b CODE_23EDB0
endif
	DEC.w $18CA
	CPX.b #$05
	BCS.b CODE_23ED4F
	JMP.w CODE_23F6B3

CODE_23ED4F:
	LDA.w $190C
	LSR
	AND.b #$01
	TAY
	LDA.w DATA_21ED3C,y
	STA.w !RAM_SMB3_BattleNorSpr_XSpeed,x
	LDA.w DATA_21ED3A,y
	STA.w !RAM_SMB3_BattleNorSpr_XPosLo,x
	JSL.l CODE_25F805
	LDA.w $192D
	AND.b #$01
	TAY
	LDA.w !RAM_SMB3_BattleMode_MariosYPosLo,y
	STA.w !RAM_SMB3_BattleNorSpr_YPosLo,x
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.w !RAM_SMB3_BattleMode_MariosYPosHi,y
	BNE.b +
	LDA.w !RAM_SMB3_BattleNorSpr_YPosLo,x
	CMP.b #$10
	BCS.b ++
+:
	LDA.b #$10
	STA.w !RAM_SMB3_BattleNorSpr_YPosLo,x
++:
endif
	LDA.b #!Define_SMB3_SpriteID_BattleNorSpr04_WaveMotionFireball
	STA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	LDA.b #$00
	STA.w !RAM_SMB3_BattleNorSpr_YSpeed,x
	STA.w $18A6,x
	JSR.w CODE_23ED8D
	LDA.b #$20
	STA.w !RAM_SMB3_BattleNorSpr_DecrementingTable7E18E9,x
	LDA.b #!Define_SMAS_Sound0063_FireSpit
	STA.w !RAM_SMB3_Global_SoundCh3
	RTS

CODE_23ED8D:
	LDA.b #$00
	STA.w !RAM_SMB3_BattleNorSpr_YPosHi,x
	STA.w $18A6,x
	STA.w !RAM_SMB3_BattleNorSpr_TileSpritesFeetAreTouching,x
	STA.w !RAM_SMB3_BattleNorSpr_SpeedUpAnimationFlag,x
	STA.w !RAM_SMB3_BattleNorSpr_Table7E1953,x
	STA.w !RAM_SMB3_BattleNorSpr_InsidePipeTimer,x
	STA.w $18CD,x
	STA.w !RAM_SMB3_BattleNorSpr_DisableSpriteCollisionTimer,x
	STA.w !RAM_SMB3_BattleNorSpr_UnusedFreezeSpriteTimer,x
	STA.w !RAM_SMB3_BattleNorSpr_DecrementingTable7E18E9,x
	STA.w !RAM_SMB3_BattleNorSpr_StoredXSpeed,x
CODE_23EDB0:
	RTS

CODE_23EDB1:
	LDA.w $18CA
	CMP.b #$05
	BEQ.b CODE_23EDB0
	LDA.b $A9
	AND.b #$FF
	BNE.b CODE_23EDB0
	PHX
	LDA.w $199A
	ASL
	ASL
	ADC.w $199A
	ADC.w $18CA
	TAX
	LDA.l DATA_23ECE6,x
	PLX
	JSL.l SMB3_ExecutePtr_Absolute

DATA_23EDD4:
	dw CODE_23EE02
	dw CODE_23EDF6
	dw CODE_23EDDA

;--------------------------------------------------------------------

CODE_23EDDA:
	JSR.w CODE_23EE02
	TXA
	BMI.b CODE_23EDF5
	LDA.b #!Define_SMB3_SpriteID_BattleNorSpr02_Crab
	STA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	LDA.w $1960
	BEQ.b CODE_23EDF5
	DEC.w $1960
	LDA.b #$01
	STA.w !RAM_SMB3_BattleNorSpr02_Crab_IsAngryFlag,x
	JSR.w CODE_23EE2C
CODE_23EDF5:
	RTS

;--------------------------------------------------------------------

CODE_23EDF6:
	JSR.w CODE_23EE02
	TXA
	BMI.b CODE_23EE01
	LDA.b #!Define_SMB3_SpriteID_BattleNorSpr03_FighterFly
	STA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
CODE_23EE01:
	RTS

;--------------------------------------------------------------------

CODE_23EE02:
	LDX.b #$04
CODE_23EE04:
	LDA.w !RAM_SMB3_BattleNorSpr_CurrentStatus,x
	BEQ.b CODE_23EE0D
	DEX
	BPL.b CODE_23EE04
	RTS

CODE_23EE0D:
	INC.w $18CA
	LDA.b #$01
	STA.w !RAM_SMB3_BattleNorSpr_CurrentStatus,x
	LDA.b #$20
	STA.w !RAM_SMB3_BattleNorSpr_YPosLo,x
	LDA.b #$00
	STA.w !RAM_SMB3_BattleNorSpr_YSpeed,x
	LDA.b #!Define_SMB3_SpriteID_BattleNorSpr00_Spiny
	STA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	JSR.w CODE_23ED8D
	LDA.b #$30
	STA.w !RAM_SMB3_BattleNorSpr_InsidePipeTimer,x
CODE_23EE2C:
	LDA.w $18CA
	AND.b #$01
	TAY
	LDA.w DATA_21ED32,y
	STA.w !RAM_SMB3_BattleNorSpr_XPosLo,x
CODE_23EE38:
	LDA.w $18CA
	CMP.b #$05
	BNE.b CODE_23EE4A
	LDA.w !RAM_SMB3_BattleMode_4EnemiesKilledFlag
	BEQ.b CODE_23EE4A
	STA.w !RAM_SMB3_BattleNorSpr_SpeedUpAnimationFlag,x
	INY
	INY
	INY
CODE_23EE4A:
	LDA.w DATA_21ED34,y
	STA.w !RAM_SMB3_BattleNorSpr_XSpeed,x
	RTS

;--------------------------------------------------------------------

CODE_23EE51:
	DEC.w $18C9
	BPL.b CODE_23EE5B
	LDA.b #$0D
	STA.w $18C9
CODE_23EE5B:
	LDX.b #$0B
CODE_23EE5D:
	STX.w $190E
	TXA
	CLC
	ADC.w $18C9
	TAY
	LDA.w DATA_21ED3E,y
	STA.w $18C8
	JSL.l CODE_25F805
	JSR.w CODE_23EE77
	DEX
	BPL.b CODE_23EE5D
CODE_23EE76:
	RTS

CODE_23EE77:
	LDA.w $18CD,x
	BEQ.b CODE_23EE7F
	DEC.w $18CD,x
CODE_23EE7F:
	LDA.w !RAM_SMB3_BattleNorSpr_UnusedFreezeSpriteTimer,x
	BEQ.b CODE_23EE87
	DEC.w !RAM_SMB3_BattleNorSpr_UnusedFreezeSpriteTimer,x
CODE_23EE87:
	LDA.w !RAM_SMB3_BattleNorSpr_CurrentStatus,x
	BEQ.b CODE_23EE76
	JSL.l SMB3_ExecutePtr_Absolute

DATA_23EE90:
	dw CODE_23EE76
	dw CODE_23EE98
	dw CODE_23F605
	dw CODE_23F69D

;--------------------------------------------------------------------

CODE_23EE98:
	LDA.w $18CD,x
	ORA.w !RAM_SMB3_BattleNorSpr_UnusedFreezeSpriteTimer,x
	ORA.w !RAM_SMB3_BattleMode_PlayerHasWonTimer
	BEQ.b CODE_23EEB3
	JSR.w CODE_23EA95
	JSR.w CODE_23F1A5
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr0B_Coin
	BEQ.b CODE_23EEC3
	JMP.w CODE_23F22E

CODE_23EEB3:
	LDA.w !RAM_SMB3_BattleNorSpr_DisableSpriteCollisionTimer,x
	BEQ.b CODE_23EEBB
	DEC.w !RAM_SMB3_BattleNorSpr_DisableSpriteCollisionTimer,x
CODE_23EEBB:
	LDA.w !RAM_SMB3_BattleNorSpr_InsidePipeTimer,x
	BEQ.b CODE_23EEC3
	DEC.w !RAM_SMB3_BattleNorSpr_InsidePipeTimer,x
CODE_23EEC3:
	LDA.w !RAM_SMB3_BattleNorSpr_DecrementingTable7E18E9,x
	BEQ.b CODE_23EECB
	DEC.w !RAM_SMB3_BattleNorSpr_DecrementingTable7E18E9,x
CODE_23EECB:
	LDA.b #$01
	LDY.w !RAM_SMB3_BattleNorSpr_XSpeed,x
	BPL.b CODE_23EED4
	LDA.b #$02
CODE_23EED4:
	STA.w !RAM_SMB3_BattleNorSpr_FacingDirection,x
	LDA.b #$04
	LDY.w !RAM_SMB3_BattleNorSpr_YSpeed,x
	BPL.b CODE_23EEE0
	LDA.b #$08
CODE_23EEE0:
	STA.w $1962,x
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	JSL.l SMB3_ExecutePtr_Absolute

DATA_23EEEA:
	dw CODE_23F129							; 00 - Spiny
	dw CODE_23F074							; 01 - Unused Sprite
	dw CODE_23F129							; 02 - Crab
	dw CODE_23F08E							; 03 - Fighter Fly
	dw CODE_23F79C							; 04 - Wave Motion Fireball
	dw CODE_23F79C							; 05 - Wall Bouncing Fireball
	dw CODE_23F79C							; 06 - Falling Fireball
	dw CODE_23F79C							; 07 - Glitched Wall Bouncing Fireball
	dw CODE_23F79C							; 08 - Glitched Wall Bouncing Fireball
	dw CODE_23F79C							; 09 - Glitched Wall Bouncing Fireball
	dw CODE_23EF34							; 0A - Unused Sprite
	dw CODE_23EF9B							; 0B - Coin
	dw CODE_23EF3A							; 0C - Moving Card
	dw CODE_23EF35							; 0D - Stationary Card
	dw CODE_23EF3A							; 0E - Bouncing Card 
	dw CODE_23EF0A							; 0F - Kicked Block

;--------------------------------------------------------------------

CODE_23EF0A:
	JSR.w CODE_23F971
	JSR.w CODE_23F977
	LDA.w !RAM_SMB3_BattleNorSpr_YSpeed,x
	BMI.b CODE_23EF19
	CMP.b #$7D
	BCS.b CODE_23EF22
CODE_23EF19:
	INC.w !RAM_SMB3_BattleNorSpr_YSpeed,x
	INC.w !RAM_SMB3_BattleNorSpr_YSpeed,x
	INC.w !RAM_SMB3_BattleNorSpr_YSpeed,x
CODE_23EF22:
	LDA.w !RAM_SMB3_BattleNorSpr_YPosLo,x
	CMP.b #$E0
	BCC.b CODE_23EF31
	LDA.w !RAM_SMB3_BattleNorSpr_YPosHi,x
	BNE.b CODE_23EF31
	JMP.w CODE_23F6B3

CODE_23EF31:
	JSR.w CODE_23F22E
CODE_23EF34:
	RTS

;--------------------------------------------------------------------

CODE_23EF35:
	LDA.b #$00
	STA.w !RAM_SMB3_BattleNorSpr_XSpeed,x
CODE_23EF3A:
	JSR.w CODE_23F971
	JSR.w CODE_23F977
	JSR.w CODE_23EA95
	INC.w !RAM_SMB3_BattleNorSpr_YSpeed,x
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b !RAM_SMB3_Global_FrameCounter
	BIT.b #$03
	BNE.b +
	INC.w !RAM_SMB3_BattleNorSpr_YSpeed,x
+:
endif
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr0E_BouncingCard
	BEQ.b CODE_23EF5D
	INC.w !RAM_SMB3_BattleNorSpr_YSpeed,x
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b !RAM_SMB3_Global_FrameCounter
	BIT.b #$03
	BNE.b +
	INC.w !RAM_SMB3_BattleNorSpr_YSpeed,x
+:
endif
	LDA.w !RAM_SMB3_BattleNorSpr_TileCollisionFlags,x
	AND.b #$03
	AND.w !RAM_SMB3_BattleNorSpr_FacingDirection,x
	BEQ.b CODE_23EF5D
	JSR.w CODE_23F41A
CODE_23EF5D:
	LDA.w !RAM_SMB3_BattleNorSpr_YPosHi,x
	BEQ.b CODE_23EF69
	LDA.w !RAM_SMB3_BattleNorSpr_YPosLo,x
	CMP.b #$F0
	BCC.b CODE_23EF9A
CODE_23EF69:
	LDA.w !RAM_SMB3_BattleNorSpr_TileCollisionFlags,x
	AND.b #$04
	BEQ.b CODE_23EF87
	JSR.w CODE_23F197
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr0E_BouncingCard
	BNE.b CODE_23EF84
	LDA.w !RAM_SMB3_BattleNorSpr_YSpeed,x
	BMI.b CODE_23EF84
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$D9
else
	LDA.b #$DC
endif
	STA.w !RAM_SMB3_BattleNorSpr_YSpeed,x
CODE_23EF84:
	JSR.w CODE_23F1A5
CODE_23EF87:
	LDY.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	LDX.w DATA_21ED81,y
	LDA.b !RAM_SMB3_Global_FrameCounter
	LSR
	LSR
	LSR
	AND.b #$06
	JSR.w CODE_23F256
	JSR.w CODE_23F458
CODE_23EF9A:
	RTS

;--------------------------------------------------------------------

CODE_23EF9B:
	LDY.w !RAM_SMB3_BattleNorSpr_DecrementingTable7E18E9,x
	BEQ.b CODE_23EFA6
	DEY
	BNE.b CODE_23EFD8
	JMP.w CODE_23F6B3

CODE_23EFA6:
	LDA.w !RAM_SMB3_BattleMode_PlayerHasWonTimer
	ORA.w $0076
	ORA.w $18CD,x
	BNE.b CODE_23EFD8
	JSR.w CODE_23EA95
	LDA.w $18A6,x
	BEQ.b CODE_23EFD2
	JSR.w CODE_23F971
	JSR.w CODE_23F977
	INC.w !RAM_SMB3_BattleNorSpr_YSpeed,x
	INC.w !RAM_SMB3_BattleNorSpr_YSpeed,x
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b !RAM_SMB3_Global_FrameCounter
	BIT.b #$01
	BNE.b +
	INC.w !RAM_SMB3_BattleNorSpr_YSpeed,x
+:
endif
	LDA.w !RAM_SMB3_BattleNorSpr_YPosLo,x
	CMP.b #$E0
	BCC.b CODE_23EFD2
	LDA.b #$00
	STA.w !RAM_SMB3_BattleNorSpr_CurrentStatus,x
	RTS

CODE_23EFD2:
	JSR.w CODE_23F458
	INC.w !RAM_SMB3_BattleNorSpr_AnimationFrameCounter,x
CODE_23EFD8:
	REP.b #$30
	LDA.w $18C8
	AND.w #$00FF
	CLC
	ADC.w #$0100
	TAY
	SEP.b #$20
	LDA.w !RAM_SMB3_BattleNorSpr_DecrementingTable7E18E9,x
	BEQ.b CODE_23F002
	LDA.w SMB3_OAMBuffer[$00].YDisp
	CMP.b #$F0
	BEQ.b CODE_23EFFF
	LDA.w SMB3_OAMBuffer[$04].YDisp
	CMP.b #$F0
	BNE.b CODE_23F002
	LDY.w #$0010
	BNE.b CODE_23F002

CODE_23EFFF:
	LDY.w #$0000
CODE_23F002:
	LDA.w !RAM_SMB3_BattleMode_CurrentStage
	CMP.b #$0B
	BNE.b CODE_23F013
	LDA.w !RAM_SMB3_BattleNorSpr_TileCollisionFlags,x
	AND.b #$03
	BEQ.b CODE_23F013
	SEP.b #$10
	RTS

CODE_23F013:
	LDA.b #$00
	CMP.w !RAM_SMB3_BattleNorSpr_InsidePipeTimer,x
	LDA.b #$22
	BCS.b CODE_23F01E
	LDA.b #$12
CODE_23F01E:
	STA.w SMB3_OAMBuffer[$00].Prop,y
	LDA.w !RAM_SMB3_BattleNorSpr_YPosLo,x
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	LDA.w !RAM_SMB3_BattleNorSpr_XPosLo,x
	SEC
	SBC.b #$04
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	LDA.w !RAM_SMB3_BattleNorSpr_DecrementingTable7E18E9,x
	BEQ.b CODE_23F04D
	SEP.b #$10
	LSR
	AND.b #$07
	TAX
	LDA.w DATA_21ED5D,x
	STA.w SMB3_OAMBuffer[$00].Tile,y
	LDX.w $190E
	LDA.b #$02
	STA.w SMB3_OAMBuffer[$00].Prop,y
	REP.b #$10
	BRA.b CODE_23F065

CODE_23F04D:
	PHY
	SEP.b #$10
	LDA.w !RAM_SMB3_BattleNorSpr_AnimationFrameCounter,x
	LSR
	LSR
	CLC
	ADC.w $190E
	AND.b #$03
	TAY
	LDA.w DATA_21ED59,y
	REP.b #$10
	PLY
	STA.w SMB3_OAMBuffer[$00].Tile,y
CODE_23F065:
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	LDA.w #$0002
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	SEP.b #$30
	RTS

;--------------------------------------------------------------------

CODE_23F074:
	LDA.w !RAM_SMB3_BattleNorSpr_XSpeed,x
	PHA
	LDA.w !RAM_SMB3_BattleNorSpr_InsidePipeTimer,x
	BEQ.b CODE_23F086
	LDY.w !RAM_SMB3_BattleNorSpr_FacingDirection,x
	LDA.w DATA_21ED6A,y
	STA.w !RAM_SMB3_BattleNorSpr_XSpeed,x
CODE_23F086:
	JSR.w CODE_23F971
	PLA
	STA.w !RAM_SMB3_BattleNorSpr_XSpeed,x
	RTS

;--------------------------------------------------------------------

CODE_23F08E:
	JSR.w CODE_23F0EF
	LDY.w !RAM_SMB3_BattleNorSpr_DecrementingTable7E18E9,x
	BEQ.b CODE_23F09E
	DEY
	BNE.b CODE_23F0B0
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$DF
else
	LDA.b #$E4
endif
	STA.w !RAM_SMB3_BattleNorSpr_YSpeed,x
CODE_23F09E:
	JSR.w CODE_23F074
	JSR.w CODE_23F977
	LDA.w !RAM_SMB3_BattleNorSpr_YSpeed,x
	BMI.b CODE_23F0AD
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	CMP.b #$4C
else
	CMP.b #$40
endif
	BCS.b CODE_23F0B0
CODE_23F0AD:
	INC.w !RAM_SMB3_BattleNorSpr_YSpeed,x
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b !RAM_SMB3_Global_FrameCounter
	BIT.b #$03
	BNE.b +
	INC.w !RAM_SMB3_BattleNorSpr_YSpeed,x
+:
endif
CODE_23F0B0:
	JSR.w CODE_23EA95
	LDA.w !RAM_SMB3_BattleNorSpr_TileCollisionFlags,x
	AND.b #$04
	BNE.b CODE_23F0C6
	LDA.w !RAM_SMB3_BattleNorSpr_AnimationFrameCounter,x
	CLC
	ADC.b #$04
	STA.w !RAM_SMB3_BattleNorSpr_AnimationFrameCounter,x
	JMP.w CODE_23F0EC

CODE_23F0C6:
	ASL
	STA.w !RAM_SMB3_BattleNorSpr_AnimationFrameCounter,x
	LDA.w !RAM_SMB3_BattleNorSpr_DecrementingTable7E18E9,x
	BNE.b CODE_23F0D4
	LDA.b #$10
	STA.w !RAM_SMB3_BattleNorSpr_DecrementingTable7E18E9,x
CODE_23F0D4:
	JSR.w CODE_23F197
	JSR.w CODE_23F1A5
	LDA.w !RAM_SMB3_BattleNorSpr_InsidePipeTimer,x
	BEQ.b CODE_23F0EC
	LDA.b #$00
	STA.w !RAM_SMB3_BattleNorSpr_DecrementingTable7E18E9,x
	STA.w !RAM_SMB3_BattleNorSpr_YSpeed,x
	LDA.b !RAM_SMB3_Global_FrameCounter
	STA.w !RAM_SMB3_BattleNorSpr_AnimationFrameCounter,x
CODE_23F0EC:
	JMP.w CODE_23F18D

;--------------------------------------------------------------------

CODE_23F0EF:
	LDA.w !RAM_SMB3_BattleNorSpr_YPosLo,x
	CMP.b #$A0
	BCC.b CODE_23F128
	LDY.w !RAM_SMB3_BattleNorSpr_FacingDirection,x
	LDA.w !RAM_SMB3_BattleNorSpr_XPosLo,x
	CMP.w DATA_21ED64,y
	BNE.b CODE_23F108
	LDA.b #$60
	STA.w !RAM_SMB3_BattleNorSpr_InsidePipeTimer,x
	BNE.b CODE_23F128
CODE_23F108:
	CMP.w DATA_21ED66,y
	BNE.b CODE_23F128
	LDA.b #$20
	STA.w !RAM_SMB3_BattleNorSpr_YPosLo,x
	LDA.w !RAM_SMB3_Global_RandomByte02
	AND.b #$01
	TAY
	LDA.w DATA_21ED32,y
	STA.w !RAM_SMB3_BattleNorSpr_XPosLo,x
	EOR.w !RAM_SMB3_BattleNorSpr_XSpeed,x
	BPL.b CODE_23F126
	JSR.w CODE_23F41A
CODE_23F126:
	PLA
	PLA
CODE_23F128:
	RTS

;--------------------------------------------------------------------

CODE_23F129:
	JSR.w CODE_23F0EF
	JSR.w CODE_23F074
	JSR.w CODE_23F977
	LDA.w !RAM_SMB3_BattleNorSpr_YSpeed,x
	BMI.b CODE_23F13B
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	CMP.b #$4C
else
	CMP.b #$40
endif
	BCS.b CODE_23F141
CODE_23F13B:
	INC.w !RAM_SMB3_BattleNorSpr_YSpeed,x
	INC.w !RAM_SMB3_BattleNorSpr_YSpeed,x
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b !RAM_SMB3_Global_FrameCounter
	BIT.b #$01
	BNE.b +
	INC.w !RAM_SMB3_BattleNorSpr_YSpeed,x
+:
endif
CODE_23F141:
	JSR.w CODE_23EA95
	LDA.w !RAM_SMB3_BattleNorSpr_TileCollisionFlags,x
	AND.b #$04
	BNE.b CODE_23F151
	STA.w !RAM_SMB3_BattleNorSpr_AnimationFrameCounter,x
	JMP.w CODE_23F18D

CODE_23F151:
	LDA.w !RAM_SMB3_BattleNorSpr_YSpeed,x
	PHA
	JSR.w CODE_23F197
	JSR.w CODE_23F1A5
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr02_Crab
	BNE.b CODE_23F165
	INC.w !RAM_SMB3_BattleNorSpr_AnimationFrameCounter,x
CODE_23F165:
	LDA.w !RAM_SMB3_BattleNorSpr_SpeedUpAnimationFlag,x
	ORA.w !RAM_SMB3_BattleNorSpr_Table7E1953,x
	BEQ.b CODE_23F170
	INC.w !RAM_SMB3_BattleNorSpr_AnimationFrameCounter,x
CODE_23F170:
	INC.w !RAM_SMB3_BattleNorSpr_AnimationFrameCounter,x
	LDA.w !RAM_SMB3_BattleNorSpr_InsidePipeTimer,x
	BEQ.b CODE_23F17B
	INC.w !RAM_SMB3_BattleNorSpr_AnimationFrameCounter,x
CODE_23F17B:
	PLA
	CMP.b #$10
	BCC.b CODE_23F18D
	LDA.w !RAM_SMB3_BattleNorSpr_StoredXSpeed,x
	BEQ.b CODE_23F18D
	STA.w !RAM_SMB3_BattleNorSpr_XSpeed,x
	LDA.b #$00
	STA.w !RAM_SMB3_BattleNorSpr_StoredXSpeed,x
CODE_23F18D:
	JSR.w CODE_23F22E
	JSR.w CODE_23F358
	JSR.w CODE_23F458
	RTS

;--------------------------------------------------------------------

CODE_23F197:
	LDA.w !RAM_SMB3_BattleNorSpr_YPosLo,x
	AND.b #$F0
	STA.w !RAM_SMB3_BattleNorSpr_YPosLo,x
	LDA.b #$00
	STA.w !RAM_SMB3_BattleNorSpr_YSpeed,x
CODE_23F1A4:
	RTS

;--------------------------------------------------------------------

CODE_23F1A5:
	LDA.w !RAM_SMB3_BattleNorSpr_YSpeed,x
	BMI.b CODE_23F1A4
	LDA.w !RAM_SMB3_BattleNorSpr_InsidePipeTimer,x
	BNE.b CODE_23F1A4
	LDA.w !RAM_SMB3_BattleNorSpr_TileSpritesFeetAreTouching,x
	CMP.b #$C2
	BEQ.b CODE_23F1BB
	LDA.w !RAM_SMB3_BattleMode_POWBlockQuakeTimer
	BEQ.b CODE_23F22D
CODE_23F1BB:
	LDA.b #!Define_SMAS_Sound0060_Contact
	STA.w !RAM_SMB3_Global_SoundCh1
	LDA.b #$00
	STA.w $18CD,x
	STA.w !RAM_SMB3_BattleNorSpr_UnusedFreezeSpriteTimer,x
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr0C_MovingCard
	BCS.b CODE_23F209
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr02_Crab
	BNE.b CODE_23F1ED
	LDA.w !RAM_SMB3_BattleNorSpr_CurrentStatus,x
	CMP.b #$02
	BEQ.b CODE_23F1ED
	LDA.w !RAM_SMB3_BattleNorSpr02_Crab_IsAngryFlag,x
	BNE.b CODE_23F1ED
	LDA.b #$01
	STA.w !RAM_SMB3_BattleNorSpr02_Crab_IsAngryFlag,x
	LDA.w !RAM_SMB3_BattleNorSpr_XSpeed,x
	JSR.w CODE_23F626
	JMP.w CODE_23F204

CODE_23F1ED:
	LDA.w !RAM_SMB3_BattleNorSpr_CurrentStatus,x
	EOR.b #$03
	STA.w !RAM_SMB3_BattleNorSpr_CurrentStatus,x
	CMP.b #$01
	BNE.b CODE_23F204
	LDY.w !RAM_SMB3_BattleNorSpr_FacingDirection,x
	DEY
	JSR.w CODE_23EE38
	LDA.b #$00
	BEQ.b CODE_23F206
CODE_23F204:
	LDA.b #$FF
CODE_23F206:
	STA.w !RAM_SMB3_BattleNorSpr_DecrementingTable7E18E9,x
CODE_23F209:
	LDA.w !RAM_SMB3_BattleNorSpr_TileSpritesFeetAreTouching,x
	CMP.b #$C2
	BNE.b CODE_23F228
	LDA.w !RAM_SMB3_BattleNorSpr_TileCollisionFlags,x
	AND.b #$C0
	CMP.b #$C0
	BEQ.b CODE_23F228
	LDY.b #$01
	ASL
	BCC.b CODE_23F21F
	DEY
CODE_23F21F:
	LDA.w !RAM_SMB3_BattleNorSpr_XSpeed,x
	STA.w !RAM_SMB3_BattleNorSpr_StoredXSpeed,x
	JSR.w CODE_23EE38
CODE_23F228:
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$DA
else
	LDA.b #$E0
endif
	STA.w !RAM_SMB3_BattleNorSpr_YSpeed,x
CODE_23F22D:
	RTS

;--------------------------------------------------------------------

CODE_23F22E:
	LDY.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	CPY.b #!Define_SMB3_SpriteID_BattleNorSpr04_WaveMotionFireball
	BEQ.b CODE_23F239
	CPY.b #!Define_SMB3_SpriteID_BattleNorSpr05_WallBouncingFireball
	BNE.b CODE_23F250
CODE_23F239:
	LDA.w !RAM_SMB3_BattleNorSpr_DecrementingTable7E18E9,x
	BEQ.b CODE_23F250
	LSR
	LSR
	AND.b #$0F
	TAY
	LDA.w DATA_21EDBD,y
	STA.w !RAM_SMB3_BattleNorSpr_AnimationFrameCounter,x
	LDX.b #$18
	LDA.b #$06
	JMP.w CODE_23F256

CODE_23F250:
	LDX.w DATA_21ED81,y
	LDA.w DATA_21ED6D,y
CODE_23F256:
	STA.b $00
	STX.b $01
	LDX.w $190E
	LDA.w !RAM_SMB3_BattleNorSpr_YPosHi,x
	BEQ.b CODE_23F26A
	LDA.w !RAM_SMB3_BattleNorSpr_YPosLo,x
	CMP.b #$F0
	BCS.b CODE_23F26A
	RTS

CODE_23F26A:
	LDY.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	LDA.w !RAM_SMB3_BattleNorSpr_SpeedUpAnimationFlag,x
	BEQ.b CODE_23F276
	LDA.b #$0C
	STA.b $00
CODE_23F276:
	LDA.w !RAM_SMB3_BattleNorSpr_YPosLo,x
	STA.b $03
	LDY.b #$20
	LDA.w !RAM_SMB3_BattleNorSpr_CurrentStatus,x
	CMP.b #$02
	BCC.b CODE_23F299
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr03_FighterFly
	BEQ.b CODE_23F299
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr02_Crab
	BCS.b CODE_23F297
	INC.b $03
	INC.b $03
	LDA.b #$1A
	STA.b $01
CODE_23F297:
	LDY.b #$A0
CODE_23F299:
	LDA.w !RAM_SMB3_BattleNorSpr_InsidePipeTimer,x
	BEQ.b CODE_23F2A6
	DEC.b $03
	DEC.b $03
	DEC.b $03
	LDY.b #$10
CODE_23F2A6:
	LDA.w !RAM_SMB3_BattleNorSpr_CurrentStatus,x
	CMP.b #$01
	BEQ.b CODE_23F2B8
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr00_Spiny
	BEQ.b CODE_23F2B8
	TYA
	ORA.b #$80
	TAY
CODE_23F2B8:
	STY.b $02
	LDY.w $18C8
	LDA.w !RAM_SMB3_BattleNorSpr_XPosLo,x
	CLC
	ADC.w $199B
	STA.w SMB3_OAMBuffer[$40].XDisp,y
	LDA.b #$00
	STA.w $199B
	LDA.b $03
	STA.w SMB3_OAMBuffer[$40].YDisp,y
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr02_Crab
	BNE.b CODE_23F2EA
	LDA.w !RAM_SMB3_BattleNorSpr_AnimationFrameCounter,x
	LDY.b #$00
	AND.b #$08
	BEQ.b CODE_23F2E3
	LDY.b #$40
CODE_23F2E3:
	TYA
	LDY.w $18C8
	JMP.w CODE_23F2F4

CODE_23F2EA:
	LDA.w !RAM_SMB3_BattleNorSpr_FacingDirection,x
	LSR
	LDA.b #$00
	BCC.b CODE_23F2F4
	LDA.b #$40
CODE_23F2F4:
	ORA.b $00
	ORA.b $02
	STA.w SMB3_OAMBuffer[$40].Prop,y
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr02_Crab
	BNE.b CODE_23F311
	LDA.w !RAM_SMB3_BattleNorSpr02_Crab_IsAngryFlag,x
	LDX.b $01
	AND.b #$01
	BNE.b CODE_23F31A
	BEQ.b CODE_23F31B								; Note: This will always branch.

CODE_23F30D:
	LDA.b #$00
	BRA.b CODE_23F314

CODE_23F311:
	LDA.w !RAM_SMB3_BattleNorSpr_AnimationFrameCounter,x
CODE_23F314:
	LDX.b $01
	AND.b #$08
	BEQ.b CODE_23F31B
CODE_23F31A:
	INX
CODE_23F31B:
	LDA.w DATA_21ED95,x
	STA.w SMB3_OAMBuffer[$40].Tile,y
	LDA.w SMB3_OAMBuffer[$40].XDisp,y
	CMP.b #$F1
	BCC.b CODE_23F34B
	LDA.w SMB3_OAMBuffer[$40].XDisp,y
	STA.w SMB3_OAMBuffer[$41].XDisp,y
	LDA.w SMB3_OAMBuffer[$40].YDisp,y
	STA.w SMB3_OAMBuffer[$41].YDisp,y
	LDA.w SMB3_OAMBuffer[$40].Tile,y
	STA.w SMB3_OAMBuffer[$41].Tile,y
	LDA.w SMB3_OAMBuffer[$40].Prop,y
	STA.w SMB3_OAMBuffer[$41].Prop,y
	TYA
	LSR
	LSR
	TAY
	LDA.b #$03
	STA.w SMB3_OAMTileSizeBuffer[$41].Slot,y
	BRA.b CODE_23F34F

CODE_23F34B:
	TYA
	LSR
	LSR
	TAY
CODE_23F34F:
	LDA.b #$02
	STA.w SMB3_OAMTileSizeBuffer[$40].Slot,y
CODE_23F354:
	LDX.w $190E
	RTS

;--------------------------------------------------------------------

CODE_23F358:
	CPX.b #$00
	BEQ.b CODE_23F36F
	TXA
	CLC
	ADC.b !RAM_SMB3_Global_FrameCounter
	LSR
	BCC.b CODE_23F36F
	TXA
	TAY
	DEY
	STY.b $0F
CODE_23F368:
	JSR.w CODE_23F370
	DEC.b $0F
	BPL.b CODE_23F368
CODE_23F36F:
	RTS

CODE_23F370:
	LDY.b $0F
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,y
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr04_WaveMotionFireball
	BEQ.b CODE_23F354
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr05_WallBouncingFireball
	BEQ.b CODE_23F354
	LDA.w !RAM_SMB3_BattleNorSpr_CurrentStatus,y
	BEQ.b CODE_23F354
	CMP.b #$03
	BCS.b CODE_23F38E
	LDA.w !RAM_SMB3_BattleNorSpr_InsidePipeTimer,x
	ORA.w !RAM_SMB3_BattleNorSpr_InsidePipeTimer,y
	BEQ.b CODE_23F391
CODE_23F38E:
	JMP.w CODE_23F416

CODE_23F391:
	LDA.w !RAM_SMB3_BattleNorSpr_DisableSpriteCollisionTimer,x
	BEQ.b CODE_23F39B
	LDA.w !RAM_SMB3_BattleNorSpr_DisableSpriteCollisionTimer,y
	BNE.b CODE_23F416
CODE_23F39B:
	LDX.b $0F
	LDY.b #$04
	JSR.w CODE_23F432
	LDX.w $190E
	LDY.b #$00
	JSR.w CODE_23F432
	JSR.w CODE_23ECC9
	BCC.b CODE_23F416
	LDY.b $0F
	LDA.w !RAM_SMB3_BattleNorSpr_TileCollisionFlags,x
	AND.w !RAM_SMB3_BattleNorSpr_TileCollisionFlags,y
	AND.b #$04
	BEQ.b CODE_23F416
	LDA.w $18CD,x
	BNE.b CODE_23F3E5
	LDA.b #$28
	STA.w !RAM_SMB3_BattleNorSpr_DisableSpriteCollisionTimer,x
	LDA.w !RAM_SMB3_BattleNorSpr_CurrentStatus,x
	CMP.b #$01
	BNE.b CODE_23F3D6
	LDA.b #$10
	STA.w $18CD,x
	LDA.b #$08
	STA.w !RAM_SMB3_BattleNorSpr_AnimationFrameCounter,x
CODE_23F3D6:
	LDA.w !RAM_SMB3_BattleNorSpr_XPosLo,x
	CMP.w !RAM_SMB3_BattleNorSpr_XPosLo,y
	ROR
	EOR.w !RAM_SMB3_BattleNorSpr_XSpeed,x
	BMI.b CODE_23F3E5
	JSR.w CODE_23F41A
CODE_23F3E5:
	LDA.w $18CD,y
	BNE.b CODE_23F416
	LDA.b #$28
	STA.w !RAM_SMB3_BattleNorSpr_DisableSpriteCollisionTimer,y
	LDA.w !RAM_SMB3_BattleNorSpr_CurrentStatus,y
	CMP.b #$01
	BNE.b CODE_23F400
	LDA.b #$10
	STA.w $18CD,y
	LDA.b #$08
	STA.w !RAM_SMB3_BattleNorSpr_AnimationFrameCounter,y
CODE_23F400:
	LDA.w !RAM_SMB3_BattleNorSpr_XPosLo,y
	CMP.w !RAM_SMB3_BattleNorSpr_XPosLo,x
	ROR
	EOR.w !RAM_SMB3_BattleNorSpr_XSpeed,y
	BMI.b CODE_23F411
	LDX.b $0F
	JSR.w CODE_23F41A
CODE_23F411:
	LDY.b $0F
	LDX.w $190E					; Optimization: Unnecessary line of code.
CODE_23F416:
	LDX.w $190E
	RTS

;--------------------------------------------------------------------

CODE_23F41A:
	LDA.w !RAM_SMB3_BattleNorSpr_XSpeed,x
	EOR.b #$FF
	CLC
	ADC.b #$01
	STA.w !RAM_SMB3_BattleNorSpr_XSpeed,x
	RTS

;--------------------------------------------------------------------

CODE_23F426:
	LDA.w !RAM_SMB3_BattleMode_MariosXPosLo,y
	LDY.b #$00
	SBC.w !RAM_SMB3_BattleNorSpr_XPosLo,x
	BPL.b CODE_23F431
	INY
CODE_23F431:
	RTS

;--------------------------------------------------------------------

CODE_23F432:
	LDA.w !RAM_SMB3_BattleNorSpr_YPosLo,x
	CLC
	ADC.b #$06
	STA.w $0000,y
	LDA.b #$04
	STA.w $0002,y
	LDA.w !RAM_SMB3_BattleNorSpr_XPosLo,x
	CLC
	ADC.b #$02
	STA.w $0001,y
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr0B_Coin
	LDA.b #$0C
	BCC.b CODE_23F454
	LDA.b #$05
CODE_23F454:
	STA.w $0003,y
CODE_23F457:
	RTS

;--------------------------------------------------------------------

CODE_23F458:
	LDA.w !RAM_SMB3_BattleMode_MariosState
	CMP.b #$03
	BEQ.b CODE_23F463
	CMP.b #$01
	BNE.b CODE_23F457
CODE_23F463:
	LDA.w !RAM_SMB3_BattleMode_LuigisState
	CMP.b #$03
	BEQ.b CODE_23F46E
	CMP.b #$01
	BNE.b CODE_23F457
CODE_23F46E:
	TXA
	CLC
	ADC.b !RAM_SMB3_Global_FrameCounter
	LSR
	BCS.b CODE_23F457
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr06_FallingFireball
	BEQ.b CODE_23F481
	LDA.w !RAM_SMB3_BattleNorSpr_InsidePipeTimer,x
	BNE.b CODE_23F457
CODE_23F481:
	LDA.b #$01
	STA.b $0F
CODE_23F485:
	LDX.b $0F
	LDA.w !RAM_SMB3_BattleMode_MariosState,x
	CMP.b #$01
	BNE.b CODE_23F493
	LDA.w !RAM_SMB3_BattleMode_MariosUnusedFlashingTimer,x
	BEQ.b CODE_23F496
CODE_23F493:
	JMP.w CODE_23F559

CODE_23F496:
	LDY.b #$04
	JSR.w CODE_23ECAC
	LDY.b #$00
	LDX.w $190E
	JSR.w CODE_23F432
	JSR.w CODE_23ECC9
	LDY.b $0F
	BCC.b CODE_23F493
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr0C_MovingCard
	BCC.b CODE_23F4B4
	JMP.w CODE_23F5D3

CODE_23F4B4:
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr0B_Coin
	BNE.b CODE_23F4FC
	LDA.b #!Define_SMAS_Sound0063_Coin
	STA.w !RAM_SMB3_Global_SoundCh3
	LDA.b #$0F
	STA.w !RAM_SMB3_BattleNorSpr_DecrementingTable7E18E9,x
	LDA.w !RAM_SMB3_BattleMode_MariosCoinCount,y
	CLC
	ADC.b #$01
	STA.w !RAM_SMB3_BattleMode_MariosCoinCount,y
	LDA.w !RAM_SMB3_BattleMode_MariosCoinCount
	CLC
	ADC.w !RAM_SMB3_BattleMode_LuigisCoinCount
	CMP.b #$05
	BNE.b CODE_23F4F8
CODE_23F4D6:
	LDY.b #$0B
	LDA.b #$FF
CODE_23F4DA:
	STA.w $18CD,y
	DEY
	BPL.b CODE_23F4DA
	LDY.b #$01
	LDA.w !RAM_SMB3_BattleMode_MariosCoinCount
	CMP.w !RAM_SMB3_BattleMode_LuigisCoinCount
	BCC.b CODE_23F4EB
	INY
CODE_23F4EB:
	STY.w $078C
	LDA.b #$C0
	STA.w !RAM_SMB3_BattleMode_PlayerHasWonTimer
	LDA.b #!Define_SMB3_LevelMusic_Victory
	STA.w !RAM_SMB3_Global_MusicCh1
CODE_23F4F8:
	JSR.w CODE_23E161
	RTS

CODE_23F4FC:
	LDA.w !RAM_SMB3_BattleNorSpr_CurrentStatus,x
	CMP.b #$01
	BNE.b CODE_23F564
	LDY.b #$0B
	LDA.b #$FF
CODE_23F507:
	STA.w $18CD,y
	DEY
	BPL.b CODE_23F507
	LDA.b $0F
	EOR.b #$01
	TAY
	LDA.b #$FE
	STA.w !RAM_SMB3_BattleMode_PlayerHasWonTimer
	LDY.b $0F
	LDA.b #$02
	STA.w $078C
	CPY.b #$01
	BEQ.b CODE_23F527
	LDA.b #$01
	STA.w $078C
CODE_23F527:
	LDA.b #$20
	STA.w !RAM_SMB3_BattleNorSpr_AnimationFrameCounter,x
	STA.w !RAM_SMB3_BattleMode_MariosDeathFreezeTimer,y
	LDA.b #!Define_SMB3_LevelMusic_MarioDied
	STA.w !RAM_SMB3_Global_MusicCh1
	LDA.b #$02
	STA.w !RAM_SMB3_BattleMode_MariosState,y
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$C7
else
	LDA.b #$D0
endif
	STA.w !RAM_SMB3_BattleMode_MariosYSpeed,y
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr04_WaveMotionFireball
	BEQ.b CODE_23F551
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr05_WallBouncingFireball
	BEQ.b CODE_23F551
	JSR.w CODE_23F426
	INY
	TYA
	STA.w !RAM_SMB3_BattleNorSpr_FacingDirection,x
CODE_23F551:
	LDX.w $190E
	RTS

CODE_23F555:
	DEY
	JSR.w CODE_23EE38
CODE_23F559:
	DEC.b $0F
	BMI.b CODE_23F560
	JMP.w CODE_23F485

CODE_23F560:
	LDX.w $190E
	RTS

CODE_23F564:
	LDA.b #!Define_SMAS_Sound0060_KickShell
	STA.w !RAM_SMB3_Global_SoundCh1
	LDA.w !RAM_SMB3_BattleMode_MariosXSpeed,y
	LDY.b #$00
	CMP.b #$00
	BMI.b CODE_23F573
	INY
CODE_23F573:
	LDA.w DATA_21EDCD,y
	STA.w !RAM_SMB3_BattleNorSpr_XSpeed,x
	LDY.b $0F
	LDA.b #$03
	STA.w !RAM_SMB3_BattleNorSpr_CurrentStatus,x
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$DA
else
	LDA.b #$E0
endif
	STA.w !RAM_SMB3_BattleNorSpr_YSpeed,x
	LDA.b #$0C
	STA.w !RAM_SMB3_BattleMode_MariosKickAnimationTimer,y
	LDA.w !RAM_SMB3_BattleMode_MariosCoinCount,y
	CLC
	ADC.b #$01
	STA.w !RAM_SMB3_BattleMode_MariosCoinCount,y
	LDA.w !RAM_SMB3_BattleMode_MariosCoinCount
	CLC
	ADC.w !RAM_SMB3_BattleMode_LuigisCoinCount
	CMP.b #$05
	BEQ.b CODE_23F5C2
	CMP.b #$04
	BNE.b CODE_23F5C5
	INC.w !RAM_SMB3_BattleMode_4EnemiesKilledFlag
	LDX.b #$04
CODE_23F5A7:
	LDA.w !RAM_SMB3_BattleNorSpr_CurrentStatus,x
	BEQ.b CODE_23F5B0
	CMP.b #$03
	BCC.b CODE_23F5B5
CODE_23F5B0:
	DEX
	BPL.b CODE_23F5A7
	BMI.b CODE_23F5C5

CODE_23F5B5:
	LDA.w !RAM_SMB3_BattleNorSpr_XSpeed,x
	JSR.w CODE_23F626
	LDA.b #$01
	STA.w !RAM_SMB3_BattleNorSpr_SpeedUpAnimationFlag,x
	BNE.b CODE_23F5C5
CODE_23F5C2:
	JSR.w CODE_23F4D6
CODE_23F5C5:
	LDX.w $190E
	LDY.b $0F
	LDA.b #$05
	STA.w $00BC,y
	JSR.w CODE_23E161
	RTS

CODE_23F5D3:
	LDA.w !RAM_SMB3_BattleNorSpr_DecrementingTable7E18E9,x
	BNE.b CODE_23F604
	JSR.w CODE_23F6B3
	LDA.b #!Define_SMAS_Sound0060_MidwayPoint
	STA.w !RAM_SMB3_Global_SoundCh1
	LDY.b $0F
	LDA.b #$40
	STA.w $1989,y
	LDY.b #$00
	LDA.b $0F
	BEQ.b CODE_23F5EF
	LDY.b #SMB3_IndividualPlayerData[$01].ReserveSlots-SMB3_IndividualPlayerData[$00].ReserveSlots
CODE_23F5EF:
	LDA.w SMB3_IndividualPlayerData[$00].CardSlots+$01,y
	STA.w SMB3_IndividualPlayerData[$00].CardSlots+$02,y
	LDA.w SMB3_IndividualPlayerData[$00].CardSlots,y
	STA.w SMB3_IndividualPlayerData[$00].CardSlots+$01,y
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	SEC
	SBC.b #!Define_SMB3_SpriteID_BattleNorSpr0C_MovingCard-$01
	STA.w SMB3_IndividualPlayerData[$00].CardSlots,y
CODE_23F604:
	RTS

;--------------------------------------------------------------------

CODE_23F605:
	LDA.w $18CD,x
	BNE.b CODE_23F684
	LDA.b #$00
	STA.w !RAM_SMB3_BattleNorSpr_AnimationFrameCounter,x
	LDA.w !RAM_SMB3_BattleNorSpr_DecrementingTable7E18E9,x
	BNE.b CODE_23F647
	JSR.w CODE_23F22E
	LDA.b #$01
	STA.w !RAM_SMB3_BattleNorSpr_CurrentStatus,x
	LDA.w !RAM_SMB3_BattleNorSpr_StoredXSpeed,x
	PHA
	LDA.b #$00
	STA.w !RAM_SMB3_BattleNorSpr_StoredXSpeed,x
	PLA
CODE_23F626:
	PHP
	BPL.b CODE_23F62E
	EOR.b #$FF
	CLC
	ADC.b #$01
CODE_23F62E:
	LDY.b #$00
	CMP.b #$0A
	BCC.b CODE_23F636
	INY
	INY
CODE_23F636:
	CMP.b #$0C
	BCC.b CODE_23F63C
	INY
	INY
CODE_23F63C:
	PLP
	BPL.b CODE_23F640
	INY
CODE_23F640:
	LDA.w DATA_21EDD5,y
	STA.w !RAM_SMB3_BattleNorSpr_XSpeed,x
	RTS

CODE_23F647:
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$01
	BNE.b CODE_23F650
	DEC.w !RAM_SMB3_BattleNorSpr_DecrementingTable7E18E9,x
CODE_23F650:
	LDA.w !RAM_SMB3_BattleNorSpr_DecrementingTable7E18E9,x
	CMP.b #$60
	BCS.b CODE_23F66C
	LSR
	LSR
	LSR
	LSR
	LSR
	TAY
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.w DATA_21EDCF,y
	BEQ.b CODE_23F66C
	INC.w $199B
	LDA.b #$08
	STA.w !RAM_SMB3_BattleNorSpr_AnimationFrameCounter,x
CODE_23F66C:
	JSR.w CODE_23EA95
	LDA.w !RAM_SMB3_BattleNorSpr_TileCollisionFlags,x
	AND.b #$04
	BEQ.b CODE_23F681
	JSR.w CODE_23F197
	LDA.b #$00
	STA.w !RAM_SMB3_BattleNorSpr_XSpeed,x
	JSR.w CODE_23F1A5
CODE_23F681:
	JSR.w CODE_23F687
CODE_23F684:
	JMP.w CODE_23F18D

CODE_23F687:
	JSR.w CODE_23F971
	JSR.w CODE_23F977
	LDA.w !RAM_SMB3_BattleNorSpr_YSpeed,x
	BMI.b CODE_23F696
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	CMP.b #$4C
else
	CMP.b #$40
endif
	BCS.b CODE_23F69C
CODE_23F696:
	INC.w !RAM_SMB3_BattleNorSpr_YSpeed,x
	INC.w !RAM_SMB3_BattleNorSpr_YSpeed,x
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b !RAM_SMB3_Global_FrameCounter
	BIT.b #$01
	BNE.b +
	INC.w !RAM_SMB3_BattleNorSpr_YSpeed,x
+:
endif
CODE_23F69C:
	RTS

;--------------------------------------------------------------------

CODE_23F69D:
	LDA.w !RAM_SMB3_BattleNorSpr_SpeedUpAnimationFlag,x
	BNE.b CODE_23F6A7
	LDA.w $18CD,x
	BNE.b CODE_23F6D5
CODE_23F6A7:
	LDA.w !RAM_SMB3_BattleNorSpr_YPosLo,x
	CMP.b #$E0
	BCC.b CODE_23F6B9
	LDA.w !RAM_SMB3_BattleNorSpr_YPosHi,x
	BNE.b CODE_23F6B9
CODE_23F6B3:
	LDA.b #$00
	STA.w !RAM_SMB3_BattleNorSpr_CurrentStatus,x
	RTS

CODE_23F6B9:
	JSR.w CODE_23F687
	INC.w !RAM_SMB3_BattleNorSpr_YSpeed,x
	LDA.b !RAM_SMB3_Global_FrameCounter
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	BIT.b #$01
else
	AND.b #$01
endif
	BNE.b CODE_23F6D5
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	BIT.b #$03
	BNE.b +
	INC.w !RAM_SMB3_BattleNorSpr_YSpeed,x
+:
endif
	LDA.w !RAM_SMB3_BattleNorSpr_XSpeed,x
	BEQ.b CODE_23F6D5
	BMI.b CODE_23F6D2
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b !RAM_SMB3_Global_FrameCounter
	BIT.b #$01
	BNE.b +
	DEC.w !RAM_SMB3_BattleNorSpr_YSpeed,x
+:
endif
	DEC.w !RAM_SMB3_BattleNorSpr_XSpeed,x
	DEC.w !RAM_SMB3_BattleNorSpr_XSpeed,x
CODE_23F6D2:
	INC.w !RAM_SMB3_BattleNorSpr_XSpeed,x
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b !RAM_SMB3_Global_FrameCounter
	BIT.b #$03
	BNE.b +
	INC.w !RAM_SMB3_BattleNorSpr_YSpeed,x
+:
endif
CODE_23F6D5:
	JMP.w CODE_23F22E

;--------------------------------------------------------------------

CODE_23F6D8:
	RTS

CODE_23F6D9:
	LDA.w !RAM_SMB3_BattleMode_POWBlockQuakeTimer
	STA.b $00
	BEQ.b CODE_23F6ED
	DEC.w !RAM_SMB3_BattleMode_POWBlockQuakeTimer
	LSR
	AND.b #$03
	TAY
	LDA.w DATA_21EDDD,y
	STA.w $0216
CODE_23F6ED:
	LDA.w !RAM_SMB3_BattleMode_POWBlockHitCounter
	CMP.b #$03
	BEQ.b CODE_23F6D8
	LDA.b #$98
	SEC
	SBC.w $0216
	STA.w SMB3_OAMBuffer[$08].YDisp
	LDA.b #$78
	STA.w SMB3_OAMBuffer[$08].XDisp
	LDA.w !RAM_SMB3_BattleMode_POWBlockHitCounter
	TAY
	LDA.w DATA_21EDE1,y
	STA.w SMB3_OAMBuffer[$08].Tile
	LDA.b #$04
	STA.w SMB3_OAMBuffer[$08].Prop
	LDA.b #$02
	STA.w SMB3_OAMTileSizeBuffer[$08].Slot
	LDX.b #$01
CODE_23F718:
	LDA.w !RAM_SMB3_BattleMode_POWBlockHitCounter
	CMP.b #$03
	BEQ.b CODE_23F795
	LDA.w !RAM_SMB3_BattleMode_MariosState,x
	CMP.b #$01
	BNE.b CODE_23F795
	LDY.b #$00
	JSR.w CODE_23ECAC
	LDA.b #$98
	STA.b $04
	LDA.b #$78
	STA.b $05
	LDA.b #$10
	STA.b $07
	LDY.w !RAM_SMB3_BattleMode_POWBlockHitCounter
	SEC
	SBC.w DATA_21EDE4,y
	STA.b $06
	JSR.w CODE_23ECC9
	BCC.b CODE_23F795
	LDY.w !RAM_SMB3_BattleMode_POWBlockHitCounter
	LDA.w DATA_21EDE4,y
	STA.w $193F,x
	LDA.w !RAM_SMB3_BattleMode_MariosYPosLo,x
	SEC
	SBC.w $193F,x
	CMP.b #$8D
	BCS.b CODE_23F765
	LDA.w !RAM_SMB3_BattleMode_MariosYSpeed,x
	BMI.b CODE_23F795
	LDA.b #$04
	STA.w !RAM_SMB3_BattleMode_MariosTileCollisionFlags,x
	BEQ.b CODE_23F795
CODE_23F765:
	LDA.w !RAM_SMB3_BattleMode_MariosYPosLo,x
	CLC
	ADC.w $193F,x
	CMP.b #$A1
	BCC.b CODE_23F795
	LDA.w !RAM_SMB3_BattleMode_MariosYSpeed,x
	BPL.b CODE_23F795
	LDA.b #!Define_SMAS_Sound0063_BulletShoot
	STA.w !RAM_SMB3_Global_SoundCh3
	INC.w !RAM_SMB3_BattleMode_POWBlockHitCounter
	LDA.b #$00
	STA.w !RAM_SMB3_BattleMode_MariosYSpeed,x
	LDA.b #$A9
	SEC
	SBC.w $193F,x
	STA.w !RAM_SMB3_BattleMode_MariosYPosLo,x
	LDA.b #$08
	STA.w $18B7,x
	LDA.b #$10
	STA.w !RAM_SMB3_BattleMode_POWBlockQuakeTimer
CODE_23F795:
	DEX
	BMI.b CODE_23F79B
	JMP.w CODE_23F718

CODE_23F79B:
	RTS

;--------------------------------------------------------------------

CODE_23F79C:
	LDA.w !RAM_SMB3_BattleNorSpr_DecrementingTable7E18E9,x
	BEQ.b CODE_23F7AB
	CMP.b #$20
	BNE.b CODE_23F7A8
	JMP.w CODE_23F6B3

CODE_23F7A8:
	JMP.w CODE_23F22E

CODE_23F7AB:
	JSR.w CODE_23F22E
	LDY.w $18C8
	LDA.w !RAM_SMB3_BattleNorSpr_AnimationFrameCounter,x
	AND.b #$10
	BEQ.b CODE_23F7C0
	LDA.w SMB3_OAMBuffer[$40].Prop,y
	EOR.b #$C0
	STA.w SMB3_OAMBuffer[$40].Prop,y
CODE_23F7C0:
	INC.w !RAM_SMB3_BattleNorSpr_AnimationFrameCounter,x
	INC.w !RAM_SMB3_BattleNorSpr_AnimationFrameCounter,x
	LDY.w !RAM_SMB3_BattleNorSpr_FacingDirection,x
	LDA.w !RAM_SMB3_BattleNorSpr_XPosLo,x
	CMP.w DATA_21EDEA,y
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	BEQ.b CODE_23F7D1
	CMP.w DATA_21EDEA+$02,y
endif
	BNE.b CODE_23F7DD

CODE_23F7D1:
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr04_WaveMotionFireball
	BNE.b CODE_23F7DD
	LDA.b #$40
	STA.w !RAM_SMB3_BattleNorSpr_DecrementingTable7E18E9,x
CODE_23F7DD:
	JSR.w CODE_23F458
	JSR.w CODE_23EA95
	LDA.w !RAM_SMB3_BattleMode_POWBlockQuakeTimer
	BNE.b CODE_23F7EF
	LDA.w !RAM_SMB3_BattleNorSpr_TileSpritesFeetAreTouching,x
	CMP.b #$C2
	BNE.b CODE_23F7F4
CODE_23F7EF:
	LDA.b #$40
	STA.w !RAM_SMB3_BattleNorSpr_DecrementingTable7E18E9,x
CODE_23F7F4:
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr04_WaveMotionFireball
	BNE.b CODE_23F81A
	JSR.w CODE_23F971
	JSR.w CODE_23F977
	LDA.w $18A6,x
	AND.b #$01
	TAY
	LDA.w !RAM_SMB3_BattleNorSpr_YSpeed,x
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	PHA
	LDA.b !RAM_SMB3_Global_FrameCounter
	BIT.b #$03
	BEQ.b +
	PLA
	BRA.b ++

+:
	PLA
	CLC
	ADC.w DATA_21EDE7,y
++:
endif
	CLC
	ADC.w DATA_21EDE7,y
	STA.w !RAM_SMB3_BattleNorSpr_YSpeed,x
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	AND.b #$FE
	ORA.b #$01
endif
	CMP.w DATA_21EDE9,y
	BNE.b CODE_23F819
	INC.w $18A6,x
CODE_23F819:
	RTS

CODE_23F81A:
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr06_FallingFireball
	BEQ.b CODE_23F847
	LDA.w !RAM_SMB3_BattleNorSpr_TileCollisionFlags,x
	AND.b #$03
	AND.w !RAM_SMB3_BattleNorSpr_FacingDirection,x
	BEQ.b CODE_23F82B
	JSR.w CODE_23F41A
CODE_23F82B:
	LDA.w !RAM_SMB3_BattleNorSpr_TileCollisionFlags,x
	AND.b #$0C
	AND.w $1962,x
	BEQ.b CODE_23F840
	LDA.w !RAM_SMB3_BattleNorSpr_YSpeed,x
	EOR.b #$FF
	CLC
	ADC.b #$01
	STA.w !RAM_SMB3_BattleNorSpr_YSpeed,x
CODE_23F840:
	JSR.w CODE_23F971
	JSR.w CODE_23F977
	RTS

CODE_23F847:
	JSR.w CODE_23F840
	INC.w !RAM_SMB3_BattleNorSpr_YSpeed,x
	INC.w !RAM_SMB3_BattleNorSpr_YSpeed,x
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b !RAM_SMB3_Global_FrameCounter
	BIT.b #$01
	BNE.b +
	INC.w !RAM_SMB3_BattleNorSpr_YSpeed,x
+:
endif
	LDA.w !RAM_SMB3_BattleNorSpr_YPosLo,x
	CMP.b #$E0
	BCC.b CODE_23F85C
	LDA.b #$00
	STA.w !RAM_SMB3_BattleNorSpr_CurrentStatus,x
CODE_23F85C:
	RTS

;--------------------------------------------------------------------

CODE_23F85D:
	LDX.b #$01
CODE_23F85F:
	STX.w $190E
	TXA
	CLC
	ADC.w $18C9
	TAY
	LDA.w DATA_21ED4A,y
	STA.w $18C8
	LDA.w !RAM_SMB3_BattleBounceSpr_DespawnTimer,x
	BEQ.b CODE_23F899
	PHA
	CMP.b #$0E
	BNE.b CODE_23F87B
	JSR.w CODE_23F8F0
CODE_23F87B:
	PLA
	CMP.b #$01
	BNE.b CODE_23F896
	JSR.w CODE_23F8DD
	LDA.b #$7E2000
	STA.b $2E
	LDA.b #$7E2000>>8
	STA.b $2F
	LDA.b #$7E2000>>16
	STA.b $30
	LDY.w $1908,x
	LDA.b #$C1
	STA.b [$2E],y
CODE_23F896:
	JSR.w CODE_23F89D
CODE_23F899:
	DEX
	BPL.b CODE_23F85F
	RTS

;--------------------------------------------------------------------

CODE_23F89D:
	LDA.w $0076
	ORA.w $18CB
	ORA.w $18CC
	ORA.w !RAM_SMB3_BattleMode_PlayerHasWonTimer
	BNE.b CODE_23F8BA
	DEC.w !RAM_SMB3_BattleBounceSpr_DespawnTimer,x
	JSR.w CODE_23F96B
	LDA.w !RAM_SMB3_BattleBounceSpr_YSpeed,x
	CLC
	ADC.b #$05
	STA.w !RAM_SMB3_BattleBounceSpr_YSpeed,x
CODE_23F8BA:
	LDY.w $18C8
	LDA.w !RAM_SMB3_BattleBounceSpr_XPosLo,x
	STA.w SMB3_OAMBuffer[$40].XDisp,y
	LDA.w !RAM_SMB3_BattleBounceSpr_YPosLo,x
	STA.w SMB3_OAMBuffer[$40].YDisp,y
	LDA.b #$2C
	STA.w SMB3_OAMBuffer[$40].Prop,y
	LDA.b #$80
	STA.w SMB3_OAMBuffer[$40].Tile,y
	TYA
	LSR
	LSR
	TAY
	LDA.b #$02
	STA.w SMB3_OAMTileSizeBuffer[$40].Slot,y
	RTS

;--------------------------------------------------------------------

CODE_23F8DD:
	LDA.b #$02
	STA.b $0C
	LDA.b #$03
	STA.b $0D
	LDA.b #$12
	STA.b $0E
	LDA.b #$13
	STA.b $0F
	JMP.w CODE_23F8FA

CODE_23F8F0:
	LDA.b #$FF
	STA.b $0C
	STA.b $0D
	STA.b $0E
	STA.b $0F
CODE_23F8FA:
	LDY.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	LDA.b #$08
	STA.b $03
	LDA.w $1908,x
	PHA
	AND.b #$F0
	ASL
	ROL.b $03
	ASL
	ROL.b $03
	STA.b $04
	PLA
	ASL
	AND.b #$1F
	CLC
	ADC.b $04
	STA.w SMB3_StripeImageUploadTable[$00].HighByte,y
	CLC
	ADC.b #$20
	STA.w SMB3_StripeImageUploadTable[$04].HighByte,y
	LDA.b $03
	AND.b #$DF
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,y
	STA.w SMB3_StripeImageUploadTable[$04].LowByte,y
	LDA.b #$00
	STA.w SMB3_StripeImageUploadTable[$01].LowByte,y
	STA.w SMB3_StripeImageUploadTable[$05].LowByte,y
	LDA.b #$03
	STA.w SMB3_StripeImageUploadTable[$01].HighByte,y
	STA.w SMB3_StripeImageUploadTable[$05].HighByte,y
	LDA.b $0C
	STA.w SMB3_StripeImageUploadTable[$02].LowByte,y
	LDA.b $0D
	STA.w SMB3_StripeImageUploadTable[$03].LowByte,y
	LDA.b $0E
	STA.w SMB3_StripeImageUploadTable[$06].LowByte,y
	LDA.b $0F
	STA.w SMB3_StripeImageUploadTable[$07].LowByte,y
	LDA.b #$18
	STA.w SMB3_StripeImageUploadTable[$02].HighByte,y
	STA.w SMB3_StripeImageUploadTable[$03].HighByte,y
	STA.w SMB3_StripeImageUploadTable[$06].HighByte,y
	STA.w SMB3_StripeImageUploadTable[$07].HighByte,y
	LDA.b #$FF
	STA.w SMB3_StripeImageUploadTable[$08].LowByte,y
	STA.w SMB3_StripeImageUploadTable[$08].HighByte,y
	TYA
	CLC
	ADC.b #$10
	STA.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	RTS

;--------------------------------------------------------------------

CODE_23F96B:
	TXA
	CLC
	ADC.b #$0F
	BPL.b CODE_23F97B
CODE_23F971:
	TXA
	CLC
	ADC.b #$13
	BPL.b CODE_23F97B
CODE_23F977:
	TXA
	CLC
	ADC.b #$02
CODE_23F97B:
	TAX
	JSR.w CODE_23F98F
	LDX.w $190E
	RTS

CODE_23F983:
	TXA
	CLC
	ADC.b #$11
	TAX
	JSR.w CODE_23F98F
	LDX.w $190E
	RTS

CODE_23F98F:
	LDA.w !RAM_SMB3_BattleMode_MariosYSpeed,x
	ASL
	ASL
	ASL
	ASL
	CLC
	ADC.w !RAM_SMB3_BattleMode_MariosSubYPosLo,x
	STA.w !RAM_SMB3_BattleMode_MariosSubYPosLo,x
	PHP
	LDY.b #$00
	LDA.w !RAM_SMB3_BattleMode_MariosYSpeed,x
	LSR
	LSR
	LSR
	LSR
	CMP.b #$08
	BCC.b CODE_23F9AE
	ORA.b #$F0
	DEY
CODE_23F9AE:
	PLP
	ADC.w !RAM_SMB3_BattleMode_MariosYPosLo,x
	STA.w !RAM_SMB3_BattleMode_MariosYPosLo,x
	ROL
	CPX.b #$11
	BCS.b CODE_23F9C2
	ROR
	TYA
	ADC.w !RAM_SMB3_BattleMode_MariosYPosHi,x
	STA.w !RAM_SMB3_BattleMode_MariosYPosHi,x
CODE_23F9C2:
	RTS

;--------------------------------------------------------------------

; Optimization: All the direct page RAM addresses used in this routine use unnecessary absolute addressing.

CODE_23F9C3:
	LDA.w $0076
	BEQ.b CODE_23F9E7
	PHB
	PHK
	PLB
	LDY.b #$00
	REP.b #$30
	LDA.w #DATA_23FA17
	STA.w !RAM_SMB3_Global_ScratchRAM00
	LDA.w #DATA_23FA2B
	STA.w !RAM_SMB3_Global_ScratchRAM02
	LDA.w #$0028
	STA.w !RAM_SMB3_Global_ScratchRAM04
	JSR.w CODE_23F9E8
	SEP.b #$30
	PLB
CODE_23F9E7:
	RTS

;--------------------------------------------------------------------

CODE_23F9E8:
	LDA.b (!RAM_SMB3_Global_ScratchRAM00)
	STA.w SMB3_OAMBuffer[$0C].XDisp,y
	LDA.b (!RAM_SMB3_Global_ScratchRAM02)
	STA.w SMB3_OAMBuffer[$0C].Tile,y
	INC.w !RAM_SMB3_Global_ScratchRAM00			;\ Optimization: Unnecessary absolute addressing.
	INC.w !RAM_SMB3_Global_ScratchRAM00			;|
	INC.w !RAM_SMB3_Global_ScratchRAM02			;|
	INC.w !RAM_SMB3_Global_ScratchRAM02			;/
	PHY
	TYA
	LSR
	LSR
	TAY
	SEP.b #$30
	LDA.b #$00
	STA.w SMB3_OAMTileSizeBuffer[$0C].Slot,y
	REP.b #$30
	PLY
	INY
	INY
	INY
	INY
	CPY.w !RAM_SMB3_Global_ScratchRAM04			; Optimization: Unnecessary absolute addressing.
	BNE.b CODE_23F9E8
	RTS

DATA_23FA17:
	db $6C,$80,$74,$80,$7C,$80,$84,$80
	db $8C,$80,$6C,$88,$74,$88,$7C,$88
	db $84,$88,$8C,$88

DATA_23FA2B:
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR] PAUSE tiles and properties
	db $2D,$23,$C6,$22,$C2,$22,$2E,$23,$C6,$22
	db $3D,$23,$D6,$22,$D2,$22,$3E,$23,$D6,$22
else
	db $2D,$23,$C6,$22,$C2,$22,$2E,$23,$2F,$23
	db $3D,$23,$D6,$22,$D2,$22,$3E,$23,$3F,$23
endif

;--------------------------------------------------------------------

if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
CODE_23FAF3:
	PHA
	LDA.b !RAM_SMB3_Global_FrameCounter
	BIT.b #$03
	BEQ.b CODE_23FAFD
	PLA
	BRA.b CODE_23FAFF

CODE_23FAFD:
	PLA
	INC
CODE_23FAFF:
	INC
	RTS

;--------------------------------------------------------------------

CODE_23FB01:
	PHA
	LDA.b !RAM_SMB3_Global_FrameCounter
	BIT.b #$03
	BEQ.b CODE_23FB0B
	PLA
	BRA.b CODE_23FB0D

CODE_23FB0B:
	PLA
	DEC
CODE_23FB0D:
	DEC
	RTS

%FREE_BYTES(NULLROM, 1265, $FF)
else
%FREE_BYTES(NULLROM, 1473, $FF)
endif
%BANK_END(<EndBank>)
endmacro

;#############################################################################################################
;#############################################################################################################

macro SMB3Bank24Macros(StartBank, EndBank)
%BANK_START(<StartBank>)

; Note: FG Map16 data for levels that use the tile set seen in 1-1

DATA_248000:
	db $FC,$10,$FC,$10,$FC,$10,$FC,$10,$3B,$0C,$3A,$0C,$FC,$10,$FC,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$05,$10,$06,$10,$07,$10,$08,$10
	db $05,$10,$D6,$0C,$07,$10,$D6,$0C,$E8,$14,$E9,$14,$EA,$14,$EB,$14
	db $05,$10,$14,$0C,$07,$10,$15,$0C,$37,$15,$37,$15,$36,$15,$36,$15
	db $36,$15,$36,$15,$2A,$15,$2A,$15,$36,$15,$36,$15,$36,$15,$36,$15
	db $36,$15,$39,$15,$36,$15,$39,$15,$36,$15,$5B,$14,$36,$15,$36,$15
	db $FE,$14,$FE,$14,$36,$15,$36,$15,$37,$15,$38,$15,$36,$15,$39,$15
	db $36,$15,$39,$15,$2A,$15,$3A,$15,$FE,$14,$2B,$16,$36,$15,$39,$15
	db $44,$10,$45,$10,$46,$10,$47,$10,$48,$10,$49,$10,$4A,$10,$4B,$10
	db $4C,$10,$4D,$10,$4E,$10,$4F,$10,$00,$0E,$10,$0E,$01,$0E,$11,$0E
	db $02,$0E,$12,$0E,$03,$0E,$13,$0E,$20,$0E,$20,$0E,$21,$0E,$21,$0E
	db $22,$0E,$22,$0E,$23,$0E,$23,$0E,$FC,$0C,$FC,$0C,$FC,$0C,$3E,$0C
	db $FC,$0C,$38,$0C,$FC,$0C,$38,$0C,$FC,$0C,$3F,$0C,$FC,$0C,$FC,$0C
	db $FC,$0C,$FC,$0C,$22,$0C,$22,$0C,$22,$0C,$22,$0C,$FC,$0C,$FC,$0C
	db $FC,$0C,$FC,$0C,$20,$0C,$FC,$0C,$38,$0C,$FC,$0C,$38,$0C,$FC,$0C
	db $21,$0C,$FC,$0C,$FC,$0C,$FC,$0C,$05,$10,$06,$10,$07,$10,$2A,$0C
	db $28,$0C,$FD,$10,$29,$0C,$FD,$10,$05,$10,$2B,$0C,$07,$10,$08,$10
	db $05,$10,$06,$10,$2C,$0C,$08,$10,$2D,$0C,$06,$10,$2E,$0C,$08,$10
	db $2F,$0C,$06,$10,$07,$10,$08,$10,$28,$15,$36,$15,$28,$15,$36,$15
	db $27,$15,$37,$15,$28,$15,$36,$15,$28,$15,$36,$15,$29,$15,$2A,$15
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $10,$0C,$24,$0C,$11,$0C,$39,$0C,$10,$0C,$24,$0C,$11,$0C,$39,$0C
	db $B8,$14,$B9,$14,$BA,$14,$BB,$14,$B8,$14,$B9,$14,$BA,$14,$BB,$14
	db $B8,$14,$B9,$14,$BA,$14,$BB,$14,$B8,$14,$B9,$14,$BA,$14,$BB,$14
	db $BC,$14,$BD,$14,$BE,$14,$BF,$14,$FD,$10,$FD,$10,$FD,$10,$FD,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $DC,$1C,$DD,$1C,$DE,$1C,$DF,$1C,$05,$14,$06,$14,$07,$14,$08,$14
	db $64,$16,$74,$16,$65,$16,$75,$16,$64,$12,$74,$12,$65,$12,$75,$12
	db $05,$14,$06,$14,$07,$14,$08,$14,$05,$14,$06,$14,$07,$14,$08,$14
	db $05,$14,$06,$14,$07,$14,$08,$14,$03,$10,$35,$10,$37,$10,$3C,$10
	db $3C,$10,$37,$10,$04,$10,$36,$10,$3C,$10,$37,$10,$37,$10,$3C,$10
	db $3C,$10,$16,$10,$37,$10,$34,$10,$3D,$10,$5B,$10,$3D,$10,$3D,$10
	db $FE,$10,$FE,$10,$3D,$10,$3D,$10,$03,$10,$23,$10,$37,$10,$34,$10
	db $3C,$10,$16,$10,$04,$10,$25,$10,$FE,$10,$2B,$12,$37,$10,$34,$10
	db $13,$10,$18,$10,$12,$10,$17,$10,$00,$10,$58,$10,$12,$10,$19,$10
	db $13,$10,$18,$10,$02,$10,$59,$10,$01,$10,$60,$10,$01,$10,$61,$10
	db $62,$10,$62,$10,$63,$10,$63,$10,$0A,$10,$5A,$10,$01,$10,$61,$10
	db $66,$10,$66,$10,$63,$10,$63,$10,$01,$10,$60,$10,$0B,$10,$0C,$10
	db $62,$10,$62,$10,$0D,$10,$0D,$10,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$54,$1E,$55,$1E,$56,$1E,$57,$1E
	db $98,$1C,$99,$1C,$9A,$1C,$9B,$1C,$98,$1C,$99,$1C,$9A,$1C,$9B,$1C
	db $98,$1C,$99,$1C,$9A,$1C,$9B,$1C,$98,$1C,$99,$1C,$9A,$1C,$9B,$1C
	db $98,$1C,$99,$1C,$9A,$1C,$9B,$1C,$98,$1C,$99,$1C,$9A,$1C,$9B,$1C
	db $92,$1C,$93,$1C,$CA,$1C,$CB,$1C,$B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C
	db $B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C,$B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C
	db $B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C,$B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C
	db $B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C,$B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C
	db $B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C,$B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C
	db $B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C,$B8,$10,$B9,$10,$BA,$10,$BB,$10
	db $44,$12,$45,$12,$46,$12,$47,$12,$44,$12,$45,$12,$46,$12,$47,$12
	db $44,$12,$45,$12,$46,$12,$47,$12,$44,$12,$45,$12,$46,$12,$47,$12
	db $48,$16,$49,$16,$4A,$16,$4B,$16,$4C,$16,$4D,$16,$4E,$16,$4F,$16
	db $58,$16,$58,$16,$59,$16,$59,$16,$44,$12,$45,$12,$46,$12,$47,$12
	db $D5,$14,$B2,$14,$D5,$14,$B2,$14,$B2,$14,$B2,$14,$B2,$14,$B2,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $05,$18,$06,$18,$07,$18,$08,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$C4,$1C,$C4,$1C,$C6,$1C,$C6,$1C
	db $50,$1C,$51,$1C,$56,$1C,$57,$1C,$03,$1C,$35,$1C,$37,$1C,$3C,$1C
	db $3C,$1C,$37,$1C,$04,$1C,$36,$1C,$3C,$1C,$37,$1C,$37,$1C,$3C,$1C
	db $3C,$1C,$16,$1C,$37,$1C,$34,$1C,$3D,$1C,$5B,$1C,$3D,$1C,$3D,$1C
	db $FE,$1C,$FE,$1C,$3D,$1C,$3D,$1C,$03,$1C,$23,$1C,$37,$1C,$34,$1C
	db $3C,$1C,$16,$1C,$04,$1C,$25,$1C,$FE,$1C,$2B,$1E,$37,$1C,$34,$1C
	db $68,$0C,$6C,$0C,$69,$0C,$48,$0C,$6A,$0C,$49,$0C,$6B,$0C,$6D,$0C
	db $1A,$0C,$1E,$0C,$1B,$0C,$48,$0C,$1C,$0C,$49,$0C,$1D,$0C,$1F,$0C
	db $6E,$0C,$4A,$0C,$4C,$0C,$5C,$0C,$4D,$0C,$5D,$0C,$6F,$0C,$4B,$0C
	db $1C,$0C,$49,$0C,$1D,$0C,$1F,$0C,$4D,$0C,$5D,$0C,$4F,$0C,$5F,$0C
	db $4D,$0C,$5D,$0C,$4F,$0C,$5F,$0C,$FC,$0C,$FC,$0C,$69,$0C,$48,$0C
	db $FC,$0C,$FC,$0C,$6B,$0C,$6D,$0C,$FC,$0C,$FC,$0C,$1B,$0C,$48,$0C
	db $FC,$0C,$FC,$0C,$1D,$0C,$1F,$0C,$0F,$0C,$5B,$0C,$0F,$0C,$0F,$0C
	db $FC,$0C,$FC,$0C,$0F,$0C,$0F,$0C,$FC,$0C,$FC,$0C,$6F,$0C,$6F,$0C
	db $13,$1C,$18,$1C,$12,$1C,$17,$1C,$00,$1C,$58,$1C,$12,$1C,$19,$1C
	db $13,$1C,$18,$1C,$02,$1C,$59,$1C,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$40,$1E,$50,$1E,$41,$1E,$51,$1E
	db $42,$1E,$52,$1E,$43,$1E,$53,$1E,$40,$1E,$50,$1E,$41,$1E,$51,$1E
	db $42,$1E,$52,$1E,$43,$1E,$53,$1E,$40,$1E,$50,$1E,$41,$1E,$51,$1E
	db $42,$1E,$52,$1E,$43,$1E,$53,$1E,$40,$1E,$50,$1E,$41,$1E,$51,$1E
	db $42,$1E,$52,$1E,$43,$1E,$53,$1E,$76,$1C,$77,$1C,$7A,$1C,$7B,$1C
	db $76,$1C,$77,$1C,$7A,$1C,$7B,$1C,$74,$1C,$75,$1C,$78,$1C,$79,$1C
	db $70,$1C,$71,$1C,$70,$1C,$71,$1C,$72,$1C,$73,$1C,$72,$1C,$73,$1C
	db $60,$1E,$60,$1E,$61,$1E,$61,$1E,$62,$1E,$62,$1E,$63,$1E,$63,$1E
	db $B8,$18,$B9,$18,$BA,$18,$BB,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $05,$1C,$5B,$1C,$07,$1C,$08,$1C,$05,$1C,$06,$1C,$07,$1C,$08,$1C
	db $05,$1C,$06,$1C,$26,$1C,$08,$1C,$27,$1C,$06,$1C,$07,$1C,$08,$1C
	db $FC,$10,$FC,$10,$07,$1C,$08,$1C,$FC,$10,$06,$1C,$FC,$10,$08,$1C
	db $FC,$10,$FC,$10,$FC,$10,$08,$1C,$03,$0C,$35,$0C,$37,$0C,$3C,$0C
	db $3C,$0C,$37,$0C,$04,$0C,$36,$0C,$3C,$0C,$37,$0C,$37,$0C,$3C,$0C
	db $3C,$0C,$16,$0C,$37,$0C,$34,$0C,$3D,$0C,$5B,$0C,$3D,$0C,$3D,$0C
	db $FE,$0C,$FE,$0C,$3D,$0C,$3D,$0C,$03,$0C,$23,$0C,$37,$0C,$34,$0C
	db $3C,$0C,$16,$0C,$04,$0C,$25,$0C,$FE,$0C,$2B,$0E,$37,$0C,$34,$0C
	db $30,$1C,$31,$1C,$32,$1C,$33,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$00,$E6,$0C,$FF,$00,$E7,$0C
	db $B3,$1C,$CD,$1C,$B3,$1C,$CF,$1C,$CC,$1C,$CD,$1C,$CE,$1C,$CF,$1C
	db $FC,$1C,$CD,$1C,$FC,$1C,$CF,$1C,$C5,$1C,$FE,$1C,$C5,$1C,$FE,$1C
	db $C7,$0C,$FE,$0C,$C7,$0C,$FE,$0C,$D4,$1C,$FE,$1C,$D4,$1C,$FE,$1C
	db $FE,$0C,$FE,$0C,$FE,$0C,$FE,$0C,$FC,$1C,$FE,$1C,$FC,$1C,$FE,$1C
	db $A6,$0C,$AE,$0C,$A7,$0C,$AF,$0C,$AC,$0C,$AE,$0C,$AD,$0C,$AF,$0C
	db $13,$0C,$18,$0C,$12,$0C,$17,$0C,$00,$0C,$58,$0C,$12,$0C,$19,$0C
	db $13,$0C,$18,$0C,$02,$0C,$59,$0C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $0E,$18,$64,$18,$67,$18,$65,$18,$D7,$1C,$06,$1C,$D7,$1C,$08,$1C
	db $E0,$0C,$E1,$0C,$E2,$0C,$E3,$0C,$05,$1C,$06,$1C,$07,$1C,$08,$1C
	db $01,$1C,$60,$1C,$01,$1C,$61,$1C,$62,$1C,$62,$1C,$63,$1C,$63,$1C
	db $0A,$1C,$5A,$1C,$01,$1C,$61,$1C,$66,$1C,$66,$1C,$63,$1C,$63,$1C
	db $01,$1C,$60,$1C,$0B,$1C,$0C,$1C,$62,$1C,$62,$1C,$0D,$1C,$0D,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $70,$12,$72,$12,$71,$12,$73,$12,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $40,$0C,$42,$0C,$41,$0C,$43,$0C,$4E,$0C,$5E,$0C,$4C,$0C,$5C,$0C
	db $FF,$00,$FF,$00,$FF,$00,$FF,$00,$14,$0C,$0F,$0C,$15,$0C,$48,$0C
	db $FF,$00,$FF,$00,$FF,$00,$FF,$00,$FF,$00,$FF,$00,$FF,$00,$FF,$00
	db $FF,$00,$FF,$00,$FF,$00,$FF,$00,$FF,$00,$FF,$00,$FF,$00,$FF,$00
	db $00,$1C,$2A,$1D,$12,$1C,$17,$1C,$3A,$1D,$2B,$1D,$16,$1C,$34,$1C
	db $3A,$1D,$3B,$1D,$16,$1C,$34,$1C,$44,$0C,$45,$0C,$46,$0C,$47,$0C
	db $30,$0E,$32,$0E,$31,$0E,$11,$0E,$33,$0E,$21,$0E,$21,$0E,$21,$0E
	db $21,$0E,$21,$0E,$21,$0E,$21,$0E,$04,$0E,$12,$0E,$05,$0E,$15,$0E
	db $FF,$00,$FF,$00,$FF,$00,$FF,$00,$5C,$1A,$5E,$1A,$5D,$1A,$5F,$1A
	db $5C,$1A,$5E,$1A,$5D,$1A,$6E,$1A,$5C,$1A,$66,$1A,$5D,$1A,$67,$1A
	db $5C,$1A,$6F,$1A,$5D,$1A,$5F,$1A,$5C,$1A,$5E,$1A,$6A,$1A,$6B,$1A
	db $6C,$1A,$6D,$1A,$5D,$1A,$5F,$1A,$5C,$1A,$5E,$1A,$76,$1A,$5F,$1A
	db $68,$1A,$5E,$1A,$69,$1A,$5F,$1A,$3D,$1A,$5E,$1A,$5D,$1A,$5F,$1A
	db $5C,$1A,$66,$1A,$6A,$1A,$2E,$1A,$6C,$1A,$2F,$1A,$5D,$1A,$67,$1A
	db $68,$1A,$5E,$1A,$3E,$1A,$6B,$1A,$3F,$1A,$6D,$1A,$69,$1A,$5F,$1A
	db $5C,$1A,$66,$1A,$76,$1A,$67,$1A,$68,$1A,$66,$1A,$69,$1A,$67,$1A
	db $68,$1A,$66,$1A,$3E,$1A,$2E,$1A

DATA_248918:
	db $25,$50,$A0,$E2,$2D,$53,$AD,$F0

;--------------------------------------------------------------------

	%ROUTINE_SMB3_InitializeTileset01Level_ConstructedPlain(NULLROM)		; $248920

;--------------------------------------------------------------------

DATA_248935:
	db $00,$0F,$1E,$2D,$3C,$4B,$5A,$69

SMB3_ProcessConstructedPlainResizableObjects:
.Main:
;$24893D
	LDA.b $0E
	AND.b #$E0
	LSR
	LSR
	LSR
	LSR
	LSR
	TAX
	LDA.w $0706
	LSR
	LSR
	LSR
	LSR
	CLC
	ADC.l DATA_248935,x
	TAX
	DEX
	TXA
	JSL.l SMB3_ExecutePtr_Long

DATA_24895A:
	dl SMB3_ConstructedPlainResizableObj00_GroundedWhiteScrewPanel_Main
	dl SMB3_ConstructedPlainResizableObj01_GroundedOrangeScrewPanel_Main
	dl SMB3_ConstructedPlainResizableObj02_GroundedGreenScrewPanel_Main
	dl SMB3_ConstructedPlainResizableObj03_GroundedBlueScrewPanel_Main
	dl SMB3_ConstructedPlainResizableObj04_FloatingWhiteScrewPanel_Main
	dl SMB3_ConstructedPlainResizableObj05_FloatingOrangeScrewPanel_Main
	dl SMB3_ConstructedPlainResizableObj06_FloatingGreenScrewPanel_Main
	dl SMB3_ConstructedPlainResizableObj07_FloatingBlueScrewPanel_Main
	dl SMB3_ConstructedPlainResizableObj08_LineOfBushes_Main
	dl SMB3_ConstructedPlainResizableObj09_Hole_Main
	dl SMB3_ConstructedPlainResizableObj0A_SmilingClouds_Main
	dl SMB3_ConstructedPlainResizableObj0B_WoodenGround_Main
	dl SMB3_ConstructedPlainResizableObj0C_UnderwaterWoodenGround_Main
	dl CODE_23B369
	dl CODE_23B26D
	dl SMB3_ConstructedPlainResizableObj0F_BrickBlocks_Main
	dl SMB3_ConstructedPlainResizableObj10_CoinQuestionMarkBlocks_Main
	dl SMB3_ConstructedPlainResizableObj11_CoinBrickBlocks_Main
	dl SMB3_ConstructedPlainResizableObj12_WoodBlocks_Main
	dl CODE_23AA8A
	dl SMB3_ConstructedPlainResizableObj14_NoteBlocks_Main
	dl CODE_23AA8A
	dl SMB3_ConstructedPlainResizableObj16_Coins_Main
	dl SMB3_ConstructedPlainResizableObj17_ExitEnabledVerticalUpPipe_Main
	dl SMB3_ConstructedPlainResizableObj18_VerticalUpPipe_Main
	dl SMB3_ConstructedPlainResizableObj19_AltExitEnabledVerticallUpPipe_Main
	dl SMB3_ConstructedPlainResizableObj1A_ExitEnabledVerticalDownPipe_Main
	dl SMB3_ConstructedPlainResizableObj1B_VerticalDownPipe_Main
	dl SMB3_ConstructedPlainResizableObj1C_ExitEnabledLeftPipe_Main
	dl CODE_23A81D
	dl CODE_23A8AE
	dl CODE_23A8AE
	dl SMB3_ConstructedPlainResizableObj20_BulletBillShooter_Main
	dl CODE_23AEC7
	dl SMB3_ConstructedPlainResizableObj22_PSwitchCoins_Main
	dl CODE_23AF2A
	dl CODE_23AF2A
	dl SMB3_ConstructedPlainResizableObj25_WaterWithNoCurrent_Main
	dl CODE_23AF2A
	dl CODE_23AF2A
	dl SMB3_ConstructedPlainResizableObj28_DiamondBlocks_Main
	dl CODE_23AF2A
	dl CODE_23AF2A
	dl SMB3_ConstructedPlainResizableObj2B_ThrowBlocks_Main
	dl SMB3_ConstructedPlainResizableObj2C_VerticalScreenScrollingPipe_Main
	dl CODE_23B024
	dl CODE_2A8674
	dl CODE_2A8394

;--------------------------------------------------------------------

CODE_2489EA:
	LDA.b $0E
	AND.b #$E0
	LSR
	CLC
	ADC.w $0706
	TAX
	JSL.l SMB3_ExecutePtr_Long

DATA_2489F8:
	dl CODE_23AAC1
	dl CODE_23AAC7
	dl CODE_23AACD
	dl CODE_23B233
	dl CODE_23A699
	dl CODE_23A682
	dl CODE_23B23D
	dl CODE_23B06C
	dl $000000
	dl $000000
	dl $000000
	dl $000000
	dl $000000
	dl $000000
	dl $000000
	dl $000000
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23A943

;--------------------------------------------------------------------

	%DATATABLE_RT00_SMB3_LevelData(NULLROM)				; $248A76
	%FREE_BYTES(NULLROM, 307, $FF)						; $24A34D

;--------------------------------------------------------------------

; Note: FG Map16 data for levels that use the tile set seen in 1-2

DATA_24A480:
	db $FC,$10,$FC,$10,$FC,$10,$FC,$10,$4E,$10,$4F,$10,$FC,$10,$FC,$10
	db $FF,$00,$FF,$00,$FF,$00,$FF,$00,$05,$10,$06,$10,$07,$10,$08,$10
	db $05,$10,$D6,$0C,$07,$10,$D6,$0C,$E8,$14,$E9,$14,$EA,$14,$EB,$14
	db $FF,$10,$FF,$10,$FF,$10,$5A,$10,$58,$10,$FD,$10,$59,$10,$FF,$10
	db $FF,$10,$5B,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$5C,$10,$FF,$10
	db $5D,$10,$FF,$10,$5E,$10,$FF,$10,$5F,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$00,$46,$0C,$FF,$00,$47,$0C,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$00,$0E,$10,$0E,$01,$0E,$11,$0E
	db $02,$0E,$12,$0E,$03,$0E,$13,$0E,$20,$0E,$20,$0E,$21,$0E,$21,$0E
	db $22,$0E,$22,$0E,$23,$0E,$23,$0E,$FC,$0C,$FC,$0C,$FC,$0C,$44,$0C
	db $FC,$0C,$33,$0C,$FC,$0C,$33,$0C,$FC,$0C,$45,$0C,$FC,$0C,$FC,$0C
	db $FC,$0C,$FC,$0C,$42,$0C,$42,$0C,$42,$0C,$42,$0C,$FC,$0C,$FC,$0C
	db $FC,$0C,$FC,$0C,$40,$0C,$FC,$0C,$33,$0C,$FC,$0C,$33,$0C,$FC,$0C
	db $32,$0C,$FC,$0C,$FC,$0C,$FC,$0C,$05,$10,$06,$10,$07,$10,$5A,$0C
	db $58,$0C,$FD,$10,$59,$0C,$FD,$10,$05,$10,$5B,$0C,$07,$10,$08,$10
	db $05,$10,$06,$10,$5C,$0C,$08,$10,$5D,$0C,$06,$10,$5E,$0C,$08,$10
	db $5F,$0C,$06,$10,$07,$10,$08,$10,$FF,$00,$40,$18,$40,$18,$22,$19
	db $4E,$18,$30,$19,$4F,$18,$31,$19,$42,$18,$23,$19,$FF,$00,$42,$18
	db $FF,$00,$48,$10,$FF,$00,$49,$10,$48,$10,$4C,$10,$49,$10,$4C,$10
	db $4A,$18,$30,$19,$4B,$18,$23,$19,$FF,$00,$4A,$18,$FF,$00,$4B,$18
	db $39,$10,$4C,$10,$39,$10,$4C,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $B8,$14,$B9,$14,$BA,$14,$BB,$14,$B8,$14,$B9,$14,$BA,$14,$BB,$14
	db $B8,$14,$B9,$14,$BA,$14,$BB,$14,$B8,$14,$B9,$14,$BA,$14,$BB,$14
	db $BC,$14,$BD,$14,$BE,$14,$BF,$14,$44,$18,$34,$18,$4F,$18,$31,$19
	db $34,$18,$0D,$19,$21,$19,$31,$19,$4E,$18,$30,$19,$45,$18,$36,$18
	db $20,$19,$30,$19,$36,$18,$0E,$19,$20,$19,$30,$19,$21,$19,$31,$19
	db $FD,$10,$FD,$10,$FD,$10,$FD,$10,$FD,$10,$4C,$10,$4C,$10,$FE,$10
	db $FE,$10,$FE,$10,$FE,$10,$FE,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $DC,$1C,$DD,$1C,$DE,$1C,$DF,$1C,$05,$14,$06,$14,$07,$14,$08,$14
	db $64,$16,$74,$16,$65,$16,$75,$16,$64,$12,$74,$12,$65,$12,$75,$12
	db $05,$14,$06,$14,$07,$14,$08,$14,$05,$14,$06,$14,$07,$14,$08,$14
	db $05,$14,$06,$14,$07,$14,$08,$14,$05,$14,$06,$14,$07,$14,$08,$14
	db $60,$14,$61,$14,$62,$14,$63,$14,$D5,$18,$B2,$18,$D5,$18,$B2,$18
	db $B2,$18,$B2,$18,$B2,$18,$B2,$18,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$54,$1E,$55,$1E,$56,$1E,$57,$1E
	db $98,$1C,$99,$1C,$9A,$1C,$9B,$1C,$98,$1C,$99,$1C,$9A,$1C,$9B,$1C
	db $98,$1C,$99,$1C,$9A,$1C,$9B,$1C,$98,$1C,$99,$1C,$9A,$1C,$9B,$1C
	db $98,$1C,$99,$1C,$9A,$1C,$9B,$1C,$98,$1C,$99,$1C,$9A,$1C,$9B,$1C
	db $92,$1C,$93,$1C,$CA,$1C,$CB,$1C,$B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C
	db $B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C,$B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C
	db $B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C,$B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C
	db $B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C,$B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C
	db $B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C,$B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C
	db $B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C,$B8,$10,$B9,$10,$BA,$10,$BB,$10
	db $44,$12,$45,$12,$46,$12,$47,$12,$44,$12,$45,$12,$46,$12,$47,$12
	db $44,$12,$45,$12,$46,$12,$47,$12,$44,$12,$45,$12,$46,$12,$47,$12
	db $48,$16,$49,$16,$4A,$16,$4B,$16,$4C,$16,$4D,$16,$4E,$16,$4F,$16
	db $58,$16,$58,$16,$59,$16,$59,$16,$44,$12,$45,$12,$46,$12,$47,$12
	db $D5,$14,$B2,$14,$D5,$14,$B2,$14,$B2,$14,$B2,$14,$B2,$14,$B2,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $05,$18,$06,$18,$07,$18,$08,$18,$50,$18,$51,$18,$52,$18,$53,$18
	db $54,$18,$55,$18,$52,$18,$53,$18,$54,$18,$55,$18,$56,$18,$57,$18
	db $50,$18,$51,$18,$56,$18,$57,$18,$C4,$1C,$C4,$1C,$C6,$1C,$C6,$1C
	db $05,$18,$06,$18,$07,$18,$08,$18,$7E,$18,$1D,$19,$7F,$18,$1D,$19
	db $7E,$18,$FE,$18,$3E,$18,$3F,$18,$04,$18,$76,$18,$7E,$18,$FE,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $68,$1C,$6C,$1C,$69,$1C,$14,$1D,$6A,$1C,$15,$1D,$6B,$1C,$6D,$1C
	db $78,$1C,$7C,$1C,$79,$1C,$14,$1D,$7A,$1C,$15,$1D,$7B,$1C,$7D,$1C
	db $6E,$1C,$06,$1D,$04,$1D,$14,$1D,$05,$1D,$15,$1D,$6F,$1C,$16,$1D
	db $6E,$18,$6E,$18,$FE,$18,$FE,$18,$FE,$18,$FE,$18,$6F,$18,$6F,$18
	db $05,$1D,$15,$1D,$04,$1D,$14,$1D,$05,$18,$00,$18,$01,$18,$02,$19
	db $0E,$18,$10,$19,$0F,$18,$11,$19,$02,$18,$03,$19,$07,$18,$03,$18
	db $05,$18,$18,$18,$07,$18,$19,$18,$18,$18,$0B,$19,$19,$18,$11,$19
	db $1A,$18,$10,$19,$1B,$18,$0C,$19,$05,$18,$1A,$18,$07,$18,$1B,$18
	db $04,$18,$06,$18,$12,$19,$09,$18,$13,$19,$0A,$18,$0B,$18,$08,$18
	db $1C,$18,$06,$18,$1D,$18,$08,$18,$1B,$19,$1C,$18,$01,$19,$1D,$18
	db $00,$19,$1E,$18,$1C,$19,$1F,$18,$1E,$18,$06,$18,$1F,$18,$08,$18
	db $00,$19,$0C,$18,$01,$19,$0D,$18,$10,$18,$13,$18,$0F,$18,$11,$19
	db $12,$18,$13,$18,$01,$19,$11,$19,$0E,$18,$10,$19,$11,$18,$15,$18
	db $00,$19,$10,$19,$14,$18,$15,$18,$00,$19,$10,$19,$01,$19,$11,$19
	db $12,$18,$16,$18,$01,$19,$0D,$18,$40,$1E,$35,$1C,$41,$1E,$51,$1E
	db $42,$1E,$52,$1E,$43,$1E,$37,$1C,$40,$1E,$35,$1C,$41,$1E,$51,$1E
	db $42,$1E,$52,$1E,$43,$1E,$37,$1C,$40,$1E,$35,$1C,$41,$1E,$51,$1E
	db $42,$1E,$52,$1E,$43,$1E,$37,$1C,$40,$1E,$35,$1C,$41,$1E,$51,$1E
	db $42,$1E,$52,$1E,$43,$1E,$37,$1C,$75,$1C,$76,$1C,$41,$1C,$43,$1C
	db $75,$1C,$76,$1C,$41,$1C,$43,$1C,$67,$1C,$74,$1C,$3E,$1C,$3F,$1C
	db $4D,$1C,$64,$1C,$4D,$1C,$64,$1C,$65,$1C,$66,$1C,$65,$1C,$66,$1C
	db $39,$1C,$39,$1C,$61,$1E,$61,$1E,$62,$1E,$62,$1E,$3B,$1C,$3B,$1C
	db $B8,$18,$B9,$18,$BA,$18,$BB,$18,$40,$1E,$35,$1C,$41,$1E,$51,$1E
	db $42,$1E,$52,$1E,$43,$1E,$37,$1C,$00,$19,$0C,$18,$14,$18,$17,$18
	db $76,$1C,$76,$1C,$76,$1C,$76,$1C,$05,$1C,$06,$1C,$07,$1C,$08,$1C
	db $A4,$18,$1E,$19,$A5,$18,$1E,$19,$1E,$19,$1E,$19,$1E,$19,$1E,$19
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$00,$E6,$0C,$FF,$00,$E7,$0C
	db $B3,$1C,$CD,$1C,$B3,$1C,$CF,$1C,$CC,$1C,$CD,$1C,$CE,$1C,$CF,$1C
	db $FC,$1C,$CD,$1C,$FC,$1C,$CF,$1C,$C5,$1C,$FE,$1C,$C5,$1C,$FE,$1C
	db $C7,$0C,$FE,$0C,$C7,$0C,$FE,$0C,$D4,$1C,$FE,$1C,$D4,$1C,$FE,$1C
	db $FE,$0C,$FE,$0C,$FE,$0C,$FE,$0C,$FC,$1C,$FE,$1C,$FC,$1C,$FE,$1C
	db $A6,$0C,$AE,$0C,$A7,$0C,$AF,$0C,$AC,$0C,$AE,$0C,$AD,$0C,$AF,$0C
	db $1E,$19,$22,$18,$23,$18,$02,$19,$2C,$18,$10,$19,$2D,$18,$11,$19
	db $20,$18,$03,$19,$1E,$19,$21,$18,$FE,$1C,$28,$1C,$FE,$1C,$29,$1C
	db $28,$1C,$77,$1C,$29,$1C,$77,$1C,$2A,$18,$10,$19,$2B,$18,$03,$19
	db $1E,$19,$2A,$18,$1E,$19,$2B,$18,$30,$18,$1E,$19,$12,$19,$31,$18
	db $13,$19,$32,$18,$33,$18,$1E,$19,$24,$1C,$FE,$1C,$25,$1C,$FE,$1C
	db $77,$1C,$24,$1C,$77,$1C,$25,$1C,$00,$19,$26,$18,$1C,$19,$27,$18
	db $26,$18,$FE,$1C,$27,$18,$FE,$1C,$3B,$1C,$77,$1C,$3B,$1C,$77,$1C
	db $60,$18,$61,$18,$62,$18,$63,$18,$D7,$1C,$FF,$1C,$D7,$1C,$FF,$1C
	db $E0,$0C,$E1,$0C,$E2,$0C,$E3,$0C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $00,$19,$2E,$18,$01,$19,$2F,$18,$72,$18,$3A,$18,$2D,$18,$11,$19
	db $38,$18,$3A,$18,$01,$19,$11,$19,$2C,$18,$10,$19,$73,$18,$71,$18
	db $00,$19,$10,$19,$70,$18,$71,$18,$00,$19,$10,$19,$01,$19,$11,$19
	db $38,$18,$7E,$18,$01,$19,$2F,$18,$00,$19,$2E,$18,$70,$18,$7F,$18
	db $FE,$1C,$FE,$1C,$FE,$1C,$FE,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $70,$12,$72,$12,$71,$12,$73,$12,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $02,$19,$10,$19,$01,$19,$11,$19,$09,$19,$03,$19,$A5,$18,$21,$18
	db $00,$19,$10,$19,$03,$19,$11,$19,$00,$19,$12,$19,$01,$19,$11,$19
	db $00,$19,$10,$19,$01,$19,$13,$19,$0B,$19,$10,$19,$01,$19,$11,$19
	db $00,$19,$10,$19,$0C,$19,$11,$19,$22,$19,$30,$19,$21,$19,$31,$19
	db $20,$19,$30,$19,$23,$19,$31,$19,$00,$19,$1B,$19,$01,$19,$11,$19
	db $00,$19,$10,$19,$01,$19,$1C,$19,$32,$19,$10,$19,$33,$19,$1C,$19
	db $30,$0E,$32,$0E,$31,$0E,$11,$0E,$33,$0E,$21,$0E,$21,$0E,$21,$0E
	db $21,$0E,$21,$0E,$21,$0E,$21,$0E,$04,$0E,$12,$0E,$05,$0E,$15,$0E
	db $A4,$18,$22,$18,$07,$19,$02,$19,$5C,$1A,$5E,$1A,$5D,$1A,$5F,$1A
	db $5C,$1A,$5E,$1A,$5D,$1A,$6E,$1A,$5C,$1A,$66,$1A,$5D,$1A,$67,$1A
	db $5C,$1A,$6F,$1A,$5D,$1A,$5F,$1A,$5C,$1A,$5E,$1A,$6A,$1A,$6B,$1A
	db $6C,$1A,$6D,$1A,$5D,$1A,$5F,$1A,$5C,$1A,$5E,$1A,$76,$1A,$5F,$1A
	db $68,$1A,$5E,$1A,$69,$1A,$5F,$1A,$3D,$1A,$5E,$1A,$5D,$1A,$5F,$1A
	db $5C,$1A,$66,$1A,$6A,$1A,$2E,$1A,$6C,$1A,$2F,$1A,$5D,$1A,$67,$1A
	db $68,$1A,$5E,$1A,$3E,$1A,$6B,$1A,$3F,$1A,$6D,$1A,$69,$1A,$5F,$1A
	db $7E,$18,$7A,$1A,$2C,$19,$3C,$19,$2B,$19,$3B,$19,$7E,$18,$7A,$1A
	db $0E,$18,$10,$19,$73,$18,$71,$18,$72,$18,$3A,$18,$0F,$18,$11,$19
	db $7E,$18,$7A,$1A,$25,$19,$35,$19,$24,$19,$34,$19,$7E,$18,$7A,$1A

;--------------------------------------------------------------------

DATA_24ADB0:
	db $25,$5F,$99,$E2,$2E,$5F,$A6,$F0

;--------------------------------------------------------------------

	%ROUTINE_SMB3_InitializeTilesetXXLevel_GrassyPlainUndergroundOrBonus(NULLROM)	; $24ADB8

;--------------------------------------------------------------------

DATA_24ADDB:
	db $00,$0F,$1E,$2D,$3C,$4B,$5A,$69

SMB3_ProcessGrassyPlainResizableObjects:
.Main:
SMB3_ProcessUndergroundAndBonusRoomResizableObjects:
.Main:
;$24ADE3
	LDA.b $0E
	AND.b #$E0
	LSR
	LSR
	LSR
	LSR
	LSR
	TAX
	LDA.w $0706
	LSR
	LSR
	LSR
	LSR
	CLC
	ADC.l DATA_24ADDB,x
	TAX
	DEX
	TXA
	JSL.l SMB3_ExecutePtr_Long

DATA_24AE00:
	dl CODE_23B4A3
	dl CODE_23B50E
	dl CODE_23B5AA
	dl CODE_23B622
	dl CODE_23B4A3
	dl CODE_23B50E
	dl CODE_23B5AA
	dl CODE_23B622
	dl CODE_23B4A3
	dl CODE_23B50E
	dl CODE_23B5AA
	dl CODE_23B622
	dl CODE_23B8E5
	dl CODE_23B8E5
	dl CODE_23B8E5
	dl CODE_23AA8A
	dl CODE_23AA8A
	dl CODE_23AA8A
	dl CODE_23AA8A
	dl CODE_23AA8A
	dl CODE_23AA8A
	dl CODE_23AA8A
	dl CODE_23AA8A
	dl CODE_23A6C1
	dl CODE_23A6C1
	dl CODE_23A6C1
	dl CODE_23A728
	dl CODE_23A728
	dl CODE_23A81D
	dl CODE_23A81D
	dl CODE_23A8AE
	dl CODE_23A8AE
	dl CODE_23AE7B
	dl CODE_23AEC7
	dl CODE_23AEC7
	dl CODE_23AF2A
	dl CODE_23AF2A
	dl CODE_23AF2A
	dl CODE_23AF2A
	dl CODE_23AF2A
	dl CODE_23AF2A
	dl CODE_23AF2A
	dl CODE_23AF2A
	dl CODE_23AABC
	dl CODE_23A790
	dl CODE_23B698
	dl CODE_23B720
	dl CODE_23B7E4
	dl CODE_23B86B
	dl CODE_23B698
	dl CODE_23B720
	dl CODE_23B7E4
	dl CODE_23B86B
	dl CODE_23B698
	dl CODE_23B720
	dl CODE_23B7E4
	dl CODE_23B86B
	dl CODE_23B946
	dl CODE_23B946
	dl CODE_23B946
	dl CODE_23BB32
	dl CODE_23BB32
	dl CODE_23BB32
	dl CODE_23B960
	dl CODE_23B960
	dl CODE_23B960
	dl CODE_23B960
	dl CODE_23B960
	dl CODE_23B960
	dl CODE_23BA32
	dl CODE_23BA32
	dl CODE_23BA32
	dl CODE_23BC59
	dl CODE_23A811
	dl CODE_23BCB5
	dl CODE_23BD06
	dl CODE_23BD06
	dl CODE_23B369
	dl CODE_2A8674
	dl CODE_2AB753
	dl CODE_2AB787

;--------------------------------------------------------------------

CODE_24AEF3:
	LDA.b $0E
	AND.b #$E0
	LSR
	CLC
	ADC.w $0706
	TAX
	JSL.l SMB3_ExecutePtr_Long

DATA_24AF01:
	dl CODE_23B3B8
	dl CODE_23B3B8
	dl CODE_23B3B8
	dl CODE_23B3B8
	dl CODE_23B3B8
	dl CODE_23B3B8
	dl CODE_23B3B8
	dl CODE_23B3B8
	dl CODE_23B3B8
	dl CODE_23B3B8
	dl CODE_23B3B8
	dl CODE_23B3B8
	dl CODE_23BBAE
	dl CODE_23BBAE
	dl CODE_23BBAE
	dl CODE_23A699
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23A943
	dl CODE_23AAC1
	dl CODE_23AAC7
	dl CODE_23AACD
	dl CODE_23BBAF
	dl CODE_23BBAF
	dl CODE_23BBAF
	dl CODE_23BD3C
	dl CODE_23BD3C
	dl CODE_23BD3C
	dl CODE_23BD3C
	dl CODE_23BD3C
	dl CODE_23BD3C
	dl CODE_23BD3C
	dl CODE_23BD3C
	dl CODE_23BD3C
	dl CODE_23BD3C
	dl CODE_23BD3C
	dl CODE_23BD3C
	dl CODE_23BD3C
	dl CODE_23BD3C
	dl CODE_23BD3C
	dl CODE_23BD3C
	dl CODE_23BD30
	dl CODE_23BD30
	dl CODE_23BD30

;--------------------------------------------------------------------

	%DATATABLE_RT01_SMB3_LevelData(NULLROM)				; $24AFCA
	%FREE_BYTES(NULLROM, 216, $FF)						; $24DD28

;--------------------------------------------------------------------

DATA_24DE00:
	db $FC,$10,$FC,$10,$FC,$10,$FC,$10,$3B,$0C,$3A,$0C,$FC,$10,$FC,$10
	db $05,$10,$0A,$10,$07,$10,$0C,$10,$05,$10,$06,$10,$07,$10,$08,$10
	db $05,$10,$D6,$0C,$07,$10,$D6,$0C,$E8,$14,$E9,$14,$EA,$14,$EB,$14
	db $05,$10,$7C,$10,$07,$10,$0C,$10,$05,$10,$7C,$10,$07,$10,$7E,$10
	db $05,$0C,$06,$0C,$07,$0C,$46,$0C,$44,$0C,$FD,$0C,$45,$0C,$FD,$0C
	db $05,$0C,$47,$0C,$07,$0C,$08,$0C,$05,$0C,$06,$0C,$48,$0C,$08,$0C
	db $49,$0C,$06,$0C,$4A,$0C,$08,$0C,$4B,$0C,$06,$0C,$07,$0C,$08,$0C
	db $10,$1C,$10,$1C,$11,$1C,$11,$1C,$28,$1C,$28,$1C,$11,$1C,$11,$1C
	db $28,$1C,$28,$1C,$29,$1C,$29,$1C,$06,$0E,$16,$0E,$07,$0E,$17,$0E
	db $08,$0E,$18,$0E,$08,$0E,$18,$0E,$09,$0E,$19,$0E,$0A,$0E,$1A,$0E
	db $16,$0E,$16,$0E,$17,$0E,$17,$0E,$18,$0E,$18,$0E,$18,$0E,$18,$0E
	db $19,$0E,$19,$0E,$1A,$0E,$1A,$0E,$FC,$0C,$FC,$0C,$FC,$0C,$68,$0C
	db $FC,$0C,$13,$0C,$FC,$0C,$13,$0C,$FC,$0C,$69,$0C,$FC,$0C,$FC,$0C
	db $FC,$0C,$FC,$0C,$23,$0C,$23,$0C,$23,$0C,$23,$0C,$FC,$0C,$FC,$0C
	db $FC,$0C,$FC,$0C,$6A,$0C,$FC,$0C,$13,$0C,$FC,$0C,$13,$0C,$FC,$0C
	db $6B,$0C,$FC,$0C,$FC,$0C,$FC,$0C,$0B,$10,$06,$10,$0D,$10,$08,$10
	db $7D,$10,$06,$10,$0D,$10,$08,$10,$7D,$10,$06,$10,$7F,$10,$08,$10
	db $00,$1C,$10,$1C,$01,$1C,$11,$1C,$18,$1C,$28,$1C,$01,$1C,$11,$1C
	db $18,$1C,$28,$1C,$19,$1C,$29,$1C,$18,$1C,$28,$1C,$39,$1C,$29,$1C
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $4C,$10,$4D,$10,$4E,$10,$4F,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $B8,$14,$B9,$14,$BA,$14,$BB,$14,$B8,$14,$B9,$14,$BA,$14,$BB,$14
	db $B8,$14,$B9,$14,$BA,$14,$BB,$14,$B8,$14,$B9,$14,$BA,$14,$BB,$14
	db $BC,$14,$BD,$14,$BE,$14,$BF,$14,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $B0,$10,$B1,$10,$B0,$10,$B1,$10,$B1,$10,$B0,$10,$B1,$10,$B0,$10
	db $14,$1C,$24,$1C,$15,$1C,$25,$1C,$1C,$1C,$2C,$1C,$1D,$1C,$2D,$1C
	db $4C,$1C,$0E,$1C,$4D,$1C,$0F,$1C,$4E,$1C,$1E,$1C,$4F,$1C,$1F,$1C
	db $0A,$1C,$0B,$1C,$0C,$1C,$0D,$1C,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $DC,$1C,$DD,$1C,$DE,$1C,$DF,$1C,$05,$14,$06,$14,$07,$14,$08,$14
	db $64,$16,$74,$16,$65,$16,$75,$16,$64,$12,$74,$12,$65,$12,$75,$12
	db $05,$14,$06,$14,$07,$14,$08,$14,$05,$14,$06,$14,$07,$14,$08,$14
	db $05,$14,$06,$14,$07,$14,$08,$14,$03,$10,$03,$10,$04,$10,$04,$10
	db $59,$10,$59,$10,$07,$10,$08,$10,$05,$10,$06,$10,$59,$10,$59,$10
	db $3C,$10,$3D,$10,$3E,$10,$3F,$10,$3E,$10,$3F,$10,$3E,$10,$3F,$10
	db $3E,$10,$3F,$10,$2E,$10,$2F,$10,$00,$10,$10,$10,$01,$10,$11,$10
	db $01,$10,$11,$10,$01,$10,$11,$10,$01,$10,$11,$10,$02,$10,$12,$10
	db $20,$10,$30,$10,$21,$10,$31,$10,$21,$10,$31,$10,$21,$10,$31,$10
	db $21,$10,$31,$10,$22,$10,$32,$10,$22,$10,$32,$10,$21,$10,$31,$10
	db $22,$10,$32,$10,$02,$10,$12,$10,$58,$1C,$59,$1C,$5A,$1C,$5B,$1C
	db $54,$1C,$55,$1C,$56,$1C,$57,$1C,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$5C,$10,$5D,$10,$5E,$10,$5F,$10
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$54,$1E,$55,$1E,$56,$1E,$57,$1E
	db $98,$1C,$99,$1C,$9A,$1C,$9B,$1C,$98,$1C,$99,$1C,$9A,$1C,$9B,$1C
	db $98,$1C,$99,$1C,$9A,$1C,$9B,$1C,$98,$1C,$99,$1C,$9A,$1C,$9B,$1C
	db $98,$1C,$99,$1C,$9A,$1C,$9B,$1C,$98,$1C,$99,$1C,$9A,$1C,$9B,$1C
	db $92,$1C,$93,$1C,$CA,$1C,$CB,$1C,$B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C
	db $B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C,$B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C
	db $B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C,$B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C
	db $B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C,$B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C
	db $B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C,$B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C
	db $B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C,$B8,$10,$B9,$10,$BA,$10,$BB,$10
	db $44,$12,$45,$12,$46,$12,$47,$12,$44,$12,$45,$12,$46,$12,$47,$12
	db $44,$12,$45,$12,$46,$12,$47,$12,$44,$12,$45,$12,$46,$12,$47,$12
	db $48,$16,$49,$16,$4A,$16,$4B,$16,$4C,$16,$4D,$16,$4E,$16,$4F,$16
	db $58,$16,$58,$16,$59,$16,$59,$16,$44,$12,$45,$12,$46,$12,$47,$12
	db $D5,$14,$B2,$14,$D5,$14,$B2,$14,$B2,$14,$B2,$14,$B2,$14,$B2,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $05,$18,$06,$18,$07,$18,$08,$18,$50,$1C,$51,$1C,$52,$1C,$53,$1C
	db $50,$1C,$51,$1C,$56,$1C,$57,$1C,$54,$1C,$55,$1C,$56,$1C,$57,$1C
	db $54,$1C,$55,$1C,$52,$1C,$53,$1C,$C4,$1C,$C4,$1C,$C6,$1C,$C6,$1C
	db $05,$18,$06,$18,$07,$18,$08,$18,$26,$0D,$36,$0D,$27,$0D,$37,$0D
	db $28,$0D,$38,$0D,$27,$0D,$37,$0D,$28,$0D,$38,$0D,$29,$0D,$39,$0D
	db $20,$0D,$30,$0D,$21,$0D,$31,$0D,$22,$0D,$32,$0D,$23,$0D,$33,$0D
	db $24,$0D,$34,$0D,$25,$0D,$35,$0D,$0E,$18,$1E,$18,$0F,$18,$1F,$18
	db $16,$0C,$26,$0C,$17,$0C,$27,$0C,$1A,$0C,$2A,$0C,$17,$0C,$27,$0C
	db $1A,$0C,$2A,$0C,$1B,$0C,$2B,$0C,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$40,$1E,$50,$1E,$41,$1E,$51,$1E
	db $42,$1E,$52,$1E,$43,$1E,$53,$1E,$40,$1E,$50,$1E,$41,$1E,$51,$1E
	db $42,$1E,$52,$1E,$43,$1E,$53,$1E,$40,$1E,$50,$1E,$41,$1E,$51,$1E
	db $42,$1E,$52,$1E,$43,$1E,$53,$1E,$40,$1E,$50,$1E,$41,$1E,$51,$1E
	db $42,$1E,$52,$1E,$43,$1E,$53,$1E,$76,$1C,$77,$1C,$7A,$1C,$7B,$1C
	db $76,$1C,$77,$1C,$7A,$1C,$7B,$1C,$74,$1C,$75,$1C,$78,$1C,$79,$1C
	db $70,$1C,$71,$1C,$70,$1C,$71,$1C,$72,$1C,$73,$1C,$72,$1C,$73,$1C
	db $60,$1E,$60,$1E,$61,$1E,$61,$1E,$62,$1E,$62,$1E,$63,$1E,$63,$1E
	db $B8,$18,$B9,$18,$BA,$18,$BB,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $44,$0C,$45,$0C,$46,$0C,$47,$0C,$05,$1C,$06,$1C,$07,$1C,$08,$1C
	db $48,$0C,$49,$0C,$4A,$0C,$4B,$0C,$05,$0C,$0E,$0C,$07,$0C,$0F,$0C
	db $05,$1C,$06,$1C,$1E,$0C,$1E,$0C,$05,$1C,$06,$1C,$1E,$0C,$1F,$0C
	db $1E,$0C,$1E,$0C,$06,$1C,$07,$1C,$1E,$0C,$1F,$0C,$06,$1C,$07,$1C
	db $05,$0C,$6C,$0C,$07,$0C,$6C,$0C,$05,$0C,$06,$0C,$6D,$0C,$6D,$0C
	db $6E,$0C,$06,$0C,$07,$0C,$6E,$0C,$05,$0C,$6F,$0C,$6F,$0C,$08,$0C
	db $35,$0C,$36,$0C,$07,$0C,$08,$0C,$05,$0C,$06,$0C,$35,$0C,$36,$10
	db $05,$0C,$06,$0C,$37,$0C,$38,$0C,$37,$0C,$38,$0C,$07,$0C,$08,$0C
	db $D0,$1C,$D1,$1C,$D2,$1C,$D3,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$00,$E6,$0C,$FF,$00,$E7,$0C
	db $B3,$1C,$CD,$1C,$B3,$1C,$CF,$1C,$CC,$1C,$CD,$1C,$CE,$1C,$CF,$1C
	db $FC,$1C,$CD,$1C,$FC,$1C,$CF,$1C,$C5,$1C,$FE,$1C,$C5,$1C,$FE,$1C
	db $C7,$0C,$FE,$0C,$C7,$0C,$FE,$0C,$D4,$1C,$FE,$1C,$D4,$1C,$FE,$1C
	db $FE,$0C,$FE,$0C,$FE,$0C,$FE,$0C,$FC,$1C,$FE,$1C,$FC,$1C,$FE,$1C
	db $A6,$0C,$AE,$0C,$A7,$0C,$AF,$0C,$AC,$0C,$AE,$0C,$AD,$0C,$AF,$0C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $C0,$1C,$C1,$1C,$C2,$1C,$C3,$1C,$D7,$1C,$06,$1C,$D7,$1C,$08,$1C
	db $E0,$0C,$E1,$0C,$E2,$0C,$E3,$0C,$05,$1C,$06,$1C,$07,$1C,$08,$1C
	db $F0,$1C,$F2,$1C,$F1,$1C,$F3,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $70,$12,$72,$12,$71,$12,$73,$12,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $09,$0E,$19,$0E,$0B,$0E,$1A,$0E,$1B,$0E,$16,$0E,$07,$0E,$17,$0E
	db $24,$12,$34,$12,$25,$12,$35,$12,$26,$12,$36,$12,$25,$12,$35,$12
	db $26,$12,$36,$12,$27,$12,$37,$12,$29,$12,$29,$12,$2A,$12,$39,$12
	db $39,$12,$2A,$12,$2A,$12,$39,$12,$39,$12,$2A,$12,$3A,$12,$3A,$12
	db $26,$12,$36,$12,$38,$12,$37,$12,$28,$12,$34,$12,$25,$12,$35,$12

;--------------------------------------------------------------------

DATA_24E660:
	db $1F,$4A,$8A,$F0,$2E,$4A,$8D,$F0

;--------------------------------------------------------------------

	%ROUTINE_SMB3_InitializeTilesetXXLevel_SkyPlains(NULLROM)		; $24E668

;--------------------------------------------------------------------

DATA_24E68D:
	db $00,$0F,$1E,$2D,$3C,$4B,$5A,$69

SMB3_ProcessSkyPlainResizableObjects:
.Main:
SMB3_ProcessSnowySkyPlainResizableObjects:
.Main:
;$24E695
	LDA.b $0E
	AND.b #$E0
	LSR
	LSR
	LSR
	LSR
	LSR
	TAX
	LDA.w $0706
	LSR
	LSR
	LSR
	LSR
	CLC
	ADC.l DATA_24E68D,x
	TAX
	DEX
	TXA
	JSL.l SMB3_ExecutePtr_Long

DATA_24E6B2:
	dl CODE_24E7F9
	dl CODE_24E821
	dl CODE_24E821
	dl CODE_24E876
	dl CODE_24E8AC
	dl CODE_24E8D9
	dl CODE_24E8D9
	dl CODE_23AC19
	dl CODE_23AC2A
	dl CODE_23AC42
	dl CODE_23AC61
	dl CODE_24E9DE
	dl CODE_23AC80
	dl CODE_23ACAF
	dl CODE_24E938
	dl CODE_23AA8A
	dl CODE_23AA8A
	dl CODE_23AA8A
	dl CODE_23AA8A
	dl CODE_23AA8A
	dl CODE_23AA8A
	dl CODE_23AA8A
	dl CODE_23AA8A
	dl CODE_23A6C1
	dl CODE_23A6C1
	dl CODE_23A6C1
	dl CODE_23A728
	dl CODE_23A728
	dl CODE_23A81D
	dl CODE_23A81D
	dl CODE_23A8AE
	dl CODE_23A8AE
	dl CODE_23AE7B
	dl CODE_23AEC7
	dl CODE_23AEC7
	dl CODE_23AF2A
	dl CODE_23AF2A
	dl CODE_23AF2A
	dl CODE_23AF2A
	dl CODE_23AF2A
	dl CODE_23AF2A
	dl CODE_23AF2A
	dl CODE_23AF2A
	dl CODE_23AABC
	dl CODE_23A790
	dl CODE_24E978
	dl CODE_24E978
	dl CODE_24E978
	dl CODE_23B074
	dl CODE_23B04A
	dl CODE_23B04A
	dl CODE_23B042
	dl CODE_24E99F
	dl CODE_23B028
	dl CODE_24EA6D
	dl CODE_2AB77C

;--------------------------------------------------------------------

CODE_24E75A:
	LDA.b $0E
	AND.b #$E0
	LSR
	CLC
	ADC.w $0706
	TAX
	JSL.l SMB3_ExecutePtr_Long

DATA_24E768:
	dl CODE_24EA1B
	dl CODE_24EA1C
	dl CODE_24EA1D
	dl CODE_24EA25
	dl CODE_24EA52
	dl CODE_23A699
	dl CODE_24E7E8
	dl CODE_24E7E8
	dl $000000
	dl $000000
	dl $000000
	dl $000000
	dl $000000
	dl $000000
	dl $000000
	dl $000000
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23A943

;--------------------------------------------------------------------

DATA_24E7E6:
	db $8D,$D0

CODE_24E7E8:
	LDA.w $0706
	SEC
	SBC.b #$06
	TAX
	LDY.w $0700
	LDA.l DATA_24E7E6,x
	STA.b [$2E],y
	RTL

;--------------------------------------------------------------------

CODE_24E7F9:
	JSR.w CODE_24EA81
	LDY.w $0700
	LDA.b #$4A
	STA.b [$2E],y
	BRA.b CODE_24E809

CODE_24E805:
	LDA.b #$4B
	STA.b [$2E],y
CODE_24E809:
	JSL.l CODE_23BEBB
	DEX
	BNE.b CODE_24E805
	LDA.b #$4C
	STA.b [$2E],y
	RTL

;--------------------------------------------------------------------

DATA_24E815:
	db $4D,$50,$8E,$50

DATA_24E819:
	db $4E,$51,$8F,$53

DATA_24E81D:
	db $4F,$52,$90,$54

CODE_24E821:
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDX.b #$00
	LDA.w $0706
	AND.b #$F0
	CMP.b #$20
	BEQ.b CODE_24E836
	LDX.b #$02
CODE_24E836:
	LDA.w $0706
	AND.b #$0F
	STA.b $02
	LDY.w $0700
	LDA.l DATA_24E815,x
	STA.b [$2E],y
	BRA.b CODE_24E84E

CODE_24E848:
	LDA.l DATA_24E819,x
	STA.b [$2E],y
CODE_24E84E:
	JSL.l CODE_23BEBB
	DEC.b $02
	BNE.b CODE_24E848
	LDA.l DATA_24E81D,x
	STA.b [$2E],y
	LDA.w $0700
	CLC
	ADC.b #$10
	STA.w $0700
	LDA.b $01
	ADC.b #$00
	STA.b $2F
	LDA.b $00
	STA.b $2E
	INX
	TXA
	AND.b #$01
	BNE.b CODE_24E836
	RTL

;--------------------------------------------------------------------

CODE_24E876:
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDA.w $0706
	AND.b #$0F
	STA.b $02
	TAX
	LDY.w $0700
CODE_24E889:
	LDA.b #$81
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	DEX
	BPL.b CODE_24E889
	LDA.w !RAM_SMB3_Global_TilesetFromHeader
	CMP.b #$0C
	BNE.b CODE_24E8AB
	JSR.w CODE_24EA8D
	LDX.b $02
CODE_24E8A0:
	LDA.b #$25
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	DEX
	BPL.b CODE_24E8A0
CODE_24E8AB:
	RTL

;--------------------------------------------------------------------

CODE_24E8AC:
	LDA.w $0706
	AND.b #$0F
	STA.b $02
	LDY.w $0700
	LDA.b #$82
	STA.b [$2E],y
	BRA.b CODE_24E8C0

CODE_24E8BC:
	LDA.b #$83
	STA.b [$2E],y
CODE_24E8C0:
	JSL.l CODE_23BEBB
	DEC.b $02
	BNE.b CODE_24E8BC
	LDA.b #$84
	STA.b [$2E],y
	RTL

;--------------------------------------------------------------------

DATA_24E8CD:
	db $8A,$87,$22,$0E

DATA_24E8D1:
	db $8B,$88,$23,$0F

DATA_24E8D5:
	db $8C,$89,$24,$10

CODE_24E8D9:
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDX.b #$00
	LDA.w $0706
	AND.b #$F0
	CMP.b #$60
	BEQ.b CODE_24E8EE
	LDX.b #$02
CODE_24E8EE:
	LDA.w $0706
	AND.b #$0F
	STA.b $02
	LDY.w $0700
	LDA.b [$2E],y
	CMP.b #$80
	BNE.b CODE_24E931
	LDA.l DATA_24E8CD,x
	STA.b [$2E],y
	BRA.b CODE_24E90C

CODE_24E906:
	LDA.l DATA_24E8D1,x
	STA.b [$2E],y
CODE_24E90C:
	JSL.l CODE_23BEBB
	DEC.b $02
	BNE.b CODE_24E906
	CPX.b #$02
	BNE.b CODE_24E922
	LDA.b [$2E],y
	CMP.b #$80
	BEQ.b CODE_24E922
	LDA.b #$25
	BRA.b CODE_24E926

CODE_24E922:
	LDA.l DATA_24E8D5,x
CODE_24E926:
	STA.b [$2E],y
	JSR.w CODE_24EA8D
	TXA
	ORA.b #$01
	TAX
	BRA.b CODE_24E8EE

CODE_24E931:
	RTL

;--------------------------------------------------------------------

DATA_24E932:
	db $02,$1F

DATA_24E934:
	db $06,$20

DATA_24E936:
	db $07,$21

CODE_24E938:
	REP.b #$20
	LDA.b $2E
	STA.b $00
	SEP.b #$20
	LDA.w $0706
	AND.b #$0F
	STA.b $02
	LDY.w $0700
	LDX.b #$00
CODE_24E94C:
	LDA.b $02
	STA.b $03
	LDA.l DATA_24E932,x
	STA.b [$2E],y
	BRA.b CODE_24E95E

CODE_24E958:
	LDA.l DATA_24E934,x
	STA.b [$2E],y
CODE_24E95E:
	JSL.l CODE_23BEBB
	DEC.b $03
	BNE.b CODE_24E958
	LDA.l DATA_24E936,x
	STA.b [$2E],y
	JSR.w CODE_24EA8D
	INX
	CPX.b #$02
	BNE.b CODE_24E94C
	RTL

;--------------------------------------------------------------------

DATA_24E975:
	db $3A,$56,$55

CODE_24E978:
	LDA.w $0706
	PHA
	SEC
	SBC.b #$10
	LSR
	LSR
	LSR
	LSR
	TAX
	PLA
	AND.b #$0F
	STA.b $02
	LDY.w $0700
CODE_24E98C:
	LDA.l DATA_24E975,x
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	DEC.b $02
	BPL.b CODE_24E98C
	RTL

;--------------------------------------------------------------------

DATA_24E99B:
	db $36,$38

DATA_24E99D:
	db $37,$39

CODE_24E99F:
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDA.w $0706
	AND.b #$0F
	STA.b $02
	LDY.w $0700
	LDX.b #$00
CODE_24E9B3:
	LDA.b $02
	STA.b $03
CODE_24E9B7:
	LDA.l DATA_24E99B,x
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	LDA.l DATA_24E99D,x
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	DEC.b $03
	BPL.b CODE_24E9B7
	JSR.w CODE_24EA8D
	INX
	CPX.b #$02
	BNE.b CODE_24E9B3
	RTL

;--------------------------------------------------------------------

DATA_24E9D8:
	db $08,$0B

DATA_24E9DA:
	db $09,$0C

DATA_24E9DC:
	db $0A,$0D

CODE_24E9DE:
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDA.w $0706
	AND.b #$0F
	STA.b $02
	LDY.w $0700
	LDX.b #$00
CODE_24E9F2:
	LDA.b $02
	STA.b $03
	LDA.l DATA_24E9D8,x
	STA.b [$2E],y
	BRA.b CODE_24EA04

CODE_24E9FE:
	LDA.l DATA_24E9DA,x
	STA.b [$2E],y
CODE_24EA04:
	JSL.l CODE_23BEBB
	DEC.b $03
	BNE.b CODE_24E9FE
	LDA.l DATA_24E9DC,x
	STA.b [$2E],y
	JSR.w CODE_24EA8D
	INX
	CPX.b #$02
	BNE.b CODE_24E9F2
	RTL

;--------------------------------------------------------------------

CODE_24EA1B:
	RTL

;--------------------------------------------------------------------

CODE_24EA1C:
	RTL

;--------------------------------------------------------------------

CODE_24EA1D:
	LDX.b #$00
	BRA.b CODE_24EA27

DATA_24EA21:
	db $C5,$C7

DATA_24EA23:
	db $C4,$C6

CODE_24EA25:
	LDX.b #$01
CODE_24EA27:
	LDY.w $0700
	LDA.l DATA_24EA21,x
	STA.b [$2E],y
	BRA.b CODE_24EA3E

CODE_24EA32:
	LDA.b [$2E],y
	CMP.b #$80
	BNE.b CODE_24EA4B
	LDA.l DATA_24EA23,x
	STA.b [$2E],y
CODE_24EA3E:
	TYA
	SEC
	SBC.b #$10
	TAY
	LDA.b $2F
	SBC.b #$00
	STA.b $2F
	BRA.b CODE_24EA32

CODE_24EA4B:
	LDA.l DATA_24EA23,x
	STA.b [$2E],y
	RTL

;--------------------------------------------------------------------

CODE_24EA52:
	LDY.w $0700
CODE_24EA55:
	LDA.b [$2E],y
	CMP.b #$80
	BNE.b CODE_24EA6C
	LDA.b #$47
	STA.b [$2E],y
	TYA
	CLC
	ADC.b #$10
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	BRA.b CODE_24EA55

CODE_24EA6C:
	RTL

;--------------------------------------------------------------------

CODE_24EA6D:
	JSR.w CODE_24EA81
	LDY.w $0700
CODE_24EA73:
	LDA.b #$66
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	DEX
	CPX.b #$FF
	BNE.b CODE_24EA73
	RTL

;--------------------------------------------------------------------

CODE_24EA81:
	LDY.b #$00
	LDA.b [!RAM_SMB3_Level_LevelDataPtrLo],y
	TAX
	REP.b #$20
	INC.b !RAM_SMB3_Level_LevelDataPtrLo
	SEP.b #$20
	RTS

;--------------------------------------------------------------------

CODE_24EA8D:
	REP.b #$20
	LDA.b $00
	STA.b $2E
	SEP.b #$20
	LDA.w $0700
	CLC
	ADC.b #$10
	STA.w $0700
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	STA.b $01
	RTS

;--------------------------------------------------------------------

	%DATATABLE_RT02_SMB3_LevelData(NULLROM)				; $24EAA8
	%FREE_BYTES(NULLROM, 109, $FF)						; $24FF93
%BANK_END(<EndBank>)
endmacro

;#############################################################################################################
;#############################################################################################################

macro SMB3Bank25Macros(StartBank, EndBank)
%BANK_START(<StartBank>)
DATA_258000:
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$05,$10,$06,$10,$07,$10,$08,$10
	db $05,$10,$D6,$0C,$07,$10,$D6,$0C,$E8,$14,$E9,$14,$EA,$14,$EB,$14
	db $FF,$10,$99,$10,$99,$10,$99,$10,$99,$10,$99,$10,$FF,$10,$99,$10
	db $99,$10,$99,$10,$99,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $62,$10,$FD,$10,$62,$10,$FD,$10,$63,$10,$FF,$10,$63,$10,$FF,$10
	db $7C,$14,$7D,$14,$7C,$14,$7D,$14,$7E,$14,$7F,$14,$7E,$14,$7F,$14
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $B8,$14,$B9,$14,$BA,$14,$BB,$14,$B8,$14,$B9,$14,$BA,$14,$BB,$14
	db $B8,$14,$B9,$14,$BA,$14,$BB,$14,$B8,$14,$B9,$14,$BA,$14,$BB,$14
	db $BC,$14,$BD,$14,$BE,$14,$BF,$14,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $DC,$1C,$DD,$1C,$DE,$1C,$DF,$1C,$05,$14,$06,$14,$07,$14,$08,$14
	db $64,$16,$74,$16,$65,$16,$75,$16,$64,$12,$74,$12,$65,$12,$75,$12
	db $05,$14,$06,$14,$07,$14,$08,$14,$05,$14,$06,$14,$07,$14,$08,$14
	db $05,$14,$06,$14,$07,$14,$08,$14,$05,$14,$06,$14,$07,$14,$08,$14
	db $FC,$0C,$FC,$0C,$FC,$0C,$FC,$0C,$FC,$0C,$FC,$0C,$FC,$0C,$FC,$0C
	db $FC,$0C,$FC,$0C,$FC,$0C,$FC,$0C,$FC,$0C,$FC,$0C,$FC,$0C,$FC,$0C
	db $1A,$1C,$4C,$1C,$4A,$1C,$7E,$1E,$4A,$1C,$7E,$1E,$1C,$1C,$4D,$1C
	db $4C,$1C,$1B,$1C,$7E,$1E,$4B,$1C,$7E,$1E,$4B,$1C,$4D,$1C,$1D,$1C
	db $1E,$1C,$4C,$1C,$4A,$1C,$7E,$1E,$4A,$1C,$7E,$1E,$2E,$1C,$4D,$1C
	db $4C,$1C,$1F,$1C,$7E,$1E,$4B,$1C,$7E,$1E,$4B,$1C,$4D,$1C,$2F,$1C
	db $44,$18,$54,$18,$45,$18,$55,$18,$46,$18,$56,$18,$47,$18,$57,$18
	db $44,$18,$54,$18,$78,$18,$7A,$18,$79,$18,$7B,$18,$47,$18,$57,$18
	db $44,$18,$54,$18,$20,$18,$22,$18,$21,$18,$23,$18,$47,$18,$57,$18
	db $44,$18,$54,$18,$30,$18,$32,$18,$5C,$10,$5D,$10,$5E,$10,$5F,$10
	db $31,$18,$33,$18,$47,$18,$57,$18,$09,$14,$4C,$14,$4A,$14,$7E,$16
	db $4A,$14,$7E,$16,$4A,$14,$7E,$16,$54,$1E,$55,$1E,$56,$1E,$57,$1E
	db $98,$1C,$99,$1C,$9A,$1C,$9B,$1C,$98,$1C,$99,$1C,$9A,$1C,$9B,$1C
	db $98,$1C,$99,$1C,$9A,$1C,$9B,$1C,$98,$1C,$99,$1C,$9A,$1C,$9B,$1C
	db $98,$1C,$99,$1C,$9A,$1C,$9B,$1C,$98,$1C,$99,$1C,$9A,$1C,$9B,$1C
	db $92,$1C,$93,$1C,$CA,$1C,$CB,$1C,$B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C
	db $B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C,$B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C
	db $B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C,$B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C
	db $B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C,$B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C
	db $B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C,$B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C
	db $B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C,$B8,$10,$B9,$10,$BA,$10,$BB,$10
	db $44,$12,$45,$12,$46,$12,$47,$12,$44,$12,$45,$12,$46,$12,$47,$12
	db $44,$12,$45,$12,$46,$12,$47,$12,$44,$12,$45,$12,$46,$12,$47,$12
	db $48,$16,$49,$16,$4A,$16,$4B,$16,$4C,$16,$4D,$16,$4E,$16,$4F,$16
	db $58,$16,$58,$16,$59,$16,$59,$16,$44,$12,$45,$12,$46,$12,$47,$12
	db $D5,$14,$B2,$14,$D5,$14,$B2,$14,$B2,$14,$B2,$14,$B2,$14,$B2,$14
	db $4A,$14,$7E,$16,$0A,$14,$4D,$14,$4C,$14,$0B,$14,$7E,$16,$4B,$14
	db $7E,$16,$4B,$14,$7E,$16,$4B,$14,$7E,$16,$4B,$14,$4D,$14,$0C,$14
	db $05,$18,$06,$18,$07,$18,$08,$18,$40,$18,$44,$18,$41,$18,$45,$18
	db $42,$18,$46,$18,$43,$18,$47,$18,$48,$18,$4C,$18,$49,$18,$4D,$18
	db $4A,$18,$4E,$18,$4B,$18,$4F,$18,$C4,$1C,$C4,$1C,$C6,$1C,$C6,$1C
	db $50,$18,$54,$18,$51,$18,$55,$18,$52,$18,$56,$18,$53,$18,$57,$18
	db $6C,$18,$6D,$18,$6E,$18,$6F,$18,$60,$18,$6D,$18,$61,$18,$6F,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$84,$0C,$06,$0C,$85,$0C,$08,$0C
	db $05,$18,$06,$18,$07,$18,$08,$18,$F0,$18,$F2,$18,$F1,$18,$F3,$18
	db $F2,$18,$F2,$18,$F3,$18,$F3,$18,$80,$18,$90,$18,$81,$18,$91,$18
	db $82,$18,$90,$18,$83,$18,$91,$18,$40,$1E,$50,$1E,$41,$1E,$51,$1E
	db $42,$1E,$52,$1E,$43,$1E,$53,$1E,$4E,$1C,$04,$1C,$4F,$1C,$0D,$1C
	db $04,$1C,$04,$1C,$0D,$1C,$0D,$1C,$04,$1C,$4E,$1C,$0D,$1C,$4F,$1C
	db $48,$1C,$58,$1C,$49,$1C,$59,$1C,$49,$1C,$59,$1C,$49,$1C,$59,$1C
	db $49,$1C,$59,$1C,$48,$1C,$58,$1C,$40,$1C,$41,$1C,$40,$1C,$41,$1C
	db $50,$1C,$51,$1C,$70,$1C,$71,$1C,$50,$1C,$51,$1C,$70,$1C,$71,$1C
	db $50,$1C,$51,$1C,$70,$1C,$71,$1C,$42,$1C,$43,$1C,$42,$1C,$43,$1C
	db $52,$1C,$53,$1C,$72,$1C,$73,$1C,$52,$1C,$53,$1C,$72,$1C,$73,$1C
	db $52,$1C,$53,$1C,$72,$1C,$73,$1C,$3C,$1C,$3E,$1C,$62,$1E,$62,$1E
	db $62,$1E,$62,$1E,$3D,$1C,$3F,$1C,$60,$1C,$61,$1C,$61,$1E,$61,$1E
	db $62,$1E,$62,$1E,$64,$1C,$65,$1C,$68,$1C,$41,$1C,$69,$1C,$41,$1C
	db $6A,$1C,$41,$1C,$6B,$1C,$41,$1C,$38,$1C,$41,$1C,$39,$1C,$41,$1C
	db $62,$1C,$63,$1C,$61,$1E,$61,$1E,$62,$1E,$62,$1E,$66,$1C,$67,$1C
	db $42,$1C,$6C,$1C,$42,$1C,$6D,$1C,$42,$1C,$6E,$1C,$42,$1C,$6F,$1C
	db $42,$1C,$3A,$1C,$42,$1C,$3B,$1C,$40,$1E,$50,$1E,$41,$1E,$51,$1E
	db $42,$1E,$52,$1E,$43,$1E,$53,$1E,$40,$1E,$50,$1E,$41,$1E,$51,$1E
	db $42,$1E,$52,$1E,$43,$1E,$53,$1E,$40,$1E,$50,$1E,$41,$1E,$51,$1E
	db $42,$1E,$52,$1E,$43,$1E,$53,$1E,$40,$1E,$50,$1E,$41,$1E,$51,$1E
	db $42,$1E,$52,$1E,$43,$1E,$53,$1E,$52,$1C,$53,$1C,$72,$1C,$73,$1C
	db $52,$1C,$53,$1C,$72,$1C,$73,$1C,$50,$1C,$51,$1C,$70,$1C,$71,$1C
	db $40,$1C,$41,$1C,$40,$1C,$41,$1C,$42,$1C,$43,$1C,$42,$1C,$43,$1C
	db $60,$1E,$60,$1E,$61,$1E,$61,$1E,$62,$1E,$62,$1E,$63,$1E,$63,$1E
	db $B8,$18,$B9,$18,$BA,$18,$BB,$18,$40,$1E,$50,$1E,$41,$1E,$51,$1E
	db $42,$1E,$52,$1E,$43,$1E,$53,$1E,$52,$18,$53,$18,$72,$18,$73,$18
	db $40,$18,$41,$18,$40,$18,$41,$18,$05,$1C,$06,$1C,$07,$1C,$08,$1C
	db $50,$18,$51,$18,$70,$18,$71,$18,$42,$18,$43,$18,$42,$18,$43,$18
	db $52,$18,$53,$18,$72,$18,$73,$18,$40,$1A,$50,$1A,$41,$1A,$51,$1A
	db $42,$1A,$52,$1A,$43,$1A,$53,$1A,$60,$1A,$60,$1A,$61,$1A,$61,$1A
	db $62,$1A,$62,$1A,$63,$1A,$63,$1A,$4E,$18,$04,$18,$4F,$18,$0D,$18
	db $04,$18,$04,$18,$0D,$18,$0D,$18,$04,$18,$4E,$18,$0D,$18,$4F,$18
	db $48,$18,$58,$18,$49,$18,$59,$18,$49,$18,$59,$18,$49,$18,$59,$18
	db $49,$18,$59,$18,$48,$18,$58,$18,$2D,$15,$3D,$15,$2E,$15,$3E,$15
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$00,$E6,$0C,$FF,$00,$E7,$0C
	db $B3,$1C,$CD,$1C,$B3,$1C,$CF,$1C,$CC,$1C,$CD,$1C,$CE,$1C,$CF,$1C
	db $FC,$1C,$CD,$1C,$FC,$1C,$CF,$1C,$C5,$1C,$FE,$1C,$C5,$1C,$FE,$1C
	db $C7,$0C,$FE,$0C,$C7,$0C,$FE,$0C,$D4,$1C,$FE,$1C,$D4,$1C,$FE,$1C
	db $FE,$0C,$FE,$0C,$FE,$0C,$FE,$0C,$FC,$1C,$FE,$1C,$FC,$1C,$FE,$1C
	db $A6,$0C,$AE,$0C,$A7,$0C,$AF,$0C,$AC,$0C,$AE,$0C,$AD,$0C,$AF,$0C
	db $74,$10,$75,$10,$76,$10,$77,$10,$0D,$1C,$0A,$1C,$09,$1C,$0B,$1C
	db $0C,$1C,$FE,$1C,$0C,$1C,$FE,$1C,$FE,$1C,$FE,$1C,$FE,$1C,$FE,$1C
	db $68,$0C,$69,$0C,$6A,$0C,$6B,$0C,$34,$14,$5A,$14,$35,$14,$3D,$15
	db $36,$14,$3E,$15,$35,$14,$3D,$15,$36,$14,$3D,$15,$37,$14,$3F,$15
	db $5A,$14,$5B,$14,$2E,$15,$3E,$15,$2D,$15,$3D,$15,$2F,$15,$3F,$15
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $02,$1C,$12,$1C,$03,$1C,$13,$1C,$D7,$1C,$06,$1C,$D7,$1C,$08,$1C
	db $E0,$0C,$E1,$0C,$E2,$0C,$E3,$0C,$05,$1C,$06,$1C,$07,$1C,$08,$1C
	db $94,$14,$95,$14,$96,$14,$97,$14,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $70,$12,$72,$12,$71,$12,$73,$12,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $04,$0C,$05,$0C,$05,$CC,$04,$CC,$00,$0C,$02,$0C,$05,$CC,$07,$0C
	db $04,$0C,$09,$0C,$01,$0C,$03,$0C,$07,$CC,$05,$0C,$02,$CC,$06,$CC
	db $03,$CC,$08,$CC,$09,$CC,$04,$CC,$03,$CC,$02,$0C,$02,$CC,$03,$0C
	db $03,$CC,$01,$CC,$09,$CC,$04,$CC,$07,$CC,$05,$0C,$02,$CC,$00,$CC
	db $04,$0C,$09,$0C,$08,$0C,$03,$0C,$06,$0C,$02,$0C,$05,$CC,$07,$0C

;--------------------------------------------------------------------

DATA_258860:
	db $0A,$4C,$91,$E2,$0A,$4C,$91,$E2

;--------------------------------------------------------------------

	%ROUTINE_SMB3_InitializeTileset06Level_UnderwaterAndSnowyPlain(NULLROM)	; $258868
	%ROUTINE_SMB3_InitializeTileset07Level_ToadHouse(NULLROM)			; $25887D

;--------------------------------------------------------------------

CODE_2588AD:
	PHB
	LDY.b #$7E2000>>16
	PHY
	PLB
	STA.w $7E2000,x
	STA.w $7E20F0,x
	STA.w $7E21E0,x
	STA.w $7E22D0,x
	STA.w $7E23C0,x
	STA.w $7E24B0,x
	STA.w $7E25A0,x
	STA.w $7E2690,x
	STA.w $7E2780,x
	STA.w $7E2870,x
	STA.w $7E2960,x
	STA.w $7E2A50,x
	STA.w $7E2B40,x
	STA.w $7E2C30,x
	STA.w $7E2D20,x
	STA.w $7E2E10,x
	STZ.w $7E4000,x
	STZ.w $7E40F0,x
	STZ.w $7E41E0,x
	STZ.w $7E42D0,x
	STZ.w $7E43C0,x
	STZ.w $7E44B0,x
	STZ.w $7E45A0,x
	STZ.w $7E4690,x
	STZ.w $7E4780,x
	STZ.w $7E4870,x
	STZ.w $7E4960,x
	STZ.w $7E4A50,x
	STZ.w $7E4B40,x
	STZ.w $7E4C30,x
	STZ.w $7E4D20,x
	STZ.w $7E4E10,x
	INX
	PLB
	RTS

;--------------------------------------------------------------------

	%ROUTINE_SMB3_InitializeTileset08Level_PyramidAndPrison(NULLROM)		; $258915

;--------------------------------------------------------------------

DATA_258927:
	db $00,$0F,$1E,$2D,$3C,$4B,$5A,$69

SMB3_ProcessUnderwaterAndSnowyPlainResizableObjects:
.Main:
SMB3_ProcessToadHouseResizableObjects:
.Main:
SMB3_ProcessPyramidAndPrisonResizableObjects:
.Main:
;$25892F
	LDA.b $0E
	AND.b #$E0
	LSR
	LSR
	LSR
	LSR
	LSR
	TAX
	LDA.w $0706
	LSR
	LSR
	LSR
	LSR
	CLC
	ADC.l DATA_258927,x
	TAX
	DEX
	TXA
	JSL.l SMB3_ExecutePtr_Long

DATA_25894C:
	dl CODE_258A98
	dl CODE_258B1F
	dl CODE_258B8C
	dl CODE_258BC5
	dl CODE_258BC6
	dl CODE_258BCB
	dl CODE_258BCC
	dl CODE_258BCD
	dl CODE_258BEA
	dl CODE_258EC3
	dl CODE_258EE1
	dl CODE_258F20
	dl CODE_258BEF
	dl CODE_258BEF
	dl CODE_258C68
	dl CODE_23AA8A
	dl CODE_23AA8A
	dl CODE_23AA8A
	dl CODE_23AA8A
	dl CODE_23AA8A
	dl CODE_23AA8A
	dl CODE_23AA8A
	dl CODE_23AA8A
	dl CODE_23A6C1
	dl CODE_23A6C1
	dl CODE_23A6C1
	dl CODE_23A728
	dl CODE_23A728
	dl CODE_23A81D
	dl CODE_23A81D
	dl CODE_23A8AE
	dl CODE_23A8AE
	dl CODE_23AE7B
	dl CODE_23AEC7
	dl CODE_23AEC7
	dl CODE_23AF2A
	dl CODE_23AF2A
	dl CODE_23AF2A
	dl CODE_23AF2A
	dl CODE_23AF2A
	dl CODE_23AF2A
	dl CODE_23AF2A
	dl CODE_23AF2A
	dl CODE_23AABC
	dl CODE_23A790
	dl CODE_23A811
	dl CODE_23A91B
	dl CODE_258C8C
	dl CODE_258CCC
	dl CODE_258D2D
	dl CODE_258D93
	dl CODE_258DA8
	dl CODE_23B042
	dl CODE_258BCE
	dl CODE_258DC4
	dl CODE_23B074
	dl CODE_258C62
	dl CODE_258DD9
	dl CODE_2A85CF

;--------------------------------------------------------------------

CODE_2589FD:
	LDA.b $0E
	AND.b #$E0
	LSR
	CLC
	ADC.w $0706
	TAX
	JSL.l SMB3_ExecutePtr_Long

DATA_258A0B:
	dl CODE_258C31
	dl CODE_258C31
	dl CODE_258C31
	dl CODE_258C31
	dl CODE_258E45
	dl CODE_258E45
	dl CODE_258E45
	dl CODE_258E45
	dl CODE_258F56
	dl CODE_258FA2
	dl CODE_23A699
	dl CODE_258E5D
	dl CODE_258C80
	dl CODE_258E65
	dl CODE_258FCD
	dl CODE_258FCD
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23A943

;--------------------------------------------------------------------

DATA_258A89:
	db $99,$9D,$97,$B8,$B9

DATA_258A8E:
	db $A3,$A8,$A1,$A3,$A8

DATA_258A93:
	db $A4,$A9,$A2,$A4,$A9

CODE_258A98:
	LDA.w $0706
	AND.b #$0F
	STA.b $02
	LDY.w $0700
	LDA.b [$2E],y
	CMP.b #$91
	BNE.b CODE_258AAD
	LDA.b #$BA
	JMP.w CODE_258AAF

CODE_258AAD:
	LDA.b #$91
CODE_258AAF:
	STA.b [$2E],y
	INY
	LDA.b [$2E],y
	CMP.b #$92
	BNE.b CODE_258ABD
	LDA.b #$BB
	JMP.w CODE_258ABF

CODE_258ABD:
	LDA.b #$92
CODE_258ABF:
	STA.b [$2E],y
	JMP.w CODE_258ACF

CODE_258AC4:
	JSR.w CODE_258AED
	STA.b [$2E],y
	INY
	JSR.w CODE_258B04
	STA.b [$2E],y
CODE_258ACF:
	LDA.w $0700
	CLC
	ADC.b #$10
	STA.w $0700
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	DEC.b $02
	BNE.b CODE_258AC4
	LDA.b #$91
	STA.b [$2E],y
	INY
	LDA.b #$92
	STA.b [$2E],y
	RTL

CODE_258AED:
	LDX.b #$04
	LDA.b [$2E],y
CODE_258AF1:
	CMP.l DATA_258A89,x
	BEQ.b CODE_258AFF
	DEX
	BPL.b CODE_258AF1
	LDA.b #$BA
	JMP.w CODE_258B03

CODE_258AFF:
	LDA.l DATA_258A8E,x
CODE_258B03:
	RTS

CODE_258B04:
	LDX.b #$04
	LDA.b [$2E],y
CODE_258B08:
	CMP.l DATA_258A89,x
	BEQ.b CODE_258B16
	DEX
	BPL.b CODE_258B08
	LDA.b #$BB
	JMP.w CODE_258B1A

CODE_258B16:
	LDA.l DATA_258A93,x
CODE_258B1A:
	RTS

;--------------------------------------------------------------------

DATA_258B1B:
	db $99,$9D

DATA_258B1D:
	db $9A,$9E

CODE_258B1F:
	LDA.w $0706
	AND.b #$0F
	STA.b $02
	LDX.b #$00
	STX.b $04
CODE_258B2A:
	LDY.w $0700
	LDA.b $02
	STA.b $03
	LDA.l DATA_258B1D,x
	STA.b [$2E],y
	JMP.w CODE_258B3F

CODE_258B3A:
	JSR.w CODE_258B64
	STA.b [$2E],y
CODE_258B3F:
	INY
	DEC.b $03
	BPL.b CODE_258B3A
	LDA.w $0700
	CLC
	ADC.b #$10
	STA.w $0700
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	INX
	STX.b $04
	CPX.b #$02
	BNE.b CODE_258B2A
	RTL

DATA_258B5B:
	db $BA,$BB,$94

DATA_258B5E:
	db $A5,$A6,$A7

DATA_258B61:
	db $AA,$AB,$AC

CODE_258B64:
	LDX.b #$02
	LDA.b [$2E],y
CODE_258B68:
	CMP.l DATA_258B5B,x
	BEQ.b CODE_258B7A
	DEX
	BPL.b CODE_258B68
	LDX.b $04
	LDA.l DATA_258B1B,x
	JMP.w CODE_258B89

CODE_258B7A:
	LDA.b $04
	BNE.b CODE_258B85
	LDA.l DATA_258B5E,x
	JMP.w CODE_258B89

CODE_258B85:
	LDA.l DATA_258B61,x
CODE_258B89:
	LDX.b $04
	RTS

;--------------------------------------------------------------------

CODE_258B8C:
	LDA.w $0706
	AND.b #$0F
	STA.b $02
	LDX.b #$00
	STX.b $04
CODE_258B97:
	LDY.w $0700
	LDA.b $02
	STA.b $03
CODE_258B9E:
	JSR.w CODE_258B64
	STA.b [$2E],y
	INY
	DEC.b $03
	BNE.b CODE_258B9E
	LDA.l DATA_258B1D,x
	STA.b [$2E],y
	LDA.w $0700
	CLC
	ADC.b #$10
	STA.w $0700
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	INX
	STX.b $04
	CPX.b #$02
	BNE.b CODE_258B97
	RTL

;--------------------------------------------------------------------

CODE_258BC5:
	RTL

;--------------------------------------------------------------------

CODE_258BC6:
	RTL


;--------------------------------------------------------------------

DATA_258BC7:
	db $C0,$C3,$C2,$C4

;--------------------------------------------------------------------

CODE_258BCB:
	RTL

;--------------------------------------------------------------------

CODE_258BCC:
	RTL

;--------------------------------------------------------------------

CODE_258BCD:
	RTL

;--------------------------------------------------------------------

CODE_258BCE:
	LDA.w $0706
	AND.b #$0F
	TAX
	LDY.w $0700
	LDA.b #$96
	STA.b [$2E],y
	BRA.b CODE_258BE1

CODE_258BDD:
	LDA.b #$97
	STA.b [$2E],y
CODE_258BE1:
	INY
	DEX
	BNE.b CODE_258BDD
	LDA.b #$98
	STA.b [$2E],y
	RTL

;--------------------------------------------------------------------

CODE_258BEA:
	RTL

;--------------------------------------------------------------------

DATA_258BEB:
	db $8F,$E2

DATA_258BED:
	db $90,$E2

CODE_258BEF:
	LDA.w $0706
	PHA
	SEC
	SBC.b #$D0
	LSR
	LSR
	LSR
	LSR
	TAX
	PLA
	AND.b #$0F
	STA.b $02
	LDY.w $0700
	LDA.l DATA_258BEB,x
	STA.b [$2E],y
	BRA.b CODE_258C11

CODE_258C0B:
	LDA.l DATA_258BED,x
	STA.b [$2E],y
CODE_258C11:
	TYA
	CLC
	ADC.b #$10
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	DEC.b $02
	BPL.b CODE_258C0B
	RTL

;--------------------------------------------------------------------

DATA_258C21:
	db $50,$4C,$4C,$4C

DATA_258C25:
	db $4D,$51,$4D,$4D

DATA_258C29:
	db $4E,$4E,$52,$4E

DATA_258C2D:
	db $4F,$4F,$4F,$53

CODE_258C31:
	LDX.w $0706
	LDY.w $0700
	LDA.l DATA_258C21,x
	STA.b [$2E],y
	INY
	LDA.l DATA_258C25,x
	STA.b [$2E],y
	LDA.w $0700
	CLC
	ADC.b #$10
	STA.w $0700
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	LDA.l DATA_258C29,x
	STA.b [$2E],y
	INY
	LDA.l DATA_258C2D,x
	STA.b [$2E],y
	RTL

;--------------------------------------------------------------------

CODE_258C62:
	LDX.b #$01
	BRA.b CODE_258C6A

DATA_258C66:
	db $0C,$0D

CODE_258C68:
	LDX.b #$00
CODE_258C6A:
	LDA.w $0706
	AND.b #$0F
	STA.b $02
	LDY.w $0700
CODE_258C74:
	LDA.l DATA_258C66,x
	STA.b [$2E],y
	INY
	DEC.b $02
	BPL.b CODE_258C74
	RTL

;--------------------------------------------------------------------

CODE_258C80:
	LDX.b #$00
CODE_258C82:
	LDA.b #$80
	JSR.w CODE_2588AD
	CPX.b #$F0
	BNE.b CODE_258C82
	RTL

;--------------------------------------------------------------------

CODE_258C8C:
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDA.w $0706
	AND.b #$0F
	STA.b $02
	LDY.w $0700
	LDX.b #$01
CODE_258CA0:
	LDA.b $02
	STA.b $03
CODE_258CA4:
	LDA.b #$8C
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	DEC.b $03
	BPL.b CODE_258CA4
	LDA.b $00
	STA.b $2E
	LDA.b $01
	STA.b $2F
	LDA.w $0700
	CLC
	ADC.b #$10
	STA.w $0700
	TAY
	DEX
	BPL.b CODE_258CA0
	RTL

;--------------------------------------------------------------------

DATA_258CC6:
	db $E7,$EA

DATA_258CC8:
	db $E8,$CF

DATA_258CCA:
	db $E9,$EB

CODE_258CCC:
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDA.w $0706
	AND.b #$0F
	STA.b $02
	LDX.b #$00
CODE_258CDD:
	LDA.b $02
	STA.b $03
	LDY.w $0700
	LDA.b [$2E],y
	CMP.b #$5D
	BCC.b CODE_258CEE
	CMP.b #$7C
	BCC.b CODE_258D26
CODE_258CEE:
	LDA.l DATA_258CC6,x
	BRA.b CODE_258CF8

CODE_258CF4:
	LDA.l DATA_258CC8,x
CODE_258CF8:
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	DEC.b $03
	BNE.b CODE_258CF4
	LDA.l DATA_258CCA,x
	STA.b [$2E],y
	LDA.b $00
	STA.b $2E
	LDA.b $01
	STA.b $2F
	LDA.w $0700
	CLC
	ADC.b #$10
	STA.w $0700
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	STA.b $01
	LDX.b #$01
	JMP.w CODE_258CDD

CODE_258D26:
	RTL

;--------------------------------------------------------------------

DATA_258D27:
	db $5D,$7D

DATA_258D29:
	db $5E,$7E

DATA_258D2B:
	db $7C,$7F

CODE_258D2D:
	LDY.b #$00
	LDA.b [!RAM_SMB3_Level_LevelDataPtrLo],y
	STA.b $03
	LDA.b !RAM_SMB3_Level_LevelDataPtrLo
	CLC
	ADC.b #$01
	STA.b !RAM_SMB3_Level_LevelDataPtrLo
	LDA.b !RAM_SMB3_Level_LevelDataPtrHi
	ADC.b #$00
	STA.b !RAM_SMB3_Level_LevelDataPtrHi
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDA.w $0706
	AND.b #$0F
	STA.b $02
	LDX.b #$00
CODE_258D51:
	LDA.b $03
	STA.b $04
	LDY.w $0700
	LDA.l DATA_258D27,x
	JMP.w CODE_258D63

CODE_258D5F:
	LDA.l DATA_258D29,x
CODE_258D63:
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	DEC.b $04
	BNE.b CODE_258D5F
	LDA.l DATA_258D2B,x
	STA.b [$2E],y
	LDA.b $00
	STA.b $2E
	LDA.b $01
	STA.b $2F
	LDA.w $0700
	CLC
	ADC.b #$10
	STA.w $0700
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	STA.b $01
	LDX.b #$01
	DEC.b $02
	BPL.b CODE_258D51
	RTL

;--------------------------------------------------------------------

CODE_258D93:
	LDA.w $0706
	AND.b #$0F
	TAX
	LDY.w $0700
CODE_258D9C:
	LDA.b #$09
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	DEX
	BPL.b CODE_258D9C
	RTL

;--------------------------------------------------------------------

CODE_258DA8:
	LDA.w $0706
	AND.b #$0F
	TAX
	LDY.w $0700
CODE_258DB1:
	LDA.b #$09
	STA.b [$2E],y
	TYA
	CLC
	ADC.b #$10
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	DEX
	BPL.b CODE_258DB1
	RTL

;--------------------------------------------------------------------

CODE_258DC4:
	LDA.w $0706
	AND.b #$0F
	TAX
	LDY.w $0700
CODE_258DCD:
	LDA.b #$E2
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	DEX
	BPL.b CODE_258DCD
	RTL

;--------------------------------------------------------------------

CODE_258DD9:
	LDY.b #$00
	LDA.b [!RAM_SMB3_Level_LevelDataPtrLo],y
	STA.b $02
	LDA.b !RAM_SMB3_Level_LevelDataPtrLo
	CLC
	ADC.b #$01
	STA.b !RAM_SMB3_Level_LevelDataPtrLo
	LDA.b !RAM_SMB3_Level_LevelDataPtrHi
	ADC.b #$00
	STA.b !RAM_SMB3_Level_LevelDataPtrHi
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDA.w $0706
	AND.b #$1F
	STA.b $03
	LDY.w $0700
	LDX.b $02
CODE_258E00:
	LDA.b #$8B
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	DEX
	CPX.b #$FF
	BNE.b CODE_258E00
	BRA.b CODE_258E1E

CODE_258E0F:
	LDX.b $02
CODE_258E11:
	LDA.b #$8C
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	DEX
	CPX.b #$FF
	BNE.b CODE_258E11
CODE_258E1E:
	LDA.b $00
	STA.b $2E
	LDA.b $01
	STA.b $2F
	LDA.w $0700
	CLC
	ADC.b #$10
	STA.w $0700
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	STA.b $01
	DEC.b $03
	BPL.b CODE_258E0F
	RTL

;--------------------------------------------------------------------

DATA_258E3D:
	db $54,$56,$58,$5A

DATA_258E41:
	db $55,$57,$59,$5C

CODE_258E45:
	LDA.w $0706
	SEC
	SBC.b #$04
	TAX
	LDY.w $0700
	LDA.l DATA_258E3D,x
	STA.b [$2E],y
	INY
	LDA.l DATA_258E41,x
	STA.b [$2E],y
	RTL

;--------------------------------------------------------------------

CODE_258E5D:
	LDY.w $0700
	LDA.b #$E3
	STA.b [$2E],y
	RTL

;--------------------------------------------------------------------

CODE_258E65:
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDA.b $0E
	AND.b #$1F
	STA.b $02
	LDA.b #$1A
	SEC
	SBC.b $02
	STA.b $02
	LDY.w $0700
	LDX.b #$EF
CODE_258E7F:
	LDA.w !RAM_SMB3_Level_Layer3BGFromHeader
	CMP.b #$01
	BEQ.b CODE_258E95
	LDA.b #$8B
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	DEX
	CPX.b #$FF
	BNE.b CODE_258E7F
	BRA.b CODE_258EA2

CODE_258E95:
	LDA.b #$8C
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	DEX
	CPX.b #$FF
	BNE.b CODE_258E95
CODE_258EA2:
	LDA.b $00
	STA.b $2E
	LDA.b $01
	STA.b $2F
	LDA.w $0700
	CLC
	ADC.b #$10
	STA.w $0700
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	STA.b $01
	LDX.b #$EF
	DEC.b $02
	BPL.b CODE_258E95
	RTL

;--------------------------------------------------------------------

CODE_258EC3:
	LDA.w $0706
	AND.b #$0F
	TAX
	LDY.w $0700
CODE_258ECC:
	LDA.b #$E6
	STA.b [$2E],y
	TYA
	CLC
	ADC.b #$10
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	DEX
	BPL.b CODE_258ECC
	RTL

;--------------------------------------------------------------------

DATA_258EDF:
	db $49,$E6

CODE_258EE1:
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDX.b #$01
CODE_258EEB:
	LDA.w $0706
	AND.b #$0F
	STA.b $02
	LDY.w $0700
CODE_258EF5:
	LDA.l DATA_258EDF,x
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	DEC.b $02
	BPL.b CODE_258EF5
	LDA.b $00
	STA.b $2E
	LDA.b $01
	STA.b $2F
	LDA.w $0700
	CLC
	ADC.b #$10
	STA.w $0700
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	STA.b $01
	DEX
	BPL.b CODE_258EEB
	RTL

;--------------------------------------------------------------------

CODE_258F20:
	LDA.w $0706
	AND.b #$0F
	STA.b $02
	LDY.w $0700
	LDA.b [$2E],y
	CMP.b #$49
	BNE.b CODE_258F35
	LDX.b #$4A
	JMP.w CODE_258F37

CODE_258F35:
	LDX.b #$4B
CODE_258F37:
	TXA
	STA.b [$2E],y
	TYA
	CLC
	ADC.b #$10
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	DEC.b $02
	BPL.b CODE_258F35
	RTL

;--------------------------------------------------------------------

DATA_258F4A:
	db $02,$05,$08,$0B

DATA_258F4E:
	db $08,$04,$02,$01

DATA_258F52:
	db $81,$82,$83,$84

CODE_258F56:
	LDX.b #$00
	LDY.w $0700
CODE_258F5B:
	LDA.l DATA_258F52,x
	STA.b [$2E],y
	INY
	INX
	TXA
	AND.b #$01
	BNE.b CODE_258F5B
	LDA.w $0700
	CLC
	ADC.b #$10
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	CPX.b #$04
	BNE.b CODE_258F5B
	LDX.b #$03
	LDA.w $0700
	AND.b #$0F
CODE_258F80:
	CMP.l DATA_258F4A,x
	BEQ.b CODE_258F89
	DEX
	BNE.b CODE_258F80
CODE_258F89:
	LDY.w $0420
	LDA.w !RAM_SMB3_Level_OpenToadHouseChestFlags,y
	AND.l DATA_258F4E,x
	BEQ.b CODE_258FA1
	LDY.w $0700
	LDA.b #$86
	STA.b [$2E],y
	INY
	LDA.b #$87
	STA.b [$2E],y
CODE_258FA1:
	RTL

;--------------------------------------------------------------------

CODE_258FA2:
	LDY.w $0700
	LDA.b #$88
	STA.b [$2E],y
	LDX.b #$03
	TYA
	AND.b #$0F
CODE_258FAE:
	CMP.l DATA_258F4A,x
	BEQ.b CODE_258FB7
	DEX
	BNE.b CODE_258FAE
CODE_258FB7:
	LDY.w $0420
	LDA.w !RAM_SMB3_Level_OpenToadHouseChestFlags,y
	AND.l DATA_258F4E,x
	BEQ.b CODE_258FCA
	LDY.w $0700
	LDA.b #$89
	STA.b [$2E],y
CODE_258FCA:
	RTL

;--------------------------------------------------------------------

DATA_258FCB:
	db $06,$07

CODE_258FCD:
	LDA.w $0706
	SEC
	SBC.b #$0E
	LSR
	LSR
	LSR
	LSR
	TAX
	LDY.w $0700
	LDA.l DATA_258FCB,x
	STA.b [$2E],y
	RTL

;--------------------------------------------------------------------

	%DATATABLE_RT03_SMB3_LevelData(NULLROM)				; $258FE2
	%FREE_BYTES(NULLROM, 3025, $FF)						; $259C2F

;--------------------------------------------------------------------

DATA_25A800:
	db $FC,$10,$FC,$10,$FC,$10,$FC,$10,$2B,$10,$1B,$10,$FC,$10,$FC,$10
	db $2C,$0C,$3C,$0C,$2D,$0C,$3D,$0C,$05,$10,$06,$10,$07,$10,$08,$10
	db $05,$10,$D6,$0C,$07,$10,$D6,$0C,$E8,$14,$E9,$14,$EA,$14,$EB,$14
	db $2E,$0C,$3E,$0C,$2F,$0C,$3F,$0C,$FC,$10,$38,$10,$FC,$10,$FC,$10
	db $FC,$10,$FC,$10,$38,$10,$FC,$10,$38,$10,$FC,$10,$FC,$10,$38,$10
	db $FF,$14,$0E,$14,$FF,$14,$0F,$14,$2E,$0C,$FF,$00,$2D,$0C,$FF,$00
	db $2E,$0C,$FF,$00,$21,$0C,$FF,$00,$23,$0C,$FF,$00,$2D,$0C,$FF,$00
	db $FF,$00,$48,$0C,$FF,$00,$49,$0C,$FF,$00,$4A,$0C,$FF,$00,$4B,$0C
	db $FC,$10,$1A,$10,$FC,$10,$6E,$10,$2B,$10,$2A,$10,$FC,$10,$6E,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$58,$0C,$68,$0C,$5B,$0C,$69,$0C
	db $64,$0C,$6A,$0C,$6F,$0C,$6B,$0C,$FC,$0C,$FC,$0C,$FC,$0C,$7E,$0C
	db $FC,$0C,$5E,$0C,$FC,$0C,$5E,$0C,$FC,$0C,$5F,$0C,$FC,$0C,$FC,$0C
	db $FC,$0C,$FC,$0C,$6D,$0C,$6D,$0C,$6D,$0C,$6D,$0C,$FC,$0C,$FC,$0C
	db $FC,$0C,$FC,$0C,$7D,$0C,$FC,$0C,$5E,$0C,$FC,$0C,$5E,$0C,$FC,$0C
	db $7F,$0C,$FC,$0C,$FC,$0C,$FC,$0C,$0C,$0C,$1C,$0C,$00,$0D,$1D,$0C
	db $01,$0D,$1E,$0C,$0F,$0C,$1F,$0C,$FD,$14,$FD,$14,$FD,$14,$FD,$14
	db $FD,$10,$16,$10,$27,$10,$17,$10,$FD,$14,$FD,$14,$10,$0C,$20,$0C
	db $FD,$10,$5A,$10,$10,$10,$11,$10,$12,$0C,$22,$0C,$FD,$14,$FD,$14
	db $12,$10,$13,$10,$FD,$10,$59,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $D0,$10,$D1,$10,$D2,$10,$D3,$10,$D0,$10,$D1,$10,$D2,$10,$D3,$10
	db $B8,$14,$B9,$14,$BA,$14,$BB,$14,$B8,$14,$B9,$14,$BA,$14,$BB,$14
	db $B8,$14,$B9,$14,$BA,$14,$BB,$14,$B8,$14,$B9,$14,$BA,$14,$BB,$14
	db $BC,$14,$BD,$14,$BE,$14,$BF,$14,$94,$10,$95,$10,$96,$10,$97,$10
	db $B0,$10,$B1,$10,$B0,$10,$B1,$10,$B1,$10,$B0,$10,$B1,$10,$B0,$10
	db $38,$14,$16,$14,$39,$14,$17,$14,$FD,$10,$5A,$10,$10,$10,$11,$10
	db $12,$10,$13,$10,$FD,$10,$59,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $DC,$1C,$DD,$1C,$DE,$1C,$DF,$1C,$05,$14,$05,$14,$06,$14,$07,$14
	db $64,$16,$74,$16,$65,$16,$75,$16,$64,$12,$74,$12,$65,$12,$75,$12
	db $05,$14,$06,$14,$07,$14,$08,$14,$05,$14,$06,$14,$07,$14,$08,$14
	db $05,$14,$06,$14,$07,$14,$08,$14,$00,$1C,$10,$1C,$01,$1C,$11,$1C
	db $02,$1C,$12,$1C,$00,$1C,$10,$1C,$20,$1C,$30,$1C,$21,$1C,$31,$1C
	db $22,$1C,$32,$1C,$23,$1C,$33,$1C,$04,$1C,$14,$1C,$68,$1C,$15,$1C
	db $5A,$1C,$16,$1C,$0E,$1C,$17,$1C,$24,$1C,$34,$1C,$25,$1C,$35,$1C
	db $26,$1C,$36,$1C,$27,$1C,$37,$1C,$44,$10,$54,$10,$45,$10,$55,$10
	db $46,$10,$56,$10,$47,$10,$57,$10,$64,$10,$74,$10,$65,$10,$75,$10
	db $66,$10,$76,$10,$67,$10,$77,$10,$06,$1D,$24,$1C,$0D,$1C,$04,$1D
	db $0D,$1C,$04,$1D,$0E,$1C,$05,$1D,$24,$1C,$34,$1C,$04,$1D,$48,$1C
	db $04,$1D,$48,$1C,$05,$1D,$37,$1C,$4F,$10,$13,$10,$4F,$10,$5F,$10
	db $4F,$10,$13,$10,$4F,$10,$5F,$10,$6C,$10,$7C,$10,$6D,$10,$7D,$10
	db $6C,$10,$7C,$10,$6D,$10,$7D,$10,$04,$1C,$14,$1C,$68,$1C,$15,$1C
	db $5A,$1C,$16,$1C,$0E,$1C,$17,$1C,$24,$1C,$34,$1C,$25,$1C,$35,$1C
	db $26,$1C,$36,$1C,$27,$1C,$37,$1C,$54,$1E,$55,$1E,$56,$1E,$57,$1E
	db $98,$1C,$99,$1C,$9A,$1C,$9B,$1C,$98,$1C,$99,$1C,$9A,$1C,$9B,$1C
	db $98,$1C,$99,$1C,$9A,$1C,$9B,$1C,$98,$1C,$99,$1C,$9A,$1C,$9B,$1C
	db $98,$1C,$99,$1C,$9A,$1C,$9B,$1C,$98,$1C,$99,$1C,$9A,$1C,$9B,$1C
	db $92,$1C,$93,$1C,$CA,$1C,$CB,$1C,$B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C
	db $B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C,$B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C
	db $B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C,$B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C
	db $B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C,$B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C
	db $B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C,$B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C
	db $B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C,$B8,$10,$B9,$10,$BA,$10,$BB,$10
	db $44,$12,$45,$12,$46,$12,$47,$12,$44,$12,$45,$12,$46,$12,$47,$12
	db $44,$12,$45,$12,$46,$12,$47,$12,$44,$12,$45,$12,$46,$12,$47,$12
	db $48,$16,$49,$16,$4A,$16,$4B,$16,$4C,$16,$4D,$16,$4E,$16,$4F,$16
	db $58,$16,$58,$16,$59,$16,$59,$16,$44,$12,$45,$12,$46,$12,$47,$12
	db $D5,$14,$B2,$14,$D5,$14,$B2,$14,$B2,$14,$B2,$14,$B2,$14,$B2,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $05,$18,$06,$18,$07,$18,$08,$18,$18,$18,$28,$18,$18,$18,$28,$18
	db $19,$18,$29,$18,$19,$18,$29,$18,$FC,$18,$FC,$18,$FC,$18,$FC,$18
	db $FE,$18,$FE,$18,$FE,$18,$FE,$18,$C4,$1C,$C4,$1C,$C6,$1C,$C6,$1C
	db $FD,$18,$FD,$18,$FD,$18,$FD,$18,$FE,$18,$FE,$18,$39,$18,$FE,$18
	db $3A,$18,$28,$18,$18,$18,$28,$18,$05,$18,$61,$18,$07,$18,$62,$18
	db $05,$18,$60,$18,$60,$18,$FD,$18,$FD,$18,$FD,$18,$FD,$18,$FD,$18
	db $7A,$18,$FD,$18,$07,$18,$7A,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $88,$18,$89,$18,$8A,$18,$8B,$18,$7E,$1A,$7E,$1A,$7E,$1A,$7E,$1A
	db $48,$18,$58,$18,$49,$18,$59,$18,$49,$18,$59,$18,$49,$18,$59,$18
	db $4E,$1C,$04,$1C,$4F,$1C,$0D,$1C,$04,$1C,$04,$1C,$0D,$1C,$0D,$1C
	db $4E,$1C,$04,$1C,$4F,$1C,$0D,$1C,$49,$18,$59,$18,$48,$18,$58,$18
	db $68,$18,$71,$18,$69,$18,$71,$18,$6A,$18,$71,$18,$6B,$18,$71,$18
	db $72,$18,$6C,$18,$72,$18,$6D,$18,$72,$18,$6E,$18,$72,$18,$6F,$18
	db $60,$18,$61,$18,$AD,$18,$AD,$18,$AE,$18,$AE,$18,$64,$18,$65,$18
	db $62,$18,$63,$18,$AD,$18,$AD,$18,$AE,$18,$AE,$18,$66,$18,$67,$18
	db $40,$1E,$58,$1C,$49,$1C,$59,$1C,$4A,$1C,$02,$1D,$4B,$1C,$5B,$1C
	db $42,$1E,$78,$1C,$43,$1E,$79,$1C,$50,$1E,$60,$1E,$69,$1C,$61,$1E
	db $6A,$1C,$03,$1D,$6B,$1C,$7B,$1C,$52,$1E,$62,$1E,$53,$1E,$63,$1E
	db $60,$1E,$60,$1E,$61,$1E,$61,$1E,$03,$1D,$03,$1D,$7B,$1C,$7B,$1C
	db $62,$1E,$62,$1E,$63,$1E,$63,$1E,$40,$1E,$50,$1E,$41,$1E,$51,$1E
	db $42,$1E,$52,$1E,$43,$1E,$53,$1E,$40,$1E,$50,$1E,$41,$1E,$51,$1E
	db $42,$1E,$52,$1E,$43,$1E,$53,$1E,$40,$1E,$50,$1E,$41,$1E,$51,$1E
	db $42,$1E,$52,$1E,$43,$1E,$53,$1E,$40,$1E,$50,$1E,$41,$1E,$51,$1E
	db $42,$1E,$52,$1E,$43,$1E,$53,$1E,$52,$1C,$53,$1C,$72,$1C,$73,$1C
	db $52,$1C,$53,$1C,$72,$1C,$73,$1C,$50,$1C,$51,$1C,$70,$1C,$71,$1C
	db $40,$1C,$41,$1C,$40,$1C,$41,$1C,$42,$1C,$43,$1C,$42,$1C,$43,$1C
	db $60,$1E,$60,$1E,$61,$1E,$61,$1E,$62,$1E,$62,$1E,$63,$1E,$63,$1E
	db $B8,$18,$B9,$18,$BA,$18,$BB,$18,$40,$1E,$50,$1E,$41,$1E,$51,$1E
	db $42,$1E,$52,$1E,$43,$1E,$53,$1E,$52,$1C,$53,$1C,$72,$1C,$73,$1C
	db $F4,$1C,$F5,$1C,$F6,$1C,$F7,$1C,$05,$1C,$06,$1C,$07,$1C,$08,$1C
	db $F8,$1C,$F9,$1C,$FA,$1C,$FB,$1C,$FF,$14,$02,$14,$FF,$14,$03,$14
	db $05,$1C,$02,$1C,$06,$1C,$03,$1C,$05,$1C,$06,$1C,$07,$1C,$08,$1C
	db $FD,$1C,$0A,$1C,$0A,$1C,$08,$1C,$0B,$1C,$06,$1C,$FD,$1C,$0B,$1C
	db $0C,$1C,$FD,$1C,$07,$1C,$0C,$1C,$05,$1C,$0D,$1C,$0D,$1C,$FD,$1C
	db $3C,$1C,$3D,$1C,$07,$1C,$03,$1C,$05,$1C,$02,$1C,$3F,$1C,$3E,$1C
	db $FD,$1C,$FD,$1C,$FD,$1C,$FD,$1C,$1C,$1C,$2C,$1C,$1D,$1C,$08,$1C
	db $1E,$1C,$06,$1C,$1F,$1C,$2F,$1C,$3C,$1C,$3B,$1C,$07,$1C,$60,$1C
	db $08,$1C,$4E,$1C,$3F,$1C,$4F,$1C,$05,$0C,$34,$0C,$07,$0C,$35,$0C
	db $05,$0C,$36,$0C,$07,$0C,$35,$0C,$05,$0C,$36,$0C,$07,$0C,$37,$0C
	db $FF,$0C,$30,$0C,$FF,$0C,$31,$0C,$FF,$0C,$32,$0C,$FF,$0C,$31,$0C
	db $FF,$0C,$32,$0C,$FF,$0C,$33,$0C,$FF,$00,$E6,$0C,$FF,$00,$E7,$0C
	db $B3,$1C,$CD,$1C,$B3,$1C,$CF,$1C,$CC,$1C,$CD,$1C,$CE,$1C,$CF,$1C
	db $FC,$1C,$CD,$1C,$FC,$1C,$CF,$1C,$C5,$1C,$FE,$1C,$C5,$1C,$FE,$1C
	db $C7,$0C,$FE,$0C,$C7,$0C,$FE,$0C,$D4,$1C,$FE,$1C,$D4,$1C,$FE,$1C
	db $FE,$0C,$FE,$0C,$FE,$0C,$FE,$0C,$FC,$1C,$FE,$1C,$FC,$1C,$FE,$1C
	db $A6,$0C,$AE,$0C,$A7,$0C,$AF,$0C,$AC,$0C,$AE,$0C,$AD,$0C,$AF,$0C
	db $78,$1C,$FD,$1C,$79,$1C,$61,$1C,$7A,$1C,$62,$1C,$7A,$1C,$62,$1C
	db $7A,$1C,$62,$1C,$7B,$1C,$63,$1C,$54,$0C,$06,$0C,$79,$0C,$65,$0C
	db $7A,$0C,$66,$0C,$7A,$0C,$66,$0C,$7A,$0C,$66,$0C,$57,$0C,$67,$0C
	db $44,$0C,$06,$0C,$45,$0C,$08,$0C,$46,$0C,$06,$0C,$45,$0C,$08,$0C
	db $46,$0C,$06,$0C,$47,$0C,$08,$0C,$74,$0C,$FF,$0C,$75,$0C,$FF,$0C
	db $75,$0C,$FF,$0C,$75,$0C,$FF,$0C,$76,$0C,$FF,$0C,$77,$0C,$FF,$0C
	db $24,$14,$14,$14,$3A,$14,$15,$14,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $4C,$18,$5C,$18,$4D,$18,$5D,$18,$D7,$1C,$06,$1C,$D7,$1C,$08,$1C
	db $E0,$0C,$E1,$0C,$E2,$0C,$E3,$0C,$05,$1C,$06,$1C,$07,$1C,$08,$1C
	db $63,$1C,$18,$1C,$09,$1C,$19,$1C,$0A,$1C,$1A,$1C,$0B,$1C,$1B,$1C
	db $28,$1C,$38,$1C,$29,$1C,$39,$1C,$2A,$1C,$3A,$1C,$2B,$1C,$3B,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $70,$12,$72,$12,$71,$12,$73,$12,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $4F,$10,$13,$10,$14,$11,$15,$11,$6E,$10,$7E,$10,$16,$11,$17,$11
	db $10,$11,$11,$11,$4F,$10,$5F,$10,$12,$11,$13,$11,$6D,$10,$7D,$10

;--------------------------------------------------------------------

DATA_25B030:
	db $1F,$47,$96,$E2,$2E,$47,$96,$EE

;--------------------------------------------------------------------

	%ROUTINE_SMB3_InitializeTilesetXXLevel_PipeOrGiant(NULLROM)			; $25B038
	%ROUTINE_SMB3_InitializeTileset0DLevel_Cloud(NULLROM)				; $25B04D

;--------------------------------------------------------------------

DATA_25B062:
	db $00,$0F,$1E,$2D,$3C,$4B,$5A,$69

SMB3_ProcessPipeLevelResizableObjects:
.Main:
SMB3_ProcessGiantLevelResizableObjects:
.Main:
SMB3_ProcessSnowyCloudLevelResizableObjects:
.Main:
;$25B06A
	LDA.b $0E
	AND.b #$E0
	LSR
	LSR
	LSR
	LSR
	LSR
	TAX
	LDA.w $0706
	LSR
	LSR
	LSR
	LSR
	CLC
	ADC.l DATA_25B062,x
	TAX
	DEX
	TXA
	JSL.l SMB3_ExecutePtr_Long

DATA_25B087:
	dl CODE_25B1CE
	dl CODE_25B1CE
	dl CODE_25B1CE
	dl CODE_25B1CE
	dl CODE_25B1CE
	dl CODE_25B1CE
	dl CODE_25B1CE
	dl CODE_25B23B
	dl CODE_25B286
	dl CODE_25B305
	dl CODE_25B305
	dl CODE_25B4DA
	dl CODE_25B4DA
	dl CODE_25B533
	dl CODE_25B585
	dl CODE_23AA8A
	dl CODE_23AA8A
	dl CODE_23AA8A
	dl CODE_23AA8A
	dl CODE_23AA8A
	dl CODE_23AA8A
	dl CODE_23AA8A
	dl CODE_23AA8A
	dl CODE_23A6C1
	dl CODE_23A6C1
	dl CODE_23A6C1
	dl CODE_23A728
	dl CODE_23A728
	dl CODE_23A81D
	dl CODE_23A81D
	dl CODE_23A8AE
	dl CODE_23A8AE
	dl CODE_23AE7B
	dl CODE_23AEC7
	dl CODE_23AEC7
	dl CODE_23AF2A
	dl CODE_23AF2A
	dl CODE_23AF2A
	dl CODE_23AF2A
	dl CODE_23AF2A
	dl CODE_23AF2A
	dl CODE_23AF2A
	dl CODE_23AF2A
	dl CODE_23AABC
	dl CODE_23A790
	dl CODE_25B5CD
	dl CODE_25B61E
	dl CODE_25B33A
	dl CODE_25B6CF
	dl CODE_23A811
	dl CODE_23A91B
	dl CODE_23AD09
	dl CODE_2A8598

;--------------------------------------------------------------------

CODE_25B126:
	LDA.b $0E
	AND.b #$E0
	LSR
	CLC
	ADC.w $0706
	TAX
	JSL.l SMB3_ExecutePtr_Long

DATA_25B134:
	dl CODE_25B2EE
	dl CODE_25B2EE
	dl CODE_25B3C2
	dl CODE_25B441
	dl CODE_25B466
	dl CODE_25B664
	dl CODE_25B693
	dl CODE_25B693
	dl $000000
	dl $000000
	dl $000000
	dl $000000
	dl $000000
	dl $000000
	dl $000000
	dl $000000
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23A943

;--------------------------------------------------------------------

DATA_25B1B2:
	db $1F,$47,$4B,$5B,$4F,$53,$57

DATA_25B1B9:
	db $20,$48,$4C,$5C,$50,$54,$58

DATA_25B1C0:
	db $02,$49,$4D,$5D,$51,$55,$59

DATA_25B1C7:
	db $06,$4A,$4E,$5E,$52,$56,$5A

CODE_25B1CE:
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDA.w $0706
	PHA
	SEC
	SBC.b #$10
	LSR
	LSR
	LSR
	LSR
	TAX
	PLA
	AND.b #$0F
	STA.b $02
	LDY.w $0700
	LDA.b $02
	STA.b $03
CODE_25B1EE:
	LDA.l DATA_25B1B2,x
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	JSL.l CODE_23BEBB
	LDA.l DATA_25B1B9,x
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	JSL.l CODE_23BEBB
	DEC.b $03
	BPL.b CODE_25B1EE
	JSR.w CODE_25B717
CODE_25B211:
	LDA.l DATA_25B1C0,x
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	JSL.l CODE_23BEBB
	LDA.l DATA_25B1C7,x
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	JSL.l CODE_23BEBB
	DEC.b $02
	BPL.b CODE_25B211
	RTL

;--------------------------------------------------------------------

DATA_25B232:
	db $A4,$A7,$AA

DATA_25B235:
	db $A5,$A8,$AB

DATA_25B238:
	db $A6,$A9,$AC

CODE_25B23B:
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDA.w $0706
	AND.b #$0F
	STA.b $02
	LDY.w $0700
	LDX.b #$00
CODE_25B24F:
	LDA.l DATA_25B232,x
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	JSL.l CODE_23BEBB
	LDA.l DATA_25B235,x
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	JSL.l CODE_23BEBB
	LDA.l DATA_25B238,x
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	JSR.w CODE_25B717
	CPX.b #$02
	BEQ.b CODE_25B27D
	INX
CODE_25B27D:
	DEC.b $02
	BPL.b CODE_25B24F
	RTL

;--------------------------------------------------------------------

DATA_25B282:
	db $F4,$F5

DATA_25B284:
	db $F6,$F7

CODE_25B286:
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDA.w $0706
	AND.b #$0F
	STA.b $02
	LDY.w $0700
	LDX.b #$00
CODE_25B29A:
	LDA.b $02
	STA.b $03
CODE_25B29E:
	LDA.l DATA_25B282,x
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	TYA
	CLC
	ADC.b #$10
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	LDA.l DATA_25B284,x
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	TYA
	CLC
	ADC.b #$10
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	DEC.b $03
	BPL.b CODE_25B29E
	LDA.b $00
	STA.b $2E
	LDA.b $01
	STA.b $2F
	LDY.w $0700
	JSL.l CODE_23BEBB
	STY.w $0700
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	INX
	CPX.b #$02
	BNE.b CODE_25B29A
	RTL

;--------------------------------------------------------------------

DATA_25B2EC:
	db $C0,$C2

CODE_25B2EE:
	LDA.w $0706
	SEC
	SBC.b #$00
	TAX
	LDY.w $0700
	LDA.l DATA_25B2EC,x
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	RTL

;--------------------------------------------------------------------

DATA_25B303:
	db $98,$9A

CODE_25B305:
	LDA.w $0706
	PHA
	SEC
	SBC.b #$A0
	LSR
	LSR
	LSR
	LSR
	TAX
	PLA
	AND.b #$0F
	STA.b $02
	LDY.w $0700
	LDA.l DATA_25B303,x
	JMP.w CODE_25B322

CODE_25B320:
	LDA.b #$99
CODE_25B322:
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	TYA
	CLC
	ADC.b #$10
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	DEC.b $02
	BPL.b CODE_25B320
	RTL

;--------------------------------------------------------------------

DATA_25B338:
	db $B8,$B9

CODE_25B33A:
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDA.w $0706
	AND.b #$0F
	STA.b $02
	LDX.b #$00
CODE_25B34B:
	LDY.w $0700
	LDA.b $02
	STA.b $03
CODE_25B352:
	LDA.l DATA_25B338,x
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	JSL.l CODE_23BEBB
	DEC.b $03
	BPL.b CODE_25B352
	JSR.w CODE_25B717
	INX
	CPX.b #$02
	BNE.b CODE_25B34B
	RTL

;--------------------------------------------------------------------

DATA_25B36D:
	db $CC,$CC,$CC,$CC,$CD,$C7,$CC,$CC
	db $CC,$CC,$FF,$CC,$CC,$CC,$C6,$C5
	db $C5,$CE,$CC,$CC,$CC,$FF,$CC,$CC
	db $CD,$C5,$C5,$C5,$C5,$C7,$CC,$CC
	db $FF,$CC,$C6,$C5,$C5,$C5,$C5,$C5
	db $C5,$CE,$CC,$FF,$CD,$C5,$C5,$C5
	db $C5,$C5,$C5,$C5,$C5,$CE,$FF,$C8
	db $C5,$C5,$C5,$C5,$C5,$C5,$C5,$C5
	db $D0,$FF,$CC,$CF,$C5,$C5,$C5,$C5
	db $C5,$C5,$C9,$CC,$FF

DATA_25B3BA:
	db $C6,$CD,$C7,$CE,$C8,$CF,$C9,$D0

CODE_25B3C2:
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDA.b #$06
	STA.b $02
	LDX.b #$00
	LDY.w $0700
CODE_25B3D3:
	LDA.l DATA_25B36D,x
	CMP.b #$CC
	BEQ.b CODE_25B430
	CMP.b #$FF
	BEQ.b CODE_25B438
	LDA.b [$2E],y
	CMP.b #$CC
	BEQ.b CODE_25B426
	CMP.b #$C5
	BEQ.b CODE_25B430
	STY.b $04
	PHB
	LDY.b #DATA_25B3BA>>16
	PHY
	PLB
	LDY.b #$07
CODE_25B3F2:
	CMP.w DATA_25B3BA,y
	BEQ.b CODE_25B400
	DEY
	BPL.b CODE_25B3F2
	PLB
	LDY.b $04
	JMP.w CODE_25B426

CODE_25B400:
	PLB
	TYA
	LSR
	ASL
	TAY
	INY
	PHB
	LDA.b #DATA_25B36D>>16
	PHA
	PLB
CODE_25B40B:
	LDA.l DATA_25B36D,x
	CMP.b #$C5
	BEQ.b CODE_25B420
	CMP.w DATA_25B3BA,y
	BEQ.b CODE_25B420
	DEY
	TYA
	AND.b #$01
	BEQ.b CODE_25B40B
	LDA.b #$C5
CODE_25B420:
	PLB
	LDY.b $04
	JMP.w CODE_25B42A

CODE_25B426:
	LDA.l DATA_25B36D,x
CODE_25B42A:
	STA.b [$2E],y
	JSL.l CODE_2AB73A
CODE_25B430:
	JSL.l CODE_23BEBB
	INX
	JMP.w CODE_25B3D3

CODE_25B438:
	INX
	JSR.w CODE_25B717
	DEC.b $02
	BPL.b CODE_25B3D3
	RTL

;--------------------------------------------------------------------

CODE_25B441:
	LDX.b #$50
CODE_25B443:
	LDA.b #$C5
	JSL.l CODE_20986D
	JSL.l CODE_209809
	CPX.b #$F0
	BNE.b CODE_25B443
	LDX.b #$00
CODE_25B453:
	LDA.b #$C5
	JSL.l CODE_20986D
	INX
	CPX.b #$F0
	BNE.b CODE_25B453
	RTL

;--------------------------------------------------------------------

DATA_25B45F:
	db $07,$08,$09

DATA_25B462:
	db $84,$81

DATA_25B464:
	db $87,$88

CODE_25B466:
	LDA.b #$60
	STA.w $05ED
CODE_25B46B:
	JSL.l SMB3_GetRand_Main
	LDA.w !RAM_SMB3_Global_RandomByte02
	AND.b #$03
	STA.b $0E
	LDA.w !RAM_SMB3_Global_RandomByte03
	TAX
	AND.b #$F0
	CMP.b #$F0
	BNE.b CODE_25B485
	TXA
	CLC
	ADC.b #$20
	TAX
CODE_25B485:
	STX.b $0F
	TXA
	AND.b #$03
	CMP.b #$03
	BNE.b CODE_25B491
	SEC
	SBC.b #$02
CODE_25B491:
	PHA
	JSL.l CODE_209B2A
	PLA
	TAX
	LDY.w $0700
	LDA.l DATA_25B45F,x
	STA.b $00
	LDX.b #$01
	LDA.b [$2E],y
CODE_25B4A5:
	CMP.l DATA_25B462,x
	BEQ.b CODE_25B4BE
	DEX
	BPL.b CODE_25B4A5
	LDX.b #$01
CODE_25B4B0:
	CMP.l DATA_25B464,x
	BEQ.b CODE_25B4C8
	DEX
	BPL.b CODE_25B4B0
	LDA.b $00
	JMP.w CODE_25B4C2

CODE_25B4BE:
	LDA.l DATA_25B464,x
CODE_25B4C2:
	STA.b [$2E],y
	JSL.l CODE_2AB73A
CODE_25B4C8:
	DEC.w $05ED
	BPL.b CODE_25B46B
	RTL

;--------------------------------------------------------------------

DATA_25B4CE:
	db $D4,$EB,$D1,$E8

DATA_25B4D2:
	db $D5,$EC,$D2,$E9

DATA_25B4D6:
	db $D6,$ED,$D3,$EA

CODE_25B4DA:
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDA.w $0706
	PHA
	SEC
	SBC.b #$C0
	AND.b #$F0
	LSR
	LSR
	LSR
	TAX
	PLA
	AND.b #$0F
	STA.b $02
CODE_25B4F4:
	LDY.w $0700
	LDA.b $02
	STA.b $03
	LDA.l DATA_25B4CE,x
	BRA.b CODE_25B505

CODE_25B501:
	LDA.l DATA_25B4D2,x
CODE_25B505:
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	JSL.l CODE_23BEBB
	DEC.b $03
	BNE.b CODE_25B501
	LDA.l DATA_25B4D6,x
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	JSR.w CODE_25B717
	INX
	TXA
	AND.b #$01
	BNE.b CODE_25B4F4
	RTL

;--------------------------------------------------------------------

DATA_25B527:
	db $0E,$26,$25,$0D

DATA_25B52B:
	db $0A,$22,$21,$0B

DATA_25B52F:
	db $0F,$24,$23,$0C

CODE_25B533:
	JSL.l CODE_25B6FB
	LDA.w $0706
	AND.b #$0F
	STA.b $03
	LDX.b #$00
CODE_25B540:
	LDY.w $0700
	LDA.b $02
	STA.b $04
	LDA.l DATA_25B527,x
	JMP.w CODE_25B552

CODE_25B54E:
	LDA.l DATA_25B52B,x
CODE_25B552:
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	JSL.l CODE_23BEBB
	DEC.b $04
	BNE.b CODE_25B54E
	LDA.l DATA_25B52F,x
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	JSR.w CODE_25B717
	DEC.b $03
	LDA.b $03
	BMI.b CODE_25B584
	LDX.b #$03
	CMP.b #$00
	BEQ.b CODE_25B540
	LDX.b #$02
	CMP.b #$01
	BEQ.b CODE_25B540
	LDX.b #$01
	JMP.w CODE_25B540

CODE_25B584:
	RTL

;--------------------------------------------------------------------

CODE_25B585:
	LDA.w $0706
	AND.b #$0F
	STA.b $02
	LDY.w $0700
	LDX.b #$E2
	LDA.b [$2E],y
	CMP.b #$CC
	BEQ.b CODE_25B5A6
	LDX.b #$E5
	JMP.w CODE_25B5A6

CODE_25B59C:
	LDX.b #$E3
	LDA.b [$2E],y
	CMP.b #$CC
	BEQ.b CODE_25B5A6
	LDX.b #$E6
CODE_25B5A6:
	TXA
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	JSL.l CODE_23BEBB
	DEC.b $02
	BNE.b CODE_25B59C
	LDX.b #$E4
	LDA.b [$2E],y
	CMP.b #$CC
	BEQ.b CODE_25B5BF
	LDX.b #$E7
CODE_25B5BF:
	TXA
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	RTL

;--------------------------------------------------------------------

DATA_25B5C7:
	db $0A,$36

DATA_25B5C9:
	db $00,$01

DATA_25B5CB:
	db $10,$11

CODE_25B5CD:
	JSL.l CODE_25B6FB
	LDX.b #$00
CODE_25B5D3:
	LDY.w $0700
	LDA.b $02
	STA.b $04
CODE_25B5DA:
	STX.b $03
	LDA.l DATA_25B5C7,x
	CMP.b #$36
	BEQ.b CODE_25B5F9
	LDX.b #$01
	LDA.b [$2E],y
CODE_25B5E8:
	CMP.l DATA_25B5C9,x
	BEQ.b CODE_25B5F5
	DEX
	BPL.b CODE_25B5E8
	LDA.b #$0A
	BRA.b CODE_25B5F9

CODE_25B5F5:
	LDA.l DATA_25B5CB,x
CODE_25B5F9:
	LDX.b $03
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	JSL.l CODE_23BEBB
	DEC.b $04
	BPL.b CODE_25B5DA
	JSR.w CODE_25B717
	INX
	CPX.b #$02
	BNE.b CODE_25B5D3
	RTL

;--------------------------------------------------------------------

DATA_25B612:
	db $C3,$EE

DATA_25B614:
	db $C8,$CF,$D0,$C9,$C5

DATA_25B619:
	db $CA,$CA,$CB,$CB,$C4

CODE_25B61E:
	JSL.l CODE_25B6FB
	LDX.b #$00
CODE_25B624:
	LDY.w $0700
	LDA.b $02
	STA.b $04
CODE_25B62B:
	STX.b $03
	LDA.l DATA_25B612,x
	CMP.b #$EE
	BEQ.b CODE_25B64B
	LDX.b #$04
	LDA.b [$2E],y
CODE_25B639:
	CMP.l DATA_25B614,x
	BEQ.b CODE_25B647
	DEX
	BPL.b CODE_25B639
	LDA.b #$C3
	JMP.w CODE_25B64B

CODE_25B647:
	LDA.l DATA_25B619,x
CODE_25B64B:
	LDX.b $03
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	JSL.l CODE_23BEBB
	DEC.b $04
	BPL.b CODE_25B62B
	JSR.w CODE_25B717
	INX
	CPX.b #$02
	BNE.b CODE_25B624
	RTL

;--------------------------------------------------------------------

CODE_25B664:
	RTL

;--------------------------------------------------------------------

DATA_25B665:
	db $C5,$C5,$C5,$C9,$CF,$FF,$C9,$CF
	db $D0,$CC,$CD,$FF,$CE,$CC,$CC,$C6
	db $C5,$FF,$C5,$C7,$CD,$C5,$C5,$FF
	db $C9,$CF,$C9,$CF,$C5,$FF,$CE,$CC
	db $CC,$CC,$C8,$FF,$C5,$C7,$C6,$CE
	db $CD,$FF

DATA_25B68F:
	db $00,$18

DATA_25B691:
	db $03,$02

CODE_25B693:
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDA.w $0706
	SEC
	SBC.b #$06
	TAX
	LDA.l DATA_25B691,x
	STA.b $02
	LDA.l DATA_25B68F,x
	TAX
	LDY.w $0700
CODE_25B6B0:
	LDA.l DATA_25B665,x
	CMP.b #$FF
	BEQ.b CODE_25B6C6
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	JSL.l CODE_23BEBB
	INX
	JMP.w CODE_25B6B0

CODE_25B6C6:
	INX
	JSR.w CODE_25B717
	DEC.b $02
	BPL.b CODE_25B6B0
	RTL

;--------------------------------------------------------------------

CODE_25B6CF:
	JSL.l CODE_25B6FB
	LDA.w $0706
	AND.b #$0F
	TAX
CODE_25B6D9:
	LDY.w $0700
	LDA.b $02
	STA.b $03
CODE_25B6E0:
	LDA.b #$C5
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	JSL.l CODE_23BEBB
	DEC.b $03
	LDA.b $03
	CMP.b #$FF
	BNE.b CODE_25B6E0
	JSR.w CODE_25B717
	DEX
	BPL.b CODE_25B6D9
	RTL

;--------------------------------------------------------------------

CODE_25B6FB:
	LDY.b #$00
	LDA.b [!RAM_SMB3_Level_LevelDataPtrLo],y
	STA.b $02
	LDA.b !RAM_SMB3_Level_LevelDataPtrLo
	CLC
	ADC.b #$01
	STA.b !RAM_SMB3_Level_LevelDataPtrLo
	LDA.b !RAM_SMB3_Level_LevelDataPtrHi
	ADC.b #$00
	STA.b !RAM_SMB3_Level_LevelDataPtrHi
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	RTL

;--------------------------------------------------------------------

CODE_25B717:
	LDA.b $00
	STA.b $2E
	LDA.b $01
	STA.b $2F
	LDA.w $0700
	CLC
	ADC.b #$10
	STA.w $0700
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	STA.b $01
	RTS

;--------------------------------------------------------------------

	%DATATABLE_RT04_SMB3_LevelData(NULLROM)				; $25B732
	%FREE_BYTES(NULLROM, 888, $FF)						; $25C888

;--------------------------------------------------------------------

DATA_25CC00:
	db $FC,$10,$FC,$10,$FC,$10,$FC,$10,$7F,$10,$7E,$10,$FC,$10,$FC,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$05,$10,$06,$10,$07,$10,$08,$10
	db $05,$10,$D6,$0C,$07,$10,$D6,$0C,$E8,$14,$E9,$14,$EA,$14,$EB,$14
	db $25,$10,$27,$10,$26,$10,$28,$10,$25,$10,$27,$10,$07,$10,$08,$10
	db $05,$10,$06,$10,$26,$10,$28,$10,$29,$10,$2B,$10,$07,$10,$08,$10
	db $05,$10,$06,$10,$2A,$10,$2C,$10,$4B,$10,$4B,$10,$4B,$10,$4B,$10
	db $05,$10,$06,$10,$4D,$10,$4C,$10,$4C,$10,$4D,$10,$4B,$10,$4B,$10
	db $4B,$10,$4B,$10,$4F,$10,$4E,$10,$4E,$10,$4F,$10,$4B,$10,$4B,$10
	db $FD,$10,$FD,$10,$FD,$10,$FD,$10,$FE,$10,$FE,$10,$FE,$10,$FE,$10
	db $00,$0C,$04,$0C,$01,$0C,$09,$0C,$02,$0C,$0A,$0C,$03,$0C,$0B,$0C
	db $FC,$10,$0D,$16,$1C,$16,$1D,$16,$0E,$16,$1E,$16,$FC,$10,$1F,$16
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FC,$0C,$FC,$0C,$FC,$0C,$0D,$0C
	db $FC,$0C,$47,$0C,$FC,$0C,$47,$0C,$FC,$0C,$0F,$0C,$FC,$0C,$FC,$0C
	db $FC,$0C,$FC,$0C,$46,$0C,$46,$0C,$46,$0C,$46,$0C,$FC,$0C,$FC,$0C
	db $FC,$0C,$FC,$0C,$1C,$0C,$FC,$0C,$47,$0C,$FC,$0C,$47,$0C,$FC,$0C
	db $1D,$0C,$FC,$0C,$FC,$0C,$FC,$0C,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $20,$10,$30,$10,$21,$10,$31,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $B8,$14,$B9,$14,$BA,$14,$BB,$14,$B8,$14,$B9,$14,$BA,$14,$BB,$14
	db $B8,$14,$B9,$14,$BA,$14,$BB,$14,$B8,$14,$B9,$14,$BA,$14,$BB,$14
	db $BC,$14,$BD,$14,$BE,$14,$BF,$14,$2E,$10,$2F,$10,$2E,$10,$2F,$10
	db $2D,$10,$2D,$10,$2D,$10,$2D,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $DC,$1C,$DD,$1C,$DE,$1C,$DF,$1C,$05,$14,$06,$14,$07,$14,$08,$14
	db $64,$16,$74,$16,$65,$16,$75,$16,$64,$12,$74,$12,$65,$12,$75,$12
	db $05,$14,$06,$14,$07,$14,$08,$14,$05,$14,$06,$14,$07,$14,$08,$14
	db $05,$14,$06,$14,$07,$14,$08,$14,$25,$14,$27,$14,$26,$14,$28,$14
	db $25,$14,$27,$14,$07,$14,$08,$14,$05,$14,$06,$14,$26,$14,$28,$14
	db $29,$14,$28,$14,$07,$14,$08,$14,$05,$14,$06,$14,$2A,$14,$2C,$14
	db $05,$14,$34,$14,$34,$14,$35,$14,$35,$14,$35,$14,$35,$14,$35,$14
	db $FD,$14,$FD,$14,$1F,$14,$1F,$14,$FD,$14,$1E,$14,$1F,$14,$24,$14
	db $46,$14,$FE,$14,$47,$14,$FE,$14,$40,$14,$3A,$14,$41,$14,$3B,$14
	db $4A,$14,$4A,$14,$07,$14,$08,$14,$05,$14,$06,$14,$4A,$14,$4A,$14
	db $38,$14,$3A,$14,$39,$14,$3B,$14,$13,$18,$5A,$18,$59,$18,$77,$18
	db $59,$18,$77,$18,$59,$18,$77,$18,$59,$18,$77,$18,$14,$18,$5C,$18
	db $5A,$18,$5A,$18,$77,$18,$77,$18,$77,$18,$77,$18,$77,$18,$77,$18
	db $77,$18,$77,$18,$5C,$18,$5C,$18,$5A,$18,$32,$18,$77,$18,$5B,$18
	db $77,$18,$5B,$18,$77,$18,$5B,$18,$77,$18,$5B,$18,$5C,$18,$33,$18
	db $2D,$14,$2D,$14,$2D,$14,$2D,$14,$54,$1E,$55,$1E,$56,$1E,$57,$1E
	db $98,$1C,$99,$1C,$9A,$1C,$9B,$1C,$98,$1C,$99,$1C,$9A,$1C,$9B,$1C
	db $98,$1C,$99,$1C,$9A,$1C,$9B,$1C,$98,$1C,$99,$1C,$9A,$1C,$9B,$1C
	db $98,$1C,$99,$1C,$9A,$1C,$9B,$1C,$98,$1C,$99,$1C,$9A,$1C,$9B,$1C
	db $92,$1C,$93,$1C,$CA,$1C,$CB,$1C,$B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C
	db $B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C,$B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C
	db $B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C,$B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C
	db $B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C,$B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C
	db $B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C,$B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C
	db $B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C,$B8,$10,$B9,$10,$BA,$10,$BB,$10
	db $44,$12,$45,$12,$46,$12,$47,$12,$44,$12,$45,$12,$46,$12,$47,$12
	db $44,$12,$45,$12,$46,$12,$47,$12,$44,$12,$45,$12,$46,$12,$47,$12
	db $48,$16,$49,$16,$4A,$16,$4B,$16,$4C,$16,$4D,$16,$4E,$16,$4F,$16
	db $58,$16,$58,$16,$59,$16,$59,$16,$44,$12,$45,$12,$46,$12,$47,$12
	db $D5,$14,$B2,$14,$D5,$14,$B2,$14,$B2,$14,$B2,$14,$B2,$14,$B2,$14
	db $2E,$14,$2F,$14,$2E,$14,$2F,$14,$7A,$14,$7B,$14,$7A,$14,$7B,$14
	db $7C,$14,$7D,$14,$7C,$14,$7D,$14,$42,$14,$44,$14,$43,$14,$45,$14
	db $05,$18,$06,$18,$07,$18,$08,$18,$12,$14,$12,$14,$7E,$16,$7E,$16
	db $7E,$16,$7E,$16,$7E,$16,$7E,$16,$7E,$16,$7E,$16,$15,$14,$15,$14
	db $12,$14,$16,$14,$7E,$16,$0C,$14,$C4,$1C,$C4,$1C,$C6,$1C,$C6,$1C
	db $7E,$16,$0C,$14,$7E,$16,$0C,$14,$7E,$16,$0C,$14,$15,$14,$17,$14
	db $12,$10,$16,$10,$15,$10,$17,$10,$FD,$18,$FD,$18,$1F,$18,$1F,$18
	db $FD,$18,$1E,$18,$1F,$18,$24,$18,$37,$14,$36,$14,$07,$14,$37,$14
	db $36,$14,$36,$14,$36,$14,$36,$14,$3E,$18,$3E,$18,$3F,$18,$3F,$18
	db $3C,$18,$FD,$18,$3C,$18,$FD,$18,$05,$18,$06,$18,$6B,$1C,$6F,$1C
	db $6C,$1C,$70,$1C,$6D,$1C,$71,$1C,$6E,$1C,$72,$1C,$07,$18,$08,$18
	db $73,$1C,$73,$1C,$74,$1C,$74,$1C,$75,$1C,$78,$1C,$76,$1C,$79,$1C
	db $FC,$18,$FC,$18,$FC,$18,$FC,$18,$FD,$18,$FD,$18,$FD,$18,$FD,$18
	db $FE,$18,$FE,$18,$FE,$18,$FE,$18,$A8,$18,$A8,$18,$A8,$18,$A8,$18
	db $10,$14,$12,$14,$0E,$14,$7E,$16,$0E,$14,$7E,$16,$0E,$14,$7E,$16
	db $0E,$14,$7E,$16,$11,$14,$15,$14,$10,$14,$12,$14,$11,$14,$15,$14
	db $10,$14,$16,$14,$0E,$14,$0C,$14,$0E,$14,$0C,$14,$11,$14,$17,$14
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$40,$1E,$50,$1E,$41,$1E,$51,$1E
	db $42,$1E,$52,$1E,$43,$1E,$53,$1E,$40,$1E,$50,$1E,$41,$1E,$51,$1E
	db $42,$1E,$52,$1E,$43,$1E,$53,$1E,$40,$1E,$50,$1E,$41,$1E,$51,$1E
	db $42,$1E,$52,$1E,$43,$1E,$53,$1E,$40,$1E,$50,$1E,$41,$1E,$51,$1E
	db $42,$1E,$52,$1E,$43,$1E,$53,$1E,$76,$1C,$77,$1C,$7A,$1C,$7B,$1C
	db $76,$1C,$77,$1C,$7A,$1C,$7B,$1C,$74,$1C,$75,$1C,$78,$1C,$79,$1C
	db $70,$1C,$71,$1C,$70,$1C,$71,$1C,$72,$1C,$73,$1C,$72,$1C,$73,$1C
	db $60,$1E,$60,$1E,$61,$1E,$61,$1E,$62,$1E,$62,$1E,$63,$1E,$63,$1E
	db $B8,$18,$B9,$18,$BA,$18,$BB,$18,$40,$1E,$50,$1E,$41,$1E,$51,$1E
	db $42,$1E,$52,$1E,$43,$1E,$53,$1E,$76,$18,$77,$18,$7A,$18,$7B,$18
	db $60,$1C,$62,$1C,$61,$1C,$63,$1C,$05,$1C,$06,$1C,$07,$1C,$08,$1C
	db $64,$1C,$66,$1C,$65,$1C,$67,$1C,$4B,$1C,$4B,$1C,$4B,$1C,$4B,$1C
	db $05,$1C,$06,$1C,$4D,$1C,$4C,$1C,$4C,$1C,$4D,$1C,$4B,$1C,$4B,$1C
	db $4B,$1C,$4B,$1C,$4F,$1C,$4E,$1C,$4E,$1C,$4F,$1C,$07,$1C,$08,$1C
	db $52,$18,$62,$18,$50,$18,$60,$18,$05,$18,$06,$18,$07,$18,$63,$18
	db $05,$18,$66,$18,$07,$18,$08,$18,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$00,$E6,$0C,$FF,$00,$E7,$0C
	db $B3,$1C,$CD,$1C,$B3,$1C,$CF,$1C,$CC,$1C,$CD,$1C,$CE,$1C,$CF,$1C
	db $FC,$1C,$CD,$1C,$FC,$1C,$CF,$1C,$C5,$1C,$FE,$1C,$C5,$1C,$FE,$1C
	db $C7,$0C,$FE,$0C,$C7,$0C,$FE,$0C,$D4,$1C,$FE,$1C,$D4,$1C,$FE,$1C
	db $FE,$0C,$FE,$0C,$FE,$0C,$FE,$0C,$FC,$1C,$FE,$1C,$FC,$1C,$FE,$1C
	db $A6,$0C,$AE,$0C,$A7,$0C,$AF,$0C,$AC,$0C,$AE,$0C,$AD,$0C,$AF,$0C
	db $18,$1C,$19,$1C,$1A,$1C,$1B,$1C,$67,$18,$69,$18,$68,$18,$6A,$18
	db $51,$18,$61,$18,$51,$18,$61,$18,$57,$18,$57,$18,$58,$18,$58,$18
	db $8C,$1C,$9C,$1C,$8F,$1C,$9F,$1C,$57,$18,$64,$18,$58,$18,$65,$18
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$A4,$1C,$A5,$1C,$A6,$1C,$A7,$1C
	db $EC,$1C,$ED,$1C,$EE,$1C,$EF,$1C,$E4,$1C,$E4,$1C,$E5,$1C,$E5,$1C
	db $53,$18,$54,$18,$55,$18,$56,$18,$D7,$1C,$06,$1C,$D7,$1C,$08,$1C
	db $E0,$0C,$E1,$0C,$E2,$0C,$E3,$0C,$05,$1C,$06,$1C,$07,$1C,$08,$1C
	db $53,$1C,$55,$1C,$54,$1C,$56,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $70,$12,$72,$12,$71,$12,$73,$12,$1D,$16,$1D,$16,$1D,$16,$1D,$16
	db $1E,$16,$1E,$16,$7A,$16,$7A,$16,$7A,$16,$0C,$16,$0F,$16,$1D,$16
	db $1F,$16,$7A,$16,$FC,$10,$1F,$16,$FF,$00,$FF,$00,$FF,$00,$FF,$00
	db $FF,$00,$FF,$00,$FF,$00,$FF,$00,$FF,$00,$FF,$00,$FF,$00,$FF,$00
	db $FF,$00,$FF,$00,$FF,$00,$FF,$00,$FF,$00,$FF,$00,$FF,$00,$FF,$00
	db $FF,$00,$FF,$00,$FF,$00,$FF,$00,$FF,$00,$FF,$00,$FF,$00,$FF,$00
	db $FF,$00,$FF,$00,$FF,$00,$FF,$00,$FF,$00,$FF,$00,$FF,$00,$FF,$00
	db $FF,$00,$FF,$00,$FF,$00,$FF,$00,$FF,$00,$FF,$00,$FF,$00,$FF,$00
	db $FF,$00,$FF,$00,$FF,$00,$FF,$00,$FF,$00,$FF,$00,$FF,$00,$FF,$00
	db $FF,$00,$FF,$00,$FF,$00,$FF,$00,$5C,$1A,$5E,$1A,$5D,$1A,$5F,$1A
	db $5C,$1A,$5E,$1A,$5D,$1A,$6E,$1A,$5C,$1A,$66,$1A,$5D,$1A,$67,$1A
	db $5C,$1A,$6F,$1A,$5D,$1A,$5F,$1A,$5C,$1A,$5E,$1A,$6A,$1A,$6B,$1A
	db $6C,$1A,$6D,$1A,$5D,$1A,$5F,$1A,$5C,$1A,$5E,$1A,$76,$1A,$5F,$1A
	db $68,$1A,$5E,$1A,$69,$1A,$5F,$1A,$3D,$1A,$5E,$1A,$5D,$1A,$5F,$1A
	db $5C,$1A,$66,$1A,$6A,$1A,$2E,$1A,$6C,$1A,$2F,$1A,$5D,$1A,$67,$1A
	db $68,$1A,$5E,$1A,$3E,$1A,$6B,$1A,$3F,$1A,$6D,$1A,$69,$1A,$5F,$1A
	db $59,$18,$77,$18,$14,$18,$5C,$18,$13,$18,$5A,$18,$59,$18,$77,$18

;--------------------------------------------------------------------

DATA_25D510:
	db $2C,$55,$98,$E2,$2E,$55,$AD,$E2

;--------------------------------------------------------------------

	%ROUTINE_SMB3_InitializeTileset09Level_Desert(NULLROM)				; $25D518

;--------------------------------------------------------------------

DATA_25D538:
	db $00,$0F,$1E,$2D,$3C,$4B,$5A,$69

SMB3_ProcessDesertResizableObjects:
.Main:
;$25D540
	LDA.b $0E
	AND.b #$E0
	LSR
	LSR
	LSR
	LSR
	LSR
	TAX
	LDA.w $0706
	LSR
	LSR
	LSR
	LSR
	CLC
	ADC.l DATA_25D538,x
	TAX
	DEX
	TXA
	JSL.l SMB3_ExecutePtr_Long

DATA_25D55D:
	dl CODE_25D6A3
	dl CODE_25D6C8
	dl CODE_25D71D
	dl CODE_25D784
	dl CODE_25D7CF
	dl CODE_25D80C
	dl CODE_25D831
	dl CODE_25D886
	dl CODE_25D8ED
	dl CODE_25D938
	dl CODE_25D973
	dl CODE_25D9D6
	dl CODE_25DA35
	dl CODE_25DA96
	dl CODE_25DAF7
	dl CODE_23AA8A
	dl CODE_23AA8A
	dl CODE_23AA8A
	dl CODE_23AA8A
	dl CODE_23AA8A
	dl CODE_23AA8A
	dl CODE_23AA8A
	dl CODE_23AA8A
	dl CODE_23A6C1
	dl CODE_23A6C1
	dl CODE_23A6C1
	dl CODE_23A728
	dl CODE_23A728
	dl CODE_23A81D
	dl CODE_23A81D
	dl CODE_23A8AE
	dl CODE_23A8AE
	dl CODE_23AE7B
	dl CODE_23AEC7
	dl CODE_23AEC7
	dl CODE_23AF2A
	dl CODE_23AF2A
	dl CODE_23AF2A
	dl CODE_23AF2A
	dl CODE_23AF2A
	dl CODE_23AF2A
	dl CODE_23AF2A
	dl CODE_23AF2A
	dl CODE_23AABC
	dl CODE_23A790
	dl CODE_25DB19
	dl CODE_25DB40
	dl CODE_25DB40
	dl CODE_25DB40
	dl CODE_25DB40
	dl CODE_23B028
	dl CODE_25DB63
	dl CODE_25DB69
	dl CODE_25DB8B
	dl CODE_25DBA0
	dl CODE_25DC4B
	dl CODE_25DC67
	dl CODE_25DC7C
	dl CODE_23A91B
	dl CODE_2A8674
	dl CODE_2A8483
	dl CODE_2AB753

;--------------------------------------------------------------------

CODE_25D617:
	LDA.b $0E
	AND.b #$E0
	LSR
	CLC
	ADC.w $0706
	TAX
	JSL.l SMB3_ExecutePtr_Long

DATA_25D625:
	dl CODE_25DC98
	dl CODE_25DD15
	dl CODE_25DDB2
	dl CODE_25DE54
	dl CODE_25DEFE
	dl CODE_25DF60
	dl CODE_25DFAB
	dl CODE_25DFBE
	dl CODE_25DFBE
	dl CODE_25DFD2
	dl CODE_25DF5A
	dl CODE_23A699
	dl CODE_25DF5B
	dl $000000
	dl $000000
	dl $000000
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23A943

;--------------------------------------------------------------------

CODE_25D6A3:
	LDA.w $0706
	AND.b #$0F
	TAX
	LDY.w $0700
CODE_25D6AC:
	LDA.b #$9C
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	LDA.b #$9D
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	DEX
	BPL.b CODE_25D6AC
	RTL

;--------------------------------------------------------------------

DATA_25D6C0:
	db $98,$99,$99,$9A,$84,$86,$86,$87

CODE_25D6C8:
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDX.b #$00
	STX.b $03
	LDA.w $0706
	AND.b #$0F
	STA.b $04
CODE_25D6DB:
	LDY.w $0700
	LDA.b $04
	STA.b $05
CODE_25D6E2:
	LDA.l DATA_25D6C0,x
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	INX
	CPX.b #$04
	BEQ.b CODE_25D6F5
	CPX.b #$08
	BNE.b CODE_25D6E2
CODE_25D6F5:
	LDX.b $03
	DEC.b $05
	BPL.b CODE_25D6E2
	JSR.w CODE_25E03F
	LDA.b $03
	CLC
	ADC.b #$04
	STA.b $03
	TAX
	CPX.b #$08
	BNE.b CODE_25D6DB
	RTL

;--------------------------------------------------------------------

DATA_25D70B:
	db $98,$99,$99,$99,$99,$9A,$81,$82
	db $82,$82,$82,$83,$84,$86,$86,$86
	db $86,$87

CODE_25D71D:
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDX.b #$00
	STX.b $03
	LDA.w $0706
	AND.b #$0F
	STA.b $04
CODE_25D730:
	LDY.w $0700
	LDA.b $04
	STA.b $05
CODE_25D737:
	LDA.l DATA_25D70B,x
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	INX
	CPX.b #$06
	BEQ.b CODE_25D74E
	CPX.b #$0C
	BEQ.b CODE_25D74E
	CPX.b #$12
	BNE.b CODE_25D737
CODE_25D74E:
	LDX.b $03
	DEC.b $05
	BPL.b CODE_25D737
	JSR.w CODE_25E03F
	LDA.b $03
	CLC
	ADC.b #$06
	STA.b $03
	TAX
	CPX.b #$12
	BNE.b CODE_25D730
	RTL

;--------------------------------------------------------------------

DATA_25D764:
	db $98,$99,$99,$99,$99,$99,$99,$9A
	db $81,$82,$82,$82,$82,$82,$82,$83
	db $81,$82,$82,$82,$82,$82,$82,$83
	db $84,$86,$86,$86,$86,$86,$86,$87

CODE_25D784:
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDX.b #$00
	STX.b $03
	LDA.w $0706
	AND.b #$0F
	STA.b $04
CODE_25D797:
	LDY.w $0700
	LDA.b $04
	STA.b $05
CODE_25D79E:
	LDA.l DATA_25D764,x
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	INX
	CPX.b #$08
	BEQ.b CODE_25D7B9
	CPX.b #$10
	BEQ.b CODE_25D7B9
	CPX.b #$18
	BEQ.b CODE_25D7B9
	CPX.b #$20
	BNE.b CODE_25D79E
CODE_25D7B9:
	LDX.b $03
	DEC.b $05
	BPL.b CODE_25D79E
	JSR.w CODE_25E03F
	LDA.b $03
	CLC
	ADC.b #$08
	STA.b $03
	TAX
	CPX.b #$20
	BNE.b CODE_25D797
	RTL

;--------------------------------------------------------------------

CODE_25D7CF:
	LDA.w $0706
	AND.b #$0F
	TAX
	LDY.w $0700
CODE_25D7D8:
	LDA.b #$9B
	STA.b [$2E],y
	TYA
	CLC
	ADC.b #$10
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	LDA.b #$88
	STA.b [$2E],y
	DEY
	TYA
	AND.b #$0F
	CMP.b #$0F
	BNE.b CODE_25D805
	LDA.b $2E
	SEC
	SBC.b #$B0
	STA.b $2E
	LDA.b $2F
	SBC.b #$01
	STA.b $2F
	INY
	TYA
	ORA.b #$0F
	TAY
CODE_25D805:
	STY.w $0700
	DEX
	BPL.b CODE_25D7D8
	RTS					; Crash: This should be an RTL!

;--------------------------------------------------------------------

CODE_25D80C:
	LDA.w $0706
	AND.b #$0F
	TAX
	LDY.w $0700
CODE_25D815:
	LDA.b #$5B
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	LDA.b #$5D
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	DEX
	BPL.b CODE_25D815
	RTL

;--------------------------------------------------------------------

DATA_25D829:
	db $55,$56,$56,$57,$5B,$5C,$5C,$5D

CODE_25D831:
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDX.b #$00
	STX.b $03
	LDA.w $0706
	AND.b #$0F
	STA.b $04
CODE_25D844:
	LDY.w $0700
	LDA.b $04
	STA.b $05
CODE_25D84B:
	LDA.l DATA_25D829,x
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	INX
	CPX.b #$04
	BEQ.b CODE_25D85E
	CPX.b #$08
	BNE.b CODE_25D84B
CODE_25D85E:
	LDX.b $03
	DEC.b $05
	BPL.b CODE_25D84B
	JSR.w CODE_25E03F
	LDA.b $03
	CLC
	ADC.b #$04
	STA.b $03
	TAX
	CPX.b #$08
	BNE.b CODE_25D844
	RTL

;--------------------------------------------------------------------

DATA_25D874:
	db $55,$56,$56,$56,$56,$57,$58,$59
	db $59,$59,$59,$5A,$5B,$5C,$5C,$5C
	db $5C,$5D

CODE_25D886:
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDX.b #$00
	STX.b $03
	LDA.w $0706
	AND.b #$0F
	STA.b $04
CODE_25D899:
	LDY.w $0700
	LDA.b $04
	STA.b $05
CODE_25D8A0:
	LDA.l DATA_25D874,x
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	INX
	CPX.b #$06
	BEQ.b CODE_25D8B7
	CPX.b #$0C
	BEQ.b CODE_25D8B7
	CPX.b #$12
	BNE.b CODE_25D8A0
CODE_25D8B7:
	LDX.b $03
	DEC.b $05
	BPL.b CODE_25D8A0
	JSR.w CODE_25E03F
	LDA.b $03
	CLC
	ADC.b #$06
	STA.b $03
	TAX
	CPX.b #$12
	BNE.b CODE_25D899
	RTL

;--------------------------------------------------------------------

DATA_25D8CD:
	db $55,$56,$56,$56,$56,$56,$56,$57
	db $58,$59,$59,$59,$59,$59,$59,$5A
	db $58,$59,$59,$59,$59,$59,$59,$5A
	db $5B,$5C,$5C,$5C,$5C,$5C,$5C,$5D

CODE_25D8ED:
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDX.b #$00
	STX.b $03
	LDA.w $0706
	AND.b #$0F
	STA.b $04
CODE_25D900:
	LDY.w $0700
	LDA.b $04
	STA.b $05
CODE_25D907:
	LDA.l DATA_25D8CD,x
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	INX
	CPX.b #$08
	BEQ.b CODE_25D922
	CPX.b #$10
	BEQ.b CODE_25D922
	CPX.b #$18
	BEQ.b CODE_25D922
	CPX.b #$20
	BNE.b CODE_25D907
CODE_25D922:
	LDX.b $03
	DEC.b $05
	BPL.b CODE_25D907
	JSR.w CODE_25E03F
	LDA.b $03
	CLC
	ADC.b #$08
	STA.b $03
	TAX
	CPX.b #$20
	BNE.b CODE_25D900
	RTL

;--------------------------------------------------------------------

CODE_25D938:
	LDA.w $0706
	AND.b #$0F
	TAX
	LDY.w $0700
CODE_25D941:
	LDA.b #$57
	STA.b [$2E],y
	TYA
	CLC
	ADC.b #$10
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	LDA.b #$5D
	STA.b [$2E],y
	DEY
	TYA
	AND.b #$0F
	BNE.b CODE_25D96C
	LDA.b $2E
	SEC
	SBC.b #$B0
	STA.b $2E
	LDA.b $2F
	SBC.b #$01
	STA.b $2F
	INY
	TYA
	ORA.b #$0F
	TAY
CODE_25D96C:
	STY.w $0700
	DEX
	BPL.b CODE_25D941
	RTL

;--------------------------------------------------------------------

CODE_25D973:
	JSR.w CODE_25E01A
	LDA.w $0700
	STA.b $07
	LDA.b #$00
	STA.b $08
	LDA.w $0706
	AND.b #$0F
	STA.b $03
CODE_25D986:
	LDX.b $02
	LDY.w $0700
	JSR.w CODE_25D6AC			; Crash: This must be a JSL!
	LDA.b $00
	STA.b $2E
	LDA.b $01
	STA.b $2F
	LDA.b $07
	CLC
	ADC.b #$10
	STA.b $07
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	STA.b $01
	INC.b $08
	LDA.b $08
	AND.b #$01
	BEQ.b CODE_25D9CE
	DEY
	TYA
	AND.b #$0F
	CMP.b #$0F
	BNE.b CODE_25D9CE
	LDA.b $2E
	SEC
	SBC.b #$B0
	STA.b $2E
	STA.b $00
	LDA.b $2F
	SBC.b #$01
	STA.b $2F
	STA.b $01
	INY
	TYA
	AND.b #$F0
	ORA.b #$0F
	TAY
CODE_25D9CE:
	STY.w $0700
	DEC.b $03
	BPL.b CODE_25D986
	RTL

;--------------------------------------------------------------------

CODE_25D9D6:
	JSR.w CODE_25E036
	LDA.w $0700
	STA.b $07
	LDA.b #$00
	STA.b $08
	LDA.w $0706
	AND.b #$0F
	STA.b $02
CODE_25D9E9:
	LDX.b #$00
	STX.b $03
	JSR.w CODE_25D6DB			; Crash: This must be a JSL!
	LDA.b $00
	STA.b $2E
	LDA.b $01
	STA.b $2F
	LDA.b $07
	CLC
	ADC.b #$20
	STA.b $07
	STA.w $0700
	INC.b $08
	LDA.b $08
	AND.b #$01
	BEQ.b CODE_25DA30
	LDY.w $0700
	DEY
	DEY
	TYA
	AND.b #$0F
	CMP.b #$0E
	BCC.b CODE_25DA2D
	STA.b $06
	LDA.b $2E
	SEC
	SBC.b #$B0
	STA.b $2E
	LDA.b $2F
	SBC.b #$01
	STA.b $2F
	INY
	INY
	TYA
	AND.b #$F0
	ORA.b $06
	TAY
CODE_25DA2D:
	STY.w $0700
CODE_25DA30:
	DEC.b $02
	BPL.b CODE_25D9E9
	RTL

;--------------------------------------------------------------------

CODE_25DA35:
	JSR.w CODE_25E036
	LDA.w $0700
	STA.b $07
	LDA.b #$00
	STA.b $08
	LDA.w $0706
	AND.b #$0F
	STA.b $02
CODE_25DA48:
	LDX.b #$00
	STX.b $03
	JSR.w CODE_25D730			; Crash: This must be a JSL!
	LDA.b $00
	STA.b $2E
	LDA.b $01
	STA.b $2F
	LDA.b $07
	CLC
	ADC.b #$30
	STA.b $07
	STA.w $0700
	INC.b $08
	LDA.b $08
	AND.b #$01
	BEQ.b CODE_25DA91
	LDA.w $0700
	SEC
	SBC.b #$03
	TAY
	AND.b #$0F
	CMP.b #$0D
	BCC.b CODE_25DA8E
	STA.b $06
	LDA.b $2E
	SEC
	SBC.b #$B0
	STA.b $2E
	LDA.b $2F
	SBC.b #$01
	STA.b $2F
	INY
	INY
	INY
	TYA
	AND.b #$F0
	ORA.b $06
	TAY
CODE_25DA8E:
	STY.w $0700
CODE_25DA91:
	DEC.b $02
	BPL.b CODE_25DA48
	RTL

;--------------------------------------------------------------------

CODE_25DA96:
	JSR.w CODE_25E036
	LDA.w $0700
	STA.b $07
	LDA.b #$00
	STA.b $08
	LDA.w $0706
	AND.b #$0F
	STA.b $02
CODE_25DAA9:
	LDX.b #$00
	STX.b $03
	JSR.w CODE_25D797			; Crash: This must be a JSL!
	LDA.b $00
	STA.b $2E
	LDA.b $01
	STA.b $2F
	LDA.b $07
	CLC
	ADC.b #$40
	STA.b $07
	STA.w $0700
	INC.b $08
	LDA.b $08
	AND.b #$01
	BEQ.b CODE_25DAF2
	LDA.w $0700
	SEC
	SBC.b #$04
	TAY
	AND.b #$0F
	CMP.b #$0E
	BCC.b CODE_25DAEF
	STA.b $06
	LDA.b $2E
	SEC
	SBC.b #$B0
	STA.b $2E
	LDA.b $2F
	SBC.b #$01
	STA.b $2F
	TYA
	CLC
	ADC.b #$04
	AND.b #$F0
	ORA.b $06
	TAY
CODE_25DAEF:
	STY.w $0700
CODE_25DAF2:
	DEC.b $02
	BPL.b CODE_25DAA9
	RTL

;--------------------------------------------------------------------

CODE_25DAF7:
	LDA.w $0706
	AND.b #$0F
	TAX
	LDY.w $0700
	LDA.b #$08
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	DEX
CODE_25DB09:
	LDA.b #$33
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	DEX
	BNE.b CODE_25DB09
	LDA.b #$07
	STA.b [$2E],y
	RTL

;--------------------------------------------------------------------

CODE_25DB19:
	LDA.w $0706
	AND.b #$0F
	TAX
	LDY.w $0700
	LDA.b #$54
	STA.b [$2E],y
	JMP.w CODE_25DB2D

CODE_25DB29:
	LDA.b #$51
	STA.b [$2E],y
CODE_25DB2D:
	TYA
	CLC
	ADC.b #$10
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	DEX
	BPL.b CODE_25DB29
	RTL

;--------------------------------------------------------------------

DATA_25DB3C:
	db $93,$7E,$7D,$7F

CODE_25DB40:
	LDA.w $0706
	PHA
	SEC
	SBC.b #$20
	LSR
	LSR
	LSR
	LSR
	TAX
	PLA
	AND.b #$0F
	STA.b $02
	LDY.w $0700
CODE_25DB54:
	LDA.l DATA_25DB3C,x
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	DEC.b $02
	BPL.b CODE_25DB54
	RTL

;--------------------------------------------------------------------

CODE_25DB63:
	LDX.b #$00
	BEQ.b CODE_25DB6B

DATA_25DB67:
	db $52,$53

CODE_25DB69:
	LDX.b #$01
CODE_25DB6B:
	LDA.w $0706
	AND.b #$0F
	STA.b $02
	LDY.w $0700
CODE_25DB75:
	LDA.l DATA_25DB67,x
	STA.b [$2E],y
	TYA
	CLC
	ADC.b #$10
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	DEC.b $02
	BPL.b CODE_25DB75
	RTL

;--------------------------------------------------------------------

CODE_25DB8B:
	LDA.w $0706
	AND.b #$0F
	TAX
	LDY.w $0700
CODE_25DB94:
	LDA.b #$80
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	DEX
	BPL.b CODE_25DB94
	RTL

;--------------------------------------------------------------------

CODE_25DBA0:
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDX.w $0706
	INX
	TXA
	AND.b #$0F
	ASL
	ASL
	ASL
	ASL
	STA.b $02
	LDY.w $0700
	LDX.b #$04
CODE_25DBBA:
	LDA.b $02
	STA.b $03
CODE_25DBBE:
	LDA.b #$E4
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	DEC.b $03
	LDA.b $03
	CMP.b #$FF
	BNE.b CODE_25DBBE
	LDA.b $00
	STA.b $2E
	LDA.b $01
	STA.b $2F
	LDA.w $0700
	CLC
	ADC.b #$40
	STA.w $0700
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	STA.b $01
	DEX
	BPL.b CODE_25DBBA
	JSL.l CODE_209B2A
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDA.w $0706
	AND.b #$0F
	STA.b $02
	LDY.w $0700
CODE_25DC01:
	LDX.b #$10
CODE_25DC03:
	LDA.b [$2E],y
	CMP.b #$E4
	BNE.b CODE_25DC0E
	LDA.b #$E3
	JMP.w CODE_25DC10

CODE_25DC0E:
	LDA.b #$E5
CODE_25DC10:
	STA.b [$2E],y
	TYA
	CLC
	ADC.b #$10
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	DEX
	BPL.b CODE_25DC03
	LDA.b $00
	STA.b $2E
	LDA.b $01
	STA.b $2F
	LDA.w $0700
	EOR.b #$08
	STA.w $0700
	TAY
	AND.b #$08
	BNE.b CODE_25DC01
	LDA.b $2E
	CLC
	ADC.b #$B0
	STA.b $2E
	STA.b $00
	LDA.b $2F
	ADC.b #$01
	STA.b $2F
	STA.b $01
	DEC.b $02
	BPL.b CODE_25DC01
	RTL

;--------------------------------------------------------------------

CODE_25DC4B:
	LDA.w $0706
	AND.b #$0F
	TAX
	LDY.w $0700
CODE_25DC54:
	LDA.b #$80
	STA.b [$2E],y
	TYA
	CLC
	ADC.b #$10
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	DEX
	BPL.b CODE_25DC54
	RTL

;--------------------------------------------------------------------

CODE_25DC67:
	LDA.w $0706
	AND.b #$0F
	TAX
	LDY.w $0700
CODE_25DC70:
	LDA.b #$80
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	DEX
	BPL.b CODE_25DC70
	RTL

;--------------------------------------------------------------------

CODE_25DC7C:
	LDA.w $0706
	AND.b #$0F
	TAX
	LDY.w $0700
CODE_25DC85:
	LDA.b #$F4
	STA.b [$2E],y
	TYA
	CLC
	ADC.b #$10
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	DEX
	BPL.b CODE_25DC85
	RTL

;--------------------------------------------------------------------

CODE_25DC98:
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDX.b #$00
	STX.b $04
CODE_25DCA4:
	LDY.w $0700
	LDA.b $04
	STA.b $05
CODE_25DCAB:
	LDA.b #$9C
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	LDA.b #$9D
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	DEC.b $05
	BPL.b CODE_25DCAB
	LDA.b $00
	STA.b $2E
	LDA.b $01
	STA.b $2F
	LDA.w $0700
	CLC
	ADC.b #$10
	STA.w $0700
	TAY
	BCC.b CODE_25DCE2
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	STA.b $01
	LDA.b $0E
	CLC
	ADC.b #$10
	STA.b $0E
CODE_25DCE2:
	DEY
	TYA
	AND.b #$0F
	CMP.b #$0F
	BNE.b CODE_25DD02
	LDA.b $2E
	SEC
	SBC.b #$B0
	STA.b $2E
	STA.b $00
	LDA.b $2F
	SBC.b #$01
	STA.b $2F
	STA.b $01
	INY
	TYA
	AND.b #$F0
	ORA.b #$0F
	TAY
CODE_25DD02:
	STY.w $0700
	INC.b $04
	LDA.b $0E
	AND.b #$10
	BEQ.b CODE_25DCA4
	LDA.w $0700
	CMP.b #$A0
	BCC.b CODE_25DCA4
	RTL

;--------------------------------------------------------------------

CODE_25DD15:
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDX.b #$00
	STX.b $03
	STX.b $04
CODE_25DD23:
	LDY.w $0700
	LDA.b $04
	STA.b $05
CODE_25DD2A:
	LDA.l DATA_25D6C0,x
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	INX
	CPX.b #$04
	BEQ.b CODE_25DD3D
	CPX.b #$08
	BNE.b CODE_25DD2A
CODE_25DD3D:
	LDX.b $03
	DEC.b $05
	BPL.b CODE_25DD2A
	LDA.b $00
	STA.b $2E
	LDA.b $01
	STA.b $2F
	LDA.w $0700
	CLC
	ADC.b #$10
	STA.w $0700
	BCC.b CODE_25DD65
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	STA.b $01
	LDA.b $0E
	CLC
	ADC.b #$10
	STA.b $0E
CODE_25DD65:
	LDA.b $03
	CLC
	ADC.b #$04
	STA.b $03
	TAX
	CPX.b #$08
	BNE.b CODE_25DD23
	LDY.w $0700
	DEY
	DEY
	TYA
	AND.b #$0F
	CMP.b #$0E
	BCC.b CODE_25DD98
	STA.b $06
	LDA.b $2E
	SEC
	SBC.b #$B0
	STA.b $2E
	STA.b $00
	LDA.b $2F
	SBC.b #$01
	STA.b $2F
	STA.b $01
	INY
	INY
	TYA
	AND.b #$F0
	ORA.b $06
	TAY
CODE_25DD98:
	STY.w $0700
	LDX.b #$00
	STX.b $03
	INC.b $04
	LDA.b $0E
	AND.b #$10
	BEQ.b CODE_25DDAF
	LDA.w $0700
	CMP.b #$90
	BCC.b CODE_25DDAF
	RTL

CODE_25DDAF:
	JMP.w CODE_25DD23

;--------------------------------------------------------------------

CODE_25DDB2:
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDX.b #$00
	STX.b $03
	STX.b $04
CODE_25DDC0:
	LDY.w $0700
	LDA.b $04
	STA.b $05
CODE_25DDC7:
	LDA.l DATA_25D70B,x
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	INX
	CPX.b #$06
	BEQ.b CODE_25DDDE
	CPX.b #$0C
	BEQ.b CODE_25DDDE
	CPX.b #$12
	BNE.b CODE_25DDC7
CODE_25DDDE:
	LDX.b $03
	DEC.b $05
	BPL.b CODE_25DDC7
	LDA.b $00
	STA.b $2E
	LDA.b $01
	STA.b $2F
	LDA.w $0700
	CLC
	ADC.b #$10
	STA.w $0700
	BCC.b CODE_25DE06
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	STA.b $01
	LDA.b $0E
	CLC
	ADC.b #$10
	STA.b $0E
CODE_25DE06:
	LDA.b $03
	CLC
	ADC.b #$06
	STA.b $03
	TAX
	CPX.b #$12
	BNE.b CODE_25DDC0
	LDA.w $0700
	SEC
	SBC.b #$03
	AND.b #$0F
	CMP.b #$0D
	BCC.b CODE_25DE3A
	STA.b $06
	LDA.b $2E
	SEC
	SBC.b #$B0
	STA.b $2E
	STA.b $00
	LDA.b $2F
	SBC.b #$01
	STA.b $2F
	STA.b $01
	INY
	INY
	INY
	TYA
	AND.b #$F0
	ORA.b $06
	TAY
CODE_25DE3A:
	STY.w $0700
	LDX.b #$00
	STX.b $03
	INC.b $04
	LDA.b $0E
	AND.b #$10
	BEQ.b CODE_25DE51
	LDA.w $0700
	CMP.b #$80
	BCC.b CODE_25DE51
	RTL

CODE_25DE51:
	JMP.w CODE_25DDC0

;--------------------------------------------------------------------

CODE_25DE54:
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDX.b #$00
	STX.b $03
	STX.b $04
CODE_25DE62:
	LDY.w $0700
	LDA.b $04
	STA.b $05
CODE_25DE69:
	LDA.l DATA_25D764,x
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	INX
	CPX.b #$08
	BEQ.b CODE_25DE84
	CPX.b #$10
	BEQ.b CODE_25DE84
	CPX.b #$18
	BEQ.b CODE_25DE84
	CPX.b #$20
	BNE.b CODE_25DE69
CODE_25DE84:
	LDX.b $03
	DEC.b $05
	BPL.b CODE_25DE69
	LDA.b $00
	STA.b $2E
	LDA.b $01
	STA.b $2F
	LDA.w $0700
	CLC
	ADC.b #$10
	STA.w $0700
	BCC.b CODE_25DEAC
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	STA.b $01
	LDA.b $0E
	CLC
	ADC.b #$10
	STA.b $0E
CODE_25DEAC:
	LDA.b $03
	CLC
	ADC.b #$08
	STA.b $03
	TAX
	CPX.b #$20
	BNE.b CODE_25DE62
	LDA.w $0700
	SEC
	SBC.b #$04
	TAY
	AND.b #$0F
	CMP.b #$0C
	BCC.b CODE_25DEE1
	STA.b $06
	LDA.b $2E
	SEC
	SBC.b #$B0
	STA.b $2E
	STA.b $00
	LDA.b $2F
	SBC.b #$01
	STA.b $2F
	STA.b $01
	TYA
	CLC
	ADC.b #$04
	AND.b #$F0
	ORA.b $06
	TAY
CODE_25DEE1:
	STY.w $0700
	LDX.b #$00
	STX.b $03
	INC.b $04
	LDA.b $0E
	AND.b #$10
	BEQ.b CODE_25DEF8
	LDA.w $0700
	CMP.b #$70
	BCC.b CODE_25DEF8
	RTL

CODE_25DEF8:
	JMP.w CODE_25DE62

;--------------------------------------------------------------------

DATA_25DEFB:
	db $91,$90,$8F

CODE_25DEFE:
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDX.b #$02
	LDY.w $0700
CODE_25DF0B:
	LDA.l DATA_25DEFB,x
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	DEX
	BPL.b CODE_25DF0B
	LDA.b $00
	STA.b $2E
	LDA.b $01
	STA.b $2F
	LDA.w $0700
	CLC
	ADC.b #$10
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	INY
	TYA
	AND.b #$0F
	BNE.b CODE_25DF45
	LDA.b $2E
	CLC
	ADC.b #$B0
	STA.b $2E
	LDA.b $2F
	ADC.b #$01
	STA.b $2F
	DEY
	TYA
	AND.b #$F0
	TAY
CODE_25DF45:
	LDX.b #$02
CODE_25DF47:
	LDA.b #$92
	STA.b [$2E],y
	TYA
	CLC
	ADC.b #$10
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	DEX
	BPL.b CODE_25DF47
	RTL

;--------------------------------------------------------------------

CODE_25DF5A:
	RTL

;--------------------------------------------------------------------

CODE_25DF5B:
	RTL

;--------------------------------------------------------------------

CODE_25DF5C:
	RTL

;--------------------------------------------------------------------

DATA_25DF5D:
	db $E6,$79,$E6

CODE_25DF60:
	LDY.w $0700
	LDA.b #$ED
	STA.b [$2E],y
	TYA
	CLC
	ADC.b #$10
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	LDA.b #$EE
	STA.b [$2E],y
	TYA
	CLC
	ADC.b #$10
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	DEY
	TYA
	AND.b #$0F
	CMP.b #$0F
	BNE.b CODE_25DF9B
	LDA.b $2E
	SEC
	SBC.b #$B0
	STA.b $2E
	LDA.b $2F
	SBC.b #$01
	STA.b $2F
	INY
	TYA
	ORA.b #$0F
	TAY
CODE_25DF9B:
	LDX.b #$02
CODE_25DF9D:
	LDA.l DATA_25DF5D,x
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	DEX
	BPL.b CODE_25DF9D
	RTL

;--------------------------------------------------------------------

CODE_25DFAB:
	LDY.b #$00
CODE_25DFAD:
	LDA.b #$97
	JSL.l CODE_20986D
	JSL.l CODE_209809
	CPY.b #$E0
	BNE.b CODE_25DFAD
	RTL

;--------------------------------------------------------------------

DATA_25DFBC:
	db $E2,$C8

CODE_25DFBE:
	LDA.w $0706
	SEC
	SBC.b #$07
	TAX
	LDY.w $0700
	LDA.l DATA_25DFBC,x
	STA.b [$2E],y
	RTL

;--------------------------------------------------------------------

DATA_25DFCF:
	db $C9,$E7,$CA

CODE_25DFD2:
	LDY.w $0700
	LDX.b #$01
CODE_25DFD7:
	LDA.b #$E5
	STA.b [$2E],y
	TYA
	CLC
	ADC.b #$10
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	DEX
	BPL.b CODE_25DFD7
	LDX.b #$00
	DEY
	TYA
	AND.b #$0F
	CMP.b #$0F
	BNE.b CODE_25E007
	LDA.b $2E
	SEC
	SBC.b #$B0
	STA.b $2E
	LDA.b $2F
	SBC.b #$01
	STA.b $2F
	INY
	TYA
	AND.b #$F0
	ORA.b #$0F
	TAY
CODE_25E007:
	STY.w $0700
CODE_25E00A:
	LDA.l DATA_25DFCF,x
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	INX
	CPX.b #$03
	BNE.b CODE_25E00A
	RTL

;--------------------------------------------------------------------

CODE_25E01A:
	LDY.b #$00
	LDA.b [!RAM_SMB3_Level_LevelDataPtrLo],y
	STA.b $02
CODE_25E020:
	LDA.b !RAM_SMB3_Level_LevelDataPtrLo
	CLC
	ADC.b #$01
	STA.b !RAM_SMB3_Level_LevelDataPtrLo
	LDA.b !RAM_SMB3_Level_LevelDataPtrHi
	ADC.b #$00
	STA.b !RAM_SMB3_Level_LevelDataPtrHi
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	RTL						; Crash: This needs to be an RTS!

CODE_25E036:
	LDY.b #$00
	LDA.b [!RAM_SMB3_Level_LevelDataPtrLo],y
	STA.b $04
	JMP.w CODE_25E020

;--------------------------------------------------------------------

CODE_25E03F:
	LDA.b $00
	STA.b $2E
	LDA.b $01
	STA.b $2F
	LDA.w $0700
	CLC
	ADC.b #$10
	STA.w $0700
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	STA.b $01
	RTS

;--------------------------------------------------------------------

	%DATATABLE_RT05_SMB3_LevelData(NULLROM)				; $25E05A
	%FREE_BYTES(NULLROM, 296, $FF)						; $25EED8

;--------------------------------------------------------------------

; Note: Palette data for the Battle Mode results screen.

DATA_25F000:
	dw $7BFC,$42B1,$1614,$2ADA,$3F7F,$2ADA,$0D90,$1A56,$2BFF,$0087,$0000,$00A8,$00C9,$00EA,$03FF

DATA_25F01E:
	dw $7FFF,$0467,$6D6F,$0087,$0C19,$2D9C,$3ABF,$5AD6,$1950,$6A5F,$5DBF,$24DF,$00C9,$00EA,$0010

DATA_25F03C:
	dw $7FFF,$04E1,$6D6F,$0087,$3EEB,$2D9C,$3ABF,$5AD6,$1950,$4BF7,$1FED,$57B1,$00C9,$00EA,$2E67

CODE_25F05A:
	LDA.b #$80
	STA.w !REGISTER_ScreenDisplayRegister
	STA.b !RAM_SMB3_Global_ScreenDisplayRegisterMirror
	LDA.b #$02
	STA.w $020C
	STZ.w !REGISTER_BG3And4TileDataDesignation
	JSL.l SMB3_UploadMusicBank_Level
	LDA.b #$FF
	STA.w $0380
	STA.w $036C
	LDA.b #$02
	STA.b !RAM_SMB3_Overworld_Load2PlayerBattleFlag
	LDA.b #$12
	STA.w !RAM_SMB3_Global_TilesetFromHeader
	LDA.b #$12
	STA.w !RAM_SMB3_Level_GraphicsAndPaletteSettingFromHeader
	LDA.b #$20
	STA.w $0350
	STZ.w $034D
	STZ.w $0356
	STZ.w !RAM_SMB3_BattleMode_MariosRoundWinCount
	STZ.w !RAM_SMB3_BattleMode_LuigisRoundWinCount
	JSL.l CODE_29C82B
	STZ.w !RAM_SMB3_BattleMode_CurrentStage
	LDA.b #$C0
	STA.w !RAM_SMB3_Global_CurrentVBlankRoutinePath
	LDA.b #$80
	STA.w !RAM_SMB3_Global_CurrentRasterEffect
	RTL

;--------------------------------------------------------------------

SMB3_BattleMode_LoadGFXTilemapsAndPalette:
.Main:
;$25F0A6
	LDA.b #BattleModeLayer2BG
	LDX.b #BattleModeLayer2BG>>8
	LDY.b #BattleModeLayer2BG>>16
	JSL.l SMB3_GraphicsDecompressionRoutines_Main
	REP.b #$20
	PHD
	LDA.w #DMA[$00].Parameters
	TCD
	LDX.b #$80
	STX.w !REGISTER_VRAMAddressIncrementValue
	LDA.w #(!REGISTER_WriteToVRAMPortLo&$0000FF<<8)+$01
	STA.b DMA[$00].Parameters
	LDA.w #$2000
	STA.w !REGISTER_VRAMAddressLo
	LDA.w #SMB3_Bank44Graphics_FG_BattleMode1
	STA.b DMA[$00].SourceLo
	LDX.b #SMB3_Bank44Graphics_FG_BattleMode1>>16
	STX.b DMA[$00].SourceBank
	LDA.w #SMB3_Bank44Graphics_FG_BattleMode1End-SMB3_Bank44Graphics_FG_BattleMode1
	STA.b DMA[$00].SizeLo
	LDX.b #$01
	STX.w !REGISTER_DMAEnable
	LDA.w #SMB3_Bank44Graphics_FG_BattleMode2						;\ Optimization: The only reason this code exists is because Nintendo needlessly split up this FG graphics file.
	STA.b DMA[$00].SourceLo									;|
	LDA.w #$0800										;|
	STA.b DMA[$00].SizeLo									;|
	STX.w !REGISTER_DMAEnable								;/
	LDA.w #SMB3_Bank45Graphics_FG_ToadHouse1
	STA.b DMA[$00].SourceLo
	LDY.b #SMB3_Bank45Graphics_FG_ToadHouse1>>16
	STY.b DMA[$00].SourceBank
	LDA.w #$0800
	STA.b DMA[$00].SizeLo
	STX.w !REGISTER_DMAEnable
	LDA.w #SMB3_Bank40Graphics_BG_BattleMode
	STA.b DMA[$00].SourceLo
	LDY.b #SMB3_Bank40Graphics_BG_BattleMode>>16
	STY.b DMA[$00].SourceBank
	LDA.w #$0800
	STA.b DMA[$00].SizeLo
	STX.w !REGISTER_DMAEnable
	LDA.w #$7000
	STA.w !REGISTER_VRAMAddressLo
	LDA.w #SMB3_Bank3DGraphics_Sprite_BattleMode2
	STA.b DMA[$00].SourceLo
	LDY.b #SMB3_Bank3DGraphics_Sprite_BattleMode2>>16
	STY.b DMA[$00].SourceBank
	LDA.w #SMB3_Bank3DGraphics_UnusedSMWKoopaEnd-SMB3_Bank3DGraphics_Sprite_BattleMode2
	STA.b DMA[$00].SizeLo
	STX.w !REGISTER_DMAEnable
	LDA.w #$0400
	STA.w !REGISTER_VRAMAddressLo
	LDA.w #SMB3_BattleModeResultsScreenTilemap_Main
	STA.b DMA[$00].SourceLo
	LDY.b #SMB3_BattleModeResultsScreenTilemap_Main>>16
	STY.b DMA[$00].SourceBank
	LDA.w #SMB3_BattleModeResultsScreenTilemap_End-SMB3_BattleModeResultsScreenTilemap_Main
	STA.b DMA[$00].SizeLo
	STX.w !REGISTER_DMAEnable
	LDA.w #$1000
	STA.w !REGISTER_VRAMAddressLo
	LDA.w #!RAM_SMB3_Global_DecompressionBuffer
	STA.b DMA[$00].SourceLo
	LDY.b #!RAM_SMB3_Global_DecompressionBuffer>>16
	STY.b DMA[$00].SourceBank
	LDA.w #$2000
	STA.b DMA[$00].SizeLo
	STX.w !REGISTER_DMAEnable
	LDA.w #SMB3_PaletteMirror[$00].LowByte
	TCD
	LDX.b #$00
CODE_25F154:
	LDA.l DATA_25FD80+$02,x
	STA.b SMB3_PaletteMirror[$11].LowByte,x
	LDA.l DATA_25FDA0+$02,x
	STA.b SMB3_PaletteMirror[$21].LowByte,x
	LDA.l DATA_25F000,x
	STA.b SMB3_PaletteMirror[$31].LowByte,x
	LDA.l DATA_25F01E,x
	STA.b SMB3_PaletteMirror[$41].LowByte,x
	LDA.l DATA_25F03C,x
	STA.b SMB3_PaletteMirror[$51].LowByte,x
	INX
	INX
	CPX.b #$1E
	BNE.b CODE_25F154
	LDA.w #$0000
	STA.l !RAM_SMB3_BattleMode_ResultsScreenTilemapVRAMAddressLo
	STA.l !RAM_SMB3_BattleMode_UnusedTilemapVRAMAddressLo
	STA.l !RAM_SMB3_BattleMode_ResultsScreenCursoPosLo
	PLD
	SEP.b #$20
	RTL

;--------------------------------------------------------------------

DATA_25F18B:
	db $5B,$0C,$81,$0C,$5B,$0C

;--------------------------------------------------------------------

SMB3_BattleMode_ResultsScreenRoundNumbers:
	db $1D,$0C,$1E,$0C,$1F,$0C,$2E,$0C				; 0
	db $2F,$0C,$30,$0C,$81,$0C,$31,$0C				; 1
	db $32,$0C,$33,$0C,$34,$0C,$35,$0C				; 2
	db $36,$0C,$37,$0C,$38,$0C,$39,$0C				; 3
	db $3A,$0C,$3B,$0C,$3C,$0C,$3D,$0C				; 4
	db $3E,$0C,$3F,$0C,$48,$0C,$49,$0C				; 5
	db $4A,$0C,$4B,$0C,$4C,$0C,$4D,$0C				; 6
	db $5D,$0C,$5E,$0C,$60,$0C,$61,$0C				; 7
	db $62,$0C,$63,$0C,$64,$0C,$65,$0C				; 8
	db $66,$0C,$67,$0C,$68,$0C,$69,$0C				; 9

SMB3_BattleMode_UpdateResultsScreenTilemapAndPalette:
.Main:
;$25F1E1
	STZ.w $02DC
	REP.b #$20
	LDA.w #$0800
	STA.b $00
	LDA.w #SMB3_BattleModeResultsScreenTilemap_Main
	LDY.b #SMB3_BattleModeResultsScreenTilemap_Main>>16
	STA.b $02
	STY.b $04
	LDA.w #!RAM_SMB3_BattleMode_ResultsScreenTilemapData
	LDY.b #!RAM_SMB3_BattleMode_ResultsScreenTilemapData>>16
	JSL.l SMB3_DMADataBlockToRAM_Main				; Note: Call to SMAS function
	SEP.b #$20
	JSR.w CODE_25F670
	LDA.w !RAM_SMB3_BattleMode_CurrentStage
	INC
	ASL
	ASL
	ASL
	TAX
	REP.b #$20
; Number on the top
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR]
	LDA.l SMB3_BattleMode_ResultsScreenRoundNumbers,x
	STA.l !RAM_SMB3_BattleMode_ResultsScreenTilemapData+$0128
	LDA.l SMB3_BattleMode_ResultsScreenRoundNumbers+$02,x
	STA.l !RAM_SMB3_BattleMode_ResultsScreenTilemapData+$012A
	LDA.l SMB3_BattleMode_ResultsScreenRoundNumbers+$04,x
	STA.l !RAM_SMB3_BattleMode_ResultsScreenTilemapData+$0168
	LDA.l SMB3_BattleMode_ResultsScreenRoundNumbers+$06,x
	STA.l !RAM_SMB3_BattleMode_ResultsScreenTilemapData+$016A
else
	LDA.l SMB3_BattleMode_ResultsScreenRoundNumbers,x
	STA.l !RAM_SMB3_BattleMode_ResultsScreenTilemapData+$0126
	LDA.l SMB3_BattleMode_ResultsScreenRoundNumbers+$02,x
	STA.l !RAM_SMB3_BattleMode_ResultsScreenTilemapData+$0128
	LDA.l SMB3_BattleMode_ResultsScreenRoundNumbers+$04,x
	STA.l !RAM_SMB3_BattleMode_ResultsScreenTilemapData+$0166
	LDA.l SMB3_BattleMode_ResultsScreenRoundNumbers+$06,x
	STA.l !RAM_SMB3_BattleMode_ResultsScreenTilemapData+$0168
endif
	STZ.b $00
	LDA.w !RAM_SMB3_BattleMode_MariosRoundWinCount
	AND.w #$00FF
	ASL
	ASL
	ASL
	TAX
; Mario's score number
	LDA.l SMB3_BattleMode_ResultsScreenRoundNumbers,x
	STA.l !RAM_SMB3_BattleMode_ResultsScreenTilemapData+$041A
	LDA.l SMB3_BattleMode_ResultsScreenRoundNumbers+$02,x
	STA.l !RAM_SMB3_BattleMode_ResultsScreenTilemapData+$041C
	LDA.l SMB3_BattleMode_ResultsScreenRoundNumbers+$04,x
	STA.l !RAM_SMB3_BattleMode_ResultsScreenTilemapData+$045A
	LDA.l SMB3_BattleMode_ResultsScreenRoundNumbers+$06,x
	STA.l !RAM_SMB3_BattleMode_ResultsScreenTilemapData+$045C
	STZ.b $00
	LDA.w !RAM_SMB3_BattleMode_LuigisRoundWinCount
	AND.w #$00FF
	ASL
	ASL
	ASL
	TAX
; Luigi's score number
	LDA.l SMB3_BattleMode_ResultsScreenRoundNumbers,x
	STA.l !RAM_SMB3_BattleMode_ResultsScreenTilemapData+$0422
	LDA.l SMB3_BattleMode_ResultsScreenRoundNumbers+$02,x
	STA.l !RAM_SMB3_BattleMode_ResultsScreenTilemapData+$0424
	LDA.l SMB3_BattleMode_ResultsScreenRoundNumbers+$04,x
	STA.l !RAM_SMB3_BattleMode_ResultsScreenTilemapData+$0462
	LDA.l SMB3_BattleMode_ResultsScreenRoundNumbers+$06,x
	STA.l !RAM_SMB3_BattleMode_ResultsScreenTilemapData+$0464
	LDA.w #$0400
	STA.l !RAM_SMB3_BattleMode_ResultsScreenTilemapVRAMAddressLo
	LDA.l DATA_25F648
	STA.w SMB3_PaletteMirror[$4A].LowByte
	LDA.l DATA_25F658
	STA.w SMB3_PaletteMirror[$4B].LowByte
	LDA.l DATA_25F650
	STA.w SMB3_PaletteMirror[$5A].LowByte
	LDA.l DATA_25F660
	STA.w SMB3_PaletteMirror[$5B].LowByte
	SEP.b #$20
	LDA.w $078C
	DEC
	EOR.b #$01
	TAX
	LDA.w !RAM_SMB3_BattleMode_MariosRoundWinCount,x
	CMP.b #$05
	BNE.b CODE_25F31A
	TXA
	ASL
	ASL
	ASL
	ASL
	ASL
	TAX
	REP.b #$20
; WINNER row (X value determines if it's under Mario or Luigi)
	LDA.w #$0D58
	STA.l !RAM_SMB3_BattleMode_ResultsScreenTilemapData+$04C8,x
	INC
	STA.l !RAM_SMB3_BattleMode_ResultsScreenTilemapData+$04CA,x
	INC
	STA.l !RAM_SMB3_BattleMode_ResultsScreenTilemapData+$04CC,x
	INC
	STA.l !RAM_SMB3_BattleMode_ResultsScreenTilemapData+$04CE,x
	INC
	STA.l !RAM_SMB3_BattleMode_ResultsScreenTilemapData+$04D0,x
	INC
	STA.l !RAM_SMB3_BattleMode_ResultsScreenTilemapData+$04D2,x
	INC
	STA.l !RAM_SMB3_BattleMode_ResultsScreenTilemapData+$04D4,x
	INC
	STA.l !RAM_SMB3_BattleMode_ResultsScreenTilemapData+$04D6,x
	LDA.w #$0D6C
	STA.l !RAM_SMB3_BattleMode_ResultsScreenTilemapData+$0508,x
	INC
	STA.l !RAM_SMB3_BattleMode_ResultsScreenTilemapData+$050A,x
	INC
	STA.l !RAM_SMB3_BattleMode_ResultsScreenTilemapData+$050C,x
	INC
	STA.l !RAM_SMB3_BattleMode_ResultsScreenTilemapData+$050E,x
	LDA.w #$0D7E
	STA.l !RAM_SMB3_BattleMode_ResultsScreenTilemapData+$0510,x
	INC
	STA.l !RAM_SMB3_BattleMode_ResultsScreenTilemapData+$0512,x
	LDA.w #$0C59
	STA.l !RAM_SMB3_BattleMode_ResultsScreenTilemapData+$0514,x
	LDA.w #$0CA4
	STA.l !RAM_SMB3_BattleMode_ResultsScreenTilemapData+$0516,x
CODE_25F31A:
	SEP.b #$20
	LDA.w !RAM_SMB3_BattleMode_MariosWinCount
	BEQ.b CODE_25F32F
	TAY
	LDX.b #$00
	LDA.b #$0D
CODE_25F326:
	STA.l !RAM_SMB3_BattleMode_ResultsScreenTilemapData+$034A,x		; Mario's win stars
	INX
	INX
	DEY
	BNE.b CODE_25F326
CODE_25F32F:
	LDA.w !RAM_SMB3_BattleMode_LuigisWinCount
	BEQ.b CODE_25F342
	TAY
	LDX.b #$00
	LDA.b #$0D
CODE_25F339:
	STA.l !RAM_SMB3_BattleMode_ResultsScreenTilemapData+$036A,x		; Luigi's win stars
	INX
	INX
	DEY
	BNE.b CODE_25F339
CODE_25F342:
	REP.b #$20
	PHD
	LDA.w #SMB3_PaletteMirror[$00].LowByte
	TCD
	LDX.b #$00
CODE_25F34B:
	LDA.l DATA_25F000,x
	STA.b SMB3_PaletteMirror[$31].LowByte,x
	LDA.l DATA_25F01E,x
	STA.b SMB3_PaletteMirror[$41].LowByte,x
	LDA.l DATA_25F03C,x
	STA.b SMB3_PaletteMirror[$51].LowByte,x
	INX
	INX
	CPX.b #$1E
	BNE.b CODE_25F34B
	PLD
	SEP.b #$20
	LDY.b #!Define_SMB3_LevelMusic_HaveStar
	LDA.w $078C
	DEC
	EOR.b #$01
	TAX
	LDA.w !RAM_SMB3_BattleMode_MariosRoundWinCount,x
	CMP.b #$05
	BNE.b CODE_25F378
	LDY.b #!Define_SMB3_LevelMusic_PassedBoss
CODE_25F378:
	STY.w !RAM_SMB3_Global_MusicCh1
	RTL

;--------------------------------------------------------------------

DATA_25F37C:
	db $00,$01,$00,$01

DATA_25F380:
	db $00,$00,$01,$01

SMB3_BattleMode_ProcessResultsScreen:
.Main:
CODE_25F384:
;$25F384
	LDA.w $1206
	CMP.b #!Define_SMB3_LevelMusic_PassedBoss
	BNE.b CODE_25F395
	LDA.w !REGISTER_APUPort2
	BNE.b CODE_25F395
	LDA.b #!Define_SMB3_LevelMusic_HaveStar
	STA.w !RAM_SMB3_Global_MusicCh1
CODE_25F395:
	JSR.w CODE_25F670
	LDA.w !REGISTER_APUPort2
	CMP.b #!Define_SMB3_LevelMusic_HaveStar
	BNE.b CODE_25F3E5
	LDA.b !RAM_SMB3_Global_ControllerPress1P1
	ORA.b !RAM_SMB3_Global_ControllerPress1P2
	BIT.b #!Joypad_Start>>8
	BNE.b CODE_25F3F6
	BIT.b #!Joypad_Select>>8
	BNE.b CODE_25F3BF
	LDA.b !RAM_SMB3_Global_ControllerPress1P1
	ORA.b !RAM_SMB3_Global_ControllerPress1P2
	AND.b #(!Joypad_DPadL>>8)|(!Joypad_DPadR>>8)
	BEQ.b CODE_25F3E5
	AND.b #!Joypad_DPadL>>8
	EOR.b #!Joypad_DPadL>>8
	CMP.l !RAM_SMB3_BattleMode_ResultsScreenCursoPosLo
	BEQ.b CODE_25F3E5
	BRA.b CODE_25F3C5

CODE_25F3BF:
	LDA.l !RAM_SMB3_BattleMode_ResultsScreenCursoPosLo
	EOR.b #$02
CODE_25F3C5:
	STA.l !RAM_SMB3_BattleMode_ResultsScreenCursoPosLo
	LDA.b #!Define_SMAS_Sound0063_ShootFireball
	STA.w !RAM_SMB3_Global_SoundCh3
	LDA.l !RAM_SMB3_BattleMode_ResultsScreenCursoPosLo
	TAX
	REP.b #$20
	LDA.l DATA_25F18B,x
; Cursor positions
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	STA.l !RAM_SMB3_BattleMode_ResultsScreenTilemapData+$0594
	LDA.l DATA_25F18B+$02,x
	STA.l !RAM_SMB3_BattleMode_ResultsScreenTilemapData+$05A2
else
	STA.l !RAM_SMB3_BattleMode_ResultsScreenTilemapData+$058E
	LDA.l DATA_25F18B+$02,x
	STA.l !RAM_SMB3_BattleMode_ResultsScreenTilemapData+$05A6
endif
CODE_25F3E5:
	REP.b #$20
	LDA.w #$0400
	STA.l !RAM_SMB3_BattleMode_ResultsScreenTilemapVRAMAddressLo
	SEP.b #$20
	JSL.l CODE_20804D
	BRA.b CODE_25F384

CODE_25F3F6:
	LDA.b #!Define_SMAS_Sound0063_OverworldTileReveal
	STA.w !RAM_SMB3_Global_SoundCh3
	STZ.w $0211
	INC.w !RAM_SMB3_BattleMode_CurrentStage
	LDA.w $078C
	DEC
	EOR.b #$01
	TAX
	LDA.w !RAM_SMB3_BattleMode_MariosRoundWinCount,x
	CMP.b #$05
	BCC.b CODE_25F42C
	STZ.w !RAM_SMB3_BattleMode_MariosRoundWinCount
	STZ.w !RAM_SMB3_BattleMode_LuigisRoundWinCount
	STZ.w !RAM_SMB3_BattleMode_CurrentStage
	LDA.w !RAM_SMB3_BattleMode_MariosWinCount
	CMP.b #$06
	BEQ.b CODE_25F426
	LDA.w !RAM_SMB3_BattleMode_LuigisWinCount
	CMP.b #$06
	BNE.b CODE_25F42C
CODE_25F426:
	STZ.w !RAM_SMB3_BattleMode_MariosWinCount
	STZ.w !RAM_SMB3_BattleMode_LuigisWinCount
CODE_25F42C:
	LDA.w !RAM_SMB3_BattleMode_CurrentStage
	AND.b #$03
	TAX
	LDA.l DATA_25F37C,x
	STA.w $0213
	LDA.l DATA_25F380,x
	STA.w $0219
	LDA.w !RAM_SMB3_BattleMode_CurrentStage
	AND.b #$02
	ASL
	ASL
	ASL
	ASL
	ASL
	TAX
	LDY.b #$00
	REP.b #$20
CODE_25F44F:
	LDA.l DATA_25FD80+$02,x
	STA.w SMB3_PaletteMirror[$11].LowByte,y
	LDA.l DATA_25FDA0+$02,x
	STA.w SMB3_PaletteMirror[$21].LowByte,y
	INX
	INX
	INY
	INY
	CPY.b #$1E
	BNE.b CODE_25F44F
	SEP.b #$20
	RTL

;--------------------------------------------------------------------

; Note: Stripe data for Mario and Luigi's faces on the Battle Mode results screen.

DATA_25F468:
	db $81,$0C,$90,$10,$91,$10,$92,$10,$81,$0C
	db $81,$0C,$A0,$10,$A1,$10,$A2,$10,$A3,$10
	db $DC,$10,$EE,$10,$EF,$10,$B2,$10,$B3,$10
	db $81,$0C,$FE,$10,$DD,$10,$C2,$10,$81,$0C

DATA_25F490:
	db $81,$0C,$90,$10,$91,$10,$92,$10,$81,$0C
	db $81,$0C,$A0,$10,$A1,$10,$A2,$10,$A3,$10
	db $DC,$10,$EE,$10,$EF,$10,$B2,$10,$B3,$10
	db $81,$0C,$FE,$10,$DD,$10,$C2,$10,$81,$0C

DATA_25F4B8:
	db $81,$0C,$90,$10,$91,$10,$92,$10,$81,$0C
	db $81,$0C,$A0,$10,$A1,$10,$A2,$10,$A3,$10
	db $B4,$10,$B0,$10,$B1,$10,$B2,$10,$B3,$10
	db $C4,$10,$C0,$10,$C1,$10,$C2,$10,$81,$0C

DATA_25F4E0:
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR] Color fix for Mario's hand.
	db $81,$0C,$D0,$10,$D1,$10,$D2,$10,$81,$0C
	db $E4,$10,$E0,$10,$E1,$10,$E2,$10,$E3,$10
	db $F4,$10,$F0,$10,$F1,$10,$F2,$10,$F3,$10
	db $C3,$10,$D3,$10,$93,$10,$94,$10,$81,$0C
else
	db $81,$0C,$D0,$10,$D1,$10,$D2,$10,$81,$0C
	db $E4,$14,$E0,$10,$E1,$10,$E2,$10,$E3,$10
	db $F4,$14,$F0,$10,$F1,$10,$F2,$10,$F3,$10
	db $C3,$14,$D3,$14,$93,$10,$94,$10,$81,$0C
endif

DATA_25F508:
	db $81,$0C,$98,$10,$99,$10,$9A,$10,$9B,$10
	db $81,$0C,$A8,$10,$A9,$10,$AA,$10,$AB,$10
	db $81,$0C,$B8,$10,$B9,$10,$BA,$10,$BB,$10
	db $81,$0C,$C8,$10,$C9,$10,$CA,$10,$81,$0C

DATA_25F530:
	db $81,$0C,$D8,$10,$D9,$10,$DA,$10,$81,$0C
	db $81,$0C,$E8,$10,$E9,$10,$EA,$10,$EB,$10
	db $81,$0C,$F8,$10,$F9,$10,$FA,$10,$FB,$10
	db $81,$0C,$CB,$10,$CC,$10,$CD,$10,$CE,$10

DATA_25F558:
	db $81,$0C,$95,$14,$96,$14,$97,$14,$81,$0C
	db $81,$0C,$A5,$14,$A6,$14,$A7,$14,$81,$0C
	db $81,$0C,$EC,$14,$ED,$14,$B7,$14,$81,$0C
	db $81,$0C,$FC,$14,$FD,$14,$C7,$14,$81,$0C

DATA_25F580:
	db $81,$0C,$95,$14,$96,$14,$97,$14,$81,$0C
	db $81,$0C,$A5,$14,$A6,$14,$A7,$14,$81,$0C
	db $81,$0C,$EC,$14,$ED,$14,$B7,$14,$81,$0C
	db $81,$0C,$FC,$14,$FD,$14,$C7,$14,$81,$0C

DATA_25F5A8:
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR] Color fix for Luigi's hand.
	db $81,$0C,$95,$14,$96,$14,$97,$14,$81,$0C
	db $81,$0C,$A5,$14,$A6,$14,$A7,$14,$81,$0C
	db $B4,$14,$B5,$14,$B6,$14,$B7,$14,$81,$0C
	db $C4,$14,$C5,$14,$C6,$14,$C7,$14,$81,$0C
else
	db $81,$0C,$95,$14,$96,$14,$97,$14,$81,$0C
	db $81,$0C,$A5,$14,$A6,$14,$A7,$14,$81,$0C
	db $B4,$10,$B5,$14,$B6,$14,$B7,$14,$81,$0C
	db $C4,$10,$C5,$14,$C6,$14,$C7,$14,$81,$0C
endif

DATA_25F5D0:
	db $81,$0C,$D5,$14,$D6,$14,$D7,$14,$81,$0C
	db $E4,$14,$E5,$14,$E6,$14,$E7,$14,$81,$0C
	db $F4,$14,$F5,$14,$F6,$14,$F7,$14,$81,$0C
	db $C3,$14,$D3,$14,$D4,$14,$CF,$14,$81,$0C

DATA_25F5F8:
	db $81,$0C,$98,$14,$99,$14,$9A,$14,$9B,$14
	db $81,$0C,$A8,$14,$8A,$14,$AA,$14,$AB,$14
	db $81,$0C,$B8,$14,$B9,$14,$BA,$14,$BB,$14
	db $81,$0C,$C8,$14,$C9,$14,$CA,$14,$81,$0C

DATA_25F620:
	db $81,$0C,$D8,$14,$D9,$14,$DA,$14,$81,$0C
	db $81,$0C,$E8,$14,$DB,$14,$EA,$14,$EB,$14
	db $81,$0C,$F8,$14,$F9,$14,$FA,$14,$FB,$14
	db $81,$0C,$CB,$14,$CC,$14,$CD,$14,$CE,$14

DATA_25F648:
	dw $6A5F,$7F6D,$7FFF,$7F6D

DATA_25F650:
	dw $4BF7,$337F,$7FFF,$337F

DATA_25F658:
	dw $557F,$76A6,$739C,$76A6

DATA_25F660:
	dw $1FED,$1F1F,$739C,$1F1F

DATA_25F668:
	dw $2BFF,$0AF7,$2BFF,$7FFF

CODE_25F670:
	INC.w $02DC
	LDX.b #$A0
	LDA.w $078C
	CMP.b #$01
	BEQ.b CODE_25F687
	LDX.b #$00
	LDA.w !RAM_SMB3_BattleMode_MariosRoundWinCount
	CMP.b #$05
	BNE.b CODE_25F687
	LDX.b #$50
CODE_25F687:
	LDA.b #$05
	CMP.w !RAM_SMB3_BattleMode_MariosRoundWinCount
	BNE.b CODE_25F6A5
	LDA.w $02DC
	AND.b #$7F
	CMP.b #$10
	BCC.b CODE_25F6B5
	CMP.b #$20
	BCC.b CODE_25F6B0
	CMP.b #$34
	BCC.b CODE_25F6B5
	CMP.b #$54
	BCC.b CODE_25F6B0
	BRA.b CODE_25F6B5

CODE_25F6A5:
	CMP.w !RAM_SMB3_BattleMode_LuigisRoundWinCount
	BNE.b CODE_25F6B5
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$28
	BNE.b CODE_25F6B5
CODE_25F6B0:
	TXA
	CLC
	ADC.b #$28
	TAX
CODE_25F6B5:
	PHB
	LDA.b #!RAM_SMB3_BattleMode_ResultsScreenTilemapData>>16
	PHA
	PLB
	REP.b #$20
	LDY.b #$00
CODE_25F6BE:
; Mario's face
	LDA.l DATA_25F468,x
	STA.w !RAM_SMB3_BattleMode_ResultsScreenTilemapData+$03CA,y
	LDA.l DATA_25F468+$0A,x
	STA.w !RAM_SMB3_BattleMode_ResultsScreenTilemapData+$040A,y
	LDA.l DATA_25F468+$14,x
	STA.w !RAM_SMB3_BattleMode_ResultsScreenTilemapData+$044A,y
	LDA.l DATA_25F468+$1E,x
	STA.w !RAM_SMB3_BattleMode_ResultsScreenTilemapData+$048A,y
	INX
	INX
	INY
	INY
	CPY.b #$0A
	BNE.b CODE_25F6BE
	SEP.b #$20
	PLB
	LDY.w $02DC
	LDX.b #$A0
	LDA.w $078C
	CMP.b #$02
	BEQ.b CODE_25F6FC
	LDX.b #$00
	LDA.w !RAM_SMB3_BattleMode_LuigisRoundWinCount
	CMP.b #$05
	BNE.b CODE_25F6FC
	LDX.b #$50
CODE_25F6FC:
	LDA.b #$05
	CMP.w !RAM_SMB3_BattleMode_LuigisRoundWinCount
	BNE.b CODE_25F71A
	LDA.w $02DC
	AND.b #$7F
	CMP.b #$10
	BCC.b CODE_25F72A
	CMP.b #$20
	BCC.b CODE_25F725
	CMP.b #$34
	BCC.b CODE_25F72A
	CMP.b #$54
	BCC.b CODE_25F725
	BRA.b CODE_25F72A

CODE_25F71A:
	CMP.w !RAM_SMB3_BattleMode_MariosRoundWinCount
	BNE.b CODE_25F72A
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$28
	BNE.b CODE_25F72A
CODE_25F725:
	TXA
	CLC
	ADC.b #$28
	TAX
CODE_25F72A:
	PHB
	LDA.b #!RAM_SMB3_BattleMode_ResultsScreenTilemapData>>16
	PHA
	PLB
	REP.b #$20
	LDY.b #$00
CODE_25F733:
; Luigi's face
	LDA.l DATA_25F558,x
	STA.w !RAM_SMB3_BattleMode_ResultsScreenTilemapData+$03EC,y
	LDA.l DATA_25F558+$0A,x
	STA.w !RAM_SMB3_BattleMode_ResultsScreenTilemapData+$042C,y
	LDA.l DATA_25F558+$14,x
	STA.w !RAM_SMB3_BattleMode_ResultsScreenTilemapData+$046C,y
	LDA.l DATA_25F558+$1E,x
	STA.w !RAM_SMB3_BattleMode_ResultsScreenTilemapData+$04AC,y
	INX
	INX
	INY
	INY
	CPY.b #$0A
	BNE.b CODE_25F733
	SEP.b #$20
	PLB
	LDY.b #$94
	LDX.b #$00
	LDA.w $078C
	CMP.b #$01
	BNE.b CODE_25F769
	LDY.b #$B4
	LDX.b #$04
CODE_25F769:
	STX.b $00
	LDA.w $078C
	DEC
	EOR.b #$01
	TAX
	LDA.w !RAM_SMB3_BattleMode_MariosRoundWinCount,x
	CMP.b #$05
	BEQ.b CODE_25F799
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$0C
	LSR
	LSR
	ADC.b $00
	ASL
	TAX
	REP.b #$20
	LDA.l DATA_25F648,x
	STA.w SMB3_PaletteMirror[$00].LowByte,y
	LDA.l DATA_25F658,x
	STA.w SMB3_PaletteMirror[$01].LowByte,y
	SEP.b #$20
	INC.w !RAM_SMB3_Global_UpdateEntirePaletteFlag
	RTS

CODE_25F799:
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$0C
	LSR
	TAX
	REP.b #$20
	LDA.l DATA_25F668,x
	STA.w SMB3_PaletteMirror[$39].LowByte
	SEP.b #$20
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$07
	BNE.b CODE_25F7D0
	REP.b #$30
	PHD
	LDA.w #SMB3_PaletteMirror[$00].LowByte
	TCD
	LDX.b SMB3_PaletteMirror[$33].LowByte
	LDA.b SMB3_PaletteMirror[$37].LowByte
	STA.b SMB3_PaletteMirror[$33].LowByte
	STX.b SMB3_PaletteMirror[$37].LowByte
	LDX.b SMB3_PaletteMirror[$35].LowByte
	LDA.b SMB3_PaletteMirror[$34].LowByte
	STA.b SMB3_PaletteMirror[$35].LowByte
	STX.b SMB3_PaletteMirror[$34].LowByte
	LDX.b SMB3_PaletteMirror[$36].LowByte
	LDA.b SMB3_PaletteMirror[$38].LowByte
	STA.b SMB3_PaletteMirror[$36].LowByte
	STX.b SMB3_PaletteMirror[$38].LowByte
	PLD
CODE_25F7D0:
	SEP.b #$30
	LDY.b #$0D
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$30
	BNE.b CODE_25F7DC
	LDY.b #$81
CODE_25F7DC:
	STY.b $00
	LDA.w $078C
	DEC
	EOR.b #$01
	TAX
	LDA.w !RAM_SMB3_BattleMode_MariosWinCount,x
	TAY
	TXA
	ASL
	ASL
	ASL
	ASL
	ASL
	TAX
	LDA.b #$0D
CODE_25F7F2:
	CPY.b #$01
	BNE.b CODE_25F7F8
	LDA.b $00
CODE_25F7F8: 									; Note: something to do with Mario's win stars.
	STA.l !RAM_SMB3_BattleMode_ResultsScreenTilemapData+$034A,x
	INX
	INX
	DEY
	BNE.b CODE_25F7F2
	INC.w !RAM_SMB3_Global_UpdateEntirePaletteFlag
	RTS

;--------------------------------------------------------------------

CODE_25F805:
	LDA.w $192B
	ASL
	ASL
	SEC
	ADC.w $192B
	STA.w $192B
	ASL.w $192C
	LDA.b #$20
	BIT.w $192C
	BCC.b CODE_25F81F
	BEQ.b CODE_25F824
	BNE.b CODE_25F821

CODE_25F81F:
	BNE.b CODE_25F824
CODE_25F821:
	INC.w $192C
CODE_25F824:
	LDA.w $192C
	EOR.w $192B
	STA.w $192D
	RTL

;--------------------------------------------------------------------

DATA_25F82E:
	dw SMB3_Bank3DGraphics_BattleModePlayer+$0000,SMB3_Bank3DGraphics_BattleModePlayer+$0200,SMB3_Bank3DGraphics_BattleModePlayer+$0400,SMB3_Bank3DGraphics_BattleModePlayer+$0600
	dw SMB3_Bank3DGraphics_BattleModePlayer+$0040,SMB3_Bank3DGraphics_BattleModePlayer+$0240,SMB3_Bank3DGraphics_BattleModePlayer+$0440,SMB3_Bank3DGraphics_BattleModePlayer+$0640
	dw SMB3_Bank3DGraphics_BattleModePlayer+$0080,SMB3_Bank3DGraphics_BattleModePlayer+$0280,SMB3_Bank3DGraphics_BattleModePlayer+$0480,SMB3_Bank3DGraphics_BattleModePlayer+$0680
	dw SMB3_Bank3DGraphics_BattleModePlayer+$00C0,SMB3_Bank3DGraphics_BattleModePlayer+$02C0,SMB3_Bank3DGraphics_BattleModePlayer+$04C0,SMB3_Bank3DGraphics_BattleModePlayer+$06C0
	dw SMB3_Bank3DGraphics_BattleModePlayer+$0100,SMB3_Bank3DGraphics_BattleModePlayer+$0300,SMB3_Bank3DGraphics_BattleModePlayer+$0500,SMB3_Bank3DGraphics_BattleModePlayer+$0700
	dw SMB3_Bank3DGraphics_BattleModePlayer+$0880,SMB3_Bank3DGraphics_BattleModePlayer+$0340,SMB3_Bank3DGraphics_BattleModePlayer+$0540,SMB3_Bank3DGraphics_BattleModePlayer+$0740
	dw SMB3_Bank3DGraphics_BattleModePlayer+$0180,SMB3_Bank3DGraphics_BattleModePlayer+$0380,SMB3_Bank3DGraphics_BattleModePlayer+$0580,SMB3_Bank3DGraphics_BattleModePlayer+$0780
	dw SMB3_Bank3DGraphics_BattleModePlayer+$01C0,SMB3_Bank3DGraphics_BattleModePlayer+$03C0,SMB3_Bank3DGraphics_BattleModePlayer+$05C0,SMB3_Bank3DGraphics_BattleModePlayer+$07C0
	dw SMB3_Bank3DGraphics_BattleModePlayer+$0880,SMB3_Bank3DGraphics_BattleModePlayer+$0800,SMB3_Bank3DGraphics_BattleModePlayer+$0A00,SMB3_Bank3DGraphics_BattleModePlayer+$0C00
	dw SMB3_Bank3DGraphics_BattleModePlayer+$0880,SMB3_Bank3DGraphics_BattleModePlayer+$0840,SMB3_Bank3DGraphics_BattleModePlayer+$0A40,SMB3_Bank3DGraphics_BattleModePlayer+$0C40
	dw SMB3_Bank3DGraphics_BattleModePlayer+$0E80,SMB3_Bank3DGraphics_BattleModePlayer+$0EC0,SMB3_Bank3DGraphics_BattleModePlayer+$0F00,SMB3_Bank3DGraphics_BattleModePlayer+$0F40
	dw SMB3_Bank3DGraphics_BattleModePlayer+$0880,SMB3_Bank3DGraphics_BattleModePlayer+$0880,SMB3_Bank3DGraphics_BattleModePlayer+$0A80,SMB3_Bank3DGraphics_BattleModePlayer+$0C80
	dw SMB3_Bank3DGraphics_BattleModePlayer+$0880,SMB3_Bank3DGraphics_BattleModePlayer+$0880,SMB3_Bank3DGraphics_BattleModePlayer+$0AC0,SMB3_Bank3DGraphics_BattleModePlayer+$0CC0
	dw SMB3_Bank3DGraphics_BattleModePlayer+$0880,SMB3_Bank3DGraphics_BattleModePlayer+$0880,SMB3_Bank3DGraphics_BattleModePlayer+$0B00,SMB3_Bank3DGraphics_BattleModePlayer+$0D00
	dw SMB3_Bank3DGraphics_BattleModePlayer+$0880,SMB3_Bank3DGraphics_BattleModePlayer+$0880,SMB3_Bank3DGraphics_BattleModePlayer+$0B40,SMB3_Bank3DGraphics_BattleModePlayer+$0D40
	dw SMB3_Bank3DGraphics_BattleModePlayer+$0880,SMB3_Bank3DGraphics_BattleModePlayer+$0880,SMB3_Bank3DGraphics_BattleModePlayer+$0B80,SMB3_Bank3DGraphics_BattleModePlayer+$0D80
	dw SMB3_Bank3DGraphics_BattleModePlayer+$0880,SMB3_Bank3DGraphics_BattleModePlayer+$0880,SMB3_Bank3DGraphics_BattleModePlayer+$0BC0,SMB3_Bank3DGraphics_BattleModePlayer+$0DC0
	dw SMB3_Bank3DGraphics_BattleModePlayer+$0880,SMB3_Bank3DGraphics_BattleModePlayer+$0880,SMB3_Bank3DGraphics_BattleModePlayer+$0900,SMB3_Bank3DGraphics_BattleModePlayer+$0940
	dw SMB3_Bank3DGraphics_BattleModePlayer+$0880,SMB3_Bank3DGraphics_BattleModePlayer+$0880,SMB3_Bank3DGraphics_BattleModePlayer+$0980,SMB3_Bank3DGraphics_BattleModePlayer+$09C0
	dw SMB3_Bank3DGraphics_BattleModePlayer+$0880,SMB3_Bank3DGraphics_BattleModePlayer+$0880,SMB3_Bank3DGraphics_BattleModePlayer+$0E00,SMB3_Bank3DGraphics_BattleModePlayer+$0E40

SMB3_BattleMode_SetPlayerGraphicsPointer:
.Main:
;$25F8CE
	PHB
	PHK
	PLB
	LDA.b #SMB3_Bank3DGraphics_BattleModePlayer>>16
	STA.w $0238
	STA.w $0239
	REP.b #$30
	LDA.w #DATA_25F82E
	STA.b $04
	LDA.b !RAM_SMB3_BattleMode_MariosPose
	AND.w #$00FF
	TAY
	LDA.b ($04),y
	STA.w $0220
	INY
	INY
	LDA.b ($04),y
	STA.w $0222
	INY
	INY
	LDA.b ($04),y
	STA.w $0224
	INY
	INY
	LDA.b ($04),y
	STA.w $0226
	LDA.b !RAM_SMB3_BattleMode_LuigisPose
	AND.w #$00FF
	TAY
	LDA.b ($04),y
	CLC
	ADC.w #$1000
	STA.w $022C
	INY
	INY
	LDA.b ($04),y
	CLC
	ADC.w #$1000
	STA.w $022E
	INY
	INY
	LDA.b ($04),y
	CLC
	ADC.w #$1000
	STA.w $0230
	INY
	INY
	LDA.b ($04),y
	CLC
	ADC.w #$1000
	STA.w $0232
	SEP.b #$30
	PLB
	RTL

;--------------------------------------------------------------------

SMB3_BattleMode_InitializeMode2ScrollingRAM:
.Main:
;$25F934
	REP.b #$20
	LDA.w #$4000
	STA.l !RAM_SMB3_BattleMode_Mode2ScreenScrollVRAMAddressLo
	LDA.w #$0100
	STA.l !RAM_SMB3_BattleMode_Mode2ScreenScrollDataSizeLo
	LDA.w #$0000
	STA.l !RAM_SMB3_BattleMode_Mode2ScreenScrollFrameIndexLo
	SEP.b #$20
	JSR.w SMB3_BattleMode_UpdateMode2ScreenScrollingData_Main
	LDA.b #$40
	STA.w !REGISTER_BG3AddressAndSize
	RTL

;--------------------------------------------------------------------

SMB3_BattleMode_ScrollIntoResultsScreen:
.Main:
;$25F956
	LDA.l !RAM_SMB3_BattleMode_Mode2ScreenScrollFrameIndexLo
	INC
	STA.l !RAM_SMB3_BattleMode_Mode2ScreenScrollFrameIndexLo
	CMP.b #$10
	BCC.b CODE_25F96B
	LDA.b #$02
	STA.w $3002								; Glitch: This writes to open bus!
	STZ.w $0014
CODE_25F96B:
	JSR.w SMB3_BattleMode_UpdateMode2ScreenScrollingData_Main
	LDX.b #$00
	STZ.b $00
CODE_25F972:									; Note: This loop draws a black bar on the left side of the results screen.
	LDA.b #$00
	STA.w SMB3_OAMBuffer[$00].XDisp,x
	LDA.b $00
	STA.w SMB3_OAMBuffer[$00].YDisp,x
	CLC
	ADC.b #$08
	STA.b $00
	LDA.b #$9F
	STA.w SMB3_OAMBuffer[$00].Tile,x
	LDA.b #$3C
	STA.w SMB3_OAMBuffer[$00].Prop,x
	INX
	INX
	INX
	INX
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	CPX.b #$78
else
	CPX.b #$70
endif
	BNE.b CODE_25F972
	LDX.b #$00
CODE_25F995:
	STZ.w SMB3_OAMTileSizeBuffer[$00].Slot,x
	STZ.w SMB3_OAMTileSizeBuffer[$10].Slot,x
	INX
	CPX.b #$10
	BNE.b CODE_25F995
	RTL

;--------------------------------------------------------------------

SMB3_BattleMode_ScrollIntoBattleScreen:
.Main:
;$25F9A1
	LDA.l !RAM_SMB3_BattleMode_Mode2ScreenScrollFrameIndexLo
	DEC
	STA.l !RAM_SMB3_BattleMode_Mode2ScreenScrollFrameIndexLo
	BNE.b CODE_25F9B4
	LDA.b #$00
	STA.w $3002								; Glitch: This writes to open bus!
	STZ.w $0014
CODE_25F9B4:
	BRA.b CODE_25F96B

;--------------------------------------------------------------------

DATA_25F9B6:
	dw $2180,$2080

DATA_25F9BA:
	dw $2000,$2000

DATA_25F9BE:
	dw $4200,$4200

SMB3_BattleMode_UpdateMode2ScreenScrollingData:
.Main:
;$25F9C2
	REP.b #$30
	LDA.l $7F3002
	TAX
	LDA.l DATA_25F9B6,x
	STA.b $00
	LDA.l DATA_25F9BA,x
	STA.b $02
	LDA.l DATA_25F9BE,x
	STA.b $04
	LDX.w #$001E
	LDA.w #$0000
CODE_25F9E1:
	STA.l !RAM_SMB3_BattleMode_Mode2LayerScrollingDataTable,x
	STA.l !RAM_SMB3_BattleMode_Mode2LayerScrollingDataTable+$20,x
	STA.l !RAM_SMB3_BattleMode_Mode2LayerScrollingDataTable+$40,x
	STA.l !RAM_SMB3_BattleMode_Mode2LayerScrollingDataTable+$60,x
	DEX
	DEX
	BPL.b CODE_25F9E1
	LDA.l !RAM_SMB3_BattleMode_Mode2ScreenScrollFrameIndexLo
	BEQ.b CODE_25FA3E
	TAY
	ASL
	TAX
	LDA.b $00
CODE_25FA00:
	SEC
	SBC.w #$0008
	DEY
	BNE.b CODE_25FA00
	STA.b $0E
	PHX
CODE_25FA0A:
	LDA.b $0E
	STA.l !RAM_SMB3_BattleMode_Mode2LayerScrollingDataTable-$04,x
	LDA.b $02
	STA.l !RAM_SMB3_BattleMode_Mode2LayerScrollingDataTable+$3C,x
	DEX
	DEX
	BNE.b CODE_25FA0A
	LDA.b $04
	SEC
	SBC.b $0E
	STA.b $0E
	PLA
	STA.b $0C
	LDA.w #$0020
	SEC
	SBC.b $0C
	TAX
CODE_25FA2B:
	LDA.b $0E
	STA.l !RAM_SMB3_BattleMode_Mode2LayerScrollingDataTable+$1E,x
	LDA.b $02
	STA.l !RAM_SMB3_BattleMode_Mode2LayerScrollingDataTable+$5E,x
	INX
	INX
	CPX.w #$0020
	BNE.b CODE_25FA2B
CODE_25FA3E:
	LDA.w #$4000
	STA.l !RAM_SMB3_BattleMode_Mode2ScreenScrollVRAMAddressLo
	SEP.b #$30
	RTS

%FREE_BYTES(NULLROM, 824, $FF)

;--------------------------------------------------------------------

DATA_25FD80:
	dw $0000,$7FFF,$0C63,$10E2,$1503,$1924,$1D45,$1503,$1924,$1D45,$2166,$1924,$1D45,$2587,$2587,$2549

DATA_25FDA0:
	dw $0000,$7FFF,$2CE3,$18C6,$1CE7,$2108,$2529,$20E7,$2508,$2929,$2D4A,$2908,$2D29,$314A,$356B,$3569

;--------------------------------------------------------------------

UNK_25FDC0:
	dw $30FF,$7FFF,$14E7,$0CC8,$10E9,$150A,$192B,$30FF,$30FF,$30FF,$30FF,$218F,$25B0,$29D1,$2DF2,$318C
	dw $30FF,$7FFF,$24CB,$28EC,$2D0D,$312E,$354F,$2D0D,$312E,$354F,$3970,$312E,$354F,$3970,$3D91,$254F

;--------------------------------------------------------------------

BattleModeLayer2BG:
	incbin "Tilemaps/Layer2BattleModeBG.bin"

%FREE_BYTES(NULLROM, 141, $FF)

%BANK_END(<EndBank>)
endmacro

;#############################################################################################################
;#############################################################################################################

macro SMB3Bank26Macros(StartBank, EndBank)
%BANK_START(<StartBank>)
DATA_268000:
	db $FC,$10,$FC,$10,$FC,$10,$FC,$10,$3B,$00,$3A,$00,$FC,$10,$FC,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$05,$10,$06,$10,$07,$10,$08,$10
	db $05,$10,$D6,$10,$07,$10,$D6,$10,$E8,$14,$E9,$14,$EA,$14,$EB,$14
	db $04,$14,$38,$14,$09,$14,$39,$14,$24,$14,$22,$14,$25,$14,$23,$14
	db $24,$14,$20,$14,$25,$14,$21,$14,$05,$10,$7C,$10,$07,$10,$7C,$10
	db $05,$10,$06,$10,$7D,$10,$7D,$10,$7E,$10,$06,$10,$07,$10,$7E,$10
	db $05,$10,$7F,$10,$7F,$10,$08,$10,$64,$10,$65,$10,$07,$10,$08,$10
	db $05,$10,$06,$10,$64,$10,$65,$10,$05,$10,$06,$10,$66,$10,$67,$10
	db $66,$10,$67,$10,$07,$10,$08,$10,$0A,$0C,$0B,$0C,$0E,$0C,$0F,$0C
	db $0E,$0C,$0F,$0C,$0E,$0C,$0F,$0C,$0E,$0C,$0F,$0C,$4E,$0C,$4F,$0C
	db $0C,$14,$2F,$14,$0C,$14,$2F,$14,$0D,$14,$2E,$14,$0D,$14,$2E,$14
	db $2E,$14,$FC,$14,$2E,$14,$FC,$14,$2F,$14,$FD,$14,$2F,$14,$FD,$14
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $B8,$14,$B9,$14,$BA,$14,$BB,$14,$B8,$14,$B9,$14,$BA,$14,$BB,$14
	db $B8,$14,$B9,$14,$BA,$14,$BB,$14,$B8,$14,$B9,$14,$BA,$14,$BB,$14
	db $BC,$14,$BD,$14,$BE,$14,$BF,$14,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $B0,$10,$B1,$10,$B0,$10,$B1,$10,$B1,$10,$B0,$10,$B1,$10,$B0,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $DC,$1C,$DD,$1C,$DE,$1C,$DF,$1C,$05,$14,$06,$14,$07,$14,$08,$14
	db $05,$14,$06,$14,$07,$14,$08,$14,$64,$12,$74,$12,$65,$12,$75,$12
	db $05,$14,$06,$14,$07,$14,$08,$14,$05,$14,$06,$14,$07,$14,$08,$14
	db $05,$14,$06,$14,$07,$14,$08,$14,$FF,$00,$09,$10,$FF,$00,$04,$10
	db $FF,$00,$09,$10,$FF,$00,$04,$10,$FF,$00,$09,$10,$FF,$00,$04,$10
	db $04,$10,$09,$10,$4D,$10,$4D,$10,$4D,$10,$4D,$10,$4D,$10,$4D,$10
	db $4D,$10,$4D,$10,$09,$10,$04,$10,$04,$10,$09,$10,$4D,$10,$04,$10
	db $4D,$10,$09,$10,$4D,$10,$04,$10,$4D,$10,$7C,$10,$09,$10,$7D,$10
	db $4D,$10,$5E,$10,$7C,$10,$7A,$10,$7E,$10,$FF,$10,$7F,$10,$FF,$10
	db $10,$08,$20,$08,$11,$08,$21,$08,$12,$08,$22,$08,$13,$08,$23,$08
	db $24,$08,$18,$08,$25,$08,$19,$08,$26,$08,$1A,$08,$27,$08,$1B,$08
	db $28,$08,$0A,$08,$29,$08,$0B,$08,$2A,$08,$0E,$08,$2B,$08,$0F,$08
	db $30,$08,$05,$08,$32,$08,$05,$08,$05,$08,$05,$08,$05,$08,$05,$08
	db $26,$14,$27,$14,$28,$14,$29,$14,$5C,$10,$5D,$10,$5E,$10,$5F,$10
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$54,$1E,$55,$1E,$56,$1E,$57,$1E
	db $98,$1C,$99,$1C,$9A,$1C,$9B,$1C,$98,$1C,$99,$1C,$9A,$1C,$9B,$1C
	db $98,$1C,$99,$1C,$9A,$1C,$9B,$1C,$98,$1C,$99,$1C,$9A,$1C,$9B,$1C
	db $98,$1C,$99,$1C,$9A,$1C,$9B,$1C,$98,$1C,$99,$1C,$9A,$1C,$9B,$1C
	db $92,$1C,$93,$1C,$CA,$1C,$CB,$1C,$B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C
	db $B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C,$B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C
	db $B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C,$B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C
	db $B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C,$B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C
	db $B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C,$B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C
	db $B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C,$B8,$10,$B9,$10,$BA,$10,$BB,$10
	db $44,$12,$45,$12,$46,$12,$47,$12,$44,$12,$45,$12,$46,$12,$47,$12
	db $44,$12,$45,$12,$46,$12,$47,$12,$44,$12,$45,$12,$46,$12,$47,$12
	db $48,$16,$49,$16,$4A,$16,$4B,$16,$4C,$16,$4D,$16,$4E,$16,$4F,$16
	db $58,$16,$58,$16,$59,$16,$59,$16,$44,$12,$45,$12,$46,$12,$47,$12
	db $D5,$14,$B2,$14,$D5,$14,$B2,$14,$B2,$14,$B2,$14,$B2,$14,$B2,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14,$FF,$14
	db $05,$18,$06,$18,$07,$18,$08,$18,$54,$14,$58,$14,$55,$14,$59,$14
	db $58,$14,$58,$14,$59,$14,$59,$14,$58,$14,$56,$14,$59,$14,$57,$14
	db $44,$18,$48,$18,$45,$18,$49,$18,$C4,$1C,$C4,$1C,$C6,$1C,$C6,$1C
	db $48,$18,$48,$18,$49,$18,$49,$18,$48,$18,$46,$18,$49,$18,$47,$18
	db $18,$10,$19,$10,$1A,$10,$1B,$10,$68,$10,$69,$10,$6A,$10,$6B,$10
	db $1C,$18,$1D,$18,$1E,$18,$1F,$18,$89,$8C,$88,$8C,$8B,$0C,$8A,$8C
	db $60,$18,$61,$18,$62,$18,$63,$18,$10,$18,$11,$18,$62,$18,$63,$18
	db $10,$18,$61,$18,$12,$18,$63,$18,$10,$18,$11,$18,$12,$18,$63,$18
	db $60,$18,$61,$18,$12,$18,$63,$18,$05,$18,$06,$18,$12,$18,$13,$18
	db $05,$18,$06,$18,$07,$18,$13,$18,$05,$18,$11,$18,$07,$18,$13,$18
	db $88,$0C,$89,$0C,$8A,$0C,$8B,$0C,$7E,$0E,$7E,$0E,$7E,$0E,$7E,$0E
	db $44,$14,$58,$14,$45,$14,$59,$14,$27,$1C,$27,$1C,$3C,$0C,$3E,$0C
	db $3D,$0C,$3F,$0C,$27,$1C,$27,$1C,$27,$1C,$27,$1C,$3C,$0C,$3C,$0C
	db $3D,$0C,$3D,$0C,$27,$1C,$27,$1C,$2A,$14,$2B,$14,$2C,$14,$2D,$14
	db $14,$1C,$15,$1C,$16,$1C,$17,$1C,$40,$18,$41,$18,$42,$18,$43,$18
	db $6C,$1C,$6D,$1C,$6E,$1C,$6F,$1C,$5A,$18,$5C,$18,$5B,$18,$5D,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$40,$1E,$50,$1E,$41,$1E,$51,$1E
	db $42,$1E,$52,$1E,$43,$1E,$53,$1E,$40,$1E,$50,$1E,$41,$1E,$51,$1E
	db $42,$1E,$52,$1E,$43,$1E,$53,$1E,$40,$1E,$50,$1E,$41,$1E,$51,$1E
	db $42,$1E,$52,$1E,$43,$1E,$53,$1E,$40,$1E,$50,$1E,$41,$1E,$51,$1E
	db $42,$1E,$52,$1E,$43,$1E,$53,$1E,$76,$1C,$77,$1C,$7A,$1C,$7B,$1C
	db $76,$1C,$77,$1C,$7A,$1C,$7B,$1C,$74,$1C,$75,$1C,$78,$1C,$79,$1C
	db $70,$1C,$71,$1C,$70,$1C,$71,$1C,$72,$1C,$73,$1C,$72,$1C,$73,$1C
	db $60,$1E,$60,$1E,$61,$1E,$61,$1E,$62,$1E,$62,$1E,$63,$1E,$63,$1E
	db $B8,$18,$B9,$18,$BA,$18,$BB,$18,$FF,$18,$FF,$18,$FF,$18,$FF,$18
	db $FF,$18,$FF,$18,$FF,$18,$FF,$18,$4B,$08,$39,$48,$4B,$08,$48,$08
	db $49,$08,$47,$08,$49,$08,$49,$08,$05,$1C,$06,$1C,$07,$1C,$08,$1C
	db $3D,$1C,$31,$1C,$33,$1C,$3F,$1C,$4B,$08,$3A,$08,$4B,$08,$48,$08
	db $4B,$08,$48,$08,$4B,$08,$48,$08,$4C,$48,$4A,$48,$4B,$08,$48,$08
	db $36,$48,$37,$48,$32,$08,$33,$08,$30,$08,$31,$08,$32,$08,$33,$08
	db $38,$08,$31,$08,$35,$08,$3F,$08,$3D,$48,$35,$08,$39,$48,$49,$08
	db $4A,$48,$4A,$48,$48,$08,$48,$08,$48,$08,$48,$08,$48,$08,$48,$08
	db $49,$08,$47,$08,$39,$48,$49,$08,$46,$08,$36,$C8,$35,$08,$3F,$08
	db $49,$08,$35,$08,$39,$48,$49,$08,$48,$08,$48,$08,$48,$08,$5F,$08
	db $5F,$08,$3B,$08,$3A,$08,$3F,$08,$48,$08,$39,$48,$48,$08,$48,$08
	db $5F,$08,$3B,$08,$3C,$08,$33,$08,$38,$08,$31,$08,$35,$08,$3F,$08
	db $3E,$08,$3B,$08,$3C,$08,$33,$08,$48,$08,$39,$48,$48,$08,$5F,$08
	db $30,$08,$31,$08,$32,$08,$33,$08,$FF,$00,$E6,$0C,$FF,$00,$E7,$0C
	db $B3,$1C,$CD,$1C,$B3,$1C,$CF,$1C,$CC,$1C,$CD,$1C,$CE,$1C,$CF,$1C
	db $FC,$1C,$CD,$1C,$FC,$1C,$CF,$1C,$C5,$1C,$FE,$1C,$C5,$1C,$FE,$1C
	db $C7,$0C,$7B,$0E,$C7,$0C,$7B,$0E,$D4,$1C,$FE,$1C,$D4,$1C,$FE,$1C
	db $7B,$0E,$7B,$0E,$7B,$0E,$7B,$0E,$FC,$1C,$FE,$1C,$FC,$1C,$FE,$1C
	db $A6,$0C,$AE,$0C,$A7,$0C,$AF,$0C,$AC,$0C,$AE,$0C,$AD,$0C,$AF,$0C
	db $4C,$14,$4A,$0C,$4C,$14,$4A,$0C,$4A,$0C,$4B,$14,$4A,$0C,$4B,$14
	db $00,$18,$01,$18,$02,$18,$03,$18,$40,$18,$41,$18,$42,$18,$43,$18
	db $50,$1C,$51,$1C,$52,$1C,$53,$1C,$44,$14,$58,$14,$45,$14,$59,$14
	db $30,$14,$31,$14,$32,$14,$33,$14,$34,$14,$35,$14,$36,$14,$37,$14
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $50,$1C,$51,$1C,$52,$1C,$53,$1C,$D7,$1C,$06,$1C,$D7,$1C,$08,$1C
	db $E0,$0C,$E1,$0C,$E2,$0C,$E3,$0C,$05,$1C,$06,$1C,$07,$1C,$08,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $70,$12,$72,$12,$71,$12,$73,$12,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $5A,$16,$5B,$16,$5A,$56,$5B,$56,$5B,$16,$5A,$96,$5B,$56,$5A,$D6
	db $24,$14,$24,$14,$25,$14,$25,$14

;--------------------------------------------------------------------

DATA_268828:
	db $11,$5A,$9B,$E2,$11,$5A,$9B,$E2

;--------------------------------------------------------------------

	%ROUTINE_SMB3_InitializeTileset02Level_FortressAndCastle(NULLROM)		; $268830

;--------------------------------------------------------------------

; Note: Level loading routine related to the castle tile set.

DATA_268889:
	db $00,$0F,$1E,$2D,$3C,$4B,$5A,$69

SMB3_ProcessFortressAndCastleResizableObjects:
.Main:
;$268891
	LDA.b $0E
	AND.b #$E0
	LSR
	LSR
	LSR
	LSR
	LSR
	TAX
	LDA.w $0706
	LSR
	LSR
	LSR
	LSR
	CLC
	ADC.l DATA_268889,x
	TAX
	DEX
	TXA
	JSL.l SMB3_ExecutePtr_Long

DATA_2688AE:
	dl CODE_23AD6F
	dl CODE_23AD73
	dl CODE_23AE2E
	dl CODE_2689EB
	dl CODE_2689EB
	dl CODE_268A0C
	dl CODE_268A45
	dl CODE_268A46
	dl CODE_268A47
	dl CODE_268A7F
	dl CODE_268A89
	dl CODE_268B45
	dl CODE_268B4B
	dl CODE_268AC1
	dl CODE_268B29
	dl CODE_23AA8A
	dl CODE_23AA8A
	dl CODE_23AA8A
	dl CODE_23AA8A
	dl CODE_23AA8A
	dl CODE_23AA8A
	dl CODE_23AA8A
	dl CODE_23AA8A
	dl CODE_23A6C1
	dl CODE_23A6C1
	dl CODE_23A6C1
	dl CODE_23A728
	dl CODE_23A728
	dl CODE_23A81D
	dl CODE_23A81D
	dl CODE_23A8AE
	dl CODE_23A8AE
	dl CODE_23AE7B
	dl CODE_23AEC7
	dl CODE_23AEC7
	dl CODE_23AF2A
	dl CODE_23AF2A
	dl CODE_23AF2A
	dl CODE_23AF2A
	dl CODE_23AF2A
	dl CODE_23AF2A
	dl CODE_23AF2A
	dl CODE_23AF2A
	dl CODE_23AABC
	dl CODE_23A790
	dl CODE_268B66
	dl CODE_268B8D
	dl CODE_268B8D
	dl CODE_23AD09
	dl CODE_23B04A
	dl CODE_23B04A
	dl CODE_23AC19
	dl CODE_23AC2A
	dl CODE_23AC42
	dl CODE_23AC61
	dl CODE_23AC80
	dl CODE_23ACAF
	dl CODE_268ABB
	dl CODE_23B074

;--------------------------------------------------------------------

;Note: Seems to be a level loading routine

CODE_26895F:
	LDA.b $0E
	AND.b #$E0
	LSR
	CLC
	ADC.w $0706
	TAX
	JSL.l SMB3_ExecutePtr_Long

DATA_26896D:
	dl CODE_23A699
	dl CODE_268BCD
	dl CODE_268BEE
	dl CODE_23BE51
	dl CODE_268BFA
	dl CODE_268C06
	dl CODE_23A682
	dl CODE_268C21
	dl $000000
	dl $000000
	dl $000000
	dl $000000
	dl $000000
	dl $000000
	dl $000000
	dl $000000
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23A943

;--------------------------------------------------------------------

CODE_2689EB:
	LDA.w $0706
	PHA
	SEC
	SBC.b #$40
	LSR
	LSR
	LSR
	LSR
	TAX
	PLA
	AND.b #$0F
	STA.b $02
	LDY.w $0700
CODE_2689FF:
	LDA.b #$02
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	DEC.b $02
	BPL.b CODE_2689FF
	RTL

;--------------------------------------------------------------------

CODE_268A0C:
	LDY.w $0700
	LDA.b #$02
	STA.b [$2E],y
	REP.b #$30
	TYA
	ORA.w #$2000
	TAY
	LDA.w #$0102
	XBA
	SEP.b #$20
	STA.b [$2E],y
	SEP.b #$10
	TYA
	CLC
	ADC.b #$10
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	LDA.b #$03
	STA.b [$2E],y
	REP.b #$30
	TYA
	ORA.w #$2000
	TAY
	LDA.w #$0103
	XBA
	SEP.b #$20
	STA.b [$2E],y
	SEP.b #$10
	RTL

;--------------------------------------------------------------------

CODE_268A45:
	RTL

;--------------------------------------------------------------------

CODE_268A46:
	RTL

;--------------------------------------------------------------------

CODE_268A47:
	LDA.w $0706
	AND.b #$0F
	STA.b $02
	LDY.w $0700
CODE_268A51:
	LDA.b #$8A
	STA.b [$2E],y
	JMP.w CODE_268A5C

CODE_268A58:
	LDA.b #$89
	STA.b [$2E],y
CODE_268A5C:
	TYA
	SEC
	SBC.b #$10
	TAY
	AND.b #$F0
	CMP.b #$10
	BNE.b CODE_268A58
	LDA.b #$88
	STA.b [$2E],y
	LDX.b #$03
	LDY.w $0700
CODE_268A70:
	JSL.l CODE_23BEBB
	DEX
	BPL.b CODE_268A70
	STY.w $0700
	DEC.b $02
	BPL.b CODE_268A51
	RTL

;--------------------------------------------------------------------

CODE_268A7F:
	LDX.b #$00
	BEQ.b CODE_268A8B

DATA_268A83:
	db $5A,$11

DATA_268A85:
	db $5A,$12

DATA_268A87:
	db $5A,$13

CODE_268A89:
	LDX.b #$01
CODE_268A8B:
	LDA.w $0706
	AND.b #$0F
	STA.b $02
	LDY.w $0700
	LDA.l DATA_268A83,x
	STA.b [$2E],y
	JMP.w CODE_268AA4

CODE_268A9E:
	LDA.l DATA_268A85,x
	STA.b [$2E],y
CODE_268AA4:
	JSL.l CODE_2AB73A
	JSL.l CODE_23BEBB
	DEC.b $02
	BNE.b CODE_268A9E
	LDA.l DATA_268A87,x
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	RTL

;--------------------------------------------------------------------

CODE_268ABB:
	LDX.b #$01
	BNE.b CODE_268AC3

DATA_268ABF:
	db $E4,$9C

CODE_268AC1:
	LDX.b #$00
CODE_268AC3:
	JSR.w CODE_268AE8
CODE_268AC6:
	LDA.b $02
	STA.b $04
CODE_268ACA:
	LDA.l DATA_268ABF,x
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	JSL.l CODE_23BEBB
	DEC.b $04
	LDA.b $04
	CMP.b #$FF
	BNE.b CODE_268ACA
	JSR.w CODE_268B0E
	DEC.b $03
	BPL.b CODE_268AC6
	RTL

;--------------------------------------------------------------------

CODE_268AE8:
	LDY.b #$00
	LDA.b [!RAM_SMB3_Level_LevelDataPtrLo],y
	STA.b $02
	LDA.b !RAM_SMB3_Level_LevelDataPtrLo
	CLC
	ADC.b #$01
	STA.b !RAM_SMB3_Level_LevelDataPtrLo
	LDA.b !RAM_SMB3_Level_LevelDataPtrHi
	ADC.b #$00
	STA.b !RAM_SMB3_Level_LevelDataPtrHi
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDA.w $0706
	AND.b #$0F
	STA.b $03
	LDY.w $0700
	RTS

;--------------------------------------------------------------------

CODE_268B0E:
	LDA.b $00
	STA.b $2E
	LDA.b $01
	STA.b $2F
	LDA.w $0700
	CLC
	ADC.b #$10
	STA.w $0700
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	STA.b $01
	RTS

;--------------------------------------------------------------------

CODE_268B29:
	JSR.w CODE_268AE8
CODE_268B2C:
	LDX.b $03
CODE_268B2E:
	LDA.b #$E4
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	JSL.l CODE_23BEBB
	DEX
	BPL.b CODE_268B2E
	JSR.w CODE_268B0E
	DEC.b $02
	BPL.b CODE_268B2C
	RTL

;--------------------------------------------------------------------

CODE_268B45:
	LDX.b #$00
	BEQ.b CODE_268B4D

DATA_268B49:
	db $E2,$E3

CODE_268B4B:
	LDX.b #$01
CODE_268B4D:
	LDA.w $0706
	AND.b #$0F
	STA.b $03
	LDY.w $0700
CODE_268B57:
	LDA.l DATA_268B49,x
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	DEC.b $03
	BPL.b CODE_268B57
	RTL

;--------------------------------------------------------------------

CODE_268B66:
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDA.w $0706
	AND.b #$0F
	STA.b $02
	LDY.w $0700
CODE_268B78:
	LDX.b $02
CODE_268B7A:
	LDA.b #$02
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	DEX
	BPL.b CODE_268B7A
	JSR.w CODE_268B0E
	CPY.b #$B0
	BCC.b CODE_268B78
	RTL

;--------------------------------------------------------------------

CODE_268B8D:
	LDY.b #$00
	LDA.b [!RAM_SMB3_Level_LevelDataPtrLo],y
	STA.b $02
	REP.b #$20
	INC.b !RAM_SMB3_Level_LevelDataPtrLo
	LDA.b $2E
	STA.b $00
	SEP.b #$20
	LDA.w $0706
	PHA
	SEC
	SBC.b #$20
	LSR
	LSR
	LSR
	LSR
	TAX
	PLA
	AND.b #$0F
	STA.b $03
CODE_268BAE:
	LDY.w $0700
	LDA.b $02
	STA.b $04
CODE_268BB5:
	LDA.b #$02
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	DEC.b $04
	LDA.b $04
	CMP.b #$FF
	BNE.b CODE_268BB5
	JSR.w CODE_268B0E
	DEC.b $03
	BPL.b CODE_268BAE
	RTL

;--------------------------------------------------------------------

CODE_268BCD:
	LDX.b #$00
CODE_268BCF:
	LDA.b #$9D
	JSL.l CODE_209809
	CPX.b #$10
	BNE.b CODE_268BCF
CODE_268BD9:
	LDA.b #$02
	JSL.l CODE_209809
	CPX.b #$20
	BNE.b CODE_268BD9
CODE_268BE3:
	LDA.b #$02
	JSL.l CODE_209809
	CPX.b #$80
	BNE.b CODE_268BE3
	RTL

;--------------------------------------------------------------------

CODE_268BEE:
	LDY.w $0700
	LDA.b #$9E
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	RTL

;--------------------------------------------------------------------

CODE_268BFA:
	LDY.w $0700
	LDA.b #$9B
	STA.b [$2E],y
	JSL.l CODE_2A8705
	RTL

;--------------------------------------------------------------------

CODE_268C06:
	LDY.w $0700
	LDA.b #$E8
	STA.b [$2E],y
	TYA
	CLC
	ADC.b #$10
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	LDA.b #$E9
	STA.b [$2E],y
	RTL

;--------------------------------------------------------------------

DATA_268C1D:
	db $97,$98,$99,$9A

CODE_268C21:
	LDX.b #$00
	LDY.w $0700
CODE_268C26:
	LDA.l DATA_268C1D,x
	STA.b [$2E],y
	INY
	INX
	TXA
	AND.b #$01
	BNE.b CODE_268C26
	LDA.w $0700
	CLC
	ADC.b #$10
	TAY
	CPX.b #$04
	BNE.b CODE_268C26
	RTL

;--------------------------------------------------------------------

	%DATATABLE_RT06_SMB3_LevelData(NULLROM)				; $268C3F
	%FREE_BYTES(NULLROM, 1063, $FF)						; $26A3D9

;--------------------------------------------------------------------

DATA_26A800:
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$05,$10,$06,$10,$07,$10,$08,$10
	db $05,$10,$D6,$0C,$07,$10,$D6,$0C,$E8,$14,$E9,$14,$EA,$14,$EB,$14
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FC,$10,$FC,$10,$FC,$10,$FC,$10
	db $FD,$10,$FD,$10,$FD,$10,$FD,$10,$FE,$10,$FE,$10,$FE,$10,$FE,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $40,$14,$50,$14,$41,$14,$51,$14,$43,$14,$53,$14,$44,$14,$54,$14
	db $6C,$14,$7C,$14,$6D,$14,$7D,$14,$6E,$14,$7E,$14,$6F,$14,$7F,$14
	db $64,$14,$74,$14,$65,$14,$75,$14,$68,$14,$78,$14,$69,$14,$79,$14
	db $66,$14,$76,$14,$67,$14,$77,$14,$7A,$14,$6A,$14,$7B,$14,$6B,$14
	db $4B,$14,$5B,$14,$4A,$14,$5A,$14,$4A,$14,$5A,$14,$4A,$14,$5A,$14
	db $B8,$14,$B9,$14,$BA,$14,$B9,$14,$B8,$14,$B9,$14,$BA,$14,$B9,$14
	db $B8,$14,$B9,$14,$BA,$14,$B9,$14,$B8,$14,$B9,$14,$BA,$14,$B9,$14
	db $BC,$14,$BD,$14,$BE,$14,$BF,$14,$5E,$10,$04,$10,$5F,$10,$04,$10
	db $5E,$10,$04,$10,$5F,$10,$04,$10,$4F,$10,$55,$10,$52,$10,$55,$10
	db $4F,$10,$55,$10,$52,$10,$55,$10,$05,$10,$06,$10,$07,$10,$08,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10,$FF,$10
	db $DC,$1C,$DD,$1C,$DE,$1C,$DF,$1C,$05,$14,$06,$14,$07,$14,$08,$14
	db $FF,$14,$FC,$14,$FC,$14,$FC,$14,$FF,$14,$FC,$14,$FC,$14,$FC,$14
	db $05,$14,$06,$14,$07,$14,$08,$14,$05,$14,$06,$14,$07,$14,$08,$14
	db $05,$14,$06,$14,$07,$14,$08,$14,$82,$14,$92,$14,$83,$14,$93,$14
	db $92,$14,$84,$14,$93,$14,$85,$14,$B9,$10,$B9,$10,$A8,$10,$A8,$10
	db $A8,$10,$A8,$10,$A8,$10,$A8,$10,$A8,$10,$A8,$10,$B9,$10,$B9,$10
	db $B9,$10,$90,$10,$A8,$10,$89,$10,$A8,$10,$89,$10,$A8,$10,$89,$10
	db $A8,$10,$89,$10,$B9,$10,$91,$10,$10,$18,$11,$18,$37,$18,$08,$18
	db $37,$14,$06,$14,$37,$14,$08,$14,$37,$18,$06,$18,$11,$18,$12,$18
	db $11,$18,$12,$18,$07,$18,$37,$18,$05,$14,$37,$14,$07,$14,$37,$14
	db $05,$18,$37,$18,$11,$18,$12,$18,$11,$14,$11,$14,$07,$14,$08,$14
	db $05,$14,$06,$14,$11,$14,$11,$14,$0A,$14,$1A,$14,$0B,$14,$1B,$14
	db $0C,$14,$1C,$14,$0D,$14,$1D,$14,$2A,$14,$3A,$14,$2B,$14,$3B,$14
	db $0A,$14,$1A,$14,$0D,$14,$1D,$14,$2A,$14,$3A,$14,$2D,$14,$3D,$14
	db $80,$10,$B9,$10,$89,$10,$A8,$10,$89,$10,$A8,$10,$89,$10,$A8,$10
	db $89,$10,$A8,$10,$81,$10,$B9,$10,$54,$1E,$55,$1E,$56,$1E,$57,$1E
	db $98,$1C,$99,$1C,$9A,$1C,$9B,$1C,$98,$1C,$99,$1C,$9A,$1C,$9B,$1C
	db $98,$1C,$99,$1C,$9A,$1C,$9B,$1C,$98,$1C,$99,$1C,$9A,$1C,$9B,$1C
	db $98,$1C,$99,$1C,$9A,$1C,$9B,$1C,$98,$1C,$99,$1C,$9A,$1C,$9B,$1C
	db $92,$1C,$93,$1C,$CA,$1C,$CB,$1C,$B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C
	db $B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C,$B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C
	db $B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C,$B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C
	db $B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C,$B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C
	db $B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C,$B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C
	db $B4,$1C,$B5,$1C,$B6,$1C,$B7,$1C,$B8,$10,$B9,$10,$BA,$10,$B9,$10
	db $44,$12,$45,$12,$46,$12,$47,$12,$44,$12,$45,$12,$46,$12,$47,$12
	db $44,$12,$45,$12,$46,$12,$47,$12,$44,$12,$45,$12,$46,$12,$47,$12
	db $48,$16,$49,$16,$4A,$16,$4B,$16,$4C,$16,$4D,$16,$4E,$16,$4F,$16
	db $58,$16,$58,$16,$59,$16,$59,$16,$44,$12,$45,$12,$46,$12,$47,$12
	db $13,$14,$13,$14,$37,$14,$37,$14,$37,$14,$37,$14,$37,$14,$37,$14
	db $37,$14,$37,$14,$38,$14,$38,$14,$10,$14,$11,$14,$10,$14,$11,$14
	db $11,$14,$11,$14,$11,$14,$11,$14,$11,$14,$12,$14,$11,$14,$12,$14
	db $FC,$18,$FC,$18,$FC,$18,$FC,$18,$BE,$14,$BF,$14,$BE,$14,$BF,$14
	db $B0,$14,$B0,$14,$B1,$14,$B1,$14,$8F,$14,$9F,$14,$07,$14,$08,$14
	db $05,$14,$94,$14,$07,$14,$95,$14,$C4,$1C,$C4,$1C,$C6,$1C,$C6,$1C
	db $7C,$16,$7C,$16,$7C,$16,$7C,$16,$A9,$18,$B9,$18,$07,$18,$08,$18
	db $B9,$18,$B9,$18,$07,$18,$08,$18,$B9,$18,$B8,$18,$07,$18,$08,$18
	db $05,$18,$06,$18,$A9,$18,$B9,$18,$05,$18,$06,$18,$B9,$18,$B9,$18
	db $05,$18,$06,$18,$B9,$18,$B8,$18,$CD,$14,$CD,$14,$7C,$16,$7C,$16
	db $7C,$16,$7C,$16,$AD,$14,$AD,$14,$CD,$14,$BA,$14,$CF,$14,$8C,$14
	db $7C,$16,$8C,$14,$7C,$16,$8C,$14,$CF,$14,$8C,$14,$AD,$14,$BB,$14
	db $05,$14,$8D,$14,$A6,$14,$B2,$14,$A7,$14,$BC,$14,$07,$14,$8D,$14
	db $9D,$14,$06,$14,$B3,$14,$AE,$14,$CB,$14,$AF,$14,$9D,$14,$08,$14
	db $09,$14,$EC,$14,$28,$14,$ED,$14,$36,$14,$EE,$14,$49,$14,$EF,$14
	db $E8,$14,$F8,$14,$E9,$14,$F9,$14,$EA,$14,$FA,$14,$EB,$14,$FB,$14
	db $05,$14,$06,$14,$4C,$14,$5C,$14,$4D,$14,$5D,$14,$07,$14,$08,$14
	db $A4,$14,$A4,$14,$A5,$14,$A5,$14,$8E,$14,$9E,$14,$8E,$14,$9E,$14
	db $89,$18,$06,$18,$89,$18,$08,$18,$80,$18,$B9,$18,$89,$18,$08,$18
	db $89,$18,$06,$18,$81,$18,$B9,$18,$90,$18,$06,$18,$89,$18,$08,$18
	db $89,$18,$06,$18,$91,$18,$08,$18,$CC,$14,$CD,$14,$CE,$14,$CF,$14
	db $CE,$14,$7C,$16,$CE,$14,$7C,$16,$CE,$14,$CF,$14,$AB,$14,$AD,$14
	db $C8,$14,$C9,$14,$CA,$14,$CB,$14,$AE,$14,$AE,$14,$AF,$14,$AF,$14
	db $C4,$14,$D4,$14,$C5,$14,$D5,$14,$E4,$14,$F4,$14,$E5,$14,$F5,$14
	db $C6,$14,$D6,$14,$C7,$14,$D7,$14,$E6,$14,$F6,$14,$E7,$14,$F7,$14
	db $C0,$14,$D0,$14,$C1,$14,$D1,$14,$16,$14,$24,$14,$17,$14,$25,$14
	db $18,$14,$26,$14,$19,$14,$27,$14,$16,$1C,$24,$1C,$17,$1C,$25,$1C
	db $18,$1C,$26,$1C,$19,$1C,$27,$1C,$16,$14,$24,$14,$17,$14,$25,$14
	db $18,$14,$26,$14,$19,$14,$27,$14,$16,$1C,$24,$1C,$17,$1C,$25,$1C
	db $18,$1C,$26,$1C,$19,$1C,$27,$1C,$FC,$1C,$6A,$1C,$FC,$1C,$6B,$1C
	db $FC,$1C,$6A,$1C,$FC,$1C,$6B,$1C,$68,$1C,$78,$1C,$69,$1C,$79,$1C
	db $64,$1C,$74,$1C,$65,$1C,$75,$1C,$66,$1C,$76,$1C,$67,$1C,$77,$1C
	db $24,$14,$24,$14,$25,$14,$25,$14,$26,$14,$26,$14,$27,$14,$27,$14
	db $B8,$18,$B9,$18,$BA,$18,$B9,$18,$E0,$14,$F0,$14,$E1,$14,$F1,$14
	db $C2,$14,$D2,$14,$C3,$14,$D3,$14,$E2,$14,$F2,$14,$E3,$14,$F3,$14
	db $23,$18,$06,$18,$31,$18,$47,$18,$05,$1C,$06,$1C,$07,$1C,$08,$1C
	db $32,$18,$48,$18,$33,$18,$32,$18,$05,$14,$20,$14,$06,$14,$21,$14
	db $05,$1C,$06,$1C,$07,$1C,$20,$1C,$05,$1C,$21,$1C,$07,$1C,$08,$1C
	db $B4,$2C,$B7,$2C,$B5,$2C,$08,$2C,$B6,$2C,$B7,$2C,$07,$2C,$08,$2C
	db $86,$18,$96,$18,$87,$18,$97,$18,$AA,$18,$AC,$18,$8B,$18,$9C,$18
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$00,$E6,$0C,$FF,$00,$E7,$0C
	db $B3,$1C,$CD,$1C,$B3,$1C,$CF,$1C,$CC,$1C,$CD,$1C,$CE,$1C,$CF,$1C
	db $FC,$1C,$CD,$1C,$FC,$1C,$CF,$1C,$C5,$1C,$FE,$1C,$C5,$1C,$FE,$1C
	db $C6,$1C,$D6,$1C,$C7,$1C,$D7,$1C,$D4,$1C,$FE,$1C,$D4,$1C,$FE,$1C
	db $7A,$1E,$7A,$1E,$7A,$1E,$7A,$1E,$FC,$1C,$FE,$1C,$FC,$1C,$FE,$1C
	db $A6,$0C,$AE,$0C,$A7,$0C,$AF,$0C,$AC,$0C,$AE,$0C,$AD,$0C,$AF,$0C
	db $00,$18,$30,$18,$02,$18,$32,$18,$01,$18,$31,$18,$02,$18,$32,$18
	db $03,$18,$33,$18,$14,$18,$34,$18,$03,$18,$33,$18,$15,$18,$35,$18
	db $0A,$18,$2A,$18,$0D,$18,$2D,$18,$1A,$18,$2A,$18,$1D,$18,$2D,$18
	db $3A,$18,$0E,$18,$3D,$18,$2F,$18,$3A,$18,$1E,$18,$2F,$18,$3F,$18
	db $0A,$18,$2A,$18,$0B,$18,$2B,$18,$0C,$18,$2C,$18,$0D,$18,$2D,$18
	db $1A,$18,$2A,$18,$1B,$18,$2B,$18,$1C,$18,$2C,$18,$1D,$18,$2D,$18
	db $3A,$18,$0E,$18,$3B,$18,$0F,$18,$3C,$18,$2E,$18,$3D,$18,$2F,$18
	db $88,$1C,$89,$1C,$8A,$1C,$8B,$1C,$D7,$1C,$06,$1C,$D7,$1C,$08,$1C
	db $E0,$0C,$E1,$0C,$E2,$0C,$E3,$0C,$05,$1C,$06,$1C,$07,$1C,$08,$1C
	db $3A,$18,$1E,$18,$3B,$18,$1F,$18,$3C,$18,$3E,$18,$3D,$18,$3F,$18
	db $22,$18,$23,$18,$01,$18,$46,$18,$45,$18,$06,$18,$14,$18,$47,$18
	db $01,$18,$48,$18,$02,$18,$32,$18,$30,$18,$06,$18,$31,$18,$30,$18
	db $32,$18,$31,$18,$33,$18,$32,$18,$34,$18,$33,$18,$33,$18,$34,$18
	db $34,$18,$34,$18,$35,$18,$35,$18,$42,$14,$39,$18,$29,$18,$31,$18
	db $56,$18,$57,$18,$58,$18,$59,$18,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $70,$12,$72,$12,$71,$12,$73,$12,$FF,$1C,$FF,$1C,$FF,$1C,$FF,$1C
	db $24,$14,$16,$94,$25,$14,$17,$94,$26,$14,$18,$94,$27,$14,$19,$94

;--------------------------------------------------------------------

DATA_26B020:
	db $24,$5C,$9C,$E2,$24,$5F,$A6,$E2

;--------------------------------------------------------------------

	%ROUTINE_SMB3_InitializeTileset0ALevel_AirshipAndTank(NULLROM)			; $26B028

;--------------------------------------------------------------------

DATA_26B03D:
	db $00,$0F,$1E,$2D,$3C,$4B,$5A,$69

SMB3_ProcessAirshipAndTankResizableObjects:
.Main:
;$26B045
	LDA.b $0E
	AND.b #$E0
	LSR
	LSR
	LSR
	LSR
	LSR
	TAX
	LDA.w $0706
	LSR
	LSR
	LSR
	LSR
	CLC
	ADC.l DATA_26B03D,x
	TAX
	DEX
	TXA
	JSL.l SMB3_ExecutePtr_Long

DATA_26B062:
	dl CODE_26B1C2
	dl CODE_26B1FF
	dl CODE_26B1FF
	dl CODE_26B212
	dl CODE_26B24B
	dl CODE_26B287
	dl CODE_26B2FC
	dl CODE_26B318
	dl CODE_26B335
	dl CODE_26B355
	dl CODE_26B378
	dl CODE_26B38D
	dl CODE_26B3CA
	dl CODE_26B407
	dl CODE_26B407
	dl CODE_23AA8A
	dl CODE_23AA8A
	dl CODE_23AA8A
	dl CODE_23AA8A
	dl CODE_23AA8A
	dl CODE_23AA8A
	dl CODE_23AA8A
	dl CODE_23AA8A
	dl CODE_23A6C1
	dl CODE_23A6C1
	dl CODE_23A6C1
	dl CODE_23A728
	dl CODE_23A728
	dl CODE_23A81D
	dl CODE_23A81D
	dl CODE_23A8AE
	dl CODE_23A8AE
	dl CODE_23AE7B
	dl CODE_23AEC7
	dl CODE_23AEC7
	dl CODE_23AF2A
	dl CODE_23AF2A
	dl CODE_23AF2A
	dl CODE_23AF2A
	dl CODE_23AF2A
	dl CODE_23AF2A
	dl CODE_23AF2A
	dl CODE_23AF2A
	dl CODE_23AABC
	dl CODE_23A790
	dl CODE_26B408
	dl CODE_26B41D
	dl CODE_26B43A
	dl CODE_26B4D3
	dl CODE_26B480
	dl CODE_26B5A5
	dl CODE_26B5BE
	dl CODE_26B5EA
	dl CODE_26B620
	dl CODE_26B655
	dl CODE_26B66F
	dl CODE_26B849
	dl CODE_2A838C
	dl CODE_2A8338

;--------------------------------------------------------------------

CODE_26B113:
	LDA.b $0E
	AND.b #$E0
	LSR
	CLC
	ADC.w $0706
	TAX
	JSL.l SMB3_ExecutePtr_Long

DATA_26B121:
	dl CODE_26B51E
	dl CODE_26B51E
	dl CODE_26B51E
	dl CODE_26B51E
	dl CODE_26B51E
	dl CODE_26B51E
	dl CODE_26B51E
	dl CODE_26B51E
	dl CODE_26B51E
	dl CODE_26B51E
	dl CODE_26B543
	dl CODE_26B548
	dl CODE_26B573
	dl CODE_26B578
	dl CODE_26B581
	dl CODE_26B68D
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23AA47
	dl CODE_23A943
	dl CODE_26B58A
	dl CODE_26B58A
	dl CODE_26B6A3
	dl CODE_26B707
	dl CODE_26B7B0
	dl CODE_26B7DC
	dl CODE_26B7E3
	dl CODE_26B811
	dl CODE_26B811

;--------------------------------------------------------------------

DATA_26B1BA:
	db $E2,$F9

DATA_26B1BC:
	db $E3,$FA

DATA_26B1BE:
	db $E4,$FB

DATA_26B1C0:
	db $E5,$FC

CODE_26B1C2:
	LDA.w $0706
	AND.b #$0F
	STA.b $02
	LDX.b #$00
CODE_26B1CB:
	LDY.w $0700
	LDA.l DATA_26B1BA,x
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	DEC.b $02
	BEQ.b CODE_26B1F8
CODE_26B1DC:
	LDA.l DATA_26B1BC,x
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	DEC.b $02
	BEQ.b CODE_26B1F8
	LDA.l DATA_26B1BE,x
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	DEC.b $02
	BNE.b CODE_26B1DC
CODE_26B1F8:
	LDA.l DATA_26B1C0,x
	STA.b [$2E],y
	RTL

;--------------------------------------------------------------------

CODE_26B1FF:
	JSR.w CODE_26B865
	LDX.b #$00
	LDA.w $0706
	SEC
	SBC.b #$20
	LSR
	LSR
	LSR
	LSR
	TAX
	JMP.w CODE_26B1CB

;--------------------------------------------------------------------

CODE_26B212:
	LDA.w $0706
	AND.b #$0F
	TAX
CODE_26B218:
	LDY.w $0700
	LDA.b #$E6
	STA.b [$2E],y
	JMP.w CODE_26B238

CODE_26B222:
	LDA.b #$E7
	STA.b [$2E],y
	TYA
	CLC
	ADC.b #$10
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	DEX
	BEQ.b CODE_26B246
	LDA.b #$E8
	STA.b [$2E],y
CODE_26B238:
	TYA
	CLC
	ADC.b #$10
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	DEX
	BNE.b CODE_26B222
CODE_26B246:
	LDA.b #$E9
	STA.b [$2E],y
	RTL

;--------------------------------------------------------------------

CODE_26B24B:
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDA.w $0706
	AND.b #$0F
	STA.b $02
CODE_26B25A:
	LDX.b #$02
	JSL.l CODE_26B218
	LDA.b $00
	STA.b $2E
	LDA.b $01
	STA.b $2F
	LDY.w $0700
	JSL.l CODE_23BEBB
	STY.w $0700
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	DEC.b $02
	BPL.b CODE_26B25A
	RTL

;--------------------------------------------------------------------

DATA_26B27F:
	db $EA,$EB

DATA_26B281:
	db $EC,$ED

DATA_26B283:
	db $EE,$EF

DATA_26B285:
	db $F4,$F5

CODE_26B287:
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDA.w $0706
	AND.b #$0F
	STA.b $02
	LDX.b #$00
CODE_26B298:
	LDA.b $02
	STA.b $03
	LDY.w $0700
	LDA.l DATA_26B27F,x
	STA.b [$2E],y
	TYA
	CLC
	ADC.b #$10
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	DEC.b $03
	BEQ.b CODE_26B2DE
CODE_26B2B4:
	LDA.l DATA_26B281,x
	STA.b [$2E],y
	TYA
	CLC
	ADC.b #$10
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	DEC.b $03
	BEQ.b CODE_26B2DE
	LDA.l DATA_26B283,x
	STA.b [$2E],y
	TYA
	CLC
	ADC.b #$10
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	DEC.b $03
	BNE.b CODE_26B2B4
CODE_26B2DE:
	LDA.l DATA_26B285,x
	STA.b [$2E],y
	LDA.b $00
	STA.b $2E
	LDA.b $01
	STA.b $2F
	LDY.w $0700
	JSL.l CODE_23BEBB
	STY.w $0700
	INX
	CPX.b #$02
	BNE.b CODE_26B298
	RTL

;--------------------------------------------------------------------

CODE_26B2FC:
	LDA.w $0706
	AND.b #$0F
	TAX
	LDY.w $0700
	LDA.b #$9D
	STA.b [$2E],y
	JMP.w CODE_26B310

CODE_26B30C:
	LDA.b #$81
	STA.b [$2E],y
CODE_26B310:
	JSL.l CODE_23BEBB
	DEX
	BPL.b CODE_26B30C
	RTL

;--------------------------------------------------------------------

CODE_26B318:
	LDA.w $0706
	AND.b #$0F
	TAX
	LDY.w $0700
	CPX.b #$00
	BEQ.b CODE_26B330
CODE_26B325:
	LDA.b #$81
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	DEX
	BNE.b CODE_26B325
CODE_26B330:
	LDA.b #$9D
	STA.b [$2E],y
	RTL

;--------------------------------------------------------------------

CODE_26B335:
	LDA.w $0706
	AND.b #$0F
	TAX
	LDY.w $0700
CODE_26B33E:
	LDA.b #$82
	STA.b [$2E],y
	TYA
	CLC
	ADC.b #$10
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	DEX
	BNE.b CODE_26B33E
	LDA.b #$9C
	STA.b [$2E],y
	RTL

;--------------------------------------------------------------------

CODE_26B355:
	LDA.w $0706
	AND.b #$0F
	TAX
	LDY.w $0700
	LDA.b #$9C
	STA.b [$2E],y
	JMP.w CODE_26B369

CODE_26B365:
	LDA.b #$82
	STA.b [$2E],y
CODE_26B369:
	TYA
	CLC
	ADC.b #$10
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	DEX
	BPL.b CODE_26B365
	RTL

;--------------------------------------------------------------------

CODE_26B378:
	LDA.w $0706
	AND.b #$0F
	TAX
	LDY.w $0700
CODE_26B381:
	LDA.b #$9E
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	DEX
	BPL.b CODE_26B381
	RTL

;--------------------------------------------------------------------

CODE_26B38D:
	LDA.w $0706
	AND.b #$0F
	TAX
	LDY.w $0700
	LDA.b [$2E],y
	CMP.b #$9E
	BNE.b CODE_26B3A1
	LDA.b #$9F
	JMP.w CODE_26B3A3

CODE_26B3A1:
	LDA.b #$87
CODE_26B3A3:
	STA.b [$2E],y
	JMP.w CODE_26B3AC

CODE_26B3A8:
	LDA.b #$88
	STA.b [$2E],y
CODE_26B3AC:
	TYA
	CLC
	ADC.b #$10
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	DEX
	BNE.b CODE_26B3A8
	LDA.b [$2E],y
	CMP.b #$9E
	BNE.b CODE_26B3C5
	LDA.b #$A1
	JMP.w CODE_26B3C7

CODE_26B3C5:
	LDA.b #$89
CODE_26B3C7:
	STA.b [$2E],y
	RTL

;--------------------------------------------------------------------

CODE_26B3CA:
	LDA.w $0706
	AND.b #$0F
	TAX
	LDY.w $0700
	LDA.b [$2E],y
	CMP.b #$9E
	BNE.b CODE_26B3DE
	LDA.b #$A0
	JMP.w CODE_26B3E0

CODE_26B3DE:
	LDA.b #$8A
CODE_26B3E0:
	STA.b [$2E],y
	JMP.w CODE_26B3E9

CODE_26B3E5:
	LDA.b #$8B
	STA.b [$2E],y
CODE_26B3E9:
	TYA
	CLC
	ADC.b #$10
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	DEX
	BNE.b CODE_26B3E5
	LDA.b [$2E],y
	CMP.b #$9E
	BNE.b CODE_26B402
	LDA.b #$A2
	JMP.w CODE_26B404

CODE_26B402:
	LDA.b #$8C
CODE_26B404:
	STA.b [$2E],y
	RTL

;--------------------------------------------------------------------

CODE_26B407:
	RTL

;--------------------------------------------------------------------

CODE_26B408:
	LDA.w $0706
	AND.b #$0F
	TAX
	LDY.w $0700
CODE_26B411:
	LDA.b #$58
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	DEX
	BPL.b CODE_26B411
	RTL

;--------------------------------------------------------------------

CODE_26B41D:
	LDA.w $0706
	AND.b #$0F
	TAX
	LDY.w $0700
CODE_26B426:
	LDA.b #$C6
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	DEX
	BNE.b CODE_26B426
	LDA.b #$C7
	STA.b [$2E],y
	RTL

;--------------------------------------------------------------------

DATA_26B436:
	db $33,$35

DATA_26B438:
	db $34,$36

CODE_26B43A:
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDX.b #$00
	LDA.w $0706
	AND.b #$0F
	STA.b $02
	LDY.w $0700
CODE_26B44E:
	LDA.b $02
	STA.b $03
CODE_26B452:
	LDA.l DATA_26B436,x
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	DEC.b $03
	BMI.b CODE_26B46E
	LDA.l DATA_26B438,x
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	DEC.b $03
	BPL.b CODE_26B452
CODE_26B46E:
	JSR.w CODE_26B881
	INX
	CPX.b #$02
	BNE.b CODE_26B44E
	RTL

;--------------------------------------------------------------------

DATA_26B477:
	db $5C,$49,$4C

DATA_26B47A:
	db $5D,$4A,$4D

DATA_26B47D:
	db $5E,$4B,$4E

CODE_26B480:
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDA.w $0706
	AND.b #$0F
	STA.b $02
	LDY.w $0700
	LDX.b #$00
	LDA.b #$03
	STA.b $04
CODE_26B498:
	LDA.b $02
	STA.b $03
	LDA.l DATA_26B477,x
	STA.b [$2E],y
	JMP.w CODE_26B4AB

CODE_26B4A5:
	LDA.l DATA_26B47A,x
	STA.b [$2E],y
CODE_26B4AB:
	JSL.l CODE_23BEBB
	DEC.b $03
	BNE.b CODE_26B4A5
	LDA.l DATA_26B47D,x
	STA.b [$2E],y
	JSR.w CODE_26B881
	LDX.b #$01
	DEC.b $04
	BNE.b CODE_26B4C7
	LDX.b #$02
	JMP.w CODE_26B498

CODE_26B4C7:
	BPL.b CODE_26B498
	RTL

;--------------------------------------------------------------------

DATA_26B4CA:
	db $A3,$8D,$8F

DATA_26B4CD:
	db $A4,$86,$90

DATA_26B4D0:
	db $A5,$8E,$91

CODE_26B4D3:
	JSR.w CODE_26B865
	LDA.w $0706
	AND.b #$0F
	STA.b $04
	LDY.w $0700
	LDX.b #$00
CODE_26B4E2:
	LDA.b $02
	STA.b $03
	LDA.l DATA_26B4CA,x
	STA.b [$2E],y
	JMP.w CODE_26B4F5

CODE_26B4EF:
	LDA.l DATA_26B4CD,x
	STA.b [$2E],y
CODE_26B4F5:
	JSL.l CODE_23BEBB
	DEC.b $03
	BNE.b CODE_26B4EF
	LDA.l DATA_26B4D0,x
	STA.b [$2E],y
	JSR.w CODE_26B881
	LDX.b #$01
	DEC.b $04
	BNE.b CODE_26B511
	LDX.b #$02
	JMP.w CODE_26B4E2

CODE_26B511:
	BPL.b CODE_26B4E2
	RTL

;--------------------------------------------------------------------

DATA_26B514:
	db $83,$A6,$A7,$F6,$C8,$84,$24,$25
	db $26,$27

CODE_26B51E:
	LDX.w $0706
	LDY.w $0700
	LDA.l DATA_26B514,x
	STA.b [$2E],y
	RTL

;--------------------------------------------------------------------

DATA_26B52B:
	db $9A,$9B,$92,$93,$94,$95,$9A,$9B
	db $96,$97,$98,$99,$A8,$AA,$A9,$AB
	db $AC,$BE,$BD,$BF,$4F,$51,$52,$54

CODE_26B543:
	LDX.b #$00
	JMP.w CODE_26B54A

CODE_26B548:
	LDX.b #$06
CODE_26B54A:
	LDA.b #$06
	STA.b $02
CODE_26B54E:
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDY.w $0700
CODE_26B559:
	LDA.l DATA_26B52B,x
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	DEC.b $02
	INX
	TXA
	AND.b #$01
	BNE.b CODE_26B559
	JSR.w CODE_26B881
	LDA.b $02
	BNE.b CODE_26B559
	RTL

;--------------------------------------------------------------------

CODE_26B573:
	LDX.b #$0C
	JMP.w CODE_26B57A

CODE_26B578:
	LDX.b #$10
CODE_26B57A:
	LDA.b #$04
	STA.b $02
	JMP.w CODE_26B54E

;--------------------------------------------------------------------

CODE_26B581:
	LDX.b #$14
	JMP.w CODE_26B57A

;--------------------------------------------------------------------

DATA_26B586:
	db $F7,$C0

DATA_26B588:
	db $F8,$C2

CODE_26B58A:
	LDY.w $0700
	LDA.w $0706
	SEC
	SBC.b #$0A
	TAX
	LDA.l DATA_26B586,x
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	LDA.l DATA_26B588,x
	STA.b [$2E],y
	RTL

;--------------------------------------------------------------------

CODE_26B5A5:
	LDA.w $0706
	AND.b #$0F
	TAX
	LDY.w $0700
CODE_26B5AE:
	LDA.b #$C9
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	JSL.l CODE_23BEBB
	DEX
	BPL.b CODE_26B5AE
	RTL

;--------------------------------------------------------------------

CODE_26B5BE:
	JSR.w CODE_26B865
	LDX.b $02
	LDY.w $0700
	LDA.b #$F6
	JMP.w CODE_26B5D8

CODE_26B5CB:
	LDA.b #$E3
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	DEX
	BEQ.b CODE_26B5E1
	LDA.b #$E4
CODE_26B5D8:
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	DEX
	BNE.b CODE_26B5CB
CODE_26B5E1:
	LDA.b #$FE
	STA.b [$2E],y
	RTL

;--------------------------------------------------------------------

DATA_26B5E6:
	db $29,$2B

DATA_26B5E8:
	db $28,$2A

CODE_26B5EA:
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDA.w $0706
	AND.b #$0F
	STA.b $02
	LDX.b #$00
	LDY.w $0700
CODE_26B5FE:
	LDA.b $02
	STA.b $03
	LDA.l DATA_26B5E6,x
	JMP.w CODE_26B60D

CODE_26B609:
	LDA.l DATA_26B5E8,x
CODE_26B60D:
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	DEC.b $03
	BPL.b CODE_26B609
	JSR.w CODE_26B881
	INX
	CPX.b #$02
	BNE.b CODE_26B5FE
	RTL

;--------------------------------------------------------------------

CODE_26B620:
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDA.w $0706
	AND.b #$0F
	STA.b $02
	LDX.b #$00
	LDY.w $0700
CODE_26B634:
	LDA.b $02
	STA.b $03
CODE_26B638:
	LDA.l DATA_26B5E8,x
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	DEC.b $03
	BNE.b CODE_26B638
	LDA.l DATA_26B5E6,x
	STA.b [$2E],y
	JSR.w CODE_26B881
	INX
	CPX.b #$02
	BNE.b CODE_26B634
	RTL

;--------------------------------------------------------------------

CODE_26B655:
	LDA.w $0706
	AND.b #$0F
	TAX
	LDY.w $0700
	LDA.b #$2C
	JMP.w CODE_26B665

CODE_26B663:
	LDA.b #$2D
CODE_26B665:
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	DEX
	BPL.b CODE_26B663
	RTL

;--------------------------------------------------------------------

CODE_26B66F:
	LDA.w $0706
	AND.b #$0F
	TAX
	LDY.w $0700
	LDA.b #$AC
	JMP.w CODE_26B67F

CODE_26B67D:
	LDA.b #$A3
CODE_26B67F:
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	DEX
	BNE.b CODE_26B67D
	LDA.b #$BE
	STA.b [$2E],y
	RTL

;--------------------------------------------------------------------

CODE_26B68D:
	LDA.b #$0E
	STA.b $00
	LDY.w $0700
CODE_26B694:
	LDA.b #$80
	STA.b [$2E],y
	INY
	TYA
	AND.b #$0F
	BNE.b CODE_26B694
	DEC.b $00
	BPL.b CODE_26B694
	RTL

;--------------------------------------------------------------------

CODE_26B6A3:
	LDX.b #$00
	JMP.w CODE_26B709

DATA_26B6A8:
	db $06,$06,$06,$C3,$06,$06,$FF,$06
	db $06,$FD,$E3,$E5,$06,$FF,$2C,$2D
	db $E2,$E4,$FE,$06,$FF,$06,$FD,$E4
	db $E3,$E4,$E5,$FF,$06,$AC,$A3,$A3
	db $A3,$BE,$FF,$06,$06,$06,$06,$06
	db $C3,$06,$BD,$06,$06,$06,$FF,$06
	db $06,$06,$FD,$E3,$E4,$E3,$E5,$06
	db $06,$06,$FF,$2C,$2D,$2D,$E2,$E3
	db $E4,$E3,$FE,$06,$06,$06,$FF,$06
	db $FD,$E3,$E4,$E3,$E4,$E3,$E4,$E3
	db $E4,$FE,$FF,$06,$AC,$A3,$A3,$A3
	db $A3,$A3,$A3,$A3,$BE,$06,$FF

CODE_26B707:
	LDX.b #$23
CODE_26B709:
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDA.b #$04
	STA.b $03
CODE_26B715:
	LDY.w $0700
CODE_26B718:
	LDA.l DATA_26B6A8,x
	CMP.b #$FF
	BEQ.b CODE_26B72A
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	INX
	JMP.w CODE_26B718

CODE_26B72A:
	JSR.w CODE_26B881
	INX
	DEC.b $03
	BPL.b CODE_26B715
	RTL

;--------------------------------------------------------------------

DATA_26B733:
	db $F6,$E3,$E4,$E3,$E4,$E3,$E4,$E3
	db $E4,$E3,$E4,$E3,$E4,$E3,$E4,$E3
	db $E4,$E3,$E4,$E3,$E4,$E3,$E4,$E5
	db $FF,$06,$F6,$E3,$E4,$E3,$E4,$E3
	db $E4,$E3,$E4,$E3,$E4,$E3,$E4,$E3
	db $E4,$E3,$E4,$E3,$E4,$E3,$E4,$E3
	db $E5,$FF,$06,$06,$F6,$E3,$E4,$E3
	db $E4,$E3,$E4,$E3,$E4,$E3,$E4,$E3
	db $E4,$E3,$E4,$E3,$E4,$E3,$E4,$E3
	db $E4,$E5,$FF,$06,$06,$06,$F7,$F8
	db $E3,$E4,$E3,$E4,$E3,$E4,$E3,$E4
	db $E3,$E4,$E3,$E4,$E3,$E4,$E3,$E4
	db $E3,$E4,$E5,$FF,$06,$06,$06,$06
	db $06,$C0,$C2,$FA,$FB,$FA,$FB,$FA
	db $FB,$FA,$FB,$FA,$FB,$FA,$FB,$FA
	db $FB,$FA,$FB,$FC,$FF

CODE_26B7B0:
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDY.w $0700
	LDX.b #$00
	LDA.b #$04
	STA.b $02
CODE_26B7C1:
	LDA.l DATA_26B733,x
	CMP.b #$FF
	BEQ.b CODE_26B7D3
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	INX
	JMP.w CODE_26B7C1

CODE_26B7D3:
	INX
	JSR.w CODE_26B881
	DEC.b $02
	BPL.b CODE_26B7C1
	RTL

;--------------------------------------------------------------------

CODE_26B7DC:
	LDX.b #$00
	JMP.w CODE_26B7E5

DATA_26B7E1:
	db $FD,$C3

CODE_26B7E3:
	LDX.b #$01
CODE_26B7E5:
	LDY.w $0700
	LDA.l DATA_26B7E1,x
	STA.b [$2E],y
	RTL

;--------------------------------------------------------------------

DATA_26B7EF:
	db $06,$06,$C3,$06,$A6,$FF,$F6,$E3
	db $E4,$E3,$E5,$FF,$06,$06,$06,$E6
	db $06,$FF,$06,$FD,$E3,$E5,$A6,$FF
	db $F6,$E3,$E4,$E3,$E5,$FF

DATA_26B80D:
	db $00,$0C

DATA_26B80F:
	db $01,$02

CODE_26B811:
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	LDA.w $0706
	SEC
	SBC.b #$01
	TAX
	LDA.l DATA_26B80F,x
	STA.b $02
	LDA.l DATA_26B80D,x
	TAX
	LDY.w $0700
CODE_26B82E:
	LDA.l DATA_26B7EF,x
	CMP.b #$FF
	BEQ.b CODE_26B840
	STA.b [$2E],y
	JSL.l CODE_23BEBB
	INX
	JMP.w CODE_26B82E

CODE_26B840:
	INX
	JSR.w CODE_26B881
	DEC.b $02
	BPL.b CODE_26B82E
	RTL

;--------------------------------------------------------------------

CODE_26B849:
	LDA.w $0706
	AND.b #$0F
	TAX
	LDY.w $0700
CODE_26B852:
	LDA.b #$37
	STA.b [$2E],y
	TYA
	CLC
	ADC.b #$10
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	DEX
	BPL.b CODE_26B852
	RTL

;--------------------------------------------------------------------

CODE_26B865:
	LDY.b #$00
	LDA.b [!RAM_SMB3_Level_LevelDataPtrLo],y
	STA.b $02
	LDA.b !RAM_SMB3_Level_LevelDataPtrLo
	CLC
	ADC.b #$01
	STA.b !RAM_SMB3_Level_LevelDataPtrLo
	LDA.b !RAM_SMB3_Level_LevelDataPtrHi
	ADC.b #$00
	STA.b !RAM_SMB3_Level_LevelDataPtrHi
	LDA.b $2E
	STA.b $00
	LDA.b $2F
	STA.b $01
	RTS

;--------------------------------------------------------------------

CODE_26B881:
	LDA.b $00
	STA.b $2E
	LDA.b $01
	STA.b $2F
	LDA.w $0700
	CLC
	ADC.b #$10
	STA.w $0700
	TAY
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	STA.b $01
	RTS

;--------------------------------------------------------------------

	%DATATABLE_RT07_SMB3_LevelData(NULLROM)				; $26B89C
	%FREE_BYTES(NULLROM, 146, $FF)						; $26C96E

;--------------------------------------------------------------------

SMB3_BattleMode_CheckIfPlayerHas3Cards:
.Main:
;$26CA00
	JSR.w CODE_26CA7C
	LDX.b #$00
	TXY
	JSR.w CODE_26CA0D
	LDX.b #SMB3_IndividualPlayerData[$01].ReserveSlots-SMB3_IndividualPlayerData[$00].ReserveSlots
	LDY.b #$01
CODE_26CA0D:
	STY.b $00
	STX.b $01
	LDA.w SMB3_IndividualPlayerData[$00].CardSlots,x
	BEQ.b CODE_26CA20
	LDA.w SMB3_IndividualPlayerData[$00].CardSlots+$01,x
	BEQ.b CODE_26CA20
	LDA.w SMB3_IndividualPlayerData[$00].CardSlots+$02,x
	BNE.b CODE_26CA21
CODE_26CA20:
	RTS

CODE_26CA21:
	LDY.w SMB3_IndividualPlayerData[$00].CardSlots,x
	LDA.w DATA_21EC72-$01,y
	LDY.w SMB3_IndividualPlayerData[$00].CardSlots+$01,x
	ORA.w DATA_21EC72-$01,y
	LDY.w SMB3_IndividualPlayerData[$00].CardSlots+$02,x
	ORA.w DATA_21EC72-$01,y
	TAY
	LDX.b $00
	LDA.w DATA_21EC62-$01,y
	STA.w !RAM_SMB3_Global_SoundCh3
	LDA.w DATA_21EC6A-$01,y
	STA.w $19A1,x
	LDA.w !RAM_SMB3_BattleMode_MariosXPosLo,x
	STA.w $19A5,x
	LDA.w !RAM_SMB3_BattleMode_MariosYPosLo,x
	SEC
	SBC.b #$08
	STA.w $19A3,x
	LDA.w !RAM_SMB3_BattleMode_MariosPowerUp,x
	BNE.b CODE_26CA5F
	LDA.w $19A3,x
	CLC
	ADC.b #$10
	STA.w $19A3,x
CODE_26CA5F:
	LDA.w DATA_21EC5A-$01,y
	PHA
	STA.w $19A7,x
	CLC
	ADC.w !RAM_SMB3_Level_Player_MariosLives,x
	STA.w !RAM_SMB3_Level_Player_MariosLives,x
	PLA
	BEQ.b CODE_26CA7B
	LDX.b $01
	STZ.w SMB3_IndividualPlayerData[$00].CardSlots,x
	STZ.w SMB3_IndividualPlayerData[$00].CardSlots+$01,x
	STZ.w SMB3_IndividualPlayerData[$00].CardSlots+$02,x
CODE_26CA7B:
	RTS

CODE_26CA7C:
	LDX.b #$01
CODE_26CA7E:
	STX.b $00
	JSR.w CODE_26CA87
	DEX
	BPL.b CODE_26CA7E
	RTS

CODE_26CA87:
	LDA.w $19A1,x
	BEQ.b CODE_26CA93
	CMP.b #$20
	BCC.b CODE_26CA94
	STZ.w $19A1,x
CODE_26CA93:
	RTS

CODE_26CA94:
	LDA.w $0076
	BNE.b CODE_26CAA1
	LDA.b !RAM_SMB3_Global_FrameCounter
	LSR
	BCC.b CODE_26CAA1
	INC.w $19A1,x
CODE_26CAA1:
	LDY.w DATA_21EC7A,x
	LDA.w $19A3,x
	SEC
	SBC.w $19A1,x
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	LDA.w $19A5,x
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	LDA.b #$22
	STA.w SMB3_OAMBuffer[$00].Prop,y
	LDA.w $19A7,x
	TAX
	LDA.w DATA_21EC75-$01,x
	STA.w SMB3_OAMBuffer[$00].Tile,y
	LDA.w $19A5,x
	SEC
	SBC.b #$08
	CMP.b #$F1
	BCC.b CODE_26CAF0
	LDA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	LDA.w SMB3_OAMBuffer[$00].YDisp,y
	STA.w SMB3_OAMBuffer[$01].YDisp,y
	LDA.w SMB3_OAMBuffer[$00].Tile,y
	STA.w SMB3_OAMBuffer[$01].Tile,y
	LDA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$01].Prop,y
	TYA
	LSR
	LSR
	TAY
	LDA.b #$03
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	BRA.b CODE_26CAF4

CODE_26CAF0:
	TYA
	LSR
	LSR
	TAY
CODE_26CAF4:
	LDA.b #$02
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	LDX.b $00
	RTS

;--------------------------------------------------------------------

SMB3_BattleMode_DrawCollectedCards:
.Main:
;$26CAFC
	STZ.b $00
	LDA.b #$02
CODE_26CB00:
	STA.b $01
	LDX.b #$02
CODE_26CB04:
	LDY.b $01
	STX.b $03
	LDA.w SMB3_IndividualPlayerData[$00].CardSlots,y
	BEQ.b CODE_26CB51
	TAY
	LDA.w DATA_21EC90,y
	LDY.b $00
	STA.w SMB3_OAMBuffer[$78].Tile,y
	LDA.b #$D0
	STA.w SMB3_OAMBuffer[$78].YDisp,y
	LDX.b #$00
	CPY.b #$04
	BEQ.b CODE_26CB26
	INX
	CPY.b #$0C
	BNE.b CODE_26CB32
CODE_26CB26:
	LDA.w $1989,x
	BEQ.b CODE_26CB32
	LSR
	LSR
	LSR
	AND.b #$0E
	BRA.b CODE_26CB34

CODE_26CB32:
	LDA.b #$24
CODE_26CB34:
	STA.w SMB3_OAMBuffer[$78].Prop,y
	LDX.b $03
	LDA.b #$10
	CPY.b #$0C
	BCC.b CODE_26CB41
	LDA.b #$C0
CODE_26CB41:
	CLC
	ADC.w DATA_21EC8E,x
	STA.w SMB3_OAMBuffer[$78].XDisp,y
	TYA
	LSR
	LSR
	TAY
	LDA.b #$02
	STA.w SMB3_OAMTileSizeBuffer[$78].Slot,y
CODE_26CB51:
	LDA.b $00
	CLC
	ADC.b #$04
	STA.b $00
	DEC.b $01
	DEX
	BMI.b CODE_26CB5F
	BRA.b CODE_26CB04

CODE_26CB5F:
	LDA.b #$0C
	STA.b $00
	LDA.b #SMB3_IndividualPlayerData[$01].ReserveSlots-SMB3_IndividualPlayerData[$00].ReserveSlots+$02
	LDY.b $01
	BMI.b CODE_26CB00
	RTS

;--------------------------------------------------------------------

; Note: Routine that updates the battle mode coin counters

CODE_26CB6A:
	PHX
	REP.b #$30
	LDA.w #$0010
	STA.b $00
	LDY.w #$0008
	BRA.b CODE_26CB82

CODE_26CB77:
	PHX
	REP.b #$30
	LDA.w #$0008
	STA.b $00
	LDY.w #$0000
CODE_26CB82:
	LDX.w !RAM_SMB3_Global_StripeImageUploadIndexLo
CODE_26CB85:
	LDA.w DATA_21EC7C,y
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,x
	INX
	INX
	INY
	INY
	CPY.b $00
	BNE.b CODE_26CB85
	SEP.b #$30
	LDY.b $0F
	LDA.w DATA_21EC8C,y
	CLC
	ADC.w !RAM_SMB3_BattleMode_MariosCoinCount,y
	STA.w $1602-$07,x
	TYA
	BNE.b CODE_26CBA9
	LDA.b #$18
	STA.w $1602-$03,x
CODE_26CBA9:
	DEX
	DEX
	STX.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	PLX
	RTS

;--------------------------------------------------------------------

SMB3_BattleMode_ProcessBattleMode:
.Main:
;$26CBB0
	LDA.w !RAM_SMB3_BattleMode_PlayerHasWonTimer
	ORA.w $1A28
	BNE.b CODE_26CBF6
	LDA.b !RAM_SMB3_Global_ControllerPress1P1
	ORA.b !RAM_SMB3_Global_ControllerPress1P2
	AND.b #!Joypad_Start>>8
	BEQ.b CODE_26CBF6
	LDA.w $0076
	EOR.b #$01
	STA.w $0076
	BNE.b CODE_26CBE1
	LDA.b #!Define_SMB3_LevelMusic_RestoreVolumeCommand
	STA.w !RAM_SMB3_Global_MusicCh1
	LDA.b #!Define_SMAS_Sound0060_Pause1
	STA.w !RAM_SMB3_Global_SoundCh1
	LDX.b #$0E
CODE_26CBD6:
	LDA.w $198B,x
	STA.w $18CB,x
	DEX
	BPL.b CODE_26CBD6
	BMI.b CODE_26CBF6						; Note: This will always branch

CODE_26CBE1:
	LDA.b #!Define_SMB3_LevelMusic_LowerVolumeCommand
	STA.w !RAM_SMB3_Global_MusicCh1
	LDA.b #!Define_SMAS_Sound0060_Pause1
	STA.w !RAM_SMB3_Global_SoundCh1
	LDX.b #$0E
CODE_26CBED:
	LDA.w $18CB,x
	STA.w $198B,x
	DEX
	BPL.b CODE_26CBED
CODE_26CBF6:
	LDA.w $0076
	BEQ.b CODE_26CC05
	LDX.b #$0E
	LDA.b #$FF
CODE_26CBFF:
	STA.w $18CB,x
	DEX
	BPL.b CODE_26CBFF
CODE_26CC05:
	JSR.w CODE_26CC09
	RTL

CODE_26CC09:
	LDA.w !RAM_SMB3_BattleMode_CurrentState						; Optimization: Unnecessary absolute addressing
	ASL
	TAX
	JMP.w (DATA_26CC11,x)

DATA_26CC11:
	dw SMB3_BattleMode_State00_InitializeRound_Main
	dw SMB3_BattleMode_State01_ProcessGameplay_Main

;--------------------------------------------------------------------

SMB3_BattleMode_ResetCoinCounterPalettes:
.Main:
;$26CC15
	LDX.b #$40
	LDY.b #$00
	JSR.w CODE_26F6EF
	LDX.b #$50
	LDY.b #$20
	JSR.w CODE_26F6EF
	RTL

;--------------------------------------------------------------------

SMB3_BattleMode_State00_InitializeRound:
.Main:
;$26CC24
	REP.b #$30
	LDA.w #$0010
	STA.b !RAM_SMB3_BattleMode_MariosPose
	STA.b !RAM_SMB3_BattleMode_LuigisPose
	LDY.w #$0200
	LDA.w #$0000
CODE_26CC33:
	STA.w !RAM_SMB3_BattleMode_MariosState,y
	DEY
	DEY
	BPL.b CODE_26CC33
	SEP.b #$30
	LDA.w !RAM_SMB3_BattleMode_CurrentStage
	BNE.b CODE_26CC4C
	STZ.w $1A69
	LDA.b #$04
	STA.w $1A68
	STZ.w !RAM_SMB3_BattleMode_DisplayRoundNumberTextFlag
CODE_26CC4C:
	LDA.b #$FF
	STA.w !RAM_SMB3_BattleSmokeSpr_AnimationFrame
	STA.w !RAM_SMB3_BattleSmokeSpr_AnimationFrame+$01
	STA.w !RAM_SMB3_BattleSmokeSpr_AnimationFrame+$02
	STA.w !RAM_SMB3_BattleSmokeSpr_AnimationFrame+$03
	STA.w !RAM_SMB3_BattleSmokeSpr_AnimationFrame+$04
	STA.w !RAM_SMB3_BattleSmokeSpr_AnimationFrame+$05
	STA.w !RAM_SMB3_BattleSmokeSpr_AnimationFrame+$06
	STA.w !RAM_SMB3_BattleSmokeSpr_AnimationFrame+$07
	STA.w $1A28
	STZ.w $19C0
	STZ.w $1A35
	STZ.w $1A2A
	STZ.w !RAM_SMB3_BattleMode_CoinWinPaletteAnimationIndex
	LDA.b #$01
	STA.w !RAM_SMB3_BattleMode_MariosPowerUp
	STA.w !RAM_SMB3_BattleMode_LuigisPowerUp
	STA.w !RAM_SMB3_BattleMode_MushroomSpawnCounter
	STZ.w !RAM_SMB3_BattleMode_CoinWinTileAnimationIndex
	LDA.b #$04
	STA.w $1A33
	STA.w !RAM_SMB3_BattleMode_RoundNumberTextAnimationFrameCounter
	STZ.w !RAM_SMB3_BattleMode_RoundNumberTextAnimationFrame
	LDA.b #$F0
	STA.w $1A37
	STZ.w $1A3E
	STZ.w $1A31
	STZ.w $1A32
	STZ.w !RAM_SMB3_BattleMode_PreventMysteryMushroomSpawns
	STZ.w !RAM_SMB3_BattleMode_PreventMushroomSpawns
	STZ.w $19BC
	LDA.b !RAM_SMB3_Global_FrameCounter
	ORA.b #$91
	STA.w $192B
	INC.w !RAM_SMB3_BattleMode_CurrentState						; Optimization: Unnecessary absolute addressing
	PHB										;\ Also, what is the point of this bank wrapper?
	PHK										;| Was this mode originally going to have variable stages?
	PLB										;|
	LDA.w !RAM_SMB3_BattleMode_CurrentStage						;|
	STA.w $199A									;|
	PLB										;/
	LDX.b #$40
	LDY.b #$00
	JSR.w CODE_26F6EF
	LDX.b #$50
	LDY.b #$20
	JSR.w CODE_26F6EF
	STZ.w $19BB
	STZ.w $19BD
CODE_26CCCD:
	JSR.w CODE_26CCE1
	LDA.b $01
	STA.w !RAM_SMB3_BattleMode_HiddenMushroomXPos
	LDA.b $02
	STA.w !RAM_SMB3_BattleMode_HiddenMushroomYPos
	INC.w $19BB
	LDX.w $190E
	RTS

;--------------------------------------------------------------------

CODE_26CCE1:
	JSL.l CODE_25F805
	AND.b #$0F
	CMP.b #$0C
	BCS.b CODE_26CCE1
	STA.b $00
	JSL.l CODE_25F805
	AND.b #$03
	BEQ.b CODE_26CD18
	CMP.b #$03
	BEQ.b CODE_26CD18
	LDA.b $00
	CMP.b #$0A
	BCC.b CODE_26CD0A
	CLC
	ADC.b #$04
CODE_26CD02:
	PHA
	LDA.b #$70
	STA.b $02
	PLA
	BRA.b CODE_26CD28

CODE_26CD0A:
	CMP.b #$02
	BCC.b CODE_26CD02
	PHA
	LDA.b #$60
	STA.b $02
	PLA
	INC
	INC
	BRA.b CODE_26CD28

CODE_26CD18:
	LSR
	TAY
	LDA.w DATA_21ED15,y
	STA.b $02
	LDA.b $00
	CMP.b #$06
	BCC.b CODE_26CD28
	CLC
	ADC.b #$04
CODE_26CD28:
	ASL
	ASL
	ASL
	ASL
	STA.b $01
	RTS

;--------------------------------------------------------------------

CODE_26CD2F:
	LDX.b #$0D
CODE_26CD31:
	TXA
	STA.b $00,x
	DEX
	BPL.b CODE_26CD31
	LDA.b #$FF
	STA.b $0E
	STA.b $0F
	LDX.b #$04
CODE_26CD3F:
	JSR.w CODE_26CD5D
	TAY
	LDA.w DATA_21EC94,y
	STA.w !RAM_SMB3_BattleNorSpr_XPosLo,x
	LDA.w DATA_21ECA2,y
	STA.w !RAM_SMB3_BattleNorSpr_YPosLo,x
	LDA.b #$01
	STA.w !RAM_SMB3_BattleNorSpr_CurrentStatus,x
	LDA.b #!Define_SMB3_SpriteID_BattleNorSpr0B_Coin
	STA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	DEX
	BPL.b CODE_26CD3F
	RTS

CODE_26CD5D:
	JSL.l CODE_25F805
	AND.b #$0F
	TAY
	LDA.w $0000,y
	BMI.b CODE_26CD5D
	PHA
	LDA.b #$FF
	STA.w $0000,y
	PLA
	RTS

;--------------------------------------------------------------------

CODE_26CD71:
	LDX.b #$04
CODE_26CD73:
	INC.w !RAM_SMB3_BattleNorSpr_CurrentStatus,x
	LDA.b #!Define_SMB3_SpriteID_BattleNorSpr0B_Coin
	STA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	LDA.w DATA_21ECB5,x
	STA.w !RAM_SMB3_BattleNorSpr_YPosLo,x
	LDA.w DATA_21ECB0,x
	STA.w !RAM_SMB3_BattleNorSpr_XPosLo,x
	JSR.w CODE_26DD0B
	DEX
	BPL.b CODE_26CD73
	RTS

;--------------------------------------------------------------------

SMB3_BattleMode_State01_ProcessGameplay:
.Main:
;$26CD8E
	JSR.w SMB3_BattleMode_DrawCollectedCards_Main
	JSR.w SMB3_BattleMode_CheckIfPlayerHas3Cards_Main
	JSR.w SMB3_BattleMode_ProcessPlayers_Main
	JSR.w SMB3_BattleMode_HandleSpawningSprites_Main
	JSR.w SMB3_BattleMode_ProcessSprites_Main
	JSR.w SMB3_BattleMode_DrawBounceSprite_Main
	JSR.w SMB3_BattleMode_ProcessPOWBlock_Main
	JSR.w CODE_26EE6B
	JSR.w SMB3_BattleMode_ProcessSmokeSprites_Main
	JSR.w SMB3_BattleMode_Handle5CoinWinEffects_Main
	JSR.w SMB3_BattleMode_HandleRoundStart_Main
	JSR.w SMB3_BattleMode_DrawPauseText_Main
	RTS

;--------------------------------------------------------------------

; Todo: Unreferrenced data.

UNK_26CDB3:
	db $03,$4F,$80,$03
	db $A0,$14,$B0,$14

	db $03,$50,$80,$03
	db $00,$14,$00,$14

	db $FF

;--------------------------------------------------------------------

; Todo: Unreferrenced routine.

CODE_26CDC4:
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$07
	BNE.b CODE_26CDD7
	INC.w $1941
	BNE.b CODE_26CDD7
	LDA.b #$01
	STA.w $078C
	JMP.w CODE_26CFB1

CODE_26CDD7:
	RTS

;--------------------------------------------------------------------

; Todo: Unreferrenced routine.

CODE_26CDD8:
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$07
	ORA.w $18CB
	ORA.w $18CC
	ORA.w !RAM_SMB3_BattleMode_PlayerHasWonTimer
	ORA.w $0076
	BNE.b CODE_26CDF4
	LDX.b #$09
CODE_26CDEC:
	LDA.w !RAM_SMB3_BattleNorSpr_CurrentStatus,x
	BEQ.b CODE_26CDF5
	DEX
	BPL.b CODE_26CDEC
CODE_26CDF4:
	RTS

CODE_26CDF5:
	INC.w !RAM_SMB3_BattleNorSpr_CurrentStatus,x
	LDY.b #!Define_SMB3_SpriteID_BattleNorSpr0B_Coin
	LDA.w $192D
	AND.b #$1C
	BNE.b CODE_26CE03
	LDY.b #!Define_SMB3_SpriteID_BattleNorSpr09_FallingBoo
CODE_26CE03:
	TYA
	STA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	LDA.b #$B0
	STA.w !RAM_SMB3_BattleNorSpr_YPosLo,x
	LDA.b #$7C
	STA.w !RAM_SMB3_BattleNorSpr_XPosLo,x
	JSL.l CODE_25F805
	AND.b #$0F
	ADC.b #$A8
	STA.w !RAM_SMB3_BattleNorSpr_YSpeed,x
	JSL.l CODE_25F805
	AND.b #$1F
	SBC.b #$10
	STA.w !RAM_SMB3_BattleNorSpr_XSpeed,x
	JSR.w CODE_26DD0B
	INC.w $18A6,x
	LDA.b #$30
	STA.w !RAM_SMB3_BattleNorSpr_InsidePipeTimer,x
	RTS

;--------------------------------------------------------------------

; Note: Something related to the battle mode POW block. Player stun routine?

CODE_26CE33:
	LDX.b #$02
	TXY
	LDA.w $190E
	BEQ.b CODE_26CE3D
	LDY.b #SMB3_IndividualPlayerData[$01].ReserveSlots-SMB3_IndividualPlayerData[$00].ReserveSlots+$02
CODE_26CE3D:
	STY.b $00
	LDA.w SMB3_IndividualPlayerData[$00].CardSlots,y
	BNE.b CODE_26CE4C
	DEY
	DEX
	BPL.b CODE_26CE3D
	LDX.w $190E
	RTS

CODE_26CE4C:
	LDX.b #$0B
CODE_26CE4E:
	LDA.w !RAM_SMB3_BattleNorSpr_CurrentStatus,x
	BEQ.b CODE_26CE5C
	DEX
	CPX.b #$0A
	BNE.b CODE_26CE4E
	LDX.w $190E
	RTS

CODE_26CE5C:
	LDA.w SMB3_IndividualPlayerData[$00].CardSlots,y
	TAY
	CLC
	ADC.b #!Define_SMB3_SpriteID_BattleNorSpr0C_MovingCard-$01
	STA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	LDA.w DATA_21ECB9,y
	STA.w !RAM_SMB3_BattleNorSpr_YSpeed,x
	INC.w !RAM_SMB3_BattleNorSpr_CurrentStatus,x
	LDY.b $00
	LDA.b #$00
	STA.w SMB3_IndividualPlayerData[$00].CardSlots,y
	JSR.w CODE_26DD0B
	LDY.w $190E
	LDA.w !RAM_SMB3_BattleMode_MariosXPosLo,y
	STA.w !RAM_SMB3_BattleNorSpr_XPosLo,x
	ASL
	LDA.b #$06
	BCC.b CODE_26CE89
	LDA.b #$FA
CODE_26CE89:
	STA.w !RAM_SMB3_BattleNorSpr_XSpeed,x
	LDA.w !RAM_SMB3_BattleMode_MariosYPosLo,y
	STA.w !RAM_SMB3_BattleNorSpr_YPosLo,x
	LDA.w !RAM_SMB3_BattleMode_MariosPowerUp,y
	BNE.b CODE_26CEA0
	LDA.w !RAM_SMB3_BattleNorSpr_YPosLo,x
	CLC
	ADC.b #$10
	STA.w !RAM_SMB3_BattleNorSpr_YPosLo,x
CODE_26CEA0:
	STZ.w !RAM_SMB3_BattleNorSpr_YPosHi,x
	LDA.b #$20
	STA.w !RAM_SMB3_BattleNorSpr_DecrementingTable7E18E9,x
	LDX.w $190E
	RTS

;--------------------------------------------------------------------

SMB3_BattleMode_ProcessPlayers:
.Main:
;$26CEAC
	JSL.l CODE_23DF67
	LDA.w !RAM_SMB3_BattleMode_PlayerHasWonTimer
	BEQ.b CODE_26CEBC
	STZ.w $0076
	STZ.b !RAM_SMB3_Global_ControllerHold1P1
	STZ.b !RAM_SMB3_Global_ControllerHold1P2
CODE_26CEBC:
	LDX.b #$01
CODE_26CEBE:
	STX.w $190E
	LDA.b !RAM_SMB3_Global_ControllerHold1P1,x
	AND.b #(!Joypad_DPadL>>8)|(!Joypad_DPadR>>8)
	CMP.b #(!Joypad_DPadL>>8)|(!Joypad_DPadR>>8)
	BNE.b CODE_26CECB
	DEC.b !RAM_SMB3_Global_ControllerHold1P1,x
CODE_26CECB:
	LDA.b !RAM_SMB3_Global_ControllerHold1P1,x
	AND.b #(!Joypad_DPadU>>8)|(!Joypad_DPadD>>8)
	CMP.b #(!Joypad_DPadU>>8)|(!Joypad_DPadD>>8)
	BNE.b CODE_26CED9
	LDA.b !RAM_SMB3_Global_ControllerHold1P1,x
	AND.b #(!Joypad_DPadU>>8)^$FF
	STA.b !RAM_SMB3_Global_ControllerHold1P1,x
CODE_26CED9:
	LDA.w $0076
	BNE.b CODE_26CEEE
	LDA.w !RAM_SMB3_BattleMode_MariosDeathFreezeTimer,x
	BEQ.b CODE_26CEE6
	DEC.w !RAM_SMB3_BattleMode_MariosDeathFreezeTimer,x
CODE_26CEE6:
	LDA.w $1989,x
	BEQ.b CODE_26CEEE
	DEC.w $1989,x
CODE_26CEEE:
	JSR.w CODE_26CF04
	STZ.w $193F,x
	DEX
	BPL.b CODE_26CEBE
	LDA.w $0076
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	ORA.w $19C0
endif
	BNE.b CODE_26CEFF
	JSR.w CODE_26D9E9
CODE_26CEFF:
	JSL.l SMB3_BattleMode_SetPlayerGraphicsPointer_Main
	RTS

CODE_26CF04:
	LDA.w !RAM_SMB3_BattleMode_PlayerHasWonTimer
	BEQ.b CODE_26CF0C
	JMP.w CODE_26CF8D

CODE_26CF0C:
	LDA.w $18CB,x
	BEQ.b CODE_26CF19
	DEC.w $18CB,x
	BEQ.b CODE_26CF19
	JMP.w CODE_26CFBA

CODE_26CF19:
	LDA.w !RAM_SMB3_BattleMode_MariosState,x
	BEQ.b CODE_26CF26
	LDA.w $1A28
	BEQ.b CODE_26CF26
	JMP.w CODE_26CFBF

CODE_26CF26:
	LDA.w $19C0
	BEQ.b CODE_26CF80
	TXA
	BEQ.b CODE_26CF31
	JMP.w CODE_26CFBF

CODE_26CF31:
	LDA.w $19C0
	AND.b #$03
	BNE.b CODE_26CF7A
	LDA.w !RAM_SMB3_BattleMode_MariosPowerUp
	EOR.w !RAM_SMB3_BattleMode_LuigisPowerUp
	BEQ.b CODE_26CF50
	LDA.w !RAM_SMB3_BattleMode_MariosPowerUp
	PHA
	LDA.w !RAM_SMB3_BattleMode_LuigisPowerUp
	STA.w !RAM_SMB3_BattleMode_MariosPowerUp
	PLA
	STA.w !RAM_SMB3_BattleMode_LuigisPowerUp
	BRA.b CODE_26CF7A

CODE_26CF50:
	LDA.w !RAM_SMB3_BattleMode_MariosXPosLo
	PHA
	LDA.w !RAM_SMB3_BattleMode_LuigisXPosLo
	STA.w !RAM_SMB3_BattleMode_MariosXPosLo
	PLA
	STA.w !RAM_SMB3_BattleMode_LuigisXPosLo
	LDA.w !RAM_SMB3_BattleMode_MariosYPosLo
	PHA
	LDA.w !RAM_SMB3_BattleMode_LuigisYPosLo
	STA.w !RAM_SMB3_BattleMode_MariosYPosLo
	PLA
	STA.w !RAM_SMB3_BattleMode_LuigisYPosLo
	LDA.w !RAM_SMB3_BattleMode_MariosYPosHi
	PHA
	LDA.w !RAM_SMB3_BattleMode_LuigisYPosHi
	STA.w !RAM_SMB3_BattleMode_MariosYPosHi
	PLA
	STA.w !RAM_SMB3_BattleMode_LuigisYPosHi
CODE_26CF7A:
	DEC.w $19C0
	JMP.w CODE_26CFBF

CODE_26CF80:
	LDA.w !RAM_SMB3_BattleMode_MariosHurtAnimationTimer
	ORA.w !RAM_SMB3_BattleMode_LuigisHurtAnimationTimer
	BNE.b CODE_26CFCA
	LDY.w !RAM_SMB3_BattleMode_PlayerHasWonTimer
	BEQ.b CODE_26CFDF
CODE_26CF8D:
	TXA
	BEQ.b CODE_26CF99
	LDA.w !RAM_SMB3_BattleMode_MariosState,x
	CMP.b #$02
	BEQ.b CODE_26CFDF
	BRA.b CODE_26CFBA

CODE_26CF99:
	JSR.w SMB3_BattleMode_DrawXWinText_Main
	DEC.w !RAM_SMB3_BattleMode_PlayerHasWonTimer
	LDA.w !RAM_SMB3_BattleMode_MariosState
	CMP.b #$02
	BEQ.b CODE_26CFDF
	LDA.w !RAM_SMB3_BattleMode_PlayerHasWonTimer
	BNE.b CODE_26CFBA
	INC.w !RAM_SMB3_BattleMode_PlayerHasWonTimer
	JSR.w CODE_26D217
CODE_26CFB1:
	LDA.b #$01
	STA.w $0014
	STZ.w !RAM_SMB3_BattleMode_CurrentState						; Optimization: Unnecessary absolute addressing
CODE_26CFB9:
	RTS

CODE_26CFBA:
	LDA.w !RAM_SMB3_BattleMode_MariosState,x
	BEQ.b CODE_26CFB9
CODE_26CFBF:
	LDA.w $0076
	ORA.w !RAM_SMB3_BattleMode_PlayerHasWonTimer
	ORA.w $19C0
	BEQ.b CODE_26CFDB
CODE_26CFCA:
	LDA.w $193F,x
	BEQ.b CODE_26CFDB
	LDA.w !RAM_SMB3_BattleMode_MariosYPosLo,x
	AND.b #$F8
	CLC
	ADC.w $193F,x
	STA.w !RAM_SMB3_BattleMode_MariosYPosLo,x
CODE_26CFDB:
	JSR.w CODE_26D217
	RTS

CODE_26CFDF:
	TXY
	LDA.w !RAM_SMB3_BattleMode_MariosState,x
	ASL
	TAX
	JMP.w (DATA_26CFE8,x)

DATA_26CFE8:
	dw SMB3_BattleMode_PlayerState00_Initialization_Main
	dw SMB3_BattleMode_PlayerState01_Normal_Main
	dw SMB3_BattleMode_PlayerState02_Dead_Main
	dw SMB3_BattleMode_PlayerState03_Climbing_Main

;--------------------------------------------------------------------

SMB3_BattleMode_PlayerState00_Initialization:
.Main:
;$26CFF0
	TYX
	LDY.w !RAM_SMB3_BattleMode_MariosDeathFreezeTimer,x
	BEQ.b CODE_26D000
	DEY
	BNE.b CODE_26D01E
	INX
	STX.w $078C
	JMP.w CODE_26CFB1

CODE_26D000:
	STZ.w !RAM_SMB3_BattleMode_MariosXSpeed,x
	STZ.w !RAM_SMB3_BattleMode_MariosYSpeed,x
	LDA.b #$01
	STA.w !RAM_SMB3_BattleMode_MariosState,x
	TXA
	TAY
	LDA.w DATA_21ECC1,y
	STA.w !RAM_SMB3_BattleMode_MariosFacingDirection,x
	LDA.b #$80
	STA.w !RAM_SMB3_BattleMode_MariosYPosLo,x
	LDA.w DATA_21ECBD,y
	STA.w !RAM_SMB3_BattleMode_MariosXPosLo,x
CODE_26D01E:
	RTS

;--------------------------------------------------------------------

SMB3_BattleMode_PlayerState01_Normal:
.Main:
;$26D01F
	TYX
	JSR.w CODE_26D027
	JSR.w CODE_26D217
	RTS

CODE_26D027:
	LDA.w !RAM_SMB3_BattleMode_MariosTileCollisionFlags,x
	AND.b #$04
	BEQ.b CODE_26D031
	STZ.w !RAM_SMB3_BattleMode_MariosIsDuckingFlag,x
CODE_26D031:
	LDA.w !RAM_SMB3_BattleMode_DisableMarioToLuigiCollision
	BNE.b CODE_26D094
	LDA.b !RAM_SMB3_Global_ControllerHold1P1,x
	AND.b #(!Joypad_DPadU>>8)|(!Joypad_DPadD>>8)
	BEQ.b CODE_26D094
	BIT.w !RAM_SMB3_BattleMode_MariosTileCollisionFlags,x
	BNE.b CODE_26D081
	LDA.w !RAM_SMB3_BattleMode_TileMariosHeadIsIn,x
	CMP.b #$C0
	BNE.b CODE_26D094
	STZ.w !RAM_SMB3_BattleMode_MariosXSpeed,x
	STZ.w !RAM_SMB3_BattleMode_MariosYSpeed,x
	LDA.b #$03
	STA.w !RAM_SMB3_BattleMode_MariosState,x
	LDA.w !RAM_SMB3_BattleMode_MariosHurtTimer,x
	BEQ.b CODE_26D07E
	LDA.w !RAM_SMB3_BattleMode_MariosFreezeHurtTimerFlag,x
	BEQ.b CODE_26D066
	LDA.b !RAM_SMB3_Global_ControllerHold1P1,x
	AND.b #(!Joypad_DPadL>>8)|(!Joypad_DPadR>>8)|(!Joypad_DPadU>>8)|(!Joypad_DPadD>>8)|!Joypad_X|(!Joypad_Y>>8)|!Joypad_A|(!Joypad_B>>8)
	BEQ.b CODE_26D078
	STZ.w !RAM_SMB3_BattleMode_MariosFreezeHurtTimerFlag,x
CODE_26D066:
	LDA.w $0076
	BNE.b CODE_26D078
	DEC.w !RAM_SMB3_BattleMode_MariosHurtTimer,x
	LDA.w !RAM_SMB3_BattleMode_MariosHurtTimer,x
	BIT.b #$01
	BNE.b CODE_26D01E
	JMP.w SMB3_BattleMode_DrawPlayerSprite_Main

CODE_26D078:
	LDA.b !RAM_SMB3_Global_FrameCounter
	BIT.b #$01
	BNE.b CODE_26D01E

CODE_26D07E:
	JMP.w SMB3_BattleMode_DrawPlayerSprite_Main

CODE_26D081:
	BIT.b #$04
	BEQ.b CODE_26D094
	LDA.w !RAM_SMB3_BattleMode_MariosPowerUp,x
	BEQ.b CODE_26D094
	LDA.b #$FF
	STA.w !RAM_SMB3_BattleMode_MariosIsDuckingFlag,x
	STZ.w !RAM_SMB3_BattleMode_MariosYSpeed,x
	STZ.b !RAM_SMB3_Global_ControllerHold1P1,x
CODE_26D094:
	LDA.w !RAM_SMB3_BattleMode_MariosHurtAnimationTimer
	ORA.w !RAM_SMB3_BattleMode_LuigisHurtAnimationTimer
	BNE.b CODE_26D0AF
	LDA.b !RAM_SMB3_Global_ControllerHold1P1,x
	BEQ.b CODE_26D0A3
	STZ.w !RAM_SMB3_BattleMode_MariosUnusedFlashingTimer,x
CODE_26D0A3:
	LDA.w !RAM_SMB3_BattleMode_MariosSquishAnimationTimer,x
	BEQ.b CODE_26D0B3
	CMP.b #$08
	BNE.b CODE_26D0AF
	JSR.w CODE_26CE33
CODE_26D0AF:
	STZ.b !RAM_SMB3_Global_ControllerHold1P1,x
	STZ.b !RAM_SMB3_Global_ControllerPress1P1,x
CODE_26D0B3:
	LDA.w !RAM_SMB3_BattleMode_MariosPowerUp,x
	TAY
	LDA.b !RAM_SMB3_Global_ControllerHold1P1,x
	AND.b #(!Joypad_DPadL>>8)|(!Joypad_DPadR>>8)
	BEQ.b CODE_26D10D
	STA.w !RAM_SMB3_BattleMode_MariosFacingDirection,x
	LSR
	BCC.b CODE_26D0E7
	LDA.b !RAM_SMB3_Global_ControllerHold1P1,x
	AND.b #!Joypad_X|(!Joypad_Y>>8)
	BEQ.b CODE_26D0D5
	LDA.w !RAM_SMB3_BattleMode_MariosXSpeed,x
	CMP.w DATA_21ED2E,y
	BPL.b CODE_26D0D2
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	JSR.w CODE_26FBCC
else
	INC
endif
CODE_26D0D2:
	JMP.w CODE_26D10A

CODE_26D0D5:
	LDA.w !RAM_SMB3_BattleMode_MariosXSpeed,x
	CMP.w DATA_21ED2A,y
	BEQ.b CODE_26D0E4
	BPL.b CODE_26D0E3
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	JSR.w CODE_26FBCC
else
	INC
endif
	JMP.w CODE_26D10A

CODE_26D0E3:
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	JSR.w CODE_26FBDA
else
	DEC
endif
CODE_26D0E4:
	JMP.w CODE_26D10A

CODE_26D0E7:
	INY
	INY
	LDA.b !RAM_SMB3_Global_ControllerHold1P1,x
	AND.b #!Joypad_X|(!Joypad_Y>>8)
	BEQ.b CODE_26D0FB
	LDA.w !RAM_SMB3_BattleMode_MariosXSpeed,x
	CMP.w DATA_21ED2E,y
	BMI.b CODE_26D0F8
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	JSR.w CODE_26FBDA
else
	DEC
endif
CODE_26D0F8:
	JMP.w CODE_26D10A

CODE_26D0FB:
	LDA.w !RAM_SMB3_BattleMode_MariosXSpeed,x
	CMP.w DATA_21ED2A,y
	BEQ.b CODE_26D10A
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	BMI.b +
	JSR.w CODE_26FBDA
	JMP.w CODE_26D10A
+:
	INC
	JSR.w CODE_26FBCC
else
	BMI.b CODE_26D109
	DEC
	JMP.w CODE_26D10A

CODE_26D109:
	INC
endif

CODE_26D10A:
	STA.w !RAM_SMB3_BattleMode_MariosXSpeed,x
CODE_26D10D:
	LDA.w !RAM_SMB3_BattleMode_MariosTileCollisionFlags,x
	AND.b #$04
	BEQ.b CODE_26D119
	LDA.w !RAM_SMB3_BattleMode_MariosYSpeed,x
	BPL.b CODE_26D11C
CODE_26D119:
	JMP.w CODE_26D1B0

CODE_26D11C:
	LDA.w !RAM_SMB3_BattleMode_MariosYPosLo,x
	AND.b #$F8
	CLC
	ADC.w $193F,x
	STA.w !RAM_SMB3_BattleMode_MariosYPosLo,x
	STZ.w !RAM_SMB3_BattleMode_MariosYSpeed,x
	STZ.w !RAM_SMB3_BattleMode_MarioIsJumpingFlag,x
	LDY.w !RAM_SMB3_BattleMode_TileMariosFeetAreTouching,x
	CPY.b #$C2
	BNE.b CODE_26D15C
	STZ.w !RAM_SMB3_BattleMode_MariosFreezeHurtTimerFlag,x
	LDA.w !RAM_SMB3_BattleMode_MariosTileCollisionFlags,x
	AND.b #$C0
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDY.b #$0A
else
	LDY.b #$08
endif
	CMP.b #$C0
	BEQ.b CODE_26D14F
	CMP.b #$80
	BEQ.b CODE_26D149
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDY.b #$F6
else
	LDY.b #$F8
endif
CODE_26D149:
	TYA
	STA.w !RAM_SMB3_BattleMode_MariosXSpeed,x
	BRA.b CODE_26D161

CODE_26D14F:
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDY.b #$05
else
	LDY.b #$04
endif
	LDA.w !RAM_SMB3_BattleMode_MariosXPosLo,x
	AND.b #$08
	BEQ.b CODE_26D149
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDY.b #$FB
else
	LDY.b #$FC
endif
	BRA.b CODE_26D149

CODE_26D15C:
	LDY.w !RAM_SMB3_BattleMode_POWBlockQuakeTimer
	BEQ.b CODE_26D173
CODE_26D161:
	STZ.w !RAM_SMB3_BattleMode_MariosFreezeHurtTimerFlag,x
	LDA.b #$12
	STA.w !RAM_SMB3_BattleMode_MariosSquishAnimationTimer,x
	LDA.b #!Define_SMAS_Sound0060_Contact
	STA.w !RAM_SMB3_Global_SoundCh1
	LDA.b #$C8
	JMP.w CODE_26D196

CODE_26D173:
	LDA.b !RAM_SMB3_Global_ControllerPress1P1,x
	BPL.b CODE_26D199							; Note: !Joypad_A|(!Joypad_B>>8)
	LDA.b !RAM_SMB3_Global_ControllerHold1P1,x
	AND.b #!Joypad_DPadD>>8
	BEQ.b CODE_26D180
	STA.w !RAM_SMB3_BattleMode_MariosIsDuckingFlag,x
CODE_26D180:
	LDA.b #!Define_SMAS_Sound0061_Jump
	STA.w !RAM_SMB3_Global_SoundCh2
	STA.w !RAM_SMB3_BattleMode_MarioIsJumpingFlag,x
	LDA.w !RAM_SMB3_BattleMode_MariosXSpeed,x
	BPL.b CODE_26D190
	EOR.b #$FF
	INC
CODE_26D190:
	LSR
	LSR
	TAY
	LDA.w DATA_21ECD9,y
CODE_26D196:
	STA.w !RAM_SMB3_BattleMode_MariosYSpeed,x
CODE_26D199:
	LDA.b !RAM_SMB3_Global_ControllerHold1P1,x
	AND.b #(!Joypad_DPadL>>8)|(!Joypad_DPadR>>8)
	BNE.b CODE_26D1B0
	LDA.w !RAM_SMB3_BattleMode_MariosXSpeed,x
	BEQ.b CODE_26D1B0
	BPL.b CODE_26D1AC
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	JSR.w CODE_26FBCC
else
	INC
endif
	STA.w !RAM_SMB3_BattleMode_MariosXSpeed,x
	BRA.b CODE_26D1B0

CODE_26D1AC:
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	JSR.w CODE_26FBDA
else
	DEC
endif
	STA.w !RAM_SMB3_BattleMode_MariosXSpeed,x
CODE_26D1B0:
	JSR.w SMB3_BattleMode_UpdateSpritePosition_Player_X
	LDA.w $18B7,x
	BEQ.b CODE_26D1BD
	DEC.w $18B7,x
	BNE.b CODE_26D216
CODE_26D1BD:
	LDY.w !RAM_SMB3_BattleMode_MariosYSpeed,x
	BPL.b CODE_26D1F4
	LDA.w !RAM_SMB3_BattleMode_MariosTileCollisionFlags,x
	AND.b #$08
	BEQ.b CODE_26D1F4
	TYA
	EOR.b #$FF
	LSR
	LSR
	LSR
	ADC.b #$04
	STA.w $18B7,x
	STZ.w !RAM_SMB3_BattleMode_MariosYSpeed,x
	LDA.b #$0E
	STA.b $00
	LDA.w !RAM_SMB3_BattleMode_MariosPowerUp,x
	BEQ.b CODE_26D1E9
	LDA.w !RAM_SMB3_BattleMode_MariosIsDuckingFlag,x
	BNE.b CODE_26D1E9
	LDA.b #$0A
	STA.b $00
CODE_26D1E9:
	LDA.w !RAM_SMB3_BattleMode_MariosYPosLo,x
	AND.b #$F0
	CLC
	ADC.b $00
	STA.w !RAM_SMB3_BattleMode_MariosYPosLo,x
CODE_26D1F4:
	LDA.w $19C0
	BNE.b CODE_26D1FC
	JSR.w SMB3_BattleMode_UpdateSpritePosition_Player_Y
CODE_26D1FC:
	LDA.w !RAM_SMB3_BattleMode_MariosYSpeed,x
	BMI.b CODE_26D205
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	CMP.b #$4C
else
	CMP.b #$40
endif
	BCS.b CODE_26D216
CODE_26D205:
	LDA.w !RAM_SMB3_BattleMode_MariosYSpeed,x
	BPL.b CODE_26D20E
	LDY.b !RAM_SMB3_Global_ControllerHold1P1,x
	BMI.b CODE_26D211							; Note: !Joypad_A|(!Joypad_B>>8)
CODE_26D20E:
	CLC
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	ADC.b #$06
	BRA.b CODE_26D213

CODE_26D211:
	PHA
	LDA.b !RAM_SMB3_Global_FrameCounter
	BIT.b #$01
	BNE.b +
	PLA
	BRA.b ++

+:
	PLA
	INC
++:
else
	ADC.b #$03
CODE_26D211:
endif
	INC
	INC
CODE_26D213:
	STA.w !RAM_SMB3_BattleMode_MariosYSpeed,x
CODE_26D216:
	RTS

CODE_26D217:
	LDA.w !RAM_SMB3_BattleMode_PlayerHasWonTimer
	BEQ.b CODE_26D251
	TXA
	EOR.w $078C
	AND.b #$01
	BNE.b CODE_26D251
	LDA.w !RAM_SMB3_BattleMode_MariosTileCollisionFlags,x
	BIT.b #$04
	BEQ.b CODE_26D24E
	LDA.b !RAM_SMB3_BattleMode_MariosPose,x
	CMP.b #$50
	BEQ.b CODE_26D23D
	CMP.b #$98
	BEQ.b CODE_26D23D
	CMP.b #$10
	BEQ.b CODE_26D23D
	CMP.b #$58
	BNE.b CODE_26D24E
CODE_26D23D:
	LDA.b #$50
	STA.b !RAM_SMB3_BattleMode_MariosPose,x
	LDA.w !RAM_SMB3_BattleMode_MariosPowerUp,x
	BNE.b CODE_26D24A
	LDA.b #$98
	STA.b !RAM_SMB3_BattleMode_MariosPose,x
CODE_26D24A:
	JSR.w SMB3_BattleMode_DrawPlayerSprite_Main
	RTS

CODE_26D24E:
	JSR.w CODE_26D027
CODE_26D251:
	LDY.b #$58
	LDA.w !RAM_SMB3_BattleMode_MariosPowerUp,x
	BEQ.b CODE_26D25A
	LDY.b #$10
CODE_26D25A:
	LDA.w !RAM_SMB3_BattleMode_MariosXSpeed,x
	BNE.b CODE_26D264
	STA.w !RAM_SMB3_BattleMode_MariosClimbingAnimationFrameCounter,x
	BEQ.b CODE_26D2D9
CODE_26D264:
	LDY.b #$01
	ASL
	BCC.b CODE_26D26A
	INY
CODE_26D26A:
	TYA
	LDY.b #$68
	CMP.w !RAM_SMB3_BattleMode_MariosFacingDirection,x
	BNE.b CODE_26D2D9
	LDA.w $18CB
	ORA.w $18CC
	ORA.w !RAM_SMB3_BattleMode_PlayerHasWonTimer
	ORA.w $19C0
	BNE.b CODE_26D2A2
	LDA.w !RAM_SMB3_BattleMode_MariosXSpeed,x
	BPL.b CODE_26D288
	EOR.b #$FF
	INC
CODE_26D288:
	LSR
	LSR
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	CMP.b #$08
	BCC.b +
	LDA.b #$07
+:
endif
	TAY
	LDA.w !RAM_SMB3_BattleMode_MariosWalkingFrameCounter,x
	CLC
	ADC.w DATA_21ECC3,y
	STA.w !RAM_SMB3_BattleMode_MariosWalkingFrameCounter,x
	BCC.b CODE_26D2A2
	LDA.w !RAM_SMB3_BattleMode_MariosHurtAnimationTimer
	ORA.w !RAM_SMB3_BattleMode_LuigisHurtAnimationTimer
	BNE.b CODE_26D2A2
	INC.w !RAM_SMB3_BattleMode_MariosWalkingPose,x
CODE_26D2A2:
	LDA.w !RAM_SMB3_BattleMode_MariosWalkingPose,x
	TAY
	LDA.w !RAM_SMB3_BattleMode_MariosPowerUp,x
	BNE.b CODE_26D2BD
	TYA
	BEQ.b CODE_26D2B5
	BIT.b #$01
	BNE.b CODE_26D2B9
	STZ.w !RAM_SMB3_BattleMode_MariosWalkingPose,x
CODE_26D2B5:
	LDY.b #$58
	BRA.b CODE_26D2D9

CODE_26D2B9:
	LDY.b #$60
	BRA.b CODE_26D2D9

CODE_26D2BD:
	TYA
	BEQ.b CODE_26D2CF
	CMP.b #$01
	BEQ.b CODE_26D2D3
	CMP.b #$02
	BEQ.b CODE_26D2CF
	CMP.b #$03
	BEQ.b CODE_26D2D7
	STZ.w !RAM_SMB3_BattleMode_MariosWalkingPose,x
CODE_26D2CF:
	LDY.b #$10
	BRA.b CODE_26D2D9

CODE_26D2D3:
	LDY.b #$00
	BRA.b CODE_26D2D9

CODE_26D2D7:
	LDY.b #$08
CODE_26D2D9:
	LDA.w !RAM_SMB3_BattleMode_MariosHurtAnimationTimer,x
	BEQ.b CODE_26D319
	PHA
	CMP.b #$01
	BNE.b CODE_26D2F5
	LDA.w !RAM_SMB3_BattleMode_MariosNewPowerUpState,x
	STA.w !RAM_SMB3_BattleMode_MariosPowerUp,x
	BNE.b CODE_26D2F5
	LDA.b #$61
	STA.w !RAM_SMB3_BattleMode_MariosHurtTimer,x
	STA.w !RAM_SMB3_BattleMode_MariosFreezeHurtTimerFlag,x
	BRA.b CODE_26D2F5

CODE_26D2F5:
	PLA
	LSR
	LSR
	LSR
	STA.b $00
	TAY
	LDA.w !RAM_SMB3_BattleMode_MariosNewPowerUpState,x
	BNE.b CODE_26D307
	LDA.b #$0B
	SEC
	SBC.b $00
	TAY
CODE_26D307:
	PHB
	PHK
	PLB
	LDA.w DATA_26D3F3,y
	TAY
	PLB
	LDA.w $0076
	BNE.b CODE_26D37C
	DEC.w !RAM_SMB3_BattleMode_MariosHurtAnimationTimer,x
	BRA.b CODE_26D37C

CODE_26D319:
	LDA.w !RAM_SMB3_BattleMode_MariosTileCollisionFlags,x
	AND.b #$04
	BNE.b CODE_26D34D
	LDA.w !RAM_SMB3_BattleMode_MarioIsJumpingFlag,x
	BNE.b CODE_26D33E
	LDY.b #$60
	LDA.w !RAM_SMB3_BattleMode_MariosPowerUp,x
	BNE.b CODE_26D32F
	JMP.w CODE_26D37C

CODE_26D32F:
	LDA.w !RAM_SMB3_BattleMode_MariosWalkingPose,x
	BEQ.b CODE_26D339
	LDY.b #$10
	JMP.w CODE_26D373

CODE_26D339:
	LDY.b #$00
	JMP.w CODE_26D373

CODE_26D33E:
	LDY.b #$70
	LDA.w !RAM_SMB3_BattleMode_MariosPowerUp,x
	BNE.b CODE_26D348
	JMP.w CODE_26D37C

CODE_26D348:
	LDY.b #$20
	JMP.w CODE_26D373

CODE_26D34D:
	LDA.w !RAM_SMB3_BattleMode_MariosSquishAnimationTimer,x
	BEQ.b CODE_26D360
	DEC.w !RAM_SMB3_BattleMode_MariosSquishAnimationTimer,x
	LDY.b #$78
	LDA.w !RAM_SMB3_BattleMode_MariosPowerUp,x
	BEQ.b CODE_26D37C
	LDY.b #$48
	BRA.b CODE_26D37C

CODE_26D360:
	LDA.w !RAM_SMB3_BattleMode_MariosKickAnimationTimer,x
	BEQ.b CODE_26D373
	DEC.w !RAM_SMB3_BattleMode_MariosKickAnimationTimer,x
	LDY.b #$80
	LDA.w !RAM_SMB3_BattleMode_MariosPowerUp,x
	BEQ.b CODE_26D37C
	LDY.b #$30
	BRA.b CODE_26D37C

CODE_26D373:
	LDA.w !RAM_SMB3_BattleMode_MariosIsDuckingFlag,x
	BEQ.b CODE_26D37C
	LDY.b #$28
	BRA.b CODE_26D37C

CODE_26D37C:
	TYA
	STA.b !RAM_SMB3_BattleMode_MariosPose,x
	CMP.b #$68
	BNE.b CODE_26D3C2
	LDA.b !RAM_SMB3_Global_FrameCounter
	BIT.b #$03
	BNE.b CODE_26D3AF
	JSR.w CODE_26F08E
	BCS.b CODE_26D3AF
	LDA.b #$00
	STA.w !RAM_SMB3_BattleSmokeSpr_AnimationFrame,y
	LDA.b #$04
	STA.w !RAM_SMB3_BattleSmokeSpr_AnimationFrameCounter,y
	LDA.w !RAM_SMB3_BattleMode_MariosXPosLo,x
	CLC
	ADC.b #$08
	STA.w !RAM_SMB3_BattleSmokeSpr_XPosLo,y
	LDA.w !RAM_SMB3_BattleMode_MariosYPosLo,x
	CLC
	ADC.b #$18
	STA.w !RAM_SMB3_BattleSmokeSpr_YPosLo,y
	LDA.b #$00
	STA.w !RAM_SMB3_BattleSmokeSpr_SpriteID,y
CODE_26D3AF:
	LDA.w !RAM_SMB3_BattleMode_MariosPowerUp,x
	BEQ.b CODE_26D3B8
	LDA.b #$18
	STA.b !RAM_SMB3_BattleMode_MariosPose,x
CODE_26D3B8:
	LDA.w !RAM_SMB3_Global_SoundCh2
	BNE.b CODE_26D3C2
	LDA.b #!Define_SMAS_Sound0061_TurnAround
	STA.w !RAM_SMB3_Global_SoundCh2
CODE_26D3C2:
	LDA.w !RAM_SMB3_BattleMode_MariosHurtTimer,x
	BEQ.b CODE_26D3EC
	LDA.w !RAM_SMB3_BattleMode_MariosFreezeHurtTimerFlag,x
	BEQ.b CODE_26D3D5
	LDA.b !RAM_SMB3_Global_ControllerHold1P1,x
	AND.b #(!Joypad_DPadL>>8)|(!Joypad_DPadR>>8)|(!Joypad_DPadU>>8)|(!Joypad_DPadD>>8)|!Joypad_X|(!Joypad_Y>>8)|!Joypad_A|(!Joypad_B>>8)
	BEQ.b CODE_26D3E6
	STZ.w !RAM_SMB3_BattleMode_MariosFreezeHurtTimerFlag,x
CODE_26D3D5:
	LDA.w $0076
	BNE.b CODE_26D3DD
	DEC.w !RAM_SMB3_BattleMode_MariosHurtTimer,x
CODE_26D3DD:
	LDA.w !RAM_SMB3_BattleMode_MariosHurtTimer,x
	BIT.b #$01
	BNE.b CODE_26D3EF
	BRA.b CODE_26D3EC

CODE_26D3E6:
	LDA.b !RAM_SMB3_Global_FrameCounter
	BIT.b #$01
	BNE.b CODE_26D3EF
CODE_26D3EC:
	JSR.w SMB3_BattleMode_DrawPlayerSprite_Main
CODE_26D3EF:
	JSR.w SMB3_BattleMode_HandleLevelCollision_Main
	RTS

DATA_26D3F3:
	db $10,$40,$10,$40,$10,$40,$58,$40
	db $58,$40,$58,$40

;--------------------------------------------------------------------

SMB3_BattleMode_PlayerState03_Climbing:
.Main:
;$26D3FF
	TYX
	LDA.b !RAM_SMB3_Global_ControllerHold1P1,x
	AND.b #(!Joypad_DPadU>>8)|(!Joypad_DPadD>>8)
	BEQ.b CODE_26D422
	AND.w !RAM_SMB3_BattleMode_MariosTileCollisionFlags,x
	BNE.b CODE_26D422
	LDA.w !RAM_SMB3_BattleMode_MariosXPosLo,x
	AND.b #$0F
	BEQ.b CODE_26D422
	CMP.b #$08
	LDY.b #$01
	BCS.b CODE_26D41A
	LDY.b #$FF
CODE_26D41A:
	TYA
	CLC
	ADC.w !RAM_SMB3_BattleMode_MariosXPosLo,x
	STA.w !RAM_SMB3_BattleMode_MariosXPosLo,x
CODE_26D422:
	LDA.b !RAM_SMB3_Global_ControllerHold1P1,x
	AND.b #(!Joypad_DPadU>>8)|(!Joypad_DPadD>>8)
	BEQ.b CODE_26D458
	STA.b $00
	AND.w !RAM_SMB3_BattleMode_MariosTileCollisionFlags,x
	BNE.b CODE_26D478
	LDA.b $00
	CMP.b #$08
	BNE.b CODE_26D452
	LDA.b #$C0
	CMP.w !RAM_SMB3_BattleMode_TileMariosHeadIsIn,x
	BNE.b CODE_26D478
	DEC.w !RAM_SMB3_BattleMode_MariosYPosLo,x
	JSR.w SMB3_BattleMode_HandleLevelCollision_Main
	LDA.w !RAM_SMB3_BattleMode_TileMariosHeadIsIn,x
	CMP.b #$C0
	BEQ.b CODE_26D44C
	INC.w !RAM_SMB3_BattleMode_MariosYPosLo,x
CODE_26D44C:
	INC.w !RAM_SMB3_BattleMode_MariosClimbingAnimationFrameCounter,x
	JMP.w CODE_26D486

CODE_26D452:
	INC.w !RAM_SMB3_BattleMode_MariosYPosLo,x
	INC.w !RAM_SMB3_BattleMode_MariosClimbingAnimationFrameCounter,x
CODE_26D458:
	LDA.b !RAM_SMB3_Global_ControllerHold1P1,x
	AND.b #(!Joypad_DPadL>>8)|(!Joypad_DPadR>>8)
	STA.b $00
	AND.w !RAM_SMB3_BattleMode_MariosTileCollisionFlags,x
	BNE.b CODE_26D471
	LSR.b $00
	BCC.b CODE_26D46A
	INC.w !RAM_SMB3_BattleMode_MariosXPosLo,x
CODE_26D46A:
	LSR.b $00
	BCC.b CODE_26D471
	DEC.w !RAM_SMB3_BattleMode_MariosXPosLo,x
CODE_26D471:
	LDA.w !RAM_SMB3_BattleMode_TileMariosHeadIsIn,x
	CMP.b #$C0
	BEQ.b CODE_26D486
CODE_26D478:
	LDA.b #$01
	STA.w !RAM_SMB3_BattleMode_MariosState,x
	STZ.w !RAM_SMB3_BattleMode_MariosXSpeed,x
	STZ.w !RAM_SMB3_BattleMode_MariosYSpeed,x
	STZ.w !RAM_SMB3_BattleMode_MarioIsJumpingFlag,x
CODE_26D486:
	LDA.b #$88
	STA.b !RAM_SMB3_BattleMode_MariosPose,x
	LDA.w !RAM_SMB3_BattleMode_MariosPowerUp,x
	BEQ.b CODE_26D493
	LDA.b #$38
	STA.b !RAM_SMB3_BattleMode_MariosPose,x
CODE_26D493:
	JSR.w SMB3_BattleMode_HandleLevelCollision_Main
	LDA.w !RAM_SMB3_BattleMode_MariosClimbingAnimationFrameCounter,x
	AND.b #$04
	LSR
	LSR
	ADC.b #$01
	STA.w !RAM_SMB3_BattleMode_MariosFacingDirection,x
	JMP.w SMB3_BattleMode_DrawPlayerSprite_Main

;--------------------------------------------------------------------

SMB3_BattleMode_PlayerState02_Dead:
.Main:
;$26D4A5
	TYX
	LDA.b #$90
	STA.b !RAM_SMB3_BattleMode_MariosPose,x
	JSR.w SMB3_BattleMode_DrawPlayerSprite_Main
	LDA.w $0076
	BNE.b CODE_26D4E2
	LDA.w !RAM_SMB3_BattleMode_MariosDeathFreezeTimer,x
	BNE.b CODE_26D4E2
	JSR.w SMB3_BattleMode_UpdateSpritePosition_Player_Y
	LDA.w !RAM_SMB3_BattleMode_MariosYSpeed,x
	BMI.b CODE_26D4C3
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	CMP.b #$4C
else
	CMP.b #$40
endif
	BCS.b CODE_26D4C9
CODE_26D4C3:
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b !RAM_SMB3_Global_FrameCounter
	BIT.b #$01
	BNE.b +
	INC.w !RAM_SMB3_BattleMode_MariosYSpeed,x
+:
endif
	INC.w !RAM_SMB3_BattleMode_MariosYSpeed,x
	INC.w !RAM_SMB3_BattleMode_MariosYSpeed,x
CODE_26D4C9:
	LDA.w !RAM_SMB3_BattleMode_MariosYPosLo,x
	CMP.b #$E0
	BCC.b CODE_26D4E2
	LDA.w !RAM_SMB3_BattleMode_MariosYPosHi,x
	BNE.b CODE_26D4E2
	LDA.b #$40
	STA.w !RAM_SMB3_BattleMode_MariosDeathFreezeTimer,x
	STA.w !RAM_SMB3_BattleMode_MariosUnusedFlashingTimer,x
	LDA.b #$00
	STA.w !RAM_SMB3_BattleMode_MariosState,x
CODE_26D4E2:
	RTS

;--------------------------------------------------------------------

SMB3_BattleMode_HandleLevelCollision:
.Main:
;$26D4E3
	STZ.w !RAM_SMB3_BattleMode_MariosTileCollisionFlags,x
	STZ.w !RAM_SMB3_BattleMode_TileMariosFeetAreTouching,x
	STZ.w !RAM_SMB3_BattleMode_TileMariosHeadIsIn,x
	LDA.w !RAM_SMB3_BattleMode_MariosYPosHi,x
	BEQ.b CODE_26D4F6
	CPX.b #$02
	BCS.b CODE_26D4F6
	RTS

CODE_26D4F6:
	LDY.b #$05
CODE_26D4F8:
	STY.b $0F
	LDA.w !RAM_SMB3_BattleMode_MariosYPosLo,x
	CLC
	ADC.w DATA_21ECF3,y
	AND.b #$F0
	STA.b $00
	CPX.b #$02
	BCC.b CODE_26D51B
	LDA.w !RAM_SMB3_BattleMode_DisableMarioToLuigiCollision,x
	CMP.b #$0B
	BEQ.b CODE_26D514
	CMP.b #$13
	BNE.b CODE_26D539
CODE_26D514:
	TYA
	CLC
	ADC.b #$06
	TAY
	BRA.b CODE_26D539

CODE_26D51B:
	LDA.w !RAM_SMB3_BattleMode_MariosPowerUp,x
	BEQ.b CODE_26D525
	LDA.w !RAM_SMB3_BattleMode_MariosIsDuckingFlag,x
	BEQ.b CODE_26D52E
CODE_26D525:
	LDA.b $00
	CLC
	ADC.b #$10
	STA.b $00
	BRA.b CODE_26D539

CODE_26D52E:
	LDA.w !RAM_SMB3_BattleMode_MariosYPosLo,x
	CLC
	ADC.w DATA_21ECF9,y
	AND.b #$F0
	STA.b $00
CODE_26D539:
	LDA.w !RAM_SMB3_BattleMode_MariosXPosLo,x
	CLC
	ADC.w DATA_21ECE7,y
	STA.b $01
	JSR.w CODE_26D7C0
	LDY.b $0F
	BCS.b CODE_26D54C
	JMP.w CODE_26D670

CODE_26D54C:
	CPY.b #$02
	BCC.b CODE_26D553
	JMP.w CODE_26D5F5

CODE_26D553:
	LDA.w !RAM_SMB3_BattleMode_MariosYPosLo,x
	CMP.b #$D0
	BCC.b CODE_26D55D
	JMP.w CODE_26D5F2

CODE_26D55D:
	CPX.b #$02
	BCS.b CODE_26D573
	LDA.w !RAM_SMB3_BattleMode_MariosPowerUp,x
	BEQ.b CODE_26D573
	LDA.w !RAM_SMB3_BattleMode_MariosIsDuckingFlag,x
	BNE.b CODE_26D573
	LDA.w !RAM_SMB3_BattleMode_MariosYPosLo,x
	CLC
	ADC.b #$05
	BRA.b CODE_26D576

CODE_26D573:
	LDA.w !RAM_SMB3_BattleMode_MariosYPosLo,x
CODE_26D576:
	AND.b #$0F
	CMP.b #$09
	BCS.b CODE_26D57F
	JMP.w CODE_26D670

CODE_26D57F:
	CPX.b #$02
	BCS.b CODE_26D5F2
	LDA.w !RAM_SMB3_BattleMode_MariosYSpeed,x
	BPL.b CODE_26D5F2
	LDA.w !RAM_SMB3_BattleBounceSpr_DespawnTimer,x
	BNE.b CODE_26D5F2
	LDA.b #$7E2000
	STA.b $2E
	LDA.b #$7E2000>>8
	STA.b $2F
	LDA.b #$7E2000>>16
	STA.b $30
	LDY.b $02
	LDA.b #$C2
	STA.b [$2E],y
	TYA
	STA.w $1908,x
	LDA.w !RAM_SMB3_BattleMode_MariosYPosLo,x
	STA.w $0000
	LDA.w !RAM_SMB3_BattleMode_MariosPowerUp,x
	BEQ.b CODE_26D5BC
	LDA.w !RAM_SMB3_BattleMode_MariosIsDuckingFlag,x
	BNE.b CODE_26D5BC
	LDA.w $0000
	CLC
	ADC.b #$05
	STA.w $0000
CODE_26D5BC:
	LDA.w $0000
	AND.b #$F0
	STA.w !RAM_SMB3_BattleBounceSpr_YPosLo,x
	LDA.w !RAM_SMB3_BattleMode_MariosPowerUp,x
	BEQ.b CODE_26D5CE
	LDA.w !RAM_SMB3_BattleMode_MariosIsDuckingFlag,x
	BEQ.b CODE_26D5D7
CODE_26D5CE:
	LDA.w !RAM_SMB3_BattleBounceSpr_YPosLo,x
	CLC
	ADC.b #$10
	STA.w !RAM_SMB3_BattleBounceSpr_YPosLo,x
CODE_26D5D7:
	LDA.w !RAM_SMB3_BattleMode_MariosXPosLo,x
	CLC
	ADC.b #$08
	AND.b #$F0
	STA.w !RAM_SMB3_BattleBounceSpr_XPosLo,x
	LDA.b #$0E
	STA.w !RAM_SMB3_BattleBounceSpr_DespawnTimer,x
	LDA.b #$E0
	STA.w !RAM_SMB3_BattleBounceSpr_YSpeed,x
	JSR.w CODE_26D6A1
	JSR.w CODE_26D74B
CODE_26D5F2:
	JMP.w CODE_26D631

CODE_26D5F5:
	CPY.b #$04
	BCC.b CODE_26D5FC
	JMP.w CODE_26D5FF

CODE_26D5FC:
	JMP.w CODE_26D631

CODE_26D5FF:
	LDA.w !RAM_SMB3_BattleMode_MariosYPosLo,x
	AND.b #$0F
	CMP.b #$06
	BCS.b CODE_26D670
	LDA.w !RAM_SMB3_BattleMode_MariosYSpeed,x
	BMI.b CODE_26D670
	LDY.b $02
	LDA.w !RAM_SMB3_BattleMode_TileMariosFeetAreTouching,x
	CMP.b #$C2
	BEQ.b CODE_26D631
	LDA.b #$7E2000
	STA.b $2E
	LDA.b #$7E2000>>8
	STA.b $2F
	LDA.b #$7E2000>>16
	STA.b $30
	LDA.b [$2E],y
	CMP.b #$FE
	BCC.b CODE_26D62E
	AND.b #$01
	TAY
	LDA.w DATA_21EC57,y
CODE_26D62E:
	STA.w !RAM_SMB3_BattleMode_TileMariosFeetAreTouching,x
CODE_26D631:
	LDY.b $0F
	LDA.w !RAM_SMB3_BattleMode_MariosTileCollisionFlags,x
	ORA.w DATA_21ECFF,y
	STA.w !RAM_SMB3_BattleMode_MariosTileCollisionFlags,x
	CPX.b #$02
	BCC.b CODE_26D647
	LDA.w !RAM_SMB3_BattleMode_DisableMarioToLuigiCollision,x
	CMP.b #$01
	BEQ.b CODE_26D667
CODE_26D647:
	LDY.b $02
	LDA.b #$7E2000
	STA.b $2E
	LDA.b #$7E2000>>8
	STA.b $2F
	LDA.b #$7E2000>>16
	STA.b $30
	LDA.b [$2E],y
	CMP.b #$FE
	BCC.b CODE_26D661
	AND.b #$01
	TAY
	LDA.w DATA_21EC57,y
CODE_26D661:
	LDY.b $0F
	CMP.b #$C2
	BNE.b CODE_26D670
CODE_26D667:
	LDA.w !RAM_SMB3_BattleMode_MariosTileCollisionFlags,x
	ORA.w DATA_21ED05,y
	STA.w !RAM_SMB3_BattleMode_MariosTileCollisionFlags,x
CODE_26D670:
	CPY.b #$02
	BCS.b CODE_26D698
	LDY.b $02
	LDA.w !RAM_SMB3_BattleMode_TileMariosHeadIsIn,x
	CMP.b #$C0
	BEQ.b CODE_26D698
	LDA.b #$7E2000
	STA.b $2E
	LDA.b #$7E2000>>8
	STA.b $2F
	LDA.b #$7E2000>>16
	STA.b $30
	LDA.b [$2E],y
	CMP.b #$FE
	BCC.b CODE_26D695
	AND.b #$01
	TAY
	LDA.w DATA_21EC57,y
CODE_26D695:
	STA.w !RAM_SMB3_BattleMode_TileMariosHeadIsIn,x
CODE_26D698:
	LDY.b $0F
	DEY
	BMI.b CODE_26D6A0
	JMP.w CODE_26D4F8

CODE_26D6A0:
	RTS

CODE_26D6A1:
	LDA.w !RAM_SMB3_BattleMode_PreventMushroomSpawns
	BEQ.b CODE_26D6A7
	RTS

CODE_26D6A7:
	LDY.b #$00
	LDA.w !RAM_SMB3_BattleMode_HiddenMushroomXPos
	CMP.w !RAM_SMB3_BattleBounceSpr_XPosLo,x
	BEQ.b CODE_26D6B4
	JMP.w CODE_26D74A

CODE_26D6B4:
	LDA.w !RAM_SMB3_BattleMode_HiddenMushroomYPos
	CMP.w !RAM_SMB3_BattleBounceSpr_YPosLo,x
	BEQ.b CODE_26D6BF
	JMP.w CODE_26D74A

CODE_26D6BF:
	LDA.w !RAM_SMB3_BattleMode_MariosXSpeed,x
	STA.b $00
	PHX
	LDA.w $1A31
	STA.w $0002
	PHY
	LDX.b #$07
	JSR.w CODE_26DDCB
	PLY
	TXA
	BMI.b CODE_26D749
	LDA.w $0002
	STA.w $1A31
	DEC.w $18CA
	CPX.b #$07
	BCS.b CODE_26D6E5
	JMP.w CODE_26ED2A

CODE_26D6E5:
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$13
else
	LDA.b #$10
endif
	STA.w !RAM_SMB3_BattleNorSpr_XSpeed,x
	LDA.b $00
	BMI.b CODE_26D6F3
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$ED
else
	LDA.b #$F0
endif
	STA.w !RAM_SMB3_BattleNorSpr_XSpeed,x
CODE_26D6F3:
	INC.w !RAM_SMB3_BattleMode_PreventMushroomSpawns
	LDA.w !RAM_SMB3_BattleMode_HiddenMushroomXPos,y						; Note: Why use indexing for these hidden mushroom addresses? Was there supposed to be multiple mushrooms to find?
	STA.w !RAM_SMB3_BattleNorSpr_XPosLo,x
	LDA.w !RAM_SMB3_BattleMode_HiddenMushroomYPos,y
	SEC
	SBC.b #$08
	STA.w !RAM_SMB3_BattleNorSpr_YPosLo,x
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$D0
else
	LDA.b #$D8
endif
	STA.w !RAM_SMB3_BattleNorSpr_YSpeed,x
	STZ.w $18A6,x
	LDA.b #$00
	STA.w !RAM_SMB3_BattleMode_HiddenMushroomXPos,y
	LDA.b #$F0
	STA.w !RAM_SMB3_BattleMode_HiddenMushroomYPos,y
	STZ.w !RAM_SMB3_BattleNorSpr_InsidePipeTimer,x
	LDA.b #!Define_SMB3_SpriteID_BattleNorSpr10_Mushroom
	STA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	LDA.w !RAM_SMB3_BattleMode_PreventMysteryMushroomSpawns
	BNE.b CODE_26D73E
	JSL.l CODE_25F805
	AND.b #$1F
	CMP.w !RAM_SMB3_BattleMode_MushroomSpawnCounter
	BCS.b CODE_26D73E
	INC.w !RAM_SMB3_BattleMode_PreventMysteryMushroomSpawns
	LDA.b #!Define_SMB3_SpriteID_BattleNorSpr11_RedMysteryMushroom
	STA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	LDA.b #$01
	STA.w !RAM_SMB3_BattleMode_MushroomSpawnCounter
	BRA.b CODE_26D73E

CODE_26D73E:
	INC.w !RAM_SMB3_BattleMode_MushroomSpawnCounter
	LDA.b #!Define_SMAS_Sound0060_KickShell
	STA.w !RAM_SMB3_Global_SoundCh1
	INC.w $19BD
CODE_26D749:
	PLX
CODE_26D74A:
	RTS

;--------------------------------------------------------------------

CODE_26D74B:
	LDA.w $1A36
	CMP.w !RAM_SMB3_BattleBounceSpr_XPosLo,x
	BNE.b CODE_26D76A
	LDA.w $1A37
	CMP.w !RAM_SMB3_BattleBounceSpr_YPosLo,x
	BNE.b CODE_26D76A
	LDA.b #!Define_SMAS_Sound0060_GetPowerup
	STA.w !RAM_SMB3_Global_SoundCh1
	LDA.b #$18
	STA.w $1A35
	LDA.b #$FF
	STA.w $1A37
CODE_26D76A:
	RTS

;--------------------------------------------------------------------

; Note: Unreferenced routine?

ADDR_26D76B:
	LDY.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	LDA.b #$08
	STA.b $03
	LDA.b $02
	AND.b #$F0
	ASL
	ROL.b $03
	ASL
	ROL.b $03
	STA.b $04
	LDA.b $02
	ASL
	AND.b #$1F
	CLC
	ADC.b $04
	STA.w SMB3_StripeImageUploadTable[$00].HighByte,y
	CLC
	ADC.b #$20
	STA.w SMB3_StripeImageUploadTable[$03].HighByte,y
	LDA.b $03
	AND.b #$DF
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,y
	STA.w SMB3_StripeImageUploadTable[$03].LowByte,y
	REP.b #$20
	LDA.w #$0240
	STA.w SMB3_StripeImageUploadTable[$01].LowByte,y
	STA.w SMB3_StripeImageUploadTable[$04].LowByte,y
	LDA.w #$18FF
	STA.w SMB3_StripeImageUploadTable[$02].LowByte,y
	LDA.w #$1CFF
	STA.w SMB3_StripeImageUploadTable[$05].LowByte,y
	LDA.w #$FFFF
	STA.w SMB3_StripeImageUploadTable[$06].LowByte,y
	SEP.b #$20
	TYA
	CLC
	ADC.b #$0C
	STA.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	RTS

;--------------------------------------------------------------------

CODE_26D7C0:
	LDA.b $01
	LSR
	LSR
	LSR
	LSR
	ORA.b $00
	TAY
	STY.b $02
	LDA.b #$7E2000
	STA.b $2E
	LDA.b #$7E2000>>8
	STA.b $2F
	LDA.b #$7E2000>>16
	STA.b $30
	LDA.b [$2E],y
	CMP.b #$FE
	BCC.b CODE_26D7E3
	AND.b #$01
	TAY
	LDA.w DATA_21EC57,y
CODE_26D7E3:
	PHA
	ASL
	ROL.b $0E
	ASL
	ROL.b $0E
	LDA.b $0E
	AND.b #$03
	TAY
	PLA
	CMP.w !RAM_SMB3_Global_Map16WallTileAttributeTable,y
	RTS

;--------------------------------------------------------------------

SMB3_BattleMode_HandleBattleNormalSpriteLevelCollision:
.Main:
;$26D7F4
	TXA
	CLC
	ADC.b #$02
	TAX
	JSR.w SMB3_BattleMode_HandleLevelCollision_Main
	LDX.w $190E
	RTS

;--------------------------------------------------------------------

SMB3_BattleMode_DrawPlayerSprite:
.Main:
;$26D800
	LDA.w !RAM_SMB3_BattleMode_MariosYPosHi,x
	BPL.b CODE_26D80D
	LDA.w !RAM_SMB3_BattleMode_MariosYPosLo,x
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	CMP.b #$F0
else
	CMP.b #$E0
endif
	BCS.b CODE_26D810
	RTS

CODE_26D80D:
	BEQ.b CODE_26D810
	RTS

CODE_26D810:
	LDA.w !RAM_SMB3_BattleMode_MariosUnusedFlashingTimer,x
	BEQ.b CODE_26D81C
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$02
	BEQ.b CODE_26D81C
	RTS

CODE_26D81C:
	TXA
	ASL
	ASL
	ASL
	ASL
	ASL
	TAY
	LDA.w !RAM_SMB3_BattleMode_MariosXPosLo,x
	STA.w SMB3_OAMBuffer[$3C].XDisp,y
	LDA.w !RAM_SMB3_BattleMode_MariosYPosLo,x
	STA.w SMB3_OAMBuffer[$3C].YDisp,y
	LDA.b #$0E
	STA.b $0A
	LDA.w $190E
	BEQ.b CODE_26D83C
	LDA.b #$0A
	STA.b $0A
CODE_26D83C:
	LDA.w !RAM_SMB3_BattleMode_MariosFacingDirection,x
	TAX
	LDA.w DATA_21ED16,x
	ORA.b $0A
	STA.w SMB3_OAMBuffer[$3C].Prop,y
	LDX.w $190E
	LDA.w !RAM_SMB3_BattleMode_MariosState,x
	CMP.b #$02
	BEQ.b CODE_26D859
	LDA.w !RAM_SMB3_BattleMode_MariosFacingDirection,x
	BIT.b #$01
	BNE.b CODE_26D861
CODE_26D859:
	LDA.w SMB3_OAMBuffer[$3C].Prop,y
	AND.b #$BF
	STA.w SMB3_OAMBuffer[$3C].Prop,y
CODE_26D861:
	LDA.w !RAM_SMB3_BattleMode_MariosState,x
	CMP.b #$02
	BEQ.b CODE_26D89D
	LDA.w !RAM_SMB3_BattleMode_MariosFacingDirection,x
	BIT.b #$01
	BEQ.b CODE_26D89D
	LDA.w !RAM_SMB3_BattleMode_PlayerHasWonTimer
	BEQ.b CODE_26D890
	TXA
	EOR.w $078C
	AND.b #$01
	BNE.b CODE_26D890
	LDA.b !RAM_SMB3_BattleMode_MariosPose,x
	CMP.b #$50
	BEQ.b CODE_26D886
	CMP.b #$98
	BNE.b CODE_26D890
CODE_26D886:
	LDA.w SMB3_OAMBuffer[$3C].Prop,y
	AND.b #$BF
	STA.w SMB3_OAMBuffer[$3C].Prop,y
	BRA.b CODE_26D89D

CODE_26D890:
	LDA.w SMB3_OAMBuffer[$3C].XDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$3C].XDisp,y
	LDA.b #$F8
	BRA.b CODE_26D89F

CODE_26D89D:
	LDA.b #$08
CODE_26D89F:
	STA.w $0000
	LDA.b #$00
	STA.w SMB3_OAMBuffer[$3C].Tile,y
	CPX.b #$00
	BEQ.b CODE_26D8B0
	LDA.b #$10
	STA.w SMB3_OAMBuffer[$3C].Tile,y
CODE_26D8B0:
	LDA.w SMB3_OAMBuffer[$3C].XDisp,y
	STA.w SMB3_OAMBuffer[$3E].XDisp,y
	STA.w SMB3_OAMBuffer[$40].XDisp,y
	STA.w SMB3_OAMBuffer[$42].XDisp,y
	CLC
	ADC.w $0000
	STA.w SMB3_OAMBuffer[$3D].XDisp,y
	STA.w SMB3_OAMBuffer[$3F].XDisp,y
	STA.w SMB3_OAMBuffer[$41].XDisp,y
	STA.w SMB3_OAMBuffer[$43].XDisp,y
	LDA.w SMB3_OAMBuffer[$3C].YDisp,y
	STA.w SMB3_OAMBuffer[$3D].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$3E].YDisp,y
	STA.w SMB3_OAMBuffer[$3F].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$40].YDisp,y
	STA.w SMB3_OAMBuffer[$41].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$42].YDisp,y
	STA.w SMB3_OAMBuffer[$43].YDisp,y
	LDA.w SMB3_OAMBuffer[$3C].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$3D].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$3E].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$3F].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$40].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$41].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$42].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$43].Tile,y
	LDA.w SMB3_OAMBuffer[$3C].Prop,y
	STA.w SMB3_OAMBuffer[$3D].Prop,y
	STA.w SMB3_OAMBuffer[$3E].Prop,y
	STA.w SMB3_OAMBuffer[$3F].Prop,y
	STA.w SMB3_OAMBuffer[$40].Prop,y
	STA.w SMB3_OAMBuffer[$41].Prop,y
	STA.w SMB3_OAMBuffer[$42].Prop,y
	STA.w SMB3_OAMBuffer[$43].Prop,y
	STA.b $00
	LDA.b !RAM_SMB3_BattleMode_MariosPose,x
	CMP.b #$30
	BNE.b CODE_26D97D
	LDA.w !RAM_SMB3_BattleMode_MariosPowerUp,x
	BEQ.b CODE_26D97D
	PHY
	TYA
	LSR
	TAY
	LDA.w !RAM_SMB3_BattleMode_MariosYPosLo,x
	CLC
	ADC.b #$10
	STA.w SMB3_OAMBuffer[$34].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$35].YDisp,y
	LDA.b #$8E
	STA.w SMB3_OAMBuffer[$34].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$35].Tile,y
	LDA.b $00
	STA.w SMB3_OAMBuffer[$34].Prop,y
	STA.w SMB3_OAMBuffer[$35].Prop,y
	LDA.w !RAM_SMB3_BattleMode_MariosFacingDirection,x
	BIT.b #$01
	BNE.b CODE_26D964
	LDA.w !RAM_SMB3_BattleMode_MariosXPosLo,x
	SEC
	SBC.b #$08
	BRA.b CODE_26D96A

CODE_26D964:
	LDA.w !RAM_SMB3_BattleMode_MariosXPosLo,x
	CLC
	ADC.b #$10
CODE_26D96A:
	STA.w SMB3_OAMBuffer[$34].XDisp,y
	STA.w SMB3_OAMBuffer[$35].XDisp,y
	TYA
	LSR
	LSR
	TAY
	LDA.b #$00
	STA.w SMB3_OAMTileSizeBuffer[$34].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$35].Slot,y
	PLY
CODE_26D97D:
	LDA.w !RAM_SMB3_BattleMode_MariosXPosLo,x
	CMP.b #$F1
	BCC.b CODE_26D9CA
	PHY
	LDA.b #$08
	STA.b $00
CODE_26D989:
	LDA.w SMB3_OAMBuffer[$3C].XDisp,y
	STA.w SMB3_OAMBuffer[$4C].XDisp,y
	LDA.w SMB3_OAMBuffer[$3C].YDisp,y
	STA.w SMB3_OAMBuffer[$4C].YDisp,y
	LDA.w SMB3_OAMBuffer[$3C].Tile,y
	STA.w SMB3_OAMBuffer[$4C].Tile,y
	LDA.w SMB3_OAMBuffer[$3C].Prop,y
	STA.w SMB3_OAMBuffer[$4C].Prop,y
	TYA
	CLC
	ADC.b #$04
	TAY
	DEC.b $00
	BNE.b CODE_26D989
	PLA
	LSR
	LSR
	TAY
	LDA.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$4C].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$4E].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$50].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$52].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$4D].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$4F].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$51].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$53].Slot,y
	BRA.b CODE_26D9CE

CODE_26D9CA:
	TYA
	LSR
	LSR
	TAY
CODE_26D9CE:
	LDA.b #$00
	STA.w SMB3_OAMTileSizeBuffer[$3C].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$3D].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$3E].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$3F].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$40].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$41].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$42].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$43].Slot,y
	RTS

;--------------------------------------------------------------------

CODE_26D9E9:
	LDA.w !RAM_SMB3_BattleMode_MariosState
	CMP.b #$02
	BEQ.b CODE_26DA35
	LDA.w !RAM_SMB3_BattleMode_LuigisState
	CMP.b #$02
	BEQ.b CODE_26DA35
	LDA.w !RAM_SMB3_BattleMode_DisableMarioToLuigiCollision
	BNE.b CODE_26DA32
	LDX.b #$01
	LDY.b #$04
CODE_26DA00:
	JSR.w SMB3_BattleMode_GetPlayerClipping_Main
	LDA.w !RAM_SMB3_BattleMode_MariosPowerUp,x
	BEQ.b CODE_26DA0D
	LDA.w !RAM_SMB3_BattleMode_MariosIsDuckingFlag,x
	BEQ.b CODE_26DA16
CODE_26DA0D:
	LDA.w $0000,y
	SEC
	SBC.b #$02
	STA.w $0000,y
CODE_26DA16:
	DEY
	DEY
	DEY
	DEY
	DEX
	BPL.b CODE_26DA00
	JSR.w SMB3_BattleMode_CheckForContact_Main
	BCC.b CODE_26DA35
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.w !RAM_SMB3_BattleMode_MariosYPosHi
	EOR.w !RAM_SMB3_BattleMode_LuigisYPosHi
	BNE.b CODE_26DA35
endif
	LDA.b #$01
	STA.w !RAM_SMB3_BattleMode_MariosState
	STA.w !RAM_SMB3_BattleMode_LuigisState
	LDA.b #$0C
	STA.w !RAM_SMB3_BattleMode_DisableMarioToLuigiCollision
	JMP.w CODE_26DA36

CODE_26DA32:
	DEC.w !RAM_SMB3_BattleMode_DisableMarioToLuigiCollision
CODE_26DA35:
	RTS

CODE_26DA36:
	STZ.w !RAM_SMB3_BattleMode_MariosFreezeHurtTimerFlag
	STZ.w !RAM_SMB3_BattleMode_LuigisFreezeHurtTimerFlag
	STZ.w $0000
	LDA.w !RAM_SMB3_BattleMode_MariosPowerUp,x
	BEQ.b CODE_26DA49
	LDA.b #$10
	STA.w $0000
CODE_26DA49:
	LDA.w !RAM_SMB3_BattleMode_MariosYPosLo
	CLC
	ADC.w $0000
	SEC
	SBC.w !RAM_SMB3_BattleMode_LuigisYPosLo
	PHP
	BPL.b CODE_26DA5A
	EOR.b #$FF
	INC
CODE_26DA5A:
	CMP.b #$08
	BCS.b CODE_26DA61
	JMP.w CODE_26DB31

CODE_26DA61:
	LDY.b #$00
	PLP
	BCC.b CODE_26DA67
	INY
CODE_26DA67:
	LDA.w !RAM_SMB3_BattleMode_MariosYPosHi
	ORA.w !RAM_SMB3_BattleMode_LuigisYPosHi
	BNE.b CODE_26DAD2
	PHY
	TYA
	STA.w $000F
	JSR.w CODE_26F08E
	BCS.b CODE_26DAD1
	LDA.b #$00
	STA.w !RAM_SMB3_BattleSmokeSpr_AnimationFrame,y
	LDA.b #$02
	STA.w !RAM_SMB3_BattleSmokeSpr_OAMTileSize,y
	ASL
	STA.w !RAM_SMB3_BattleSmokeSpr_AnimationFrameCounter,y
	LDA.w !RAM_SMB3_BattleMode_LuigisXPosLo
	SEC
	SBC.w !RAM_SMB3_BattleMode_MariosXPosLo
	BPL.b CODE_26DA94
	SEC
	ROR
	BRA.b CODE_26DA95

CODE_26DA94:
	LSR
CODE_26DA95:
	CLC
	ADC.w !RAM_SMB3_BattleMode_MariosXPosLo
	STA.w !RAM_SMB3_BattleSmokeSpr_XPosLo,y
	LDA.w $000F
	BEQ.b CODE_26DAB6
	LDA.w !RAM_SMB3_BattleMode_MariosPowerUp
	BNE.b CODE_26DAAE
	LDA.w !RAM_SMB3_BattleMode_MariosYPosLo
	CLC
	ADC.b #$08
	BRA.b CODE_26DAC9

CODE_26DAAE:
	LDA.w !RAM_SMB3_BattleMode_MariosYPosLo
	SEC
	SBC.b #$08
	BRA.b CODE_26DAC9

CODE_26DAB6:
	LDA.w !RAM_SMB3_BattleMode_LuigisPowerUp
	BNE.b CODE_26DAC3
	LDA.w !RAM_SMB3_BattleMode_LuigisYPosLo
	CLC
	ADC.b #$08
	BRA.b CODE_26DAC9

CODE_26DAC3:
	LDA.w !RAM_SMB3_BattleMode_LuigisYPosLo
	SEC
	SBC.b #$08
CODE_26DAC9:
	STA.w !RAM_SMB3_BattleSmokeSpr_YPosLo,y
	LDA.b #$01
	STA.w !RAM_SMB3_BattleSmokeSpr_SpriteID,y
CODE_26DAD1:
	PLY
CODE_26DAD2:
	PHX
	TYX
	TYA
	EOR.b #$01
	TAY
	LDA.w !RAM_SMB3_BattleMode_MariosXPosLo,x
	SEC
	SBC.w !RAM_SMB3_BattleMode_MariosXPosLo,y
	BCC.b CODE_26DAE6
	INC.w !RAM_SMB3_BattleMode_MariosXPosLo,x
	BRA.b CODE_26DAE9

CODE_26DAE6:
	DEC.w !RAM_SMB3_BattleMode_MariosXPosLo,x
CODE_26DAE9:
	TXY
	PLX
	LDA.w DATA_21ED1D,y
	AND.w !RAM_SMB3_BattleMode_MariosYSpeed
	BPL.b CODE_26DAF6
	JMP.w CODE_26DB0F

CODE_26DAF6:
	LDA.w DATA_21ED1D,y
	STA.w !RAM_SMB3_BattleMode_MariosYSpeed
	LDA.w !RAM_SMB3_BattleMode_MariosTileCollisionFlags
	AND.b #$04
	BEQ.b CODE_26DB0F
	LDA.w DATA_21ED1D+$03,y
	STA.w !RAM_SMB3_BattleMode_MariosSquishAnimationTimer
	LDA.w DATA_21ED1D+$06,y
	STA.w !RAM_SMB3_Global_SoundCh1
CODE_26DB0F:
	LDA.w DATA_21ED1D+$01,y
	AND.w !RAM_SMB3_BattleMode_LuigisYSpeed
	BMI.b CODE_26DB30
	LDA.w DATA_21ED1D+$01,y
	STA.w !RAM_SMB3_BattleMode_LuigisYSpeed
	LDA.w !RAM_SMB3_BattleMode_LuigisTileCollisionFlags
	AND.b #$04
	BEQ.b CODE_26DB30
	LDA.w DATA_21ED1D+$04,y
	STA.w !RAM_SMB3_BattleMode_LuigisSquishAnimationTimer
	LDA.w DATA_21ED1D+$07,y
	STA.w !RAM_SMB3_Global_SoundCh1
CODE_26DB30:
	RTS

CODE_26DB31:
	LDA.w !RAM_SMB3_BattleMode_MariosYPosHi
	BEQ.b CODE_26DB3D
	LDA.w !RAM_SMB3_BattleMode_MariosYPosLo
	CMP.b #$F0
	BCC.b CODE_26DB87
CODE_26DB3D:
	JSR.w CODE_26F08E
	BCS.b CODE_26DB87
	LDA.b #$00
	STA.w !RAM_SMB3_BattleSmokeSpr_AnimationFrame,y
	LDA.b #$02
	STA.w !RAM_SMB3_BattleSmokeSpr_OAMTileSize,y
	LDA.b #$04
	STA.w !RAM_SMB3_BattleSmokeSpr_AnimationFrameCounter,y
	LDA.w !RAM_SMB3_BattleMode_MariosXPosLo
	CMP.w !RAM_SMB3_BattleMode_LuigisXPosLo
	BCS.b CODE_26DB5E
	CLC
	ADC.b #$08
	BRA.b CODE_26DB61

CODE_26DB5E:
	SEC
	SBC.b #$08
CODE_26DB61:
	STA.w !RAM_SMB3_BattleSmokeSpr_XPosLo,y
	LDA.w !RAM_SMB3_BattleMode_MariosPowerUp
	EOR.w !RAM_SMB3_BattleMode_LuigisPowerUp
	BNE.b CODE_26DB79
	LDA.w !RAM_SMB3_BattleMode_MariosPowerUp
	BEQ.b CODE_26DB79
	LDA.w !RAM_SMB3_BattleMode_MariosYPosLo
	CLC
	ADC.b #$08
	BRA.b CODE_26DB7F

CODE_26DB79:
	LDA.w !RAM_SMB3_BattleMode_MariosYPosLo
	CLC
	ADC.b #$14
CODE_26DB7F:
	STA.w !RAM_SMB3_BattleSmokeSpr_YPosLo,y
	LDA.b #$01
	STA.w !RAM_SMB3_BattleSmokeSpr_SpriteID,y
CODE_26DB87:
	PLP
	LDY.b #$00
	LDA.w !RAM_SMB3_BattleMode_MariosXPosLo
	CMP.w !RAM_SMB3_BattleMode_LuigisXPosLo
	BCS.b CODE_26DB93
	INY
CODE_26DB93:
	EOR.w !RAM_SMB3_BattleMode_LuigisXPosLo
	BPL.b CODE_26DBA5
	LDA.b #$EF
	CMP.w !RAM_SMB3_BattleMode_MariosXPosLo
	BCC.b CODE_26DBA4
	CMP.w !RAM_SMB3_BattleMode_LuigisXPosLo
	BCS.b CODE_26DBA5
CODE_26DBA4:
	INY
CODE_26DBA5:
	LDA.w DATA_21ED19,y
	STA.w !RAM_SMB3_BattleMode_MariosXSpeed
	LDA.w DATA_21ED19+$01,y
	STA.w !RAM_SMB3_BattleMode_LuigisXSpeed
	LDA.w !RAM_SMB3_BattleMode_MariosPowerUp
	BNE.b CODE_26DBC1
	LDA.w !RAM_SMB3_BattleMode_LuigisPowerUp
	BEQ.b CODE_26DBC1
	LDA.w DATA_21ED26,y
	STA.w !RAM_SMB3_BattleMode_MariosXSpeed
CODE_26DBC1:
	LDA.w !RAM_SMB3_BattleMode_LuigisPowerUp
	BNE.b CODE_26DBD1
	LDA.w !RAM_SMB3_BattleMode_MariosPowerUp
	BEQ.b CODE_26DBD1
	LDA.w DATA_21ED26+$01,y
	STA.w !RAM_SMB3_BattleMode_LuigisXSpeed
CODE_26DBD1:
	TYA
	AND.b #$01
	INC
	STA.w !RAM_SMB3_BattleMode_LuigisFacingDirection
	EOR.b #$03
	STA.w !RAM_SMB3_BattleMode_MariosFacingDirection
	RTS

;--------------------------------------------------------------------

SMB3_BattleMode_GetPlayerClipping:
.Main:
;$26DBDE
	PHY
	LDA.w !RAM_SMB3_BattleMode_MariosPowerUp,x
	TAY
	BEQ.b CODE_26DBEB
	LDA.w !RAM_SMB3_BattleMode_MariosIsDuckingFlag,x
	BEQ.b CODE_26DBEB
	DEY
CODE_26DBEB:
	LDA.w DATA_21ED0B,y
	PLY
	CLC
	ADC.w !RAM_SMB3_BattleMode_MariosYPosLo,x
	STA.w $0000,y
	LDA.w !RAM_SMB3_BattleMode_MariosXPosLo,x
	CLC
	ADC.b #$08
	STA.w $0001,y
	LDA.b #$06
	PHA
	LDA.w !RAM_SMB3_BattleMode_MariosPowerUp,x
	BEQ.b CODE_26DC10
	LDA.w !RAM_SMB3_BattleMode_MariosIsDuckingFlag,x
	BNE.b CODE_26DC10
	PLA
	ASL
	BRA.b CODE_26DC11

CODE_26DC10:
	PLA
CODE_26DC11:
	STA.w $0002,y
	LDA.b #$06
	STA.w $0003,y
	RTS

;--------------------------------------------------------------------

SMB3_BattleMode_CheckForContact:
.Main:
;$26DC1A
	TXA
	PHA
	LDX.b #$01
CODE_26DC1E:
	LDA.b $04,x
	SEC
	SBC.b $00,x
	BPL.b CODE_26DC28
	EOR.b #$FF
	INC
CODE_26DC28:
	STA.b $08
	LDA.b $02,x
	CLC
	ADC.b $06,x
	CMP.b $08
	BCC.b CODE_26DC36
	DEX
	BPL.b CODE_26DC1E
CODE_26DC36:
	PLA
	TAX
	RTS

;--------------------------------------------------------------------

SMB3_BattleMode_HandleSpawningSprites:
.Main:
;$26DC39
	LDA.w $18CB
	ORA.w $18CC
	ORA.w !RAM_SMB3_BattleMode_PlayerHasWonTimer
	BNE.b CODE_26DC61
	INC.b $A9
	LDA.b $A9
	AND.b #$1F
	BNE.b CODE_26DC62
	INC.w $190D
	BNE.b CODE_26DC62
	JSR.w CODE_26DC8F
	TXA
	BMI.b CODE_26DC62
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$13
else
	LDA.b #$10
endif
	STA.w !RAM_SMB3_BattleNorSpr_YSpeed,x
	LDA.b #!Define_SMB3_SpriteID_BattleNorSpr08_ReflectingBoo
	STA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
CODE_26DC61:
	RTS

CODE_26DC62:
	LDA.b $A9
	CMP.b #$80
	BEQ.b CODE_26DC6B
	JMP.w CODE_26DD33

CODE_26DC6B:
	INC.w $190C
	LDA.w $190C
	BIT.b #$07
	BEQ.b CODE_26DC8F
	INC.w $1A32
	LDA.w $1A32
	BIT.b #$03
	BEQ.b CODE_26DC82
	JMP.w CODE_26DD33

CODE_26DC82:
	LDA.w $19BB
	CMP.b #$02
	BNE.b CODE_26DC8C
	JMP.w CODE_26DD33

CODE_26DC8C:
	JMP.w CODE_26DE23

CODE_26DC8F:
	LDA.w $1A31
	STA.w $0000
	LDX.b #$06
	JSR.w CODE_26DDCB
	TXA
	BPL.b CODE_26DCA0
	JMP.w CODE_26DD32

CODE_26DCA0:
	LDA.w $0000
	STA.w $1A31
	DEC.w $18CA
	CPX.b #$05
	BCS.b CODE_26DCB0
	JMP.w CODE_26ED2A

CODE_26DCB0:
	LDA.w $190C
	LSR
	AND.b #$01
	TAY
	LDA.w DATA_21ED3C,y
	STA.w !RAM_SMB3_BattleNorSpr_XSpeed,x
	LDA.w DATA_21ED3A,y
	STA.w !RAM_SMB3_BattleNorSpr_XPosLo,x
	JSL.l CODE_25F805
	LDA.w $192D
	AND.b #$01
	TAY
	LDA.w !RAM_SMB3_BattleMode_MariosYPosLo,y
	STA.w !RAM_SMB3_BattleNorSpr_YPosLo,x
	LDA.w !RAM_SMB3_BattleMode_MariosYPosHi,y
	BNE.b CODE_26DCED
	LDA.w !RAM_SMB3_BattleMode_MariosPowerUp,y
	BNE.b CODE_26DCE6
	LDA.w !RAM_SMB3_BattleNorSpr_YPosLo,x
	CLC
	ADC.b #$10
	STA.w !RAM_SMB3_BattleNorSpr_YPosLo,x
CODE_26DCE6:
	LDA.w !RAM_SMB3_BattleNorSpr_YPosLo,x
	CMP.b #$10
	BCS.b CODE_26DCF2
CODE_26DCED:
	LDA.b #$10
	STA.w !RAM_SMB3_BattleNorSpr_YPosLo,x
CODE_26DCF2:
	LDA.b #!Define_SMB3_SpriteID_BattleNorSpr07_WaveMotionBoo
	STA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	STZ.w !RAM_SMB3_BattleNorSpr_YSpeed,x
	STZ.w $18A6,x
	JSR.w CODE_26DD0B
	LDA.b #$60
	STA.w !RAM_SMB3_BattleNorSpr_DecrementingTable7E18E9,x
	LDA.b #!Define_SMAS_Sound0063_BooAppears
	STA.w !RAM_SMB3_Global_SoundCh3
	RTS

CODE_26DD0B:
	STZ.w !RAM_SMB3_BattleNorSpr_YPosHi,x
	STZ.w $18A6,x
	STZ.w !RAM_SMB3_BattleNorSpr_TileSpritesFeetAreTouching,x
	STZ.w !RAM_SMB3_BattleNorSpr_SpeedUpAnimationFlag,x
	STZ.w !RAM_SMB3_BattleNorSpr_Table7E1953,x
	STZ.w !RAM_SMB3_BattleNorSpr_InsidePipeTimer,x
	STZ.w $18CD,x
	STZ.w !RAM_SMB3_BattleNorSpr_DisableSpriteCollisionTimer,x
	STZ.w !RAM_SMB3_BattleNorSpr_UnusedFreezeSpriteTimer,x
	STZ.w !RAM_SMB3_BattleNorSpr_DecrementingTable7E18E9,x
	STZ.w !RAM_SMB3_BattleNorSpr_StoredXSpeed,x
	STZ.w !RAM_SMB3_BattleNorSpr_IsTurningAroundFlag,x
	STZ.w !RAM_SMB3_BattleNorSpr_BlueEnemyFlag,x
CODE_26DD32:
	RTS

CODE_26DD33:
	LDA.b $A9
	AND.b #$FF
	BNE.b CODE_26DD32
CODE_26DD39:
	LDA.w $199A
	ASL
	ASL
	ADC.w $199A
	ADC.w $199A
	ADC.w $1A31
	TAY
	PHB
	PHK
	PLB
	LDA.w DATA_26DD6B,y
	CMP.b #$03
	BNE.b CODE_26DD5D
	LDY.w $1A2A
	BEQ.b CODE_26DD5D
	PLB
	INC.w $1A31
	BRA.b CODE_26DD39

CODE_26DD5D:
	PLB
	ASL
	TAX
	JMP.w (DATA_26DD63,x)

DATA_26DD63:
	dw SMB3_BattleMode_SpawnSpiny_Main
	dw SMB3_BattleMode_SpawnFighterFly_Main
	dw SMB3_BattleMode_SpawnCrab_Main
	dw SMB3_BattleMode_SpawnKoopa_Main

DATA_26DD6B:
	db $00,$00,$03,$00,$00,$00
	db $00,$00,$03,$02,$00,$02
	db $02,$02,$03,$02,$02,$02
	db $00,$01,$03,$01,$00,$01
	db $01,$01,$03,$01,$01,$01
	db $02,$01,$03,$02,$01,$02
	db $01,$02,$03,$00,$01,$02
	db $01,$02,$03,$01,$02,$01
	db $00,$01,$02,$03,$00,$01

;--------------------------------------------------------------------

SMB3_BattleMode_SpawnCrab:
.Main:
;$26DDA1
	JSR.w CODE_26DDC9
	TXA
	BMI.b CODE_26DDBC
	LDA.b #!Define_SMB3_SpriteID_BattleNorSpr02_Crab
	STA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	LDA.w $1960
	BEQ.b CODE_26DDBC
	DEC.w $1960
	LDA.b #$01
	STA.w !RAM_SMB3_BattleNorSpr02_Crab_IsAngryFlag,x
	JSR.w CODE_26DDFE
CODE_26DDBC:
	RTS

;--------------------------------------------------------------------

SMB3_BattleMode_SpawnFighterFly:
.Main:
;$26DDBD
	JSR.w CODE_26DDC9
	TXA
	BMI.b CODE_26DDC8
	LDA.b #!Define_SMB3_SpriteID_BattleNorSpr03_FighterFly
	STA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
CODE_26DDC8:
	RTS

;--------------------------------------------------------------------

SMB3_BattleMode_SpawnSpiny:
.Main:
CODE_26DDC9:
	LDX.b #$03
CODE_26DDCB:
	LDA.w !RAM_SMB3_BattleNorSpr_CurrentStatus,x
	BEQ.b CODE_26DDD4
	DEX
	BPL.b CODE_26DDCB
	RTS

CODE_26DDD4:
	INC.w $18CA
	INC.w $1A31
	LDA.w $1A31
	CMP.b #$06
	BNE.b CODE_26DDE4
	STZ.w $1A31
CODE_26DDE4:
	LDA.b #$01
	STA.w !RAM_SMB3_BattleNorSpr_CurrentStatus,x
	LDA.b #$20
	STA.w !RAM_SMB3_BattleNorSpr_YPosLo,x
	STZ.w !RAM_SMB3_BattleNorSpr_YSpeed,x
	LDA.b #!Define_SMB3_SpriteID_BattleNorSpr00_Spiny
	STA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	JSR.w CODE_26DD0B
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$26
else
	LDA.b #$30
endif
	STA.w !RAM_SMB3_BattleNorSpr_InsidePipeTimer,x
CODE_26DDFE:
	REP.b #$30
	LDY.w #$0000
	LDA.w $1A3A
	CMP.w $1A3C
	BCS.b CODE_26DE11
	INY
	STZ.w $1A3C
	BRA.b CODE_26DE14

CODE_26DE11:
	STZ.w $1A3A
CODE_26DE14:
	SEP.b #$30
	LDA.w DATA_21ED32,y
	STA.w !RAM_SMB3_BattleNorSpr_XPosLo,x
CODE_26DE1C:
	LDA.w DATA_21ED34,y
	STA.w !RAM_SMB3_BattleNorSpr_XSpeed,x
	RTS

CODE_26DE23:
	LDA.w !RAM_SMB3_BattleMode_PreventMushroomSpawns
	BNE.b CODE_26DE88
	LDA.w $1A31
	STA.w $0000
	LDX.b #$08
	JSR.w CODE_26DDCB
	TXA
	BMI.b CODE_26DE88
	LDA.w $0000
	STA.w $1A31
	DEC.w $18CA
	CPX.b #$08
	BCS.b CODE_26DE46
	JMP.w CODE_26ED2A

CODE_26DE46:
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$13
else
	LDA.b #$10
endif
	PHA
	LDA.w !RAM_SMB3_BattleNorSpr_XSpeed,x
	BPL.b CODE_26DE52
	PLA
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$ED
else
	LDA.b #$F0
endif
	PHA
CODE_26DE52:
	PLA
	STA.w !RAM_SMB3_BattleNorSpr_XSpeed,x
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$0C
else
	LDA.b #$10
endif
	STA.w !RAM_SMB3_BattleNorSpr_InsidePipeTimer,x
	LDA.b #!Define_SMB3_SpriteID_BattleNorSpr10_Mushroom
	STA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	LDA.w !RAM_SMB3_BattleMode_PreventMysteryMushroomSpawns
	BNE.b CODE_26DE7F
	JSL.l CODE_25F805
	AND.b #$1F
	CMP.w !RAM_SMB3_BattleMode_MushroomSpawnCounter
	BCS.b CODE_26DE7F
	INC.w !RAM_SMB3_BattleMode_PreventMysteryMushroomSpawns
	LDA.b #!Define_SMB3_SpriteID_BattleNorSpr11_RedMysteryMushroom
	STA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	LDA.b #$01
	STA.w !RAM_SMB3_BattleMode_MushroomSpawnCounter
	BRA.b CODE_26DE82

CODE_26DE7F:
	INC.w !RAM_SMB3_BattleMode_MushroomSpawnCounter
CODE_26DE82:
	INC.w !RAM_SMB3_BattleMode_PreventMushroomSpawns
	INC.w $19BB
CODE_26DE88:
	RTS

;--------------------------------------------------------------------

SMB3_BattleMode_ProcessSprites:
.Main:
;$26DE89
	LDA.w $1A28
	BNE.b CODE_26DEB3
	DEC.w $18C9
	BPL.b CODE_26DE98
	LDA.b #$0D
	STA.w $18C9
CODE_26DE98:
	LDX.b #$0B
CODE_26DE9A:
	STX.w $190E
	TXA
	CLC
	ADC.w $18C9
	TAY
	LDA.w DATA_21ED3E,y
	STA.w $18C8
	JSL.l CODE_25F805
	JSR.w CODE_26DEB4
	DEX
	BPL.b CODE_26DE9A
CODE_26DEB3:
	RTS

CODE_26DEB4:
	LDA.w $18CD,x
	BEQ.b CODE_26DEBC
	DEC.w $18CD,x
CODE_26DEBC:
	LDA.w !RAM_SMB3_BattleNorSpr_UnusedFreezeSpriteTimer,x
	BEQ.b CODE_26DEC4
	DEC.w !RAM_SMB3_BattleNorSpr_UnusedFreezeSpriteTimer,x
CODE_26DEC4:
	LDA.w !RAM_SMB3_BattleNorSpr_CurrentStatus,x
	BEQ.b CODE_26DEB3
	TXY
	ASL
	TAX
	JMP.w (DATA_26DECF,x)

DATA_26DECF:
	dw SMB3_BattleMode_BattleNorSprStatus00_EmptySlot_Main
	dw SMB3_BattleMode_BattleNorSprStatus01_Normal_Main
	dw SMB3_BattleMode_BattleNorSprStatus02_Stunned_Main
	dw SMB3_BattleMode_BattleNorSprStatus03_Dead_Main
	dw SMB3_BattleMode_BattleNorSprStatus04_KickedShell_Main

;--------------------------------------------------------------------

SMB3_BattleMode_BattleNorSprStatus00_EmptySlot:
.Main:
;$26DED9
	TYX
	RTS

;--------------------------------------------------------------------

SMB3_BattleMode_BattleNorSprStatus01_Normal:
.Main:
;$26DEDB
	TYX
	LDA.w $18CD,x
	ORA.w !RAM_SMB3_BattleNorSpr_UnusedFreezeSpriteTimer,x
	ORA.w $19C0
	ORA.w !RAM_SMB3_BattleMode_PlayerHasWonTimer
	ORA.w !RAM_SMB3_BattleMode_MariosHurtAnimationTimer
	ORA.w !RAM_SMB3_BattleMode_LuigisHurtAnimationTimer
	BEQ.b CODE_26DF18
	JSR.w SMB3_BattleMode_HandleBattleNormalSpriteLevelCollision_Main
	JSR.w SMB3_BattleMode_ModifyNormalSpriteStatusOnPOWBlockHit_Main
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr0B_Coin
	BEQ.b CODE_26DF28
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr13_EnemyKilledCoin
	BEQ.b CODE_26DF28
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr10_Mushroom
	BCS.b CODE_26DF28
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr07_WaveMotionBoo
	BEQ.b CODE_26DF30
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr08_ReflectingBoo
	BEQ.b CODE_26DF30
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr09_FallingBoo
	BEQ.b CODE_26DF30
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr0F_KickedBlock
	BEQ.b CODE_26DF28
	JMP.w CODE_26E35F

CODE_26DF18:
	LDA.w !RAM_SMB3_BattleNorSpr_DisableSpriteCollisionTimer,x
	BEQ.b CODE_26DF20
	DEC.w !RAM_SMB3_BattleNorSpr_DisableSpriteCollisionTimer,x
CODE_26DF20:
	LDA.w !RAM_SMB3_BattleNorSpr_InsidePipeTimer,x
	BEQ.b CODE_26DF28
	DEC.w !RAM_SMB3_BattleNorSpr_InsidePipeTimer,x
CODE_26DF28:
	LDA.w !RAM_SMB3_BattleNorSpr_DecrementingTable7E18E9,x
	BEQ.b CODE_26DF30
	DEC.w !RAM_SMB3_BattleNorSpr_DecrementingTable7E18E9,x
CODE_26DF30:
	LDA.b #$01
	LDY.w !RAM_SMB3_BattleNorSpr_XSpeed,x
	BPL.b CODE_26DF39
	LDA.b #$02
CODE_26DF39:
	STA.w !RAM_SMB3_BattleNorSpr_FacingDirection,x
	LDA.b #$04
	LDY.w !RAM_SMB3_BattleNorSpr_YSpeed,x
	BPL.b CODE_26DF45
	LDA.b #$08
CODE_26DF45:
	STA.w $1962,x
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	TXY
	ASL
	TAX
	JMP.w (DATA_26DF51,x)

DATA_26DF51:
	dw SMB3_BattleMode_BattleNorSpr00_Spiny_Main				; 00 - Spiny
	dw SMB3_BattleMode_BattleNorSpr01_UnusedSprite_Main			; 01 - Unused Sprite
	dw SMB3_BattleMode_BattleNorSpr02_Crab_Main				; 02 - Crab
	dw SMB3_BattleMode_BattleNorSpr03_FighterFly_Main			; 03 - Fighter Fly
	dw SMB3_BattleMode_BattleNorSpr04_UnusedWallBouncingFireball_Main	; 04 - Wall Bouncing Fireball (Unused)
	dw SMB3_BattleMode_BattleNorSpr05_UnusedWallBouncingFireball_Main	; 05 - Wall Bouncing Fireball (Unused)
	dw SMB3_BattleMode_BattleNorSpr06_UnusedWallBouncingFireball_Main	; 06 - Wall Bouncing Fireball (Unused)
	dw SMB3_BattleMode_BattleNorSpr07_WaveMotionBoo_Main			; 07 - Wavy Motion Boo
	dw SMB3_BattleMode_BattleNorSpr08_ReflectingBoo_Main			; 08 - Wall Bouncing Boo
	dw SMB3_BattleMode_BattleNorSpr09_UnusedFallingBoo_Main			; 09 - Falling Boo (Unused)
	dw SMB3_BattleMode_BattleNorSpr0A_Koopa_Main				; 0A - Koopa
	dw SMB3_BattleMode_BattleNorSpr0B_Coin_Main				; 0B - Coin (Unused)
	dw SMB3_BattleMode_BattleNotSpr0C_MovingCard_Main			; 0C - Moving Card (Unused)
	dw SMB3_BattleMode_BattleNotSpr0D_StationaryCard_Main			; 0D - Stationary Card (Unused)
	dw SMB3_BattleMode_BattleNotSpr0E_BouncingCard_Main			; 0E - Bouncing Card (Unused)
	dw SMB3_BattleMode_BattleNotSpr0F_KickedBlock_Main			; 0F - Kicked Block (Unused)
	dw SMB3_BattleMode_BattleNotSpr10_Mushroom_Main				; 10 - Mushroom
	dw SMB3_BattleMode_BattleNotSpr11_RedMysteryMushroom_Main		; 11 - Red Mystery Mushroom
	dw SMB3_BattleMode_BattleNotSpr12_GreenMysteryMushroom_Main		; 12 - Green Mystery Mushroom (Unused?)
	dw SMB3_BattleMode_BattleNorSpr13_EnemyKillCoin_Main			; 13 - Enemy Coin

;--------------------------------------------------------------------

SMB3_BattleMode_BattleNotSpr0F_KickedBlock:
.Main:
;$26DF79
	TYX
	JSR.w SMB3_BattleMode_UpdateSpritePosition_BattleNorSpr_X
	JSR.w SMB3_BattleMode_UpdateSpritePosition_BattleNorSpr_Y
	LDA.w !RAM_SMB3_BattleNorSpr_YSpeed,x
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	BMI.b CODE_26DF89
else
	BMI.b CODE_26DF89
endif
	CMP.b #$7D
	BCS.b CODE_26DF92
CODE_26DF89:
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b !RAM_SMB3_Global_FrameCounter
	BIT.b #$01
	BNE.b +
	INC.w !RAM_SMB3_BattleNorSpr_YSpeed,x
+:
endif
	INC.w !RAM_SMB3_BattleNorSpr_YSpeed,x
	INC.w !RAM_SMB3_BattleNorSpr_YSpeed,x
	INC.w !RAM_SMB3_BattleNorSpr_YSpeed,x
CODE_26DF92:
	LDA.w !RAM_SMB3_BattleNorSpr_YPosLo,x
	CMP.b #$F0
	BCC.b CODE_26DF9C
	JMP.w CODE_26ED2A

CODE_26DF9C:
	JMP.w SMB3_BattleMode_GenericSpriteGraphicsRt_Main

;--------------------------------------------------------------------

SMB3_BattleMode_BattleNotSpr0D_StationaryCard:
.Main:
;$26DF9F
	TYX
	STZ.w !RAM_SMB3_BattleNorSpr_XSpeed,x
	BRA.b CODE_26DFA6

SMB3_BattleMode_BattleNotSpr0C_MovingCard:
.Main:
SMB3_BattleMode_BattleNotSpr0E_BouncingCard:
.Main:
SMB3_BattleMode_BattleNotSpr10_Mushroom:
.Main:
SMB3_BattleMode_BattleNotSpr11_RedMysteryMushroom:
.Main:
SMB3_BattleMode_BattleNotSpr12_GreenMysteryMushroom:
.Main:
;$26DFA5
	TYX
CODE_26DFA6:
	LDA.w $18CD,x
	ORA.w !RAM_SMB3_BattleNorSpr_UnusedFreezeSpriteTimer,x
	ORA.w $19C0
	ORA.w !RAM_SMB3_BattleMode_PlayerHasWonTimer
	ORA.w !RAM_SMB3_BattleMode_MariosHurtAnimationTimer
	ORA.w !RAM_SMB3_BattleMode_LuigisHurtAnimationTimer
	BNE.b CODE_26DFE7
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr10_Mushroom
	BCC.b CODE_26DFC4
	JSR.w CODE_26E204
CODE_26DFC4:
	JSR.w SMB3_BattleMode_UpdateSpritePosition_BattleNorSpr_X
	JSR.w SMB3_BattleMode_UpdateSpritePosition_BattleNorSpr_Y
	JSR.w SMB3_BattleMode_HandleBattleNormalSpriteLevelCollision_Main
	INC.w !RAM_SMB3_BattleNorSpr_YSpeed,x
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr0E_BouncingCard
	BEQ.b CODE_26DFE7
	INC.w !RAM_SMB3_BattleNorSpr_YSpeed,x
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b !RAM_SMB3_Global_FrameCounter
	BIT.b #$01
	BNE.b +
	INC.w !RAM_SMB3_BattleNorSpr_YSpeed,x
+:
endif
	LDA.w !RAM_SMB3_BattleNorSpr_TileCollisionFlags,x
	AND.b #$03
	AND.w !RAM_SMB3_BattleNorSpr_FacingDirection,x
	BEQ.b CODE_26DFE7
	JSR.w SMB3_BattleMode_FlipSpriteXSpeed_Main
CODE_26DFE7:
	LDA.w !RAM_SMB3_BattleNorSpr_YPosHi,x
	BNE.b CODE_26E036
	LDA.w !RAM_SMB3_BattleNorSpr_TileCollisionFlags,x
	AND.b #$04
	BEQ.b CODE_26E00A
	JSR.w SMB3_BattleMode_SnapSpriteYPositionOntoBlock_Main
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr0E_BouncingCard
	BNE.b CODE_26E007
	LDA.w !RAM_SMB3_BattleNorSpr_YSpeed,x
	BMI.b CODE_26E007
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$D5
else
	LDA.b #$DC
endif
	STA.w !RAM_SMB3_BattleNorSpr_YSpeed,x
CODE_26E007:
	JSR.w SMB3_BattleMode_ModifyNormalSpriteStatusOnPOWBlockHit_Main
CODE_26E00A:
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr10_Mushroom
	BCS.b CODE_26E020
	LDY.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	LDX.w DATA_21ED81,y
	LDA.b !RAM_SMB3_Global_FrameCounter
	LSR
	LSR
	LSR
	AND.b #$06
	BRA.b CODE_26E030

CODE_26E020:
	JSR.w SMB3_BattleMode_GenericSpriteGraphicsRt_Main
	LDY.w $18C8
	LDA.w SMB3_OAMBuffer[$5C].Prop,y
	AND.b #$BF
	STA.w SMB3_OAMBuffer[$5C].Prop,y
	BRA.b CODE_26E033

CODE_26E030:
	JSR.w SMB3_BattleMode_GenericSpriteGraphicsRt_Entry2
CODE_26E033:
	JSR.w SMB3_BattleMode_CheckForPlayerToNormalSpriteCollision_Main
CODE_26E036:
	RTS

;--------------------------------------------------------------------

SMB3_BattleMode_BattleNorSpr0B_Coin:
.Main:
;$26E037
	TYX
	LDY.w !RAM_SMB3_BattleNorSpr_DecrementingTable7E18E9,x
	BEQ.b CODE_26E043
	DEY
	BNE.b CODE_26E073
	JMP.w CODE_26ED2A

CODE_26E043:
	LDA.w !RAM_SMB3_BattleMode_PlayerHasWonTimer
	ORA.w $0076
	ORA.w $18CD,x
	BNE.b CODE_26E073
	JSR.w SMB3_BattleMode_HandleBattleNormalSpriteLevelCollision_Main
	LDA.w $18A6,x
	BEQ.b CODE_26E06D
	JSR.w SMB3_BattleMode_UpdateSpritePosition_BattleNorSpr_X
	JSR.w SMB3_BattleMode_UpdateSpritePosition_BattleNorSpr_Y
	INC.w !RAM_SMB3_BattleNorSpr_YSpeed,x
	INC.w !RAM_SMB3_BattleNorSpr_YSpeed,x
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b !RAM_SMB3_Global_FrameCounter
	BIT.b #$01
	BNE.b +
	INC.w !RAM_SMB3_BattleNorSpr_YSpeed,x
+:
endif
	LDA.w !RAM_SMB3_BattleNorSpr_YPosLo,x
	CMP.b #$E0
	BCC.b CODE_26E06D
	STZ.w !RAM_SMB3_BattleNorSpr_CurrentStatus,x
	RTS

CODE_26E06D:
	JSR.w SMB3_BattleMode_CheckForPlayerToNormalSpriteCollision_Main
	INC.w !RAM_SMB3_BattleNorSpr_AnimationFrameCounter,x
CODE_26E073:
	REP.b #$30
	LDA.w $18C8
	AND.w #$00FF
	CLC
	ADC.w #$0100
	TAY
	SEP.b #$20
	LDA.w !RAM_SMB3_BattleNorSpr_DecrementingTable7E18E9,x
	BEQ.b CODE_26E09D
	LDA.w SMB3_OAMBuffer[$00].YDisp
	CMP.b #$F0
	BEQ.b CODE_26E09A
	LDA.w SMB3_OAMBuffer[$04].YDisp
	CMP.b #$F0
	BNE.b CODE_26E09D
	LDY.w #$0010
	BNE.b CODE_26E09D

CODE_26E09A:
	LDY.w #$0000
CODE_26E09D:
	LDA.b #$00
	CMP.w !RAM_SMB3_BattleNorSpr_InsidePipeTimer,x
	LDA.b #$22
	BCS.b CODE_26E0A8
	LDA.b #$12
CODE_26E0A8:
	STA.w SMB3_OAMBuffer[$00].Prop,y
	LDA.w !RAM_SMB3_BattleNorSpr_YPosLo,x
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	LDA.w !RAM_SMB3_BattleNorSpr_XPosLo,x
	SEC
	SBC.b #$04
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	LDA.w !RAM_SMB3_BattleNorSpr_DecrementingTable7E18E9,x
	BEQ.b CODE_26E0D7
	SEP.b #$10
	LSR
	AND.b #$07
	TAX
	LDA.w DATA_21ED5D,x
	STA.w SMB3_OAMBuffer[$00].Tile,y
	LDX.w $190E
	LDA.b #$02
	STA.w SMB3_OAMBuffer[$00].Prop,y
	REP.b #$10
	BRA.b CODE_26E0EF

CODE_26E0D7:
	PHY
	SEP.b #$10
	LDA.w !RAM_SMB3_BattleNorSpr_AnimationFrameCounter,x
	LSR
	LSR
	CLC
	ADC.w $190E
	AND.b #$03
	TAY
	LDA.w DATA_21ED59,y
	REP.b #$10
	PLY
	STA.w SMB3_OAMBuffer[$00].Tile,y
CODE_26E0EF:
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	LDA.w #$0002
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	SEP.b #$30
	RTS

;--------------------------------------------------------------------

SMB3_BattleMode_BattleNorSpr13_EnemyKillCoin:
.Main:
;$26E0FE
	TYX
	LDA.w !RAM_SMB3_BattleNorSpr_DecrementingTable7E18E9,x
	BEQ.b CODE_26E10A
	DEC
	BNE.b CODE_26E10A
	JMP.w CODE_26ED2A

CODE_26E10A:
	LDA.w $18CD,x
	ORA.w !RAM_SMB3_BattleNorSpr_UnusedFreezeSpriteTimer,x
	ORA.w $19C0
	ORA.w !RAM_SMB3_BattleMode_PlayerHasWonTimer
	ORA.w !RAM_SMB3_BattleMode_MariosHurtAnimationTimer
	ORA.w !RAM_SMB3_BattleMode_LuigisHurtAnimationTimer
	STA.b $0F
	BNE.b CODE_26E132
	JSR.w CODE_26E204
	JSR.w SMB3_BattleMode_UpdateSpritePosition_BattleNorSpr_X
	JSR.w SMB3_BattleMode_UpdateSpritePosition_BattleNorSpr_Y
	JSR.w SMB3_BattleMode_HandleBattleNormalSpriteLevelCollision_Main
	INC.w !RAM_SMB3_BattleNorSpr_YSpeed,x
	INC.w !RAM_SMB3_BattleNorSpr_YSpeed,x
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b !RAM_SMB3_Global_FrameCounter
	BIT.b #$01
	BNE.b +
	INC.w !RAM_SMB3_BattleNorSpr_YSpeed,x
+:
endif
CODE_26E132:
	LDA.w !RAM_SMB3_BattleNorSpr_TileCollisionFlags,x
	AND.b #$03
	AND.w !RAM_SMB3_BattleNorSpr_FacingDirection,x
	BEQ.b CODE_26E13F
	JSR.w SMB3_BattleMode_FlipSpriteXSpeed_Main
CODE_26E13F:
	LDA.w !RAM_SMB3_BattleNorSpr_YPosHi,x
	BNE.b CODE_26E17E
	LDA.w !RAM_SMB3_BattleNorSpr_TileCollisionFlags,x
	AND.b #$04
	BEQ.b CODE_26E151
	JSR.w SMB3_BattleMode_SnapSpriteYPositionOntoBlock_Main
	JSR.w SMB3_BattleMode_ModifyNormalSpriteStatusOnPOWBlockHit_Main
CODE_26E151:
	LDA.w !RAM_SMB3_BattleNorSpr_DecrementingTable7E18E9,x
	BEQ.b CODE_26E15F
	LSR
	AND.b #$07
	TAY
	LDA.w DATA_21ED5D,x
	BRA.b CODE_26E178

CODE_26E15F:
	LDA.b $0F
	BNE.b CODE_26E166
	JSR.w SMB3_BattleMode_CheckForPlayerToNormalSpriteCollision_Main
CODE_26E166:
	INC.w !RAM_SMB3_BattleNorSpr_AnimationFrameCounter,x
	LDA.w !RAM_SMB3_BattleNorSpr_AnimationFrameCounter,x
	LSR
	LSR
	CLC
	ADC.w $190E
	AND.b #$03
	TAY
	LDA.w DATA_21ED59,y
CODE_26E178:
	TAX
	LDA.b #$02
	JSR.w SMB3_BattleMode_GenericSpriteGraphicsRt_Entry2
CODE_26E17E:
	RTS

;--------------------------------------------------------------------

SMB3_BattleMode_BattleNorSpr01_UnusedSprite:
.Main:
;$26E17F
	TYX
CODE_26E180:
	LDA.w !RAM_SMB3_BattleNorSpr_XSpeed,x
	PHA
	LDA.w !RAM_SMB3_BattleNorSpr_InsidePipeTimer,x
	BEQ.b CODE_26E192
	LDY.w !RAM_SMB3_BattleNorSpr_FacingDirection,x
	LDA.w DATA_21ED6A,y
	STA.w !RAM_SMB3_BattleNorSpr_XSpeed,x
CODE_26E192:
	JSR.w SMB3_BattleMode_UpdateSpritePosition_BattleNorSpr_X
	PLA
	STA.w !RAM_SMB3_BattleNorSpr_XSpeed,x
	RTS

;--------------------------------------------------------------------

SMB3_BattleMode_BattleNorSpr03_FighterFly:
.Main:
;$26E19A
	TYX
	JSR.w CODE_26E204
	LDY.w !RAM_SMB3_BattleNorSpr03_FighterFly_FreezeAllMovementTimer,x
	BEQ.b CODE_26E1AB
	DEY
	BNE.b CODE_26E1BD
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$DF
else
	LDA.b #$E4
endif
	STA.w !RAM_SMB3_BattleNorSpr_YSpeed,x
CODE_26E1AB:
	JSR.w CODE_26E180
	JSR.w SMB3_BattleMode_UpdateSpritePosition_BattleNorSpr_Y
	LDA.w !RAM_SMB3_BattleNorSpr_YSpeed,x
	BMI.b CODE_26E1BA
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	CMP.b #$4C
else
	CMP.b #$40
endif
	BCS.b CODE_26E1BD
CODE_26E1BA:
	INC.w !RAM_SMB3_BattleNorSpr_YSpeed,x
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b !RAM_SMB3_Global_FrameCounter
	BIT.b #$03
	BNE.b +
	INC.w !RAM_SMB3_BattleNorSpr_YSpeed,x
+:
endif
CODE_26E1BD:
	JSR.w SMB3_BattleMode_HandleBattleNormalSpriteLevelCollision_Main
	LDA.w !RAM_SMB3_BattleNorSpr_TileCollisionFlags,x
	AND.b #$04
	BNE.b CODE_26E1D2
	LDA.w !RAM_SMB3_BattleNorSpr_AnimationFrameCounter,x
	CLC
	ADC.b #$04
	STA.w !RAM_SMB3_BattleNorSpr_AnimationFrameCounter,x
	BRA.b CODE_26E201

CODE_26E1D2:
	ASL
	STA.w !RAM_SMB3_BattleNorSpr_AnimationFrameCounter,x
	LDA.w !RAM_SMB3_BattleNorSpr_StoredXSpeed,x
	BEQ.b CODE_26E1E1
	STA.w !RAM_SMB3_BattleNorSpr_XSpeed,x
	STZ.w !RAM_SMB3_BattleNorSpr_StoredXSpeed,x
CODE_26E1E1:
	LDA.w !RAM_SMB3_BattleNorSpr03_FighterFly_FreezeAllMovementTimer,x
	BNE.b CODE_26E1EB
	LDA.b #$10
	STA.w !RAM_SMB3_BattleNorSpr03_FighterFly_FreezeAllMovementTimer,x
CODE_26E1EB:
	JSR.w SMB3_BattleMode_SnapSpriteYPositionOntoBlock_Main
	JSR.w SMB3_BattleMode_ModifyNormalSpriteStatusOnPOWBlockHit_Main
	LDA.w !RAM_SMB3_BattleNorSpr_InsidePipeTimer,x
	BEQ.b CODE_26E201
	STZ.w !RAM_SMB3_BattleNorSpr03_FighterFly_FreezeAllMovementTimer,x
	STZ.w !RAM_SMB3_BattleNorSpr_YSpeed,x
	LDA.b !RAM_SMB3_Global_FrameCounter
	STA.w !RAM_SMB3_BattleNorSpr_AnimationFrameCounter,x
CODE_26E201:
	JMP.w CODE_26E35F

;--------------------------------------------------------------------

CODE_26E204:
	LDA.w !RAM_SMB3_BattleNorSpr_YPosLo,x
	CMP.b #$A0
	BCS.b CODE_26E20E
CODE_26E20B:
	JMP.w CODE_26E296

CODE_26E20E:
	LDA.w !RAM_SMB3_BattleNorSpr_YPosHi,x
	BNE.b CODE_26E20B
	LDY.w !RAM_SMB3_BattleNorSpr_FacingDirection,x
	LDA.w !RAM_SMB3_BattleNorSpr_XPosLo,x
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	CMP.w DATA_21ED68,y
	BEQ.b CODE_26E220
endif
	AND.b #$FE
	CMP.w DATA_21ED64,y
	BNE.b CODE_26E251
CODE_26E220:
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$4C
else
	LDA.b #$60
endif
	STA.w !RAM_SMB3_BattleNorSpr_InsidePipeTimer,x
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr0A_Koopa
	BNE.b CODE_26E296
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$53
else
	LDA.b #$68
endif
	STA.w !RAM_SMB3_BattleNorSpr_InsidePipeTimer,x
	LDA.w !RAM_SMB3_BattleNorSpr_CurrentStatus,x
	CMP.b #$04
	BNE.b CODE_26E296
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$20
else
	LDA.b #$28
endif
	STA.w !RAM_SMB3_BattleNorSpr_InsidePipeTimer,x
	BRA.b CODE_26E296

CODE_26E23F:
	JSR.w CODE_26ED2A
	STZ.b $A9
	JSR.w CODE_26DD33
	BRA.b CODE_26E294

CODE_26E249:
	JSR.w CODE_26EB99
	JSR.w CODE_26ED2A
	BRA.b CODE_26E294

CODE_26E251:
	CMP.w DATA_21ED66,y
	BNE.b CODE_26E296
	LDA.w !RAM_SMB3_BattleNorSpr_InsidePipeTimer,x
	BEQ.b CODE_26E296
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr13_EnemyKilledCoin
	BEQ.b CODE_26E23F
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr10_Mushroom
	BCS.b CODE_26E249
	LDA.b #$20
	STA.w !RAM_SMB3_BattleNorSpr_YPosLo,x
	STZ.w !RAM_SMB3_BattleNorSpr_IsTurningAroundFlag,x
	REP.b #$30
	LDY.w #$0000
	LDA.w $1A3A
	CMP.w $1A3C
	BCS.b CODE_26E281
	INY
	STZ.w $1A3C
	BRA.b CODE_26E284

CODE_26E281:
	STZ.w $1A3A
CODE_26E284:
	SEP.b #$30
	LDA.w DATA_21ED32,y
	STA.w !RAM_SMB3_BattleNorSpr_XPosLo,x
	EOR.w !RAM_SMB3_BattleNorSpr_XSpeed,x
	BPL.b CODE_26E294
	JSR.w SMB3_BattleMode_FlipSpriteXSpeed_Main
CODE_26E294:
	PLA
	PLA
CODE_26E296:
	RTS

;--------------------------------------------------------------------

SMB3_BattleMode_BattleNorSpr00_Spiny:
.Main:
SMB3_BattleMode_BattleNorSpr02_Crab:
.Main:
SMB3_BattleMode_BattleNorSpr0A_Koopa:
.Main:
;$26E297
	TYX
	JSR.w CODE_26E204
	LDA.w !RAM_SMB3_BattleNorSpr_IsTurningAroundFlag,x
	BNE.b CODE_26E2B5
	JSR.w CODE_26E180
	JSR.w SMB3_BattleMode_UpdateSpritePosition_BattleNorSpr_Y
	LDA.w !RAM_SMB3_BattleNorSpr_YSpeed,x
	BMI.b CODE_26E2AF
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	CMP.b #$4C
else
	CMP.b #$40
endif
	BCS.b CODE_26E2B5
CODE_26E2AF:
	INC.w !RAM_SMB3_BattleNorSpr_YSpeed,x
	INC.w !RAM_SMB3_BattleNorSpr_YSpeed,x
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b !RAM_SMB3_Global_FrameCounter
	BIT.b #$01
	BNE.b CODE_26E2B5
	INC.w !RAM_SMB3_BattleNorSpr_YSpeed,x
endif
CODE_26E2B5:
	JSR.w SMB3_BattleMode_HandleBattleNormalSpriteLevelCollision_Main
	LDA.w !RAM_SMB3_BattleNorSpr_TileCollisionFlags,x
	AND.b #$04
	BNE.b CODE_26E2E2
	LDA.w !RAM_SMB3_BattleNorSpr_IsTurningAroundFlag,x
	BEQ.b CODE_26E2DC
	JSR.w CODE_26E180
	JSR.w SMB3_BattleMode_UpdateSpritePosition_BattleNorSpr_Y
	LDA.w !RAM_SMB3_BattleNorSpr_YSpeed,x
	BMI.b CODE_26E2D3
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	CMP.b #$4C
else
	CMP.b #$40
endif
	BCS.b CODE_26E2B5
CODE_26E2D3:
	INC.w !RAM_SMB3_BattleNorSpr_YSpeed,x
	INC.w !RAM_SMB3_BattleNorSpr_YSpeed,x
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b !RAM_SMB3_Global_FrameCounter
	BIT.b #$01
	BNE.b +
	INC.w !RAM_SMB3_BattleNorSpr_YSpeed,x
+:
endif
	JMP.w CODE_26E35F

CODE_26E2DC:
	STZ.w !RAM_SMB3_BattleNorSpr_AnimationFrameCounter,x
	JMP.w CODE_26E35F

CODE_26E2E2:
	LDA.w !RAM_SMB3_BattleNorSpr_YSpeed,x
	PHA
	JSR.w SMB3_BattleMode_SnapSpriteYPositionOntoBlock_Main
	JSR.w SMB3_BattleMode_ModifyNormalSpriteStatusOnPOWBlockHit_Main
	LDA.w !RAM_SMB3_BattleNorSpr_IsTurningAroundFlag,x
	BNE.b CODE_26E35E
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr02_Crab
	BNE.b CODE_26E2FB
	INC.w !RAM_SMB3_BattleNorSpr_AnimationFrameCounter,x
CODE_26E2FB:
	LDA.w !RAM_SMB3_BattleNorSpr_SpeedUpAnimationFlag,x
	ORA.w !RAM_SMB3_BattleNorSpr_Table7E1953,x
	BEQ.b CODE_26E306
	INC.w !RAM_SMB3_BattleNorSpr_AnimationFrameCounter,x
CODE_26E306:
	INC.w !RAM_SMB3_BattleNorSpr_AnimationFrameCounter,x
	LDA.w !RAM_SMB3_BattleNorSpr_InsidePipeTimer,x
	BEQ.b CODE_26E311
	INC.w !RAM_SMB3_BattleNorSpr_AnimationFrameCounter,x
CODE_26E311:
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr0A_Koopa
	BNE.b CODE_26E327
	LDA.w !RAM_SMB3_BattleNorSpr_XSpeed,x
	BPL.b CODE_26E320
	EOR.b #$FF
	INC
CODE_26E320:
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	CMP.b #$1C
else
	CMP.b #$18
endif
	BCC.b CODE_26E327
	INC.w !RAM_SMB3_BattleNorSpr_AnimationFrameCounter,x
CODE_26E327:
	PLA
	CMP.b #$08
	BCC.b CODE_26E35F
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr0A_Koopa
	BNE.b CODE_26E351
	LDA.w !RAM_SMB3_BattleNorSpr_XSpeed,x
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	CMP.b #$1C
else
	CMP.b #$18
endif
	BEQ.b CODE_26E35F
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	CMP.b #$E4
else
	CMP.b #$E8
endif
	BEQ.b CODE_26E35F
	PHA
	JSL.l CODE_25F805
	AND.b #$01
	TAY
	PLA
	EOR.w DATA_21ED34,y
	BPL.b CODE_26E35F
	JSR.w SMB3_BattleMode_MakeKoopaTurnAroundWhenLanding_Main
	BRA.b CODE_26E35F

CODE_26E351:
	LDA.w !RAM_SMB3_BattleNorSpr_StoredXSpeed,x
	BEQ.b CODE_26E35F
	STA.w !RAM_SMB3_BattleNorSpr_XSpeed,x
	STZ.w !RAM_SMB3_BattleNorSpr_StoredXSpeed,x
	BRA.b CODE_26E35F

CODE_26E35E:
	PLA
CODE_26E35F:
	LDA.w !RAM_SMB3_BattleNorSpr_IsTurningAroundFlag,x
	BEQ.b CODE_26E3E3
	LDA.w !RAM_SMB3_BattleNorSpr_DecrementingTable7E18E9,x
	BNE.b CODE_26E3E3
	LDA.w $18CD,x
	ORA.w !RAM_SMB3_BattleNorSpr_UnusedFreezeSpriteTimer,x
	ORA.w $19C0
	ORA.w !RAM_SMB3_BattleMode_PlayerHasWonTimer
	ORA.w !RAM_SMB3_BattleMode_MariosHurtAnimationTimer
	ORA.w !RAM_SMB3_BattleMode_LuigisHurtAnimationTimer
	BNE.b CODE_26E3E3
	LDA.b #$05
	STA.b $0B
	LDA.b #$03
	STA.b $0C
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr02_Crab
	BNE.b CODE_26E394
	LDA.b #$06
	STA.b $0B
	LDA.b #$04
	STA.b $0C
CODE_26E394:
	INC.w !RAM_SMB3_BattleNorSpr_AnimationFrameCounter,x
	LDA.w !RAM_SMB3_BattleNorSpr_AnimationFrameCounter,x
	CMP.b $0B
	BNE.b CODE_26E3A8
	LDA.b #$10
	STA.w !RAM_SMB3_BattleNorSpr_DisableSpriteCollisionTimer,x
	STZ.w !RAM_SMB3_BattleNorSpr_IsTurningAroundFlag,x
	BRA.b CODE_26E3E3

CODE_26E3A8:
	CMP.b $0C
	BNE.b CODE_26E3B7
	JSR.w SMB3_BattleMode_FlipSpriteXSpeed_Main
	LDA.w !RAM_SMB3_BattleNorSpr_FacingDirection,x
	EOR.b #$03
	STA.w !RAM_SMB3_BattleNorSpr_FacingDirection,x
CODE_26E3B7:
	PHX
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr02_Crab
	BNE.b CODE_26E3C9
	LDA.w !RAM_SMB3_BattleNorSpr_AnimationFrameCounter,x
	TAX
	LDA.l DATA_26E42C,x
	BRA.b CODE_26E3DF

CODE_26E3C9:
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr0A_Koopa
	BNE.b CODE_26E3D7
	LDA.w !RAM_SMB3_BattleNorSpr_AnimationFrameCounter,x
	TAX
	LDA.l DATA_26E432,x
	BRA.b CODE_26E3DF

CODE_26E3D7:
	LDA.w !RAM_SMB3_BattleNorSpr_AnimationFrameCounter,x
	TAX
	LDA.l DATA_26E427,x
CODE_26E3DF:
	PLX
	STA.w !RAM_SMB3_BattleNorSpr_DecrementingTable7E18E9,x
CODE_26E3E3:
	JSR.w SMB3_BattleMode_GenericSpriteGraphicsRt_Main
	LDA.w !RAM_SMB3_BattleNorSpr_IsTurningAroundFlag,x
	BEQ.b CODE_26E407
	PHX
	LDA.w !RAM_SMB3_BattleNorSpr_TurningAroundStartingPoseIndex,x
	CLC
	ADC.w !RAM_SMB3_BattleNorSpr_AnimationFrameCounter,x
	TAX
	LDY.w $18C8
	LDA.l DATA_26E437,x
	STA.w SMB3_OAMBuffer[$5C].Tile,y
	LDA.w SMB3_OAMBuffer[$5C].Prop,y
	ORA.b #$01
	STA.w SMB3_OAMBuffer[$5C].Prop,y
	PLX
CODE_26E407:
	LDA.w $18CD,x
	ORA.w !RAM_SMB3_BattleNorSpr_UnusedFreezeSpriteTimer,x
	ORA.w $19C0
	ORA.w !RAM_SMB3_BattleMode_PlayerHasWonTimer
	ORA.w !RAM_SMB3_BattleMode_MariosHurtAnimationTimer
	ORA.w !RAM_SMB3_BattleMode_LuigisHurtAnimationTimer
	BNE.b CODE_26E426
	LDA.w !RAM_SMB3_BattleNorSpr_IsTurningAroundFlag,x
	BNE.b CODE_26E423
	JSR.w SMB3_BattleMode_CheckForNormalSpriteToNormalSpriteCollision_Main
CODE_26E423:
	JSR.w SMB3_BattleMode_CheckForPlayerToNormalSpriteCollision_Main
CODE_26E426:
	RTS

DATA_26E427:
	db $08,$08,$0C,$08,$08

DATA_26E42C:
	db $08,$08,$06,$06,$08,$08

DATA_26E432:
	db $08,$08,$08,$08,$08

DATA_26E437:
	db $06,$08,$0A,$08,$06,$00,$02,$04
	db $04,$02,$00,$0E,$22,$26,$22,$0E
	db $0C,$20,$24,$20,$0C

;--------------------------------------------------------------------

SMB3_BattleMode_MakeKoopaTurnAroundWhenLanding:
.Main:
;$26E44C
	LDA.w !RAM_SMB3_BattleNorSpr_CurrentStatus,x
	CMP.b #$01
	BNE.b CODE_26E46F
	PHB
	PHK
	PLB
	LDA.b #$0B
	STA.w !RAM_SMB3_BattleNorSpr_TurningAroundStartingPoseIndex,x
	INC.w !RAM_SMB3_BattleNorSpr_IsTurningAroundFlag,x
	STZ.w !RAM_SMB3_BattleNorSpr_AnimationFrameCounter,x
	LDA.b #$08
	STA.w !RAM_SMB3_BattleNorSpr_DecrementingTable7E18E9,x
	LDA.b #$30
	STA.w !RAM_SMB3_BattleNorSpr_DisableSpriteCollisionTimer,x
	STZ.w $18CD,x
	PLB
CODE_26E46F:
	RTS

;--------------------------------------------------------------------

SMB3_BattleMode_SnapSpriteYPositionOntoBlock:
.Main:
;$26E470
	LDA.w !RAM_SMB3_BattleNorSpr_YPosLo,x
	AND.b #$F0
	STA.w !RAM_SMB3_BattleNorSpr_YPosLo,x
	STZ.w !RAM_SMB3_BattleNorSpr_YSpeed,x
CODE_26E47B:
	RTS

;--------------------------------------------------------------------

SMB3_BattleMode_ModifyNormalSpriteStatusOnPOWBlockHit:
.Main:
;$26E47C
	LDA.w !RAM_SMB3_BattleNorSpr_YSpeed,x
	BMI.b CODE_26E47B
	LDA.w !RAM_SMB3_BattleNorSpr_InsidePipeTimer,x
	BNE.b CODE_26E47B
	LDA.w !RAM_SMB3_BattleNorSpr_TileSpritesFeetAreTouching,x
	CMP.b #$C2
	BEQ.b CODE_26E492
	LDA.w !RAM_SMB3_BattleMode_POWBlockQuakeTimer
	BEQ.b CODE_26E47B
CODE_26E492:
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr07_WaveMotionBoo
	BEQ.b CODE_26E47B
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr08_ReflectingBoo
	BEQ.b CODE_26E47B
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr09_FallingBoo
	BEQ.b CODE_26E47B
	LDA.b #!Define_SMAS_Sound0060_Contact
	STA.w !RAM_SMB3_Global_SoundCh1
	STZ.w !RAM_SMB3_BattleNorSpr_IsTurningAroundFlag,x
	STZ.w $18CD,x
	STZ.w !RAM_SMB3_BattleNorSpr_UnusedFreezeSpriteTimer,x
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr0C_MovingCard
	BCC.b CODE_26E4B9
	JMP.w CODE_26E550

CODE_26E4B9:
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr02_Crab
	BNE.b CODE_26E4E3
	LDA.w !RAM_SMB3_BattleNorSpr_CurrentStatus,x
	CMP.b #$02
	BNE.b CODE_26E4C9
	STZ.w !RAM_SMB3_BattleNorSpr02_Crab_IsAngryFlag,x
	BRA.b CODE_26E500

CODE_26E4C9:
	LDA.w !RAM_SMB3_BattleNorSpr02_Crab_IsAngryFlag,x
	BNE.b CODE_26E500
	INC
	STA.w !RAM_SMB3_BattleNorSpr02_Crab_IsAngryFlag,x
	LDA.w !RAM_SMB3_BattleNorSpr_BlueEnemyFlag,x
	PHA
	LDA.w !RAM_SMB3_BattleNorSpr_XSpeed,x
	JSR.w CODE_26EC1A
	PLA
	STA.w !RAM_SMB3_BattleNorSpr_BlueEnemyFlag,x
	JMP.w CODE_26E54B

CODE_26E4E3:
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr0A_Koopa
	BNE.b CODE_26E4F5
	LDA.w $1A33
	BEQ.b CODE_26E4F2
	DEC.w $1A33
CODE_26E4F2:
	STZ.w $1A34
CODE_26E4F5:
	LDA.w !RAM_SMB3_BattleNorSpr_CurrentStatus,x
	CMP.b #$04
	BNE.b CODE_26E500
	LDA.b #$02
	BRA.b CODE_26E505

CODE_26E500:
	LDA.w !RAM_SMB3_BattleNorSpr_CurrentStatus,x
	EOR.b #$03
CODE_26E505:
	STA.w !RAM_SMB3_BattleNorSpr_CurrentStatus,x
	CMP.b #$01
	BNE.b CODE_26E54B
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr07_WaveMotionBoo
	BCS.b CODE_26E524
	LDA.w !RAM_SMB3_BattleNorSpr_TileSpritesFeetAreTouching,x
	CMP.b #$C2
	BNE.b CODE_26E538
	LDA.w !RAM_SMB3_BattleNorSpr_BlueEnemyFlag,x
	EOR.b #$01
	STA.w !RAM_SMB3_BattleNorSpr_BlueEnemyFlag,x
	BRA.b CODE_26E538

CODE_26E524:
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr0A_Koopa
	BNE.b CODE_26E538
	LDA.w $1A33
	BNE.b CODE_26E538
	LDA.w !RAM_SMB3_BattleNorSpr_XSpeed,x
	JSR.w CODE_26EC1A
	BRA.b CODE_26E547

CODE_26E538:
	LDY.w !RAM_SMB3_BattleNorSpr_FacingDirection,x
	DEY
	LDA.w !RAM_SMB3_BattleNorSpr_BlueEnemyFlag,x
	BEQ.b CODE_26E544
	INY
	INY
	INY
CODE_26E544:
	JSR.w CODE_26DE1C
CODE_26E547:
	LDA.b #$00
	BRA.b CODE_26E54D

CODE_26E54B:
	LDA.b #$FF
CODE_26E54D:
	STA.w !RAM_SMB3_BattleNorSpr_DecrementingTable7E18E9,x
CODE_26E550:
	LDA.w !RAM_SMB3_BattleNorSpr_TileSpritesFeetAreTouching,x
	CMP.b #$C2
	BNE.b CODE_26E586
	LDA.w !RAM_SMB3_BattleNorSpr_TileCollisionFlags,x
	AND.b #$C0
	LDY.b #$01
	ASL
	BCC.b CODE_26E562
	DEY
CODE_26E562:
	LDA.w !RAM_SMB3_BattleNorSpr_XSpeed,x
	STA.w !RAM_SMB3_BattleNorSpr_StoredXSpeed,x
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr10_Mushroom
	BEQ.b CODE_26E580
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr11_RedMysteryMushroom
	BEQ.b CODE_26E580
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr12_GreenMysteryMushroom
	BEQ.b CODE_26E580
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr03_FighterFly
	BNE.b CODE_26E583
	LDA.w !RAM_SMB3_BattleNorSpr_BlueEnemyFlag,x
	BEQ.b CODE_26E583
CODE_26E580:
	INY
	INY
	INY
CODE_26E583:
	JSR.w CODE_26DE1C
CODE_26E586:
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$DA
else
	LDA.b #$E0
endif
	STA.w !RAM_SMB3_BattleNorSpr_YSpeed,x
	RTS

;--------------------------------------------------------------------

SMB3_BattleMode_GenericSpriteGraphicsRt:
.Main:
;$26E58C
	LDY.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	LDX.w DATA_21ED81,y
	LDA.w DATA_21ED6D,y
.Entry2:
	STA.b $00
	STX.b $01
	LDX.w $190E
	LDA.w !RAM_SMB3_BattleNorSpr_YPosHi,x
	BEQ.b CODE_26E5A9
	LDA.w !RAM_SMB3_BattleNorSpr_YPosLo,x
	CMP.b #$E0
	BCS.b CODE_26E5A9
	RTS

CODE_26E5A9:
	LDY.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	CPY.b #!Define_SMB3_SpriteID_BattleNorSpr07_WaveMotionBoo
	BCS.b CODE_26E5B9
	LDA.w !RAM_SMB3_BattleNorSpr_BlueEnemyFlag,x
	BEQ.b CODE_26E5B9
	LDA.b #$0C
	STA.b $00
CODE_26E5B9:
	LDA.w !RAM_SMB3_BattleNorSpr_YPosLo,x
	STA.b $03
	LDY.b #$20
	LDA.w !RAM_SMB3_BattleNorSpr_CurrentStatus,x
	CMP.b #$02
	BCC.b CODE_26E5EF
	CMP.b #$04
	BEQ.b CODE_26E5EF
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr03_FighterFly
	BEQ.b CODE_26E5EF
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr0A_Koopa
	BNE.b CODE_26E5E1
	LDA.w $1A34
	BEQ.b CODE_26E5EF
	INC.b $03
	INC.b $03
	BRA.b CODE_26E5EF

CODE_26E5E1:
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr02_Crab
	BCS.b CODE_26E5ED
	INC.b $03
	INC.b $03
	LDA.b #$1A
	STA.b $01
CODE_26E5ED:
	LDY.b #$A0
CODE_26E5EF:
	LDA.w !RAM_SMB3_BattleNorSpr_InsidePipeTimer,x
	BEQ.b CODE_26E5FC
	DEC.b $03
	DEC.b $03
	DEC.b $03
	LDY.b #$00
CODE_26E5FC:
	LDA.w !RAM_SMB3_BattleNorSpr_CurrentStatus,x
	CMP.b #$01
	BEQ.b CODE_26E612
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr00_Spiny
	BEQ.b CODE_26E612
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr0A_Koopa
	BEQ.b CODE_26E612
	TYA
	ORA.b #$80
	TAY
CODE_26E612:
	STY.b $02
	LDY.w $18C8
	LDA.w !RAM_SMB3_BattleNorSpr_XPosLo,x
	CLC
	ADC.w $199B
	STA.w SMB3_OAMBuffer[$5C].XDisp,y
	STZ.w $199B
	LDA.b $03
	STA.w SMB3_OAMBuffer[$5C].YDisp,y
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr02_Crab
	BNE.b CODE_26E642
	LDA.w !RAM_SMB3_BattleNorSpr_AnimationFrameCounter,x
	LDY.b #$00
	AND.b #$08
	BEQ.b CODE_26E63B
	LDY.b #$40
CODE_26E63B:
	TYA
	LDY.w $18C8
	JMP.w CODE_26E64C

CODE_26E642:
	LDA.w !RAM_SMB3_BattleNorSpr_FacingDirection,x
	LSR
	LDA.b #$00
	BCC.b CODE_26E64C
	LDA.b #$40
CODE_26E64C:
	ORA.b $00
	ORA.b $02
	STA.w SMB3_OAMBuffer[$5C].Prop,y
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr02_Crab
	BNE.b CODE_26E669
	LDA.w !RAM_SMB3_BattleNorSpr02_Crab_IsAngryFlag,x
	LDX.b $01
	AND.b #$01
	BNE.b CODE_26E67A
	BEQ.b CODE_26E67B						; Note: This will always branch

CODE_26E665:
	LDA.b #$00
	BRA.b CODE_26E674

CODE_26E669:
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr0F_KickedBlock
	BEQ.b CODE_26E665
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr13_EnemyKilledCoin
	BEQ.b CODE_26E680
	LDA.w !RAM_SMB3_BattleNorSpr_AnimationFrameCounter,x
CODE_26E674:
	LDX.b $01
	AND.b #$08
	BEQ.b CODE_26E67B
CODE_26E67A:
	INX
CODE_26E67B:
	LDA.w DATA_21ED95,x
	BRA.b CODE_26E682

CODE_26E680:
	LDA.b $01
CODE_26E682:
	STA.w SMB3_OAMBuffer[$5C].Tile,y
	LDA.w SMB3_OAMBuffer[$5C].XDisp,y
	CMP.b #$F1
	BCC.b CODE_26E6AF
	LDA.w SMB3_OAMBuffer[$5C].XDisp,y
	STA.w SMB3_OAMBuffer[$5D].XDisp,y
	LDA.w SMB3_OAMBuffer[$5C].YDisp,y
	STA.w SMB3_OAMBuffer[$5D].YDisp,y
	LDA.w SMB3_OAMBuffer[$5C].Tile,y
	STA.w SMB3_OAMBuffer[$5D].Tile,y
	LDA.w SMB3_OAMBuffer[$5C].Prop,y
	STA.w SMB3_OAMBuffer[$5D].Prop,y
	TYA
	LSR
	LSR
	TAY
	LDA.b #$03
	STA.w SMB3_OAMTileSizeBuffer[$5D].Slot,y
	BRA.b CODE_26E6B3

CODE_26E6AF:
	TYA
	LSR
	LSR
	TAY
CODE_26E6B3:
	LDA.b #$02
	STA.w SMB3_OAMTileSizeBuffer[$5C].Slot,y
CODE_26E6B8:
	LDX.w $190E
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr0A_Koopa
	BNE.b CODE_26E6C5
	JSR.w SMB3_BattleMode_DrawKoopasHead_Main
CODE_26E6C5:
	RTS

;--------------------------------------------------------------------

SMB3_BattleMode_CheckForNormalSpriteToNormalSpriteCollision:
.Main:
;$26E6C6
	CPX.b #$00
	BEQ.b CODE_26E6DD
	TXA
	CLC
	ADC.b !RAM_SMB3_Global_FrameCounter
	LSR
	BCC.b CODE_26E6DD
	TXA
	TAY
	DEY
	STY.b $0F
CODE_26E6D6:
	JSR.w CODE_26E6DE
	DEC.b $0F
	BPL.b CODE_26E6D6
CODE_26E6DD:
	RTS

CODE_26E6DE:
	LDY.b $0F
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,y
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr07_WaveMotionBoo
	BEQ.b CODE_26E6B8
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr08_ReflectingBoo
	BEQ.b CODE_26E6B8
	LDA.w !RAM_SMB3_BattleNorSpr_CurrentStatus,y
	BEQ.b CODE_26E6B8
	CMP.b #$03
	BEQ.b CODE_26E6FC
	LDA.w !RAM_SMB3_BattleNorSpr_InsidePipeTimer,x
	ORA.w !RAM_SMB3_BattleNorSpr_InsidePipeTimer,y
	BEQ.b CODE_26E6FF
CODE_26E6FC:
	JMP.w CODE_26E794

CODE_26E6FF:
	LDA.w !RAM_SMB3_BattleNorSpr_IsTurningAroundFlag,x
	ORA.w !RAM_SMB3_BattleNorSpr_IsTurningAroundFlag,y
	BNE.b CODE_26E6FC
	LDA.w !RAM_SMB3_BattleNorSpr_DisableSpriteCollisionTimer,x
	BEQ.b CODE_26E711
	LDA.w !RAM_SMB3_BattleNorSpr_DisableSpriteCollisionTimer,y
	BNE.b CODE_26E6FC
CODE_26E711:
	LDX.b $0F
	LDY.b #$04
	JSR.w SMB3_BattleMode_GetSpriteClipping_Main
	LDX.w $190E
	LDY.b #$00
	JSR.w SMB3_BattleMode_GetSpriteClipping_Main
	JSR.w SMB3_BattleMode_CheckForContact_Main
	BCC.b CODE_26E794
	LDA.w !RAM_SMB3_BattleNorSpr_CurrentStatus,x
	CMP.b #$04
	BNE.b CODE_26E72F
	JMP.w CODE_26E7D7

CODE_26E72F:
	LDY.b $0F
	LDA.w !RAM_SMB3_BattleNorSpr_TileCollisionFlags,x
	AND.w !RAM_SMB3_BattleNorSpr_TileCollisionFlags,y
	AND.b #$04
	BEQ.b CODE_26E794
	LDA.w $18CD,x
	BNE.b CODE_26E764
	LDA.b #$28
	STA.w !RAM_SMB3_BattleNorSpr_DisableSpriteCollisionTimer,x
	LDA.w !RAM_SMB3_BattleNorSpr_CurrentStatus,x
	CMP.b #$01
	BNE.b CODE_26E755
	LDA.b #$10
	STA.w $18CD,x
	LSR
	STA.w !RAM_SMB3_BattleNorSpr_AnimationFrameCounter,x
CODE_26E755:
	LDA.w !RAM_SMB3_BattleNorSpr_XPosLo,x
	CMP.w !RAM_SMB3_BattleNorSpr_XPosLo,y
	ROR
	EOR.w !RAM_SMB3_BattleNorSpr_XSpeed,x
	BMI.b CODE_26E764
	JSR.w CODE_26E798
CODE_26E764:
	LDA.w $18CD,y
	BNE.b CODE_26E794
	LDA.b #$28
	STA.w !RAM_SMB3_BattleNorSpr_DisableSpriteCollisionTimer,y
	LDA.w !RAM_SMB3_BattleNorSpr_CurrentStatus,y
	CMP.b #$01
	BNE.b CODE_26E77E
	LDA.b #$10
	STA.w $18CD,y
	LSR
	STA.w !RAM_SMB3_BattleNorSpr_AnimationFrameCounter,y
CODE_26E77E:
	LDA.w !RAM_SMB3_BattleNorSpr_XPosLo,y
	CMP.w !RAM_SMB3_BattleNorSpr_XPosLo,x
	ROR
	EOR.w !RAM_SMB3_BattleNorSpr_XSpeed,y
	BMI.b CODE_26E78F
	LDX.b $0F
	JSR.w CODE_26E798
CODE_26E78F:
	LDY.b $0F
	LDX.w $190E
CODE_26E794:
	LDX.w $190E
	RTS

CODE_26E798:
	LDA.w !RAM_SMB3_BattleNorSpr_CurrentStatus,x
	CMP.b #$01
	BNE.b CODE_26E7D4
	PHB
	PHK
	PLB
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr00_Spiny
	BEQ.b CODE_26E7B5
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr0A_Koopa
	BEQ.b CODE_26E7B9
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr02_Crab
	BNE.b CODE_26E7D3
	LDA.b #!Define_SMB3_SpriteID_BattleNorSpr05_WallBouncingFireball
	BRA.b CODE_26E7BB

CODE_26E7B5:
	LDA.b #$00
	BRA.b CODE_26E7BB

CODE_26E7B9:
	LDA.b #$0B
CODE_26E7BB:
	STA.w !RAM_SMB3_BattleNorSpr_TurningAroundStartingPoseIndex,x
	INC.w !RAM_SMB3_BattleNorSpr_IsTurningAroundFlag,x
	STZ.w !RAM_SMB3_BattleNorSpr_AnimationFrameCounter,x
	LDA.b #$08
	STA.w !RAM_SMB3_BattleNorSpr_DecrementingTable7E18E9,x
	LDA.b #$30
	STA.w !RAM_SMB3_BattleNorSpr_DisableSpriteCollisionTimer,x
	STZ.w $18CD,x
	PLB
	RTS

CODE_26E7D3:
	PLB
CODE_26E7D4:
	JMP.w SMB3_BattleMode_FlipSpriteXSpeed_Main

CODE_26E7D7:
	LDY.b $0F
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,y
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr07_WaveMotionBoo
	BCS.b CODE_26E794
	LDA.w !RAM_SMB3_BattleNorSpr_CurrentStatus,y
	CMP.b #$02
	BEQ.b CODE_26E814
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr01_UnusedSprite
	BNE.b CODE_26E794
	LDA.w !RAM_SMB3_BattleNorSpr_DisableSpriteCollisionTimer,y
	BEQ.b CODE_26E7F3
	JMP.w CODE_26E794

CODE_26E7F3:
	JSR.w CODE_26F0AA
	LDA.b #!Define_SMAS_Sound0060_KickShell
	STA.w !RAM_SMB3_Global_SoundCh1
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$DA
else
	LDA.b #$E0
endif
	STA.w !RAM_SMB3_BattleNorSpr_YSpeed,y
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,y
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr03_FighterFly
	BNE.b CODE_26E80C
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$ED
else
	LDA.b #$F0
endif
	STA.w !RAM_SMB3_BattleNorSpr_YSpeed,y
CODE_26E80C:
	LDA.b #$28
	STA.w !RAM_SMB3_BattleNorSpr_DisableSpriteCollisionTimer,y
	JMP.w CODE_26E794

CODE_26E814:
	LDA.w !RAM_SMB3_BattleNorSpr_DisableSpriteCollisionTimer,y
	BEQ.b CODE_26E81C
	JMP.w CODE_26E794

CODE_26E81C:
	JSR.w CODE_26F0AA
	LDA.b #!Define_SMAS_Sound0060_KickShell
	STA.w !RAM_SMB3_Global_SoundCh1
	LDA.w !RAM_SMB3_BattleNorSpr_XSpeed,y
	PHA
	LDA.w !RAM_SMB3_BattleNorSpr_StoredXSpeed,y
	BNE.b CODE_26E846
	PHX
	TYX
	LDY.w !RAM_SMB3_BattleNorSpr_FacingDirection,x
	DEY
	LDA.w !RAM_SMB3_BattleNorSpr_BlueEnemyFlag,x
	BEQ.b CODE_26E83B
	INY
	INY
	INY
CODE_26E83B:
	JSR.w CODE_26DE1C
	LDA.w !RAM_SMB3_BattleNorSpr_XSpeed,x
	STA.w !RAM_SMB3_BattleNorSpr_StoredXSpeed,x
	TXY
	PLX
CODE_26E846:
	PLA
	STA.w !RAM_SMB3_BattleNorSpr_XSpeed,y
	PHY
	LDA.w !RAM_SMB3_BattleNorSpr_XSpeed,x
	LDY.b #$00
	CMP.b #$00
	BMI.b CODE_26E855
	INY
CODE_26E855:
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr03_FighterFly
	BNE.b CODE_26E85E
	INY
	INY
CODE_26E85E:
	PHX
	TYX
	LDA.l DATA_26E8A4,x
	PLX
	PLY
	STA.w !RAM_SMB3_BattleNorSpr_XSpeed,y
	LDA.w !RAM_SMB3_BattleNorSpr_StoredXSpeed,x
	CLC
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	ADC.b #$07
	CMP.b #$0F
else
	ADC.b #$06
	CMP.b #$0D
endif
	BCC.b CODE_26E885
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr02_Crab
	BNE.b CODE_26E881
	LDA.w !RAM_SMB3_BattleNorSpr_BlueEnemyFlag,x
	EOR.b #$01
	BRA.b CODE_26E887

CODE_26E881:
	LDA.b #$01
	BRA.b CODE_26E887

CODE_26E885:
	LDA.b #$00
CODE_26E887:
	STA.w !RAM_SMB3_BattleNorSpr_BlueEnemyFlag,x
	LDA.b #$01
	STA.w !RAM_SMB3_BattleNorSpr_CurrentStatus,y
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$DA
else
	LDA.b #$E0
endif
	STA.w !RAM_SMB3_BattleNorSpr_YSpeed,y
	LDA.b #$28
	STA.w !RAM_SMB3_BattleNorSpr_DisableSpriteCollisionTimer,y
	LDA.b #$00
	STA.w !RAM_SMB3_BattleNorSpr_DecrementingTable7E18E9,y
	INC.w $19BC
	JMP.w CODE_26E794

DATA_26E8A4:
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	db $F0,$10,$F7,$09
else
	db $F0,$10,$F8,$08
endif

;--------------------------------------------------------------------

SMB3_BattleMode_FlipSpriteXSpeed:
.Main:
;$26E8A8
	LDA.w !RAM_SMB3_BattleNorSpr_XSpeed,x
	EOR.b #$FF
	INC
	STA.w !RAM_SMB3_BattleNorSpr_XSpeed,x
	RTS

;--------------------------------------------------------------------

CODE_26E8B2:
	LDA.w !RAM_SMB3_BattleMode_MariosXPosLo,y
	LDY.b #$00
	SBC.w !RAM_SMB3_BattleNorSpr_XPosLo,x
	BPL.b CODE_26E8BD
	INY
CODE_26E8BD:
	RTS

;--------------------------------------------------------------------

SMB3_BattleMode_GetSpriteClipping:
.Main:
;$26E8BE
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr0A_Koopa
	BEQ.b CODE_26E8F6
	LDA.w !RAM_SMB3_BattleNorSpr_YPosLo,x
	CLC
	ADC.b #$08
	STA.w $0000,y
	LDA.b #$06
	STA.w $0002,y
	LDA.w !RAM_SMB3_BattleNorSpr_XPosLo,x
	CLC
	ADC.b #$08
	STA.w $0001,y
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr0B_Coin
	BEQ.b CODE_26E8E7
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr13_EnemyKilledCoin
	BNE.b CODE_26E8F0
CODE_26E8E7:
	LDA.w !RAM_SMB3_BattleNorSpr_XPosLo,x
	CLC
	ADC.b #$04
	STA.w $0001,y
CODE_26E8F0:
	LDA.b #$06
	STA.w $0003,y
CODE_26E8F5:
	RTS

CODE_26E8F6:
	LDA.w !RAM_SMB3_BattleNorSpr_YPosLo,x
	CLC
	ADC.b #$06
	STA.w $0000,y
	LDA.b #$08
	STA.w $0002,y
	LDA.w !RAM_SMB3_BattleNorSpr_XPosLo,x
	CLC
	ADC.b #$08
	STA.w $0001,y
	LDA.b #$08
	STA.w $0003,y
	RTS

;--------------------------------------------------------------------

SMB3_BattleMode_CheckForPlayerToNormalSpriteCollision:
.Main:
;$26E913
	LDA.w !RAM_SMB3_BattleMode_MariosState
	CMP.b #$03
	BEQ.b CODE_26E91E
	CMP.b #$01
	BNE.b CODE_26E8F5
CODE_26E91E:
	LDA.w !RAM_SMB3_BattleMode_LuigisState
	CMP.b #$03
	BEQ.b CODE_26E929
	CMP.b #$01
	BNE.b CODE_26E8F5
CODE_26E929:
	TXA
	CLC
	ADC.b !RAM_SMB3_Global_FrameCounter
	LSR
	BCS.b CODE_26E8F5
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr09_FallingBoo
	BEQ.b CODE_26E93C
	LDA.w !RAM_SMB3_BattleNorSpr_InsidePipeTimer,x
	BNE.b CODE_26E8F5
CODE_26E93C:
	LDA.b #$01
	STA.b $0F
CODE_26E940:
	LDX.b $0F
	LDA.w !RAM_SMB3_BattleMode_MariosState,x
	CMP.b #$01
	BNE.b CODE_26E94E
	LDA.w !RAM_SMB3_BattleMode_MariosUnusedFlashingTimer,x
	BEQ.b CODE_26E951
CODE_26E94E:
	JMP.w CODE_26EA73

CODE_26E951:
	LDA.w !RAM_SMB3_BattleMode_MariosYPosHi,x
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	BEQ.b +
	LDA.w !RAM_SMB3_BattleMode_MariosYPosLo,x
	CMP.b #$F0
	BCC.b CODE_26E94E
+:
else
	BNE.b CODE_26E94E
endif
	LDY.b #$04
	JSR.w SMB3_BattleMode_GetPlayerClipping_Main
	LDY.b #$00
	LDX.w $190E
	JSR.w SMB3_BattleMode_GetSpriteClipping_Main
	JSR.w SMB3_BattleMode_CheckForContact_Main
	LDY.b $0F
	BCC.b CODE_26E94E
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr13_EnemyKilledCoin
	BEQ.b CODE_26E97F
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr0C_MovingCard
	BCC.b CODE_26E978
	JMP.w CODE_26EB52

CODE_26E978:
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr0B_Coin
	BNE.b CODE_26E9CC
CODE_26E97F:
	LDA.b #!Define_SMAS_Sound0063_Coin
	STA.w !RAM_SMB3_Global_SoundCh3
	LDA.b #$0F
	STA.w !RAM_SMB3_BattleNorSpr_DecrementingTable7E18E9,x
	LDA.w !RAM_SMB3_BattleMode_MariosCoinCount,y
	INC
	STA.w !RAM_SMB3_BattleMode_MariosCoinCount,y
	LDA.w !RAM_SMB3_BattleMode_MariosCoinCount
	CMP.b #$05
	BCS.b CODE_26E99E
	LDA.w !RAM_SMB3_BattleMode_LuigisCoinCount
	CMP.b #$05
	BCC.b CODE_26E9C8
CODE_26E99E:
	LDY.b #$0B
	LDA.b #$FF
CODE_26E9A2:
	STA.w $18CD,y
	DEY
	BPL.b CODE_26E9A2
	LDY.b #$01
	LDA.w !RAM_SMB3_BattleMode_MariosCoinCount
	CMP.w !RAM_SMB3_BattleMode_LuigisCoinCount
	BCC.b CODE_26E9B3
	INY
CODE_26E9B3:
	STY.w $078C
	LDA.b #!Define_SMB3_LevelMusic_Victory
	STA.w !RAM_SMB3_Global_MusicCh1
	LDA.b #$C0
	STA.w !RAM_SMB3_BattleMode_PlayerHasWonTimer
	LDA.b #$04
	STA.w !RAM_SMB3_BattleMode_WinnerTextAnimationTimer
	STZ.w !RAM_SMB3_BattleMode_WinnerTextAnimationIndex
CODE_26E9C8:
	JSR.w CODE_26CB77
	RTS

CODE_26E9CC:
	LDA.w !RAM_SMB3_BattleNorSpr_CurrentStatus,x
	CMP.b #$01
	BEQ.b CODE_26E9D6
	JMP.w CODE_26EA7E

CODE_26E9D6:
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr0A_Koopa
	BNE.b CODE_26E9E0
	JMP.w CODE_26EB12

CODE_26E9E0:
	LDA.w !RAM_SMB3_BattleMode_MariosHurtTimer,y
	BEQ.b CODE_26E9E8
	JMP.w CODE_26EA73

CODE_26E9E8:
	LDY.b $0F
	LDA.w !RAM_SMB3_BattleMode_MariosPowerUp,y
	BEQ.b CODE_26EA0E
	LDA.w !RAM_SMB3_BattleMode_MariosHurtAnimationTimer,y
	ORA.w !RAM_SMB3_BattleMode_MariosHurtTimer,y
	BNE.b CODE_26EA6F
	STA.w !RAM_SMB3_BattleMode_MariosNewPowerUpState,y
	LDA.b #!Define_SMAS_Sound0060_IntoPipe
	STA.w !RAM_SMB3_Global_SoundCh1
	LDA.b #$2F
	STA.w !RAM_SMB3_BattleMode_MariosHurtAnimationTimer,y
	LDY.b #$0B
CODE_26EA06:
	STA.w $18CD,y
	DEY
	BPL.b CODE_26EA06
	BRA.b CODE_26EA6F

CODE_26EA0E:
	LDA.w !RAM_SMB3_BattleMode_MariosHurtTimer,y
	BNE.b CODE_26EA6F
	LDY.b #$0B
	DEC
CODE_26EA16:
	STA.w $18CD,y
	DEY
	BPL.b CODE_26EA16
	LDA.b $0F
	EOR.b #$01
	TAY
	LDA.b #$FF
	STA.w !RAM_SMB3_BattleMode_PlayerHasWonTimer
	LDA.b #$04
	STA.w !RAM_SMB3_BattleMode_WinnerTextAnimationTimer
	STZ.w !RAM_SMB3_BattleMode_WinnerTextAnimationIndex
	LDY.b $0F
	LDA.b #$02
	STA.w $078C
	CPY.b #$01
	BEQ.b CODE_26EA3E
	LDA.b #$01
	STA.w $078C
CODE_26EA3E:
	LDA.w !RAM_SMB3_BattleNorSpr_IsTurningAroundFlag,x
	BNE.b CODE_26EA48
	LDA.b #$20
	STA.w !RAM_SMB3_BattleNorSpr_AnimationFrameCounter,x
CODE_26EA48:
	LDA.b #$20
	STA.w !RAM_SMB3_BattleMode_MariosDeathFreezeTimer,y
	LDA.b #!Define_SMB3_LevelMusic_Victory
	STA.w !RAM_SMB3_Global_MusicCh1
	LDA.b #$02
	STA.w !RAM_SMB3_BattleMode_MariosState,y
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$C7
else
	LDA.b #$D0
endif
	STA.w !RAM_SMB3_BattleMode_MariosYSpeed,y
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr07_WaveMotionBoo
	BEQ.b CODE_26EA6F
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr08_ReflectingBoo
	BEQ.b CODE_26EA6F
	JSR.w CODE_26E8B2
	INY
	TYA
	STA.w !RAM_SMB3_BattleNorSpr_FacingDirection,x
CODE_26EA6F:
	LDX.w $190E
	RTS

CODE_26EA73:
	DEC.b $0F
	BMI.b CODE_26EA7A
	JMP.w CODE_26E940

CODE_26EA7A:
	LDX.w $190E
	RTS

CODE_26EA7E:
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr0A_Koopa
	BNE.b CODE_26EA88
	JMP.w CODE_26EACC

CODE_26EA88:
	LDA.w !RAM_SMB3_BattleMode_MariosHurtTimer,y
	BNE.b CODE_26EA73
	LDA.b #!Define_SMAS_Sound0060_KickShell
	STA.w !RAM_SMB3_Global_SoundCh1
	LDA.w !RAM_SMB3_BattleMode_MariosXSpeed,y
	LDY.b #$00
	CMP.b #$00
	BMI.b CODE_26EA9C
	INY
CODE_26EA9C:
	LDA.w DATA_21EDCD,y
	STA.w !RAM_SMB3_BattleNorSpr_XSpeed,x
	LDY.b $0F
	LDA.b #$03
	STA.w !RAM_SMB3_BattleNorSpr_CurrentStatus,x
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$DA
else
	LDA.b #$E0
endif
	STA.w !RAM_SMB3_BattleNorSpr_YSpeed,x
	LDA.b #$0C
	STA.w !RAM_SMB3_BattleMode_MariosKickAnimationTimer,y
	JSR.w CODE_26F0B6
	INC.w $19BC
	LDX.w $190E
	LDY.b $0F
	LDA.b #$80
	STA.b !RAM_SMB3_BattleMode_MariosPose,x
	LDA.w !RAM_SMB3_BattleMode_MariosPowerUp,x
	BEQ.b CODE_26EACB
	LDA.b #$30
	STA.b !RAM_SMB3_BattleMode_MariosPose,x
CODE_26EACB:
	RTS

CODE_26EACC:
	LDA.w !RAM_SMB3_BattleNorSpr_CurrentStatus,x
	CMP.b #$04
	BNE.b CODE_26EAE2
	CPY.w $1A2E
	BNE.b CODE_26EAE0
	LDA.w !RAM_SMB3_BattleNorSpr_DecrementingTable7E18E9,x
	BEQ.b CODE_26EAE0
	JMP.w CODE_26EA73

CODE_26EAE0:
	BRA.b CODE_26EB12

CODE_26EAE2:
	JSR.w CODE_26F0B6
	LDA.b #!Define_SMAS_Sound0060_KickShell
	STA.w !RAM_SMB3_Global_SoundCh1
	LDA.b #$04
	STA.w !RAM_SMB3_BattleNorSpr_CurrentStatus,x
	LDA.b #$01
	STA.w !RAM_SMB3_BattleNorSpr_FacingDirection,x
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$26
else
	LDA.b #$20
endif
	STA.w !RAM_SMB3_BattleNorSpr_XSpeed,x
	STY.w $1A2E
	LDA.w !RAM_SMB3_BattleMode_MariosXPosLo,y
	CMP.w !RAM_SMB3_BattleNorSpr_XPosLo,x
	BMI.b CODE_26EB0C
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$DA
else
	LDA.b #$E0
endif
	STA.w !RAM_SMB3_BattleNorSpr_XSpeed,x
	INC.w !RAM_SMB3_BattleNorSpr_FacingDirection,x
CODE_26EB0C:
	LDA.b #$20
	STA.w !RAM_SMB3_BattleNorSpr_DecrementingTable7E18E9,x
	RTS

CODE_26EB12:
	LDA.w !RAM_SMB3_BattleNorSpr_CurrentStatus,x
	CMP.b #$01
	BNE.b CODE_26EB1E
	LDA.b #$80
	STA.w $1A34
CODE_26EB1E:
	LDA.w !RAM_SMB3_BattleMode_MariosYPosLo,y
	CLC
	ADC.b #$14
	CMP.w !RAM_SMB3_BattleNorSpr_YPosLo,x
	BCC.b CODE_26EB2C
CODE_26EB29:
	JMP.w CODE_26E9E0

CODE_26EB2C:
	LDA.w !RAM_SMB3_BattleMode_MariosYSpeed,y
	BMI.b CODE_26EB29
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$B4
else
	LDA.b #$C0
endif
	STA.w !RAM_SMB3_BattleMode_MariosYSpeed,y
	JSR.w CODE_26F0B6
	JSR.w CODE_26E4F5
	LDA.b #$10
	STA.w $1A3E
	STZ.w !RAM_SMB3_BattleNorSpr_YSpeed,x
	LDA.b #!Define_SMAS_Sound0060_Contact
	STA.w !RAM_SMB3_Global_SoundCh1
	LDA.w $1A33
	BEQ.b CODE_26EB51
	DEC.w $1A33
CODE_26EB51:
	RTS

CODE_26EB52:
	LDA.w !RAM_SMB3_BattleNorSpr_DecrementingTable7E18E9,x
	BEQ.b CODE_26EB5A
	JMP.w CODE_26EBDC

CODE_26EB5A:
	JSR.w CODE_26ED2A
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr10_Mushroom
	BEQ.b CODE_26EB77
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr11_RedMysteryMushroom
	BEQ.b CODE_26EB6B
	JMP.w CODE_26EBB3

CODE_26EB6B:
	LDA.b #$14
	STA.w $19C0
	LDA.b #!Define_SMAS_Sound0063_GrabMysteryMushroom
	STA.w !RAM_SMB3_Global_SoundCh3
	BRA.b CODE_26EB99

CODE_26EB77:
	LDA.w !RAM_SMB3_BattleMode_MariosPowerUp,y
	BEQ.b CODE_26EB83
	LDA.b #!Define_SMAS_Sound0060_YoshiSpit
	STA.w !RAM_SMB3_Global_SoundCh1
	BRA.b CODE_26EB99

CODE_26EB83:
	INC
	STA.w !RAM_SMB3_BattleMode_MariosNewPowerUpState,y
	LDA.b #!Define_SMAS_Sound0060_GetPowerup
	STA.w !RAM_SMB3_Global_SoundCh1
	LDA.b #$2F
	STA.w !RAM_SMB3_BattleMode_MariosHurtAnimationTimer,y
	LDY.b #$0B
CODE_26EB93:
	STA.w $18CD,y
	DEY
	BPL.b CODE_26EB93
CODE_26EB99:
	STZ.w !RAM_SMB3_BattleMode_PreventMushroomSpawns
	STZ.w $1A32
	DEC.w $19BB
	LDA.w $19BD
	BEQ.b CODE_26EBB2
	TXA
	LSR
	LSR
	LSR
	TAX
	STZ.w $19BD
	JMP.w CODE_26CCCD

CODE_26EBB2:
	RTS

CODE_26EBB3:
	LDY.b $0F
	LDA.b #$40
	STA.w $1989,y
	LDY.b #$00
	LDA.b $0F
	BEQ.b CODE_26EBC2
	LDY.b #SMB3_IndividualPlayerData[$01].ReserveSlots-SMB3_IndividualPlayerData[$00].ReserveSlots
CODE_26EBC2:
	LDA.w SMB3_IndividualPlayerData[$00].CardSlots+$01,y
	STA.w SMB3_IndividualPlayerData[$00].CardSlots+$02,y
	LDA.w SMB3_IndividualPlayerData[$00].CardSlots,y
	STA.w SMB3_IndividualPlayerData[$00].CardSlots+$01,y
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	SEC
	SBC.b #!Define_SMB3_SpriteID_BattleNorSpr0C_MovingCard-$01
	STA.w SMB3_IndividualPlayerData[$00].CardSlots,y
	LDA.b #!Define_SMAS_Sound0060_MidwayPoint
	STA.w !RAM_SMB3_Global_SoundCh1
CODE_26EBDC:
	RTS

;--------------------------------------------------------------------

SMB3_BattleMode_BattleNorSprStatus02_Stunned:
.Main:
;$26EBDD
	TYX
	LDA.w $18CD,x
	BEQ.b CODE_26EBE6
	JMP.w CODE_26EC9B

CODE_26EBE6:
	STZ.w !RAM_SMB3_BattleNorSpr_AnimationFrameCounter,x
	LDA.w !RAM_SMB3_BattleNorSpr_DecrementingTable7E18E9,x
	BNE.b CODE_26EC58
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr0A_Koopa
	BEQ.b CODE_26EBFA
	JSR.w SMB3_BattleMode_GenericSpriteGraphicsRt_Main
	BRA.b CODE_26EC0D

CODE_26EBFA:
	LDA.b #$04
	LDX.b #$26
	JSR.w SMB3_BattleMode_GenericSpriteGraphicsRt_Entry2
	LDY.w $18C8
	LDA.w SMB3_OAMBuffer[$5C].Prop,y
	ORA.w $1A34
	STA.w SMB3_OAMBuffer[$5C].Prop,y
CODE_26EC0D:
	LDA.b #$01
	STA.w !RAM_SMB3_BattleNorSpr_CurrentStatus,x
	LDA.w !RAM_SMB3_BattleNorSpr_StoredXSpeed,x
	PHA
	STZ.w !RAM_SMB3_BattleNorSpr_StoredXSpeed,x
	PLA
CODE_26EC1A:
	PHP
	BPL.b CODE_26EC20
	EOR.b #$FF
	INC
CODE_26EC20:
	LDY.b #$00
	CMP.b #$0A
	BCC.b CODE_26EC28
	INY
	INY
CODE_26EC28:
	CMP.b #$0C
	BCC.b CODE_26EC2E
	INY
	INY
CODE_26EC2E:
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr0A_Koopa
	BNE.b CODE_26EC41
	LDA.w $1A33
	BNE.b CODE_26EC41
	LDA.b #$04
	STA.w $1A33
	LDY.b #$06
CODE_26EC41:
	PLP
	BPL.b CODE_26EC45
	INY
CODE_26EC45:
	LDA.w DATA_21EDD5,y
	STA.w !RAM_SMB3_BattleNorSpr_XSpeed,x
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr07_WaveMotionBoo
	BCS.b CODE_26EC57
	LDA.b #$01
	STA.w !RAM_SMB3_BattleNorSpr_BlueEnemyFlag,x
CODE_26EC57:
	RTS

CODE_26EC58:
	LDA.w !RAM_SMB3_BattleNorSpr_DisableSpriteCollisionTimer,x
	BEQ.b CODE_26EC60
	DEC.w !RAM_SMB3_BattleNorSpr_DisableSpriteCollisionTimer,x
CODE_26EC60:
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$01
	BNE.b CODE_26EC69
	DEC.w !RAM_SMB3_BattleNorSpr_DecrementingTable7E18E9,x
CODE_26EC69:
	LDA.w !RAM_SMB3_BattleNorSpr_DecrementingTable7E18E9,x
	CMP.b #$60
	BCS.b CODE_26EC85
	LSR
	LSR
	LSR
	LSR
	LSR
	TAY
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.w DATA_21EDCF,y
	BEQ.b CODE_26EC85
	INC.w $199B
	LDA.b #$08
	STA.w !RAM_SMB3_BattleNorSpr_AnimationFrameCounter,x
CODE_26EC85:
	JSR.w SMB3_BattleMode_HandleBattleNormalSpriteLevelCollision_Main
	LDA.w !RAM_SMB3_BattleNorSpr_TileCollisionFlags,x
	AND.b #$04
	BEQ.b CODE_26EC98
	JSR.w SMB3_BattleMode_SnapSpriteYPositionOntoBlock_Main
	STZ.w !RAM_SMB3_BattleNorSpr_XSpeed,x
	JSR.w SMB3_BattleMode_ModifyNormalSpriteStatusOnPOWBlockHit_Main
CODE_26EC98:
	JSR.w CODE_26ECC7
CODE_26EC9B:
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr0A_Koopa
	BEQ.b CODE_26ECA5
	JMP.w CODE_26E35F

CODE_26ECA5:
	LDA.b #$04
	LDX.b #$26
	JSR.w SMB3_BattleMode_GenericSpriteGraphicsRt_Entry2
	LDY.w $18C8
	LDA.w SMB3_OAMBuffer[$5C].Prop,y
	ORA.w $1A34
	STA.w SMB3_OAMBuffer[$5C].Prop,y
	JSR.w SMB3_BattleMode_CheckForNormalSpriteToNormalSpriteCollision_Main
	LDA.w $1A3E
	BEQ.b CODE_26ECC4
	DEC.w $1A3E
	RTS

CODE_26ECC4:
	JMP.w SMB3_BattleMode_CheckForPlayerToNormalSpriteCollision_Main

CODE_26ECC7:
	JSR.w SMB3_BattleMode_UpdateSpritePosition_BattleNorSpr_X
	JSR.w SMB3_BattleMode_UpdateSpritePosition_BattleNorSpr_Y
	LDA.w !RAM_SMB3_BattleNorSpr_YSpeed,x
	BMI.b CODE_26ECD6
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	CMP.b #$4C
else
	CMP.b #$40
endif
	BCS.b CODE_26ECDC
CODE_26ECD6:
	INC.w !RAM_SMB3_BattleNorSpr_YSpeed,x
	INC.w !RAM_SMB3_BattleNorSpr_YSpeed,x
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b !RAM_SMB3_Global_FrameCounter
	BIT.b #$01
	BNE.b +
	INC.w !RAM_SMB3_BattleNorSpr_YSpeed,x
+:
endif
CODE_26ECDC:
	RTS

;--------------------------------------------------------------------

SMB3_BattleMode_BattleNorSprStatus03_Dead:
.Main:
;$26ECDD
	TYX
	LDA.w !RAM_SMB3_BattleNorSpr_SpeedUpAnimationFlag,x
	BNE.b CODE_26ECE8
	LDA.w $18CD,x
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	ORA.w $19C0
	ORA.w !RAM_SMB3_BattleMode_MariosHurtAnimationTimer
	ORA.w !RAM_SMB3_BattleMode_LuigisHurtAnimationTimer
endif
	BNE.b CODE_26ED4A
CODE_26ECE8:
	LDA.w !RAM_SMB3_BattleNorSpr_YPosLo,x
	CMP.b #$E0
	BCC.b CODE_26ED2E
	LDA.w !RAM_SMB3_BattleNorSpr_YPosHi,x
	BNE.b CODE_26ED2E
	STZ.w !RAM_SMB3_BattleNorSpr_CurrentStatus,x
	LDA.w $1A31
	PHA
	JSR.w CODE_26DDCB
	PLA
	STA.w $1A31
	DEC.w $18CA
	LDA.b #$0A
	PHA
	LDA.w !RAM_SMB3_BattleNorSpr_XSpeed,x
	BPL.b CODE_26ED11
	PLA
	LDA.b #$F6
	PHA
CODE_26ED11:
	PLA
	STA.w !RAM_SMB3_BattleNorSpr_XSpeed,x
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$19
else
	LDA.b #$20
endif
	STA.w !RAM_SMB3_BattleNorSpr_InsidePipeTimer,x
	LDA.b #!Define_SMB3_SpriteID_BattleNorSpr13_EnemyKilledCoin
	STA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	LDA.w !RAM_SMB3_Global_SoundCh1
	BNE.b CODE_26ED29
	LDA.b #!Define_SMAS_Sound0060_DoubleYoshiCoinSound
	STA.w !RAM_SMB3_Global_SoundCh1
CODE_26ED29:
	RTS

CODE_26ED2A:
	STZ.w !RAM_SMB3_BattleNorSpr_CurrentStatus,x
	RTS

CODE_26ED2E:
	JSR.w CODE_26ECC7
	INC.w !RAM_SMB3_BattleNorSpr_YSpeed,x
	LDA.b !RAM_SMB3_Global_FrameCounter
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	BIT.b #$01
else
	AND.b #$01
endif
	BNE.b CODE_26ED4A
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	BIT.b #$03
	BNE.b +
	INC.w !RAM_SMB3_BattleNorSpr_YSpeed,x
+:
endif
	LDA.w !RAM_SMB3_BattleNorSpr_XSpeed,x
	BEQ.b CODE_26ED4A
	BMI.b CODE_26ED47
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$01
	BNE.b +
	DEC.w !RAM_SMB3_BattleNorSpr_XSpeed,x
+:
endif
	DEC.w !RAM_SMB3_BattleNorSpr_XSpeed,x
	DEC.w !RAM_SMB3_BattleNorSpr_XSpeed,x
CODE_26ED47:
	INC.w !RAM_SMB3_BattleNorSpr_XSpeed,x
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b !RAM_SMB3_Global_FrameCounter
	BIT.b #$03
	BNE.b +
	INC.w !RAM_SMB3_BattleNorSpr_XSpeed,x
+:
endif
CODE_26ED4A:
	JMP.w SMB3_BattleMode_GenericSpriteGraphicsRt_Main

;--------------------------------------------------------------------

SMB3_BattleMode_ProcessPOWBlock:
.Main:
;$26ED4D
	LDA.w !RAM_SMB3_BattleMode_POWBlockQuakeTimer
	STA.b $00
	BEQ.b CODE_26ED61
	DEC.w !RAM_SMB3_BattleMode_POWBlockQuakeTimer
	LSR
	AND.b #$03
	TAY
	LDA.w DATA_21EDDD,y
	STA.w $0216
CODE_26ED61:
	LDA.w !RAM_SMB3_BattleMode_POWBlockHitCounter
	CMP.b #$03
	BCC.b CODE_26ED7D
	LDA.w $1A37
	CMP.b #$F0
	BNE.b CODE_26ED7C
	JSR.w CODE_26CCE1
	LDA.b $01
	STA.w $1A36
	LDA.b $02
	STA.w $1A37
CODE_26ED7C:
	RTS

CODE_26ED7D:
	LDA.b #$98
	SEC
	SBC.w $0216
	STA.w SMB3_OAMBuffer[$00].YDisp
	LDA.b #$78
	STA.w SMB3_OAMBuffer[$00].XDisp
	LDA.w !RAM_SMB3_BattleMode_POWBlockHitCounter
	TAY
	LDA.w DATA_21EDE1,y
	STA.w SMB3_OAMBuffer[$00].Tile
	LDA.b #$04
	STA.w SMB3_OAMBuffer[$00].Prop
	LSR
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot
	LDX.b #$01
CODE_26EDA0:
	LDA.w !RAM_SMB3_BattleMode_POWBlockHitCounter
	CMP.b #$03
	BNE.b CODE_26EDAA
	JMP.w CODE_26EE64

CODE_26EDAA:
	LDA.w !RAM_SMB3_BattleMode_MariosState,x
	CMP.b #$01
	BEQ.b CODE_26EDB4
	JMP.w CODE_26EE64

CODE_26EDB4:
	LDY.b #$00
	JSR.w SMB3_BattleMode_GetPlayerClipping_Main
	LDA.w !RAM_SMB3_BattleMode_MariosPowerUp,x
	BNE.b CODE_26EDC2
	DEC.b $00
	DEC.b $00
CODE_26EDC2:
	LDA.b #$02
	STA.b $06
	LDA.b #$A0
	STA.b $04
	LDA.b #$FF
	STA.b $0F
	LDA.b $02
	LSR
	BIT.b #$01
	BNE.b CODE_26EDE1
	LDA.b #$04
	STA.b $06
	LDA.b #$98
	STA.b $04
	LDA.b #$11
	STA.b $0F
CODE_26EDE1:
	LDA.b #$80
	STA.b $05
	LDY.w !RAM_SMB3_BattleMode_POWBlockHitCounter
	LDA.b #$08
	SEC
	SBC.w DATA_21EDE4,y
	CLC
	ADC.b $06
	STA.b $06
	LDA.b #$06
	STA.b $07
	JSR.w SMB3_BattleMode_CheckForContact_Main
	BCC.b CODE_26EE64
	LDY.w !RAM_SMB3_BattleMode_POWBlockHitCounter
	LDA.w DATA_21EDE4,y
	STA.w $193F,x
	LDA.w !RAM_SMB3_BattleMode_MariosYPosLo,x
	SEC
	SBC.w $193F,x
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	BMI.b CODE_26EE22
else
	CMP.b #$80
	BCS.b CODE_26EE22
endif
	LDA.b $08
	CMP.b $0F
	BCS.b CODE_26EE64
	LDA.w !RAM_SMB3_BattleMode_MariosYSpeed,x
	BMI.b CODE_26EE64
	LDA.b #$04
	STA.w !RAM_SMB3_BattleMode_MariosTileCollisionFlags,x
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$78
	CLC
	ADC.w $193F,x
	STA.w !RAM_SMB3_BattleMode_MariosYPosLo,x
	STZ.w !RAM_SMB3_BattleMode_MariosYSpeed,x
	STZ.w !RAM_SMB3_BattleMode_MarioIsJumpingFlag,x
endif
	BRA.b CODE_26EE64

CODE_26EE22:
	LDA.w !RAM_SMB3_BattleMode_MariosYPosLo,x
	CLC
	ADC.w $193F,x
	CMP.b #$90
	BCC.b CODE_26EE64
	LDA.w !RAM_SMB3_BattleMode_MariosYSpeed,x
	BPL.b CODE_26EE64
	LDA.b #!Define_SMAS_Sound0063_BulletShoot
	STA.w !RAM_SMB3_Global_SoundCh3
	INC.w !RAM_SMB3_BattleMode_POWBlockHitCounter
	STZ.w !RAM_SMB3_BattleMode_MariosYSpeed,x
	LDA.b #$A9
	STA.w !RAM_SMB3_BattleMode_MariosYPosLo,x
	LDA.b #$10
	STA.w $18B7,x
	LDA.w !RAM_SMB3_BattleMode_MariosIsDuckingFlag,x
	BNE.b CODE_26EE51
	LDA.w !RAM_SMB3_BattleMode_MariosPowerUp,x
	BNE.b CODE_26EE5F
CODE_26EE51:
	LDA.w !RAM_SMB3_BattleMode_MariosYPosLo,x
	SEC
	SBC.b #$10
	STA.w !RAM_SMB3_BattleMode_MariosYPosLo,x
	LDA.b #$08
	STA.w $18B7,x
CODE_26EE5F:
	LDA.b #$10
	STA.w !RAM_SMB3_BattleMode_POWBlockQuakeTimer
CODE_26EE64:
	DEX
	BMI.b CODE_26EE6A
	JMP.w CODE_26EDA0

CODE_26EE6A:
	RTS

;--------------------------------------------------------------------

CODE_26EE6B:
	LDA.w $1A35
	BEQ.b CODE_26EE6A
	LDA.w $18CB
	ORA.w $18CC
	ORA.w !RAM_SMB3_BattleMode_PlayerHasWonTimer
	ORA.w $19C0
	ORA.w !RAM_SMB3_BattleMode_MariosHurtAnimationTimer
	ORA.w !RAM_SMB3_BattleMode_LuigisHurtAnimationTimer
	BNE.b CODE_26EE6A
	DEC.w $1A35
	LDA.w $1A35
	AND.b #$07
	BNE.b CODE_26EE6A
	DEC.w !RAM_SMB3_BattleMode_POWBlockHitCounter
	BNE.b CODE_26EE6A
	LDA.b #$F0
	STA.w $1A37
	RTS

;--------------------------------------------------------------------

SMB3_BattleMode_BattleNorSpr07_WaveMotionBoo:
.Main:
SMB3_BattleMode_BattleNorSpr08_ReflectingBoo:
.Main:
SMB3_BattleMode_BattleNorSpr04_UnusedWallBouncingFireball:
.Main:
SMB3_BattleMode_BattleNorSpr05_UnusedWallBouncingFireball:
.Main:
SMB3_BattleMode_BattleNorSpr06_UnusedWallBouncingFireball:
.Main:
SMB3_BattleMode_BattleNorSpr09_UnusedFallingBoo:
.Main:
;$26EE99
	TYX
	LDA.w !RAM_SMB3_BattleNorSpr_DecrementingTable7E18E9,x
	BEQ.b CODE_26EEDF
	CMP.b #$68
	BNE.b CODE_26EEA6
	JMP.w CODE_26ED2A

CODE_26EEA6:
	CMP.b #$50
	BCC.b CODE_26EEBD
	CMP.b #$78
	BCS.b CODE_26EEBD
	LDA.w !RAM_SMB3_BattleNorSpr_DecrementingTable7E18E9,x
	AND.b #$08
	STA.w !RAM_SMB3_BattleNorSpr_AnimationFrameCounter,x
	LDX.b #$1E
	LDA.b #$02
	JMP.w SMB3_BattleMode_GenericSpriteGraphicsRt_Entry2

CODE_26EEBD:
	LDA.w !RAM_SMB3_BattleNorSpr_DecrementingTable7E18E9,x
	AND.b #$08
	STA.w !RAM_SMB3_BattleNorSpr_AnimationFrameCounter,x
	LDX.b #$1C
	LDA.b #$02
	JSR.w SMB3_BattleMode_GenericSpriteGraphicsRt_Entry2
	LDA.w !RAM_SMB3_BattleNorSpr_DecrementingTable7E18E9,x
	AND.b #$10
	BEQ.b CODE_26EEDE
	LDY.w $18C8
	LDA.w SMB3_OAMBuffer[$5C].Prop,y
	EOR.b #$C0
	STA.w SMB3_OAMBuffer[$5C].Prop,y
CODE_26EEDE:
	RTS

CODE_26EEDF:
	JSR.w SMB3_BattleMode_GenericSpriteGraphicsRt_Main
	LDA.w $18CD,x
	ORA.w !RAM_SMB3_BattleNorSpr_UnusedFreezeSpriteTimer,x
	ORA.w $19C0
	BNE.b CODE_26EEDE
	INC.w !RAM_SMB3_BattleNorSpr_AnimationFrameCounter,x
	LDY.w !RAM_SMB3_BattleNorSpr_FacingDirection,x
	LDA.w !RAM_SMB3_BattleNorSpr_XPosLo,x
	CMP.w DATA_21EDEA,y
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	BEQ.b CODE_26EEFB
	CMP.w DATA_21EDEA+$02,y
endif
	BNE.b CODE_26EF07
CODE_26EEFB:
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr07_WaveMotionBoo
	BNE.b CODE_26EF07
	LDA.b #$B0
	STA.w !RAM_SMB3_BattleNorSpr_DecrementingTable7E18E9,x
CODE_26EF07:
	JSR.w SMB3_BattleMode_CheckForPlayerToNormalSpriteCollision_Main
	JSR.w SMB3_BattleMode_HandleBattleNormalSpriteLevelCollision_Main
	LDA.w !RAM_SMB3_BattleMode_POWBlockQuakeTimer
	BNE.b CODE_26EF19
	LDA.w !RAM_SMB3_BattleNorSpr_TileSpritesFeetAreTouching,x
	CMP.b #$C2
	BNE.b CODE_26EF1E
CODE_26EF19:
	LDA.b #$B0
	STA.w !RAM_SMB3_BattleNorSpr_DecrementingTable7E18E9,x
CODE_26EF1E:
	LDA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr07_WaveMotionBoo
	BNE.b CODE_26EF44
	JSR.w SMB3_BattleMode_UpdateSpritePosition_BattleNorSpr_X
	JSR.w SMB3_BattleMode_UpdateSpritePosition_BattleNorSpr_Y
	LDA.w $18A6,x
	AND.b #$01
	TAY
	LDA.w !RAM_SMB3_BattleNorSpr_YSpeed,x
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	PHA
	LDA.b !RAM_SMB3_Global_FrameCounter
	BIT.b #$03
	BEQ.b +
	PLA
	BRA.b ++

+:
	PLA
	CLC
	ADC.w DATA_21EDE7,y
++:
endif
	CLC
	ADC.w DATA_21EDE7,y
	STA.w !RAM_SMB3_BattleNorSpr_YSpeed,x
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	AND.b #$FE
	ORA.b #$01
endif
	CMP.w DATA_21EDE9,y
	BNE.b CODE_26EF43
	INC.w $18A6,x
CODE_26EF43:
	RTS

CODE_26EF44:
	CMP.b #!Define_SMB3_SpriteID_BattleNorSpr09_FallingBoo
	BEQ.b CODE_26EF6F
	LDA.w !RAM_SMB3_BattleNorSpr_TileCollisionFlags,x
	AND.b #$03
	AND.w !RAM_SMB3_BattleNorSpr_FacingDirection,x
	BEQ.b CODE_26EF55
	JSR.w SMB3_BattleMode_FlipSpriteXSpeed_Main
CODE_26EF55:
	LDA.w !RAM_SMB3_BattleNorSpr_TileCollisionFlags,x
	AND.b #$0C
	AND.w $1962,x
	BEQ.b CODE_26EF68
	LDA.w !RAM_SMB3_BattleNorSpr_YSpeed,x
	EOR.b #$FF
	INC
	STA.w !RAM_SMB3_BattleNorSpr_YSpeed,x
CODE_26EF68:
	JSR.w SMB3_BattleMode_UpdateSpritePosition_BattleNorSpr_X
	JSR.w SMB3_BattleMode_UpdateSpritePosition_BattleNorSpr_Y
	RTS

CODE_26EF6F:
	JSR.w CODE_26EF68
	INC.w !RAM_SMB3_BattleNorSpr_YSpeed,x
	INC.w !RAM_SMB3_BattleNorSpr_YSpeed,x
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b !RAM_SMB3_Global_FrameCounter
	BIT.b #$01
	BNE.b +
	INC.w !RAM_SMB3_BattleNorSpr_YSpeed,x
+:
endif
	LDA.w !RAM_SMB3_BattleNorSpr_YPosLo,x
	CMP.b #$E0
	BCC.b CODE_26EF82
	STZ.w !RAM_SMB3_BattleNorSpr_CurrentStatus,x
CODE_26EF82:
	RTS

;--------------------------------------------------------------------

; Note: Something to do with the bounce sprite of the battle mode blocks.

SMB3_BattleMode_DrawBounceSprite:
.Main:
;$26EF83
	LDX.b #$01
CODE_26EF85:
	STX.w $190E
	LDA.w !RAM_SMB3_BattleBounceSpr_DespawnTimer,x
	BEQ.b CODE_26EFB3
	PHA
	CMP.b #$0E
	BNE.b CODE_26EF95
	JSR.w CODE_26F013
CODE_26EF95:
	PLA
	CMP.b #$01
	BNE.b CODE_26EFB0
	JSR.w CODE_26F002
	LDA.b #$7E2000
	STA.b $2E
	LDA.b #$7E2000>>8
	STA.b $2F
	LDA.b #$7E2000>>16
	STA.b $30
	LDY.w $1908,x
	LDA.b #$C1
	STA.b [$2E],y
CODE_26EFB0:
	JSR.w CODE_26EFB7
CODE_26EFB3:
	DEX
	BPL.b CODE_26EF85
	RTS

CODE_26EFB7:
	LDA.w $0076
	ORA.w $18CB
	ORA.w $18CC
	ORA.w $19C0
	ORA.w !RAM_SMB3_BattleMode_MariosHurtAnimationTimer
	ORA.w !RAM_SMB3_BattleMode_LuigisHurtAnimationTimer
	BNE.b CODE_26EFDA
	DEC.w !RAM_SMB3_BattleBounceSpr_DespawnTimer,x
	JSR.w SMB3_BattleMode_UpdateSpritePosition_BattleBounceSpr_Y
	LDA.w !RAM_SMB3_BattleBounceSpr_YSpeed,x
	CLC
	ADC.b #$05
	STA.w !RAM_SMB3_BattleBounceSpr_YSpeed,x
CODE_26EFDA:
	LDY.b #$E8
	CPX.b #$00
	BNE.b CODE_26EFE2
	LDY.b #$EC
CODE_26EFE2:
	LDA.w !RAM_SMB3_BattleBounceSpr_XPosLo,x
	STA.w SMB3_OAMBuffer[$40].XDisp,y
	LDA.w !RAM_SMB3_BattleBounceSpr_YPosLo,x
	STA.w SMB3_OAMBuffer[$40].YDisp,y
	LDA.b #$2C
	STA.w SMB3_OAMBuffer[$40].Prop,y
	LDA.b #$80
	STA.w SMB3_OAMBuffer[$40].Tile,y
	TYA
	LSR
	LSR
	TAY
	LDA.b #$02
	STA.w SMB3_OAMTileSizeBuffer[$40].Slot,y
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDY.b #$00
	JSR.w SMB3_BattleMode_GetPlayerClipping_Main
	LDA.w !RAM_SMB3_BattleBounceSpr_YPosLo
	CLC
	ADC.b #$08
	STA.b $04
	LDA.w !RAM_SMB3_BattleBounceSpr_XPosLo
	STA.b $05
	LDA.b #$06
	STA.b $06
	LDA.b #$06
	STA.b $07
	JSR.w SMB3_BattleMode_CheckForContact_Main
	BCC.b ++
	LDA.w !RAM_SMB3_BattleMode_MariosYPosLo,x
	INC
	INC
	PHA
	LDA.w !RAM_SMB3_BattleMode_MariosPowerUp,x
	BNE.b +
	PLA
	CLC
	ADC.b #$10
	PHA
+:
	PLA
	SEC
	SBC.b #$08
	CMP.b $04
	BPL.b ++
	STZ.w !RAM_SMB3_BattleMode_MariosYSpeed,x
	LDA.w !RAM_SMB3_BattleBounceSpr_YPosLo
	CLC
	ADC.b #$10
	STA.w !RAM_SMB3_BattleMode_MariosYPosLo,x
++:
endif
	RTS

CODE_26F002:
	LDA.b #$02
	STA.b $0C
	INC
	STA.b $0D
	LDA.b #$12
	STA.b $0E
	INC
	STA.b $0F
	JMP.w CODE_26F01D

CODE_26F013:
	LDA.b #$FF
	STA.b $0C
	STA.b $0D
	STA.b $0E
	STA.b $0F
CODE_26F01D:
	LDY.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	LDA.b #$08
	STA.b $03
	LDA.w $1908,x
	PHA
	AND.b #$F0
	ASL
	ROL.b $03
	ASL
	ROL.b $03
	STA.b $04
	PLA
	ASL
	AND.b #$1F
	CLC
	ADC.b $04
	STA.w SMB3_StripeImageUploadTable[$00].HighByte,y
	CLC
	ADC.b #$20
	STA.w SMB3_StripeImageUploadTable[$04].HighByte,y
	LDA.b $03
	AND.b #$DF
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,y
	STA.w SMB3_StripeImageUploadTable[$04].LowByte,y
	LDA.b #$00
	STA.w SMB3_StripeImageUploadTable[$01].LowByte,y
	STA.w SMB3_StripeImageUploadTable[$05].LowByte,y
	LDA.b #$03
	STA.w SMB3_StripeImageUploadTable[$01].HighByte,y
	STA.w SMB3_StripeImageUploadTable[$05].HighByte,y
	LDA.b $0C
	STA.w SMB3_StripeImageUploadTable[$02].LowByte,y
	LDA.b $0D
	STA.w SMB3_StripeImageUploadTable[$03].LowByte,y
	LDA.b $0E
	STA.w SMB3_StripeImageUploadTable[$06].LowByte,y
	LDA.b $0F
	STA.w SMB3_StripeImageUploadTable[$07].LowByte,y
	LDA.b #$18
	STA.w SMB3_StripeImageUploadTable[$02].HighByte,y
	STA.w SMB3_StripeImageUploadTable[$03].HighByte,y
	STA.w SMB3_StripeImageUploadTable[$06].HighByte,y
	STA.w SMB3_StripeImageUploadTable[$07].HighByte,y
	LDA.b #$FF
	STA.w SMB3_StripeImageUploadTable[$08].LowByte,y
	STA.w SMB3_StripeImageUploadTable[$08].HighByte,y
	TYA
	CLC
	ADC.b #$10
	STA.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	RTS

;--------------------------------------------------------------------

CODE_26F08E:
	LDA.w $18CB
	ORA.w $18CC
	ORA.w !RAM_SMB3_BattleMode_PlayerHasWonTimer
	ORA.w $19C0
	BNE.b CODE_26F0A6
	LDY.b #$07
CODE_26F09E:
	LDA.w !RAM_SMB3_BattleSmokeSpr_AnimationFrame,y
	BMI.b CODE_26F0A8
	DEY
	BPL.b CODE_26F09E
CODE_26F0A6:
	SEC
	RTS

CODE_26F0A8:
	CLC
	RTS

;--------------------------------------------------------------------

CODE_26F0AA:
	LDA.w !RAM_SMB3_BattleNorSpr_XPosLo,y
	STA.b $06
	LDA.w !RAM_SMB3_BattleNorSpr_YPosLo,y
	STA.b $07
	BRA.b CODE_26F0C8

CODE_26F0B6:
	LDA.w !RAM_SMB3_BattleMode_MariosYPosHi,y
	BNE.b CODE_26F110
	LDA.w !RAM_SMB3_BattleMode_MariosXPosLo,y
	STA.b $06
	LDA.w !RAM_SMB3_BattleMode_MariosYPosLo,y
	CLC
	ADC.b #$20
	STA.b $07
CODE_26F0C8:
	PHY
	JSR.w CODE_26F08E
	BCS.b CODE_26F10F
	LDA.b #$00
	STA.w !RAM_SMB3_BattleSmokeSpr_AnimationFrame,y
	LDA.b #$02
	STA.w !RAM_SMB3_BattleSmokeSpr_OAMTileSize,y
	ASL
	STA.w !RAM_SMB3_BattleSmokeSpr_AnimationFrameCounter,y
	PHY
	LDY.b $0F
	LDA.w !RAM_SMB3_BattleNorSpr_XPosLo,x
	SEC
	SBC.b $06
	BPL.b CODE_26F0EB
	SEC
	ROR
	BRA.b CODE_26F0EC

CODE_26F0EB:
	LSR
CODE_26F0EC:
	CLC
	ADC.b $06
	PLY
	STA.w !RAM_SMB3_BattleSmokeSpr_XPosLo,y
	PHY
	LDY.b $0F
	LDA.w !RAM_SMB3_BattleNorSpr_YPosLo,x
	SEC
	SBC.b $07
	BPL.b CODE_26F102
	SEC
	ROR
	BRA.b CODE_26F103

CODE_26F102:
	LSR
CODE_26F103:
	CLC
	ADC.b $07
	PLY
	STA.w !RAM_SMB3_BattleSmokeSpr_YPosLo,y
	LDA.b #$01
	STA.w !RAM_SMB3_BattleSmokeSpr_SpriteID,y
CODE_26F10F:
	PLY
CODE_26F110:
	RTS

;--------------------------------------------------------------------

SMB3_BattleMode_ProcessSmokeSprites:
.Main:
;$26F111
	LDX.b #$07
CODE_26F113:
	LDA.w !RAM_SMB3_BattleSmokeSpr_AnimationFrame,x
	BMI.b CODE_26F11B
	JSR.w CODE_26F11F
CODE_26F11B:
	DEX
	BPL.b CODE_26F113
	RTS

CODE_26F11F:
	LDA.w !RAM_SMB3_BattleSmokeSpr_SpriteID,x
	TXY
	ASL
	TAX
	JMP.w (DATA_26F128,x)

DATA_26F128:
	dw CODE_26F12C
	dw CODE_26F188

;--------------------------------------------------------------------

CODE_26F12C:
	TYX
	PHB
	PHK
	PLB
	LDA.w $18CB
	ORA.w $18CC
	ORA.w $19C0
	BNE.b CODE_26F159
	LDA.w !RAM_SMB3_BattleSmokeSpr_AnimationFrameCounter,x
	BNE.b CODE_26F156
	INC.w !RAM_SMB3_BattleSmokeSpr_AnimationFrame,x
	LDA.w !RAM_SMB3_BattleSmokeSpr_AnimationFrame,x
	TAY
	LDA.w DATA_26F779,y
	BPL.b CODE_26F151
	STA.w !RAM_SMB3_BattleSmokeSpr_AnimationFrame,x
	PLB
	RTS

CODE_26F151:
	STA.w !RAM_SMB3_BattleSmokeSpr_AnimationFrameCounter,x
	BRA.b CODE_26F159

CODE_26F156:
	DEC.w !RAM_SMB3_BattleSmokeSpr_AnimationFrameCounter,x
CODE_26F159:
	LDA.w !RAM_SMB3_BattleSmokeSpr_AnimationFrame,x
	TAY
	LDA.w !RAM_SMB3_BattleSmokeSpr_XPosLo,x
	CLC
	ADC.w DATA_26F77E,y
	STA.w !RAM_SMB3_BattleSmokeSpr_OAMXDisp,x
	LDA.w !RAM_SMB3_BattleSmokeSpr_YPosLo,x
	CLC
	ADC.w DATA_26F77E,y
	STA.w !RAM_SMB3_BattleSmokeSpr_OAMYDisp,x
	LDA.w DATA_26F782,y
	STA.w !RAM_SMB3_BattleSmokeSpr_OAMTile,x
	LDA.w DATA_26F786,y
	STA.w !RAM_SMB3_BattleSmokeSpr_OAMProp,x
	STZ.w !RAM_SMB3_BattleSmokeSpr_OAMTileSize,x
	STZ.w $0000
	JSR.w CODE_26F200
	PLB
	RTS

;--------------------------------------------------------------------

CODE_26F188:
	TYX
	PHB
	PHK
	PLB
	LDA.w $18CB
	ORA.w $18CC
	ORA.w $19C0
	BNE.b CODE_26F1B5
	LDA.w !RAM_SMB3_BattleSmokeSpr_AnimationFrameCounter,x
	BNE.b CODE_26F1B2
	INC.w !RAM_SMB3_BattleSmokeSpr_AnimationFrame,x
	LDA.w !RAM_SMB3_BattleSmokeSpr_AnimationFrame,x
	TAY
	LDA.w DATA_26F78A,y
	BPL.b CODE_26F1AD
	STA.w !RAM_SMB3_BattleSmokeSpr_AnimationFrame,x
	PLB
	RTS

CODE_26F1AD:
	STA.w !RAM_SMB3_BattleSmokeSpr_AnimationFrameCounter,x
	BRA.b CODE_26F1B5

CODE_26F1B2:
	DEC.w !RAM_SMB3_BattleSmokeSpr_AnimationFrameCounter,x
CODE_26F1B5:
	LDA.w !RAM_SMB3_BattleSmokeSpr_AnimationFrame,x
	TAY
	BEQ.b CODE_26F1BE
	STZ.w !RAM_SMB3_BattleSmokeSpr_OAMTileSize,x
CODE_26F1BE:
	LDA.w DATA_26F7AF,y
	STA.w !RAM_SMB3_BattleSmokeSpr_OAMTile,x
	LDA.w DATA_26F7B3,y
	STA.w !RAM_SMB3_BattleSmokeSpr_OAMProp,x
	TYA
	ASL
	ASL
	TAY
	LDA.b #$04
	STA.w $19F2,x
	STZ.w $0000
CODE_26F1D6:
	LDA.w !RAM_SMB3_BattleSmokeSpr_XPosLo,x
	CLC
	ADC.w DATA_26F78F,y
	STA.w !RAM_SMB3_BattleSmokeSpr_OAMXDisp,x
	LDA.w !RAM_SMB3_BattleSmokeSpr_YPosLo,x
	CLC
	ADC.w DATA_26F79F,y
	STA.w !RAM_SMB3_BattleSmokeSpr_OAMYDisp,x
	JSR.w CODE_26F200
	DEC.w $19F2,x
	BEQ.b CODE_26F1FE
	LDA.w $0000
	CLC
	ADC.b #$04
	STA.w $0000
	INY
	BRA.b CODE_26F1D6

CODE_26F1FE:
	PLB
	RTS

CODE_26F200:
	PHY
	TXA
	ASL
	ASL
	CLC
	ADC.w $0000
	TAY
	LDA.w !RAM_SMB3_BattleSmokeSpr_OAMXDisp,x
	STA.w SMB3_OAMBuffer[$1C].XDisp,y
	LDA.w !RAM_SMB3_BattleSmokeSpr_OAMYDisp,x
	STA.w SMB3_OAMBuffer[$1C].YDisp,y
	LDA.w !RAM_SMB3_BattleSmokeSpr_OAMTile,x
	STA.w SMB3_OAMBuffer[$1C].Tile,y
	LDA.w !RAM_SMB3_BattleSmokeSpr_OAMProp,x
	STA.w SMB3_OAMBuffer[$1C].Prop,y
	TYA
	LSR
	LSR
	TAY
	LDA.w !RAM_SMB3_BattleSmokeSpr_OAMTileSize,x
	STA.w SMB3_OAMTileSizeBuffer[$1C].Slot,y
	PLY
	RTS

;--------------------------------------------------------------------

SMB3_BattleMode_HandleRoundStart:
.Main:
;$26F22D
	LDA.w $1A28
	BEQ.b CODE_26F245
	STZ.w !RAM_SMB3_BattleMode_RoundTextOffset
	LDA.w !RAM_SMB3_BattleMode_CurrentStage
	BNE.b CODE_26F242
	JSR.w SMB3_BattleMode_Draw5GamesToWinText_Main
	LDA.w !RAM_SMB3_BattleMode_DisplayRoundNumberTextFlag
	BEQ.b CODE_26F245
CODE_26F242:
	JSR.w SMB3_BattleMode_DrawRoundNumberText_Main
CODE_26F245:
	RTS

;--------------------------------------------------------------------

SMB3_BattleMode_DrawRoundNumberText:
.Main:
;$26F246
	PHB
	PHK
	PLB
	PHX
	LDA.w !RAM_SMB3_BattleMode_CurrentStage
	CMP.b #$08
	BNE.b CODE_26F254
	JMP.w CODE_26F2FE

CODE_26F254:
	LDY.w !RAM_SMB3_BattleMode_RoundNumberTextAnimationFrame
	DEC.w !RAM_SMB3_BattleMode_RoundNumberTextAnimationFrameCounter
	BNE.b CODE_26F273
	INC.w !RAM_SMB3_BattleMode_RoundNumberTextAnimationFrame
	INY
	LDA.w DATA_26F823,y
	STA.w !RAM_SMB3_BattleMode_RoundNumberTextAnimationFrameCounter
	LDA.w !RAM_SMB3_BattleMode_RoundNumberTextAnimationFrame
	CMP.b #$07
	BCC.b CODE_26F273
	STZ.w $1A28
	JMP.w CODE_26F2FB

CODE_26F273:
	LDY.w !RAM_SMB3_BattleMode_RoundTextOffset
	REP.b #$30
	LDA.w !RAM_SMB3_BattleMode_RoundNumberTextAnimationFrame
	AND.w #$00FF
	ASL
	TAX
	STA.b $0A
	LDA.w DATA_26F815,x
	STA.w $0002
	LDA.w DATA_26F807,x
	STA.w $0000
	;LDA.w #$0028 (ROUND data size)
	LDA.w #(DATA_26F7DF_End-DATA_26F7DF)*2
	CLC
	ADC.w !RAM_SMB3_BattleMode_RoundTextOffset
	STA.w $0004
	JSR.w SMB3_DrawBattleModeText
	LDA.w !RAM_SMB3_BattleMode_CurrentStage
	INC
	CMP.w #$000A
	BCC.b CODE_26F2C7
	LDX.b $0A
	LDA.w DATA_26F902,x
	STA.b $02
	LDA.w DATA_26F8E6,x
	STA.w $0000
	LDA.w #$0030
	CLC
	ADC.w !RAM_SMB3_BattleMode_RoundTextOffset
	STA.w $0004
	JSR.w SMB3_DrawBattleModeText
	LDA.w !RAM_SMB3_BattleMode_CurrentStage
	SEC
	SBC.w #$0009
	BRA.b CODE_26F2CF

CODE_26F2C7:
	PHA
	TYA
	CLC
	ADC.w #$0008
	TAY
	PLA
CODE_26F2CF:
	ASL
	ASL
	CLC
	ADC.w #DATA_26F8BA
	STA.w $0002

	LDX.b $0A
	LDA.w DATA_26F8F4,x
	STA.b $00

	LDA.w !RAM_SMB3_BattleMode_RoundNumberTextAnimationFrame
	CMP.w #$0003
	BEQ.b CODE_26F2EC
	LDA.w DATA_26F902,x
	STA.b $02
CODE_26F2EC:
	;LDA.w #$0038 (Round data size + Round number data size)
	LDA.w #(DATA_26F7DF_End-DATA_26F7DF)*2+$10
	CLC
	ADC.w !RAM_SMB3_BattleMode_RoundTextOffset
	STA.w $0004
	JSR.w SMB3_DrawBattleModeText
	SEP.b #$30
CODE_26F2FB:
	PLX
	PLB
	RTS

CODE_26F2FE:
	LDY.w !RAM_SMB3_BattleMode_RoundNumberTextAnimationFrame
	DEC.w !RAM_SMB3_BattleMode_RoundNumberTextAnimationFrameCounter
	BNE.b CODE_26F31C
	INC.w !RAM_SMB3_BattleMode_RoundNumberTextAnimationFrame
	INY
	LDA.w DATA_26F823,y
	STA.w !RAM_SMB3_BattleMode_RoundNumberTextAnimationFrameCounter
	LDA.w !RAM_SMB3_BattleMode_RoundNumberTextAnimationFrame
	CMP.b #$07
	BCC.b CODE_26F31C
	STZ.w $1A28
	BRA.b CODE_26F341

CODE_26F31C:
	LDY.b #$00
	REP.b #$30
	LDA.w !RAM_SMB3_BattleMode_RoundNumberTextAnimationFrame
	AND.w #$00FF
	ASL
	TAX
	STA.b $0A
	LDA.w DATA_26F88E,x
	STA.w $0002
	LDA.w DATA_26F89C,x
	STA.w $0000
	;LDA.w #$0028 (FINAL data size)
	LDA.w #(DATA_26F852_End-DATA_26F852)*2
	STA.w $0004
	JSR.w SMB3_DrawBattleModeText
	SEP.b #$30
CODE_26F341:
	PLX
	PLB
	RTS

;--------------------------------------------------------------------

SMB3_BattleMode_DrawPauseText:
.Main:
;$26F344
	LDA.w $0076
	BEQ.b CODE_26F368
	PHB
	PHK
	PLB
	LDY.b #$00
	REP.b #$30
	LDA.w #DATA_26F82A
	STA.w $0000
	LDA.w #SMB3_BattleModePauseTextData_TileProp
	STA.w $0002
	LDA.w #$0028
	STA.w $0004
	JSR.w SMB3_DrawBattleModeText
	SEP.b #$30
	PLB
CODE_26F368:
	RTS

;--------------------------------------------------------------------

SMB3_BattleMode_Draw5GamesToWinText:
.Main:
;$26F369
	PHB
	PHK
	PLB
	PHX

	LDY.w $1A69
	DEC.w $1A68
	BNE.b CODE_26F388

	INC.w $1A69
	INY

	LDA.w DATA_26FA8E,y
	STA.w $1A68

	LDA.w $1A69
	CMP.b #$07
	BCC.b CODE_26F388
	BRA.b CODE_26F3BF

CODE_26F388:
	LDA.w $1A69
	CMP.b #$03
	BNE.b CODE_26F399
	LDA.w $1A68
	CMP.b #$7C
	BNE.b CODE_26F399
	INC.w !RAM_SMB3_BattleMode_DisplayRoundNumberTextFlag
CODE_26F399:
	LDY.b #$00
	REP.b #$30
	LDA.w $1A69
	AND.w #$00FF
	ASL
	TAX
	LDA.w DATA_26FA72,x
	STA.w $0002
	LDA.w DATA_26FA95,x
	STA.w $0000
	LDA.w DATA_26FA80,x
	STA.w $0004
	JSR.w SMB3_DrawBattleModeText
	SEP.b #$30
	STY.w !RAM_SMB3_BattleMode_RoundTextOffset
CODE_26F3BF:
	PLX
	PLB
	RTS

;--------------------------------------------------------------------

; Optimization: All the scratch RAM addresses in this routine use unnecessary absolute addressing.

SMB3_BattleMode_DrawXWinText:
.Main:
;$26F3C2
	PHB
	PHK
	PLB
	PHX

	DEC.w !RAM_SMB3_BattleMode_WinnerTextAnimationTimer
	BNE.b CODE_26F3DA

	LDA.b #$04
	STA.w !RAM_SMB3_BattleMode_WinnerTextAnimationTimer
; Frame check
	LDA.w !RAM_SMB3_BattleMode_WinnerTextAnimationIndex
	CMP.b #$03
	BEQ.b CODE_26F3DA

	INC.w !RAM_SMB3_BattleMode_WinnerTextAnimationIndex
CODE_26F3DA:						; Note: Player name data:
	REP.b #$30
	LDA.w #DATA_26F95C						; - X,Y for smaller frames
	STA.w !RAM_SMB3_Global_ScratchRAM00

	LDA.w !RAM_SMB3_BattleMode_WinnerTextAnimationIndex
	AND.w #$00FF
	PHA
	ASL
	TAX
	LDA.w DATA_26F992,x						; - Tiles and properties (w/MARIO)
	STA.w !RAM_SMB3_Global_ScratchRAM02
	;LDA.w #$0014 (Data size)
	LDA.w #(DATA_26F95C_End-DATA_26F95C)*2
	STA.w !RAM_SMB3_Global_ScratchRAM04

	PLA								;\ For frames 2 and greater, update X,Y positions and data size
	CMP.w #$0002					;|
	BCC.b CODE_26F41E				;/
	
	PHA
	LDA.w #DATA_26F910						; - X,Y for taller frames
	STA.w !RAM_SMB3_Global_ScratchRAM00
	;LDA.w #$0028 (Data size)
	LDA.w #(DATA_26F910_End-DATA_26F910)*2
	STA.w !RAM_SMB3_Global_ScratchRAM04
; Frame 3 check
	PLA
	CMP.w #$0003
	BCC.b CODE_26F41E

	LDA.w $078C								;\ If Luigi won, use LUIGI tiles instead
	AND.w #$0001							;|
	BEQ.b CODE_26F41E						;|
	LDA.w #DATA_26F938						;|
	STA.w !RAM_SMB3_Global_ScratchRAM02		;/
CODE_26F41E:
	LDY.w #$0000
	JSR.w SMB3_DrawBattleModeText
									; "WIN!" data:
	LDA.w #DATA_26F966						; - X,Y for smaller frames
	STA.w !RAM_SMB3_Global_ScratchRAM00

	LDA.w !RAM_SMB3_BattleMode_WinnerTextAnimationIndex
	AND.w #$00FF
	PHA
	ASL
	TAX
	LDA.w DATA_26F992,x						; - Tiles and properties 
	STA.w !RAM_SMB3_Global_ScratchRAM02
	;LDA.w #$0024 (Data size + offset from player name, i.e. player data size)
	LDA.w #((DATA_26F95C_End-DATA_26F95C)*2)+((DATA_26F966_End-DATA_26F966)*2)
	STA.w !RAM_SMB3_Global_ScratchRAM04
; Frame 2 check
	PLA
	CMP.w #$0002
	BCC.b CODE_26F45E

	PHA
	LDA.w #DATA_26F94C						; - X,Y for taller frames
	STA.w !RAM_SMB3_Global_ScratchRAM00
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000
	LDA.w #VENCEU_Frame2_TileProp			; - Expanded data
	STA.w !RAM_SMB3_Global_ScratchRAM02
endif
	;LDA.w #$0048 (Data size + offset from player name, i.e. player data size)
	LDA.w #((DATA_26F910_End-DATA_26F910)*2)+((DATA_26F94C_End-DATA_26F94C)*2)
	STA.w !RAM_SMB3_Global_ScratchRAM04
; Frame 3 check
	PLA
	CMP.w #$0003
	BCC.b CODE_26F45E

	LDA.w #DATA_26F96E						; - WIN! tiles and properties 
	STA.w !RAM_SMB3_Global_ScratchRAM02
CODE_26F45E:
	JSR.w SMB3_DrawBattleModeText

	SEP.b #$30
	PLX
	PLB
	RTS

;--------------------------------------------------------------------

SMB3_DrawBattleModeText:
	LDA.b (!RAM_SMB3_Global_ScratchRAM00)
	STA.w SMB3_OAMBuffer[$04].XDisp,y
	LDA.b (!RAM_SMB3_Global_ScratchRAM02)
	STA.w SMB3_OAMBuffer[$04].Tile,y
	
	INC.w !RAM_SMB3_Global_ScratchRAM00			;\ Optimization: Unnecessary absolute addressing
	INC.w !RAM_SMB3_Global_ScratchRAM00			;|
	INC.w !RAM_SMB3_Global_ScratchRAM02			;|
	INC.w !RAM_SMB3_Global_ScratchRAM02			;/
	PHY
	
	TYA
	LSR
	LSR
	TAY
	SEP.b #$30
	LDA.b #$00
	STA.w SMB3_OAMTileSizeBuffer[$04].Slot,y
	
	REP.b #$30
	PLY
	INY
	INY
	INY
	INY
	CPY.w !RAM_SMB3_Global_ScratchRAM04			; Optimization: Unnecessary absolute addressing
	BNE.b SMB3_DrawBattleModeText
	RTS

;--------------------------------------------------------------------

SMB3_BattleMode_SpawnKoopa:
.Main:
;$26F495
	LDX.b #$0B
	JSR.w CODE_26DDCB
	TXA
	BMI.b CODE_26F4B1
	CPX.b #$0B
	BEQ.b CODE_26F4A4
	JMP.w CODE_26ED2A

CODE_26F4A4:
	INC.w $1A2A
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$26
else
	LDA.b #$30
endif
	STA.w !RAM_SMB3_BattleNorSpr_InsidePipeTimer,x
	LDA.b #!Define_SMB3_SpriteID_BattleNorSpr0A_Koopa
	STA.w !RAM_SMB3_BattleNorSpr_SpriteID,x
CODE_26F4B1:
	RTS

;--------------------------------------------------------------------

SMB3_BattleMode_DrawKoopasHead:
.Main:
;$26F4B2
	LDA.w !RAM_SMB3_BattleNorSpr_CurrentStatus,x
	CMP.b #$01
	BNE.b CODE_26F4B1
	LDY.w $18C8
	LDA.w SMB3_OAMBuffer[$5C].XDisp,y
	STA.w SMB3_OAMBuffer[$78].XDisp
	LDA.w SMB3_OAMBuffer[$5C].YDisp,y
	SEC
	SBC.b #$10
	STA.w SMB3_OAMBuffer[$78].YDisp
	STA.w $0000
	LDA.w SMB3_OAMBuffer[$5C].Tile,y
	AND.b #$0F
	CLC
	ADC.b #$DE
	STA.w SMB3_OAMBuffer[$78].Tile
	STA.w $0002
	LDA.w SMB3_OAMBuffer[$5C].Prop,y
	STA.w SMB3_OAMBuffer[$78].Prop
	PHY
	TYA
	LSR
	LSR
	TAY
	LDA.w SMB3_OAMTileSizeBuffer[$5C].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$78].Slot
	PLY
	LDA.w SMB3_OAMBuffer[$5D].YDisp,y
	CMP.b #$F0
	BEQ.b CODE_26F517
	LDA.w SMB3_OAMBuffer[$5D].XDisp,y
	STA.w SMB3_OAMBuffer[$79].XDisp
	LDA.w $0000
	STA.w SMB3_OAMBuffer[$79].YDisp
	LDA.w $0002
	STA.w SMB3_OAMBuffer[$79].Tile
	LDA.w SMB3_OAMBuffer[$5D].Prop,y
	STA.w SMB3_OAMBuffer[$79].Prop
	TYA
	LSR
	LSR
	TAY
	LDA.w SMB3_OAMTileSizeBuffer[$5D].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$79].Slot
CODE_26F517:
	LDA.w !RAM_SMB3_BattleNorSpr_IsTurningAroundFlag,x
	BNE.b CODE_26F51D
	RTS

CODE_26F51D:
	PHX
	LDA.w !RAM_SMB3_BattleNorSpr_TurningAroundStartingPoseIndex,x
	CLC
	ADC.w !RAM_SMB3_BattleNorSpr_AnimationFrameCounter,x
	CLC
	ADC.b #$05
	TAX
	LDY.w $18C8
	LDA.l DATA_26E437,x
	STA.w SMB3_OAMBuffer[$78].Tile
	STA.w SMB3_OAMBuffer[$79].Tile
	LDA.w SMB3_OAMBuffer[$78].Prop
	ORA.b #$01
	STA.w SMB3_OAMBuffer[$78].Prop
	LDA.w SMB3_OAMBuffer[$79].Prop
	ORA.b #$01
	STA.w SMB3_OAMBuffer[$79].Prop
	PLX
	RTS

;--------------------------------------------------------------------

SMB3_BattleMode_BattleNorSprStatus04_KickedShell:
.Main:
;$26F548
	TYX
	LDA.w $18CB
	ORA.w $18CC
	ORA.w !RAM_SMB3_BattleMode_PlayerHasWonTimer
	ORA.w $19C0
	ORA.w !RAM_SMB3_BattleMode_MariosHurtAnimationTimer
	ORA.w !RAM_SMB3_BattleMode_LuigisHurtAnimationTimer
	BNE.b CODE_26F5CB
	LDA.w !RAM_SMB3_BattleNorSpr_InsidePipeTimer,x
	BEQ.b CODE_26F58D
	DEC.w !RAM_SMB3_BattleNorSpr_InsidePipeTimer,x
	BNE.b CODE_26F58D
	LDA.b #$01
	STA.w !RAM_SMB3_BattleNorSpr_CurrentStatus,x
	LDA.w $1A33
	BNE.b CODE_26F579
	LDA.w !RAM_SMB3_BattleNorSpr_XSpeed,x
	JSR.w CODE_26EC1A
	BRA.b CODE_26F587

CODE_26F579:
	LDA.w !RAM_SMB3_BattleNorSpr_XSpeed,x
	BMI.b CODE_26F582
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$07
else
	LDA.b #$06
endif
	BRA.b CODE_26F584

CODE_26F582:
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$F9
else
	LDA.b #$FA
endif
CODE_26F584:
	STA.w !RAM_SMB3_BattleNorSpr_XSpeed,x
CODE_26F587:
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$30
else
	LDA.b #$3C
endif
	STA.w !RAM_SMB3_BattleNorSpr_InsidePipeTimer,x
	RTS

CODE_26F58D:
	JSR.w CODE_26E204
	JSR.w CODE_26E180
	JSR.w SMB3_BattleMode_UpdateSpritePosition_BattleNorSpr_Y
	LDA.w !RAM_SMB3_BattleNorSpr_YSpeed,x
	BMI.b CODE_26F59F
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	CMP.b #$4C
else
	CMP.b #$40
endif
	BCS.b CODE_26F5A5
CODE_26F59F:
	INC.w !RAM_SMB3_BattleNorSpr_YSpeed,x
	INC.w !RAM_SMB3_BattleNorSpr_YSpeed,x
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b !RAM_SMB3_Global_FrameCounter
	BIT.b #$01
	BNE.b CODE_26F5A5
	INC.w !RAM_SMB3_BattleNorSpr_YSpeed,x
endif
CODE_26F5A5:
	JSR.w SMB3_BattleMode_HandleBattleNormalSpriteLevelCollision_Main
	LDA.w !RAM_SMB3_BattleNorSpr_TileCollisionFlags,x
	AND.b #$04
	BNE.b CODE_26F5B4
	STA.w !RAM_SMB3_BattleNorSpr_AnimationFrameCounter,x
	BRA.b CODE_26F5BA

CODE_26F5B4:
	JSR.w SMB3_BattleMode_SnapSpriteYPositionOntoBlock_Main
	JSR.w SMB3_BattleMode_ModifyNormalSpriteStatusOnPOWBlockHit_Main
CODE_26F5BA:
	JSR.w SMB3_BattleMode_CheckForNormalSpriteToNormalSpriteCollision_Main
	INC.w $1A2D
	LDA.w !RAM_SMB3_BattleNorSpr_DecrementingTable7E18E9,x
	BEQ.b CODE_26F5C8
	DEC.w !RAM_SMB3_BattleNorSpr_DecrementingTable7E18E9,x
CODE_26F5C8:
	JSR.w SMB3_BattleMode_CheckForPlayerToNormalSpriteCollision_Main
CODE_26F5CB:
	JSR.w SMB3_BattleMode_GenericSpriteGraphicsRt_Main
	LDA.w $1A2D
	AND.b #$0C
	LSR
	LSR
	PHA
	TAY
	LDA.w DATA_21EDB7,y
	STA.w $0000
	LDY.w $18C8
	STA.w SMB3_OAMBuffer[$5C].Tile,y
	LDA.w SMB3_OAMBuffer[$5C].Prop,y
	ORA.w $1A34
	STA.w SMB3_OAMBuffer[$5C].Prop,y
	PLA
	INC
	AND.b #$03
	STA.w $0001
	BNE.b CODE_26F5FD
	LDA.w SMB3_OAMBuffer[$5C].Prop,y
	EOR.b #$40
	STA.w SMB3_OAMBuffer[$5C].Prop,y
CODE_26F5FD:
	LDA.w SMB3_OAMBuffer[$5D].YDisp,y
	CMP.b #$F0
	BEQ.b CODE_26F620
	LDA.w $0000
	STA.w SMB3_OAMBuffer[$5D].Tile,y
	LDA.w SMB3_OAMBuffer[$5D].Prop,y
	ORA.w $1A34
	STA.w SMB3_OAMBuffer[$5D].Prop,y
	LDA.w $0001
	BNE.b CODE_26F620
	LDA.w SMB3_OAMBuffer[$5D].Prop,y
	EOR.b #$40
	STA.w SMB3_OAMBuffer[$5D].Prop,y
CODE_26F620:
	RTS

;--------------------------------------------------------------------

SMB3_BattleMode_UpdateSpritePosition:
.BattleBounceSpr:
..Y:
;$26F621
	TXA
	CLC
	ADC.b #$0F
	BPL.b +							; Note: This will always branch

.BattleNorSpr:
..X:
	TXA
	CLC
	ADC.b #$13
	BPL.b +							; Note: This will always branch

..Y:
	TXA
	CLC
	ADC.b #$02
+:
	TAX
	JSR.w CODE_26F645
	LDX.w $190E
	RTS

.Player:
..X:
	TXA
	CLC
	ADC.b #$11
	TAX
	JSR.w CODE_26F645
	LDX.w $190E
	RTS

..Y:
CODE_26F645:
	LDA.w !RAM_SMB3_BattleMode_MariosYSpeed,x
	ASL
	ASL
	ASL
	ASL
	CLC
	ADC.w !RAM_SMB3_BattleMode_MariosSubYPosLo,x
	STA.w !RAM_SMB3_BattleMode_MariosSubYPosLo,x
	PHP
	LDY.b #$00
	LDA.w !RAM_SMB3_BattleMode_MariosYSpeed,x
	LSR
	LSR
	LSR
	LSR
	CMP.b #$08
	BCC.b CODE_26F664
	ORA.b #$F0
	DEY
CODE_26F664:
	PLP
	ADC.w !RAM_SMB3_BattleMode_MariosYPosLo,x
	STA.w !RAM_SMB3_BattleMode_MariosYPosLo,x
	ROL
	CPX.b #$11
	BCS.b CODE_26F678
	ROR
	TYA
	ADC.w !RAM_SMB3_BattleMode_MariosYPosHi,x
	STA.w !RAM_SMB3_BattleMode_MariosYPosHi,x
CODE_26F678:
	RTS

;--------------------------------------------------------------------

SMB3_BattleMode_Handle5CoinWinEffects:
.Main:
;$26F679
	REP.b #$30
	INC.w $1A3C
	INC.w $1A3A
	SEP.b #$30
	LDA.w !RAM_SMB3_BattleMode_PlayerHasWonTimer
	BEQ.b CODE_26F678
	BIT.b #$03
	BNE.b CODE_26F678
	LDA.w $078C
	AND.b #$01
	STA.b $0F
	TAX
	LDA.w !RAM_SMB3_BattleMode_MariosCoinCount,x
	CMP.b #$05
	BNE.b CODE_26F678
	LDA.w !REGISTER_APUPort3
	BNE.b CODE_26F6A5
	LDA.b #!Define_SMAS_Sound0063_1up
	STA.w !RAM_SMB3_Global_SoundCh3
CODE_26F6A5:
	LDY.b #$00
	LDA.b $0F
	BEQ.b CODE_26F6AD
	LDY.b #$20
CODE_26F6AD:
	INC.w !RAM_SMB3_BattleMode_CoinWinPaletteAnimationIndex
	LDA.w !RAM_SMB3_BattleMode_CoinWinPaletteAnimationIndex
	AND.b #$03
	ASL
	ASL
	ASL
	ASL
	TAX
	JSR.w CODE_26F6EF
	LDX.b $0F
	LDA.w !RAM_SMB3_BattleMode_MariosCoinCount,x
	PHA
	LDA.w !RAM_SMB3_BattleMode_CoinWinTileAnimationIndex
	BEQ.b CODE_26F6CE
	STA.w !RAM_SMB3_BattleMode_MariosCoinCount,x
	JSR.w CODE_26CB77
CODE_26F6CE:
	INC.w !RAM_SMB3_BattleMode_CoinWinTileAnimationIndex
	LDA.w !RAM_SMB3_BattleMode_CoinWinTileAnimationIndex
	CMP.b #$06
	BCC.b CODE_26F6DB
	STZ.w !RAM_SMB3_BattleMode_CoinWinTileAnimationIndex
CODE_26F6DB:
	LDA.w !RAM_SMB3_BattleMode_CoinWinTileAnimationIndex
	BEQ.b CODE_26F6E8
	LDX.b $0F
	STA.w !RAM_SMB3_BattleMode_MariosCoinCount,x
	JSR.w CODE_26CB6A
CODE_26F6E8:
	LDX.b $0F
	PLA
	STA.w !RAM_SMB3_BattleMode_MariosCoinCount,x
	RTS

;--------------------------------------------------------------------

CODE_26F6EF:
	REP.b #$30
	PHB
	PHK
	PLB
	LDA.w DATA_26F71B,x
	STA.w SMB3_PaletteMirror[$67].LowByte,y
	LDA.w DATA_26F71B+$02,x
	STA.w SMB3_PaletteMirror[$68].LowByte,y
	LDA.w DATA_26F71B+$04,x
	STA.w SMB3_PaletteMirror[$69].LowByte,y
	LDA.w DATA_26F71B+$08,x
	STA.w SMB3_PaletteMirror[$6E].LowByte,y
	LDA.w DATA_26F71B+$0A,x
	STA.w SMB3_PaletteMirror[$6F].LowByte,y
	PLB
	SEP.b #$30
	INC.w !RAM_SMB3_Global_UpdateEntirePaletteFlag
	RTS

UNK_26F719:
	db $00,$00

DATA_26F71B:
	dw $0192,$0258,$033F,$3425,$0E3F,$1F1F
	dw $0000,$0000,$3033,$44D9,$555D,$3425
	dw $6D6F,$7E56,$0000,$0000,$0EE6,$1FAB
	dw $4BF7,$3425,$557F,$6A5F,$0000,$0000
	dw $4424,$58C9,$6D6D,$3425,$1FED,$4BF7
	dw $0000,$0000,$0192,$0258,$033F,$3425
	dw $0018,$017F,$0000,$0000,$0192,$0258
	dw $033F,$3425,$0226,$174C,$0000

;--------------------------------------------------------------------

DATA_26F779:
	db $04,$04,$04,$04,$FF

DATA_26F77E:
	db $00,$00,$00,$00

DATA_26F782:
	db $88,$89,$8A,$8B

DATA_26F786:
	db $20,$20,$20,$20

DATA_26F78A:
	db $04,$04,$04,$04,$FF

DATA_26F78F:
	db $00,$00,$00,$00,$07,$02,$08,$07
	db $09,$01,$09,$09,$0B,$FF,$0B,$0B

DATA_26F79F:
	db $00,$00,$00,$00,$00,$04,$08,$00
	db $FE,$04,$0A,$FE,$FD,$04,$0B,$FD

DATA_26F7AF:
	db $CC,$9E,$9E,$9E

DATA_26F7B3:
	db $22,$22,$22,$22

;--------------------------------------------------------------------

; Note: "ROUND" text OAM data.

if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR]
DATA_26F7B7: 								; Letters' X,Y positions
	db $5C,$80,$64,$80,$6C,$80,$74,$80,$7C,$80,$84,$80
	db $5C,$88,$64,$88,$6C,$88,$74,$88,$7C,$88,$84,$88

DATA_26F7CB: 								; X,Y positions for the smaller anim. frames
	db $5C,$84,$64,$84,$6C,$84,$74,$84,$7C,$84,$84,$84
	db $5C,$84,$64,$84,$6C,$84,$74,$84,$7C,$84,$84,$84

DATA_26F7DF:								; Letters' tiles and properties
	db $C0,$22,$A0,$22,$C4,$22,$C6,$22,$C4,$22,$C6,$22
	db $D0,$22,$B0,$22,$D4,$22,$D6,$22,$D4,$22,$D6,$22
.End:

DATA_26F7F3:								; Frames 2/4 tiles and properties
	db $C1,$22,$C1,$22,$C1,$22,$C1,$22,$C1,$22,$C1,$22
	db $D1,$22,$D1,$22,$D1,$22,$D1,$22,$D1,$22,$D1,$22
else
DATA_26F7B7: 								; Letters' X,Y positions
	db $60,$80,$68,$80,$70,$80,$78,$80,$80,$80
	db $60,$88,$68,$88,$70,$88,$78,$88,$80,$88

DATA_26F7CB: 								; X,Y positions for the smaller anim. frames
	db $60,$84,$68,$84,$70,$84,$78,$84,$80,$84
	db $60,$84,$68,$84,$70,$84,$78,$84,$80,$84

DATA_26F7DF:								; Letters' tiles and properties
	db $C0,$22,$A0,$22,$C2,$22,$C3,$22,$C4,$22
	db $D0,$22,$B0,$22,$D2,$22,$D3,$22,$D4,$22
.End:

DATA_26F7F3:								; Frames 2/4 tiles and properties
	db $C1,$22,$C1,$22,$C1,$22,$C1,$22,$C1,$22
	db $D1,$22,$D1,$22,$D1,$22,$D1,$22,$D1,$22
endif

DATA_26F807: 								; X,Y positions pointers
	dw DATA_26F7CB
	dw DATA_26F7CB
	dw DATA_26F7B7
	dw DATA_26F7B7
	dw DATA_26F7B7
	dw DATA_26F7CB
	dw DATA_26F7CB

DATA_26F815: 								; Tiles and properties pointers
	dw DATA_26FA12
	dw DATA_26FA2A
	dw DATA_26F7F3
	dw DATA_26F7DF
	dw DATA_26F7F3
	dw DATA_26FA2A
	dw DATA_26FA12

DATA_26F823: 								; Timer for each frame
	db $04,$04,$04,$70,$04,$04,$04

;--------------------------------------------------------------------

; Note: FINAL/PAUSE OAM data.

DATA_26F82A: 								; Letters' X,Y positions
	db $6C,$80,$74,$80,$7C,$80,$84,$80,$8C,$80
	db $6C,$88,$74,$88,$7C,$88,$84,$88,$8C,$88

DATA_26F83E:								; X,Y positions for the smaller anim. frames
	db $6C,$84,$74,$84,$7C,$84,$84,$84,$8C,$84
	db $6C,$84,$74,$84,$7C,$84,$84,$84,$8C,$84

DATA_26F852:								; "FINAL" tiles and properties
	db $45,$22,$C7,$22,$C3,$22,$C6,$22,$C9,$22
	db $55,$22,$D7,$22,$D3,$22,$D6,$22,$D9,$22
.End:

DATA_26F866:								;  Frames 2/4 tiles and properties
	db $C1,$22,$C1,$22,$C1,$22,$C1,$22,$C1,$22
	db $D1,$22,$D1,$22,$D1,$22,$D1,$22,$D1,$22

SMB3_BattleModePauseTextData_TileProp:
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR] PAUSE tiles and properties
	db $2D,$23,$C6,$22,$C2,$22,$2E,$23,$C6,$22
	db $3D,$23,$D6,$22,$D2,$22,$3E,$23,$D6,$22
else
	db $2D,$23,$C6,$22,$C2,$22,$2E,$23,$2F,$23
	db $3D,$23,$D6,$22,$D2,$22,$3E,$23,$3F,$23
endif

DATA_26F88E: 								; Tiles and properties pointers
	dw DATA_26FA12
	dw DATA_26FA2A
	dw DATA_26F866
	dw DATA_26F852
	dw DATA_26F866
	dw DATA_26FA2A
	dw DATA_26FA12

DATA_26F89C: 								; X,Y positions pointers
	dw DATA_26F83E
	dw DATA_26F83E
	dw DATA_26F82A
	dw DATA_26F82A
	dw DATA_26F82A
	dw DATA_26F83E
	dw DATA_26F83E

;--------------------------------------------------------------------

; Note: Round numbers OAM data.
; Because the game never gets to round 10, the tens data went unused.

DATA_26F8AA: 								; Tens' X,Y positions
	db $90,$80,$90,$88

DATA_26F8AE: 								; Tens' smaller frames X,Y positions
	db $90,$84,$90,$84

if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR]
DATA_26F8B2: 								; Ones' X,Y positions
	db $9C,$80,$9C,$88

DATA_26F8B6: 								; Ones' smaller frames X,Y positions
	db $9C,$84,$9C,$84
else
DATA_26F8B2: 								; Ones' X,Y positions
	db $98,$80,$98,$88

DATA_26F8B6: 								; Ones' smaller frames X,Y positions
	db $98,$84,$98,$84
endif

DATA_26F8BA: 								; 0 tiles and properties
	db $A0,$22,$B0,$22

DATA_26F8BE:								; 1-9 tiles and properties
	db $A1,$22,$B1,$22,$A2,$22,$B2,$22
	db $A3,$22,$B3,$22,$A4,$22,$B4,$22
	db $A5,$22,$B5,$22,$A6,$22,$B6,$22
	db $A7,$22,$B7,$22,$A8,$22,$B8,$22
	db $A9,$22,$B9,$22

DATA_26F8E2:								; Frames 2/4 tiles and properties
	db $C1,$22,$D1,$22

DATA_26F8E6: 								; Tens' X,Y positions pointers
	dw DATA_26F8AE
	dw DATA_26F8AE
	dw DATA_26F8AA
	dw DATA_26F8AA
	dw DATA_26F8AA
	dw DATA_26F8AE
	dw DATA_26F8AE

DATA_26F8F4: 								; Ones' X,Y positions pointers
	dw DATA_26F8B6
	dw DATA_26F8B6
	dw DATA_26F8B2
	dw DATA_26F8B2
	dw DATA_26F8B2
	dw DATA_26F8B6
	dw DATA_26F8B6

DATA_26F902: 								; Tiles and properties pointers
	dw DATA_26FA12
	dw DATA_26FA2A
	dw DATA_26F8E2
	dw DATA_26F8BE
	dw DATA_26F8E2
	dw DATA_26FA2A
	dw DATA_26FA12

;--------------------------------------------------------------------

; Note: Victory text OAM data.
DATA_26F910: 								; Player X,Y positions
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR]
	db $4C,$74,$54,$74,$5C,$74,$64,$74
	db $4C,$7C,$54,$7C,$5C,$7C,$64,$7C
	db $6C,$74,$6C,$7C
else
	db $58,$74,$60,$74,$68,$74,$70,$74
	db $58,$7C,$60,$7C,$68,$7C,$70,$7C
	db $78,$74,$78,$7C
endif
.End:	; 20 B

DATA_26F924:								; "MARIO" tiles and properties
	db $C5,$22,$C6,$22,$C0,$22,$C7,$22
	db $D5,$22,$D6,$22,$D0,$22,$D7,$22
	db $A0,$22,$B0,$22
.End:	; 20 B

DATA_26F938:								; "LUIGI" tiles and properties
	db $C9,$22,$C2,$22,$C7,$22,$CA,$22
	db $D9,$22,$D2,$22,$D7,$22,$DA,$22
	db $C7,$22,$D7,$22

if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000
DATA_26F94C: 								; "WIN!" X,Y positions
	db $7C,$74,$84,$74,$8C,$74,$94,$74,$9C,$74,$A4,$74,$AC,$74
	db $7C,$7C,$84,$7C,$8C,$7C,$94,$7C,$9C,$7C,$A4,$7C,$AC,$7C
.End:

DATA_26F95C:								; Player smaller frames X,Y positions
	db $4C,$78,$54,$78,$5C,$78,$64,$78
	db $6C,$78
.End:

DATA_26F966:								; "VENCEU!" Smaller frames X,Y positions
	db $7C,$78,$84,$78,$8C,$78,$94,$78,$9C,$78,$A4,$78,$AC,$78
.End:

DATA_26F96E: 								; "VENCEU!" tiles and properties
	db $2A,$23,$2F,$23,$C3,$22,$29,$23,$2F,$23,$C2,$22,$CB,$22
	db $3A,$23,$3F,$23,$D3,$22,$39,$23,$3F,$23,$D2,$22,$DB,$22

VENCEU_Frame2_TileProp:						; "VENCEU!" frame 2 tiles and properties
	db $C1,$22,$C1,$22,$C1,$22,$C1,$22,$C1,$22,$C1,$22,$C1,$22
	db $D1,$22,$D1,$22,$D1,$22,$D1,$22,$D1,$22,$D1,$22,$D1,$22

else
	DATA_26F94C: 								; "WIN!" X,Y positions
		db $88,$74,$90,$74,$98,$74,$A0,$74
		db $88,$7C,$90,$7C,$98,$7C,$A0,$7C
	.End:	; 16 B

	DATA_26F95C:								; Player smaller frames X,Y positions
		db $58,$78,$60,$78,$68,$78,$70,$78
		db $78,$78

	DATA_26F966:								; "WIN!" Smaller frames X,Y positions
		db $88,$78,$90,$78,$98,$78,$A0,$78

	DATA_26F96E: 								; "WIN!" tiles and properties
		db $C8,$22,$C7,$22,$C3,$22,$CB,$22
		db $D8,$22,$D7,$22,$D3,$22,$DB,$22
	.End:	; 16 B
endif

DATA_26F97E:								; Player frame 2 tiles and properties
	db $C1,$22,$C1,$22,$C1,$22,$C1,$22
	db $D1,$22,$D1,$22,$D1,$22,$D1,$22
	db $C1,$22,$D1,$22

DATA_26F992: 								; Tiles and properties pointers
	dw DATA_26FA12
	dw DATA_26FA2A
	dw DATA_26F97E
	dw DATA_26F924

;--------------------------------------------------------------------

; Note: OAM data related to the "5 GAMES TO WIN" text.

if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR]
DATA_26F99A: 								; Letters' X,Y positions
	db $48,$70,$50,$70,$58,$70,$60,$70,$68,$70,$78,$70
	db $88,$70,$90,$70,$98,$70,$A0,$70,$A8,$70,$B0,$70
	db $48,$78,$50,$78,$58,$78,$60,$78,$68,$78,$78,$78
	db $88,$78,$90,$78,$98,$78,$A0,$78,$A8,$78,$B0,$78
.End:

DATA_26F9CA: 								; X,Y positions for the smaller anim. frames
	db $48,$74,$50,$74,$58,$74,$60,$74,$68,$74,$78,$74
	db $88,$74,$90,$74,$98,$74,$A0,$74,$A8,$74,$B0,$74
.End:

DATA_26F9E2:								; Letters' tiles and properties
	db $2A,$23,$2F,$23,$C3,$22,$29,$23,$C6,$22,$A5,$22
	db $2A,$23,$2F,$23,$2B,$23,$2F,$23,$2E,$23,$CB,$22
	db $3A,$23,$3F,$23,$D3,$22,$38,$23,$D6,$22,$B5,$22
	db $3A,$23,$3F,$23,$3B,$23,$3F,$23,$3E,$23,$DB,$22
.End:
else
DATA_26F99A: 								; Letters' X,Y positions
	db $44,$70,$54,$70,$5C,$70,$64,$70,$6C,$70,$74,$70,$84,$70,$8C,$70
	db $9C,$70,$A4,$70,$AC,$70,$B4,$70
	db $44,$78,$54,$78,$5C,$78,$64,$78,$6C,$78,$74,$78,$84,$78,$8C,$78
	db $9C,$78,$A4,$78,$AC,$78,$B4,$78
.End:

DATA_26F9CA: 								; X,Y positions for the smaller anim. frames
	db $44,$74,$54,$74,$5C,$74,$64,$74,$6C,$74,$74,$74,$84,$74,$8C,$74
	db $9C,$74,$A4,$74,$AC,$74,$B4,$74
.End:

DATA_26F9E2:								; Letters' tiles and properties
	db $A5,$22,$CA,$22,$C6,$22,$C5,$22,$2F,$23,$2E,$23,$2C,$23,$A0,$22
	db $C8,$22,$C7,$22,$C3,$22,$CB,$22
	db $B5,$22,$DA,$22,$D6,$22,$D5,$22,$3F,$23,$3E,$23,$3C,$23,$B0,$22
	db $D8,$22,$D7,$22,$D3,$22,$DB,$22
.End:
endif

DATA_26FA12:								; Frames 0/6 tiles and properties
	db $44,$22,$44,$22,$44,$22,$44,$22,$44,$22,$44,$22,$44,$22,$44,$22
	db $44,$22,$44,$22,$44,$22,$44,$22

DATA_26FA2A:								; Frames 1/5 tiles and properties 
	db $54,$22,$54,$22,$54,$22,$54,$22,$54,$22,$54,$22,$54,$22,$54,$22
	db $54,$22,$54,$22,$54,$22,$54,$22

DATA_26FA42:								; Frames 2/4 tiles and properties 
	db $C1,$22,$C1,$22,$C1,$22,$C1,$22,$C1,$22,$C1,$22,$C1,$22,$C1,$22
	db $C1,$22,$C1,$22,$C1,$22,$C1,$22
	db $D1,$22,$D1,$22,$D1,$22,$D1,$22,$D1,$22,$D1,$22,$D1,$22,$D1,$22
	db $D1,$22,$D1,$22,$D1,$22,$D1,$22

DATA_26FA72: 								; Tiles and properties pointers
	dw DATA_26FA12
	dw DATA_26FA2A
	dw DATA_26FA42
	dw DATA_26F9E2
	dw DATA_26FA42
	dw DATA_26FA2A
	dw DATA_26FA12

DATA_26FA80: 								; Data size for each frame
	; dw $0030,$0030,$0060,$0060
	; dw $0060,$0030,$0030
	dw (DATA_26F9CA_End-DATA_26F9CA)*2
	dw (DATA_26F9CA_End-DATA_26F9CA)*2
	dw (DATA_26F9E2_End-DATA_26F9E2)*2
	dw (DATA_26F9E2_End-DATA_26F9E2)*2
	dw (DATA_26F9E2_End-DATA_26F9E2)*2
	dw (DATA_26F9CA_End-DATA_26F9CA)*2
	dw (DATA_26F9CA_End-DATA_26F9CA)*2

DATA_26FA8E: 								; Timer for each frame
	db $04,$04,$04,$D0,$04,$04,$04

DATA_26FA95: 								; X,Y positions pointers
	dw DATA_26F9CA
	dw DATA_26F9CA
	dw DATA_26F99A
	dw DATA_26F99A
	dw DATA_26F99A
	dw DATA_26F9CA
	dw DATA_26F9CA

;--------------------------------------------------------------------

if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
CODE_26FBCC:
	PHA
	LDA.b !RAM_SMB3_Global_FrameCounter
	BIT.b #$03
	BEQ.b CODE_26FBD6
	PLA
	BRA.b CODE_26FBD8

CODE_26FBD6:
	PLA
	INC
CODE_26FBD8:
	INC
	RTS

;--------------------------------------------------------------------

CODE_26FBDA:
	PHA
	LDA.b !RAM_SMB3_Global_FrameCounter
	BIT.b #$03
	BEQ.b CODE_26FBE4
	PLA
	BRA.b CODE_26FBE6

CODE_26FBE4:
	PLA
	DEC
CODE_26FBE6:
	DEC
	RTS

%FREE_BYTES(NULLROM, 1048, $FF)
elseif !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR]
%FREE_BYTES(NULLROM, 1373-80, $FF)
else
%FREE_BYTES(NULLROM, 1373, $FF)
endif
%BANK_END(<EndBank>)
endmacro

;#############################################################################################################
;#############################################################################################################

macro SMB3Bank27Macros(StartBank, EndBank)
%BANK_START(<StartBank>)
CODE_278000:
	LDA.w !RAM_SMB3_Level_IsVerticalLevelFlag
	BEQ.b CODE_278037
	LDA.w $052B
	LDY.w $052A
	JSL.l CODE_209F86
	STA.w $052B
	STY.w $052A
	LDA.w DATA_21823C,y
	STA.b $2E
	LDA.w DATA_21824C,y
	STA.b $2F
	LDA.w $052B
	AND.b #$F0
	STA.b $05
	LDA.w $0529
	LSR
	LSR
	LSR
	LSR
	ORA.b $05
	STA.b $04
	LDA.b #$00
	STA.b $06
	BEQ.b CODE_278073
CODE_278037:
	LDA.w $0528
	ASL
	TAX
	LDA.w DATA_218200,x
	STA.b $2E
	LDA.w DATA_218200+$01,x
	STA.b $2F
	STZ.b $06
	LDA.w $052A
	BEQ.b CODE_27804F
	INC.b $2F
CODE_27804F:
	LDA.w $052B
	AND.b #$F0
	STA.b $05
	LDA.w $0529
	LSR
	LSR
	LSR
	LSR
	ORA.b $05
	STA.b $04
	LDA.w $052A
	BNE.b CODE_27806F
	LDA.w $052B
	AND.b #$F0
	CMP.b #$F0
	BNE.b CODE_278073
CODE_27806F:
	LDA.b #$01
	STA.b $06
CODE_278073:
	LDA.w $0564
	BNE.b CODE_278079
	RTL

CODE_278079:
	JSR.w CODE_27807D
	RTL

CODE_27807D:
	JSL.l SMB3_ExecutePtr_Absolute

DATA_278081:
	dw CODE_278144
	dw CODE_2780B3
	dw CODE_2780B3
	dw CODE_2780B3
	dw CODE_2780B3
	dw CODE_2780B3
	dw CODE_2780B3
	dw CODE_2780B3
	dw CODE_2780B3
	dw CODE_2780B3
	dw CODE_2780B3
	dw CODE_2780B3
	dw CODE_2780B3
	dw CODE_2780B3
	dw CODE_2780B3
	dw CODE_2780B3
	dw CODE_2780B3
	dw CODE_2780B3
	dw CODE_2780B3
	dw CODE_278145
	dw CODE_2781B5
	dw CODE_278216
	dw CODE_278216
	dw CODE_278216
	dw CODE_278216

;--------------------------------------------------------------------

; Note: Something related to blocks updating after being hit.

CODE_2780B3:
	LDX.w $0564
	DEX
	LDY.b $04
	LDA.w DATA_2184E6,x
	STA.b [$2E],y
	TXA
	ASL
	ASL
	ASL
	TAX
	LDY.b #$00
CODE_2780C5:
	LDA.w DATA_2184F8,x
	STA.w $036E,y
	INX
	INY
	CPY.b #$08
	BNE.b CODE_2780C5
	LDA.b $05
	ASL
	ADC.b #$00
	ASL
	ADC.b #$00
	PHA
	AND.b #$0F
	LDY.b $06
	BEQ.b CODE_2780E7
	LDY.w $052A
	BEQ.b CODE_2780E7
	ORA.b #$08
CODE_2780E7:
	STA.w $036C
	LDA.w $0528
	LSR
	BCC.b CODE_2780F8
	LDA.w $036C
	ORA.b #$04
	STA.w $036C
CODE_2780F8:
	PLA
	AND.b #$F0
	STA.b $01
	LDA.w $0529
	LSR
	LSR
	LSR
	ORA.b $01
	STA.w $036D
	LDA.b #$00
	STA.w $0564
	LDA.w !RAM_SMB3_Level_IsVerticalLevelFlag
	BEQ.b CODE_278144
	REP.b #$20
	LDA.b $06
	PHA
	LDA.w $052A
	XBA
	AND.w #$FF00
	LSR
	LSR
	STA.b $06
	LDA.w $036C
	XBA
	SEC
	SBC.b $06
	AND.w #$0BFF
	XBA
	STA.w $036C
	PLA
	STA.b $06
	SEP.b #$20
	LDA.w $052A
	AND.b #$01
	BEQ.b CODE_278144
	LDA.w $036C
	EOR.b #$08
	STA.w $036C
CODE_278144:
	RTS

;--------------------------------------------------------------------

CODE_278145:
	LDA.b #$00
	STA.w $0564
	LDY.b $04
	LDA.b #$42
	STA.b [$2E],y
	TYA
	CLC
	ADC.b #$10
	TAY
	BCC.b CODE_278159
	INC.b $2F
CODE_278159:
	LDA.b #$42
	STA.b [$2E],y
	REP.b #$10
	LDY.w #$0000
	LDX.w !RAM_SMB3_Global_StripeImageUploadIndexLo
CODE_278165:
	LDA.w DATA_218588,y
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,x
	INX
	INY
	CPY.w #$000D
	BNE.b CODE_278165
	SEP.b #$10
	LDA.b $05
	ASL
	ADC.b #$00
	ASL
	ADC.b #$00
	PHA
	AND.b #$0F
	LDY.b $06
	BEQ.b CODE_278185
	ORA.b #$08
CODE_278185:
	REP.b #$10
	LDX.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,x
	STA.w SMB3_StripeImageUploadTable[$03].LowByte,x
	PLA
	AND.b #$F0
	STA.b $01
	LDA.w $0529
	LSR
	LSR
	LSR
	ORA.b $01
	STA.w SMB3_StripeImageUploadTable[$00].HighByte,x
	CLC
	ADC.b #$01
	STA.w SMB3_StripeImageUploadTable[$03].HighByte,x
	REP.b #$20
	LDA.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	CLC
	ADC.w #$000C
	STA.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	SEP.b #$30
	RTS

;--------------------------------------------------------------------

CODE_2781B5:
	LDA.b #$00
	STA.w $0564
	LDY.b $04
	LDA.b #$86
	STA.b [$2E],y
	INY
	LDA.b #$87
	STA.b [$2E],y
	LDX.b #$00
	LDY.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	REP.b #$20
CODE_2781CC:
	LDA.w DATA_218595,x
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,y
	INX
	INX
	INY
	INY
	CPX.b #$1A
	BNE.b CODE_2781CC
	SEP.b #$20
	LDX.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	LDA.b $05
	ASL
	ADC.b #$00
	ASL
	ADC.b #$00
	PHA
	AND.b #$0F
	LDY.b $06
	BEQ.b CODE_2781F0
	ORA.b #$08
CODE_2781F0:
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,x
	STA.w SMB3_StripeImageUploadTable[$06].LowByte,x
	PLA
	AND.b #$F0
	STA.b $01
	LDA.w $0529
	LSR
	LSR
	LSR
	ORA.b $01
	STA.w SMB3_StripeImageUploadTable[$00].HighByte,x
	CLC
	ADC.b #$20
	STA.w SMB3_StripeImageUploadTable[$06].HighByte,x
	LDA.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	CLC
	ADC.b #$1A
	STA.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	RTS

;--------------------------------------------------------------------

CODE_278216:
	LDX.b #$00
	LDA.w $0564
	CMP.b #$15
	BNE.b CODE_278229
	LDY.b $04
	LDA.b [$2E],y
	CMP.b #$96
	BEQ.b CODE_27822F
	BNE.b CODE_27822E								; Note: This will always branch

CODE_278229:
	SEC
	SBC.b #$16
	TAX
	INX
CODE_27822E:
	INX
CODE_27822F:
	LDY.w DATA_2185AF,x
	STX.b $0A
	REP.b #$30
	TYA
	AND.w #$00FF
	TAY
	SEP.b #$20
	LDX.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	LDA.b #$31
	STA.b $00
CODE_278244:
	LDA.w DATA_2185B4,y
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,x
	INX
	INY
	DEC.b $00
	BNE.b CODE_278244
	SEP.b #$10
	LDA.b $0A
	ASL
	ASL
	STA.b $0A
	LDA.b #$00
	STA.b $02
CODE_27825C:
	LDA.b $04
	AND.b #$F0
	LDY.b $06
	BEQ.b CODE_278267
	CLC
	ADC.b #$10
CODE_278267:
	STA.b $05
	LDA.b $04
	AND.b #$0F
	ASL
	STA.b $07
	LDA.b $05
	ASL
	ADC.b #$00
	ASL
	ADC.b #$00
	PHA
	AND.b #$03
	LDY.b $06
	BEQ.b CODE_278281
	ORA.b #$08
CODE_278281:
	STA.b $08
	LDA.w $0528
	LSR
	BCC.b CODE_27828F
	LDA.b $08
	ORA.b #$04
	STA.b $08
CODE_27828F:
	LDX.b #$00
	LDA.b $02
	BEQ.b CODE_278297
	LDX.b #$18
CODE_278297:
	REP.b #$30
	TXA
	AND.w #$00FF
	CLC
	ADC.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	TAX
	SEP.b #$20
	PLA
	AND.b #$F0
	ORA.b $07
	PHA
	LDA.b $08
	AND.b #$08
	BEQ.b CODE_2782CA
	PLA
	CMP.b #$40
	BCS.b CODE_2782C5
	PHA
	DEC.b $08
	LDA.b $08
	AND.b #$08
	BNE.b CODE_2782C4
	LDA.b $08
	AND.b #$03
	STA.b $08
CODE_2782C4:
	PLA
CODE_2782C5:
	SEC
	SBC.b #$40
	BRA.b CODE_2782CB

CODE_2782CA:
	PLA
CODE_2782CB:
	STA.b $03
	STA.w SMB3_StripeImageUploadTable[$00].HighByte,x
	CLC
	ADC.b #$20
	STA.w SMB3_StripeImageUploadTable[$06].HighByte,x
	LDA.b $08
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,x
	STA.w SMB3_StripeImageUploadTable[$06].LowByte,x
	SEP.b #$10
	LDY.b $04
	LDX.b $0A
	LDA.w DATA_2186AB,x
	STA.b [$2E],y
	INY
	LDA.w DATA_2186AB+$01,x
	STA.b [$2E],y
	LDA.b $04
	CLC
	ADC.b #$10
	STA.b $04
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	INC.b $0A
	INC.b $0A
	INC.b $02
	LDA.b $02
	CMP.b #$02
	BEQ.b CODE_27830B
	JMP.w CODE_27825C

CODE_27830B:
	REP.b #$20
	LDA.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	CLC
	ADC.w #$0030
	STA.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	SEP.b #$20
	STZ.w $0564
	INC.w $037B
	RTS

;--------------------------------------------------------------------

; Todo: Unreferrenced routine.

CODE_278320:
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$07
	BNE.b CODE_278357
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$18
	LSR
	TAX
	LDY.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	LDA.b #$3F
	STA.w SMB3_StripeImageUploadTable[$00].HighByte-$02,y								; Todo: Not sure what RAM_SMB3_Misc_StripeImageUploadIndexLo is normally when getting to here, but I doubt it's #$0000.
	LDA.b #$04
	STA.w SMB3_StripeImageUploadTable[$01].LowByte-$02,y
	STA.w SMB3_StripeImageUploadTable[$01].HighByte-$02,y
CODE_27833C:
	LDA.w DATA_2186BF,x
	STA.w SMB3_StripeImageUploadTable[$02].LowByte-$02,y
	INY
	INX
	TXA
	AND.b #$03
	BNE.b CODE_27833C
	LDA.b #$00
	STA.w SMB3_StripeImageUploadTable[$02].LowByte-$02,y
	LDA.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	CLC
	ADC.b #$07
	STA.w !RAM_SMB3_Global_StripeImageUploadIndexLo
CODE_278357:
	RTS

%FREE_BYTES(NULLROM, 424, $FF)

;--------------------------------------------------------------------

CODE_278500:
	LDA.w !RAM_SMB3_Level_Player_SmokePuffAnimationTimer
	ORA.w !RAM_SMB3_Level_Player_SizeChangeAnimationTimer
	ORA.b $9C
	BEQ.b CODE_278517
	LDA.w !RAM_SMB3_Level_ScrollSpr_HorizontalAutoScrollType
	CMP.b #$13
	BCC.b CODE_278516
	LDA.b #$80
	STA.w !RAM_SMB3_Level_FreezeTimeLimitFlag
CODE_278516:
	RTL

CODE_278517:
	STA.w !RAM_SMB3_Level_FreezeTimeLimitFlag
	LDA.w $1A09
	BEQ.b CODE_278522
	DEC.w $1A09
CODE_278522:
	JSR.w CODE_278526
	RTL

CODE_278526:
	LDA.w !RAM_SMB3_Level_ScrollSpr_SpriteID
	JSL.l SMB3_ExecutePtr_Absolute

DATA_27852D:
	dw CODE_27855A
	dw CODE_27855A
	dw CODE_27888F						; Diagonal autoscroll from 5-9
	dw CODE_27876F						; Layer 1 piece that moves up/down, intends to crush (ex. World 1 fortress)
	dw CODE_278723						; Scroll layer 1 piece down (ex. World 6 fortress 3)
	dw CODE_27882D						; Layer 1 that scrolls up/down

;--------------------------------------------------------------------

CODE_278539:
	DEC.w $1A67
	BPL.b CODE_278559
	LDA.b #$05
	STA.w $1A67
	INC.w $1A66
	LDA.w $1A66
	CMP.b #$06
	BCC.b CODE_278552
	LDA.b #$00
	STA.w $1A66
CODE_278552:
	TAY
	LDA.w DATA_2184BE,y
	STA.w $07C9
CODE_278559:
	RTS

;--------------------------------------------------------------------

CODE_27855A:
	LDX.b #$00
	JSR.w CODE_278922
	LDA.w !RAM_SMB3_Level_ScrollSpr_HorizontalAutoScrollType
	CMP.b #$11
	BNE.b CODE_27856B
	PHA
	JSR.w CODE_278539
	PLA
CODE_27856B:
	CMP.b #$0E
	BNE.b CODE_278572
	JSR.w CODE_27886A
CODE_278572:
	JSR.w CODE_278697
	LDA.w $1A09
	LSR
	BCS.b CODE_2785B9
	PHA
	JSR.w CODE_278920
	PLA
	BNE.b CODE_2785B9
	LDA.w $1A08
	BEQ.b CODE_27858A
	JMP.w CODE_278614

CODE_27858A:
	LDA.w $1A05
	BNE.b CODE_2785E8
CODE_27858F:
	STX.b $DA
	LDX.w !RAM_SMB3_Level_ScrollSpr_HorizontalAutoScrollType
	LDA.w !RAM_SMB3_Level_ScrollSpr_MovementIndex
	CMP.l DATA_27AA5F+$01,x
	PHP
	TXY
	LDX.b $DA
	PLP
	BNE.b CODE_2785C4
	CPY.b #$13
	BCC.b CODE_2785A9
	ROR.w !RAM_SMB3_Level_FreezeTimeLimitFlag
CODE_2785A9:
	LDA.b #$00
	STA.w !RAM_SMB3_Level_AutoscrollLayerXSpeed
	LDA.w DATA_21825C,y
	BNE.b CODE_2785BA
	STA.w !RAM_SMB3_Level_AutoscrollLayerYSpeed
	STA.w !RAM_SMB3_Level_AutoscrollLayerSubXPos
CODE_2785B9:
	RTS

CODE_2785BA:
	STA.w $1A04
	LDA.b #$FF
	STA.w $1A05
	BNE.b CODE_2785DF
CODE_2785C4:
	INC.w !RAM_SMB3_Level_ScrollSpr_MovementIndex
	LDY.w !RAM_SMB3_Level_ScrollSpr_MovementIndex
	LDA.w SMB3_AutoScrollMovementsTable,y
	LSR
	LSR
	LSR
	LSR
	BEQ.b CODE_27860E
	STA.w $1A04
	LDY.w !RAM_SMB3_Level_ScrollSpr_MovementIndex
	LDA.w SMB3_AutoScrollMovementRepeatTable,y
	STA.w $1A05
CODE_2785DF:
	LDY.w $1A04
	LDA.w DATA_218458,y
	STA.w $1A06
CODE_2785E8:
	LDY.w $1A04
	LDA.w $1A06
	CMP.w DATA_218458+$01,y
	BNE.b CODE_278603
	LDA.w DATA_218458,y
	STA.w $1A06
	LDA.w $1A05
	BMI.b CODE_278603
	DEC.w $1A05
	BEQ.b CODE_27858F
CODE_278603:
	INC.w $1A06
	LDY.w $1A06
	LDA.w DATA_218490,y
	BNE.b CODE_278611
CODE_27860E:
	LDA.w SMB3_AutoScrollMovementRepeatTable,y
CODE_278611:
	STA.w $1A08
CODE_278614:
	DEC.w $1A08
	LDA.w $1A05
	BEQ.b CODE_278624
	LDY.w $1A06
	LDA.w DATA_218462,y
	BPL.b CODE_27862A
CODE_278624:
	LDY.w !RAM_SMB3_Level_ScrollSpr_MovementIndex
	LDA.w SMB3_AutoScrollMovementsTable,y
CODE_27862A:
	PHA
	LSR
	LSR
	AND.b #$03
	TAY
	LDA.w DATA_21844D,y
	CLC
	ADC.w !RAM_SMB3_Level_AutoscrollLayerXSpeed
	STA.w !RAM_SMB3_Level_AutoscrollLayerXSpeed
	PLA
	AND.b #$03
	TAY
	LDA.w DATA_21844D,y
	CLC
	ADC.w !RAM_SMB3_Level_AutoscrollLayerYSpeed
	STA.w !RAM_SMB3_Level_AutoscrollLayerYSpeed
	LDA.b #$04
	STA.w $1A09
	LDA.w !RAM_SMB3_Level_Layer3BGFromHeader
	CMP.b #$03
	BNE.b CODE_278659
	LDX.w !RAM_SMB3_Global_CurrentWorld
	BRA.b CODE_278660

CODE_278659:
	LDX.b #$08
	CMP.b #$04
	BEQ.b CODE_278660
	RTS

CODE_278660:
	LDA.w $0351
	INC
	INC
	CMP.w DATA_218450,x
	BCC.b CODE_27866D
	AND.w DATA_218450,x
CODE_27866D:
	STA.w $0351
	LDA.w $0350
	CMP.b #$23
	BEQ.b CODE_27867B
	JSL.l CODE_29D356
CODE_27867B:
	REP.b #$20
	LDA.w $0212
	STA.w !RAM_SMB3_Level_AirshipLayer3BGParallaxRow4XPosLo
	LSR
	STA.w !RAM_SMB3_Level_AirshipLayer3BGParallaxRow3XPosLo
	LSR
	STA.w !RAM_SMB3_Level_AirshipLayer3BGParallaxRow2XPosLo
	LSR
	STA.w !RAM_SMB3_Level_AirshipLayer3BGParallaxRow1XPosLo
	SEP.b #$20
	LDA.b #$07
	STA.w $0427
	RTS

CODE_278697:
	LDA.b #$01
	STA.w $05FC
	LDY.b $A6
	BNE.b CODE_2786BC
	LDA.w !RAM_SMB3_Level_ScrollSpr_HorizontalAutoScrollType
	CMP.b #$13
	BCC.b CODE_2786B8
	LDA.b #$04
	STA.w $0427
	LDA.b !RAM_SMB3_Level_Player_YPosHi
	CMP.b #$01
	BNE.b CODE_2786B8
	LDA.b !RAM_SMB3_Level_Player_YPosLo
	CMP.b #$70
	BCS.b CODE_2786B9
CODE_2786B8:
	INY
CODE_2786B9:
	STY.w $1A14
CODE_2786BC:
	LDA.b #$0F
	SEC
	SBC.b !RAM_SMB3_Level_Player_OnScreenXPos
	BCS.b CODE_2786CA
	LDA.b !RAM_SMB3_Level_Player_OnScreenXPos
	SEC
	SBC.b #$E0
	BCC.b CODE_2786E5
CODE_2786CA:
	LDA.w !RAM_SMB3_Level_AutoscrollLayerXSpeed
	EOR.b !RAM_SMB3_Level_Player_XSpeed
	BMI.b CODE_2786D4
	STZ.w $074E
CODE_2786D4:
	LDA.w !RAM_SMB3_Level_AutoscrollLayerXSpeed
	CLC
	SBC.b !RAM_SMB3_Level_Player_XSpeed
	EOR.b !RAM_SMB3_Level_Player_OnScreenXPos
	BMI.b CODE_2786F6
	LDA.w !RAM_SMB3_Level_AutoscrollLayerXSpeed
	STA.b !RAM_SMB3_Level_Player_XSpeed
	BRA.b CODE_2786F6

CODE_2786E5:
	LDA.w $1A14
	BNE.b CODE_2786F6
	LDA.b !RAM_SMB3_Level_Player_XPosLo
	CLC
	ADC.w $1A12
	STA.b !RAM_SMB3_Level_Player_XPosLo
	BCC.b CODE_2786F6
	INC.b $43
CODE_2786F6:
	LDA.w !RAM_SMB3_Level_AutoscrollLayerXSpeed
	ASL
	ROL
	AND.b #$01
	STA.w $1A07
	LDA.b !RAM_SMB3_Level_Player_XSpeed
	BEQ.b CODE_278722
	EOR.w !RAM_SMB3_Level_AutoscrollLayerXSpeed
	BMI.b CODE_278722
	LDY.b #$00
	LDA.w $1A12
	BEQ.b CODE_278722
	BPL.b CODE_278713
	DEY
CODE_278713:
	CLC
	ADC.b !RAM_SMB3_Level_Player_XPosLo
	STA.b !RAM_SMB3_Level_Player_XPosLo
	TYA
	ADC.b $43
	STA.b $43
	LDA.b #$00
	STA.w $074E
CODE_278722:
	RTS

;--------------------------------------------------------------------

CODE_278723:
	LDA.w $1A04
	BNE.b CODE_27873C
	LDA.w $0216
	CMP.b #$EF
	BNE.b CODE_278722
	LDA.w $0216
	STA.w !RAM_SMB3_Level_AutoscrollLayerYPosLo
	INC.w $1A04
	LDA.b #$20
	BNE.b CODE_278756
CODE_27873C:
	LDA.w $1A09
	BEQ.b CODE_278744
	JMP.w CODE_2787B8

CODE_278744:
	LDA.w !RAM_SMB3_Level_AutoscrollLayerYPosLo
	CMP.b #$0D
	BEQ.b CODE_27876C
	CMP.b #$0F
	BNE.b CODE_278759
	LDA.b #!Define_SMAS_Sound0063_BulletShoot
	STA.w !RAM_SMB3_Global_SoundCh3
	LDA.b #$20
CODE_278756:
	STA.w $1A09
CODE_278759:
	JSR.w CODE_278920
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$07
	BNE.b CODE_27876C
	LDA.w !RAM_SMB3_Level_AutoscrollLayerYSpeed
	CMP.b #$F8
	BEQ.b CODE_27876C
	DEC.w !RAM_SMB3_Level_AutoscrollLayerYSpeed
CODE_27876C:
	JMP.w CODE_2787C0

;--------------------------------------------------------------------

CODE_27876F:
	LDA.w $1A09
	BNE.b CODE_2787B8
	JSR.w CODE_278920
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$07
	BNE.b CODE_27878F
	LDY.w !RAM_SMB3_Level_ScrollSpr_ScrollDirection
	LDA.w !RAM_SMB3_Level_AutoscrollLayerYSpeed
	CMP.w DATA_2184C8,y
	BEQ.b CODE_27878F
	CLC
	ADC.w DATA_2184C6,y
	STA.w !RAM_SMB3_Level_AutoscrollLayerYSpeed
CODE_27878F:
	LDA.w !RAM_SMB3_Level_ScrollSpr_HorizontalAutoScrollType
	ASL
	ORA.w !RAM_SMB3_Level_ScrollSpr_ScrollDirection
	TAY
	LDA.w !RAM_SMB3_Level_AutoscrollLayerYPosLo
	CMP.w DATA_2184CA,y
	BNE.b CODE_2787C0
	LDA.b #$00
	STA.w !RAM_SMB3_Level_AutoscrollLayerYSpeed
	LDA.w !RAM_SMB3_Level_ScrollSpr_ScrollDirection
	EOR.b #$01
	STA.w !RAM_SMB3_Level_ScrollSpr_ScrollDirection
	BEQ.b CODE_2787B3
	LDA.b #!Define_SMAS_Sound0063_BulletShoot
	STA.w !RAM_SMB3_Global_SoundCh3
CODE_2787B3:
	LDA.b #$20
	STA.w $1A09
CODE_2787B8:
	AND.b #$01
	EOR.w !RAM_SMB3_Level_AutoscrollLayerYPosLo
	STA.w !RAM_SMB3_Level_AutoscrollLayerYPosLo
CODE_2787C0:
	LDA.b #$01
	STA.w $058B
	LDA.b #$81
CODE_2787C7:
	STA.w $0427
	LDA.b #$06
	LDY.b !RAM_SMB3_Level_Player_CurrentPowerUp
	BNE.b CODE_2787D2
	LDA.b #$12
CODE_2787D2:
	ADC.b !RAM_SMB3_Level_Player_YPosLo
	AND.b #$F0
	STA.b $08
	LDA.b !RAM_SMB3_Level_Player_YPosHi
	ADC.b #$00
	AND.b #$01
	STA.b $02
	LDA.b !RAM_SMB3_Level_Player_XPosLo
	CLC
	ADC.b #$08
	STA.b $09
	LDA.b !RAM_SMB3_Level_Player_XPosHi
	ADC.b #$00
	ASL
	TAY
	LDA.w DATA_218200,y
	STA.b $00
	LDA.w DATA_218200+$01,y
	CLC
	ADC.b $02
	STA.b $01
	LDA.b $09
	LSR
	LSR
	LSR
	LSR
	ORA.b $08
	TAY
	LDA.b #$7E2000>>16
	STA.b $02
	LDA.b [$00],y
	STA.b $00
	LDY.w $0560
	LDA.w DATA_21AF56,y
	CMP.b $00
	BEQ.b CODE_278823
	LDA.w SMB3_SpikeMap16TilePerTileset,y
	CMP.b #$FF
	BEQ.b CODE_278827
	SEC
	SBC.b $00
	CMP.b #$02
	BCS.b CODE_278827
CODE_278823:
	JSL.l CODE_27A4C7
CODE_278827:
	LDA.b #$81
	STA.w $05FC
	RTS

;--------------------------------------------------------------------

CODE_27882D:
	JSR.w CODE_278920
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$07
	BNE.b CODE_278848
	LDY.w !RAM_SMB3_Level_ScrollSpr_ScrollDirection
	LDA.w !RAM_SMB3_Level_AutoscrollLayerYSpeed
	CMP.w DATA_2184CE,y
	BEQ.b CODE_278848
	CLC
	ADC.w DATA_2184C6,y
	STA.w !RAM_SMB3_Level_AutoscrollLayerYSpeed
CODE_278848:
	LDA.w !RAM_SMB3_Level_ScrollSpr_HorizontalAutoScrollType
	ASL
	ORA.w !RAM_SMB3_Level_ScrollSpr_ScrollDirection
	TAY
	LDA.w !RAM_SMB3_Level_AutoscrollLayerYPosLo
	CMP.w DATA_2184D0,y
	BNE.b CODE_278860
	LDA.w !RAM_SMB3_Level_ScrollSpr_ScrollDirection
	EOR.b #$01
	STA.w !RAM_SMB3_Level_ScrollSpr_ScrollDirection
CODE_278860:
	LDA.w !RAM_SMB3_Level_ScrollSpr_HorizontalAutoScrollType
	CMP.b #$04
	BCC.b CODE_27886A
	JMP.w CODE_2787C0

CODE_27886A:
	LDY.b #$00
	LDA.b #$00
	JSR.w CODE_2787C7
	LDA.w !RAM_SMB3_Level_Player_IsAboveTopOfLevelFlag
	BNE.b CODE_27888E
	TAY
	LDA.w !RAM_SMB3_Level_Player_DuckingFlag
	BNE.b CODE_278881
	LDA.b !RAM_SMB3_Level_Player_CurrentPowerUp
	BEQ.b CODE_278881
	INY
CODE_278881:
	LDA.b !RAM_SMB3_Level_Player_OnScreenYPos
	CMP.w DATA_2184C4,y
	TAY
	ROR
	CPY.b #$80
	ROR
	STA.w $0584
CODE_27888E:
	RTS

;--------------------------------------------------------------------

CODE_27888F:
	INC.w $1A13
	LDA.b #$00
	STA.w !RAM_SMB3_Level_AutoscrollLayerXSpeed
	STA.w $1A12
	LDA.w $1A04
	CMP.b #$05
	BCS.b CODE_278918
	REP.b #$20
	LDA.w $0565
	AND.w #$0003
	BNE.b CODE_2788AE
	INC.w $02CE
CODE_2788AE:
	LDA.w $0565
	AND.w #$0003
	BNE.b CODE_2788B9
	DEC.w $02CC
CODE_2788B9:
	SEP.b #$20
	LDA.b #$08
	STA.w !RAM_SMB3_Level_AutoscrollLayerXSpeed
	LDA.b #$F8
	STA.w !RAM_SMB3_Level_AutoscrollLayerYSpeed
	LDA.w $1A13
	LSR
	BCC.b CODE_2788CE
	INC.w $1A12
CODE_2788CE:
	LDA.w $05FF
	BNE.b CODE_2788EC
	BCC.b CODE_27891D
	INC.w !RAM_SMB3_Level_AutoscrollLayerXPosLo
	BNE.b CODE_2788DD
	INC.w !RAM_SMB3_Level_AutoscrollLayerXPosHi
CODE_2788DD:
	LDA.w !RAM_SMB3_Level_AutoscrollLayerYPosLo
	BNE.b CODE_2788E7
	INC.w $1A04
	BNE.b CODE_278910
CODE_2788E7:
	DEC.w !RAM_SMB3_Level_AutoscrollLayerYPosLo
	BCS.b CODE_27891D
CODE_2788EC:
	LSR
	LSR
	LDA.w $1A04
	ROL
	TAY
	LDA.w !RAM_SMB3_Level_AutoscrollLayerXPosLo
	CLC
	ADC.b #$04
	STA.w !RAM_SMB3_Level_AutoscrollLayerXPosLo
	BCC.b CODE_278901
	INC.w !RAM_SMB3_Level_AutoscrollLayerXPosHi
CODE_278901:
	AND.b #$F0
	CMP.w DATA_2184DC,y
	BNE.b CODE_27891D
	STA.w !RAM_SMB3_Level_AutoscrollLayerXPosLo
	LDA.b #$EF
	STA.w !RAM_SMB3_Level_AutoscrollLayerYPosLo
CODE_278910:
	LDY.w $05FF
	INY
	CPY.b #$04
	BCC.b CODE_27891A
CODE_278918:
	LDY.b #$00
CODE_27891A:
	STY.w $05FF
CODE_27891D:
	JMP.w CODE_278697

;--------------------------------------------------------------------

CODE_278920:
	LDX.b #$01
CODE_278922:
	LDA.w !RAM_SMB3_Level_AutoscrollLayerXSpeed,x
	ASL
	ASL
	ASL
	ASL
	CLC
	ADC.w !RAM_SMB3_Level_AutoscrollLayerSubXPos,x
	STA.w !RAM_SMB3_Level_AutoscrollLayerSubXPos,x
	PHP
	PHP
	LDY.b #$00
	LDA.w !RAM_SMB3_Level_AutoscrollLayerXSpeed,x
	LSR
	LSR
	LSR
	LSR
	CMP.b #$08
	BCC.b CODE_278942
	ORA.b #$F0
	DEY
CODE_278942:
	PLP
	PHA
	ADC.w !RAM_SMB3_Level_AutoscrollLayerXPosLo,x
	STA.w !RAM_SMB3_Level_AutoscrollLayerXPosLo,x
	TYA
	ADC.w !RAM_SMB3_Level_AutoscrollLayerXPosHi,x
	STA.w !RAM_SMB3_Level_AutoscrollLayerXPosHi,x
	PLA
	PLP
	ADC.b #$00
	STA.w $1A12
	RTS

%FREE_BYTES(NULLROM, 167, $FF)

;--------------------------------------------------------------------

CODE_278A00:
	LDA.b !RAM_SMB3_Global_ControllerHold1
	AND.b #(!Joypad_DPadL>>8)|(!Joypad_DPadR>>8)
	TAY
	LDA.w DATA_21AF6B,y
	STA.b $8B
	LDA.b !RAM_SMB3_Global_ControllerHold1
	LSR
	LSR
	AND.b #((!Joypad_DPadU>>8)|(!Joypad_DPadD>>8))>>2
	TAY
	LDA.w DATA_21AF6B,y
	STA.b !RAM_SMB3_Level_Player_YSpeed
	RTS

;--------------------------------------------------------------------

CODE_278A17:
	REP.b #$20
	LDA.w $02E3
	BEQ.b CODE_278A61
	CMP.w #$0010
	BEQ.b CODE_278A28
	DEC.w $02E3
	BRA.b CODE_278A61

CODE_278A28:
	SEP.b #$20
	LDY.b #$01
	LDA.w !RAM_SMB3_Level_TimerHundreds
	ORA.w !RAM_SMB3_Level_TimerTens
	BNE.b CODE_278A35
	INY
CODE_278A35:
	ORA.w !RAM_SMB3_Level_TimerOnes
	BEQ.b CODE_278A64
	TYA
	TAX
	LDA.w DATA_21AF8B,x
	STA.w !RAM_SMB3_Global_PointsToGiveLo
CODE_278A42:
	DEC.w !RAM_SMB3_Level_TimerHundreds,x
	BPL.b CODE_278A4F
	LDA.b #$09
	STA.w !RAM_SMB3_Level_TimerHundreds,x
	DEX
	BPL.b CODE_278A42
CODE_278A4F:
	LDX.b $9B
	LDA.w !REGISTER_APUPort3
	AND.b #$7F
	CMP.b #!Define_SMAS_Sound0063_AddTimerToScore
	BEQ.b CODE_278A5F
	LDA.b #!Define_SMAS_Sound0063_AddTimerToScore
	STA.w !RAM_SMB3_Global_SoundCh3
CODE_278A5F:
	LDA.b #$01
CODE_278A61:
	SEP.b #$20
	RTL

CODE_278A64:
	LDA.b #!Define_SMAS_Sound0063_FinishAddTimerToScore
	STA.w !RAM_SMB3_Global_SoundCh3
	LDA.b #$00
	STA.w $02E3
	STA.w $02E4
	RTL

;--------------------------------------------------------------------

SMB3_FindFreeExtendedSpriteSlot:
.FixedPriority:
;$278A72
	LDY.b #$05
.VariablePriority:
-:
	LDA.w !RAM_SMB3_Level_ExtSpr_SpriteID,y
	BEQ.b CODE_278A7E
	DEY
	BPL.b -
CODE_278A7C:
	SEC
	RTL

CODE_278A7E:
	JSL.l SMB3_CheckIfNormalSpriteOffScreen_Main
	BNE.b CODE_278A7C
	CLC
	RTL

;--------------------------------------------------------------------

CODE_278A86:
	PHA
	TYA
	TAX
	PLA
CODE_278A8A:
	CLC
	ADC.b #$05
	JSL.l CODE_278A94
	LDX.b $9B
	RTL

CODE_278A94:
	PHA
	STY.b $0E
	JSR.w CODE_278ADB
	PLA
	STA.w $079F,y
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	XBA
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	REP.b #$20
	SEC
	SBC.w $0216
	SEC
	SBC.w #$0010
	BPL.b CODE_278AB2
	LDA.w #$0005
CODE_278AB2:
	CMP.w #$00C0
	BCC.b CODE_278ABA
	LDA.w #$00C0
CODE_278ABA:
	SEP.b #$20
	STA.w $07A9,y
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	XBA
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	REP.b #$20
	SEC
	SBC.w $0210
	SEP.b #$20
	STA.w $07AE,y
	XBA
	STA.w $0251,y
	LDA.b #$30
	STA.w $07A4,y
	LDY.b $0E
	RTL

;--------------------------------------------------------------------

CODE_278ADB:
	LDY.b #$04
CODE_278ADD:
	LDA.w $079F,y
	BEQ.b CODE_278AE7
	DEY
	BPL.b CODE_278ADD
	LDY.b #$04
CODE_278AE7:
	RTS

;--------------------------------------------------------------------

; Note: Routine related to hitting a block from below.

CODE_278AE8:
	LDY.b #$03
CODE_278AEA:
	LDA.w !RAM_SMB3_CoinSpr_SpriteExitsFlag,y
	BEQ.b CODE_278AF4
	DEY
	BPL.b CODE_278AEA
	LDY.b #$03
CODE_278AF4:
	LDA.b #!Define_SMAS_Sound0063_Coin
	STA.w !RAM_SMB3_Global_SoundCh3
	LDA.b #$01
	STA.w !RAM_SMB3_CoinSpr_SpriteExitsFlag,y
	LDA.b $00
	SEC
	SBC.w $0543
	SBC.b #$18
	STA.w !RAM_SMB3_CoinSpr_YPosLo,y
	LDA.b $0E
	XBA
	LDA.b $01
	REP.b #$20
	SEC
	SBC.w $0210
	SEP.b #$20
	STA.w !RAM_SMB3_CoinSpr_XPosLo,y
	XBA
	STA.w !RAM_SMB3_CoinSpr_XPosHi,y
	LDA.b #$FB
	STA.w !RAM_SMB3_CoinSpr_YSpeed,y
	LDA.b #$01
	STA.w !RAM_SMB3_CoinSpr_AnimationFrameCounter,y
	RTL

;--------------------------------------------------------------------

CODE_278B28:
	LDA.b $A7,x
	AND.b #$03
	BNE.b CODE_278B47
	LDA.w $1F76
	SEC
	SBC.b #$34
	CMP.b #$02
	BCS.b CODE_278B47
	TAY
	LDA.b $5F,x
	ADC.w DATA_21AF8E,y
	STA.b $5F,x
	LDA.b $44,x
	ADC.w DATA_21AF90,y
	STA.b $44,x
CODE_278B47:
	RTL

;--------------------------------------------------------------------

CODE_278B48:
	LDA.w !RAM_SMB3_Level_PSwitchTimer
	BNE.b CODE_278B47
	LDA.w $1F76
	SEC
	SBC.b #$34
	CMP.b #$02
	BCS.b CODE_278B47
	TAY
	LDA.w DATA_21AF8E,y
	LDY.b #$FF
	EOR.b $8C,x
	BMI.b CODE_278B63
	LDY.b #$01
CODE_278B63:
	STY.w $07B5
	RTL

;--------------------------------------------------------------------

CODE_278B67:
	LDA.b $A7,x
	BPL.b CODE_278B84
	LDA.b $71,x
	SEC
	SBC.w $0543
	AND.b #$F0
	CLC
	ADC.b #$01
	CLC
	ADC.w $0543
	STA.b $71,x
	LDA.b #$00
	ADC.b #$00
	STA.b $56,x
	BRA.b CODE_278B8E

CODE_278B84:
	LDA.b $71,x
	AND.b #$F0
	CLC
	ADC.w $06B3
	STA.b $71,x
CODE_278B8E:
	LDA.b #$00
	STA.b $9E,x
	RTL

;--------------------------------------------------------------------

; Note: Routine that handles normal sprite level collision?

CODE_278B93:
	LDA.b #$FF
	BNE.b CODE_278B9D				; Note: This will always branch

CODE_278B97:
	LDA.b #$08
	BNE.b CODE_278B9D				; Note: This will always branch

CODE_278B9B:
	LDA.b #$04
CODE_278B9D:
	PHA
	CPX.b #$05
	BNE.b CODE_278BAA
	LDA.w $1A4F,x
	BEQ.b CODE_278BAA
	DEC.w $1A4F,x
CODE_278BAA:
	LDA.b $A7,x
	STA.w $1CEF
	LDA.b #$00
	STA.b $A7,x
	STA.w $06B3
	STA.w $07B5
	JSL.l CODE_278CF3
	PLA
	STA.b $00
	LDY.w $064F
	LDA.w $064C
	CMP.w !RAM_SMB3_Global_Map16WallTileAttributeTable,y
	BCC.b CODE_278BD6
	LDA.b #$01
	LDY.b $8C,x
	BPL.b CODE_278BD2
	ASL
CODE_278BD2:
	ORA.b $A7,x
	STA.b $A7,x
CODE_278BD6:
	LDY.w $064E
	LDA.b $9E,x
	BPL.b CODE_278BFB
	LDA.w $0563
	BEQ.b CODE_278BEC
	LDA.w $064B
	CMP.w !RAM_SMB3_Global_Map16FloorTileAttributeTable,y
	BCC.b CODE_278BFA
	BCS.b CODE_278BF4							; Note: This will always branch.

CODE_278BEC:
	LDA.w $064B
	CMP.w !RAM_SMB3_Global_Map16WallTileAttributeTable,y
	BCC.b CODE_278BFA
CODE_278BF4:
	LDA.b $A7,x
	ORA.b #$08
	STA.b $A7,x
CODE_278BFA:
	RTL

CODE_278BFB:
	LDA.w $064B
	CMP.w !RAM_SMB3_Global_Map16FloorTileAttributeTable,y
	BCS.b CODE_278C06
	JMP.w CODE_278CB1

CODE_278C06:
	LDY.w $0563
	BNE.b CODE_278C0E
	JMP.w CODE_278C9D

CODE_278C0E:
	CMP.b #$A8
	BEQ.b CODE_278C22
	CMP.b #$AA
	BEQ.b CODE_278C22
	CMP.b #$37
	BEQ.b CODE_278C22
	CMP.b #$AB
	BEQ.b CODE_278C22
	CMP.b #$F9
	BNE.b CODE_278C25
CODE_278C22:
	JMP.w CODE_278CD4

CODE_278C25:
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	AND.b #$0F
	STA.b $00
	LDA.b $0F
	AND.b #$0F
	STA.b $0F
	LDY.w $060D
	LDA.w DATA_21AD70,y
	CMP.b #$80
	BNE.b CODE_278C3E
	JMP.w CODE_278CB1

CODE_278C3E:
	TYA
	ASL
	ASL
	ASL
	ASL
	CLC
	ADC.b $0F
	TAY
	LDA.w DATA_21AC0B,y
	AND.b #$0F
	STA.b $01
	LDA.b $00
	CMP.b #$0C
	BCS.b CODE_278C58
	CMP.b $01
	BCC.b CODE_278CB1
CODE_278C58:
	LDA.b $01
	STA.w $06B3
	LDA.b $A7,x
	ORA.b #$04
	STA.b $A7,x
	LDY.w $060D
	LDA.b $8C,x
	LSR
	LSR
	LSR
	LSR
	BNE.b CODE_278C70
	LDA.b #$01
CODE_278C70:
	CMP.b #$08
	BCC.b CODE_278C76
	ORA.b #$F0
CODE_278C76:
	LDX.w DATA_21AD70,y
	CPX.b #$00
	BNE.b CODE_278C80
	LDX.b #$00
	TXA
CODE_278C80:
	CPX.b #$00
	BPL.b CODE_278C88
	JSL.l SMB3_UnnecessaryInvertARt_Main
CODE_278C88:
	STX.b $00
	LDX.b $9B
	STA.w $07B6,x
	LDA.b $00
	LDY.b $8C,x
	BPL.b CODE_278C99
	JSL.l SMB3_UnnecessaryInvertARt_Main
CODE_278C99:
	STA.w $07B5
	RTL

CODE_278C9D:
	LDA.w $058B
	BNE.b CODE_278CAA
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	AND.b #$0F
	CMP.b $00
	BCS.b CODE_278CB0
CODE_278CAA:
	LDA.b $A7,x
	ORA.b #$04
	STA.b $A7,x
CODE_278CB0:
	RTL

CODE_278CB1:
	LDA.w $0563
	BEQ.b CODE_278CD3
	LDY.b #$00
	LDA.w $07B6,x
	BEQ.b CODE_278CD3
	BPL.b CODE_278CC0
	DEY
CODE_278CC0:
	CLC
	ADC.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	TYA
	ADC.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	STA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	LDA.b #$00
	STA.w $07B6,x
	JSL.l CODE_278B93
CODE_278CD3:
	RTL

CODE_278CD4:
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	CMP.b #$06
	BEQ.b CODE_278CF2
	CMP.b #$04
	BEQ.b CODE_278CF2
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	AND.b #$F0
	SEC
	SBC.b #$01
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	SBC.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	JSL.l CODE_278B93
CODE_278CF2:
	RTL

;--------------------------------------------------------------------

CODE_278CF3:
	LDY.b #$6C
	JSL.l CODE_278E13
	ASL
	ROL
	ROL
	AND.b #$03
	STA.b $00
	TAY
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_NorSpr064_WaterHoppingRedCheepCheep
	BNE.b CODE_278D12
	LDA.b !RAM_SMB3_Global_CurrentlyProcessedMap16TileLo
	CMP.b #$F0
	BNE.b CODE_278D12
	LDA.b #$80
	STA.b !RAM_SMB3_Global_CurrentlyProcessedMap16TileLo
CODE_278D12:
	LDA.b !RAM_SMB3_Global_CurrentlyProcessedMap16TileLo
	CMP.w !RAM_SMB3_Global_Map16FloorTileAttributeTable,y
	BCS.b CODE_278D66
	LDX.b #$00
	CMP.b #$D7
	BEQ.b CODE_278D38
	CMP.b #$E0
	BEQ.b CODE_278D38
	CMP.b #$E1
	BEQ.b CODE_278D38
	LDA.w $0560
	ASL
	ASL
	CLC
	ADC.b $00
	TAY
	LDA.w DATA_21AD84,y
	CMP.b !RAM_SMB3_Global_CurrentlyProcessedMap16TileLo
	BCS.b CODE_278D38
	INX
CODE_278D38:
	TXA
	LDX.b $9B
	CMP.w $06B7,x
	BEQ.b CODE_278D63
	PHA
	LDA.b !RAM_SMB3_Global_CurrentlyProcessedMap16TileLo
	LDY.b $00
	CMP.w !RAM_SMB3_Global_Map16FloorTileAttributeTable,y
	PLA
	BCS.b CODE_278D63
	PHA
	LDA.w $1FE1,x
	PHA
	ASL
	ROL
	ROL
	AND.b #$03
	TAY
	PLA
	CMP.w !RAM_SMB3_Global_Map16FloorTileAttributeTable,y
	PLA
	BCS.b CODE_278D63
	PHA
	JSL.l CODE_278F34
	PLA
CODE_278D63:
	STA.w $06B7,x
CODE_278D66:
	LDA.b !RAM_SMB3_Global_CurrentlyProcessedMap16TileLo
	STA.w $1FE1,x
	LDY.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	LDA.w DATA_21B0FB,y
	AND.b #$F0
	LSR
	PHA
	TAY
	LDA.b $9E,x
	BPL.b CODE_278D7C
	INY
	INY
CODE_278D7C:
	JSL.l CODE_278E13
	STA.w $1F76
	STA.w $064B
	PHA
	LDA.w $0560
	CMP.b #$02
	BNE.b CODE_278DA0
	LDA.b !RAM_SMB3_Global_CurrentlyProcessedMap16TileLo
	CMP.b #$49
	BEQ.b CODE_278D98
	CMP.b #$4A
	BNE.b CODE_278DA0
CODE_278D98:
	INC.w $06EB,x
	LDA.b #$06
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
CODE_278DA0:
	PLA
	ASL
	ROL
	ROL
	AND.b #$03
	STA.w $064E
	TAY
	LDA.w $1F7B
	STA.b $0F
	LDA.w $0563
	BEQ.b CODE_278DD6
	LDA.b !RAM_SMB3_Global_CurrentlyProcessedMap16TileLo
	CMP.w !RAM_SMB3_Global_Map16FloorTileAttributeTable,y
	BCC.b CODE_278DD6
	PHA
	TYA
	ASL
	TAX
	LDA.w DATA_21AAD0,x
	STA.b $02
	LDA.w DATA_21AAD0+$01,x
	STA.b $03
	PLA
	SEC
	SBC.w !RAM_SMB3_Global_Map16FloorTileAttributeTable,y
	TAY
	LDA.b ($02),y
	STA.w $060D
	LDX.b $9B
CODE_278DD6:
	LDA.b #$00
	STA.w $1F77
	PLA
	CMP.b #$08
	BNE.b CODE_278DF5
	LDY.w $0563
	BEQ.b CODE_278DF5
	PHA
	LDA.w $1CEF
	AND.b #$04
	TAY
	PLA
	CPY.b #$00
	BEQ.b CODE_278DF5
	LDY.b #$68
	BRA.b CODE_278DFA

CODE_278DF5:
	TAY
	INY
	INY
	INY
	INY
CODE_278DFA:
	LDA.b $8C,x
	BMI.b CODE_278E00
	INY
	INY
CODE_278E00:
	JSL.l CODE_278E13
	STA.w $1F77
	STA.w $064C
	ASL
	ROL
	ROL
	AND.b #$03
	STA.w $064F
	RTL

CODE_278E13:
	LDA.w !RAM_SMB3_Level_IsVerticalLevelFlag
	BEQ.b CODE_278E1B
	JMP.w CODE_278EEB

CODE_278E1B:
	LDA.w $058B
	BEQ.b CODE_278E42
	LDA.b $71,x
	CLC
	ADC.w DATA_21ADCA,y
	SEC
	SBC.w $0543
	CMP.b #$A0
	BCC.b CODE_278E42
	SBC.b #$10
	AND.b #$F0
	STA.w $1F79
	LDA.b $A7,x
	ORA.b #$80
	STA.b $A7,x
	LDA.b #$01
	STA.w $1F78
	BRA.b CODE_278E5A

CODE_278E42:
	LDA.b $71,x
	CLC
	ADC.w DATA_21ADCA,y
	AND.b #$F0
	STA.w $1F79
	LDA.b $56,x
	ADC.b #$00
	STA.w $1F78
	BEQ.b CODE_278E63
	CMP.b #$02
	BCS.b CODE_278ECD
CODE_278E5A:
	PHA
	LDA.w $1F79
	CMP.b #$B0
	PLA
	BCS.b CODE_278ECD
CODE_278E63:
	AND.b #$01
	STA.b $02
	LDA.b $5F,x
	ADC.w DATA_21ADCA+$01,y
	STA.w $1F7B
	LDA.b $44,x
	ADC.b #$00
	STA.w $1F7A
	CMP.b #$10
	BCS.b CODE_278ECD
	PHX
	ASL
	TAX
	LDA.l DATA_218200,x
	STA.b $00
	LDA.l DATA_218200+$01,x
	ADC.b $02
	STA.b $01
	LDA.w DATA_21821E,x
	STA.b $D8
	LDA.w DATA_21821E+$01,x
	ADC.b $02
	STA.b $D9
	LDA.b #$7E4000>>16
	STA.b $02
	STA.b $DA
	PLX
	LDA.w $1F7B
	LSR
	LSR
	LSR
	LSR
	ORA.w $1F79
	TAY
CODE_278EA9:
	LDA.b [$D8],y
	BEQ.b CODE_278EC5
	PHX
	LDA.w !RAM_SMB3_Global_TilesetFromHeader
	ASL
	TAX
	LDA.w DATA_21AB57,x
	STA.b $DB
	LDA.w DATA_21AB57+$01,x
	STA.b $DC
	LDA.b [$00],y
	TAY
	LDA.b ($DB),y
	PLX
	BRA.b CODE_278EC7

CODE_278EC5:
	LDA.b [$00],y
CODE_278EC7:
	JSL.l SMB3_ModifyMap16IDForPSwitchAffectedBlocks_Main
	BRA.b CODE_278ECF

CODE_278ECD:
	LDA.b #$00
CODE_278ECF:
	STA.b !RAM_SMB3_Global_CurrentlyProcessedMap16TileLo
	RTL

;--------------------------------------------------------------------

SMB3_ModifyMap16IDForPSwitchAffectedBlocks:
.Main:
;$278ED2
	LDY.w !RAM_SMB3_Level_PSwitchTimer
	BEQ.b CODE_278EEA
	LDY.b #$03
CODE_278ED9:
	CMP.w DATA_21AF92,y
	BNE.b CODE_278EE7
	LDA.w DATA_21AF9A,y
	STA.b $B4
	LDA.w DATA_21AF96,y
	RTL

CODE_278EE7:
	DEY
	BPL.b CODE_278ED9
CODE_278EEA:
	RTL

;--------------------------------------------------------------------

CODE_278EEB:
	LDA.b $71,x
	CLC
	ADC.w DATA_21ADCA,y
	AND.b #$F0
	STA.w $1F79
	STA.b $02
	LDA.b $56,x
	ADC.b #$00
	STA.w $1F78
	CMP.b #$10
	BCS.b CODE_278ECD
	ADC.b #$20
	STA.b $01
	LDA.b $44,x
	STA.w $1F7A
	LDA.b $5F,x
	CLC
	ADC.w DATA_21ADCA+$01,y
	STA.w $1F7B
	LSR
	LSR
	LSR
	LSR
	ORA.b $02
	STA.b $00
	REP.b #$20
	LDA.b $00
	CLC
	ADC.w #$2000
	STA.b $D8
	SEP.b #$20
	LDA.b #$7E
	STA.b $02
	STA.b $DA
	LDY.b #$00
	JMP.w CODE_278EA9

;--------------------------------------------------------------------

CODE_278F34:
	LDA.b #$02
	STA.b $00
	LDA.w $1A4F,x
	BNE.b CODE_278EEA
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_NorSpr01F_VineHead
	BEQ.b CODE_278FC0
	LDA.b $9E,x
	BMI.b CODE_278F5B
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_NorSpr062_Blooper
	BEQ.b CODE_278FC0
	CMP.b #!Define_SMB3_SpriteID_NorSpr06A_LaunchingBlooperNanny
	BEQ.b CODE_278FC0
	CMP.b #!Define_SMB3_SpriteID_NorSpr061_FollowingBlooperNanny
	BEQ.b CODE_278FC0
	LDA.b #$00
	STA.b $9E,x
CODE_278F5B:
	LDY.b #$02
	INC.w $1A72
	LDA.w $1A72
	AND.b #$01
	TAY
	INY
	LDA.b #$01
	STA.w !RAM_SMB3_Level_SplashSpr_DespawnTimer,y
	LSR
	STA.w !RAM_SMB3_Level_SplashSpr_Table7E1F99,y
	STZ.b $01
	LDA.b $56,x
	XBA
	LDA.b $71,x
	REP.b #$20
	SEC
	SBC.w #$0004
	AND.w #$FFF0
	CLC
	ADC.b $00
	SEP.b #$20
	STA.w !RAM_SMB3_Level_SplashSpr_YPosLo,y
	XBA
	STA.w !RAM_SMB3_Level_SplashSpr_YPosHi,y
	LDA.b $5F,x
	STA.w !RAM_SMB3_Level_SplashSpr_XPosLo,y
	LDA.b $44,x
	STA.w !RAM_SMB3_Level_SplashSpr_XPosHi,y
	LDA.b $9E,x
	BMI.b CODE_278FC0
	LDA.w $1F7F
	BNE.b CODE_278FC0
	LDA.b #$80
	STA.w $1F7F
	LDA.b $71,x
	ADC.b #$06
	STA.w $1F87
	LDA.b $56,x
	ADC.b #$00
	STA.w $1F83
	LDA.b $5F,x
	ADC.b #$04
	STA.w $1F8F
	LDA.b $44,x
	ADC.b #$00
	STA.w $1F8B
CODE_278FC0:
	RTL

;--------------------------------------------------------------------

CODE_278FC1:
	JMP.w CODE_278FD3				;\ Note: Seems that the skipped code is for a debug function.
	db $35						;| $1CFF seems to be used to prevent taking damage.
	BEQ.b CODE_278FD3				;|
	LDA.b !RAM_SMB3_Global_ControllerPress1		;|
	AND.b #!Joypad_Select>>8			;|
	BEQ.b CODE_278FD3				;|
	EOR.w $1CFF					;|
	STA.w $1CFF					;/
CODE_278FD3:
	LDA.w $1A45
	BEQ.b CODE_278FDB
	DEC.w $1A45
CODE_278FDB:
	LDA.b !RAM_SMB3_Level_Player_CurrentPowerUp
	CMP.b #$06
	BNE.b CODE_278FE6
	LDA.b #$4F
	STA.w $071E
CODE_278FE6:
	LDA.b !RAM_SMB3_Level_Player_DeathState
	CMP.b #$03
	BNE.b CODE_278FF4
	LDA.w $071B
	CMP.b #$52
	BNE.b CODE_278FF4
	RTL

CODE_278FF4:
	LDA.w !RAM_SMB3_Level_Player_ShowCarryingAnimationFlag
	STA.w !RAM_SMB3_Level_Player_CarryingSomethingFlag
	STZ.w !RAM_SMB3_Level_Player_ShowCarryingAnimationFlag
	STZ.w $07BD
	LDA.b #$FF
	STA.w $07B3
	JSL.l SMB3_ProcessGeneratorSprite_Main
	JSL.l CODE_299A9A
	DEC.w $055D
	BPL.b CODE_279017
	LDA.b #$07
	STA.w $055D
CODE_279017:
	LDX.b #$07
CODE_279019:
	STX.b $9B
	LDA.b $9C
	BNE.b CODE_27905A
	LDA.w !RAM_SMB3_Level_NorSpr_DecrementingTable7E0518,x
	BEQ.b CODE_279027
	DEC.w !RAM_SMB3_Level_NorSpr_DecrementingTable7E0518,x
CODE_279027:
	LDA.w !RAM_SMB3_Level_NorSpr_DecrementingTable7E0520,x
	BEQ.b CODE_27902F
	DEC.w !RAM_SMB3_Level_NorSpr_DecrementingTable7E0520,x
CODE_27902F:
	CPX.b #$05
	BCS.b CODE_27905A
	LDA.w !RAM_SMB3_Level_NorSpr_DecrementingTable7E06AB,x
	BEQ.b CODE_27903B
	DEC.w !RAM_SMB3_Level_NorSpr_DecrementingTable7E06AB,x
CODE_27903B:
	LDA.w !RAM_SMB3_Level_NorSpr_DecrementingTable7E06A6,x
	BEQ.b CODE_27905A
	CMP.b #$60
	BCC.b CODE_279057
	LDA.b #$01
	LDY.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	CPY.b #$02
	BEQ.b CODE_279057
	CPY.b #$04
	BNE.b CODE_279053
	LDA.b #$03
CODE_279053:
	AND.b !RAM_SMB3_Global_FrameCounter
	BNE.b CODE_27905A
CODE_279057:
	DEC.w !RAM_SMB3_Level_NorSpr_DecrementingTable7E06A6,x
CODE_27905A:
	TXA
	CLC
	ADC.w $055D
	ASL
	TAY
	REP.b #$20
	LDA.w DATA_21AF6E,y
	STA.b $C6,x
	SEP.b #$20
	JSR.w SMB3_ProcessNormalSprites_Main
	JSR.w CODE_27A5BC
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	BNE.b CODE_27907A
	LDA.b #$FF
	STA.w $0659,x
CODE_27907A:
	DEX
	BPL.b CODE_279019
	LDA.w $05FD
	BEQ.b CODE_279086
	JSL.l CODE_22F000
CODE_279086:
	LDA.w $0350
	CMP.b #$03
	BNE.b CODE_279091
	JSL.l CODE_29D3C1
CODE_279091:
	LDA.w !RAM_SMB3_Level_Player_SomersaultJumpFlag
	BEQ.b CODE_2790A7
	LDA.w !RAM_SMB3_Level_Player_IsSwimmingFlag
	ORA.w !RAM_SMB3_Level_Player_InQuicksandFlag
	BNE.b CODE_2790A2
	LDA.b $A6
	BNE.b CODE_2790A7
CODE_2790A2:
	LDA.b #$00
	STA.w !RAM_SMB3_Level_Player_SomersaultJumpFlag
CODE_2790A7:
	LDA.w $0564
	BNE.b CODE_2790DF
	LDY.b #$00
	LDA.w $052E,y
	BNE.b CODE_2790BF
	INY
	LDA.w $052E,y
	BNE.b CODE_2790BF
	INY
	LDA.w $052E,y
	BEQ.b CODE_2790DF
CODE_2790BF:
	STA.w $0564
	LDA.w $0531,y
	STA.w $0528
	LDA.w $0534,y
	STA.w $0529
	LDA.w $0537,y
	STA.w $052A
	LDA.w $053A,y
	STA.w $052B
	LDA.b #$00
	STA.w $052E,y
CODE_2790DF:
	LDA.w $0414
	BEQ.b CODE_2790EA
	STA.w $055F
	STZ.w $07BE
CODE_2790EA:
	RTL

;--------------------------------------------------------------------

CODE_2790EB:
	RTS

SMB3_ProcessNormalSprites:
.Main:
;$2790EC
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	BEQ.b CODE_2790EB
	CMP.b #$08
	BEQ.b CODE_27910D
	LDY.b #$04
CODE_2790F7:
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CMP.w DATA_21AFA2,y
	BCS.b CODE_279102
	DEY
	BNE.b CODE_2790F7
CODE_279102:
	STY.b $DE
	INY
	SEC
	SBC.w DATA_21AFA2-$01,y
	STA.w $0418
	TAY
CODE_27910D:
	JSL.l CODE_27A995
	JSL.l SMB3_CheckIfSpriteIsVerticallyOffScreen_Main
	JSL.l SMB3_CheckIfSpriteIsHorizontallyOffScreen_Main
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	JSL.l SMB3_ExecutePtr_Absolute

DATA_279120:
	dw CODE_279B7C
	dw SMB3_NorSprStatus01_Init_Main
	dw SMB3_NorSprStatus02_Normal_Main
	dw CODE_2791E8
	dw SMB3_NorSprStatus04_Carried_Main
	dw CODE_2793E1
	dw CODE_27974B
	dw CODE_279810
	dw CODE_279132

;--------------------------------------------------------------------

CODE_279132:
	LDA.w $0518,x
	BNE.b CODE_27913A
	JMP.w CODE_27980D

CODE_27913A:
	JSL.l SMB3_CheckIfNormalSpriteOffScreen_Main
	BEQ.b CODE_279143
	BRL.w CODE_2791E7

CODE_279143:
	JSL.l SMB3_GetNormalSpriteOnScreenPosition_Main
	REP.b #$10
	LDY.b $C6,x
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenXPos,x
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$02].XDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	STA.w SMB3_OAMBuffer[$03].XDisp,y
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenYPos,x
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	STA.w SMB3_OAMBuffer[$01].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$02].YDisp,y
	STA.w SMB3_OAMBuffer[$03].YDisp,y
	REP.b #$20
	LDA.w $0518,x
	AND.w #$00FF
	LSR
	LSR
	LSR
	TAX
	SEP.b #$20
	LDA.w DATA_21AFA7,x
	STA.w SMB3_OAMBuffer[$00].Tile,y
	STA.w SMB3_OAMBuffer[$01].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$02].Tile,y
	STA.w SMB3_OAMBuffer[$03].Tile,y
	LDA.w $0565
	LSR
	LSR
	ROR
	AND.b #$80
	ORA.b #$22
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$02].Prop,y
	EOR.b #$C0
	STA.w SMB3_OAMBuffer[$01].Prop,y
	STA.w SMB3_OAMBuffer[$03].Prop,y
	LDA.w SMB3_OAMBuffer[$00].Prop,y
	AND.b #$80
	BEQ.b CODE_2791B8
	LDA.w SMB3_OAMBuffer[$00].Tile,y
	PHA
	LDA.w SMB3_OAMBuffer[$02].Tile,y
	STA.w SMB3_OAMBuffer[$00].Tile,y
	PLA
	STA.w SMB3_OAMBuffer[$02].Tile,y
CODE_2791B8:
	LDA.w SMB3_OAMBuffer[$01].Prop,y
	AND.b #$80
	BEQ.b CODE_2791CD
	LDA.w SMB3_OAMBuffer[$01].Tile,y
	PHA
	LDA.w SMB3_OAMBuffer[$03].Tile,y
	STA.w SMB3_OAMBuffer[$01].Tile,y
	PLA
	STA.w SMB3_OAMBuffer[$03].Tile,y
CODE_2791CD:
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b #$00
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$02].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$03].Slot,y
	SEP.b #$30
	LDX.b $9B
CODE_2791E7:
	RTS

;--------------------------------------------------------------------

CODE_2791E8:
	LDY.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	LDA.w DATA_21B1AF,y
	AND.b #$10
	BEQ.b CODE_2791FD
	LDA.b #$10
	STA.w $06A6,x
	LDA.b #$07
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	RTS

CODE_2791FD:
	LDA.b $9C
	BNE.b CODE_27924E
	JSR.w CODE_279887
	JSL.l SMB3_HandleNormalSpriteGravity_Main
	LDA.b $A7,x
	AND.b #$04
	BEQ.b CODE_279237
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	BMI.b CODE_279237
	PHA
	JSL.l CODE_278B67
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	PHP
	BPL.b CODE_279220
	JSL.l SMB3_UnnecessaryInvertARt_Main
CODE_279220:
	LSR
	PLP
	BPL.b CODE_279228
	JSL.l SMB3_UnnecessaryInvertARt_Main
CODE_279228:
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	PLA
	LSR
	LSR
	JSL.l SMB3_UnnecessaryInvertARt_Main
	CMP.b #$FE
	BCS.b CODE_279237
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_279237:
	LDA.b $A7,x
	AND.b #$08
	BEQ.b CODE_279241
	LDA.b #$10
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_279241:
	LDA.b $A7,x
	AND.b #$03
	BEQ.b CODE_27924B
	JSL.l CODE_279906
CODE_27924B:
	JSR.w CODE_279917
CODE_27924E:
	JSR.w CODE_279394
CODE_279251:
	JSR.w CODE_279BE0
CODE_279254:
	LDA.b #$02
	STA.w $0669,x
	LDA.w $1FF9,x
	BEQ.b CODE_27926F
	JSL.l CODE_22C964
CODE_279262:
	LDA.w $06A6,x
	CMP.b #$60
	BCS.b CODE_27926E
	AND.b #$07
	STA.w $06AB,x
CODE_27926E:
	RTS

CODE_27926F:
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_NorSpr050_BobOmb
	BEQ.b CODE_27927A
	CMP.b #!Define_SMB3_SpriteID_NorSpr055_WindupBobOmb
	BNE.b CODE_279282
CODE_27927A:
	LDA.b $BD
	STA.w $0679,x
	JMP.w CODE_279EA1

CODE_279282:
	JSR.w CODE_279EC0
	JSR.w CODE_27A9C0
	LDY.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CPY.b #!Define_SMB3_SpriteID_NorSpr05C_ThrowBlock
	BNE.b CODE_2792B3
	REP.b #$10
	LDY.b $C6,x
	LDA.b #$74
	STA.w SMB3_OAMBuffer[$00].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$02].Tile,y
	LDA.b #$76
	STA.w SMB3_OAMBuffer[$01].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$03].Tile,y
	LDA.w SMB3_OAMBuffer[$01].Prop,y
	AND.b #$BF
	STA.w SMB3_OAMBuffer[$01].Prop,y
	STA.w SMB3_OAMBuffer[$03].Prop,y
	SEP.b #$10
	RTS

CODE_2792B3:
	JSR.w CODE_279262
	CPY.b #!Define_SMB3_SpriteID_NorSpr070_BuzzyBeetle
	BNE.b CODE_2792DB
	LDY.w $0679,x
	BMI.b CODE_2792DA
	REP.b #$10
	LDY.b $C6,x
	LDA.w SMB3_OAMBuffer[$00].YDisp,y
	CLC
	ADC.b #$01
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	STA.w SMB3_OAMBuffer[$01].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$02].YDisp,y
	STA.w SMB3_OAMBuffer[$03].YDisp,y
	SEP.b #$10
CODE_2792DA:
	RTS

CODE_2792DB:
	CPY.b #!Define_SMB3_SpriteID_NorSpr071_Spiny
	BEQ.b CODE_2792DA
	LDA.w $06A6,x
	CMP.b #$50
	BCS.b CODE_2792DA
	LSR
	LSR
	LSR
	LSR
	TAY
	LDA.w $06A6,x
	AND.w DATA_21AFAB,y
	BEQ.b CODE_2792DA
	LDA.b #$01
	LDY.w $0679,x
	BMI.b CODE_2792FB
	LSR
CODE_2792FB:
	REP.b #$30
	LDY.b $C6,x
	AND.w #$00FF
	TAX
	SEP.b #$20
	LDA.w SMB3_OAMBuffer[$00].YDisp,y
	CMP.b #$F0
	BEQ.b CODE_27931D
	CLC
	ADC.w DATA_21AFB1,x
	CMP.b #$C5
	BCS.b CODE_279331
	STA.w SMB3_OAMBuffer[$04].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$06].YDisp,y
CODE_27931D:
	LDA.w SMB3_OAMBuffer[$01].YDisp,y
	CMP.b #$F0
	BEQ.b CODE_279331
	CLC
	ADC.w DATA_21AFB1,x
	STA.w SMB3_OAMBuffer[$05].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$07].YDisp,y
CODE_279331:
	LDA.w SMB3_OAMBuffer[$00].XDisp,y
	SEC
	SBC.b #$03
	STA.w SMB3_OAMBuffer[$04].XDisp,y
	STA.w SMB3_OAMBuffer[$06].XDisp,y
	LDA.w SMB3_OAMBuffer[$01].XDisp,y
	CLC
	ADC.b #$03
	STA.w SMB3_OAMBuffer[$05].XDisp,y
	STA.w SMB3_OAMBuffer[$07].XDisp,y
	LDA.w SMB3_OAMBuffer[$00].Tile,y
	AND.b #$80
	ORA.b #$26
	STA.w SMB3_OAMBuffer[$04].Prop,y
	STA.w SMB3_OAMBuffer[$06].Prop,y
	ORA.b #$40
	STA.w SMB3_OAMBuffer[$05].Prop,y
	STA.w SMB3_OAMBuffer[$07].Prop,y
	LDA.b #$F8
	STA.w SMB3_OAMBuffer[$04].Tile,y
	STA.w SMB3_OAMBuffer[$05].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$06].Tile,y
	STA.w SMB3_OAMBuffer[$07].Tile,y
	REP.b #$20
	PHY
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$04].Slot,y
	LDA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$05].Slot,y
	LDA.w SMB3_OAMTileSizeBuffer[$02].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$06].Slot,y
	LDA.w SMB3_OAMTileSizeBuffer[$03].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$07].Slot,y
	PLY
	SEP.b #$30
	LDX.b $9B
	RTS

;--------------------------------------------------------------------

CODE_279394:
	TXA
	CLC
	ADC.b !RAM_SMB3_Global_FrameCounter
	LSR
	BCS.b CODE_2793E0
	JSL.l SMB3_CheckIfNormalSpriteOffScreen_Main
	BNE.b CODE_2793E0
	JSL.l CODE_27A43A
	TXA
	BEQ.b CODE_2793E0
	DEX
CODE_2793A9:
	LDY.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	LDA.w DATA_21AE78,y
	AND.b #$10
	BEQ.b CODE_2793DB
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	CMP.b #$02
	BNE.b CODE_2793DB
	JSL.l SMB3_CheckIfNormalSpriteOffScreen_Main
	BNE.b CODE_2793DB
	JSL.l CODE_27A414
	JSL.l CODE_27A460
	BCC.b CODE_2793DB
	LDY.b $9B
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenXPos,x
	CMP.w !RAM_SMB3_Level_NorSpr_OnScreenXPos,y
	LDY.b #$00
	BCC.b CODE_2793D7
	LDY.b #$40
CODE_2793D7:
	TYA
	STA.w $0679,x
CODE_2793DB:
	DEX
	BPL.b CODE_2793A9
	LDX.b $9B
CODE_2793E0:
	RTS

;--------------------------------------------------------------------

CODE_2793E1:
	LDA.b $9C
	BEQ.b CODE_2793E8
	JMP.w CODE_2794B7

CODE_2793E8:
	JSL.l SMB3_HandleNormalSpriteGravity_Main
	JSL.l SMB3_CheckIfSpriteIsHorizontallyOffScreen_Main
	LDA.b $A7,x
	AND.b #$04
	BEQ.b CODE_27940B
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	BNE.b CODE_279403
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.w DATA_21AFB3,y
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_279403:
	JSL.l CODE_278B67
	LDA.b #$0C
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_27940B:
	LDA.b $A7,x
	AND.b #$03
	BNE.b CODE_279414
	JMP.w CODE_27945B

CODE_279414:
	LDA.w !RAM_SMB3_Level_NorSpr_OnScreenXPos,x
	LDY.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	BPL.b CODE_279421
	CMP.b #$06
	BCC.b CODE_279448
	BCS.b CODE_279425						; Note: This will always branch.

CODE_279421:
	CMP.b #$E4
	BCS.b CODE_279448
CODE_279425:
	JSL.l SMB3_CheckIfNormalSpriteOffScreen_Main
	BNE.b CODE_279448
	LDA.w $1F78
	STA.b $0C
	LDA.w $1F79
	STA.b $0D
	LDA.w $1F7A
	STA.b $0E
	LDA.w $1F7B
	STA.b $0F
	LDA.w $1F77
	JSL.l CODE_23D83B
	LDX.b $9B
CODE_279448:
	LDA.b #!Define_SMAS_Sound0060_HitHead
	STA.w !RAM_SMB3_Global_SoundCh1
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_NorSpr05C_ThrowBlock
	BNE.b CODE_279457
	JMP.w CODE_279A56

CODE_279457:
	JSL.l CODE_279906
CODE_27945B:
	JSR.w CODE_279917
	TXA
	CLC
	ADC.b !RAM_SMB3_Global_FrameCounter
	LSR
	BCC.b CODE_2794B7
	JSR.w CODE_27A6F0
	BCC.b CODE_2794B7
	LDA.b #!Define_SMAS_Sound0060_Stomp1
if !Define_Global_ROMToAssemble&(!ROM_SMAS_U) != $00
	ORA.w $05F5,y
else
	CLC
	ADC.w $05F5,x
endif
	CMP.b #!Define_SMAS_Sound0060_Stomp7
	BCC.b CODE_27947A
	CMP.b #!Define_SMAS_Sound0060_Stomp8+$01
	BCS.b CODE_27947D
	LDA.b #!Define_SMAS_Sound0060_Stomp7
CODE_27947A:
	STA.w !RAM_SMB3_Global_SoundCh1
CODE_27947D:
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	ASL
	LDA.b #$10
	BCC.b CODE_279486
	LDA.b #$F0
CODE_279486:
	STA.w !RAM_SMB3_Level_NorSpr_XSpeed,y
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,y
	CMP.b #$05
	BNE.b CODE_2794A6
	LDA.w $05F5,y
	JSL.l CODE_278A8A
	JSR.w CODE_279527
	LDA.w !RAM_SMB3_Level_NorSpr_XSpeed,y
	ASL
	LDA.b #$10
	BCS.b CODE_2794A4
	LDA.b #$F0
CODE_2794A4:
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_2794A6:
	TYA
	TAX
	JSR.w CODE_279527
	LDX.b $9B
	LDA.w $05F5,x
	INC.w $05F5,x
	JSL.l CODE_278A86
CODE_2794B7:
	JSR.w CODE_279BE0
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_NorSpr05C_ThrowBlock
	BEQ.b CODE_2794EE
	CMP.b #!Define_SMB3_SpriteID_NorSpr07A_GiantGreenKoopa
	BCS.b CODE_279522
	LDA.w $0565
	LSR
	AND.b #$03
	TAY
	LDA.w $0679,x
	AND.b #$BF
	ORA.w DATA_21AFB5,y
	STA.w $0679,x
	LDA.w DATA_21AFB9,y
	STA.w $0669,x
	TYA
	AND.b #$01
	BNE.b CODE_2794E7
	JSR.w CODE_279EC0
	BRA.b CODE_2794EA

CODE_2794E7:
	JSR.w CODE_279EA1
CODE_2794EA:
	JSR.w CODE_27A9C0
	RTS

CODE_2794EE:
	LDA.b !RAM_SMB3_Global_FrameCounter
	LSR
	STA.w $0769,x
	JSR.w CODE_279EC0
	LDY.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CPY.b #!Define_SMB3_SpriteID_NorSpr05C_ThrowBlock
	BNE.b CODE_279521
	REP.b #$10
	LDY.b $C6,x
	LDA.b #$74
	STA.w SMB3_OAMBuffer[$00].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$02].Tile,y
	LDA.b #$76
	STA.w SMB3_OAMBuffer[$01].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$03].Tile,y
	LDA.w SMB3_OAMBuffer[$01].Prop,y
	AND.b #$BF
	STA.w SMB3_OAMBuffer[$01].Prop,y
	STA.w SMB3_OAMBuffer[$03].Prop,y
	SEP.b #$10
CODE_279521:
	RTS

CODE_279522:
	JSL.l CODE_22C964
	RTS

;--------------------------------------------------------------------

CODE_279527:
	LDA.b #$06
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	LDA.b #$D0
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	STA.w $1A47
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	STA.w $1A48
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	STA.w $027E
	LDA.b #$0A
	STA.w $1A46
	RTS

;--------------------------------------------------------------------

CODE_279545:
	LDA.w !RAM_SMB3_Level_MExtSpr_SpriteID
	STA.w !RAM_SMB3_Level_MExtSpr_SpriteID+$01
	LDA.w !RAM_SMB3_Level_MExtSpr_YPosLo
	STA.w !RAM_SMB3_Level_MExtSpr_YPosLo+$01
	LDA.w !RAM_SMB3_Level_MExtSpr_Table7E1FAB
	STA.w !RAM_SMB3_Level_MExtSpr_Table7E1FAB+$01
	LDA.w !RAM_SMB3_Level_MExtSpr_XPosLo
	STA.w !RAM_SMB3_Level_MExtSpr_XPosLo+$01
	LDA.w !RAM_SMB3_Level_MExtSpr_Table7E1FA5
	STA.w !RAM_SMB3_Level_MExtSpr_Table7E1FA5+$01
	LDA.w !RAM_SMB3_Level_MExtSpr_Table7E1FA8
	STA.w !RAM_SMB3_Level_MExtSpr_Table7E1FA8+$01
	LDA.w !RAM_SMB3_Level_MExtSpr_Table7E1FAE
	STA.w !RAM_SMB3_Level_MExtSpr_Table7E1FAE+$01
	LDA.w !RAM_SMB3_Level_MExtSpr_Table7E1FB1
	STA.w !RAM_SMB3_Level_MExtSpr_Table7E1FB1+$01
	LDA.b !RAM_SMB3_Level_MExtSpr_Table7E00DF
	STA.b !RAM_SMB3_Level_MExtSpr_Table7E00DF+$01
	LDA.w !RAM_SMB3_Level_MExtSpr_XPosHi
	STA.w !RAM_SMB3_Level_MExtSpr_XPosHi+$01
	RTL

;--------------------------------------------------------------------

CODE_279580:
	LDA.w $1F77
CODE_279583:
	STA.b $07
	LDA.w $1F78
	STA.b $0C
	LDA.w $1F79
	STA.b $0D
	LDA.w $1F7A
	STA.b $0E
	LDA.w $1F7B
	STA.b $0F
	LDA.b $07
	JSL.l CODE_23D83B
	LDX.b $9B
	RTL

;--------------------------------------------------------------------

SMB3_NorSprStatus04_Carried:
.Main:
;$2795A2
	LDA.b !RAM_SMB3_Level_Player_DeathState
	BEQ.b CODE_2795A9
	JMP.w CODE_27971F

CODE_2795A9:
	JSR.w CODE_279887
	BIT.b !RAM_SMB3_Global_ControllerHold1
	BVC.b CODE_2795B3							; Note: !Joypad_X|(!Joypad_Y>>8)
CODE_2795B0:
	JMP.w CODE_279671

CODE_2795B3:
	LDA.w $0571
	BNE.b CODE_2795B0
	LDA.b #!Define_SMAS_Sound0060_KickShell
	STA.w !RAM_SMB3_Global_SoundCh1
	LDA.b #$0C
	STA.w !RAM_SMB3_Level_Player_KickAnimationTimer
	LDA.b #$10
	STA.w $0520,x
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_NorSpr050_BobOmb
	BEQ.b CODE_2795D2
	CMP.b #!Define_SMB3_SpriteID_NorSpr055_WindupBobOmb
	BNE.b CODE_2795F8
CODE_2795D2:
	LDA.b #$02
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	LDA.b #$E0
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.w DATA_21AFC1,y
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	EOR.b !RAM_SMB3_Level_Player_XSpeed
	BMI.b CODE_2795F5
	LDA.b !RAM_SMB3_Level_Player_XSpeed
	STA.b $00
	ASL.b $00
	ROR
	CLC
	ADC.w DATA_21AFBD,y
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_2795F5:
	JMP.w CODE_279EA1

CODE_2795F8:
	LDA.b #$00
	STA.w $05F5,x
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	CMP.b #$04
	BNE.b CODE_27963F
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_NorSpr05C_ThrowBlock
	BEQ.b CODE_279635
	LDY.b #$01
	LDA.b $BD
	BNE.b CODE_279613
	LDY.b #$FF
CODE_279613:
	STY.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	JSL.l CODE_278B93
	LDA.b $A7,x
	AND.b #$03
	BEQ.b CODE_279635
	LDA.b #$05
	JSL.l CODE_278A94
	LDA.b #$06
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	LDA.b #$C0
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	LDA.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	JMP.w CODE_27971F

CODE_279635:
	LDY.b #$00
	LDA.b $BD
	BEQ.b CODE_27963C
	INY
CODE_27963C:
	JMP.w CODE_279648

CODE_27963F:
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.w DATA_21AFBF,y
	STA.b $BD
CODE_279648:
	LDA.w DATA_21AFBD,y
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	EOR.b !RAM_SMB3_Level_Player_XSpeed
	BMI.b CODE_27965E
	LDA.b !RAM_SMB3_Level_Player_XSpeed
	STA.b $00
	ASL.b $00
	ROR
	CLC
	ADC.w DATA_21AFBD,y
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_27965E:
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	CMP.b #$06
	BEQ.b CODE_27966A
	LDA.b #$05
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
CODE_27966A:
	LDA.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	JMP.w CODE_27971F

CODE_279671:
	LDA.b #$01
	STA.w !RAM_SMB3_Level_Player_ShowCarryingAnimationFlag
	LDA.w $0571
	BEQ.b CODE_27967F
	LDY.b #$0A
	BNE.b CODE_27969C
CODE_27967F:
	LDY.b #$00
	LDA.b $BD
	BNE.b CODE_279686
	INY
CODE_279686:
	LDA.w $1FF9,x
	BEQ.b CODE_279690
	INY
	INY
	INY
	INY
	INY
CODE_279690:
	LDA.w !RAM_SMB3_Level_Player_EnterVerticalPipeAnimationTimer
	BEQ.b CODE_2796A5
	INY
	INY
	CMP.b #$05
	BCC.b CODE_27969C
	INY
CODE_27969C:
	REP.b #$20
	LDA.w #$0020
	STA.b $C6,x
	SEP.b #$20
CODE_2796A5:
	LDA.b !RAM_SMB3_Level_Player_XPosLo
	CLC
	ADC.w DATA_21AFC3,y
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	LDA.b $43
	ADC.w DATA_21AFCE,y
	STA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	LDA.b #$FE
	LDY.w $1FF9,x
	BNE.b CODE_2796C3
	LDA.b #$0D
	LDY.b !RAM_SMB3_Level_Player_CurrentPowerUp
	BNE.b CODE_2796C3
	LDA.b #$0F
CODE_2796C3:
	PHA
	CLC
	ADC.b !RAM_SMB3_Level_Player_YPosLo
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	LDY.b #$00
	PLA
	BPL.b CODE_2796CF
	DEY
CODE_2796CF:
	TYA
	ADC.b !RAM_SMB3_Level_Player_YPosHi
	STA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	LDA.b !RAM_SMB3_Level_Player_XSpeed
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	LDA.b !RAM_SMB3_Level_Player_YSpeed
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	JSL.l CODE_278B93
	JSL.l SMB3_GetNormalSpriteOnScreenPosition_Main
	JSR.w CODE_27A6F0
	BCC.b CODE_27971F
	LDA.w $0520,x
	ORA.w $0571
	BNE.b CODE_27971F
	LDA.b #!Define_SMAS_Sound0060_KickShell
	STA.w !RAM_SMB3_Global_SoundCh1
	LDA.b #$06
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	LDA.b #$D0
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	LDA.b #$06
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,y
	LDA.b #$D0
	STA.w !RAM_SMB3_Level_NorSpr_YSpeed,y
	LDA.b #$00
	JSL.l CODE_278A8A
	LDA.b #$10
	STA.w $0520,x
	TYA
	TAX
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.w DATA_21AFD9,y
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_27971F:
	LDX.b $9B
	LDA.b !RAM_SMB3_Level_Player_DeathState
	BNE.b CODE_27972C
	LDA.w SMB3_OAMBuffer[$14].YDisp
	CMP.b #$F0
	BEQ.b CODE_27974A
CODE_27972C:
	LDA.w $0679,x
	ORA.b #$20
	STA.b $D8
	LDA.w $0571
	AND.b #$80
	BEQ.b CODE_279742
	LDA.b $D8
	AND.b #$CF
	ORA.b #$10
	STA.b $D8
CODE_279742:
	LDA.b $D8
	STA.w $0679,x
	JSR.w CODE_279254
CODE_27974A:
	RTS

;--------------------------------------------------------------------

CODE_27974B:
	JSR.w CODE_2797FA
	LDY.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	LDA.w DATA_21B317,y
	AND.b #$0F
	BEQ.b CODE_279763
	CPX.b #$05
	BCS.b CODE_279763
	PHA
	LDA.b #$02
	STA.w $0669,x
	PLA
CODE_279763:
	JSL.l SMB3_ExecutePtr_Absolute

DATA_279767:
	dw CODE_27977B
	dw CODE_2797B9
	dw CODE_2797B3
	dw CODE_2797AD
	dw CODE_2797A6
	dw CODE_279782
	dw CODE_27978E
	dw CODE_279795
	dw CODE_2797A0
	dw CODE_279789

;--------------------------------------------------------------------

CODE_27977B:
	JSL.l CODE_279D6F
	JMP.w CODE_2797BC

;--------------------------------------------------------------------

CODE_279782:
	JSL.l SMB3_NorSprStatus02_Normal_CODE_279D45
	JMP.w CODE_2797BC

;--------------------------------------------------------------------

CODE_279789:
	JSL.l SMB3_NorSprStatus02_Normal_CODE_279D45
	RTS

;--------------------------------------------------------------------

CODE_27978E:
	JSL.l CODE_22C964
	JMP.w CODE_2797BC

;--------------------------------------------------------------------

CODE_279795:
	LDA.b #$08
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	LDA.b #$1F
	STA.w $0518,x
	RTS

;--------------------------------------------------------------------

CODE_2797A0:
	JSR.w CODE_279EA1
	JMP.w CODE_2797F1

;--------------------------------------------------------------------

CODE_2797A6:
	JSL.l CODE_279EE2
	JMP.w CODE_2797BC

;--------------------------------------------------------------------

CODE_2797AD:
	JSR.w CODE_279F12
	JMP.w CODE_2797BC

;--------------------------------------------------------------------

CODE_2797B3:
	JSR.w CODE_279EC0
	JMP.w CODE_2797BC

;--------------------------------------------------------------------

CODE_2797B9:
	JSR.w CODE_279EA1
CODE_2797BC:
	LDA.b $9C
	BNE.b CODE_2797F9
	LDA.w $06EB,x
	BEQ.b CODE_2797E9
	INC.w $06EB,x
	CMP.b #$90
	BNE.b CODE_2797CF
	JMP.w CODE_279C34

CODE_2797CF:
	LDA.b #$04
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	JSL.l CODE_27A7E5
	LDA.w $0679,x
	AND.b #$CF
	ORA.b #$10
	STA.w $0679,x
	CPX.b #$05
	BCC.b CODE_2797E8
	JMP.w CODE_27A320

CODE_2797E8:
	RTS

CODE_2797E9:
	LDA.w $0679,x
	ORA.b #$80
	STA.w $0679,x
CODE_2797F1:
	LDA.b $9C
	BNE.b CODE_2797F9
	JSL.l SMB3_HandleNormalSpriteGravity_Main
CODE_2797F9:
	RTS

;--------------------------------------------------------------------

CODE_2797FA:
	LDA.w !RAM_SMB3_Level_IsVerticalLevelFlag
	BEQ.b CODE_279805
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenYPos,x
	CMP.b #$C8
	BCC.b CODE_2797F9
CODE_279805:
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	CMP.b #$02
	BMI.b CODE_2797F9
	PLA
	PLA
CODE_27980D:
	JMP.w CODE_279C60

;--------------------------------------------------------------------

CODE_279810:
	LDA.w $06A6,x
	BEQ.b CODE_279839
	JSL.l SMB3_HandleNormalSpriteGravity_Main
	LDA.b $A7,x
	AND.b #$04
	BEQ.b CODE_279825
	JSL.l CODE_278B67
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_279825:
	LDA.b #$03
	STA.w $0669,x
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_NorSpr072_Goomba
	BNE.b CODE_279834
	JMP.w CODE_279EC0

CODE_279834:
	JSL.l CODE_22C964
	RTS

CODE_279839:
	JMP.w CODE_279C60

;--------------------------------------------------------------------

	%ROUTINE_SMB3_HandleNormalSpriteGravity(NULLROM)			; $27983C

;--------------------------------------------------------------------

CODE_279887:
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_NorSpr050_BobOmb
	BEQ.b CODE_279892
	CMP.b #!Define_SMB3_SpriteID_NorSpr055_WindupBobOmb
	BNE.b CODE_2798A9
CODE_279892:
	LDA.w $0518,x
	BNE.b CODE_2798A1
	LDA.b #$02
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	JSL.l CODE_28D485
	RTS

CODE_2798A1:
	CMP.b #$40
	BCS.b CODE_2798A8
	STA.w $0769,x
CODE_2798A8:
	RTS

CODE_2798A9:
	CMP.b #!Define_SMB3_SpriteID_NorSpr05C_ThrowBlock
	BNE.b CODE_2798C8
	LDA.w !RAM_SMB3_NorSpr05C_ThrowBlock_DespawnTimer,x
	BNE.b CODE_2798B5
	JMP.w CODE_279795

CODE_2798B5:
	CMP.b #$60
	BCS.b CODE_2798C4
	CMP.b #$30
	BCS.b CODE_2798C3
	CMP.b #$10
	BCS.b CODE_2798C2
	LSR
CODE_2798C2:
	LSR
CODE_2798C3:
	LSR
CODE_2798C4:
	STA.w $0769,x
	RTS

CODE_2798C8:
	LDA.w $06A6,x
	BNE.b CODE_279905
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	CMP.b #$04
	BNE.b CODE_2798F1
	JSL.l CODE_278B93
	LDA.b $A7,x
	BEQ.b CODE_2798F1
	LDA.b #$05
	JSL.l CODE_278A94
	LDA.b #$06
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	LDA.b #$C0
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	LDA.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	BEQ.b CODE_279900
CODE_2798F1:
	LDA.b #$02
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.w DATA_21AFDF,y
	STA.w $0679,x
CODE_279900:
	PLA
	PLA
	JMP.w CODE_279251

CODE_279905:
	RTS

;--------------------------------------------------------------------

CODE_279906:
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	JSL.l SMB3_UnnecessaryInvertARt_Main
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_27990E:
	LDA.w $0679,x
	EOR.b #$40
	STA.w $0679,x
	RTL

;--------------------------------------------------------------------

; Note: Something related to sprite to sprite collision?

CODE_279917:
	JSL.l SMB3_CheckIfNormalSpriteOffScreen_Main
	BNE.b CODE_279985
	LDA.w $1F76
	CMP.b #$F3
	BNE.b CODE_27997B
	LDA.b #$D0
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.w DATA_21AFE1,y
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	LDA.b #$80
	STA.w $0679,x
	LDY.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	LDA.w DATA_21B1AF,y
	AND.b #$40
	BNE.b CODE_27994C
	LDA.b #$06
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	LDA.b #$00
	JSL.l CODE_278A8A
	RTS

CODE_27994C:
	PHX
	REP.b #$30
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	AND.w #$00FF
	STA.b $D8
	ASL
	CLC
	ADC.b $D8
	TAX
	LDA.l DATA_288438,x
	STA.b $D8
	SEP.b #$30
	PLX
	LDA.b $D9
	AND.b #$F8
	CMP.b #$08
	BNE.b CODE_279978
	LDA.b $D8
	STA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	LDA.b #$00
	JSL.l CODE_278A8A
CODE_279978:
	JMP.w CODE_279AEF

CODE_27997B:
	JSR.w CODE_27A31C
	LDA.b #$00
	STA.w $0797,x
	BCS.b CODE_279986
CODE_279985:
	RTS

CODE_279986:
	LDA.w $0520,x
	BNE.b CODE_279985
	LDA.w !RAM_SMB3_Level_Player_SlidingXSpeed
	BNE.b CODE_27999C
	LDY.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	LDA.w DATA_21B0FB,y
	AND.b #$02
	BEQ.b CODE_2799D9
	BNE.b CODE_2799C6						; Note: This will always branch.

CODE_27999C:
	JSR.w CODE_2799D9
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	CMP.b #$02
	BEQ.b CODE_2799C5
	STA.b $03
	JSR.w CODE_27A67A
	LDA.w !RAM_SMB3_Global_RandomByte02,x
	AND.b #$1F
	ADC.b #$B4
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	LDA.b #$06
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	LDA.b !RAM_SMB3_Level_Player_XSpeed
	STA.b $00
	ASL.b $00
	ROR
	CLC
	ADC.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_2799C5:
	RTS

CODE_2799C6:
	LDA.b $A6
	BNE.b CODE_2799D9
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	CMP.b #$0A
	BMI.b CODE_2799D3
CODE_2799D0:
	JMP.w CODE_279AFA

CODE_2799D3:
	LDA.b $A7,x
	AND.b #$04
	BNE.b CODE_2799D0
CODE_2799D9:
	LDY.b #$11
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_NorSpr06B_JumpingFakeBrick
	BEQ.b CODE_2799EF
	CMP.b #!Define_SMB3_SpriteID_NorSpr064_WaterHoppingRedCheepCheep
	BEQ.b CODE_2799EF
	LDY.b #$13
	LDA.w $1FF9,x
	BEQ.b CODE_2799EF
	LDY.b #$08
CODE_2799EF:
	STY.b $01
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	SEC
	SBC.b $01
	ROL.b $00
	CMP.b !RAM_SMB3_Level_Player_YPosLo
	PHP
	LSR.b $00
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	SBC.b #$00
	PLP
	SBC.b !RAM_SMB3_Level_Player_YPosHi
	BMI.b CODE_2799D0
	LDA.b !RAM_SMB3_Level_Player_YSpeed
	BPL.b CODE_279A14
	LDA.w !RAM_SMB3_Level_Player_FlightTimer
	BNE.b CODE_279A14
	LDA.w !RAM_SMB3_Level_ConsecutiveEnemiesStompedCounter
	BEQ.b CODE_2799D0
CODE_279A14:
	LDA.b #$01
	STA.w $0797,x
	LDA.w !RAM_SMB3_Level_Player_IsSwimmingFlag
	BNE.b CODE_279A28
	LDY.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	LDA.w DATA_21B1AF,y
	AND.b #$20
	BEQ.b CODE_279A33
CODE_279A28:
	LDA.w !RAM_SMB3_Level_Player_InKuriboShoeFlag
	ORA.w !RAM_SMB3_Level_Player_IsTanookiStatueTimer
	BNE.b CODE_279A33
	JMP.w CODE_279B1E

CODE_279A33:
	LDY.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	LDA.w DATA_21B0FB,y
	AND.b #$04
	BNE.b CODE_279A75
	LDA.w !RAM_SMB3_Level_Player_IsTanookiStatueTimer
	ORA.w !RAM_SMB3_Level_Player_InKuriboShoeFlag
	BEQ.b CODE_279A5C
	JSR.w CODE_279A76
	LDY.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	LDA.w DATA_21B1AF,y
	AND.b #$10
	BEQ.b CODE_279A56
	LDA.b #$03
	BNE.b CODE_279A58
CODE_279A56:
	LDA.b #$06
CODE_279A58:
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	RTS

CODE_279A5C:
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	CMP.b #$03
	BNE.b CODE_279A76
CODE_279A63:
	LDA.w !RAM_SMB3_Level_ConsecutiveEnemiesStompedCounter
	INC.w !RAM_SMB3_Level_ConsecutiveEnemiesStompedCounter
	JSL.l CODE_278A8A
	JSR.w CODE_2795B3
	LDA.b #$00
	STA.w !RAM_SMB3_Level_Player_KickAnimationTimer
CODE_279A75:
	RTS

CODE_279A76:
	LDA.b #$08
	STA.w $0520,x
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$AA
else
	LDA.b #$C0
endif
	STA.b !RAM_SMB3_Level_Player_YSpeed
	LDA.b #!Define_SMAS_Sound0060_Contact
	STA.w !RAM_SMB3_Global_SoundCh1
	DEC.w $1CF6,x
	BPL.b CODE_279A75
	PHX
	REP.b #$30
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	AND.w #$00FF
	STA.b $D8
	ASL
	CLC
	ADC.b $D8
	TAX
	LDA.l DATA_288438,x
	STA.b $D8
	SEP.b #$30
	PLX
	LDA.b $D9
	AND.b #$F4
	CMP.b #$04
	BNE.b CODE_279AB2
	LDA.w !RAM_SMB3_Level_ConsecutiveEnemiesStompedCounter
	CLC
	ADC.b #$04
	BNE.b CODE_279AB5
CODE_279AB2:
	LDA.w !RAM_SMB3_Level_ConsecutiveEnemiesStompedCounter
CODE_279AB5:
	INC.w !RAM_SMB3_Level_ConsecutiveEnemiesStompedCounter
	JSL.l CODE_278A8A
	LDA.b $D9
	AND.b #$F8
	CMP.b #$08
	BNE.b CODE_279ACF
	LDA.b $D8
	STA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	INC.w $1CF6,x
	JMP.w CODE_279AE7

CODE_279ACF:
	LDY.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	LDA.w DATA_21B0FB,y
	AND.b #$01
	BEQ.b CODE_279AEC
	LDA.b #!Define_SMAS_Sound0060_KickShell
	STA.w !RAM_SMB3_Global_SoundCh1
	LDA.b #$06
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	LDA.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_279AE7:
	LDA.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	RTS

CODE_279AEC:
	INC.w $1CF6,x
CODE_279AEF:
	LDA.b #$03
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	LDA.b #$FF
	STA.w $06A6,x
	RTS

CODE_279AFA:
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	CMP.b #$03
	BNE.b CODE_279B1E
	LDA.w !RAM_SMB3_Level_Player_InKuriboShoeFlag
	ORA.w !RAM_SMB3_Level_Player_IsTanookiStatueTimer
	BEQ.b CODE_279B0C
	JMP.w CODE_279A63

CODE_279B0C:
	LDA.w !RAM_SMB3_Level_Player_CarryingSomethingFlag
	BNE.b CODE_279B6B
	BIT.b !RAM_SMB3_Global_ControllerHold1
	BVS.b CODE_279B18							; Note: !Joypad_X|(!Joypad_Y>>8)
	JMP.w CODE_2795B3

CODE_279B18:
	LDA.b #$04
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	RTS

CODE_279B1E:
	LDA.w !RAM_SMB3_Level_Player_HurtTimer
	ORA.w !RAM_SMB3_Level_Player_IsTanookiStatueTimer
	ORA.w $0520,x
	ORA.w !RAM_SMB3_Level_Player_StarPowerTimer
	BNE.b CODE_279B6B
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	CMP.b #$05
	BNE.b CODE_279B4C
	LDY.b #$00
	LDA.b !RAM_SMB3_Level_Player_XSpeed
	BEQ.b CODE_279B4C
	BPL.b CODE_279B3C
	INY
CODE_279B3C:
	STY.b $00
	EOR.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	BMI.b CODE_279B4C
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	CPY.b $00
	BNE.b CODE_279B6B
	BEQ.b CODE_279B67							; Note: This will always branch.

CODE_279B4C:
	LDY.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	LDA.w DATA_21AE78,y
	AND.b #$10
	BEQ.b CODE_279B67
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.w $0679,x
	AND.b #$BF
	DEY
	BEQ.b CODE_279B64
	ORA.b #$40
CODE_279B64:
	STA.w $0679,x
CODE_279B67:
	JSL.l CODE_27A4C7
CODE_279B6B:
	RTS

;--------------------------------------------------------------------

CODE_279B6C:
	JSR.w CODE_279917
	RTL

;--------------------------------------------------------------------

CODE_279B70:
	JSR.w CODE_27997B
	RTL

;--------------------------------------------------------------------

CODE_279B74:
	JSR.w CODE_279A76
	RTL

;--------------------------------------------------------------------

CODE_279B78:
	JSR.w CODE_279AEF
	RTL

;--------------------------------------------------------------------

CODE_279B7C:
	RTS

;--------------------------------------------------------------------

CODE_279B7D:
	RTL

;--------------------------------------------------------------------

	%ROUTINE_RT00_SMB3_NorSprStatus01_Init(NULLROM)			; $279B7E

;--------------------------------------------------------------------

; Note: Routine that stores the initial sprite tile properties of a normal sprite?

CODE_279BB8:
	LDY.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	LDA.w DATA_21B263,y
	AND.b #$07
	STA.w $1FE9,x
	RTL

;--------------------------------------------------------------------

CODE_279BC4:
	JSR.w CODE_279BE0
	RTL

;--------------------------------------------------------------------

CODE_279BC8:
	JSR.w CODE_279BDC
	RTL

;--------------------------------------------------------------------

CODE_279BCC:
	JSR.w CODE_279BD8
	RTL

;--------------------------------------------------------------------

CODE_279BD0:
	JSR.w CODE_279C34
	RTL

;--------------------------------------------------------------------

CODE_279BD4:
	JSR.w CODE_279C53
	RTL

;--------------------------------------------------------------------

; Note: Suboffscreen?

CODE_279BD8:
	LDA.b #$04
	BNE.b CODE_279BEF						; Note: This will always branch

CODE_279BDC:
	LDA.b #$02
	BNE.b CODE_279BEF						; Note: This will always branch

CODE_279BE0:
	LDA.w $1FF1,x
	BEQ.b CODE_279BED
	LDA.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,x
	BNE.b CODE_279BDC
	STA.w $1FF1,x
CODE_279BED:
	LDA.b #$00
CODE_279BEF:
	STA.b $00
	JSL.l SMB3_CheckIfNormalSpriteOffScreen_Main
	BEQ.b CODE_279C65
	LDA.w !RAM_SMB3_Level_IsVerticalLevelFlag
	BNE.b CODE_279C66
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	CMP.b #$02
	BPL.b CODE_279C34
	TXA
	CLC
	ADC.b !RAM_SMB3_Global_FrameCounter
	LSR
	BCS.b CODE_279C65
	AND.b #$01
	STA.b $01
	ADC.b $00
	TAY
	LDA.w $0210
	CLC
	ADC.w DATA_21AFE7,y
	ROL.b $00
	CMP.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	PHP
	LDA.b $12
	LSR.b $00
	ADC.w DATA_21AFED,y
	PLP
	SBC.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	STA.b $00
	LDY.b $01
	BEQ.b CODE_279C30
	EOR.b #$80
	STA.b $00
CODE_279C30:
	LDA.b $00
	BPL.b CODE_279C65
CODE_279C34:
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_NorSpr058_FireChomp
	BEQ.b CODE_279C4B
	CMP.b #!Define_SMB3_SpriteID_NorSpr04F_FreeChainChomp
	BEQ.b CODE_279C4B
	CMP.b #!Define_SMB3_SpriteID_NorSpr06A_LaunchingBlooperNanny
	BEQ.b CODE_279C4B
	CMP.b #!Define_SMB3_SpriteID_NorSpr061_FollowingBlooperNanny
	BEQ.b CODE_279C4B
	CMP.b #!Define_SMB3_SpriteID_NorSpr059_FireSnake
	BNE.b CODE_279C53
CODE_279C4B:
	LDY.w $0771,x
	LDA.b #$00
	STA.w $06B4,y
CODE_279C53:
	LDY.w $0659,x
	BMI.b CODE_279C60
	LDA.w $1B10,y
	AND.b #$7F
	STA.w $1B10,y
CODE_279C60:
	LDA.b #$00
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
CODE_279C65:
	RTS

CODE_279C66:
	LDA.b !RAM_SMB3_Global_FrameCounter
	LSR
	BCS.b CODE_279C65
	AND.b #$01
	STA.b $01
	TAY
	LDA.w $0543
	CLC
	ADC.w DATA_21AFE3,y
	ROL.b $00
	CMP.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	PHP
	LDA.w $0542
	LSR.b $00
	ADC.w DATA_21AFE5,y
	PLP
	SBC.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	STA.b $00
	LDY.b $01
	BEQ.b CODE_279C91
	EOR.b #$80
	STA.b $00
CODE_279C91:
	LDA.b $00
	BPL.b CODE_279C65
	BMI.b CODE_279C34						; Note: This will always branch

;--------------------------------------------------------------------

CODE_279C97:
	STZ.w $0691,x
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_NorSpr07F_GiantPiranhaPlantInGiantPipe
	BEQ.b CODE_279CA5
	CMP.b #!Define_SMB3_SpriteID_NorSpr07D_GiantPiranhaPlantInSmallPipe
	BNE.b CODE_279CAA
CODE_279CA5:
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	STA.w $0691,x
CODE_279CAA:
	LDA.b #$00
	STA.w $0689,x
	STA.b !RAM_SMB3_Level_NorSpr_OnScreenXPos,x
	STA.w $0518,x
	STA.w $0520,x
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	STA.w $0679,x
	STA.w $0669,x
	STA.w $0769,x
	STA.b $A7,x
	CPX.b #$06
	BCS.b CODE_279CD6
	STA.w $1A49,x
	STA.w $1A4F,x
	STA.w $06EB,x
	STA.w $06B7,x
CODE_279CD6:
	CPX.b #$05
	BCS.b CODE_279D14
	STA.w $0797,x
	STA.w $06AB,x
	STA.w $06A6,x
	STA.w $07B6,x
	STA.w $1021,x
	STA.b $68,x
	STA.b $4D,x
	STA.w $1FD2,x
	STA.w $0771,x
	STA.w $0776,x
	STA.w $077B,x
	STA.w $1FF9,x
	STA.w $1FF1,x
	STA.w $1CF6,x
	STA.w $1A49,x
	STA.w $1CC8,x
	STA.w $1CCD,x
	STA.w $1CD2,x
	STA.w $1CD7,x
	STA.w $1CDC,x
CODE_279D14:
	RTL

;--------------------------------------------------------------------

	%ROUTINE_RT00_SMB3_NorSprStatus02_Normal(NULLROM)				; $279D15

;--------------------------------------------------------------------

CODE_279D6F:
	PHX
	LDY.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	LDA.w DATA_21B1AF,y
	AND.b #$0F
	STA.b $00
	ASL
	CLC
	ADC.b $00
	TAX
	LDA.l DATA_279D95,x
	STA.b $00
	LDA.l DATA_279D95+$01,x
	STA.b $01
	LDA.l DATA_279D95+$02,x
	STA.b $02
	PLX
	JMP.w [$0000]

DATA_279D95:
	dl SMB3_NorSpr0XX_HotFoot_Status02_CODE_28B625
	dl CODE_279EBC
	dl CODE_279F52
	dl SMB3_NorSpr029_Spike_Status02_CODE_28BB64
	dl CODE_279B7D
	dl CODE_279DC2
	dl CODE_279F6C
	dl CODE_279B7D
	dl CODE_28BFD9
	dl CODE_279B7D
	dl CODE_279EDE
	dl CODE_28CE71
	dl CODE_279B7D
	dl SMB3_NorSpr040_BusterBeetle_Status02_CODE_28B3A6
	dl CODE_28BD52

;--------------------------------------------------------------------

CODE_279DC2:
	RTL

;--------------------------------------------------------------------

SMB3_GetNormalSpriteOnScreenPosition:
.Main:
;$279DC3
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	SEC
	SBC.w $0543
	STA.b !RAM_SMB3_Level_NorSpr_OnScreenYPos,x
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	SEC
	SBC.w $0210
	STA.b !RAM_SMB3_Level_NorSpr_OnScreenXPos,x
	RTL

;--------------------------------------------------------------------

CODE_279DD4:
	LDA.b $A7,x
	AND.b #$04
	BNE.b CODE_279DF8
CODE_279DDA:
	LDA.w $05FC
	BEQ.b CODE_279DF8
	LDA.w $0424
	CMP.b #$01
	BEQ.b CODE_279DF8
	LDY.b #$00
	LDA.w $0780
	BPL.b CODE_279DEE
	DEY
CODE_279DEE:
	CLC
	ADC.b $71,x
	STA.b $71,x
	TYA
	ADC.b $56,x
	STA.b $56,x
CODE_279DF8:
	RTL

;--------------------------------------------------------------------

CODE_279DF9:
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	SEC
	SBC.w $0543
	STA.b !RAM_SMB3_Level_NorSpr_OnScreenYPos,x
	STA.b $00
	SEC
	LDA.w $06AB,x
	BEQ.b CODE_279E10
	CMP.b #$40
	BCC.b CODE_279E0F
	LSR
	LSR
CODE_279E0F:
	LSR
CODE_279E10:
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	SBC.w $0210
	STA.b !RAM_SMB3_Level_NorSpr_OnScreenXPos,x
	STA.b $01
	LDA.w $0679,x
	STA.b $02
	AND.b #$30
	CMP.b #$10
	BEQ.b CODE_279E28
	LDA.b #$20
	TSB.b $02
CODE_279E28:
	LDY.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	LDA.w DATA_21B3CB,y
	AND.b #$01
	TSB.b $02
	LDY.w $0418
	LDA.w $0769,x
	BEQ.b CODE_279E58
	DEC.w $0769,x
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_NorSpr019_FireFlower
	BEQ.b CODE_279E58
	CMP.b #!Define_SMB3_SpriteID_NorSpr04B_BoomBoom
	BEQ.b CODE_279E52
	CMP.b #!Define_SMB3_SpriteID_NorSpr04C_FlyingBoomBoom
	BEQ.b CODE_279E52
	JSL.l CODE_27AA8E
	BRA.b CODE_279E56

CODE_279E52:
	JSL.l CODE_27AA75
CODE_279E56:
	BPL.b CODE_279E5B
CODE_279E58:
	LDA.w $1FE9,x
CODE_279E5B:
	ASL
	STA.b $03
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_NorSpr055_WindupBobOmb
	BNE.b CODE_279E67
	INC.b $03
CODE_279E67:
	LDA.w !RAM_SMB3_Level_NorSpr_YOffscreenFlag,x
	STA.b $04
	LDA.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,x
	STA.b $07
	LDA.w $0669,x
	ASL
	STA.b $05
	LDA.b $DE
	ASL
	CLC
	ADC.b $DE
	TAX
	LDA.l DATA_21B47F,x
	STA.b $D8
	LDA.l DATA_21B47F+$01,x
	STA.b $D9
	LDA.l DATA_21B47F+$02,x
	STA.b $DA
	LDA.b [$D8],y
	CLC
	ADC.b $05
	STA.b $05
	TAX
	LDY.b $9B
	LDA.w $00C6,y
	STA.b $06
	TAY
	RTL

;--------------------------------------------------------------------

; Note: Some sort of sprite graphics routine.

CODE_279EA1:
	JSL.l CODE_279DF9
	JSL.l CODE_279F91
	LDX.b $9B
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_NorSpr02F_Boo
	BNE.b CODE_279EBB
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	CMP.b #$06
	JSL.l CODE_29A412
CODE_279EBB:
	RTS

CODE_279EBC:
	JSR.w CODE_279EA1
	RTL

;--------------------------------------------------------------------

CODE_279EC0:
	JSR.w CODE_279EA1
	REP.b #$10
	LDY.w $00C6,x
	LDA.w SMB3_OAMBuffer[$00].Prop,y
	AND.b #$BF
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$02].Prop,y
	ORA.b #$40
	STA.w SMB3_OAMBuffer[$01].Prop,y
	STA.w SMB3_OAMBuffer[$03].Prop,y
	SEP.b #$10
	RTS

CODE_279EDE:
	JSR.w CODE_279EC0
	RTL

;--------------------------------------------------------------------

CODE_279EE2:
	JSR.w CODE_279F12
	REP.b #$10
	LDY.b $C6,x
	LDA.w $07F3,y
	AND.b #$BF
	STA.w $07F3,y
	STA.w $07FB,y
	ORA.b #$40
	STA.w $07F7,y
	STA.w $07FF,y
	LDA.w SMB3_OAMBuffer[$00].Prop,y
	AND.b #$BF
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$02].Prop,y
	ORA.b #$40
	STA.w SMB3_OAMBuffer[$01].Prop,y
	STA.w SMB3_OAMBuffer[$03].Prop,y
	SEP.b #$10
	RTL

;--------------------------------------------------------------------

; Note: Some sort of sprite graphics routine.

CODE_279F12:
	JSL.l CODE_279DF9
	LDX.b $9B
	LDA.w $0669,x
	ASL
	CLC
	ADC.b $05
	STA.b $05
	TAX
	LDA.b $02
	BPL.b CODE_279F28
	INX
	INX
CODE_279F28:
	JSL.l CODE_279F91
	REP.b #$20
	LDX.b $9B
	LDA.b $C6,x
	CLC
	ADC.w #$0010
	STA.b $C6,x
	SEP.b #$20
	LSR.b $04
	LDX.b $05
	LDA.b $02
	BMI.b CODE_279F44
	INX
	INX
CODE_279F44:
	LDA.b #$10
	CLC
	ADC.b $00
	STA.b $00
	JSL.l CODE_279F91
	LDX.b $9B
	RTS

CODE_279F52:
	JSR.w CODE_279F12
	RTL

;--------------------------------------------------------------------

CODE_279F56:
	JSL.l CODE_279DF9
	LDX.b $9B
	LDA.w $0669,x
	CLC
	ADC.b $05
	STA.b $05
	TAX
	JSL.l CODE_27A07A
	LDX.b $9B
	RTS

CODE_279F6C:
	JSR.w CODE_279F56
	RTL

;--------------------------------------------------------------------

CODE_279F70:
	LDA.b $8C,x
	BNE.b CODE_279F75
	RTL

CODE_279F75:
	BPL.b CODE_279F7B
	JSL.l SMB3_UnnecessaryInvertARt_Main
CODE_279F7B:
	AND.b #$F0
	LSR
	LSR
	LSR
	LSR
	TAY
	LDA.w DATA_21AFF7,y
	LDY.b #$00
	AND.b !RAM_SMB3_Global_FrameCounter
	BEQ.b CODE_279F8C
	INY
CODE_279F8C:
	TYA
	STA.w $0669,x
	RTL

;--------------------------------------------------------------------

; Note: Is this some sort of generic sprite graphics routine?

CODE_279F91:
	LDY.b $9B
	REP.b #$30
	LDA.w $00C6,y
	TAY
	SEP.b #$20
	LDA.b $04
	LSR
	BCC.b CODE_279FA3
	BRL.w CODE_27A077

CODE_279FA3:
	LDA.b $00
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	STA.w SMB3_OAMBuffer[$01].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$02].YDisp,y
	STA.w SMB3_OAMBuffer[$03].YDisp,y
	LDA.b $01
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$02].XDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	STA.w SMB3_OAMBuffer[$03].XDisp,y
	PHY
	PHX
	TXY
	REP.b #$20
	LDA.b $DE
	AND.w #$00FF
	STA.b $D8
	ASL
	CLC
	ADC.b $D8
	TAX
	SEP.b #$20
	LDA.w DATA_21B48E,x
	STA.b $D8
	LDA.w DATA_21B48E+$01,x
	STA.b $D9
	LDA.w DATA_21B48E+$02,x
	STA.b $DA
	LDA.b [$D8],y
	PHA
	INY
	LDA.b [$D8],y
	STA.b $D9
	PLA
	STA.b $D8
	PLX
	PLY
	LDA.b $D8
	STA.w SMB3_OAMBuffer[$00].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$02].Tile,y
	LDA.b $D9
	STA.w SMB3_OAMBuffer[$01].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$03].Tile,y
	LDA.b $02
	ORA.b $03
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$02].Prop,y
	STA.w SMB3_OAMBuffer[$01].Prop,y
	STA.w SMB3_OAMBuffer[$03].Prop,y
	BIT.b $02
	BVC.b CODE_27A036
	LDA.w SMB3_OAMBuffer[$00].Tile,y
	PHA
	LDA.w SMB3_OAMBuffer[$01].Tile,y
	STA.w SMB3_OAMBuffer[$00].Tile,y
	PLA
	STA.w SMB3_OAMBuffer[$01].Tile,y
	LDA.w SMB3_OAMBuffer[$02].Tile,y
	PHA
	LDA.w SMB3_OAMBuffer[$03].Tile,y
	STA.w SMB3_OAMBuffer[$02].Tile,y
	PLA
	STA.w SMB3_OAMBuffer[$03].Tile,y
CODE_27A036:
	BIT.b $02
	BPL.b CODE_27A056
	LDA.w SMB3_OAMBuffer[$00].Tile,y
	PHA
	LDA.w SMB3_OAMBuffer[$02].Tile,y
	STA.w SMB3_OAMBuffer[$00].Tile,y
	PLA
	STA.w SMB3_OAMBuffer[$02].Tile,y
	LDA.w SMB3_OAMBuffer[$01].Tile,y
	PHA
	LDA.w SMB3_OAMBuffer[$03].Tile,y
	STA.w SMB3_OAMBuffer[$01].Tile,y
	PLA
	STA.w SMB3_OAMBuffer[$03].Tile,y
CODE_27A056:
	REP.b #$20
	PHY
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b $07
	ROL
	ROL
	PHP
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$02].Slot,y
	PLP
	ROL
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$03].Slot,y
	PLY
CODE_27A077:
	SEP.b #$30
	RTL

;--------------------------------------------------------------------

CODE_27A07A:
	LDY.b $9B
	REP.b #$30
	LDA.w $00C6,y
	TAY
	SEP.b #$20
	LDA.b $04
	LSR
	BCS.b CODE_27A077
	LDA.b $00
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	STA.w SMB3_OAMBuffer[$01].YDisp,y
	STA.w SMB3_OAMBuffer[$02].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$03].YDisp,y
	STA.w SMB3_OAMBuffer[$04].YDisp,y
	STA.w SMB3_OAMBuffer[$05].YDisp,y
	LDA.b $01
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$03].XDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	STA.w SMB3_OAMBuffer[$04].XDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$02].XDisp,y
	STA.w SMB3_OAMBuffer[$05].XDisp,y
	PHY
	PHX
	TXY
	REP.b #$20
	LDA.b $DE
	AND.w #$00FF
	STA.b $D8
	ASL
	CLC
	ADC.b $D8
	TAX
	SEP.b #$20
	LDA.w DATA_21B48E,x
	STA.b $D8
	LDA.w DATA_21B48E+$01,x
	STA.b $D9
	LDA.w DATA_21B48E+$02,x
	STA.b $DA
	LDA.b [$D8],y
	STA.b $DB
	INY
	LDA.b [$D8],y
	STA.b $DC
	INY
	LDA.b [$D8],y
	STA.b $DD
	PLX
	PLY
	LDA.b $DB
	STA.w SMB3_OAMBuffer[$00].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$03].Tile,y
	LDA.b $DC
	STA.w SMB3_OAMBuffer[$01].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$04].Tile,y
	LDA.b $DD
	STA.w SMB3_OAMBuffer[$02].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$05].Tile,y
	LDA.b $02
	ORA.b $03
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$03].Prop,y
	STA.w SMB3_OAMBuffer[$01].Prop,y
	STA.w SMB3_OAMBuffer[$04].Prop,y
	STA.w SMB3_OAMBuffer[$02].Prop,y
	STA.w SMB3_OAMBuffer[$05].Prop,y
	BIT.b $02
	BPL.b CODE_27A14B
	LDA.w SMB3_OAMBuffer[$00].Tile,y
	PHA
	LDA.w SMB3_OAMBuffer[$03].Tile,y
	STA.w SMB3_OAMBuffer[$00].Tile,y
	PLA
	STA.w SMB3_OAMBuffer[$03].Tile,y
	LDA.w SMB3_OAMBuffer[$01].Tile,y
	PHA
	LDA.w SMB3_OAMBuffer[$04].Tile,y
	STA.w SMB3_OAMBuffer[$01].Tile,y
	PLA
	STA.w SMB3_OAMBuffer[$04].Tile,y
	LDA.w SMB3_OAMBuffer[$02].Tile,y
	PHA
	LDA.w SMB3_OAMBuffer[$05].Tile,y
	STA.w SMB3_OAMBuffer[$02].Tile,y
	PLA
	STA.w SMB3_OAMBuffer[$05].Tile,y
CODE_27A14B:
	BIT.b $02
	BVC.b CODE_27A16B
	LDA.w SMB3_OAMBuffer[$00].Tile,y
	PHA
	LDA.w SMB3_OAMBuffer[$02].Tile,y
	STA.w SMB3_OAMBuffer[$00].Tile,y
	PLA
	STA.w SMB3_OAMBuffer[$02].Tile,y
	LDA.w SMB3_OAMBuffer[$03].Tile,y
	PHA
	LDA.w SMB3_OAMBuffer[$05].Tile,y
	STA.w SMB3_OAMBuffer[$03].Tile,y
	PLA
	STA.w SMB3_OAMBuffer[$05].Tile,y
CODE_27A16B:
	REP.b #$20
	PHY
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b $07
	ROL
	ROL
	STA.b $09
	PHP
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$03].Slot,y
	LDA.b $09
	PLP
	ROL
	PHP
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$04].Slot,y
	PLP
	ROL
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$02].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$05].Slot,y
	PLY
	SEP.b #$30
	RTL

;--------------------------------------------------------------------

CODE_27A19E:
	PHX
	LDY.b #$07
CODE_27A1A1:
	STY.b $06
	LDX.b $9B
	LDA.w !RAM_SMB3_Global_RandomByte02,x
	AND.b #$07
	CLC
	ADC.b $06
	TAY
	LDA.w DATA_21AFFB,y
	TAY
	STY.b $08
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,y
	BEQ.b CODE_27A1D2
CODE_27A1B9:
	LDY.b $06
	DEY
	BPL.b CODE_27A1A1
	JSR.w CODE_27A203
	BCS.b CODE_27A1F2
	LDX.b #$20
	LDA.w !RAM_SMB3_Global_RandomByte02
	BPL.b CODE_27A1CC
	LDX.b #$30
CODE_27A1CC:
	STX.b $D8
	STZ.b $D9
	BRA.b CODE_27A1F2

CODE_27A1D2:
	TYA
	CLC
	ADC.w $055D
	ASL
	TAY
	REP.b #$20
	LDA.w DATA_21AF6E,y
	STA.b $D8
	SEP.b #$20
	REP.b #$10
	LDX.b $D8
	LDA.w SMB3_OAMBuffer[$00].YDisp,x
	CMP.b #$F0
	BEQ.b CODE_27A1F2
	SEP.b #$10
	BRL.w CODE_27A1B9

CODE_27A1F2:
	SEP.b #$10
	LDX.b $D8
	STX.b $06
	TXY
	PLX
	LDA.b $D8
	STA.b $C6,x
	LDA.b $D9
	STA.b $C7,x
	RTL

CODE_27A203:
	PHX
	REP.b #$30
	LDY.w #$000E
CODE_27A209:
	LDA.w DATA_21AF6E,y
	STA.b $D8
	TAX
	LDA.w SMB3_OAMBuffer[$00].YDisp,x
	AND.w #$00FF
	CMP.w #$00F0
	BEQ.b CODE_27A223
	DEY
	DEY
	BPL.b CODE_27A209
	SEP.b #$30
	PLX
	CLC
	RTS

CODE_27A223:
	SEP.b #$30
	PLX
	SEC
	RTS

;--------------------------------------------------------------------

CODE_27A228:
	PHX
	LDA.b $C6,x
	STA.b $DA
	LDA.b $C7,x
	STA.b $DB
	LDY.b #$07
CODE_27A233:
	STY.b $06
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,y
	BNE.b CODE_27A258
	TYA
	CLC
	ADC.w $055D
	ASL
	TAY
	REP.b #$30
	LDA.w DATA_21AF6E,y
	CMP.b $DA
	BEQ.b CODE_27A258
	STA.b $D8
	TAY
	LDA.w SMB3_OAMBuffer[$00].YDisp,y
	AND.w #$00FF
	CMP.w #$00F0
	BEQ.b CODE_27A26C
CODE_27A258:
	SEP.b #$30
	LDY.b $06
	DEY
	BPL.b CODE_27A233
	LDX.b #$20
	LDA.w !RAM_SMB3_Global_RandomByte02
	BPL.b CODE_27A268
	LDX.b #$30
CODE_27A268:
	STX.b $D8
	STZ.b $D9
CODE_27A26C:
	SEP.b #$30
	LDX.b $D8
	STX.b $06
	TXY
	PLX
	LDA.b $D8
	STA.b $C6,x
	LDA.b $D9
	STA.b $C7,x
	RTL

;--------------------------------------------------------------------

SMB3_CheckIfSpriteIsHorizontallyOffScreen:
.Main:
;$27A27D
	LDY.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	LDA.w DATA_21B047,y
	AND.b #$70
	LSR
	LSR
	LSR
	LSR
	TAY
SMB3_CheckIfSpriteIsHorizontallyOffScreen_Entry2:
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	CMP.b #$02
	BPL.b CODE_27A297
	LDA.b #$FC
	STA.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,x
	RTL

CODE_27A297:
	LDA.b #$00
	STA.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,x
CODE_27A29C:
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	STA.b $0E
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	STA.b $0F
	REP.b #$20
	LDA.w DATA_21B00A,y
	AND.w #$00FF
	CLC
	ADC.b $0E
	SEC
	SBC.w $0210
	CMP.w #$0100
	BCC.b CODE_27A2C3
	SEP.b #$20
	LDA.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,x
	ORA.w DATA_21B010,y
	STA.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,x
CODE_27A2C3:
	SEP.b #$20
	DEY
	BPL.b CODE_27A29C
	RTL

;--------------------------------------------------------------------

SMB3_CheckIfSpriteIsVerticallyOffScreen:
.Main:
;$27A2C9
	LDY.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	LDA.w DATA_21B047,y
	AND.b #$0C
	LSR
	LSR
	TAY
SMB3_CheckIfSpriteIsVerticallyOffScreen_Entry2:
	LDA.b #$01
	STA.b $02
	LDA.b #$00
	STA.w !RAM_SMB3_Level_NorSpr_YOffscreenFlag,x
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	STA.b $00
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	STA.b $01
CODE_27A2E5:
	LDA.b $01
	CLC
	ADC.b #$10
	STA.b $01
	BCC.b CODE_27A2F0
	INC.b $00
CODE_27A2F0:
	LDA.b $01
	SEC
	SBC.w $0543
	STA.b $03
	LDA.b $00
	SBC.w $0542
	BNE.b CODE_27A305
	LDA.b $03
	CMP.b #$F0
	BCC.b CODE_27A30D
CODE_27A305:
	LDA.b $02
	ORA.w !RAM_SMB3_Level_NorSpr_YOffscreenFlag,x
	STA.w !RAM_SMB3_Level_NorSpr_YOffscreenFlag,x
CODE_27A30D:
	ASL.b $02
	DEY
	BPL.b CODE_27A2E5
	RTL

;--------------------------------------------------------------------

; Note: Something related to player to normal sprite collision

CODE_27A313:
	JSR.w CODE_27A31C
	RTL

CODE_27A317:
	JSR.w CODE_27A320
	RTL

CODE_27A31B:
	RTS

CODE_27A31C:
	LDA.b #$01
	BRA.b CODE_27A322

CODE_27A320:
	LDA.b #$00
CODE_27A322:
	STA.b $0F
	LDA.w $0797,x
	AND.b #$FC
	STA.w $0797,x
	CLC
	LDA.b !RAM_SMB3_Level_Player_DeathState
	ORA.w $0583
	ORA.w !RAM_SMB3_Level_Player_BehindLayer1Flag
	BNE.b CODE_27A31B
	JSL.l CODE_27A414
	LDA.b !RAM_SMB3_Level_Player_CurrentPowerUp
	BEQ.b CODE_27A348
	LDA.b #$00
	LDY.w !RAM_SMB3_Level_Player_DuckingFlag
	BNE.b CODE_27A348
	LDA.b #$01
CODE_27A348:
	ASL
	ASL
	TAY
	LDA.b !RAM_SMB3_Level_Player_OnScreenXPos
	CLC
	ADC.w DATA_21B016,y
	STA.b $02
	LDA.b !RAM_SMB3_Level_Player_OnScreenYPos
	CLC
	ADC.w DATA_21B016+$02,y
	STA.b $06
	LDA.w DATA_21B016+$01,y
	STA.b $03
	LDA.w DATA_21B016+$03,y
	STA.b $07
	JSL.l CODE_27A460
	BCC.b CODE_27A31B
	STA.b $00
	LDA.w !RAM_SMB3_Level_IsVerticalLevelFlag
	BNE.b CODE_27A399
	LDA.b !RAM_SMB3_Level_Player_XPosLo
	SEC
	SBC.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	STA.b $0E
	LDA.b !RAM_SMB3_Level_Player_XPosHi
	SBC.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	STA.b $0D
	BPL.b CODE_27A391
	LDA.b $0E
	JSL.l SMB3_UnnecessaryInvertARt_Main
	STA.b $0E
	LDA.b $0D
	EOR.b #$FF
	ADC.b #$00
	STA.b $0D
CODE_27A391:
	LDA.b $0D
	BNE.b CODE_27A408
	LDA.b $0E
	BMI.b CODE_27A408
CODE_27A399:
	LDA.b !RAM_SMB3_Level_Player_YPosLo
	SEC
	SBC.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	STA.b $0E
	LDA.b !RAM_SMB3_Level_Player_YPosHi
	SBC.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	STA.b $0D
	BPL.b CODE_27A3B8
	LDA.b $0E
	JSL.l SMB3_UnnecessaryInvertARt_Main
	STA.b $0E
	LDA.b $0D
	EOR.b #$FF
	ADC.b #$00
	STA.b $0D
CODE_27A3B8:
	LDA.b $0D
	BNE.b CODE_27A408
	LDA.b $0E
	BMI.b CODE_27A408
	LDA.b $0B
	LSR
	BCC.b CODE_27A3D4
	LDA.b $00
	SEC
	SBC.b $0A
	CMP.b #$08
	BMI.b CODE_27A3D4
	LDA.b $0B
	EOR.b #$01
	STA.b $0B
CODE_27A3D4:
	LDA.b $0B
	ORA.w $0797,x
	STA.w $0797,x
	LDA.w !RAM_SMB3_Level_Player_StarPowerTimer
	BEQ.b CODE_27A40A
	LDY.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	LDA.w DATA_21AE78,y
	AND.b #$80
	BNE.b CODE_27A40A
	LDA.b #$06
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	LDA.b #$C8
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	LDA.b #!Define_SMAS_Sound0060_KickShell
	STA.w !RAM_SMB3_Global_SoundCh1
	LDA.b #$05
	JSL.l CODE_278A94
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.w DATA_21B01E,y
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_27A408:
	CLC
	RTS

CODE_27A40A:
	LDA.b $0F
	BNE.b CODE_27A412
	JSL.l CODE_27A49D
CODE_27A412:
	SEC
	RTS

;--------------------------------------------------------------------

; Note: Routine that gets sprite to sprite clipping values?

CODE_27A414:
	LDY.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	LDA.w DATA_21AE78,y
	AND.b #$0F
	ASL
	ASL
	TAY
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenXPos,x
	CLC
	ADC.w DATA_21AE38,y
	STA.b $00
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenYPos,x
	CLC
	ADC.w DATA_21AE38+$02,y
	STA.b $04
	LDA.w DATA_21AE38+$01,y
	STA.b $01
	LDA.w DATA_21AE38+$03,y
	STA.b $05
	RTL

;--------------------------------------------------------------------

; Note: Routine that gets sprite to sprite clipping values?

CODE_27A43A:
	LDY.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	LDA.w DATA_21AE78,y
	AND.b #$0F
	ASL
	ASL
	TAY
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenXPos,x
	CLC
	ADC.w DATA_21AE38,y
	STA.b $02
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenYPos,x
	CLC
	ADC.w DATA_21AE38+$02,y
	STA.b $06
	LDA.w DATA_21AE38+$01,y
	STA.b $03
	LDA.w DATA_21AE38+$03,y
	STA.b $07
	RTL

;--------------------------------------------------------------------

CODE_27A460:
	LDY.b #$00
	STY.b $0B
	LDA.b $02
	SEC
	SBC.b $00
	STA.b $0A
	ASL
	LDA.b $01
	BCC.b CODE_27A47C
	LDA.b $0A
	EOR.b #$FF
	STA.b $0A
	INC.b $0A
	INC.b $0B
	LDA.b $03
CODE_27A47C:
	CMP.b $0A
	BCC.b CODE_27A49C
	ASL.b $0B
	LDA.b $06
	SEC
	SBC.b $04
	STA.b $0A
	ASL
	LDA.b $05
	BCC.b CODE_27A49A
	LDA.b $0A
	EOR.b #$FF
	STA.b $0A
	INC.b $0A
	INC.b $0B
	LDA.b $07
CODE_27A49A:
	CMP.b $0A
CODE_27A49C:
	RTL

;--------------------------------------------------------------------

CODE_27A49D:
	REP.b #$30
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	AND.w #$00FF
	STA.b $00
	ASL
	CLC
	ADC.b $00
	TAX
	SEP.b #$20
	LDA.l DATA_288438,x
	STA.b $00
	LDA.l DATA_288438+$01,x
	STA.b $01
	LDA.l DATA_288438+$02,x
	STA.b $02
	SEP.b #$10
	LDX.b $9B
	JMP.w [$0000]

;--------------------------------------------------------------------

CODE_27A4C7:
	LDA.w !RAM_SMB3_Level_Player_HurtTimer
	ORA.w !RAM_SMB3_Level_Player_IsTanookiStatueTimer
	ORA.w !RAM_SMB3_Level_Player_StarPowerTimer
	ORA.w !RAM_SMB3_Level_Player_SmokePuffAnimationTimer
	ORA.b $9C
	ORA.w !RAM_SMB3_Level_Player_FreezePlayerTimer
	ORA.w $1CFF
	BEQ.b CODE_27A4E0
	JMP.w CODE_27A544

CODE_27A4E0:
	LDA.w !RAM_SMB3_Level_Player_InKuriboShoeFlag
	BNE.b CODE_27A4EB
	LDA.b !RAM_SMB3_Level_Player_CurrentPowerUp
	CMP.b #$04
	BMI.b CODE_27A516
CODE_27A4EB:
	LDA.b #!Define_SMAS_Sound0060_HurtWhileFlying
	STA.w !RAM_SMB3_Global_SoundCh1
	LDA.w !RAM_SMB3_Level_Player_InKuriboShoeFlag
	BEQ.b CODE_27A4F9
	LDA.b #$00
	BRA.b CODE_27A4FE

CODE_27A4F9:
	LDY.b !RAM_SMB3_Level_Player_CurrentPowerUp
	LDA.w DATA_21B024,y
CODE_27A4FE:
	STA.b $00
	JSR.w CODE_27A580
	LDA.w !RAM_SMB3_Level_Player_InKuriboShoeFlag
	BEQ.b CODE_27A50F
	LDA.b #$00
	STA.w !RAM_SMB3_Level_Player_InKuriboShoeFlag
	BRA.b CODE_27A538

CODE_27A50F:
	LDA.b #$02
	STA.w $0578
	BRA.b CODE_27A538

CODE_27A516:
	LDA.b !RAM_SMB3_Level_Player_CurrentPowerUp
	BEQ.b CODE_27A545
	LDA.b #$02
	STA.w $0578
	LDA.b !RAM_SMB3_Level_Player_CurrentPowerUp
	CMP.b #$04
	BPL.b CODE_27A52C
	LDA.b #!Define_SMAS_Sound0060_IntoPipe
	STA.w !RAM_SMB3_Global_SoundCh1
	LDA.b !RAM_SMB3_Level_Player_CurrentPowerUp
CODE_27A52C:
	CMP.b #$02
	BCS.b CODE_27A538
	LDA.b #$2F
	STA.w !RAM_SMB3_Level_Player_SizeChangeAnimationTimer
	DEC.w $0578
CODE_27A538:
	LDA.b #$71
	STA.w !RAM_SMB3_Level_Player_HurtTimer
	LDA.b #$00
	STA.w !RAM_SMB3_Level_Player_SomersaultJumpFlag
	BEQ.b CODE_27A579
CODE_27A544:
	RTL

CODE_27A545:
	LDX.b $9B
CODE_27A547:						; Note: Set Player death animation?
	LDA.b #!Define_SMB3_LevelMusic_MarioDied
	STA.w !RAM_SMB3_Global_MusicCh1
	LDA.b #$01
	STA.w $02D9
	STZ.b !RAM_SMB3_Level_Player_XSpeed
	STZ.b $C1
	STZ.w !RAM_SMB3_Level_Player_SomersaultJumpFlag
	STZ.w !RAM_SMB3_Level_Player_HurtTimer
	STZ.w !RAM_SMB3_Level_Player_InKuriboShoeFlag
	STZ.w !RAM_SMB3_Level_Player_StarPowerTimer
	STZ.w !RAM_SMB3_Level_PSwitchTimer
	STZ.w !RAM_SMB3_Level_Player_IsTanookiStatueTimer
	LDA.b #$01
	STA.w $0578
	LDA.b #$C0
	STA.b !RAM_SMB3_Level_Player_YSpeed
	LDA.b #$30
	STA.w $0510
	LDA.b #$01
	STA.b !RAM_SMB3_Level_Player_DeathState
CODE_27A579:
	LDA.b $BD
	AND.b #$7F
	STA.b $BD
	RTL

;--------------------------------------------------------------------

CODE_27A580:
	LDY.b #$05
CODE_27A582:
	LDA.w !RAM_SMB3_Level_ExtSpr_SpriteID,y
	BEQ.b CODE_27A58B
	DEY
	BPL.b CODE_27A582
	RTS

CODE_27A58B:
	LDA.b #!Define_SMB3_SpriteID_ExtSpr09_PowerDownSuit
	STA.w !RAM_SMB3_Level_ExtSpr_SpriteID,y
	LDA.b !RAM_SMB3_Level_Player_YPosLo
	STA.w !RAM_SMB3_Level_ExtSpr_YPosLo,y
	LDA.b !RAM_SMB3_Level_Player_YPosHi
	STA.w !RAM_SMB3_Level_ExtSpr_YPosHi,y
	LDA.b !RAM_SMB3_Level_Player_XPosLo
	STA.w !RAM_SMB3_Level_ExtSpr_XPosLo,y
	LDA.b $43
	STA.w !RAM_SMB3_Level_ExtSpr_XPosHi,y
	LDA.b #$D0
	STA.w !RAM_SMB3_Level_ExtSpr_YSpeed,y
	LDA.b #$00
	CMP.b $BD
	LDA.b #$10
	BCS.b CODE_27A5B3
	LDA.b #$F0
CODE_27A5B3:
	STA.w !RAM_SMB3_Level_ExtSpr_XSpeed,y
	LDA.b $00
	STA.w $06C7,y
	RTS

;--------------------------------------------------------------------

CODE_27A5BC:
	LDA.w $0797,x
	AND.b #$F7
	STA.w $0797,x
	JSR.w CODE_27A5E1
	LDA.w $07B3
	CMP.b #$FF
	BEQ.b CODE_27A5E0
	STA.b $06
	LDA.b #$0F
	STA.b $07
	LDA.w $07B4
	STA.b $02
	LDA.b #$0F
	STA.b $03
	JSR.w CODE_27A615
CODE_27A5E0:
	RTS

CODE_27A5E1:
	LDA.w !RAM_SMB3_Level_Player_TailSwipeTimer
	BEQ.b CODE_27A5E0
	CMP.b #$0C
	BEQ.b CODE_27A5EE
	CMP.b #$09
	BNE.b CODE_27A5E0
CODE_27A5EE:
	LDA.b $BD
	AND.b #$40
	TAY
	BEQ.b CODE_27A5F7
	LDY.b #$01
CODE_27A5F7:
	LDA.w DATA_21B02D,y
	CLC
	ADC.b !RAM_SMB3_Level_Player_OnScreenXPos
	STA.b $02
	LDA.b #$0A
	STA.b $03
	LDA.b !RAM_SMB3_Level_Player_OnScreenYPos
	CLC
	ADC.b #$10
	STA.b $06
	LDA.b #$0F
	STA.b $07
	LDA.w !RAM_SMB3_Level_Player_IsAboveTopOfLevelFlag
	CMP.b #$FE
	BEQ.b CODE_27A5E0
CODE_27A615:
	LDY.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	LDA.w DATA_21B033,y
	BNE.b CODE_27A5E0
	JSL.l SMB3_CheckIfNormalSpriteOffScreen_Main
	BNE.b CODE_27A5E0
	JSL.l CODE_27A414
	JSL.l CODE_27A460
	BCC.b CODE_27A5E0
	LDA.w $0797,x
	ORA.b #$08
	STA.w $0797,x
	LDY.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	LDA.w DATA_21B1AF,y
	AND.b #$80
	BNE.b CODE_27A5E0
	LDA.b $03
	CMP.b #$0F
	BEQ.b CODE_27A67A
	LDY.b #$00
	LDA.b $BD
	BEQ.b CODE_27A64C
	INY
CODE_27A64C:
	LDA.b !RAM_SMB3_Level_Player_XPosLo
	STA.b $D8
	LDA.b $43
	STA.b $D9
	SEP.b #$20
	LDA.w DATA_21B031,y
	AND.b #$FF
	CMP.b #$80
	BCC.b CODE_27A661
	ORA.b #$00
CODE_27A661:
	CLC
	ADC.b $D8
	SEP.b #$20
	STA.w $1A48
	XBA
	STA.w $027E
	LDA.b !RAM_SMB3_Level_Player_YPosLo
	CLC
	ADC.b #$10
	STA.w $1A47
	LDA.b #$0A
	STA.w $1A46
CODE_27A67A:
	LDA.b #$0C
	STA.w $0520,x
	LDA.b #!Define_SMAS_Sound0060_KickShell
	STA.w !RAM_SMB3_Global_SoundCh1
	LDY.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	LDA.w DATA_21B1AF,y
	AND.b #$40
	BNE.b CODE_27A69E
	LDA.w !RAM_SMB3_Level_Player_SlidingXSpeed
	BNE.b CODE_27A69A
	LDA.w !RAM_SMB3_Level_ConsecutiveEnemiesStompedCounter
	JSL.l CODE_278A8A
CODE_27A69A:
	LDA.b #$06
	BNE.b CODE_27A6CB
CODE_27A69E:
	PHX
	REP.b #$30
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	AND.w #$00FF
	STA.b $D8
	ASL
	CLC
	ADC.b $D8
	TAX
	LDA.l DATA_288438,x
	STA.b $D8
	SEP.b #$30
	PLX
	LDA.b $D9
	AND.b #$F8
	CMP.b #$08
	BNE.b CODE_27A6C4
	LDA.b $D8
	STA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
CODE_27A6C4:
	LDA.b #$FF
	STA.w $06A6,x
	LDA.b #$03
CODE_27A6CB:
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	LDA.b #$D0
	LDY.b $03
	CPY.b #$0F
	BEQ.b CODE_27A6D8
	LDA.b #$B0
CODE_27A6D8:
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.w DATA_21B02B,y
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	LDA.w $0679,x
	ORA.b #$80
	STA.w $0679,x
	RTS

;--------------------------------------------------------------------

CODE_27A6EC:
	JSR.w CODE_27A6F0
	RTL

CODE_27A6F0:
	LDA.w !RAM_SMB3_Level_NorSpr_YOffscreenFlag,x
	BNE.b CODE_27A74F
	LDA.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,x
	AND.b #$C0
	CMP.b #$C0
	BEQ.b CODE_27A74F
	JSL.l CODE_27A43A
CODE_27A702:
	LDX.b #$04
CODE_27A704:
	CPX.b $9B
	BEQ.b CODE_27A74C
	LDY.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	LDA.w DATA_21B033,y
	BNE.b CODE_27A74C
	LDA.w !RAM_SMB3_Level_NorSpr_YOffscreenFlag,x
	BNE.b CODE_27A74C
	LDA.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,x
	AND.b #$C0
	CMP.b #$C0
	BEQ.b CODE_27A74C
	JSL.l CODE_27A414
	JSL.l CODE_27A460
	BCC.b CODE_27A74C
	LDY.b $9B
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	SEC
	SBC.w !RAM_SMB3_Level_NorSpr_XPosLo,y
	PHA
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	SBC.w !RAM_SMB3_Level_NorSpr_XPosHi,y
	STA.b $00
	PLA
	ADC.b #$80
	LDA.b $00
	ADC.b #$00
	BNE.b CODE_27A74C
	SEC
	LDY.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	LDA.w DATA_21AE78,y
	AND.b #$80
	BEQ.b CODE_27A752
CODE_27A74C:
	DEX
	BPL.b CODE_27A704
CODE_27A74F:
	CLC
	BCC.b CODE_27A757						; Note: This will always branch.

CODE_27A752:
	TXA
	TAY
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,y
CODE_27A757:
	LDX.b $9B
	RTS

CODE_27A75A:
	JSR.w CODE_27A702
	RTL

;--------------------------------------------------------------------

CODE_27A75E:
	PHA
	LDA.w !RAM_SMB3_Level_IsVerticalLevelFlag
	BEQ.b CODE_27A77F
	LDY.b $0C
	LDA.b $0D
	JSL.l CODE_209F86
	PHA
	PHX
	TYX
	LDA.l DATA_21823C,x
	STA.b $00
	LDA.l DATA_21824C,x
	STA.b $01
	PLX
	PLA
	BRA.b CODE_27A799

CODE_27A77F:
	PHX
	LDA.b $0E
	ASL
	TAX
	LDA.l DATA_218200,x
	STA.b $00
	LDA.l DATA_218200+$01,x
	STA.b $01
	PLX
	LDA.b $0C
	BEQ.b CODE_27A797
	INC.b $01
CODE_27A797:
	LDA.b $0D
CODE_27A799:
	AND.b #$F0
	STA.b $02
	LDA.b $0F
	LSR
	LSR
	LSR
	LSR
	ORA.b $02
	TAY
	LDA.b #$7E2000>>16
	STA.b $02
	PLA
	STA.b [$00],y
	RTL

;--------------------------------------------------------------------

CODE_27A7AE:
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	SEC
	SBC.b !RAM_SMB3_Level_Player_XPosLo
	STA.b $0E
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	SBC.b !RAM_SMB3_Level_Player_XPosHi
	LSR
	ROR.b $0E
	LSR
	ROR.b $0E
	ASL
	AND.b #$40
	STA.b $0F
	RTL

CODE_27A7C5:
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	SEC
	SBC.b !RAM_SMB3_Level_Player_YPosLo
	STA.b $0E
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	SBC.b !RAM_SMB3_Level_Player_YPosHi
	STA.b $0F
	LSR
	ROR.b $0E
	LSR
	ROR.b $0E
	RTL

;--------------------------------------------------------------------

CODE_27A7D9:
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	BMI.b CODE_27A7E5
	CMP.b #$40
	BMI.b CODE_27A7E5
	LDA.b #$40
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_27A7E5:
	TXA
	CLC
	ADC.b #$12
	TAX
	JSR.w SMB3_UpdateNormalSpritePosition_Y
	LDX.b $9B
	RTL

;--------------------------------------------------------------------

; Note: Something related to X speed.

CODE_27A7F0:
	JSR.w SMB3_UpdateNormalSpritePosition_X
	LDY.w !RAM_SMB3_Level_IsVerticalLevelFlag
	BEQ.b CODE_27A806
	PHA
	LDY.w !RAM_SMB3_Level_NorSpr_SpriteID
	LDA.w DATA_21B0FB,x
	AND.b #$08
	BNE.b CODE_27A805
	STA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
CODE_27A805:
	PLA
CODE_27A806:
	RTL

;--------------------------------------------------------------------

	%ROUTINE_SMB3_UpdateNormalSpritePosition(NULLROM)		; $27A807
	%ROUTINE_SMB3_CheckPlayerPositionRelativeToSprite(NULLROM)	; $27A838
	%ROUTINE_SMB3_UnnecessaryInvertARt(NULLROM)			; $27A85A

;--------------------------------------------------------------------

SMB3_CheckIfNormalSpriteOffScreen:
.Main:
;$27A860
	LDA.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,x
	ORA.w !RAM_SMB3_Level_NorSpr_YOffscreenFlag,x
	RTL

;--------------------------------------------------------------------

CODE_27A867:
	LDY.b #$04
CODE_27A869:
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,y
	BEQ.b CODE_27A871
	DEY
	BPL.b CODE_27A869
CODE_27A871:
	RTS

;--------------------------------------------------------------------

CODE_27A872:
	LDA.b !RAM_SMB3_Level_Player_YPosHi
	STA.b $0C
	LDA.b $09
	CLC
	ADC.b !RAM_SMB3_Level_Player_YPosLo
	STA.b $0D
	BCC.b CODE_27A881
	INC.b $0C
CODE_27A881:
	LDA.b $0C
	BNE.b CODE_27A890
	LDA.b $0D
	SEC
	SBC.b #$10
	STA.b $0D
	BCS.b CODE_27A890
	DEC.b $0C
CODE_27A890:
	LDA.b $43
	STA.b $0E
	LDA.b $0A
	BPL.b CODE_27A89A
	DEC.b $0E
CODE_27A89A:
	LDA.b !RAM_SMB3_Level_Player_XPosLo
	CLC
	ADC.b $0A
	STA.b $0F
	BCC.b CODE_27A8A5
	INC.b $0E
CODE_27A8A5:
	STY.b $09
	STX.b $0A
	JSL.l CODE_209FA5
	LDY.b $09
	LDX.b $0A
	RTS

;--------------------------------------------------------------------

CODE_27A8B2:
	LDY.b #$00
	LDA.w $052E,y
	BEQ.b CODE_27A8BF
	INY
	LDA.w $052E,y
	BNE.b CODE_27A8D8
CODE_27A8BF:
	LDA.b $0B
	STA.w $052E,y
	LDA.b $0E
	STA.w $0531,y
	LDA.b $0F
	STA.w $0534,y
	LDA.b $0C
	STA.w $0537,y
	LDA.b $0D
	STA.w $053A,y
CODE_27A8D8:
	RTL

;--------------------------------------------------------------------

; Note: Seems to be the routine for handling opening a toad house chest.

CODE_27A8D9:
	STX.w !RAM_SMB3_NorSpr035_ToadHouseChestItem_ItemToGive
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo
	LSR
	LSR
	STA.b $00
	LDY.w !RAM_SMB3_Level_Player_CurrentCharacter
	BEQ.b CODE_27A8E9
	LDY.b #SMB3_IndividualPlayerData[$01].ReserveSlots-SMB3_IndividualPlayerData[$00].ReserveSlots
CODE_27A8E9:
	LDX.b #$00
CODE_27A8EB:
	LDA.w SMB3_IndividualPlayerData[$00].ReserveSlots,y
	BEQ.b CODE_27A8F6
	INY
	INX
	CPX.b #SMB3_IndividualPlayerData[$00].CardSlots-SMB3_IndividualPlayerData[$00].ReserveSlots-$01
	BCC.b CODE_27A8EB
CODE_27A8F6:
	STY.w !RAM_SMB3_NorSpr035_ToadHouseChestItem_ReserveBoxSlotIndex
	TXA
	LDY.b #$03
CODE_27A8FC:
	CMP.b #$07
	BCC.b CODE_27A905
	SBC.b #$07
	DEY
	BNE.b CODE_27A8FC
CODE_27A905:
	TAX
	LDA.w DATA_21B03C,y
	STA.w !RAM_SMB3_NorSpr035_ToadHouseChestItem_ReserveBoxPageIndex
	LDA.b #$02
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus
	LDA.b #!Define_SMB3_SpriteID_NorSpr035_ToadHouseChestItem
	STA.w !RAM_SMB3_Level_NorSpr_SpriteID
	LDA.b #$90
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo
	LDA.w DATA_21B040,x
	LSR
	LSR
	SEC
	SBC.b $00
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed
	LDA.b #$D0
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed
	LDA.b #$00
	STA.w $074F
	STA.w $0758
	LDA.b #$FF
	STA.w !RAM_SMB3_NorSpr035_ToadHouseChestItem_WaitBeforeExitingLevelTimer
	STA.b !RAM_SMB3_NorSpr035_ToadHouseChestItem_OpenReserveBoxFlag
	LDA.b #!Define_SMAS_Sound0063_OpenBox2
	STA.w !RAM_SMB3_Global_SoundCh3
	RTL

;--------------------------------------------------------------------

CODE_27A93D:
	LDA.w $05FF
	STA.w $05FE
	JSR.w CODE_27A9B3
	LDY.b #$00
	LDA.w $1A13
	LSR
	BCC.b CODE_27A952
	INY
	DEC.w $0781
CODE_27A952:
	LDA.w $0781
	STA.l $7E3952
	STY.w $0781
	CLC
	ADC.b !RAM_SMB3_Level_Player_XPosLo
	STA.b !RAM_SMB3_Level_Player_XPosLo
	BCC.b CODE_27A965
	INC.b $43
CODE_27A965:
	LDY.b #$00
	LDA.w $1A13
	LSR
	BCC.b CODE_27A971
	DEY
	INC.w $0780
CODE_27A971:
	LDA.w $0780
	STA.l $7E3953
	STY.w $0780
	LDY.b $A6
	BEQ.b CODE_27A98A
	LDY.b #$00
	CLC
	ADC.w $0780
	CMP.b #$FF
	BNE.b CODE_27A98A
	DEY
CODE_27A98A:
	CLC
	ADC.b !RAM_SMB3_Level_Player_YPosLo
	STA.b !RAM_SMB3_Level_Player_YPosLo
	TYA
	ADC.b !RAM_SMB3_Level_Player_YPosHi
	STA.b !RAM_SMB3_Level_Player_YPosHi
	RTL

;--------------------------------------------------------------------

CODE_27A995:
	JSR.w CODE_27A9B3
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	CLC
	ADC.l $7E3952
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	BCC.b CODE_27A9A5
	INC.b !RAM_SMB3_Level_NorSpr_XPosHi,x
CODE_27A9A5:
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	CLC
	ADC.l $7E3953
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	BCC.b CODE_27A9B2
	INC.b !RAM_SMB3_Level_NorSpr_YPosHi,x
CODE_27A9B2:
	RTL

;--------------------------------------------------------------------

CODE_27A9B3:
	LDA.w $05FE
	BEQ.b CODE_27A9BC
	LDA.b $9C
	BEQ.b CODE_27A9BF
CODE_27A9BC:
	PLA
	PLA
	RTL

CODE_27A9BF:
	RTS

;--------------------------------------------------------------------

; Note: Something related to stomping on enemies?

CODE_27A9C0:
	LDA.w !RAM_SMB3_Level_IsVerticalLevelFlag
	BEQ.b CODE_27A9FE
	LDA.b $C6,x
	STA.b $DA
	LDA.b $C7,x
	STA.b $DB
	JSL.l CODE_27A19E
	REP.b #$30
	LDA.b $DA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b #$00
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$02].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$03].Slot,y
	LDY.b $DA
	LDX.w #$0000
	LDA.w SMB3_OAMBuffer[$00].XDisp,y
	CMP.b #$F8
	BCS.b CODE_27AA01
	LDX.w #$0004
	LDA.w SMB3_OAMBuffer[$01].XDisp,y
	CMP.b #$F8
	BCS.b CODE_27AA01
CODE_27A9FE:
	BRL.w CODE_27AA5A

CODE_27AA01:
	STX.b $DC
	REP.b #$20
	TYA
	CLC
	ADC.b $DC
	TAY
	LDA.b $D8
	CLC
	ADC.b $DC
	TAX
	SEP.b #$20
	LDA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$00].XDisp,x
	STA.w SMB3_OAMBuffer[$02].XDisp,x
	LDA.w SMB3_OAMBuffer[$00].YDisp,y
	STA.w SMB3_OAMBuffer[$00].YDisp,x
	LDA.w SMB3_OAMBuffer[$02].YDisp,y
	STA.w SMB3_OAMBuffer[$02].YDisp,x
	LDA.w SMB3_OAMBuffer[$00].Tile,y
	STA.w SMB3_OAMBuffer[$00].Tile,x
	LDA.w SMB3_OAMBuffer[$02].Tile,y
	STA.w SMB3_OAMBuffer[$02].Tile,x
	LDA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$00].Prop,x
	LDA.w SMB3_OAMBuffer[$02].Prop,y
	STA.w SMB3_OAMBuffer[$02].Prop,x
	REP.b #$20
	TXA
	LSR
	LSR
	TAX
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b #$00
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,x
	STA.w SMB3_OAMTileSizeBuffer[$02].Slot,x
	INC
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$02].Slot,y
CODE_27AA5A:
	SEP.b #$10
	LDX.b $9B
	RTS

;--------------------------------------------------------------------

DATA_27AA5F:
	db SMB3_AutoScrollMovementsTable_Level1_4-SMB3_AutoScrollMovementsTable-$01
	db SMB3_AutoScrollMovementsTable_World3Airship-SMB3_AutoScrollMovementsTable-$01
	db SMB3_AutoScrollMovementsTable_Level6_2-SMB3_AutoScrollMovementsTable-$01
	db SMB3_AutoScrollMovementsTable_World5Airship-SMB3_AutoScrollMovementsTable-$01
	db SMB3_AutoScrollMovementsTable_UNK_218274-SMB3_AutoScrollMovementsTable-$01
	db SMB3_AutoScrollMovementsTable_World4Airship-SMB3_AutoScrollMovementsTable-$01
	db SMB3_AutoScrollMovementsTable_World6Airship-SMB3_AutoScrollMovementsTable-$01
	db SMB3_AutoScrollMovementsTable_Level5_6-SMB3_AutoScrollMovementsTable-$01
	db SMB3_AutoScrollMovementsTable_UNK_2182D4-SMB3_AutoScrollMovementsTable-$01
	db SMB3_AutoScrollMovementsTable_UNK_2182E3-SMB3_AutoScrollMovementsTable-$01
	db SMB3_AutoScrollMovementsTable_Level6_7-SMB3_AutoScrollMovementsTable-$01
	db SMB3_AutoScrollMovementsTable_World1Airship-SMB3_AutoScrollMovementsTable-$01
	db SMB3_AutoScrollMovementsTable_World7Airship-SMB3_AutoScrollMovementsTable-$01
	db SMB3_AutoScrollMovementsTable_World8Airship-SMB3_AutoScrollMovementsTable-$01
	db SMB3_AutoScrollMovementsTable_World8Boat-SMB3_AutoScrollMovementsTable-$01
	db SMB3_AutoScrollMovementsTable_Level7_4-SMB3_AutoScrollMovementsTable-$01
	db SMB3_AutoScrollMovementsTable_CoinHeaven-SMB3_AutoScrollMovementsTable-$01
	db SMB3_AutoScrollMovementsTable_CoinShip-SMB3_AutoScrollMovementsTable-$01
	db SMB3_AutoScrollMovementsTable_UNK_218358-SMB3_AutoScrollMovementsTable-$01
	db SMB3_AutoScrollMovementsTable_World8Tank1-SMB3_AutoScrollMovementsTable-$01
	db SMB3_AutoScrollMovementsTable_World8Tank2-SMB3_AutoScrollMovementsTable-$01
	db SMB3_AutoScrollMovementsTable_End-SMB3_AutoScrollMovementsTable-$01

;--------------------------------------------------------------------

CODE_27AA75:
	PHB
	PHK
	PLB
	PHX
	LDA.b !RAM_SMB3_Global_FrameCounter
	LSR
	LSR
	AND.b #$07
	TAX
	LDA.w DATA_27AA86,x
	PLX
	PLB
	RTL

DATA_27AA86:
	db $02,$04,$03,$04,$00,$04,$01,$04

;--------------------------------------------------------------------

CODE_27AA8E:
	PHB
	PHK
	PLB
	PHX
	LDA.b !RAM_SMB3_Global_FrameCounter
	LSR
	AND.b #$03
	TAX
	LDA.w DATA_27AA9E,x
	PLX
	PLB
	RTL

DATA_27AA9E:
	db $00,$01,$02,$01

if !Define_Global_ROMToAssemble&(!ROM_SMAS_U) != $00
%FREE_BYTES(NULLROM, 1375, $FF)
else
%FREE_BYTES(NULLROM, 1374, $FF)
endif

;--------------------------------------------------------------------

; Note: Some sort of player to level collision routine.

CODE_27B000:
	LDA.b !RAM_SMB3_Level_Player_DeathState
	BNE.b CODE_27B07F
	LDA.w !RAM_SMB3_Level_IsVerticalLevelFlag
	BEQ.b CODE_27B00C
	JMP.w CODE_27B0EE

CODE_27B00C:
	LDA.b !RAM_SMB3_Level_Player_YPosLo
	CLC
	ADC.b #$20
	AND.b #$F0
	STA.b $04
	LDA.b !RAM_SMB3_Level_Player_YPosHi
	ADC.b #$00
	AND.b #$01
	STA.b $02
	LDA.b !RAM_SMB3_Level_Player_XPosLo
	CLC
	ADC.b #$08
	AND.b #$F0
	STA.b $03
	LDA.b !RAM_SMB3_Level_Player_XPosHi
	ADC.b #$00
	STA.b $05
	CMP.b #$10
	BCS.b CODE_27B07F
	PHX
	ASL
	TAX
	LDA.l DATA_218200,x
	STA.b $2E
	STA.b $D8
	LDA.l DATA_218200+$01,x
	CLC
	ADC.b $02
	STA.b $2F
	CLC
	ADC.b #$20
	STA.b $D9
	LDA.b #$7E2000>>16
	STA.b $30
	STA.b $DA
	PLX
	LDA.b $03
	LSR
	LSR
	LSR
	LSR
	ORA.b $04
	TAY
	LDA.b [$D8],y
	BEQ.b CODE_27B075
	PHX
	LDA.w !RAM_SMB3_Global_TilesetFromHeader
	ASL
	TAX
	LDA.w DATA_21AB57,x
	STA.b $DB
	LDA.w DATA_21AB57+$01,x
	STA.b $DC
	LDA.b [$2E],y
	TAY
	LDA.b ($DB),y
	PLX
	BRA.b CODE_27B077

CODE_27B075:
	LDA.b [$2E],y
CODE_27B077:
	CMP.b #$F3
	BNE.b CODE_27B080
	LDA.b #$D0
	STA.b !RAM_SMB3_Level_Player_YSpeed
CODE_27B07F:
	RTS

CODE_27B080:
	CMP.b #$94
	BNE.b CODE_27B092
	LDY.w !RAM_SMB3_Global_TilesetFromHeader
	CPY.b #$0B
	BEQ.b CODE_27B08F
	CPY.b #$02
	BNE.b CODE_27B092
CODE_27B08F:
	JMP.w CODE_27B1BE

CODE_27B092:
	CMP.b #$5B
	BNE.b CODE_27B0ED
CODE_27B096:
	LDY.w !RAM_SMB3_Global_TilesetFromHeader
	CPY.b #$04
	BEQ.b CODE_27B0A9
	CPY.b #$08
	BEQ.b CODE_27B0A9
	CPY.b #$0C
	BEQ.b CODE_27B0A9
	CPY.b #$02
	BNE.b CODE_27B07F
CODE_27B0A9:
	LDA.w $0564
	BNE.b CODE_27B07F
	JSR.w CODE_27DC88
	LDA.b #!Define_SMB3_SpriteID_NorSpr054_DonutBlock
	STA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	LDA.b $04
	SEC
	SBC.b #$01
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	LDA.b $02
	SBC.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	LDA.b $03
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	LDA.b $05
	STA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	LDA.b #$20
	STA.b !RAM_SMB3_NorSpr054_DonutBlock_ShakingTimer,x
	LDA.b #$03
	STA.w $1FE9,x
	LDA.b #$02
	STA.w $0564
	LDA.b $02
	STA.w $052A
	LDA.b $04
	STA.w $052B
	LDA.b $03
	STA.w $0529
	LDA.b $05
	STA.w $0528
CODE_27B0ED:
	RTS

CODE_27B0EE:
	LDA.b !RAM_SMB3_Level_Player_YPosLo
	CLC
	ADC.b #$21
	AND.b #$F0
	STA.b $00
	STA.b $04
	LDA.b !RAM_SMB3_Level_Player_YPosHi
	ADC.b #$00
	STA.b $02
	ORA.b #$20
	STA.b $01
	STA.b $D9
	CLC
	ADC.b #$20
	STA.b $DC
	LDA.b !RAM_SMB3_Level_Player_XPosLo
	CLC
	ADC.b #$08
	AND.b #$F0
	STA.b $03
	LSR
	LSR
	LSR
	LSR
	ORA.b $00
	STA.b $00
	STA.b $D8
	STA.b $DB
	LDY.b #$00
	STY.b $05
	LDA.b #$7E2000>>16
	STA.b $DA
	STA.b $DD
	LDA.b [$DB],y
	BEQ.b CODE_27B145
	PHX
	LDA.w !RAM_SMB3_Global_TilesetFromHeader
	ASL
	TAX
	LDA.w DATA_21AB57,x
	STA.b $DB
	LDA.w DATA_21AB57+$01,x
	STA.b $DC
	LDA.b [$D8],y
	TAY
	LDA.b ($DB),y
	PLX
	BRA.b CODE_27B147

CODE_27B145:
	LDA.b [$D8],y
CODE_27B147:
	CMP.b #$5B
	BNE.b CODE_27B14E
	JMP.w CODE_27B096

CODE_27B14E:
	LDY.b $A6
	BNE.b CODE_27B0ED
	LDY.w $07BD
	BNE.b CODE_27B0ED
	CMP.b #$54
	BCC.b CODE_27B0ED
	CMP.b #$5D
	BCS.b CODE_27B0ED
	SEC
	SBC.b #$54
	TAY
	LDA.b #$FF
	STA.b $02
	LDX.b #$04
CODE_27B169:
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	BEQ.b CODE_27B17F
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_NorSpr0A8_StaticOutlinePlatform
	BCC.b CODE_27B181
	CMP.b #!Define_SMB3_SpriteID_NorSpr0A9_SwitchableOutlinePlatform+$01
	BCS.b CODE_27B181
	JSR.w CODE_279C60
	JMP.w CODE_27B17F

CODE_27B17F:
	STX.b $02
CODE_27B181:
	DEX
	BPL.b CODE_27B169
	LDX.b $02
	BMI.b CODE_27B1BD
	LDA.b #$02
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	LDA.w DATA_21C6C9,y
	STA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	LDA.w DATA_21C6D2,y
	STA.b !RAM_SMB3_NorSprXXX_OutlinePlatform_MovementDirection,x
	LDA.b $00
	AND.b #$F0
	SEC
	SBC.b #$01
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	LDA.b $01
	SBC.b #$00
	AND.b #$0F
	STA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	LDA.b $00
	ASL
	ASL
	ASL
	ASL
	CLC
	ADC.w DATA_21C6DB,y
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	LDA.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$CC
else
	LDA.b #$FF
endif
	STA.b !RAM_SMB3_NorSprXXX_OutlinePlatform_DespawnTimer,x
CODE_27B1BD:
	RTS

CODE_27B1BE:
	LDA.b #$01
	STA.w $0578
	JSL.l CODE_27A547
	RTS

;--------------------------------------------------------------------

CODE_27B1C8:
	LDX.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	LDA.w !RAM_SMB3_Level_ScreenFlashTimer
	BEQ.b CODE_27B1FC
	PHA
	AND.b #$03
	TAY
	DEC.w !RAM_SMB3_Level_ScreenFlashTimer
	PLA
	BPL.b CODE_27B1FD
	AND.b #$7F
	BNE.b CODE_27B1E1
	STA.w !RAM_SMB3_Level_ScreenFlashTimer
CODE_27B1E1:
	TYA
	ASL
	TAY
	REP.b #$20
	LDA.w DATA_21C6E4,y
	STA.w SMB3_PaletteMirror[$51].LowByte
	STA.w SMB3_PaletteMirror[$52].LowByte
	STA.w SMB3_PaletteMirror[$53].LowByte
	STA.w SMB3_PaletteMirror[$61].LowByte
	SEP.b #$20
	LDA.b #$01
	STA.w !RAM_SMB3_Global_UpdateEntirePaletteFlag
CODE_27B1FC:
	RTS

CODE_27B1FD:
	REP.b #$20
	LDA.w !RAM_SMB3_Level_ScreenFlashTimer
	AND.w #$00FF
	BEQ.b CODE_27B218
	LDA.b !RAM_SMB3_Global_FrameCounter
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR] Reducing flashing speed (1)
	AND.w #$0008
	LSR
else
	AND.w #$0003
endif
	PHX
	TAX
	LDA.l DATA_27B223,x
	STA.w SMB3_PaletteMirror[$00].LowByte
	PLX
	BRA.b CODE_27B21B

CODE_27B218:
	STZ.w SMB3_PaletteMirror[$00].LowByte
CODE_27B21B:
	SEP.b #$20
	LDA.b #$01
	STA.w !RAM_SMB3_Global_UpdateEntirePaletteFlag
	RTS

DATA_27B223:
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ; (2)
	db $08,$77,$08,$77
	db $FF,$7F,$FF,$7F
else
	db $08,$77,$FF,$7F
 endif
;--------------------------------------------------------------------

; Todo: Unreferrenced routine.

CODE_27B227:
	CLC
	BEQ.b CODE_27B232
	TYA
	ASL
	TAY
	LDA.w DATA_21C6E4,y
	BRA.b CODE_27B235

CODE_27B232:
	LDA.w $02B9
CODE_27B235:
	STA.b $DC
	AND.b #$1F
	ORA.b #$20
	STA.b $D8
	LDA.b $DC
	LSR
	LSR
	LSR
	LSR
	LSR
	AND.b #$1F
	ORA.b #$40
	STA.b $DA
	LDA.b $DC
	XBA
	LSR
	LSR
	AND.b #$1F
	ORA.b #$80
	STA.b $DC
	SEP.b #$20
	LDA.b $D8
	STA.w !RAM_SMB3_Global_FixedColorData1Mirror
	LDA.b $DA
	STA.w !RAM_SMB3_Global_FixedColorData2Mirror
	LDA.b $DC
	STA.w !RAM_SMB3_Global_FixedColorData3Mirror
	LDA.b #$01
	STA.w !RAM_SMB3_Global_UpdateEntirePaletteFlag
	RTS

;--------------------------------------------------------------------

; Todo: Unreferrenced routine.

CODE_27B26C:
	REP.b #$20
	LDA.w !RAM_SMB3_Level_ScreenFlashTimer
	AND.w #$00FF
	BEQ.b CODE_27B27E
	TYA
	ASL
	TAY
	LDA.w DATA_21C6E4,y
	BRA.b CODE_27B281

CODE_27B27E:
	LDA.w $02B9
CODE_27B281:
	STA.w SMB3_PaletteMirror[$00].LowByte
	SEP.b #$20
	LDA.b #$20
	STA.w !RAM_SMB3_Global_FixedColorData1Mirror
	ASL
	STA.w !RAM_SMB3_Global_FixedColorData2Mirror
	ASL
	STA.w !RAM_SMB3_Global_FixedColorData3Mirror
	LDA.b #$01
	STA.w !RAM_SMB3_Global_UpdateEntirePaletteFlag
	RTS

;--------------------------------------------------------------------

; Note: Routine for handling general level stuff?

CODE_27B299:
	JSR.w CODE_27B1C8
	JSR.w CODE_27B000
	JSR.w SMB3_ProcessMinorExtendedSprites_Main
	JSR.w CODE_27BA22
	JSR.w SMB3_ProcessBreathSprites_Main
	JSR.w SMB3_ProcessSplashSprites_Main
	JSR.w SMB3_ProcessSpinningCoinSprites_Main
	JSR.w SMB3_ProcessExtendedSprites_Main
	JSR.w SMB3_ProcessShooterSprites_Main
	JSR.w SMB3_ProcessPlayerFireballs_Main
	JSL.l CODE_29D713
	LDA.b !RAM_SMB3_Level_Player_CurrentPowerUp
	CMP.b #$06
	BEQ.b CODE_27B2C5
	CMP.b #$02
	BNE.b CODE_27B2DC
CODE_27B2C5:
	LDA.w !RAM_SMB3_Level_Player_FreezePlayerTimer
	ORA.w !RAM_SMB3_Level_Player_DuckingFlag
	ORA.w !RAM_SMB3_Level_Player_KickAnimationTimer
	ORA.w !RAM_SMB3_Level_TemporarilyDisableTimeLimitFlag
	ORA.b $9C
	BNE.b CODE_27B2DC
	BIT.b !RAM_SMB3_Global_ControllerPress1
	BVC.b CODE_27B2DC						; Note: !Joypad_X|(!Joypad_Y>>8)
	JSR.w CODE_27B3A3
CODE_27B2DC:
	LDA.w $1A46
	BNE.b CODE_27B2E4
	BRL.w CODE_27B39A

CODE_27B2E4:
	DEC.w $1A46
	LDY.b #$00
	LDA.w $1A47
	SEC
	SBC.w $0543
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	STA.w SMB3_OAMBuffer[$01].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$02].YDisp,y
	STA.w SMB3_OAMBuffer[$03].YDisp,y
	LDA.w $027E
	XBA
	LDA.w $1A48
	REP.b #$20
	SEC
	SBC.w $0210
	STA.b $D8
	CLC
	ADC.w #$0008
	STA.b $DA
	SEP.b #$20
	LDA.b $D8
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$02].XDisp,y
	LDA.b $DA
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	STA.w SMB3_OAMBuffer[$03].XDisp,y
	LDA.b #$56
	STA.w SMB3_OAMBuffer[$00].Tile,y
	STA.w SMB3_OAMBuffer[$01].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$02].Tile,y
	STA.w SMB3_OAMBuffer[$03].Tile,y
	LDA.b !RAM_SMB3_Global_FrameCounter
	LSR
	LSR
	LSR
	ROR
	AND.b #$80
	STA.b $00
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$03
	ASL
	ORA.b #$20
	ORA.b $00
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$02].Prop,y
	EOR.b #$C0
	STA.w SMB3_OAMBuffer[$01].Prop,y
	STA.w SMB3_OAMBuffer[$03].Prop,y
	LDA.w SMB3_OAMBuffer[$00].Prop,y
	AND.b #$80
	BEQ.b CODE_27B36B
	LDA.w SMB3_OAMBuffer[$00].Tile,y
	PHA
	LDA.w SMB3_OAMBuffer[$02].Tile,y
	STA.w SMB3_OAMBuffer[$00].Tile,y
	PLA
	STA.w SMB3_OAMBuffer[$02].Tile,y
CODE_27B36B:
	LDA.w SMB3_OAMBuffer[$01].Prop,y
	AND.b #$80
	BEQ.b CODE_27B380
	LDA.w SMB3_OAMBuffer[$01].Tile,y
	PHA
	LDA.w SMB3_OAMBuffer[$03].Tile,y
	STA.w SMB3_OAMBuffer[$01].Tile,y
	PLA
	STA.w SMB3_OAMBuffer[$03].Tile,y
CODE_27B380:
	PHY
	TYA
	LSR
	LSR
	TAY
	LDA.b $D9
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$02].Slot,y
	LDA.b $DB
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$03].Slot,y
	PLY
CODE_27B39A:
	LDA.w !RAM_SMB3_Level_Player_FreezePlayerTimer
	BNE.b CODE_27B3A2
	JSR.w CODE_27DDD1
CODE_27B3A2:
	RTL

;--------------------------------------------------------------------

; Note: Seems to be the routine for spawning in a player projectile.

CODE_27B3A3:
	LDX.b #$01
CODE_27B3A5:
	LDA.w !RAM_SMB3_Level_FireSpr_CurrentState,x
	BEQ.b CODE_27B3AE
	DEX
	BPL.b CODE_27B3A5
	RTS

CODE_27B3AE:
	LDA.b #!Define_SMAS_Sound0063_ShootFireball
	STA.w !RAM_SMB3_Global_SoundCh3
	LDA.b #$0B
	STA.w $0513
	LDA.b !RAM_SMB3_Level_Player_XPosLo
	CLC
	ADC.b #$04
	STA.w !RAM_SMB3_Level_FireSpr_XPosLo,x
	LDA.b !RAM_SMB3_Level_Player_XPosHi
	ADC.b #$00
	STA.w !RAM_SMB3_Level_FireSpr_XPosHi,x
	LDA.w !RAM_SMB3_Level_IsVerticalLevelFlag
	BEQ.b CODE_27B3E1
	LDA.b $BD
	AND.b #$40
	BEQ.b CODE_27B3E1
	LDA.w !RAM_SMB3_Level_FireSpr_XPosLo,x
	CMP.b #$F8
	BCC.b CODE_27B3E1
	LDA.b #$00
	STA.w !RAM_SMB3_Level_FireSpr_XPosLo,x
	STA.w !RAM_SMB3_Level_FireSpr_XPosHi,x
CODE_27B3E1:
	LDA.b !RAM_SMB3_Level_Player_YPosLo
	STA.w !RAM_SMB3_Level_FireSpr_YPosLo,x
	LDA.b !RAM_SMB3_Level_Player_YPosHi
	STA.w !RAM_SMB3_Level_FireSpr_YPosHi,x
	LDA.b #$01
	LDY.b !RAM_SMB3_Level_Player_CurrentPowerUp
	CPY.b #$06
	SEC
	BNE.b CODE_27B3F5
	ASL
CODE_27B3F5:
	STA.w !RAM_SMB3_Level_FireSpr_CurrentState,x
	LDA.b #$03
	BCS.b CODE_27B3FE
	LDA.b #$FD
CODE_27B3FE:
	STA.w !RAM_SMB3_Level_FireSpr_YSpeed,x
	LDA.b #$00
	STA.b $00
	LDA.b #$03
	BCS.b CODE_27B416
	LDA.b $BD
	ASL
	EOR.b !RAM_SMB3_Level_Player_XSpeed
	BPL.b CODE_27B414
	LDA.b !RAM_SMB3_Level_Player_XSpeed
	STA.b $00
CODE_27B414:
	LDA.b #$10
CODE_27B416:
	LDY.b $BD
	BNE.b CODE_27B41E
	JSL.l SMB3_UnnecessaryInvertARt_Main
CODE_27B41E:
	CLC
	ADC.b $00
	STA.w !RAM_SMB3_Level_FireSpr_XSpeed,x
	STZ.w $1CED,x
	STZ.w $1CEB,x
	RTS

;--------------------------------------------------------------------

; Note: Routine related to fireballs.

CODE_27B42B:
	RTS

SMB3_ProcessPlayerFireballs:
.Main:
;$27B42C
	LDX.b #$01
	STX.b $9B
	JSR.w CODE_27B436
	DEC.b $9B
	DEX
CODE_27B436:
	LDA.w !RAM_SMB3_Level_FireSpr_CurrentState,x
	BEQ.b CODE_27B42B
	CMP.b #$03
	BCC.b CODE_27B442
	JMP.w CODE_27B95E

CODE_27B442:
	LDA.w $05FE
	BEQ.b CODE_27B466
	LDA.b $9C
	BNE.b CODE_27B466
	LDA.w !RAM_SMB3_Level_FireSpr_XPosLo,x
	CLC
	ADC.l $7E3952
	STA.w !RAM_SMB3_Level_FireSpr_XPosLo,x
	LDA.w !RAM_SMB3_Level_FireSpr_YPosLo,x
	CLC
	ADC.l $7E3953
	STA.w !RAM_SMB3_Level_FireSpr_YPosLo,x
	BCC.b CODE_27B466
	INC.w !RAM_SMB3_Level_FireSpr_YPosHi,x
CODE_27B466:
	LDY.b $9C
	BNE.b CODE_27B4CC
	LDA.w !RAM_SMB3_Level_FireSpr_YSpeed,x
	LDY.w $05FC
	BEQ.b CODE_27B476
	CLC
	ADC.w $0780
CODE_27B476:
	PHA
	LDY.b #$00
	PLA
	BPL.b CODE_27B47D
	DEY
CODE_27B47D:
	CLC
	ADC.w !RAM_SMB3_Level_FireSpr_YPosLo,x
	STA.w !RAM_SMB3_Level_FireSpr_YPosLo,x
	TYA
	ADC.w !RAM_SMB3_Level_FireSpr_YPosHi,x
	STA.w !RAM_SMB3_Level_FireSpr_YPosHi,x
	INC.w $1CED,x
	LDA.w !RAM_SMB3_Level_FireSpr_CurrentState,x
	CMP.b #$02
	BNE.b CODE_27B4CF
	LDA.w !RAM_SMB3_Level_FireSpr_XSpeed,x
	ASL
	ASL
	ASL
	ASL
	CLC
	ADC.w !RAM_SMB3_Level_FireSpr_SubXPos,x
	STA.w !RAM_SMB3_Level_FireSpr_SubXPos,x
	PHP
	LDA.w !RAM_SMB3_Level_FireSpr_XSpeed,x
	LSR
	LSR
	LSR
	LSR
	CMP.b #$08
	LDY.b #$00
	BCC.b CODE_27B4B4
	ORA.b #$F0
	DEY
CODE_27B4B4:
	PLP
	ADC.w !RAM_SMB3_Level_FireSpr_XPosLo,x
	STA.w !RAM_SMB3_Level_FireSpr_XPosLo,x
	TYA
	ADC.w !RAM_SMB3_Level_FireSpr_XPosHi,x
	STA.w !RAM_SMB3_Level_FireSpr_XPosHi,x
	LDA.w $1CED,x
	AND.b #$07
	BNE.b CODE_27B4CC
	INC.w !RAM_SMB3_Level_FireSpr_YSpeed,x
CODE_27B4CC:
	JMP.w CODE_27B505

CODE_27B4CF:
	LDA.w !RAM_SMB3_Level_FireSpr_XPosHi,x
	XBA
	LDA.w !RAM_SMB3_Level_FireSpr_XPosLo,x
	REP.b #$20
	STA.b $D8
	LDA.w !RAM_SMB3_Level_FireSpr_XSpeed,x
	AND.w #$00FF
	CMP.w #$0080
	BCC.b CODE_27B4E8
	ORA.w #$FF00
CODE_27B4E8:
	CLC
	ADC.b $D8
	SEP.b #$20
	STA.w !RAM_SMB3_Level_FireSpr_XPosLo,x
	XBA
	STA.w !RAM_SMB3_Level_FireSpr_XPosHi,x
	LDA.w !RAM_SMB3_Level_FireSpr_YSpeed,x
	CMP.b #$04
	BEQ.b CODE_27B505
	LDA.w $1CED,x
	AND.b #$03
	BNE.b CODE_27B505
	INC.w !RAM_SMB3_Level_FireSpr_YSpeed,x
CODE_27B505:
	LDA.w !RAM_SMB3_Level_FireSpr_XPosHi,x
	XBA
	LDA.w !RAM_SMB3_Level_FireSpr_XPosLo,x
	REP.b #$20
	SEC
	SBC.w $0210
	STA.b $DC
	CMP.w #$0100
	BCC.b CODE_27B51E
	CMP.w #$FFF8
	BCC.b CODE_27B526
CODE_27B51E:
	STA.b $0D
	SEP.b #$20
	STA.b $01
	BRA.b CODE_27B52E

CODE_27B526:
	SEP.b #$30
	LDA.b #$00
	STA.w !RAM_SMB3_Level_FireSpr_CurrentState,x
	RTS

CODE_27B52E:
	ADC.b #$08
	STA.b $0D
	LDA.w !RAM_SMB3_Level_FireSpr_YPosHi,x
	XBA
	LDA.w !RAM_SMB3_Level_FireSpr_YPosLo,x
	REP.b #$20
	SEC
	SBC.w $0216
	STA.b $D8
	CMP.w #$00C0
	BCC.b CODE_27B55E
	CMP.w #$FFE0
	BCS.b CODE_27B55E
	SEP.b #$20
	LDA.w !RAM_SMB3_Level_FireSpr_CurrentState,x
	CMP.b #$02
	BNE.b CODE_27B55B
	LDA.b $D9
	BPL.b CODE_27B55B
	BRL.w CODE_27B693

CODE_27B55B:
	BRL.w CODE_27B526

CODE_27B55E:
	SEP.b #$20
	JSR.w CODE_27D72B
	REP.b #$10
	LDY.b $C6,x
	LDA.b $01
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	LDA.w !RAM_SMB3_Level_FireSpr_YPosLo,x
	SEC
	SBC.w $0543
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	PHA
	ADC.b #$0E
	STA.b $0C
	PLA
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$01].YDisp,y
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b $DD
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	SEP.b #$10
	LDA.w !RAM_SMB3_Level_FireSpr_XSpeed,x
	LSR
	AND.b #$40
	STA.b $02
	LDA.w !RAM_SMB3_Level_FireSpr_CurrentState,x
	CMP.b #$02
	BEQ.b CODE_27B5AB
	BRL.w CODE_27B64B

CODE_27B5AB:
	LDA.b !RAM_SMB3_Level_Player_CurrentPowerUp
	CMP.b #$06
	BEQ.b CODE_27B5B4
	BRL.w CODE_27B6A8

CODE_27B5B4:
	REP.b #$30
	LDY.b $C6,x
	LDA.w $1CED,x
	LSR
	LSR
	AND.w #$0003
	TAX
	LDA.w !RAM_SMB3_Level_Player_BehindLayer1Timer
	AND.w #$00FF
	STA.b $D8
	SEP.b #$20
	LDA.w DATA_21C6F8+$01,x
	BIT.b $02
	BVC.b CODE_27B5D4
	EOR.b #$06
CODE_27B5D4:
	STA.b $DA
	STZ.b $DB
	CLC
	ADC.b $01
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	LDA.w DATA_21C6F8,x
	CLC
	ADC.w SMB3_OAMBuffer[$00].YDisp,y
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$01].YDisp,y
	LDA.b #$EE
	STA.w SMB3_OAMBuffer[$00].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$01].Tile,y
	LDA.b $02
	EOR.w DATA_21C6F4,x
	SEC
	ORA.b #$21
	LDX.b $D8
	BEQ.b CODE_27B60A
	AND.b #$CF
	ORA.b #$10
CODE_27B60A:
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$01].Prop,y
	AND.b #$80
	BEQ.b CODE_27B622
	LDA.w SMB3_OAMBuffer[$00].Tile,y
	PHA
	LDA.w SMB3_OAMBuffer[$01].Tile,y
	STA.w SMB3_OAMBuffer[$00].Tile,y
	PLA
	STA.w SMB3_OAMBuffer[$01].Tile,y
CODE_27B622:
	PHY
	LDX.b $9B
	LDA.w !RAM_SMB3_Level_FireSpr_XPosHi,x
	XBA
	LDA.w !RAM_SMB3_Level_FireSpr_XPosLo,x
	REP.b #$20
	SEC
	SBC.w $0210
	CLC
	ADC.b $DA
	STA.b $DC
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b $DD
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	PLY
	BRL.w CODE_27B693

CODE_27B64B:
	LDA.w !RAM_SMB3_Level_Player_BehindLayer1Timer
	STA.b $D8
	STZ.b $D9
	REP.b #$30
	LDY.b $C6,x
	LDA.w $0565
	LSR
	LSR
	AND.w #$0003
	TAX
	SEP.b #$20
	LDA.w DATA_21C6EC,x
	STA.w SMB3_OAMBuffer[$00].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$01].Tile,y
	LDA.b $02
	EOR.w DATA_21C6F0,x
	CLC
	ORA.b #$20
	LDX.b $D8
	BEQ.b CODE_27B67B
	AND.b #$CF
	ORA.b #$10
CODE_27B67B:
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$01].Prop,y
	AND.b #$80
	BEQ.b CODE_27B693
	LDA.w SMB3_OAMBuffer[$00].Tile,y
	PHA
	LDA.w SMB3_OAMBuffer[$01].Tile,y
	STA.w SMB3_OAMBuffer[$00].Tile,y
	PLA
	STA.w SMB3_OAMBuffer[$01].Tile,y
CODE_27B693:
	SEP.b #$10
	LDX.b $9B
	LDA.b $9C
	BNE.b CODE_27B6AD
	LDA.w !RAM_SMB3_Level_FireSpr_CurrentState,x
	CMP.b #$02
	BEQ.b CODE_27B6A5
	JSR.w CODE_27B6AE
CODE_27B6A5:
	JMP.w CODE_27B890

CODE_27B6A8:
	LDA.b #$03
	STA.w !RAM_SMB3_Level_FireSpr_CurrentState,x
CODE_27B6AD:
	RTS

CODE_27B6AE:
	LDA.w !RAM_SMB3_Level_IsVerticalLevelFlag
	BEQ.b CODE_27B6EB
	LDA.b $0C
	CLC
	ADC.w $0543
	STA.b $05
	AND.b #$F0
	STA.b $02
	LDA.w $0542
	ADC.b #$20
	STA.b $01
	STA.b $D9
	CLC
	ADC.b #$20
	STA.b $DC
	LDA.w !RAM_SMB3_Level_FireSpr_XPosLo,x
	ADC.b #$04
	STA.b $0D
	LSR
	LSR
	LSR
	LSR
	ORA.b $02
	STA.b $00
	STA.b $D8
	STA.b $DB
	LDA.b #$7E2000>>16
	STA.b $DA
	STA.b $DD
	LDY.b #$00
	JMP.w CODE_27B759

CODE_27B6EB:
	LDA.w $058B
	BEQ.b CODE_27B702
	LDA.b $0C
	CMP.b #$A0
	BCC.b CODE_27B704
	SBC.b #$10
	STA.b $05
	AND.b #$F0
	STA.b $02
	LDA.b #$01
	BRA.b CODE_27B713

CODE_27B702:
	LDA.b $0C
CODE_27B704:
	CLC
	ADC.w $0543
	STA.b $05
	AND.b #$F0
	STA.b $02
	LDA.w $0542
	ADC.b #$00
CODE_27B713:
	STA.b $03
	BEQ.b CODE_27B724
	CMP.b #$02
	BCS.b CODE_27B721
	LDA.b $02
	CMP.b #$B0
	BCC.b CODE_27B724
CODE_27B721:
	BRL.w CODE_27B7A0

CODE_27B724:
	LDA.w !RAM_SMB3_Level_FireSpr_XPosLo,x
	STA.b $04
	PHX
	LDA.w !RAM_SMB3_Level_FireSpr_XPosHi,x
	STA.b $06
	ASL
	TAX
	LDA.l DATA_218200,x
	STA.b $D8
	STA.b $DB
	LDA.b $03
	AND.b #$01
	CLC
	ADC.l DATA_218200+$01,x
	STA.b $D9
	CLC
	ADC.b #$20
	STA.b $DC
	PLX
	LDA.b $04
	LSR
	LSR
	LSR
	LSR
	ORA.b $02
	TAY
	LDA.b #$7E2000>>16
	STA.b $DA
	STA.b $DD
CODE_27B759:
	LDA.b [$DB],y
	BEQ.b CODE_27B775
	LDA.b [$D8],y
	TAY
	PHX
	LDA.w !RAM_SMB3_Global_TilesetFromHeader
	ASL
	TAX
	LDA.w DATA_21AB57,x
	STA.b $DB
	LDA.w DATA_21AB57+$01,x
	STA.b $DC
	LDA.b ($DB),y
	PLX
	BRA.b CODE_27B777

CODE_27B775:
	LDA.b [$D8],y
CODE_27B777:
	JSL.l SMB3_ModifyMap16IDForPSwitchAffectedBlocks_Main
	PHA
	ASL
	ROL
	ROL
	AND.b #$03
	TAY
	STY.b $01
	PLA
	STA.b $00
	CMP.w !RAM_SMB3_Global_Map16FloorTileAttributeTable,y
	BCC.b CODE_27B7A0
	CMP.w !RAM_SMB3_Global_Map16WallTileAttributeTable,y
	BCC.b CODE_27B7E8
	LDY.w $0560
	CPY.b #$0B
	BNE.b CODE_27B7AF
	CMP.b #$56
	BNE.b CODE_27B7A6
	LDA.b #$10
	BNE.b CODE_27B7AC

CODE_27B7A0:
	LDA.b #$00
	STA.w $1CEB,x
	RTS

CODE_27B7A6:
	CMP.b #$55
	BNE.b CODE_27B7AF
	LDA.b #$11
CODE_27B7AC:
	JSR.w CODE_27B7F6
CODE_27B7AF:
	LDA.b $00
	LDY.w $0563
	BEQ.b CODE_27B7C2
	CMP.b #$37
	BEQ.b CODE_27B7DD
	CMP.b #$AB
	BEQ.b CODE_27B7DD
	CMP.b #$F9
	BEQ.b CODE_27B7DD
CODE_27B7C2:
	INC.w $1CEB,x
	LDA.w $1CEB,x
	CMP.b #$02
	BNE.b CODE_27B7CF
	JMP.w CODE_27B884

CODE_27B7CF:
	LDA.w !RAM_SMB3_Level_FireSpr_YPosLo,x
	SEC
	SBC.b #$02
	STA.w !RAM_SMB3_Level_FireSpr_YPosLo,x
	BCS.b CODE_27B7DD
	DEC.w !RAM_SMB3_Level_FireSpr_YPosHi,x
CODE_27B7DD:
	LDA.b #$FD
CODE_27B7DF:
	STA.w !RAM_SMB3_Level_FireSpr_YSpeed,x
	LDA.b #$03
	STA.w $1CED,x
	RTS

CODE_27B7E8:
	LDA.w $0563
	BNE.b CODE_27B827
	LDA.b $05
	AND.b #$0F
	CMP.b #$05
	BCC.b CODE_27B7DD
	RTS

CODE_27B7F6:
	STA.w $0564
	JSL.l CODE_279545
	LDA.b #$01
	STA.w !RAM_SMB3_Level_MExtSpr_SpriteID
	LDA.b $02
	STA.w $052B
	SBC.w $0543
	STA.w !RAM_SMB3_Level_MExtSpr_YPosLo
	LDA.b $03
	STA.w $052A
	LDA.b $04
	AND.b #$F0
	STA.w $0529
	SBC.w $0210
	STA.w !RAM_SMB3_Level_MExtSpr_XPosLo
	LDA.b $06
	STA.w $0528
	JMP.w CODE_27B6A8

CODE_27B827:
	LDA.b $05
	AND.b #$0F
	STA.b $05
	LDA.b $04
	AND.b #$0F
	STA.b $04
	LDY.b $01
	TYA
	ASL
	TAX
	LDA.w DATA_21AAD0,x
	STA.b $02
	LDA.w DATA_21AAD0+$01,x
	STA.b $03
	LDY.b $01
	LDX.b $9B
	LDA.b $00
	SEC
	SBC.w !RAM_SMB3_Global_Map16FloorTileAttributeTable,y
	TAY
	LDA.b ($02),y
	TAY
	LDA.w DATA_21AD70,y
	CMP.b #$80
	BEQ.b CODE_27B884
	STA.b $06
	TYA
	ASL
	ASL
	ASL
	ASL
	CLC
	ADC.b $04
	TAY
	LDA.w DATA_21AC0B,y
	AND.b #$0F
	STA.b $01
	LDA.b $05
	CMP.b #$0C
	BCS.b CODE_27B873
	CMP.b $01
	BCC.b CODE_27B88F
CODE_27B873:
	LDA.b $06
	BEQ.b CODE_27B88C
	LDY.b #$FB
	EOR.w !RAM_SMB3_Level_FireSpr_XSpeed,x
	BMI.b CODE_27B880
	LDY.b #$FE
CODE_27B880:
	TYA
	JMP.w CODE_27B7DF

CODE_27B884:
	LDA.b #!Define_SMAS_Sound0060_HitHead
	STA.w !RAM_SMB3_Global_SoundCh1
	JMP.w CODE_27B6A8

CODE_27B88C:
	JMP.w CODE_27B7DD

CODE_27B88F:
	RTS

CODE_27B890:
	LDY.b #$04
CODE_27B892:
	LDA.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,y
	ORA.w !RAM_SMB3_Level_NorSpr_YOffscreenFlag,y
	BNE.b CODE_27B8B1
	LDX.w !RAM_SMB3_Level_NorSpr_CurrentStatus,y
	LDA.w DATA_21B033,x
	BNE.b CODE_27B8B1
	LDX.w !RAM_SMB3_Level_NorSpr_SpriteID,y
	LDA.w DATA_21AE78,x
	STA.b $00
	AND.b #$20
	BNE.b CODE_27B8B1
	JSR.w CODE_27B8B9
CODE_27B8B1:
	DEY
	BPL.b CODE_27B892
	LDX.b $9B
CODE_27B8B6:
	SEP.b #$20
	RTS

CODE_27B8B9:
	LDA.b $00
	AND.b #$0F
	TAX
	STX.b $01
	LDA.w DATA_21C6FD,x
	STA.b $DA
	STZ.b $DB
	LDA.w DATA_21C70D,x
	STA.b $DC
	STZ.b $DD
	LDX.b $9B
	LDA.w !RAM_SMB3_Level_NorSpr_YPosLo,y
	STA.b $D8
	LDA.w !RAM_SMB3_Level_NorSpr_YPosHi,y
	STA.b $D9
	LDA.w !RAM_SMB3_Level_FireSpr_YPosHi,x
	XBA
	LDA.w !RAM_SMB3_Level_FireSpr_YPosLo,x
	REP.b #$20
	CLC
	ADC.w #$000E
	SEC
	SBC.b $D8
	CMP.b $DA
	BCS.b CODE_27B8B6
	SEP.b #$20
	LDA.w !RAM_SMB3_Level_NorSpr_XPosLo,y
	STA.b $D8
	LDA.w !RAM_SMB3_Level_NorSpr_XPosHi,y
	STA.b $D9
	LDA.w !RAM_SMB3_Level_FireSpr_XPosHi,x
	XBA
	LDA.w !RAM_SMB3_Level_FireSpr_XPosLo,x
	REP.b #$20
	CLC
	ADC.w #$0008
	SEC
	SBC.b $D8
	CMP.b $DC
	BCS.b CODE_27B8B6
	SEP.b #$20
	LDA.w !RAM_SMB3_Level_FireSpr_CurrentState,x
	CMP.b #$02
	BEQ.b CODE_27B91C
	JSR.w CODE_27B6A8
	BRA.b CODE_27B922

CODE_27B91C:
	LDA.b $00
	BMI.b CODE_27B95A
	BPL.b CODE_27B928						; Note: This will always branch

CODE_27B922:
	LDA.b $00
	AND.b #$40
	BNE.b CODE_27B95B
CODE_27B928:
	LDA.b #!Define_SMAS_Sound0060_KickShell
	STA.w !RAM_SMB3_Global_SoundCh1
	LDA.w !RAM_SMB3_Level_NorSpr_FireballHPCounter,y
	BEQ.b CODE_27B939
	SEC
	SBC.b #$01
	STA.w !RAM_SMB3_Level_NorSpr_FireballHPCounter,y
	RTS

CODE_27B939:
	LDA.b #$CC
	STA.w !RAM_SMB3_Level_NorSpr_YSpeed,y
	LDA.w !RAM_SMB3_Level_FireSpr_XSpeed,x
	ASL
	LDA.b #$0C
	BCC.b CODE_27B948
	LDA.b #$F4
CODE_27B948:
	STA.w !RAM_SMB3_Level_NorSpr_XSpeed,y
	TYA
	TAX
	LDA.b #$05
	JSL.l CODE_278A94
	LDX.b $9B
	LDA.b #$06
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,y
CODE_27B95A:
	RTS

CODE_27B95B:
	JMP.w CODE_27B884

;--------------------------------------------------------------------

CODE_27B95E:
	LDY.b $9C
	BNE.b CODE_27B974
	INC.w !RAM_SMB3_Level_FireSpr_CurrentState,x
	LDA.w !RAM_SMB3_Level_FireSpr_CurrentState,x
	CMP.b #$10
	BNE.b CODE_27B974
CODE_27B96C:
	SEP.b #$30
	LDA.b #$00
	STA.w !RAM_SMB3_Level_FireSpr_CurrentState,x
	RTS

CODE_27B974:
	JSL.l CODE_27A19E
	LDA.w !RAM_SMB3_Level_FireSpr_XPosHi,x
	XBA
	LDA.w !RAM_SMB3_Level_FireSpr_XPosLo,x
	REP.b #$30
	SBC.w #$0004
	SEC
	SBC.w $0210
	STA.b $D8
	CLC
	ADC.w #$0008
	STA.b $DA
	SEP.b #$20
	LDY.b $C6,x
	LDA.b $D8
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$02].XDisp,y
	LDA.b $DA
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	STA.w SMB3_OAMBuffer[$03].XDisp,y
	LDA.w !RAM_SMB3_Level_FireSpr_YPosHi,x
	XBA
	LDA.w !RAM_SMB3_Level_FireSpr_YPosLo,x
	REP.b #$20
	SEC
	SBC.w $0216
	CMP.w #$00D0
	BCS.b CODE_27B96C
	SEP.b #$20
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	STA.w SMB3_OAMBuffer[$01].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$02].YDisp,y
	STA.w SMB3_OAMBuffer[$03].YDisp,y
	REP.b #$20
	LDA.w !RAM_SMB3_Level_FireSpr_CurrentState,x
	AND.w #$00FF
	LSR
	LSR
	TAX
	SEP.b #$20
	LDA.w DATA_21C71D,x
	STA.w SMB3_OAMBuffer[$00].Tile,y
	STA.w SMB3_OAMBuffer[$03].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$02].Tile,y
	STA.w SMB3_OAMBuffer[$01].Tile,y
	LDA.b #$22
	STA.b $DC
	LDA.w !RAM_SMB3_Level_Player_BehindLayer1Timer
	BEQ.b CODE_27B9F1
	LDA.b #$12
	STA.b $DC
CODE_27B9F1:
	LDA.b $DC
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$02].Prop,y
	ORA.b #$C0
	STA.w SMB3_OAMBuffer[$01].Prop,y
	STA.w SMB3_OAMBuffer[$03].Prop,y
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b $D9
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$02].Slot,y
	LDA.b $DB
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$03].Slot,y
	SEP.b #$10
	LDX.b $9B
CODE_27BA21:
	RTS

;--------------------------------------------------------------------

CODE_27BA22:
	LDY.w !RAM_SMB3_Level_Player_FlightTimer
	INY
	BNE.b CODE_27BA2B
	STY.w !RAM_SMB3_Level_ConsecutiveEnemiesStompedCounter
CODE_27BA2B:
	LDY.b $9C
	BNE.b CODE_27BA21
	LDA.w !RAM_SMB3_Level_Player_IsSwimmingFlag
	BEQ.b CODE_27BA21
	STY.w !RAM_SMB3_Level_ConsecutiveEnemiesStompedCounter
	CMP.b #$01
	BNE.b CODE_27BA3E
	BRL.w CODE_27BAE7

CODE_27BA3E:
	LDA.b !RAM_SMB3_Level_Player_YSpeed
	CMP.b #$3C
	BPL.b CODE_27BA4D
	INC.b !RAM_SMB3_Level_Player_YSpeed
	LDA.b !RAM_SMB3_Global_FrameCounter
	LSR
	BCC.b CODE_27BA4D
	INC.b !RAM_SMB3_Level_Player_YSpeed
CODE_27BA4D:
	LDX.b #$00
	JSL.l CODE_27A19E
	BEQ.b CODE_27BA21
	LDA.w $0583
	BNE.b CODE_27BA21
	REP.b #$10
	LDY.b $C6,x
	LDA.b #$46
	STA.w SMB3_OAMBuffer[$00].Tile,y
	STA.w SMB3_OAMBuffer[$01].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$02].Tile,y
	STA.w SMB3_OAMBuffer[$03].Tile,y
	SEP.b #$10
	LDA.b !RAM_SMB3_Global_FrameCounter
	LSR
	AND.b #$03
	CLC
	ADC.b #$05
	LDX.w !RAM_SMB3_Level_Player_DuckingFlag
	BNE.b CODE_27BA81
	LDX.w !RAM_SMB3_Level_Player_CurrentPowerUp
	BNE.b CODE_27BA84
CODE_27BA81:
	CLC
	ADC.b #$0A
CODE_27BA84:
	STA.b $00
	LDX.b $9B
	REP.b #$10
	LDY.b $C6,x
	LDA.b !RAM_SMB3_Level_Player_OnScreenYPos
	CLC
	ADC.b $00
	SEC
	SBC.b #$0A
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	STA.w SMB3_OAMBuffer[$01].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$02].YDisp,y
	STA.w SMB3_OAMBuffer[$03].YDisp,y
	LDA.b !RAM_SMB3_Level_Player_OnScreenXPos
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$02].XDisp,y
	STA.w SMB3_OAMBuffer[$03].XDisp,y
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b #$00
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$02].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$03].Slot,y
	SEP.b #$10
	LDA.b #$80
	STA.b $DC
	LDA.b !RAM_SMB3_Level_Player_OnScreenXPos
	STA.b $D8
	STZ.b $D9
	LDA.b !RAM_SMB3_Level_Player_OnScreenXPos
	STA.b $DA
	STZ.b $DB
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$03
	SEC
	SBC.b #$02
	JSR.w CODE_27BE00
	RTS

CODE_27BAE7:
	LDY.b #$7F
	LDA.b !RAM_SMB3_Global_ControllerHold1
	AND.b #(!Joypad_DPadL>>8)|(!Joypad_DPadR>>8)|!Joypad_A|(!Joypad_B>>8)
	BEQ.b CODE_27BAF1
	LDY.b #$3F
CODE_27BAF1:
	TYA
	AND.b !RAM_SMB3_Global_FrameCounter
	BNE.b CODE_27BB02
	LDX.b #$02
CODE_27BAF8:
	STX.b $9B
	LDA.w !RAM_SMB3_Level_BreathSpr_MovementTimer,x
	BEQ.b CODE_27BB03
	DEX
	BPL.b CODE_27BAF8
CODE_27BB02:
	RTS

CODE_27BB03:
	LDA.w !RAM_SMB3_Global_RandomByte02
	ORA.b #$10
	STA.w !RAM_SMB3_Level_BreathSpr_MovementTimer,x
	LDY.b #$00
	LDA.b !RAM_SMB3_Level_Player_CurrentPose
	CMP.b #$12
	BCC.b CODE_27BB2B
	LDY.b #$03
	CMP.b #$15
	BCC.b CODE_27BB2B
	LDY.b #$00
	CMP.b #$1F
	BCC.b CODE_27BB2B
	INY
	CMP.b #$23
	BCC.b CODE_27BB2B
	INY
	CMP.b #$27
	BCC.b CODE_27BB2B
	LDY.b #$00
CODE_27BB2B:
	TYA
	ASL
	TAY
	BIT.b $BD
	BVC.b CODE_27BB33
	INY
CODE_27BB33:
	LDA.b #$00
	LDX.b !RAM_SMB3_Level_Player_CurrentPowerUp
	BNE.b CODE_27BB3B
	LDA.b #$08
CODE_27BB3B:
	LDX.b $9B
	CLC
	ADC.b !RAM_SMB3_Level_Player_YPosLo
	ADC.w DATA_21C721,y
	STA.w !RAM_SMB3_Level_BreathSpr_YPosLo,x
	LDA.b !RAM_SMB3_Level_Player_YPosHi
	ADC.b #$00
	STA.w !RAM_SMB3_Level_BreathSpr_YPosHi,x
	LDA.b !RAM_SMB3_Level_Player_XPosLo
	CLC
	ADC.w DATA_21C729,y
	STA.w !RAM_SMB3_Level_BreathSpr_XPosLo,x
	LDA.b !RAM_SMB3_Level_Player_XPosHi
	ADC.b #$00
	STA.w !RAM_SMB3_Level_BreathSpr_XPosHi,x
	RTS

;--------------------------------------------------------------------

; Note: Something related to the air bubbles spawned by the player?

SMB3_ProcessBreathSprites:
.Main:
;$27BB5E
	LDX.b #$03
CODE_27BB60:
	STX.b $9B
	LDA.w !RAM_SMB3_Level_BreathSpr_MovementTimer,x
	BEQ.b CODE_27BB6A
	JSR.w CODE_27BB6E
CODE_27BB6A:
	DEX
	BPL.b CODE_27BB60
	RTS

CODE_27BB6E:
	LDA.b $9C
	BEQ.b CODE_27BB75
	JMP.w CODE_27BB90

CODE_27BB75:
	INC.w !RAM_SMB3_Level_BreathSpr_MovementTimer,x
	LDA.w !RAM_SMB3_Level_BreathSpr_MovementTimer,x
	ORA.b #$80
	STA.w !RAM_SMB3_Level_BreathSpr_MovementTimer,x
	AND.b #$30
	BEQ.b CODE_27BB90
	DEC.w !RAM_SMB3_Level_BreathSpr_YPosLo,x
	LDY.w !RAM_SMB3_Level_BreathSpr_YPosLo,x
	INY
	BNE.b CODE_27BB90
	DEC.w !RAM_SMB3_Level_BreathSpr_YPosHi,x
CODE_27BB90:
	LDA.w !RAM_SMB3_Level_IsVerticalLevelFlag
	BEQ.b CODE_27BBB5
	LDA.w !RAM_SMB3_Level_BreathSpr_YPosLo,x
	CLC
	ADC.b #$0A
	AND.b #$F0
	STA.b $02
	LDA.w !RAM_SMB3_Level_BreathSpr_YPosHi,x
	ADC.b #$60
	STA.b $01
	LDA.w !RAM_SMB3_Level_BreathSpr_XPosLo,x
	LSR
	LSR
	LSR
	LSR
	ORA.b $02
	STA.b $00
	LDY.b #$00
	BEQ.b CODE_27BBF5
CODE_27BBB5:
	LDA.w !RAM_SMB3_Level_BreathSpr_YPosLo,x
	CLC
	ADC.b #$02
	AND.b #$F0
	STA.b $02
	LDA.w !RAM_SMB3_Level_BreathSpr_YPosHi,x
	ADC.b #$00
	PHA
	LDA.w !RAM_SMB3_Level_BreathSpr_XPosLo,x
	STA.b $04
	PLA
	STA.b $01
	PHX
	LDA.w !RAM_SMB3_Level_BreathSpr_XPosHi,x
	ASL
	TAX
	LDA.l DATA_218200,x
	STA.b $00
	STA.b $D8
	LDA.b $01
	AND.b #$01
	CLC
	ADC.l DATA_218200+$01,x
	STA.b $01
	CLC
	ADC.b #$20
	STA.b $D9
	PLX
	LDA.b $04
	LSR
	LSR
	LSR
	LSR
	ORA.b $02
	TAY
CODE_27BBF5:
	LDA.b #$7E2000>>16
	STA.b $02
	STA.b $DA
	LDA.b [$D8],y
	BEQ.b CODE_27BC17
	PHX
	LDA.w !RAM_SMB3_Global_TilesetFromHeader
	ASL
	TAX
	LDA.w DATA_21AB57,x
	STA.b $D8
	LDA.w DATA_21AB57+$01,x
	STA.b $D9
	LDA.b [$00],y
	TAY
	LDA.b ($D8),y
	PLX
	BRA.b CODE_27BC19

CODE_27BC17:
	LDA.b [$00],y
CODE_27BC19:
	PHA
	ASL
	ROL
	ROL
	AND.b #$03
	STA.b $00
	PLA
	STA.b $01
	LDY.b $00
	CMP.w !RAM_SMB3_Global_Map16FloorTileAttributeTable,y
	BCS.b CODE_27BC45
	LDA.w $0560
	ASL
	ASL
	CLC
	ADC.b $00
	TAY
	LDA.b $01
	CMP.b #$E0
	BEQ.b CODE_27BC45
	CMP.b #$E1
	BEQ.b CODE_27BC45
	LDA.w DATA_21AD84,y
	CMP.b $01
	BCC.b CODE_27BC4D
CODE_27BC45:
	SEP.b #$20
	LDA.b #$00
	STA.w !RAM_SMB3_Level_BreathSpr_MovementTimer,x
	RTS

CODE_27BC4D:
	STZ.b $01
	LDA.w $0565
	AND.b #$0C
	LSR
	LSR
	TAY
	LDA.w DATA_21C731,y
	STA.b $00
	CMP.b #$80
	BCC.b CODE_27BC62
	DEC.b $01
CODE_27BC62:
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$03
	ADC.b $9B
	TAY
	LDA.w DATA_21C735,y
	BMI.b CODE_27BCD6
	TAY
	LDA.w SMB3_OAMBuffer[$00].YDisp,y
	CMP.b #$F0
	BNE.b CODE_27BCD6
	LDA.w $0543
	STA.b $D8
	LDA.w $0542
	STA.b $D9
	LDA.w !RAM_SMB3_Level_BreathSpr_YPosHi,x
	XBA
	LDA.w !RAM_SMB3_Level_BreathSpr_YPosLo,x
	REP.b #$20
	SEC
	SBC.b $D8
	CMP.w #$00C8
	BCS.b CODE_27BC45
	SEP.b #$20
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	STA.w SMB3_OAMBuffer[$01].YDisp,y
	LDA.w !RAM_SMB3_Level_BreathSpr_XPosHi,x
	XBA
	LDA.w !RAM_SMB3_Level_BreathSpr_XPosLo,x
	REP.b #$20
	CLC
	ADC.b $00
	SEC
	SBC.w $0210
	STA.b $D8
	SEP.b #$20
	CMP.b #$F8
	BCS.b CODE_27BC45
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	LDA.b #$C6
	STA.w SMB3_OAMBuffer[$00].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$01].Tile,y
	LDA.b #$23
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$01].Prop,y
	TYA
	LSR
	LSR
	TAY
	LDA.b $D9
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
CODE_27BCD6:
	RTS

;--------------------------------------------------------------------

SMB3_ProcessSplashSprites:
.Main:
;$27BCD7
	LDX.b #$02
CODE_27BCD9:
	STX.b $9B
	LDA.w !RAM_SMB3_Level_SplashSpr_DespawnTimer,x
	BEQ.b CODE_27BCFE
	LDA.b $9C
	BNE.b CODE_27BCFB
	INC.w !RAM_SMB3_Level_SplashSpr_DespawnTimer,x
	LDA.b !RAM_SMB3_Global_FrameCounter
	LSR
	BCC.b CODE_27BCEF
	INC.w !RAM_SMB3_Level_SplashSpr_DespawnTimer,x
CODE_27BCEF:
	LDA.w !RAM_SMB3_Level_SplashSpr_DespawnTimer,x
	CMP.b #$30
	BCC.b CODE_27BCFB
	JSR.w CODE_27BD02
	BEQ.b CODE_27BCFE
CODE_27BCFB:
	JSR.w CODE_27BD0A
CODE_27BCFE:
	DEX
	BPL.b CODE_27BCD9
	RTS

CODE_27BD02:
	SEP.b #$30
	LDA.b #$00
	STA.w !RAM_SMB3_Level_SplashSpr_DespawnTimer,x
CODE_27BD09:
	RTS

CODE_27BD0A:
	LDA.w $0216
	STA.w $02A7
	LDA.w $0217
	STA.w $02A8
	LDY.b #$01
	JSL.l CODE_27DEFA
	BCS.b CODE_27BD26
	LDA.b #$EF
	STA.w $02A7
	STZ.w $02A8
CODE_27BD26:
	JSL.l CODE_27A19E
	BEQ.b CODE_27BD09
	LDA.b $EF,x
	XBA
	LDA.w !RAM_SMB3_Level_SplashSpr_XPosLo,x
	REP.b #$30
	SEC
	SBC.w $0210
	CMP.w #$FFF0
	BCS.b CODE_27BD42
	CMP.w #$0100
	BCS.b CODE_27BD02
CODE_27BD42:
	STA.b $D8
	PHA
	PHP
	ADC.w #$0008
	STA.b $DA
	PLP
	PLA
	SEP.b #$20
	LDY.b $C6,x
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$02].XDisp,y
	STA.w SMB3_OAMBuffer[$03].XDisp,y
	LDA.w !RAM_SMB3_Level_SplashSpr_YPosHi,x
	XBA
	LDA.w !RAM_SMB3_Level_SplashSpr_YPosLo,x
	REP.b #$20
	STA.b $DC
	LDA.w !RAM_SMB3_Level_SplashSpr_Table7E1F99,x
	AND.w #$00FF
	PHP
	LDA.b $DC
	PLP
	BNE.b CODE_27BD7A
	SEC
	SBC.w $02A7
CODE_27BD7A:
	CMP.w #$00AE
	BCS.b CODE_27BD02
	SEP.b #$20
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	STA.w SMB3_OAMBuffer[$02].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$01].YDisp,y
	STA.w SMB3_OAMBuffer[$03].YDisp,y
	REP.b #$20
	LDA.w !RAM_SMB3_Level_SplashSpr_DespawnTimer,x
	AND.w #$00FF
	LSR
	LSR
	LSR
	TAX
	SEP.b #$20
	STA.b $00
	LDA.w DATA_21C73C,x
	STA.w SMB3_OAMBuffer[$00].Tile,y
	STA.w SMB3_OAMBuffer[$02].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$01].Tile,y
	STA.w SMB3_OAMBuffer[$03].Tile,y
	LDX.w #$0000
	AND.b #$C0
	CMP.b #$C0
	BNE.b CODE_27BDBC
	LDX.w #$0001
CODE_27BDBC:
	TXA
	STA.b $DC
	ORA.b #$22
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$01].Prop,y
	ORA.b #$62
	STA.w SMB3_OAMBuffer[$02].Prop,y
	STA.w SMB3_OAMBuffer[$03].Prop,y
	SEP.b #$10
	LDX.b $9B
	LDA.b $00
	CMP.b #$03
	BCS.b CODE_27BDDC
	BRL.w CODE_27BE5E

CODE_27BDDC:
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$01
	ORA.b $9C
	BNE.b CODE_27BDF5
	LDA.w !RAM_SMB3_Level_SplashSpr_YPosLo,x
	CLC
	ADC.b #$01
	STA.w !RAM_SMB3_Level_SplashSpr_YPosLo,x
	LDA.w !RAM_SMB3_Level_SplashSpr_YPosHi,x
	ADC.b #$00
	STA.w !RAM_SMB3_Level_SplashSpr_YPosHi,x
CODE_27BDF5:
	LDA.w !RAM_SMB3_Level_SplashSpr_DespawnTimer,x
	SEC
	SBC.b #$18
	LSR
	LSR
	LSR
	AND.b #$03
CODE_27BE00:
	STA.b $00
	STZ.b $01
	REP.b #$30
	LDA.b $D8
	SEC
	SBC.b $00
	STA.b $D8
	LDA.b $DA
	CLC
	ADC.b $00
	STA.b $DA
	SEP.b #$20
	LDY.b $C6,x
	LDA.w SMB3_OAMBuffer[$00].XDisp,y
	SEC
	SBC.b $00
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	LDA.w SMB3_OAMBuffer[$02].XDisp,y
	CLC
	ADC.b $00
	STA.w SMB3_OAMBuffer[$02].XDisp,y
	STA.w SMB3_OAMBuffer[$03].XDisp,y
	LDA.b $DC
	ORA.b #$22
	STA.w SMB3_OAMBuffer[$02].Prop,y
	STA.w SMB3_OAMBuffer[$03].Prop,y
	ORA.b #$40
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$01].Prop,y
	LDA.w $0565
	AND.b #$02
	BNE.b CODE_27BE5E
	LDA.b $00
	ASL
	ORA.b $DC
	ORA.b #$A0
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$01].Prop,y
	ORA.b #$40
	STA.w SMB3_OAMBuffer[$02].Prop,y
	STA.w SMB3_OAMBuffer[$03].Prop,y
CODE_27BE5E:
	REP.b #$30
	LDA.b $C6,x
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b $D9
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	LDA.b $DB
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$02].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$03].Slot,y
	SEP.b #$10
	RTS

;--------------------------------------------------------------------

; Note: Something related to score sprites.

CODE_27BE7E:
	LDA.w !RAM_SMB3_Level_ConsecutiveEnemiesStompedCounter
	CMP.b #$08
	BCC.b CODE_27BE8A
	LDA.b #$08
	STA.w !RAM_SMB3_Level_ConsecutiveEnemiesStompedCounter
CODE_27BE8A:
	LDX.b #$04
CODE_27BE8C:
	STX.b $9B
	LDA.w $079F,x
	AND.b #$7F
	BEQ.b CODE_27BEAA
	CMP.b #$0D
	BCC.b CODE_27BEA5
	LDA.w $079F,x
	AND.b #$80
	ORA.b #$0D
	STA.w $079F,x
	AND.b #$7F
CODE_27BEA5:
	STA.b $00
	JSR.w CODE_27BEAE
CODE_27BEAA:
	DEX
	BPL.b CODE_27BE8C
	RTL

CODE_27BEAE:
	LDA.w !RAM_SMB3_Level_Player_SizeChangeAnimationTimer
	ORA.w !RAM_SMB3_Level_Player_FireFlowerGetPaletteAnimationTimer
	ORA.w !RAM_SMB3_Level_Player_SmokePuffAnimationTimer
	BNE.b CODE_27BEBD
	LDA.b $9C
	BNE.b CODE_27BF13
CODE_27BEBD:
	LDA.w $07A4,x
	BNE.b CODE_27BEC8
CODE_27BEC2:
	LDA.b #$00
	STA.w $079F,x
	RTS

CODE_27BEC8:
	DEC.w $07A4,x
	CMP.b #$2A
	BNE.b CODE_27BEFA
	LDY.b $00
	LDA.w !RAM_SMB3_Global_PointsToGiveLo
	CLC
	ADC.w DATA_21C75B,y
	STA.w !RAM_SMB3_Global_PointsToGiveLo
	LDA.w !RAM_SMB3_Global_PointsToGiveMid
	ADC.w DATA_21C768,y
	STA.w !RAM_SMB3_Global_PointsToGiveMid
	CPY.b #$0D
	BNE.b CODE_27BEF8
	LDA.b #!Define_SMAS_Sound0063_1up
	STA.w !RAM_SMB3_Global_SoundCh3
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.w !RAM_SMB3_Level_Player_MariosLives,x
	BMI.b CODE_27BEF8
	INC.w !RAM_SMB3_Level_Player_MariosLives,x
CODE_27BEF8:
	LDX.b $9B
CODE_27BEFA:
	LDA.w $07A4,x
	LSR
	LSR
	LSR
	LSR
	TAY
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.w DATA_21C776,y
	BNE.b CODE_27BF13
	LDA.w $07A9,x
	CMP.b #$04
	BCC.b CODE_27BF13
	DEC.w $07A9,x
CODE_27BF13:
	STZ.b $D9
	LDA.w $0781
	STA.b $D8
	CMP.b #$80
	BCC.b CODE_27BF20
	DEC.b $D9
CODE_27BF20:
	LDA.w $0251,x
	XBA
	LDA.w $07AE,x
	REP.b #$20
	SEC
	SBC.b $D8
	SEP.b #$20
	STA.w $07AE,x
	XBA
	STA.w $0251,x
	LDA.w $07AE,x
	CMP.b #$F8
	BCS.b CODE_27BEC2
	LDA.w $07A9,x
	SEC
	SBC.w $0780
	STA.w $07A9,x
	CMP.b #$F8
	BCC.b CODE_27BF4D
	BRL.w CODE_27BEC2

CODE_27BF4D:
	JSL.l CODE_27A19E
	STZ.b $01
	LDX.b $00
	LDA.w DATA_21C741,x
	LDX.b $9B
	CMP.b #$FF
	BEQ.b CODE_27BF99
	REP.b #$10
	LDY.b $C6,x
	STA.w SMB3_OAMBuffer[$00].Tile,y
	CMP.w DATA_21C74E
	BNE.b CODE_27BF6E
	LDA.b #$22
	BRA.b CODE_27BF70

CODE_27BF6E:
	LDA.b #$20
CODE_27BF70:
	STA.w SMB3_OAMBuffer[$00].Prop,y
	LDA.w $07A9,x
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	LDA.w $07AE,x
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	REP.b #$20
	LDA.b $C6,x
	CLC
	ADC.w #$0004
	STA.b $C6,x
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.w $0251,x
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	SEP.b #$10
CODE_27BF99:
	REP.b #$10
	LDY.b $C6,x
	LDA.w $07A9,x
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	LDA.w $07AE,x
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	LDA.w $0251,x
	ADC.b #$00
	STA.b $D8
	LDX.b $00
	LDA.w DATA_21C74E,x
	STA.w SMB3_OAMBuffer[$00].Tile,y
	LDA.b #$20
	CPX.w #$000D
	BNE.b CODE_27BFC4
	ORA.b #$02
CODE_27BFC4:
	STA.w SMB3_OAMBuffer[$00].Prop,y
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b $D8
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	SEP.b #$10
	LDX.b $9B
	RTS

;--------------------------------------------------------------------

; Note: Seems to be the routine for handling the brick pieces(?) and smoke puffs.

SMB3_ProcessMinorExtendedSprites:
.Main:
;$27BFDB
	LDX.b #$01
CODE_27BFDD:
	STX.b $9B
	JSR.w CODE_27BFE6
	DEX
	BPL.b CODE_27BFDD
CODE_27BFE5:
	RTS

CODE_27BFE6:
	LDA.w !RAM_SMB3_Level_MExtSpr_SpriteID,x
	BEQ.b CODE_27BFE5
	CMP.b #$02
	BEQ.b CODE_27BFF2
	JMP.w CODE_27C1CC

CODE_27BFF2:
	LDA.b $9C
	BNE.b CODE_27BFFF
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$03
	BNE.b CODE_27BFFF
	INC.w !RAM_SMB3_Level_MExtSpr_Table7E1FA5,x
CODE_27BFFF:
	LDA.w !RAM_SMB3_Level_MExtSpr_Table7E1FB1,x
	STA.b $01
	LDA.w !RAM_SMB3_Level_MExtSpr_YPosLo,x
	STA.b $00
	REP.b #$20
	LDA.w $0780
	AND.w #$00FF
	CMP.w #$0080
	BCC.b CODE_27C019
	ORA.w #$FF00
CODE_27C019:
	STA.b $02
	LDA.w !RAM_SMB3_Level_MExtSpr_Table7E1FA5,x
	AND.w #$00FF
	CMP.w #$0080
	BCC.b CODE_27C029
	ORA.w #$FF00
CODE_27C029:
	STA.b $D8
	LDA.b $9C
	AND.w #$00FF
	BEQ.b CODE_27C037
	LDA.w #$0000
	BRA.b CODE_27C039

CODE_27C037:
	LDA.b $D8
CODE_27C039:
	CLC
	ADC.b $00
	SEC
	SBC.b $02
	STA.b $00
	CLC
	ADC.w #$0010
	STA.b $04
	SEP.b #$20
	LDA.b $00
	STA.w !RAM_SMB3_Level_MExtSpr_YPosLo,x
	LDA.b $01
	STA.w !RAM_SMB3_Level_MExtSpr_Table7E1FB1,x
	LDA.b $05
	BEQ.b CODE_27C060
	LDA.w !RAM_SMB3_Level_MExtSpr_Table7E1FAE,x
	AND.b #$08
	BNE.b CODE_27C06F
	BRA.b CODE_27C067

CODE_27C060:
	LDA.w !RAM_SMB3_Level_MExtSpr_Table7E1FAE,x
	AND.b #$08
	BEQ.b CODE_27C06F
CODE_27C067:
	LDA.w !RAM_SMB3_Level_MExtSpr_Table7E1FAE,x
	EOR.b #$08
	STA.w !RAM_SMB3_Level_MExtSpr_Table7E1FAE,x
CODE_27C06F:
	LDA.b $9C
	BNE.b CODE_27C076
	INC.w !RAM_SMB3_Level_MExtSpr_Table7E1FA8,x
CODE_27C076:
	LDA.w !RAM_SMB3_Level_MExtSpr_Table7E1FAB,x
	STA.b $00
	LDA.b !RAM_SMB3_Level_MExtSpr_Table7E00DF,x
	STA.b $01
	REP.b #$20
	LDA.b $9C
	AND.w #$00FF
	BEQ.b CODE_27C08D
	LDA.w #$0000
	BRA.b CODE_27C093

CODE_27C08D:
	LDA.b $D8
	CLC
	ADC.w #$0002
CODE_27C093:
	CLC
	ADC.b $00
	SEC
	SBC.b $02
	STA.b $00
	CLC
	ADC.w #$0010
	STA.b $04
	SEP.b #$20
	LDA.b $00
	STA.w !RAM_SMB3_Level_MExtSpr_Table7E1FAB,x
	LDA.b $01
	STA.b !RAM_SMB3_Level_MExtSpr_Table7E00DF,x
	LDA.b $05
	BEQ.b CODE_27C0B9
	LDA.w !RAM_SMB3_Level_MExtSpr_Table7E1FAE,x
	AND.b #$04
	BNE.b CODE_27C0C8
	BRA.b CODE_27C0C0

CODE_27C0B9:
	LDA.w !RAM_SMB3_Level_MExtSpr_Table7E1FAE,x
	AND.b #$04
	BEQ.b CODE_27C0C8
CODE_27C0C0:
	LDA.w !RAM_SMB3_Level_MExtSpr_Table7E1FAE,x
	EOR.b #$04
	STA.w !RAM_SMB3_Level_MExtSpr_Table7E1FAE,x
CODE_27C0C8:
	STZ.b $DD
	LDA.w $0781
	STA.b $DC
	BPL.b CODE_27C0D3
	DEC.b $DD
CODE_27C0D3:
	LDA.w !RAM_SMB3_Level_MExtSpr_XPosHi,x
	XBA
	LDA.w !RAM_SMB3_Level_MExtSpr_XPosLo,x
	REP.b #$20
	SEC
	SBC.b $DC
	SEP.b #$20
	STA.w !RAM_SMB3_Level_MExtSpr_XPosLo,x
	XBA
	STA.w !RAM_SMB3_Level_MExtSpr_XPosHi,x
	JSR.w CODE_27D78B
	BCC.b CODE_27C0EE
	RTS

CODE_27C0EE:
	LDA.w !RAM_SMB3_Level_MExtSpr_Table7E1FAE,x
	STA.b $03
	CMP.b #$0C
	BCC.b CODE_27C101
	LDA.w !RAM_SMB3_Level_MExtSpr_Table7E1FB1,x
	CMP.b #$01
	BNE.b CODE_27C101
	JMP.w CODE_27C1C6

CODE_27C101:
	LDA.b $03
	AND.b #$08
	BNE.b CODE_27C110
	LDA.w !RAM_SMB3_Level_MExtSpr_YPosLo,x
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	STA.w SMB3_OAMBuffer[$01].YDisp,y
CODE_27C110:
	LDA.b $03
	AND.b #$04
	BNE.b CODE_27C11F
	LDA.w !RAM_SMB3_Level_MExtSpr_Table7E1FAB,x
	STA.w SMB3_OAMBuffer[$02].YDisp,y
	STA.w SMB3_OAMBuffer[$03].YDisp,y
CODE_27C11F:
	LSR.b $03
	BCC.b CODE_27C12B
	LDA.b #$F0
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	STA.w SMB3_OAMBuffer[$02].YDisp,y
CODE_27C12B:
	LSR.b $03
	BCC.b CODE_27C137
	LDA.b #$F0
	STA.w SMB3_OAMBuffer[$01].YDisp,y
	STA.w SMB3_OAMBuffer[$03].YDisp,y
CODE_27C137:
	STZ.b $DD
	LDA.w !RAM_SMB3_Level_MExtSpr_Table7E1FA8,x
	STA.b $DC
	LDA.w !RAM_SMB3_Level_MExtSpr_XPosHi,x
	XBA
	LDA.w !RAM_SMB3_Level_MExtSpr_XPosLo,x
	REP.b #$20
	CLC
	ADC.b $DC
	CLC
	ADC.w #$0008
	STA.b $DA
	SEP.b #$20
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$02].XDisp,y
	LDA.b $DB
	BEQ.b CODE_27C164
	LDA.w !RAM_SMB3_Level_MExtSpr_Table7E1FAE,x
	ORA.b #$01
	STA.w !RAM_SMB3_Level_MExtSpr_Table7E1FAE,x
CODE_27C164:
	LDA.w !RAM_SMB3_Level_MExtSpr_XPosHi,x
	XBA
	LDA.w !RAM_SMB3_Level_MExtSpr_XPosLo,x
	REP.b #$20
	SEC
	SBC.b $DC
	STA.b $DC
	SEP.b #$20
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	STA.w SMB3_OAMBuffer[$03].XDisp,y
	LDA.b $DD
	BEQ.b CODE_27C186
	LDA.w !RAM_SMB3_Level_MExtSpr_Table7E1FAE,x
	ORA.b #$02
	STA.w !RAM_SMB3_Level_MExtSpr_Table7E1FAE,x
CODE_27C186:
	LDA.w $0565
	AND.b #$06
	LSR
	LSR
	ROR
	ROR
	ORA.b #$20
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$01].Prop,y
	STA.w SMB3_OAMBuffer[$02].Prop,y
	STA.w SMB3_OAMBuffer[$03].Prop,y
	LDA.b #$4A
	STA.w SMB3_OAMBuffer[$00].Tile,y
	STA.w SMB3_OAMBuffer[$01].Tile,y
	STA.w SMB3_OAMBuffer[$02].Tile,y
	STA.w SMB3_OAMBuffer[$03].Tile,y
	PHY
	TYA
	LSR
	LSR
	TAY
	LDA.b $DB
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$02].Slot,y
	LDA.b $DD
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$03].Slot,y
	PLY
CODE_27C1C5:
	RTS

CODE_27C1C6:
	LDA.b #$00
	STA.w !RAM_SMB3_Level_MExtSpr_SpriteID,x
	RTS

CODE_27C1CC:
	LDA.w !RAM_SMB3_Level_MExtSpr_Table7E1FAE,x
	BEQ.b CODE_27C1C6
	LDA.b $9C
	BNE.b CODE_27C1D8
	DEC.w !RAM_SMB3_Level_MExtSpr_Table7E1FAE,x
CODE_27C1D8:
	LDA.w !RAM_SMB3_Level_MExtSpr_YPosLo,x
	LDY.w $05FC
	BNE.b CODE_27C1E7
	SEC
	SBC.w $0780
	STA.w !RAM_SMB3_Level_MExtSpr_YPosLo,x
CODE_27C1E7:
	CMP.b #$D0
	BCS.b CODE_27C1C6
	CPY.b #$00
	BNE.b CODE_27C1F9
	LDA.w !RAM_SMB3_Level_MExtSpr_XPosLo,x
	SEC
	SBC.w $0781
	STA.w !RAM_SMB3_Level_MExtSpr_XPosLo,x
CODE_27C1F9:
	CMP.b #$F0
	BCS.b CODE_27C1C6
	TXA
	EOR.b !RAM_SMB3_Global_FrameCounter
	AND.b #$01
	TAY
	LDA.w DATA_21C77C,y
	TAY
	LDA.w SMB3_OAMBuffer[$00].YDisp,y
	CMP.b #$F0
	BNE.b CODE_27C1C5
	LDA.w !RAM_SMB3_Level_MExtSpr_XPosLo,x
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$02].XDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	STA.w SMB3_OAMBuffer[$03].XDisp,y
	LDA.w !RAM_SMB3_Level_MExtSpr_YPosLo,x
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	STA.w SMB3_OAMBuffer[$01].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$02].YDisp,y
	STA.w SMB3_OAMBuffer[$03].YDisp,y
	LDA.w $0565
	LSR
	LSR
	LSR
	ROR
	AND.b #$80
	STA.b $00
	LDA.b #$22
	ORA.b $00
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$02].Prop,y
	EOR.b #$C0
	STA.w SMB3_OAMBuffer[$01].Prop,y
	STA.w SMB3_OAMBuffer[$03].Prop,y
	LDA.w !RAM_SMB3_Level_MExtSpr_Table7E1FAE,x
	LSR
	LSR
	LSR
	TAX
	LDA.w DATA_21C836,x
	STA.b $D8
	INC
	STA.b $D9
	LDA.w SMB3_OAMBuffer[$00].Prop,y
	AND.b #$80
	BEQ.b CODE_27C26F
	LDA.b $D8
	PHA
	LDA.b $D9
	STA.b $D8
	PLA
	STA.b $D9
CODE_27C26F:
	LDA.b $D8
	STA.w SMB3_OAMBuffer[$00].Tile,y
	STA.w SMB3_OAMBuffer[$03].Tile,y
	LDA.b $D9
	STA.w SMB3_OAMBuffer[$02].Tile,y
	STA.w SMB3_OAMBuffer[$01].Tile,y
	TYA
	LSR
	LSR
	TAY
	LDA.b #$00
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$02].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$03].Slot,y
	LDX.b $9B
	RTS

;--------------------------------------------------------------------

SMB3_ProcessSpinningCoinSprites:
.Main:
;$27C294
	LDX.b #$03
CODE_27C296:
	STX.b $9B
	LDA.w !RAM_SMB3_CoinSpr_SpriteExitsFlag,x
	BEQ.b CODE_27C2A0
	JSR.w CODE_27C2A4
CODE_27C2A0:
	DEX
	BPL.b CODE_27C296
	RTS

CODE_27C2A4:
	LDA.b $9C
	BNE.b CODE_27C30B
	LDA.w !RAM_SMB3_CoinSpr_YSpeed,x
	CMP.b #$05
	BEQ.b CODE_27C2E2
	INC.w !RAM_SMB3_CoinSpr_AnimationFrameCounter,x
	LDA.w !RAM_SMB3_CoinSpr_YPosLo,x
	CLC
	ADC.w !RAM_SMB3_CoinSpr_YSpeed,x
	STA.w !RAM_SMB3_CoinSpr_YPosLo,x
	LDA.w !RAM_SMB3_CoinSpr_AnimationFrameCounter,x
	AND.b #$03
	BNE.b CODE_27C2E2
	INC.w !RAM_SMB3_CoinSpr_YSpeed,x
	LDA.w !RAM_SMB3_CoinSpr_YSpeed,x
	CMP.b #$05
	BNE.b CODE_27C2E2
	LDA.w !RAM_SMB3_CoinSpr_YPosLo,x
	STA.l $7FC52E,x
	STZ.w !RAM_SMB3_CoinSpr_AnimationFrameCounter,x
	LDA.w !RAM_SMB3_CoinSpr_SpriteExitsFlag,x
	PHA
	JSR.w CODE_27C412
	PLA
	STA.w !RAM_SMB3_CoinSpr_SpriteExitsFlag,x
CODE_27C2E2:
	LDA.w $0781
	STA.b $D8
	STZ.b $D9
	CMP.b #$80
	BCC.b CODE_27C2EF
	DEC.b $D9
CODE_27C2EF:
	LDA.w !RAM_SMB3_CoinSpr_XPosHi,x
	XBA
	LDA.w !RAM_SMB3_CoinSpr_XPosLo,x
	REP.b #$20
	SEC
	SBC.b $D8
	SEP.b #$20
	STA.w !RAM_SMB3_CoinSpr_XPosLo,x
	XBA
	STA.w !RAM_SMB3_CoinSpr_XPosHi,x
	LDA.w !RAM_SMB3_CoinSpr_XPosLo,x
	CMP.b #$F8
	BCS.b CODE_27C327
CODE_27C30B:
	LDA.w !RAM_SMB3_CoinSpr_YSpeed,x
	CMP.b #$05
	BNE.b CODE_27C315
	BRL.w CODE_27C39B

CODE_27C315:
	LDA.b $9C
	BEQ.b CODE_27C32A
	LDA.w !RAM_SMB3_CoinSpr_YPosLo,x
	SEC
	SBC.w $0780
	STA.w !RAM_SMB3_CoinSpr_YPosLo,x
	CMP.b #$C5
	BCC.b CODE_27C32A
CODE_27C327:
	BRL.w CODE_27C43C

CODE_27C32A:
	JSL.l CODE_27A19E
	REP.b #$10
	LDY.b $C6,x
	LDA.w !RAM_SMB3_CoinSpr_YPosLo,x
	CMP.b #$A8
	BCC.b CODE_27C33B
	LDA.b #$F0
CODE_27C33B:
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$01].YDisp,y
	LDA.w !RAM_SMB3_CoinSpr_XPosLo,x
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	LDA.w !RAM_SMB3_CoinSpr_XPosHi,x
	STA.b $D8
	REP.b #$20
	LDA.w !RAM_SMB3_CoinSpr_AnimationFrameCounter,x
	LSR
	LSR
	AND.w #$0003
	TAX
	SEP.b #$20
	LDA.w DATA_21C77E,x
	STA.w SMB3_OAMBuffer[$00].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$01].Tile,y
	LDA.w DATA_21C782,x
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$01].Prop,y
	PHY
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b $D8
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	PLY
	SEP.b #$10
	LDX.b $9B
	RTS

DATA_27C38B:
	db $E0,$E0,$E0,$E0,$E2,$E2,$E2,$E2
	db $E4,$E4,$E4,$E4,$E4,$E4,$E4,$E4

CODE_27C39B:
	LDA.b $9C
	BEQ.b CODE_27C3B2
	LDA.l $7FC52E,x
	SEC
	SBC.w $0780
	STA.l $7FC52E,x
	CMP.b #$C5
	BCC.b CODE_27C3B2
	BRL.w CODE_27C43C

CODE_27C3B2:
	JSL.l CODE_27A19E
	REP.b #$10
	LDY.b $C6,x
	LDA.l $7FC52E,x
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	LDA.w !RAM_SMB3_CoinSpr_XPosHi,x
	XBA
	LDA.w !RAM_SMB3_CoinSpr_XPosLo,x
	REP.b #$20
	CLC
	ADC.w #$FFFC
	SEP.b #$20
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	XBA
	STA.b $D8
	REP.b #$20
	LDA.w !RAM_SMB3_CoinSpr_AnimationFrameCounter,x
	AND.w #$000F
	TAX
	SEP.b #$20
	LDA.l DATA_27C38B,x
	STA.w SMB3_OAMBuffer[$00].Tile,y
	LDA.b #$21
	STA.w SMB3_OAMBuffer[$00].Prop,y
	PHY
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b $D8
	AND.b #$01
	ORA.b #$02
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	PLY
	SEP.b #$10
	LDX.b $9B
	INC.w !RAM_SMB3_CoinSpr_AnimationFrameCounter,x
	LDA.w !RAM_SMB3_CoinSpr_AnimationFrameCounter,x
	AND.b #$0F
	BEQ.b CODE_27C43C
	RTS

CODE_27C412:
	JSR.w CODE_278ADB
	LDA.b #$85
	STA.w $079F,y
	LDA.b #$30
	STA.w $07A4,y
	LDA.w !RAM_SMB3_CoinSpr_YPosLo,x
	CMP.b #$C0
	BCC.b CODE_27C428
	LDA.b #$05
CODE_27C428:
	STA.w $07A9,y
	LDA.w !RAM_SMB3_CoinSpr_XPosLo,x
	SEC
	SBC.b #$04
	STA.w $07AE,y
	LDA.w !RAM_SMB3_CoinSpr_XPosHi,x
	SBC.b #$00
	STA.w $0251,y
CODE_27C43C:
	LDA.b #$00
	STA.w !RAM_SMB3_CoinSpr_SpriteExitsFlag,x
	RTS

;--------------------------------------------------------------------

CODE_27C442:
	LDA.b #$01
	STA.w $1A68,x
	LDA.w !RAM_SMB3_Level_ExtSpr_YPosLo,x
	CLC
	ADC.b #$0C
	STA.b $05
	AND.b #$F0
	STA.b $02
	LDA.w !RAM_SMB3_Level_ExtSpr_YPosHi,x
	ADC.b #$00
	PHA
	LDA.w !RAM_SMB3_Level_ExtSpr_XPosLo,x
	CLC
	ADC.b #$04
	SEC
	SBC.w $0210
	CLC
	ADC.w $0210
	STA.b $04
	PLA
	STA.b $01
	PHX
	LDA.b $12
	ADC.b #$00
	ASL
	TAX
	LDA.l DATA_218200,x
	STA.b $00
	STA.b $DB
	LDA.b $01
	AND.b #$01
	CLC
	ADC.l DATA_218200+$01,x
	STA.b $01
	CLC
	ADC.b #$20
	STA.b $DC
	PLX
	LDA.b $04
	LSR
	LSR
	LSR
	LSR
	ORA.b $02
	TAY
	LDA.b #$7E2000>>16
	STA.b $02
	STA.b $DD
	LDA.b [$DB],y
	BEQ.b CODE_27C4B7
	PHX
	LDA.w !RAM_SMB3_Global_TilesetFromHeader
	ASL
	TAX
	LDA.w DATA_21AB57,x
	STA.b $DB
	LDA.w DATA_21AB57+$01,x
	STA.b $DC
	LDA.b [$00],y
	TAY
	LDA.b ($DB),y
	PLX
	BRA.b CODE_27C4B9

CODE_27C4B7:
	LDA.b [$00],y
CODE_27C4B9:
	PHA
	ASL
	ROL
	ROL
	AND.b #$03
	TAY
	STY.b $01
	PLA
	STA.b $00
	CMP.w !RAM_SMB3_Global_Map16FloorTileAttributeTable,y
	BCC.b CODE_27C505
	CMP.w !RAM_SMB3_Global_Map16WallTileAttributeTable,y
	BCC.b CODE_27C4F4
	LDA.w !RAM_SMB3_Level_ExtSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_ExtSpr0C_FireBroFire
	BEQ.b CODE_27C4D8
	SEC
	RTS

CODE_27C4D8:
	INC.w $06C7,x
	LDA.w $06C7,x
	CMP.b #$02
	BNE.b CODE_27C4E5
	JMP.w CODE_27C527

CODE_27C4E5:
	DEC.w !RAM_SMB3_Level_ExtSpr_YPosLo,x
	DEC.w !RAM_SMB3_Level_ExtSpr_YPosLo,x
	DEC.w !RAM_SMB3_Level_ExtSpr_YPosLo,x
CODE_27C4EE:
	LDA.b #$D4
	STA.w !RAM_SMB3_Level_ExtSpr_YSpeed,x
CODE_27C4F3:
	RTS

CODE_27C4F4:
	LDA.w !RAM_SMB3_Level_ExtSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_ExtSpr0C_FireBroFire
	CLC
	BNE.b CODE_27C4F3
	LDA.b $05
	AND.b #$0F
	CMP.b #$05
	BCC.b CODE_27C4EE
	RTS

CODE_27C505:
	LDA.w !RAM_SMB3_Level_ExtSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_ExtSpr14_MiniBlooper
	CLC
	BNE.b CODE_27C521
	LDA.w $0560
	ASL
	ASL
	CLC
	ADC.b $01
	TAY
	LDA.w DATA_21AD84,y
	CMP.b $00
	BCC.b CODE_27C520
	DEC.w $1A68,x
CODE_27C520:
	RTS

CODE_27C521:
	LDA.b #$00
	STA.w $06C7,x
	RTS

CODE_27C527:
	LDA.b #!Define_SMAS_Sound0060_HitHead
	STA.w !RAM_SMB3_Global_SoundCh1
	NOP #7
	JMP.w CODE_27D38D

;--------------------------------------------------------------------

SMB3_ProcessExtendedSprites:
.Main:
;$27C536
	LDA.b #$00
	STA.w !RAM_SMB3_Level_Player_NumberOfClingingMicroGoombas
	LDX.b #$09
CODE_27C53D:
	STX.b $9B
	JSR.w CODE_27C546
	DEX
	BPL.b CODE_27C53D
SMB3_ExtSpr00_NoSprite:
.Main:
CODE_27C545:
	RTS

CODE_27C546:
	LDA.w !RAM_SMB3_Level_ExtSpr_SpriteID,x
	BEQ.b CODE_27C545
	LDA.w $05FE
	BEQ.b CODE_27C56F
	LDA.b $9C
	BNE.b CODE_27C56F
	LDA.w !RAM_SMB3_Level_ExtSpr_XPosLo,x
	CLC
	ADC.l $7E3952
	STA.w !RAM_SMB3_Level_ExtSpr_XPosLo,x
	LDA.w !RAM_SMB3_Level_ExtSpr_YPosLo,x
	CLC
	ADC.l $7E3953
	STA.w !RAM_SMB3_Level_ExtSpr_YPosLo,x
	BCC.b CODE_27C56F
	INC.w !RAM_SMB3_Level_ExtSpr_YPosHi,x
CODE_27C56F:
	LDY.b $9C
	BNE.b CODE_27C57B
	LDY.w $06D1,x
	BEQ.b CODE_27C57B
	DEC.w $06D1,x
CODE_27C57B:
	LDA.b !RAM_SMB3_Level_ExtSpr_XPosHi,x
	XBA
	LDA.w !RAM_SMB3_Level_ExtSpr_XPosLo,x
	REP.b #$20
	SEC
	SBC.w $0210
	CMP.w #$00F8
	BCC.b CODE_27C595
	CMP.w #$FFF8
	BCS.b CODE_27C595
	SEP.b #$20
	BRA.b CODE_27C5D1

CODE_27C595:
	SEP.b #$20
	LDA.w !RAM_SMB3_Level_ExtSpr_YPosLo,x
	CLC
	ADC.b #$14
	PHA
	LDA.w !RAM_SMB3_Level_ExtSpr_YPosHi,x
	ADC.b #$00
	STA.b $00
	PLA
	CMP.w $0543
	LDA.b $00
	SBC.w $0542
	STA.b $0D
	BEQ.b CODE_27C5D6
	LDA.w !RAM_SMB3_Level_ExtSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_ExtSpr0E_Bubble
	BEQ.b CODE_27C5CD
	CMP.b #!Define_SMB3_SpriteID_ExtSpr06_MicroGoomba
	BEQ.b CODE_27C5CD
	CMP.b #!Define_SMB3_SpriteID_ExtSpr10_MagicWand
	BEQ.b CODE_27C5CD
	CMP.b #!Define_SMB3_SpriteID_ExtSpr13_BrickPiece
	BEQ.b CODE_27C5CD
	CMP.b #!Define_SMB3_SpriteID_ExtSpr07_SpikeBall
	BEQ.b CODE_27C5CD
	CMP.b #!Define_SMB3_SpriteID_ExtSpr01_Hammer
	BNE.b CODE_27C5D1
CODE_27C5CD:
	LDA.b $0D
	BMI.b CODE_27C5D6
CODE_27C5D1:
	SEP.b #$20
	JMP.w CODE_27D382

CODE_27C5D6:
	LDA.w !RAM_SMB3_Level_ExtSpr_SpriteID,x
	JSL.l SMB3_ExecutePtr_Absolute

DATA_27C5DD:
	dw SMB3_ExtSpr00_NoSprite_Main
	dw SMB3_ExtSpr01_Hammer_Main
	dw SMB3_ExtSpr02_Boomerang_Main
	dw SMB3_ExtSpr03_UnusedProjectile_Main
	dw SMB3_ExtSpr04_NipperFire_Main
	dw SMB3_ExtSpr05_PiranhaPlantFire_Main
	dw SMB3_ExtSpr06_MicroGoomba_Main
	dw SMB3_ExtSpr07_SpikeBall_Main
	dw SMB3_ExtSpr08_WandBlast_Main
	dw SMB3_ExtSpr09_PowerDownSuit_Main
	dw SMB3_ExtSpr0A_ThrownWrench_Main
	dw SMB3_ExtSpr0B_Cannonball_Main
	dw SMB3_ExtSpr0C_FireBroFire_Main
	dw SMB3_ExtSpr0D_SmallStar_Main
	dw SMB3_ExtSpr0E_Bubble_Main
	dw SMB3_ExtSpr0F_LavaLotusFire_Main
	dw SMB3_ExtSpr10_MagicWand_Main
	dw SMB3_ExtSpr11_SpinningCoin_Main
	dw SMB3_ExtSpr12_FireChompFire_Main
	dw SMB3_ExtSpr13_BrickPiece_Main
	dw SMB3_ExtSpr14_MiniBlooper_Main
	dw SMB3_ExtSpr15_Laser_Main
	dw SMB3_ExtSpr16_SmokePuff_Main
	dw SMB3_ExtSpr17_PodobooFire_Main
	dw SMB3_ExtSpr18_LavaSplash_Main

;--------------------------------------------------------------------

	%ROUTINE_SMB3_ExtSpr15_Laser(NULLROM)				; $27C60F
	%ROUTINE_SMB3_ExtSpr14_MiniBlooper(NULLROM)			; $27C6D6

;--------------------------------------------------------------------

SMB3_ExtSpr11_SpinningCoin:
.Main:
SMB3_ExtSpr13_BrickPiece:
.Main:
;$27C7A7
	LDA.b $9C
	BNE.b CODE_27C7CC
	INC.w $06BD,x
	JSR.w CODE_27CC1B
	LDA.w !RAM_SMB3_Level_ExtSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_ExtSpr13_BrickPiece
	BNE.b CODE_27C7CC
	LDA.w !RAM_SMB3_Level_ExtSpr_YSpeed,x
	BMI.b CODE_27C7C1
	CMP.b #$70
	BCS.b CODE_27C7CC
CODE_27C7C1:
	LDA.w $06C7,x
	BNE.b CODE_27C7C9
	INC.w !RAM_SMB3_Level_ExtSpr_YSpeed,x
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	INC.w !RAM_SMB3_Level_ExtSpr_YSpeed,x
	BRA.b CODE_27C7CC
endif
CODE_27C7C9:
	INC.w !RAM_SMB3_Level_ExtSpr_YSpeed,x
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	INC.w !RAM_SMB3_Level_ExtSpr_YSpeed,x
endif
CODE_27C7CC:
	JSR.w CODE_27D72B
	LDA.w !RAM_SMB3_Level_ExtSpr_YPosHi,x
	XBA
	LDA.w !RAM_SMB3_Level_ExtSpr_YPosLo,x
	REP.b #$20
	SEC
	SBC.w $0216
	CMP.w #$0100
	BCC.b CODE_27C7E6
	CMP.w #$FFF0
	BCC.b SMB3_ExtSpr14_MiniBlooper_CODE_27C7A1
CODE_27C7E6:
	SEP.b #$20
	LDA.w !RAM_SMB3_Level_ExtSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_ExtSpr13_BrickPiece
	BEQ.b CODE_27C7F2
	BRL.w CODE_27C8A1

CODE_27C7F2:
	LDA.w $06C7,x
	BEQ.b CODE_27C848
	LDA.b !RAM_SMB3_Level_ExtSpr_XPosHi,x
	XBA
	LDA.w !RAM_SMB3_Level_ExtSpr_XPosLo,x
	REP.b #$30
	SEC
	SBC.w $0210
	STA.b $D8
	SEP.b #$20
	LDY.b $C6,x
	JSR.w CODE_27CE16
	LDA.b #$4A
	STA.w SMB3_OAMBuffer[$00].Tile,y
	LDA.b #$06
	STA.b $00
	LDA.w $06D1,x
	BEQ.b CODE_27C826
	JSL.l CODE_27AA75
	ASL
	STA.b $00
	LDA.b #$4B
	STA.w SMB3_OAMBuffer[$00].Tile,y
CODE_27C826:
	LDA.w $0565
	ASL
	ASL
	ASL
	ASL
	AND.b #$C0
	ORA.b #$20
	ORA.b $00
	STA.w SMB3_OAMBuffer[$00].Prop,y
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b $D9
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	SEP.b #$10
	RTS

CODE_27C848:
	LDA.b !RAM_SMB3_Level_ExtSpr_XPosHi,x
	XBA
	LDA.w !RAM_SMB3_Level_ExtSpr_XPosLo,x
	REP.b #$30
	SEC
	SBC.w $0210
	STA.b $D8
	CLC
	ADC.w #$0008
	STA.b $DA
	SEP.b #$20
	LDY.b $C6,x
	JSR.w CODE_27CF49
	LDA.b #$0C
	STA.w SMB3_OAMBuffer[$00].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$01].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$02].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$03].Tile,y
	LDA.b #$20
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$01].Prop,y
	STA.w SMB3_OAMBuffer[$02].Prop,y
	STA.w SMB3_OAMBuffer[$03].Prop,y
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b $D9
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	LDA.b $DB
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$02].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$03].Slot,y
	SEP.b #$10
	RTS

CODE_27C8A1:
	LDA.w !RAM_SMB3_Level_ExtSpr_YSpeed,x
	CMP.b #$20
	BMI.b CODE_27C8B6
	JSR.w CODE_27D382
	INC.w !RAM_SMB3_Global_CoinsToGive
	JSR.w CODE_278ADB
	LDA.b #$89
	JMP.w SMB3_ExtSpr0B_Cannonball_CODE_27CD2B

CODE_27C8B6:
	LDA.b !RAM_SMB3_Level_ExtSpr_XPosHi,x
	XBA
	LDA.w !RAM_SMB3_Level_ExtSpr_XPosLo,x
	REP.b #$30
	SEC
	SBC.w $0210
	CLC
	ADC.w #$0004
	STA.b $D8
	SEP.b #$20
	LDY.b $C6,x
	JSR.w CODE_27CE16
	LDA.w SMB3_OAMBuffer[$00].XDisp,y
	CLC
	ADC.b #$04
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	LDA.w SMB3_OAMBuffer[$00].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$01].YDisp,y
	REP.b #$20
	LDA.w $06BD,x
	LSR
	LSR
	AND.w #$0003
	TAX
	SEP.b #$20
	LDA.w DATA_21C786,x
	STA.w SMB3_OAMBuffer[$00].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$01].Tile,y
	LDA.w DATA_21C78A,x
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$01].Prop,y
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b $D9
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	SEP.b #$10
	LDX.b $9B
	RTS

;--------------------------------------------------------------------

	%ROUTINE_SMB3_ExtSpr0D_SmallStar(NULLROM)			; $27C91B
	%ROUTINE_SMB3_ExtSpr10_MagicWand(NULLROM)			; $27C995
	%ROUTINE_SMB3_ExtSpr0F_LavaLotusFire(NULLROM)			; $27CAAE
	%ROUTINE_SMB3_ExtSpr0E_Bubble(NULLROM)				; $27CB74

;--------------------------------------------------------------------

CODE_27CC1B:
	JSR.w SMB3_UpdateExtendedSpritePosition_X
	JSR.w SMB3_UpdateExtendedSpritePosition_Y
CODE_27CC21:
	LDA.w !RAM_SMB3_Level_ExtSpr_YSpeed,x
	BMI.b CODE_27CC2A
	CMP.b #$6E
	BCS.b CODE_27CC30
CODE_27CC2A:
	INC.w !RAM_SMB3_Level_ExtSpr_YSpeed,x
	INC.w !RAM_SMB3_Level_ExtSpr_YSpeed,x
CODE_27CC30:
	RTS

;--------------------------------------------------------------------

	%ROUTINE_SMB3_ExtSpr0B_Cannonball(NULLROM)			; $27CC31

;--------------------------------------------------------------------

CODE_27CD5F:
	LDA.w $05FC
	BEQ.b CODE_27CD7A
	LDY.b #$00
	LDA.w $0780
	BPL.b CODE_27CD6C
	DEY
CODE_27CD6C:
	CLC
	ADC.w !RAM_SMB3_Level_ExtSpr_YPosLo,x
	STA.w !RAM_SMB3_Level_ExtSpr_YPosLo,x
	TYA
	ADC.w !RAM_SMB3_Level_ExtSpr_YPosHi,x
	STA.w !RAM_SMB3_Level_ExtSpr_YPosHi,x
CODE_27CD7A:
	RTS

;--------------------------------------------------------------------

	%ROUTINE_SMB3_ExtSpr0A_ThrownWrench(NULLROM)			; $27CD7B

;--------------------------------------------------------------------

CODE_27CE16:
	LDA.w !RAM_SMB3_Level_ExtSpr_YPosLo,x
	SEC
	SBC.w $0543
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	LDA.w !RAM_SMB3_Level_ExtSpr_XPosLo,x
	SEC
	SBC.w $0210
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	RTS

;--------------------------------------------------------------------

	%ROUTINE_SMB3_ExtSpr08_WandBlast(NULLROM)			; $27CE2B
	%ROUTINE_SMB3_ExtSpr09_PowerDownSuit(NULLROM)			; $27CEC9

;--------------------------------------------------------------------

CODE_27CF49:
	JSR.w CODE_27CE16
	LDA.w SMB3_OAMBuffer[$00].YDisp,y
	STA.w SMB3_OAMBuffer[$02].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$01].YDisp,y
	STA.w SMB3_OAMBuffer[$03].YDisp,y
	LDA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$02].XDisp,y
	STA.w SMB3_OAMBuffer[$03].XDisp,y
	RTS

;--------------------------------------------------------------------

	%ROUTINE_SMB3_ExtSpr07_SpikeBall(NULLROM)			; $27CF6B
	%ROUTINE_SMB3_ExtSpr06_MicroGoomba(NULLROM)			; $27D013
	%ROUTINE_SMB3_ExtSpr01_Hammer(NULLROM)				; $27D178

;--------------------------------------------------------------------

CODE_27D22E:
	INC.w $06BD,x
	JSR.w CODE_27CC1B
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b !RAM_SMB3_Global_FrameCounter
	LSR
	BCS.b CODE_27D234
	JSR.w CODE_27CC21
endif
CODE_27D234:
	JSR.w CODE_27D72B
	BEQ.b CODE_27D23A
	RTS

CODE_27D23A:
	STY.b $01
	LDA.w !RAM_SMB3_Level_ExtSpr_XSpeed,x
	LDY.w !RAM_SMB3_Level_ExtSpr_SpriteID,x
	CPY.b #!Define_SMB3_SpriteID_ExtSpr01_Hammer
	BEQ.b CODE_27D248
	EOR.b #$80
CODE_27D248:
	LSR
	AND.b #$40
	STA.b $00
	CPY.b #!Define_SMB3_SpriteID_ExtSpr01_Hammer
	BNE.b CODE_27D259
	LDY.b $01
	JSR.w CODE_27D398
	JMP.w CODE_27D2F3

CODE_27D259:
	LDA.b !RAM_SMB3_Level_ExtSpr_XPosHi,x
	XBA
	LDA.w !RAM_SMB3_Level_ExtSpr_XPosLo,x
	REP.b #$30
	SEC
	SBC.w $0210
	STA.b $D8
	CLC
	ADC.w #$0008
	STA.b $DA
	LDY.b $C6,x
	LDA.w $06BD,x
	AND.w #$000C
	LSR
	LSR
	TAX
	SEP.b #$20
	LDA.b $00
	EOR.w DATA_21C81C,x
	ORA.b #$23
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$01].Prop,y
	STA.w SMB3_OAMBuffer[$02].Prop,y
	STA.w SMB3_OAMBuffer[$03].Prop,y
	LDA.b $00
	BEQ.b CODE_27D293
	INX
	INX
CODE_27D293:
	REP.b #$20
	TXA
	AND.w #$0003
	TAX
	SEP.b #$20
	LDA.w DATA_21C820,x
	STA.w SMB3_OAMBuffer[$00].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$01].Tile,y
	LDA.w DATA_21C822,x
	STA.w SMB3_OAMBuffer[$02].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$03].Tile,y
	LDA.w SMB3_OAMBuffer[$00].Prop,y
	AND.b #$80
	BEQ.b CODE_27D2D3
	LDA.w SMB3_OAMBuffer[$00].Tile,y
	PHA
	LDA.w SMB3_OAMBuffer[$01].Tile,y
	STA.w SMB3_OAMBuffer[$00].Tile,y
	PLA
	STA.w SMB3_OAMBuffer[$01].Tile,y
	LDA.w SMB3_OAMBuffer[$02].Tile,y
	PHA
	LDA.w SMB3_OAMBuffer[$03].Tile,y
	STA.w SMB3_OAMBuffer[$02].Tile,y
	PLA
	STA.w SMB3_OAMBuffer[$03].Tile,y
CODE_27D2D3:
	PHY
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b $D9
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	LDA.b $DB
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$02].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$03].Slot,y
	PLY
	SEP.b #$10
CODE_27D2F3:
	LDX.b $9B
	REP.b #$10
	LDY.b $C6,x
	JSR.w CODE_27CF49
	SEP.b #$10
	LDA.w $06C7,x
	AND.b #$0F
	BNE.b CODE_27D35A
CODE_27D305:
	TXA
	CLC
	ADC.b !RAM_SMB3_Global_FrameCounter
	LSR
	BCC.b CODE_27D35A
	LDY.b #$00
	LDA.b !RAM_SMB3_Level_Player_CurrentPowerUp
	BEQ.b CODE_27D318
	LDA.w !RAM_SMB3_Level_Player_DuckingFlag
	BNE.b CODE_27D318
	INY
CODE_27D318:
	LDA.w !RAM_SMB3_Level_ExtSpr_YPosLo,x
	CLC
	ADC.b #$08
	SEC
	SBC.b !RAM_SMB3_Level_Player_YPosLo
	SEC
	SBC.w DATA_21C7FA,y
	CMP.w DATA_21C7FC,y
	BCS.b CODE_27D387
	LDA.w !RAM_SMB3_Level_ExtSpr_XPosLo,x
	CLC
	ADC.b #$06
	SEC
	SBC.b !RAM_SMB3_Level_Player_XPosLo
	SBC.b #$00
	CMP.b #$10
	BCS.b CODE_27D387
CODE_27D339:
	LDA.w !RAM_SMB3_Level_Player_HurtTimer
	ORA.w !RAM_SMB3_Level_Player_IsTanookiStatueTimer
	ORA.b $9C
	ORA.w !RAM_SMB3_Level_Player_DeathState
	ORA.w $0583
	ORA.w !RAM_SMB3_Level_Player_BehindLayer1Flag
	ORA.b $0D
	BNE.b CODE_27D387
	LDA.w !RAM_SMB3_Level_ExtSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_ExtSpr06_MicroGoomba
	BNE.b CODE_27D35B
	LDA.b #$05
	STA.w $06C7,x
CODE_27D35A:
	RTS

CODE_27D35B:
	CMP.b #!Define_SMB3_SpriteID_ExtSpr10_MagicWand
	BNE.b CODE_27D378
	INC.w $07BE
	LDA.b #$01
	STA.w $02D9
	LDA.b #!Define_SMB3_LevelMusic_PassedBoss
	STA.w !RAM_SMB3_Global_MusicCh1
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$2C
else
	LDA.b #$60
endif
	STA.w $02E3
	LDA.b #$01
	STA.w $02E4
	BRA.b CODE_27D382

CODE_27D378:
	LDA.w !RAM_SMB3_Level_Player_StarPowerTimer
	BNE.b CODE_27D388
	JSL.l CODE_27A4C7
	RTS

CODE_27D382:
	LDA.b #!Define_SMB3_SpriteID_ExtSpr00_NoSprite
	STA.w !RAM_SMB3_Level_ExtSpr_SpriteID,x
CODE_27D387:
	RTS

CODE_27D388:
	LDA.b #!Define_SMAS_Sound0060_KickShell
	STA.w !RAM_SMB3_Global_SoundCh1
CODE_27D38D:
	LDA.b #!Define_SMB3_SpriteID_ExtSpr16_SmokePuff
	STA.w !RAM_SMB3_Level_ExtSpr_SpriteID,x
	LDA.b #$1F
	STA.w $06C7,x
	RTS

CODE_27D398:
	LDA.b !RAM_SMB3_Level_ExtSpr_XPosHi,x
	XBA
	LDA.w !RAM_SMB3_Level_ExtSpr_XPosLo,x
	REP.b #$30
	SEC
	SBC.w $0210
	STA.b $D8
	CLC
	ADC.w #$0008
	STA.b $DA
	LDY.b $C6,x
	LDA.w $06BD,x
	AND.w #$001C
	LSR
	LSR
	TAX
	SEP.b #$20
	LDA.b $D9
	STA.b $DC
	LDA.b $DB
	STA.b $DD
	LDA.b $00
	EOR.w DATA_21C800,x
	ORA.b #$21
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$01].Prop,y
	STA.w SMB3_OAMBuffer[$02].Prop,y
	STA.w SMB3_OAMBuffer[$03].Prop,y
	LDA.b $00
	BEQ.b CODE_27D3DC
	INX
	INX
	INX
	INX
CODE_27D3DC:
	REP.b #$20
	TXA
	AND.w #$0007
	TAX
	SEP.b #$20
	LDA.w DATA_21C808,x
	STA.b $D8
	INC
	STA.b $D9
	LDA.w DATA_21C80C,x
	STA.b $DA
	INC
	STA.b $DB
	LDA.w SMB3_OAMBuffer[$00].Prop,y
	AND.b #$80
	BEQ.b CODE_27D410
	LDA.b $D8
	PHA
	LDA.b $D9
	STA.b $D8
	PLA
	STA.b $D9
	LDA.b $DA
	PHA
	LDA.b $DB
	STA.b $DA
	PLA
	STA.b $DB
CODE_27D410:
	LDA.b $D8
	STA.w SMB3_OAMBuffer[$00].Tile,y
	LDA.b $D9
	STA.w SMB3_OAMBuffer[$01].Tile,y
	LDA.b $DA
	STA.w SMB3_OAMBuffer[$02].Tile,y
	LDA.b $DB
	STA.w SMB3_OAMBuffer[$03].Tile,y
	PHY
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b $DC
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	LDA.b $DD
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$02].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$03].Slot,y
	PLY
	SEP.b #$10
	RTS

;--------------------------------------------------------------------

	%ROUTINE_SMB3_ExtSpr02_Boomerang(NULLROM)				; $27D445
	%ROUTINE_SMB3_ExtSpr03_UnusedProjectile(NULLROM)			; $27D50B
	%ROUTINE_SMB3_ExtSprXX_EnemyFireball(NULLROM)				; $27D579
	%ROUTINE_SMB3_ExtSpr16_SmokePuff(NULLROM)				; $27D675

;--------------------------------------------------------------------

CODE_27D72B:
	REP.b #$10
	LDA.b #$07
	STA.b $DA
	STX.b $D8
	STZ.b $D9
CODE_27D735:
	LDA.b #$00
	XBA
	REP.b #$20
	LDA.b $D8
	AND.w #$00FF
	ASL
	TAY
	LDA.w DATA_21AF6E,y
	STA.b $C6,x
	TAY
	SEP.b #$20
	LDA.b $D8
	INC
	AND.b #$07
	STA.b $D8
	LDA.w SMB3_OAMBuffer[$00].YDisp,y
	CMP.w SMB3_OAMBuffer[$02].YDisp,y
	BNE.b CODE_27D75C
	CMP.b #$F0
	BEQ.b CODE_27D786
CODE_27D75C:
	DEC.b $DA
	BPL.b CODE_27D735
	LDY.w #$0080
CODE_27D763:
	STY.b $C6,x
	LDA.w SMB3_OAMBuffer[$00].YDisp,y
	CMP.w SMB3_OAMBuffer[$01].YDisp,y
	BNE.b CODE_27D771
	CMP.b #$F0
	BEQ.b CODE_27D786
CODE_27D771:
	REP.b #$20
	TYA
	CLC
	ADC.w #$0008
	TAY
	SEP.b #$20
	CPY.w #$0200
	BNE.b CODE_27D763
	LDA.b #$00
	STA.b $C6,x
	STA.b $C7,x
CODE_27D786:
	SEP.b #$10
	LDA.b $0D
	RTS

;--------------------------------------------------------------------

; Note: Something related to hitting a breakable brick from the side?

CODE_27D78B:
	TXA
	EOR.b !RAM_SMB3_Global_FrameCounter
	AND.b #$01
	TAY
	LDA.w DATA_21C77A,y
	TAY
	LDA.w SMB3_OAMBuffer[$00].YDisp,y
	CMP.w SMB3_OAMBuffer[$01].YDisp,y
	BNE.b CODE_27D7AB
	CMP.w SMB3_OAMBuffer[$02].YDisp,y
	BNE.b CODE_27D7AB
	CMP.w SMB3_OAMBuffer[$03].YDisp,y
	BNE.b CODE_27D7AB
	CMP.b #$F0
	BEQ.b CODE_27D7CE
CODE_27D7AB:
	LDY.b #$00
CODE_27D7AD:
	LDA.w SMB3_OAMBuffer[$00].YDisp,y
	CMP.w SMB3_OAMBuffer[$01].YDisp,y
	BNE.b CODE_27D7C3
	CMP.w SMB3_OAMBuffer[$02].YDisp,y
	BNE.b CODE_27D7C3
	CMP.w SMB3_OAMBuffer[$03].YDisp,y
	BNE.b CODE_27D7C3
	CMP.b #$F0
	BEQ.b CODE_27D7CE
CODE_27D7C3:
	TYA
	CLC
	ADC.b #$10
	TAY
	CPY.b #$40
	BNE.b CODE_27D7AD
	SEC
	RTS

CODE_27D7CE:
	CLC
	RTS

;--------------------------------------------------------------------

; Note: Something related to turning around?

CODE_27D7D0:
	LDY.b #$00
CODE_27D7D2:
	LDA.w SMB3_OAMBuffer[$00].YDisp,y
	CMP.b #$F0
	BEQ.b CODE_27D7E4
	TYA
	CLC
	ADC.b #$04
	TAY
	CPY.b #$40
	BNE.b CODE_27D7D2
	SEC
	RTS

CODE_27D7E4:
	CLC
	RTS

;--------------------------------------------------------------------

	%ROUTINE_SMB3_UpdateExtendedSpritePosition(NULLROM)			; $27D7E6
	%ROUTINE_SMB3_ProcessShooterSprites(NULLROM)				; $27D840
	%ROUTINE_SMB3_ShooterSpr15_LaserBowserStatue(NULLROM)			; $27D89A
	%ROUTINE_SMB3_ShooterSprXX_Cannons(NULLROM)				; $27D8F0
	%ROUTINE_SMB3_ShooterSprXX_PipeSpawningGoombas(NULLROM)			; $27D9EC
	%ROUTINE_SMB3_ShooterSpr04_RotatingCannonballShooter(NULLROM)		; $27DA5A

;--------------------------------------------------------------------

; Note: Routine that spawns cannonballs.

CODE_27DAC8:
	CMP.b #$01
	BNE.b CODE_27DAED
	LDA.w $06DB,x
	AND.b #$07
	STA.b $00
	JSR.w CODE_27DAE3
	LDA.w $06DB,x
	CLC
	ADC.b #$04
	AND.b #$07
CODE_27DADE:
	STA.b $00
	JMP.w CODE_27DAE3						; Optimization: Jump to next line...

CODE_27DAE3:
	LDY.b #$05
CODE_27DAE5:
	LDA.w !RAM_SMB3_Level_ExtSpr_SpriteID,y
	BEQ.b CODE_27DAEE
	DEY
	BPL.b CODE_27DAE5
CODE_27DAED:
	RTS

CODE_27DAEE:
	LDA.b #!Define_SMB3_SpriteID_ExtSpr0B_Cannonball
	STA.w !RAM_SMB3_Level_ExtSpr_SpriteID,y
	LDA.w !RAM_SMB3_Level_ShooterSpr_XPosHi,x
	STA.b $D9
	LDA.w !RAM_SMB3_Level_ShooterSpr_XPosLo,x
	STA.b $D8
	LDX.b $00
	REP.b #$20
	LDA.w DATA_21C875,x
	AND.w #$00FF
	CMP.w #$0080
	BCC.b CODE_27DB0F
	ORA.w #$FF00
CODE_27DB0F:
	CLC
	ADC.b $D8
	STA.b $D8
	SEP.b #$20
	LDA.b $D8
	STA.w !RAM_SMB3_Level_ExtSpr_XPosLo,y
	LDA.b $D9
	STA.w !RAM_SMB3_Level_ExtSpr_XPosHi,y
	LDA.w DATA_21C861,x
	STA.w !RAM_SMB3_Level_ExtSpr_YSpeed,y
	LDA.w DATA_21C84D,x
	STA.w !RAM_SMB3_Level_ExtSpr_XSpeed,y
	LDA.b #$00
	STA.b $02
	LDA.w DATA_21C88B,x
	BPL.b CODE_27DB37
	DEC.b $02
CODE_27DB37:
	CLC
	LDX.b $9B
	ADC.w !RAM_SMB3_Level_ShooterSpr_YPosLo,x
	STA.w !RAM_SMB3_Level_ExtSpr_YPosLo,y
	LDA.w !RAM_SMB3_Level_ShooterSpr_YPosHi,x
	ADC.b $02
	STA.w !RAM_SMB3_Level_ExtSpr_YPosHi,y
	LDA.b #$00
	STA.w $06C7,y
	JMP.w CODE_27DB51

CODE_27DB50:								; Optimization: Unused RTS
	RTS

;--------------------------------------------------------------------

CODE_27DB51:
	LDA.b #!Define_SMAS_Sound0063_CannonShoot
	STA.w !RAM_SMB3_Global_SoundCh3
	JSL.l CODE_279545
	LDA.b #$01
	STA.w !RAM_SMB3_Level_MExtSpr_SpriteID
	LDA.w !RAM_SMB3_Level_ShooterSpr_XPosLo,x
	CLC
	LDX.b $00
	ADC.w DATA_21C875,x
	SEC
	SBC.w $0210
	STA.w !RAM_SMB3_Level_MExtSpr_XPosLo
	LDA.w DATA_21C88B,x
	LDX.b $9B
	CLC
	ADC.w !RAM_SMB3_Level_ShooterSpr_YPosLo,x
	SEC
	SBC.w $0543
	STA.w !RAM_SMB3_Level_MExtSpr_YPosLo
	LDA.b #$1F
	STA.w !RAM_SMB3_Level_MExtSpr_Table7E1FAE
	RTS

;--------------------------------------------------------------------

	%ROUTINE_SMB3_ShooterSpr03_RockyWrenchSpawner(NULLROM)			; $27DB85
	%ROUTINE_SMB3_ShooterSprXX_BulletShooter(NULLROM)			; $27DBE7

;--------------------------------------------------------------------

CODE_27DC88:
	LDX.b #$04
CODE_27DC8A:
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	BEQ.b CODE_27DC97
	DEX
	BPL.b CODE_27DC8A
	PLA
	PLA
	LDX.b $9B
	RTS

CODE_27DC97:
	JSL.l CODE_279C97
	LDA.b #$02
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	RTS

;--------------------------------------------------------------------

CODE_27DCA1:
	LDA.w $034E
	BNE.b CODE_27DCA7
	RTL

CODE_27DCA7:
	INC.w $034E
	CMP.b #$10
	BNE.b CODE_27DCB5
	PHP
	LDX.b #!Define_SMAS_Sound0063_Door2
	STX.w !RAM_SMB3_Global_SoundCh3
	PLP
CODE_27DCB5:
	BCS.b CODE_27DD11
	JSR.w CODE_27DD67
	LDX.b #$00
	JSR.w CODE_27D72B
	REP.b #$10
	LDY.b $C6
	LDX.w #$0000
CODE_27DCC6:
	LDA.b $0A
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	LDA.b $0B
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	STA.w SMB3_OAMBuffer[$01].YDisp,y
	CLC
	ADC.b #$08
	STA.b $0B
	LDA.b $0C
	INC.b $0C
	INC.b $0C
	STA.w SMB3_OAMBuffer[$00].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$01].Tile,y
	LDA.b #$20
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$01].Prop,y
	REP.b #$20
	TYA
	LSR
	LSR
	PHX
	TAX
	SEP.b #$20
	STZ.w SMB3_OAMTileSizeBuffer[$00].Slot,x
	STZ.w SMB3_OAMTileSizeBuffer[$01].Slot,x
	PLX
	TYA
	CLC
	ADC.b #$08
	TAY
	INX
	CPX.w #$0004
	BNE.b CODE_27DCC6
	SEP.b #$10
	RTL

CODE_27DD11:
	CMP.b #$20
	BCS.b CODE_27DD66
	EOR.b #$1F
	JSR.w CODE_27DD67
	LDA.b #$04
	STA.b $0D
CODE_27DD1E:
	JSR.w CODE_27D7D0
	LDA.b $0A
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	TYA
	LSR
	LSR
	TAX
	STZ.w SMB3_OAMTileSizeBuffer[$00].Slot,x
	STZ.w SMB3_OAMTileSizeBuffer[$01].Slot,x
	LDA.b $0B
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	LDA.b $0C
	STA.w SMB3_OAMBuffer[$00].Tile,y
	LDA.b #$20
	STA.w SMB3_OAMBuffer[$00].Prop,y
	INC.b $0C
	JSR.w CODE_27D7D0
	LDA.b $0A
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	LDA.b $0B
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	CLC
	ADC.b #$08
	STA.b $0B
	LDA.b $0C
	STA.w SMB3_OAMBuffer[$00].Tile,y
	LDA.b #$20
	STA.w SMB3_OAMBuffer[$00].Prop,y
	INC.b $0C
	DEC.b $0D
	BNE.b CODE_27DD1E
CODE_27DD66:
	RTL

CODE_27DD67:
	REP.b #$20
	AND.w #$00FC
	LSR
	LSR
	XBA
	CLC
	ADC.w #SMB3_Bank42Graphics_Sprite_DynamicDoorAndLetters
	STA.w $022C
	CLC
	ADC.w #$0040
	STA.w $022E
	CLC
	ADC.w #$0040
	STA.w $0230
	CLC
	ADC.w #$0040
	STA.w $0232
if !Define_Global_ROMToAssemble&(!ROM_SMAS_U|!ROM_SMAS_E|!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) == $00
	STA.w $0234
	STA.w $0236
endif
	SEP.b #$20
	LDA.b #SMB3_Bank42Graphics_Sprite_DynamicDoorAndLetters>>16
	STA.w $0239
	LDA.b !RAM_SMB3_Level_Player_YPosLo
	STA.b $D8
	LDA.b !RAM_SMB3_Level_Player_YPosHi
	STA.b $D9
	LDA.b $43
	XBA
	LDA.b !RAM_SMB3_Level_Player_XPosLo
	REP.b #$20
	SEC
	SBC.w $0210
	STA.b $0A
	LDA.b $D8
	SEC
	SBC.w $0216
	DEC
	STA.b $0B
	SEP.b #$20
	LDA.b #$10
	STA.b $0C
CODE_27DDBC:
	RTS

;--------------------------------------------------------------------

DATA_27DDBD:
	dw $FFFF,$0002,$0005,$0008
	dw $0008,$0005,$0002,$FFFF

DATA_27DDCD:
	dw $FBFA,$FDFC

CODE_27DDD1:
	STZ.b $D8
	LDA.b !RAM_SMB3_Level_Player_CurrentPose
	CMP.w DATA_21E984
	BEQ.b CODE_27DDEB
	CMP.w DATA_21E985
	BEQ.b CODE_27DDEB
	LDA.l $7FC522
	ORA.l $7FC523
	BEQ.b CODE_27DDBC
	INC.b $D8
CODE_27DDEB:
	LDA.w !RAM_SMB3_Global_SoundCh2
	BNE.b CODE_27DDFB
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$07
	BNE.b CODE_27DDFB
	LDA.b #!Define_SMAS_Sound0061_TurnAround
	STA.w !RAM_SMB3_Global_SoundCh2
CODE_27DDFB:
	LDX.b #$01
CODE_27DDFD:
	LDA.l $7FC522,x
	BEQ.b CODE_27DE53
	INC
	STA.l $7FC522,x
	AND.b #$0F
	CMP.b #$04
	BNE.b CODE_27DE49
	LDY.b $D8
	BNE.b CODE_27DE49
	PHX
	TXA
	EOR.b #$01
	TAX
	LDA.l $7FC522,x
	AND.b #$F0
	CMP.b #$40
	BEQ.b CODE_27DE24
	CLC
	ADC.b #$10
CODE_27DE24:
	STA.l $7FC522,x
	LDA.b !RAM_SMB3_Level_Player_XPosLo
	STA.l $7FC524,x
	LDA.b $43
	STA.l $7FC526,x
	LDA.b !RAM_SMB3_Level_Player_YPosLo
	STA.l $7FC528,x
	LDA.b !RAM_SMB3_Level_Player_YPosHi
	STA.l $7FC52A,x
	LDA.b $BD
	STA.l $7FC52C,x
	PLX
	BRA.b CODE_27DE53

CODE_27DE49:
	CMP.b #$08
	BNE.b CODE_27DE53
	LDA.b #$00
	STA.l $7FC522,x
CODE_27DE53:
	DEX
	BPL.b CODE_27DDFD
	LDX.b #$01
CODE_27DE58:
	LDA.l $7FC522,x
	BNE.b CODE_27DE61
	BRL.w CODE_27DEF3

CODE_27DE61:
	JSR.w CODE_27D7D0
	PHX
	LDA.l $7FC52C,x
	AND.b #$40
	LSR
	LSR
	LSR
	STA.b $D8
	LDA.l $7FC522,x
	STA.b $DC
	AND.b #$F0
	SEC
	SBC.b #$10
	LSR
	LSR
	LSR
	CLC
	ADC.b $D8
	TAX
	REP.b #$20
	LDA.l DATA_27DDBD,x
	STA.b $DA
	SEP.b #$20
	LDA.b $DC
	AND.b #$0F
	LSR
	TAX
	LDA.l DATA_27DDCD,x
	STA.b $DC
	PLX
	LDA.l $7FC528,x
	STA.b $D8
	LDA.l $7FC52A,x
	STA.b $D9
	LDA.l $7FC526,x
	XBA
	LDA.l $7FC524,x
	REP.b #$20
	SEC
	SBC.w $0210
	CLC
	ADC.b $DA
	STA.b $0A
	LDA.b $D8
	SEC
	SBC.w $0216
	CLC
	ADC.w #$001A
	STA.b $D8
	SEP.b #$20
	LDA.b $D9
	BNE.b CODE_27DEF3
	LDA.b $0A
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	LDA.b $D8
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	LDA.b $DC
	STA.w SMB3_OAMBuffer[$00].Tile,y
	PHX
	LDA.b #$21
	LDX.w !RAM_SMB3_Level_Player_BehindLayer1Timer
	BEQ.b CODE_27DEE4
	LDA.b #$11
CODE_27DEE4:
	STA.w SMB3_OAMBuffer[$00].Prop,y
	PLX
	TYA
	LSR
	LSR
	TAY
	LDA.b $0B
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
CODE_27DEF3:
	DEX
	BMI.b CODE_27DEF9
	BRL.w CODE_27DE58

CODE_27DEF9:
	RTS

;--------------------------------------------------------------------

CODE_27DEFA:
	LDA.w !RAM_SMB3_Level_RunScrollSpritesFlag
	BEQ.b CODE_27DF2D
	LDA.w $02C1
	CMP.b #$34
	BNE.b CODE_27DF2D
	CPY.b #$01
	BEQ.b CODE_27DF2B
	LDA.b $71,x
	SEC
	SBC.w $0543
	CMP.b #$9E
	BCC.b CODE_27DF2B
	CMP.b #$A4
	BCS.b CODE_27DF2B
	LDA.w $0520,x
	BNE.b CODE_27DF2B
	LDA.b #$10
	STA.w $0520,x
	JSL.l CODE_278F34
	LDA.b #$82
	STA.w !RAM_SMB3_Level_SplashSpr_YPosLo,y
CODE_27DF2B:
	CLC
	RTL

CODE_27DF2D:
	SEC
	RTL

;--------------------------------------------------------------------

CODE_27DF2F:
	PHB
	PHK
	PLB
	STA.b $08
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_NorSpr018_Bowser
	BNE.b CODE_27DF49
	LDA.b #$22
	STA.b $0C
	STZ.b $0D
	LDA.b #$28
	STA.b $0E
	STZ.b $0F
	BRA.b CODE_27DF55

CODE_27DF49:
	LDA.b #$1A
	STA.b $0C
	STZ.b $0D
	LDA.b #$18
	STA.b $0E
	STZ.b $0F
CODE_27DF55:
	LDA.b $5F,x
	STA.b $0A
	LDA.b $44,x
	STA.b $0B
	REP.b #$20
	LDA.b $0A
	SEC
	SBC.w $0210
	SEC
	SBC.w #$0009
	STA.b $0A
	CLC
	ADC.b $0C
	STA.b $0C
	SEP.b #$20
	JSR.w CODE_27D7D0
	LDA.b $0A
	PHX
	JSR.w CODE_27DFBA
	LDA.w DATA_27DFEF,x
	STA.w SMB3_OAMBuffer[$00].Prop,y
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b #$02
	LDX.b $0B
	BEQ.b CODE_27DF91
	ORA.b #$01
CODE_27DF91:
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	PLX
	JSR.w CODE_27D7D0
	LDA.b $0C
	PHX
	JSR.w CODE_27DFBA
	LDA.w DATA_27DFF2,x
	STA.w SMB3_OAMBuffer[$00].Prop,y
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b #$02
	LDX.b $0D
	BEQ.b CODE_27DFB4
	ORA.b #$01
CODE_27DFB4:
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	PLX
	PLB
	RTL

CODE_27DFBA:
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	LDA.b $56,x
	XBA
	LDA.b $71,x
	REP.b #$20
	SEC
	SBC.w $0216
	CLC
	ADC.b $0E
	SEP.b #$20
	XBA
	AND.b #$FF
	BNE.b CODE_27DFD5
	XBA
	BRA.b CODE_27DFD7

CODE_27DFD5:
	LDA.b #$F0
CODE_27DFD7:
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	LDA.b $08
	CMP.b #$0B
	BCC.b CODE_27DFE2
	LDA.b #$0B
CODE_27DFE2:
	LSR
	LSR
	TAX
	LDA.w DATA_27DFEC,x
	STA.w SMB3_OAMBuffer[$00].Tile,y
	RTS

DATA_27DFEC:
	db $20,$E6,$E8

DATA_27DFEF:
	db $60,$61,$21

DATA_27DFF2:
	db $20,$21,$21

;--------------------------------------------------------------------

	%ROUTINE_SMB3_ExtSpr17_PodobooFire(NULLROM)				; $27DFF5
	%ROUTINE_SMB3_ExtSpr18_LavaSplash(NULLROM)				; $27E064
	%ROUTINE_SMB3_DrawLoadingLetters(NULLROM)				; $27E17C
if !Define_Global_ROMToAssemble&(!ROM_SMAS_U|!ROM_SMAS_J1) != $00
	if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR]
		%FREE_BYTES(NULLROM, 953-24, $FF)
	else
		%FREE_BYTES(NULLROM, 953, $FF)
	endif
elseif !Define_Global_ROMToAssemble&(!ROM_SMAS_E) != $00
	%FREE_BYTES(NULLROM, 933, $FF)
elseif !Define_Global_ROMToAssemble&(!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	%FREE_BYTES(NULLROM, 950, $FF)
elseif !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMB3_E) != $00
	%FREE_BYTES(NULLROM, 927, $FF)
else
	%FREE_BYTES(NULLROM, 944, $FF)						; $27E200
endif
	%DATATABLE_RT08_SMB3_LevelData(NULLROM)				; $27E5B0
	%FREE_BYTES(NULLROM, 3, $FF)							; $27FFFD
%BANK_END(<EndBank>)
endmacro

;#############################################################################################################
;#############################################################################################################

macro SMB3Bank28Macros(StartBank, EndBank)
%BANK_START(<StartBank>)
	%ROUTINE_RT01_SMB3_NorSprStatus01_Init(NULLROM)			; $288000
	%ROUTINE_RT01_SMB3_NorSprStatus02_Normal(NULLROM)		; $28821C

DATA_288438:
	dl SMB3_NorSpr000_UnusedSprite_SteppedOnRt_Main
	dl CODE_288715				; 01
	dl SMB3_NorSpr002_UnusedSprite_SteppedOnRt_Main
	dl SMB3_NorSpr003_UnusedSprite_SteppedOnRt_Main
	dl CODE_288822				; 04
	dl CODE_2888BF				; 05
	dl SMB3_NorSpr006_VerticalBounceSprite_SteppedOnRt_Main
	dl SMB3_NorSpr007_SecretToadHouseWarp_SteppedOnRt_Main
	dl SMB3_NorSpr008_InvisiblePSwitchDoor_SteppedOnRt_Main
	dl SMB3_NorSpr009_AirshipAnchor_SteppedOnRt_Main
	dl CODE_288C47				; 0A
	dl CODE_288CD4				; 0B
	dl CODE_288D47				; 0C
	dl CODE_288E94				; 0D
	dl CODE_28978D				; 0E
	dl SMB3_NorSpr00F_UnusedSprite_SteppedOnRt_Main
	dl SMB3_NorSpr010_UnusedSprite_SteppedOnRt_Main
	dl SMB3_NorSpr011_UnusedSprite_SteppedOnRt_Main
	dl SMB3_NorSpr012_UnusedSprite_SteppedOnRt_Main
	dl SMB3_NorSpr013_UnusedSprite_SteppedOnRt_Main
	dl SMB3_NorSpr014_UnusedSprite_SteppedOnRt_Main
	dl SMB3_NorSpr015_UnusedSprite_SteppedOnRt_Main
	dl SMB3_NorSpr016_UnusedSprite_SteppedOnRt_Main
	dl SMB3_NorSpr017_SpinyCheepCheep_SteppedOnRt_Main
	dl $000400				; 18
	dl CODE_289058				; 19
	dl CODE_289099				; 1A
	dl CODE_28917E				; 1B
	dl SMB3_NorSpr01C_UnusedStrangeRewardBlock_SteppedOnRt_Main
	dl SMB3_NorSpr01D_UnusedSprite_SteppedOnRt_Main
	dl CODE_289295				; 1E
	dl SMB3_NorSpr01F_VineHead_SteppedOnRt_Main
	dl SMB3_NorSpr020_UnusedSprite_SteppedOnRt_Main
	dl CODE_289489				; 21
	dl CODE_289489				; 22
	dl CODE_289489				; 23
	dl CODE_28B8B7				; 24
	dl SMB3_NorSpr025_OverworldPipeLevelController_SteppedOnRt_Main
	dl SMB3_NorSpr026_RightFlyingWoodPlatform_SteppedOnRt_Main
	dl SMB3_NorSpr027_FizedHorizontalMovementWoodPlatform_SteppedOnRt_Main
	dl SMB3_NorSpr028_FizedVerticalMovementWoodPlatform_SteppedOnRt_Main
	dl SMB3_NorSpr029_Spike_SteppedOnRt_Main
	dl CODE_28CEA8				; 2A
	dl CODE_28BFB2				; 2B
	dl CODE_28B8B7				; 2C
	dl SMB3_NorSpr02D_BossBass_SteppedOnRt_Main
	dl SMB3_NorSpr02E_ElevatorPlatform_SteppedOnRt_Main
	dl CODE_28CEA8				; 2F
	dl CODE_28CEA8				; 30
	dl CODE_28CEA8				; 31
	dl CODE_28CEA8				; 32
	dl CODE_28CEA8				; 33
	dl SMB3_NorSpr034_ToadHouseToad_SteppedOnRt_Main
	dl SMB3_NorSpr035_ToadHouseChestItem_SteppedOnRt_Main
	dl SMB3_NorSpr036_LeftFlyingWoodPlatformThatFalls_SteppedOnRt_Main
	dl SMB3_NorSpr037_FizedHorizontalMovementWoodPlatform_SteppedOnRt_Main
	dl SMB3_NorSpr038_FizedVerticalMovementWoodPlatform_SteppedOnRt_Main
	dl CODE_28CEA8				; 39
	dl SMB3_NorSpr03A_LineGuidedDonutPlatform_SteppedOnRt_Main
	dl CODE_28CEA8				; 3B
	dl SMB3_NorSpr03C_LineGuidedWoodPlatform_SteppedOnRt_Main
	dl CODE_28CEA8				; 3D
	dl SMB3_NorSpr03E_BuoyantPlatform_SteppedOnRt_Main
	dl CODE_28C4FD				; 3F
	dl SMB3_NorSpr040_BusterBeetle_SteppedOnRt_Main
	dl CODE_28CD6E				; 41
	dl CODE_28CEA8				; 42
	dl CODE_28CEA8				; 43
	dl SMB3_NorSpr044_FallingWoodPlatform_SteppedOnRt_Main
	dl CODE_28CEA8				; 45
	dl CODE_28CEA8				; 46
	dl SMB3_NorSpr047_GiantBlockHandler_SteppedOnRt_Main
	dl SMB3_NorSpr048_MiniBossBass_SteppedOnRt_Main
	dl SMB3_NorSpr049_BGCloud_SteppedOnRt_Main
	dl SMB3_NorSpr04A_GoalSphere_SteppedOnRt_Main
	dl SMB3_NorSpr04B_BoomBoom_SteppedOnRt_Main
	dl SMB3_NorSpr04C_FlyingBoomBoom_SteppedOnRt_Main
	dl SMB3_NorSpr04D_UnusedSprite_SteppedOnRt_Main
	dl SMB3_NorSpr04E_UnusedSprite_SteppedOnRt_Main
	dl SMB3_NorSpr04F_FreeChainChomp_SteppedOnRt_Main
	dl SMB3_NorSpr050_BobOmb_SteppedOnRt_Main
	dl SMB3_NorSpr051_DoubleCounterclockwiseRotoDisc_SteppedOnRt_Main
	dl SMB3_NorSpr052_MiniChest_SteppedOnRt_Main
	dl SMB3_NorSpr053_UpsideDownPodoboo_SteppedOnRt_Main
	dl SMB3_NorSpr054_DonutBlock_SteppedOnRt_Main
	dl SMB3_NorSpr055_WindupBobOmb_SteppedOnRt_Main
	dl SMB3_NorSpr056_LeftFacingSidewaysPiranhaPlant_SteppedOnRt_Main
	dl SMB3_NorSpr057_RightFacingSidewaysPiranhaPlant_SteppedOnRt_Main
	dl SMB3_NorSpr058_FireChomp_SteppedOnRt_Main
	dl SMB3_NorSpr059_FireSnake_SteppedOnRt_Main
	dl SMB3_NorSpr05A_SingleClockwiseRotoDisc_SteppedOnRt_Main
	dl SMB3_NorSpr05B_SingleCounterclockwiseRotoDisc_SteppedOnRt_Main
	dl SMB3_NorSpr05C_ThrowBlock_SteppedOnRt_Main
	dl SMB3_NorSpr05D_Whirlwind_SteppedOnRt_Main
	dl SMB3_NorSpr05E_DoubleHorizontalCrossingRotoDisc_SteppedOnRt_Main
	dl SMB3_NorSpr05F_DoubleVerticalCrossingRotoDisc_SteppedOnRt_Main
	dl SMB3_NorSpr060_DoubleClockwiseRotoDisc_SteppedOnRt_Main
	dl SMB3_NorSpr061_FollowingBlooperNanny_SteppedOnRt_Main
	dl SMB3_NorSpr062_Blooper_SteppedOnRt_Main
	dl SMB3_NorSpr063_BigBertha_SteppedOnRt_Main
	dl SMB3_NorSpr064_WaterHoppingRedCheepCheep_SteppedOnRt_Main
	dl SMB3_NorSpr065_UpwardsAirCurrent_SteppedOnRt_Main
	dl SMB3_NorSpr066_DownwardsAirCurrent_SteppedOnRt_Main
	dl SMB3_NorSpr067_LavaLotus_SteppedOnRt_Main
	dl $000870				; 68
	dl $000871				; 69
	dl SMB3_NorSpr06A_LaunchingBlooperNanny_SteppedOnRt_Main
	dl SMB3_NorSpr06B_JumpingFakeBrick_SteppedOnRt_Main
	dl $000000				; 6C
	dl $000000				; 6D
	dl $00086C				; 6E
	dl $00086D				; 6F
	dl $000000				; 70
	dl $000000				; 71
	dl $000000				; 72
	dl $000872				; 73
	dl $000872				; 74
	dl $000872				; 75
	dl $000000				; 76
	dl $000000				; 77
	dl $000000				; 78
	dl $000000				; 79
	dl $000000				; 7A
	dl $000000				; 7B
	dl $000000				; 7C
	dl $000000				; 7D
	dl $00087A				; 7E
	dl $000000				; 7F
	dl $00086C				; 80
	dl $000400				; 81
	dl $000400				; 82
	dl $000400				; 83
	dl $000000				; 84
	dl $000000				; 85
	dl $000400				; 86
	dl $000400				; 87
	dl $000000				; 88
	dl $000000				; 89
	dl $000000				; 8A
	dl $000000				; 8B
	dl $000000				; 8C
	dl $000000				; 8D
	dl $000000				; 8E
	dl $000000				; 8F
	dl SMB3_NorSpr090_WeightedPeaPlatform_SteppedOnRt_Main
	dl SMB3_NorSpr091_AutoRotatingPeaPlatform_SteppedOnRt_Main
	dl SMB3_NorSpr092_ClockwiseRotatingPeaPlatform_SteppedOnRt_Main
	dl SMB3_NorSpr093_CounterclockwiseRotatingPeaPlatform_SteppedOnRt_Main
	dl SMB3_NorSpr094_GiantQuestionMarkBlockWithThree1ups_SteppedOnRt_Main
	dl SMB3_NorSpr095_GiantQuestionMarkBlockWithMushroom_SteppedOnRt_Main
	dl SMB3_NorSpr096_GiantQuestionMarkBlockWithFireFlower_SteppedOnRt_Main
	dl SMB3_NorSpr097_GiantQuestionMarkBlockWithRaccoonLeaf_SteppedOnRt_Main
	dl SMB3_NorSpr098_GiantQuestionMarkBlockWithTanookiSuit_SteppedOnRt_Main
	dl SMB3_NorSpr099_GiantQuestionMarkBlockWithFrogSuit_SteppedOnRt_Main
	dl SMB3_NorSpr09A_GiantQuestionMarkBlockWithHammerSuit_SteppedOnRt_Main
	dl SMB3_NorSpr09B_UnusedSprite_SteppedOnRt_Main
	dl SMB3_NorSpr09C_UnusedSprite_SteppedOnRt_Main
	dl SMB3_NorSpr09D_UpwardFacingFireJet_SteppedOnRt_Main
	dl SMB3_NorSpr09E_Podoboo_SteppedOnRt_Main
	dl SMB3_NorSpr09F_Parabuzzy_SteppedOnRt_Main
	dl SMB3_NorSpr0A0_GreenClassicPiranhaPlant_SteppedOnRt_Main
	dl SMB3_NorSpr0A1_UpsideDownRedClassicPiranhaPlant_SteppedOnRt_Main
	dl SMB3_NorSpr0A2_RedClassicPiranhaPlant_SteppedOnRt_Main
	dl SMB3_NorSpr0A3_UpsideDownRedClassicPiranhaPlant_SteppedOnRt_Main
	dl SMB3_NorSpr0A4_GreenVenusFireTrap_SteppedOnRt_Main
	dl SMB3_NorSpr0A5_UpsideDownRedVenusFireTrap_SteppedOnRt_Main
	dl SMB3_NorSpr0A6_RedVenusFireTrap_SteppedOnRt_Main
	dl SMB3_NorSpr0A7_UpsideDownRedVenusFireTrap_SteppedOnRt_Main
	dl SMB3_NorSpr0A8_StaticOutlinePlatform_SteppedOnRt_Main
	dl SMB3_NorSpr0A9_SwitchableOutlinePlatform_SteppedOnRt_Main
	dl SMB3_NorSpr0AA_AirshipPropeller_SteppedOnRt_Main
	dl SMB3_NorSpr0AB_UnusedSprite_SteppedOnRt_Main
	dl SMB3_NorSpr0AC_LeftwardFacingFireJet_SteppedOnRt_Main
	dl SMB3_NorSpr0AD_RockyWrench_SteppedOnRt_Main
	dl SMB3_NorSpr0AE_MetalLugnut_SteppedOnRt_Main
	dl SMB3_NorSpr0AF_AngrySun_SteppedOnRt_Main
	dl $000000				; B0
	dl $000000				; B1
	dl $000000				; B2
	dl $000000				; B3

;--------------------------------------------------------------------

	%ROUTINE_SMB3_NorSpr017_SpinyCheepCheep_Status01(NULLROM)		; $288654
	%ROUTINE_SMB3_NorSpr017_SpinyCheepCheep_Status02(NULLROM)		; $28866F
	%ROUTINE_SMB3_NorSpr001_UnusedSprite_Status01(NULLROM)			; $2886D5
	%ROUTINE_SMB3_NorSpr001_UnusedSprite_Status02(NULLROM)			; $2886DE

;--------------------------------------------------------------------

CODE_288715:
	LDA.b $A6
	BEQ.b CODE_288724
	LDA.b !RAM_SMB3_Level_Player_YSpeed
	BMI.b CODE_28872E
	LDA.b #$00
	STA.b !RAM_SMB3_Level_Player_YSpeed
	JMP.w CODE_28872E

CODE_288724:
	LDA.b $C1
	BNE.b CODE_28877B
	LDA.b !RAM_SMB3_Global_ControllerHold1
	AND.b #(!Joypad_DPadL>>8)|(!Joypad_DPadR>>8)
	BNE.b CODE_288745
CODE_28872E:
	LDA.w $0689,x
	CMP.b #$18
	BPL.b CODE_288737
	LDA.b #$0A
CODE_288737:
	PHA
	LDA.b !RAM_SMB3_Level_Player_OnScreenXPos
	CMP.b !RAM_SMB3_Level_NorSpr_OnScreenXPos,x
	PLA
	BCS.b CODE_288743
	JSL.l SMB3_UnnecessaryInvertARt_Main
CODE_288743:
	STA.b $C1
CODE_288745:
	LDA.b $C1
	BEQ.b CODE_288751
	LDA.b #$00
	STA.w $0689,x
	JMP.w CODE_28877B

CODE_288751:
	LDA.w $0689,x
	LSR
	LSR
	LSR
	LSR
	TAY
	LDA.w DATA_21B892,y
	LDY.b $8B
	BPL.b CODE_288764
	JSL.l SMB3_UnnecessaryInvertARt_Main
CODE_288764:
	STA.b $8B
	STA.b $8C,x
	INC.w $0689,x
	LDA.w $0689,x
	CMP.b #$40
	BMI.b CODE_28877B
	DEC.w $0689,x
	LDA.b #$00
	STA.b $8B
	STA.b $8C,x
CODE_28877B:
	RTL

;--------------------------------------------------------------------

	%ROUTINE_SMB3_NorSpr002_UnusedSprite_Status01(NULLROM)			; $28877C
	%ROUTINE_SMB3_NorSpr002_UnusedSprite_Status02(NULLROM)			; $2887BC
	%ROUTINE_SMB3_NorSpr004_UnusedStickySprite_Status01(NULLROM)		; $2887F8
	%ROUTINE_SMB3_NorSpr004_UnusedStickySprite_Status02(NULLROM)		; $28880B

;--------------------------------------------------------------------

CODE_288822:
	LDA.b $9D
	STA.b $9E,x
	LDA.b $8B
	STA.b $8C,x
	LDA.w $056C
	CMP.b $BD
	BEQ.b CODE_288834
	INC.w $0518,x
CODE_288834:
	RTL

;--------------------------------------------------------------------

	%ROUTINE_SMB3_NorSpr005_UnusedBouncyEnemy_Status01(NULLROM)		; $288835
	%ROUTINE_SMB3_NorSpr005_UnusedBouncyEnemy_Status02(NULLROM)		; $288848

;--------------------------------------------------------------------

CODE_2888BF:
	LDA.w $0520,x
	BNE.b CODE_2888EA
	LDA.b $55
	STA.b $00
	LDA.b $71,x
	SEC
	SBC.b $70
	STA.b $01
	BCS.b CODE_2888D3
	INC.b $00
CODE_2888D3:
NorSpr000_UnknownSprite:
.Main:
;$2888D3
	LDA.b $00
	CMP.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	BNE.b CODE_2888F9
	LDA.b $01
	SEC
	SBC.b #$09
	BMI.b CODE_2888F9
	LDA.b #$00
	STA.w $0518,x
	LDA.b #$80
	STA.w $0520,x
CODE_2888EA:
	LDA.b #$C0
	STA.b !RAM_SMB3_Level_Player_YSpeed
	LDY.b #$10
	LDA.b !RAM_SMB3_Level_Player_XSpeed
	BPL.b CODE_2888F6
	LDY.b #$F0
CODE_2888F6:
	STY.b !RAM_SMB3_Level_Player_XSpeed
	RTL

CODE_2888F9:
	JSL.l CODE_27A4C7
	RTL

;--------------------------------------------------------------------

	%ROUTINE_SMB3_NorSpr006_VerticalBounceSprite_Status01(NULLROM)		; $2888FE
	%ROUTINE_SMB3_NorSpr006_VerticalBounceSprite_Status02(NULLROM)		; $288945

;--------------------------------------------------------------------

CODE_288A45:
	LDA.w $0689,x
	LSR
	LSR
	LSR
	LSR
	TAY
	LDA.w DATA_21B8C8,y
	ASL
	STA.b $00
	TYA
	ASL
	TAY
	LDA.w DATA_21B8D4,y
	STA.b $01
	LDA.w DATA_21B8D4+$01,y
	STA.b $02
	LDA.b #$00
	LDY.b $01
	CPY.b $02
	BNE.b CODE_288A6A
	LDA.b #$40
CODE_288A6A:
	STA.b $03
	REP.b #$10
	LDY.b $C6,x
	LDA.b $5F,x
	SEC
	SBC.w $0210
	STA.b !RAM_SMB3_Level_NorSpr_OnScreenXPos,x
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$02].XDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	STA.w SMB3_OAMBuffer[$03].XDisp,y
	LDA.b $56,x
	XBA
	LDA.b $71,x
	REP.b #$20
	SEC
	SBC.w $0216
	SEC
	SBC.w #$0001
	CMP.w #$00F0
	BCC.b CODE_288AA0
	CMP.w #$FFE0
	BCC.b CODE_288AF9
CODE_288AA0:
	SEP.b #$20
	STA.b !RAM_SMB3_Level_NorSpr_OnScreenYPos,x
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	STA.w SMB3_OAMBuffer[$01].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$02].YDisp,y
	STA.w SMB3_OAMBuffer[$03].YDisp,y
	LDA.b $01
	STA.w SMB3_OAMBuffer[$00].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$02].Tile,y
	LDA.b $02
	STA.w SMB3_OAMBuffer[$01].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$03].Tile,y
	LDA.b $00
	ORA.b #$20
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$02].Prop,y
	ORA.b $03
	STA.w SMB3_OAMBuffer[$01].Prop,y
	STA.w SMB3_OAMBuffer[$03].Prop,y
	PHY
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,x
	ROL
	ROL
	PHP
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$02].Slot,y
	PLP
	ROL
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$03].Slot,y
	PLY
CODE_288AF9:
	SEP.b #$30
	RTS

;--------------------------------------------------------------------

	%ROUTINE_SMB3_NorSpr009_AirshipAnchor_Status01(NULLROM)			; $288AFC
	%ROUTINE_SMB3_NorSpr009_AirshipAnchor_Status02(NULLROM)			; $288B03
	%ROUTINE_SMB3_NorSpr00A_UnusedPushableBlock_Status01(NULLROM)		; $288C23
	%ROUTINE_SMB3_NorSpr00A_UnusedPushableBlock_Status02(NULLROM)		; $288C29

;--------------------------------------------------------------------

CODE_288C47:
	LDA.b !RAM_SMB3_Level_Player_YSpeed
	BMI.b CODE_288C69
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenYPos,x
	SEC
	SBC.b !RAM_SMB3_Level_Player_OnScreenYPos
	CMP.b #$16
	BMI.b CODE_288C69
	LDA.b #$00
	STA.b $A6
	LDY.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	SEC
	SBC.b #$19
	BCS.b CODE_288C62
	DEY
CODE_288C62:
	STA.b !RAM_SMB3_Level_Player_YPosLo
	STY.b !RAM_SMB3_Level_Player_YPosHi
	JMP.w CODE_288CA0

CODE_288C69:
	LDA.b !RAM_SMB3_Level_Player_YSpeed
	BPL.b CODE_288C7A
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenYPos,x
	SEC
	SBC.b !RAM_SMB3_Level_Player_OnScreenYPos
	CMP.b #$FA
	BPL.b CODE_288C7A
	LDA.b #$01
	STA.b !RAM_SMB3_Level_Player_YSpeed
CODE_288C7A:
	LDA.b !RAM_SMB3_Global_ControllerHold1
	AND.b #(!Joypad_DPadL>>8)|(!Joypad_DPadR>>8)
	BNE.b CODE_288C84
	LDA.b #$00
	STA.b !RAM_SMB3_Level_Player_XSpeed
CODE_288C84:
	LDA.b !RAM_SMB3_Level_Player_OnScreenXPos
	CMP.b !RAM_SMB3_Level_NorSpr_OnScreenXPos,x
	LDA.b !RAM_SMB3_Level_Player_XSpeed
	BCS.b CODE_288C90
	JSL.l SMB3_UnnecessaryInvertARt_Main
CODE_288C90:
	BPL.b CODE_288CA0
	LDY.b #$FD
	LDA.b !RAM_SMB3_Level_Player_XSpeed
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	BMI.b CODE_288C9E
	BEQ.b CODE_288C9E
	LDY.b #$03
CODE_288C9E:
	STY.b !RAM_SMB3_Level_Player_XSpeed
CODE_288CA0:
	RTL

;--------------------------------------------------------------------

CODE_288CA1:
	RTS

;--------------------------------------------------------------------

SMB3_NorSpr00B_1upMushroom_Status02:
.Main:
;$288CA2
	JSR.w CODE_288EC5
	LDA.w $0518,x
	BNE.b CODE_288CD3
	LDA.b $9C
	BEQ.b CODE_288CB3
	JSL.l CODE_279EDE
	RTL

CODE_288CB3:
	LDA.b $A7,x
	AND.b #$04
	BEQ.b CODE_288CC0
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	BNE.b CODE_288CC0
	JSR.w CODE_288FA3
CODE_288CC0:
	JSR.w CODE_288FAF
	JSL.l SMB3_CheckIfSpriteIsHorizontallyOffScreen_Main
	JSL.l CODE_279EDE
	JSL.l CODE_279BC4
	JSL.l CODE_288DF0
CODE_288CD3:
	RTL

;--------------------------------------------------------------------

CODE_288CD4:
	LDA.b #$0D
	JSL.l CODE_278A94
	LDA.b #$00
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	RTL

;--------------------------------------------------------------------

SMB3_NorSpr00C_BouncingPowerUps_Status01:
.Main:
;$288CE0
	JSR.w CODE_288F92
	LDA.b #$10
	STA.w $0520,x
	LDY.b #$10
	LDA.w $057D
	BEQ.b CODE_288CF6
	LDY.b #$C8
	LDA.b #$3D
	STA.w $0518,x
CODE_288CF6:
	STY.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	STY.b $A7,x
	JSR.w CODE_288FA3
	LDA.w $0586
	AND.b #$03
	STA.w !RAM_SMB3_NorSpr00C_BouncingPowerUps_AnimationFrame,x
	TAY
	LDA.w DATA_21B8E4,y
	STA.w $1FE9,x
	RTL

;--------------------------------------------------------------------

SMB3_NorSpr00C_BouncingPowerUps_Status02:
.Main:
;$288D0D
	LDA.w $0586
	BPL.b CODE_288D17
	LDA.b !RAM_SMB3_Global_FrameCounter
	STA.w $0769,x
CODE_288D17:
	JSR.w CODE_288EC5
	LDA.w $0518,x
	BNE.b CODE_288D42
	LDA.b $9C
	BEQ.b CODE_288D28
	JSL.l CODE_279EDE
	RTL

CODE_288D28:
	JSR.w CODE_288FAF
	LDA.b $A7,x
	TAY
	AND.b #$04
	BEQ.b CODE_288D36
	LDA.b #$C0
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_288D36:
	JSL.l SMB3_CheckIfSpriteIsHorizontallyOffScreen_Main
	JSL.l CODE_279EDE
	JSL.l CODE_279BC4
CODE_288D42:
	JSL.l CODE_288DF0
	RTL

;--------------------------------------------------------------------

CODE_288D47:
	LDA.w !RAM_SMB3_NorSpr00C_BouncingPowerUps_AnimationFrame,x
	BNE.b CODE_288D65
	LDA.w !RAM_SMB3_Level_PSwitchTimer
	BNE.b CODE_288D56
	LDA.b #!Define_SMB3_LevelMusic_HaveStar
	STA.w !RAM_SMB3_Global_MusicCh1
CODE_288D56:
	LDA.b #$E0
	STA.w !RAM_SMB3_Level_Player_StarPowerTimer
	STZ.w $02C7
	LDA.b #$03
	STA.w $02C6
	BRA.b CODE_288D81

CODE_288D65:
	TAY
	LDA.w DATA_21B8E8,y
	CMP.b !RAM_SMB3_Level_Player_CurrentPowerUp
	BEQ.b CODE_288D7E
	TAY
	INY
	STY.w $0578
CODE_288D72:
	LDA.b #$17
	STA.w !RAM_SMB3_Level_Player_SmokePuffAnimationTimer
	LDA.b #!Define_SMAS_Sound0060_CarryItemToGoal
	STA.w !RAM_SMB3_Global_SoundCh1
	BRA.b CODE_288D81

CODE_288D7E:
	JSR.w CODE_288EBF
CODE_288D81:
	JSL.l CODE_288EB3
	RTL

;--------------------------------------------------------------------

SMB3_NorSpr00B_1upMushroom_Status01:
.Main:
SMB3_NorSpr00D_Mushroom_Status01:
.Main:
;$288D86
	JSR.w CODE_288F92
	LDA.b #$10
	STA.w $0520,x
	LDA.w $0586
	BEQ.b CODE_288D9E
	JSR.w CODE_288DB0
	LDY.b #$C8
	JSL.l CODE_288DAB
	BRA.b CODE_288DA5

CODE_288D9E:
	LDY.b #$10
	LDA.w $057D
	BEQ.b CODE_288DAB
CODE_288DA5:
	LDA.b #$3D
	STA.w $0518,x
	RTL

CODE_288DAB:
	STY.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	STY.b $A7,x
	RTL

CODE_288DB0:
	LDY.b #$10
	LDA.b !RAM_SMB3_Level_Player_XPosLo
	AND.b #$10
	BNE.b CODE_288DBA
	LDY.b #$F0
CODE_288DBA:
	STY.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	RTS

;--------------------------------------------------------------------

SMB3_NorSpr00D_Mushroom_Status02:
.Main:
;$288DBD
	JSR.w CODE_288EC5
	LDA.w $0518,x
	BNE.b CODE_288DF0
	LDA.b $9C
	BEQ.b CODE_288DD1
	JSL.l CODE_279EDE
	JSR.w CODE_288DFA
	RTL

CODE_288DD1:
	LDA.b $A7,x
	AND.b #$04
	BEQ.b CODE_288DDE
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	BNE.b CODE_288DDE
	JSR.w CODE_288FA3
CODE_288DDE:
	JSR.w CODE_288FAF
	JSL.l SMB3_CheckIfSpriteIsHorizontallyOffScreen_Main
	JSL.l CODE_279EDE
	JSR.w CODE_288DFA
	JSL.l CODE_279BC4
CODE_288DF0:
	LDA.w $0520,x
	BNE.b CODE_288DF9
	JSL.l CODE_27A317
CODE_288DF9:
	RTL

;--------------------------------------------------------------------

CODE_288DFA:
	LDA.w !RAM_SMB3_Level_IsVerticalLevelFlag
	BNE.b CODE_288E02
	BRL.w CODE_288E8F

CODE_288E02:
	REP.b #$30
	LDA.b $C6,x
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b #$00
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$02].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$03].Slot,y
	LDY.b $C6,x
	LDX.w #$0000
	LDA.w SMB3_OAMBuffer[$00].XDisp,y
	CMP.b #$F8
	BCS.b CODE_288E2F
	LDX.w #$0004
	LDA.w SMB3_OAMBuffer[$01].XDisp,y
	CMP.b #$F8
	BCC.b CODE_288E8F
CODE_288E2F:
	STX.b $D8
	REP.b #$20
	TYA
	CLC
	ADC.b $D8
	STA.b $DC
	SEP.b #$30
	LDX.b $9B
	JSL.l CODE_27A19E
	REP.b #$10
	LDY.b $C6,x
	LDX.b $DC
	LDA.w SMB3_OAMBuffer[$00].XDisp,x
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$02].XDisp,y
	LDA.w SMB3_OAMBuffer[$00].YDisp,x
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	LDA.w SMB3_OAMBuffer[$02].YDisp,x
	STA.w SMB3_OAMBuffer[$02].YDisp,y
	LDA.w SMB3_OAMBuffer[$00].Tile,x
	STA.w SMB3_OAMBuffer[$00].Tile,y
	LDA.w SMB3_OAMBuffer[$02].Tile,x
	STA.w SMB3_OAMBuffer[$02].Tile,y
	LDA.w SMB3_OAMBuffer[$00].Prop,x
	STA.w SMB3_OAMBuffer[$00].Prop,y
	LDA.w SMB3_OAMBuffer[$02].Prop,x
	STA.w SMB3_OAMBuffer[$02].Prop,y
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	TXA
	LSR
	LSR
	TAX
	SEP.b #$20
	LDA.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,x
	STA.w SMB3_OAMTileSizeBuffer[$02].Slot,x
	DEC
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$02].Slot,y
CODE_288E8F:
	SEP.b #$10
	LDX.b $9B
	RTS

;--------------------------------------------------------------------

CODE_288E94:
	LDA.b #$01
	STA.b $00
CODE_288E98:
	JSR.w CODE_288EBF
	LDA.b !RAM_SMB3_Level_Player_CurrentPowerUp
	BNE.b CODE_288EB3
	LDA.b #$02
	STA.w $0578
	LDA.w !RAM_SMB3_Level_Player_InKuriboShoeFlag
	BEQ.b CODE_288EAE
	JSL.l CODE_288D72
	RTL

CODE_288EAE:
	LDA.b #$2F
	STA.w !RAM_SMB3_Level_Player_SizeChangeAnimationTimer
CODE_288EB3:
	LDA.b #$09
	JSL.l CODE_278A94
	LDA.b #$00
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	RTL

;--------------------------------------------------------------------

CODE_288EBF:
	LDA.b #!Define_SMAS_Sound0060_GetPowerup
	STA.w !RAM_SMB3_Global_SoundCh1
	RTS

;--------------------------------------------------------------------

CODE_288EC5:
	LDA.w $0518,x
	BNE.b CODE_288ECD
	BRL.w CODE_288F89

CODE_288ECD:
	CMP.b #$2D
	BNE.b CODE_288ED6
	LDA.b #!Define_SMAS_Sound0063_HitItemBlock
	STA.w !RAM_SMB3_Global_SoundCh3
CODE_288ED6:
	BCC.b CODE_288EDB
	BRL.w CODE_288F88

CODE_288EDB:
	LDA.b #$08
	STA.w $1A4F,x
	DEC.w $0689,x
	BPL.b CODE_288EFB
	LDA.b #$02
	STA.w $0689,x
	LDA.b $9C
	BNE.b CODE_288EFB
	LDA.b $71,x
	SEC
	SBC.b #$01
	STA.b $71,x
	LDA.b $56,x
	SBC.b #$00
	STA.b $56,x
CODE_288EFB:
	REP.b #$20
	LDA.b $C6,x
	CLC
	ADC.w #$0010
	STA.b $C6,x
	SEP.b #$20
	JSL.l CODE_279EDE
	LDA.w $0586
	ASL
	BNE.b CODE_288F84
	LDY.b #$00
	JSL.l SMB3_CheckIfNormalSpriteOffScreen_Main
	BNE.b CODE_288F84
	REP.b #$10
	LDY.b $C6,x
	LDA.b $71,x
	AND.b #$F0
	CLC
	ADC.b #$0F
	SEC
	SBC.w $0543
	STA.w $07F1,y
	STA.w $07F5,y
	CLC
	ADC.b #$08
	STA.w $07F9,y
	STA.w $07FD,y
	LDA.b #$76
	STA.w $07F2,y
	STA.w $07F6,y
	INC
	STA.w $07FA,y
	STA.w $07FE,y
	LDA.b #$10
	STA.w $07F3,y
	STA.w $07F7,y
	STA.w $07FB,y
	STA.w $07FF,y
	LDA.w !RAM_SMB3_Level_NorSpr_OnScreenXPos,x
	STA.w $07F0,y
	STA.w $07F8,y
	CLC
	ADC.b #$08
	STA.w $07F4,y
	STA.w $07FC,y
	PHY
	REP.b #$20
	TYA
	SEC
	SBC.w #$0010
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b #$00
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$02].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$03].Slot,y
	PLY
	SEP.b #$10
CODE_288F84:
	JSL.l CODE_279BC4
CODE_288F88:
	RTS

CODE_288F89:
	LDA.b $9C
	BEQ.b CODE_288F91
	JSL.l CODE_279EDE
CODE_288F91:
	RTS

;--------------------------------------------------------------------

CODE_288F92:
	LDY.b #$00
	LDA.b $5F,x
	SEC
	SBC.w $0210
	CMP.b !RAM_SMB3_Level_Player_OnScreenXPos
	BCC.b CODE_288F9F
	INY
CODE_288F9F:
	STY.w $058D
	RTS

;--------------------------------------------------------------------

CODE_288FA3:
	LDY.b #$10
	LDA.w $058D
	BNE.b CODE_288FAC
	LDY.b #$F0
CODE_288FAC:
	STY.b $8C,x
	RTS

;--------------------------------------------------------------------

CODE_288FAF:
	JSL.l SMB3_HandleNormalSpriteGravity_Main
	LDA.b $A7,x
	TAY
	AND.b #$04
	BEQ.b CODE_288FBE
	JSL.l CODE_278B67
CODE_288FBE:
	TYA
	AND.b #$08
	BEQ.b CODE_288FC7
	LDA.b #$04
	STA.b $9E,x
CODE_288FC7:
	LDA.w $1F76
	CMP.b #$F3
	BNE.b CODE_288FDE
	LDA.b #$D0
	STA.b $9E,x
	LDA.b $5F,x
	ASL
	ASL
	ASL
	ASL
	EOR.b $8C,x
	AND.b #$80
	BNE.b CODE_288FFC
CODE_288FDE:
	TYA
	AND.b #$03
	BEQ.b CODE_289004
	CPX.b #$05
	BNE.b CODE_288FFC
	LSR
	LDA.b $5F,x
	AND.b #$0F
	LDY.b #$03
	BCS.b CODE_288FF2
	LDY.b #$03
CODE_288FF2:
	STY.b $00
	CLC
	ADC.b $00
	CMP.b #$08
	BCS.b CODE_288FFC
	RTS

CODE_288FFC:
	JSL.l CODE_279906
	JSL.l CODE_27990E
CODE_289004:
	RTS

;--------------------------------------------------------------------

SMB3_NorSpr019_FireFlower_Status01:
.Main:
;$289005
	LDA.b #$10
	STA.w !RAM_SMB3_NorSpr019_FireFlower_DisableInteractionTimer,x
	LDA.w $0586
	BEQ.b CODE_289015
	JSR.w CODE_288DB0
	JMP.w CODE_28901C

CODE_289015:
	LDY.b #$10
	LDA.w $057D
	BEQ.b CODE_289022
CODE_28901C:
	LDA.b #$3D
	STA.w $0518,x
	RTL

CODE_289022:
	STY.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	STY.b $A7,x
	RTL

;--------------------------------------------------------------------

SMB3_NorSpr019_FireFlower_Status02:
.Main:
;$289027
	LDA.w $0586
	BPL.b CODE_289031
	LDA.b !RAM_SMB3_Global_FrameCounter
	STA.w $0769,x
CODE_289031:
	JSR.w CODE_288EC5
	LDA.w $0518,x
	BNE.b CODE_289053
	LDA.b $9C
	BEQ.b CODE_289042
	JSL.l CODE_279EDE
	RTL

CODE_289042:
	JSR.w CODE_288FAF
	JSL.l CODE_279EDE
	JSL.l CODE_279BC4
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	BNE.b CODE_289053
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_289053:
	JSL.l CODE_288DF0
	RTL

;--------------------------------------------------------------------

CODE_289058:
	LDA.b !RAM_SMB3_Level_Player_CurrentPowerUp
	BNE.b CODE_289064
	LDY.w $0586
	BNE.b CODE_289064
	JMP.w CODE_288E98

CODE_289064:
	CMP.b #$02
	BEQ.b CODE_289072
	LDA.b #$1F
	STA.w !RAM_SMB3_Level_Player_FireFlowerGetPaletteAnimationTimer
	LDA.b #$03
	STA.w $0578
CODE_289072:
	JSR.w CODE_288EBF
	LDA.b #$00
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	STA.w !RAM_SMB3_Level_Player_IsTanookiStatueTimer
	JSL.l CODE_288EB3
	RTL

;--------------------------------------------------------------------

	%ROUTINE_SMB3_NorSpr01A_UnknownSprite_Status02(NULLROM)		; $289082

;--------------------------------------------------------------------

CODE_289099:
	LDA.b #$00
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	LDA.b #$00
	STA.b $8B
	STA.b $9D
	LDX.b $9B
	RTL

;--------------------------------------------------------------------

SMB3_NorSpr01B_HorizontalBounceSprite_Status01:
.Main:
;$2890A7
	LDA.w $057D
	STA.w $0691,x
	LDY.b #$F0
	CMP.b #$02
	BEQ.b CODE_2890B5
	LDY.b #$10
CODE_2890B5:
	STY.b !RAM_SMB3_Level_Player_XSpeed
	LDA.w $057C
	STA.w $0689,x
	LDA.b #$00
	STA.w !RAM_SMB3_Level_NorSpr_YOffscreenFlag,x
	STA.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,x
	STA.w $057C
	STA.w $0679,x
	LDA.b #$0A
	STA.w $0526,x
	JSR.w CODE_288A45
	RTL

;--------------------------------------------------------------------

SMB3_NorSpr01B_HorizontalBounceSprite_Status02:
.Main:
;$2890D4
	LDY.w $0526,x
	BNE.b CODE_289112
	LDA.b #$00
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	LDA.w $0689,x
	LSR
	LSR
	LSR
	LSR
	TAY
	LDA.w DATA_21B8B5,y
	STA.b $0B
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	STA.b $0E
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	STA.b $0F
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	STA.b $0C
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	STA.b $0D
	JSL.l CODE_27A8B2
	LDY.b #$0A
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	BPL.b CODE_289107
	LDY.b #$F6
CODE_289107:
	TYA
	CLC
	ADC.b !RAM_SMB3_Level_NorSpr_OnScreenXPos,x
	STA.b !RAM_SMB3_Level_NorSpr_OnScreenXPos,x
	JSL.l CODE_27A317
	RTL

CODE_289112:
	LDA.w $0526,x
	CMP.b #$05
	BNE.b CODE_289126
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenXPos,x
	STA.w $07B4
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenYPos,x
	STA.w $07B3
	JMP.w CODE_289160

CODE_289126:
	CMP.b #$0A
	BNE.b CODE_289160
	LDA.w $0689,x
	AND.b #$0F
	TAY
	LDA.w DATA_21B8AD,y
	BEQ.b CODE_289160
	STA.b $00
	LDY.b #$05
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,y
	LDA.b $00
	STA.w !RAM_SMB3_Level_NorSpr_SpriteID,y
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	STA.w !RAM_SMB3_Level_NorSpr_XPosLo,y
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	STA.w !RAM_SMB3_Level_NorSpr_XPosHi,y
	LDA.w !RAM_SMB3_Level_NorSpr_YPosLo,x
	SEC
	SBC.b #$01
	STA.w !RAM_SMB3_Level_NorSpr_YPosLo,y
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	SBC.b #$00
	STA.w !RAM_SMB3_Level_NorSpr_YPosHi,y
	LDA.b #$01
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,y
CODE_289160:
	JSL.l CODE_27A7F0
	JSR.w CODE_288A45
	LDY.w $0526,x
	LDA.w DATA_21B8BD,y
	LDY.w $0691,x
	CPY.b #$02
	BEQ.b CODE_289178
	JSL.l SMB3_UnnecessaryInvertARt_Main
CODE_289178:
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	DEC.w $0526,x
	RTL

;--------------------------------------------------------------------

CODE_28917E:
	LDY.b #$10
	LDA.b !RAM_SMB3_Level_Player_XPosLo
	CMP.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	BPL.b CODE_289188
	LDY.b #$F0
CODE_289188:
	STY.b !RAM_SMB3_Level_Player_XSpeed
	LDY.b #$0F
	LDA.b !RAM_SMB3_Level_Player_XPosLo
	PHA
	AND.b #$0F
	CMP.b #$08
	BPL.b CODE_289197
	LDY.b #$00
CODE_289197:
	STY.b $00
	PLA
	AND.b #$F0
	ORA.b $00
	STA.b !RAM_SMB3_Level_Player_XPosLo
	RTL

;--------------------------------------------------------------------

	%ROUTINE_SMB3_NorSpr01C_UnusedStrangeRewardBlock_Status01(NULLROM)	; $2891A1
	%ROUTINE_SMB3_NorSpr01C_UnusedStrangeRewardBlock_Status02(NULLROM)	; $2891E0

;--------------------------------------------------------------------

SMB3_NorSpr01E_RaccoonLeaf_Status01:
.Main:
;$2891F9
	LDA.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	STA.w !RAM_SMB3_NorSpr01E_RaccoonLeaf_HorizontalMovementDirection,x
	LDA.b #$0C
	LDY.w $057D
	BEQ.b CODE_28920B
	LDA.b #$F3
	DEC.b !RAM_SMB3_Level_NorSpr_YPosHi,x
CODE_28920B:
	CLC
	ADC.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	BCC.b CODE_289214
	INC.b !RAM_SMB3_Level_NorSpr_YPosHi,x
CODE_289214:
	LDA.w DATA_21B8F8,y
	STA.w !RAM_SMB3_NorSpr01E_RaccoonLeaf_FlyingOutOfBlockTimer,x
	LDA.w DATA_21B8F4,y
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	LDA.b #$10
	STA.w !RAM_SMB3_NorSpr01E_RaccoonLeaf_DisableInteractionTimer,x
	LDA.w $0586
	BEQ.b CODE_28922E
	LDA.b #$02
	STA.w $1FE9,x
CODE_28922E:
	RTL

;--------------------------------------------------------------------

SMB3_NorSpr01E_RaccoonLeaf_Status02:
.Main:
;$28922F
	LDA.b $9C
	BNE.b CODE_289284
	LDA.w !RAM_SMB3_NorSpr01E_RaccoonLeaf_FlyingOutOfBlockTimer,x
	BEQ.b CODE_28924C
	JSL.l CODE_27A7E5
	INC.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	CMP.b #$00							; Optimization: Unnecessary CMP.b #$00
	BEQ.b CODE_289247
	JMP.w CODE_289277

CODE_289247:
	LDA.b #$00
	STA.w !RAM_SMB3_NorSpr01E_RaccoonLeaf_FlyingOutOfBlockTimer,x
CODE_28924C:
	LDA.w !RAM_SMB3_NorSpr01E_RaccoonLeaf_HorizontalMovementDirection,x
	AND.b #$01
	TAY
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	CLC
	ADC.w DATA_21B8FC,y
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	CMP.w DATA_21B8FE,y
	BNE.b CODE_289262
	INC.w !RAM_SMB3_NorSpr01E_RaccoonLeaf_HorizontalMovementDirection,x
CODE_289262:
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	BPL.b CODE_289267
	INY
CODE_289267:
	LDA.w DATA_21B900,y
	CLC
	ADC.b #$06
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	JSL.l CODE_27A7F0
	JSL.l CODE_27A7E5
CODE_289277:
	LDA.b #$40
	LDY.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	BEQ.b CODE_289284
	BPL.b CODE_289281
	LDA.b #$00
CODE_289281:
	STA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
CODE_289284:
	JSL.l SMB3_CheckIfSpriteIsHorizontallyOffScreen_Main
	JSL.l CODE_279EBC
	JSL.l CODE_279BC4
	JSL.l CODE_288DF0
	RTL

;--------------------------------------------------------------------

CODE_289295:
	LDA.b !RAM_SMB3_Level_Player_CurrentPowerUp
	BNE.b CODE_2892A1
	LDA.w $0586
	BNE.b CODE_2892A1
	JMP.w CODE_288E98

CODE_2892A1:
	CMP.b #$03
	BNE.b CODE_2892AA
	JSR.w CODE_288EBF
	BNE.b CODE_2892B9
CODE_2892AA:
	LDA.b #!Define_SMAS_Sound0060_CarryItemToGoal
	STA.w !RAM_SMB3_Global_SoundCh1
	LDA.b #$17
	STA.w !RAM_SMB3_Level_Player_SmokePuffAnimationTimer
	LDA.b #$04
	STA.w $0578
CODE_2892B9:
	LDA.b #$00
	STA.w !RAM_SMB3_Level_Player_IsTanookiStatueTimer
	JSL.l CODE_288EB3
	RTL

;--------------------------------------------------------------------

	%ROUTINE_SMB3_NorSpr01F_VineHead_Status01(NULLROM)				; $2892C3
	%ROUTINE_SMB3_NorSpr01F_VineHead_Status02(NULLROM)				; $2892C9
	%ROUTINE_SMB3_NorSpr008_InvisiblePSwitchDoor_Status01(NULLROM)			; $2893C9
	%ROUTINE_SMB3_NorSpr007_SecretToadHouseWarp_Status01(NULLROM)			; $2893D2
	%ROUTINE_SMB3_NorSpr007_SecretToadHouseWarp_Status02(NULLROM)			; $2893DE
	%ROUTINE_SMB3_NorSpr008_InvisiblePSwitchDoor_Status02(NULLROM)			; $28942D

;--------------------------------------------------------------------

SMB3_NorSpr021_UnusedMushroomCardItem_Status02:
.Main:
SMB3_NorSpr022_UnusedFlowerCardItem_Status02:
.Main:
SMB3_NorSpr023_UnusedStarCardItem_Status02:
.Main:
;$289471
	JSR.w CODE_28949B
	LDA.w $0565
	ORA.b #$04
	STA.w $0769,x
	JSL.l CODE_279BC4
	JSL.l CODE_279EDE
	JSL.l CODE_27A317
	RTL

;--------------------------------------------------------------------

CODE_289489:
	LDA.b #$00
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	SEC
	SBC.b #!Define_SMB3_SpriteID_NorSpr020_UnusedSprite
	JSL.l CODE_20F58A
	LDX.b $9B
	RTL

;--------------------------------------------------------------------

CODE_28949B:
	JSL.l SMB3_HandleNormalSpriteGravity_Main
	LDA.b $A7,x
	AND.b #$08
	BEQ.b CODE_2894A7
	STA.b $9E,x
CODE_2894A7:
	LDA.b $A7,x
	AND.b #$03
	BEQ.b CODE_2894B5
	LDA.b $8C,x
	BEQ.b CODE_2894B5
	JSL.l CODE_279906
CODE_2894B5:
	LDA.b $A7,x
	AND.b #$04
	BEQ.b CODE_2894BF
	JSL.l CODE_278B67
CODE_2894BF:
	RTS

;--------------------------------------------------------------------

	%ROUTINE_SMB3_NorSpr00E_KoopaKid_Status01(NULLROM)				; $2894C0
	%ROUTINE_RT00_SMB3_NorSpr00E_KoopaKid_Status02(NULLROM)				; $2894F5

;--------------------------------------------------------------------

CODE_28964E:
	LDA.w $1CF6,x
	BNE.b SMB3_NorSpr00E_KoopaKid_Status02_CODE_28964D
	LDA.b #$02
	STA.b $4D,x
	JSL.l CODE_2897D0
	RTS

;--------------------------------------------------------------------

	%ROUTINE_RT01_SMB3_NorSpr00E_KoopaKid_Status02(NULLROM)				; $28965C

;--------------------------------------------------------------------

CODE_28978D:
	LDA.w $0669,x
	CMP.b #$04
	BCC.b CODE_2897AE
	JSL.l CODE_27A7C5
	LDY.b $0E
	CPY.b #$04
	BPL.b CODE_2897B7
	DEY
	BMI.b CODE_2897AE
	LDA.b !RAM_SMB3_Global_FrameCounter
	LSR
	LDA.b #$30
	BCS.b CODE_2897AA
	LDA.b #$D0
CODE_2897AA:
	STA.b $8B
	BRA.b CODE_2897B8

CODE_2897AE:
	LDA.b $0B
	LSR
	BCS.b CODE_2897B8
	JSL.l CODE_27A4C7
CODE_2897B7:
	RTL

CODE_2897B8:
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$C0
else
	LDA.b #$D0
endif
	STA.b $9D
	LDA.w $0520,x
	BNE.b CODE_28981C
	LDA.b #!Define_SMAS_Sound0060_Contact
	STA.w !RAM_SMB3_Global_SoundCh1
	LDA.w !RAM_SMB3_Global_CurrentWorld
	CMP.b #$05
	BNE.b CODE_2897D0
	JSR.w CODE_289E2A
CODE_2897D0:
	LDA.b #$00
	STA.b $8C,x
	LDY.b $9E,x
	BPL.b CODE_2897DA
	STA.b $9E,x
CODE_2897DA:
	INC.b $4D,x
	LDA.b $4D,x
	CMP.b #$03
	BCS.b CODE_2897E8
	LDA.b #$80
	STA.w $0520,x
	RTL

CODE_2897E8:
	LDY.b #$04
CODE_2897EA:
	CPY.b $9B
	BEQ.b CODE_2897FD
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,y
	BEQ.b CODE_2897FD
	LDA.b #$08
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,y
	LDA.b #$1F
	STA.w $0518,y
CODE_2897FD:
	DEY
	BPL.b CODE_2897EA
	INC.w $07BE
	LDA.b #$81
	STA.w $05F3
	LDA.b #$7F
	STA.w $1CF6,x
	LDA.b #$80
	SEC
	SBC.b $5F,x
	STA.b $8C,x
	ASL
	ROR.b $8C,x
	LDA.b #$A0
	STA.w $0520,x
CODE_28981C:
	RTL

CODE_28981D:
	LDA.b $9C
	BNE.b CODE_28985C
	LDA.w $0520,x
	BEQ.b CODE_28985C
	AND.b #$03
	BNE.b CODE_289845
	LDY.w $07BE
	INC.w $0669,x
	LDA.w $0669,x
	CMP.w DATA_21B991,y
	BCC.b CODE_28983E
	LDA.w DATA_21B993,y
	STA.w $0669,x
CODE_28983E:
	TAY
	LDA.w DATA_21B995,y
	STA.w $0679,x
CODE_289845:
	LDA.w $02E1
	BMI.b CODE_28985C
	INC.w $02E1
	LDA.w $02E1
	CMP.b #$0A
	BCC.b CODE_28985C
	STZ.w $02E1
	LDA.b #!Define_SMAS_Sound0063_Boomerang
	STA.w !RAM_SMB3_Global_SoundCh3
CODE_28985C:
	JSL.l CODE_279BC4
	LDA.b $C6,x
	PHA
	LDA.b $C7,x
	PHA
	JSR.w CODE_289937
	PLA
	STA.b $C7,x
	PLA
	STA.b $C6,x
	JSL.l CODE_279DF9
	LDX.b $9B
	LDA.w $0669,x
	CMP.b #$04
	BCC.b CODE_28988B
	CMP.b #$0A
	BCC.b CODE_289897
	TAY
	LDA.b $01
	CLC
	ADC.b #$04
	STA.b $01
	TYA
	BNE.b CODE_289897
CODE_28988B:
	CMP.b #$03
	BNE.b CODE_289891
	LDA.b #$00
CODE_289891:
	LDY.w !RAM_SMB3_Global_CurrentWorld
	ADC.w DATA_21B9A7,y
CODE_289897:
	ASL
	STA.b $0F
	ASL
	ADC.b $0F
	TAX
	JSR.w CODE_2899DE
	PHX
	LDX.b $9B
	LDA.b $C6,x
	STA.b $DC
	LDA.b $C7,x
	STA.b $DD
	REP.b #$20
	LDA.b $C6,x
	CLC
	ADC.w #$0018
	STA.b $C6,x
	SEP.b #$20
	PLX
	LDA.b $00
	CLC
	ADC.b #$10
	STA.b $00
	INX
	INX
	INX
	JSR.w CODE_2899DE
	LDX.b $9B
	LDA.w $0669,x
	CMP.b #$0C
	BEQ.b CODE_2898D3
	CMP.b #$10
	BNE.b CODE_2898EB
CODE_2898D3:
	REP.b #$10
	LDY.b $DC
	LDA.w SMB3_OAMBuffer[$01].Prop,y
	ORA.b #$40
	STA.w SMB3_OAMBuffer[$01].Prop,y
	STA.w SMB3_OAMBuffer[$04].Prop,y
	STA.w SMB3_OAMBuffer[$07].Prop,y
	STA.w SMB3_OAMBuffer[$0A].Prop,y
	SEP.b #$10
	RTS

CODE_2898EB:
	CMP.b #$04
	BCC.b CODE_289934
	CMP.b #$0A
	BCS.b CODE_289934
	REP.b #$10
	LDY.b $DC
	LDA.w SMB3_OAMBuffer[$00].YDisp,y
	CLC
	ADC.b #$06
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	STA.w SMB3_OAMBuffer[$02].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$03].YDisp,y
	STA.w SMB3_OAMBuffer[$05].YDisp,y
	LDA.w SMB3_OAMBuffer[$00].Prop,y
	AND.b #$3F
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$03].Prop,y
	ORA.b #$40
	STA.w SMB3_OAMBuffer[$02].Prop,y
	STA.w SMB3_OAMBuffer[$05].Prop,y
	LDA.w $0520,x
	CMP.b #$60
	BCS.b CODE_289934
	LDA.b #$3E
	STA.w SMB3_OAMBuffer[$00].Tile,y
	STA.w SMB3_OAMBuffer[$02].Tile,y
	STA.w SMB3_OAMBuffer[$03].Tile,y
	STA.w SMB3_OAMBuffer[$05].Tile,y
CODE_289934:
	SEP.b #$10
	RTS

CODE_289937:
	LDA.w $0669,x
	CMP.b #$04
	BCS.b CODE_289934
	LDY.w !RAM_SMB3_Global_CurrentWorld
	LDA.w $0669,x
	CLC
	ADC.w DATA_21BAC0,y
	TAY
	LDA.b $71,x
	PHA
	CLC
	ADC.w DATA_21BA84,y
	STA.b $71,x
	LDA.b $56,x
	PHA
	ADC.w DATA_21BAB4,y
	STA.b $56,x
	LDA.w $0679,x
	ASL
	BPL.b CODE_289965
	TYA
	CLC
	ADC.b #$0C
	TAY
CODE_289965:
	LDA.b $5F,x
	PHA
	CLC
	ADC.w DATA_21BA90,y
	STA.b $5F,x
	LDA.b $44,x
	PHA
	ADC.w DATA_21BAA8,y
	STA.b $44,x
	JSL.l SMB3_CheckIfSpriteIsHorizontallyOffScreen_Main
	JSL.l SMB3_CheckIfSpriteIsVerticallyOffScreen_Main
	JSL.l CODE_279DF9
	LDA.b $02
	AND.b #$FE
	STA.b $02
	LDX.b $9B
	LDY.b #$02
	LDA.w $0518,x
	BEQ.b CODE_289994
	AND.b #$06
	TAY
CODE_289994:
	STY.b $03
	LDA.b #$20
	STA.b $C6,x
	STZ.b $C7,x
	LDY.w $0669,x
	LDX.w DATA_21BA80,y
	JSL.l CODE_279F91
	LDX.b $9B
	BIT.b $02
	BVS.b CODE_2899B8
	REP.b #$20
	LDA.b $C6,x
	CLC
	ADC.w #$0004
	STA.b $C6,x
	SEP.b #$20
CODE_2899B8:
	REP.b #$10
	LDY.b $C6,x
	LDA.w SMB3_OAMBuffer[$00].Prop,y
	EOR.b #$40
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$02].Prop,y
	SEP.b #$10
	PLA
	STA.b $44,x
	PLA
	STA.b $5F,x
	PLA
	STA.b $56,x
	PLA
	STA.b $71,x
	JSL.l SMB3_CheckIfSpriteIsHorizontallyOffScreen_Main
	JSL.l SMB3_CheckIfSpriteIsVerticallyOffScreen_Main
	RTS

CODE_2899DE:
	REP.b #$10
	PHX
	REP.b #$20
	LDA.b $9B
	AND.w #$00FF
	TAX
	SEP.b #$20
	LDY.b $C6,x
	PLX
	LSR.b $04
	BCC.b CODE_2899F5
	BRL.w CODE_289AB3

CODE_2899F5:
	LDA.b $07
	ASL
	STA.b $0F
	LDA.b $00
	BCS.b CODE_289A07
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$03].YDisp,y
CODE_289A07:
	BIT.b $0F
	BMI.b CODE_289A18
	PHP
	LDA.b $00
	STA.w SMB3_OAMBuffer[$01].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$04].YDisp,y
	PLP
CODE_289A18:
	BVS.b CODE_289A25
	LDA.b $00
	STA.w SMB3_OAMBuffer[$02].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$05].YDisp,y
CODE_289A25:
	LDA.b $01
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$03].XDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	STA.w SMB3_OAMBuffer[$04].XDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$02].XDisp,y
	STA.w SMB3_OAMBuffer[$05].XDisp,y
	LDA.w DATA_21B996,x
	STA.w SMB3_OAMBuffer[$00].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$03].Tile,y
	LDA.w DATA_21B996+$01,x
	STA.w SMB3_OAMBuffer[$01].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$04].Tile,y
	LDA.w DATA_21B996+$02,x
	STA.w SMB3_OAMBuffer[$02].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$05].Tile,y
	LDA.b $02
	ORA.b $03
	ORA.b #$20
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$01].Prop,y
	STA.w SMB3_OAMBuffer[$03].Prop,y
	STA.w SMB3_OAMBuffer[$02].Prop,y
	STA.w SMB3_OAMBuffer[$04].Prop,y
	STA.w SMB3_OAMBuffer[$05].Prop,y
	BIT.b $02
	BVC.b CODE_289A95
	LDA.w SMB3_OAMBuffer[$00].Tile,y
	PHA
	LDA.w SMB3_OAMBuffer[$02].Tile,y
	STA.w SMB3_OAMBuffer[$00].Tile,y
	PLA
	STA.w SMB3_OAMBuffer[$02].Tile,y
	LDA.w SMB3_OAMBuffer[$03].Tile,y
	PHA
	LDA.w SMB3_OAMBuffer[$05].Tile,y
	STA.w SMB3_OAMBuffer[$03].Tile,y
	PLA
	STA.w SMB3_OAMBuffer[$05].Tile,y
CODE_289A95:
	PHY
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b #$00
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$02].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$03].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$04].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$05].Slot,y
	PLY
CODE_289AB3:
	SEP.b #$10
	RTS

;--------------------------------------------------------------------

	%ROUTINE_RT02_SMB3_NorSpr00E_KoopaKid_Status02(NULLROM)			; $289AB6

;--------------------------------------------------------------------

CODE_289B38:
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$03
	TAY
	LDX.b #$04
CODE_289B3F:
	LDA.b #$01
	STA.b $56,x
	LDA.w DATA_21BACF,y
	STA.b $71,x
	LDA.w DATA_21BAC7,y
	STA.b $5F,x
	LDA.b #$FF
	STA.b $9E,x
	INY
	DEX
	BPL.b CODE_289B3F
	LDX.b $9B
	RTS

;--------------------------------------------------------------------

CODE_289B58:
	LDA.b !RAM_SMB3_Global_FrameCounter
	ASL
	ROL
	ROL
	ROL
	AND.b #$03
	STA.b $00
	LDA.w $0518,x
	STA.b $01
	LDX.b #$04
CODE_289B69:
	STX.b $02
	TXA
	CLC
	ADC.w $055D
	ASL
	TAY
	REP.b #$20
	LDA.w DATA_21AF6E,y
	STA.b $C6,x
	SEP.b #$20
	JSR.w CODE_289BB8
	JSL.l CODE_27A7D9
	LDX.b $02
	LDA.w DATA_21BAD7,x
	LDY.b $01
	BNE.b CODE_289B8D
	SEC
	ROR
CODE_289B8D:
	CMP.b $9E,x
	BCS.b CODE_289B95
	LDA.b $9E,x
	SBC.b #$00
CODE_289B95:
	STA.b $9E,x
	LDA.b $56,x
	BPL.b CODE_289BB0
	LDA.b $71,x
	CMP.b #$F0
	BCS.b CODE_289BB0
	LDY.b $00
	LDA.w DATA_21BAC7,y
	STA.b $5F,x
	LDA.b #$00
	STA.b $56,x
	LDA.b #$C8
	STA.b $71,x
CODE_289BB0:
	INC.b $00
	DEX
	BPL.b CODE_289B69
	LDX.b $9B
	RTS

CODE_289BB8:
	LDA.b $56,x
	BMI.b CODE_289BC6
	BEQ.b CODE_289BBF
	RTS

CODE_289BBF:
	LDA.b $71,x
	CMP.b #$F0
	BCC.b CODE_289BC6
	RTS

CODE_289BC6:
	REP.b #$10
	LDY.b $C6,x
	LDA.b $5F,x
	STA.b $0E
	LDA.b $71,x
	STA.b $0F
	REP.b #$20
	LDA.w DATA_21BADC,x
	AND.w #$00FF
	TAX
	SEP.b #$20
CODE_289BDD:
	LDA.b $0F
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$01].YDisp,y
	LDA.b #$D6
	STA.w SMB3_OAMBuffer[$00].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$01].Tile,y
	LDA.b #$20
	STA.w SMB3_OAMBuffer[$00].Prop,y
	LDA.b #$2C
	STA.w SMB3_OAMBuffer[$01].Prop,y
	LDA.b $0E
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	CLC
	ADC.b #$08
	STA.b $0E
	PHY
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b #$00
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$02].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$03].Slot,y
	PLY
	INY
	INY
	INY
	INY
	INY
	INY
	INY
	INY
	DEX
	BPL.b CODE_289BDD
	LDA.b #$D4
	STA.w $07FA,y
	INC
	STA.w $07FE,y
	LDA.b #$60
	STA.w $07FB,y
	ORA.b #$0C
	STA.w $07FF,y
	STZ.b $03
	LDX.b $02
	LDY.b $C6,x
	LDA.b #$D4
	STA.w SMB3_OAMBuffer[$00].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$01].Tile,y
	SEP.b #$10
	RTS

CODE_289C50:
	JSL.l CODE_27A7F0
	JSL.l CODE_27A7E5
	JSL.l CODE_278B93
	LDA.w !RAM_SMB3_Global_CurrentWorld
	CMP.b #$04
	BEQ.b CODE_289C71
	CMP.b #$06
	BEQ.b CODE_289C71
	INC.b $9E,x
	INC.b $9E,x
	JSR.w CODE_2894B5
	JMP.w CODE_289CAD

CODE_289C71:
	LDA.b $9E,x
	BMI.b CODE_289C7B
	CMP.b #$78
	BCS.b CODE_289C89
	BCC.b CODE_289C7F							; Note: This will always branch

CODE_289C7B:
	JSL.l SMB3_UnnecessaryInvertARt_Main
CODE_289C7F:
	LSR
	LSR
	LSR
	CLC
	ADC.b #$01
	ADC.b $9E,x
	STA.b $9E,x
CODE_289C89:
	LDA.b $A7,x
	AND.b #$04
	BEQ.b CODE_289CAD
	LDA.b $9E,x
	CMP.b #$20
	BCC.b CODE_289CA9
	LDA.b #!Define_SMAS_Sound0063_BulletShoot
	STA.w !RAM_SMB3_Global_SoundCh3
	LDY.b $4D,x
	LDA.w DATA_21BAE9,y
	STA.w !RAM_SMB3_Level_ShakeLayer1Timer
	LDY.b $A6
	BNE.b CODE_289CA9
	STA.w $0689,x
CODE_289CA9:
	JSL.l CODE_278B67
CODE_289CAD:
	LDA.b $A7,x
	AND.b #$08
	BEQ.b CODE_289CB5
	STA.b $9E,x
CODE_289CB5:
	LDA.b $A7,x
	AND.b #$03
	BEQ.b CODE_289CC3
	JSL.l CODE_279906
	JSL.l CODE_27990E
CODE_289CC3:
	RTS

CODE_289CC4:
	JSR.w CODE_289D49
	JSL.l CODE_27A317
	JSR.w CODE_28964E
	LDA.b $9C
	ORA.w $0520,x
	BNE.b CODE_289D48
	LDA.b $8C,x
	BPL.b CODE_289CDD
	JSL.l SMB3_UnnecessaryInvertARt_Main
CODE_289CDD:
	LSR
	LSR
	LSR
	AND.b #$07
	TAY
	LDA.w DATA_21BAF4,y
	CLC
	ADC.w $1021,x
	STA.w $1021,x
	BCC.b CODE_289CF5
	INC.w $0771,x
	INC.w $0669,x
CODE_289CF5:
	LDA.w $0669,x
	AND.b #$01
	STA.w $0669,x
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$7F
	BNE.b CODE_289D0D
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.w DATA_21BAF2,y
	STA.w $0679,x
CODE_289D0D:
	LDA.b !RAM_SMB3_Global_FrameCounter
	LSR
	BCS.b CODE_289D27
	DEC.w $1FD2,x
	BNE.b CODE_289D27
	INC.w $0776,x
	LDA.w !RAM_SMB3_Global_RandomByte02,x
	AND.b #$3F
	ORA.b #$80
	STA.w $1FD2,x
	JSR.w CODE_289E2A
CODE_289D27:
	LDA.w $0776,x
	AND.b #$01
	TAY
	LDA.w DATA_21BAEC,y
	CMP.b $5F,x
	LDY.b #$00
	BCS.b CODE_289D37
	INY
CODE_289D37:
	LDA.b $8C,x
	CMP.w DATA_21BAEE,y
	BEQ.b CODE_289D44
	CLC
	ADC.w DATA_21BAF0,y
	STA.b $8C,x
CODE_289D44:
	JSL.l CODE_27A7F0
CODE_289D48:
	RTS

CODE_289D49:
	LDY.b #$00
	LDA.w $0669,x
	CMP.b #$02
	BCS.b CODE_289D53
	TAY
CODE_289D53:
	STY.b $00
	LDA.b $71,x
	PHA
	SEC
	SBC.b $00
	STA.b $71,x
	LDA.b $56,x
	PHA
	SBC.b #$00
	STA.b $56,x
	JSR.w CODE_28981D
	PLA
	STA.b $56,x
	PLA
	STA.b $71,x
	JSL.l SMB3_GetNormalSpriteOnScreenPosition_Main
	LDA.b $8C,x
	ASL
	LDA.w $0771,x
	BCC.b CODE_289D7B
	EOR.b #$03
CODE_289D7B:
	AND.b #$03
	TAY
	LDA.w DATA_21BAFC,y
	STA.w SMB3_OAMBuffer[$0C].Tile
	INC
	STA.w SMB3_OAMBuffer[$0E].Tile
	LDA.w DATA_21BB00,y
	STA.w SMB3_OAMBuffer[$0D].Tile
	INC
	STA.w SMB3_OAMBuffer[$0F].Tile
	LDA.w DATA_21BB04,y
	STA.w SMB3_OAMBuffer[$0C].Prop
	STA.w SMB3_OAMBuffer[$0D].Prop
	STA.w SMB3_OAMBuffer[$0E].Prop
	STA.w SMB3_OAMBuffer[$0F].Prop
	AND.b #$80
	BEQ.b CODE_289DC1
	LDA.w SMB3_OAMBuffer[$0C].Tile
	PHA
	LDA.w SMB3_OAMBuffer[$0E].Tile
	STA.w SMB3_OAMBuffer[$0C].Tile
	PLA
	STA.w SMB3_OAMBuffer[$0E].Tile
	LDA.w SMB3_OAMBuffer[$0D].Tile
	PHA
	LDA.w SMB3_OAMBuffer[$0F].Tile
	STA.w SMB3_OAMBuffer[$0D].Tile
	PLA
	STA.w SMB3_OAMBuffer[$0F].Tile
CODE_289DC1:
	LDA.b #$04
	LDY.w $0520,x
	BNE.b CODE_289DD3
	LDA.w $0679,x
	ASL
	ASL
	LDA.b #$00
	BCS.b CODE_289DD3
	LDA.b #$08
CODE_289DD3:
	CLC
	ADC.b !RAM_SMB3_Level_NorSpr_OnScreenXPos,x
	STA.w SMB3_OAMBuffer[$0C].XDisp
	STA.w SMB3_OAMBuffer[$0E].XDisp
	STA.b $01
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$0D].XDisp
	STA.w SMB3_OAMBuffer[$0F].XDisp
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenYPos,x
	CLC
	ADC.b #$20
	STA.w SMB3_OAMBuffer[$0C].YDisp
	STA.w SMB3_OAMBuffer[$0D].YDisp
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$0E].YDisp
	STA.w SMB3_OAMBuffer[$0F].YDisp
	LDA.b #$00
	STA.w SMB3_OAMTileSizeBuffer[$0C].Slot
	STA.w SMB3_OAMTileSizeBuffer[$0D].Slot
	STA.w SMB3_OAMTileSizeBuffer[$0E].Slot
	STA.w SMB3_OAMTileSizeBuffer[$0F].Slot
	LDA.b !RAM_SMB3_Level_Player_OnScreenXPos
	SBC.b $01
	CLC
	ADC.b #$0C
	CMP.b #$18
	BCS.b CODE_289E29
	LDA.b !RAM_SMB3_Level_Player_OnScreenYPos
	SBC.w SMB3_OAMBuffer[$0C].YDisp
	CLC
	ADC.b #$20
	CMP.b #$20
	BCS.b CODE_289E29
	LDA.w $0583
	BNE.b CODE_289E29
	JSL.l CODE_27A4C7
CODE_289E29:
	RTS

;--------------------------------------------------------------------

CODE_289E2A:
	LDY.b #$02
CODE_289E2C:
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,y
	BEQ.b CODE_289E35
	DEY
	BPL.b CODE_289E2C
	RTS

CODE_289E35:
	TYA
	TAX
	JSL.l CODE_279C97
	LDX.b $9B
	LDA.b #$02
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,y
	LDA.b #!Define_SMB3_SpriteID_NorSpr075_BossProjectile
	STA.w !RAM_SMB3_Level_NorSpr_SpriteID,y
	LDA.b $71,x
	CLC
	ADC.b #$20
	STA.w $0071,y
	LDA.b $56,x
	ADC.b #$00
	STA.w $0056,y
	LDA.b $5F,x
	CLC
	ADC.b #$04
	STA.w $005F,y
	LDA.b $44,x
	ADC.b #$00
	STA.w $0044,y
	LDA.w $0776,x
	AND.b #$01
	TAX
	LDA.w DATA_21BB08,x
	STA.w $008C,y
	LDA.b #$04
	STA.w $1FE9,y
	LDX.b $9B
	RTS

;--------------------------------------------------------------------

CODE_289E79:
	JSR.w CODE_289E2A
	BMI.b CODE_289EA6
	LDA.b #$01
	STA.w $0068,y
	LDA.b $71,x
	STA.w $0071,y
	LDA.b $56,x
	STA.w $0056,y
	LDA.b #$F0
	STA.w $009E,y
	STY.b $00
	LDY.b #$00
	LDA.w $0679,x
	AND.b #$40
	BNE.b CODE_289E9E
	INY
CODE_289E9E:
	LDA.w DATA_21BB0A,y
	LDY.b $00
	STA.w $008C,y
CODE_289EA6:
	RTS

;--------------------------------------------------------------------

CODE_289EA7:
	LDA.b !RAM_SMB3_Global_FrameCounter
	BIT.b #$03
	BNE.b CODE_289EC9
	INC.w !RAM_SMB3_Global_FixedColorData2Mirror
	INC.w !RAM_SMB3_Global_FixedColorData3Mirror
	LDA.w !RAM_SMB3_Global_FixedColorData2Mirror
	CMP.b #$58
	BNE.b CODE_289EBD
	DEC.w !RAM_SMB3_Global_FixedColorData2Mirror
CODE_289EBD:
	LDA.w !RAM_SMB3_Global_FixedColorData3Mirror
	CMP.b #$A0
	BNE.b CODE_289EC7
	DEC.w !RAM_SMB3_Global_FixedColorData3Mirror
CODE_289EC7:
	LDA.b !RAM_SMB3_Global_FrameCounter
CODE_289EC9:
	BIT.b #$07
	BEQ.b CODE_289ECE
	RTS

CODE_289ECE:
	INC.w !RAM_SMB3_Global_FixedColorData1Mirror
	LDA.w !RAM_SMB3_Global_FixedColorData1Mirror
	CMP.b #$2E
	BNE.b CODE_289EDB
	DEC.w !RAM_SMB3_Global_FixedColorData1Mirror
CODE_289EDB:
	RTS

;--------------------------------------------------------------------

	%FREE_BYTES(NULLROM, 4388, $FF)
	%ROUTINE_SMB3_NorSpr047_GiantBlockHandler_Status02(NULLROM)		; $28B000

;--------------------------------------------------------------------

CODE_28B257:
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	CMP.b #$06
	BEQ.b CODE_28B264
	CLC
	LDA.b $9C
	BEQ.b CODE_28B264
	SEC
CODE_28B264:
	RTS

;--------------------------------------------------------------------

	%ROUTINE_SMB3_NorSpr040_BusterBeetle_Status01(NULLROM)			; $28B265
	%ROUTINE_SMB3_NorSpr040_BusterBeetle_Status02(NULLROM)			; $28B273

;--------------------------------------------------------------------

SMB3_NorSpr025_OverworldPipeLevelController_Status01:
.Main:
;$28B45D
	LSR.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	ROR
	LSR
	LSR
	LSR
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	LDA.l !RAM_SMB3_Overworld_DontDestroyEnteredSpriteFlag
	INC
	STA.l !RAM_SMB3_Overworld_DontDestroyEnteredSpriteFlag
SMB3_NorSpr025_OverworldPipeLevelController_SteppedOnRt_Main:
SMB3_NorSpr026_RightFlyingWoodPlatform_SteppedOnRt_Main:
SMB3_NorSpr027_FizedHorizontalMovementWoodPlatform_SteppedOnRt_Main:
SMB3_NorSpr028_FizedVerticalMovementWoodPlatform_SteppedOnRt_Main:
SMB3_NorSpr029_Spike_SteppedOnRt_Main:
SMB3_NorSpr02B_KuribosShoe_Status01_Main:
SMB3_NorSpr02D_BossBass_SteppedOnRt_Main:
SMB3_NorSpr02E_ElevatorPlatform_SteppedOnRt_Main:
SMB3_NorSpr02F_Boo_Status01_Main:
SMB3_NorSpr033_NipperPlant_Status01_Main:
SMB3_NorSpr034_ToadHouseToad_SteppedOnRt_Main:
SMB3_NorSpr035_ToadHouseChestItem_Status01_Main:
SMB3_NorSpr035_ToadHouseChestItem_SteppedOnRt_Main:
SMB3_NorSpr036_LeftFlyingWoodPlatformThatFalls_SteppedOnRt_Main:
SMB3_NorSpr037_FizedHorizontalMovementWoodPlatform_SteppedOnRt_Main:
SMB3_NorSpr038_FizedVerticalMovementWoodPlatform_SteppedOnRt_Main:
SMB3_NorSpr03A_LineGuidedDonutPlatform_SteppedOnRt_Main:
SMB3_NorSpr03C_LineGuidedWoodPlatform_SteppedOnRt_Main:
SMB3_NorSpr03D_FireBreathingNipper_Status01_Main:
SMB3_NorSpr03E_BuoyantPlatform_SteppedOnRt_Main:
SMB3_NorSpr040_BusterBeetle_SteppedOnRt_Main:
SMB3_NorSpr041_EndOfLevelCard_Status01_Main:
SMB3_NorSpr044_FallingWoodPlatform_SteppedOnRt_Main:
SMB3_NorSpr047_GiantBlockHandler_Status01_Main:
SMB3_NorSpr047_GiantBlockHandler_SteppedOnRt_Main:
SMB3_NorSpr048_MiniBossBass_Status01_Main:
SMB3_NorSpr048_MiniBossBass_SteppedOnRt_Main:
SMB3_NorSpr049_BGCloud_Status01_Main:
SMB3_NorSpr049_BGCloud_SteppedOnRt_Main:
SMB3_NorSpr04A_GoalSphere_Status01_Main:
SMB3_NorSpr04A_GoalSphere_SteppedOnRt_Main:
SMB3_NorSpr04B_BoomBoom_SteppedOnRt_Main:
SMB3_NorSpr04C_FlyingBoomBoom_SteppedOnRt_Main:
SMB3_NorSpr04D_UnusedSprite_Status01_Main:
SMB3_NorSpr04D_UnusedSprite_Status02_Main:
SMB3_NorSpr04D_UnusedSprite_SteppedOnRt_Main:
SMB3_NorSpr04E_UnusedSprite_Status01_Main:
SMB3_NorSpr04E_UnusedSprite_Status02_Main:
SMB3_NorSpr04E_UnusedSprite_SteppedOnRt_Main:
SMB3_NorSpr04F_FreeChainChomp_Status01_Main:
SMB3_NorSpr04F_FreeChainChomp_SteppedOnRt_Main:
SMB3_NorSpr050_BobOmb_SteppedOnRt_Main:
SMB3_NorSpr051_DoubleCounterclockwiseRotoDisc_SteppedOnRt_Main:
SMB3_NorSpr052_MiniChest_SteppedOnRt_Main:
SMB3_NorSpr053_UpsideDownPodoboo_SteppedOnRt_Main:
SMB3_NorSpr054_DonutBlock_Status01_Main:
SMB3_NorSpr054_DonutBlock_SteppedOnRt_Main:
SMB3_NorSpr055_WindupBobOmb_SteppedOnRt_Main:
SMB3_NorSpr056_LeftFacingSidewaysPiranhaPlant_SteppedOnRt_Main:
SMB3_NorSpr057_RightFacingSidewaysPiranhaPlant_SteppedOnRt_Main:
SMB3_NorSpr058_FireChomp_SteppedOnRt_Main:
SMB3_NorSpr059_FireSnake_SteppedOnRt_Main:
SMB3_NorSpr05A_SingleClockwiseRotoDisc_SteppedOnRt_Main:
SMB3_NorSpr05B_SingleCounterclockwiseRotoDisc_SteppedOnRt_Main:
SMB3_NorSpr05C_ThrowBlock_Status01_Main:
SMB3_NorSpr05C_ThrowBlock_SteppedOnRt_Main:
SMB3_NorSpr05D_Whirlwind_SteppedOnRt_Main:
SMB3_NorSpr05E_DoubleHorizontalCrossingRotoDisc_SteppedOnRt_Main:
SMB3_NorSpr05F_DoubleVerticalCrossingRotoDisc_SteppedOnRt_Main:
SMB3_NorSpr060_DoubleClockwiseRotoDisc_SteppedOnRt_Main:
SMB3_NorSpr061_FollowingBlooperNanny_SteppedOnRt_Main:
SMB3_NorSpr062_Blooper_Status01_Main: 
SMB3_NorSpr062_Blooper_SteppedOnRt_Main:
SMB3_NorSpr063_BigBertha_SteppedOnRt_Main:
SMB3_NorSpr064_WaterHoppingRedCheepCheep_SteppedOnRt_Main:
SMB3_NorSpr065_UpwardsAirCurrent_Status01_Main:
SMB3_NorSpr065_UpwardsAirCurrent_SteppedOnRt_Main:
SMB3_NorSpr066_DownwardsAirCurrent_Status01_Main:
SMB3_NorSpr066_DownwardsAirCurrent_SteppedOnRt_Main:
SMB3_NorSpr067_LavaLotus_SteppedOnRt_Main:
SMB3_NorSpr06A_LaunchingBlooperNanny_SteppedOnRt_Main:
SMB3_NorSpr06B_JumpingFakeBrick_Status01_Main:
SMB3_NorSpr06B_JumpingFakeBrick_SteppedOnRt_Main:
SMB3_NorSpr090_WeightedPeaPlatform_SteppedOnRt_Main:
SMB3_NorSpr091_AutoRotatingPeaPlatform_SteppedOnRt_Main:
SMB3_NorSpr092_ClockwiseRotatingPeaPlatform_SteppedOnRt_Main:
SMB3_NorSpr093_CounterclockwiseRotatingPeaPlatform_SteppedOnRt_Main:
SMB3_NorSpr094_GiantQuestionMarkBlockWithThree1ups_SteppedOnRt_Main:
SMB3_NorSpr095_GiantQuestionMarkBlockWithMushroom_SteppedOnRt_Main:
SMB3_NorSpr096_GiantQuestionMarkBlockWithFireFlower_SteppedOnRt_Main:
SMB3_NorSpr097_GiantQuestionMarkBlockWithRaccoonLeaf_SteppedOnRt_Main:
SMB3_NorSpr098_GiantQuestionMarkBlockWithTanookiSuit_SteppedOnRt_Main:
SMB3_NorSpr099_GiantQuestionMarkBlockWithFrogSuit_SteppedOnRt_Main:
SMB3_NorSpr09A_GiantQuestionMarkBlockWithHammerSuit_SteppedOnRt_Main:
SMB3_NorSpr09B_UnusedSprite_Status01_Main:
SMB3_NorSpr09B_UnusedSprite_Status02_Main:
SMB3_NorSpr09B_UnusedSprite_SteppedOnRt_Main:
SMB3_NorSpr09C_UnusedSprite_Status01_Main:
SMB3_NorSpr09C_UnusedSprite_Status02_Main:
SMB3_NorSpr09C_UnusedSprite_SteppedOnRt_Main:
SMB3_NorSpr09D_UpwardFacingFireJet_SteppedOnRt_Main:
SMB3_NorSpr09E_Podoboo_SteppedOnRt_Main:
SMB3_NorSpr09F_Parabuzzy_SteppedOnRt_Main:
SMB3_NorSpr0A0_GreenClassicPiranhaPlant_SteppedOnRt_Main:
SMB3_NorSpr0A1_UpsideDownRedClassicPiranhaPlant_SteppedOnRt_Main:
SMB3_NorSpr0A2_RedClassicPiranhaPlant_SteppedOnRt_Main:
SMB3_NorSpr0A3_UpsideDownRedClassicPiranhaPlant_SteppedOnRt_Main:
SMB3_NorSpr0A4_GreenVenusFireTrap_SteppedOnRt_Main:
SMB3_NorSpr0A5_UpsideDownRedVenusFireTrap_SteppedOnRt_Main:
SMB3_NorSpr0A6_RedVenusFireTrap_SteppedOnRt_Main:
SMB3_NorSpr0A7_UpsideDownRedVenusFireTrap_SteppedOnRt_Main:
SMB3_NorSpr0A8_StaticOutlinePlatform_Status01_Main:
SMB3_NorSpr0A8_StaticOutlinePlatform_SteppedOnRt_Main:
SMB3_NorSpr0A9_SwitchableOutlinePlatform_Status01_Main:
SMB3_NorSpr0A9_SwitchableOutlinePlatform_SteppedOnRt_Main:
SMB3_NorSpr0AA_AirshipPropeller_SteppedOnRt_Main:
SMB3_NorSpr0AB_UnusedSprite_SteppedOnRt_Main:
SMB3_NorSpr0AC_LeftwardFacingFireJet_SteppedOnRt_Main:
SMB3_NorSpr0AD_RockyWrench_SteppedOnRt_Main:
SMB3_NorSpr0AE_MetalLugnut_SteppedOnRt_Main:
SMB3_NorSpr0AF_AngrySun_SteppedOnRt_Main:
CODE_28B470:
	RTL

;--------------------------------------------------------------------

	%ROUTINE_SMB3_NorSpr025_OverworldPipeLevelController_Status02(NULLROM)	; $28B471

;--------------------------------------------------------------------

SMB3_NorSpr043_2SpotHoppingRedCheepCheep_Status01:
.Main:
;$28B4D2
	LDA.b #$04
	STA.b $4D,x
SMB3_NorSpr042_3SpotHoppingRedCheepCheep_Status01:
.Main:
CODE_28B4D6:
	LDA.b #$40
	STA.w $0518,x
	LSR
	LSR
	STA.w $0679,x
	RTL

;--------------------------------------------------------------------

SMB3_NorSpr042_3SpotHoppingRedCheepCheep_Status02:
.Main:
;$28B4E1
	LDA.b $9C
	BEQ.b CODE_28B4E8
	BRL.w CODE_28B597

CODE_28B4E8:
	LDA.w $0518,x
	BEQ.b CODE_28B51A
	LSR
	BEQ.b CODE_28B4F3
	JMP.w CODE_28B593

CODE_28B4F3:
	LDY.b $4D,x
	DEY
	BPL.b CODE_28B4FA
	LDY.b #$03
CODE_28B4FA:
	STY.b $4D,x
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_NorSpr043_2SpotHoppingRedCheepCheep
	BNE.b CODE_28B510
	LDA.w !RAM_SMB3_Level_Layer3BGFromHeader
	CMP.b #$01
	BNE.b CODE_28B510
	LDA.b #$B0
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	BRA.b CODE_28B515

CODE_28B510:
	LDA.w DATA_21BC9E,y
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_28B515:
	LDA.w DATA_21BC98,y
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_28B51A:
	JSL.l CODE_27A7F0
	JSL.l CODE_27A7D9
	JSL.l CODE_279B70
	LDY.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	INY
	INY
	TYA
	PHA
	LDY.b #$00
	JSL.l CODE_27DEFA
	BCC.b CODE_28B538
	JSL.l CODE_278CF3
CODE_28B538:
	PLA
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	ASL
	AND.b #$40
	EOR.b #$40
	STA.w $0679,x
	LDY.b $4D,x
	LDA.b $68,x
	CLC
	ADC.w $074D
	CMP.w DATA_21BCA4,y
	BMI.b CODE_28B587
	LDY.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	BMI.b CODE_28B587
	LDY.b #$01
	JSL.l CODE_27DEFA
	BCS.b CODE_28B575
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	AND.b #$08
	BEQ.b CODE_28B575
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	AND.b #$F0
	CLC
	ADC.b #$10
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	ADC.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	BRA.b CODE_28B57B

CODE_28B575:
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	AND.b #$F0
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
CODE_28B57B:
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	AND.b #$F0
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	JSL.l CODE_28B4D6
	LDA.b #$00
CODE_28B587:
	STA.b $68,x
	LDA.b !RAM_SMB3_Global_FrameCounter
	LSR
	LSR
	LSR
	AND.b #$01
	STA.w $0669,x
CODE_28B593:
	JSL.l CODE_279BC4
CODE_28B597:
	JSL.l SMB3_CheckIfSpriteIsHorizontallyOffScreen_Main
	JSL.l CODE_279EBC
	RTL

SMB3_NorSpr043_2SpotHoppingRedCheepCheep_Status02:
.Main:
	LDA.b $9C
	BNE.b CODE_28B597
	LDA.w $0518,x
	BNE.b CODE_28B5AC
	JMP.w CODE_28B51A

CODE_28B5AC:
	LSR
	BNE.b CODE_28B593
	LDA.b $4D,x
	EOR.b #$01
	TAY
	BMI.b CODE_28B5B9
	JMP.w CODE_28B4FA

SMB3_NorSpr045_WanderingHotFoot_Status01:
.Main:
CODE_28B5B9:
	LDA.w DATA_21BCAA,x
	STA.b $68,x
SMB3_NorSpr030_FollowingHotFoot_Status01:
.Main:
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	ORA.b #$04
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	RTL

;--------------------------------------------------------------------

	%ROUTINE_SMB3_NorSpr0XX_HotFoot_Status02(NULLROM)		; $28B5C5

;--------------------------------------------------------------------

CODE_28B6BC:
	LDY.b $68,x
	JSL.l CODE_27A7AE
	EOR.b $BD
	ASL
	BPL.b CODE_28B6C9
	LDY.b #$00
CODE_28B6C9:
	CPY.b #$14
	BCS.b CODE_28B6D0
	INY
	STY.b $68,x
CODE_28B6D0:
	RTS

;--------------------------------------------------------------------

	%ROUTINE_SMB3_NorSpr02F_Boo_Status02(NULLROM)			; $28B6D1

;--------------------------------------------------------------------

CODE_28B73A:
	JSL.l CODE_279BC4
	JSL.l SMB3_CheckIfSpriteIsHorizontallyOffScreen_Main
	JSL.l CODE_279EBC
	RTL

;--------------------------------------------------------------------

	%ROUTINE_SMB3_NorSpr0XX_Stretch_Status01(NULLROM)		; $28B747
	%ROUTINE_SMB3_NorSpr0XX_Stretch_Status02(NULLROM)		; $28B77A
	%ROUTINE_SMB3_NorSpr02E_ElevatorPlatform_Status01(NULLROM)	; $28B7DF
	%ROUTINE_SMB3_NorSpr02E_ElevatorPlatform_Status02(NULLROM)	; $28B7EB

;--------------------------------------------------------------------

SMB3_NorSpr024_FastLeftMovingCloudPlatform_Status01:
.Main:
;$28B88D
	LDA.b #$F6
CODE_28B88F:
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
SMB3_NorSpr026_RightFlyingWoodPlatform_Status01:
.Main:
SMB3_NorSpr027_FizedHorizontalMovementWoodPlatform_Status01:
.Main:
SMB3_NorSpr028_FizedVerticalMovementWoodPlatform_Status01:
.Main:
CODE_28B891:
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	BNE.b CODE_28B897
	DEC.b !RAM_SMB3_Level_NorSpr_YPosHi,x
CODE_28B897:
	DEC.b !RAM_SMB3_Level_NorSpr_YPosLo,x
CODE_28B899:
	RTL

SMB3_NorSpr02C_SlowLeftMovingCloudPlatform_Status01:
.Main:
	LDA.b #$FA
	BNE.b CODE_28B88F							; Note: This will always branch.

SMB3_NorSpr036_LeftFlyingWoodPlatformThatFalls_Status01:
.Main:
	LDA.b #$F8
	BNE.b CODE_28B88F							; Note: This will always branch.

SMB3_NorSpr037_FizedHorizontalMovementWoodPlatform_Status01:
.Main:
SMB3_NorSpr038_FizedVerticalMovementWoodPlatform_Status01:
.Main:
	INC.b $4D,x
	BNE.b CODE_28B891							; Note: This will always branch.

;--------------------------------------------------------------------

SMB3_NorSpr024_FastLeftMovingCloudPlatform_Status02:
.Main:
SMB3_NorSpr02C_SlowLeftMovingCloudPlatform_Status02:
.Main:
;$28B8A6
	JSL.l CODE_28B960
	LDA.b $9C
	BNE.b CODE_28B899
	JSL.l CODE_27A7F0
	JSL.l CODE_27A317
	RTL

;--------------------------------------------------------------------

CODE_28B8B7:
	LDA.b $0B
	LSR
	BCC.b CODE_28B8E1
	LDA.b $9D
	BMI.b CODE_28B8E1
CODE_28B8C0:
	LDA.b $71,x
	SEC
	SBC.b #$1F
	STA.b $70
	LDA.b $56,x
	SBC.b #$00
	STA.b $55
	LDY.b #$00
	STY.b $A6
	LDA.w $074D
	BPL.b CODE_28B8D7
	DEY
CODE_28B8D7:
	CLC
	ADC.b $5E
	STA.b $5E
	TYA
	ADC.b $43
	STA.b $43
CODE_28B8E1:
	RTL

;--------------------------------------------------------------------

SMB3_NorSpr026_RightFlyingWoodPlatform_Status02:
.Main:
;$28B8E2
	JSL.l CODE_28B960
	LDA.b $9C
	BNE.b CODE_28B904
	JSL.l CODE_27A7F0
	JSR.w CODE_28C8C5
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	BNE.b CODE_28B8F8
	BCS.b CODE_28B902
	RTL

CODE_28B8F8:
	CMP.b #$10
	BEQ.b CODE_28B904
	LDA.w $0565
	LSR
	BCS.b CODE_28B904
CODE_28B902:
	INC.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_28B904:
	RTL

;--------------------------------------------------------------------

CODE_28B905:
	JSL.l SMB3_HandleNormalSpriteGravity_Main
	LDA.b $A7,x
	AND.b #$08
	BEQ.b CODE_28B911
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_28B911:
	LDA.b $A7,x
	AND.b #$03
	BEQ.b CODE_28B91F
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	BEQ.b CODE_28B91F
	JSL.l CODE_279906
CODE_28B91F:
	LDA.b $A7,x
	AND.b #$04
	BEQ.b CODE_28B929
	JSL.l CODE_278B67
CODE_28B929:
	RTS

;--------------------------------------------------------------------

SMB3_NorSpr027_FizedHorizontalMovementWoodPlatform_Status02:
.Main:
SMB3_NorSpr037_FizedHorizontalMovementWoodPlatform_Status02:
.Main:
;$28B92A
	LDA.b $9C
	BNE.b CODE_28B960
	JSL.l CODE_28B93A
	JSL.l CODE_27A7F0
	JSR.w CODE_28C8C5
	RTL

;--------------------------------------------------------------------

CODE_28B93A:
	LDA.w $0518,x
	BNE.b CODE_28B960
	LDA.w $0565
	LSR
	BCS.b CODE_28B960
	LDY.b $68,x
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	ADC.w DATA_21BCBE,y
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	CMP.w DATA_21BCBC,y
	BNE.b CODE_28B960
	TYA
	EOR.b #$01
	STA.b $68,x
	LDY.b $4D,x
	LDA.w DATA_21BCC0,y
	STA.w $0518,x
CODE_28B960:
	JSL.l CODE_279BC4
	JSR.w CODE_28C308
	RTL

;--------------------------------------------------------------------

SMB3_NorSpr028_FizedVerticalMovementWoodPlatform_Status02:
.Main:
SMB3_NorSpr038_FizedVerticalMovementWoodPlatform_Status02:
.Main:
;$28B968
	LDA.b $9C
	BNE.b CODE_28B960
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	JSL.l CODE_28B93A
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	JSL.l CODE_27A7D9
	LDA.b #$00
	STA.w $074D
	JSR.w CODE_28C8C5
	RTL

;--------------------------------------------------------------------

	%ROUTINE_SMB3_NorSpr03E_BuoyantPlatform_Status01(NULLROM)		; $28B985
	%ROUTINE_SMB3_NorSpr03E_BuoyantPlatform_Status02(NULLROM)		; $28B99A

;--------------------------------------------------------------------

SMB3_NorSpr036_LeftFlyingWoodPlatformThatFalls_Status02:
.Main:
;$28B9F1
	JSL.l CODE_28B960
	LDA.b $9C
	BNE.b CODE_28BA0E
	JSL.l CODE_27A7D9
	JSL.l CODE_27A7F0
	JSR.w CODE_28C8C5
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	BNE.b CODE_28BA0C
	BCC.b CODE_28BA0E
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_28BA0C:
	INC.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_28BA0E:
	RTL

;--------------------------------------------------------------------

SMB3_NorSpr03C_LineGuidedWoodPlatform_Status01:
.Main:
;$28BA0F
	INC.b $4D,x
SMB3_NorSpr03A_LineGuidedDonutPlatform_Status01:
.Main:
SMB3_NorSpr044_FallingWoodPlatform_Status01:
.Main:
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	ORA.b #$08
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	ORA.b #$06
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
CODE_28BA1D:
	RTL

;--------------------------------------------------------------------

SMB3_NorSpr03A_LineGuidedDonutPlatform_Status02:
.Main:
SMB3_NorSpr03C_LineGuidedWoodPlatform_Status02:
.Main:
SMB3_NorSpr044_FallingWoodPlatform_Status02:
.Main:
;$28BA1E
	JSL.l CODE_28B960
	LDA.b $9C
	BNE.b CODE_28BA1D
	LDA.b $4D,x
	BEQ.b CODE_28BA2F
	LSR
	BEQ.b CODE_28BA32
	INC.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_28BA2F:
	JMP.w CODE_28BAB2

CODE_28BA32:
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	BEQ.b CODE_28BA40
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	AND.b #$0F
	CMP.b #$06
	BNE.b CODE_28BAB2
	BEQ.b CODE_28BA48							; Note: This will always branch.

CODE_28BA40:
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	AND.b #$0F
	CMP.b #$08
	BNE.b CODE_28BAB2
CODE_28BA48:
	LDA.b #$03
	STA.b $0C
	LDY.w $0418
	LDA.w DATA_21BB30,y
	AND.b #$F0
	LSR
	TAY
CODE_28BA56:
	STY.b $0D
	JSL.l CODE_278E13
	LDY.b $0C
	STA.w $0008,y
	LDY.b $0D
	INY
	INY
	DEC.b $0C
	BPL.b CODE_28BA56
	LDA.b #$0C
	STA.b $0C
	LDA.b $68,x
	STA.b $0D
CODE_28BA71:
	LDY.b $0C
	LDA.w DATA_21BCC8,y
	CLC
	ADC.b $0D
	AND.b #$0F
	TAY
	LDX.w DATA_21BCD5,y
	LDA.b $08,x
	CMP.w DATA_21BCE5,y
	BEQ.b CODE_28BAA3
	CMP.w DATA_21BCF5,y
	BEQ.b CODE_28BAA3
	CPY.b $0D
	BNE.b CODE_28BA99
	CMP.b #$D0
	BNE.b CODE_28BA99
	TYA
	EOR.b #$08
	TAY
	BPL.b CODE_28BAA3
CODE_28BA99:
	DEC.b $0C
	BPL.b CODE_28BA71
	LDX.b $9B
	INC.b $4D,x
	LDY.b #$10
CODE_28BAA3:
	LDX.b $9B
	TYA
	STA.b $68,x
	LDA.w DATA_21BD16,y
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	LDA.w DATA_21BD05,y
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_28BAB2:
	JSL.l CODE_27A7D9
	JSL.l CODE_27A7F0
	JSR.w CODE_28C8C5
	BCC.b CODE_28BAC5
	LDA.b $4D,x
	ORA.b #$01
	STA.b $4D,x
CODE_28BAC5:
	RTL

;--------------------------------------------------------------------

SMB3_NorSpr029_Spike_Status01:
.Main:
SMB3_NorSpr03F_DryBones_Status01:
.Main:
CODE_28BAC6:
	LDY.w $0025
	LDA.w DATA_21BD27,y
	STA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	LDA.w DATA_21BD29,y
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	RTL

;--------------------------------------------------------------------

	%ROUTINE_SMB3_NorSpr029_Spike_Status02(NULLROM)			; $28BAD5

;--------------------------------------------------------------------

SMB3_NorSpr046_BlowingPiranhaPlant_Status01:
.Main:
;$28BC51
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	ORA.b #$08
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	LDA.b #$10
	BNE.b CODE_28BC61				; Note: This will always branch.

SMB3_NorSpr02A_Ptooie_Status01:
.Main:
;$28BC5B
	JSL.l CODE_28BAC6
	LDA.b #$0C
CODE_28BC61:
	STA.b !RAM_SMB3_NorSprXXX_SpikeBlowingPiranhaPlant_YOffsetOfSpikeBall,x
	RTL

;--------------------------------------------------------------------

SMB3_NorSpr046_BlowingPiranhaPlant_Status02:
.Main:
;$28BC64
	LDA.b $9C
	BEQ.b CODE_28BC69
	RTL

CODE_28BC69:
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	CMP.b #$06
	BEQ.b CODE_28BC73
	JMP.w CODE_28BCFE

CODE_28BC73:
	LDA.b #$08
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	LDA.b #$1F
	STA.w $0518,x
CODE_28BC7D:
	INC.w $1CF6,x
	JSL.l SMB3_FindFreeExtendedSpriteSlot_FixedPriority
	LDA.b #!Define_SMB3_SpriteID_ExtSpr07_SpikeBall
	STA.w !RAM_SMB3_Level_ExtSpr_SpriteID,y
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	STA.w !RAM_SMB3_Level_ExtSpr_XPosLo,y
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	STA.w !RAM_SMB3_Level_ExtSpr_XPosHi,y
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	SEC
	SBC.b !RAM_SMB3_NorSprXXX_SpikeBlowingPiranhaPlant_YOffsetOfSpikeBall,x
	STA.w !RAM_SMB3_Level_ExtSpr_YPosLo,y
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	SBC.b #$00
	STA.w !RAM_SMB3_Level_ExtSpr_YPosHi,y
	LDA.b #$01
	STA.w $06C7,y
	LSR
	STA.w !RAM_SMB3_Level_ExtSpr_XSpeed,y
	LDA.w !RAM_SMB3_NorSprXXX_SpikeBlowingPiranhaPlant_YAccelerationIndexOfSpikeBall,x
	AND.b #$7C
	LSR
	LSR
	TAX
	LDA.w DATA_21BD76,x
	JSL.l SMB3_UnnecessaryInvertARt_Main
	ASL
	ASL
	ASL
	ASL
	STA.w !RAM_SMB3_Level_ExtSpr_YSpeed,y
	LDX.b $9B
	JMP.w CODE_28BD4E

SMB3_NorSpr02A_Ptooie_Status02:
.Main:
;$28BCC6
	LDA.b $9C
	BEQ.b CODE_28BCCB
	RTL

CODE_28BCCB:
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	CMP.b #$06
	BNE.b CODE_28BCDA
	LDA.w $1CF6,x
	BEQ.b CODE_28BC7D
	JMP.w CODE_28BD4E

CODE_28BCDA:
	JSR.w CODE_28B905
	LDA.b $A7,x
	AND.b #$04
	BEQ.b CODE_28BCFE
	LDA.b !RAM_SMB3_Global_FrameCounter
	ADC.w DATA_21BCAA,x
	AND.b #$9F
	BNE.b CODE_28BCF4
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	JSL.l SMB3_UnnecessaryInvertARt_Main
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_28BCF4:
	LDA.b !RAM_SMB3_Global_FrameCounter
	ASL
	ASL
	ASL
	AND.b #$40
	STA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
CODE_28BCFE:
	LDA.w !RAM_SMB3_NorSprXXX_SpikeBlowingPiranhaPlant_YAccelerationIndexOfSpikeBall,x
	BEQ.b CODE_28BD0C
	LDA.w $0565
	LSR
	BCC.b CODE_28BD0C
	DEC.w !RAM_SMB3_NorSprXXX_SpikeBlowingPiranhaPlant_YAccelerationIndexOfSpikeBall,x
CODE_28BD0C:
	LDY.b #$00
	LDA.w !RAM_SMB3_NorSprXXX_SpikeBlowingPiranhaPlant_YAccelerationIndexOfSpikeBall,x
	PHA
	AND.b #$C0
	LSR
	LSR
	STA.b $00
	PLA
	ASL
	EOR.w !RAM_SMB3_NorSprXXX_SpikeBlowingPiranhaPlant_YAccelerationIndexOfSpikeBall,x
	AND.b $00
	BEQ.b CODE_28BD22
	INY
CODE_28BD22:
	TYA
	STA.w !RAM_SMB3_NorSprXXX_SpikeBlowingPiranhaPlant_AnimationFrame,x
	LDA.w !RAM_SMB3_NorSprXXX_SpikeBlowingPiranhaPlant_YAccelerationIndexOfSpikeBall,x
	AND.b #$3F
	BNE.b CODE_28BD3A
	LDY.b #$BF
	LDA.w $0565
	BPL.b CODE_28BD36
	LDY.b #$5F
CODE_28BD36:
	TYA
	STA.w !RAM_SMB3_NorSprXXX_SpikeBlowingPiranhaPlant_YAccelerationIndexOfSpikeBall,x
CODE_28BD3A:
	LDA.w !RAM_SMB3_NorSprXXX_SpikeBlowingPiranhaPlant_YAccelerationIndexOfSpikeBall,x
	AND.b #$7C
	LSR
	LSR
	TAY
	LDA.b !RAM_SMB3_NorSprXXX_SpikeBlowingPiranhaPlant_YOffsetOfSpikeBall,x
	CLC
	ADC.w DATA_21BD76,y
	STA.b !RAM_SMB3_NorSprXXX_SpikeBlowingPiranhaPlant_YOffsetOfSpikeBall,x
	JSL.l CODE_27A317
CODE_28BD4E:
	JSL.l CODE_279BC4
CODE_28BD52:
	JSL.l SMB3_CheckIfSpriteIsHorizontallyOffScreen_Main
	JSL.l CODE_279DF9
	LDX.b $9B
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_NorSpr046_BlowingPiranhaPlant
	BEQ.b CODE_28BD6A
	LDA.b $00
	CLC
	ADC.b #$06
	STA.b $00
CODE_28BD6A:
	LDX.b $05
	LDA.b $02
	BPL.b CODE_28BD73
	JSR.w CODE_28BEC6
CODE_28BD73:
	JSL.l CODE_279F91
	LDX.b $9B
	REP.b #$20
	LDA.b $C6,x
	CLC
	ADC.w #$0010
	STA.b $C6,x
	SEP.b #$20
	LSR.b $04
	LDA.b $00
	CLC
	ADC.b #$10
	STA.b $00
	LDX.b $05
	LDA.b $02
	BMI.b CODE_28BD97
	JSR.w CODE_28BEC6
CODE_28BD97:
	JSL.l CODE_279F91
	LDX.b $9B
	REP.b #$10
	LDY.b $C6,x
	LDA.b $02
	BPL.b CODE_28BDAF
	REP.b #$20
	TYA
	CLC
	ADC.w #$0010
	TAY
	SEP.b #$20
CODE_28BDAF:
	LDA.b $02
	AND.b #$B8
	ORA.b #$02
	STA.w SMB3_OAMBuffer[$00].Prop-$10,y
	STA.w SMB3_OAMBuffer[$02].Prop-$10,y
	ORA.b #$40
	STA.w SMB3_OAMBuffer[$01].Prop-$10,y
	STA.w SMB3_OAMBuffer[$03].Prop-$10,y
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_NorSpr046_BlowingPiranhaPlant
	BNE.b CODE_28BDDD
	LDA.w SMB3_OAMBuffer[$04].Prop-$10,y
	AND.b #$BF
	STA.w SMB3_OAMBuffer[$04].Prop-$10,y
	STA.w SMB3_OAMBuffer[$06].Prop-$10,y
	ORA.b #$40
	STA.w SMB3_OAMBuffer[$05].Prop-$10,y
	STA.w SMB3_OAMBuffer[$07].Prop-$10,y
CODE_28BDDD:
	SEP.b #$10
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	CMP.b #$06
	BNE.b CODE_28BDE9
	JMP.w CODE_28C058

CODE_28BDE9:
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	PHA
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	PHA
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	PHA
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	PHA
	SEC
	SBC.b !RAM_SMB3_NorSprXXX_SpikeBlowingPiranhaPlant_YOffsetOfSpikeBall,x
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	SBC.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	LDA.w $0565
	AND.b #$06
	TAY
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	XBA
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	REP.b #$20
	CLC
	ADC.w DATA_21BD8E,y
	SEP.b #$20
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	XBA
	STA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	LDY.b #$00
	JSL.l SMB3_CheckIfSpriteIsVerticallyOffScreen_Entry2
	JSL.l SMB3_CheckIfSpriteIsHorizontallyOffScreen_Main
	JSL.l CODE_279DF9
	LDX.b $9B
	REP.b #$20
	LDA.b $C6,x
	CLC
	ADC.w #$0010
	STA.b $C6,x
	SEP.b #$20
	LDX.b #$6E
	JSL.l CODE_279F91
	LDX.b $9B
	REP.b #$10
	LDY.b $C6,x
	LDA.w $0565
	LSR
	LSR
	LSR
	ROR
	AND.b #$80
	ORA.b #$2A
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$02].Prop,y
	EOR.b #$C0
	STA.w SMB3_OAMBuffer[$01].Prop,y
	STA.w SMB3_OAMBuffer[$03].Prop,y
	AND.b #$80
	BEQ.b CODE_28BE6B
	LDA.w SMB3_OAMBuffer[$01].Tile,y
	PHA
	LDA.w SMB3_OAMBuffer[$03].Tile,y
	STA.w SMB3_OAMBuffer[$01].Tile,y
	PLA
	STA.w SMB3_OAMBuffer[$03].Tile,y
CODE_28BE6B:
	LDA.w SMB3_OAMBuffer[$00].Prop,y
	AND.b #$80
	BEQ.b CODE_28BE80
	LDA.w SMB3_OAMBuffer[$00].Tile,y
	PHA
	LDA.w SMB3_OAMBuffer[$02].Tile,y
	STA.w SMB3_OAMBuffer[$00].Tile,y
	PLA
	STA.w SMB3_OAMBuffer[$02].Tile,y
CODE_28BE80:
	SEP.b #$10
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	CMP.b #$06
	BEQ.b CODE_28BEAF
	LDA.b $9C
	BNE.b CODE_28BEAF
	JSL.l SMB3_CheckIfNormalSpriteOffScreen_Main
	BNE.b CODE_28BEAF
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	PHA
	LDA.b #!Define_SMB3_SpriteID_NorSpr042_3SpotHoppingRedCheepCheep
	STA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	JSL.l CODE_27A313
	BCC.b CODE_28BEAB
	LDA.w !RAM_SMB3_Level_Player_StarPowerTimer
	BNE.b CODE_28BEAB
	JSL.l CODE_27A49D
CODE_28BEAB:
	PLA
	STA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
CODE_28BEAF:
	PLA
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	PLA
	STA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	PLA
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	PLA
	STA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	JSL.l SMB3_CheckIfSpriteIsVerticallyOffScreen_Main
	JSL.l SMB3_GetNormalSpriteOnScreenPosition_Main
	JMP.w CODE_28C058

CODE_28BEC6:
	LDX.b $9B
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	LDX.b #$82
	CMP.b #!Define_SMB3_SpriteID_NorSpr02A_Ptooie
	BEQ.b CODE_28BED3
	LDX.b #$84
CODE_28BED3:
	RTS

;--------------------------------------------------------------------

	%ROUTINE_SMB3_NorSpr02B_KuribosShoe_Status02(NULLROM)			; $28BED4

;--------------------------------------------------------------------

CODE_28BFB2:
	LDA.b $4D,x
	BEQ.b CODE_28BFC5
	LDA.b #!Define_SMAS_Sound0060_Contact
	STA.w !RAM_SMB3_Global_SoundCh1
	LDA.b #$80
	STA.w $0578
	ASL
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	RTL

CODE_28BFC5:
	LDA.w $0689,x
	BNE.b CODE_28BFD4
	LDA.b $0B
	LSR
	BCS.b CODE_28BFD4
	JSL.l CODE_28CEA8
	RTL

CODE_28BFD4:
	JSL.l CODE_279B74
	RTL

;--------------------------------------------------------------------

CODE_28BFD9:
	JSL.l CODE_279DF9
	LDA.b $02
	BPL.b CODE_28BFF0
	LDX.b $9B
	LDA.b $68,x
	TAX
	LDA.b $00
	CLC
	ADC.w DATA_21BD96,x
	STA.b $00
	LDX.b $05
CODE_28BFF0:
	JSL.l CODE_279F91
	LDX.b $9B
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenYPos,x
	BIT.b $02
	BMI.b CODE_28C002
	LDY.b $68,x
	CLC
	ADC.w DATA_21BD96,y
CODE_28C002:
	STA.b $00
	BIT.b $02
	BVS.b CODE_28C013
	LDA.b $01
	CLC
	ADC.b #$01
	STA.b $01
	BCC.b CODE_28C013
	ASL.b $07
CODE_28C013:
	LDA.b #$02
	STA.b $03
	LDA.b $02
	AND.b #$FE
	STA.b $02
	REP.b #$20
	LDA.b $C6,x
	CLC
	ADC.w #$0010
	STA.b $C6,x
	SEP.b #$20
	LDX.b #$70
	JSL.l CODE_279F91
	LDX.b $9B
	REP.b #$10
	LDY.b $C6,x
	LDA.w SMB3_OAMBuffer[$00].Prop,y
	AND.b #$BF
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$02].Prop,y
	ORA.b #$40
	STA.w SMB3_OAMBuffer[$01].Prop,y
	STA.w SMB3_OAMBuffer[$03].Prop,y
	LDA.w SMB3_OAMBuffer[$01].XDisp,y
	SEC
	SBC.b #$01
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	STA.w SMB3_OAMBuffer[$03].XDisp,y
	SEP.b #$10
	LDX.b $9B
CODE_28C058:
	RTL

;--------------------------------------------------------------------

SMB3_NorSpr039_HoppingNipperPlant_Status01:
.Main:
	INC.b !RAM_SMB3_NorSprXXX_Nipper_HopAroundFlag,x
	RTL

;--------------------------------------------------------------------

SMB3_NorSpr033_NipperPlant_Status02:
.Main:
SMB3_NorSpr039_HoppingNipperPlant_Status02:
.Main:
;$28C05C
	LDA.b $9C
	BEQ.b CODE_28C065
	JSL.l CODE_28B73A
	RTL

CODE_28C065:
	JSR.w CODE_28B905
	LDA.b !RAM_SMB3_Global_FrameCounter
	LSR
	LSR
	AND.b #$02
	TAY
	JSL.l CODE_27A7AE
	STA.b $0D
	LDA.b $0E
	CLC
	ADC.b #$03
	CMP.b #$06
	BCS.b CODE_28C095
	JSL.l CODE_27A7C5
	LDA.b $0E
	BMI.b CODE_28C095
	INY
	LDA.b $A7,x
	AND.b #$04
	BEQ.b CODE_28C095
	LDA.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	LDA.b #$D0
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_28C095:
	TYA
	STA.w !RAM_SMB3_NorSprXXX_Nipper_AnimationFrame,x
	JSL.l CODE_28B73A
	JSL.l CODE_27A317
	LDA.b !RAM_SMB3_NorSprXXX_Nipper_HopAroundFlag,x
	BNE.b CODE_28C0AB
	LDA.b $0D
	STA.w $0679,x
	RTL

CODE_28C0AB:
	LDA.w !RAM_SMB3_NorSprXXX_Nipper_WaitBeforeHoppingAgainTimer,x
	BEQ.b CODE_28C0B7
	LSR
	BNE.b CODE_28C0DA
	JSL.l CODE_27990E
CODE_28C0B7:
	LDA.b $A7,x
	AND.b #$04
	BEQ.b CODE_28C0DA
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	BMI.b CODE_28C0DA
	DEC.b !RAM_SMB3_NorSprXXX_Nipper_HopAroundTimer,x
	BPL.b CODE_28C0D3
	LDA.b #$08
	STA.b !RAM_SMB3_NorSprXXX_Nipper_HopAroundTimer,x
	LDA.b #$20
	STA.w !RAM_SMB3_NorSprXXX_Nipper_WaitBeforeHoppingAgainTimer,x
	LDA.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	RTL

CODE_28C0D3:
	JSR.w SMB3_NorSpr029_Spike_Status02_CODE_28BC43
	LDA.b #$F0
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_28C0DA:
	RTL

;--------------------------------------------------------------------

	%ROUTINE_SMB3_NorSpr034_ToadHouseToad_Status01(NULLROM)			; $28C0DB
	%ROUTINE_SMB3_NorSpr034_ToadHouseToad_Status02(NULLROM)			; $28C110
	%ROUTINE_SMB3_NorSpr035_ToadHouseChestItem_Status02(NULLROM)		; $28C218

;--------------------------------------------------------------------

CODE_28C308:
	JSL.l CODE_279DF9
	LDA.b $02
	AND.b #$3F
	STA.b $02
	LDA.b !RAM_SMB3_Global_FrameCounter
	LSR
	PHP
	BCC.b CODE_28C328
	REP.b #$20
	LDY.b $9B
	LDA.w $00C6,y
	CLC
	ADC.w #$0018
	STA.w $00C6,y
	SEP.b #$20
CODE_28C328:
	JSL.l CODE_27A07A
	PLP
	BCS.b CODE_28C341
	REP.b #$20
	LDY.b $9B
	LDA.w $00C6,y
	CLC
	ADC.w #$0018
	STA.w $00C6,y
	SEP.b #$20
	BRA.b CODE_28C351

CODE_28C341:
	REP.b #$20
	LDY.b $9B
	LDA.w $00C6,y
	SEC
	SBC.w #$0018
	STA.w $00C6,y
	SEP.b #$20
CODE_28C351:
	INX
	INX
	INX
	LDA.b #$18
	CLC
	ADC.b $01
	STA.b $01
	ASL.b $07
	ASL.b $07
	ASL.b $07
	JSL.l CODE_27A07A
	LDX.b $9B
	RTS

;--------------------------------------------------------------------

	%ROUTINE_SMB3_NorSpr03D_FireBreathingNipper_Status02(NULLROM)		; $28C368
	%ROUTINE_SMB3_NorSpr03F_DryBones_Status02(NULLROM)			; $28C3F3

;--------------------------------------------------------------------

; Note: Something to do with touching a dry bones?

CODE_28C4FD:
	LDA.b !RAM_SMB3_NorSpr03F_DryBones_CollapsedAnimationFrame,x
	BNE.b CODE_28C521
	LDA.b $0B
	LSR
	BCC.b CODE_28C522
	LDA.b #$09
	STA.b !RAM_SMB3_NorSpr03F_DryBones_CollapsedAnimationFrame,x
	LDA.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$AA
else
	LDA.b #$C0
endif
	STA.b $9D
	LDA.b #!Define_SMAS_Sound0060_DryBonesCollapse
	STA.w !RAM_SMB3_Global_SoundCh1
	LDA.w !RAM_SMB3_Level_ConsecutiveEnemiesStompedCounter
	JSL.l CODE_278A8A
	INC.w !RAM_SMB3_Level_ConsecutiveEnemiesStompedCounter
CODE_28C521:
	RTL

CODE_28C522:
	JSL.l CODE_28CEA8
	RTL

;--------------------------------------------------------------------

; Note: Something related to sprite to sprite collisions.

CODE_28C527:
	TXA
	CLC
	ADC.b !RAM_SMB3_Global_FrameCounter
	LSR
	BCS.b CODE_28C52F
CODE_28C52E:
	RTS

CODE_28C52F:
	LDA.w !RAM_SMB3_Level_NorSpr_YOffscreenFlag,x
	BNE.b CODE_28C52E
	LDA.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,x
	AND.b #$C0
	CMP.b #$C0
	BEQ.b CODE_28C52E
	JSL.l CODE_27A43A
	TXA
	BEQ.b CODE_28C52E
	DEX
CODE_28C545:
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	CMP.b #$02
	BEQ.b CODE_28C550
	CMP.b #$03
	BNE.b CODE_28C5BE
CODE_28C550:
	LDY.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	LDA.w DATA_21AE78,y
	AND.b #$10
	BEQ.b CODE_28C5BE
	LDA.w !RAM_SMB3_Level_NorSpr_YOffscreenFlag,x
	BNE.b CODE_28C5BE
	LDA.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,x
	AND.b #$C0
	CMP.b #$C0
	BEQ.b CODE_28C5BE
	JSL.l CODE_27A414
	JSL.l CODE_27A460
	BCC.b CODE_28C5BE
	LDY.b $9B
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	SEC
	SBC.w !RAM_SMB3_Level_NorSpr_XPosLo,y
	PHA
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	SBC.w !RAM_SMB3_Level_NorSpr_XPosHi,y
	STA.b $00
	ROL.b $01
	PLA
	ADC.b #$80
	LDA.b $00
	ADC.b #$00
	BNE.b CODE_28C5BE
	LSR.b $01
	LDY.b #$00
	BCS.b CODE_28C595
	LDY.b #$40
CODE_28C595:
	TYA
	STA.b $00
	LDY.b $9B
	LDA.w $0068,y
	BNE.b CODE_28C5A4
	LDA.b $00
	STA.w $0679,y
CODE_28C5A4:
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	CMP.b #$02
	BNE.b CODE_28C5BE
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_NorSpr03F_DryBones
	BNE.b CODE_28C5B7
	LDA.w !RAM_SMB3_NorSpr03F_DryBones_CollapsedAnimationFrame,x
	BNE.b CODE_28C5BE
CODE_28C5B7:
	LDA.b $00
	EOR.b #$40
	STA.w $0679,x
CODE_28C5BE:
	DEX
	BPL.b CODE_28C545
	LDX.b $9B
	RTS

;--------------------------------------------------------------------

CODE_28C5C4:
	LDY.b $25
	LDA.b !RAM_SMB3_Level_Player_XPosLo
	CLC
	ADC.w DATA_21BF39,y
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	LDA.b !RAM_SMB3_Level_Player_XPosHi
	ADC.w DATA_21BF3B,y
	STA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	TYA
	STA.b $68,x
SMB3_NorSpr02D_BossBass_Status01:
.Main:
SMB3_NorSpr03B_FollowingCheepCheep_Status01:
.Main:
	LDA.w $0543
	CLC
	ADC.b #$A0
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	LDA.w $0542
	ADC.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	LDA.b #$F8
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	LDA.b #$FF
	STA.w $0669,x
	RTL

;--------------------------------------------------------------------

	%ROUTINE_SMB3_NorSpr02D_BossBass_Status02(NULLROM)			; $28C5F1
	%ROUTINE_SMB3_NorSpr03B_FollowingCheepCheep_Status02(NULLROM)		; $28C7FA

;--------------------------------------------------------------------

CODE_28C8C5:
	JSL.l CODE_27A313
	BCC.b CODE_28C90E
	LDA.b !RAM_SMB3_Level_Player_OnScreenYPos
	CLC
	ADC.b #$18
	CMP.b !RAM_SMB3_Level_NorSpr_OnScreenYPos,x
	BCS.b CODE_28C8DE
	LDA.b !RAM_SMB3_Level_Player_YSpeed
	BMI.b CODE_28C8DD
	JSL.l CODE_28B8C0
	SEC
CODE_28C8DD:
	RTS

CODE_28C8DE:
	LDA.b #$F8
	LDY.b !RAM_SMB3_Level_Player_CurrentPowerUp
	BEQ.b CODE_28C8E9
	LDY.w $056F
	BEQ.b CODE_28C8EB
CODE_28C8E9:
	LDA.b #$08
CODE_28C8EB:
	CLC
	ADC.b !RAM_SMB3_Level_Player_OnScreenYPos
	CMP.b !RAM_SMB3_Level_NorSpr_OnScreenYPos,x
	BCC.b CODE_28C8FC
	LDA.b !RAM_SMB3_Level_Player_YSpeed
	BPL.b CODE_28C8FA
	LDA.b #$10
	STA.b !RAM_SMB3_Level_Player_YSpeed
CODE_28C8FA:
	CLC
	RTS

CODE_28C8FC:
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	BEQ.b CODE_28C914
	LDA.b !RAM_SMB3_Level_Player_XPosLo
	SEC
	SBC.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	EOR.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	CLC
	BMI.b CODE_28C90F
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	STA.b !RAM_SMB3_Level_Player_XSpeed
CODE_28C90E:
	RTS

CODE_28C90F:
	LDA.b #$00
	STA.b !RAM_SMB3_Level_Player_XSpeed
	RTS

CODE_28C914:
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	INY
	LDA.b !RAM_SMB3_Global_ControllerHold1
	AND.b #(!Joypad_DPadL>>8)|(!Joypad_DPadR>>8)
	STA.b $00
	CPY.b $00
	CLC
	BNE.b CODE_28C90F
	PHX
	TYX
	LDA.l DATA_28C92E-$01,x
	STA.b !RAM_SMB3_Level_Player_XSpeed
	PLX
	RTS

DATA_28C92E:
	db $04,$FC

;--------------------------------------------------------------------

	%ROUTINE_SMB3_NorSpr041_EndOfLevelCard_Status02(NULLROM)		; $28C930

;--------------------------------------------------------------------

CODE_28CCEF:
	LDY.w !RAM_SMB3_Level_Player_CurrentCharacter
	BEQ.b CODE_28CCF6
	LDY.b #$23
CODE_28CCF6:
	RTS

;--------------------------------------------------------------------

CODE_28CCF7:
	LDA.w DATA_21BF6E+$01,y
	STA.b $00
	LDX.w DATA_21BF6E,y
	LDY.w !RAM_SMB3_Global_StripeImageUploadIndexLo
CODE_28CD02:
	LDA.w DATA_21BF71,x
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,y
	INY
	INX
	CPX.b $00
	BCC.b CODE_28CD02
	DEY
	STY.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	JMP.w CODE_28CD3B

;--------------------------------------------------------------------

CODE_28CD15:
	JSR.w CODE_28CD3E
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$10
	ORA.w $0520,x
	BNE.b CODE_28CD37
	LDA.b #$00
	STA.w SMB3_IndividualPlayerData[$00].CardSlots,y
	TYA
	PHA
	JSL.l CODE_20F5A7
	PLA
	TAY
	LDX.b $9B
	LDA.w $0669,x
	STA.w SMB3_IndividualPlayerData[$00].CardSlots,y
	RTS

CODE_28CD37:
	JSL.l CODE_20F5A7
CODE_28CD3B:
	LDX.b $9B
	RTS

CODE_28CD3E:
	JSR.w CODE_28CCEF
	INY
	INY
CODE_28CD43:
	LDA.w SMB3_IndividualPlayerData[$00].CardSlots,y
	BNE.b CODE_28CD4B
	DEY
	BPL.b CODE_28CD43
CODE_28CD4B:
	STA.w $0669,x
	RTS

;--------------------------------------------------------------------

CODE_28CD4F:
	REP.b #$10
	LDY.b $C4
	LDA.b #$0B
	STA.b $00
CODE_28CD57:
	LDA.w SMB3_OAMBuffer[$00].XDisp,y
	CMP.b #$40
	BCS.b CODE_28CD63
	LDA.b #$F0
	STA.w SMB3_OAMBuffer[$00].YDisp,y
CODE_28CD63:
	INY
	INY
	INY
	INY
	DEC.b $00
	BPL.b CODE_28CD57
	SEP.b #$10
	RTS

;--------------------------------------------------------------------

CODE_28CD6E:
	STZ.w !RAM_SMB3_Level_Player_StarPowerTimer
	STZ.w !RAM_SMB3_Level_ConsecutiveEnemiesStompedCounter
	STZ.w !RAM_SMB3_Level_PSwitchTimer
	STZ.w $05FC
	STZ.b !RAM_SMB3_Level_Player_YSpeed
	STZ.w !RAM_SMB3_Level_FireSpr_CurrentState
	STZ.w !RAM_SMB3_Level_FireSpr_CurrentState+$01
	JSL.l CODE_23C463
	LDY.b #$09
	LDA.b #!Define_SMB3_SpriteID_ExtSpr00_NoSprite
CODE_28CD8A:
	STA.w !RAM_SMB3_Level_ExtSpr_SpriteID,y
	DEY
	BPL.b CODE_28CD8A
	LDX.b #$04
CODE_28CD92:
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	BEQ.b CODE_28CDE5
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_NorSpr007_SecretToadHouseWarp
	BEQ.b CODE_28CDE0
	LDY.b #$00
	JSL.l SMB3_CheckIfSpriteIsHorizontallyOffScreen_Entry2
	LDY.b #$00
	JSL.l SMB3_CheckIfSpriteIsVerticallyOffScreen_Entry2
	JSL.l SMB3_CheckIfNormalSpriteOffScreen_Main
	BNE.b CODE_28CDE0
	LDA.b #!Define_SMAS_Sound0063_Coin
	STA.w !RAM_SMB3_Global_SoundCh3
	LDA.b #!Define_SMB3_SpriteID_ExtSpr11_SpinningCoin
	STA.w !RAM_SMB3_Level_ExtSpr_SpriteID,x
	LDA.b $5F,x
	STA.w !RAM_SMB3_Level_ExtSpr_XPosLo,x
	LDA.b $44,x
	STA.b !RAM_SMB3_Level_ExtSpr_XPosHi,x
	LDA.b $71,x
	STA.w !RAM_SMB3_Level_ExtSpr_YPosLo,x
	LDA.b $56,x
	STA.w !RAM_SMB3_Level_ExtSpr_YPosHi,x
	LDA.b #$D8
	STA.w !RAM_SMB3_Level_ExtSpr_YSpeed,x
	LDA.b #$00
	STA.w !RAM_SMB3_Level_ExtSpr_XSpeed,x
	LDA.b #$1F
	STA.w $0518,x
	LDA.b #$08
	BNE.b CODE_28CDE2						; Note: This will always branch.

CODE_28CDE0:
	LDA.b #$00
CODE_28CDE2:
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
CODE_28CDE5:
	DEX
	BPL.b CODE_28CD92
	LDX.b $9B
	LDA.b #$81
	STA.w !RAM_SMB3_Level_FreezeTimeLimitFlag
	STA.l $7E3973
	LDA.b #$FF
	STA.b $8C,x
	LDA.b #$D8
	STA.b $9E,x
	LDY.w $0669,x
	LDA.w DATA_21BFF1,y
	STA.w $0689,x
	LDA.w DATA_21BFF4,y
	STA.w $0669,x
	INY
	TYA
	JSL.l CODE_20F60D
	LDX.b $9B
	LDA.b #$04
	STA.b $A7,x
	LDA.w $02D1
	BNE.b CODE_28CE26
	DEC.w $02D1
	LDA.b #$FF
	STA.w $021A
	STZ.w $021B
CODE_28CE26:
	LDA.b #!Define_SMB3_LevelMusic_PassedLevel
	STA.w !RAM_SMB3_Global_MusicCh1
	LDA.b #!Define_SMAS_Sound0060_MidwayPoint
	STA.w !RAM_SMB3_Global_SoundCh1
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$8C
else
	LDA.b #$A8
endif
	STA.w $02E3
	LDA.b #$00
	STA.w $02E4
	JSR.w CODE_28CCEF
	LDA.w SMB3_IndividualPlayerData[$00].CardSlots+$02,y
	BEQ.b CODE_28CE70
	PHA
	LDA.b #!Define_SMB3_LevelMusic_Victory
	STA.w !RAM_SMB3_Global_MusicCh1
	PLA
	CMP.w SMB3_IndividualPlayerData[$00].CardSlots,y
	BNE.b CODE_28CE70
	CMP.w SMB3_IndividualPlayerData[$00].CardSlots+$01,y
	BNE.b CODE_28CE70
	STA.b $68,x
	LDA.b #$01
	STA.b $A7,x
	LSR.w !RAM_SMB3_Level_FreezeTimeLimitFlag
	LDA.b #!Define_SMB3_LevelMusic_PassedBoss
	STA.w !RAM_SMB3_Global_MusicCh1
	LDA.b #!Define_SMAS_Sound0060_LouderFireworksBang
	STA.w !RAM_SMB3_Global_SoundCh1
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$B0
else
	LDA.b #$E0
endif
	STA.w $02E3
	LDA.b #$00
	STA.w $02E4
CODE_28CE70:
	RTL

;--------------------------------------------------------------------

CODE_28CE71:
	LDA.w $0669,x
	JSL.l CODE_279DF9
	JSL.l CODE_279F91
	LDX.b $9B
	LDA.w $0669,x
	CMP.b #$0F
	BCS.b CODE_28CEA7
	TAY
	REP.b #$30
	LDA.b $C6,x
	TAX
	SEP.b #$20
	LDA.w SMB3_OAMBuffer[$00].Prop,x
	AND.b #$B9
	ORA.w DATA_21BF57,y
	STA.w SMB3_OAMBuffer[$00].Prop,x
	STA.w SMB3_OAMBuffer[$02].Prop,x
	EOR.b #$40
	STA.w SMB3_OAMBuffer[$01].Prop,x
	STA.w SMB3_OAMBuffer[$03].Prop,x
	SEP.b #$10
	LDX.b $9B
CODE_28CEA7:
	RTL

;--------------------------------------------------------------------

CODE_28CEA8:
	JSL.l CODE_27A4C7
	RTL

;--------------------------------------------------------------------

DATA_28CEAD:
	dw $0000,$0009,$000E,$0013
	dw $0019,$005F,$01BF,$02BF
	dw $039F,$7FF6,$7FF6,$5BFF
	dw $033F,$025F,$009F,$0017

DATA_28CECD:
	db $00,$08,$10,$18

CODE_28CED1:
	PHX
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	BEQ.b CODE_28CED9
	LDX.b #SMB3_IndividualPlayerData[$01].ReserveSlots-SMB3_IndividualPlayerData[$00].ReserveSlots
CODE_28CED9:
	LDA.w SMB3_IndividualPlayerData[$00].CardSlots,x
	CMP.w SMB3_IndividualPlayerData[$00].CardSlots+$01,x
	BNE.b CODE_28CF06
	CMP.w SMB3_IndividualPlayerData[$00].CardSlots+$02,x
	BNE.b CODE_28CF06
	LDA.b !RAM_SMB3_Global_FrameCounter
	BIT.b #$01
	BEQ.b CODE_28CF06
	LDX.w $0245
	AND.b #$07
	DEC
	CLC
	ADC.l DATA_28CECD-$01,x
	TAX
	REP.b #$20
	LDA.l DATA_28CEAD,x
	STA.w SMB3_PaletteMirror[$36].LowByte
	SEP.b #$20
	INC.w !RAM_SMB3_Global_UpdateEntirePaletteFlag
CODE_28CF06:
	PLX
	RTS

;--------------------------------------------------------------------

if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	%FREE_BYTES(NULLROM, 239, $FF)
else
	%FREE_BYTES(NULLROM, 248, $FF)
endif
	%ROUTINE_SMB3_NorSpr05C_ThrowBlock_Status02(NULLROM)			; $28D000
	%ROUTINE_SMB3_NorSpr052_MiniChest_Status01(NULLROM)			; $28D011
	%ROUTINE_SMB3_NorSpr052_MiniChest_Status02(NULLROM)			; $28D01D
	%ROUTINE_SMB3_NorSpr053_UpsideDownPodoboo_Status01(NULLROM)		; $28D0D6
	%ROUTINE_SMB3_NorSpr053_UpsideDownPodoboo_Status02(NULLROM)		; $28D0DF

;--------------------------------------------------------------------

CODE_28D145:
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	CMP.b #$02
	RTS

;--------------------------------------------------------------------

	%ROUTINE_SMB3_NorSpr06B_JumpingFakeBrick_Status02(NULLROM)	; $28D14B

;--------------------------------------------------------------------

CODE_28D2AA:
	LDA.b #$04
CODE_28D2AC:
	STA.b $0F
	LDA.b #!Define_SMAS_Sound0063_BreakBlock
	STA.w !RAM_SMB3_Global_SoundCh3
	LDA.b #$00
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
CODE_28D2B8:
	JSR.w CODE_28D2C0
	DEC.b $0F
	BPL.b CODE_28D2B8
	RTS

CODE_28D2C0:
	LDY.b #$09
	JSL.l SMB3_FindFreeExtendedSpriteSlot_VariablePriority
	BMI.b CODE_28D322
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	STA.b $00
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	STA.b $02
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	STA.b $01
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	STA.b $D8
	LDX.b $0F
	LDA.b $00
	CLC
	ADC.w DATA_21C0C1,x
	STA.w !RAM_SMB3_Level_ExtSpr_YPosLo,y
	LDA.b $02
	ADC.w DATA_21C0C6,x
	STA.w !RAM_SMB3_Level_ExtSpr_YPosHi,y
	LDA.b $01
	STA.w !RAM_SMB3_Level_ExtSpr_XPosLo,y
	LDA.b $D8
	STA.w !RAM_SMB3_Level_ExtSpr_XPosHi,y
	LDA.w DATA_21C0D0,x
	STA.w !RAM_SMB3_Level_ExtSpr_YSpeed,y
	LDA.w DATA_21C0D5,x
	STA.w !RAM_SMB3_Level_ExtSpr_XSpeed,y
	LDA.b #!Define_SMB3_SpriteID_ExtSpr13_BrickPiece
	CPX.b #$04
	BNE.b CODE_28D309
	LDA.b #!Define_SMB3_SpriteID_ExtSpr06_MicroGoomba
CODE_28D309:
	STA.w !RAM_SMB3_Level_ExtSpr_SpriteID,y
	LDA.b #$FF
	STA.w $06C7,y
	STA.w $06D1,y
	LDX.b $9B
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_NorSpr05C_ThrowBlock
	BEQ.b CODE_28D322
	LDA.b #$00
	STA.w $06D1,y
CODE_28D322:
	RTS

;--------------------------------------------------------------------

SMB3_NorSpr068_UpsideDownBuzzyBeetle_Status01:
.Main:
SMB3_NorSpr069_UpsideDownSpiny_Status01:
.Main:
;$28D323
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.w DATA_21C0DA,y
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	LDA.b #$80
	STA.w $0679,x
	DEC.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	LDY.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	INY
	BNE.b CODE_28D33A
	DEC.b !RAM_SMB3_Level_NorSpr_YPosHi,x
CODE_28D33A:
	RTL

;--------------------------------------------------------------------

SMB3_NorSpr068_UpsideDownBuzzyBeetle_Status02:
.Main:
SMB3_NorSpr069_UpsideDownSpiny_Status02:
.Main:
;$28D33B
	JSL.l CODE_279BC4
	JSR.w CODE_28D3C7
	LDA.b $9C
	BNE.b CODE_28D3BC
	JSL.l CODE_279B6C
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_NorSpr070_BuzzyBeetle
	BNE.b CODE_28D356
	JSL.l CODE_279B78
	RTL

CODE_28D356:
	LDY.b #$00
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$08
	BEQ.b CODE_28D35F
	INY
CODE_28D35F:
	TYA
	STA.w $0669,x
	JSL.l CODE_27A7F0
	LDA.b #$FF
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	JSL.l CODE_278B93
	LDA.b $A7,x
	AND.b #$08
	BNE.b CODE_28D389
	INC.w $1021,x
	LDA.w $1021,x
	CMP.b #$02
	BCS.b CODE_28D39B
	JSL.l CODE_279906
	JSL.l CODE_27A7F0
	BRA.b CODE_28D38E

CODE_28D389:
	LDA.b #$00
	STA.w $1021,x
CODE_28D38E:
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.b $0F
	CLC
	ADC.b #$30
	CMP.b #$60
	BCS.b CODE_28D3BC
CODE_28D39B:
	LDA.b #$05
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	PHX
	REP.b #$30
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	AND.w #$00FF
	STA.b $D8
	ASL
	CLC
	ADC.b $D8
	TAX
	LDA.l DATA_288438,x
	SEP.b #$30
	PLX
	STA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	STZ.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_28D3BC:
	LDA.b $A7,x
	AND.b #$03
	BEQ.b CODE_28D3C6
	JSL.l CODE_279906
CODE_28D3C6:
	RTL

CODE_28D3C7:
	JSR.w CODE_28E6F7
	LDA.w $0669,x
	CMP.b #$02
	BCC.b CODE_28D3D9
	LDA.w $0679,x
	AND.b #$BF
	STA.w $0679,x
CODE_28D3D9:
	JSL.l CODE_279EBC
	RTS

;--------------------------------------------------------------------

	%ROUTINE_SMB3_NorSpr054_DonutBlock_Status02(NULLROM)		; $28D3DE

;--------------------------------------------------------------------

SMB3_NorSpr055_WindupBobOmb_Status01:
.Main:
;$28D46E
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.w DATA_21C0E6,y
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	RTL

;--------------------------------------------------------------------

SMB3_NorSpr050_BobOmb_Status01:
.Main:
;$28D478
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.w DATA_21C0E8,y
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	INC.w $1021,x
	RTL

;--------------------------------------------------------------------

CODE_28D485:
	JSR.w CODE_28D53B
	RTL

;--------------------------------------------------------------------

SMB3_NorSpr050_BobOmb_Status02:
.Main:
SMB3_NorSpr055_WindupBobOmb_Status02:
.Main:
;$28D489
	JSL.l CODE_279BC4
	LDA.b $68,x
	CMP.b #$02
	BEQ.b CODE_28D49E
	JSL.l CODE_279EBC
	LDA.b $9C
	BNE.b CODE_28D4A1
	JSR.w CODE_28E6F7
CODE_28D49E:
	JSR.w CODE_28D4A2
CODE_28D4A1:
	RTL

CODE_28D4A2:
	LDA.b $68,x
	JSL.l SMB3_ExecutePtr_Absolute

DATA_28D4A8:
	dw CODE_28D4AE
	dw CODE_28D529
	dw CODE_28D5D4

CODE_28D4AE:
	JSL.l SMB3_HandleNormalSpriteGravity_Main
	LDA.w $1021,x
	BEQ.b CODE_28D4C5
	LDA.w $06A6,x
	ORA.b $68,x
	BNE.b CODE_28D4C5
	INC.b $68,x
	LDA.b #$60
	STA.w $0518,x
CODE_28D4C5:
	LDA.b $A7,x
	AND.b #$04
	BEQ.b CODE_28D4F8
	LDA.b #$E0
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	LDY.b #$00
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$08
	BEQ.b CODE_28D4D8
	INY
CODE_28D4D8:
	TYA
	STA.w $0669,x
	JSL.l CODE_278B67
	LDA.w $1021,x
	BEQ.b CODE_28D4F8
	INC.w $1FD2,x
	LDA.w $1FD2,x
	AND.b #$3F
	BNE.b CODE_28D4F8
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.w DATA_21C0E8,y
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_28D4F8:
	LDA.b $A7,x
	AND.b #$03
	BEQ.b CODE_28D502
	JSL.l CODE_279906
CODE_28D502:
	JSL.l CODE_279B6C
	BCC.b CODE_28D528
	LDA.w $0797,x
	BEQ.b CODE_28D528
	LDA.w !RAM_SMB3_Level_Player_InKuriboShoeFlag
	BEQ.b CODE_28D515
	JMP.w CODE_28D5B7

CODE_28D515:
	INC.b $68,x
	LDA.b #$FF
	STA.w $0518,x
	LDA.b #$08
	STA.w $0520,x
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$C0
else
	LDA.b #$D0
endif
	STA.b !RAM_SMB3_Level_Player_YSpeed
	JMP.w CODE_28D5C4

CODE_28D528:
	RTS

CODE_28D529:
	LDY.b #$02
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$08
	BEQ.b CODE_28D532
	INY
CODE_28D532:
	TYA
	STA.w $0669,x
	LDA.w $0518,x
	BNE.b CODE_28D557
CODE_28D53B:
	LDA.b #$00
	STA.w $1FD2,x
	LDA.b #$02
	STA.b $68,x
	LDA.b #$28
	STA.w $0518,x
	LDA.b #!Define_SMAS_Sound0063_CannonShoot
	STA.w !RAM_SMB3_Global_SoundCh3
	INC.w $1A49,x
CODE_28D551:
	LDA.b #$20
	STA.w !RAM_SMB3_Level_ScreenFlashTimer
	RTS

CODE_28D557:
	CMP.b #$40
	BCS.b CODE_28D55E
	STA.w $0769,x
CODE_28D55E:
	JSL.l SMB3_HandleNormalSpriteGravity_Main
	LDA.b $A7,x
	AND.b #$04
	BEQ.b CODE_28D590
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	PHP
	BPL.b CODE_28D571
	JSL.l SMB3_UnnecessaryInvertARt_Main
CODE_28D571:
	LSR
	PLP
	BPL.b CODE_28D579
	JSL.l SMB3_UnnecessaryInvertARt_Main
CODE_28D579:
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	PHA
	JSL.l CODE_278B67
	PLA
	BMI.b CODE_28D590
	LSR
	JSL.l SMB3_UnnecessaryInvertARt_Main
	CMP.b #$FC
	BCS.b CODE_28D590
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_28D590:
	LDA.b $A7,x
	AND.b #$03
	BEQ.b CODE_28D5A1
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	JSL.l SMB3_UnnecessaryInvertARt_Main
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	ASL
	ROR.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_28D5A1:
	JSL.l CODE_27A313
	BCC.b CODE_28D5B6
	LDA.w $0520,x
	BNE.b CODE_28D5B6
	LDA.w !RAM_SMB3_Level_Player_InKuriboShoeFlag
	BNE.b CODE_28D5B7
	LDA.b #$04
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
CODE_28D5B6:
	RTS

CODE_28D5B7:
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$C0
else
	LDA.b #$D0
endif
	STA.b !RAM_SMB3_Level_Player_YSpeed
	LDA.b #$06
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	LDA.b #$F0
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_28D5C4:
	LDA.w !RAM_SMB3_Level_ConsecutiveEnemiesStompedCounter
	INC.w !RAM_SMB3_Level_ConsecutiveEnemiesStompedCounter
	JSL.l CODE_278A8A
	LDA.b #!Define_SMAS_Sound0060_KickShell
	STA.w !RAM_SMB3_Global_SoundCh1
	RTS

CODE_28D5D4:
	LDA.b $9C
	BNE.b CODE_28D5DA
	INC.b $4D,x
CODE_28D5DA:
	LDA.w $0518,x
	BNE.b CODE_28D5E4
	LDA.b #$00
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
CODE_28D5E4:
	JSL.l SMB3_GetNormalSpriteOnScreenPosition_Main
	LDA.b #$05
	STA.b $0F
CODE_28D5EC:
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenYPos,x
	STA.b $00
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenXPos,x
	CLC
	ADC.b #$04
	STA.b $01
	LDA.b $4D,x
	LSR
	PHA
	AND.b #$03
	STA.b $02
	LDX.b $0F
	PLA
	AND.b #$04
	BEQ.b CODE_28D60B
	TXA
	CLC
	ADC.b #$06
	TAX
CODE_28D60B:
	LDA.b $00
	CLC
	ADC.w DATA_21C0FE,x
	STA.b $00
	LDA.b $01
	CLC
	ADC.w DATA_21C0F2,x
	STA.b $01
	DEC.b $02
	BPL.b CODE_28D60B
	LDX.b $9B
	JSR.w CODE_28E708
	BCS.b CODE_28D684
	LDA.b $0F
	PHA
	REP.b #$30
	ASL.b $0F
	ASL.b $0F
	ASL.b $0F
	LDA.b $0F
	AND.w #$00FF
	CLC
	ADC.b $C6,x
	TAY
	SEP.b #$20
	LDA.b $00
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$01].YDisp,y
	LDA.b $01
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	LDA.b #$7E
	STA.w SMB3_OAMBuffer[$00].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$01].Tile,y
	LDA.b !RAM_SMB3_Global_FrameCounter
	LSR
	LSR
	CLC
	ADC.b $9B
	AND.b #$03
	ASL
	ORA.b #$20
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$01].Prop,y
	PHY
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b #$00
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	PLY
	SEP.b #$10
	PLA
	STA.b $0F
	JSR.w CODE_28EC58
CODE_28D684:
	DEC.b $0F
	BMI.b CODE_28D68B
	BRL.w CODE_28D5EC

CODE_28D68B:
	JSL.l SMB3_CheckIfNormalSpriteOffScreen_Main
	BNE.b CODE_28D6BC
	JSR.w CODE_28D6BD
	LDA.b #$00
	STA.b $0C
	JSL.l CODE_27A75A
	BCC.b CODE_28D6BC
	LDA.b #!Define_SMAS_Sound0060_KickShell
	STA.w !RAM_SMB3_Global_SoundCh1
	LDA.b #$06
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,y
	LDA.b #$D0
	STA.w !RAM_SMB3_Level_NorSpr_YSpeed,y
	LDA.b #$00
	STA.w !RAM_SMB3_Level_NorSpr_XSpeed,y
	LDA.w $1FD2,x
	INC.w $1FD2,x
	JSL.l CODE_278A86
CODE_28D6BC:
	RTS

CODE_28D6BD:
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenXPos,x
	SEC
	SBC.b #$18
	STA.b $02
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenYPos,x
	SEC
	SBC.b #$18
	STA.b $06
	LDA.b #$40
	STA.b $03
	STA.b $07
	RTS

;--------------------------------------------------------------------

	%ROUTINE_SMB3_NorSpr04A_GoalSphere_Status02(NULLROM)			; $28D6D2
	%ROUTINE_SMB3_NorSpr049_BGCloud_Status02(NULLROM)			; $28D75F
	%ROUTINE_SMB3_NorSprXXX_BoomBoom_Status01(NULLROM)			; $28D805
	%ROUTINE_SMB3_NorSprXXX_BoomBoom_Status02(NULLROM)			; $28D81B
	%ROUTINE_SMB3_NorSpr0XX_SidewaysPiranhaPlant_Status01(NULLROM)		; $28DD40
	%ROUTINE_SMB3_NorSpr0XX_SidewaysPiranhaPlant_Status02(NULLROM)		; $28DD56
	%ROUTINE_SMB3_NorSpr067_LavaLotus_Status02(NULLROM)			; $28DE46
	%ROUTINE_SMB3_NorSpr067_LavaLotus_Status01(NULLROM)			; $28DF84
	%ROUTINE_SMB3_NorSpr0XX_AirCurrent_Status02(NULLROM)			; $28DF90
	%ROUTINE_SMB3_NorSpr063_BigBertha_Status01(NULLROM)			; $28E059
	%ROUTINE_SMB3_NorSpr063_BigBertha_Status02(NULLROM)			; $28E067
	%ROUTINE_SMB3_NorSpr048_MiniBossBass_Status02(NULLROM)			; $28E288
	%ROUTINE_SMB3_NorSpr064_WaterHoppingRedCheepCheep_Status01(NULLROM)	; $28E31C
	%ROUTINE_SMB3_NorSpr064_WaterHoppingRedCheepCheep_Status02(NULLROM)	; $28E326
	%ROUTINE_SMB3_NorSpr05D_Whirlwind_Status01(NULLROM)			; $28E35F
	%ROUTINE_SMB3_NorSpr05D_Whirlwind_Status02(NULLROM)			; $28E36D
	%ROUTINE_SMB3_NorSprXXX_Blooper_Status01(NULLROM)			; $28E599
	%ROUTINE_SMB3_NorSprXXX_Blooper_Status02(NULLROM)			; $28E5A2

;--------------------------------------------------------------------

CODE_28E6F7:
	LDA.w $0679,x
	AND.b #$BF
	LDY.b $8C,x
	BEQ.b CODE_28E707
	BMI.b CODE_28E704
	ORA.b #$40
CODE_28E704:
	STA.w $0679,x
CODE_28E707:
	RTS

;--------------------------------------------------------------------

; Note: Routine that checks if a sprite is offscreen horizontally?

CODE_28E708:
	LDA.w !RAM_SMB3_Level_NorSpr_YOffscreenFlag,x
	BNE.b CODE_28E73A
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenYPos,x
	CMP.b #$D0
	BCS.b CODE_28E73A
CODE_28E713:
	STZ.b $DB
	LDA.b $01
	SEC
	SBC.b !RAM_SMB3_Level_NorSpr_OnScreenXPos,x
	STA.b $DA
	BPL.b CODE_28E720
	DEC.b $DB
CODE_28E720:
	LDA.b $5F,x
	STA.b $DC
	LDA.b $44,x
	STA.b $DD
	REP.b #$20
	LDA.b $DC
	CLC
	ADC.b $DA
	SEC
	SBC.w $0210
	STA.b $DC
	CMP.w #$0100
	BCC.b CODE_28E73E
CODE_28E73A:
	SEP.b #$20
	SEC
	RTS

CODE_28E73E:
	SEP.b #$20
	CLC
	RTS

;--------------------------------------------------------------------

	%ROUTINE_SMB3_NorSpr04F_FreeChainChomp_Status02(NULLROM)		; $28E742

;--------------------------------------------------------------------

SMB3_NorSpr059_FireSnake_Status01:
.Main:
;$28E7B7
	JSR.w CODE_28E7CE
	LDA.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	BEQ.b CODE_28E7C8					; Note: This will always branch.

SMB3_NorSpr058_FireChomp_Status01:
.Main:
	JSR.w CODE_28E7CE
	LDA.w !RAM_SMB3_Global_RandomByte02,x
	STA.b $68,x
CODE_28E7C8:
	LDA.b #$04
	STA.w $1021,x
	RTL

CODE_28E7CE:
	LDY.b #$01
CODE_28E7D0:
	LDA.w $06B4,y
	BEQ.b CODE_28E7DD
	DEY
	BPL.b CODE_28E7D0
	JSL.l CODE_279BD4
	RTS

CODE_28E7DD:
	LDA.b #$01
	STA.w $06B4,y
	JSL.l SMB3_GetNormalSpriteOnScreenPosition_Main
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	XBA
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	REP.b #$20
	SEC
	SBC.w $0216
	SEP.b #$20
	XBA
	STA.b $D8
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenYPos,x
	STA.b $00
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenXPos,x
	STA.b $01
	TYA
	STA.w $0771,x
	LSR
	ROR
	LSR
	LSR
	TAX
	LDY.b #$1F
CODE_28E809:
	LDA.b $00
	STA.w $1C60,x
	LDA.b $D8
	STA.l $7F8000,x
	LDA.b $01
	STA.w $1C20,x
	INX
	DEY
	BPL.b CODE_28E809
	LDX.b $9B
	RTS

;--------------------------------------------------------------------

SMB3_NorSpr058_FireChomp_Status02:
.Main:
;$28E820
	JSR.w CODE_28ED19
	LDA.b $9C
	BEQ.b CODE_28E82A
	JMP.w SMB3_NorSpr059_FireSnake_Status02_CODE_28ECBA

CODE_28E82A:
	LDA.b #$00
	STA.w !RAM_SMB3_NorSpr058_FireChomp_AnimationFrame,x
	LDA.w !RAM_SMB3_NorSpr058_FireChomp_PrepareToSpitFireballTimer,x
	BEQ.b CODE_28E85F
	CMP.b #$10
	BNE.b CODE_28E848
	DEC.w !RAM_SMB3_NorSpr058_FireChomp_NumberOfTrailingFireballs,x
	BNE.b CODE_28E845
	LSR.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	ASL.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	LDA.b #$FF
	STA.b !RAM_SMB3_NorSpr058_FireChomp_WaitBeforeExplosionTimer,x
CODE_28E845:
	JSR.w CODE_28EB97
CODE_28E848:
	INC.w !RAM_SMB3_NorSpr058_FireChomp_AnimationFrame,x
	LDA.w !RAM_SMB3_NorSpr058_FireChomp_PrepareToSpitFireballTimer,x
	SEC
	SBC.b #$08
	CMP.b #$10
	BCS.b CODE_28E858
	INC.w !RAM_SMB3_NorSpr058_FireChomp_AnimationFrame,x
CODE_28E858:
	JSR.w CODE_28E8F3
	JSR.w CODE_28E999
	RTL

CODE_28E85F:
	JSR.w CODE_28E86A
CODE_28E862:
	JSL.l CODE_279BC4
	JSR.w CODE_28E91B
	RTL

CODE_28E86A:
	LDA.b !RAM_SMB3_NorSpr058_FireChomp_WaitBeforeExplosionTimer,x
	BEQ.b CODE_28E883
	DEC.b !RAM_SMB3_NorSpr058_FireChomp_WaitBeforeExplosionTimer,x
	CMP.b #$40
	BCS.b CODE_28E897
	STA.w $0769,x
	CMP.b #$01
	BNE.b CODE_28E897
	LDA.b #!Define_SMB3_SpriteID_NorSpr055_WindupBobOmb
	STA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	JMP.w CODE_28D53B

CODE_28E883:
	INC.w !RAM_SMB3_NorSpr058_FireChomp_MoveAroundTimer,x
	LDA.w !RAM_SMB3_NorSpr058_FireChomp_MoveAroundTimer,x
	AND.b #$7F
	BNE.b CODE_28E897
	LDA.w !RAM_SMB3_NorSpr058_FireChomp_NumberOfTrailingFireballs,x
	BEQ.b CODE_28E897
	LDA.b #$20
	STA.w !RAM_SMB3_NorSpr058_FireChomp_PrepareToSpitFireballTimer,x
CODE_28E897:
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.w DATA_21C315,y
	STA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	LDA.w !RAM_SMB3_NorSpr058_FireChomp_NumberOfTrailingFireballs,x
	BNE.b CODE_28E8A8
	INY
	INY
CODE_28E8A8:
	INC.w !RAM_SMB3_NorSpr058_FireChomp_MovementFrameCounter,x
	LDA.w !RAM_SMB3_NorSpr058_FireChomp_MovementFrameCounter,x
	LSR
	BCC.b CODE_28E8BE
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	CMP.w DATA_21C30D,y
	BEQ.b CODE_28E8BE
	CLC
	ADC.w DATA_21C311,y
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_28E8BE:
	JSL.l CODE_27A7F0
	LDA.b !RAM_SMB3_Level_Player_YPosLo
	PHA
	CLC
	ADC.b #$00
	STA.b !RAM_SMB3_Level_Player_YPosLo
	LDA.b !RAM_SMB3_Level_Player_YPosHi
	PHA
	ADC.b #$00
	STA.b !RAM_SMB3_Level_Player_YPosHi
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_Y
	PLA
	STA.b !RAM_SMB3_Level_Player_YPosHi
	PLA
	STA.b !RAM_SMB3_Level_Player_YPosLo
	LDA.w !RAM_SMB3_NorSpr058_FireChomp_MovementFrameCounter,x
	LSR
	BCC.b CODE_28E8EE
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	CMP.w DATA_21C317,y
	BEQ.b CODE_28E8EE
	CLC
	ADC.w DATA_21C319,y
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_28E8EE:
	JSL.l CODE_27A7E5
	RTS

CODE_28E8F3:
	LDA.w $0771,x
	LSR
	ROR
	LSR
	LSR
	CLC
	ADC.b #$1F
	TAY
	LDX.b #$1F
CODE_28E900:
	LDA.w $1C20,y
	SEC
	SBC.w $0781
	STA.w $1C20,y
	LDA.w $1C60,y
	SEC
	SBC.w $0780
	STA.w $1C60,y
	DEY
	DEX
	BPL.b CODE_28E900
	LDX.b $9B
	RTS

;--------------------------------------------------------------------

CODE_28E91B:
	JSL.l SMB3_CheckIfSpriteIsHorizontallyOffScreen_Main
	LDA.w $0771,x
	LSR
	ROR
	LSR
	LSR
	PHA
	TAY
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	SEC
	SBC.w $0210
	CLC
	ADC.w $0781
	STA.w $1C20,y
	STZ.b $DB
	LDA.w $0780
	STA.b $DA
	CMP.b #$80
	BCC.b CODE_28E942
	DEC.b $DB
CODE_28E942:
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	XBA
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	REP.b #$20
	SEC
	SBC.w $0216
	CLC
	ADC.b $DA
	SEP.b #$20
	STA.w $1C60,y
	PHX
	XBA
	TYX
	STA.l $7F8000,x
	PLX
	PLA
	CLC
	ADC.b #$1E
	TAY
	LDX.b #$1E
CODE_28E964:
	LDA.w $1C20,y
	SEC
	SBC.w $0781
	STA.w $1C21,y
	STZ.b $DB
	LDA.w $0780
	STA.b $DA
	CMP.b #$80
	BCC.b CODE_28E97B
	DEC.b $DB
CODE_28E97B:
	PHX
	TYX
	LDA.l $7F8000,x
	XBA
	LDA.w $1C60,y
	REP.b #$20
	SEC
	SBC.b $DA
	SEP.b #$20
	STA.w $1C61,y
	XBA
	STA.l $7F8001,x
	PLX
	DEY
	DEX
	BPL.b CODE_28E964
CODE_28E999:
	LDX.b $9B
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_NorSpr06A_LaunchingBlooperNanny
	BEQ.b CODE_28E9A6
	CMP.b #!Define_SMB3_SpriteID_NorSpr061_FollowingBlooperNanny
	BNE.b CODE_28E9AD
CODE_28E9A6:
	JSL.l CODE_279EDE
	JMP.w CODE_28E9B5

CODE_28E9AD:
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) == $0000 ;[BR]
	CMP.b #!Define_SMB3_SpriteID_NorSpr058_FireChomp			;\ Optimization: Useless CMP.b and branch.
	BNE.b CODE_28E9B1							;/
endif
CODE_28E9B1:
	JSL.l CODE_279EBC
CODE_28E9B5:
	REP.b #$20
	LDA.b $C6,x
	CLC
	ADC.w #$0010
	STA.b $D8
	SEP.b #$20
	LDA.w $0771,x
	LSR
	ROR
	LSR
	LSR
	CLC
	ADC.b #$07
	STA.b $03
	LDA.w $1021,x
	BNE.b CODE_28E9D5
	JMP.w CODE_28EB1A

CODE_28E9D5:
	STA.b $0F
CODE_28E9D7:
	REP.b #$30
	LDA.b $03
	AND.w #$00FF
	TAY
	SEP.b #$20
	LDA.w $1C60,y
	STA.b $00
	LDA.w $1C20,y
	CLC
	ADC.b #$04
	STA.b $01
	SEP.b #$10
	JSR.w CODE_28E713
	LDA.w $1C60,y
	STA.b $DA
	PHX
	TYX
	LDA.l $7F8000,x
	STA.b $DB
	PLX
	REP.b #$30
	LDA.b $DA
	CMP.w #$00F0
	BCC.b CODE_28EA0F
	SEP.b #$20
	BRL.w CODE_28EB00

CODE_28EA0F:
	SEP.b #$20
	LDY.b $D8
	PHY
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b $DD
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	PLY
	LDA.b $00
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$01].YDisp,y
	LDA.b $01
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_NorSpr05A_SingleClockwiseRotoDisc
	BCS.b CODE_28EAB3
	CMP.b #!Define_SMB3_SpriteID_NorSpr058_FireChomp
	BNE.b CODE_28EA8C
	REP.b #$20
	LDA.b $0F
	AND.w #$00FF
	ASL
	ADC.w $0565
	LSR
	LSR
	AND.w #$0003
	TAX
	SEP.b #$20
	LDA.w DATA_21C31B,x
	STA.w SMB3_OAMBuffer[$00].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$01].Tile,y
	LDA.w DATA_21C31F,x
	ORA.b #$20
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$01].Prop,y
	AND.b #$80
	BEQ.b CODE_28EA7F
	LDA.w SMB3_OAMBuffer[$00].Tile,y
	PHA
	LDA.w SMB3_OAMBuffer[$01].Tile,y
	STA.w SMB3_OAMBuffer[$00].Tile,y
	PLA
	STA.w SMB3_OAMBuffer[$01].Tile,y
CODE_28EA7F:
	REP.b #$20
	LDA.b $9B
	AND.w #$00FF
	TAX
	SEP.b #$20
	BRL.w CODE_28EAF3

CODE_28EA8C:
	CMP.b #!Define_SMB3_SpriteID_NorSpr04F_FreeChainChomp
	BEQ.b CODE_28EAA0
	LDA.b #$8A
	BCC.b CODE_28EA96
	LDA.b #$88
CODE_28EA96:
	STA.w SMB3_OAMBuffer[$00].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$01].Tile,y
	BRL.w CODE_28EAD4

CODE_28EAA0:
	LDA.b #$9A
	STA.w SMB3_OAMBuffer[$00].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$01].Tile,y
	LDA.b #$26
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$01].Prop,y
	BNE.b CODE_28EB00
CODE_28EAB3:
	LDA.b $0F
	ASL
	ADC.w $0565
	LDX.w #$00B4
	AND.b #$08
	BNE.b CODE_28EAC2
	INX
	INX
CODE_28EAC2:
	TXA
	STA.w SMB3_OAMBuffer[$00].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$01].Tile,y
	REP.b #$20
	LDA.b $9B
	AND.w #$00FF
	TAX
	SEP.b #$20
CODE_28EAD4:
	LDY.b $C6,x
	LDA.w SMB3_OAMBuffer[$00].Prop,y
	LDY.b $D8
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$01].Prop,y
	AND.b #$80
	BEQ.b CODE_28EAF3
	LDA.w SMB3_OAMBuffer[$00].Tile,y
	PHA
	LDA.w SMB3_OAMBuffer[$01].Tile,y
	STA.w SMB3_OAMBuffer[$00].Tile,y
	PLA
	STA.w SMB3_OAMBuffer[$01].Tile,y
CODE_28EAF3:
	LDA.b $DD
	AND.b #$01
	BNE.b CODE_28EB00
	SEP.b #$10
	JSR.w CODE_28EC4B
	REP.b #$10
CODE_28EB00:
	LDA.b $03
	CLC
	ADC.b #$08
	STA.b $03
	REP.b #$20
	LDA.b $D8
	CLC
	ADC.w #$0008
	STA.b $D8
	SEP.b #$20
	DEC.b $0F
	BEQ.b CODE_28EB1A
	JMP.w CODE_28E9D7

CODE_28EB1A:
	SEP.b #$10
	LDX.b $9B
	RTS

;--------------------------------------------------------------------

; Note: Roto disk speed routine.

CODE_28EB1F:
	LDA.b $4D,x
	BEQ.b CODE_28EB96
	JSL.l CODE_27A7F0
	JSL.l CODE_27A7E5
	LDA.b $4D,x
	CMP.b #$01
	BEQ.b CODE_28EB96
	LSR
	TAY
	INC.w $1FD2,x
	LDA.w $1FD2,x
	AND.w DATA_21C2FD,y
	BNE.b CODE_28EB96
	LDA.b $4D,x
	SEC
	SBC.b #$02
	ASL
	AND.b #$FC
	PHA
	CLC
	ADC.w $0776,x
	TAY
	LDA.b $4D,x
	AND.b #$01
	BEQ.b CODE_28EB53
	INY
CODE_28EB53:
	LDA.b $8C,x
	CMP.w DATA_21C301,y
	BNE.b CODE_28EB68
	PHA
	LDA.w $0776,x
	EOR.b #$01
	STA.w $0776,x
	TYA
	EOR.b #$01
	TAY
	PLA
CODE_28EB68:
	CLC
	ADC.w DATA_21C2F2,y
	STA.b $8C,x
	PLA
	CLC
	ADC.w $077B,x
	TAY
	LDA.b $4D,x
	AND.b #$01
	BEQ.b CODE_28EB7B
	INY
CODE_28EB7B:
	LDA.b $9E,x
	CMP.w DATA_21C301,y
	BNE.b CODE_28EB90
	PHA
	LDA.w $077B,x
	EOR.b #$01
	STA.w $077B,x
	TYA
	EOR.b #$01
	TAY
	PLA
CODE_28EB90:
	CLC
	ADC.w DATA_21C2F2,y
	STA.b $9E,x
CODE_28EB96:
	RTS

;--------------------------------------------------------------------

CODE_28EB97:
	JSL.l SMB3_FindFreeExtendedSpriteSlot_FixedPriority
	BCS.b CODE_28EB96
	LDA.b #!Define_SMB3_SpriteID_ExtSpr12_FireChompFire
	STA.w !RAM_SMB3_Level_ExtSpr_SpriteID,y
	LDA.b #!Define_SMAS_Sound0063_Podoboo
	STA.w !RAM_SMB3_Global_SoundCh3
	LDA.b #$14
	JSR.w CODE_28EBD0
	LDA.b $00
	STA.w !RAM_SMB3_Level_ExtSpr_YSpeed,y
	LDA.b $01
	STA.w !RAM_SMB3_Level_ExtSpr_XSpeed,y
	LDA.b $5F,x
	CLC
	ADC.b #$04
	STA.w !RAM_SMB3_Level_ExtSpr_XPosLo,y
	LDA.b $44,x
	ADC.b #$00
	STA.w !RAM_SMB3_Level_ExtSpr_XPosHi,y
	LDA.b $71,x
	STA.w !RAM_SMB3_Level_ExtSpr_YPosLo,y
	LDA.b $56,x
	STA.w !RAM_SMB3_Level_ExtSpr_YPosHi,y
	RTS

CODE_28EBD0:
	STA.b $01
	TXA
	PHA
	TYA
	PHA
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_Y
	STY.b $02
	LDA.b $0F
	BPL.b CODE_28EBE4
	JSL.l SMB3_UnnecessaryInvertARt_Main
CODE_28EBE4:
	STA.b $0C
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	STY.b $03
	LDA.b $0F
	BPL.b CODE_28EBF4
	JSL.l SMB3_UnnecessaryInvertARt_Main
CODE_28EBF4:
	STA.b $0D
	LDY.b #$00
	LDA.b $0D
	CMP.b $0C
	BCS.b CODE_28EC07
	INY
	PHA
	LDA.b $0C
	STA.b $0D
	PLA
	STA.b $0C
CODE_28EC07:
	LDA.b #$00
	STA.b $0B
	STA.b $00
	LDX.b $01
CODE_28EC0F:
	LDA.b $0B
	CLC
	ADC.b $0C
	CMP.b $0D
	BCC.b CODE_28EC1C
	SBC.b $0D
	INC.b $00
CODE_28EC1C:
	STA.b $0B
	DEX
	BNE.b CODE_28EC0F
	TYA
	BEQ.b CODE_28EC2E
	LDA.b $00
	PHA
	LDA.b $01
	STA.b $00
	PLA
	STA.b $01
CODE_28EC2E:
	LDA.b $00
	LDY.b $02
	BEQ.b CODE_28EC3A
	JSL.l SMB3_UnnecessaryInvertARt_Main
	STA.b $00
CODE_28EC3A:
	LDA.b $01
	LDY.b $03
	BEQ.b CODE_28EC46
	JSL.l SMB3_UnnecessaryInvertARt_Main
	STA.b $01
CODE_28EC46:
	PLA
	TAY
	PLA
	TAX
	RTS

;--------------------------------------------------------------------

CODE_28EC4B:
	LDA.b $0F
	CLC
	ADC.b !RAM_SMB3_Global_FrameCounter
	LSR
	BCC.b CODE_28EC9B
	LDA.w $0689,x
	BNE.b CODE_28EC9B
CODE_28EC58:
	LDY.b #$00
	LDA.b !RAM_SMB3_Level_Player_CurrentPowerUp
	BEQ.b CODE_28EC64
	LDA.w $056F
	BNE.b CODE_28EC64
	INY
CODE_28EC64:
	LDA.b $00
	CMP.b #$C3
	BCS.b CODE_28EC9B
	CLC
	ADC.b #$08
	SEC
	SBC.b !RAM_SMB3_Level_Player_OnScreenYPos
	SEC
	SBC.w DATA_21C323,y
	CMP.w DATA_21C325,y
	BCS.b CODE_28EC9B
	LDA.b $01
	CLC
	ADC.b #$04
	SEC
	SBC.b !RAM_SMB3_Level_Player_OnScreenXPos
	SBC.b #$00
	CMP.b #$10
	BCS.b CODE_28EC9B
	LDA.w !RAM_SMB3_Level_Player_StarPowerTimer
	BNE.b CODE_28EC9B
CODE_28EC8C:
	ORA.w !RAM_SMB3_Level_Player_DeathState
	ORA.w $0583
	ORA.w !RAM_SMB3_Level_Player_BehindLayer1Flag
	BNE.b CODE_28EC9B
	JSL.l CODE_27A4C7
CODE_28EC9B:
	RTS

;--------------------------------------------------------------------

	%ROUTINE_SMB3_NorSpr059_FireSnake_Status02(NULLROM)			; $28EC9C

;--------------------------------------------------------------------

CODE_28ED16:
	JSR.w CODE_28E6F7
CODE_28ED19:
	LDA.w $0689,x
	BEQ.b CODE_28ED2F
	LDY.b $9C
	BEQ.b CODE_28ED25
	JMP.w CODE_28E999

CODE_28ED25:
	JSL.l SMB3_ExecutePtr_Absolute

DATA_28ED29:
	dw CODE_28ED2F
	dw CODE_28ED5A
	dw CODE_28ED6D

CODE_28ED2F:
	JSR.w CODE_28D145
	BEQ.b CODE_28ED49
	LDA.b #$01
	STA.w $0689,x
	LSR
	STA.b $8C,x
	STA.b $95,x
	LDA.b #$10
	STA.w $0769,x
	LDA.b #$08
	STA.w $0520,x
	RTS

CODE_28ED49:
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_NorSpr059_FireSnake
	BNE.b CODE_28ED55
	JSL.l CODE_279B6C
	RTS

CODE_28ED55:
	JSL.l CODE_279B70
	RTS

CODE_28ED5A:
	LDA.w $0520,x
	BNE.b CODE_28ED67
	INC.w $0689,x
	LDA.b #$FF
	STA.w $0520,x
CODE_28ED67:
	PLA
	PLA
	JMP.w CODE_28E862

CODE_28ED6C:
	RTS

CODE_28ED6D:
	LDA.w $0520,x
	BNE.b CODE_28ED82
	STA.w $0689,x
	ASL.w $0679,x
	LSR.w $0679,x
	LDA.b #$F0
	STA.b $9E,x
	JMP.w CODE_28ED67

CODE_28ED82:
	ASL.w $0679,x
	SEC
	ROR.w $0679,x
	JSL.l CODE_27A7F0
	JSL.l CODE_27A7E5
	LDA.b $9E,x
	BMI.b CODE_28ED99
	CMP.b #$18
	BCS.b CODE_28ED9D
CODE_28ED99:
	INC.b $9E,x
	INC.b $9E,x
CODE_28ED9D:
	LDY.b #$08
	LDA.w $0565
	AND.b #$08
	BEQ.b CODE_28EDA8
	LDY.b #$F8
CODE_28EDA8:
	STY.b $8C,x
	JMP.w CODE_28ED67

;--------------------------------------------------------------------

SMB3_NorSpr05A_SingleClockwiseRotoDisc_Status01:
.Main:
SMB3_NorSpr05E_DoubleHorizontalCrossingRotoDisc_Status01:
.Main:
SMB3_NorSpr05F_DoubleVerticalCrossingRotoDisc_Status01:
.Main:
SMB3_NorSpr060_DoubleClockwiseRotoDisc_Status01:
.Main:
;$28EDAD
	LDY.b #$03
	LDA.w DATA_21C309+$01
	BNE.b CODE_28EDB9						; Note: This will always branch.

SMB3_NorSpr05B_SingleCounterclockwiseRotoDisc_Status01:
.Main:
SMB3_NorSpr051_DoubleCounterclockwiseRotoDisc_Status01:
.Main:
;$28EDB4
	LDY.b #$FE
	LDA.w DATA_21C309
CODE_28EDB9:
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	STY.b $00
	LDA.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	STA.w $074F,x
	STA.w $0761,x
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	STA.w $1CD7,x
	SEC
	SBC.b #$30
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	STA.w $1CC8,x
	SBC.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	STA.w $1CDC,x
	CLC
	ADC.b $00
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	LDA.b #$00
	LDY.b $00
	BPL.b CODE_28EDEC
	LDA.b #$FF
CODE_28EDEC:
	ADC.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	STA.w $0689,x
	RTL

;--------------------------------------------------------------------

SMB3_NorSpr051_DoubleCounterclockwiseRotoDisc_Status02:
.Main:
SMB3_NorSpr05E_DoubleHorizontalCrossingRotoDisc_Status02:
.Main:
SMB3_NorSpr05F_DoubleVerticalCrossingRotoDisc_Status02:
.Main:
SMB3_NorSpr060_DoubleClockwiseRotoDisc_Status02:
.Main:
CODE_28EDF2:
	JSL.l CODE_28EE84
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	PHA
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	PHA
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	PHA
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	PHA
	LDA.l $7FC532,x
	PHA
	LDA.l $7FC542,x
	PHA
	LDA.l $7FC552,x
	PHA
	LDA.l $7FC562,x
	PHA
	LDA.l $7FC53A,x
	PHA
	LDA.l $7FC54A,x
	PHA
	LDA.l $7FC55A,x
	PHA
	LDA.l $7FC56A,x
	PHA
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_NorSpr05E_DoubleHorizontalCrossingRotoDisc
	BEQ.b CODE_28EE3F
	CMP.b #!Define_SMB3_SpriteID_NorSpr05F_DoubleVerticalCrossingRotoDisc
	BNE.b CODE_28EE3B
	JSL.l CODE_29A57E
	BRA.b CODE_28EE43

CODE_28EE3B:
	JSL.l CODE_29A57E
CODE_28EE3F:
	JSL.l CODE_29A5E4
CODE_28EE43:
	JSL.l SMB3_CheckIfSpriteIsHorizontallyOffScreen_Main
	JSL.l SMB3_CheckIfSpriteIsVerticallyOffScreen_Main
	JSL.l CODE_28EE93
	PLA
	STA.l $7FC56A,x
	PLA
	STA.l $7FC55A,x
	PLA
	STA.l $7FC54A,x
	PLA
	STA.l $7FC53A,x
	PLA
	STA.l $7FC562,x
	PLA
	STA.l $7FC552,x
	PLA
	STA.l $7FC542,x
	PLA
	STA.l $7FC532,x
	PLA
	STA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	PLA
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	PLA
	STA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	PLA
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	RTL

SMB3_NorSpr05A_SingleClockwiseRotoDisc_Status02:
.Main:
SMB3_NorSpr05B_SingleCounterclockwiseRotoDisc_Status02:
.Main:
CODE_28EE84:
	LDA.b $9C
	BNE.b CODE_28EE9B
	LDA.b #$06
	STA.b $4D,x
	JSR.w CODE_28EB1F
	JSL.l CODE_279BC8
CODE_28EE93:
	JSL.l SMB3_GetNormalSpriteOnScreenPosition_Main
	JSL.l CODE_279B70
CODE_28EE9B:
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$01
	STA.w $0669,x
	LDA.b !RAM_SMB3_Global_FrameCounter
	LSR
	LSR
	STA.w $0769,x
	JSL.l SMB3_CheckIfSpriteIsHorizontallyOffScreen_Main
	JSL.l CODE_29A3C2
	RTL

%FREE_BYTES(NULLROM, 4430, $FF)
%BANK_END(<EndBank>)
endmacro

;#############################################################################################################
;#############################################################################################################

macro SMB3Bank29Macros(StartBank, EndBank)
%BANK_START(<StartBank>)
	%ROUTINE_SMB3_NorSpr09E_Podoboo_Status01(NULLROM)			; $298000
	%ROUTINE_SMB3_NorSpr09E_Podoboo_Status02(NULLROM)			; $298010
	%ROUTINE_SMB3_NorSpr0B3_UnusedSprite_Status01(NULLROM)			; $298148
	%ROUTINE_SMB3_NorSpr0B3_UnusedSprite_Status02(NULLROM)			; $298152
	%ROUTINE_SMB3_NorSpr0B0_BigCannonBall_Status02(NULLROM)			; $2981CB

;--------------------------------------------------------------------

SMB3_NorSpr09D_UpwardFacingFireJet_Status01:
.Main: 
;$2982BF
	LDA.b $71,x
	CLC
	ADC.b #$0F
	STA.b $71,x
	LDA.b $56,x
	ADC.b #$00
	STA.b $56,x
	RTL

;--------------------------------------------------------------------

SMB3_NorSpr0B2_DownwardFacingFireJet_Status01:
.Main:
;$2982CD
	DEC.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	CMP.b #$FF
	BNE.b CODE_2982D7
	DEC.b !RAM_SMB3_Level_NorSpr_YPosHi,x
CODE_2982D7:
	RTL

;--------------------------------------------------------------------

SMB3_NorSpr09D_UpwardFacingFireJet_Status02:
.Main:
SMB3_NorSpr0AC_LeftwardFacingFireJet_Status02:
.Main:
SMB3_NorSpr0B1_RightwardFacingFireJet_Status02:
.Main:
SMB3_NorSpr0B2_DownwardFacingFireJet_Status02:
.Main:
;$2982D8
	JSL.l CODE_279BC4
	LDA.b $9C
	BNE.b CODE_298301
	LDA.w $0518,x
	BNE.b CODE_298301
	INC.b $4D,x
	LDA.b $4D,x
	CMP.b #$06
	BCC.b CODE_2982EF
	LDA.b #$00
CODE_2982EF:
	STA.b $4D,x
	TAY
	LDA.w DATA_21C597,y
	STA.w $0518,x
	CPY.b #$03
	BNE.b CODE_298301
	LDA.b #!Define_SMAS_Sound0063_FireSpit
	STA.w !RAM_SMB3_Global_SoundCh3
CODE_298301:
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_NorSpr09D_UpwardFacingFireJet
	BEQ.b CODE_298310
	CMP.b #!Define_SMB3_SpriteID_NorSpr0B2_DownwardFacingFireJet
	BEQ.b CODE_29837E
	JSR.w CODE_2983F7
	RTL

CODE_298310:
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	PHA
	LDY.b $4D,x
	BEQ.b CODE_29837A
	LDA.w $0565
	LSR
	CPY.b #$03
	BEQ.b CODE_298322
	LSR
	LSR
	LSR
CODE_298322:
	LSR
	LDA.b #$00
	BCC.b CODE_298329
	LDA.b #$40
CODE_298329:
	STA.w $0679,x
	CPY.b #$03
	BEQ.b CODE_29833E
	LDA.b #$04
	LDY.w $0679,x
	BEQ.b CODE_298339
	LDA.b #$FC
CODE_298339:
	CLC
	ADC.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
CODE_29833E:
	LDY.b $4D,x
	LDA.w DATA_21C59D,y
	PHA
	STA.w $0669,x
	JSL.l CODE_279F52
	PLA
	CLC
	ADC.b #$06
	STA.w $0669,x
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	PHA
	SEC
	SBC.b #$10
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	PHA
	SBC.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	REP.b #$20
	LDA.b $C6,x
	CLC
	ADC.w #$0010
	STA.b $C6,x
	SEP.b #$20
	JSL.l CODE_279EBC
	PLA
	STA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	PLA
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	JSR.w CODE_2984EA
CODE_29837A:
	PLA
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	RTL

CODE_29837E:
	LDA.b #$80
	STA.w $0679,x
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	PHA
	LDY.b $4D,x
	BEQ.b CODE_2983F3
	LDA.w $0565
	LSR
	CPY.b #$03
	BEQ.b CODE_298395
	LSR
	LSR
	LSR
CODE_298395:
	LSR
	LDA.b #$80
	BCC.b CODE_29839C
	LDA.b #$C0
CODE_29839C:
	STA.w $0679,x
	CPY.b #$03
	BEQ.b CODE_2983B3
	LDA.w $0679,x
	ASL
	ASL
	LDA.b #$04
	BCC.b CODE_2983AE
	LDA.b #$FC
CODE_2983AE:
	CLC
	ADC.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
CODE_2983B3:
	LDY.b $4D,x
	LDA.w DATA_21C59D,y
	PHA
	STA.w $0669,x
	JSL.l CODE_279F52
	PLA
	CLC
	ADC.b #$06
	STA.w $0669,x
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	PHA
	CLC
	ADC.b #$20
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	PHA
	ADC.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	REP.b #$20
	LDA.b $C6,x
	CLC
	ADC.w #$0010
	STA.b $C6,x
	SEP.b #$20
	JSL.l CODE_279EBC
	PLA
	STA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	PLA
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	JSL.l SMB3_GetNormalSpriteOnScreenPosition_Main
	JSR.w CODE_2984EA
CODE_2983F3:
	PLA
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	RTL

CODE_2983F7:
	STZ.b $0F
	LDY.b $4D,x
	BNE.b CODE_2983FE
	RTS

CODE_2983FE:
	LDA.w DATA_21C59D,y
	STA.w $0669,x
	JSL.l SMB3_GetNormalSpriteOnScreenPosition_Main
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenYPos,x
	SEC
	SBC.b #$01
	STA.b $00
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenXPos,x
	STA.b $01
CODE_298413:
	LDA.b $01
	JSL.l CODE_2989AB
	BCC.b CODE_29841E
	BRL.w CODE_2984D8

CODE_29841E:
	REP.b #$30
	LDA.b $0F
	AND.w #$00FF
	ASL
	ASL
	ASL
	ADC.b $C6,x
	TAY
	SEP.b #$20
	LDA.b $00
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$01].YDisp,y
	LDA.b $01
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	LDA.w $0565
	STA.b $02
	LDA.b $4D,x
	LSR.b $02
	CMP.b #$03
	BEQ.b CODE_298453
	LSR.b $02
	LSR.b $02
	LSR.b $02
CODE_298453:
	LSR.b $02
	PHP
	REP.b #$20
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	AND.w #$00FF
	TAX
	SEP.b #$20
	LDA.b #$22
	CPX.w #!Define_SMB3_SpriteID_NorSpr0B1_RightwardFacingFireJet
	BNE.b CODE_29846A
	LDA.b #$62
CODE_29846A:
	PLP
	BCC.b CODE_29846F
	ORA.b #$A2
CODE_29846F:
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$01].Prop,y
	REP.b #$20
	LDA.b $9B
	AND.w #$00FF
	TAX
	SEP.b #$20
	LDA.b $0F
	STA.b $D8
	STZ.b $D9
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_NorSpr0B1_RightwardFacingFireJet
	BNE.b CODE_298493
	LDA.b #$05
	SEC
	SBC.b $0F
	STA.b $D8
CODE_298493:
	REP.b #$20
	LDA.w $0669,x
	AND.w #$00FF
	ASL
	ASL
	ASL
	ADC.b $D8
	TAX
	SEP.b #$20
	LDA.w DATA_21C5A3,x
	STA.w SMB3_OAMBuffer[$00].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$01].Tile,y
	LDA.w SMB3_OAMBuffer[$00].Prop,y
	AND.b #$80
	BEQ.b CODE_2984C2
	LDA.w SMB3_OAMBuffer[$00].Tile,y
	PHA
	LDA.w SMB3_OAMBuffer[$01].Tile,y
	STA.w SMB3_OAMBuffer[$00].Tile,y
	PLA
	STA.w SMB3_OAMBuffer[$01].Tile,y
CODE_2984C2:
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b $DB
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	SEP.b #$10
	LDX.b $9B
CODE_2984D8:
	LDA.b $01
	CLC
	ADC.b #$08
	STA.b $01
	INC.b $0F
	LDA.b $0F
	CMP.b #$06
	BEQ.b CODE_2984EA
	BRL.w CODE_298413

CODE_2984EA:
	LDA.b $4D,x
	CMP.b #$03
	BNE.b CODE_2984F4
	JSL.l CODE_279B70
CODE_2984F4:
	RTS

;--------------------------------------------------------------------

SMB3_NorSpr0A3_UpsideDownRedClassicPiranhaPlant_Status01:
.Main:
SMB3_NorSpr0A7_UpsideDownRedVenusFireTrap_Status01:
.Main:
;$2984F5
	LDY.b #$21
	LDA.b #$10
	BNE.b CODE_2984FF					; Note: This will always branch.

SMB3_NorSpr0A1_UpsideDownRedClassicPiranhaPlant_Status01:
.Main:
SMB3_NorSpr0A5_UpsideDownRedVenusFireTrap_Status01:
.Main:
;$2984FB
	LDY.b #$19
	LDA.b #$08
CODE_2984FF:
	CLC
	ADC.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	LDA.b #$80
	STA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	BNE.b CODE_298511					; Note: This will always branch.

SMB3_NorSpr0A2_RedClassicPiranhaPlant_Status01:
.Main:
SMB3_NorSpr0A6_RedVenusFireTrap_Status01:
.Main:
	LDY.b #$21
	BNE.b CODE_298511					; Note: This will always branch.

SMB3_NorSpr0A0_GreenClassicPiranhaPlant_Status01:
.Main:
SMB3_NorSpr0A4_GreenVenusFireTrap_Status01:
.Main:
	LDY.b #$19
CODE_298511:
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	STA.b $68,x
	TYA
	STA.w $077B,x
	SEC
	SBC.b #$10
	STA.w $0689,x
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	STA.w $1021,x
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	CLC
	ADC.b #$08
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	RTL

;--------------------------------------------------------------------

SMB3_NorSpr0A0_GreenClassicPiranhaPlant_Status02:
.Main:
SMB3_NorSpr0A1_UpsideDownRedClassicPiranhaPlant_Status02:
.Main:
SMB3_NorSpr0A2_RedClassicPiranhaPlant_Status02:
.Main:
SMB3_NorSpr0A3_UpsideDownRedClassicPiranhaPlant_Status02:
.Main:
SMB3_NorSpr0A4_GreenVenusFireTrap_Status02:
.Main:
SMB3_NorSpr0A5_UpsideDownRedVenusFireTrap_Status02:
.Main:
SMB3_NorSpr0A6_RedVenusFireTrap_Status02:
.Main:
SMB3_NorSpr0A7_UpsideDownRedVenusFireTrap_Status02:
.Main:
;$29852C
	JSL.l CODE_279BC4
	LDA.b $4D,x
	LDY.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	BPL.b CODE_29853A
	CLC
	ADC.b #$02
CODE_29853A:
	AND.b #$03
	BNE.b CODE_29854A
	JSL.l SMB3_GetNormalSpriteOnScreenPosition_Main
	LDA.b #$01
	STA.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,x
	JMP.w CODE_298747

CODE_29854A:
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	AND.b #$BF
	ORA.w DATA_21C5C3,y
	STA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	REP.b #$20
	LDA.b $C6,x
	CLC
	ADC.w #$0010
	STA.b $C6,x
	SEP.b #$20
	LDA.w $1FD2,x
	LSR
	LSR
	LSR
	AND.b #$01
	STA.w $0669,x
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	SEC
	SBC.b #!Define_SMB3_SpriteID_NorSpr0A0_GreenClassicPiranhaPlant
	TAY
	LDA.w DATA_21C5BB,y
	STA.w $0691,x
	AND.b #$01
	STA.b $01
	LDA.b $68,x
	SEC
	SBC.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	LDY.b $01
	BEQ.b CODE_298591
	CMP.w $0689,x
	BCC.b CODE_29859B
	BCS.b CODE_298595					; Note: This will always branch

CODE_298591:
	CMP.b #$11
	BCS.b CODE_29859B
CODE_298595:
	INC.w $0669,x
	INC.w $0669,x
CODE_29859B:
	JSL.l CODE_279F52
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_Y
	STY.b $00
	STZ.b $01
	REP.b #$10
	LDY.b $C6,x
	LDA.w $0691,x
	BMI.b CODE_2985E0
	LDA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	BMI.b CODE_2985CA
	LDA.w $07F3,y
	AND.b #$BF
	STA.w $07F3,y
	STA.w $07FB,y
	ORA.b #$40
	STA.w $07F7,y
	STA.w $07FF,y
	BNE.b CODE_29861F
CODE_2985CA:
	LDA.w SMB3_OAMBuffer[$00].Prop,y
	AND.b #$BF
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$02].Prop,y
	ORA.b #$40
	STA.w SMB3_OAMBuffer[$01].Prop,y
	STA.w SMB3_OAMBuffer[$03].Prop,y
	BRL.w CODE_29866B

CODE_2985E0:
	LDA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	BMI.b CODE_298631
	LDX.b $00
	LDA.w $07F3,y
	AND.b #$7F
	ORA.w DATA_21C5C5,x
	AND.b #$CF
	ORA.b #$20
	STA.w $07F3,y
	STA.w $07F7,y
	STA.w $07FB,y
	STA.w $07FF,y
	AND.b #$80
	BEQ.b CODE_29861F
	LDA.w $07F2,y
	PHA
	LDA.w $07FA,y
	STA.w $07F2,y
	PLA
	STA.w $07FA,y
	LDA.w $07F6,y
	PHA
	LDA.w $07FE,y
	STA.w $07F6,y
	PLA
	STA.w $07FE,y
CODE_29861F:
	LDA.b #$24
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$02].Prop,y
	LDA.b #$64
	STA.w SMB3_OAMBuffer[$01].Prop,y
	STA.w SMB3_OAMBuffer[$03].Prop,y
	BRA.b CODE_29867B

CODE_298631:
	LDX.b $00
	LDA.w SMB3_OAMBuffer[$00].Prop,y
	AND.b #$7F
	ORA.w DATA_21C5C5,x
	AND.b #$CF
	ORA.b #$10
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$01].Prop,y
	STA.w SMB3_OAMBuffer[$02].Prop,y
	STA.w SMB3_OAMBuffer[$03].Prop,y
	AND.b #$80
	BNE.b CODE_29866B
	LDA.w SMB3_OAMBuffer[$00].Tile,y
	PHA
	LDA.w SMB3_OAMBuffer[$02].Tile,y
	STA.w SMB3_OAMBuffer[$00].Tile,y
	PLA
	STA.w SMB3_OAMBuffer[$02].Tile,y
	LDA.w SMB3_OAMBuffer[$01].Tile,y
	PHA
	LDA.w SMB3_OAMBuffer[$03].Tile,y
	STA.w SMB3_OAMBuffer[$01].Tile,y
	PLA
	STA.w SMB3_OAMBuffer[$03].Tile,y
CODE_29866B:
	LDA.b #$A4
	STA.w $07F3,y
	STA.w $07FB,y
	LDA.b #$E4
	STA.w $07F7,y
	STA.w $07FF,y
CODE_29867B:
	REP.b #$20
	LDA.b $9B
	AND.w #$00FF
	TAX
	SEP.b #$20
	LDA.b #$01
	STA.b $00
	STZ.b $01
	LDA.b #$FF
	STA.b $DC
	STA.b $DD
	LDA.w $0691,x
	AND.b #$01
	BEQ.b CODE_2986A1
	LDA.w $0689,x
	STA.b $00
	LDA.b #$F4
	STA.b $DC
CODE_2986A1:
	LDA.w !RAM_SMB3_Level_IsVerticalLevelFlag
	BEQ.b CODE_2986AA
	LDA.b #$F9
	STA.b $DC
CODE_2986AA:
	LDA.w $0543
	STA.b $D8
	LDA.w $0542
	STA.b $D9
	LDA.w $1021,x
	XBA
	LDA.b $68,x
	REP.b #$20
	SEC
	SBC.b $00
	SEC
	SBC.b $D8
	STA.b $DA
	CLC
	ADC.w #$0008
	STA.b $D8
	LDA.b $DA
	CMP.w #$00F0
	BCC.b CODE_2986D5
	CMP.b $DC
	BCC.b CODE_2986DF
CODE_2986D5:
	SEP.b #$20
	STA.w $07E1,y
	STA.w $07E9,y
	REP.b #$20
CODE_2986DF:
	LDA.b $D8
	CMP.w #$00F0
	BCC.b CODE_2986EA
	CMP.b $DC
	BCC.b CODE_2986F2
CODE_2986EA:
	SEP.b #$20
	STA.w $07E5,y
	STA.w $07ED,y
CODE_2986F2:
	SEP.b #$20
	LDA.b #$76
	STA.w $07E2,y
	STA.w $07EA,y
	STA.w $07E6,y
	STA.w $07EE,y
	LDA.b #$12
	STA.w $07E3,y
	STA.w $07E7,y
	STA.w $07EB,y
	STA.w $07EF,y
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	SEC
	SBC.w $0210
	STA.w $07E0,y
	STA.w $07E4,y
	CLC
	ADC.b #$08
	STA.w $07E8,y
	STA.w $07EC,y
	PHY
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,x
	ROL
	ROL
	PHP
	AND.b #$01
	STA.w $0A18,y
	STA.w $0A19,y
	PLP
	ROL
	AND.b #$01
	STA.w $0A1A,y
	STA.w $0A1B,y
	PLY
CODE_298747:
	SEP.b #$10
	LDA.b $9C
	BNE.b CODE_298750
	JSR.w CODE_298751
CODE_298750:
	RTL

;--------------------------------------------------------------------

CODE_298751:
	JSL.l CODE_279B70
	INC.w $1FD2,x
	LDA.b $4D,x
	AND.b #$03
	JSL.l SMB3_ExecutePtr_Absolute

DATA_298751:
	dw CODE_2987F6
	dw CODE_298768
	dw CODE_2987A2
	dw CODE_298783

;--------------------------------------------------------------------

CODE_298768:
	LDA.b $68,x
	SEC
	SBC.w $077B,x
	PHA
	LDA.w $1021,x
	SBC.b #$00
	STA.b $00
	PLA
	CMP.b $71,x
	LDA.b $00
	SBC.b $56,x
	BCS.b CODE_2987E6
	LDA.b #$F0
	BNE.b CODE_29879B

;--------------------------------------------------------------------

CODE_298783:
	LDA.b $71,x
	CLC
	ADC.b #$01
	PHA
	LDA.b $56,x
	ADC.b #$00
	STA.b $00
	PLA
	CMP.b $68,x
	LDA.b $00
	SBC.w $1021,x
	BCS.b CODE_2987E6
	LDA.b #$10
CODE_29879B:
	STA.b $9E,x
	JSL.l CODE_27A7E5
	RTS

;--------------------------------------------------------------------

CODE_2987A2:
	LDA.w $0691,x
	BPL.b CODE_2987C9
	LDA.w $0679,x
	BMI.b CODE_2987C9
	LDA.b #$00
	STA.w $1FD2,x
	LDA.w $0518,x
	LDY.w !RAM_SMB3_Global_CurrentWorld
	BNE.b CODE_2987BE
	CMP.b #$28
	BEQ.b CODE_2987C6
	TYA
CODE_2987BE:
	CMP.b #$10
	BEQ.b CODE_2987C6
	CMP.b #$40
	BNE.b CODE_2987C9
CODE_2987C6:
	JSR.w CODE_29883B
CODE_2987C9:
	LDA.w $0518,x
	BNE.b CODE_29883A
	LDA.w $0679,x
	BPL.b CODE_2987E6
	LDA.w $0691,x
	LSR
	BCS.b CODE_2987E6
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.b $0F
	CLC
	ADC.b #$1B
	CMP.b #$37
	BCC.b CODE_2987F5
CODE_2987E6:
	INC.b $4D,x
	LDA.b #$30
	LDY.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CPY.b #!Define_SMB3_SpriteID_NorSpr0A4_GreenVenusFireTrap
	BCC.b CODE_2987F2
	ASL
CODE_2987F2:
	STA.w $0518,x
CODE_2987F5:
	RTS

;--------------------------------------------------------------------

CODE_2987F6:
	LDA.w $0691,x
	BPL.b CODE_29881D
	LDA.w $0679,x
	BPL.b CODE_29881D
	LDA.b #$00
	STA.w $1FD2,x
	LDA.w $0518,x
	LDY.w !RAM_SMB3_Global_CurrentWorld
	BNE.b CODE_298812
	CMP.b #$28
	BEQ.b CODE_29881A
	TYA
CODE_298812:
	CMP.b #$10
	BEQ.b CODE_29881A
	CMP.b #$40
	BNE.b CODE_29881D
CODE_29881A:
	JSR.w CODE_29883B
CODE_29881D:
	LDA.w $0518,x
	BNE.b CODE_29883A
	LDA.w $0679,x
	BMI.b CODE_2987E6
	LDA.w $0691,x
	LSR
	BCS.b CODE_2987E6
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.b $0F
	CLC
	ADC.b #$1B
	CMP.b #$37
	BCS.b CODE_2987E6
CODE_29883A:
	RTS

;--------------------------------------------------------------------

CODE_29883B:
	LDY.b #$00
	LDA.w $0679,x
	BPL.b CODE_298844
	LDY.b #$10
CODE_298844:
	STY.b $00
	LDY.b #$03
	JSL.l SMB3_FindFreeExtendedSpriteSlot_VariablePriority
	BNE.b CODE_29883A
	LDA.b $5F,x
	CLC
	ADC.b #$03
	STA.w !RAM_SMB3_Level_ExtSpr_XPosLo,y
	LDA.b $44,x
	ADC.b #$00
	STA.w !RAM_SMB3_Level_ExtSpr_XPosHi,y
	LDA.b $71,x
	CLC
	ADC.b $00
	STA.w !RAM_SMB3_Level_ExtSpr_YPosLo,y
	LDA.b $56,x
	ADC.b #$00
	STA.w !RAM_SMB3_Level_ExtSpr_YPosHi,y
	LDA.b #!Define_SMB3_SpriteID_ExtSpr05_PiranhaPlantFire
	STA.w !RAM_SMB3_Level_ExtSpr_SpriteID,y
	STY.b $00
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_Y
	STY.b $05
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	STY.b $06
	LDX.b #$00
	LDA.b $0F
	CLC
	ADC.b #$50
	CMP.b #$A0
	BCC.b CODE_29888B
	INX
CODE_29888B:
	LDY.b $00
	LDA.w DATA_21C5C7,x
	LSR.b $05
	BCC.b CODE_298898
	JSL.l SMB3_UnnecessaryInvertARt_Main
CODE_298898:
	STA.w !RAM_SMB3_Level_ExtSpr_YSpeed,y
	LDA.w DATA_21C5C9,x
	LSR.b $06
	BCC.b CODE_2988A6
	JSL.l SMB3_UnnecessaryInvertARt_Main
CODE_2988A6:
	STA.w !RAM_SMB3_Level_ExtSpr_XSpeed,y
	LDA.b #$00
	STA.w !RAM_SMB3_Level_ExtSpr_SubXPos,y
	STA.w !RAM_SMB3_Level_ExtSpr_SubYPos,y
	LDX.b $9B
	RTS

;--------------------------------------------------------------------

	%ROUTINE_SMB3_NorSpr0AA_AirshipPropeller_Status01(NULLROM)		; $2988B4
	%ROUTINE_SMB3_NorSpr0AA_AirshipPropeller_Status02(NULLROM)		; $2988BC

;--------------------------------------------------------------------

SMB3_NorSpr0AB_UnusedSprite_Status02:						;\ Todo: This code doesn't look like valid sprite code.
.Main:										;/
CODE_2989AB:
	STX.b $03
	STY.b $02
	STA.b $01
	LDX.b $9B
	LDA.w !RAM_SMB3_Level_NorSpr_YOffscreenFlag,x
	BNE.b CODE_2989E0
	LDA.b $01
	SEC
	SBC.b !RAM_SMB3_Level_NorSpr_OnScreenXPos,x
	STA.b $DA
	STZ.b $DB
	LDA.b $5F,x
	STA.b $DC
	LDA.b $44,x
	STA.b $DD
	REP.b #$20
	LDA.b $DC
	CLC
	ADC.b $DA
	SEC
	SBC.w $0210
	STA.b $DA
	CMP.w #$0100
	BCC.b CODE_2989E5
	CMP.w #$FFE0
	BCS.b CODE_2989E5
CODE_2989E0:
	SEP.b #$20
	SEC
	BRA.b CODE_2989E8

CODE_2989E5:
	SEP.b #$20
	CLC
CODE_2989E8:
	LDY.b $02
	LDA.b $01
	LDX.b $03
	RTL

;--------------------------------------------------------------------

SMB3_NorSpr0AC_LeftwardFacingFireJet_Status01:
.Main:
;$2989EF
	DEC.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	LDY.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	INY
	BNE.b CODE_2989F8
	DEC.b !RAM_SMB3_Level_NorSpr_YPosHi,x
SMB3_NorSpr0AB_UnusedSprite_Status01:
.Main:
SMB3_NorSpr0B1_RightwardFacingFireJet_Status01:
.Main:
CODE_2989F8:
	RTL

;--------------------------------------------------------------------

	%ROUTINE_SMB3_NorSpr0AD_RockyWrench_Status01(NULLROM)			; $2989F9
	%ROUTINE_SMB3_NorSpr0AD_RockyWrench_Status02(NULLROM)			; $298A06
	%ROUTINE_SMB3_NorSpr0AE_MetalLugnut_Status01(NULLROM)			; $298C0A
	%ROUTINE_SMB3_NorSpr0AE_MetalLugnut_Status02(NULLROM)			; $298C18
	%ROUTINE_SMB3_NorSpr0AF_AngrySun_Status02(NULLROM)			; $298DCF
	%ROUTINE_SMB3_NorSprXXX_OutlinePlatform_Status02(NULLROM)		; $299077

;--------------------------------------------------------------------

CODE_2992C8:
	LDA.b #$00
	LDY.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	BMI.b CODE_2992D0
	LDA.b #$40
CODE_2992D0:
	STA.w $0679,x
	RTS

;--------------------------------------------------------------------

	%ROUTINE_SMB3_NorSpr09F_Parabuzzy_Status01(NULLROM)			; $2992D4
	%ROUTINE_SMB3_NorSpr09F_Parabuzzy_Status02(NULLROM)			; $2992DE
	%ROUTINE_SMB3_NorSprXXX_RotatingPeaPlatform_Status01(NULLROM)		; $2993A4
	%ROUTINE_SMB3_NorSprXXX_RotatingPeaPlatform_Status02(NULLROM)		; $2993C0

;--------------------------------------------------------------------

CODE_2995B8:
	JSR.w CODE_2997CF
	LDA.b $94,x
	CLC
	ADC.b #$07
	AND.b #$3F
	LDY.b $68,x
	BMI.b CODE_2995D5
	CMP.b #$10
	BCC.b CODE_2995E1
	CMP.b #$18
	BCS.b CODE_2995D5
	LDA.b #$08
	STA.b $94,x
	JMP.w CODE_2995DD

CODE_2995D5:
	AND.b #$20
	BEQ.b CODE_2995E1
	LDA.b #$38
	STA.b $94,x
CODE_2995DD:
	LDA.b #$00
	STA.b $68,x
CODE_2995E1:
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$07
	BNE.b CODE_2995F3
	LDA.b $68,x
	BEQ.b CODE_2995F3
	BMI.b CODE_2995F1
	DEC.b $68,x
	BPL.b CODE_2995F3
CODE_2995F1:
	INC.b $68,x
CODE_2995F3:
	LDA.b $94,x
	AND.b #$0F
	TAY
	LDA.w DATA_21C62A,y
	STA.b $09
	TYA
	EOR.b #$FF
	AND.b #$0F
	CLC
	ADC.b #$01
	TAY
	LDA.w DATA_21C62A,y
	STA.b $08
	LDA.b $94,x
	AND.b #$10
	BEQ.b CODE_29961B
	LDA.b $08
	PHA
	LDA.b $09
	STA.b $08
	PLA
	STA.b $09
CODE_29961B:
	LDA.b $09
	CMP.b #$03
	BCS.b CODE_29962D
	LSR
	STA.b $01
	STA.b $05
	LDA.b #$00
	STA.b $03
	JMP.w CODE_299649

CODE_29962D:
	LDY.b #$FF
	SEC
CODE_299630:
	SBC.b #$03
	INY
	BCS.b CODE_299630
	ADC.b #$03
	STA.b $03
	STY.b $01
	STY.b $03
	STY.b $05
	TAY
	BEQ.b CODE_299649
	INC.b $01
	DEY
	BEQ.b CODE_299649
	INC.b $05
CODE_299649:
	LDA.b $08
	CMP.b #$03
	BCS.b CODE_29965B
	LSR
	STA.b $00
	STA.b $04
	LDA.b #$00
	STA.b $02
	JMP.w CODE_299675

CODE_29965B:
	LDY.b #$FF
	SEC
CODE_29965E:
	SBC.b #$03
	INY
	BCS.b CODE_29965E
	ADC.b #$03
	STY.b $00
	STY.b $02
	STY.b $04
	TAY
	BEQ.b CODE_299675
	INC.b $00
	DEY
	BEQ.b CODE_299675
	INC.b $04
CODE_299675:
	LDA.b $94,x
	AND.b #$30
	BEQ.b CODE_2996A0
	CMP.b #$10
	BEQ.b CODE_299686
	CMP.b #$30
	BEQ.b CODE_2996A3
	JSR.w CODE_2996A3
CODE_299686:
	LDX.b #$01
CODE_299688:
	LDA.b $00,x
	JSL.l SMB3_UnnecessaryInvertARt_Main
	STA.b $00,x
	LDA.b $02,x
	JSL.l SMB3_UnnecessaryInvertARt_Main
	STA.b $02,x
	LDA.b $04,x
	JSL.l SMB3_UnnecessaryInvertARt_Main
	STA.b $04,x
CODE_2996A0:
	LDX.b $9B
	RTS

CODE_2996A3:
	LDX.b #$00
	BEQ.b CODE_299688

CODE_2996A7:
	LDA.b $C6,x
	STA.b $DA
	LDA.b $C7,x
	STA.b $DB
	JSL.l CODE_27A228
	JSR.w CODE_2997F6
	REP.b #$10
	LDY.b $DA
	LDA.b $0D
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	CLC
	ADC.b $00
	STA.w SMB3_OAMBuffer[$01].YDisp,y
	CLC
	ADC.b $02
	STA.w SMB3_OAMBuffer[$02].YDisp,y
	CLC
	ADC.b $04
	STA.w SMB3_OAMBuffer[$03].YDisp,y
	LDA.b $0D
	SEC
	SBC.b $00
	STA.w SMB3_OAMBuffer[$04].YDisp,y
	SEC
	SBC.b $02
	STA.w SMB3_OAMBuffer[$05].YDisp,y
	SEC
	SBC.b $04
	LDY.b $C6,x
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$06].YDisp,y
	LDY.b $DA
	LDA.w SMB3_OAMBuffer[$00].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$06].YDisp,y
	LDA.w SMB3_OAMBuffer[$01].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$07].YDisp,y
	LDA.w SMB3_OAMBuffer[$02].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$08].YDisp,y
	LDA.w SMB3_OAMBuffer[$03].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$09].YDisp,y
	LDA.w SMB3_OAMBuffer[$04].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$0A].YDisp,y
	LDA.w SMB3_OAMBuffer[$05].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$0B].YDisp,y
	LDA.b $0E
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$06].XDisp,y
	CLC
	ADC.b $01
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	STA.w SMB3_OAMBuffer[$07].XDisp,y
	CLC
	ADC.b $03
	STA.w SMB3_OAMBuffer[$02].XDisp,y
	STA.w SMB3_OAMBuffer[$08].XDisp,y
	CLC
	ADC.b $05
	STA.w SMB3_OAMBuffer[$03].XDisp,y
	STA.w SMB3_OAMBuffer[$09].XDisp,y
	LDA.b $0E
	SEC
	SBC.b $01
	STA.w SMB3_OAMBuffer[$04].XDisp,y
	STA.w SMB3_OAMBuffer[$0A].XDisp,y
	SEC
	SBC.b $03
	STA.w SMB3_OAMBuffer[$05].XDisp,y
	STA.w SMB3_OAMBuffer[$0B].XDisp,y
	SEC
	SBC.b $05
	LDY.b $C6,x
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$06].XDisp,y
	LDA.b $C6,x
	STA.b $D8
	LDA.b $C7,x
	STA.b $D9
	LDY.b $DA
	LDX.w #$0006
CODE_299774:
	CPX.w #$0000
	BNE.b CODE_29977B
	LDY.b $D8
CODE_29977B:
	LDA.b $0C
	CMP.b #$FF
	BEQ.b CODE_299788
	LDA.w SMB3_OAMBuffer[$00].YDisp,y
	CMP.b #$C2
	BCC.b CODE_299792
CODE_299788:
	LDA.b #$F0
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	STA.w SMB3_OAMBuffer[$06].YDisp,y
	BNE.b CODE_2997AA
CODE_299792:
	LDA.b #$22
	CPX.w #$0006
	BNE.b CODE_29979B
	LDA.b #$24
CODE_29979B:
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$06].Prop,y
	LDA.b #$EC
	STA.w SMB3_OAMBuffer[$00].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$06].Tile,y
CODE_2997AA:
	PHY
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b $0C
	AND.w DATA_21C65A,x
	BEQ.b CODE_2997BC
	LDA.b #$01
CODE_2997BC:
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$06].Slot,y
	PLY
	INY
	INY
	INY
	INY
	DEX
	BPL.b CODE_299774
	SEP.b #$10
	LDX.b $9B
	RTS

;--------------------------------------------------------------------

CODE_2997CF:
	LDA.b $9C
	BNE.b CODE_2997F5
	LDA.w $0068,x
	PHA
	ASL
	ASL
	ASL
	ASL
	CLC
	ADC.w $0689,x
	STA.w $0689,x
	PLA
	PHP
	LSR
	LSR
	LSR
	LSR
	CMP.b #$08
	BCC.b CODE_2997EE
	ORA.b #$F0
CODE_2997EE:
	PLP
	ADC.b $94,x
	AND.b #$3F
	STA.b $94,x
CODE_2997F5:
	RTS

;--------------------------------------------------------------------

CODE_2997F6:
	LDA.b #$00
	STA.b $0C
	STA.b $0A
	LDA.b $01
	CLC
	ADC.b $03
	CLC
	ADC.b $05
	STA.b $0B
	PHA
	LDA.b $5F,x
	SEC
	SBC.b $0B
	STA.b $0B
	PLA
	BPL.b CODE_299813
	DEC.b $0A
CODE_299813:
	LDA.b $44,x
	SBC.b $0A
	STA.b $0A
	LDY.b #$00
CODE_29981B:
	LDA.b $0B
	CMP.w $0210
	LDA.b $0A
	SBC.b $12
	BEQ.b CODE_29982D
	LDA.w DATA_21C653,y
	ORA.b $0C
	STA.b $0C
CODE_29982D:
	STX.b $0E
	LDX.w DATA_21C64D,y
	LDA.b $00,x
	PHA
	CLC
	ADC.b $0B
	STA.b $0B
	LDX.b $0E
	STY.b $0F
	LDY.b #$00
	PLA
	BPL.b CODE_299844
	DEY
CODE_299844:
	TYA
	ADC.b $0A
	STA.b $0A
	LDY.b $0F
	INY
	CPY.b #$07
	BNE.b CODE_29981B
	LDA.b $5F,x
	SEC
	SBC.w $0210
	STA.b $0E
	LDA.b $71,x
	SEC
	SBC.w $0543
	STA.b $0D
	LDA.b $56,x
	ADC.b #$00
	CMP.b #$01
	BNE.b CODE_29986E
	LDA.b $0D
	CMP.b #$E0
	BCC.b CODE_299872
CODE_29986E:
	LDA.b #$FF
	STA.b $0C
CODE_299872:
	RTS

;--------------------------------------------------------------------

	%ROUTINE_SMB3_NorSprXXX_GiantQuestionMarkBlock_Status01(NULLROM)		; $299873
	%ROUTINE_SMB3_NorSprXXX_GiantQuestionMarkBlock_Status02(NULLROM)		; $299889

;--------------------------------------------------------------------

; Note: Routine that spawns in sprites from the sprite list?

CODE_299A9A:
	JSR.w CODE_299A9E
	RTL

CODE_299A9E:
	JSR.w CODE_29A100
	LDA.w $057C
	BEQ.b CODE_299AD4
	LDX.b #$06
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	BEQ.b CODE_299ABB
	INX
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	BEQ.b CODE_299ABB
	LDA.b #$00
	STA.w $057C
	JMP.w CODE_299AD4

CODE_299ABB:
	LDY.b #!Define_SMB3_SpriteID_NorSpr006_VerticalBounceSprite
	LDA.w $057D
	AND.b #$7F
	CMP.b #$02
	BMI.b CODE_299AC8
	LDY.b #!Define_SMB3_SpriteID_NorSpr01B_HorizontalBounceSprite
CODE_299AC8:
	TYA
	STA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	LDA.b #$01
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	JMP.w CODE_299ADF

CODE_299AD4:
	LDA.w !RAM_SMB3_Level_IsVerticalLevelFlag
	BEQ.b CODE_299ADC
	JMP.w CODE_299DCD

CODE_299ADC:
	JMP.w CODE_299AE0

CODE_299ADF:
	RTS

CODE_299AE0:
	LDY.b $25
	LDA.w $0210
	CLC
	ADC.w DATA_21C699,y
	AND.b #$F0
	STA.b $05
	LDA.b $12
	ADC.w DATA_21C69B,y
	STA.b $06
	CMP.b !RAM_SMB3_Level_ScreensInLvl
	BEQ.b CODE_299AFD
	BCC.b CODE_299AFD
	JMP.w CODE_299C42

CODE_299AFD:
	LDX.b $06
	LDA.w $1B00,x
	BMI.b CODE_299B1D
	STA.b $01
	TAX
	ASL
	CLC
	ADC.b $01
	TAY
	DEY
	DEX
CODE_299B0E:
	INX
	INY
	INY
	INY
	LDA.w !RAM_SMB3_Level_SpriteListData,y
	LSR
	LSR
	LSR
	LSR
	CMP.b $06
	BEQ.b CODE_299B1E
CODE_299B1D:
	RTS

CODE_299B1E:
	LDA.w !RAM_SMB3_Level_SpriteListData-$01,y
	CMP.b #$FF
	BEQ.b CODE_299B1D
	LDA.w $1B10,x
	CMP.b #$00
	BMI.b CODE_299B0E
	LDA.w !RAM_SMB3_Level_SpriteListData,y
	ASL
	ASL
	ASL
	ASL
	CMP.b $05
	BNE.b CODE_299B0E
	STX.b $01
	STA.b $00
	LDA.w !RAM_SMB3_Level_SpriteListData-$01,y
	CMP.b #!Define_SMB3_SpriteID_NorSpr0D5_ToadAndKing
	BNE.b CODE_299B47
	INC.w $05FD
	BNE.b CODE_299B6B
CODE_299B47:
	CMP.b #!Define_SMB3_SpriteID_NorSpr0D4_CoinShipAndBlueToadHouseDecisionController
	BNE.b CODE_299B60
	LDA.w !RAM_SMB3_Level_SpriteListData+$01,y
	PHA
	AND.b #$01
	TAX
	INC
	STA.l $7E3964
	PLA
	AND.b #$7F
	STA.l $7E3965
	BPL.b CODE_299B6B
CODE_299B60:
	CMP.b #!Define_SMB3_SpriteID_NorSpr0D3_ActivateAutoScrolling
	BNE.b CODE_299B78
	TYA
	PHA
	JSR.w CODE_299C43
	PLA
	TAY
CODE_299B6B:
	LDX.b $01
	LDA.w $1B10,x
	ORA.b #$80
	STA.w $1B10,x
	JMP.w CODE_299B0E

CODE_299B78:
	LDA.w $1B3F,y
	CMP.b #!Define_SMB3_SpriteID_NorSpr0D6_SetMiniChestItem
	BNE.b CODE_299B89
	LDA.w !RAM_SMB3_Level_SpriteListData+$01,y
	STA.l !RAM_SMB3_Level_CurrentMiniChestPrize
	JMP.w CODE_299B6B

CODE_299B89:
	CMP.b #!Define_SMB3_SpriteID_NorSpr0B4_StartOfGeneratorSprites
	BCC.b CODE_299BB7
	CMP.b #!Define_SMB3_SpriteID_NorSpr0D1_Spawn3GreenParabuzzys
	BNE.b CODE_299B97
	JSR.w CODE_299C8B
	JMP.w CODE_299B0E

CODE_299B97:
	CMP.b #!Define_SMB3_SpriteID_NorSpr0D2_Spawn3YellowCheepCheeps
	BNE.b CODE_299BA1
	JSR.w CODE_299C8B
	JMP.w CODE_299B0E

CODE_299BA1:
	CMP.b #!Define_SMB3_SpriteID_NorSpr0BC_StartOfShooterSprites
	BCC.b CODE_299BB0
	SBC.b #!Define_SMB3_SpriteID_NorSpr0BC_StartOfShooterSprites
	CLC
	ADC.b #$01
	JSR.w CODE_299D2D
	JMP.w CODE_299B0E

CODE_299BB0:
	SEC
	SBC.b #!Define_SMB3_SpriteID_NorSpr0B4_StartOfGeneratorSprites-$01
	STA.w !RAM_SMB3_Level_GenSpr_SpriteID
	RTS

CODE_299BB7:
	CMP.b #!Define_SMB3_SpriteID_NorSpr041_EndOfLevelCard
	BNE.b CODE_299BBF
	LDX.b #$06
	BNE.b CODE_299BCC						; Note: This will always branch.

CODE_299BBF:
	LDX.b #$04
CODE_299BC1:
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	BEQ.b CODE_299BCC
	DEX
	BPL.b CODE_299BC1
	JMP.w CODE_299C42

CODE_299BCC:
	LDA.b $00
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	STA.l $7FC532,x
	STA.l $7FC53A,x
	LDA.b $06
	STA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	STA.l $7FC542,x
	STA.l $7FC54A,x
	INY
	LDA.w !RAM_SMB3_Level_SpriteListData,y
	AND.b #$F0
	LSR
	LSR
	LSR
	LSR
	STA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	STA.l $7FC562,x
	STA.l $7FC56A,x
	LDA.w !RAM_SMB3_Level_SpriteListData,y
	AND.b #$0F
	ASL
	ASL
	ASL
	ASL
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	STA.l $7FC552,x
	STA.l $7FC55A,x
	DEY
	DEY
	LDA.w !RAM_SMB3_Level_SpriteListData,y
	STA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	LDY.b $01
	LDA.b #$04
	STA.l $7FC572,x
	LDA.b #$00
	STA.l $7FC57A,x
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_NorSpr043_2SpotHoppingRedCheepCheep
	BNE.b CODE_299C33
	LDA.w !RAM_SMB3_Level_Layer3BGFromHeader
	CMP.b #$01
	BNE.b CODE_299C33
	LDA.b #$B0
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
CODE_299C33:
	LDA.w $1B10,y
	ORA.b #$80
	STA.w $1B10,y
	TYA
	STA.w $0659,x
	INC.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
CODE_299C42:
	RTS

CODE_299C43:
	LDA.w !RAM_SMB3_Level_SpriteListData+$01,y
	CMP.b #$60
	BNE.b CODE_299C50
	LDA.b #$03
	STA.w $0427
	RTS

CODE_299C50:
	PHA
	LDY.b #$14
	LDA.b #$00
CODE_299C55:
	STA.w $1A00-$01,y
	DEY
	BNE.b CODE_299C55
	PLA
	PHA
	AND.b #$0F
	TAY
	PLA
	LSR
	LSR
	LSR
	LSR
	STA.w !RAM_SMB3_Level_ScrollSpr_SpriteID
	CMP.b #$03
	BCS.b CODE_299C7E
	CMP.b #$01
	BNE.b CODE_299C74
	TYA
	ORA.b #$10
	TAY
CODE_299C74:
	PHX
	TYX
	LDA.l DATA_27AA5F,x
	STA.w !RAM_SMB3_Level_ScrollSpr_ScrollDirection
	PLX
CODE_299C7E:
	STY.w !RAM_SMB3_Level_ScrollSpr_HorizontalAutoScrollType
	LDA.w $0216
	STA.w !RAM_SMB3_Level_AutoscrollLayerYPosLo
	INC.w !RAM_SMB3_Level_RunScrollSpritesFlag
	RTS

;--------------------------------------------------------------------

CODE_299C8B:
	STA.w $1CEF
	TXA
	PHA
	TYA
	PHA
	LDA.w $1B41,y
	AND.b #$F0
	LSR
	LSR
	LSR
	LSR
	STA.b $08
	LDA.w $1B41,y
	AND.b #$0F
	ASL
	ASL
	ASL
	ASL
	STA.b $09
	LDA.b $06
	STA.b $0A
	LDA.b $00
	STA.b $0B
	LDX.b $01
	LDA.w $1B10,x
	ORA.b #$80
	STA.w $1B10,x
	LDA.b #$02
	STA.b $0C
CODE_299CBE:
	LDX.b #$04
CODE_299CC0:
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	BEQ.b CODE_299CCB
	DEX
	BPL.b CODE_299CC0
	JMP.w CODE_299D24

CODE_299CCB:
	JSL.l CODE_279C97
	LDA.b $08
	STA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	LDA.b $09
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	LDA.b $0B
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	LDA.b $0A
	STA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.w DATA_21C69D,y
	STA.w $0679,x
	LDA.b $0B
	CLC
	ADC.w DATA_21C69F,y
	STA.b $0B
	LDA.b $0A
	ADC.w DATA_21C6A1,y
	STA.b $0A
	LDA.w $1CEF
	CMP.b #$D1
	BEQ.b CODE_299D12
	LDY.b $0C
	LDA.w DATA_21C6A3,y
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	LDA.w DATA_21C6A6,y
	STA.b $4D,x
	INC.w $06B7,x
	LDA.b #!Define_SMB3_SpriteID_NorSpr088_YellowWavyCheepCheep
	BNE.b CODE_299D14					; Note: This will always branch.

CODE_299D12:
	LDA.b #!Define_SMB3_SpriteID_NorSpr06E_BouncingGreenParakoopa
CODE_299D14:
	STA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	LDA.b #$02
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	LDA.b #$02
	STA.w $1FE9,x
	STA.w $1FF1,x
CODE_299D24:
	DEC.b $0C
	BPL.b CODE_299CBE
	PLA
	TAY
	PLA
	TAX
	RTS

;--------------------------------------------------------------------

CODE_299D2D:
	STA.b $0F
	TXA
	PHA
	LDA.w $1A1C
	PHA
	LDA.w $1A44
	PHA
	LDX.b #$06
CODE_299D3B:
	LDA.w !RAM_SMB3_Level_ShooterSpr_SpriteID,x
	STA.w $1A16,x
	LDA.w !RAM_SMB3_Level_ShooterSpr_YPosHi,x
	STA.w $1A1E,x
	LDA.w !RAM_SMB3_Level_ShooterSpr_YPosLo,x
	STA.w $1A26,x
	LDA.w !RAM_SMB3_Level_ShooterSpr_XPosHi,x
	STA.w $1A2E,x
	LDA.w !RAM_SMB3_Level_ShooterSpr_XPosLo,x
	STA.w $1A36,x
	LDA.w $1A3D,x
	STA.w $1A3E,x
	LDA.w $06E3,x
	STA.w $06E4,x
	LDA.w $06DB,x
	STA.w $06DC,x
	LDA.w $1A57,x
	STA.w $1A58,x
	DEX
	BPL.b CODE_299D3B
	PLA
	TAX
	PLA
	BEQ.b CODE_299D81
	LDA.w $1B10,x
	AND.b #$7F
	STA.w $1B10,x
CODE_299D81:
	LDA.w $1B41,y
	AND.b #$F0
	LSR
	LSR
	LSR
	LSR
	STA.w !RAM_SMB3_Level_ShooterSpr_YPosHi
	LDA.w $1B41,y
	AND.b #$0F
	ASL
	ASL
	ASL
	ASL
	STA.w !RAM_SMB3_Level_ShooterSpr_YPosLo
	LDA.b $06
	STA.w !RAM_SMB3_Level_ShooterSpr_XPosHi
	LDA.b $00
	STA.w !RAM_SMB3_Level_ShooterSpr_XPosLo
	LDA.b #$00
	STA.w $06DB
	STA.w $1A57
	LDA.b #$60
	LDX.b $0F
	CPX.b #$04
	BNE.b CODE_299DB5
	LDA.b #$00
CODE_299DB5:
	STA.w $06E3
	LDX.b $01
	STX.w $1A3D
	LDA.w $1B10,x
	ORA.b #$80
	STA.w $1B10,x
	LDA.b $0F
	STA.w !RAM_SMB3_Level_ShooterSpr_SpriteID
	PLA
	TAX
	RTS

;--------------------------------------------------------------------

CODE_299DCD:
	LDY.b $25
	LDA.w $0543
	CLC
	ADC.w DATA_21C6A9,y
	AND.b #$F0
	STA.b $05
	LDA.w $0542
	ADC.w DATA_21C6AB,y
	STA.b $06
	LDY.b !RAM_SMB3_Level_ScreensInLvl
	CMP.w DATA_21CEED+$01,y
	BCC.b CODE_299DF5
	BNE.b CODE_299DF2
	LDA.b $05
	CMP.w DATA_21CEFD+$01,y
	BCC.b CODE_299DF5
CODE_299DF2:
	JMP.w CODE_299E7A

CODE_299DF5:
	LDX.b $06
	LDA.w $1B00,x
	BMI.b CODE_299E12
	STA.b $01
	TAX
	ASL
	CLC
	ADC.b $01
	TAY
CODE_299E04:
	INY
	INY
	INY
	LDA.w !RAM_SMB3_Level_SpriteListData,y
	LSR
	LSR
	LSR
	LSR
	CMP.b $06
	BEQ.b CODE_299E13
CODE_299E12:
	RTS

CODE_299E13:
	LDA.w $1B3E,y
	CMP.b #$FF
	BEQ.b CODE_299E12
	LDA.w $1B10,x
	INX
	CMP.b #$00
	BMI.b CODE_299E04
	LDA.w !RAM_SMB3_Level_SpriteListData,y
	ASL
	ASL
	ASL
	ASL
	CMP.b $05
	BNE.b CODE_299E04
	DEX
	STX.b $01
	STA.b $00
	LDA.w $1B3F,y
	CMP.b #!Define_SMB3_SpriteID_NorSpr0B4_StartOfGeneratorSprites
	BCC.b CODE_299E3F
	SBC.b #!Define_SMB3_SpriteID_NorSpr0B4_StartOfGeneratorSprites-$01
	STA.w !RAM_SMB3_Level_GenSpr_SpriteID
	RTS

CODE_299E3F:
	LDX.b #$04
CODE_299E41:
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	BEQ.b CODE_299E4C
	DEX
	BPL.b CODE_299E41
	JMP.w CODE_299E7A

CODE_299E4C:
	LDA.b $00
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	LDA.b $06
	STA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	LDA.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	DEY
	LDA.w !RAM_SMB3_Level_SpriteListData,y
	ASL
	ASL
	ASL
	ASL
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	DEY
	LDA.w !RAM_SMB3_Level_SpriteListData,y
	STA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	LDY.b $01
	LDA.w $1B10,y
	ORA.b #$80
	STA.w $1B10,y
	TYA
	STA.w $0659,x
	INC.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
SMB3_GenSpr00_NoGenerator:
.Main:
CODE_299E7A:
	RTS

;--------------------------------------------------------------------

	%ROUTINE_SMB3_ProcessGeneratorSprite(NULLROM)				; $299E7B
	%ROUTINE_SMB3_GenSprXX_DisableGenerators(NULLROM)			; $299E9A
	%ROUTINE_SMB3_GenSpr06_LeftMovingFallingPlatformGenerator(NULLROM)	; $299EA5
	%ROUTINE_SMB3_GenSpr05_BGCloudGenerator(NULLROM)			; $299F24
	%ROUTINE_SMB3_GenSpr07_SpawnMiniChestGenerator(NULLROM)			; $299F7E
	%ROUTINE_SMB3_GenSpr01_FlyingRedCheepCheepGenerator(NULLROM)		; $299FD1
	%ROUTINE_SMB3_GenSpr02_SpinyCheepCheepGenerator(NULLROM)		; $29A02A
	%ROUTINE_SMB3_GenSpr04_UnusedGreenParabuzzyGenerator(NULLROM)		; $29A084

;--------------------------------------------------------------------

CODE_29A0D0:
	LDX.b #$04
CODE_29A0D2:
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	BEQ.b CODE_29A0F6
	DEX
	BPL.b CODE_29A0D2
	PLA
	PLA
	RTS

;--------------------------------------------------------------------

CODE_29A0DD:
	STA.b $00
	LDY.b #$00
	LDX.b #$04
CODE_29A0E3:
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	BEQ.b CODE_29A0F0
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CMP.b $00
	BNE.b CODE_29A0F0
	INY
CODE_29A0F0:
	DEX
	BPL.b CODE_29A0E3
	LDX.b $9B
	RTS

;--------------------------------------------------------------------

CODE_29A0F6:
	JSL.l CODE_279C97
	LDA.b #$02
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	RTS

;--------------------------------------------------------------------

; Note: Routine that initializes RAM during level load?

CODE_29A100:
	LDA.w $0561
	BEQ.b CODE_29A106
	RTS

CODE_29A106:
	LDY.b #$09
CODE_29A108:
	STA.w !RAM_SMB3_Level_ExtSpr_SpriteID,y
	CPY.b #$08
	BCS.b CODE_29A112
	STA.w !RAM_SMB3_Level_ShooterSpr_SpriteID,y
CODE_29A112:
	CPY.b #$05
	BCS.b CODE_29A11C
	STA.w $079F,y
	STA.w $07A4,y
CODE_29A11C:
	CPY.b #$03
	BEQ.b CODE_29A135
	BCS.b CODE_29A138
	STA.w !RAM_SMB3_Level_BreathSpr_MovementTimer,y
	STA.w !RAM_SMB3_Level_SplashSpr_DespawnTimer,y
	STA.w !RAM_SMB3_Level_MExtSpr_SpriteID,y
	CPY.b #$02
	BCS.b CODE_29A135
	STA.w $06B4,y
	STA.w !RAM_SMB3_Level_FireSpr_CurrentState,y
CODE_29A135:
	STA.w !RAM_SMB3_CoinSpr_SpriteExitsFlag,y
CODE_29A138:
	DEY
	BPL.b CODE_29A108
	STA.w $1CFF
	STA.l $7E3973
	STA.w !RAM_SMB3_Level_ScreenFlashTimer
	STA.w !RAM_SMB3_Level_Player_SpinningTimer
	STA.w !RAM_SMB3_Level_ShakeLayer1Timer
	STA.w !RAM_SMB3_Level_ShakeLayer1YOffset
	STA.w !RAM_SMB3_Level_Player_DisableControlsTimer
	STA.w !RAM_SMB3_Level_GenSpr_SpriteID
	STA.w $1CF1
	STA.w $1A45
	STA.w $0781
	STA.w $0780
	LDY.b #$2F
CODE_29A162:
	STA.w $1B10,y
	DEY
	BPL.b CODE_29A162
	STY.w $0561
	STA.w $058B
	STA.w $1B00
	STA.w !RAM_SMB3_Level_Player_IsSwimmingFlag
	STA.w $0546
	STA.w $05FE
	STA.w $05FF
	STA.w $05FD
	STA.w !RAM_SMB3_Level_AutoscrollLayerYSpeed
	STA.b $00
	TAX
	TAY
	INY
CODE_29A188:
	CPX.b #$10
	BEQ.b CODE_29A1CE
	LDA.w !RAM_SMB3_Level_SpriteListData,y
	CMP.b #$FF
	BEQ.b CODE_29A1B7
	LDA.w !RAM_SMB3_Level_IsVerticalLevelFlag
	PHP
	LDA.w $1B41,y
	PLP
	BEQ.b CODE_29A1A0
	LDA.w $1B42,y
CODE_29A1A0:
	LSR
	LSR
	LSR
	LSR
	STA.b $01
	CPX.b $01
	BNE.b CODE_29A1B7
	INC.b $00
	LDA.b $00
	STA.w $1B01,x
	INY
	INY
	INY
	JMP.w CODE_29A188

CODE_29A1B7:
	LDA.b $00
	CPX.b #$0F
	BEQ.b CODE_29A1C0
	STA.w $1B01,x
CODE_29A1C0:
	CMP.w $1B00,x
	BNE.b CODE_29A1CA
	LDA.b #$FF
	STA.w $1B00,x
CODE_29A1CA:
	INX
	JMP.w CODE_29A188

CODE_29A1CE:
	LDX.b #$07
CODE_29A1D0:
	LDA.b #$00
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	DEX
	BPL.b CODE_29A1D0
	LDA.b #$4F
	STA.w $071E
	LDA.w $0560
	CMP.b #$0A
	BNE.b CODE_29A1EE
	LDA.b #$01
	STA.w $0665
	LDA.b #$47
	STA.w $0675
CODE_29A1EE:
	LDA.w !RAM_SMB3_Level_IsVerticalLevelFlag
	BNE.b CODE_29A24A
	LDA.w $0210
	PHA
	LDA.w DATA_21C699
	SEC
	SBC.w DATA_21C699+$01
	CLC
	ADC.w $0210
	AND.b #$F0
	STA.b $0D
	LDA.b $12
	PHA
	ADC.w DATA_21C699+$02
	STA.b $0E
	LDA.b #$01
	STA.b $25
	LDA.w $0210
	SEC
	SBC.b #$10
	STA.w $0210
	BCS.b CODE_29A21F
	DEC.b $12
CODE_29A21F:
	LDA.w $0210
	ADC.b #$10
	AND.b #$F0
	STA.w $0210
	BCC.b CODE_29A22D
	INC.b $12
CODE_29A22D:
	JSR.w CODE_299AE0
	JSR.w CODE_299AE0
	LDA.b $0E
	CMP.b $12
	BNE.b CODE_29A21F
	LDA.b $0D
	CMP.w $0210
	BNE.b CODE_29A21F
	PLA
	STA.b $12
	PLA
	STA.w $0210
	PLA
	PLA
	RTS

CODE_29A24A:
	LDA.w $0543
	PHA
	CLC
	ADC.w DATA_21C6AA
	AND.b #$F0
	STA.b $0D
	LDA.w $0542
	PHA
	CLC
	ADC.w DATA_21C6AB+$01
	STA.b $0E
	LDA.b #$00
	STA.b $25
	LDA.w $0543
	SEC
	SBC.b #$10
	STA.w $0543
	BCS.b CODE_29A272
	DEC.w $0542
CODE_29A272:
	LDA.w $0543
	ADC.b #$10
	AND.b #$F0
	STA.w $0543
	BCC.b CODE_29A281
	INC.w $0542
CODE_29A281:
	JSR.w CODE_299DCD
	JSR.w CODE_299DCD
	LDA.b $0E
	CMP.w $0542
	BNE.b CODE_29A272
	LDA.b $0D
	CMP.w $0543
	BNE.b CODE_29A272
	PLA
	STA.w $0542
	PLA
	STA.w $0543
	PLA
	PLA
	RTS

;--------------------------------------------------------------------

DATA_29A2A0:
	db $71,$A4,$A5,$A9,$98,$99,$AA,$A6
	db $9A,$9B,$A7,$A8,$9A,$9B,$A7,$A8
	db $98,$99,$AA,$A6,$71,$A4,$A5,$A9
	db $71,$A4,$A5,$BE,$98,$99,$BF,$20
	db $9A,$9B,$21,$22,$9A,$9B,$21,$22
	db $98,$99,$BF,$20,$71,$A4,$A5,$BE

DATA_29A2D0:
	db $22,$22,$22,$22,$22,$22,$22,$22
	db $22,$22,$22,$22,$62,$62,$62,$62
	db $62,$62,$62,$62,$62,$62,$62,$62
	db $22,$22,$22,$22,$22,$22,$22,$23
	db $22,$22,$23,$23,$62,$62,$63,$63
	db $62,$62,$62,$63,$62,$62,$62,$62

CODE_29A300:
	PHB
	PHK
	PLB
	LDA.b $5F,x
	STA.b $0A
	LDA.b $44,x
	STA.b $0B
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenYPos,x
	STA.b $07
	REP.b #$30
	LDA.b $0A
	SEC
	SBC.w $0210
	STA.b $0A
	CLC
	ADC.w #$0008
	STA.b $0C
	CLC
	ADC.w #$0008
	STA.b $0E
	SEP.b #$20
	LDY.w $00C6,x
	PHY
	LDA.w $0679,x
	LDX.w #$000C
	STX.b $08
	CMP.b #$40
	BNE.b CODE_29A33A
	LDX.w #$0000
CODE_29A33A:
	LDA.w !RAM_SMB3_Level_GraphicsAndPaletteSettingFromHeader
	CMP.b #$1B
	BNE.b CODE_29A346
	TXA
	CLC
	ADC.b #$18
	TAX
CODE_29A346:
	LDA.w DATA_29A2A0,x
	STA.w SMB3_OAMBuffer[$00].Tile,y
	LDA.w DATA_29A2D0,x
	STA.w SMB3_OAMBuffer[$00].Prop,y
	INY
	INY
	INY
	INY
	INX
	DEC.b $08
	BNE.b CODE_29A346
	LDX.w #$0000
	PLY
	PHY
CODE_29A360:
	LDA.b $0A,x
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	STA.w SMB3_OAMBuffer[$02].XDisp,y
	STA.w SMB3_OAMBuffer[$03].XDisp,y
	LDA.b $07
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$01].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$02].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$03].YDisp,y
	REP.b #$20
	TYA
	CLC
	ADC.w #$0010
	TAY
	SEP.b #$20
	INX
	INX
	CPX.w #$0006
	BCC.b CODE_29A360
	SEP.b #$10
	REP.b #$20
	PLA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDX.b #$00
CODE_29A3A2:
	LDA.b $0B,x
	BEQ.b CODE_29A3A8
	LDA.b #$01
CODE_29A3A8:
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$02].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$03].Slot,y
	INY
	INY
	INY
	INY
	INX
	INX
	CPX.b #$06
	BCC.b CODE_29A3A2
	LDX.b $9B
	PLB
	RTL

;--------------------------------------------------------------------

CODE_29A3C2:
	LDA.l $7FC57A,x
	BNE.b CODE_29A3DE
	JSR.w CODE_29A52D
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_NorSpr05E_DoubleHorizontalCrossingRotoDisc
	BEQ.b CODE_29A3DE
	CMP.b #!Define_SMB3_SpriteID_NorSpr060_DoubleClockwiseRotoDisc
	BEQ.b CODE_29A3DE
	CMP.b #!Define_SMB3_SpriteID_NorSpr051_DoubleCounterclockwiseRotoDisc
	BEQ.b CODE_29A3DE
	CMP.b #!Define_SMB3_SpriteID_NorSpr05F_DoubleVerticalCrossingRotoDisc
	BNE.b CODE_29A3E8
CODE_29A3DE:
	LDA.l $7FC57A,x
	EOR.b #$01
	STA.l $7FC57A,x
CODE_29A3E8:
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_NorSpr02F_Boo
	BEQ.b CODE_29A412
	LDA.b #$8C
	STA.b $01
	LDA.w $0669,x
	BEQ.b CODE_29A3FE
	STZ.b $03
	LDA.b #$88
	BRA.b CODE_29A404

CODE_29A3FE:
	LDA.b #$C0
	STA.b $03
	LDA.b #$8A
CODE_29A404:
	STA.b $00
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$0E
	ORA.b #$20
	STA.b $02
	TSB.b $03
	BRA.b CODE_29A452

CODE_29A412:
	REP.b #$10
	LDY.w $00C6,x
	LDA.b #$F0
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	STA.w SMB3_OAMBuffer[$01].YDisp,y
	STA.w SMB3_OAMBuffer[$02].YDisp,y
	STA.w SMB3_OAMBuffer[$03].YDisp,y
	SEP.b #$10
	LDA.w $0679,x
	BEQ.b CODE_29A42E
	LDA.b #$40
CODE_29A42E:
	ORA.b #$2A
	STA.b $02
	STA.b $03
	LDA.b #$AC
	STA.b $00
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	CMP.b #$06
	BNE.b CODE_29A445
	LDA.b #$AA
	STA.b $02
	BRA.b CODE_29A4C0

CODE_29A445:
	LDA.w $0669,x
	BEQ.b CODE_29A4C0
	LDA.b #$AE
	STA.b $00
	LDA.b #$84
	STA.b $01
CODE_29A452:
	LDA.b $01
	STA.b $0A
	LDA.b $03
	STA.b $0B
	LDA.l $7FC572,x
	CMP.b #$01
	BEQ.b CODE_29A48F
	CMP.b #$03
	BEQ.b CODE_29A48F
	LDA.l $7FC53A,x
	STA.b $0C
	LDA.l $7FC54A,x
	STA.b $0D
	LDA.l $7FC55A,x
	STA.b $0E
	LDA.l $7FC56A,x
	STA.b $0F
	REP.b #$10
	LDY.b $C6,x
	INY
	INY
	INY
	INY
	INY
	INY
	INY
	INY
	JSR.w CODE_29A4E2
	SEP.b #$10
CODE_29A48F:
	LDA.l $7FC572,x
	CMP.b #$02
	BEQ.b CODE_29A4C0
	CMP.b #$05
	BEQ.b CODE_29A4C0
	LDA.l $7FC532,x
	STA.b $0C
	LDA.l $7FC542,x
	STA.b $0D
	LDA.l $7FC552,x
	STA.b $0E
	LDA.l $7FC562,x
	STA.b $0F
	REP.b #$10
	LDY.b $C6,x
	INY
	INY
	INY
	INY
	JSR.w CODE_29A4E2
	SEP.b #$10
CODE_29A4C0:
	LDA.b $00
	STA.b $0A
	LDA.b $02
	STA.b $0B
	LDA.b $5F,x
	STA.b $0C
	LDA.b $44,x
	STA.b $0D
	LDA.b $71,x
	STA.b $0E
	LDA.b $56,x
	STA.b $0F
	REP.b #$10
	LDY.b $C6,x
	JSR.w CODE_29A4E2
	SEP.b #$10
	RTL

CODE_29A4E2:
	REP.b #$20
	LDA.b $0C
	SEC
	SBC.w $0210
	STA.b $0C
	LDA.b $0E
	SEC
	SBC.w $0216
	STA.b $0E
	SEP.b #$20
	LDA.b $0C
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	LDA.b $0E
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	LDA.b $0A
	STA.w SMB3_OAMBuffer[$00].Tile,y
	LDA.b $0B
	STA.w SMB3_OAMBuffer[$00].Prop,y
	LDA.b $0F
	BNE.b CODE_29A514
	LDA.b $0E
	CMP.b #$F0
	BCC.b CODE_29A519
CODE_29A514:
	LDA.b #$F0
	STA.w SMB3_OAMBuffer[$00].YDisp,y
CODE_29A519:
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b $0D
	BEQ.b CODE_29A527
	LDA.b #$01
CODE_29A527:
	ORA.b #$02
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	RTS

CODE_29A52D:
	LDA.l $7FC572,x
	DEC
	BPL.b CODE_29A579
	LDA.l $7FC532,x
	STA.l $7FC53A,x
	LDA.l $7FC542,x
	STA.l $7FC54A,x
	LDA.l $7FC552,x
	STA.l $7FC55A,x
	LDA.l $7FC562,x
	STA.l $7FC56A,x
	LDA.b $5F,x
	STA.l $7FC532,x
	LDA.b $44,x
	STA.l $7FC542,x
	LDA.b $71,x
	STA.l $7FC552,x
	LDA.b $56,x
	STA.l $7FC562,x
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_NorSpr02F_Boo
	BNE.b CODE_29A577
	LDA.b #$05
	BRA.b CODE_29A579

CODE_29A577:
	LDA.b #$04
CODE_29A579:
	STA.l $7FC572,x
	RTS

;--------------------------------------------------------------------

CODE_29A57E:
	LDA.w $1CD7,x
	SEC
	SBC.b $5F,x
	PHA
	LDA.w $1CC8,x
	SBC.b $44,x
	TAY
	PLA
	CLC
	ADC.w $1CD7,x
	STA.b $5F,x
	TYA
	ADC.w $1CC8,x
	STA.b $44,x
	LDA.w $1CD7,x
	SEC
	SBC.l $7FC532,x
	PHA
	LDA.w $1CC8,x
	SBC.l $7FC542,x
	TAY
	PLA
	CLC
	ADC.w $1CD7,x
	STA.l $7FC532,x
	TYA
	ADC.w $1CC8,x
	STA.l $7FC542,x
	LDA.w $1CD7,x
	SEC
	SBC.l $7FC53A,x
	PHA
	LDA.w $1CC8,x
	SBC.l $7FC54A,x
	TAY
	PLA
	CLC
	ADC.w $1CD7,x
	STA.l $7FC53A,x
	TYA
	ADC.w $1CC8,x
	STA.l $7FC54A,x
	LDA.b $C6,x
	CLC
	ADC.b #$10
	STA.b $C6,x
	RTL

;--------------------------------------------------------------------

CODE_29A5E4:
	LDA.w $1CDC,x
	SEC
	SBC.b $71,x
	PHA
	LDA.w $0689,x
	SBC.b $56,x
	TAY
	PLA
	CLC
	ADC.w $1CDC,x
	STA.b $71,x
	TYA
	ADC.w $0689,x
	STA.b $56,x
	LDA.w $1CDC,x
	SEC
	SBC.l $7FC552,x
	PHA
	LDA.w $0689,x
	SBC.l $7FC562,x
	TAY
	PLA
	CLC
	ADC.w $1CDC,x
	STA.l $7FC552,x
	TYA
	ADC.w $0689,x
	STA.l $7FC562,x
	LDA.w $1CDC,x
	SEC
	SBC.l $7FC55A,x
	PHA
	LDA.w $0689,x
	SBC.l $7FC56A,x
	TAY
	PLA
	CLC
	ADC.w $1CDC,x
	STA.l $7FC55A,x
	TYA
	ADC.w $0689,x
	STA.l $7FC56A,x
	LDA.b $C6,x
	CLC
	ADC.b #$10
	STA.b $C6,x
	RTL

%FREE_BYTES(NULLROM, 182, $FF)

;--------------------------------------------------------------------

; Note: Some routine related to initializing the overworld

CODE_29A700:
	JSR.w CODE_29A7C3
	LDX.w !RAM_SMB3_Global_CurrentWorld
	LDA.w DATA_21E3A5,x
	STA.w $1EEC
	TXA
	ASL
	TAX
	REP.b #$20
	LDA.w SMB3_OverworldSpriteInitialYPosLoDataPtrs,x
	STA.b $0A
	LDA.w SMB3_OverworldSpriteInitialXPosHiDataPtrs,x
	STA.b $0C
	LDA.w SMB3_OverworldSpriteInitialXPosLoDataPtrs,x
	STA.b $0E
	LDA.w SMB3_OverworldSpriteIDDataPtrs,x
	STA.b $08
	LDA.w SMB3_OverworldHammerBroPrizeDataPtrs,x
	STA.b $06
	SEP.b #$20
	LDY.b #$08
CODE_29A72E:
	LDA.b ($0A),y
	STA.w !RAM_SMB3_Overworld_OWSpr_InitialYPosLo,y
	LDA.b ($0C),y
	STA.w !RAM_SMB3_Overworld_OWSpr_InitialXPosHi,y
	LDA.b ($0E),y
	STA.w !RAM_SMB3_Overworld_OWSpr_InitialXPosLo,y
	LDA.b ($08),y
	STA.w !RAM_SMB3_Overworld_OWSpr_SpriteID,y
	TYX
	LDA.b ($06),y
	STA.l !RAM_SMB3_Overworld_OWSpr_HammerBroPrizeTable,x
	DEY
	BPL.b CODE_29A72E
	LDY.w !RAM_SMB3_Global_CurrentWorld
	LDX.w $072B
	DEX
CODE_29A753:
	LDA.w SMB3_StartingOverworldPlayerYPos,y
	STA.l $7E3975,x
	STA.w !RAM_SMB3_Level_Player_XPosHi
	STA.w !RAM_SMB3_Level_NorSpr_XPosHi
	STA.l $7E397D
	STA.l $7E397E
	LDA.b #$20			; Note: Initial X Pos on the overworld.
	STA.l $7E3979,x
	STA.w $0047
	STA.w $0048
	STA.l $7E3981
	STA.l $7E3982
	LDA.b #$01
	STA.l $7E3992,x
	LDA.b #$00
	STA.l $7E397B,x
	STA.l $7E3977,x
	STA.w $0045
	STA.w $0046
	STA.l $7E397F
	STA.l $7E3980
	STA.l $7E3983,x
	STA.l $7E3985,x
	STA.l $7E3987,x
	STA.l $7E3989,x
	STA.w $0722,x
	STA.w $0724,x
	DEX
	BPL.b CODE_29A753
	STX.w !RAM_SMB3_BattleMode_CurrentStage
	STA.l $7E3994
	STA.l $7E3970
	STA.l $7E3971
	RTL

CODE_29A7C3:
	LDY.w !RAM_SMB3_Global_CurrentWorld
	LDA.w !RAM_SMB3_Global_RandomByte02
	AND.b #$0F
	TAX
	LDA.w DATA_21E57D,x
	CLC
	ADC.w DATA_21E575,y
	STA.w !RAM_SMB3_Overworld_FleeingAirshipPosPtrIndex
	RTS

;--------------------------------------------------------------------

CODE_29A7D7:
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.w DATA_21E58D,x
	STA.b $00
	LDA.w $0738
	CLC
	ADC.b $00
	TAX
	LDA.w SMB3_IndividualPlayerData[$00].ReserveSlots,x
	CMP.b #$01
	BEQ.b CODE_29A7F2
	JSL.l CODE_238C1B
	RTS

CODE_29A7F2:
	LDX.w $0738
	LDA.w $1DC6,x
	JSL.l SMB3_ExecutePtr_Absolute

DATA_29A7FC:
	dw CODE_29B99E
	dw CODE_29A81C
	dw CODE_29A81C
	dw CODE_29A81C
	dw CODE_29A81C
	dw CODE_29B99E
	dw CODE_29A81C
	dw CODE_29A821
	dw CODE_29A81C
	dw CODE_29A81C
	dw CODE_29B99E
	dw CODE_29B99E
	dw CODE_29B99E
	dw CODE_29B99E
	dw CODE_29B99E
	dw CODE_29B99E

CODE_29A81C:
	JSL.l CODE_238C1B
	RTS

CODE_29A821:
	LDA.b !RAM_SMB3_Overworld_CurrentWarpWhistleState
	JSL.l SMB3_ExecutePtr_Absolute

DATA_29A827:
	dw SMB3_WarpWhistleState00_Unknown_Main
	dw CODE_29A8D7
	dw SMB3_WarpWhistleState02_MovingWind_Main
	dw SMB3_WarpWhistleState03_InitializeWarp_Main
	dw SMB3_WarpWhistleState04_MovePlayerToNewPosition_Main
	dw CODE_29A8D7

CODE_29A833:
	JSR.w CODE_29A821
	RTL

;--------------------------------------------------------------------

CODE_29A837:
	LDA.b $57
	BNE.b CODE_29A85D
	LDA.b #$20
	STA.b $57
	LDA.b #$12
	STA.w !RAM_SMB3_Global_MainScreenLayersMirror
	LDA.b #$01
	STA.w !RAM_SMB3_Global_SubScreenLayersMirror
	LDA.b #$02
	STA.w !RAM_SMB3_Global_ColorMathInitialSettingsMirror
	LDA.b #$20
	STA.w !RAM_SMB3_Global_ColorMathSelectAndEnableMirror
	LDA.w !RAM_SMB3_Overworld_EnableDarknessFlag
	BEQ.b CODE_29A85D
	LDA.b #$01
	STA.w !RAM_SMB3_Global_SubScreenWindowMaskMirror
CODE_29A85D:
	LDA.b $57
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR] Reducing flashing speed.
	AND.b #$08
else
	AND.b #$04
endif
	LSR
	TAX
	REP.b #$20
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000
	LDA.l DATA_2387E0,x
else
	LDA.l DATA_29A889,x
endif
	STA.w SMB3_PaletteMirror[$00].LowByte
	SEP.b #$20
	LDA.b #$01
	STA.w !RAM_SMB3_Global_UpdateEntirePaletteFlag
	DEC.b $57
	BNE.b CODE_29A888
	LDA.b #$13
	STA.w !RAM_SMB3_Global_MainScreenLayersMirror
	STZ.w !RAM_SMB3_Global_SubScreenLayersMirror
	STZ.w !RAM_SMB3_Global_ColorMathInitialSettingsMirror
	STZ.w !RAM_SMB3_Global_ColorMathSelectAndEnableMirror
	STZ.w !RAM_SMB3_Global_SubScreenWindowMaskMirror
CODE_29A888:
	RTS

DATA_29A889:
	dw $0000,$7FFF

;--------------------------------------------------------------------

; Note: This code looks similar to UseReserveWhistle. Maybe this is a leftover routine?

SMB3_WarpWhistleState00_Unknown:
.Main:
;$29A88D
	LDY.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDX.b #$00
	LDA.w $0047,y
	SEC
	SBC.w $0210
	CMP.b #$80
	BCS.b CODE_29A89F
	LDX.b #$01
CODE_29A89F:
	STX.b $58
	LDA.w DATA_21E58F,x
	STA.b !RAM_SMB3_Level_NorSpr_YPosHi
	LDA.w !RAM_SMB3_Level_Player_XPosHi,y
	STA.b $54
	STA.l $7E3974
	LDX.b #$05
	LDA.w $0730
	BNE.b CODE_29A8D0
	LDA.w !RAM_SMB3_Level_Player_XPosHi,y
	STA.w $0730
	LDA.w $0047,y
	STA.w $0732
	LDA.w $0045,y
	STA.w $0731
	LDA.w !RAM_SMB3_Overworld_Mario_UnusedRAM2,y
	STA.w $0733
	LDX.b #$01
CODE_29A8D0:
	STX.b !RAM_SMB3_Overworld_CurrentWarpWhistleState
	JSL.l CODE_238C1B
	RTS

;--------------------------------------------------------------------

CODE_29A8D7:
	JSR.w CODE_29A837
	LDA.b $57
	BNE.b CODE_29A8E0
	INC.b !RAM_SMB3_Overworld_CurrentWarpWhistleState
CODE_29A8E0:
	JSL.l CODE_238C1B
	RTS

;--------------------------------------------------------------------

SMB3_WarpWhistleState02_MovingWind:
.Main:
;$29A8E5
	INC.b $57
	LDY.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDX.b $58
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi
	CLC
	ADC.w DATA_21E591,x
	STA.b !RAM_SMB3_Level_NorSpr_YPosHi
	LDA.w !RAM_SMB3_Overworld_Mario_XPosLo,y
	SEC
	SBC.w $0210
	CMP.b !RAM_SMB3_Level_NorSpr_YPosHi
	BNE.b CODE_29A908
	LDA.b #$F0
	STA.l $7E3974
	JMP.w CODE_29A927

CODE_29A908:
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi
	CMP.w DATA_21E593,x
	BNE.b CODE_29A927
	LDA.w !RAM_SMB3_Global_CurrentWorld
	STA.w $042A
	LDA.b #$08
	STA.w !RAM_SMB3_Global_CurrentWorld
	LDY.b #$0D
	LDA.b #!Define_SMB3_SpriteID_OWSpr00_NoSprite
CODE_29A91E:
	STA.w !RAM_SMB3_Overworld_OWSpr_SpriteID,y
	DEY
	BPL.b CODE_29A91E
	INC.b !RAM_SMB3_Overworld_CurrentWarpWhistleState
	RTS

CODE_29A927:
	JSL.l CODE_238C1B
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi
	STA.b $01
	LDA.b #$01
	STA.b $02
	JMP.w CODE_29AA70

;--------------------------------------------------------------------

SMB3_WarpWhistleState03_InitializeWarp:
.Main:
;$29A936
	LDA.b #$00
	STA.b $57
	LDA.b #$F8
	STA.b !RAM_SMB3_Level_NorSpr_YPosHi
	INC.b !RAM_SMB3_Overworld_CurrentWarpWhistleState
	LDY.w $042A
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b #$00
	STA.w $0722,x
	STA.w $0724,x
	STA.b $45,x
	LDA.w World9PlayerStartingXPosLo,y
	STA.b !RAM_SMB3_Overworld_Mario_XPosLo,x
	LDA.b #$F0
	STA.b !RAM_SMB3_Level_NorSpr_YPosHi
	LDA.w World9PlayerStartingYPos,y
	STA.b $54
	LDA.b #$80
	STA.w $0711
	LDA.b #$03
	STA.w $0713
	LDA.b #$00
	STA.w $072C
	RTS

;--------------------------------------------------------------------

SMB3_WarpWhistleState04_MovePlayerToNewPosition:
.Main:
;$29A96E
	LDA.b #$00
	STA.w $0713
	LDY.w $042A
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	INC.b $57
	LDY.w $042A
	LDX.b $58
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi
	CLC
	ADC.w DATA_21E591,x
	STA.b !RAM_SMB3_Level_NorSpr_YPosHi
	CMP.w World9PlayerStartingXPosLo,y
	BNE.b CODE_29A99C
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.w World9PlayerStartingYPos,y
	STA.l $7E3974
	STA.b !RAM_SMB3_Overworld_Mario_YPosLo,x
	JMP.w CODE_29A9AB

CODE_29A99C:
	CMP.w DATA_21E593,x
	BNE.b CODE_29A9AB
	LDA.b #$00
	STA.b $57
	STA.b !RAM_SMB3_Overworld_CurrentWarpWhistleState
	LDA.b #$F8
	STA.b !RAM_SMB3_Level_NorSpr_YPosHi
CODE_29A9AB:
	JMP.w CODE_29A927

;--------------------------------------------------------------------

CODE_29A9AE:
	LDA.w $072E
	JSL.l SMB3_ExecutePtr_Absolute

DATA_29A9B5:
	dw CODE_29A9BB
	dw CODE_29A9D9
	dw CODE_29A9EF

CODE_29A9BB:
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b !RAM_SMB3_Overworld_Mario_YPosLo,x
	STA.l $7E3974
	CLC
	ADC.b #$10
	STA.b $54
	LDA.b !RAM_SMB3_Overworld_Mario_XPosHi,x
	STA.b !RAM_SMB3_Level_Player_YPosHi
	LDA.b !RAM_SMB3_Overworld_Mario_XPosLo,x
	STA.b !RAM_SMB3_Level_NorSpr_YPosHi
	INC.w $072E
	JSL.l CODE_238C1B
	RTL

CODE_29A9D9:
	JSR.w CODE_29A837
	LDA.b $57
	BNE.b CODE_29A9EA
	INC.w $072E
	LDA.b #$02
	LDA.b #!Define_SMAS_Sound0063_EnterLevel
	STA.w !RAM_SMB3_Global_SoundCh3
CODE_29A9EA:
	JSL.l CODE_238C1B
	RTL

CODE_29A9EF:
	LDA.b #$01
	STA.b $00
	JSR.w CODE_29AA47
	LDA.b $57
	CMP.b #$20
	BNE.b CODE_29AA10
	LDA.b #$10
	STA.w !RAM_SMB3_Overworld_CurrentProcess
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b #$00
	STA.w $073F,x
	STA.w $0728
	STA.w $072E
	RTL

CODE_29AA10:
	JSL.l CODE_238C1B
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b !RAM_SMB3_Overworld_Mario_YPosLo,x
	CLC
	ADC.b #$10
	STA.b $00
	LDA.b !RAM_SMB3_Overworld_Mario_XPosLo,x
	SEC
	SBC.w $0210
	STA.b $01
	LDA.b #$00
	STA.b $02
	LDA.b !RAM_SMB3_Overworld_Mario_XPosLo,x
	STA.w SMB3_OAMBuffer[$01].XDisp
	LDA.b #$80
	STA.w SMB3_OAMBuffer[$01].YDisp
	LDA.b #$00
	STA.w SMB3_OAMBuffer[$01].Tile
	LDA.b #$21
	STA.w SMB3_OAMBuffer[$01].Prop
	LDA.b #$02
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot
	JSR.w CODE_29AA70
	RTL

CODE_29AA47:
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$01
	BNE.b CODE_29AA6F
	LDA.b $57
	AND.b #$10
	LSR
	LSR
	LSR
	LSR
	TAY
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b $54
	CLC
	ADC.w DATA_21E5B0,y
	STA.b $54
	INC.b $57
	LDA.b $57
	AND.b #$10
	BEQ.b CODE_29AA6F
	LDA.b $54
	STA.l $7E3974
CODE_29AA6F:
	RTS

;--------------------------------------------------------------------

CODE_29AA70:
	LDX.b $02
	LDA.b $54
	STA.w SMB3_OAMBuffer[$18].YDisp
	LDA.b $02
	BEQ.b CODE_29AA8C
	LDA.l $7E3974
	CMP.b #$F0
	BNE.b CODE_29AAAB
	STA.w SMB3_OAMBuffer[$21].YDisp
	STA.w SMB3_OAMBuffer[$22].YDisp
	JMP.w CODE_29AAAB

CODE_29AA8C:
	LDA.b $57
	AND.b #$10
	BEQ.b CODE_29AAAB
	LDA.l $7E3974
	STA.w SMB3_OAMBuffer[$22].YDisp
	SEC
	SBC.b #$10
	STA.w SMB3_OAMBuffer[$21].YDisp
	LDA.w SMB3_OAMBuffer[$21].Tile
	CMP.b #$26
	BNE.b CODE_29AAAB
	LDA.b #$F0
	STA.w SMB3_OAMBuffer[$21].YDisp
CODE_29AAAB:
	LDA.w DATA_21E5B2,x
	STA.w SMB3_OAMBuffer[$18].Prop
	LDA.b $01
	STA.w SMB3_OAMBuffer[$18].XDisp
	LDA.b #$02
	STA.w SMB3_OAMTileSizeBuffer[$18].Slot
	LDY.w DATA_21E5B4,x
	LDA.b $57
	AND.b #$10
	BEQ.b CODE_29AAC7
	LDY.w DATA_21E5B6,x
CODE_29AAC7:
	STY.w SMB3_OAMBuffer[$18].Tile
	LDA.b $58
	BEQ.b CODE_29AAD6
	LDA.w SMB3_OAMBuffer[$18].Prop
	ORA.b #$40
	STA.w SMB3_OAMBuffer[$18].Prop
CODE_29AAD6:
	LDA.b $54
	STA.w SMB3_OAMBuffer[$00].YDisp
	LDA.b #$A8
	STA.w SMB3_OAMBuffer[$00].Tile
	LDA.b #$22
	STA.w SMB3_OAMBuffer[$00].Prop
	STZ.w SMB3_OAMBuffer[$00].XDisp
	LDA.b #$02
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot
	LDA.b $01
	AND.b #$80
	BEQ.b CODE_29AAFD
	LDA.b #$F0
	STA.w SMB3_OAMBuffer[$00].XDisp
	LDA.b #$AA
	STA.w SMB3_OAMBuffer[$00].Tile
CODE_29AAFD:
	RTS

;--------------------------------------------------------------------

CODE_29AAFE:
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b $93
	BNE.b CODE_29AB5E
	LDY.w !RAM_SMB3_Global_CurrentWorld
	LDA.b !RAM_SMB3_Overworld_Mario_YPosLo,x
	SEC
	SBC.w SMB3_StartingOverworldPlayerYPos,y
	STA.b $5C
	LDA.b !RAM_SMB3_Overworld_Mario_XPosLo,x
	SEC
	SBC.b #$20
	STA.b $60
	LDA.b #$00
	STA.b $66
	STA.b $61
	STA.b $5D
	LDA.b !RAM_SMB3_Overworld_Mario_XPosLo,x
	CMP.b #$20
	BCS.b CODE_29AB31
	LDA.b #$01
	STA.b $66
	LDA.b #$FF
	EOR.b $60
	TAY
	INY
	STY.b $60
CODE_29AB31:
	LDY.w !RAM_SMB3_Global_CurrentWorld
	LDA.b !RAM_SMB3_Overworld_Mario_YPosLo,x
	CMP.w SMB3_StartingOverworldPlayerYPos,y
	BCS.b CODE_29AB49
	LDA.b #$FF
	EOR.b $5C
	TAY
	INY
	STY.b $5C
	LDA.b $66
	ORA.b #$02
	STA.b $66
CODE_29AB49:
	LDY.b #$04
CODE_29AB4B:
	CLC
	LSR.b $5C
	ROR.b $5D
	CLC
	LSR.b $60
	ROR.b $61
	DEY
	BPL.b CODE_29AB4B
	LDA.b #$20
	STA.b $65
	INC.b $93
CODE_29AB5E:
	LDA.b #!Define_SMAS_Sound0063_SpinJump
	STA.w !RAM_SMB3_Global_SoundCh3
	LDA.b $66
	AND.b #$01
	BEQ.b CODE_29AB7F
	LDA.b $62
	CLC
	ADC.b $61
	STA.b $62
	LDA.b !RAM_SMB3_Overworld_Mario_XPosLo,x
	ADC.b $60
	STA.b !RAM_SMB3_Overworld_Mario_XPosLo,x
	LDA.b !RAM_SMB3_Overworld_Mario_XPosHi,x
	ADC.b #$00
	STA.b !RAM_SMB3_Overworld_Mario_XPosHi,x
	JMP.w CODE_29AB92

CODE_29AB7F:
	LDA.b $62
	SEC
	SBC.b $61
	STA.b $62
	LDA.b !RAM_SMB3_Overworld_Mario_XPosLo,x
	SBC.b $60
	STA.b !RAM_SMB3_Overworld_Mario_XPosLo,x
	LDA.b !RAM_SMB3_Overworld_Mario_XPosHi,x
	SBC.b #$00
	STA.b !RAM_SMB3_Overworld_Mario_XPosHi,x
CODE_29AB92:
	LDA.b $66
	AND.b #$02
	BEQ.b CODE_29ABA8
	LDA.b $5E
	CLC
	ADC.b $5D
	STA.b $5E
	LDA.b !RAM_SMB3_Overworld_Mario_YPosLo,x
	ADC.b $5C
	STA.b !RAM_SMB3_Overworld_Mario_YPosLo,x
	JMP.w CODE_29ABB5

CODE_29ABA8:
	LDA.b $5E
	SEC
	SBC.b $5D
	STA.b $5E
	LDA.b !RAM_SMB3_Overworld_Mario_YPosLo,x
	SBC.b $5C
	STA.b !RAM_SMB3_Overworld_Mario_YPosLo,x
CODE_29ABB5:
	DEC.b $65
	BNE.b CODE_29ABE2
CODE_29ABB9:
	LDA.b #$08
	STA.w $0728
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b #$00
	STA.b $93
	STA.w $005A,x
	STA.l $7E3985,x
	STA.l $7E3987,x
	LDA.b $43,x
	STA.l $7E397D,x
	LDA.b !RAM_SMB3_Overworld_Mario_XPosHi,x
	STA.l $7E397F,x
	LDA.b !RAM_SMB3_Overworld_Mario_XPosLo,x
	STA.l $7E3981,x
CODE_29ABE2:
	JSL.l CODE_238C1B
	RTL

;--------------------------------------------------------------------

CODE_29ABE7:
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b $47,x
	SEC
	SBC.b #$02
	STA.b $47,x
	LDA.b $45,x
	SBC.b #$00
	STA.b $45,x
	LDA.b $47,x
	SEC
	SBC.w $0210
	BNE.b CODE_29AC0E
	LDA.b #$00
	STA.w $0722,x
	STA.w $0724,x
	STA.l $7E3977,x
	INC.w $0728
CODE_29AC0E:
	LDA.b #!Define_SMAS_Sound0063_SpinJump
	STA.w !RAM_SMB3_Global_SoundCh3
	JSR.w CODE_29AC1B
	JSL.l CODE_238C1B
	RTL

;--------------------------------------------------------------------

CODE_29AC1B:
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b $43,x
	STA.w SMB3_OAMBuffer[$00].YDisp
	LDA.b #$A8
	STA.w SMB3_OAMBuffer[$00].Tile
	LDA.b #$20
	STA.w SMB3_OAMBuffer[$00].Prop
	LDA.b #$00
	STA.w SMB3_OAMBuffer[$00].XDisp
	LDA.b $47,x
	SEC
	SBC.w $0210
	AND.b #$80
	BEQ.b CODE_29AC46
	LDA.b #$F0
	STA.w SMB3_OAMBuffer[$00].XDisp
	LDA.b #$AA
	STA.w SMB3_OAMBuffer[$00].Tile
CODE_29AC46:
	LDA.b #$02
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot
	RTS

;--------------------------------------------------------------------

CODE_29AC4C:
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b #$F0
	STA.b !RAM_SMB3_Overworld_Mario_XPosLo,x
	LDY.w !RAM_SMB3_Global_CurrentWorld
	LDA.w SMB3_StartingOverworldPlayerYPos,y
	STA.b !RAM_SMB3_Overworld_Mario_YPosLo,x
	INC.w $0728
	JMP.w CODE_29AC0E

;--------------------------------------------------------------------

CODE_29AC61:
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b !RAM_SMB3_Overworld_Mario_XPosLo,x
	SEC
	SBC.b #$02
	STA.b !RAM_SMB3_Overworld_Mario_XPosLo,x
	CMP.b #$20
	BNE.b CODE_29AC72
	JMP.w CODE_29ABB9

CODE_29AC72:
	LDA.b #!Define_SMAS_Sound0063_SpinJump
	STA.w !RAM_SMB3_Global_SoundCh3
	JMP.w CODE_29AC0E

;--------------------------------------------------------------------

CODE_29AC7A:
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b $93
	BEQ.b CODE_29AC84
	JMP.w CODE_29AD61

CODE_29AC84:
	LDY.b #$0D
CODE_29AC86:
	LDA.w !RAM_SMB3_Overworld_OWSpr_SpriteID,y
	BNE.b CODE_29AC91
CODE_29AC8B:
	DEY
	BNE.b CODE_29AC86
	JMP.w CODE_29ACC1

CODE_29AC91:
	LDA.b $43,x
	CMP.w !RAM_SMB3_Overworld_OWSpr_InitialYPosLo,y
	BNE.b CODE_29AC8B
	LDA.b $45,x
	CMP.w !RAM_SMB3_Overworld_OWSpr_InitialXPosHi,y
	BNE.b CODE_29AC8B
	LDA.b $47,x
	CMP.w !RAM_SMB3_Overworld_OWSpr_InitialXPosLo,y
	BNE.b CODE_29AC8B
	LDA.w !RAM_SMB3_Overworld_OWSpr_SpriteID,y
	CMP.b #!Define_SMB3_SpriteID_OWSpr02_Airship
	BNE.b CODE_29ACB5
	LDA.b #$20
	STA.w $053D
	JMP.w CODE_29AC8B

CODE_29ACB5:
	CMP.b #!Define_SMB3_SpriteID_OWSpr0B_CoinShip
	BNE.b CODE_29AC8B
	LDA.b #!Define_SMB3_SpriteID_OWSpr03_HammerBro
	STA.w !RAM_SMB3_Overworld_OWSpr_SpriteID,y
	JMP.w CODE_29AC8B

CODE_29ACC1:
	LDA.l $7E397D,x
	SEC
	SBC.b $43,x
	STA.b $5C
	LDA.l $7E397F,x
	CMP.b $45,x
	BEQ.b CODE_29ACD6
	BCS.b CODE_29ACDE
	BCC.b CODE_29ACF4							; Note: This will always branch.

CODE_29ACD6:
	LDA.l $7E3981,x
	CMP.b $47,x
	BCC.b CODE_29ACF4
CODE_29ACDE:
	LDA.l $7E3981,x
	SEC
	SBC.b $47,x
	STA.b $61
	LDA.l $7E397F,x
	SBC.b $45,x
	STA.b $60
	LDY.b #$00
	JMP.w CODE_29AD07

CODE_29ACF4:
	LDA.b $47,x
	SEC
	SBC.l $7E3981,x
	STA.b $61
	LDA.b $45,x
	SBC.l $7E397F,x
	STA.b $60
	LDY.b #$01
CODE_29AD07:
	STY.b $66
	LDA.b #$00
	STA.b $62
	STA.b $5D
	LDA.l $7E397D,x
	CMP.b $43,x
	BCS.b CODE_29AD25
	LDA.b #$FF
	EOR.b $5C
	TAY
	INY
	STY.b $5C
	LDA.b $66
	ORA.b #$02
	STA.b $66
CODE_29AD25:
	LDA.b $60
	BNE.b CODE_29AD44
	LDA.b $47,x
	SEC
	SBC.w $0210
	TAY
	LDA.b $66
	AND.b #$01
	BNE.b CODE_29AD3E
	TYA
	CLC
	ADC.b $61
	BCC.b CODE_29AD4A
	BCS.b CODE_29AD44							; Note: This will always branch.

CODE_29AD3E:
	TYA
	SEC
	SBC.b $61
	BCS.b CODE_29AD4A
CODE_29AD44:
	INC.w !RAM_SMB3_Overworld_CurrentProcess
	JMP.w CODE_29ADFC

CODE_29AD4A:
	LDY.b #$04
CODE_29AD4C:
	CLC
	LSR.b $5C
	ROR.b $5D
	CLC
	LSR.b $60
	ROR.b $61
	ROR.b $62
	DEY
	BPL.b CODE_29AD4C
	LDA.b #$20
	STA.b $65
	INC.b $93
CODE_29AD61:
	LDA.b $65
	BEQ.b CODE_29ADBE
	LDA.b #!Define_SMAS_Sound0063_SpinJump
	STA.w !RAM_SMB3_Global_SoundCh3
	LDA.b $66
	AND.b #$01
	BNE.b CODE_29AD86
	LDA.b $63
	CLC
	ADC.b $62
	STA.b $63
	LDA.b $47,x
	ADC.b $61
	STA.b $47,x
	LDA.b $45,x
	ADC.b $60
	STA.b $45,x
	JMP.w CODE_29AD99

CODE_29AD86:
	LDA.b $63
	SEC
	SBC.b $62
	STA.b $63
	LDA.b $47,x
	SBC.b $61
	STA.b $47,x
	LDA.b $45,x
	SBC.b $60
	STA.b $45,x
CODE_29AD99:
	LDA.b $66
	AND.b #$02
	BNE.b CODE_29ADAF
	LDA.b !RAM_SMB3_Level_Player_XPosLo
	CLC
	ADC.b $5D
	STA.b !RAM_SMB3_Level_Player_XPosLo
	LDA.b $43,x
	ADC.b $5C
	STA.b $43,x
	JMP.w CODE_29ADBC

CODE_29ADAF:
	LDA.b !RAM_SMB3_Level_Player_XPosLo
	SEC
	SBC.b $5D
	STA.b !RAM_SMB3_Level_Player_XPosLo
	LDA.b $43,x
	SBC.b $5C
	STA.b $43,x
CODE_29ADBC:
	DEC.b $65
CODE_29ADBE:
	JSL.l CODE_238C1B
	LDA.b $65
	ORA.w $053D
	ORA.w !RAM_SMB3_Overworld_ScrollMapTimer
	BNE.b CODE_29ADFB
	LDA.b #$0B
	STA.w !RAM_SMB3_Overworld_CurrentProcess
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b $43,x
	STA.l $7E3975,x
	LDA.b $45,x
	STA.l $7E3977,x
	LDA.b $47,x
	STA.l $7E3979,x
	LDA.l $7E3985,x
	STA.w $0722,x
	LDA.l $7E3987,x
	STA.w $0724,x
	LDA.b #$00
	STA.b $93
	STA.w $073F,x
CODE_29ADFB:
	RTL

CODE_29ADFC:
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b $66
	AND.b #$01
	BEQ.b CODE_29AE1D
	LDA.b $47,x
	SEC
	SBC.b #$02
	STA.b $47,x
	LDA.b $45,x
	SBC.b #$00
	STA.b $45,x
	LDA.b $47,x
	SEC
	SBC.w $0210
	BEQ.b CODE_29AE34
	JMP.w CODE_29AE45

CODE_29AE1D:
	LDA.b $47,x
	CLC
	ADC.b #$02
	STA.b $47,x
	LDA.b $45,x
	ADC.b #$00
	STA.b $45,x
	LDA.b $47,x
	SEC
	SBC.w $0210
	CMP.b #$F0
	BNE.b CODE_29AE45
CODE_29AE34:
	LDA.l $7E3985,x
	STA.w $0722,x
	LDA.l $7E3987,x
	STA.w $0724,x
	INC.w !RAM_SMB3_Overworld_CurrentProcess
CODE_29AE45:
	LDA.b #!Define_SMAS_Sound0063_SpinJump
	STA.w !RAM_SMB3_Global_SoundCh3
	JSR.w CODE_29AC1B
	JSL.l CODE_238C1B
	RTL

;--------------------------------------------------------------------

CODE_29AE52:
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.l $7E397D,x
	STA.b $43,x
	LDA.l $7E397F,x
	STA.b $45,x
	LDA.b $66
	AND.b #$01
	BEQ.b CODE_29AE85
	LDY.b #$F0
	LDA.w $0210
	BEQ.b CODE_29AE80
	LDA.l $7E3981,x
	CLC
	ADC.w $0210
	LDA.l $7E397F,x
	ADC.b #$00
	STA.b $45,x
	LDY.b #$70
CODE_29AE80:
	STY.b $47,x
	JMP.w CODE_29AE9F

CODE_29AE85:
	LDA.w $0210
	BEQ.b CODE_29AE9A
	LDA.l $7E3981,x
	SEC
	SBC.w $0210
	LDA.l $7E397F,x
	SBC.b #$00
	STA.b $45,x
CODE_29AE9A:
	LDA.w $0210
	STA.b $47,x
CODE_29AE9F:
	LDA.b #!Define_SMAS_Sound0063_SpinJump
	STA.w !RAM_SMB3_Global_SoundCh3
	INC.w !RAM_SMB3_Overworld_CurrentProcess
	JMP.w CODE_29AE45

;--------------------------------------------------------------------

CODE_29AEAA:
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b $66
	AND.b #$01
	BEQ.b CODE_29AECB
	LDA.b $47,x
	SEC
	SBC.b #$02
	STA.b $47,x
	LDA.b $45,x
	SBC.b #$00
	STA.b $45,x
	LDA.b $47,x
	CMP.l $7E3981,x
	BEQ.b CODE_29AEE0
	JMP.w CODE_29AEFE

CODE_29AECB:
	LDA.b $47,x
	CLC
	ADC.b #$02
	STA.b $47,x
	LDA.b $45,x
	ADC.b #$00
	STA.b $45,x
	LDA.b $47,x
	CMP.l $7E3981,x
	BNE.b CODE_29AEFE
CODE_29AEE0:
	LDA.b #$0B
	STA.w !RAM_SMB3_Overworld_CurrentProcess
	LDA.b $43,x
	STA.l $7E3975,x
	LDA.b $45,x
	STA.l $7E3977,x
	LDA.b $47,x
	STA.l $7E3979,x
	LDA.b #$00
	STA.b $93
	STA.w $073F,x
CODE_29AEFE:
	JMP.w CODE_29AE45

;--------------------------------------------------------------------

UNK_29AF01:
	db $00,$00,$00,$00

CODE_29AF05:
	JSL.l SMB3_GetOverworldTilePlayerIsOn_Main
	LDX.b #$04
CODE_29AF0B:
	CMP.w DATA_21E5F2,x
	BEQ.b CODE_29AF16
	DEX
	BPL.b CODE_29AF0B
	JMP.w CODE_29AF1F

CODE_29AF16:
	LDA.l $7E396D
	INC
	STA.l $7E396D
CODE_29AF1F:
	JSL.l SMB3_GetOverworldTilePlayerIsOn_Main
	AND.b #$C0
	CLC
	ROL
	ROL
	ROL
	TAY
	LDX.b #$04
	LDA.b !RAM_SMB3_Global_CurrentlyProcessedMap16TileLo
CODE_29AF2E:
	CMP.w DATA_21E5CD,x
	BEQ.b CODE_29AF3B
	DEX
	BPL.b CODE_29AF2E
	CMP.w !RAM_SMB3_Global_Map16WallTileAttributeTable,y
	BCC.b CODE_29AF48
CODE_29AF3B:
	LDA.b $20
	BEQ.b CODE_29AF4B
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$03
	BEQ.b CODE_29AF74
CODE_29AF45:
	JMP.w CODE_29B071

CODE_29AF48:
	JMP.w CODE_29B0AB

CODE_29AF4B:
	CPY.b #$00
	BNE.b CODE_29AF61
	LDA.l $7E3995
	BNE.b CODE_29AF48
	LDA.b #$07
	STA.b $20
	LDA.b #!Define_SMAS_Sound0063_OverworldSwitchBlockEjection
	STA.w !RAM_SMB3_Global_SoundCh3
	JMP.w CODE_29AF45

CODE_29AF61:
	LDA.b !RAM_SMB3_Global_CurrentlyProcessedMap16TileLo
	CMP.b #$67
	BEQ.b CODE_29AF74
	CMP.b #$6A
	BEQ.b CODE_29AF74
	CMP.b #$EB
	BEQ.b CODE_29AF74
	LDA.b #!Define_SMAS_Sound0060_CarryItemToGoal
	STA.w !RAM_SMB3_Global_SoundCh1
CODE_29AF74:
	INC.b $20
	LDA.b $20
	CMP.b #$07
	BEQ.b CODE_29AF80
	CMP.b #$0A
	BNE.b CODE_29AF45

CODE_29AF80:
	STZ.b $20
	LDA.l $7E3995
	BEQ.b CODE_29AF91
	LDA.b #$04
	STA.b $20
	LDY.b $A5
	JMP.w CODE_29B0F6

CODE_29AF91:
	LDY.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b #$7E2000>>16
	STA.b $30
	LDA.w !RAM_SMB3_Overworld_Mario_XPosHi,y
	ASL
	TAX
	LDA.w DATA_218200,x
	CLC
	ADC.b #$F0
	STA.b $2E
	LDA.w DATA_218200+$01,x
	ADC.b #$00
	STA.b $2F
	LDA.w !RAM_SMB3_Overworld_Mario_XPosLo,y
	LSR
	LSR
	LSR
	LSR
	ORA.w !RAM_SMB3_Overworld_Mario_YPosLo,y
	TAY
	LDA.b [$2E],y
	PHA
	AND.b #$C0
	LSR
	LSR
	LSR
	LSR
	LSR
	TAX
	LDA.w !RAM_SMB3_Level_Player_CurrentCharacter
	BEQ.b CODE_29AFC8
	INX
CODE_29AFC8:
	PLA
	CMP.b #$67
	BEQ.b CODE_29AFD1
	CMP.b #$6A
	BNE.b CODE_29AFD8
CODE_29AFD1:
	LDA.b #!Define_SMAS_Sound0063_CastleCollapse
	STA.w !RAM_SMB3_Global_SoundCh3
	LDX.b #$08
CODE_29AFD8:
	CMP.b #$EB
	BNE.b CODE_29AFE3
	LDA.b #!Define_SMAS_Sound0063_CastleCollapse
	STA.w !RAM_SMB3_Global_SoundCh3
	LDX.b #$09
CODE_29AFE3:
	LDA.w DATA_21E5C2,x
	STA.b [$2E],y
	STA.b !RAM_SMB3_Global_CurrentlyProcessedMap16TileLo
	JSR.w CODE_29BC69
	LDY.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDX.b !RAM_SMB3_Overworld_Mario_XPosLo,y
	LDA.w !RAM_SMB3_Overworld_Mario_YPosLo,y
	SEC
	SBC.b #$10
	JSL.l CODE_209701
	LDX.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	LDY.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.w !RAM_SMB3_Overworld_Mario_XPosHi,y
	AND.b #$01
	ASL
	ASL
	ORA.b $0E
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,x
	STA.w SMB3_StripeImageUploadTable[$04].LowByte,x
	LDA.b $0F
	STA.w SMB3_StripeImageUploadTable[$00].HighByte,x
	CLC
	ADC.b #$20
	STA.w SMB3_StripeImageUploadTable[$04].HighByte,x
	STZ.w SMB3_StripeImageUploadTable[$01].LowByte,x
	STZ.w SMB3_StripeImageUploadTable[$05].LowByte,x
	LDA.b #$03
	STA.w SMB3_StripeImageUploadTable[$01].HighByte,x
	STA.w SMB3_StripeImageUploadTable[$05].HighByte,x
	LDY.b #$10
	LDA.b !RAM_SMB3_Global_CurrentlyProcessedMap16TileLo
	CMP.b #$60
	BEQ.b CODE_29B041
	LDY.b #$18
	CMP.b #$E3
	BEQ.b CODE_29B041
	LDY.b #$00
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	BEQ.b CODE_29B041
	LDY.b #$08
CODE_29B041:
	REP.b #$20
	LDX.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	LDA.w DATA_21E5D2,y
	STA.w SMB3_StripeImageUploadTable[$02].LowByte,x
	LDA.w DATA_21E5D2+$02,y
	STA.w SMB3_StripeImageUploadTable[$06].LowByte,x
	LDA.w DATA_21E5D2+$04,y
	STA.w SMB3_StripeImageUploadTable[$03].LowByte,x
	LDA.w DATA_21E5D2+$06,y
	STA.w SMB3_StripeImageUploadTable[$07].LowByte,x
	SEP.b #$20
	LDA.b #$FF
	STA.w SMB3_StripeImageUploadTable[$08].LowByte,x
	LDA.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	CLC
	ADC.b #$10
	STA.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	JMP.w CODE_29B0AB

CODE_29B071:
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b $43,x
	STA.b $00
	LDA.b $47,x
	STA.b $01
	LDY.b $20
	CPY.b #$05
	BCC.b CODE_29B0A4
	LDA.b $00
	STA.w SMB3_OAMBuffer[$18].YDisp
	DEY
	LDA.w DATA_21E5B8,y
	STA.w SMB3_OAMBuffer[$18].Tile
	LDA.b #$27
	STA.w SMB3_OAMBuffer[$18].Prop
	LDA.b $01
	SEC
	SBC.w $0210
	STA.w SMB3_OAMBuffer[$18].XDisp
	LDA.b #$02
	STA.w SMB3_OAMTileSizeBuffer[$18].Slot
CODE_29B0A1:
	JMP.w CODE_29B107

CODE_29B0A4:
	JSL.l CODE_29B11F
	JMP.w CODE_29B11A

CODE_29B0AB:
	LDA.l !RAM_SMB3_Overworld_DontDestroyEnteredSpriteFlag
	BNE.b CODE_29B0A1
	LDY.b #$0D
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
CODE_29B0B6:
	LDA.w !RAM_SMB3_Overworld_OWSpr_SpriteID,y
	BEQ.b CODE_29B0D4
	LDA.w !RAM_SMB3_Overworld_OWSpr_InitialYPosLo,y
	STA.b $00
	CMP.b !RAM_SMB3_Overworld_Mario_YPosLo,x
	BNE.b CODE_29B0D4
	LDA.w !RAM_SMB3_Overworld_OWSpr_InitialXPosHi,y
	CMP.b !RAM_SMB3_Overworld_Mario_XPosHi,x
	BNE.b CODE_29B0D4
	LDA.w !RAM_SMB3_Overworld_OWSpr_InitialXPosLo,y
	STA.b $01
	CMP.b !RAM_SMB3_Overworld_Mario_XPosLo,x
	BEQ.b CODE_29B0D9
CODE_29B0D4:
	DEY
	BPL.b CODE_29B0B6
	BRA.b CODE_29B107

CODE_29B0D9:
	STY.b $A5
	LDA.w !RAM_SMB3_Overworld_OWSpr_SpriteID,y
	CMP.b #!Define_SMB3_SpriteID_OWSpr02_Airship
	BNE.b CODE_29B0E7
	INC.w !RAM_SMB3_Overworld_CurrentProcess
	BRA.b CODE_29B11A

CODE_29B0E7:
	LDA.b $20
	BNE.b CODE_29B0F0
	LDA.b #!Define_SMAS_Sound0060_CarryItemToGoal
	STA.w !RAM_SMB3_Global_SoundCh1
CODE_29B0F0:
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$03
	BNE.b CODE_29B0A4
CODE_29B0F6:
	INC.b $20
	LDA.b $20
	CMP.b #$05
	BNE.b CODE_29B0A4
	LDA.b #!Define_SMB3_SpriteID_OWSpr00_NoSprite
	STA.w !RAM_SMB3_Overworld_OWSpr_SpriteID,y
	STZ.b $20
	STZ.b $A5
CODE_29B107:
	LDA.b $20
	BNE.b CODE_29B11A
	LDA.b #$00
	STA.l !RAM_SMB3_Overworld_DontDestroyEnteredSpriteFlag
	STA.l $7E3995
	LDA.b #$08
	STA.w !RAM_SMB3_Overworld_CurrentProcess
CODE_29B11A:
	JSL.l SMB3_ProcessOverworldSprites_Main
	RTL

CODE_29B11F:
	LDA.b $00
	SEC
	SBC.b #$08
	STA.w SMB3_OAMBuffer[$18].YDisp
	STA.w SMB3_OAMBuffer[$19].YDisp
	CLC
	ADC.b #$10
	STA.w SMB3_OAMBuffer[$1A].YDisp
	STA.w SMB3_OAMBuffer[$1B].YDisp
	LDA.b $01
	SEC
	SBC.w $0210
	SEC
	SBC.b #$08
	STA.w SMB3_OAMBuffer[$18].XDisp
	STA.w SMB3_OAMBuffer[$1A].XDisp
	CLC
	ADC.b #$10
	STA.w SMB3_OAMBuffer[$19].XDisp
	STA.w SMB3_OAMBuffer[$1B].XDisp
	LDA.b #$27
	STA.w SMB3_OAMBuffer[$18].Prop
	LDA.b #$67
	STA.w SMB3_OAMBuffer[$19].Prop
	LDA.b #$A7
	STA.w SMB3_OAMBuffer[$1A].Prop
	LDA.b #$E7
	STA.w SMB3_OAMBuffer[$1B].Prop
	LDX.b $20
	LDA.w DATA_21E5B8,x
	STA.w SMB3_OAMBuffer[$18].Tile
	STA.w SMB3_OAMBuffer[$19].Tile
	STA.w SMB3_OAMBuffer[$1A].Tile
	STA.w SMB3_OAMBuffer[$1B].Tile
	LDA.b #$02
	STA.w SMB3_OAMTileSizeBuffer[$18].Slot
	STA.w SMB3_OAMTileSizeBuffer[$19].Slot
	STA.w SMB3_OAMTileSizeBuffer[$1A].Slot
	STA.w SMB3_OAMTileSizeBuffer[$1B].Slot
	RTL

;--------------------------------------------------------------------

; Note: Routine that spawns in special overworld sprites?

CODE_29B17F:
	LDA.b #$03
	STA.b $0F
CODE_29B183:
	LDY.b $0F
	LDX.b #$0D
	LDA.w DATA_21E5F7,y
CODE_29B18A:
	CMP.w !RAM_SMB3_Overworld_OWSpr_SpriteID,x
	BEQ.b CODE_29B195
	DEX
	BPL.b CODE_29B18A
	JSR.w CODE_29B1A1
CODE_29B195:
	DEC.b $0F
	BPL.b CODE_29B183
	INC.w !RAM_SMB3_Overworld_CurrentProcess
	JSL.l CODE_238C1B
	RTL

CODE_29B1A1:
	LDA.b $0F
	JSL.l SMB3_ExecutePtr_Absolute

DATA_29B1A7:
	dw CODE_29B1AF
	dw CODE_29B22C
	dw CODE_29B279
	dw CODE_29B2AF

;--------------------------------------------------------------------

CODE_29B1AF:
	LDA.w !RAM_SMB3_Global_CurrentWorld
	CMP.b #$07
	BEQ.b CODE_29B22B
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.w !RAM_SMB3_Level_Player_CurrentScoreHi
	CMP.l $7E3967
	BCC.b CODE_29B22B
	BEQ.b CODE_29B1C7
	JMP.w CODE_29B1DE

CODE_29B1C7:
	LDA.w !RAM_SMB3_Level_Player_CurrentScoreMid
	CMP.l $7E3968
	BCC.b CODE_29B22B
	BEQ.b CODE_29B1D5
	JMP.w CODE_29B1DE

CODE_29B1D5:
	LDA.w !RAM_SMB3_Level_Player_CurrentScoreLo
	CMP.l $7E3969
	BCC.b CODE_29B22B
CODE_29B1DE:
	JSR.w CODE_29B2ED
	LDA.l $7E396A
	STA.w !RAM_SMB3_Overworld_OWSpr_InitialYPosLo,y
	STA.w !RAM_SMB3_Overworld_OWSpr_YPosLo,y
	LDA.l $7E396B
	STA.w !RAM_SMB3_Overworld_OWSpr_InitialXPosHi,y
	STA.w !RAM_SMB3_Overworld_OWSpr_XPosHi,y
	LDA.l $7E396C
	STA.w !RAM_SMB3_Overworld_OWSpr_InitialXPosLo,y
	STA.w !RAM_SMB3_Overworld_OWSpr_XPosLo,y
	LDX.b $0F
	LDA.w DATA_21E5F7,x
	STA.w !RAM_SMB3_Overworld_OWSpr_SpriteID,y
	LDA.l $7E3969
	CLC
	ADC.b #$40
	STA.l $7E3969
	LDA.l $7E3968
	ADC.b #$1F
	STA.l $7E3968
	LDA.l $7E3967
	ADC.b #$00
	STA.l $7E3967
	LDA.b #!Define_SMAS_Sound0063_OverworldTileReveal
	STA.w !RAM_SMB3_Global_SoundCh3
CODE_29B22B:
	RTS

;--------------------------------------------------------------------

CODE_29B22C:
	LDA.l $7E3970
	BNE.b CODE_29B278
	LDA.l $7E3964
	CMP.b #$01
	BNE.b CODE_29B278
	LDA.l $7E3966
	CMP.l $7E3965
	BCC.b CODE_29B278
	JSR.w CODE_29B2ED
	LDA.b #!Define_SMB3_SpriteID_OWSpr0A_BlueToadHouse
	STA.w !RAM_SMB3_Overworld_OWSpr_SpriteID,y
	LDA.l $7E396A
	STA.w !RAM_SMB3_Overworld_OWSpr_InitialYPosLo,y
	STA.w !RAM_SMB3_Overworld_OWSpr_YPosLo,y
	LDA.l $7E396B
	STA.w !RAM_SMB3_Overworld_OWSpr_InitialXPosHi,y
	STA.w !RAM_SMB3_Overworld_OWSpr_XPosHi,y
	LDA.l $7E396C
	STA.w !RAM_SMB3_Overworld_OWSpr_InitialXPosLo,y
	STA.w !RAM_SMB3_Overworld_OWSpr_XPosLo,y
	LDA.l $7E3970
	INC
	STA.l $7E3970
	LDA.b #!Define_SMAS_Sound0063_OverworldTileReveal
	STA.w !RAM_SMB3_Global_SoundCh3
CODE_29B278:
	RTS

;--------------------------------------------------------------------

CODE_29B279:
	LDA.l $7E3971
	BNE.b CODE_29B2AE
	LDA.w $1F48
	CMP.w $1F49
	BNE.b CODE_29B2AE
	CMP.w $1F51
	BNE.b CODE_29B2AE
	LDY.b #$00
CODE_29B28E:
	LDA.w !RAM_SMB3_Overworld_OWSpr_SpriteID,y
	CMP.b #!Define_SMB3_SpriteID_OWSpr03_HammerBro
	BEQ.b CODE_29B29B
	INY
	CPY.b #$0E
	BNE.b CODE_29B28E
	RTS

CODE_29B29B:
	LDA.b #!Define_SMB3_SpriteID_OWSpr0B_CoinShip
	STA.w !RAM_SMB3_Overworld_OWSpr_SpriteID,y
	LDA.l $7E3971
	INC
	STA.l $7E3971
	LDA.b #!Define_SMAS_Sound0063_OverworldTileReveal
	STA.w !RAM_SMB3_Global_SoundCh3
CODE_29B2AE:
	RTS

;--------------------------------------------------------------------

CODE_29B2AF:
	LDA.l $7E3964
	CMP.b #$02
	BNE.b CODE_29B2EC
	LDA.l $7E3966
	CMP.l $7E3965
	BCC.b CODE_29B2EC
	JSR.w CODE_29B2ED
	LDA.b #!Define_SMB3_SpriteID_OWSpr0C_UnusedAirshipFleet
	STA.w !RAM_SMB3_Overworld_OWSpr_SpriteID,y
	LDA.w DATA_21E5FB
	STA.w !RAM_SMB3_Overworld_OWSpr_InitialYPosLo,y
	STA.w !RAM_SMB3_Overworld_OWSpr_YPosLo,y
	LDA.w DATA_21E5FC
	PHA
	AND.b #$0F
	STA.w !RAM_SMB3_Overworld_OWSpr_InitialXPosHi,y
	STA.w !RAM_SMB3_Overworld_OWSpr_XPosHi,y
	PLA
	AND.b #$F0
	STA.w !RAM_SMB3_Overworld_OWSpr_InitialXPosLo,y
	STA.w !RAM_SMB3_Overworld_OWSpr_XPosLo,y
	LDA.b #!Define_SMAS_Sound0063_OverworldTileReveal
	STA.w !RAM_SMB3_Global_SoundCh3
CODE_29B2EC:
	RTS

;--------------------------------------------------------------------

CODE_29B2ED:
	LDY.b #$02
CODE_29B2EF:
	LDA.w !RAM_SMB3_Overworld_OWSpr_SpriteID,y
	BEQ.b CODE_29B2F8
	INY
	JMP.w CODE_29B2EF

CODE_29B2F8:
	RTS

;--------------------------------------------------------------------

CODE_29B2F9:
	LDA.l $7E396D
	BNE.b CODE_29B331
	LDY.b #$0D
	STY.b $0C
	LDA.w !RAM_SMB3_Overworld_CurrentProcess
	CMP.b #$0B
	BNE.b CODE_29B323
	LDA.w $0596
	BNE.b CODE_29B323
CODE_29B30F:
	LDA.w !RAM_SMB3_Overworld_OWSpr_SpriteID,y
	BEQ.b CODE_29B31B
	TAX
	LDA.w DATA_21E5FD,x
	STA.w $053C,y
CODE_29B31B:
	DEY
	CPY.b #$01
	BNE.b CODE_29B30F
	INC.w $0596
CODE_29B323:
	LDX.b $0C
	LDA.w !RAM_SMB3_Overworld_OWSpr_SpriteID,x
	BEQ.b CODE_29B32D
	JSR.w CODE_29B332
CODE_29B32D:
	DEC.b $0C
	BPL.b CODE_29B323
CODE_29B331:
	RTS

CODE_29B332:
	JSR.w CODE_29BCBE
	LDA.w !RAM_SMB3_Overworld_OWSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_OWSpr10_Canoe
	BCS.b CODE_29B348
	LDY.w !RAM_SMB3_Overworld_CurrentProcess
	CPY.b #$0B
	BNE.b CODE_29B348
	LDY.w $053C,x
	BEQ.b CODE_29B331
CODE_29B348:
	JSL.l SMB3_ExecutePtr_Absolute

DATA_29B34C:
	dw CODE_29B331
	dw CODE_29B331
	dw CODE_29B490
	dw CODE_29B36E
	dw CODE_29B36E
	dw CODE_29B36E
	dw CODE_29B36E
	dw CODE_29B486
	dw CODE_29B36E
	dw CODE_29B36E
	dw CODE_29B36E
	dw CODE_29B36E
	dw CODE_29B486
	dw CODE_29B486
	dw CODE_29B486
	dw CODE_29B486
	dw CODE_29BCEA

;--------------------------------------------------------------------

CODE_29B36E:
	LDA.w !RAM_SMB3_Overworld_CurrentProcess
	CMP.b #$0D
	BNE.b CODE_29B3C4
	LDA.w !RAM_SMB3_Overworld_OWSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_OWSpr09_NSpade
	BCC.b CODE_29B380
	CMP.b #!Define_SMB3_SpriteID_OWSpr0D_Boat
	BCC.b CODE_29B385
CODE_29B380:
	LDA.w !RAM_SMB3_Overworld_ActiveMusicBoxFlag
	BNE.b CODE_29B3C3
CODE_29B385:
	TXA
	AND.b #$01
	STA.b $0F
	LDA.w $053C
	AND.b #$10
	LSR
	LSR
	LSR
	LSR
	STA.w !RAM_SMB3_OWSprXX_BroEnemy_FacingDirection,x
	LDA.b $0F
	BEQ.b CODE_29B3A0
	EOR.w !RAM_SMB3_OWSprXX_BroEnemy_FacingDirection,x
	STA.w !RAM_SMB3_OWSprXX_BroEnemy_FacingDirection,x
CODE_29B3A0:
	LDA.b $0F
	ASL
	ASL
	ASL
	ASL
	STA.b $0F
	LDA.w $053C
	AND.b #$1F
	EOR.b $0F
	TAY
	LDA.w !RAM_SMB3_Overworld_OWSpr_InitialXPosLo,x
	CLC
	ADC.w DATA_21E61D,y
	STA.w !RAM_SMB3_Overworld_OWSpr_XPosLo,x
	LDA.w !RAM_SMB3_Overworld_OWSpr_XPosHi,x
	ADC.w DATA_21E63D,y
	STA.w !RAM_SMB3_Overworld_OWSpr_XPosHi,x
CODE_29B3C3:
	RTS

CODE_29B3C4:
	CMP.b #$0B
	BNE.b CODE_29B3C3
	LDA.w !RAM_SMB3_Overworld_ActiveMusicBoxFlag
	BNE.b CODE_29B438
	LDY.b $0C
	LDX.b #$01
CODE_29B3D1:
	LDA.b !RAM_SMB3_Overworld_Mario_YPosLo,x
	CMP.w !RAM_SMB3_Overworld_OWSpr_YPosLo,y
	BNE.b CODE_29B3EC
	LDA.b !RAM_SMB3_Overworld_Mario_XPosHi,x
	CMP.w !RAM_SMB3_Overworld_OWSpr_XPosHi,y
	BNE.b CODE_29B3EC
	LDA.b !RAM_SMB3_Overworld_Mario_XPosLo,x
	CMP.w !RAM_SMB3_Overworld_OWSpr_XPosLo,y
	BNE.b CODE_29B3EC
	LDA.b #$00
	STA.w $053C,y
	RTS

CODE_29B3EC:
	DEX
	BPL.b CODE_29B3D1
	LDA.w $053C,y
	AND.b #$1F
	BNE.b CODE_29B3FE
	LDA.w !RAM_SMB3_Global_RandomByte02,y
	AND.b #$03
	JSR.w CODE_29B6DA
CODE_29B3FE:
	LDY.b $0C
	LDA.w !RAM_SMB3_Overworld_OWSpr_SpriteID,y
	BEQ.b CODE_29B438
	CMP.b #!Define_SMB3_SpriteID_OWSpr03_HammerBro
	BCC.b CODE_29B418
	CMP.b #!Define_SMB3_SpriteID_OWSpr07_Muncher
	BCS.b CODE_29B418
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$0F
	BNE.b CODE_29B418
	LDA.b #!Define_SMAS_Sound0060_HammerBroMarch
	STA.w !RAM_SMB3_Global_SoundCh1
CODE_29B418:
	LDX.w !RAM_SMB3_OWSprXX_BroEnemy_FacingDirection,y
	LDA.w !RAM_SMB3_Overworld_OWSpr_YPosLo,y
	CLC
	ADC.w DATA_21E611,x
	STA.w !RAM_SMB3_Overworld_OWSpr_YPosLo,y
	LDA.w !RAM_SMB3_Overworld_OWSpr_XPosLo,y
	CLC
	ADC.w DATA_21E615,x
	STA.w !RAM_SMB3_Overworld_OWSpr_XPosLo,y
	LDA.w !RAM_SMB3_Overworld_OWSpr_XPosHi,y
	ADC.w DATA_21E619,x
	STA.w !RAM_SMB3_Overworld_OWSpr_XPosHi,y
CODE_29B438:
	LDX.b $0C
	JSR.w CODE_29B6CD
	DEC.w $053C,x
	BNE.b CODE_29B476
	LDA.w !RAM_SMB3_Overworld_ActiveMusicBoxFlag
	BNE.b CODE_29B476
	LDY.b #$0D
CODE_29B449:
	CPY.b $0C
	BEQ.b CODE_29B473
	LDA.w !RAM_SMB3_Overworld_OWSpr_SpriteID,y
	BEQ.b CODE_29B473
	CMP.b #!Define_SMB3_SpriteID_OWSpr10_Canoe
	BCS.b CODE_29B473
	LDA.w $053C,y
	BNE.b CODE_29B473
	LDA.w !RAM_SMB3_Overworld_OWSpr_YPosLo,y
	CMP.w !RAM_SMB3_Overworld_OWSpr_YPosLo,x
	BNE.b CODE_29B473
	LDA.w !RAM_SMB3_Overworld_OWSpr_XPosHi,y
	CMP.w !RAM_SMB3_Overworld_OWSpr_XPosHi,x
	BNE.b CODE_29B473
	LDA.w !RAM_SMB3_Overworld_OWSpr_XPosLo,y
	CMP.w !RAM_SMB3_Overworld_OWSpr_XPosLo,x
	BEQ.b CODE_29B477
CODE_29B473:
	DEY
	BNE.b CODE_29B449
CODE_29B476:
	RTS

CODE_29B477:
	LDA.b #$20
	STA.w $053C,x
	CPY.b #$01
	BEQ.b CODE_29B485
	LDA.b #$20
	STA.w $053C,y
CODE_29B485:
	RTS

;--------------------------------------------------------------------

CODE_29B486:
	LDA.w !RAM_SMB3_Overworld_CurrentProcess
	CMP.b #$0B
	BNE.b CODE_29B485
	JMP.w CODE_29B438

;--------------------------------------------------------------------

; Note: Routine that moves the overworld airship.

CODE_29B490:
	LDA.w !RAM_SMB3_Overworld_CurrentProcess
	CMP.b #$0D
	BNE.b CODE_29B4BC
	LDA.b #$00
	STA.b $0E
	LDY.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.w !RAM_SMB3_Overworld_Mario_XPosHi,y
	CMP.w !RAM_SMB3_Overworld_OWSpr_XPosHi+$01
	BEQ.b CODE_29B4AA
	BCS.b CODE_29B4B6
	BCC.b CODE_29B4B2							; Note: This will always branch.

CODE_29B4AA:
	LDA.w !RAM_SMB3_Overworld_Mario_XPosLo,y
	CMP.w !RAM_SMB3_Overworld_OWSpr_XPosLo+$01
	BCS.b CODE_29B4B6
CODE_29B4B2:
	LDA.b #$01
	STA.b $0E
CODE_29B4B6:
	LDA.b $0E
	STA.w !RAM_SMB3_OWSpr02_Airship_FacingDirection+$01
CODE_29B4BB:
	RTS

CODE_29B4BC:
	LDA.w !RAM_SMB3_Overworld_FleeingAirshipPosPtrIndex
	ASL
	TAY
	LDA.w SMB3_FleeingAirshipYPosPtrs,y
	STA.b $00
	LDA.w SMB3_FleeingAirshipYPosPtrs+$01,y
	STA.b $01
	LDA.w SMB3_FleeingAirshipXPosPtrs,y
	STA.b $02
	LDA.w SMB3_FleeingAirshipXPosPtrs+$01,y
	STA.b $03
	LDA.w !RAM_SMB3_Overworld_CurrentProcess
	CMP.b #$04
	BNE.b CODE_29B512
	LDA.l !RAM_SMB3_Overworld_UsedReserveAnchorFlag
	BEQ.b CODE_29B4E5
	JMP.w CODE_29B626

CODE_29B4E5:
	LDA.b #$00
	STA.w $053D
	LDY.w $1F2F
	CPY.b #$06
	BCS.b CODE_29B50D
	LDA.b ($00),y
	STA.w !RAM_SMB3_Overworld_OWSpr_YPosLo+$01
	STA.w !RAM_SMB3_Overworld_OWSpr_InitialYPosLo+$01
	LDA.b ($02),y
	PHA
	AND.b #$0F
	STA.w !RAM_SMB3_Overworld_OWSpr_XPosHi+$01
	STA.w !RAM_SMB3_Overworld_OWSpr_InitialXPosHi+$01
	PLA
	AND.b #$F0
	STA.w !RAM_SMB3_Overworld_OWSpr_XPosLo+$01
	STA.w !RAM_SMB3_Overworld_OWSpr_InitialXPosLo+$01
CODE_29B50D:
	LDX.b #$01
	JMP.w CODE_29B6CD

CODE_29B512:
	LDA.w $053D
	BEQ.b CODE_29B4BB
	LDA.b $9D
	BEQ.b CODE_29B51E
	JMP.w CODE_29B626

CODE_29B51E:
	LDY.w $1F2F
	CPY.b #$06
	BCC.b CODE_29B528
	JMP.w CODE_29B58F

CODE_29B528:
	LDA.w !RAM_SMB3_Overworld_OWSpr_XPosHi+$01
	ORA.w !RAM_SMB3_Overworld_OWSpr_XPosLo+$01
	CMP.b ($02),y
	BNE.b CODE_29B539
	LDA.w !RAM_SMB3_Overworld_OWSpr_YPosLo+$01
	CMP.b ($00),y
	BEQ.b CODE_29B589
CODE_29B539:
	LDA.b ($00),y
	STA.b $04
	LDA.b ($02),y
	AND.b #$0F
	STA.b $06
	LDA.b ($02),y
	AND.b #$F0
	STA.b $05
	LDA.b $04
	SEC
	SBC.b #$20
	STA.b $04
	LDA.b $05
	SEC
	SBC.b #$20
	STA.b $05
	LDA.b $06
	SBC.b #$00
	STA.b $06
	LDX.w $072B
	DEX
CODE_29B561:
	LDA.l $7E397D,x
	SEC
	SBC.b $04
	CMP.b #$41
	BCS.b CODE_29B583
	LDA.l $7E3981,x
	SEC
	SBC.b $05
	STA.b $05
	LDA.l $7E397F,x
	SBC.b $06
	BNE.b CODE_29B583
	LDA.b $05
	CMP.b #$41
	BCC.b CODE_29B589
CODE_29B583:
	DEX
	BPL.b CODE_29B561
	JMP.w CODE_29B597

CODE_29B589:
	INC.w $1F2F
	JMP.w CODE_29B51E

CODE_29B58F:
	LDX.b $0C
	LDA.b #$00
	STA.w $053D
	RTS

CODE_29B597:
	LDX.b $0C
	LDY.w $1F2F
	LDA.b #$00
	STA.w !RAM_SMB3_OWSpr02_Airship_FacingDirection+$01
	STA.b $A4
	LDA.b ($00),y
	SEC
	SBC.w !RAM_SMB3_Overworld_OWSpr_YPosLo+$01
	STA.b $9E
	LDA.b ($02),y
	AND.b #$F0
	SEC
	SBC.w !RAM_SMB3_Overworld_OWSpr_XPosLo+$01
	STA.b $A2
	LDA.b ($02),y
	AND.b #$0F
	SBC.w !RAM_SMB3_Overworld_OWSpr_XPosHi+$01
	STA.b $A1
	LDA.b ($02),y
	AND.b #$0F
	CMP.w !RAM_SMB3_Overworld_OWSpr_XPosHi+$01
	BEQ.b CODE_29B5CB
	BPL.b CODE_29B5EB
	BMI.b CODE_29B5D4						; Note: This will always branch

CODE_29B5CB:
	LDA.b ($02),y
	AND.b #$F0
	CMP.w !RAM_SMB3_Overworld_OWSpr_XPosLo+$01
	BCS.b CODE_29B5EB
CODE_29B5D4:
	LDA.b #$01
	STA.b $A4
	LDA.b #$FF
	EOR.b $A1
	STA.b $A1
	LDA.b #$FF
	EOR.b $A2
	STA.b $A2
	INC.b $A2
	LDA.b #$01
	STA.w !RAM_SMB3_OWSpr02_Airship_FacingDirection+$01
CODE_29B5EB:
	LDA.b ($00),y
	CMP.w !RAM_SMB3_Overworld_OWSpr_YPosLo+$01
	BCS.b CODE_29B600
	LDA.b #$FF
	EOR.b $9E
	STA.b $9E
	INC.b $9E
	LDA.b $A4
	ORA.b #$02
	STA.b $A4
CODE_29B600:
	LDY.b #$04
CODE_29B602:
	CLC
	LSR.b $9E
	ROR.b $9F
	CLC
	LSR.b $A1
	ROR.b $A2
	ROR.b $A3
	DEY
	BPL.b CODE_29B602
	LDA.b $A2
	STA.b $A1
	LDA.b $A3
	STA.b $A2
	LDA.b #$00
	STA.b $A3
	LDA.b #$01
	STA.b $9D
	LDA.b #$20
	STA.w $0711
CODE_29B626:
	LDA.w $0711
	BEQ.b CODE_29B630
	JSL.l CODE_23878D
	RTS

CODE_29B630:
	LDA.l !RAM_SMB3_Overworld_UsedReserveAnchorFlag
	BEQ.b CODE_29B641
	LDA.b #$00
	STA.w $053D
	STA.w $1F2F
	JMP.w CODE_29B6CD

CODE_29B641:
	LDA.b #!Define_SMAS_Sound0063_BossDefeat
	STA.w !RAM_SMB3_Global_SoundCh3
	LDX.b #$01
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$03
	BEQ.b CODE_29B651
	JMP.w CODE_29B6CD

CODE_29B651:
	LDA.b $A4
	AND.b #$01
	BNE.b CODE_29B671
	LDA.b $A3
	CLC
	ADC.b $A2
	STA.b $A3
	LDA.w !RAM_SMB3_Overworld_OWSpr_XPosLo+$01
	ADC.b $A1
	STA.w $0510
	LDA.w !RAM_SMB3_Overworld_OWSpr_XPosHi+$01
	ADC.b #$00
	STA.w !RAM_SMB3_Overworld_OWSpr_XPosHi+$01
	JMP.w CODE_29B688

CODE_29B671:
	LDA.b $A3
	SEC
	SBC.b $A2
	STA.b $A3
	LDA.w !RAM_SMB3_Overworld_OWSpr_XPosLo+$01
	SBC.b $A1
	STA.w !RAM_SMB3_Overworld_OWSpr_XPosLo+$01
	LDA.w !RAM_SMB3_Overworld_OWSpr_XPosHi+$01
	SBC.b #$00
	STA.w !RAM_SMB3_Overworld_OWSpr_XPosHi+$01
CODE_29B688:
	LDA.b $A4
	AND.b #$02
	BNE.b CODE_29B6A0
	LDA.b $A0
	CLC
	ADC.b $9F
	STA.b $A0
	LDA.w !RAM_SMB3_Overworld_OWSpr_YPosLo+$01
	ADC.b $9E
	STA.w !RAM_SMB3_Overworld_OWSpr_YPosLo+$01
	JMP.w CODE_29B6AF

CODE_29B6A0:
	LDA.b $A0
	SEC
	SBC.b $9F
	STA.b $A0
	LDA.w !RAM_SMB3_Overworld_OWSpr_YPosLo+$01
	SBC.b $9E
	STA.w !RAM_SMB3_Overworld_OWSpr_YPosLo+$01
CODE_29B6AF:
	LDX.b #$01
	DEC.w $053D
	BNE.b CODE_29B6CD
	LDA.w !RAM_SMB3_Overworld_OWSpr_YPosLo+$01
	STA.w !RAM_SMB3_Overworld_OWSpr_InitialYPosLo+$01
	LDA.w !RAM_SMB3_Overworld_OWSpr_XPosHi+$01
	STA.w !RAM_SMB3_Overworld_OWSpr_InitialXPosHi+$01
	LDA.w !RAM_SMB3_Overworld_OWSpr_XPosLo+$01
	STA.w !RAM_SMB3_Overworld_OWSpr_InitialXPosLo+$01
	LDX.b #$01
	INC.w $1F2F
CODE_29B6CD:
	LDA.w !RAM_SMB3_Overworld_OWSpr_XPosLo,x
	STA.w !RAM_SMB3_Overworld_OWSpr_InitialXPosLo,x
	LDA.w !RAM_SMB3_Overworld_OWSpr_XPosHi,x
	STA.w !RAM_SMB3_Overworld_OWSpr_InitialXPosHi,x
	RTS

;--------------------------------------------------------------------

CODE_29B6DA:
	STA.b $00
	LDA.b #$04
	STA.b $01
CODE_29B6E0:
	LDY.b $0C
	DEC.b $00
	LDA.w !RAM_SMB3_Global_RandomByte02,y
	ASL
	BCC.b CODE_29B6EE
	INC.b $00
	INC.b $00
CODE_29B6EE:
	LDA.b $00
	AND.b #$03
	STA.b $00
	EOR.w $052D,y
	CMP.b #$01
	BEQ.b CODE_29B6E0
	DEC.b $01
	BPL.b CODE_29B707
	LDA.b #$00
	STA.w $053C,y
	PLA
	PLA
	RTS

CODE_29B707:
	BNE.b CODE_29B710
	LDA.w $052D,y
	EOR.b #$01
	STA.b $00
CODE_29B710:
	LDX.b $00
	JSR.w CODE_29B778
	LDA.b $00
	ASL
	TAX
	LDA.w DATA_218DBC,x
	STA.b $0E
	LDA.w DATA_218DBC+$01,x
	STA.b $0F
	LDY.b $02
	LDA.b [$2E],y
	LDY.b #$08
CODE_29B729:
	CMP.b ($0E),y
	BEQ.b CODE_29B732
	DEY
	BPL.b CODE_29B729
	BMI.b CODE_29B6E0						; Note: This will always branch.

CODE_29B732:
	LDY.b $0C
	LDA.b $00
	CLC
	ADC.b #$04
	TAX
	JSR.w CODE_29B778
	LDY.b $02
	LDA.b [$2E],y
	LDY.b #$11
CODE_29B743:
	CMP.w DATA_21E7FC,y
	BNE.b CODE_29B74B
	JMP.w CODE_29B6E0

CODE_29B74B:
	DEY
	BNE.b CODE_29B743
	LDX.b $0C
	LDY.b #$04
CODE_29B752:
	CMP.w DATA_21E80D,y
	BEQ.b CODE_29B767
	DEY
	BNE.b CODE_29B752
	PHA
	ASL
	ROL
	ROL
	AND.b #$03
	TAY
	PLA
	CMP.w !RAM_SMB3_Global_Map16WallTileAttributeTable,y
	BCC.b CODE_29B772
CODE_29B767:
	LDA.b #$20
	CMP.w $053C,x
	BNE.b CODE_29B772
	ASL
	STA.w $053C,x
CODE_29B772:
	LDA.b $00
	STA.w $052D,x
	RTS

CODE_29B778:
	LDA.w !RAM_SMB3_Overworld_OWSpr_YPosLo,y
	CLC
	ADC.w DATA_21E7E5,x
	STA.b $02
	LDA.w !RAM_SMB3_Overworld_OWSpr_XPosLo,y
	CLC
	ADC.w DATA_21E7ED,x
	STA.b $03
	LDA.w !RAM_SMB3_Overworld_OWSpr_XPosHi,y
	ADC.w DATA_21E7F5,x
	ASL
	TAX
	LDA.l DATA_218200,x
	CLC
	ADC.b #$F0
	STA.b $2E
	LDA.l DATA_218200+$01,x
	ADC.b #$00
	STA.b $2F
	LDA.b $03
	LSR
	LSR
	LSR
	LSR
	ORA.b $02
	STA.b $02
	RTS

;--------------------------------------------------------------------

SMB3_ProcessOverworldSprites:
.Main:
;$29B7AE
	JSR.w CODE_29B2F9
	JSR.w CODE_29BD33
	LDA.b #$0D
	STA.b $0C
	INC.w $1F25
	LDA.w $1F25
	CMP.b #$0B
	BCC.b CODE_29B7C5
	STZ.w $1F25
CODE_29B7C5:
	STZ.b $05
	LDY.b $0C
	BEQ.b CODE_29B7DD
	DEY
	TYA
	CLC
	ADC.w $1F25
	CMP.b #$0B
	BCC.b CODE_29B7D7
	SBC.b #$0B
CODE_29B7D7:
	TAX
	LDA.w DATA_21E872,x
	STA.b $05
CODE_29B7DD:
	LDX.b $0C
	LDA.w !RAM_SMB3_Overworld_OWSpr_XOffscreenFlag,x
	BEQ.b CODE_29B7E7
	JSR.w CODE_29B7FC								; Note: Subroutine that updates OAM buffer data
CODE_29B7E7:
	DEC.b $0C
	BPL.b CODE_29B7C5
CODE_29B7EB:
	LDA.w !RAM_SMB3_Overworld_CurrentProcess
	CMP.b #$0D
	BNE.b CODE_29B7FB
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$03
	BNE.b CODE_29B7FB
	INC.w $053C
CODE_29B7FB:
	RTL

CODE_29B7FC:
	LDA.w !RAM_SMB3_Overworld_OWSpr_SpriteID,x
	CPX.b $A5
	BNE.b CODE_29B808
	CPX.b #$00
	BEQ.b CODE_29B808
	RTS

CODE_29B808:
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ; [BR] Since there are virtually only two branch options and 00_Nothing branches to a RTS, it'd be faster to just use Compare.
	CMP.b #!Define_SMB3_SpriteID_OWSpr00_NoSprite
	BNE.b CODE_29B82E

	RTS
else
	JSL.l SMB3_ExecutePtr_Absolute

DATA_29B80C:				; Info: Overworld sprite...
	dw CODE_29B331			; 00 - Nothing
	dw CODE_29B82E			; 01 - Help
	dw CODE_29B82E			; 02 - Airship
	dw CODE_29B82E			; 03 - Hammer bro.
	dw CODE_29B82E			; 04 - Boomerang bro.
	dw CODE_29B82E			; 05 - Sledge bro.
	dw CODE_29B82E			; 06 - Fire bro.
	dw CODE_29B82E			; 07 - Muncher
	dw CODE_29B82E			; 08 - Unused?
	dw CODE_29B82E			; 09 - N-Spade
	dw CODE_29B82E			; 0A - Blue toad house
	dw CODE_29B82E			; 0B - Coin ship
	dw CODE_29B82E			; 0C - Airship fleet
	dw CODE_29B82E			; 0D - Boat
	dw CODE_29B82E			; 0E - Tank
	dw CODE_29B82E			; 0F - Airship fleet?
	dw CODE_29B82E			; 10 - Canoe
endif

CODE_29B82E:
	LDA.b #$00
	LDY.w !RAM_SMB3_Overworld_OWSpr_SpriteID,x
	CPY.b #!Define_SMB3_SpriteID_OWSpr10_Canoe
	BNE.b CODE_29B840
	
	LDY.w !RAM_SMB3_Overworld_OWSpr_YPosLo,x
	CPY.b #$F0
	BEQ.b CODE_29B840

	LDA.b #$07										; Note: Canoe's Y offset (-16)
CODE_29B840:
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR] The Wide HELP Saga pt. 2: double position values
	CPY.b #!Define_SMB3_SpriteID_OWSpr01_Help
	BNE.b +
	
	LDA.w !RAM_SMB3_Overworld_OWSpr_YPosLo,x
	STA.w SMB3_OAMBuffer[$10].YDisp
	STA.w SMB3_OAMBuffer[$11].YDisp

	LDA.w !RAM_SMB3_Overworld_OWSpr_XPosLo,x
	SEC
	SBC.w $0210
	SBC.b #$08
	STA.w SMB3_OAMBuffer[$10].XDisp
	CLC
	ADC.b #$10
	STA.w SMB3_OAMBuffer[$11].XDisp
	BRA.b ++

+:
endif
	LDY.b $05
	CLC
	ADC.w !RAM_SMB3_Overworld_OWSpr_YPosLo,x
	STA.w SMB3_OAMBuffer[$26].YDisp,y

	LDA.w !RAM_SMB3_Overworld_OWSpr_XPosLo,x
	SEC
	SBC.w $0210
	STA.w SMB3_OAMBuffer[$26].XDisp,y

if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000
++:
endif
	LDX.b $0C
	LDA.w !RAM_SMB3_Overworld_OWSpr_SpriteID,x
	STA.b $07

	LDX.b #$08
	CMP.b #!Define_SMB3_SpriteID_OWSpr10_Canoe
	BCS.b CODE_29B879
	CMP.b #!Define_SMB3_SpriteID_OWSpr01_Help
	BNE.b CODE_29B869

	LDX.b #$30										;\ Note: Speed of the Help bubble's blinking
	JMP.w CODE_29B879

CODE_29B869:
	LDA.w !RAM_SMB3_Overworld_CurrentProcess
	CMP.b #$0B
	BNE.b CODE_29B879
	LDY.b $0C
	LDA.w $053C,y
	BEQ.b CODE_29B879
	LDX.b #$04
CODE_29B879:
	STX.b $08
	LDA.b $07
	ASL
	CLC
	ADC.b $07
	TAX

	CPX.b #!Define_SMB3_SpriteID_OWSpr03_HammerBro*$03
	BCC.b CODE_29B897
	CPX.b #!Define_SMB3_SpriteID_OWSpr10_Canoe*$03
	BEQ.b CODE_29B897
	CPX.b #!Define_SMB3_SpriteID_OWSpr0D_Boat*$03
	BCC.b CODE_29B892
	CPX.b #!Define_SMB3_SpriteID_OWSpr10_Canoe*$03
	BCC.b CODE_29B897
CODE_29B892:
	LDA.w !RAM_SMB3_Overworld_ActiveMusicBoxFlag
	BNE.b CODE_29B89F
CODE_29B897:
	INX
	LDA.b !RAM_SMB3_Global_FrameCounter				;\ Note: Check for animation timing
	AND.b $08										;|
	BEQ.b CODE_29B89F								;/
	INX
CODE_29B89F:
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR] The Wide HELP Saga pt. 3: two tiles, double props.
	LDY.b $0C
	LDA.w !RAM_SMB3_Overworld_OWSpr_SpriteID,y
	CMP.b #!Define_SMB3_SpriteID_OWSpr01_Help
	BNE.b +
	
	LDA.w DATA_21E80F,x
	STA.w SMB3_OAMBuffer[$10].Tile
	LDA.w Tiles_01_Help2,x
	STA.w SMB3_OAMBuffer[$11].Tile
	
	LDA.w DATA_21E83F,x
	STA.w SMB3_OAMBuffer[$10].Prop
	STA.w SMB3_OAMBuffer[$11].Prop

	LDA.b #$02
	STA.w SMB3_OAMTileSizeBuffer[$10].Slot
	STA.w SMB3_OAMTileSizeBuffer[$11].Slot

	BRA.b ++
+:
endif
	LDY.b $05
	LDA.w DATA_21E80F,x
	STA.w SMB3_OAMBuffer[$26].Tile,y
	LDA.w DATA_21E83F,x
	STA.w SMB3_OAMBuffer[$26].Prop,y

	TYA
	LSR
	LSR
	TAX
	LDA.b #$02
	STA.w SMB3_OAMTileSizeBuffer[$26].Slot,x
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000
++:
endif
	LDX.b $0C
	LDA.w !RAM_SMB3_Overworld_OWSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_OWSpr01_Help
	BEQ.b CODE_29B8C3
	CMP.b #!Define_SMB3_SpriteID_OWSpr10_Canoe
	BCC.b CODE_29B8C4
CODE_29B8C3:
	RTS

CODE_29B8C4:
	CMP.b #!Define_SMB3_SpriteID_OWSpr07_Muncher
	BEQ.b CODE_29B8DD
	CMP.b #!Define_SMB3_SpriteID_OWSpr09_NSpade
	BCC.b CODE_29B8D0
	CMP.b #!Define_SMB3_SpriteID_OWSpr0D_Boat
	BCC.b CODE_29B8DD
CODE_29B8D0:
	LDA.w $052D,x
	BNE.b CODE_29B8DD
	LDA.w SMB3_OAMBuffer[$26].Prop,y
	EOR.b #$40
	STA.w SMB3_OAMBuffer[$26].Prop,y
CODE_29B8DD:
	LDY.b $0C
	LDA.w !RAM_SMB3_Overworld_OWSpr_SpriteID,y
	CMP.b #!Define_SMB3_SpriteID_OWSpr02_Airship
	BEQ.b CODE_29B8F3
	CMP.b #!Define_SMB3_SpriteID_OWSpr09_NSpade
	BCC.b CODE_29B8EE
	CMP.b #!Define_SMB3_SpriteID_OWSpr10_Canoe
	BCC.b CODE_29B8F3
CODE_29B8EE:
	LDA.w !RAM_SMB3_Overworld_ActiveMusicBoxFlag
	BNE.b CODE_29B953
CODE_29B8F3:
	LDA.w $0417
	BNE.b CODE_29B953
	LDA.w !RAM_SMB3_Overworld_ScrollMapTimer
	BNE.b CODE_29B953
	LDA.w !RAM_SMB3_Overworld_CurrentProcess
	CMP.b #$0D
	BNE.b CODE_29B953
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.w !RAM_SMB3_Overworld_OWSpr_InitialYPosLo,y
	CMP.b !RAM_SMB3_Overworld_Mario_YPosLo,x
	BNE.b CODE_29B953
	LDA.w !RAM_SMB3_Overworld_OWSpr_InitialXPosHi,y
	CMP.b !RAM_SMB3_Overworld_Mario_XPosHi,x
	BNE.b CODE_29B953
	LDA.w !RAM_SMB3_Overworld_OWSpr_InitialXPosLo,y
	CMP.b !RAM_SMB3_Overworld_Mario_XPosLo,x
	BNE.b CODE_29B953
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b #$00
	STA.w $073F,x
	STA.w $0728
	LDA.w !RAM_SMB3_Overworld_OWSpr_SpriteID,y
	STA.b !RAM_SMB3_Overworld_OWSprIDBeingEntered
	CMP.b #!Define_SMB3_SpriteID_OWSpr09_NSpade
	BEQ.b CODE_29B934
	CMP.b #!Define_SMB3_SpriteID_OWSpr0A_BlueToadHouse
	BNE.b CODE_29B93D
CODE_29B934:
	LDA.l $7E396D
	INC
	STA.l $7E396D
CODE_29B93D:
	PHB
	LDA.b #!RAM_SMB3_Overworld_OWSpr_HammerBroPrizeTable>>16
	PHA
	PLB
	LDA.w !RAM_SMB3_Overworld_OWSpr_HammerBroPrizeTable,y
	STA.w !RAM_SMB3_Level_CurrentMiniChestPrize
	PLB
	LDA.b #$0F
	STA.w !RAM_SMB3_Overworld_CurrentProcess
	PLA
	PLA
	JMP.w CODE_29B7EB

CODE_29B953:
	RTS

;--------------------------------------------------------------------

; Todo: Unreferrenced routine.

CODE_29B954:
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b !RAM_SMB3_Overworld_Mario_MovementDirection,x
	EOR.b #$03
	CMP.b #$03
	BNE.b CODE_29B961
	EOR.b #$0F
CODE_29B961:
	STA.b !RAM_SMB3_Overworld_Mario_MovementDirection,x
	RTS

;--------------------------------------------------------------------

; Todo: Unreferrenced routine.

CODE_29B964:
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b !RAM_SMB3_Overworld_Mario_YPosLo,x
	CLC
	ADC.w DATA_21E87E,y
	STA.b $0E
	LDA.b !RAM_SMB3_Overworld_Mario_XPosLo,x
	CLC
	ADC.w DATA_21E886,y
	STA.b $0F
	LDA.b !RAM_SMB3_Overworld_Mario_XPosHi,x
	ADC.w DATA_21E882,y
	ASL
	TAX
	LDA.l DATA_218200,x
	STA.b $2E
	LDA.l DATA_218200+$01,x
	STA.b $2F
	INC.b $2F
	LDA.b $0F
	LSR
	LSR
	LSR
	LSR
	STA.b $0F
	LDA.b $0E
	AND.b #$F0
	ORA.b $0F
	TAY
	LDA.b ($2E),y
	RTS

;--------------------------------------------------------------------

CODE_29B99E:
	LDX.w $0738
	LDA.w $1DC6,x
	CMP.b #$09
	BCC.b CODE_29B9C4
	LDA.b #$01
	STA.b $92
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.l !RAM_SMB3_SpadeGame_CurrentDiceRoll
	TAY
	INY
	TYA
	ASL
	ASL
	ASL
	ASL
	ASL
	CMP.b $49,x
	BEQ.b CODE_29B9C4
	JSL.l CODE_238C1B
	RTS

;--------------------------------------------------------------------

; Note: Something to do with the overworld entry animation.

CODE_29B9C4:
	LDA.w !RAM_SMB3_Overworld_PlayerEntryAnimation
	JSL.l SMB3_ExecutePtr_Absolute

DATA_29B9CB:
	dw CODE_29B9D5
	dw CODE_29A8D7
	dw CODE_29BA66

CODE_29B9D1:
	JSR.w CODE_29B9C4
	RTL

CODE_29B9D5:
	LDA.b #!Define_SMAS_Sound0063_PSwitchRunningOut
	STA.w !RAM_SMB3_Global_SoundCh3
	LDX.b #$07
CODE_29B9DC:
	LDA.w DATA_21E88A,x
	STA.b $8A,x
	DEX
	BPL.b CODE_29B9DC
	LDX.b $92
	BNE.b CODE_29B9F0
	LDA.b #$80
	STA.b $7F
	STA.b $80
	BNE.b CODE_29BA45
CODE_29B9F0:
	CPX.b #$01
	BNE.b CODE_29BA10
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b !RAM_SMB3_Overworld_Mario_XPosLo,x
	CLC
	ADC.w $0210
	STA.b $7F
	LDA.b !RAM_SMB3_Overworld_Mario_YPosLo,x
	STA.b $80
	LDA.b #$86
	STA.w $0411
	LDA.b #$D0
	STA.w $0412
	JMP.w CODE_29BA2B

CODE_29BA10:
	LDA.b #$88
	STA.b $7F
	LDA.b #$5C
	STA.b $80
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b !RAM_SMB3_Overworld_Mario_XPosLo,x
	CLC
	ADC.w $0210
	STA.w $0411
	LDA.b !RAM_SMB3_Overworld_Mario_YPosLo,x
	STA.w $0412
	INC.b !RAM_SMB3_Overworld_CurrentWarpWhistleState
CODE_29BA2B:
	LDX.b $7F
	LDA.w $0411
	JSR.w CODE_29BC37
	STA.b $7D
	STX.w $03FF
	LDX.b $80
	LDA.w $0412
	JSR.w CODE_29BC37
	STA.b $88
	STX.w $0400
CODE_29BA45:
	LDA.b #$00
	STA.b $85
	STA.b $87
	STA.b $79
	LDA.b #$4C
	STA.b $86
	LDA.b #$09
	STA.b $82
	INC.w $0059
	LDX.b $92
	CPX.b #$02
	BEQ.b CODE_29BA62
	JSL.l CODE_238C1B
CODE_29BA62:
	RTS

;--------------------------------------------------------------------

CODE_29BA63:
	JMP.w CODE_29BAF9

;--------------------------------------------------------------------

CODE_29BA66:
	LDA.b $87
	BNE.b CODE_29BA7A
	LDA.b $79
	CLC
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	ADC.b #$05
	CMP.b #$73
else
	ADC.b #$04
	CMP.b #$5F
endif
	BCS.b CODE_29BA76
	JMP.w CODE_29BAF7

CODE_29BA76:
	LDA.b #$01
	STA.b $87
CODE_29BA7A:
	LDA.b $92
	BEQ.b CODE_29BABA
	LDA.b $7F
	CMP.w $0411
	BCS.b CODE_29BA91
	ADC.w $03FF
	TAX
	DEC.b $7D
	BMI.b CODE_29BA9A
	INX
	JMP.w CODE_29BA9A

CODE_29BA91:
	SBC.w $03FF
	TAX
	DEC.b $7D
	BMI.b CODE_29BA9A
	DEX
CODE_29BA9A:
	STX.b $7F
	LDA.b $80
	CMP.w $0412
	BCS.b CODE_29BAAF
	ADC.w $0400
	TAX
	DEC.b $88
	BMI.b CODE_29BAB8
	INX
	JMP.w CODE_29BAB8

CODE_29BAAF:
	SBC.w $0400
	TAX
	DEC.b $88
	BMI.b CODE_29BAB8
	DEX
CODE_29BAB8:
	STX.b $80
CODE_29BABA:
	LDA.b $79
	SEC
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	SBC.b #$05
else
	SBC.b #$04
endif
	BNE.b CODE_29BAF7
	LDA.b #$00
	STA.w $0059
	STA.b $87
	LDA.b $92
	CMP.b #$02
	BEQ.b CODE_29BAEC
	LDX.w $0738
	LDA.w $1DC6,x
	CMP.b #$09
	BCC.b CODE_29BAEC
	SEC
	SBC.b #$0A
	STA.l !RAM_SMB3_SpadeGame_CurrentDiceRoll
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	TAY
	INY
	TYA
	ASL
	ASL
	ASL
	ASL
	ASL
	STA.b $49,x
CODE_29BAEC:
	LDX.b $92
	CPX.b #$02
	BEQ.b CODE_29BAF6
	JSL.l CODE_238C1B
CODE_29BAF6:
	RTS

CODE_29BAF7:
	STA.b $79
CODE_29BAF9:
	LDA.b $84
	CLC
	ADC.b #$20
	STA.b $84
	BCC.b CODE_29BB0E
	LDA.b $85
	EOR.b #$01
	STA.b $85
	TAX
	LDA.w DATA_21E8A2,x
	STA.b $86
CODE_29BB0E:
	LDY.b #$00
	LDX.b #$07
	LDA.b $7E
	CLC
	ADC.b #$70
	STA.b $7E
	BCC.b CODE_29BB1D
	LDY.b #$01
CODE_29BB1D:
	STY.b $81
CODE_29BB1F:
	LDA.b $8A,x
	CLC
	ADC.b $81
	AND.b #$1F
	STA.b $8A,x
	JSR.w CODE_29BB3C
	JSR.w CODE_29BBF3
	DEX
	BPL.b CODE_29BB1F
	LDX.b $92
	CPX.b #$02
	BEQ.b CODE_29BB3B
	JSL.l CODE_238C1B
CODE_29BB3B:
	RTS

CODE_29BB3C:
	LDA.b $8A,x
	AND.b #$0F
	TAY
	LDA.w DATA_21E892,y
	STA.b $00
	LDA.b $79
	LDY.b $82
	JSR.w CODE_29BBD4
	LDA.b $8A,x
	AND.b #$18
	CMP.b #$10
	BCC.b CODE_29BB60
	LDA.b #$FF
	STA.b $00
	LDA.b $7F
	SBC.b $02
	JMP.w CODE_29BB68

CODE_29BB60:
	LDA.b #$01
	STA.b $00
	LDA.b $7F
	ADC.b $02
CODE_29BB68:
	STA.b $69,x
	STA.b $06
	LDA.b $7F
	STA.b $07
	JSR.w CODE_29BC17
	LDA.b $05
	BMI.b CODE_29BBC9
	LDA.b $69,x
	CLC
	ADC.b #$08
	STA.b $09
	STA.b $06
	JSR.w CODE_29BC17
	LDA.b $05
	BMI.b CODE_29BBC9
	LDA.b $8A,x
	CLC
	ADC.b #$08
	AND.b #$0F
	TAY
	LDA.w DATA_21E892,y
	STA.b $00
	LDA.b $79
	LDY.b $82
	JSR.w CODE_29BBD4
	LDA.b $8A,x
	SEC
	SBC.b #$08
	AND.b #$18
	CMP.b #$10
	BCC.b CODE_29BBB1
	LDA.b #$FF
	STA.b $00
	LDA.b $80
	SBC.b $02
	JMP.w CODE_29BBB9

CODE_29BBB1:
	LDA.b #$01
	STA.b $00
	LDA.b $80
	ADC.b $02
CODE_29BBB9:
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	STA.b $06
	LDA.b $80
	STA.b $07
	JSR.w CODE_29BC17
	LDA.b $05
	BMI.b CODE_29BBC9
	RTS

CODE_29BBC9:
	LDA.b #$F0
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	LDA.b #$00
	STA.b $69,x
	STA.b $09
	RTS

CODE_29BBD4:
	STA.b $01
	LDA.b #$00
	STA.b $02
	STA.b $03
CODE_29BBDC:
	ASL.b $03
	ROL.b $02
	ASL.b $00
	BCC.b CODE_29BBEF
	LDA.b $03
	CLC
	ADC.b $01
	STA.b $03
	BCC.b CODE_29BBEF
	INC.b $02
CODE_29BBEF:
	DEY
	BNE.b CODE_29BBDC
	RTS

CODE_29BBF3:
	TXA
	ASL
	ASL
	TAY
	LDA.b $69,x
	STA.w SMB3_OAMBuffer[$26].XDisp,y
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	STA.w SMB3_OAMBuffer[$26].YDisp,y
	LDA.b $86
	STA.w SMB3_OAMBuffer[$26].Tile,y
	LDA.b #$32
	STA.w SMB3_OAMBuffer[$26].Prop,y
	PHY
	TYA
	LSR
	LSR
	TAY
	LDA.b #$02
	STA.w SMB3_OAMTileSizeBuffer[$26].Slot,y
	PLY
	RTS

CODE_29BC17:
	LDA.b $06
	EOR.b $07
	AND.b #$80
	BEQ.b CODE_29BC2D
	LDA.b $00
	BPL.b CODE_29BC29
	LDA.b $06
	BMI.b CODE_29BC32
	BPL.b CODE_29BC2D

CODE_29BC29:
	LDA.b $06
	BPL.b CODE_29BC32
CODE_29BC2D:
	LDA.b #$01
	STA.b $05
	RTS

CODE_29BC32:
	LDA.b #$FF
	STA.b $05
	RTS

;--------------------------------------------------------------------

CODE_29BC37:
	STX.b $03
	STA.b $04
	SEC
	SBC.b $03
	STA.b $00
	LDA.b $04
	CMP.b $03
	BCS.b CODE_29BC4E
	LDA.b $00
	EOR.b #$FF
	ADC.b #$01
	STA.b $00
CODE_29BC4E:
	LDA.b #$00
	STA.b $02
	LDY.b #$07
CODE_29BC54:
	ASL.b $02
	ROL.b $00
	ROL
	BCS.b CODE_29BC5F
	CMP.b #$17
	BCC.b CODE_29BC63
CODE_29BC5F:
	SBC.b #$17
	INC.b $02
CODE_29BC63:
	DEY
	BPL.b CODE_29BC54
	LDX.b $02
	RTS

;--------------------------------------------------------------------

CODE_29BC69:
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.w $073F,x
	BNE.b CODE_29BCBD
	LDY.b #$06
	LDA.b !RAM_SMB3_Overworld_Mario_YPosLo,x
CODE_29BC75:
	CMP.w DATA_21E8A4,y
	BEQ.b CODE_29BC7F
	DEY
	BPL.b CODE_29BC75
	LDY.b #$07
CODE_29BC7F:
	STY.b $0C
	LDA.b !RAM_SMB3_Overworld_Mario_XPosHi,x
	ASL
	ASL
	ASL
	ASL
	STA.b $00
	LDA.b !RAM_SMB3_Overworld_Mario_XPosLo,x
	LSR
	LSR
	LSR
	LSR
	ORA.b $00
	TAY
	CPX.b #$00
	BEQ.b CODE_29BC9B
	TYA
	CLC
	ADC.b #$40
	TAY
CODE_29BC9B:
	LDX.b $0C
	LDA.w !RAM_SMB3_Overworld_LevelsClearedBits,y
	ORA.w DATA_21E8AB,x
	STA.w !RAM_SMB3_Overworld_LevelsClearedBits,y
	LDA.b !RAM_SMB3_Global_CurrentlyProcessedMap16TileLo
	CMP.b #$60
	BEQ.b CODE_29BCB0
	CMP.b #$E3
	BNE.b CODE_29BCBD
CODE_29BCB0:
	TYA
	EOR.b #$40
	TAY
	LDA.w !RAM_SMB3_Overworld_LevelsClearedBits,y
	ORA.w DATA_21E8AB,x
	STA.w !RAM_SMB3_Overworld_LevelsClearedBits,y
CODE_29BCBD:
	RTS

;--------------------------------------------------------------------

; Note: Seems to be a routine determining whether overworld sprites should be drawn.

CODE_29BCBE:
	LDY.b #$00
	LDA.w !RAM_SMB3_Overworld_OWSpr_InitialXPosHi,x
	ASL
	ASL
	ASL
	ASL
	STA.b $01
	LDA.w !RAM_SMB3_Overworld_OWSpr_InitialXPosLo,x
	LSR
	LSR
	LSR
	LSR
	ORA.b $01
	STA.b $01
	LDA.b $23
	SEC
	SBC.b #$02
	CMP.b $01
	BCC.b CODE_29BCE5
	LDA.b $24
	CMP.b $01
	BCS.b CODE_29BCE5
	LDY.b #$01
CODE_29BCE5:
	TYA
	STA.w !RAM_SMB3_Overworld_OWSpr_XOffscreenFlag,x
	RTS

;--------------------------------------------------------------------

CODE_29BCEA:
	LDY.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.w !RAM_SMB3_Overworld_Player_InCanoeFlag
	BEQ.b CODE_29BD0D
	LDA.w !RAM_SMB3_Level_Player_XPosHi,y
	STA.w !RAM_SMB3_Overworld_OWSpr_InitialYPosLo,x
	STA.w !RAM_SMB3_Overworld_OWSpr_YPosLo,x
	LDA.w !RAM_SMB3_Overworld_Mario_XPosLo,y
	STA.w !RAM_SMB3_Overworld_OWSpr_InitialXPosLo,x
	STA.w !RAM_SMB3_Overworld_OWSpr_XPosLo,x
	LDA.w !RAM_SMB3_Overworld_Mario_XPosHi,y
	STA.w !RAM_SMB3_Overworld_OWSpr_InitialXPosHi,x
	STA.w !RAM_SMB3_Overworld_OWSpr_XPosHi,x
CODE_29BD0D:
	LDA.w !RAM_SMB3_Overworld_Mario_MovementTimer,y
	ORA.w $073F,y
	BNE.b CODE_29BD32
	LDA.w !RAM_SMB3_Level_Player_XPosHi,y
	CMP.w !RAM_SMB3_Overworld_OWSpr_YPosLo,x
	BNE.b CODE_29BD32
	LDA.w !RAM_SMB3_Overworld_Mario_XPosHi,y
	CMP.w !RAM_SMB3_Overworld_OWSpr_XPosHi,x
	BNE.b CODE_29BD32
	LDA.w !RAM_SMB3_Overworld_Mario_XPosLo,y
	CMP.w !RAM_SMB3_Overworld_OWSpr_XPosLo,x
	BNE.b CODE_29BD32
	LDA.b #$01
	STA.w !RAM_SMB3_Overworld_Player_InCanoeFlag
CODE_29BD32:
	RTS

;--------------------------------------------------------------------

CODE_29BD33:
	NOP
	RTS

;--------------------------------------------------------------------

	%ROUTINE_SMB3_OverworldTileAnimations(NULLROM)					; $29BD35
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR]
	%FREE_BYTES(NULLROM, 52-45, $FF)
else
	%FREE_BYTES(NULLROM, 52, $FF)
endif

;--------------------------------------------------------------------

DATA_29BE00:
	db $03,$67,$BF,$E9,$03,$67,$BF,$E9

;--------------------------------------------------------------------

	%ROUTINE_SMB3_InitializeTileset00Level_Overworld(NULLROM)			; $29BE08

;--------------------------------------------------------------------

CODE_29BE10:
	LDX.b #$00
-:
	LDA.b #$02
	JSL.l CODE_20986D
	JSL.l CODE_209809
	CPX.b #$F0
	BNE.b -
	RTS

;--------------------------------------------------------------------

; Note: Routine that loads the overworld layout data.

CODE_29BE21:
	JSR.w CODE_29BE10
	STZ.w !REGISTER_HDMAEnable
	LDY.b #$80
	LDA.w $072B
	CMP.b #$02
	BEQ.b CODE_29BE32
	LDY.b #$40
CODE_29BE32:
	STY.b $DC
	LDA.b #$7E2000>>16
	STA.b $30
	STA.b $DA
	LDA.w !RAM_SMB3_Global_CurrentWorld
	ASL
	TAY
	REP.b #$20
	LDA.l DATA_218200
	CLC
	ADC.w #$0110
	STA.b $2E
	CLC
	ADC.w #$2000
	STA.b $D8
	PHX
	TYX
	LDA.l SMB3_OverworldLayoutDataAndPointers_Ptrs,x
	STA.b $00
	PLX
	SEP.b #$20
	LDA.b #SMB3_OverworldLayoutDataAndPointers_Main>>16
	STA.b $02
CODE_29BE60:
	LDY.b #$00
CODE_29BE62:
	LDA.b [$00],y
	CMP.b #$FF
	BEQ.b CODE_29BE99
	CMP.b #$03
	BCS.b CODE_29BE79
	PHA
	LDA.w !RAM_SMB3_Global_CurrentWorld
	CMP.b #$07
	BNE.b CODE_29BE78
	LDA.b #$01
	STA.b [$D8],y
CODE_29BE78:
	PLA
CODE_29BE79:
	STA.b [$2E],y
	INY
	CPY.b #$90
	BNE.b CODE_29BE62
	REP.b #$20
	TYA
	AND.w #$00FF
	CLC
	ADC.b $00
	STA.b $00
	LDA.b $2E
	CLC
	ADC.w #$01B0
	STA.b $2E
	STA.b $D8
	SEP.b #$20
	BRA.b CODE_29BE60

CODE_29BE99:
	LDX.b #$E0
	LDY.w !RAM_SMB3_Global_CurrentWorld
	LDA.w DATA_21D7AD,y
CODE_29BEA1:
	JSL.l CODE_20986D
	INX
	CPX.b #$F0
	BNE.b CODE_29BEA1
	LDA.w DATA_21D776,y
	STA.w $073B
	LDA.w DATA_21D77F,y
	STA.w !RAM_SMB3_Level_BackgroundColorSettingFromHeader
	STZ.b $00
CODE_29BEB8:
	LDA.b #$80
	STA.b $01
CODE_29BEBC:
	LDY.b $00
	LDA.w !RAM_SMB3_Overworld_LevelsClearedBits,y
	AND.b $01
	BNE.b CODE_29BEC8
	JMP.w CODE_29BF71

CODE_29BEC8:
	TYA
	AND.b #$30
	LSR
	LSR
	LSR
	TAX
	LDA.b #$7E2000>>16
	STA.b $30
	LDA.l DATA_218200,x
	STA.b $2E
	LDA.l DATA_218200+$01,x
	INC
	STA.b $2F
	LDX.b #$07
CODE_29BEE2:
	LDA.b $01
	CMP.w DATA_21D788,x
	BEQ.b CODE_29BEEC
	DEX
	BNE.b CODE_29BEE2
CODE_29BEEC:
	TXA
	ASL
	ASL
	ASL
	ASL
	CLC
	ADC.b #$10
	STA.b $02
	TYA
	AND.b #$0F
	ORA.b $02
	TAY
CODE_29BEFC:
	LDA.b [$2E],y
	STY.b $04
	STA.b !RAM_SMB3_Global_CurrentlyProcessedMap16TileLo
	AND.b #$C0
	CLC
	ROL
	ROL
	ROL
	TAX
	LDY.b #$04
	LDA.b !RAM_SMB3_Global_CurrentlyProcessedMap16TileLo
CODE_29BF0D:
	CMP.w DATA_21D7A0,y
	BEQ.b CODE_29BF48
	DEY
	BPL.b CODE_29BF0D
	CMP.b #$67
	BEQ.b CODE_29BF23
	CMP.b #$EB
	BEQ.b CODE_29BF23
	CMP.l DATA_29BE00,x
	BCS.b CODE_29BF48
CODE_29BF23:
	LDX.b #$07
CODE_29BF25:
	CMP.w DATA_21D790,x
	BEQ.b CODE_29BF2F
	DEX
	BPL.b CODE_29BF25
	BMI.b CODE_29BF34

CODE_29BF2F:
	LDA.w DATA_21D798,x
	BRA.b CODE_29BF59

CODE_29BF34:
	LDA.b $01
	CMP.b #$01
	BNE.b CODE_29BF71
	LDY.b $04
	CPY.b #$90
	BCS.b CODE_29BF71
	TYA
	CLC
	ADC.b #$10
	TAY
	JMP.w CODE_29BEFC

CODE_29BF48:
	TXA
	ASL
	STA.b $03
	LDA.b $00
	AND.b #$40
	BEQ.b CODE_29BF54
	INC.b $03
CODE_29BF54:
	LDX.b $03
	LDA.w DATA_21D7A5,x
CODE_29BF59:
	PHA
	LDA.b $2E
	STA.b $D8
	LDA.b $2F
	CLC
	ADC.b #$20
	STA.b $D9
	LDA.b [$D8],y
	BNE.b CODE_29BF70
	PLA
	LDY.b $04
	STA.b [$2E],y
	BRA.b CODE_29BF71

CODE_29BF70:
	PLA
CODE_29BF71:
	LSR.b $01
	BEQ.b CODE_29BF78
	JMP.w CODE_29BEBC

CODE_29BF78:
	INC.b $00
	LDA.b $00
	CMP.b $DC
	BEQ.b CODE_29BF83
	JMP.w CODE_29BEB8

CODE_29BF83:
	RTL

;--------------------------------------------------------------------

; Note: Seems like this might be the routine for determining which level to load.

CODE_29BF84:
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.w $073D,x
	BEQ.b CODE_29BF90
	JSR.w CODE_29C0C7
	RTL

CODE_29BF90:
	LDA.w !RAM_SMB3_Global_CurrentWorld
	ASL
	TAY
	REP.b #$20
	LDA.w OverworldLevelYCoordinateAndTilesetTablePtrs,y
	STA.b $00
	LDA.w OverworldLevelXCoordinateLoTablePtrs,y
	STA.b $02
	LDA.w SpriteDataListTablePointers,y
	STA.b $04
	LDA.w LevelDataListTablePointers,y
	STA.b $06
	LDA.w OverworldLevelXCoordinateHiTablePtrs,y
	STA.b $08
	SEP.b #$20
	LDY.b !RAM_SMB3_Overworld_Mario_XPosHi,x
	LDA.b ($08),y
	TAY
	STZ.b $0E
CODE_29BFB9:
	LDA.b ($00),y
	AND.b #$F0
	CMP.b !RAM_SMB3_Overworld_Mario_YPosLo,x
	BEQ.b CODE_29BFCB
	INY
	BNE.b CODE_29BFB9
	INC.b $01
	INC.b $0E
	JMP.w CODE_29BFB9

CODE_29BFCB:
	LDA.b $03
	CLC
	ADC.b $0E
	STA.b $03
	STZ.b $0E
	LDA.b !RAM_SMB3_Overworld_Mario_XPosLo,x
	LSR
	LSR
	LSR
	LSR
	STA.b $08
	LDA.b !RAM_SMB3_Overworld_Mario_XPosHi,x
	ASL
	ASL
	ASL
	ASL
	ORA.b $08
CODE_29BFE4:
	CMP.b ($02),y
	BEQ.b CODE_29BFF2
	INY
	BNE.b CODE_29BFE4
	INC.b $03
	INC.b $0E
	JMP.w CODE_29BFE4

CODE_29BFF2:
	LDA.b $01
	CLC
	ADC.b $0E
	STA.b $01
	LDA.w !RAM_SMB3_Global_CurrentWorld
	CMP.b #$08
	BNE.b CODE_29C008
	LDA.b ($00),y
	AND.b #$0F
	STA.w $042A
	RTL

CODE_29C008:
	LDA.b ($00),y
	AND.b #$0F
	STA.w !RAM_SMB3_Global_TilesetFromHeader
	LDA.b $05
	CLC
	ADC.b $0E
	STA.b $05
	LDA.b $07
	CLC
	ADC.b $0E
	STA.b $07
	TYA
	STA.b $0F
	ASL
	TAY
	BCC.b CODE_29C030
	LDA.b $05
	ADC.b #$00
	STA.b $05
	LDA.b $07
	ADC.b #$00
	STA.b $07
CODE_29C030:
	TYA
	CLC
	ADC.b $0F
	TAY
	STY.b $0F
	REP.b #$20
	LDA.b ($04),y
	STA.b !RAM_SMB3_Level_SpriteDataPtrLo
	STA.w !RAM_SMB3_Level_PreviousSpriteDataLo
	LDA.b ($06),y
	STA.b !RAM_SMB3_Level_LevelDataPtrLo
	STA.w !RAM_SMB3_Level_PreviousLevelDataLo
	SEP.b #$20
	INY
	INY
	LDA.b ($04),y
	STA.b !RAM_SMB3_Level_SpriteDataPtrBank
	LDA.b ($06),y
	STA.b !RAM_SMB3_Level_LevelDataPtrBank
	STA.w !RAM_SMB3_Level_PreviousLevelDataBank
	LDA.b !RAM_SMB3_Overworld_OWSprIDBeingEntered
	BNE.b CODE_29C06B
	LDA.w !RAM_SMB3_Global_TilesetFromHeader
	CMP.b #$0F
	BNE.b CODE_29C065
	JSR.w CODE_29C19E
	RTL

CODE_29C065:
	LDA.b #$03
	STA.w $0728
	RTL

CODE_29C06B:
	JSR.w CODE_29C06F
	RTL

CODE_29C06F:
	JSL.l SMB3_ExecutePtr_Absolute

DATA_29C073:
	dw CODE_29C10B
	dw CODE_29C10B
	dw CODE_29C0E9
	dw CODE_29C10B
	dw CODE_29C10B
	dw CODE_29C10B
	dw CODE_29C10B
	dw CODE_29C10B
	dw CODE_29C10B
	dw CODE_29C10C
	dw CODE_29C138
	dw CODE_29C163
	dw CODE_29C185
	dw CODE_29C10B
	dw CODE_29C10B
	dw CODE_29C10B
	dw CODE_29C10B

;--------------------------------------------------------------------

CODE_29C095:
	LDY.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b #$7E2000>>16
	STA.b $30
	LDA.w $0045,y
	ASL
	TAX
	LDA.l DATA_218200,x
	STA.b $2E
	LDA.l DATA_218200+$01,x
	INC
	STA.b $2F
	LDA.w $0047,y
	LSR
	LSR
	LSR
	LSR
	STA.b $00
	LDA.w !RAM_SMB3_Level_Player_XPosHi,y
	SEC
	SBC.b #$10
	AND.b #$F0
	ORA.b $00
	TAY
	LDA.b [$2E],y
	STA.b !RAM_SMB3_Global_CurrentlyProcessedMap16TileLo
	RTS

;--------------------------------------------------------------------

; Note: This is called when loading a throne room after defeating a koopaling.

CODE_29C0C7:
	LDA.w !RAM_SMB3_Global_CurrentWorld
	ASL
	CLC
	ADC.w !RAM_SMB3_Global_CurrentWorld
	TAX
	REP.b #$20
	LDA.w PostKoopaKidThroneRoomLevelDataPtrs,x
	STA.b !RAM_SMB3_Level_LevelDataPtrLo
	LDA.w PostKoopaKidThroneRoomSpriteDataPtrs
	STA.b !RAM_SMB3_Level_SpriteDataPtrLo
	SEP.b #$20
	LDA.w PostKoopaKidThroneRoomLevelDataPtrs+$02,x
	STA.b !RAM_SMB3_Level_LevelDataPtrBank
	LDA.b #$02
	STA.w !RAM_SMB3_Global_TilesetFromHeader
	RTS

;--------------------------------------------------------------------

; Note: Something related to the overworld airship sprite (the one that spawns from castles after dying).

CODE_29C0E9:
	LDA.w !RAM_SMB3_Global_CurrentWorld
	ASL
	CLC
	ADC.w !RAM_SMB3_Global_CurrentWorld
	TAY
	REP.b #$20
	LDA.w FleeingAirshipSpriteLevelDataPtrs,y
	STA.b !RAM_SMB3_Level_LevelDataPtrLo
	LDA.w FleeingAirshipSpriteSpriteDataPtrs,y
	STA.b !RAM_SMB3_Level_SpriteDataPtrLo
	SEP.b #$20
	LDA.w FleeingAirshipSpriteLevelDataPtrs+$02,y
	STA.b !RAM_SMB3_Level_LevelDataPtrBank
	LDA.b #$0A
	STA.w !RAM_SMB3_Global_TilesetFromHeader
	RTS

;--------------------------------------------------------------------

CODE_29C10B:
	RTS

;--------------------------------------------------------------------

; Note: Something related to the spade levels

CODE_29C10C:
	LDA.b #$0F
	STA.w !RAM_SMB3_Global_TilesetFromHeader
	LDA.b #$02
	STA.w !RAM_SMB3_SpadeGame_GameType
	LDY.b #$00
	STY.w $1043
	STY.w $1034
	LDA.w MiniGameIntroLevelDataPtrs,y
	STA.b !RAM_SMB3_Level_LevelDataPtrLo
	LDA.w MiniGameIntroLevelDataPtrs+$01,y
	STA.b !RAM_SMB3_Level_LevelDataPtrHi
	LDA.b #MiniGameIntroLevelDataPtrs>>16
	STA.b !RAM_SMB3_Level_LevelDataPtrBank
	LDA.b #$03
	STA.w $0728
	LDA.b #$01
	STA.l $7E3995
	RTS

;--------------------------------------------------------------------

; Note: Something related to the blue toad house

CODE_29C138:
	PHX
	LDA.w !RAM_SMB3_Global_CurrentWorld
	ASL
	TAX
	CLC
	ADC.w !RAM_SMB3_Global_CurrentWorld
	TAY
	REP.b #$20
	LDA.w BlueToadHouseSpriteLevelDataPtrs,y
	STA.b !RAM_SMB3_Level_LevelDataPtrLo
	LDA.w DATA_21D825,x
	STA.b !RAM_SMB3_Level_SpriteDataPtrLo
	SEP.b #$20
	LDA.w BlueToadHouseSpriteLevelDataPtrs+$02,y
	STA.b !RAM_SMB3_Level_LevelDataPtrBank
	LDA.b #$07
	STA.w !RAM_SMB3_Global_TilesetFromHeader
	PLX
	LDA.b #$01
	STA.l $7E3995
	RTS

;--------------------------------------------------------------------

; Note: Something related to the coin ship

CODE_29C163:
	LDA.w !RAM_SMB3_Global_CurrentWorld
	ASL
	CLC
	ADC.w !RAM_SMB3_Global_CurrentWorld
	TAY
	REP.b #$20
	LDA.w CoinShipSpriteLevelDataPtrs,y
	STA.b !RAM_SMB3_Level_LevelDataPtrLo
	LDA.w CoinShipSpriteSpriteDataPtrs,y
	STA.b !RAM_SMB3_Level_SpriteDataPtrLo
	SEP.b #$20
	LDA.w CoinShipSpriteLevelDataPtrs+$02,y
	STA.b !RAM_SMB3_Level_LevelDataPtrBank
	LDA.b #$0A
	STA.w !RAM_SMB3_Global_TilesetFromHeader
	RTS

;--------------------------------------------------------------------

CODE_29C185:
	REP.b #$20
	LDA.w DATA_21D865
	STA.b !RAM_SMB3_Level_LevelDataPtrLo
	LDA.w DATA_21D868
	STA.b !RAM_SMB3_Level_SpriteDataPtrLo
	SEP.b #$20
	LDA.w DATA_21D865+$02
	STA.b !RAM_SMB3_Level_LevelDataPtrBank
	LDA.b #$01
	STA.w !RAM_SMB3_Global_TilesetFromHeader
	RTS

;--------------------------------------------------------------------

; Note: Something to do with spade levels.

CODE_29C19E:
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b $43,x
	STA.l $7E3975,x
	LDA.b $45,x
	STA.l $7E3977,x
	LDA.b $47,x
	STA.l $7E3979,x
	LDA.b !RAM_SMB3_Overworld_Mario_UnusedRAM2,x
	STA.l $7E397B,x
	LDA.b #$0F
	STA.w !RAM_SMB3_Global_TilesetFromHeader
	LDY.b $0F
	LDA.b ($04),y
	STA.w !RAM_SMB3_SpadeGame_GameType
	LDA.b ($06),y
	STA.w $1043
	INY
	LDA.b ($04),y
	STA.w $1034
	LDA.b ($06),y
	ASL
	CLC
	ADC.b ($06),y
	TAY
	LDA.w MiniGameIntroLevelDataPtrs,y
	STA.b !RAM_SMB3_Level_LevelDataPtrLo
	LDA.w MiniGameIntroLevelDataPtrs+$01,y
	STA.b !RAM_SMB3_Level_LevelDataPtrHi
	LDA.w MiniGameIntroLevelDataPtrs+$02,y
	STA.b !RAM_SMB3_Level_LevelDataPtrBank
	LDA.b #$03
	STA.w $0728
	RTS

SMB3_ProcessOverworldResizableObjects:
.Main:
SMB3_ProcessOverworldStaticObjects:
.Main
;$29C1EC
%FREE_BYTES(NULLROM, 148, $FF)

;--------------------------------------------------------------------

CODE_29C280:
	LDA.w $0711
	BEQ.b CODE_29C288
	DEC.w $0711
CODE_29C288:
	LDA.w $1A08
	BEQ.b CODE_29C290
	DEC.w $1A08
CODE_29C290:
	LDA.w $1A09
	BEQ.b CODE_29C29E
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$03
	BNE.b CODE_29C29E
	DEC.w $1A09
CODE_29C29E:
	JSL.l SMB3_ResetSpriteOAMRt_Main
	JSR.w CODE_29C2AC
	JSR.w CODE_29C53C
	JSR.w CODE_29C6D3
	RTL

CODE_29C2AC:
	LDA.w $0728
	JSL.l SMB3_ExecutePtr_Absolute

DATA_29C2B3:
	dw CODE_29C2BD
	dw CODE_29C43A
	dw CODE_29C4BA
	dw CODE_29C312
	dw CODE_29C350

;--------------------------------------------------------------------

CODE_29C2BD:
	LDA.b #$50
	STA.w $070B
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	LDA.b #$43
else
	LDA.b #$64
endif
	STA.w $070C
	LDA.b #$80
	STA.w $0711
	LDA.b #$00
	STA.w $02D4
	STA.b !RAM_SMB3_Level_Player_YPosLo
	LDY.b #$14
CODE_29C2D5:
	STA.w $1A00-$01,y
	DEY
	BNE.b CODE_29C2D5
	LDA.b #$FF
	STA.b !RAM_SMB3_Level_Player_YPosHi
	LDA.b #$70
	STA.b !RAM_SMB3_Level_Player_XPosLo
	LDA.b #$40
	STA.b $BD
	STA.w !RAM_SMB3_Level_AutoscrollLayerYSpeed
	LDY.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.w $0747,y
	STA.b !RAM_SMB3_Level_Player_CurrentPowerUp
	LDA.b #$72
	STA.w !RAM_SMB3_Level_AutoscrollLayerXPosLo
	LDA.b #$1E
	STA.w $0711
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	INC.w $0728
endif
	LDX.b #$00
	LDA.b #$F0
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	STZ.b $4F,x
	STZ.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	STZ.w $0669
	LDA.b #$17
	STA.w $0518,x
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) == $00
	INC.w $0728
endif
	RTS

;--------------------------------------------------------------------

CODE_29C312:
	LDA.w $0711
	BEQ.b CODE_29C31D
	LSR
	BNE.b CODE_29C34F
	JMP.w CODE_29D2CE

CODE_29C31D:
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$03
	BNE.b CODE_29C34F
	DEC.b !RAM_SMB3_Global_ScreenDisplayRegisterMirror
	BNE.b CODE_29C34F
	JSR.w CODE_29CCF8
	LDA.b #$01
	STA.w !RAM_SMB3_Global_UpdateEntirePaletteFlag
	LDA.b #$18
	STA.w $0216
	STZ.w $0218
	LDA.w !RAM_SMB3_Global_MainScreenLayersMirror
	AND.b #$FB
	STA.w !RAM_SMB3_Global_MainScreenLayersMirror
	LDA.b #$61
	STA.w !RAM_SMB3_Global_ColorMathSelectAndEnableMirror
	LDA.b #$01
	STA.w $0542
	JSR.w CODE_29C418
	INC.w $0728
CODE_29C34F:
	RTS

;--------------------------------------------------------------------

CODE_29C350:
	LDA.w !RAM_SMB3_Global_CurrentWorld
	CMP.b #$06
	BEQ.b CODE_29C36B
	LDY.b #$18
CODE_29C359:
	LDA.w DATA_21F0CC,y
	STA.w SMB3_OAMBuffer[$2C].XDisp-$01,y
	TYA
	LSR
	LSR
	TAX
	LDA.b #$02
	STA.w SMB3_OAMTileSizeBuffer[$2C].Slot,x
	DEY
	BNE.b CODE_29C359
CODE_29C36B:
	LDA.b !RAM_SMB3_Global_ScreenDisplayRegisterMirror
	CMP.b #$0F
	BEQ.b CODE_29C395
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$03
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	BNE.b CODE_29C37A
else
	BEQ.b CODE_29C37A
endif
	JMP.w CODE_29C3FA

CODE_29C37A:
	INC.b !RAM_SMB3_Global_ScreenDisplayRegisterMirror
	LDA.b !RAM_SMB3_Global_ScreenDisplayRegisterMirror
	CMP.b #$0F
	BNE.b CODE_29C3FA
	LDY.b #!Define_SMB3_LevelMusic_PeachLetter
	LDA.w !RAM_SMB3_Global_CurrentWorld
	CMP.b #$06
	BNE.b CODE_29C392
	LDA.b #$78
	STA.w $0711
	LDY.b #!Define_SMB3_LevelMusic_BowserLetter
CODE_29C392:
	STY.w !RAM_SMB3_Global_MusicCh1
CODE_29C395:
	LDA.w $0711
	BEQ.b CODE_29C3A5
	LSR
	BNE.b CODE_29C3A2
	LDA.b #!Define_SMB3_LevelMusic_MusicFade
	STA.w !RAM_SMB3_Global_MusicCh1
CODE_29C3A2:
	JSR.w CODE_29C400
CODE_29C3A5:
	LDY.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.w !RAM_SMB3_Global_ControllerPress2P1,y
	ORA.b !RAM_SMB3_Global_ControllerPress1
	AND.b #!Joypad_A|(!Joypad_B>>8)
	BEQ.b CODE_29C3BA
	INC.b $14
	LDA.b #$00
	STA.w $0728
	STA.b $A2
CODE_29C3BA:
	LDY.b #$02
	LDA.b !RAM_SMB3_Global_ScreenDisplayRegisterMirror
	CMP.b #$0F
	BNE.b CODE_29C3DE
	LDA.b $A2
	BMI.b CODE_29C3DE
	DEY
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$38
	BNE.b CODE_29C3D1
	STY.b $A2
	BRA.b CODE_29C3DE

CODE_29C3D1:
	LSR
	LSR
	AND.b #$02
	TAY
	LDA.b $A2
	BEQ.b CODE_29C3DE
	DEC.b $A2
	DEC.b $A2
CODE_29C3DE:
	LDA.w DATA_21F0CA,y
	STA.w SMB3_OAMBuffer[$2C].Tile
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$18
	BEQ.b CODE_29C3FA
	LDY.b $68
	LDA.w DATA_21F0AF,y
	STA.w SMB3_OAMBuffer[$31].Tile
	LDA.w DATA_21F0BC,y
	STA.w SMB3_OAMBuffer[$31].Prop
	BRA.b CODE_29C3FF

CODE_29C3FA:
	LDA.b #$F0
	STA.w SMB3_OAMBuffer[$31].YDisp
CODE_29C3FF:
	RTS

CODE_29C400:
	LDA.w $0711
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR] Reducing flashing speed.
	AND.b #$08
	LSR #2
else
	AND.b #$02
endif
	TAY
	LDA.w DATA_21F0E5,y
	STA.w SMB3_PaletteMirror[$00].LowByte
	LDA.w DATA_21F0E5+$01,y
	STA.w SMB3_PaletteMirror[$00].HighByte
	LDA.b #$01
	STA.w !RAM_SMB3_Global_UpdateEntirePaletteFlag
	RTS

;--------------------------------------------------------------------

CODE_29C418:
	LDY.w !RAM_SMB3_Global_CurrentWorld
	LDA.w DATA_21F0A9,y
	STA.b $68
	BEQ.b CODE_29C439
	LDY.w !RAM_SMB3_Level_Player_CurrentCharacter
	BEQ.b CODE_29C429
	LDY.b #SMB3_IndividualPlayerData[$01].ReserveSlots-SMB3_IndividualPlayerData[$00].ReserveSlots
CODE_29C429:
	LDX.b #SMB3_IndividualPlayerData[$00].CardSlots-SMB3_IndividualPlayerData[$00].ReserveSlots-$01
CODE_29C42B:
	LDA.w SMB3_IndividualPlayerData[$00].ReserveSlots,y
	BEQ.b CODE_29C434
	INY
	DEX
	BNE.b CODE_29C42B
CODE_29C434:
	LDA.b $68
	STA.w SMB3_IndividualPlayerData[$00].ReserveSlots,y
CODE_29C439:
	RTS

;--------------------------------------------------------------------

; Note: Something throne room (post boss) related.

CODE_29C43A:
	LDA.w $0711
	BNE.b CODE_29C4B9
	LDX.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	LDA.w $070B
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,x
	LDA.w $070C
	STA.w SMB3_StripeImageUploadTable[$00].HighByte,x
	CLC
	ADC.b #$20
	STA.w $070C
	BCC.b CODE_29C459
	INC.w $070B
CODE_29C459:
	LDA.b #$00
	STA.w SMB3_StripeImageUploadTable[$01].LowByte,x
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	LDA.b #$31
else
	LDA.b #$2F
endif
	STA.w SMB3_StripeImageUploadTable[$01].HighByte,x
	INC
	LSR
	STA.b $00
	LDY.w $02D4
	LDA.w SMB3_KingTextBoxWindowRowIndex,y
	TAY
CODE_29C46E:
	REP.b #$20
	LDA.w SMB3_KingTextBoxStripeImage,y
	STA.w SMB3_StripeImageUploadTable[$02].LowByte,x
	SEP.b #$20
	INY
	INY
	INX
	INX
	DEC.b $00
	BNE.b CODE_29C46E
	LDA.b #$FF
	STA.w SMB3_StripeImageUploadTable[$02].LowByte,x
	INX
	INX
	INX
	INX
	STX.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	INC.w $02D4
	LDA.w $02D4
	CMP.b #SMB3_KingTextBoxWindowRowIndex_End-SMB3_KingTextBoxWindowRowIndex
	BCC.b CODE_29C4B9
	REP.b #$20
	LDA.b !RAM_SMB3_Level_Player_CurrentPowerUp
	AND.w #$00FF
	ASL
	TAY
	LDA.w SMB3_KingsTextPerPowerupIndexes,y
	STA.w $02D4
	SEP.b #$20
	LDA.b #$50
	STA.w $070B
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	LDA.b #$65
else
	LDA.b #$85
endif
	STA.w $070C
	LDA.b #$10
	STA.w $0711
	INC.w $0728
CODE_29C4B9:
	RTS

;--------------------------------------------------------------------

CODE_29C4BA:
	LDA.w $0711
	BEQ.b CODE_29C4C0
	RTS

CODE_29C4C0:
	REP.b #$10
	LDX.w $02D4
	LDA.w SMB3_KingSavedText_TopHalf,x
	STA.b $00
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	LDA.w SMB3_KingSavedText_LowerHalf,x
	STA.b $01
endif
	SEP.b #$10
	LDY.w !RAM_SMB3_Global_StripeImageUploadIndexLo
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	LDA.b $00
	STA.w SMB3_StripeImageUploadTable[$02].LowByte,y
	LDA.b $01
	STA.w SMB3_StripeImageUploadTable[$03].LowByte,y
else
	STA.w SMB3_StripeImageUploadTable[$02].LowByte,y
endif
	LDA.b #$21
	STA.w SMB3_StripeImageUploadTable[$02].HighByte,y
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	STA.w SMB3_StripeImageUploadTable[$03].HighByte,y
endif
	LDA.w $070B
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,y
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	LDA.b #$03
else
	LDA.b #$01
endif
	STA.w SMB3_StripeImageUploadTable[$01].HighByte,y
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	LDA.b #$80
else
	LDA.b #$00
endif
	STA.w SMB3_StripeImageUploadTable[$01].LowByte,y
	LDA.b #$FF
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	STA.w SMB3_StripeImageUploadTable[$04].LowByte,y
else
	STA.w SMB3_StripeImageUploadTable[$03].LowByte,y
endif
	TYA
	CLC
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	ADC.b #$08
else
	ADC.b #$06
endif
	STA.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	LDA.w $070C
	STA.w SMB3_StripeImageUploadTable[$00].HighByte,y
	REP.b #$20
	INC.w $02D4
	SEP.b #$20
	INC.w $070C
	LDA.w $070C
	AND.b #$1F
	CMP.b #$1B
	BNE.b CODE_29C52E
	LDA.w $070C
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	ADC.b #$29
else
	ADC.b #$09
endif
	STA.w $070C
	BCC.b CODE_29C519
	INC.w $070B
CODE_29C519:
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	CMP.b #$65
else
	CMP.b #$45
endif
	BNE.b CODE_29C52E
	STZ.w $02D4
	STZ.w $02D5
	STA.b $68
	LDA.b #$FF
	STA.w $0711
	INC.w $0728
	RTS

CODE_29C52E:
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDY.b #$03
else
	LDY.b #$04
endif
	LDA.b $00
	CMP.b #$FE
	BNE.b CODE_29C538
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	LDA.b $01
	CMP.b #$FE
	BNE.b CODE_29C538
endif
	LDY.b #$01
CODE_29C538:
	STY.w $0711
	RTS

;--------------------------------------------------------------------

CODE_29C53C:
	LDA.w $0216
	BMI.b CODE_29C542
	RTS

CODE_29C542:
	LDX.b #$1C
CODE_29C544:
	LDA.w DATA_21F442,x
	STA.w SMB3_OAMBuffer[$20].XDisp-$01,x
	TXA
	LSR
	LSR
	TAY
	LDA.b #$02
	STA.w SMB3_OAMTileSizeBuffer[$20].Slot,y
	DEX
	BNE.b CODE_29C544
	LDX.w !RAM_SMB3_Global_CurrentWorld
	LDY.w DATA_21F3B8,x
	LDA.w $0728
	CMP.b #$02
	BNE.b CODE_29C56A
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$10
	BEQ.b CODE_29C56A
	INY
CODE_29C56A:
	LDX.b #$0C
CODE_29C56C:
	LDA.w DATA_21F3BF,y
	STA.w SMB3_OAMBuffer[$21].Tile,x
	LDA.w DATA_21F3F7,y
	STA.w SMB3_OAMBuffer[$21].Prop,x
	INY
	INY
	DEX
	DEX
	DEX
	DEX
	BPL.b CODE_29C56C
	LDY.w !RAM_SMB3_Level_ScrollSpr_SpriteID
	CPY.b #$02
	BCC.b CODE_29C58E
	LDA.b #$E0
	STA.w SMB3_OAMBuffer[$20].Tile
	BRA.b CODE_29C5F2

CODE_29C58E:
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.w DATA_21F43F,y
	BNE.b CODE_29C5A1
	LDA.w !RAM_SMB3_Level_ScrollSpr_HorizontalAutoScrollType
	CLC
	ADC.w DATA_21F441,y
	AND.b #$07
	STA.w !RAM_SMB3_Level_ScrollSpr_HorizontalAutoScrollType
CODE_29C5A1:
	JSR.w CODE_29C69A
	LDA.w !RAM_SMB3_Level_AutoscrollLayerYPosLo
	LDY.w !RAM_SMB3_Level_ScrollSpr_SpriteID
	BNE.b CODE_29C5C1
	CMP.b #$90
	BCC.b CODE_29C5D2
	LDA.b #!Define_SMAS_Sound0060_WandDrop
	STA.w !RAM_SMB3_Global_SoundCh1
	LDA.b #$10
	STA.w !RAM_SMB3_Level_AutoscrollLayerXSpeed
	LDA.b #$B0
	STA.w !RAM_SMB3_Level_AutoscrollLayerYSpeed
	BRA.b CODE_29C5CF

CODE_29C5C1:
	CMP.b #$68
	BCC.b CODE_29C5D2
	LDA.w !RAM_SMB3_Level_AutoscrollLayerYSpeed
	BMI.b CODE_29C5D2
	LDA.b #!Define_SMB3_LevelMusic_WorldClear
	STA.w !RAM_SMB3_Global_MusicCh1
CODE_29C5CF:
	INC.w !RAM_SMB3_Level_ScrollSpr_SpriteID
CODE_29C5D2:
	LDA.w !RAM_SMB3_Level_AutoscrollLayerYPosLo
	STA.w SMB3_OAMBuffer[$10].YDisp
	LDY.w !RAM_SMB3_Level_ScrollSpr_HorizontalAutoScrollType
	LDA.w DATA_21F42F,y
	STA.w SMB3_OAMBuffer[$10].Tile
	LDA.w DATA_21F437,y
	STA.w SMB3_OAMBuffer[$10].Prop
	LDA.w !RAM_SMB3_Level_AutoscrollLayerXPosLo
	STA.w SMB3_OAMBuffer[$10].XDisp
	LDA.b #$02
	STA.w SMB3_OAMTileSizeBuffer[$10].Slot
CODE_29C5F2:
	LDA.w $0669
	CMP.b #$04
	BEQ.b CODE_29C648
	LDX.b #$00
	AND.b #$01
	BNE.b CODE_29C614
	LDA.w $0518
	BEQ.b CODE_29C60B
	DEC.w $0518
	LDX.b #$00
	BRA.b CODE_29C677

CODE_29C60B:
	INC.w $0669
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$E6
else
	LDA.b #$F0
endif
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	STZ.b !RAM_SMB3_Level_NorSpr_XPosLo,x
CODE_29C614:
	STX.b $9B
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	CLC
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	ADC.b #$02
else
	ADC.b #$01
endif
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	JSL.l CODE_27A7F0
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	BEQ.b CODE_29C629
	LDX.b #$06
	BRA.b CODE_29C677

CODE_29C629:
	LDA.w $0669
	CMP.b #$03
	BEQ.b CODE_29C63C
	INC.w $0669
	LDX.b #$00
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$06
else
	LDA.b #$07
endif
	STA.w $0518
	BRA.b CODE_29C677

CODE_29C63C:
	LDX.b $9B
	STZ.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	STZ.b $4F,x
	STZ.w !RAM_SMB3_Level_ScrollSpr_ScrollDirection
	STZ.w $1A08
CODE_29C648:
	LDY.w !RAM_SMB3_Level_ScrollSpr_ScrollDirection
	LDA.w $1A08
	BNE.b CODE_29C674
	DEY
	BPL.b CODE_29C66B
	LDA.w $0669
	CMP.b #$04
	BNE.b CODE_29C666
	STZ.w $0669
	LDX.b #$00
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$12
else
	LDA.b #$17
endif
	STA.w $0518
	BRA.b CODE_29C677

CODE_29C666:
	INC.w $0669
	LDY.b #$07
CODE_29C66B:
	STY.w !RAM_SMB3_Level_ScrollSpr_ScrollDirection
	LDA.w DATA_21F46F,y
	STA.w $1A08
CODE_29C674:
	LDX.w DATA_21F467,y
CODE_29C677:
	LDY.b #$04
CODE_29C679:
	LDA.w DATA_21F45F,x
	STA.w SMB3_OAMBuffer[$25].Tile,y
	INX
	DEY
	DEY
	DEY
	DEY
	BPL.b CODE_29C679
	LDX.b #$00
	LDY.b #$04
CODE_29C68A:
	LDA.w SMB3_OAMBuffer[$25].YDisp,y
	CLC
	ADC.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	STA.w SMB3_OAMBuffer[$25].YDisp,y
	DEY
	DEY
	DEY
	DEY
	BPL.b CODE_29C68A
	RTS

CODE_29C69A:
	LDX.b #$01
	JSR.w CODE_29C6AF
	LDA.w !RAM_SMB3_Level_AutoscrollLayerYSpeed
	BMI.b CODE_29C6A8
	CMP.b #$40
	BCS.b CODE_29C6AE
CODE_29C6A8:
	INC.w !RAM_SMB3_Level_AutoscrollLayerYSpeed
	INC.w !RAM_SMB3_Level_AutoscrollLayerYSpeed
CODE_29C6AE:
	DEX
CODE_29C6AF:
	LDA.w !RAM_SMB3_Level_AutoscrollLayerXSpeed,x
	ASL
	ASL
	ASL
	ASL
	CLC
	ADC.w !RAM_SMB3_Level_AutoscrollLayerSubXPos,x
	STA.w !RAM_SMB3_Level_AutoscrollLayerSubXPos,x
	PHP
	LDA.w !RAM_SMB3_Level_AutoscrollLayerXSpeed,x
	LSR
	LSR
	LSR
	LSR
	CMP.b #$08
	BCC.b CODE_29C6CB
	ORA.b #$F0
CODE_29C6CB:
	PLP
	ADC.w !RAM_SMB3_Level_AutoscrollLayerXPosLo,x
	STA.w !RAM_SMB3_Level_AutoscrollLayerXPosLo,x
	RTS

;--------------------------------------------------------------------

; Note: This routine is called in the post boss throne room.

CODE_29C6D3:
	LDY.b !RAM_SMB3_Level_Player_CurrentPowerUp
	LDA.b !RAM_SMB3_Level_Player_YPosLo
	CMP.b #$80
	BCC.b CODE_29C6DF
	LDX.b !RAM_SMB3_Level_Player_YPosHi
	BEQ.b CODE_29C6F0
CODE_29C6DF:
	CLC
	ADC.b #$04
	STA.b !RAM_SMB3_Level_Player_YPosLo
	BCC.b CODE_29C6E8
	INC.b !RAM_SMB3_Level_Player_YPosHi
CODE_29C6E8:
	INC.w $0711
	LDA.w DATA_21F477,y
	BRA.b CODE_29C6F3

CODE_29C6F0:
	LDA.w DATA_21F47E,y
CODE_29C6F3:
	STA.b !RAM_SMB3_Level_Player_CurrentPose
	JSL.l CODE_20E237
	RTS

;--------------------------------------------------------------------

; Note: Something to do with Peach's letter.

CODE_29C6FA:
	LDX.w !RAM_SMB3_Global_CurrentWorld
	LDY.w SMB3_LetterHeaderAndFooterStartingIndex,x
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	LDX.b #$07
else
	LDX.b #$06
endif
	LDA.b #$80
	STA.w !REGISTER_VRAMAddressIncrementValue
CODE_29C707:
	LDA.w DATA_21F843,x
	STA.w !REGISTER_VRAMAddressLo
	LDA.w DATA_21F83C,x
	STA.w !REGISTER_VRAMAddressHi
CODE_29C713:
	INY
	LDA.w SMB3_LetterHeaderAndFooterText-$01,y
	BEQ.b CODE_29C727
	CMP.b #$FF
	BEQ.b CODE_29C72A
	STA.w !REGISTER_WriteToVRAMPortLo
	LDA.b #$14
	STA.w !REGISTER_WriteToVRAMPortHi
	BRA.b CODE_29C713

CODE_29C727:
	DEX
	BPL.b CODE_29C707
CODE_29C72A:
	LDA.w !RAM_SMB3_Global_CurrentWorld
	ASL
	TAX
	LDA.w SMB3_BodyOfLetterPtrs,x
	STA.b $00
	LDA.w SMB3_BodyOfLetterPtrs+$01,x
	STA.b $01
	LDY.b #$00
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	LDX.b #$07
else
	LDX.b #$05
endif
CODE_29C73D:
	LDA.w DATA_21F6DB,x
	STA.w !REGISTER_VRAMAddressLo
	LDA.w DATA_21F6E1,x
	STA.w !REGISTER_VRAMAddressHi
CODE_29C749:
	LDA.b ($00),y
	INY
	CMP.b #$00
	BEQ.b CODE_29C75E
	CMP.b #$FF
	BEQ.b CODE_29C761
	STA.w !REGISTER_WriteToVRAMPortLo
	LDA.b #$14
	STA.w !REGISTER_WriteToVRAMPortHi
	BRA.b CODE_29C749

CODE_29C75E:
	DEX
	BPL.b CODE_29C73D
CODE_29C761:
	LDA.w !RAM_SMB3_Global_CurrentWorld
	CMP.b #$06
	BNE.b CODE_29C793
	REP.b #$20
	LDX.b #$08
	LDY.b #$00
	LDA.w #$11C6
	STA.b $00
CODE_29C773:
	LDA.b $00
	STA.w !REGISTER_VRAMAddressLo
CODE_29C778:
	LDA.w SMB3_BowserInLetterTilemap,y
	BMI.b CODE_29C784
	STA.w !REGISTER_WriteToVRAMPortLo
	INY
	INY
	BRA.b CODE_29C778

CODE_29C784:
	INY
	INY
	LDA.b $00
	CLC
	ADC.w #$0020
	STA.b $00
	DEX
	BNE.b CODE_29C773
	SEP.b #$20
CODE_29C793:
	RTL

;--------------------------------------------------------------------

CODE_29C794:
	JSL.l CODE_29C82B
	RTL

DATA_29C799:
	dw $1000
	dw DATA_3C9000
	dw DATA_3C9580
	dw DATA_3C9B00
	dw DATA_3C9160
	dw DATA_3C9B00
	dw DATA_3C96E0
	dw $2002
	dw DATA_3C9B00
	dw DATA_3C92C0
	dw DATA_3C9840
	dw DATA_3C9000
	dw DATA_3C99A0
	dw DATA_3C9160
	dw DATA_3C9420
	dw $2000
	dw $2001
	dw $2002
	dw $3000

DATA_29C7BF:
	dw DATA_3C9E00,DATA_3C9E80,DATA_3C9E00,DATA_3C9F00
	dw DATA_3C9F00,DATA_3C9F80,DATA_3CA000,DATA_3CA080
	dw DATA_3C9E00,DATA_3C9D80

DATA_29C7D3:
	dw DATA_3C8960
	dw DATA_3C8980
	dw DATA_3C89A0
	dw DATA_3C89C0
	dw DATA_3C89E0
	dw DATA_3C8A00
	dw DATA_3C8960
	dw $0000

DATA_29C7E3:
	dw RegularMarioPalette,RegularMarioPalette,FireMarioPalette,RegularMarioPalette
	dw RegularLuigiPalette,TanookiSuitPalette,HammerSuitPalette,RegularLuigiPalette
	dw RegularLuigiPalette,FireLuigiPalette,RegularLuigiPalette,RegularLuigiPalette
	dw TanookiSuitPalette,HammerSuitPalette

DATA_29C7FF:
	dw DATA_3C9C80,DATA_3C9C90,DATA_3C9CA0,DATA_3C9CB0
	dw DATA_3C9CC0,DATA_3C9CD0,DATA_3C9CE0,DATA_3C9CF0
	dw DATA_3C9D00,DATA_3C9D10,DATA_3C9D20,DATA_3C9D30
	dw DATA_3C9D40,DATA_3C9D50,DATA_3C9D60

DATA_29C81D:
	db $00,$07

DATA_29C81F:
	dw $0040,$0040,$0020

DATA_29C825:
	dw DATA_3C8BC0,DATA_3C8B60,DATA_3C8BC0

CODE_29C82B:
	LDA.b #$20
	STA.w !RAM_SMB3_Global_FixedColorData1Mirror
	ASL
	STA.w !RAM_SMB3_Global_FixedColorData2Mirror
	ASL
	STA.w !RAM_SMB3_Global_FixedColorData3Mirror
	REP.b #$30
	PHB
	LDX.w #UnknownPaletteData01_Row00
	LDY.w #SMB3_PaletteMirror[$00].LowByte
	LDA.w #UnknownPaletteData01_Row00End-UnknownPaletteData01_Row00-$01
	MVN SMB3_PaletteMirror[$00].LowByte>>16,UnknownPaletteData01_Row00>>16
	PLB
	PHB
	LDX.w #SMB3_GlobalSpritePalette_Row08To0C
	LDY.w #SMB3_PaletteMirror[$80].LowByte
	LDA.w #$009F
	MVN SMB3_PaletteMirror[$80].LowByte>>16,SMB3_GlobalSpritePalette_Row08To0C>>16
	PLB
	LDA.w !RAM_SMB3_Global_TilesetFromHeader
	AND.w #$00FF
	ASL
	TAX
	LDA.l DATA_29C799,x
	AND.w #$F000
	BEQ.b CODE_29C89D
	CMP.w #$1000
	BEQ.b CODE_29C8A4
	CMP.w #$2000
	BEQ.b CODE_29C8A9
	CMP.w #$3000
	BEQ.b CODE_29C89F
	CPX.w #$0004
	BNE.b CODE_29C886
	LDA.w !RAM_SMB3_Level_GraphicsAndPaletteSettingFromHeader
	AND.w #$00FF
	CMP.w #$0016
	BEQ.b CODE_29C89A
CODE_29C886:
	JSR.w CODE_29CAA0
	JSR.w CODE_29CBC0
	LDA.w !RAM_SMB3_Level_BackgroundColorSettingFromHeader
	AND.w #$0007
	ASL
	TAX
	LDA.l SMB3_BackgroundColorTable,x
	BRA.b CODE_29C90E

CODE_29C89A:
	JSR.w CODE_29CB7E
CODE_29C89D:
	BRA.b CODE_29C90B

CODE_29C89F:
	JSR.w CODE_29CCB6
	BRA.b CODE_29C90B

CODE_29C8A4:
	JSR.w CODE_29CC14
	BRA.b CODE_29C90B

CODE_29C8A9:						; Note: Something related to the spade levels.
	PHX
	PHB
	LDX.w #SpadeLevelPalette_Row01To07
	LDY.w #SMB3_PaletteMirror[$10].LowByte
	LDA.w #SpadeLevelPalette_Row01To07End-SpadeLevelPalette_Row01To07-$01
	MVN SMB3_PaletteMirror[$10].LowByte>>16,SpadeLevelPalette_Row01To07>>16
	LDX.w #DATA_3C8A60
	LDY.w #SMB3_PaletteMirror[$E0].LowByte
	LDA.w #$001F
	MVN SMB3_PaletteMirror[$E0].LowByte>>16,DATA_3C8A60>>16
	PLB
	LDA.w !RAM_SMB3_Global_TilesetFromHeader
	AND.w #$00FF
	CMP.w #$000F
	BNE.b CODE_29C8E5
	LDA.w !RAM_SMB3_Level_Player_CurrentCharacter
	AND.w #$0001
	BEQ.b CODE_29C8E5
	PHB
	LDX.w #RegularLuigiPalette
	LDY.w #SMB3_PaletteMirror[$70].LowByte
	LDA.w #$001F
	MVN SMB3_PaletteMirror[$70].LowByte>>16,RegularLuigiPalette>>16
	PLB
CODE_29C8E5:
	PLX
	LDA.l DATA_29C799,x
	AND.w #$000F
	ASL
	TAX
	PHX
	PHB
	LDA.l DATA_29C825,x
	TAX
	LDY.w #SMB3_PaletteMirror[$D0].LowByte
	LDA.w #$001F
	MVN SMB3_PaletteMirror[$D0].LowByte>>16,DATA_3C8BC0>>16
	PLB
	PLX
	LDA.l DATA_29C81F,x
	TAX
	LDA.w SMB3_PaletteMirror[$10].LowByte,x
	BRA.b CODE_29C90E

CODE_29C90B:
	LDA.w SMB3_PaletteMirror[$40].LowByte
CODE_29C90E:
	STA.w $02B9
	STA.w SMB3_PaletteMirror[$00].LowByte
	AND.w #$001F
	ORA.w #$0020
	STA.b $D8
	LDA.w $02B9
	LSR
	LSR
	LSR
	LSR
	LSR
	AND.w #$001F
CODE_29C926:
	ORA.w #$0040
	STA.b $DA
	LDA.w $02B9
	XBA
	LSR
	LSR
	AND.w #$001F
	ORA.w #$0080
	STA.b $DC
	SEP.b #$30
	STZ.w SMB3_PaletteMirror[$00].LowByte
	STZ.w SMB3_PaletteMirror[$00].HighByte
	LDA.b $D8
	STA.w !RAM_SMB3_Global_FixedColorData1Mirror
	LDA.b $DA
	STA.w !RAM_SMB3_Global_FixedColorData2Mirror
	LDA.b $DC
	STA.w !RAM_SMB3_Global_FixedColorData3Mirror
	LDA.w !RAM_SMB3_Level_Layer2BGFromHeader
	CMP.b #$03
	BNE.b CODE_29C95D
	LDA.b #$83
	STA.w !RAM_SMB3_Global_FixedColorData3Mirror
CODE_29C95D:
	LDA.b #$01
	STA.w !RAM_SMB3_Global_UpdateEntirePaletteFlag
	RTL

DATA_29C963:
	dw $0000,DATA_29C983,DATA_29C98B,DATA_29C993
	dw DATA_29C99B,DATA_29C9A3,DATA_29C9AB,DATA_29C983
	dw DATA_29C9B3,DATA_29C9BB,DATA_29C9C3,DATA_29C9CB
	dw DATA_29C9D3,DATA_29C9DB,DATA_29C9E3,$0000

DATA_29C983:
	dw DATA_3C9060,DATA_3C90A0,DATA_3C90E0,DATA_3C9120

DATA_29C98B:
	dw DATA_3C95E0,DATA_3C9620,DATA_3C9660,DATA_3C96A0

DATA_29C993:
	dw DATA_3C9B60,DATA_3C9BA0,DATA_3C9BE0,DATA_3C9C20

DATA_29C99B:
	dw DATA_3C91C0,DATA_3C9200,DATA_3C9240,DATA_3C9280

DATA_29C9A3:
	dw DATA_3C9B60,DATA_3C9BA0,DATA_3C9BE0,DATA_3C9C20

DATA_29C9AB:
	dw DATA_3C9740,DATA_3C9780,DATA_3C97C0,DATA_3C9800

DATA_29C9B3:
	dw DATA_3C9B60,DATA_3C9BA0,DATA_3C9BE0,DATA_3C9C20

DATA_29C9BB:
	dw DATA_3C9320,DATA_3C9360,DATA_3C93A0,DATA_3C93E0

DATA_29C9C3:
	dw DATA_3C98A0,DATA_3C98E0,DATA_3C9920,DATA_3C9960

DATA_29C9CB:
	dw DATA_3C9060,DATA_3C90A0,DATA_3C90E0,DATA_3C9120

DATA_29C9D3:
	dw DATA_3C9A00,DATA_3C9A40,DATA_3C9A80,DATA_3C9AC0

DATA_29C9DB:
	dw DATA_3C91C0,DATA_3C9200,DATA_3C9240,DATA_3C9280

DATA_29C9E3:
	dw DATA_3C9480,DATA_3C94C0,DATA_3C9500,DATA_3C9540

DATA_29C9EB:
	dw DATA_3CA600,DATA_3CA640,DATA_3CA680,DATA_3CA6C0
	dw DATA_3CA700,DATA_3CA740,DATA_3CA780,DATA_3CA7C0
	dw DATA_3CA800,DATA_3CA840,DATA_3CA880,DATA_3CA8C0
	dw DATA_3CA900,DATA_3CA940,DATA_3CA700,DATA_3CA9C0
	dw DATA_3CAA00,DATA_3CAA40,DATA_3CAA80,DATA_3CAAC0
	dw DATA_3CAB00,DATA_3CAB40,DATA_3CAB80,DATA_3CABC0
	dw DATA_3CA980

DATA_29CA1D:
	dw $0000,$0103,$0403,$0103
	dw $0103,$0103,$0105,$000C
	dw $0109,$0103,$0302,$0103
	dw $0100,$0103,$0000,$000D
	dw $0000,$0000,$0000,$0100
	dw $0100,$0102,$060C,$0403
	dw $0103,$0105,$0403,$0105
	dw $0103,$0403,$0103,$0100
	dw $0100,$0103,$0103,$0103
	dw $0100,$0403,$0100,$0105
	dw $0100,$0100,$0403,$0403
	dw $0403,$0302,$0105,$0103

DATA_29CA7D:
	db $08,$08,$07,$07,$08,$08,$08

DATA_29CA84:
	dw DATA_3C8A40,DATA_3C8A60,DATA_3C8A80,DATA_3C8AA0
	dw DATA_3C8AC0,DATA_3C8AE0,DATA_3C8B00,DATA_3C8B20
	dw DATA_3C8B40,DATA_3C8B60,DATA_3C8B80,DATA_3C8BA0
	dw DATA_3C8BC0,DATA_3C8BE0

CODE_29CAA0:
	LDA.l DATA_29C799,x
	PHB
	TAX
	LDY.w #SMB3_PaletteMirror[$30].LowByte
	LDA.w #$005F
	MVN SMB3_PaletteMirror[$30].LowByte>>16,SMB3_Palettes_Main>>16
	PLB
	LDA.w $02BE
	AND.w #$00FF
	BEQ.b CODE_29CACB
	DEC
	ASL
	TAX
	PHB
	LDA.l DATA_29C7FF,x
	TAX
	LDY.w #SMB3_PaletteMirror[$08].LowByte
	LDA.w #$000F
	MVN SMB3_PaletteMirror[$00].LowByte>>16,DATA_3C9C80>>16
	PLB
CODE_29CACB:
	LDA.w !RAM_SMB3_Global_TilesetFromHeader
	AND.w #$00FF
	ASL
	TAX
	LDA.l DATA_29C963,x
	STA.b $00
	LDA.w #DATA_29C963>>16
	STA.b $02
	LDA.w $073B
	AND.w #$0003
	ASL
	TAY
	LDA.b [$00],y
	PHB
	TAX
	LDA.w !RAM_SMB3_Level_Layer2BGFromHeader
	AND.w #$00FF
	CMP.w #$000B
	BNE.b CODE_29CAF8
	LDX.w #DATA_3C94C0
CODE_29CAF8:
	LDY.w #SMB3_PaletteMirror[$60].LowByte
	LDA.w #$003F
	MVN SMB3_PaletteMirror[$60].LowByte>>16,SMB3_Palettes_Main>>16
	PLB
	LDA.w !RAM_SMB3_Level_Layer2BGPaletteFromHeader
	AND.w #$00FF
	ASL
	TAX
	LDA.l DATA_29C9EB,x
	PHB
	TAX
	LDY.w #SMB3_PaletteMirror[$10].LowByte
	LDA.w #$003F
	MVN SMB3_PaletteMirror[$10].LowByte>>16,SMB3_Palettes_Main>>16
	PLB
	LDA.w !RAM_SMB3_Level_GraphicsAndPaletteSettingFromHeader
	AND.w #$00FF
	ASL
	TAX
	LDA.l DATA_29CA1D,x
	AND.w #$00FF
	ASL
	STA.b $D8
	LDA.l DATA_29CA1D+$01,x
	AND.w #$00FF
	ASL
	STA.b $DA
CODE_29CB36:
	LDA.w !RAM_SMB3_Level_Player_CurrentCharacter
	AND.w #$00FF
	TAY
	LDA.w $073D,y
	AND.w #$00FF
	BEQ.b CODE_29CB56
	LDA.w !RAM_SMB3_Global_CurrentWorld
	AND.w #$00FF
	TAX
	LDA.l DATA_29CA7D,x
	AND.w #$00FF
	ASL
	STA.b $DA
CODE_29CB56:
	LDX.b $D8
	LDA.l DATA_29CA84,x
	TAX
	PHB
	TAX
	LDY.w #SMB3_PaletteMirror[$D0].LowByte
	LDA.w #$001F
	MVN SMB3_PaletteMirror[$D0].LowByte>>16,SMB3_Palettes_Main>>16
	PLB
	LDX.b $DA
	LDA.l DATA_29CA84,x
	TAX
	PHB
	TAX
	LDY.w #SMB3_PaletteMirror[$E0].LowByte
	LDA.w #$001F
	MVN SMB3_PaletteMirror[$E0].LowByte>>16,SMB3_Palettes_Main>>16
	BRL.w CODE_29CC7C

CODE_29CB7E:
	PHB
	LDX.w #DATA_3CA500
	LDY.w #SMB3_PaletteMirror[$10].LowByte
	LDA.w #$00DF
	MVN SMB3_PaletteMirror[$10].LowByte>>16,DATA_3CA500>>16
	PLB
	LDA.w !RAM_SMB3_Level_GraphicsAndPaletteSettingFromHeader
	AND.w #$00FF
	ASL
	TAX
	LDA.l DATA_29CA1D,x
	AND.w #$00FF
	ASL
	STA.b $D8
	LDA.l DATA_29CA1D+$01,x
	AND.w #$00FF
	ASL
	STA.b $DA
	LDA.w !RAM_SMB3_Global_CurrentWorld
	AND.w #$00FF
	CMP.w #$0003
	BEQ.b CODE_29CBB8
	CMP.w #$0004
	BNE.b CODE_29CBBD
CODE_29CBB8:
	LDA.w #$0016
	STA.b $DA
CODE_29CBBD:
	BRL.w CODE_29CB36

CODE_29CBC0:
	LDA.w !RAM_SMB3_Global_CurrentWorld
	AND.w #$00FF
	CMP.w #$0007
	BNE.b CODE_29CBEE
	LDA.w !RAM_SMB3_Level_Player_CurrentCharacter
	AND.w #$00FF
	TAX
	LDA.l $7E3977,x
	AND.w #$00FF
	CMP.w #$0003
	BNE.b CODE_29CC13
	LDA.w !RAM_SMB3_Global_TilesetFromHeader
	AND.w #$00FF
	CMP.w #$0002
	BNE.b CODE_29CC13
	LDA.w #DATA_3C8A20
	BRA.b CODE_29CC07

CODE_29CBEE:
	LDA.w !RAM_SMB3_Global_TilesetFromHeader
	AND.w #$00FF
	CMP.w #$000A
	BNE.b CODE_29CC13
	LDA.w !RAM_SMB3_Global_CurrentWorld
	AND.w #$00FF
	ASL
	TAX
	LDA.l DATA_29C7D3,x
	BEQ.b CODE_29CC13
CODE_29CC07:
	PHB
	TAX
	LDY.w #SMB3_PaletteMirror[$C0].LowByte
	LDA.w #$001F
	MVN SMB3_PaletteMirror[$C0].LowByte>>16,SMB3_Palettes_Main>>16
	PLB
CODE_29CC13:
	RTS

CODE_29CC14:
	PHB
	LDX.w #DATA_3CA3A0
	LDY.w #SMB3_PaletteMirror[$10].LowByte
	LDA.w #$005F
	MVN SMB3_PaletteMirror[$10].LowByte>>16,DATA_3CA3A0>>16
	PLB
	LDA.w !RAM_SMB3_Global_CurrentWorld
	AND.w #$00FF
	CMP.w #$0004
	BNE.b CODE_29CC59
	LDA.w !RAM_SMB3_Level_Player_CurrentCharacter
	AND.w #$00FF
	TAX
	LDA.l $7E3977,x
	AND.w #$00FF
	BEQ.b CODE_29CC42
	LDA.w #$0009
	BRA.b CODE_29CC5F

CODE_29CC42:
	LDA.w !RAM_SMB3_Level_Player_CurrentCharacter
	AND.w #$00FF
	TAY
	LDA.w $0047,y
	AND.w #$00FF
if !Define_Global_ROMToAssemble&(!ROM_SMAS_U|!ROM_SMAS_J1) != $00
	CMP.w #$00E0
else
	CMP.w #$00E1
endif
	BCC.b CODE_29CC59
	LDA.w #$0009
	BRA.b CODE_29CC5F

CODE_29CC59:
	LDA.w !RAM_SMB3_Global_CurrentWorld
	AND.w #$00FF
CODE_29CC5F:
	ASL
	TAX
	LDA.l DATA_29C7BF,x
	PHB
	TAX
	LDY.w #SMB3_PaletteMirror[$40].LowByte
	LDA.w #$007F
	MVN SMB3_PaletteMirror[$40].LowByte>>16,SMB3_Palettes_Main>>16
	LDX.w #SMB3TitleScreenPalette_Row0DTo0E
	LDY.w #SMB3_PaletteMirror[$D0].LowByte
	LDA.w #$003F
	MVN SMB3_PaletteMirror[$D0].LowByte>>16,SMB3TitleScreenPalette_Row0DTo0E>>16
CODE_29CC7C:
	LDA.w !RAM_SMB3_Level_Player_CurrentCharacter
	AND.w #$0001
	TAX
	LDA.w $0747,x
	AND.w #$00FF
	ASL
	STA.b $D8
	LDA.l DATA_29C81D,x
	AND.w #$00FF
	ASL
	CLC
	ADC.b $D8
	TAX
	LDA.l DATA_29C7E3,x
	TAX
	LDY.w #SMB3_PaletteMirror[$F0].LowByte
	LDA.w #$001F
	MVN SMB3_PaletteMirror[$F0].LowByte>>16,SMB3_Palettes_Main>>16
	PLB
	LDX.w #$0020
CODE_29CCAA:
	LDA.w SMB3_PaletteMirror[$F0].LowByte,x
	STA.l !RAM_SMB3_Level_Player_CurrentPaletteDataTable,x
	DEX
	DEX
	BPL.b CODE_29CCAA
	RTS

CODE_29CCB6:
	PHB
	LDX.w #DATA_3CA920
	LDY.w #SMB3_PaletteMirror[$20].LowByte
	LDA.w #$001F
	MVN SMB3_PaletteMirror[$20].LowByte>>16,DATA_3CA920>>16
	LDX.w #DATA_3C96E0
	LDY.w #SMB3_PaletteMirror[$30].LowByte
	LDA.w #$005F
	MVN SMB3_PaletteMirror[$30].LowByte>>16,DATA_3C96E0>>16
	LDX.w #DATA_3C9780
	LDY.w #SMB3_PaletteMirror[$60].LowByte
	LDA.w #$003F
	MVN SMB3_PaletteMirror[$60].LowByte>>16,DATA_3C9780>>16
	LDX.w #SMB3TitleScreenPalette_Row0DTo0E
	LDY.w #SMB3_PaletteMirror[$D0].LowByte
	LDA.w #$003F
	MVN SMB3_PaletteMirror[$D0].LowByte>>16,SMB3TitleScreenPalette_Row0DTo0E>>16
	LDX.w #RegularMarioPalette
	LDY.w #SMB3_PaletteMirror[$F0].LowByte
	LDA.w #$001F
	MVN SMB3_PaletteMirror[$F0].LowByte>>16,RegularMarioPalette>>16
	STZ.w SMB3_PaletteMirror[$40].LowByte
	PLB
	RTS

;--------------------------------------------------------------------

CODE_29CCF8:
	REP.b #$30
	PHB
	LDX.w #SMB3_GlobalSpritePalette_Row08To0C
	LDY.w #SMB3_PaletteMirror[$80].LowByte
	LDA.w #$009F
	MVN SMB3_PaletteMirror[$80].LowByte>>16,SMB3_GlobalSpritePalette_Row08To0C>>16
	LDX.w #DATA_3C8BE0
	LDY.w #SMB3_PaletteMirror[$D0].LowByte
	LDA.w #$001F
	MVN SMB3_PaletteMirror[$D0].LowByte>>16,DATA_3C8BE0>>16
	PLB
	SEP.b #$30
	RTS

;--------------------------------------------------------------------

; Note: Routine that animates the player palette while under the effects of a star?

DATA_29CD17:
	dw $45BC,$14A5,$7FFF,$023F,$01D8,$0136,$42FF,$3ABF,$2D9C,$5B3F,$6976,$50F0,$3C88,$0136,$01D8,$023F

DATA_29CD37:
	dw $45BC,$7FFF,$14A5,$0092,$0098,$009F,$215B,$261D,$36BE,$152F,$2C95,$413A,$55DF,$031F,$027A,$01D5

DATA_29CD57:
	dw $45BC,$14A5,$7FFF,$55DF,$413A,$2C95,$42FF,$3ABF,$2D9C,$5B3F,$217F,$14D9,$0453,$0200,$02E0,$03E0

DATA_29CD77:
	dl !RAM_SMB3_Level_Player_CurrentPaletteDataTable
	dl DATA_29CD17
	dl DATA_29CD37
	dl DATA_29CD57

CODE_29CD83:
	LDY.w !RAM_SMB3_Level_Player_StarPowerTimer
	CPY.b #$01
	BNE.b CODE_29CD8F
	STZ.w $02C7
	BRA.b CODE_29CDB2

CODE_29CD8F:
	DEC.w $02C6
	BPL.b CODE_29CDB2
	LDA.b #$03
	CPY.b #$40
	BCS.b CODE_29CDA2
	LDA.b #$06
	CPY.b #$1E
	BCC.b CODE_29CDA2
	LDA.b #$05
CODE_29CDA2:
	STA.w $02C6
	INC.w $02C7
	LDA.w !RAM_SMB3_Level_Player_StarPowerTimer
	CMP.b #$05
	BCS.b CODE_29CDB2
	STZ.w $02C7
CODE_29CDB2:
	LDA.w $02C7
	AND.b #$03
	STA.b $D8
	ASL
	CLC
	ADC.b $D8
	TAX
	LDA.l DATA_29CD77,x
	STA.b $0D
	LDA.l DATA_29CD77+$01,x
	STA.b $0E
	LDA.l DATA_29CD77+$02,x
	STA.b $0F
	REP.b #$20
	LDY.b #$1E
CODE_29CDD4:
	LDA.b [$0D],y
	STA.w SMB3_PaletteMirror[$F0].LowByte,y
	DEY
	DEY
	BPL.b CODE_29CDD4
	SEP.b #$20
	LDA.b #$01
	STA.w !RAM_SMB3_Global_UpdateEntirePaletteFlag
	RTL

;--------------------------------------------------------------------

	%ROUTINE_SMB3_BufferTitleScreenSpritePalettes(NULLROM)			; $29CDE5

;--------------------------------------------------------------------

CODE_29CE10:
	REP.b #$30
	LDA.w SMB3_PaletteMirror[$00].LowByte
	STA.b $DC
	AND.w #$001F
	ORA.w #$0020
	STA.b $D8
	LDA.b $DC
	LSR
	LSR
	LSR
	LSR
	LSR
	AND.w #$001F
	ORA.w #$0040
	STA.b $DA
	LDA.b $DC
	XBA
	LSR
	LSR
	AND.w #$001F
	ORA.w #$0080
	STA.b $DC
	STZ.w SMB3_PaletteMirror[$00].LowByte
	SEP.b #$30
	LDA.b $D8
	STA.w !RAM_SMB3_Global_FixedColorData1Mirror
	LDA.b $DA
	STA.w !RAM_SMB3_Global_FixedColorData2Mirror
	LDA.b $DC
	STA.w !RAM_SMB3_Global_FixedColorData3Mirror
	LDA.b #$01
	STA.w !RAM_SMB3_Global_UpdateEntirePaletteFlag
	RTL

;--------------------------------------------------------------------

; Note: Called during the ending.

DATA_29CE55:
	dw DATA_3CAC00,DATA_3CAD00,DATA_3CAE00,DATA_3CAF00
	dw DATA_3CB000,DATA_3CB100,DATA_3CB200,DATA_3CB300

MarioPaletteDuringWorldRollcall:
;$29CE65
	dw RegularMarioPalette,RegularMarioPalette,RegularLuigiPalette,RegularMarioPalette
	dw TanookiSuitPalette,RegularMarioPalette,HammerSuitPalette,RegularMarioPalette

DATA_29CE75:
	dw $0000,$0000,DATA_3C8AE0,$0000
	dw $0000,DATA_3C8A40,DATA_3C8A40,$0000

LuigiPaletteDuringWorldRollcall:
;$29CE85
	dw RegularLuigiPalette,RegularLuigiPalette,RegularLuigiPalette,RegularLuigiPalette
	dw TanookiSuitPalette,RegularLuigiPalette,HammerSuitPalette,RegularLuigiPalette

CODE_29CE95:
	REP.b #$30
	PHB
	LDA.b $4D
	AND.w #$00FF
	ASL
	TAX
	LDA.l DATA_29CE55,x
	TAX
	LDY.w #$7F9400
	LDA.w #$00FF
	MVN $7F9400>>16,DATA_3CAC00>>16
	LDX.w #SMB3_GlobalSpritePalette_Row08To0C
	LDY.w #$7F9500
	LDA.w #$007F
	MVN $7F9500>>16,SMB3_GlobalSpritePalette_Row08To0C>>16
	LDX.w #DATA_3C8A20
	LDY.w #$7F9580
	LDA.w #$001F
	MVN $7F9580>>16,DATA_3C8A20>>16
	PLB
	LDA.b $4D
	AND.w #$00FF
	ASL
	TAX
	LDA.l DATA_29CE75,x
	BEQ.b CODE_29CEDF
	PHB
	TAX
	LDY.w #$7F95A0
	LDA.w #$001F
	MVN $7F95A0>>16,DATA_3C8A40>>16
	PLB
CODE_29CEDF:
	LDA.b $4D
	AND.w #$00FF
	ASL
	TAX
	LDA.w !RAM_SMB3_Level_Player_CurrentCharacter
	AND.w #$00FF
	BEQ.b CODE_29CEF4
	LDA.l LuigiPaletteDuringWorldRollcall,x
	BRA.b CODE_29CEF8

CODE_29CEF4:
	LDA.l MarioPaletteDuringWorldRollcall,x
CODE_29CEF8:
	PHB
	TAX
	LDY.w #$7F95E0
	LDA.w #$001F
	MVN $7F95E0>>16,RegularMarioPalette>>16
	PLB
	LDX.w #$0000
	TXA
CODE_29CF08:
	STA.w SMB3_PaletteMirror[$10].LowByte,x
	STA.w SMB3_PaletteMirror[$20].LowByte,x
	STA.w SMB3_PaletteMirror[$30].LowByte,x
	STA.w SMB3_PaletteMirror[$40].LowByte,x
	STA.w SMB3_PaletteMirror[$50].LowByte,x
	STA.w SMB3_PaletteMirror[$60].LowByte,x
	STA.w SMB3_PaletteMirror[$70].LowByte,x
	STA.w SMB3_PaletteMirror[$80].LowByte,x
	STA.w SMB3_PaletteMirror[$90].LowByte,x
	STA.w SMB3_PaletteMirror[$A0].LowByte,x
	STA.w SMB3_PaletteMirror[$B0].LowByte,x
	STA.w SMB3_PaletteMirror[$C0].LowByte,x
	STA.w SMB3_PaletteMirror[$D0].LowByte,x
	STA.w SMB3_PaletteMirror[$E0].LowByte,x
	STA.w SMB3_PaletteMirror[$F0].LowByte,x
	INX
	INX
	CPX.w #$0020
	BNE.b CODE_29CF08
	STA.w SMB3_PaletteMirror[$00].LowByte
	STA.w SMB3_PaletteMirror[$08].LowByte
	STA.w SMB3_PaletteMirror[$09].LowByte
	STA.w SMB3_PaletteMirror[$0A].LowByte
	STA.w SMB3_PaletteMirror[$0B].LowByte
	STA.w SMB3_PaletteMirror[$0C].LowByte
	STA.w SMB3_PaletteMirror[$0D].LowByte
	STA.w SMB3_PaletteMirror[$0E].LowByte
	STA.w SMB3_PaletteMirror[$0F].LowByte
	STZ.w $02B7
	SEP.b #$30
	LDA.b #$01
	STA.w !RAM_SMB3_Global_UpdateEntirePaletteFlag
	RTL

;--------------------------------------------------------------------

SMB3_BufferTitleScreenPalettes:
.Main:
;$29CF62
	REP.b #$30
	PHB
	LDX.w #SMB3TitleScreenPalette_Row01To03
	LDY.w #$7F9400
	LDA.w #$001F
	MVN $7F9400>>16,SMB3TitleScreenPalette_Row01To03>>16
	LDX.w #TitleScreenPalette_Row04To07
	LDY.w #$7F9480
	LDA.w #$007F
	MVN $7F9480>>16,TitleScreenPalette_Row04To07>>16
	PLB
	LDX.w #$0000
	TXA
CODE_29CF82:
	STA.w SMB3_PaletteMirror[$00].LowByte,x
	STA.w SMB3_PaletteMirror[$40].LowByte,x
	STA.w SMB3_PaletteMirror[$50].LowByte,x
	STA.w SMB3_PaletteMirror[$60].LowByte,x
	STA.w SMB3_PaletteMirror[$70].LowByte,x
	INX
	INX
	CPX.w #$0020
	BNE.b CODE_29CF82
	LDA.l SMB3TitleScreenPalette_Row01To03+$3E
	STA.l $7F943E
	LDA.l SMB3TitleScreenPalette_Row01To03+$5E
	STA.l $7F945E
	LDA.w #$FF00
	STA.w $02B7
	SEP.b #$30
	LDA.b #$01
	STA.w !RAM_SMB3_Global_UpdateEntirePaletteFlag
	RTL

;--------------------------------------------------------------------

CODE_29CFB6:
	REP.b #$30
	PHB
	LDX.w #SMB3_GlobalSpritePalette_Row08To0C+$40
	LDY.w #$7F9540
	LDA.w #$001F
	MVN $7F9540>>16,SMB3_GlobalSpritePalette_Row08To0C+$40>>16
	PLB
	STZ.w $02B3
	LDA.w #$0000
	STA.l $7F9400
	SEP.b #$30
	STZ.w $02B7
	RTL

;--------------------------------------------------------------------

DATA_29CFD6:
	dw $FFFF,$FFFF,$FFFE,$FFFF,$7FFF,$7FFF,$7FDF,$FBFF

DATA_29CFE6:
	dw $7F7F,$7F7F,$7DF7,$EFBF,$7BDF,$7BDF,$77BB,$DDEF

DATA_29CFF6:
	dw $7777,$7777,$6EDD,$BB77,$6DB7,$6DB7,$5B6D,$B6DB

DATA_29D006:
	dw $5B5B,$5B5B,$5B5B,$5B5B,$5555,$AD6B,$5555,$AAAB

DATA_29D016:
	dw $5555,$5555,$2A55,$5555,$2A55,$2A55,$294A,$5295

DATA_29D026:
	dw $2525,$2525,$2492,$4925,$1249,$1249,$1122,$4489

DATA_29D036:
	dw $1111,$1111,$0844,$2211,$0421,$0421,$0208,$1041

DATA_29D046:
	dw $0101,$0101,$0020,$0401,$0001,$0001,$0000,$0001

DATA_29D056:
	dw DATA_29D06A,DATA_29D05A

DATA_29D05A:
	dw $0000,$FFFF,$FFE0,$FFDF,$FC00,$FBFF,$FBE0,$FBDF

DATA_29D06A:
	dw $0000,$0001,$0020,$0021,$0400,$0401,$0420,$0421

DATA_29D07A:
	dw $8000,$4000,$2000,$1000,$0800,$0400,$0200,$0100
	dw $0080,$0040,$0020,$0010,$0008,$0004,$0002,$0001

CODE_29D09A:
	REP.b #$30
	LDX.w $02B3
	LDA.l DATA_29D056,x
	STA.b $D8
	LDA.w #DATA_29D06A>>16
	STA.b $DA
	LDA.w $02B5
	AND.w #$000F
	ASL
	TAX
	LDA.l DATA_29D07A,x
	STA.b $DB
	LDX.w #$0000
	TXY
	LDA.w $02B5
	CMP.w #$0010
	BCC.b CODE_29D0C6
	INX
	INX
CODE_29D0C6:
	SEP.b #$20
	PHB
	LDA.b #$7F9600>>16
	PHA
	PLB
	REP.b #$20
CODE_29D0CF:
	LDA.l DATA_29CFD6,x
	AND.b $DB
	STA.w $7F9600,y
	LDA.l DATA_29CFE6,x
	AND.b $DB
	STA.w $7F9608,y
	LDA.l DATA_29CFF6,x
	AND.b $DB
	STA.w $7F9610,y
	LDA.l DATA_29D006,x
	AND.b $DB
	STA.w $7F9618,y
	LDA.l DATA_29D016,x
	AND.b $DB
	STA.w $7F9620,y
	LDA.l DATA_29D026,x
	AND.b $DB
	STA.w $7F9628,y
	LDA.l DATA_29D036,x
	AND.b $DB
	STA.w $7F9630,y
	LDA.l DATA_29D046,x
	AND.b $DB
	STA.w $7F9638,y
	INX
	INX
	INX
	INX
	INY
	INY
	CPY.w #$0008
	BNE.b CODE_29D0CF
	SEP.b #$20
	PLB
	REP.b #$20
	LDX.w #$0000
	STZ.w $029A
CODE_29D12D:
	STZ.b $DB
	STX.w $029F
	LDA.l $7F9400,x
	STA.w $0299
	AND.w #$001F
	ASL
	TAX
	LDA.l $7F9600,x
	BNE.b CODE_29D149
	LDA.w #$0002
	STA.b $DB
CODE_29D149:
	LDA.w $0299
	AND.w #$03E0
	LSR
	LSR
	LSR
	LSR
	TAX
	LDA.l $7F9600,x
	BNE.b CODE_29D15F
	LDA.w #$0004
	TSB.b $DB
CODE_29D15F:
	LDA.w $029A
	LSR
	LSR
	ASL
	TAX
	LDA.l $7F9600,x
	BNE.b CODE_29D171
	LDA.w #$0008
	TSB.b $DB
CODE_29D171:
	LDX.w $029F
	LDY.b $DB
	LDA.w SMB3_PaletteMirror[$00].LowByte,x
	ADC.b [$D8],y
	STA.w SMB3_PaletteMirror[$00].LowByte,x
	INX
	INX
	TXA
	AND.w #$FF80
	BNE.b CODE_29D189
	LDX.w #$0080
CODE_29D189:
	TXA
	AND.w $02B7
	BNE.b CODE_29D19C
	TXA
	AND.w #$001F
	BNE.b CODE_29D12D
	INX
	INX
	CPX.w #$0202
	BNE.b CODE_29D12D
CODE_29D19C:
	INC.w $02B5
	LDA.w $02B5
	CMP.w #$0020
	BNE.b CODE_29D1B3
	LDA.w $02B3
	EOR.w #$0002
	STA.w $02B3
	STZ.w $02B5
CODE_29D1B3:
	SEP.b #$30
	LDA.b #$01
	STA.w !RAM_SMB3_Global_UpdateEntirePaletteFlag
	RTL

;--------------------------------------------------------------------

CODE_29D1BB:
	REP.b #$30
	LDX.w #$0002
	STZ.w $029A
CODE_29D1C3:
	STZ.b $DB
	STX.w $029F
	LDA.l $7F9400,x
	STA.w $0299
	AND.w #$001F
	ASL
	TAX
	LDA.l $7F9600,x
	BNE.b CODE_29D1DF
	LDA.w #$0002
	STA.b $DB
CODE_29D1DF:
	LDA.w $0299
	AND.w #$03E0
	LSR
	LSR
	LSR
	LSR
	TAX
	LDA.l $7F9600,x
	BNE.b CODE_29D1F5
	LDA.w #$0004
	TSB.b $DB
CODE_29D1F5:
	LDA.w $029A
	LSR
	LSR
	ASL
	TAX
	LDA.l $7F9600,x
	BNE.b CODE_29D207
	LDA.w #$0008
	TSB.b $DB
CODE_29D207:
	LDX.w $029F
	LDY.b $DB
	LDA.w SMB3_PaletteMirror[$00].LowByte,x
	ADC.b [$D8],y
	STA.w SMB3_PaletteMirror[$00].LowByte,x
	INX
	INX
	CPX.w #$0020
	BCC.b CODE_29D1C3
	LDA.w #$003E
	CPX.w #$0020
	BEQ.b CODE_29D22B
	LDA.w #$005E
	CPX.w #$0040
	BNE.b CODE_29D22F
CODE_29D22B:
	TAX
	BRL.w CODE_29D1C3

CODE_29D22F:
	SEP.b #$30
	RTL

;--------------------------------------------------------------------

; Note: Something to do with loading the layer 2 palette on the world rollcall screens

CODE_29D232:
	REP.b #$30
	LDX.w #$0010
	STZ.w $029A
CODE_29D23A:
	STZ.b $DB
	STX.w $029F
	LDA.l $7F9400,x
	STA.w $0299
	AND.w #$001F
	ASL
	TAX
	LDA.l $7F9600,x
	BNE.b CODE_29D256
	LDA.w #$0002
	STA.b $DB
CODE_29D256:
	LDA.w $0299
	AND.w #$03E0
	LSR
	LSR
	LSR
	LSR
	TAX
	LDA.l $7F9600,x
	BNE.b CODE_29D26C
	LDA.w #$0004
	TSB.b $DB
CODE_29D26C:
	LDA.w $029A
	LSR
	LSR
	ASL
	TAX
	LDA.l $7F9600,x
	BNE.b CODE_29D27E
	LDA.w #$0008
	TSB.b $DB
CODE_29D27E:
	LDX.w $029F
	LDY.b $DB
	LDA.w SMB3_PaletteMirror[$00].LowByte,x
	ADC.b [$D8],y
	STA.w SMB3_PaletteMirror[$00].LowByte,x
	INX
	INX
	CPX.w #$0080
	BNE.b CODE_29D23A
	SEP.b #$30
	RTL

;--------------------------------------------------------------------

CODE_29D295:
	LDA.b #$0B
	STA.w $101D
	LDA.b #$04
	STA.w $101C
	RTS

;--------------------------------------------------------------------

; Todo: Unreferrenced routine.

CODE_29D2A0:
	LDA.w $101C
	BEQ.b CODE_29D2A8
	DEC.w $101C
CODE_29D2A8:
	LDA.w $101D
	BEQ.b CODE_29D2CD
	LDA.w $101C
	BNE.b CODE_29D2CD
	LDA.b #$04
	STA.w $101C
	DEC.w $101D
	BNE.b CODE_29D2CD
	LDA.w !RAM_SMB3_Global_CurrentWorld
	CMP.b #$06
	BNE.b CODE_29D2CD
	LDA.b #!Define_SMB3_OverworldMusic_World5
	STA.w !RAM_SMB3_Global_MusicCh1
	LDA.b #$78
	STA.w $0711
CODE_29D2CD:
	RTS

;--------------------------------------------------------------------

CODE_29D2CE:
	LDA.w $101E
	BNE.b CODE_29D2D7
	SEC
	JMP.w CODE_29D295

CODE_29D2D7:
	RTS

;--------------------------------------------------------------------

; Todo: Unreferrenced routine.

CODE_29D2D8:
	LDA.w $101E
	BNE.b CODE_29D2F8
	LDA.w $101C
	BEQ.b CODE_29D2E5
	DEC.w $101C
CODE_29D2E5:
	LDA.w $101D
	BEQ.b CODE_29D2F8
	LDA.w $101C
	BNE.b CODE_29D2F7
	LDA.b #$04
	STA.w $101C
	DEC.w $101D
CODE_29D2F7:
	RTS

CODE_29D2F8:
	LDA.b #$00
	STA.w $101E
	RTS

;--------------------------------------------------------------------

; Note: Something related to airship levels. Perhaps it's the thunder palette animation?

DATA_29D2FE:
	dw DATA_29D31A
	dw DATA_29D32A
	dw DATA_29D31A
	dw DATA_29D32A
	dw DATA_29D33A
	dw DATA_29D30A

DATA_29D30A:
	dw $0000,$30A0,$2020,$0C00,$0000,$30A0,$5AB5,$4E52

DATA_29D31A:
	dw $0000,$38E0,$7FDA,$1F9F,$0000,$38E0,$66B5,$6ED1

DATA_29D32A:
	dw $0000,$4120,$7B35,$6ED1,$0000,$4120,$66B5,$5E4D

DATA_29D33A:
	dw $0000,$4960,$766F,$5E0B,$0000,$4960,$6673,$5A10

DATA_29D34A:
	dw $7FBB,$6E4D,$7FBB,$6E4D,$4544,$0C00

CODE_29D356:
	PHB
	PHK
	PLB
	LDA.w $0356
	BNE.b CODE_29D368
	LDA.w !RAM_SMB3_Global_RandomByte02
	CMP.b #$06
	BCS.b CODE_29D3AB
	STZ.w $0356
CODE_29D368:
	LDA.w $0356
	BNE.b CODE_29D374
	LDA.b #!Define_SMAS_Sound0060_Thunder
	STA.w !RAM_SMB3_Global_SoundCh1
	LDA.b #$00
CODE_29D374:
	ASL
	AND.b #$0E
	TAX
	REP.b #$20
	LDA.w DATA_29D34A,x
	STA.w SMB3_PaletteMirror[$00].LowByte
	LDA.w DATA_29D2FE,x
	STA.b $00
	LDY.b #$00
	TYX
CODE_29D388:
	LDA.b ($00),y
	BEQ.b CODE_29D38F
	STA.w SMB3_PaletteMirror[$08].LowByte,x
CODE_29D38F:
	INX
	INX
	INY
	INY
	TYA
	AND.w #$000F
	BNE.b CODE_29D388
	SEP.b #$20
	INC.w !RAM_SMB3_Global_UpdateEntirePaletteFlag
	INC.w $0356
	LDA.w $0356
	CMP.b #$06
	BNE.b CODE_29D3AB
	STZ.w $0356
CODE_29D3AB:
	PLB
	RTL

;--------------------------------------------------------------------

; Note: Something related to the koopa kid boss battles.

DATA_29D3AD:
	dw $7FBB,$0C00,$7FBB,$7B14,$6690,$51ED,$3D48,$2CC4
	dw $1C40,$0C00

CODE_29D3C1:
	PHB
	PHK
	PLB
	LDA.w $0356
	BNE.b CODE_29D3D8
	LDA.w $07BE
	BNE.b CODE_29D401
	LDA.w !RAM_SMB3_Global_RandomByte02
	CMP.b #$05
	BCS.b CODE_29D401
	STZ.w $0356
CODE_29D3D8:
	LDA.w $0356
	BNE.b CODE_29D3E4
	LDA.b #!Define_SMAS_Sound0060_Thunder
	STA.w !RAM_SMB3_Global_SoundCh1
	LDA.b #$00
CODE_29D3E4:
	AND.b #$FE
	TAX
	REP.b #$20
	LDA.w DATA_29D3AD,x
	STA.w SMB3_PaletteMirror[$2F].LowByte
	SEP.b #$20
	INC.w !RAM_SMB3_Global_UpdateEntirePaletteFlag
	INC.w $0356
	LDA.w $0356
	CMP.b #$14
	BNE.b CODE_29D401
	STZ.w $0356
CODE_29D401:
	PLB
	RTL

;--------------------------------------------------------------------

DATA_29D403:
	dw $2A0F,$3672,$2569
	dw $3251,$3EB4,$298A
	dw $3A93,$46F6,$2DAB
	dw $42D5,$4F38,$31CC
	dw $3A93,$46F6,$2DAB
	dw $3251,$3EB4,$298A
	dw $2A0F,$3672,$2569
	dw $21CD,$2E30,$2148

DATA_29D433:
	dw DATA_29D443
	dw DATA_29D463
	dw DATA_29D483
	dw DATA_29D4A3
	dw DATA_29D4C3
	dw DATA_29D4E3
	dw DATA_29D503
	dw DATA_29D523

DATA_29D443:
	dw $7F54,$3DC0,$3DC0,$3DC0
	dw $3DC0,$3D20,$3D80,$3960
	dw $3580,$39E3,$4689,$4689
	dw $4646,$4646,$4646,$4646

DATA_29D463:
	dw $7F54,$3DC0,$3DC0,$3DC0
	dw $3DE2,$3D20,$3D80,$3960
	dw $3580,$39E3,$4689,$46AB
	dw $4646,$4646,$4646,$4668

DATA_29D483:
	dw $7F54,$3DC0,$3DC0,$3DE2
	dw $3DE4,$3D20,$3D80,$3960
	dw $3580,$39E3,$4689,$46CD
	dw $4646,$4668,$4668,$468A

DATA_29D4A3:
	dw $7F54,$3DC0,$3DE2,$3DE4
	dw $3DC0,$3D20,$3D80,$3960
	dw $3580,$39E3,$46AB,$46AB
	dw $4668,$468A,$468A,$4646

DATA_29D4C3:
	dw $7F54,$3DE4,$3DC0,$3DC0
	dw $3DC0,$3D20,$3D80,$3960
	dw $3580,$39E3,$46CD,$4689
	dw $468A,$468A,$468A,$4646

DATA_29D4E3:
	dw $7F54,$3DE4,$3DC0,$3DC0
	dw $3DC0,$3D20,$3D80,$3960
	dw $3580,$39E3,$46AB,$4689
	dw $4646,$4646,$4646,$4646

DATA_29D503:
	dw $7F54,$3DC0,$3DC0,$3DC0
	dw $3DC0,$3D20,$3D80,$3960
	dw $3580,$39E3,$4689,$4689
	dw $4646,$4646,$4646,$4646

DATA_29D523:
	dw $7F54,$3DC0,$3DC0,$3DC0
	dw $3DC0,$3D20,$3D80,$3960
	dw $3580,$39E3,$4689,$4689
	dw $4646,$4646,$4646,$4646

DATA_29D543:
	dw $7282,$72A5,$72C7,$730B
	dw $730B,$7282,$72A5,$72C7
	dw $72C7,$730B,$7282,$72A5
	dw $72A5,$72C7,$730B,$7282

DATA_29D563:
	dw $1F3F,$3F7F,$5FBF,$7FFF
	dw $1F3F,$1F3F,$3F7F,$5FBF
	dw $1F3F,$1F3F,$1F3F,$3F7F
	dw $1F3F,$1F3F,$1F3F,$1F3F
	dw $3F7F,$1F3F,$1F3F,$1F3F
	dw $7FFF,$3F7F,$1F3F,$1F3F
	dw $5FBF,$7FFF,$3F7F,$1F3F
	dw $3F7F,$5FBF,$7FFF,$3F7F

DATA_29D5A3:
	dw $0000,$0000,$0D0B,$3634,$73FF,$0405,$1008,$28F1,$0000,$0000,$00A8,$1D6E,$52F7,$0807,$20AF,$1C92
	dw $0000,$0000,$0045,$04A8,$31EF,$104B,$1C92,$5199,$0000,$0000,$00A8,$1D6E,$52F7,$0807,$20AF,$1C92

DATA_29D5E3:
	dw $FFFF,$0000,$3102,$562D,$7FFC,$2402,$3004,$48CA,$FFFF,$0000,$24A0,$4188,$7F31,$2C02,$4CA9,$65D0
	dw $FFFF,$0000,$1840,$2CE3,$61E9,$3C87,$5DB3,$7279,$FFFF,$0000,$24A0,$4188,$7F31,$2C02,$4CA9,$65D0

DATA_29D623:
	dw $14CA,$1D0E,$2152,$2997,$1CEB,$294E,$35B1,$4639
	dw $14C9,$1D0D,$2550,$2D93,$1CEA,$294D,$35B0,$4637
	dw $14C9,$1D0C,$254F,$2D91,$1CE9,$294C,$35AF,$4635
	dw $14C8,$1D0B,$254D,$2D8F,$1CE8,$294B,$35AE,$4633
	dw $18E8,$212A,$296C,$31AE,$1CE7,$294A,$35AD,$4631
	dw $14C8,$1D0B,$254D,$2D8F,$1CE8,$294B,$35AE,$4633
	dw $14C9,$1D0C,$254F,$2D91,$1CE9,$294C,$35AF,$4635
	dw $14C9,$1D0D,$2550,$2D93,$1CEA,$294D,$35B0,$4637

DATA_29D6A3:
	dw $14CA,$14C9,$14C9,$14C8,$18E8,$14C8,$14C9,$14C9

DATA_29D6B3:
	dw $2970,$296F,$296E,$296D,$296C,$296D,$296E,$296F

DATA_29D6C3:
	dw $31B2,$31B1,$31B0,$31AF,$31AE,$31AF,$31B0,$31B1

DATA_29D6D3:
	dw $4639,$4637,$4635,$4633,$4631,$4633,$4635,$4637

DATA_29D6E3:
	dw $1D0E,$1D0D,$1D0C,$1D0B,$212A,$1D0B,$1D0C,$1D0D

DATA_29D6F3:
	dw $2152,$2550,$254F,$254D,$296C,$254D,$254F,$2550

DATA_29D703:
	dw $2997,$2D93,$2D91,$2D8F,$31AE,$2D8F,$2D91,$2D93

CODE_29D713:
	PHB
	PHK
	PLB
	LDA.w $0350
	CMP.b #$06
	BNE.b CODE_29D74A
	LDA.w $0356
	INC
	STA.w $0356
	AND.b #$38
	LSR
	LSR
	LSR
	STA.b $00
	ASL
	CLC
	ADC.b $00
	ASL
	TAX
	REP.b #$20
	LDA.w DATA_29D403,x
	STA.w SMB3_PaletteMirror[$17].LowByte
	LDA.w DATA_29D403+$02,x
	STA.w SMB3_PaletteMirror[$18].LowByte
	LDA.w DATA_29D403+$04,x
	STA.w SMB3_PaletteMirror[$19].LowByte
	SEP.b #$20
	INC.w !RAM_SMB3_Global_UpdateEntirePaletteFlag
CODE_29D74A:
	CMP.b #$14
	BNE.b CODE_29D772
	INC.w $0356
	LDA.w $0356
	AND.b #$38
	LSR
	LSR
	TAX
	REP.b #$20
	LDA.w DATA_29D433,x
	STA.b $00
	LDY.b #$00
CODE_29D762:
	LDA.b ($00),y
	STA.w SMB3_PaletteMirror[$20].LowByte,y
	INY
	INY
	CPY.b #$20
	BNE.b CODE_29D762
	SEP.b #$20
	INC.w !RAM_SMB3_Global_UpdateEntirePaletteFlag
CODE_29D772:
	CMP.b #$16
	BEQ.b CODE_29D77A
	CMP.b #$1E
	BNE.b CODE_29D7A5
CODE_29D77A:
	INC.w $0356
	LDA.w $0356
	AND.b #$18
	TAY
	LSR
	LSR
	TAX
	REP.b #$20
	LDA.w DATA_29D543,y
	STA.w SMB3_PaletteMirror[$18].LowByte
	LDA.w DATA_29D543+$02,y
	STA.w SMB3_PaletteMirror[$19].LowByte
	LDA.w DATA_29D543+$04,y
	STA.w SMB3_PaletteMirror[$1A].LowByte
	LDA.w DATA_29D543+$06,y
	STA.w SMB3_PaletteMirror[$1B].LowByte
	SEP.b #$20
	INC.w !RAM_SMB3_Global_UpdateEntirePaletteFlag
CODE_29D7A5:
	CMP.b #$17
	BNE.b CODE_29D7D1
	INC.w $0356
	LDA.w $0356
	AND.b #$38
	TAY
	REP.b #$20
	LDA.w DATA_29D563,y
	STA.w SMB3_PaletteMirror[$27].LowByte
	LDA.w DATA_29D563+$02,y
	STA.w SMB3_PaletteMirror[$28].LowByte
	LDA.w DATA_29D563+$04,y
	STA.w SMB3_PaletteMirror[$29].LowByte
	LDA.w DATA_29D563+$06,y
	STA.w SMB3_PaletteMirror[$2A].LowByte
	SEP.b #$20
	INC.w !RAM_SMB3_Global_UpdateEntirePaletteFlag
CODE_29D7D1:
	CMP.b #$1C
	BNE.b CODE_29D815
	INC.w $0356
	LDA.w $0356
	AND.b #$30
	TAY
	REP.b #$20
	LDA.w DATA_29D5A3,y
	STA.w SMB3_PaletteMirror[$28].LowByte
	LDA.w DATA_29D5A3+$02,y
	STA.w SMB3_PaletteMirror[$29].LowByte
	LDA.w DATA_29D5A3+$04,y
	STA.w SMB3_PaletteMirror[$2A].LowByte
	LDA.w DATA_29D5A3+$06,y
	STA.w SMB3_PaletteMirror[$2B].LowByte
	LDA.w DATA_29D5A3+$08,y
	STA.w SMB3_PaletteMirror[$2C].LowByte
	LDA.w DATA_29D5A3+$0A,y
	STA.w SMB3_PaletteMirror[$2D].LowByte
	LDA.w DATA_29D5A3+$0C,y
	STA.w SMB3_PaletteMirror[$2E].LowByte
	LDA.w DATA_29D5A3+$0E,y
	STA.w SMB3_PaletteMirror[$2F].LowByte
	SEP.b #$20
	INC.w !RAM_SMB3_Global_UpdateEntirePaletteFlag
CODE_29D815:
	CMP.b #$1D
	BNE.b CODE_29D859
	INC.w $0356
	LDA.w $0356
	AND.b #$30
	TAY
	REP.b #$20
	LDA.w DATA_29D5E3,y
	STA.w SMB3_PaletteMirror[$21].LowByte
	LDA.w DATA_29D5E3+$02,y
	STA.w SMB3_PaletteMirror[$22].LowByte
	LDA.w DATA_29D5E3+$04,y
	STA.w SMB3_PaletteMirror[$23].LowByte
	LDA.w DATA_29D5E3+$06,y
	STA.w SMB3_PaletteMirror[$24].LowByte
	LDA.w DATA_29D5E3+$08,y
	STA.w SMB3_PaletteMirror[$25].LowByte
	LDA.w DATA_29D5E3+$0A,y
	STA.w SMB3_PaletteMirror[$26].LowByte
	LDA.w DATA_29D5E3+$0C,y
	STA.w SMB3_PaletteMirror[$27].LowByte
	LDA.w DATA_29D5E3+$0E,y
	STA.w SMB3_PaletteMirror[$28].LowByte
	SEP.b #$20
	INC.w !RAM_SMB3_Global_UpdateEntirePaletteFlag
CODE_29D859:
	CMP.b #$1F
	BNE.b CODE_29D8AD
	INC.w $0356
	LDA.w $0356
	AND.b #$38
	LSR
	LSR
	TAX
	ASL
	ASL
	ASL
	TAY
	REP.b #$20
	LDA.w DATA_29D6A3,x
	STA.w SMB3_PaletteMirror[$21].LowByte
	LDA.w DATA_29D6B3,x
	STA.w SMB3_PaletteMirror[$27].LowByte
	LDA.w DATA_29D6C3,x
	STA.w SMB3_PaletteMirror[$28].LowByte
	LDA.w DATA_29D6D3,x
	STA.w SMB3_PaletteMirror[$2C].LowByte
	LDA.w DATA_29D6E3,x
	STA.w SMB3_PaletteMirror[$2D].LowByte
	LDA.w DATA_29D6F3,x
	STA.w SMB3_PaletteMirror[$2E].LowByte
	LDA.w DATA_29D703,x
	STA.w SMB3_PaletteMirror[$2F].LowByte
	LDX.b #$00
CODE_29D89A:
	LDA.w DATA_29D623,y
	STA.w SMB3_PaletteMirror[$15].LowByte,x
	INX
	INX
	INY
	INY
	CPX.b #$10
	BNE.b CODE_29D89A
	SEP.b #$20
	INC.w !RAM_SMB3_Global_UpdateEntirePaletteFlag
CODE_29D8AD:
	PLB
	RTL

if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
%FREE_BYTES(NULLROM, 12, $FF)
else
%FREE_BYTES(NULLROM, 49, $FF)
endif

;--------------------------------------------------------------------

; Note: Seems to be the routine for handling the reserve items.

CODE_29D8E0:
	LDA.w $0423
	BEQ.b CODE_29D8E8
	JSR.w CODE_29DE9E
CODE_29D8E8:
	LDA.w !RAM_SMB3_Global_OpenReserveBoxFlag
	BEQ.b CODE_29D8F2
	LDA.b #$02
	STA.w !RAM_SMB3_Level_Player_FreezePlayerTimer
CODE_29D8F2:
	JSR.w CODE_29D8F6
	RTL

CODE_29D8F6:
	LDA.w !RAM_SMB3_Global_ReserveBoxState
	JSL.l SMB3_ExecutePtr_Absolute

DATA_29D8FD:
	dw CODE_29D907
	dw CODE_29D93D
	dw CODE_29D988
	dw CODE_29D98C
	dw CODE_29DAF5

;--------------------------------------------------------------------

CODE_29D907:
	LDA.b #$0F
	STA.w $0419
	LDA.b #$00
	STA.w !RAM_SMB3_Overworld_ReserveBoxSlotIndex
	LDX.w !RAM_SMB3_Global_TilesetFromHeader
	CPX.b #$07
	BEQ.b CODE_29D91B
	STA.w !RAM_SMB3_Overworld_ReserveBoxPageIndex
CODE_29D91B:
	LDA.b #$48
	STA.w $041E
	LDX.b #$00
	STX.w $041B
	INC.w !RAM_SMB3_Global_ReserveBoxState
	LDA.w !RAM_SMB3_Global_OpenReserveBoxFlag
	BEQ.b CODE_29D93C
	LDA.w !RAM_SMB3_Overworld_ReserveBoxPageIndex
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	BEQ.b CODE_29D938
	CLC
	ADC.b #SMB3_IndividualPlayerData[$01].ReserveSlots-SMB3_IndividualPlayerData[$00].ReserveSlots
CODE_29D938:
	TAX
	LDA.w SMB3_IndividualPlayerData[$00].ReserveSlots,x
CODE_29D93C:
	RTS

;--------------------------------------------------------------------

CODE_29D93D:
	LDX.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	LDA.w $0419
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,x
	LDY.w $041B
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.w DATA_21EDEF,y
else
	LDA.w DATA_21EDED,y
endif
	STA.w SMB3_StripeImageUploadTable[$00].HighByte,x
	LDA.b #$40
	STA.w SMB3_StripeImageUploadTable[$01].LowByte,x
	LDA.b #$3E
	STA.w SMB3_StripeImageUploadTable[$01].HighByte,x
	LDA.b #$AE
	STA.w SMB3_StripeImageUploadTable[$02].LowByte,x
	LDA.b #$02
	STA.w SMB3_StripeImageUploadTable[$02].HighByte,x
	LDA.b #$FF
	STA.w SMB3_StripeImageUploadTable[$03].LowByte,x
	LDA.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	CLC
	ADC.b #$06
	STA.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	INY
	TYA
	AND.b #$03
	STA.w $041B
	BNE.b CODE_29D987
	LDX.w !RAM_SMB3_Global_OpenReserveBoxFlag
	BEQ.b CODE_29D981
	LDA.b #$08
CODE_29D981:
	STA.w $041B
	INC.w !RAM_SMB3_Global_ReserveBoxState
CODE_29D987:
	RTS

;--------------------------------------------------------------------

CODE_29D988:
	INC.w !RAM_SMB3_Global_ReserveBoxState
	RTS

;--------------------------------------------------------------------

; Note: Related to opening/closing item reserve

CODE_29D98C:
	LDA.w !RAM_SMB3_Global_OpenReserveBoxFlag
	ASL
	TAX
	LDA.w DATA_21EDF1,x
	STA.b $0D
	LDA.w DATA_21EDF1+$01,x
	STA.b $0E
	LDA.b #DATA_2290F1>>16
	STA.b $0F
	REP.b #$30
	LDA.w $041B
	AND.w #$00FF
	ASL
	TAY
	LDA.w DATA_21EE15,y
	STA.b $0B
	LDA.w DATA_21EDF5,y
	TAY
	LDX.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	STX.b $08
CODE_29D9B7:
	LDA.b [$0D],y
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,x
	INX
	INY
	CPY.b $0B
	BNE.b CODE_29D9B7
	SEP.b #$30
	LDA.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	CLC
	ADC.b #$16
	STA.b $0C
	DEX
	STX.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	LDA.w $041B
	AND.b #$07
	TAX
	DEX
	SEC
	SBC.b #$04
	CMP.b #$02
	BCS.b CODE_29D9E1
	JSR.w CODE_29D9FD
CODE_29D9E1:
	JSR.w CODE_29DA81
	INC.w $041B
	LDA.w $041B
	AND.b #$07
	BNE.b CODE_29D9FC
	LDA.w !RAM_SMB3_Global_OpenReserveBoxFlag
	BNE.b CODE_29D9F9
	LDA.b #$00
	STA.w !RAM_SMB3_Global_ReserveBoxState
	RTS

CODE_29D9F9:
	INC.w !RAM_SMB3_Global_ReserveBoxState
CODE_29D9FC:
	RTS

CODE_29D9FD:
	LDA.w !RAM_SMB3_Global_OpenReserveBoxFlag
	BNE.b CODE_29DA19
	LDA.b #$1C
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	BEQ.b CODE_29DA0B
	LDA.b #$3F
CODE_29DA0B:
	STA.b $0B
	LDA.b $0C
	CLC
	ADC.b #$1A
	STA.b $0C
	LDA.b #$02
	JMP.w CODE_29DA2A

CODE_29DA19:
	LDA.b #$00
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	BEQ.b CODE_29DA22
	LDA.b #SMB3_IndividualPlayerData[$01].ReserveSlots-SMB3_IndividualPlayerData[$00].ReserveSlots
CODE_29DA22:
	CLC
	ADC.w !RAM_SMB3_Overworld_ReserveBoxPageIndex
	STA.b $0B
	LDA.b #$06
CODE_29DA2A:
	STA.b $0A
	LDA.w !RAM_SMB3_Global_OpenReserveBoxFlag
	ASL
	TAX
	LDA.w DATA_21EE35,x
	STA.b $0D
	LDA.w DATA_21EE35+$01,x
	STA.b $0E
	LDA.b #DATA_21EEA9>>16
	STA.b $0F
CODE_29DA3F:
	LDY.b $0B
	LDA.w SMB3_IndividualPlayerData[$00].ReserveSlots,y
	BEQ.b CODE_29DA73
	ASL
	ASL
	TAY
	LDA.w $041B
	AND.b #$07
	CMP.b #$04
	BEQ.b CODE_29DA56
	TYA
	ORA.b #$02
	TAY
CODE_29DA56:
	LDX.b $0C
	REP.b #$30
	TXA
	AND.w #$00FF
	TAX
	TYA
	ASL
	TAY
CODE_29DA62:
	LDA.b [$0D],y
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,x
	INX
	INX
	INY
	INY
	TYA
	AND.w #$0002
	BNE.b CODE_29DA62
	SEP.b #$30
CODE_29DA73:
	LDA.b $0C
	CLC
	ADC.b #$06
	STA.b $0C
	INC.b $0B
	DEC.b $0A
	BPL.b CODE_29DA3F
CODE_29DA80:
	RTS

CODE_29DA81:
	LDA.w $041B
	AND.b #$07
	JSL.l SMB3_ExecutePtr_Absolute

DATA_29DA8A:
	dw CODE_29DA80
	dw CODE_29DA80
	dw CODE_29DA80
	dw CODE_29DA80
	dw CODE_29DA9A
	dw CODE_29DABD
	dw CODE_29DA80
	dw CODE_29DA80

CODE_29DA9A:
	JSL.l SMB3_DrawWorldNumberOnStatusBar_Main
	LDA.w $041B
	AND.b #$08
	BNE.b CODE_29DABC
	JSR.w CODE_29E6E0
	LDX.b $08
	LDA.w $1F48
	CMP.b #$F0
	BNE.b CODE_29DAB3
	LDA.b #$FE
CODE_29DAB3:
	STA.w SMB3_StripeImageUploadTable[$14].LowByte,x
	LDA.w $1F49
	STA.w SMB3_StripeImageUploadTable[$15].LowByte,x
CODE_29DABC:
	RTS

;--------------------------------------------------------------------

CODE_29DABD:
	JSL.l SMB3_DrawPlayerLetterOnStatusBar_Main
	JSR.w CODE_29E6AA
	LDX.b $08
	LDA.w $1F4A
	CMP.b #$F0
	BNE.b CODE_29DACF
	LDA.b #$FE
CODE_29DACF:
	STA.w SMB3_StripeImageUploadTable[$07].LowByte,x
	LDA.w $1F4B
	STA.w SMB3_StripeImageUploadTable[$08].LowByte,x
	LDA.w $041B
	AND.b #$08
	BNE.b CODE_29DAF4
	JSL.l CODE_29E7AA
	LDX.b $08
	LDY.b #$00
CODE_29DAE7:
	LDA.w $1F4C,y
	STA.w SMB3_StripeImageUploadTable[$0A].LowByte,x
	INX
	INX
	INY
	CPY.b #$06
	BNE.b CODE_29DAE7
CODE_29DAF4:
	RTS

;--------------------------------------------------------------------

CODE_29DAF5:
	LDA.w $0423
	BNE.b CODE_29DA80
	LDA.b $A8
	BEQ.b CODE_29DB01
	JMP.w CODE_29DC21

CODE_29DB01:
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b !RAM_SMB3_Global_ControllerPress2P1,x
	ORA.b !RAM_SMB3_Global_ControllerPress1
	AND.b #!Joypad_X|(!Joypad_Y>>8)
	BEQ.b CODE_29DB21
	LDA.b #!Define_SMAS_Sound0063_OverworldSwitchBlockEjection
	STA.w !RAM_SMB3_Global_SoundCh3
CODE_29DB11:
	LDA.w !RAM_SMB3_Global_OpenReserveBoxFlag
	EOR.b #$01
	STA.w !RAM_SMB3_Global_OpenReserveBoxFlag
	LDA.b #$00
	STA.w !RAM_SMB3_Global_ReserveBoxState
	JMP.w CODE_29D907

CODE_29DB21:
	LDX.b #$07
	LDA.w !RAM_SMB3_Level_Player_CurrentCharacter
	BEQ.b CODE_29DB2A
	LDX.b #SMB3_IndividualPlayerData[$01].ReserveSlots-SMB3_IndividualPlayerData[$00].ReserveSlots+$07
CODE_29DB2A:
	LDA.w SMB3_IndividualPlayerData[$00].ReserveSlots,x
	BEQ.b CODE_29DBA5
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR]
	LDA.b !RAM_SMB3_Global_ControllerPress1
else
	LDA.w !RAM_SMB3_Global_ControllerPress1					; Optimization: Unnecessary absolute addressing
endif
	AND.b #(!Joypad_DPadU>>8)|(!Joypad_DPadD>>8)
	BEQ.b CODE_29DBA5
	LSR
	LSR
	LSR
	TAY
	BNE.b CODE_29DB56
	LDA.w !RAM_SMB3_Overworld_ReserveBoxPageIndex
	CMP.b #$15
	BEQ.b CODE_29DB54
	CLC
	ADC.b #$07
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	BEQ.b CODE_29DB4E
	CLC
	ADC.b #SMB3_IndividualPlayerData[$01].ReserveSlots-SMB3_IndividualPlayerData[$00].ReserveSlots
CODE_29DB4E:
	TAX
	LDA.w SMB3_IndividualPlayerData[$00].ReserveSlots,x
	BNE.b CODE_29DB5B
CODE_29DB54:
	BRA.b CODE_29DBA5

CODE_29DB56:
	LDA.w !RAM_SMB3_Overworld_ReserveBoxPageIndex
	BEQ.b CODE_29DB54
CODE_29DB5B:
	LDA.b #!Define_SMAS_Sound0063_StepOnLevelTile
	STA.w !RAM_SMB3_Global_SoundCh3
	LDA.w !RAM_SMB3_Overworld_ReserveBoxPageIndex
	CLC
	ADC.w DATA_21EEC9,y
	STA.w !RAM_SMB3_Overworld_ReserveBoxPageIndex
	CMP.w DATA_21EECB,y
	BNE.b CODE_29DB75
	LDA.w DATA_21EECD,y
	STA.w !RAM_SMB3_Overworld_ReserveBoxPageIndex
CODE_29DB75:
	LDX.w !RAM_SMB3_Overworld_ReserveBoxPageIndex
	LDA.w !RAM_SMB3_Level_Player_CurrentCharacter
	BEQ.b CODE_29DB82
	TXA
	CLC
	ADC.b #SMB3_IndividualPlayerData[$01].ReserveSlots-SMB3_IndividualPlayerData[$00].ReserveSlots
	TAX
CODE_29DB82:
	LDY.w !RAM_SMB3_Level_Player_CurrentCharacter
	TXA
	CMP.w DATA_31EED9,y
	BEQ.b CODE_29DB90
	LDA.w SMB3_IndividualPlayerData[$00].ReserveSlots,x
	BEQ.b CODE_29DB21
CODE_29DB90:
	LDA.b #$0C
	STA.w $041B
	LDA.b #$03
	STA.w !RAM_SMB3_Global_ReserveBoxState
	LDA.b #$00
	STA.w !RAM_SMB3_Overworld_ReserveBoxSlotIndex
	LDA.b #$48
	STA.w $041E
	RTS

CODE_29DBA5:
	LDA.w !RAM_SMB3_Global_TilesetFromHeader
	CMP.b #$07
	BEQ.b CODE_29DBBA
	LDY.b #$00
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	BEQ.b CODE_29DBB5
	LDY.b #SMB3_IndividualPlayerData[$01].ReserveSlots-SMB3_IndividualPlayerData[$00].ReserveSlots
CODE_29DBB5:
	LDA.w SMB3_IndividualPlayerData[$00].ReserveSlots,y
	BNE.b CODE_29DBBB
CODE_29DBBA:
	RTS

CODE_29DBBB:
	LDX.b #$01
	LDA.w !RAM_SMB3_Level_Player_CurrentCharacter
	BEQ.b CODE_29DBC4
	LDX.b #SMB3_IndividualPlayerData[$01].ReserveSlots-SMB3_IndividualPlayerData[$00].ReserveSlots+$01
CODE_29DBC4:
	LDA.w SMB3_IndividualPlayerData[$00].ReserveSlots,x
	BEQ.b CODE_29DC15
	LDA.b !RAM_SMB3_Global_ControllerPress1
	AND.b #(!Joypad_DPadL>>8)|(!Joypad_DPadR>>8)
	BEQ.b CODE_29DC15
	LSR
	TAX
	LDA.b #!Define_SMAS_Sound0063_StepOnLevelTile
	STA.w !RAM_SMB3_Global_SoundCh3
CODE_29DBD6:
	LDA.w !RAM_SMB3_Overworld_ReserveBoxSlotIndex
	CLC
	ADC.w DATA_21EED5,x
	STA.w !RAM_SMB3_Overworld_ReserveBoxSlotIndex
	LDA.w $041E
	CLC
	ADC.w DATA_21EECF,x
	STA.w $041E
	CMP.w DATA_21EED1,x
	BNE.b CODE_29DBFB
	LDA.w DATA_21EED7,x
	STA.w !RAM_SMB3_Overworld_ReserveBoxSlotIndex
	LDA.w DATA_21EED3,x
	STA.w $041E
CODE_29DBFB:
	LDA.w !RAM_SMB3_Overworld_ReserveBoxSlotIndex
	CLC
	ADC.w !RAM_SMB3_Overworld_ReserveBoxPageIndex
	TAY
	LDA.w !RAM_SMB3_Level_Player_CurrentCharacter
	BEQ.b CODE_29DC0D
	TYA
	CLC
	ADC.b #SMB3_IndividualPlayerData[$01].ReserveSlots-SMB3_IndividualPlayerData[$00].ReserveSlots
	TAY
CODE_29DC0D:
	LDA.w SMB3_IndividualPlayerData[$00].ReserveSlots,y
	BEQ.b CODE_29DBD6
	JMP.w CODE_29DC49

CODE_29DC15:
	LDY.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.w !RAM_SMB3_Global_ControllerPress2P1,y
	ORA.b !RAM_SMB3_Global_ControllerPress1
	AND.b #!Joypad_A|(!Joypad_B>>8)
	BEQ.b CODE_29DC49
CODE_29DC21:
	LDA.w !RAM_SMB3_Overworld_ReserveBoxSlotIndex
	CLC
	ADC.w !RAM_SMB3_Overworld_ReserveBoxPageIndex
	TAY
	LDA.w !RAM_SMB3_Level_Player_CurrentCharacter
	BEQ.b CODE_29DC33
	TYA
	CLC
	ADC.b #SMB3_IndividualPlayerData[$01].ReserveSlots-SMB3_IndividualPlayerData[$00].ReserveSlots
	TAY
CODE_29DC33:
	LDA.w SMB3_IndividualPlayerData[$00].ReserveSlots,y
	CMP.b #!Define_SMB3_ReservePowerupID_WarpWhistle
	BNE.b CODE_29DC46
	LDA.w !RAM_SMB3_Overworld_Player_InCanoeFlag
	BEQ.b CODE_29DC46
	LDA.b #!Define_SMAS_Sound0063_Wrong
	STA.w !RAM_SMB3_Global_SoundCh3
	BRA.b CODE_29DC49

CODE_29DC46:
	JMP.w ProcessUsedReservePowerup_Main

CODE_29DC49:
	JMP.w CODE_29DF1D

;--------------------------------------------------------------------

CODE_29DC4C:
	LDX.w !RAM_SMB3_Global_TilesetFromHeader
	CPX.b #$07
	BEQ.b CODE_29DC64
	ASL
	TAX
	REP.b #$20
	LDA.w DATA_21EEDB,x
	STA.w SMB3_PaletteMirror[$B2].LowByte
	SEP.b #$20
	LDA.b #$01
	STA.w !RAM_SMB3_Global_UpdateEntirePaletteFlag
CODE_29DC64:
	RTS

;--------------------------------------------------------------------

ProcessUsedReservePowerup:
.Main:
;$29DC65
	LDA.w SMB3_IndividualPlayerData[$00].ReserveSlots,y
	JSL.l SMB3_ExecutePtr_Absolute

DATA_29DC6C:
	dw CODE_29DBBA				; 00 - No Powerup
	dw UseStandardReservePowerup_Main	; 01 - Mushroom
	dw UseStandardReservePowerup_Main	; 02 - Fire Flower
	dw UseStandardReservePowerup_Main	; 03 - Raccoon Leaf
	dw UseStandardReservePowerup_Main	; 04 - Frog Suit
	dw UseStandardReservePowerup_Main	; 05 - Tanuki Suit
	dw UseStandardReservePowerup_Main	; 06 - Hammer Suit
	dw UseStandardReservePowerup_Main	; 07 - Cloud
	dw UseStandardReservePowerup_Main	; 08 - P-Wing
	dw UseReserveStar_Main			; 09 - Star
	dw UseReserveAnchor_Main		; 0A - Anchor
	dw UseReserveHammer_Main		; 0B - Hammer
	dw UseReserveWhistle_Main		; 0C - Whistle
	dw UseReserveMusicBox_Main		; 0D - Music Box

;--------------------------------------------------------------------

UseStandardReservePowerup:
.Main:
;$29DC88
	LDA.w !RAM_SMB3_Overworld_ReserveBoxSlotIndex
	CLC
	ADC.w !RAM_SMB3_Overworld_ReserveBoxPageIndex
	TAY
	LDA.w !RAM_SMB3_Level_Player_CurrentCharacter
	BEQ.b CODE_29DC9A
	TYA
	CLC
	ADC.b #SMB3_IndividualPlayerData[$01].ReserveSlots-SMB3_IndividualPlayerData[$00].ReserveSlots
	TAY
CODE_29DC9A:
	LDX.w SMB3_IndividualPlayerData[$00].ReserveSlots,y
	TXA
	ASL
	TAY
	LDA.w !RAM_SMB3_Level_Player_CurrentCharacter
	BEQ.b CODE_29DCAA
	TYA
	CLC
	ADC.b #$12
	TAY
CODE_29DCAA:
	PHX
	REP.b #$30
	TYA
	AND.w #$00FF
	TAY
	PHB
	LDX.w DATA_21EF09,y
	LDY.w #SMB3_PaletteMirror[$F0].LowByte
	LDA.w #$001F
	MVN SMB3_PaletteMirror[$F0].LowByte>>16,RegularMarioPalette>>16
	PLB
	SEP.b #$30
	PLX
	LDA.b #$01
	STA.w !RAM_SMB3_Global_UpdateEntirePaletteFlag
	LDA.w DATA_21EEF7,x
	STA.w !RAM_SMB3_Global_SoundCh1
	LDA.w DATA_21EF00,x
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	STA.w !RAM_SMB3_Overworld_PlayerPowerUpPose
	CMP.b #$07
	BEQ.b CODE_29DCE4
	CMP.b #$08
	BNE.b CODE_29DCE1
	LDA.b #$03
CODE_29DCE1:
	STA.w $0747,x
CODE_29DCE4:
	LDA.b #$14
	STA.w $0423
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b $43,x
	STA.b $A6
	LDA.b $47,x
	STA.b $A7
CODE_29DCF4:
	LDA.b #SMB3_IndividualPlayerData[$00].CardSlots-SMB3_IndividualPlayerData[$00].ReserveSlots-$01
	STA.b $0E
	LDA.w !RAM_SMB3_Overworld_ReserveBoxSlotIndex
	CLC
	ADC.w !RAM_SMB3_Overworld_ReserveBoxPageIndex
	TAY
	LDA.w !RAM_SMB3_Level_Player_CurrentCharacter
	BEQ.b CODE_29DD11
	LDA.b #SMB3_IndividualPlayerData[$00].CardSlots-SMB3_IndividualPlayerData[$00].ReserveSlots-$01
	CLC
	ADC.b #SMB3_IndividualPlayerData[$01].ReserveSlots-SMB3_IndividualPlayerData[$00].ReserveSlots
	STA.b $0E
	TYA
	CLC
	ADC.b #SMB3_IndividualPlayerData[$01].ReserveSlots-SMB3_IndividualPlayerData[$00].ReserveSlots
	TAY
CODE_29DD11:
	CPY.b $0E
	BEQ.b CODE_29DD1F
	LDA.w SMB3_IndividualPlayerData[$00].ReserveSlots+$01,y
	STA.w SMB3_IndividualPlayerData[$00].ReserveSlots,y
	INY
	JMP.w CODE_29DD11

CODE_29DD1F:
	LDA.b #$00
	STA.w SMB3_IndividualPlayerData[$00].ReserveSlots,y
CODE_29DD24:
	LDY.w !RAM_SMB3_Overworld_ReserveBoxPageIndex
	BEQ.b CODE_29DD44
	LDA.w !RAM_SMB3_Level_Player_CurrentCharacter
	BEQ.b CODE_29DD33
	TYA
	CLC
	ADC.b #SMB3_IndividualPlayerData[$01].ReserveSlots-SMB3_IndividualPlayerData[$00].ReserveSlots
	TAY
CODE_29DD33:
	LDA.w SMB3_IndividualPlayerData[$00].ReserveSlots,y
	BNE.b CODE_29DD44
	LDA.w !RAM_SMB3_Overworld_ReserveBoxPageIndex
	SEC
	SBC.b #$07
	STA.w !RAM_SMB3_Overworld_ReserveBoxPageIndex
	JMP.w CODE_29DD24

CODE_29DD44:
	JSR.w CODE_29DB90
	JMP.w CODE_29DF1D

;--------------------------------------------------------------------

UseReserveStar:
.Main:
;$29DD4A
	INC.w !RAM_SMB3_Overworld_UsedReserveStarFlag
	LDA.b #$03
	STA.w $02C6
	STZ.w $02C7
	LDA.b #!Define_SMAS_Sound0060_GetPowerup
	STA.w !RAM_SMB3_Global_SoundCh1
	JSR.w CODE_29DCF4
	JMP.w CODE_29DB11

;--------------------------------------------------------------------

UseReserveAnchor:
.Main:
;$29DD60
	LDA.l !RAM_SMB3_Overworld_UsedReserveAnchorFlag
	BEQ.b CODE_29DD6C
CODE_29DD66:
	LDA.b #!Define_SMAS_Sound0063_Wrong
	STA.w !RAM_SMB3_Global_SoundCh3
	RTS

CODE_29DD6C:
	LDA.l !RAM_SMB3_Overworld_UsedReserveAnchorFlag
	INC
	STA.l !RAM_SMB3_Overworld_UsedReserveAnchorFlag
	LDA.b #!Define_SMAS_Sound0060_CarryItemToGoal
	STA.w !RAM_SMB3_Global_SoundCh1
	JSR.w CODE_29DCF4
	JMP.w CODE_29DB11

;--------------------------------------------------------------------

UseReserveMusicBox:
.Main:
;$29DD80
	LDA.b #$02
	STA.w !RAM_SMB3_Overworld_ActiveMusicBoxFlag
	LDA.b #!Define_SMB3_OverworldMusic_MusicBox
	STA.w !RAM_SMB3_Global_MusicCh1
	JSR.w CODE_29DCF4
	JMP.w CODE_29DB11

;--------------------------------------------------------------------

UseReserveHammer:
.Main:
;$29DD90
	LDA.b #$03
	STA.b $00
CODE_29DD94:
	LDY.b $00
	JSL.l CODE_238EFC
	SEC
	SBC.b #$51
	CMP.b #$02
	BCC.b CODE_29DDA8
	DEC.b $00
	BPL.b CODE_29DD94
	JMP.w CODE_29DD66

CODE_29DDA8:
	STX.b $01
	LSR.b $01
	PHA
	TAX
	LDA.w DATA_21EF2D,x
	STA.b [$2E],y
	TYA
	ASL
	ASL
	ASL
	ASL
	STA.b $A7
	STA.b $02
	TYA
	AND.b #$F0
	CLC
	ADC.b #$10
	STA.b $A6
	STA.b $00
	JSR.w CODE_29DF76
	TYA
	EOR.b #$40
	TAY
	LDA.w !RAM_SMB3_Overworld_LevelsClearedBits,y
	ORA.w DATA_21EF4E,x
	STA.w !RAM_SMB3_Overworld_LevelsClearedBits,y
	LDX.b $A7
	LDA.b $A6
	SEC
	SBC.b #$10
	JSL.l CODE_209701
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b $45,x
	AND.b #$01
	BEQ.b CODE_29DDF0
	LDA.b $0E
	ORA.b #$04
	STA.b $0E
CODE_29DDF0:
	PLA
	PHA
	ASL
	TAX
	REP.b #$20
	LDY.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	LDA.b $0E
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,y
	CLC
	ADC.w #$0100
	STA.w SMB3_StripeImageUploadTable[$04].LowByte,y
	LDA.w #$8003
	XBA
	STA.w SMB3_StripeImageUploadTable[$01].LowByte,y
	STA.w SMB3_StripeImageUploadTable[$05].LowByte,y
	LDA.w DATA_21EF2F,x
	STA.w SMB3_StripeImageUploadTable[$02].LowByte,y
	LDA.w DATA_21EF33,x
	STA.w SMB3_StripeImageUploadTable[$03].LowByte,y
	LDA.w DATA_21EF37,x
	STA.w SMB3_StripeImageUploadTable[$06].LowByte,y
	LDA.w DATA_21EF3B,x
	STA.w SMB3_StripeImageUploadTable[$07].LowByte,y
	LDA.w #$FFFF
	STA.w SMB3_StripeImageUploadTable[$08].LowByte,y
	LDA.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	CLC
	ADC.w #$0010
	STA.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	SEP.b #$20
	PLA
	TAX
	LDA.b #!Define_SMAS_Sound0063_BreakBlock
	STA.w !RAM_SMB3_Global_SoundCh3
	LDA.b #$14
	STA.w $0423
	JSR.w CODE_29DE9E
	JMP.w CODE_29DCF4

;--------------------------------------------------------------------

UseReserveWhistle:
.Main:
;$29DE4B
	LDY.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDX.b #$00
	LDA.w !RAM_SMB3_Overworld_Mario_XPosLo,y
	SEC
	SBC.w $0210
	CMP.b #$80
	BCS.b CODE_29DE5D
	LDX.b #$01
CODE_29DE5D:
	STX.b $58
	LDA.w DATA_21EF3F,x
	STA.b $56
	LDA.w !RAM_SMB3_Overworld_Mario_YPosLo,y
	STA.b $54
	STA.l $7E3974
	LDA.w !RAM_SMB3_Overworld_Mario_YPosLo,y
	STA.w $0730
	LDA.w !RAM_SMB3_Overworld_Mario_XPosLo,y
	STA.w $0732
	LDA.w !RAM_SMB3_Overworld_Mario_XPosHi,y
	STA.w $0731
	LDA.w !RAM_SMB3_Overworld_Mario_UnusedRAM2,y
	STA.w $0733
	LDX.b #$01
	LDA.b #$00
	STA.w $0722,y
	STA.w $0724,y
	STA.b $25
	STX.b !RAM_SMB3_Overworld_CurrentWarpWhistleState
	JSR.w CODE_29DCF4
	LDA.b #!Define_SMB3_OverworldMusic_WarpWhistle
	STA.w !RAM_SMB3_Global_MusicCh1
	JMP.w CODE_29DB11

;--------------------------------------------------------------------

CODE_29DE9E:
	LDA.b $A6
	SEC
	SBC.b #$08
	STA.w SMB3_OAMBuffer[$18].YDisp
	STA.w SMB3_OAMBuffer[$19].YDisp
	CLC
	ADC.b #$10
	STA.w SMB3_OAMBuffer[$1A].YDisp
	STA.w SMB3_OAMBuffer[$1B].YDisp
	LDA.b $A7
	SEC
	SBC.w $0210
	SEC
	SBC.b #$08
	STA.w SMB3_OAMBuffer[$18].XDisp
	STA.w SMB3_OAMBuffer[$1A].XDisp
	CLC
	ADC.b #$10
	STA.w SMB3_OAMBuffer[$19].XDisp
	STA.w SMB3_OAMBuffer[$1B].XDisp
	LDA.b #$27
	STA.w SMB3_OAMBuffer[$18].Prop
	LDA.b #$67
	STA.w SMB3_OAMBuffer[$19].Prop
	LDA.b #$A7
	STA.w SMB3_OAMBuffer[$1A].Prop
	LDA.b #$E7
	STA.w SMB3_OAMBuffer[$1B].Prop
	LDA.w $0423
	AND.b #$1C
	LSR
	LSR
	TAY
	LDA.w DATA_21EF41,y
	STA.w SMB3_OAMBuffer[$18].Tile
	STA.w SMB3_OAMBuffer[$19].Tile
	STA.w SMB3_OAMBuffer[$1A].Tile
	STA.w SMB3_OAMBuffer[$1B].Tile
	LDA.b #$02
	STA.w SMB3_OAMTileSizeBuffer[$18].Slot
	STA.w SMB3_OAMTileSizeBuffer[$19].Slot
	STA.w SMB3_OAMTileSizeBuffer[$1A].Slot
	STA.w SMB3_OAMTileSizeBuffer[$1B].Slot
	DEC.w $0423
	LDA.w $0423
	BNE.b CODE_29DF0E
	JMP.w CODE_29DB11

CODE_29DF0E:
	RTS

;--------------------------------------------------------------------

DATA_29DF0F:
	db $00,$01,$02,$01,$02,$01,$03,$00
	db $01,$00,$00,$00,$03,$00

CODE_29DF1D:
	LDY.b #$C7
	LDA.b $A8
	BEQ.b CODE_29DF2B
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$18
	BNE.b CODE_29DF2B
	LDY.b #$F0
CODE_29DF2B:
	STY.w SMB3_OAMBuffer[$00].YDisp
	LDA.w !RAM_SMB3_Overworld_ReserveBoxPageIndex
	CLC
	ADC.w !RAM_SMB3_Overworld_ReserveBoxSlotIndex
	TAY
	LDA.w !RAM_SMB3_Level_Player_CurrentCharacter
	BEQ.b CODE_29DF40
	TYA
	CLC
	ADC.b #SMB3_IndividualPlayerData[$01].ReserveSlots-SMB3_IndividualPlayerData[$00].ReserveSlots
	TAY
CODE_29DF40:
	LDA.w $041E
	STA.w SMB3_OAMBuffer[$00].XDisp
	REP.b #$20
	LDA.w SMB3_IndividualPlayerData[$00].ReserveSlots,y
	AND.w #$00FF
	TAX
	AND.w #$0007
	ASL
	STA.b $00
	TXA
	AND.w #$0008
	ASL
	ASL
	ORA.b $00
	CLC
	ADC.w #$00C0
	STA.w SMB3_OAMBuffer[$00].Tile
	SEP.b #$20
	LDA.l DATA_29DF0F,x
	ASL
	ORA.b #$21
	STA.w SMB3_OAMBuffer[$00].Prop
	LDA.b #$02
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot
	RTS

;--------------------------------------------------------------------

CODE_29DF76:
	LDY.b #$06
	LDA.b $00
CODE_29DF7A:
	CMP.w DATA_21EF47,y
	BEQ.b CODE_29DF84
	DEY
	BPL.b CODE_29DF7A
	LDY.b #$07
CODE_29DF84:
	STY.b $04
	LDA.b $01
	ASL
	ASL
	ASL
	ASL
	STA.b $03
	LDA.b $02
	LSR
	LSR
	LSR
	LSR
	ORA.b $03
	TAY
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	BEQ.b CODE_29DFA1
	TYA
	CLC
	ADC.b #$40
	TAY
CODE_29DFA1:
	LDX.b $04
	LDA.w !RAM_SMB3_Overworld_LevelsClearedBits,y
	ORA.w DATA_21EF4E,x
	STA.w !RAM_SMB3_Overworld_LevelsClearedBits,y
	RTS

;--------------------------------------------------------------------

; Note: Something related to warping from a pipe in level?

CODE_29DFAD:
	JSL.l CODE_20804D
	LDA.w !RAM_SMB3_Global_FrameCounter
	AND.b #$01
	BNE.b CODE_29DFAD
	DEC.b !RAM_SMB3_Global_ScreenDisplayRegisterMirror
	BNE.b CODE_29DFAD
	LDA.b #$80
	STA.w !REGISTER_ScreenDisplayRegister
	STZ.w $05FC
	LDA.l $7E3955
	INC
	STA.l $7E3955
	JSR.w CODE_29E01B
	LDA.w $0210
	STA.l $7E398C
	LDA.b $12
	STA.l $7E398B
	LDA.w $0216
	STA.l $7E398E
	LDA.b $13
	STA.l $7E398D
	LDA.b #$01
	STA.w $0713
	LDA.b #$20
	STA.w $0612
	LDX.b $25
	BNE.b CODE_29E002
	LDA.b $23
	SEC
	SBC.b #$10
	STA.b $23
	JMP.w CODE_29E009

CODE_29E002:
	LDA.b $24
	CLC
	ADC.b #$10
	STA.b $24
CODE_29E009:
	LDA.w $0414
	CMP.b #$02
	BEQ.b CODE_29E017
	LDA.l $7E398C
	STA.w $0210
CODE_29E017:
	JML.l CODE_208753

CODE_29E01B:
	LDA.w $0414
	JSL.l SMB3_ExecutePtr_Absolute

DATA_29DFAE:
	dw $0000
	dw CODE_29E02E
	dw CODE_29E065
	dw CODE_29E117
	dw CODE_29E1D9
	dw CODE_29E228

;--------------------------------------------------------------------

; Note: Routine used to swap the level pointers to the sublevel or vice versa.

CODE_29E02E:
	LDA.w !RAM_SMB3_Level_SublevelLevelDataLo
	STA.b !RAM_SMB3_Level_LevelDataPtrLo
	STA.w !RAM_SMB3_Level_PreviousLevelDataLo
	LDA.w !RAM_SMB3_Level_SublevelLevelDataHi
	STA.b !RAM_SMB3_Level_LevelDataPtrHi
	STA.w !RAM_SMB3_Level_PreviousLevelDataHi
	LDA.w !RAM_SMB3_Level_SublevelLevelDataBank
	STA.b !RAM_SMB3_Level_LevelDataPtrBank
	STA.w !RAM_SMB3_Level_PreviousLevelDataBank
	LDA.w !RAM_SMB3_Level_SublevelSpriteDataLo
	STA.b !RAM_SMB3_Level_SpriteDataPtrLo
	STA.w !RAM_SMB3_Level_PreviousSpriteDataLo
	LDA.w !RAM_SMB3_Level_SublevelSpriteDataHi
	STA.b !RAM_SMB3_Level_SpriteDataPtrHi
	STA.w !RAM_SMB3_Level_PreviousSpriteDataHi
	LDA.w !RAM_SMB3_Level_SublevelTilesetFromHeader
	STA.w !RAM_SMB3_Global_TilesetFromHeader
	LDA.w $0415
	EOR.b #$01
	STA.w $0415
	RTS

;--------------------------------------------------------------------

; Note: Routine to load generic bonus room.

CODE_29E065:
	LDA.w !RAM_SMB3_Level_DisableScrollingFlag
	EOR.b #$01
	STA.w !RAM_SMB3_Level_DisableScrollingFlag
	BNE.b CODE_29E072
	BRL.w CODE_29E0F5

CODE_29E072:
	LDA.w !RAM_SMB3_Global_TilesetFromHeader
	STA.w !RAM_SMB3_Level_PreviousTilesetFromHeader
	LDY.w !RAM_SMB3_Global_CurrentWorld
	LDA.w GenericBonusRoomTileset,y
	STA.w !RAM_SMB3_Global_TilesetFromHeader
	TYA
	STA.b $00
	ASL
	CLC
	ADC.b $00
	TAY
	LDA.w GenericBonusRoomLevelDataPtrs,y
	STA.b !RAM_SMB3_Level_LevelDataPtrLo
	LDA.w GenericBonusRoomLevelDataPtrs+$01,y
	STA.b !RAM_SMB3_Level_LevelDataPtrHi
	LDA.w GenericBonusRoomLevelDataPtrs+$02,y
	STA.b !RAM_SMB3_Level_LevelDataPtrBank
	LDA.w GenericBonusRoomSpriteDataPtrs,y
	STA.b !RAM_SMB3_Level_SpriteDataPtrLo
	LDA.w GenericBonusRoomSpriteDataPtrs+$01,y
	STA.b !RAM_SMB3_Level_SpriteDataPtrHi
	LDX.b !RAM_SMB3_Level_Player_XPosHi
	LDA.w !RAM_SMB3_Level_SubscreenExitEntranceXPosition,x
	PHA
	AND.b #$0F
	STA.b !RAM_SMB3_Level_Player_XPosHi
	STA.b $12
	PLA
	AND.b #$F0
	ORA.b #$08
	STA.b !RAM_SMB3_Level_Player_XPosLo
	LDA.w !RAM_SMB3_Level_SubscreenExitProperties,x
	PHA
	PHA
	AND.b #$0F
	STA.w $0377
	CMP.b #$03
	BCC.b CODE_29E0C9
	LDA.b !RAM_SMB3_Level_Player_XPosLo
	AND.b #$F0
	STA.b !RAM_SMB3_Level_Player_XPosLo
CODE_29E0C9:
	PLA
	AND.b #$80
	STA.w $0378
	STA.w !RAM_SMB3_Level_IsVerticalLevelFlag
	PLA
	AND.b #$70
	LSR
	LSR
	LSR
	LSR
	TAY
	LDA.w DATA_21EF8E,y
	PHA
	AND.b #$0F
	STA.b !RAM_SMB3_Level_Player_YPosHi
	PLA
	AND.b #$F0
	STA.b !RAM_SMB3_Level_Player_YPosLo
	LDA.w DATA_21EF96,y
	STA.w $0216
	LDA.b #$00
	STA.w $0210
	JMP.w CODE_29E1CD

CODE_29E0F5:
	LDA.w !RAM_SMB3_Level_PreviousTilesetFromHeader
	STA.w !RAM_SMB3_Global_TilesetFromHeader
	LDA.w !RAM_SMB3_Level_PreviousLevelDataLo
	STA.b !RAM_SMB3_Level_LevelDataPtrLo
	LDA.w !RAM_SMB3_Level_PreviousLevelDataHi
	STA.b !RAM_SMB3_Level_LevelDataPtrHi
	LDA.w !RAM_SMB3_Level_PreviousLevelDataBank
	STA.b !RAM_SMB3_Level_LevelDataPtrBank
	LDA.w !RAM_SMB3_Level_PreviousSpriteDataLo
	STA.b !RAM_SMB3_Level_SpriteDataPtrLo
	LDA.w !RAM_SMB3_Level_PreviousSpriteDataHi
	STA.b !RAM_SMB3_Level_SpriteDataPtrHi
	JMP.w CODE_29E11A

;--------------------------------------------------------------------

; Note: Routine to load level at secondary entrance?

CODE_29E117:
	JSR.w CODE_29E02E
CODE_29E11A:
	LDX.b !RAM_SMB3_Level_Player_XPosHi
	LDA.w !RAM_SMB3_Level_IsVerticalLevelFlag
	BEQ.b CODE_29E12B
	LDY.b !RAM_SMB3_Level_Player_YPosHi
	LDA.b !RAM_SMB3_Level_Player_YPosLo
	JSL.l CODE_209F86
	TYA
	TAX
CODE_29E12B:
	LDA.w !RAM_SMB3_Level_SubscreenExitEntranceXPosition,x
	PHA
	AND.b #$0F
	STA.b !RAM_SMB3_Level_Player_XPosHi
	PLA
	AND.b #$F0
	ORA.b #$08
	STA.b !RAM_SMB3_Level_Player_XPosLo
	LDA.w !RAM_SMB3_Level_SubscreenExitProperties,x
	PHA
	PHA
	AND.b #$0F
	STA.w $0377
	CMP.b #$03
	BCC.b CODE_29E14E
	LDA.b !RAM_SMB3_Level_Player_XPosLo
	AND.b #$F0
	STA.b !RAM_SMB3_Level_Player_XPosLo
CODE_29E14E:
	PLA
	AND.b #$80
	STA.w $0378
	STA.w !RAM_SMB3_Level_IsVerticalLevelFlag
	PLA
	AND.b #$70
	LSR
	LSR
	LSR
	LSR
	TAY
	LDA.w DATA_21EF8E,y
	PHA
	AND.b #$0F
	STA.b !RAM_SMB3_Level_Player_YPosHi
	PLA
	AND.b #$F0
	STA.b !RAM_SMB3_Level_Player_YPosLo
	LDA.w DATA_21EF96,y
	STA.w $0216
	REP.b #$20
	LDA.w $0216
	LSR
	LSR
	STA.w $0218
	LDA.w $0216
	SEC
	SBC.w $0218
	STA.w $0218
	SEP.b #$20
	STZ.w $0210
	STZ.w $0211
	STZ.b $12
	STZ.b $13
	STZ.w $0212
	STZ.w $0213
	LDA.w $0378
	BNE.b CODE_29E1CD
	LDA.b !RAM_SMB3_Level_Player_XPosHi
	STA.b $12
	BNE.b CODE_29E1A9
	LDA.b !RAM_SMB3_Level_Player_XPosLo
	CMP.b #$80
	BCC.b CODE_29E1C4
CODE_29E1A9:
	LDA.b !RAM_SMB3_Level_Player_XPosLo
	SEC
	SBC.b #$80
	STA.w $0210
	STA.w $0212
	LDA.b $12
	SBC.b #$00
	STA.b $12
	STA.w $0211
	LSR
	STA.w $0213
	ROR.w $0212
CODE_29E1C4:
	LDA.b !RAM_SMB3_Level_Player_YPosHi
	BEQ.b CODE_29E1CD
	LDA.b #$EF
	STA.w $0216
CODE_29E1CD:
	LDA.w $0210
	STA.b $B7
	LDA.b $12
	JSL.l CODE_2097BA
	RTS

;--------------------------------------------------------------------

; Note: End Pipe routine, called when entering the pipe at the end of certain levels, like 1-5.

CODE_29E1D9:
	LDY.w !RAM_SMB3_Global_CurrentWorld
	LDA.w GenericEndLevelTileset,y
	STA.w !RAM_SMB3_Global_TilesetFromHeader
	TYA
	STA.b $00
	ASL
	CLC
	ADC.b $00
	TAY
	LDA.w GenericEndLevelLevelDataPtrs,y
	STA.b !RAM_SMB3_Level_LevelDataPtrLo
	LDA.w GenericEndLevelLevelDataPtrs+$01,y
	STA.b !RAM_SMB3_Level_LevelDataPtrHi
	LDA.w GenericEndLevelLevelDataPtrs+$02,y
	STA.b !RAM_SMB3_Level_LevelDataPtrBank
	LDA.w GenericEndLevelSpriteDataPtrs,y
	STA.b !RAM_SMB3_Level_SpriteDataPtrLo
	LDA.w GenericEndLevelSpriteDataPtrs+$01,y
	STA.b !RAM_SMB3_Level_SpriteDataPtrHi
	LDA.b #$00
	STA.b !RAM_SMB3_Level_Player_XPosHi
	STA.w $0210
	STA.b $13
	STA.b $12
	STA.w !RAM_SMB3_Level_IsVerticalLevelFlag
	LDA.b #$EF
	STA.w $0216
	LDA.b #$28
	STA.b !RAM_SMB3_Level_Player_XPosLo
	LDA.b #$01
	STA.b !RAM_SMB3_Level_Player_YPosHi
	STA.w $0377
	LDA.b #$80
	STA.b !RAM_SMB3_Level_Player_YPosLo
	JMP.w CODE_29E1CD

;--------------------------------------------------------------------

; Note: Something related to normal sprite 07 (1-3 toad house warp)

CODE_29E228:
	LDA.b #$00
	STA.w $0210
	STA.b $12
	STA.b $13
	STA.b !RAM_SMB3_Level_Player_XPosHi
	STA.w !RAM_SMB3_Level_IsVerticalLevelFlag
	LDA.b #$20
	STA.b !RAM_SMB3_Level_Player_XPosLo
	LDA.b #$01
	STA.b !RAM_SMB3_Level_Player_YPosHi
	LDA.b #$40
	STA.b !RAM_SMB3_Level_Player_YPosLo
	LDA.b #$07
	STA.w !RAM_SMB3_Global_TilesetFromHeader
	JMP.w CODE_29E1CD

;--------------------------------------------------------------------

CODE_29E24A:
	LDA.b #$04
	STA.w $101D
	STA.w $101C
	INC.w $101B
	RTS

;--------------------------------------------------------------------

CODE_29E256:
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$01
	BNE.b CODE_29E26A
	INC.b !RAM_SMB3_Global_ScreenDisplayRegisterMirror
	LDA.b !RAM_SMB3_Global_ScreenDisplayRegisterMirror
	CMP.b #$0F
	BNE.b CODE_29E26A
	STZ.w $101D
	STZ.w $101B
CODE_29E26A:
	RTS

;--------------------------------------------------------------------

CODE_29E26B:
	LDA.w $101E
	BNE.b CODE_29E273
	JSR.w CODE_29E24A
CODE_29E273:
	RTL

;--------------------------------------------------------------------

CODE_29E274:
	LDA.w $101E
	BNE.b CODE_29E294
	LDA.w $101C
	BEQ.b CODE_29E281
	DEC.w $101C
CODE_29E281:
	LDA.w $101D
	BEQ.b CODE_29E294
	LDA.w $101C
	BNE.b CODE_29E293
	LDA.b #$04
	STA.w $101C
	DEC.w $101D
CODE_29E293:
	RTS

CODE_29E294:
	LDA.b #$00
	STA.w $101B
	STA.w $101E
	RTS

;--------------------------------------------------------------------

CODE_29E29D:
	JSR.w CODE_29E24A
	LDA.b #$80
	STA.w !REGISTER_IRQNMIAndJoypadEnableFlags
	LDA.b #$00
	STA.b !RAM_SMB3_Global_ScreenDisplayRegisterMirror
CODE_29E2A9:
	JSL.l CODE_20804D
	JSR.w CODE_29E256
	LDA.w $101D
	BNE.b CODE_29E2A9
	RTL

;--------------------------------------------------------------------

CODE_29E2B6:
	JSL.l CODE_29E26B
	LDA.b #$A0
	STA.w !REGISTER_IRQNMIAndJoypadEnableFlags
	LDA.b #$0F
	STA.b !RAM_SMB3_Global_ScreenDisplayRegisterMirror
	LDA.b #$07
	STA.w !RAM_SMB3_Global_MosaicSizeAndBGEnableMirror
CODE_29E2C8:
	JSL.l CODE_20804D
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$01
	BNE.b CODE_29E2C8
	LDA.w !RAM_SMB3_Level_Layer2BGFromHeader
	CMP.b #$1B
	BNE.b CODE_29E2E7
	LDA.w $078E
	BEQ.b CODE_29E2E7
	LDA.w !RAM_SMB3_Global_MosaicSizeAndBGEnableMirror
	CLC
	ADC.b #$10
	STA.w !RAM_SMB3_Global_MosaicSizeAndBGEnableMirror
CODE_29E2E7:
	DEC.b !RAM_SMB3_Global_ScreenDisplayRegisterMirror
	LDA.b !RAM_SMB3_Global_ScreenDisplayRegisterMirror
	BNE.b CODE_29E2C8
	JSL.l CODE_20804D
	RTL

;--------------------------------------------------------------------

; Todo: Unreferrenced routine.

CODE_29E2F2:
	PHB
	LDA.b #SMB3_MainDataBank_Main>>16
	PHA
	PLB
	LDX.w $104F
	LDA.w $1047,x
	STA.w $1051
	LDA.w $104B,x
	STA.w $1053
	LDY.w $1045
	LDX.b #$80
	LDA.w $104F
	AND.b #$02
	BEQ.b CODE_29E317
	LDY.w $1046
	LDX.b #$81
CODE_29E317:
	STX.w !REGISTER_VRAMAddressIncrementValue
	STX.b $FF
	LDA.w $1053
	STA.w !REGISTER_VRAMAddressLo
	LDA.w $1051
	STA.w !REGISTER_VRAMAddressHi
CODE_29E328:
	LDA.b #$FF
	STA.w !REGISTER_WriteToVRAMPortLo
	LDA.b #$00
	STA.w !REGISTER_WriteToVRAMPortHi
	LDA.w $104F
	AND.b #$02
	BNE.b CODE_29E356
	INC.w $1053
	LDA.w $1053
	AND.b #$1F
	BNE.b CODE_29E37D
	LDA.w $1053
	SEC
	SBC.b #$20
	STA.w $1053
	LDA.w $1051
	EOR.b #$04
	STA.w $1051
	BRA.b CODE_29E378

CODE_29E356:
	LDA.w $1053
	CLC
	ADC.b #$20
	STA.w $1053
	AND.b #$E0
	BNE.b CODE_29E37D
	LDA.w $1051
	ADC.b #$00
	STA.w $1051
	AND.b #$03
	BNE.b CODE_29E37D
	LDA.w $1051
	CLC
	ADC.b #$04
	STA.w $1051
CODE_29E378:
	DEY
	BPL.b CODE_29E317
	BRA.b CODE_29E380

CODE_29E37D:
	DEY
	BPL.b CODE_29E328
CODE_29E380:
	JSR.w CODE_29E3B7
	INC.w $104F
	LDA.w $104F
	AND.b #$03
	STA.w $104F
	LDY.w $1050
	CPY.b #$06
	BCS.b CODE_29E3B5
	LDA.b $FF
	AND.b #$01
	BNE.b CODE_29E3B5
	LDX.b #$1F
	LDA.b #$7B
	STA.w !REGISTER_VRAMAddressHi
	LDA.w DATA_21EFD6,y
	STA.w !REGISTER_VRAMAddressLo
CODE_29E3A8:
	LDA.b #$FF
	STA.w !REGISTER_WriteToVRAMPortLo
	LDA.b #$00
	STA.w !REGISTER_WriteToVRAMPortHi
	DEX
	BPL.b CODE_29E3A8
CODE_29E3B5:
	PLB
	RTL

CODE_29E3B7:
	LDA.w $104F
	JSL.l SMB3_ExecutePtr_Absolute

DATA_29E3BE:
	dw CODE_29E3C6
	dw CODE_29E429
	dw CODE_29E405
	dw CODE_29E444

CODE_29E3C6:
	LDX.w $104F
	LDA.w $104B,x
	AND.b #$1F
	CMP.b #$1F
	BEQ.b CODE_29E3F3
	LDA.w $104B,x
	CLC
	ADC.b #$21
	STA.w $104B,x
	BCC.b CODE_29E3F2
	LDA.w $1047,x
	ADC.b #$00
	STA.w $1047,x
	AND.b #$03
	BNE.b CODE_29E3F2
	LDA.w $1047,x
	CLC
	ADC.b #$04
	STA.w $1047,x
CODE_29E3F2:
	RTS

CODE_29E3F3:
	LDA.w $104B,x
	CLC
	ADC.b #$01
	STA.w $104B,x
	LDA.w $1047,x
	ADC.b #$00
	STA.w $1047,x
	RTS

CODE_29E405:
	LDX.w $104F
	LDA.w $104B,x
	CLC
	ADC.b #$1F
	STA.w $104B,x
	BCC.b CODE_29E428
	LDA.w $1047,x
	ADC.b #$00
	STA.w $1047,x
	AND.b #$03
	BNE.b CODE_29E428
	LDA.w $1047,x
	CLC
	ADC.b #$04
	STA.w $1047,x
CODE_29E428:
	RTS

CODE_29E429:
	LDX.w $104F
	LDA.w $104B,x
	SEC
	SBC.b #$1F
	STA.w $104B,x
	LDA.w $1047,x
	SBC.b #$00
	STA.w $1047,x
	DEC.w $1045
	DEC.w $1045
	RTS

CODE_29E444:
	LDX.w $104F
	LDA.w $104B,x
	CLC
	ADC.b #$21
	STA.w $104B,x
	BCC.b CODE_29E467
	LDA.w $1047,x
	ADC.b #$00
	STA.w $1047,x
	AND.b #$03
	BNE.b CODE_29E467
	LDA.w $1047,x
	CLC
	ADC.b #$04
	STA.w $1047,x
CODE_29E467:
	DEC.w $1046
	DEC.w $1046
	RTS

;--------------------------------------------------------------------

; Todo: Unreferrenced routine.

CODE_29E46E:
	PHB
	LDA.b #SMB3_MainDataBank_Main>>16
	PHA
	PLB
	LDY.w $1045
	LDX.b #$80
	LDA.w $104F
	AND.b #$02
	BEQ.b CODE_29E484
	LDY.w $1046
	LDX.b #$81
CODE_29E484:
	TYA
	ASL
	TAY
	STX.b $FF
	STX.w !REGISTER_VRAMAddressIncrementValue
	LDX.w $104F
	LDA.w $1047,x
	STA.w !REGISTER_VRAMAddressHi
	LDA.w $104B,x
	STA.w !REGISTER_VRAMAddressLo
CODE_29E49B:
	LDA.w $0382,y
	STA.w !REGISTER_WriteToVRAMPortLo
	LDA.w $0383,y
	STA.w !REGISTER_WriteToVRAMPortHi
	CPY.w $105F
	BEQ.b CODE_29E4B3
	DEY
	DEY
	BPL.b CODE_29E49B
	JMP.w CODE_29E4D7

CODE_29E4B3:
	LDA.b #$FE
	STA.w $105F
	LDA.b #$08
	STA.w !REGISTER_VRAMAddressHi
	LDA.w $104B,x
	AND.b #$1F
	STA.w !REGISTER_VRAMAddressLo
	DEY
	DEY
CODE_29E4C7:
	LDA.w $0382,y
	STA.w !REGISTER_WriteToVRAMPortLo
	LDA.w $0383,y
	STA.w !REGISTER_WriteToVRAMPortHi
	DEY
	DEY
	BPL.b CODE_29E4C7
CODE_29E4D7:
	JSR.w CODE_29E4EA
	INC.w $104F
	LDA.w $104F
	AND.b #$03
	STA.w $104F
	INC.w $1050
	PLB
	RTL

CODE_29E4EA:
	LDA.w $104F
	JSL.l SMB3_ExecutePtr_Absolute

DATA_29E4F1:
	dw CODE_29E4F9
	dw CODE_29E568
	dw CODE_29E52F
	dw CODE_29E5B9

CODE_29E4F9:
	LDY.w $1060
	LDX.w $104F
	LDA.w DATA_21EFDC,y
	CMP.w $1047,x
	BNE.b CODE_29E511
	LDA.w $104B,x
	CMP.w DATA_21EFE1,y
	BCS.b CODE_29E511
	BCC.b CODE_29E522							; Note: This will always branch.

CODE_29E511:
	LDA.w $104B,x
	SEC
	SBC.b #$21
	STA.w $104B,x
	LDA.w $1047,x
	SBC.b #$00
	STA.w $1047,x
CODE_29E522:
	LDA.w $1047,x
	CMP.b #$07
	BNE.b CODE_29E52E
	LDA.b #$03
	STA.w $1047,x
CODE_29E52E:
	RTS

CODE_29E52F:
	LDX.w $1060
	LDA.w DATA_21EFDC,x
	LDX.w $104F
	CMP.w $1047,x
	BNE.b CODE_29E54A
	LDA.w $104B,x
	CMP.b #$1E
	BNE.b CODE_29E54A
	INC.w $104B,x
	JMP.w CODE_29E55B

CODE_29E54A:
	LDA.w $104B,x
	SEC
	SBC.b #$1F
	STA.w $104B,x
	LDA.w $1047,x
	SBC.b #$00
	STA.w $1047,x
CODE_29E55B:
	LDA.w $1047,x
	CMP.b #$07
	BNE.b CODE_29E567
	LDA.b #$03
	STA.w $1047,x
CODE_29E567:
	RTS

CODE_29E568:
	LDX.w $1060
	LDA.w DATA_21EFE6,x
	LDX.w $104F
	CMP.w $1047,x
	BNE.b CODE_29E586
	LDA.w $1060
	CMP.b #$04
	BCC.b CODE_29E59D
	LDA.w $104B,x
	CMP.b #$E0
	BCC.b CODE_29E586
	BCS.b CODE_29E59D							; Note: This will always branch.

CODE_29E586:
	LDA.w $104B,x
	CLC
	ADC.b #$1F
	STA.w $104B,x
	LDA.w $1047,x
	ADC.b #$00
	STA.w $1047,x
	INC.w $1045
	INC.w $1045
CODE_29E59D:
	LDA.w $1047,x
	CMP.b #$04
	BNE.b CODE_29E5B8
	LDA.w $104B,x
	CMP.b #$00
	BCC.b CODE_29E5B8
	LDA.b #$08
	STA.w $1047,x
	LDA.w $104B,x
	AND.b #$1F
	STA.w $104B,x
CODE_29E5B8:
	RTS

CODE_29E5B9:
	LDX.w $1060
	LDA.w DATA_21EFDC,x
	LDX.w $104F
	CMP.w $1047,x
	BNE.b CODE_29E5DA
	LDA.w $104B,x
	CMP.b #$02
	BNE.b CODE_29E5DA
	DEC.w $104B,x
	LDA.w $1060
	CMP.b #$04
	BCC.b CODE_29E5EE
	BEQ.b CODE_29E5F1
CODE_29E5DA:
	LDA.w $104B,x
	SEC
	SBC.b #$21
	STA.w $104B,x
	LDA.w $1047,x
	SBC.b #$00
	STA.w $1047,x
	INC.w $1046
CODE_29E5EE:
	INC.w $1046
CODE_29E5F1:
	LDA.w $1047,x
	CMP.b #$07
	BNE.b CODE_29E5FD
	LDA.b #$03
	STA.w $1047,x
CODE_29E5FD:
	RTS

;--------------------------------------------------------------------

	%ROUTINE_SMB3_UpdateLevelTimer(NULLROM)				; $29E5FE

;--------------------------------------------------------------------

CODE_29E663:
	LDX.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	LDA.b #$0F
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,x
	LDA.b #$51
	STA.w SMB3_StripeImageUploadTable[$00].HighByte,x
	LDA.b #$00
	STA.w SMB3_StripeImageUploadTable[$01].LowByte,x
	LDA.b #$03
	STA.w SMB3_StripeImageUploadTable[$01].HighByte,x
	LDA.w !RAM_SMB3_Level_TimerHundreds
	ORA.b #$90
	STA.w SMB3_StripeImageUploadTable[$02].LowByte,x
	LDA.w !RAM_SMB3_Level_TimerTens
	ORA.b #$90
	STA.w SMB3_StripeImageUploadTable[$03].LowByte,x
	LDA.w !RAM_SMB3_Level_TimerOnes
	ORA.b #$90
	STA.w SMB3_StripeImageUploadTable[$04].LowByte,x
	LDA.b #$FF
	STA.w SMB3_StripeImageUploadTable[$05].LowByte,x
	LDA.b #$22
	STA.w SMB3_StripeImageUploadTable[$02].HighByte,x
	STA.w SMB3_StripeImageUploadTable[$03].HighByte,x
	STA.w SMB3_StripeImageUploadTable[$04].HighByte,x
	TXA
	CLC
	ADC.b #$0A
	STA.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	RTS

;--------------------------------------------------------------------

CODE_29E6AA:
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDY.b #$00
	LDA.w !RAM_SMB3_Level_Player_MariosLives,x
	CMP.b #$FF
	BNE.b CODE_29E6BA
	LDA.b #$90
	BRA.b CODE_29E6D0

CODE_29E6BA:
	CMP.b #$63
	BMI.b CODE_29E6C3
	LDA.b #$62
	STA.w !RAM_SMB3_Level_Player_MariosLives,x
CODE_29E6C3:
	INC
CODE_29E6C4:
	CMP.b #$0A
	BMI.b CODE_29E6CE
	SEC
	SBC.b #$0A
	INY
	BRA.b CODE_29E6C4

CODE_29E6CE:
	ORA.b #$90
CODE_29E6D0:
	STA.w $1F4B
	TYA
	BNE.b CODE_29E6DA
	LDA.b #$AD
	BRA.b CODE_29E6DC

CODE_29E6DA:
	ORA.b #$90
CODE_29E6DC:
	STA.w $1F4A
	RTS

;--------------------------------------------------------------------

CODE_29E6E0:
	LDA.b #SMB3_IndividualPlayerData[$00].CoinCount-SMB3_IndividualPlayerData[$00].ReserveSlots
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	BEQ.b CODE_29E6EA
	CLC
	ADC.b #SMB3_IndividualPlayerData[$01].ReserveSlots-SMB3_IndividualPlayerData[$00].ReserveSlots
CODE_29E6EA:
	LDY.b #$00
	TAX
	LDA.w SMB3_IndividualPlayerData[$00].ReserveSlots,x
	CLC
	ADC.w !RAM_SMB3_Global_CoinsToGive
	STA.w SMB3_IndividualPlayerData[$00].ReserveSlots,x
	CMP.b #$64
	BCC.b CODE_29E70C
	SEC
	SBC.b #$64
	STA.w SMB3_IndividualPlayerData[$00].ReserveSlots,x
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	INC.w !RAM_SMB3_Level_Player_MariosLives,x
	LDA.b #!Define_SMAS_Sound0063_1up
	STA.w !RAM_SMB3_Global_SoundCh3
CODE_29E70C:
	CMP.b #$0A
	BMI.b CODE_29E716
	SEC
	SBC.b #$0A
	INY
	BRA.b CODE_29E70C

CODE_29E716:
	LDX.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	ORA.b #$90
	STA.w $1F49
	TYA
	BNE.b CODE_29E725
	LDA.b #$AD
	BRA.b CODE_29E727

CODE_29E725:
	ORA.b #$90
CODE_29E727:
	STA.w $1F48
	LDA.b #$00
	STA.w !RAM_SMB3_Global_CoinsToGive
	RTS

;--------------------------------------------------------------------

	%ROUTINE_SMB3_DrawWorldNumberOnStatusBar(NULLROM)			; $29E730
	%ROUTINE_SMB3_DrawPlayerLetterOnStatusBar(NULLROM)			; $29E766

;--------------------------------------------------------------------

CODE_29E7AA:
	LDA.w !RAM_SMB3_Level_Player_CurrentScoreLo
	CLC
	ADC.w !RAM_SMB3_Global_PointsToGiveLo
	STA.w !RAM_SMB3_Level_Player_CurrentScoreLo
	STA.b $00
	LDA.w !RAM_SMB3_Level_Player_CurrentScoreMid
	ADC.w !RAM_SMB3_Global_PointsToGiveMid
	STA.w !RAM_SMB3_Level_Player_CurrentScoreMid
	STA.b $01
	LDA.w !RAM_SMB3_Level_Player_CurrentScoreHi
	ADC.b #$00
	STA.w !RAM_SMB3_Level_Player_CurrentScoreHi
	STA.b $02
	LDY.b #$00
	LDX.b #$05
CODE_29E7CF:
	LDA.b $00
	SEC
	SBC.l DATA_21F00C,x
	STA.b $00
	LDA.b $01
	SBC.l DATA_21F006,x
	STA.b $01
	LDA.b $02
	SBC.l DATA_21F000,x
	STA.b $02
	BCC.b CODE_29E7EF
	INC.w $069E
	BRA.b CODE_29E7CF

CODE_29E7EF:
	LDA.b $00
	CLC
	ADC.l DATA_21F00C,x
	STA.b $00
	LDA.b $01
	ADC.l DATA_21F006,x
	STA.b $01
	LDA.b $02
	ADC.l DATA_21F000,x
	STA.b $02
	LDA.w $069E
	ORA.b #$90
	STA.w $1F4C,y
	LDA.b #$00
	STA.w $069E
	INY
	DEX
	BPL.b CODE_29E7CF
	LDA.w $1F4C
	CMP.b #$9A
	BCC.b CODE_29E835
	LDX.b #$02
CODE_29E822:
	LDA.w DATA_21F012,x
	STA.w !RAM_SMB3_Level_Player_CurrentScoreHi,x
	DEX
	BPL.b CODE_29E822
	LDX.b #$05
	LDA.b #$99
CODE_29E82F:
	STA.w $1F4C,x
	DEX
	BPL.b CODE_29E82F
CODE_29E835:
	STZ.w !RAM_SMB3_Global_PointsToGiveLo
	STZ.w !RAM_SMB3_Global_PointsToGiveMid
	RTL

;--------------------------------------------------------------------

CODE_29E83C:
	LDX.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	LDY.b #$00
CODE_29E841:
	LDA.w DATA_21EFEF,y
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,x
	INX
	INY
	CPY.b #$11
	BNE.b CODE_29E841
	LDX.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	LDY.b #$00
CODE_29E852:
	LDA.w $1F4C,y
	STA.w SMB3_StripeImageUploadTable[$02].LowByte,x
	INX
	INX
	INY
	CPY.b #$06
	BNE.b CODE_29E852
	LDY.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	TYA
	CLC
	ADC.b #$10
	STA.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	RTS

;--------------------------------------------------------------------

CODE_29E86A:
	LDY.b #$00
	LDA.b #$01
	STA.b $0E
CODE_29E870:
	LDX.b #$9F
	LDA.w !RAM_SMB3_Global_FilledInPMeterSegments
	AND.b $0E
	BEQ.b CODE_29E87A
	DEX
CODE_29E87A:
	TXA
	STA.w $1F40,y
	INY
	ASL.b $0E
	LDA.b $0E
	CMP.b #$40
	BNE.b CODE_29E870
	LDA.b #$8C
	STA.w $1F40,y
	LDX.b #$8D
	LDA.w !RAM_SMB3_Global_FilledInPMeterSegments
	AND.b $0E
	BEQ.b CODE_29E8A6
	DEC.w !RAM_SMB3_Global_FullPMeterFrameCounter
	LDA.w !RAM_SMB3_Global_FullPMeterFrameCounter
	AND.b #$08
	BNE.b CODE_29E8A6
	LDA.b #$8E
	STA.w $1F40,y
	INC
	TAX
CODE_29E8A6:
	TXA
	STA.w $1F40+$01,y
	RTS

;--------------------------------------------------------------------

	%ROUTINE_SMB3_UploadStripeImage(NULLROM)			; $29E8AB

;--------------------------------------------------------------------

; Todo: Routine used for uploading tilemaps in strips?

CODE_29E953:
	LDA.w $0380
	BMI.b CODE_29E9A2
	REP.b #$20
	LDA.w $0380
	XBA
	STA.w !REGISTER_VRAMAddressLo
	LDX.b #$81
	STX.w !REGISTER_VRAMAddressIncrementValue
	LDA.w #(!REGISTER_WriteToVRAMPortLo&$0000FF<<8)+$01
	STA.w DMA[$00].Parameters
	LDA.w #$000382
	STA.w DMA[$00].SourceLo
	LDX.b #$000382>>16
	STX.w DMA[$00].SourceBank
	LDA.w #$0040
	STA.w DMA[$00].SizeLo
	LDX.b #$01
	STX.w !REGISTER_DMAEnable
	LDA.w $0380
	XBA
	ORA.w #$0800
	STA.w !REGISTER_VRAMAddressLo
	LDA.w #$0003C2
	STA.w DMA[$00].SourceLo
	LDA.w #$002C
	STA.w DMA[$00].SizeLo
	STX.w !REGISTER_DMAEnable
	SEP.b #$20
	LDA.b #$FF
	STA.w $0380
CODE_29E9A2:
	RTL

;--------------------------------------------------------------------

CODE_29E9A3:
	LDA.l $7F2000
	BMI.b CODE_29E9F7
	LDX.b #$81
	STX.w !REGISTER_VRAMAddressIncrementValue
	REP.b #$20
	LDA.l $7F2000
	XBA
	STA.w !REGISTER_VRAMAddressLo
	LDA.w #(!REGISTER_WriteToVRAMPortLo&$0000FF<<8)+$01
	STA.w DMA[$00].Parameters
	LDA.w #$7F2002
	STA.w DMA[$00].SourceLo
	LDX.b #$7F2002>>16
	STX.w DMA[$00].SourceBank
	LDA.w #$0040
	STA.w DMA[$00].SizeLo
	LDX.b #$01
	STX.w !REGISTER_DMAEnable
	LDA.l $7F2000
	XBA
	CLC
	ADC.w #$0800
	STA.w !REGISTER_VRAMAddressLo
	LDA.w #$7F2042
	STA.w DMA[$00].SourceLo
	LDA.w #$002C
	STA.w DMA[$00].SizeLo
	STX.w !REGISTER_DMAEnable
	SEP.b #$20
	LDA.b #$FF
	STA.l $7F2000
CODE_29E9F7:
	RTL

;--------------------------------------------------------------------

CODE_29E9F8:
	LDA.l $7F2000
	BMI.b CODE_29EA31
	REP.b #$20
	LDA.l $7F2000
	XBA
	STA.w !REGISTER_VRAMAddressLo
	LDX.b #$80
	STX.w !REGISTER_VRAMAddressIncrementValue
	LDA.w #(!REGISTER_WriteToVRAMPortLo&$0000FF<<8)+$01
	STA.w DMA[$00].Parameters
	LDA.w #$7F2002
	STA.w DMA[$00].SourceLo
	LDX.b #$7F2002>>16
	STX.w DMA[$00].SourceBank
	LDA.w #$0040
	STA.w DMA[$00].SizeLo
	LDX.b #$01
	STX.w !REGISTER_DMAEnable
	SEP.b #$20
	LDA.b #$FF
	STA.l $7F2000
CODE_29EA31:
	RTL

;--------------------------------------------------------------------

CODE_29EA32:
	LDA.w $0380
	BMI.b CODE_29EA68
	LDX.b #$80
	STX.w !REGISTER_VRAMAddressIncrementValue
	REP.b #$20
	LDA.w $0380
	XBA
	STA.w !REGISTER_VRAMAddressLo
	LDA.w #(!REGISTER_WriteToVRAMPortLo&$0000FF<<8)+$01
	STA.w DMA[$00].Parameters
	LDA.w #$000382
	STA.w DMA[$00].SourceLo
	LDX.b #$000382>>16
	STX.w DMA[$00].SourceBank
	LDA.w #$0040
	STA.w DMA[$00].SizeLo
	LDX.b #$01
	STX.w !REGISTER_DMAEnable
	SEP.b #$20
	LDA.b #$FF
	STA.w $0380
CODE_29EA68:
	RTL

;--------------------------------------------------------------------

; Note: Something related to updating a block tile?

CODE_29EA69:
	LDY.w $036C
	BMI.b CODE_29EA68
	LDX.b #$80
	STX.w !REGISTER_VRAMAddressIncrementValue
	STY.w !REGISTER_VRAMAddressHi
	LDA.w $036D
	STA.w !REGISTER_VRAMAddressLo
	CLC
	ADC.b #$20
	TAX
	REP.b #$20
	LDA.w $036E
	STA.w !REGISTER_WriteToVRAMPortLo
	LDA.w $0370
	STA.w !REGISTER_WriteToVRAMPortLo
	STX.w !REGISTER_VRAMAddressLo
	LDA.w $0372
	STA.w !REGISTER_WriteToVRAMPortLo
	LDA.w $0374
	STA.w !REGISTER_WriteToVRAMPortLo
	SEP.b #$20
	LDA.b #$FF
	STA.w $036C
	RTL

;--------------------------------------------------------------------

CODE_29EAA5:
	JSR.w CODE_29E86A
	JSR.w CODE_29E6E0
	JSR.w CODE_29E6AA
	JSL.l CODE_29E7AA
	JSR.w SMB3_UpdateLevelTimer_Main
	LDX.b #$00
	LDY.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	BEQ.b CODE_29EAC3
	TXA
	STA.l $7E3954
	BRA.b CODE_29EAD7

CODE_29EAC3:
	LDA.l $7E3954
	INC
	STA.l $7E3954
	AND.b #$01
	BNE.b CODE_29EAD7
	LDA.b #$00
	STA.l $7E3954
	RTL

CODE_29EAD7:
	LDA.l DATA_21F02A,x
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,y
	INY
	INX
	CPX.b #$3F
	BNE.b CODE_29EAD7
	LDY.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	LDX.b #$00
CODE_29EAE9:
	LDA.w $1F40,x
	STA.w SMB3_StripeImageUploadTable[$02].LowByte,y
	INY
	INY
	INX
	CPX.b #$08
	BNE.b CODE_29EAE9
	LDY.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	LDA.w $1F48
	STA.w SMB3_StripeImageUploadTable[$0C].LowByte,y
	LDA.w $1F49
	STA.w SMB3_StripeImageUploadTable[$0D].LowByte,y
	LDY.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	LDA.w $1F4A
	STA.w SMB3_StripeImageUploadTable[$10].LowByte,y
	LDA.w $1F4B
	STA.w SMB3_StripeImageUploadTable[$11].LowByte,y
	LDY.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	LDX.b #$00
CODE_29EB19:
	LDA.w $1F4C,x
	STA.w SMB3_StripeImageUploadTable[$13].LowByte,y
	INY
	INY
	INX
	CPX.b #$06
	BNE.b CODE_29EB19
	LDY.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	LDX.b #$00
CODE_29EB2B:
	LDA.w $1F52,x
	STA.w SMB3_StripeImageUploadTable[$1C].LowByte,y
	INY
	INY
	INX
	CPX.b #$03
	BNE.b CODE_29EB2B
	LDA.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	CLC
	ADC.b #$3E
	STA.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	RTL

;--------------------------------------------------------------------

	%ROUTINE_SMB3_BufferSpriteListData(NULLROM)				; $29EB42

;--------------------------------------------------------------------

; Todo: Routine related to the pause menu?

CODE_29EB63:
	REP.b #$20
	LDA.w #$7C00
	STA.w $023E
	LDA.w #SMB3_PauseMenuGFX_Main
	STA.w $0240
	LDX.b #SMB3_PauseMenuGFX_Main>>16
	STX.w $0242
	LDA.w #SMB3_PauseMenuGFX_End-SMB3_PauseMenuGFX_Main
	STA.w $02CA
	SEP.b #$20
	RTS

;--------------------------------------------------------------------

CODE_29EB7F:
	REP.b #$20
	LDA.w #$7C00
	STA.w $023E
	LDA.w #SMB3_Bank3FGraphics_Sprite_Global3
	STA.w $0240
	LDX.b #SMB3_Bank3FGraphics_Sprite_Global3>>16
	STX.w $0242
	LDA.w #$0800
	STA.w $02CA
	SEP.b #$20
	RTS

;--------------------------------------------------------------------

CODE_29EB9B:
	REP.b #$20
	LDA.w #$7C00
	STA.w $023E
	LDA.w #SMB3_Bank38Graphics_Sprite_Overworld+$3800
	STA.w $0240
	LDX.b #(SMB3_Bank38Graphics_Sprite_Overworld+$3800)>>16
	STX.w $0242
	LDA.w #$0800
	STA.w $02CA
	SEP.b #$20
	RTS

;--------------------------------------------------------------------

; Todo: Routine related to the pause menu?

CODE_29EBB7:
	PHX
	PHY
	LDA.w !RAM_SMB3_Level_PauseMenuStatus
	BNE.b CODE_29EBEA
	JSR.w CODE_29EB63
	JSR.w CODE_29F153
	JSR.w CODE_29F0E1
	JSR.w CODE_29EC16
	LDA.b #$01
	STA.w $396D
	STA.w !RAM_SMB3_Level_PauseMenuStatus
	STZ.w !RAM_SMB3_Level_PauseMenuCursorPos
	STZ.w $028F
	STZ.w $0290
	STZ.w $02DD
	LDA.b #!Define_SMB3_LevelMusic_LowerVolumeCommand
	STA.w !RAM_SMB3_Global_MusicCh1
	LDA.b #!Define_SMAS_Sound0060_Pause1
	STA.w !RAM_SMB3_Global_SoundCh1
	BRA.b CODE_29EBF4

CODE_29EBEA:
	LDA.b #$11
	STA.w $028B
	LDA.b #$03
	STA.w !RAM_SMB3_Level_PauseMenuStatus
CODE_29EBF4:
	PLY
	PLX
	RTL

;--------------------------------------------------------------------

CODE_29EBF7:
	PHB
	PHK
	PLB
	PHX
	PHY
	LDA.w !RAM_SMB3_Level_PauseMenuStatus
	ASL
	TAX
	LDA.w DATA_29EC0E,x
	STA.b $00
	LDA.w DATA_29EC0E+$01,x
	STA.b $01
	JMP.w ($0000)

DATA_29EC0E:
	dw $0000
	dw CODE_29EFB3
	dw CODE_29EC39
	dw CODE_29F01F

;--------------------------------------------------------------------
; Note: Initial values of pause menu's window HDMA.
; They'll "grow" in size frame-by-frame in order to make
; the zoom-in effect. Think of these as 0s keyframes.

CODE_29EC16:
	REP.b #$20
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) == $0000
	LDA.w #$0010					; Animation timer (in frames)
	STA.w $028B
	LDA.w #$0064					;\ Window's left border (X)
	STA.w $0281						;/ Minus (2 * TIMER) = final value
	LDA.w #$00A4					;\ Window's right border (X)
	STA.w $0283						;/ Plus (2 * TIMER) = final value
	LDA.w #$00C0					;\ Scanline index (Y * 2) on the HDMA table
	STA.w $0285						;/ Minus (4 * TIMER) = final value
	LDA.w #$00D0					;\ First scanline (Y * 2) after the window
	STA.w $0289						;/ Plus (4 * TIMER) = final value
else ;[BR]
	LDA.w #!Define_SMB3_PauseMenuHDMA_Timer
	STA.w $028B
	
	; Window's left border
	;       Xpos.
	LDA.w #$003A+(2*!Define_SMB3_PauseMenuHDMA_Timer)
	STA.w $0281
	
	; Window's right border
	LDA.w #$00C5-(2*!Define_SMB3_PauseMenuHDMA_Timer)
	STA.w $0283
	
	; Scanline index on the HDMA table
	;      (Ypos.*2)
	LDA.w #($0042*2)+(4*!Define_SMB3_PauseMenuHDMA_Timer)
	STA.w $0285
	
	; First scanline after the window
	LDA.w #($0086*2)-(4*!Define_SMB3_PauseMenuHDMA_Timer)
	STA.w $0289
endif
	SEP.b #$20
	RTS

;--------------------------------------------------------------------

CODE_29EC39:
	REP.b #$10
	LDY.w #$0010
	LDX.w #$0000
	LDA.b #$48
	STA.b $01
CODE_29EC45:					; X pos. of the options (relative to 1st tile)
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000
	LDA.b #$48
else
	LDA.b #$58
endif
	STA.b $00
CODE_29EC49:
	LDA.w !RAM_SMB3_WorldRollcall_OpenPauseMenuFlag
	BEQ.b CODE_29EC53
	LDA.w DATA_29EF64,x
	BRA.b CODE_29EC56

CODE_29EC53:							; Draw default pause menu
	LDA.w DATA_29EF15,x
CODE_29EC56:
	BPL.b CODE_29EC70					; Branch to write the OAM
	INX
	INC
	BEQ.b CODE_29ECA5					; Branch to the menu BG routine
CODE_29EC5C:						; Set next object
	LDA.b $00
	CLC
	ADC.b #$08							; Increment X position
	STA.b $00
										; Max. X position
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	CMP.b #$B8
elseif !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000
	CMP.b #$BB
else
	CMP.b #$C0
endif
	BCC.b CODE_29EC49
	LDA.b $01							;\ If current Xpos is greater
	CLC									;/ than that, break a new line
	ADC.b #$08
	STA.b $01
	BRA.b CODE_29EC45

CODE_29EC70:						; Letters OAM data
	CLC
	ADC.b #$C0
	STA.w SMB3_OAMBuffer[$00].Tile,y
	LDA.b $00
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	LDA.b $01
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	LDA.w !RAM_SMB3_Overworld_EnableDarknessFlag	;\ Use Palette 5 on the map if the darkness effect is on

	BEQ.b CODE_29EC89								;| (World 8's third screen)
	LDA.b #$2B										;/
	BRA.b CODE_29EC8B

CODE_29EC89:
	LDA.b #$21
CODE_29EC8B:
	STA.w SMB3_OAMBuffer[$00].Prop,y
	REP.b #$20
	PHY
	TYA
	LSR
	LSR
	TAY
	LDA.w #$0000
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	PLY
	SEP.b #$20
	INX
	INY
	INY
	INY
	INY
	BRA.b CODE_29EC5C

CODE_29ECA5:						; Draw BG sprites
	LDA.b #$40							; Set initial Y position
	STA.b $01
CODE_29ECA9:							; Set initial X position
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000
	LDA.b #$38
else
	LDA.b #$40
endif
	STA.b $00
CODE_29ECAD:						; Background OAM data
	LDA.b $00
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	CLC
	ADC.b #$10
	STA.b $00
	LDA.b $01
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	LDA.b #$CD
	STA.w SMB3_OAMBuffer[$00].Tile,y
	LDA.w !RAM_SMB3_Overworld_EnableDarknessFlag	;\ Use Palette 5 on the map if the darkness effect is on
	BEQ.b CODE_29ECCA								;| (World 8's third screen)
	LDA.b #$2B										;/
	BRA.b CODE_29ECCC

CODE_29ECCA:
	LDA.b #$21
CODE_29ECCC:
	STA.w SMB3_OAMBuffer[$00].Prop,y
	REP.b #$20
	PHY
	TYA
	LSR
	LSR
	TAY
	LDA.w #$0002
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	PLY
	SEP.b #$20
	INY
	INY
	INY
	INY
	LDA.b $00
										; Continue if reached max. X position
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000
	CMP.b #$C8
else
	CMP.b #$D0
endif
	BCC.b CODE_29ECAD
	LDA.b $01
	CMP.b #$80							;\ If reached last line,
	BCS.b CODE_29ECF6					;/ go draw the cursor
	CLC
	ADC.b #$10							;\ Otherwise, add 16px to Y position
	STA.b $01							;| then go draw next line
	BRA.b CODE_29ECA9					;/

CODE_29ECF6:							; Check if it's the credits' pause menu
	SEP.b #$10
	LDY.b #$00
	LDA.w !RAM_SMB3_WorldRollcall_OpenPauseMenuFlag
	BNE.b CODE_29ED02
	JMP.w CODE_29EE07

CODE_29ED02:
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b !RAM_SMB3_Global_ControllerPress1P1,x
	AND.b #(!Joypad_DPadU>>8)|(!Joypad_DPadD>>8)|(!Joypad_Select>>8)
	STA.b $0F
	LDA.w !RAM_SMB3_Level_PauseMenuStatus
	CMP.b #$01
	BEQ.b CODE_29ED4A
	LDA.b $0F
	AND.b #!Joypad_Select>>8
	BEQ.b CODE_29ED22
	LDA.b #$01
	EOR.w !RAM_SMB3_Level_PauseMenuCursorPos
	STA.w !RAM_SMB3_Level_PauseMenuCursorPos
	BRA.b CODE_29ED42

CODE_29ED22:
	LDA.b $0F
	AND.b #!Joypad_DPadU>>8
	BEQ.b CODE_29ED32
	LDA.w !RAM_SMB3_Level_PauseMenuCursorPos
	BEQ.b CODE_29ED4A
	STZ.w !RAM_SMB3_Level_PauseMenuCursorPos
	BRA.b CODE_29ED42

CODE_29ED32:
	LDA.b $0F
	AND.b #!Joypad_DPadD>>8
	BEQ.b CODE_29ED4A
	LDA.w !RAM_SMB3_Level_PauseMenuCursorPos
	BNE.b CODE_29ED4A
	LDA.b #$01
	STA.w !RAM_SMB3_Level_PauseMenuCursorPos
CODE_29ED42:
	LDA.b #!Define_SMAS_Sound0063_Coin
	STA.w !RAM_SMB3_Global_SoundCh3
	STZ.w $028F
CODE_29ED4A:						; Cursor OAM data
	INC.w $028F
										; Cursor's initial X position
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	LDA.b #$4C
elseif !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000
	LDA.b #$50
else
	LDA.b #$5C
endif
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	LDX.w !RAM_SMB3_Level_PauseMenuCursorPos
	LDA.w DATA_29EF11,x
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	LDA.w $028F							; Check for blinking anim
	AND.b #$10
	LSR
	LSR
	LSR
	LSR
	TAX
	LDA.w PauseMenuCursorTile,x
	STA.w SMB3_OAMBuffer[$00].Tile,y
	LDA.b #$23
	STA.w SMB3_OAMBuffer[$00].Prop,y
	LDA.b #$00
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	LDA.w !RAM_SMB3_Level_PauseMenuStatus
	CMP.b #$01
	BEQ.b CODE_29EDB5
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b !RAM_SMB3_Global_ControllerPress1P1,x
	AND.b #!Joypad_Start>>8
	BEQ.b CODE_29EDB5
	LDA.b #$22
	STA.w $02DD
	LDA.w !RAM_SMB3_Level_PauseMenuCursorPos
	BNE.b CODE_29ED96
	LDA.b #!Define_SMAS_Sound0060_Pause1
	STA.w !RAM_SMB3_Global_SoundCh1
	BRA.b CODE_29ED9B

CODE_29ED96:
	LDA.b #!Define_SMAS_Sound0060_SaveGame
	STA.w !RAM_SMB3_Global_SoundCh1
CODE_29ED9B:
	JSL.l CODE_20804D
	DEC.w $02DD
	BNE.b CODE_29ED9B
	LDA.w !RAM_SMB3_Level_PauseMenuCursorPos
	BEQ.b CODE_29EDAC
	JSR.w CODE_29EDB9
CODE_29EDAC:
	LDA.b #!Define_SMB3_LevelMusic_CopyOfMusicFade
	STA.w !RAM_SMB3_Global_MusicCh1
if !Define_Global_ROMToAssemble&(!ROM_SMB3_U|!ROM_SMB3_E|!ROM_SMB3_J) != $00
	JML.l SMB3_ResetGame_Main
else
	JML.l SMAS_ResetToSMASTitleScreen_Main				; Note: Call to SMAS function
endif

CODE_29EDB5:
	PLY
	PLX
	PLB
	RTL

CODE_29EDB9:
	LDX.b #$00
	LDA.w !RAM_SMB3_Level_Player_CurrentCharacter
	BEQ.b CODE_29EDC2
	LDX.b #SMB3_IndividualPlayerData[$01].ReserveSlots-SMB3_IndividualPlayerData[$00].ReserveSlots
CODE_29EDC2:
	LDA.w !RAM_SMB3_Level_Player_CurrentScoreHi
	STA.w SMB3_IndividualPlayerData[$00].Score,x
	LDA.w !RAM_SMB3_Level_Player_CurrentScoreMid
	STA.w SMB3_IndividualPlayerData[$00].Score+$01,x
	LDA.w !RAM_SMB3_Level_Player_CurrentScoreLo
	STA.w SMB3_IndividualPlayerData[$00].Score+$02,x
	REP.b #$20
	LDX.b #$08
CODE_29EDD8:
	LDA.l World8OverworldSpriteInitialYPosLoData,x
	STA.w !RAM_SMB3_Overworld_OWSpr_InitialYPosLo,x
	LDA.l World8OverworldSpriteInitialXPosHiData,x
	STA.w !RAM_SMB3_Overworld_OWSpr_InitialXPosHi,x
	LDA.l World8OverworldSpriteInitialXPosLoData,x
	STA.w !RAM_SMB3_Overworld_OWSpr_InitialXPosLo,x
	LDA.l World8OverworldSpriteIDData,x
	STA.w !RAM_SMB3_Overworld_OWSpr_SpriteID,x
	DEX
	DEX
	BPL.b CODE_29EDD8
	SEP.b #$20
	LDX.b #$7F
CODE_29EDFC:
	STZ.w !RAM_SMB3_Overworld_LevelsClearedBits,x
	DEX
	BPL.b CODE_29EDFC
	JSL.l SMB3_SaveGame_Main
	RTS

CODE_29EE07:
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.w !RAM_SMB3_Global_ControllerPress1P1,x
	AND.b #(!Joypad_DPadU>>8)|(!Joypad_DPadD>>8)|(!Joypad_Select>>8)
	STA.b $0F
	LDA.w !RAM_SMB3_Level_PauseMenuStatus
	CMP.b #$01
	BEQ.b CODE_29EE6F
	CMP.b #$03
	BEQ.b CODE_29EE6F
	LDA.b $0F
	BEQ.b CODE_29EE6F
	AND.b #!Joypad_Select>>8
	BNE.b CODE_29EE5A
	LDA.b $0F
	AND.b #!Joypad_DPadU>>8
	BNE.b CODE_29EE43
	INC.w !RAM_SMB3_Level_PauseMenuCursorPos
	LDA.w !RAM_SMB3_Level_PauseMenuCursorPos
	CMP.b #$03
	BCC.b CODE_29EE39
	DEC.w !RAM_SMB3_Level_PauseMenuCursorPos
	BRA.b CODE_29EE6F

CODE_29EE39:
	LDA.b #!Define_SMAS_Sound0063_Coin
	STA.w !RAM_SMB3_Global_SoundCh3
	STZ.w $028F
	BRA.b CODE_29EE6F

CODE_29EE43:
	DEC.w !RAM_SMB3_Level_PauseMenuCursorPos
	LDA.w !RAM_SMB3_Level_PauseMenuCursorPos
	BPL.b CODE_29EE50
	INC.w !RAM_SMB3_Level_PauseMenuCursorPos
	BRA.b CODE_29EE6F

CODE_29EE50:
	LDA.b #!Define_SMAS_Sound0063_Coin
	STA.w !RAM_SMB3_Global_SoundCh3
	STZ.w $028F
	BRA.b CODE_29EE6F

CODE_29EE5A:
	INC.w !RAM_SMB3_Level_PauseMenuCursorPos
	LDA.w !RAM_SMB3_Level_PauseMenuCursorPos
	CMP.b #$03
	BCC.b CODE_29EE67
	STZ.w !RAM_SMB3_Level_PauseMenuCursorPos
CODE_29EE67:
	LDA.b #!Define_SMAS_Sound0063_Coin
	STA.w !RAM_SMB3_Global_SoundCh3
	STZ.w $028F
CODE_29EE6F:
;[BR] Cursor's X position
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000
	LDA.b #$40
else
	LDA.b #$4C
endif
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	LDX.w !RAM_SMB3_Level_PauseMenuCursorPos
	LDA.w PauseMenuCursorYDisp,x
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	LDA.w $028F
	AND.b #$10
	LSR
	LSR
	LSR
	LSR
	TAX
	LDA.w PauseMenuCursorTile,x
	STA.w SMB3_OAMBuffer[$00].Tile,y
	LDA.w !RAM_SMB3_Overworld_EnableDarknessFlag
	BEQ.b CODE_29EE96
	LDA.b #$2B
	BRA.b CODE_29EE98

CODE_29EE96:
	LDA.b #$23
CODE_29EE98:
	STA.w SMB3_OAMBuffer[$00].Prop,y
	LDA.b #$00
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	INC.w $028F
	LDA.w $0290
	BEQ.b CODE_29EF07
	LDA.b !RAM_SMB3_Global_ControllerPress1
	AND.b #!Joypad_Start>>8
	BEQ.b CODE_29EF07
	LDA.w !RAM_SMB3_Level_PauseMenuCursorPos
	BEQ.b CODE_29EF07
	LDX.b #$00
	LDY.w !RAM_SMB3_Level_Player_CurrentCharacter
	BEQ.b CODE_29EEBC
	LDX.b #SMB3_IndividualPlayerData[$01].ReserveSlots-SMB3_IndividualPlayerData[$00].ReserveSlots
CODE_29EEBC:
	LDA.w !RAM_SMB3_Level_Player_CurrentScoreHi
	STA.w SMB3_IndividualPlayerData[$00].Score,x
	LDA.w !RAM_SMB3_Level_Player_CurrentScoreMid
	STA.w SMB3_IndividualPlayerData[$00].Score+$01,x
	LDA.w !RAM_SMB3_Level_Player_CurrentScoreLo
	STA.w SMB3_IndividualPlayerData[$00].Score+$02,x
	LDA.b #!Define_SMAS_Sound0060_SaveGame
	STA.w !RAM_SMB3_Global_SoundCh1
	LDA.w !RAM_SMB3_Level_PauseMenuCursorPos
	CMP.b #$01
	BEQ.b CODE_29EEDF
	LDA.b #!Define_SMB3_LevelMusic_CopyOfMusicFade
	STA.w !RAM_SMB3_Global_MusicCh1
CODE_29EEDF:
	JSL.l SMB3_SaveGame_Main
	LDA.b #$22
	STA.w $02DD
CODE_29EEE8:
	JSL.l CODE_20804D
	DEC.w $02DD
	BNE.b CODE_29EEE8
	STZ.w $0290
	LDA.w !RAM_SMB3_Level_PauseMenuCursorPos
	CMP.b #$01
	BEQ.b CODE_29EF07
	STZ.w !RAM_SMB3_Global_SoundCh1
	LDA.b #!Define_SMB3_LevelMusic_MusicFade
	STA.w !RAM_SMB3_Global_MusicCh1
if !Define_Global_ROMToAssemble&(!ROM_SMB3_U|!ROM_SMB3_E|!ROM_SMB3_J) != $00
	JML.l SMB3_ResetGame_Main
else
	JML.l SMAS_ResetToSMASTitleScreen_Main				; Note: Call to SMAS function
endif

CODE_29EF07:
	STZ.w $02DD
	PLY
	PLX
	PLB
	RTL

; Note: Pause menu routine

PauseMenuCursorYDisp:
;$29EF0E
	db $50,$60,$70

DATA_29EF11:
	db $58,$68

PauseMenuCursorTile:
;$29EF13
	db $D0,$DE

; Every tile index in a sort of grid order.
; $AA = No object for 8px. Everything else is relative
; to $C0, the PauseMenuGFX tile offset in VRAM.
DATA_29EF15:
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	db $AA,$AA,$0C,$AA,$AA,$AA,$0C,$AA
	db $AA,$0C,$AA,$AA,$00,$01,$02,$03
	db $0A,$0B,$04,$AA,$05,$05,$06,$07
	db $AA,$AA,$0C,$AA,$AA,$AA,$AA,$0C
	db $AA,$AA,$AA,$AA,$00,$01,$02,$03
	db $04,$AA,$05,$05,$06,$07,$AA,$AA
	db $AA,$AA,$0C,$AA,$AA,$AA,$AA,$AA
	db $AA,$AA,$AA,$AA,$00,$01,$02,$03
	db $04,$AA,$08,$09,$07,$AA,$AA,$AA
	db $FF
elseif !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR]
	%CUSTOMDATA_SMAS_PauseMenuLettersData(NULLROM)
else
	db $AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA
	db $AA,$AA,$AA,$AA,$AA,$14,$15,$16
	db $17,$18,$19,$1A,$1B,$AA,$AA,$AA
	db $AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA
	db $AA,$AA,$AA,$AA,$AA,$AA,$AA,$28
	db $29,$2A,$2B,$1C,$14,$15,$16,$17
	db $18,$19,$1A,$1B,$AA,$AA,$AA,$AA
	db $AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA
	db $AA,$28,$29,$2A,$2B,$1C,$24,$25
	db $26,$27,$AA,$AA,$AA,$AA,$FF
endif
; Final pause menu at the THE END screen
DATA_29EF64:
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	db $AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA
	db $AA,$AA,$AA,$AA,$AA,$AA,$0C,$AA
	db $AA,$AA,$0C,$AA,$AA,$AA,$AA,$AA
	db $00,$01,$02,$03,$0A,$0B,$04,$AA
	db $08,$09,$07,$AA,$AA,$AA,$0C,$AA
	db $AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA
	db $00,$01,$02,$03,$04,$AA,$08,$09
	db $07,$AA,$AA,$AA,$AA,$AA,$AA,$AA
	db $AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA
	db $FF
elseif !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR]
	db $AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA
	db $AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA
	db $AA,$AA,$28,$29,$3B,$1C,$AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA
	db $AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA
	db $AA,$AA,$28,$29,$2A,$2B,$26,$2C,$24,$25,$26,$27,$AA,$AA,$AA
	db $FF
else
	db $AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA
	db $AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA
	db $AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA
	db $AA,$AA,$AA,$AA,$24,$25,$26,$27
	db $AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA
	db $AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA
	db $AA,$AA,$AA,$AA,$AA,$AA,$28,$29
	db $2A,$2B,$1C,$24,$25,$26,$27,$AA
	db $AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA
	db $AA,$AA,$AA,$AA,$AA,$AA,$FF
endif

;--------------------------------------------------------------------
; Note: Pause menu's open animation

CODE_29EFB3:
	LDA.w $028B						;\ When the timer hits 0,
	BEQ.b CODE_29F016				;| the animation will stop
	BMI.b CODE_29F016				;/
; Values update
	REP.b #$30
	DEC.w $028B						; Decrease timer
	DEC.w $0281						;\ Move left border twice to the left
	DEC.w $0281						;/
	INC.w $0283						;\ Move right border twice to the right
	INC.w $0283						;/
	DEC.w $0285						;\ Move 1st scanline up
	DEC.w $0285						;|
	DEC.w $0285						;|
	DEC.w $0285						;/
	INC.w $0289						;\ Move last scanline down
	INC.w $0289						;|
	INC.w $0289						;|
	INC.w $0289						;/

; Reset HDMA table
	LDX.w #$007E
	LDA.w #$00FF
CODE_29EFE9:						; Done in four simultaneous points to speed it up
	STA.l !RAM_SMB3_Global_WindowHDMATable1,x
	STA.l !RAM_SMB3_Global_WindowHDMATable1+$80,x
	STA.l !RAM_SMB3_Global_WindowHDMATable1+$0100,x
	STA.l !RAM_SMB3_Global_WindowHDMATable1+$0180,x
	DEX
	DEX
	BPL.b CODE_29EFE9

; Upload current values through each defined scanline index
	LDA.w $0283
	XBA
	ORA.w $0281
	LDX.w $0285
CODE_29F007:
	STA.l !RAM_SMB3_Global_WindowHDMATable1,x
	INX
	INX
	CPX.w $0289					;\ If the index hits the 1st line after
	BNE.b CODE_29F007			;| the window, finish this animation frame
	SEP.b #$30					;|
	BRA.b CODE_29F01C			;/

CODE_29F016:
	INC.w !RAM_SMB3_Level_PauseMenuStatus
	INC.w $0290
CODE_29F01C:
	JMP.w CODE_29EC39

;--------------------------------------------------------------------

CODE_29F01F:
	LDA.w $028B						;\ When the timer hits 17,
	CMP.b #$11						;| the animation will stop
	BNE.b CODE_29F02C				;|
	DEC.w $028B						;|
	JMP.w CODE_29EC39				;/

CODE_29F02C:
	CMP.b #$10
	BNE.b CODE_29F03F
	LDA.b #!Define_SMB3_LevelMusic_RestoreVolumeCommand
	STA.w !RAM_SMB3_Global_MusicCh1
	LDA.w !RAM_SMB3_Level_PauseMenuCursorPos
	BNE.b CODE_29F03F
	LDA.b #!Define_SMAS_Sound0060_Pause1
	STA.w !RAM_SMB3_Global_SoundCh1
CODE_29F03F:
	LDA.w $028B
	BEQ.b CODE_29F0A2
	BMI.b CODE_29F0A2
	REP.b #$30
	INC.w $0281						;\ Move left border twice to the right
	INC.w $0281						;/
	DEC.w $0283						;\ Move right border twice to the left
	DEC.w $0283						;/
	INC.w $0285						;\ Move down 1st scanline
	INC.w $0285						;|
	INC.w $0285						;|
	INC.w $0285						;/
	DEC.w $0289						;\ Move last scanline up
	DEC.w $0289						;|
	DEC.w $0289						;|
	DEC.w $0289						;/
	DEC.w $028B						; Decrease timer

; Reset HDMA table
	LDX.w #$007E
	LDA.w #$00FF
CODE_29F075:
	STA.l !RAM_SMB3_Global_WindowHDMATable1,x
	STA.l !RAM_SMB3_Global_WindowHDMATable1+$80,x
	STA.l !RAM_SMB3_Global_WindowHDMATable1+$0100,x
	STA.l !RAM_SMB3_Global_WindowHDMATable1+$0180,x
	DEX
	DEX
	BPL.b CODE_29F075
	LDA.w $0283
	XBA
	ORA.w $0281
	LDX.w $0285
CODE_29F093:
	STA.l !RAM_SMB3_Global_WindowHDMATable1,x
	INX
	INX
	CPX.w $0289					;\ If the index hits the 1st line after
	BNE.b CODE_29F093			;| the window, finish this animation frame
	SEP.b #$30					;|
	BRA.b CODE_29F0DE			;/

; Reset window HDMA
CODE_29F0A2:
	STZ.w !RAM_SMB3_Level_PauseMenuStatus
	STZ.w $396D							; Glitch: This writes to open bus.
	STZ.w !RAM_SMB3_Global_BG1And2WindowMaskSettingsMirror
	STZ.w !RAM_SMB3_Global_BG3And4WindowMaskSettingsMirror
	LDA.w !RAM_SMB3_Global_ObjectAndColorWindowSettingsMirror
	EOR.b #$33
	STA.w !RAM_SMB3_Global_ObjectAndColorWindowSettingsMirror
	LDA.w $0287
	STA.w !RAM_SMB3_Global_MainScreenWindowMaskMirror
	LDA.w $0288
	STA.w !RAM_SMB3_Global_SubScreenWindowMaskMirror
	LDA.w $037A
	BNE.b CODE_29F0CC
	JSR.w CODE_29EB9B
	BRA.b CODE_29F0CF

CODE_29F0CC:
	JSR.w CODE_29EB7F
CODE_29F0CF:
	STZ.w $037A
	LDA.w !RAM_SMB3_Global_HDMAEnableMirror
	AND.b #$F7
	STA.w !RAM_SMB3_Global_HDMAEnableMirror
	PLY
	PLX
	PLB
	RTL

CODE_29F0DE:
	JMP.w CODE_29EC39

;--------------------------------------------------------------------

CODE_29F0E1:
	PHB
	LDA.b #!RAM_SMB3_Global_WindowHDMATable1>>16
	PHA
	PLB
	REP.b #$30
	LDX.w #$007E
	LDA.w #$0000
CODE_29F0EE:
	STA.w !RAM_SMB3_Global_WindowHDMATable1,x
	STA.w !RAM_SMB3_Global_WindowHDMATable1+$80,x
	STA.w !RAM_SMB3_Global_WindowHDMATable1+$0100,x
	STA.w !RAM_SMB3_Global_WindowHDMATable1+$0180,x
	DEX
	DEX
	BPL.b CODE_29F0EE
	PLB
	SEP.b #$20
	LDX.w #(!REGISTER_Window1LeftPositionDesignation&$0000FF<<8)+$41
	STX.w HDMA[$03].Parameters
	LDX.w #DATA_29F14C
	STX.w HDMA[$03].SourceLo
	LDA.b #DATA_29F14C>>16
	STA.w HDMA[$03].SourceBank
	LDA.b #!RAM_SMB3_Global_WindowHDMATable1>>16
	STA.w HDMA[$03].IndirectSourceBank
	LDA.b #$22
	STA.w !RAM_SMB3_Global_BG1And2WindowMaskSettingsMirror
	LDA.b #$02
	STA.w !RAM_SMB3_Global_BG3And4WindowMaskSettingsMirror
	LDA.w !RAM_SMB3_Global_ObjectAndColorWindowSettingsMirror
	ORA.b #$33
	STA.w !RAM_SMB3_Global_ObjectAndColorWindowSettingsMirror
	LDA.w !RAM_SMB3_Global_MainScreenWindowMaskMirror
	STA.w $0287
	LDA.w !RAM_SMB3_Global_SubScreenWindowMaskMirror
	STA.w $0288
	LDA.w !RAM_SMB3_Global_MainScreenLayersMirror
	STA.w !RAM_SMB3_Global_MainScreenWindowMaskMirror
	LDA.w !RAM_SMB3_Global_SubScreenLayersMirror
	STA.w !RAM_SMB3_Global_SubScreenWindowMaskMirror
	SEP.b #$10
	LDA.w !RAM_SMB3_Global_HDMAEnableMirror
	ORA.b #$08
	STA.w !RAM_SMB3_Global_HDMAEnableMirror
	RTS

DATA_29F14C:
	db $F8 : dw !RAM_SMB3_Global_WindowHDMATable1
	db $F8 : dw !RAM_SMB3_Global_WindowHDMATable1+$F0
	db $00

;--------------------------------------------------------------------

CODE_29F153:
	PHB
	LDA.b #!RAM_SMB3_Global_WindowHDMATable1>>16
	PHA
	PLB
	REP.b #$30
	LDX.w #$01A0
CODE_29F15D:
	LDA.w #$00FF
	STA.w !RAM_SMB3_Global_WindowHDMATable1,x
	STA.w !RAM_SMB3_Global_WindowHDMATable1+$02,x
	STA.w !RAM_SMB3_Global_WindowHDMATable1+$04,x
	STA.w !RAM_SMB3_Global_WindowHDMATable1+$06,x
	STA.w !RAM_SMB3_Global_WindowHDMATable1+$08,x
	STA.w !RAM_SMB3_Global_WindowHDMATable1+$0A,x
	STA.w !RAM_SMB3_Global_WindowHDMATable1+$0C,x
	STA.w !RAM_SMB3_Global_WindowHDMATable1+$0E,x
	STA.w !RAM_SMB3_Global_WindowHDMATable1+$10,x
	STA.w !RAM_SMB3_Global_WindowHDMATable1+$12,x
	STA.w !RAM_SMB3_Global_WindowHDMATable1+$14,x
	STA.w !RAM_SMB3_Global_WindowHDMATable1+$16,x
	STA.w !RAM_SMB3_Global_WindowHDMATable1+$18,x
	STA.w !RAM_SMB3_Global_WindowHDMATable1+$1A,x
	STA.w !RAM_SMB3_Global_WindowHDMATable1+$1C,x
	STA.w !RAM_SMB3_Global_WindowHDMATable1+$1E,x
	TXA
	SEC
	SBC.w #$0020
	TAX
	BPL.b CODE_29F15D
	SEP.b #$30
	PLB
	RTS

if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
%FREE_BYTES(NULLROM, 1664, $FF)
elseif !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR]
%FREE_BYTES(NULLROM, 1636-6, $FF)
else
%FREE_BYTES(NULLROM, 1636, $FF)
endif

;--------------------------------------------------------------------

SMB3_NorSpr018_Bowser_Status01:
.Main:
;$29F800
	LDA.b #$22
	STA.w !RAM_SMB3_Level_NorSpr_FireballHPCounter,x
	INC.w $1FF9,x
	RTL

;--------------------------------------------------------------------

SMB3_NorSpr018_Bowser_Status02:
.Main:
;$29F809
	LDA.b $9C
	BNE.b CODE_29F851
	LDA.w $0520,x
	BEQ.b CODE_29F816
	JSL.l CODE_27DF2F
CODE_29F816:
	LDA.w $1A63
	BEQ.b CODE_29F81E
	DEC.w $1A63
CODE_29F81E:
	LDA.w $1A64
	AND.b #$1F
	BEQ.b CODE_29F828
	DEC.w $1A64
CODE_29F828:
	JSR.w CODE_29F864
	JSR.w CODE_29FA82
	JSL.l CODE_279B70
	LDA.w $0797,x
	BEQ.b CODE_29F851
	LDA.b #$08
	STA.w $0520,x
	LDA.b !RAM_SMB3_Level_Player_YSpeed
	BMI.b CODE_29F851
	LDA.b #$D0
	STA.b !RAM_SMB3_Level_Player_YSpeed
	JSR.w CODE_29FD18
	LDA.w DATA_21C8A7,y
	STA.b $8B
	LDA.b #!Define_SMAS_Sound0060_HitHead
	STA.w !RAM_SMB3_Global_SoundCh1
CODE_29F851:
	LDA.b !RAM_SMB3_NorSpr018_Bowser_CurrentState,x
	BEQ.b CODE_29F85E
	JSR.w CODE_29FC2A
	LDA.b !RAM_SMB3_NorSpr018_Bowser_CurrentState,x
	CMP.b #$01
	BEQ.b CODE_29F863
CODE_29F85E:
	LDA.b #$FF
	STA.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,x
CODE_29F863:
	RTL

CODE_29F864:
	LDA.b !RAM_SMB3_NorSpr018_Bowser_CurrentState,x
	JSL.l SMB3_ExecutePtr_Absolute

DATA_29F86A:
	dw CODE_29F876
	dw CODE_29F8AB
	dw CODE_29FD5E
	dw CODE_29FDC3
	dw CODE_29FDDA
	dw CODE_29FDE9

CODE_29F876:
	LDA.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,x
	BNE.b CODE_29F8AA
	LDA.w $0210
	CMP.b #$07
	BCS.b CODE_29F8AA
	LDA.b #$00
	STA.w $0210
	STA.b !RAM_SMB3_Level_Player_XSpeed
	LDA.b $A6
	BNE.b CODE_29F8AA
	LDA.b #$EF
	STA.w $0216
	LDA.b #!Define_SMB3_LevelMusic_BowserBattle
	STA.w !RAM_SMB3_Global_MusicCh1
	INC.w !RAM_SMB3_Level_DisableScrollingFlag
	LDA.b #$02
	STA.w $0424
	LDA.b #$03
	STA.b !RAM_SMB3_NorSpr018_Bowser_CurrentAttackState,x
	LDA.b #$30
	STA.w !RAM_SMB3_NorSpr018_Bowser_AttackPhaseTimer,x
	INC.b !RAM_SMB3_NorSpr018_Bowser_CurrentState,x
CODE_29F8AA:
	RTS

CODE_29F8AB:
	JSR.w CODE_29FD28
	LDA.w $0565
	AND.b #$1F
	ORA.w $1A63
	BNE.b CODE_29F8CA
	LDA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	PHA
	JSR.w CODE_29FA78
	PLA
	CMP.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	BEQ.b CODE_29F8CA
	ORA.b #$13
	STA.w $1A64
CODE_29F8CA:
	LDA.b !RAM_SMB3_NorSpr018_Bowser_CurrentAttackState,x
	JSL.l SMB3_ExecutePtr_Absolute

DATA_29F8D0:
	dw CODE_29F8D8
	dw CODE_29F964
	dw CODE_29F9E8
	dw CODE_29FA1A

CODE_29F8D8:
	JSR.w CODE_29FB22
	LDA.w $1A64
	AND.b #$1F
	BEQ.b CODE_29F8F5
	LSR
	LSR
	AND.b #$07
	TAY
	LDA.w $1A64
	AND.b #$40
	EOR.w DATA_21C8BE,y
	STA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	LDA.w DATA_21C8B9,y
CODE_29F8F5:
	STA.w !RAM_SMB3_NorSpr018_Bowser_AnimationFrame,x
	LDA.w $0518,x
	BNE.b CODE_29F91F
	JSR.w CODE_29FB3B
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	CMP.b #$40
	BPL.b CODE_29F908
	INC.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_29F908:
	LDA.b $A7,x
	AND.b #$04
	BEQ.b CODE_29F91E
	JSL.l CODE_278B67
	LDA.b #$10
	LDY.w !RAM_SMB3_NorSpr018_Bowser_AttackPhaseTimer,x
	BNE.b CODE_29F91B
	LDA.b #$B0
CODE_29F91B:
	STA.w $0518,x
CODE_29F91E:
	RTS

CODE_29F91F:
	LDA.w $1A64
	AND.b #$1F
	BNE.b CODE_29F929
	INC.w !RAM_SMB3_NorSpr018_Bowser_AnimationFrame,x
CODE_29F929:
	LDA.w $0518,x
	CMP.b #$01
	BEQ.b CODE_29F95F
	CMP.b #$80
	BNE.b CODE_29F95E
	LDA.b #$01
	STA.b !RAM_SMB3_NorSpr018_Bowser_CurrentAttackState,x
	LDA.b #$A0
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	JSR.w CODE_29FD18
	STY.b $00
	LDA.b $0F
	BPL.b CODE_29F949
	JSL.l SMB3_UnnecessaryInvertARt_Main
CODE_29F949:
	LSR
	LSR
	LSR
	LSR
	AND.b #$0F
	TAY
	LDA.w DATA_21C8A9,y
	LDY.b $00
	DEY
	BNE.b CODE_29F95C
	JSL.l SMB3_UnnecessaryInvertARt_Main
CODE_29F95C:
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_29F95E:
	RTS

CODE_29F95F:
	LDA.b #$F0
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	RTS

CODE_29F964:
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	BPL.b CODE_29F96B
	JSR.w CODE_29FB22
CODE_29F96B:
	LDA.b #$00
	STA.w !RAM_SMB3_NorSpr018_Bowser_AnimationFrame,x
	JSR.w CODE_29FB3B
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	BMI.b CODE_29F97B
	CMP.b #$50
	BCS.b CODE_29F981
CODE_29F97B:
	INC.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	INC.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	INC.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_29F981:
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	BPL.b CODE_29F989
	CMP.b #$E0
	BCC.b CODE_29F9B6
CODE_29F989:
	JSR.w CODE_29FD18
	LDA.w DATA_21C8C3,y
	EOR.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	BPL.b CODE_29F9B6
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_Y
	DEY
	BEQ.b CODE_29F9B6
	LDA.b #$02
	STA.b !RAM_SMB3_NorSpr018_Bowser_CurrentAttackState,x
	LDA.b #$0A
	STA.w $0518,x
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	CLC
	ADC.b #$08
	AND.b #$F0
	STA.w $0776,x
	LDA.b #$E0
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	LDA.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	RTS

CODE_29F9B6:
	LDA.b $A7,x
	AND.b #$04
	BEQ.b CODE_29F9E7
	JSL.l CODE_278B67
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	LDA.b #$2C
	STA.w !RAM_SMB3_Level_ShakeLayer1Timer
	LDA.b #!Define_SMAS_Sound0063_BulletShoot
	STA.w !RAM_SMB3_Global_SoundCh3
	LDA.b #$0C
	STA.w $0520,x
	LDA.b #$35
	STA.w $0518,x
	LDA.w !RAM_SMB3_Global_RandomByte02,x
	AND.b #$1F
	ADC.b #$67
	STA.w !RAM_SMB3_NorSpr018_Bowser_AttackPhaseTimer,x
	STA.w $1021,x
	LDA.b #$03
	STA.b !RAM_SMB3_NorSpr018_Bowser_CurrentAttackState,x
CODE_29F9E7:
	RTS

CODE_29F9E8:
	LDA.b #$00
	STA.w $1A63
	LDA.b #$06
	STA.w !RAM_SMB3_NorSpr018_Bowser_AnimationFrame,x
	LDA.w $0518,x
	BEQ.b CODE_29FA07
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	CMP.w $0776,x
	BEQ.b CODE_29FA06
	INC.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	BCC.b CODE_29FA06
	DEC.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	DEC.b !RAM_SMB3_Level_NorSpr_XPosLo,x
CODE_29FA06:
	RTS

CODE_29FA07:
	JSR.w CODE_29FB3B
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	BMI.b CODE_29FA12
	CMP.b #$70
	BCS.b CODE_29FA17
CODE_29FA12:
	CLC
	ADC.b #$06
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_29FA17:
	JMP.w CODE_29F9B6

CODE_29FA1A:
	JSR.w CODE_29FB3B
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	CMP.b #$40
	BPL.b CODE_29FA27
	INC.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	INC.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_29FA27:
	JSR.w CODE_29FB8D
	LDA.b $A7,x
	AND.b #$04
	BEQ.b CODE_29FA34
	JSL.l CODE_278B67
CODE_29FA34:
	LDA.w $0518,x
	BEQ.b CODE_29FA3F
	LDA.b #$07
	STA.w !RAM_SMB3_NorSpr018_Bowser_AnimationFrame,x
	RTS

CODE_29FA3F:
	LDA.w !RAM_SMB3_NorSpr018_Bowser_AttackPhaseTimer,x
	BNE.b CODE_29FA53
	LDA.b #$00
	STA.b !RAM_SMB3_NorSpr018_Bowser_CurrentAttackState,x
	LDA.w !RAM_SMB3_Global_RandomByte02,x
	AND.b #$7F
	ORA.b #$80
	STA.w !RAM_SMB3_NorSpr018_Bowser_AttackPhaseTimer,x
	RTS

CODE_29FA53:
	CMP.b #$20
	BCC.b CODE_29FA6D
	LSR
	LSR
	CLC
	ADC.w $1021,x
	AND.b #$07
	TAY
	LDA.w DATA_21C8C5,y
	STA.w !RAM_SMB3_NorSpr018_Bowser_AnimationFrame,x
	LDA.w DATA_21C8CD,y
	STA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	RTS

CODE_29FA6D:
	CMP.b #$0C
	LDA.b #$05
	BCS.b CODE_29FA75
	LDA.b #$08
CODE_29FA75:
	STA.w !RAM_SMB3_NorSpr018_Bowser_AnimationFrame,x
CODE_29FA78:
	JSR.w CODE_29FD18
	LDA.w DATA_21C8D5,y
	STA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	RTS

CODE_29FA82:
	LDA.w $1A63
	BEQ.b CODE_29FA9E
	LSR
	LSR
	LSR
	LSR
	AND.b #$07
	TAY
	LDA.w DATA_21C8D7,y
	STA.w !RAM_SMB3_NorSpr018_Bowser_AnimationFrame,x
	LDA.w $1A63
	CMP.b #$10
	BNE.b CODE_29FA9E
	JSR.w CODE_29FA9F
CODE_29FA9E:
	RTS

CODE_29FA9F:
	LDY.b #$04
CODE_29FAA1:
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,y
	BEQ.b CODE_29FAAA
	DEY
	BPL.b CODE_29FAA1
	RTS

CODE_29FAAA:
	TYA
	TAX
	JSL.l CODE_279C97
	LDA.b #$02
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	LDA.b #!Define_SMB3_SpriteID_NorSpr075_BossProjectile
	STA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	LDA.b #$02
	STA.b $68,x
	LDA.b #$10
	STA.w !RAM_SMB3_Level_NorSpr_YSpeed,y
	LDX.b $9B
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	CLC
	ADC.b #$10
	STA.w !RAM_SMB3_Level_NorSpr_YPosLo,y
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	ADC.b #$00
	STA.w !RAM_SMB3_Level_NorSpr_YPosHi,y
	LDA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	ASL
	ASL
	ROL
	AND.b #$01
	TAX
	STX.b $00
	LDA.w DATA_21C8DF,x
	STA.w !RAM_SMB3_Level_NorSpr_XSpeed,y
	LDX.b $9B
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	STA.w !RAM_SMB3_Level_NorSpr_XPosHi,y
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	LDX.b $00
	CLC
	ADC.w DATA_21C8E1,x
	STA.w !RAM_SMB3_Level_NorSpr_XPosLo,y
	CMP.b #$F0
	BCC.b CODE_29FB05
	LDX.b $9B
	LDA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	BNE.b CODE_29FB05
	STA.w !RAM_SMB3_Level_NorSpr_XPosLo,y
CODE_29FB05:
	LDA.w !RAM_SMB3_Global_RandomByte02,y
	AND.b #$07
	TAX
	LDA.w DATA_21C8E3,x
	STA.w $077B,y
	LDA.b #$01
	STA.w $1FE9,y
	ASL
	STA.w $0518,y
	LDA.b #!Define_SMAS_Sound0060_BowserBreathFire
	STA.w !RAM_SMB3_Global_SoundCh1
	LDX.b $9B
	RTS

CODE_29FB22:
	LDA.w $1A65
	BNE.b CODE_29FB37
	LDA.w !RAM_SMB3_Global_RandomByte02,x
	AND.b #$3F
	ADC.b #$60
	STA.w $1A65
	LDA.b #$3F
	STA.w $1A63
	RTS

CODE_29FB37:
	DEC.w $1A65
	RTS

CODE_29FB3B:
	JSL.l CODE_27A7F0
	JSL.l CODE_27A7E5
	LDY.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	BEQ.b CODE_29FB59
	BMI.b CODE_29FB51
	CPY.b #$E0
	BCS.b CODE_29FB55
	BCC.b CODE_29FB59							; Note: This will always branch.

CODE_29FB51:
	CPY.b #$08
	BCS.b CODE_29FB59
CODE_29FB55:
	LDA.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_29FB59:
	JSL.l CODE_278B93
	LDA.b !RAM_SMB3_NorSpr018_Bowser_CurrentAttackState,x
	CMP.b #$02
	BNE.b CODE_29FB69
	LDA.w $1F76
	STA.w $1A61
CODE_29FB69:
	LDA.b $A7,x
	PHA
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	PHA
	CLC
	ADC.b #$10
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	JSL.l CODE_278B93
	PLA
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	PLA
	ORA.b $A7,x
	STA.b $A7,x
	LDA.b !RAM_SMB3_NorSpr018_Bowser_CurrentAttackState,x
	CMP.b #$02
	BNE.b CODE_29FB8C
	LDA.w $1F76
	STA.w $1A62
CODE_29FB8C:
	RTS

CODE_29FB8D:
	LDY.b #$01
CODE_29FB8F:
	LDA.w $1A61,y
	CMP.b #$9C
	BNE.b CODE_29FBC6
	LDA.b #$00
	STA.w $1A61,y
	LDA.b #$02
	STA.w $0564
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	CLC
	ADC.b #$30
	AND.b #$F0
	STA.w $052B
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	ADC.b #$00
	STA.w $052A
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	CLC
	ADC.w DATA_21C8EB,y
	AND.b #$F0
	STA.w $0529
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	ADC.b #$00
	STA.w $0528
	JMP.w CODE_29FBCA

CODE_29FBC6:
	DEY
	BPL.b CODE_29FB8F
	RTS

CODE_29FBCA:
	LDA.b #!Define_SMAS_Sound0063_Thunder
	STA.w !RAM_SMB3_Global_SoundCh3
	JSL.l CODE_279545
	LDA.b #$02
	STA.w !RAM_SMB3_Level_MExtSpr_SpriteID
	LDA.w $0543
	STA.b $D8
	LDA.w $0542
	STA.b $D9
	LDA.w $052A
	XBA
	LDA.w $052B
	REP.b #$20
	SEC
	SBC.b $D8
	STA.b $D8
	CLC
	ADC.w #$0008
	SEP.b #$20
	STA.w !RAM_SMB3_Level_MExtSpr_Table7E1FAB
	XBA
	STA.b !RAM_SMB3_Level_MExtSpr_Table7E00DF
	LDA.b $D8
	STA.w !RAM_SMB3_Level_MExtSpr_YPosLo
	LDA.b $D9
	STA.w !RAM_SMB3_Level_MExtSpr_Table7E1FB1
	LDA.w $0528
	XBA
	LDA.w $0529
	REP.b #$20
	SEC
	SBC.w $0210
	SEP.b #$20
	STA.w !RAM_SMB3_Level_MExtSpr_XPosLo
	XBA
	STA.w !RAM_SMB3_Level_MExtSpr_XPosHi
	LDA.b #$00
	STA.w !RAM_SMB3_Level_MExtSpr_Table7E1FA8
	STA.w !RAM_SMB3_Level_MExtSpr_Table7E1FAE
	LDA.b #$FA
	STA.w !RAM_SMB3_Level_MExtSpr_Table7E1FA5
	RTS

CODE_29FC2A:
	JSL.l SMB3_GetNormalSpriteOnScreenPosition_Main
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenYPos,x
	STA.b $00
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenXPos,x
	STA.b $01
	LDA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	STA.b $02
	STA.b $03
	LDA.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,x
	STA.b $04
	LDA.w !RAM_SMB3_Level_NorSpr_YOffscreenFlag,x
	STA.b $05
	LDY.w !RAM_SMB3_NorSpr018_Bowser_AnimationFrame,x
	CPY.b #$01
	BEQ.b CODE_29FC52
	CPY.b #$07
	BNE.b CODE_29FC59
CODE_29FC52:
	LDA.b $00
	CLC
	ADC.b #$04
	STA.b $00
CODE_29FC59:
	CPY.b #$08
	BEQ.b CODE_29FC70
	CPY.b #$04
	BEQ.b CODE_29FC65
	CPY.b #$06
	BCC.b CODE_29FC70
CODE_29FC65:
	LDA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	AND.b #$80
	STA.b $02
	ORA.b #$40
	STA.b $03
CODE_29FC70:
	LDA.w !RAM_SMB3_NorSpr018_Bowser_AnimationFrame,x
	ASL
	STA.b $0E
	ASL
	ADC.b $0E
	STA.b $0E
	STZ.b $0F
CODE_29FC7D:
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$01
	ASL
	STA.b $07
	ASL
	ADC.b $07
	CLC
	ADC.b $0F
	ASL
	TAY
	REP.b #$20
	LDA.w DATA_21C945,y
	STA.b $C6
	SEP.b #$20
	LDX.b $0F
	LDA.b $05
	AND.w DATA_21C93F,x
	BEQ.b CODE_29FCA1
	JMP.w CODE_29FD0A

CODE_29FCA1:
	LDA.b $0E
	CLC
	ADC.b $0F
	TAX
	LDA.w DATA_21C8ED,x
	REP.b #$10
	LDY.b $C6
	STA.w SMB3_OAMBuffer[$00].Tile,y
	SEP.b #$10
	LDX.b $0F
	LDA.b $02
	BPL.b CODE_29FCBE
	TXA
	CLC
	ADC.b #$06
	TAX
CODE_29FCBE:
	LDA.b $00
	CLC
	ADC.w DATA_21C92F,x
	REP.b #$10
	LDY.b $C6
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	SEP.b #$10
	LDX.b $0F
	TXA
	AND.b #$01
	ROR
	LDA.b $02
	BCC.b CODE_29FCD9
	LDA.b $03
CODE_29FCD9:
	ORA.b #$29
	REP.b #$10
	LDY.b $C6
	STA.w SMB3_OAMBuffer[$00].Prop,y
	SEP.b #$10
	LDA.b $02
	AND.b #$40
	BEQ.b CODE_29FCEF
	TXA
	CLC
	ADC.b #$06
	TAX
CODE_29FCEF:
	LDA.b $01
	CLC
	ADC.w DATA_21C923,x
	REP.b #$10
	LDY.b $C6
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	LDA.w #$0002
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	SEP.b #$30
CODE_29FD0A:
	INC.b $0F
	LDA.b $0F
	CMP.b #$06
	BEQ.b CODE_29FD15
	JMP.w CODE_29FC7D

CODE_29FD15:
	LDX.b $9B
	RTS

CODE_29FD18:
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	PHA
	CLC
	ADC.b #$08
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	PLA
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	RTS

CODE_29FD28:
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	CMP.b #$01
	BMI.b CODE_29FD34
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenYPos,x
	CMP.b #$88
	BCS.b CODE_29FD44
CODE_29FD34:
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	CMP.b #$02
	BEQ.b CODE_29FD5D
	LDA.b #$02
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	LDA.b #$D0
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_29FD44:
	LDA.b #$02
	STA.b !RAM_SMB3_NorSpr018_Bowser_CurrentState,x
	LSR
	STA.w $05F3
	LDA.b #$06
	STA.w !RAM_SMB3_NorSpr018_Bowser_AnimationFrame,x
	LDA.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	STA.w $1A63
	LDA.b #$30
	STA.w !RAM_SMB3_NorSpr018_Bowser_AttackPhaseTimer,x
CODE_29FD5D:
	RTS

CODE_29FD5E:
	LDY.w !RAM_SMB3_NorSpr018_Bowser_AttackPhaseTimer,x
	DEY
	BNE.b CODE_29FD6E
	LDA.b #$01
	STA.w $02D9
	LDA.b #!Define_SMB3_LevelMusic_BowserFell
	STA.w !RAM_SMB3_Global_MusicCh1
CODE_29FD6E:
	LDA.w !RAM_SMB3_Level_NorSpr_FireballHPCounter,x
	CMP.b #$01
	BPL.b CODE_29FD7C
	ASL.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	SEC
	ROR.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
CODE_29FD7C:
	JSL.l CODE_27A7E5
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	CMP.b #$25
	BPL.b CODE_29FD88
	INC.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_29FD88:
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	CMP.b #$04
	BMI.b CODE_29FDA9
	INC.b !RAM_SMB3_NorSpr018_Bowser_CurrentState,x
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$B0
else
	LDA.b #$D0
endif
	STA.w $0518,x
	LDA.b #$80
	STA.w !RAM_SMB3_Level_ShakeLayer1Timer
	LDA.b #!Define_SMAS_Sound0063_BulletShoot
	STA.w !RAM_SMB3_Global_SoundCh3
	LDA.b $A6
	BNE.b CODE_29FDA9
	LDA.b #$C0
	STA.b !RAM_SMB3_Level_Player_YSpeed
	INC.b $A6
CODE_29FDA9:
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	PHA
	CLC
	ADC.b #$10
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	PHA
	ADC.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	JSL.l SMB3_CheckIfSpriteIsVerticallyOffScreen_Main
	PLA
	STA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	PLA
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	RTS

CODE_29FDC3:
	LDA.w $0518,x
	BNE.b CODE_29FDD9
	LDA.b #!Define_SMB3_LevelMusic_WorldClear
	STA.w !RAM_SMB3_Global_MusicCh1
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$A8
else
	LDA.b #$00
endif
	STA.w $02E3
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$01
else
	LDA.b #$02
endif
	STA.w $02E4
	INC.b !RAM_SMB3_NorSpr018_Bowser_CurrentState,x
CODE_29FDD9:
	RTS

CODE_29FDDA:
	JSL.l CODE_278A17
	BNE.b CODE_29FDE8
	LDA.b #$30
	STA.l !RAM_SMB3_Level_PeachDoorOpenTimer
	INC.b !RAM_SMB3_NorSpr018_Bowser_CurrentState,x
CODE_29FDE8:
	RTS

CODE_29FDE9:
	LDA.l !RAM_SMB3_Level_PeachDoorOpenTimer
	BEQ.b CODE_29FE1E
	DEC
	STA.l !RAM_SMB3_Level_PeachDoorOpenTimer
	CMP.b #$10
	BNE.b CODE_29FE1D
	LDA.b #!Define_SMAS_Sound0060_PeachDoorOpen
	STA.w !RAM_SMB3_Global_SoundCh1
	LDA.b #!Define_SMB3_LevelMusic_StopMusicCommand
	STA.w !RAM_SMB3_Global_MusicCh1
	LDY.b #$01
CODE_29FE04:
	LDA.b #$01
	STA.w !RAM_SMB3_Level_MExtSpr_SpriteID,y
	LDA.w DATA_21C95D,y
	STA.w !RAM_SMB3_Level_MExtSpr_YPosLo,y
	LDA.w DATA_21C95F,y
	STA.w !RAM_SMB3_Level_MExtSpr_XPosLo,y
	LDA.b #$1F
	STA.w !RAM_SMB3_Level_MExtSpr_Table7E1FAE,y
	DEY
	BPL.b CODE_29FE04
CODE_29FE1D:
	RTS

CODE_29FE1E:
	REP.b #$10
	LDY.w #$0001
	LDX.w #$0080
CODE_29FE26:
	LDA.w DATA_21C95F,y
	STA.w SMB3_OAMBuffer[$00].XDisp,x
	LDA.w DATA_21C95D,y
	STA.w SMB3_OAMBuffer[$00].YDisp,x
	LDA.b #$6A
	STA.w SMB3_OAMBuffer[$00].Tile,x
	LDA.b #$23
	STA.w SMB3_OAMBuffer[$00].Prop,x
	PHX
	REP.b #$20
	TXA
	LSR
	LSR
	TAX
	SEP.b #$20
	LDA.b #$02
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,x
	PLX
	INX
	INX
	INX
	INX
	DEY
	BPL.b CODE_29FE26
	SEP.b #$10
	LDA.b $55
	BEQ.b CODE_29FE78
	LDA.b $5E
	SEC
	SBC.b #$E4
	CMP.b #$08
	BCS.b CODE_29FE78
	LDA.b $70
	CMP.b #$48
	BCC.b CODE_29FE78
	LDA.b !RAM_SMB3_Global_ControllerHold1
	AND.b #!Joypad_DPadU>>8
	BEQ.b CODE_29FE78
	STA.w !RAM_SMB3_Level_TriggerEndingFlag
	LDA.b #$00
	STA.w $0713
	INC.w $0014
CODE_29FE78:
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$0C
	LSR
	TAY
	REP.b #$20
	LDA.w DATA_21C963,y
	STA.l SMB3_PaletteMirror[$91].LowByte
	SEP.b #$20
	INC.w !RAM_SMB3_Global_UpdateEntirePaletteFlag
	LDX.b $9B
	RTS

;--------------------------------------------------------------------

CODE_29FE8F:
	PHB
	PHK
	PLB
	LDA.w $0691,x
	BEQ.b CODE_29FE9A
	DEC.w $0691,x
CODE_29FE9A:
	REP.b #$10
	STZ.b $DD
	LDY.b $C6,x
	STZ.b $D8
	LDA.w $0669,x
	BNE.b CODE_29FEB9
	LDA.b #$F0
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	STA.w SMB3_OAMBuffer[$01].YDisp,y
	STA.w SMB3_OAMBuffer[$02].YDisp,y
	STA.w SMB3_OAMBuffer[$03].YDisp,y
	SEP.b #$10
	PLB
	RTL

CODE_29FEB9:
	CMP.b #$07
	BEQ.b CODE_29FEC1
	LDA.b #$0C
	STA.b $DD
CODE_29FEC1:
	LDA.w $0691,x
	BNE.b CODE_29FECB
	LDA.b #$17
	STA.w $0691,x
CODE_29FECB:
	AND.b #$F8
	LSR
	CLC
	ADC.b $DD
	PHX
	XBA
	LDA.b #$00
	XBA
	TAX
	LDA.w DATA_29FF6C,x
	STA.w SMB3_OAMBuffer[$00].Tile,y
	LDA.w DATA_29FF6C+$01,x
	STA.w SMB3_OAMBuffer[$01].Tile,y
	LDA.w DATA_29FF6C+$02,x
	STA.w SMB3_OAMBuffer[$02].Tile,y
	PLX
	LDA.b $5F,x
	STA.b $D8
	LDA.b $44,x
	STA.b $D9
	REP.b #$20
	LDA.w $0679,x
	AND.w #$0040
	BNE.b CODE_29FF01
	LDA.w #$0010
	BRA.b CODE_29FF04

CODE_29FF01:
	LDA.w #$FFF8
CODE_29FF04:
	STA.b $DA
	LDA.b $D8
	SEC
	SBC.w $0210
	STA.b $D8
	CLC
	ADC.b $DA
	STA.b $DA
	SEP.b #$20
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	STA.w SMB3_OAMBuffer[$02].XDisp,y
	LDA.b $D8
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	LDA.b $71,x
	SEC
	SBC.w $0216
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	STA.w SMB3_OAMBuffer[$01].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$02].YDisp,y
	LDA.b #$F0
	STA.w SMB3_OAMBuffer[$03].YDisp,y
	LDA.w $0679,x
	AND.b #$40
	ORA.b #$23
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$01].Prop,y
	STA.w SMB3_OAMBuffer[$02].Prop,y
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b $D9
	BEQ.b CODE_29FF57
	LDA.b #$03
	BRA.b CODE_29FF59

CODE_29FF57:
	LDA.b #$02
CODE_29FF59:
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	LDA.b $DB
	BEQ.b CODE_29FF62
	LDA.b #$01
CODE_29FF62:
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$02].Slot,y
	SEP.b #$10
	PLB
	RTL

DATA_29FF6C:
	db $88,$8A,$9A
	db $00,$8B,$8D
	db $9D,$00,$8E
	db $A8,$B8,$00
	db $A9,$AB,$BB
	db $00,$AC,$AE
	db $BE,$00,$68
	db $AF,$BF,$00

%FREE_BYTES(NULLROM, 124, $FF)

;--------------------------------------------------------------------

%BANK_END(<EndBank>)
endmacro

;#############################################################################################################
;#############################################################################################################

macro SMB3Bank2AMacros(StartBank, EndBank)
%BANK_START(<StartBank>)

SMB3_HandleSlidingPictureBGWinningAnimations:
.Main:
;$2A8000
	LDA.w !RAM_SMB3_SlidingPictureGame_CurrentState
	CMP.b #$04
	BCC.b CODE_2A8018
	PHB
	PHK
	PLB
	PHX
	INC.w $034A
	LDA.w $034B
	ASL
	TAX
	JSR.w (DATA_2A8019,x)
	PLX
	PLB

CODE_2A8018:
	RTL

DATA_2A8019:
	dw CODE_2A801D
	dw CODE_2A8083

;--------------------------------------------------------------------

CODE_2A801D:
	LDA.w $034A
	AND.b #$07
	BNE.b CODE_2A804E
	REP.b #$20
	LDA.w $034A
	AND.w #$0018
	ASL
	STA.b $00
	LDA.w !RAM_SMB3_SlidingPictureGame_TopRowImage
	AND.w #$000F
	ASL
	ORA.b $00
	TAX
	LDA.w DATA_2A80C5,x
	STA.b $00
	INC
	STA.b $04
	LDA.w DATA_2A80CD,x
	STA.b $02
	INC
	STA.b $06
	JSR.w CODE_2A817E
	SEP.b #$20
CODE_2A804E:
	LDA.w $034A
	CMP.b #$18
	BNE.b CODE_2A8082
	REP.b #$20
	LDA.w !RAM_SMB3_SlidingPictureGame_TopRowImage
	AND.w #$000F
	ASL
	TAX
	LDA.w DATA_2A82B2,x
	STA.b $0A
	LDA.w #$00FC
	STA.b $00
	STA.b $04
	LDA.w #$00FC
	STA.b $02
	STA.b $06
	LDA.w DATA_2A8105,x
	STA.b $08
	JSR.w CODE_2A8287
	SEP.b #$20
	STZ.w $034A
	INC.w $034B
CODE_2A8082:
	RTS

;--------------------------------------------------------------------

CODE_2A8083:
	LDA.w $034A
	AND.b #$07
	BNE.b CODE_2A80C4
	LDA.w $034A
	AND.b #$18
	ASL
	STA.b $00
	LDA.w !RAM_SMB3_SlidingPictureGame_TopRowImage
	ASL
	ADC.b $00
	TAY
	LDA.w $034A
	AND.b #$60
	LSR
	LSR
	LSR
	LSR
	TAX
	REP.b #$20
	LDA.w DATA_2A82B2,x
	STA.b $0A
	LDA.w DATA_2A80C5,y
	STA.b $00
	INC
	STA.b $04
	LDA.w DATA_2A80CD,y
	STA.b $02
	INC
	STA.b $06
	LDA.w DATA_2A8105,x
	STA.b $08
	JSR.w CODE_2A8287
	SEP.b #$20
CODE_2A80C4:
	RTS

DATA_2A80C5:
	dw $00FC,$00FC,$00FC,$00FC

DATA_2A80CD:
	dw $00FC,$00FC,$00FC,$00FC,$0997,$0599,$0997,$09A3
	dw $4997,$4599,$4997,$49A3,$099A,$059C,$099A,$099E
	dw $499A,$459C,$499A,$499E,$09A5,$05A7,$09A5,$09A9
	dw $49A5,$45A7,$49A5,$49A9

DATA_2A8105:
	dw $0006,$0005,$0006,$0007

;--------------------------------------------------------------------

CODE_2A810D:
	PHB
	PHK
	PLB
	PHX
	PHY
	REP.b #$20
	LDX.b #$80
	STX.w !REGISTER_VRAMAddressIncrementValue
	LDA.w #$00FC
	STA.b $00
	STA.b $04
	LDA.w #$00FC
	STA.b $02
	STA.b $06
	JSR.w CODE_2A817E
	LDA.w !RAM_SMB3_SlidingPictureGame_TopRowImage
	AND.w #$000F
	ASL
	TAX
	LDA.w DATA_2A8156,x
	STA.b $00
	LDY.b #$00
CODE_2A8139:
	LDA.w DATA_2A82BA,y
	STA.w !REGISTER_VRAMAddressLo
	LDA.b $00
	STA.w !REGISTER_WriteToVRAMPortLo
	INY
	INY
	CPY.b #$30
	BNE.b CODE_2A8139
	SEP.b #$20
	PLY
	PLX
	PLB
	STZ.w $034A
	STZ.w $034B
	RTL

DATA_2A8156:
	dw $09AB,$09AC,$09AB,$09AD

;--------------------------------------------------------------------

DATA_2A815E:
	dw DATA_2ABBF2
	dw DATA_2ABBFC
	dw DATA_2ABBE6
	dw DATA_2ABBFC
	dw DATA_2ABBF2
	dw DATA_2ABBFC
	dw DATA_2ABBE6
	dw DATA_2ABBF2

DATA_2A816E:
	dw $0005,$0006,$0005,$0006

DATA_2A8176:
	dw $0007,$0007,$0007,$0005

CODE_2A817E:
	LDA.w !RAM_SMB3_SlidingPictureGame_TopRowImage
	AND.w #$000F
	ASL
	TAY
	ASL
	TAX
	LDA.w DATA_2A815E,x
	STA.b $0A
	LDA.w DATA_2A816E,y
	STA.b $08
	PHY
	JSR.w CODE_2A8287
	PLY
	LDA.w DATA_2A815E+$02,x
	STA.b $0A
	LDA.w DATA_2A8176,y
	STA.b $08
	JSR.w CODE_2A8287
	RTS

;--------------------------------------------------------------------

CODE_2A81A5:
	PHB
	PHK
	PLB
	STZ.w !REGISTER_VRAMAddressIncrementValue
	REP.b #$20
	LDA.w #$00FC
	STA.b $00
	LDA.w #$1000
	STA.w !REGISTER_VRAMAddressLo
	LDA.w #(!REGISTER_WriteToVRAMPortLo&$0000FF<<8)+$08
	STA.w DMA[$00].Parameters
	LDA.w #$0000
	STA.w DMA[$00].SourceLo
	STZ.w DMA[$00].SourceBank
	LDA.w #$1000
	STA.w DMA[$00].SizeLo
	LDY.b #$01
	STY.w !REGISTER_DMAEnable
	LDX.b #$80
	STX.w !REGISTER_VRAMAddressIncrementValue
	STA.w DMA[$00].SizeLo
	LDA.w #$1000
	STA.w !REGISTER_VRAMAddressLo
	LDA.w #(!REGISTER_WriteToVRAMPortHi&$0000FF<<8)+$08
	STA.w DMA[$00].Parameters
	LDA.w #$0001
	STA.w DMA[$00].SourceLo
	STY.w !REGISTER_DMAEnable
	LDA.w DATA_2A82B2
	STA.b $0A
	LDA.w #$09A5
	STA.b $00
	INC
	STA.b $04
	LDA.w #$49A5
	STA.b $02
	INC
	STA.b $06
	LDA.w #$0006
	STA.b $08
	JSR.w CODE_2A8287
	LDA.w DATA_2A82B4
	STA.b $0A
	LDA.w #$05A7
	STA.b $00
	INC
	STA.b $04
	LDA.w #$45A7
	STA.b $02
	INC
	STA.b $06
	LDA.w #$0005
	STA.b $08
	JSR.w CODE_2A8287
	LDA.w DATA_2A82B8
	STA.b $0A
	LDA.w #$09A9
	STA.b $00
	INC
	STA.b $04
	LDA.w #$49A9
	STA.b $02
	INC
	STA.b $06
	LDA.w #$0007
	STA.b $08
	JSR.w CODE_2A8287
	LDA.w #$09AE
	STA.b $02
	LDA.w #$09AF
	STA.b $04
	LDY.b #$00
CODE_2A8252:
	LDA.w #$09AB
	STA.b $00
CODE_2A8257:
	LDA.w DATA_2A82BA,y
	STA.w !REGISTER_VRAMAddressLo
	LDA.b $00
	STA.w !REGISTER_WriteToVRAMPortLo
	LDA.b $02
	STA.w !REGISTER_WriteToVRAMPortLo
	LDA.b $04
	STA.w !REGISTER_WriteToVRAMPortLo
	INY
	INY
	CPY.b #$30
	BEQ.b CODE_2A8283
	TYA
	AND.w #$0002
	BNE.b CODE_2A8257
	INC.b $00
	LDA.b $00
	CMP.w #$09AE
	BNE.b CODE_2A8257
	BRA.b CODE_2A8252

CODE_2A8283:
	SEP.b #$20
	PLB
	RTL

;--------------------------------------------------------------------

CODE_2A8287:
	LDY.b #$00
CODE_2A8289:
	LDA.b ($0A),y
	STA.w !REGISTER_VRAMAddressLo
	LDA.b $00
	STA.w !REGISTER_WriteToVRAMPortLo
	LDA.b $02
	STA.w !REGISTER_WriteToVRAMPortLo
	LDA.b ($0A),y
	CLC
	ADC.w #$0020
	STA.w !REGISTER_VRAMAddressLo
	LDA.b $04
	STA.w !REGISTER_WriteToVRAMPortLo
	LDA.b $06
	STA.w !REGISTER_WriteToVRAMPortLo
	INY
	INY
	DEC.b $08
	BNE.b CODE_2A8289
	RTS

DATA_2A82B2:
	dw DATA_2ABBE6

DATA_2A82B4:
	dw DATA_2ABBF2

UNK_2A82B6:
	dw DATA_2ABBE6

DATA_2A82B8:
	dw DATA_2ABBFC

DATA_2A82BA:
	dw $1076,$1283,$122B,$1294,$1146,$1177,$1476,$1683
	dw $162B,$1694,$1546,$1577,$1876,$1A83,$1A2B,$1A94
	dw $1946,$1977,$1C76,$1E83,$1E2B,$1E94,$1D46,$1D77

;--------------------------------------------------------------------

SMB3_ProcessLoadingLetters:
	LDA.b #$80
	STA.w !REGISTER_VRAMAddressIncrementValue
	REP.b #$20
	LDA.w #$6800
	STA.w !REGISTER_VRAMAddressLo
	LDA.w #(!REGISTER_WriteToVRAMPortLo&$0000FF<<8)+$01
	STA.w DMA[$00].Parameters
	LDA.w #SMB3_Bank47Graphics_Sprite_LoadingLetters
	STA.w DMA[$00].SourceLo
	LDX.b #SMB3_Bank47Graphics_Sprite_LoadingLetters>>16
	STX.w DMA[$00].SourceBank
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR]
	LDA.w #SMB3_Bank47Graphics_Sprite_LoadingLettersEnd-SMB3_Bank47Graphics_Sprite_LoadingLetters
else
	LDA.w #$1000
endif
	STA.w DMA[$00].SizeLo
	LDX.b #$01
	STX.w !REGISTER_DMAEnable
	SEP.b #$20

	LDA.b #$0F
	STA.b !RAM_SMB3_Global_ScreenDisplayRegisterMirror
	LDA.w !RAM_SMB3_Level_Player_CurrentCharacter
	STA.w $1A80
	LDA.w !RAM_SMB3_Overworld_Load2PlayerBattleFlag
	AND.b #$02
	BEQ.b CODE_2A832F

	LDX.b !RAM_SMB3_Global_CurrentlyProcessedMap16TileLo
	CPX.b #$BC
	BEQ.b CODE_2A832F
	STA.w $1A80
CODE_2A832F:
	JSL.l SMB3_ResetSpriteOAMRt_Main
	JSL.l SMB3_DrawLoadingLetters_Main
	RTL

;--------------------------------------------------------------------

CODE_2A8338:
	LDA.w $0706
	AND.b #$0F
	STA.b $02
CODE_2A833F:
	LDY.w $0700
	LDA.b #$BA
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	INY
	LDA.b #$BB
	STA.b [$2E],y
	JSL.l CODE_2AB73A
	LDA.w $0700
	CLC
	ADC.b #$10
	STA.w $0700
	LDA.b $2F
	ADC.b #$00
	STA.b $2F
	DEC.b $02
	BNE.b CODE_2A833F
	REP.b #$20
	LDA.b $2E
	STA.b $D8
	SEP.b #$20
	LDA.b $30
	STA.b $DA
	LDY.w $0700
	LDA.b #$02
	STA.b [$D8],y
	JSR.w CODE_2A8AD2
	INY
	LDA.b $D9
	SEC
	SBC.b #$20
	STA.b $D9
	LDA.b #$03
	STA.b [$D8],y
	JSR.w CODE_2A8AD2
	RTL

;--------------------------------------------------------------------

CODE_2A838C:
	LDY.w $0700
	LDA.b #$E2
	STA.b [$2E],y
	RTL

;--------------------------------------------------------------------

CODE_2A8394:
	PHB
	PHK
	PLB
	LDA.b $30
	STA.b $DA
	REP.b #$20
	LDA.b $2E
	CLC
	ADC.w #$2000
	STA.b $D8
	SEP.b #$20
	LDA.w $0700
	STA.b $03
	LDX.b #$00
CODE_2A83AE:
	LDY.b $03
	LDA.w DATA_2A83DB,x
	CMP.b #$80
	BEQ.b CODE_2A83C5
	CMP.b #$FF
	BEQ.b CODE_2A83D9
	STA.b [$2E],y
	AND.b #$F0
	BNE.b CODE_2A83C5
	LDA.b #$01
	STA.b [$D8],y
CODE_2A83C5:
	INX
	INC.b $03
	LDA.b $03
	AND.b #$07
	BNE.b CODE_2A83AE
	LDA.b $03
	AND.b #$F0
	CLC
	ADC.b #$10
	STA.b $03
	BRA.b CODE_2A83AE

CODE_2A83D9:
	PLB
	RTL

DATA_2A83DB:
	db $80,$80,$80,$90,$91,$80,$80,$80
	db $80,$80,$80,$94,$92,$91,$80,$80
	db $80,$80,$80,$94,$03,$95,$80,$80
	db $80,$80,$90,$93,$03,$95,$80,$80
	db $80,$90,$93,$98,$03,$95,$80,$80
	db $90,$93,$98,$92,$93,$92,$91,$80
	db $94,$92,$02,$03,$98,$03,$92,$91
	db $94,$03,$98,$03,$92,$93,$03,$95
	db $FF

;--------------------------------------------------------------------

CODE_2A841C:
	RTL

;--------------------------------------------------------------------

; Todo: Unknown routine.

CODE_2A841D:
	PHB
	LDA.b #!RAM_SMB3_Global_WindowHDMATable2>>16
	PHA
	PLB
	LDA.l $000249
	AND.b #$FE
	TAX
	LDY.b #$00
	REP.b #$20
	LDA.w #$001F
	STA.b $00
	LDA.l $000212
	STA.b $02
CODE_2A8438:
	LDA.l DATA_2ABC0A,x
	CLC
	ADC.b $02
	STA.w !RAM_SMB3_Global_WindowHDMATable2,y
	STA.w !RAM_SMB3_Global_WindowHDMATable2+$40,y
	STA.w !RAM_SMB3_Global_WindowHDMATable2+$80,y
	STA.w !RAM_SMB3_Global_WindowHDMATable2+$C0,y
	STA.w !RAM_SMB3_Global_WindowHDMATable2+$0100,y
	STA.w !RAM_SMB3_Global_WindowHDMATable2+$0140,y
	STA.w !RAM_SMB3_Global_WindowHDMATable2+$0180,y
	STA.w !RAM_SMB3_Global_WindowHDMATable2+$01C0,y
	INX
	INX
	INY
	INY
	DEC.b $00
	BPL.b CODE_2A8438
	SEP.b #$20
	PLB
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$03
	BNE.b CODE_2A846E
	INC.w $0249
	INC.w $0249
CODE_2A846E:
	LDA.w !RAM_SMB3_Global_HDMAEnableMirror
	ORA.b #$80
	STA.w !RAM_SMB3_Global_HDMAEnableMirror
	RTL

;--------------------------------------------------------------------

DATA_2A8477:
	db $55,$56,$56,$56,$56,$57

DATA_2A847D:
	db $5B,$5C,$5C,$5C,$5C,$5D

CODE_2A8483:
	PHB
	PHK
	PLB
	LDX.b #$00
	LDY.w $0700
	LDA.b $30
	STA.b $DA
CODE_2A848F:
	REP.b #$20
	LDA.b $2E
	CLC
	ADC.w #$0010
	STA.b $D8
	SEP.b #$20
	LDA.w DATA_2A8477,x
	STA.b [$2E],y
	LDA.w DATA_2A847D,x
	STA.b [$D8],y
	JSL.l CODE_23BEBB
	INX
	CPX.b #$06
	BNE.b CODE_2A848F
	PLB
	RTL

;--------------------------------------------------------------------

; Note: Something related to the ending (when the curtain falls).

CODE_2A84B0:
	LDA.w $0350
	BEQ.b CODE_2A84EA
	STZ.w $0249
	LDA.b #$B0
	STA.w $024B
	LDA.b #$1A
	STA.w $0612
	STZ.b $D8
	STZ.b $D9
CODE_2A84C6:
	JSR.w CODE_2A8518
	INC.w $0249
	LDA.w $0249
	AND.b #$01
	BNE.b CODE_2A84E3
	LDA.w $024B
	CLC
	ADC.b #$10
	STA.w $024B
	AND.b #$F0
	BNE.b CODE_2A84E3
	INC.w $024B
CODE_2A84E3:
	DEC.w $0612
	BNE.b CODE_2A84C6
	BRA.b CODE_2A8513

CODE_2A84EA:
	REP.b #$20
	LDX.b #$00
	LDA.w #$00FF
CODE_2A84F1:
	STA.l $7F2000,x
	STA.l $7F2100,x
	STA.l $7F2200,x
	STA.l $7F2300,x
	STA.l $7F2400,x
	STA.l $7F2500,x
	STA.l $7F2600,x
	DEX
	DEX
	BNE.b CODE_2A84F1
	SEP.b #$20
CODE_2A8513:
	STZ.b $D8
	STZ.b $D9
	RTL

CODE_2A8518:
	PHB
	PHK
	PLB
	LDA.w $0249
	AND.b #$01
	STA.b $C2
	LDA.w $0350
	ASL
	CLC
	ADC.w $0350
	TAY
	LDA.w DATA_2AB546-$01,y
	STA.b $08
	REP.b #$20
	LDA.w DATA_2AB546-$03,y
	STA.b $06
	SEP.b #$20
	LDA.b #$7F0000>>16
	STA.b $0F
	REP.b #$20
	STZ.b $0D
	LDA.w #$0010
	STA.b $00
	LDA.w $024B
	AND.w #$00F0
	STA.b $09
	REP.b #$10
	LDA.w $024B
	AND.w #$0001
	BEQ.b CODE_2A8560
	LDA.b $0D
	CLC
	ADC.w #$0100
	STA.b $0D
CODE_2A8560:
	LDX.b $D8
	LDY.b $09
	LDA.b [$0D],y
	AND.w #$00FF
	ASL
	ASL
	ASL
	TAY
	LDA.b $C2
	AND.w #$00FF
	BEQ.b CODE_2A8576
	INY
	INY
CODE_2A8576:
	LDA.b [$06],y
	STA.l $7F2000,x
	INY
	INY
	INY
	INY
	LDA.b [$06],y
	STA.l $7F2002,x
	INC.b $09
	INC.b $D8
	INC.b $D8
	INC.b $D8
	INC.b $D8
	DEC.b $00
	BNE.b CODE_2A8560
	SEP.b #$30
	PLB
	RTS

;--------------------------------------------------------------------

CODE_2A8598:
	PHB
	PHK
	PLB
	REP.b #$20
	LDA.b $2E
	STA.b $D8
	LDA.w #$0010
	STA.b $DB
	SEP.b #$20
	LDA.b $30
	STA.b $DA
	LDA.w $0706
	AND.b #$0F
	TAX
	LDY.w $0700
	LDA.w DATA_2A85CB,x
	STA.b [$D8],y
	JSR.w CODE_2A8AD2
	JSR.w CODE_2A86F5
	INX
	LDA.w DATA_2A85CB,x
	STA.b [$D8],y
	JSR.w CODE_2A8AD2
	PLB
	RTL

DATA_2A85CB:
	db $02,$03,$04,$05

;--------------------------------------------------------------------

CODE_2A85CF:
	PHB
	PHK
	PLB
	LDA.b [!RAM_SMB3_Level_LevelDataPtrLo]
	TAX
	REP.b #$20
	INC.b !RAM_SMB3_Level_LevelDataPtrLo
	LDA.b $2E
	STA.b $D8
	LDA.w #$0001
	STA.b $DB
	SEP.b #$20
	LDA.b $30
	STA.b $DA
	LDA.w $0706
	AND.b #$0F
	STA.b $03
	LDY.w $0700
	TXA
	BEQ.b CODE_2A8648
	CPX.b #$04
	BNE.b CODE_2A8615
	REP.b #$20
	DEC.b $D8
	DEC.b $D8
	SEP.b #$20
	LDA.b #$48
	STA.b [$D8],y
	REP.b #$20
	INC.b $D8
	SEP.b #$20
	LDA.b #$48
	STA.b [$D8],y
	REP.b #$20
	INC.b $D8
	SEP.b #$20
CODE_2A8615:
	LDA.w DATA_2A8668-$01,x
	STA.b [$D8],y
	JSR.w CODE_2A8AD2
	JSR.w CODE_2A86F5
	DEC.b $03
	LDA.b #$02
	STA.b $02
	JSR.w CODE_2A8655
	LDA.w DATA_2A866D,x
	STA.b [$D8],y
	JSR.w CODE_2A8AD2
	JSR.w CODE_2A86F5
	CPX.b #$04
	BNE.b CODE_2A8653
	LDA.b #$48
	STA.b [$D8],y
	REP.b #$20
	INC.b $D8
	SEP.b #$20
	LDA.b #$48
	STA.b [$D8],y
	BRA.b CODE_2A8653

CODE_2A8648:
	LDA.b #$10
	STA.b $DB
	LDA.b #$07
	STA.b $02
	JSR.w CODE_2A8655
CODE_2A8653:
	PLB
	RTL

CODE_2A8655:
	LDA.b $03
	BEQ.b CODE_2A8667
	LDA.b $02
	STA.b [$D8],y
	JSR.w CODE_2A8AD2
	JSR.w CODE_2A86F5
	DEC.b $03
	BRA.b CODE_2A8655

CODE_2A8667:
	RTS

DATA_2A8668:
	db $03,$03,$06,$08,$0B

DATA_2A866D:
	db $08,$04,$05,$04,$09,$09,$0A

;--------------------------------------------------------------------

CODE_2A8674:
	PHB
	PHK
	PLB
	LDA.b [!RAM_SMB3_Level_LevelDataPtrLo]
	STA.b $03
	STA.b $DD
	REP.b #$20
	INC.b !RAM_SMB3_Level_LevelDataPtrLo
	LDA.b $2E
	STA.b $D8
	SEP.b #$20
	LDA.b $30
	STA.b $DA
	LDA.w $0706
	AND.b #$0F
	TAX
	LDA.w DATA_2A86D5,x
	STA.b $DB
	STZ.b $DC
	STZ.b $02
	TXA
	BNE.b CODE_2A86A7
	LDA.b [!RAM_SMB3_Level_LevelDataPtrLo]
	STA.b $02
	REP.b #$20
	INC.b !RAM_SMB3_Level_LevelDataPtrLo
	SEP.b #$20
CODE_2A86A7:
	LDY.w $0700
CODE_2A86AA:
	LDA.w DATA_2A86E5,x
	STA.b [$D8],y
	JSR.w CODE_2A8AD2
	JSR.w CODE_2A86F5
	DEC.b $03
	BNE.b CODE_2A86AA
	LDA.b $02
	BEQ.b CODE_2A86D3
	DEC.b $02
	REP.b #$20
	LDA.b $2E
	CLC
	ADC.w #$0010
	STA.b $2E
	STA.b $D8
	SEP.b #$20
	LDA.b $DD
	STA.b $03
	BRA.b CODE_2A86AA

CODE_2A86D3:
	PLB
	RTL

DATA_2A86D5:
	db $01,$0F,$01,$11,$10,$10,$11,$01
	db $0F,$0F,$11,$11,$0F,$01,$01,$01

DATA_2A86E5:
	db $13,$14,$15,$16,$17,$18,$19,$1A
	db $1B,$1C,$1D,$1E,$1F,$20,$21,$22

;--------------------------------------------------------------------

CODE_2A86F5:
	REP.b #$20
	LDA.b $D8
	SEC
	SBC.w #$2000
	CLC
	ADC.b $DB
	STA.b $D8
	SEP.b #$20
	RTS

;--------------------------------------------------------------------

CODE_2A8705:
	PHB
	PHK
	PLB
	LDA.b $00
	PHA
	LDA.b $01
	PHA
	PHX
	LDA.b $30
	STA.b $DA
	STA.b $DD
	REP.b #$20
	LDA.b $2E
	STA.b $D8
	CLC
	ADC.w #$2000
	STA.b $DB
	SEP.b #$20
	LDX.b #$00
CODE_2A8725:
	JSR.w CODE_2A8761
	LDA.b [$D8],y
	CMP.b #$9C
	BEQ.b CODE_2A8755
	CMP.b #$E4
	BEQ.b CODE_2A8755
	LDA.w DATA_2A875E,x
	STA.b [$D8],y
	CPX.b #$02
	BEQ.b CODE_2A873E
	INX
	BRA.b CODE_2A8725

CODE_2A873E:
	JSR.w CODE_2A8761
	LDA.b [$D8],y
	CMP.b #$9C
	BEQ.b CODE_2A8755
	CMP.b #$E4
	BEQ.b CODE_2A8755
	LDA.b #$04
	STA.b [$D8],y
	LDA.b #$01
	STA.b [$DB],y
	BRA.b CODE_2A873E

CODE_2A8755:
	PLX
	PLA
	STA.b $01
	PLA
	STA.b $00
	PLB
	RTL

DATA_2A875E:
	db $06,$07,$08

CODE_2A8761:
	REP.b #$20
	LDA.b $D8
	SEC
	SBC.w #$0010
	STA.b $D8
	LDA.b $DB
	SEC
	SBC.w #$0010
	STA.b $DB
	SEP.b #$20
	RTS

;--------------------------------------------------------------------

CODE_2A8776:
	REP.b #$20
	LDA.b $2E
	SEC
	SBC.w #$0010
	STA.b $D8
	SEP.b #$20
	LDA.b $30
	STA.b $DA
	LDA.b [$D8],y
	CMP.b #$AB
	BNE.b CODE_2A8793
	LDA.b #$0B
	STA.b [$D8],y
	JSR.w CODE_2A8AD2
CODE_2A8793:
	RTL

;--------------------------------------------------------------------

CODE_2A8794:
	REP.b #$20
	LDA.b $2E
	CLC
	ADC.w #$0010
	STA.b $D8
	SEP.b #$20
	LDA.b $30
	STA.b $DA
	LDA.b [$D8],y
	CMP.b #$9A
	BNE.b CODE_2A87B1
	LDA.b #$0D
	STA.b [$D8],y
	JSR.w CODE_2A8AD2
CODE_2A87B1:
	RTL

;--------------------------------------------------------------------

CODE_2A87B2:
	PHY
	LDA.b $30
	STA.b $DA
	REP.b #$20
	LDA.b $2E
	CLC
	ADC.w #$000F
	STA.b $D8
	TYA
	AND.w #$00FF
	BNE.b CODE_2A87CF
	LDA.b $D8
	SEC
	SBC.w #$01A0
	STA.b $D8
CODE_2A87CF:
	SEP.b #$20
	LDA.b [$D8],y
	CMP.b #$AA
	BNE.b CODE_2A87E5
	LDA.b $D8
	SEC
	SBC.b #$10
	STA.b $D8
	LDA.b #$06
	STA.b [$D8],y
	JSR.w CODE_2A8AD2
CODE_2A87E5:
	REP.b #$20
	LDA.b $2E
	SEC
	SBC.w #$0010
	STA.b $D8
	SEP.b #$20
	INY
	TYA
	AND.b #$0F
	BNE.b CODE_2A8803
	REP.b #$20
	LDA.b $D8
	CLC
	ADC.w #$01A0
	STA.b $D8
	SEP.b #$20
CODE_2A8803:
	LDA.b [$D8],y
	CMP.b #$A8
	BNE.b CODE_2A881C
	REP.b #$20
	LDA.b $D8
	CLC
	ADC.w #$0010
	STA.b $D8
	SEP.b #$20
	LDA.b #$02
	STA.b [$D8],y
	JSR.w CODE_2A8AD2
CODE_2A881C:
	PLY
	RTL

;--------------------------------------------------------------------

CODE_2A881E:
	PHY
	REP.b #$20
	LDA.b $2E
	SEC
	SBC.w #$0010
	STA.b $D8
	SEP.b #$20
	LDA.b $30
	STA.b $DA
	LDA.b [$D8],y
	CMP.b #$A8
	BEQ.b CODE_2A8840
	CMP.b #$34
	BEQ.b CODE_2A8840
	LDA.b #$05
	STA.b [$D8],y
	JSR.w CODE_2A8AD2
CODE_2A8840:
	PLY
	RTL

;--------------------------------------------------------------------

DATA_2A8842:
	db $06,$0C

CODE_2A8844:
	PHB
	PHK
	PLB
	PHX
	PHY
	LDA.b $30
	STA.b $DA
	REP.b #$20
	LDA.b $2E
	SEC
	SBC.w #$0010
	STA.b $D8
	SEP.b #$20
	LDA.b [$D8],y
	CMP.b #$AA
	BEQ.b CODE_2A886B
	CMP.b #$A9
	BEQ.b CODE_2A886B
	LDA.w DATA_2A8842,x
	STA.b [$D8],y
	JSR.w CODE_2A8AD2
CODE_2A886B:
	PLY
	PLX
	PLB
	RTL

;--------------------------------------------------------------------

CODE_2A886F:
	PHX
	PHY
	LDA.b [$2E],y
	CMP.b #$A6
	BNE.b CODE_2A88C0
	LDA.b $30
	STA.b $DA
	REP.b #$20
	LDA.b $2E
	PHA
	CLC
	ADC.w #$0011
	STA.b $D8
	PLA
	CLC
	ADC.w #$000F
	STA.b $DB
	TYA
	AND.w #$000F
	BNE.b CODE_2A88A3
	LDA.b $D8
	CLC
	ADC.w #$01A0
	STA.b $D8
	LDA.b $DB
	CLC
	ADC.w #$01A0
	STA.b $DB
CODE_2A88A3:
	SEP.b #$20
	LDA.b [$D8],y
	CMP.b #$A8
	BNE.b CODE_2A88C0
	REP.b #$20
	LDA.b $D8
	SEC
	SBC.w #$0010
	STA.b $D8
	SEP.b #$20
	LDA.b #$05
	STA.b [$D8],y
	JSR.w CODE_2A8AD2
	BRA.b CODE_2A88E5

CODE_2A88C0:
	REP.b #$20
	LDA.b $DB
	STA.b $D8
	SEP.b #$20
	LDA.b [$D8],y
	CMP.b #$AA
	BEQ.b CODE_2A88D2
	CMP.b #$BF
	BNE.b CODE_2A88E5
CODE_2A88D2:
	REP.b #$20
	LDA.b $D8
	SEC
	SBC.w #$0010
	STA.b $D8
	SEP.b #$20
	LDA.b #$06
	STA.b [$D8],y
	JSR.w CODE_2A8AD2
CODE_2A88E5:
	PLY
	PLX
	RTL

;--------------------------------------------------------------------

CODE_2A88E8:
	PHY
	LDA.b $30
	STA.b $DA
	REP.b #$20
	LDA.b $2E
	STA.b $D8
	SEP.b #$20
	TYA
	CLC
	ADC.b #$0F
	TAY
	AND.b #$F0
	BNE.b CODE_2A8900
	INC.b $D9
CODE_2A8900:
	LDA.b [$D8],y
	CMP.b #$9A
	BEQ.b CODE_2A890E
	CMP.b #$99
	BEQ.b CODE_2A890E
	CMP.b #$E3
	BNE.b CODE_2A8927
CODE_2A890E:
	INY
	TYA
	AND.b #$0F
	BNE.b CODE_2A8920
	REP.b #$20
	LDA.b $D8
	CLC
	ADC.w #$01A0
	STA.b $D8
	SEP.b #$20
CODE_2A8920:
	LDA.b #$02
	STA.b [$D8],y
	JSR.w CODE_2A8AD2
CODE_2A8927:
	PLY
	RTL

;--------------------------------------------------------------------

DATA_2A8929:
	db $0A,$04,$08

CODE_2A892C:
	PHB
	PHK
	PLB
	PHY
	PHX
	LDA.b $30
	STA.b $DA
	STA.b $DD
	REP.b #$20
	LDA.b $2E
	STA.b $D8
	SEC
	SBC.w #$000F
	STA.b $DB
	TYA
	AND.w #$000F
	BNE.b CODE_2A8951
	LDA.b $D8
	SEC
	SBC.w #$01A0
	STA.b $D8
CODE_2A8951:
	LDA.b $D8
	SEC
	SBC.w #$0011
	STA.b $D8
	SEP.b #$20
	LDX.b #$00
	LDA.b [$D8],y
	CMP.b #$9F
	BEQ.b CODE_2A8981
	CMP.b #$27
	BEQ.b CODE_2A8983
	CMP.b #$35
	BEQ.b CODE_2A8983
	CMP.b #$36
	BEQ.b CODE_2A8983
	CMP.b #$E4
	BEQ.b CODE_2A8982
	CMP.b #$F8
	BEQ.b CODE_2A8982
	CMP.b #$9B
	BEQ.b CODE_2A8982
	CMP.b #$AA
	BEQ.b CODE_2A8982
	BRA.b CODE_2A8997

CODE_2A8981:
	INX
CODE_2A8982:
	INX
CODE_2A8983:
	REP.b #$20
	LDA.b $D8
	CLC
	ADC.w #$0010
	STA.b $D8
	SEP.b #$20
	LDA.w DATA_2A8929,x
	STA.b [$D8],y
	JSR.w CODE_2A8AD2
CODE_2A8997:
	LDA.b [$DB],y
	CMP.b #$A8
	BEQ.b CODE_2A89A1
	CMP.b #$F6
	BNE.b CODE_2A89BC
CODE_2A89A1:
	REP.b #$20
	LDA.b $DB
	CLC
	ADC.w #$0010
	STA.b $DB
	SEP.b #$20
	LDA.b #$02
	STA.b [$DB],y
	LDA.b $DC
	CLC
	ADC.b #$20
	STA.b $DC
	LDA.b #$01
	STA.b [$DB],y
CODE_2A89BC:
	TYA
	CLC
	ADC.b #$10
	TAY
	LDA.b [$2E],y
	CMP.b #$02
	BEQ.b CODE_2A89CB
	CMP.b #$04
	BNE.b CODE_2A89D3
CODE_2A89CB:
	JSL.l CODE_2AB73A
	LDA.b #$AB
	STA.b [$2E],y
CODE_2A89D3:
	PLX
	PLY
	PLB
	RTL

;--------------------------------------------------------------------

DATA_2A89D7:
	db $0A,$04,$04

DATA_2A89DA:
	db $08,$0A

CODE_2A89DC:
	PHB
	PHK
	PLB
	PHX
	PHY
	REP.b #$20
	LDA.b $2E
	STA.b $D8
	SEP.b #$20
	LDA.b $30
	STA.b $DA
	REP.b #$20
	INY
	TYA
	AND.w #$000F
	BNE.b CODE_2A89FE
	LDA.b $D8
	CLC
	ADC.w #$01A0
	STA.b $D8
CODE_2A89FE:
	SEP.b #$20
	LDA.b [$D8],y
	CMP.b #$C2
	BNE.b CODE_2A8A0E
	DEY
	LDA.b #$03
	STA.b [$D8],y
	JSR.w CODE_2A8AD2
CODE_2A8A0E:
	PLY
	PLX
	PHX
	PHY
	LDA.b [$2E],y
	CMP.b #$9F
	BEQ.b CODE_2A8A50
	REP.b #$20
	LDA.b $2E
	STA.b $D8
	SEP.b #$20
	TYA
	AND.b #$0F
	BNE.b CODE_2A8A31
	REP.b #$20
	LDA.b $D8
	SEC
	SBC.w #$01A0
	STA.b $D8
	SEP.b #$20
CODE_2A8A31:
	DEY
	LDA.b [$D8],y
	CMP.b #$26
	BEQ.b CODE_2A8A50
	CMP.b #$33
	BEQ.b CODE_2A8A50
	CMP.b #$9A
	BEQ.b CODE_2A8A50
	CMP.b #$E3
	BEQ.b CODE_2A8A50
	CMP.b #$0D
	BEQ.b CODE_2A8A50
	LDA.w DATA_2A89D7,x
	STA.b [$D8],y
	JSR.w CODE_2A8AD2
CODE_2A8A50:
	PLY
	PHY
	LDA.b [$2E],y
	CMP.b #$9B
	BEQ.b CODE_2A8A5E
	CMP.b #$E4
	BEQ.b CODE_2A8A5E
	CMP.b #$9F
CODE_2A8A5E:
	BNE.b CODE_2A8AA8
	REP.b #$20
	LDA.b $2E
	CLC
	ADC.w #$0010
	STA.b $D8
	SEP.b #$20
	INY
	TYA
	AND.b #$0F
	BNE.b CODE_2A8A7E
	REP.b #$20
	LDA.b $D8
	CLC
	ADC.w #$01A0
	STA.b $D8
	SEP.b #$20
CODE_2A8A7E:
	LDX.b #$03
	LDA.b [$D8],y
	CMP.b #$E3
	BEQ.b CODE_2A8A9D
	CMP.b #$9A
	BNE.b CODE_2A8AA8
	TYA
	AND.b #$0F
	BNE.b CODE_2A8A9B
	REP.b #$20
	LDA.b $D8
	SEC
	SBC.w #$01A0
	STA.b $D8
	SEP.b #$20
CODE_2A8A9B:
	BRA.b CODE_2A8A9F

CODE_2A8A9D:
	LDX.b #$02
CODE_2A8A9F:
	DEY
	LDA.w DATA_2A89D7,x
	STA.b [$D8],y
	JSR.w CODE_2A8AD2
CODE_2A8AA8:
	TYA
	AND.b #$0F
	BNE.b CODE_2A8AB9
	REP.b #$20
	LDA.b $D8
	SEC
	SBC.w #$01A0
	STA.b $D8
	SEP.b #$20
CODE_2A8AB9:
	DEY
	LDA.b [$2E],y
	CMP.b #$9F
	BNE.b CODE_2A8ACE
	LDA.b [$D8],y
	CMP.b #$86
	BNE.b CODE_2A8ACE
	LDA.w DATA_2A89DA
	STA.b [$D8],y
	JSR.w CODE_2A8AD2
CODE_2A8ACE:
	PLY
	PLX
	PLB
	RTL

;--------------------------------------------------------------------

CODE_2A8AD2:
	LDA.b $D9
	CLC
	ADC.b #$20
	STA.b $D9
	LDA.b #$01
	STA.b [$D8],y
	RTS

;--------------------------------------------------------------------

DATA_2A8ADE:
	db $09,$02,$02,$07

CODE_2A8AE2:
	PHB
	PHK
	PLB
	PHX
	PHY
	REP.b #$20
	LDA.b $2E
	STA.b $D8
	STA.b $DB
	SEP.b #$20
	LDA.b $30
	STA.b $DA
	STA.b $DD
	TYA
	CLC
	ADC.b #$10
	TAY
	AND.b #$F0
	BNE.b CODE_2A8B02
	INC.b $D9
CODE_2A8B02:
	LDA.b [$D8],y
	CMP.b #$9A
	BEQ.b CODE_2A8B18
	CMP.b #$A8
	BEQ.b CODE_2A8B18
	CMP.b #$F6
	BEQ.b CODE_2A8B18
	LDA.w DATA_2A8ADE,x
	STA.b [$D8],y
	JSR.w CODE_2A8AD2
CODE_2A8B18:
	PLY
	PHY
	TYA
	AND.b #$0F
	BNE.b CODE_2A8B2B
	REP.b #$20
	LDA.b $DB
	SEC
	SBC.w #$01A0
	STA.b $DB
	SEP.b #$20
CODE_2A8B2B:
	DEY
	LDA.b [$DB],y
	CMP.b #$C2
	BNE.b CODE_2A8B47
	PLY
	PHY
	LDA.b #$12
	STA.b [$2E],y
	REP.b #$30
	TYA
	ORA.w #$2000
	TAY
	SEP.b #$20
	LDA.b #$01
	STA.b [$2E],y
	SEP.b #$10
CODE_2A8B47:
	PLY
	PLX
	PLB
	RTL

;--------------------------------------------------------------------

CODE_2A8B4B:
	REP.b #$20
	LDA.w #$1000
	XBA
	STA.w SMB3_StripeImageUploadTable[$00].LowByte
	LDA.w #$40BE
	XBA
	STA.w SMB3_StripeImageUploadTable[$01].LowByte
	LDA.w #$30FB
	STA.w SMB3_StripeImageUploadTable[$02].LowByte
	LDA.w #$FFFF
	STA.w SMB3_StripeImageUploadTable[$03].LowByte
	SEP.b #$20
	JSR.w CODE_2A8C9A
	REP.b #$20
	LDA.w #$1300
	XBA
	STA.w SMB3_StripeImageUploadTable[$00].LowByte
	LDA.w #$403E
	XBA
	STA.w SMB3_StripeImageUploadTable[$01].LowByte
	SEP.b #$20
	JSR.w CODE_2A8C9A
	REP.b #$20
	LDA.w #$1060
	XBA
	STA.w SMB3_StripeImageUploadTable[$00].LowByte
	LDA.w #$003F
	XBA
	STA.w SMB3_StripeImageUploadTable[$01].LowByte
	LDX.b #$40
	LDA.w #$04D9
CODE_2A8B96:
	STA.w SMB3_StripeImageUploadTable[$02].LowByte,x
	DEX
	DEX
	BPL.b CODE_2A8B96
	LDA.w #$04E7
	STA.w SMB3_StripeImageUploadTable[$11].LowByte
	LDA.w #$04E8
	STA.w SMB3_StripeImageUploadTable[$12].LowByte
	LDA.w #$FFFF
	STA.w SMB3_StripeImageUploadTable[$22].LowByte
	SEP.b #$20
	JSR.w CODE_2A8C9A
	REP.b #$20
	LDA.w #$12E0
	XBA
	STA.w SMB3_StripeImageUploadTable[$00].LowByte
	LDX.b #$40
	LDA.w #$04E5
CODE_2A8BC2:
	STA.w SMB3_StripeImageUploadTable[$02].LowByte,x
	DEX
	DEX
	BPL.b CODE_2A8BC2
	LDA.w #$04E9
	STA.w SMB3_StripeImageUploadTable[$11].LowByte
	LDA.w #$04EA
	STA.w SMB3_StripeImageUploadTable[$12].LowByte
	LDA.w #$FFFF
	STA.w SMB3_StripeImageUploadTable[$22].LowByte
	SEP.b #$20
	JSR.w CODE_2A8C9A
	REP.b #$20
	LDA.w #$1000
	XBA
	STA.w SMB3_StripeImageUploadTable[$00].LowByte
	LDA.w #$C02E
	XBA
	STA.w SMB3_StripeImageUploadTable[$01].LowByte
	LDA.w #$30FB
	STA.w SMB3_StripeImageUploadTable[$02].LowByte
	LDA.w #$FFFF
	STA.w SMB3_StripeImageUploadTable[$03].LowByte
	SEP.b #$20
	JSR.w CODE_2A8C9A
	LDA.b #$10
	STA.w SMB3_StripeImageUploadTable[$00].LowByte
	LDA.b #$1F
	STA.w SMB3_StripeImageUploadTable[$00].HighByte
	JSR.w CODE_2A8C9A
	REP.b #$20
	LDA.w #$1061
	XBA
	STA.w SMB3_StripeImageUploadTable[$00].LowByte
	LDA.w #$8029
	XBA
	STA.w SMB3_StripeImageUploadTable[$01].LowByte
	LDA.w #$24D8
	STA.w SMB3_StripeImageUploadTable[$02].LowByte
	LDA.w #$24DB
	LDX.b #$24
CODE_2A8C29:
	STA.w SMB3_StripeImageUploadTable[$03].LowByte,x
	DEX
	DEX
	BPL.b CODE_2A8C29
	LDA.w #$24EB
	STA.w SMB3_StripeImageUploadTable[$0B].LowByte
	LDA.w #$24EC
	STA.w SMB3_StripeImageUploadTable[$0C].LowByte
	LDA.w #$24ED
	STA.w SMB3_StripeImageUploadTable[$0D].LowByte
	LDA.w #$24E4
	STA.w SMB3_StripeImageUploadTable[$16].LowByte
	LDA.w #$FFFF
	STA.w SMB3_StripeImageUploadTable[$17].LowByte
	SEP.b #$20
	JSR.w CODE_2A8C9A
	REP.b #$20
	LDA.w #$107E
	XBA
	STA.w SMB3_StripeImageUploadTable[$00].LowByte
	LDA.w #$24DA
	STA.w SMB3_StripeImageUploadTable[$02].LowByte
	LDA.w #$24E3
	LDX.b #$24
CODE_2A8C67:
	STA.w SMB3_StripeImageUploadTable[$03].LowByte,x
	DEX
	DEX
	BPL.b CODE_2A8C67
	LDA.w #$24EE
	STA.w SMB3_StripeImageUploadTable[$0B].LowByte
	LDA.w #$24F0
	STA.w SMB3_StripeImageUploadTable[$0C].LowByte
	LDA.w #$24F1
	STA.w SMB3_StripeImageUploadTable[$0D].LowByte
	LDA.w #$24E6
	STA.w SMB3_StripeImageUploadTable[$16].LowByte
	SEP.b #$20
	JSR.w CODE_2A8C9A
	STZ.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	STZ.w !RAM_SMB3_Global_StripeImageUploadIndexHi
	LDA.b #$FF
	STA.w SMB3_StripeImageUploadTable[$00].LowByte
	STA.w SMB3_StripeImageUploadTable[$00].HighByte
	RTL

CODE_2A8C9A:
	REP.b #$20
	LDA.w #$001602
	STA.b !RAM_SMB3_Global_StripeImageDataLo
	LDX.b #$001602>>16
	STX.b !RAM_SMB3_Global_StripeImageDataBank
	SEP.b #$20
	JSL.l SMB3_UploadStripeImage_Main
	RTS

;--------------------------------------------------------------------

CODE_2A8CAC:
	PHB
	LDA.b #$7F0000>>16
	PHA
	PLB
	REP.b #$30
	LDX.w #$01AE
CODE_2A8CB6:
	STZ.w $7F0000,x
	STZ.w $7F01B0,x
	STZ.w $7F0360,x
	STZ.w $7F0510,x
	STZ.w $7F06C0,x
	STZ.w $7F0870,x
	STZ.w $7F0A20,x
	STZ.w $7F0BD0,x
	STZ.w $7F0D80,x
	DEX
	DEX
	BPL.b CODE_2A8CB6
	SEP.b #$30
	PLB
	RTS

;--------------------------------------------------------------------

CODE_2A8CD9:
	STA.l $7F0000,x
	STA.l $7F0360,x
	STA.l $7F06C0,x
	STA.l $7F0A20,x
	STA.l $7F0D80,x
	RTS

;--------------------------------------------------------------------

CODE_2A8CEE:
	STA.l $7F0010,x
	STA.l $7F0370,x
	STA.l $7F06D0,x
	STA.l $7F0A30,x
	STA.l $7F0D90,x
	RTS

;--------------------------------------------------------------------

CODE_2A8D03:
	PHB
	LDY.b #$7F0000>>16
	PHY
	PLB
	STA.w $7F0000,x
	STA.w $7F01B0,x
	STA.w $7F0360,x
	STA.w $7F0510,x
	STA.w $7F06C0,x
	STA.w $7F0870,x
	STA.w $7F0A20,x
	STA.w $7F0BD0,x
	STA.w $7F0D80,x
	PLB
	RTS

;--------------------------------------------------------------------

CODE_2A8D25:
	PHB
	LDY.b #$7F0100>>16
	PHY
	PLB
	STA.w $7F0100,x
	STA.w $7F02B0,x
	STA.w $7F0460,x
	STA.w $7F0610,x
	STA.w $7F07C0,x
	STA.w $7F0970,x
	STA.w $7F0B20,x
	STA.w $7F0CD0,x
	STA.w $7F0E80,x
	PLB
	RTS

;--------------------------------------------------------------------

	%ROUTINE_SMB3_BufferBGTilemap(NULLROM)					; $2A8D47

;--------------------------------------------------------------------

CODE_2A8E54:
	PHA
	ROL
	ROL
	ROL
	ROL
	AND.b #$07
	STA.b $04
	PLA
	AND.b #$1F
	XBA
	INY
	LDA.b [!RAM_SMB3_Level_BGDataPtrLo],y
	REP.b #$20
	LSR
	LSR
	LSR
	LSR
	STA.b $00
	SEP.b #$20
	LDA.b [!RAM_SMB3_Level_BGDataPtrLo],y
	AND.b #$0F
	BEQ.b CODE_2A8E88
	STA.b $02
	STZ.b $03
	REP.b #$20
CODE_2A8E7A:
	LDA.b $00
	CLC
	ADC.w #$01B0
	STA.b $00
	DEC.b $02
	BNE.b CODE_2A8E7A
	SEP.b #$20
CODE_2A8E88:
	INY
	LDA.b [!RAM_SMB3_Level_BGDataPtrLo],y
	AND.b #$0F
	STA.b $D8
	STZ.b $D9
	LDA.b [!RAM_SMB3_Level_BGDataPtrLo],y
	AND.b #$F0
	LSR
	LSR
	LSR
	TAX
	STZ.b $DA
	STZ.b $DB
	LDA.b $04
	BEQ.b CODE_2A8EA6
	INY
	LDA.b [!RAM_SMB3_Level_BGDataPtrLo],y
	STA.b $DA
CODE_2A8EA6:
	REP.b #$20
	LDA.b $04
	AND.w #$00FF
	BEQ.b CODE_2A8EB1
	INC.b !RAM_SMB3_Level_BGDataPtrLo
CODE_2A8EB1:
	INC.b !RAM_SMB3_Level_BGDataPtrLo
	INC.b !RAM_SMB3_Level_BGDataPtrLo
	INC.b !RAM_SMB3_Level_BGDataPtrLo
	SEP.b #$20
	RTS

;--------------------------------------------------------------------

CODE_2A8EBA:
	SEP.b #$10
	LDY.b #$00
	LDX.b #$70
CODE_2A8EC0:
	LDA.b #$15
	JSR.w CODE_2A8D25
	INX
	TXA
	AND.b #$0F
	BNE.b CODE_2A8EC0
CODE_2A8ECB:
	LDA.b #$15
	JSR.w CODE_2A8D25
	INX
	TXA
	AND.b #$0F
	BNE.b CODE_2A8ECB
	REP.b #$10
	LDX.w #$0170
	LDA.b #$20
	JSR.w CODE_2A8CD9
	INX
	LDA.b #$23
	JSR.w CODE_2A8CD9
	INX
	JSR.w CODE_2A8CD9
	INX
	JSR.w CODE_2A8CD9
	INX
	JSR.w CODE_2A8CD9
	INX
	LDA.b #$21
	JSR.w CODE_2A8CD9
	INX
	LDA.b #$0F
	JSR.w CODE_2A8CD9
	LDX.w #$0324
	JSR.w CODE_2A8CD9
	SEP.b #$10
CODE_2A8F06:
	LDY.b #$00
	LDA.b [!RAM_SMB3_Level_BGDataPtrLo],y
	CMP.b #$FF
	BEQ.b CODE_2A8F16
	JSR.w CODE_2A8E54
	JSR.w (DATA_2A8F18,x)
	BRA.b CODE_2A8F06

CODE_2A8F16:
	PLB
	RTL

DATA_2A8F18:
	dw CODE_2A8F1E
	dw CODE_2A8F58
	dw CODE_2A8F78

CODE_2A8F1E:
	REP.b #$10
	LDX.b $00
	LDA.b #$11
	JSR.w CODE_2A8CD9
	LDA.b #$16
	JSR.w CODE_2A8CEE
	LDA.b $D8
	BEQ.b CODE_2A8F4A
CODE_2A8F30:
	INX
	LDA.b #$19
	JSR.w CODE_2A8CD9
	LDA.b #$1C
	JSR.w CODE_2A8CEE
	INX
	LDA.b #$1A
	JSR.w CODE_2A8CD9
	LDA.b #$1D
	JSR.w CODE_2A8CEE
	DEC.b $D8
	BNE.b CODE_2A8F30
CODE_2A8F4A:
	INX
	LDA.b #$12
	JSR.w CODE_2A8CD9
	LDA.b #$17
	JSR.w CODE_2A8CEE
	SEP.b #$10
	RTS

CODE_2A8F58:
	REP.b #$10
	LDX.b $00
	LDA.b #$25
	JSR.w CODE_2A8CD9
	LDA.b $D8
	BEQ.b CODE_2A8F6F
CODE_2A8F65:
	INX
	LDA.b #$26
	JSR.w CODE_2A8CD9
	DEC.b $D8
	BNE.b CODE_2A8F65
CODE_2A8F6F:
	INX
	LDA.b #$27
	JSR.w CODE_2A8CD9
	SEP.b #$10
	RTS

CODE_2A8F78:
	LDA.b #DATA_2A900F>>16
	STA.b $08
	STA.b $0B
	STA.b $0E
	REP.b #$30
	LDX.b $D8
	LDA.w DATA_2A8FF3,x
	STA.b $06
	LDA.w DATA_2A9001,x
	STA.b $09
	LDA.w DATA_2A900F,x
	STA.b $0C
	SEP.b #$20
	LDA.w DATA_2A8FE5,x
	STA.b $0F
	LDX.b $00
	LDY.w #$0000
	LDA.b [$0C]
	STA.b $02
	STZ.b $04
	STZ.b $05
CODE_2A8FA7:
	LDA.b [$06],y
	JSR.w CODE_2A8CD9
	INY
	INX
	TXA
	AND.b #$0F
	BNE.b CODE_2A8FBD
	REP.b #$20
	TXA
	CLC
	ADC.w #$01A0
	TAX
	SEP.b #$20
CODE_2A8FBD:
	DEC.b $02
	BNE.b CODE_2A8FA7
	DEC.b $0F
	BEQ.b CODE_2A8FE2
	PHY
	REP.b #$20
	LDA.b $04
	ASL
	TAY
	LDA.b $00
	CLC
	ADC.b [$09],y
	STA.b $00
	SEP.b #$20
	INC.b $04
	LDY.b $04
	LDA.b [$0C],y
	STA.b $02
	LDX.b $00
	PLY
	BRA.b CODE_2A8FA7

CODE_2A8FE2:
	SEP.b #$10
	RTS

DATA_2A8FE5:
	db $05,$00,$04,$00,$02,$00,$02,$00
	db $05,$00,$05,$00,$06,$00

DATA_2A8FF3:
	dw DATA_2A901D
	dw DATA_2A9047
	dw DATA_2A9064
	dw DATA_2A906A
	dw DATA_2A9072
	dw DATA_2A909D
	dw DATA_2A90CB

DATA_2A9001:
	dw DATA_2A90FB
	dw DATA_2A9103
	dw DATA_2A9109
	dw DATA_2A910B
	dw DATA_2A910D
	dw DATA_2A9115
	dw DATA_2A911D

DATA_2A900F:
	dw DATA_2A9127
	dw DATA_2A912C
	dw DATA_2A9130
	dw DATA_2A9132
	dw DATA_2A9134
	dw DATA_2A9139
	dw DATA_2A913E

DATA_2A901D:
	db $0E,$0F,$0F,$10,$13,$14,$15,$15
	db $0F,$10,$0E,$15,$15,$15,$15,$15
	db $14,$10,$0E,$20,$21,$15,$15,$15
	db $15,$15,$15,$15,$1B,$0E,$15,$15
	db $15,$15,$15,$15,$15,$15,$15,$15
	db $15,$10

DATA_2A9047:
	db $0E,$0F,$10,$0E,$15,$15,$18,$22
	db $23,$23,$23,$23,$21,$15,$15,$15
	db $14,$10,$13,$15,$15,$15,$15,$15
	db $15,$15,$15,$15,$18

DATA_2A9064:
	db $01,$02,$03,$0D,$07,$0A

DATA_2A906A:
	db $01,$02,$02,$03,$0D,$07,$06,$0A

DATA_2A9072:
	db $00,$00,$01,$03,$01,$02,$04,$04
	db $03,$01,$28,$28,$03,$01,$02,$02
	db $04,$04,$04,$09,$07,$06,$07,$06
	db $08,$03,$0D,$07,$08,$09,$07,$06
	db $06,$0B,$00,$00,$0C,$07,$0A,$0C
	db $07,$06,$0B

DATA_2A909D:
	db $01,$02,$03,$01,$02,$04,$04,$04
	db $02,$28,$03,$03,$00,$01,$04,$04
	db $04,$04,$04,$04,$04,$04,$02,$03
	db $04,$05,$06,$07,$07,$06,$08,$09
	db $07,$07,$06,$07,$0A,$06,$06,$0B
	db $00,$00,$0C,$07,$06,$0B

DATA_2A90CB:
	db $01,$02,$28,$02,$03,$01,$02,$04
	db $04,$04,$04,$04,$02,$01,$02,$02
	db $04,$04,$04,$04,$04,$04,$04,$04
	db $01,$04,$04,$04,$04,$04,$04,$04
	db $07,$07,$06,$07,$0D,$06,$07,$24
	db $07,$06,$07,$06,$0B,$0C,$06,$0B

DATA_2A90FB:
	db $10,$00,$0F,$00,$0D,$00,$0F,$00

DATA_2A9103:
	db $0F,$00,$0A,$00,$10,$00

DATA_2A9109:
	db $10,$00

DATA_2A910B:
	db $10,$00

DATA_2A910D:
	db $10,$00,$0D,$00,$10,$00,$11,$00

DATA_2A9115:
	db $0E,$00,$0D,$00,$10,$00,$10,$00

DATA_2A911D:
	db $0E,$00,$0D,$00,$0F,$00,$10,$00
	db $12,$00

DATA_2A9127:
	db $04,$06,$08,$0B,$0D

DATA_2A912C:
	db $03,$04,$0B,$0B

DATA_2A9130:
	db $03,$03

DATA_2A9132:
	db $04,$04

DATA_2A9134:
	db $04,$09,$0D,$0D,$04

DATA_2A9139:
	db $03,$08,$0D,$0D,$09

DATA_2A913E:
	db $05,$08,$0B,$0C,$09,$03

;--------------------------------------------------------------------

CODE_2A9144:
	SEP.b #$10
	STZ.w $02D9
	LDA.w $0350
	CMP.b #$23
	BNE.b CODE_2A9155
	LDA.b #$01
	STA.w $02D9
CODE_2A9155:
	LDX.b #$A0
	LDA.b #$40
	STA.b $00
	LDA.b #$06
CODE_2A915D:
	JSR.w CODE_2A8D03
	INX
	DEC.b $00
	BNE.b CODE_2A915D
	LDA.b #$0C
	STA.b $02
	LDA.b #$0D
	STA.b $03
	LDA.b #$02
	STA.b $01
CODE_2A9171:
	LDA.b #$08
	STA.b $00
CODE_2A9175:
	LDA.b $02
	JSR.w CODE_2A8D03
	INX
	LDA.b $03
	JSR.w CODE_2A8D03
	INX
	DEC.b $00
	BNE.b CODE_2A9175
	INC.b $02
	INC.b $02
	INC.b $03
	INC.b $03
	DEC.b $01
	BNE.b CODE_2A9171
	LDA.b #$04
	STA.b $01
CODE_2A9195:
	LDA.b #$08
	STA.b $00
CODE_2A9199:
	LDA.b #$10
	JSR.w CODE_2A8D25
	INX
	LDA.b #$10
	JSR.w CODE_2A8D25
	INX
	DEC.b $00
	BNE.b CODE_2A9199
	DEC.b $01
	BNE.b CODE_2A9195
CODE_2A91AD:
	LDY.b #$00
	LDA.b [!RAM_SMB3_Level_BGDataPtrLo],y
	CMP.b #$FF
	BEQ.b CODE_2A91BD
	JSR.w CODE_2A8E54
	JSR.w (DATA_2A91BF,x)
	BRA.b CODE_2A91AD

CODE_2A91BD:
	PLB
	RTL

DATA_2A91BF:
	dw CODE_2A91C3
	dw CODE_2A9221

CODE_2A91C3:
	LDA.w $0350
	CMP.b #$23
	BEQ.b CODE_2A9216
	REP.b #$10
	LDX.b $00
	LDA.b #$08
	STA.b $02
	STZ.b $03
	LDA.b #$11
	STA.b $04
CODE_2A91D8:
	LDY.b $D8
CODE_2A91DA:
	LDA.b $04
	JSR.w CODE_2A8CD9
	INC.b $04
	INX
	TXA
	AND.b #$0F
	BNE.b CODE_2A91F1
	REP.b #$20
	TXA
	CLC
	ADC.w #$01A0
	TAX
	SEP.b #$20
CODE_2A91F1:
	DEY
	BNE.b CODE_2A91DA
	LDY.b $02
	REP.b #$20
	LDA.b $00
	CLC
	ADC.w DATA_2A9217,y
	STA.b $00
	TAX
	SEP.b #$20
	DEC.b $02
	DEC.b $02
	BPL.b CODE_2A91D8
	LDA.b #$17
	JSR.w CODE_2A8CD9
	LDA.b #$18
	INX
	JSR.w CODE_2A8CD9
	SEP.b #$10
CODE_2A9216:
	RTS

DATA_2A9217:
	db $10,$00,$0F,$00,$10,$00,$10,$00
	db $10,$00

CODE_2A9221:
	LDA.b #DATA_2A927A>>16
	STA.b $08
	STA.b $0B
	STA.b $0E
	REP.b #$30
	LDX.b $D8
	LDA.w DATA_2A925C,x
	STA.b $06
	LDA.w DATA_2A9266,x
	STA.b $09
	LDA.w DATA_2A9270,x
	STA.b $0C
	STZ.b $04
	SEP.b #$20
	LDA.w DATA_2A9252,x
	STA.b $0F
	LDX.b $00
	LDY.w #$0000
	LDA.b [$0C]
	STA.b $02
	JSR.w CODE_2A8FA7
	RTS

DATA_2A9252:
	dw $0005,$0006,$0005,$0006,$0004

DATA_2A925C:
	dw DATA_2A927A,DATA_2A929A,DATA_2A92B9,DATA_2A92DC,DATA_2A92EB

DATA_2A9266:
	dw DATA_2A92FE,DATA_2A9306,DATA_2A9310,DATA_2A9318,DATA_2A9322

DATA_2A9270:
	dw DATA_2A9328,DATA_2A932D,DATA_2A9333,DATA_2A9338,DATA_2A933E

DATA_2A927A:
	db $01,$02,$01,$03,$04,$05,$03,$02
	db $01,$04,$06,$06,$06,$06,$07,$02
	db $08,$09,$06,$07,$09,$07,$04,$05
	db $06,$05,$08,$04,$05,$04,$06,$06

DATA_2A929A:
	db $03,$03,$02,$06,$06,$05,$02,$01
	db $02,$07,$08,$09,$07,$04,$05,$02
	db $00,$07,$08,$04,$06,$05,$04,$06
	db $06,$05,$03,$07,$04,$05,$04

DATA_2A92B9:
	db $01,$03,$02,$01,$02,$00,$01,$04
	db $06,$05,$03,$02,$01,$0A,$05,$03
	db $04,$06,$06,$06,$06,$06,$09,$06
	db $0B,$06,$06,$06,$06,$06,$06,$06
	db $05,$08,$04

DATA_2A92DC:
	db $01,$02,$01,$03,$04,$05,$01,$03
	db $04,$09,$05,$08,$09,$05,$04

DATA_2A92EB:
	db $07,$09,$07,$08,$09,$06,$07,$08
	db $04,$05,$04,$07,$04,$06,$05,$08
	db $04,$05,$04

DATA_2A92FE:
	db $0E,$00,$0F,$00,$10,$00,$10,$00

DATA_2A9306:
	db $10,$00,$10,$00,$0E,$00,$0F,$00
	db $0F,$00

DATA_2A9310:
	db $0C,$00,$0F,$00,$10,$00,$10,$00

DATA_2A9318:
	db $0E,$00,$0E,$00,$10,$00,$10,$00
	db $12,$00

DATA_2A9322:
	db $0A,$00,$0F,$00,$0F,$00

DATA_2A9328:
	db $02,$06,$08,$08,$08

DATA_2A932D:
	db $03,$06,$08,$0A,$02,$02

DATA_2A9333:
	db $03,$09,$0A,$0A,$03

DATA_2A9338:
	db $02,$04,$03,$01,$03,$02

DATA_2A933E:
	db $02,$09,$06,$02

;--------------------------------------------------------------------

CODE_2A9342:
	SEP.b #$10
	LDX.b #$00
CODE_2A9346:
	LDA.b #$02
	STA.l $7F0000,x
	INX
	CPX.b #$30
	BNE.b CODE_2A9346
CODE_2A9351:
	LDA.b #$04
	STA.l $7F0000,x
	INX
	LDA.b #$07
	STA.l $7F0000,x
	INX
	CPX.b #$40
	BNE.b CODE_2A9351
	LDX.b #$50
	LDA.b #$90
	STA.b $00
	LDA.b #$10
CODE_2A936B:
	STA.l $7F0000,x
	INX
	DEC.b $00
	BNE.b CODE_2A936B
CODE_2A9374:
	LDY.b #$00
	LDA.b [!RAM_SMB3_Level_BGDataPtrLo],y
	CMP.b #$FF
	BEQ.b CODE_2A9384
	JSR.w CODE_2A8E54
	JSR.w (DATA_2A9386,x)
	BRA.b CODE_2A9374

CODE_2A9384:
	PLB
	RTL

DATA_2A9386:
	dw CODE_2A9392
	dw CODE_2A93D7
	dw CODE_2A93FD
	dw CODE_2A9453
	dw CODE_2A9465
	dw CODE_2A9480

CODE_2A9392:
	REP.b #$10
	LDX.b $00
CODE_2A9396:
	LDA.b #$01
	STA.l $7F0000,x
	REP.b #$20
	TXA
	CLC
	ADC.w #$0010
	TAX
	SEP.b #$20
	LDA.l $7F0000,x
	CMP.b #$07
	BEQ.b CODE_2A93C6
	LDA.b #$03
	STA.l $7F0000,x
CODE_2A93B4:
	REP.b #$20
	TXA
	CLC
	ADC.w #$0010
	TAX
	SEP.b #$20
	DEC.b $D8
	DEC.b $D8
	BPL.b CODE_2A9396
	BRA.b CODE_2A93D4

CODE_2A93C6:
	LDA.b #$05
	STA.l $7F0000,x
	LDA.b #$06
	STA.l $7F0001,x
	BRA.b CODE_2A93B4

CODE_2A93D4:
	SEP.b #$10
	RTS

CODE_2A93D7:
	LDY.b #$00
	LDX.b $00
CODE_2A93DB:
	LDA.l $7F0000,x
	BNE.b CODE_2A93E9
	LDA.w DATA_2A93EF,y
	STA.l $7F0000,x
	INY
CODE_2A93E9:
	INX
	DEC.b $D8
	BPL.b CODE_2A93DB
	RTS

DATA_2A93EF:
	db $08,$09,$0A,$0A,$0A,$0B,$0C,$08
	db $08,$08,$0D,$0E,$0F,$08

CODE_2A93FD:
	LDY.b #$00
	LDX.b $00
	LDA.w !RAM_SMB3_Level_GraphicsAndPaletteSettingFromHeader
	CMP.b #$24
	BEQ.b CODE_2A9425
CODE_2A9408:
	LDA.w DATA_2A9441,y
	STA.l $7F0000,x
	LDA.w DATA_2A9444,y
	STA.l $7F0010,x
	LDA.w DATA_2A9447,y
	STA.l $7F0020,x
	INX
	INY
	DEC.b $D8
	BPL.b CODE_2A9408
	BRA.b CODE_2A9440

CODE_2A9425:
	LDA.w DATA_2A944A,y
	STA.l $7F0000,x
	LDA.w DATA_2A944D,y
	STA.l $7F0010,x
	LDA.w DATA_2A9450,y
	STA.l $7F0020,x
	INX
	INY
	DEC.b $D8
	BPL.b CODE_2A9425
CODE_2A9440:
	RTS

DATA_2A9441:
	db $12,$13,$14

DATA_2A9444:
	db $16,$17,$14

DATA_2A9447:
	db $18,$19,$1A

DATA_2A944A:
	db $21,$22,$14

DATA_2A944D:
	db $23,$24,$14

DATA_2A9450:
	db $18,$19,$1A

CODE_2A9453:
	LDX.b $00
CODE_2A9455:
	LDA.b #$11
	STA.l $7F0000,x
	TXA
	CLC
	ADC.b #$10
	TAX
	DEC.b $D8
	BPL.b CODE_2A9455
	RTS

CODE_2A9465:
	LDX.b $00
	LDA.l $7F0000,x
	CMP.b #$11
	BEQ.b CODE_2A9473
	LDA.b #$1B
	BRA.b CODE_2A9475

CODE_2A9473:
	LDA.b #$1D
CODE_2A9475:
	STA.l $7F0000,x
	LDA.b #$1C
	STA.l $7F0001,x
	RTS

CODE_2A9480:
	LDX.b $00
	LDY.b $D8
	LDA.w DATA_2A948C,y
	STA.l $7F0000,x
	RTS

DATA_2A948C:
	db $15,$1E

;--------------------------------------------------------------------

CODE_2A948E:
	SEP.b #$10
	LDX.b #$60
	LDA.b #$3D
CODE_2A9494:
	JSR.w CODE_2A8D03
	INX
	CPX.b #$70
	BNE.b CODE_2A9494
	LDA.b #$01
CODE_2A949E:
	JSR.w CODE_2A8D03
	INX
	CPX.b #$80
	BNE.b CODE_2A949E
	LDA.b #$02
	STA.b $00
	LDA.b #$03
	STA.b $01
	LDA.b #$08
	STA.b $02
	LDA.b #$04
	STA.b $03
CODE_2A94B6:
	LDA.b $00
	JSR.w CODE_2A8D03
	INX
	LDA.b $01
	JSR.w CODE_2A8D03
	INX
	DEC.b $02
	BNE.b CODE_2A94B6
	LDA.b #$08
	STA.b $02
	INC.b $00
	INC.b $00
	INC.b $01
	INC.b $01
	DEC.b $03
	BNE.b CODE_2A94B6
	LDA.b #$10
	STA.b $02
	LDA.b #$0A
CODE_2A94DC:
	JSR.w CODE_2A8D03
	INX
	DEC.b $02
	BNE.b CODE_2A94DC
	LDA.b #$04
	STA.b $04
	LDA.b #$0B
	STA.b $00
	INC
	STA.b $01
	INC
	STA.b $02
	INC
	STA.b $03
	JSR.w CODE_2A95B9
	LDA.b #$04
	STA.b $04
	LDA.b #$0F
	STA.b $00
	INC
	STA.b $01
	INC
	STA.b $02
	INC
	STA.b $03
	JSR.w CODE_2A95B9
	LDA.b #$04
	STA.b $04
	LDA.b #$13
	STA.b $00
	LDA.b #$14
	STA.b $01
	LDA.b #$19
	STA.b $02
	LDA.b #$1A
	STA.b $03
	JSR.w CODE_2A95B9
	LDX.b #$70
	LDA.b #$04
	STA.b $04
	LDA.b #$2D
	STA.b $00
	LDA.b #$2E
	STA.b $01
	LDA.b #$33
	STA.b $02
	LDA.b #$34
	STA.b $03
	JSR.w CODE_2A975C
	LDA.b #$04
	STA.b $04
	LDA.b #$35
	STA.b $00
	INC
	STA.b $01
	INC
	STA.b $02
	INC
	STA.b $03
	JSR.w CODE_2A975C
	LDA.b #$04
	STA.b $04
	LDA.b #$39
	STA.b $00
	INC
	STA.b $01
	INC
	STA.b $02
	INC
	STA.b $03
	JSR.w CODE_2A975C
CODE_2A9564:
	LDA.b #$0A
	JSR.w CODE_2A8D25
	INX
	CPX.b #$B0
	BNE.b CODE_2A9564
CODE_2A956E:
	LDY.b #$00
	LDA.b [!RAM_SMB3_Level_BGDataPtrLo],y
	CMP.b #$FF
	BEQ.b CODE_2A95B7
	JSR.w CODE_2A8E54
CODE_2A9579:
	STZ.b $02
CODE_2A957B:
	REP.b #$20
	LDA.b $00
	STA.b $04
	SEP.b #$20
	LDA.b #$09
	STA.b $03
CODE_2A9587:
	LDX.b $02
	LDA.w DATA_2A95D6,x
	REP.b #$10
	LDX.b $04
	JSR.w CODE_2A8CD9
	REP.b #$20
	LDA.b $04
	CLC
	ADC.w #$0010
	STA.b $04
	SEP.b #$30
	INC.b $02
	DEC.b $03
	BNE.b CODE_2A9587
	INC.b $00
	LDA.b $02
	CMP.b #$24
	BNE.b CODE_2A957B
	LDA.b $D8
	BEQ.b CODE_2A95B5
	DEC.b $D8
	BRA.b CODE_2A9579

CODE_2A95B5:
	BRA.b CODE_2A956E

CODE_2A95B7:
	PLB
	RTL

CODE_2A95B9:
	LDA.b $00
	JSR.w CODE_2A8D03
	INX
	LDA.b $01
	JSR.w CODE_2A8D03
	INX
	LDA.b $02
	JSR.w CODE_2A8D03
	INX
	LDA.b $03
	JSR.w CODE_2A8D03
	INX
	DEC.b $04
	BNE.b CODE_2A95B9
	RTS

DATA_2A95D6:
	db $15,$1B,$00,$00,$00,$00,$00,$29
	db $2F,$16,$1C,$1F,$21,$23,$25,$27
	db $2A,$30,$17,$1D,$20,$22,$24,$26
	db $28,$2B,$31,$18,$1E,$00,$00,$00
	db $00,$00,$2C,$32

;--------------------------------------------------------------------

LoadLayer2BG05_ScrewedPanels:
.Main:
LoadLayer2BG1A_ScrewedPanels:
.Main:
;$2A95FA
	SEP.b #$10
	LDA.b #$3A
	STA.b $00
	LDA.b #$01
	STA.b $01
	LDA.b #$08
	STA.b $04
	LDX.b #$E0
	JSR.w CODE_2A973A
	LDA.b #$02
	STA.b $00
	LDA.b #$03
	STA.b $01
	LDA.b #$08
	STA.b $04
	JSR.w CODE_2A973A
	LDA.b #$04
	STA.b $00
	LDA.b #$05
	STA.b $01
	LDA.b #$08
	STA.b $04
	JSR.w CODE_2A974B
	LDA.b #$0B
	STA.b $00
	LDA.b #$0C
	STA.b $01
	LDA.b #$08
	STA.b $04
	JSR.w CODE_2A974B
	LDA.b #$20
	STA.b $04
CODE_2A963E:
	LDA.b #$13
	JSR.w CODE_2A8D25
	INX
	DEC.b $04
	BNE.b CODE_2A963E
	LDX.b #$30
	LDA.b #$10
	STA.b $04
	LDA.b #$13
CODE_2A9650:
	JSR.w CODE_2A8D25
	INX
	DEC.b $04
	BNE.b CODE_2A9650
	JSR.w CODE_2A96ED
	JSR.w CODE_2A96AD
	LDA.w !RAM_SMB3_Level_Layer2BGFromHeader
	CMP.b #$1A
	BNE.b CODE_2A96AB
	LDA.b #$00
	XBA
	INC.w $034F
	REP.b #$10
	LDY.w #$7F0510
	LDX.w #$7F05C0
	LDA.b #$CF
	MVN $7F0510>>16,$7F05C0>>16
	LDA.b #$00
	XBA
	LDY.w #$7F06C0
	LDX.w #$7F0770
	LDA.b #$CF
	MVN $7F06C0>>16,$7F0770>>16
	SEP.b #$10
	LDX.b #$E0
	LDA.b #$13
CODE_2A968C:
	STA.l $7F05E0,x
	STA.l $7F0790,x
	DEX
	BNE.b CODE_2A968C
	LDX.b #$70
	JSR.w CODE_2A96ED
	PHB
	LDA.b #DATA_2A97BA>>16
	PHA
	PLB
	REP.b #$20
	INC.b !RAM_SMB3_Level_BGDataPtrLo
	SEP.b #$20
	JSR.w CODE_2A96AD
	PLB
CODE_2A96AB:
	PLB
	RTL

;--------------------------------------------------------------------

CODE_2A96AD:
	LDY.b #$00
	LDA.b [!RAM_SMB3_Level_BGDataPtrLo],y
	CMP.b #$FF
	BEQ.b CODE_2A96EC
	JSR.w CODE_2A8E54
	LDA.b #DATA_2A97BA>>16
	STA.b $08
	STA.b $0B
	STA.b $0E
	REP.b #$30
	LDX.b $D8
	LDA.w DATA_2A9796,x
	STA.b $06
	LDA.w DATA_2A97A2,x
	STA.b $09
	LDA.w DATA_2A97AE,x
	STA.b $0C
	STZ.b $04
	SEP.b #$20
	LDA.w DATA_2A978A,x
	STA.b $0F
	LDX.b $00
	LDY.w #$0000
	LDA.b [$0C]
	STA.b $02
	JSR.w CODE_2A8FA7
	SEP.b #$10
	BRA.b CODE_2A96AD

CODE_2A96EC:
	RTS

;--------------------------------------------------------------------

CODE_2A96ED:
	LDA.b #$18
	STA.b $00
	LDA.b #$19
	STA.b $01
	LDA.b #$1E
	STA.b $02
	LDA.b #$1B
	STA.b $03
	LDA.b #$04
	STA.b $04
	JSR.w CODE_2A975C
	LDA.b #$21
	STA.b $00
	LDA.b #$22
	STA.b $01
	LDA.b #$26
	STA.b $02
	LDA.b #$24
	STA.b $03
	LDA.b #$04
	STA.b $04
	JSR.w CODE_2A975C
	LDA.b #$28
	STA.b $00
	LDA.b #$29
	STA.b $01
	LDA.b #$08
	STA.b $04
	JSR.w CODE_2A9779
	LDA.b #$38
	STA.b $00
	LDA.b #$39
	STA.b $01
	LDA.b #$08
	STA.b $04
	JSR.w CODE_2A9779
	RTS

;--------------------------------------------------------------------

CODE_2A973A:
	LDA.b $00
	JSR.w CODE_2A8D03
	INX
	LDA.b $01
	JSR.w CODE_2A8D03
	INX
	DEC.b $04
	BNE.b CODE_2A973A
	RTS

;--------------------------------------------------------------------

CODE_2A974B:
	LDA.b $00
	JSR.w CODE_2A8D25
	INX
	LDA.b $01
	JSR.w CODE_2A8D25
	INX
	DEC.b $04
	BNE.b CODE_2A974B
	RTS

;--------------------------------------------------------------------

CODE_2A975C:
	LDA.b $00
	JSR.w CODE_2A8D25
	INX
	LDA.b $01
	JSR.w CODE_2A8D25
	INX
	LDA.b $02
	JSR.w CODE_2A8D25
	INX
	LDA.b $03
	JSR.w CODE_2A8D25
	INX
	DEC.b $04
	BNE.b CODE_2A975C
	RTS

;--------------------------------------------------------------------

CODE_2A9779:
	LDA.b $00
	JSR.w CODE_2A8D25
	INX
	LDA.b $01
	JSR.w CODE_2A8D25
	INX
	DEC.b $04
	BNE.b CODE_2A9779
	RTS

;--------------------------------------------------------------------

DATA_2A978A:
	db $06,$00,$04,$00,$06,$00,$06,$00
	db $09,$00,$06,$00

DATA_2A9796:
	dw DATA_2A97BA
	dw DATA_2A97D4
	dw DATA_2A97E6
	dw DATA_2A97FF
	dw DATA_2A981D
	dw DATA_2A9833

DATA_2A97A2:
	dw DATA_2A9852
	dw DATA_2A985C
	dw DATA_2A9862
	dw DATA_2A986C
	dw DATA_2A9876
	dw DATA_2A9886

DATA_2A97AE:
	dw DATA_2A9890
	dw DATA_2A9896
	dw DATA_2A989A
	dw DATA_2A98A0
	dw DATA_2A98A6
	dw DATA_2A98AF

DATA_2A97BA:
	db $06,$07,$08,$0D,$0E,$0F,$10,$0D
	db $0E,$14,$15,$09,$16,$16,$1A,$15
	db $11,$1C,$1C,$23,$15,$2A,$2B,$2C
	db $2D,$2E

DATA_2A97D4:
	db $09,$16,$0A,$11,$1C,$12,$1D,$10
	db $11,$1C,$12,$25,$15,$2F,$2C,$30
	db $31,$32

DATA_2A97E6:
	db $09,$16,$0A,$11,$1C,$12,$11,$1C
	db $12,$17,$06,$07,$1F,$12,$20,$0D
	db $0E,$27,$12,$20,$33,$34,$35,$36
	db $37

DATA_2A97FF:
	db $09,$16,$0A,$11,$1C,$12,$06,$07
	db $07,$1F,$12,$17,$0D,$0E,$0E,$27
	db $12,$20,$0D,$0E,$0E,$27,$12,$20
	db $33,$34,$34,$35,$36,$37

DATA_2A981D:
	db $09,$16,$16,$11,$1C,$1C,$11,$1C
	db $1C,$2A,$2B,$2C,$0F,$10,$1A,$15
	db $23,$15,$23,$15,$2D,$2E

DATA_2A9833:
	db $09,$16,$0A,$11,$1C,$12,$11,$1C
	db $12,$17,$06,$07,$07,$07,$1F,$12
	db $20,$0D,$0E,$0E,$0E,$27,$12,$20
	db $33,$34,$34,$34,$35,$36,$37

DATA_2A9852:
	dw $0010,$0010,$000F,$0010,$0010

DATA_2A985C:
	dw $0010,$0010,$0010

DATA_2A9862:
	dw $0010,$0010,$000F,$0010,$0010

DATA_2A986C:
	dw $0010,$000E,$0010,$0010,$0010

DATA_2A9876:
	dw $0010,$0010,$0010,$0163,$0010,$0010,$0010,$0010

DATA_2A9886:
	dw $0010,$0010,$000D,$0010,$0010

DATA_2A9890:
	db $03,$04,$04,$05,$05,$05

DATA_2A9896:
	db $03,$05,$05,$05

DATA_2A989A:
	db $03,$03,$04,$05,$05,$05

DATA_2A98A0:
	db $03,$03,$06,$06,$06,$06

DATA_2A98A6:
	db $03,$03,$03,$03,$02,$02,$02,$02
	db $02

DATA_2A98AF:
	db $03,$03,$04,$07,$07,$07

;--------------------------------------------------------------------

; Note: Something related to the fortress pole background.

CODE_2A98B5:
	SEP.b #$10
	LDX.b #$10
	LDA.b #$01
	STA.b $00
	JSR.w CODE_2A9924
	LDX.b #$A0
	LDA.b #$14
	STA.b $00
	JSR.w CODE_2A9924
CODE_2A98C9:
	INX
	LDA.b #$18
	JSR.w CODE_2A8D03
	INX
	TXA
	AND.b #$0F
	BNE.b CODE_2A98C9
CODE_2A98D5:
	LDA.b #$1C
	JSR.w CODE_2A8D03
	INX
	LDA.b #$1D
	JSR.w CODE_2A8D03
	INX
	TXA
	AND.b #$0F
	BNE.b CODE_2A98D5
	LDA.b #$21
	STA.b $00
	JSR.w CODE_2A9924
	LDA.b #$22
	STA.b $00
	JSR.w CODE_2A9924
	LDA.b #$29
	STA.b $00
	JSR.w CODE_2A9924
	LDA.b #$2A
	STA.b $00
CODE_2A98FF:
	JSR.w CODE_2A9930
	CPX.b #$B0
	BNE.b CODE_2A98FF
CODE_2A9906:
	LDY.b #$00
	LDA.b [!RAM_SMB3_Level_BGDataPtrLo],y
	CMP.b #$FF
	BEQ.b CODE_2A9916
	JSR.w CODE_2A8E54
	JSR.w (DATA_2A9918,x)
	BRA.b CODE_2A9906

CODE_2A9916:
	PLB
	RTL

DATA_2A9918:
	dw CODE_2A994C
	dw CODE_2A9988
	dw CODE_2A99BB
	dw CODE_2A99F7
	dw CODE_2A9A23
	dw CODE_2A9A3E

;--------------------------------------------------------------------

CODE_2A9924:
	LDA.b $00
	JSR.w CODE_2A8D03
	INX
	TXA
	AND.b #$0F
	BNE.b CODE_2A9924
	RTS

;--------------------------------------------------------------------

CODE_2A9930:
	LDA.b $00
	JSR.w CODE_2A8D25
	INX
	TXA
	AND.b #$0F
	BNE.b CODE_2A9930
	RTS

;--------------------------------------------------------------------

UNK_2A993C:
	db $34,$35,$34,$36,$34,$36,$34,$35
	db $34,$36,$37,$34,$38,$35,$37,$37

CODE_2A994C:
	REP.b #$10
CODE_2A994E:
	LDX.b $00
	LDA.l $7F0000,x
	CMP.b #$14
	BEQ.b CODE_2A996B
	LDA.b #$02
	JSR.w CODE_2A8CD9
	REP.b #$20
	LDA.b $00
	CLC
	ADC.w #$0010
	STA.b $00
	SEP.b #$20
	BRA.b CODE_2A994E

CODE_2A996B:
	LDA.b #$17
	JSR.w CODE_2A8CD9
	REP.b #$20
	LDA.b $00
	CLC
	ADC.w #$0010
	TAX
	SEP.b #$20
	LDA.b #$1B
	JSR.w CODE_2A8CD9
	LDA.b #$20
	JSR.w CODE_2A8CEE
	SEP.b #$10
	RTS

;--------------------------------------------------------------------

CODE_2A9988:
	REP.b #$10
	LDY.w #$0000
CODE_2A998D:
	LDX.b $00
CODE_2A998F:
	LDA.w DATA_2A99B1,y
	JSR.w CODE_2A8CD9
	INY
	REP.b #$20
	TXA
	CLC
	ADC.w #$0010
	TAX
	SEP.b #$20
	CPY.w #$000A
	BEQ.b CODE_2A99AE
	CPY.w #$0005
	BNE.b CODE_2A998F
	INC.b $00
	BRA.b CODE_2A998D

CODE_2A99AE:
	SEP.b #$10
	RTS

DATA_2A99B1:
	db $03,$08,$0D,$10,$12,$04,$09,$0E
	db $11,$13

;--------------------------------------------------------------------

CODE_2A99BB:
	REP.b #$10
	LDX.b $00
	LDA.b #$05
	JSR.w CODE_2A99E9
	REP.b #$20
	LDA.b $00
	CLC
	ADC.w #$0010
	STA.b $00
	TAX
	SEP.b #$20
	LDA.b #$0A
	JSR.w CODE_2A99E9
	REP.b #$20
	LDA.b $00
	CLC
	ADC.w #$0011
	TAX
	SEP.b #$20
	LDA.b #$0F
	JSR.w CODE_2A8CD9
	SEP.b #$10
	RTS

CODE_2A99E9:
	JSR.w CODE_2A8CD9
	INX
	INC
	JSR.w CODE_2A8CD9
	INX
	INC
	JSR.w CODE_2A8CD9
	RTS

;--------------------------------------------------------------------

CODE_2A99F7:
	REP.b #$10
	LDX.b $00
	LDA.b #$15
	JSR.w CODE_2A9A0D
	LDA.b #$19
	JSR.w CODE_2A9A0D
	LDA.b #$1E
	JSR.w CODE_2A9A0D
	SEP.b #$10
	RTS

CODE_2A9A0D:
	JSR.w CODE_2A8CD9
	INX
	INC
	JSR.w CODE_2A8CD9
	REP.b #$20
	LDA.b $00
	CLC
	ADC.w #$0010
	STA.b $00
	TAX
	SEP.b #$20
	RTS

;--------------------------------------------------------------------

CODE_2A9A23:
	REP.b #$10
	LDX.b $00
	LDY.w #$0000
CODE_2A9A2A:
	LDA.w DATA_2A9A39,y
	JSR.w CODE_2A8CD9
	INX
	INY
	CPY.w #$0005
	BNE.b CODE_2A9A2A
	BRA.b CODE_2A9A4D

DATA_2A9A39:
	db $23,$24,$28,$26,$27

CODE_2A9A3E:
	REP.b #$10
	LDX.b $00
	LDA.b #$23
CODE_2A9A44:
	JSR.w CODE_2A8CD9
	INX
	INC
	CMP.b #$28
	BNE.b CODE_2A9A44
CODE_2A9A4D:
	LDY.w #$0000
	REP.b #$20
	LDA.b $00
	CLC
	ADC.w #$0011
	TAX
	SEP.b #$20
CODE_2A9A5B:
	LDA.w DATA_2A9AAE,y
	JSR.w CODE_2A8CD9
	LDA.w DATA_2A9AB1,y
	JSR.w CODE_2A8CEE
	INX
	INY
	CPY.w #$0003
	BNE.b CODE_2A9A5B
	REP.b #$20
	LDA.b $00
	CLC
	ADC.w #$0032
	TAX
	SEP.b #$20
CODE_2A9A79:
	LDA.l $7F0000,x
	CMP.b #$2A
	BNE.b CODE_2A9A92
	LDA.b #$30
	JSR.w CODE_2A8CD9
	REP.b #$20
	TXA
	CLC
	ADC.w #$0010
	TAX
	SEP.b #$20
	BRA.b CODE_2A9A79

CODE_2A9A92:
	REP.b #$20
	TXA
	SEC
	SBC.w #$0011
	TAX
	SEP.b #$20
	LDA.b #$31
	JSR.w CODE_2A8CD9
	INC
	INX
	JSR.w CODE_2A8CD9
	INC
	INX
	JSR.w CODE_2A8CD9
	SEP.b #$10
	RTS

DATA_2A9AAE:
	db $2B,$28,$2C

DATA_2A9AB1:
	db $2D,$2E,$2F

;--------------------------------------------------------------------

CODE_2A9AB4:
	SEP.b #$10
	LDA.w !RAM_SMB3_Global_CurrentWorld
	CMP.b #$07
	BEQ.b CODE_2A9AC2
	LDA.b #$01
	STA.w $02D9
CODE_2A9AC2:
	LDX.b #$10
	LDA.b #$01
	STA.b $00
	JSR.w CODE_2A9930
	LDA.b #$05
	STA.b $00
	JSR.w CODE_2A9930
	LDA.b #$09
	STA.b $00
	JSR.w CODE_2A9930
	JSR.w CODE_2A9930
	JSR.w CODE_2A9930
	LDA.b #$11
	STA.b $00
	JSR.w CODE_2A9930
	LDA.b #$19
	STA.b $00
	JSR.w CODE_2A9930
	LDA.b #$22
	STA.b $00
	JSR.w CODE_2A9930
CODE_2A9AF4:
	LDY.b #$00
	LDA.b [!RAM_SMB3_Level_BGDataPtrLo],y
	CMP.b #$FF
	BEQ.b CODE_2A9B04
	JSR.w CODE_2A8E54
	JSR.w (DATA_2A9B06,x)
	BRA.b CODE_2A9AF4

CODE_2A9B04:
	PLB
	RTL

DATA_2A9B06:
	dw CODE_2A9B0C
	dw CODE_2A9B6A
	dw CODE_2A9B86

CODE_2A9B0C:
	LDX.b $00
	STX.b $01
	LDA.b #$03
	STA.b $D8
	LDA.b #$02
	JSR.w CODE_2A9B58
	LDA.b #$03
	STA.b $D8
	LDA.b #$06
	JSR.w CODE_2A9B58
	LDA.b #$03
	STA.b $D8
	LDA.b #$0A
	JSR.w CODE_2A9B58
	STZ.b $D8
CODE_2A9B2D:
	LDA.b #$0D
	JSR.w CODE_2A8D25
	INX
	LDA.b #$0B
	JSR.w CODE_2A8D25
	INX
	LDA.b #$0E
	JSR.w CODE_2A8D25
	LDA.b $00
	CLC
	ADC.b #$10
	STA.b $00
	TAX
	LDA.b $D8
	BNE.b CODE_2A9B4E
	INC.b $D8
	BRA.b CODE_2A9B2D

CODE_2A9B4E:
	LDA.b #$03
	STA.b $D8
	LDA.b #$12
	JSR.w CODE_2A9B58
	RTS

CODE_2A9B58:
	JSR.w CODE_2A8D25
	INC
	INX
	DEC.b $D8
	BNE.b CODE_2A9B58
	LDA.b $00
	CLC
	ADC.b #$10
	STA.b $00
	TAX
	RTS

CODE_2A9B6A:
	REP.b #$10
	LDX.b $00
	LDA.b #$18
	JSR.w CODE_2A8CD9
	LDA.b #$21
	JSR.w CODE_2A8CEE
	INX
	LDA.b #$18
	JSR.w CODE_2A8CD9
	LDA.b #$21
	JSR.w CODE_2A8CEE
	SEP.b #$10
	RTS

CODE_2A9B86:
	REP.b #$10
	LDY.w #$0000
CODE_2A9B8B:
	LDX.b $00
CODE_2A9B8D:
	LDA.w DATA_2A9BAA,y
	JSR.w CODE_2A8CD9
	INY
	INX
	TXA
	AND.b #$0F
	CMP.b #$09
	BNE.b CODE_2A9B8D
	LDA.b $00
	CLC
	ADC.b #$10
	STA.b $00
	CMP.b #$40
	BNE.b CODE_2A9B8B
	SEP.b #$10
	RTS

DATA_2A9BAA:
	db $0F,$09,$09,$09,$0D,$0B,$0E,$09
	db $10,$15,$16,$16,$09,$0D,$0B,$0E
	db $09,$17,$1A,$1B,$1B,$1C,$1D,$1E
	db $1F,$1C,$20

;--------------------------------------------------------------------

CODE_2A9BC5:
	SEP.b #$10
	LDX.b #$C0
	LDA.b #$30
	STA.b $00
	JSR.w CODE_2A9924
	LDA.b #$01
	STA.b $00
CODE_2A9BD4:
	JSR.w CODE_2A9924
	INC.b $00
	LDA.b $00
	AND.b #$03
	BNE.b CODE_2A9BD4
	JSR.w CODE_2A9930
	JSR.w CODE_2A9930
	LDX.b #$70
	LDA.b #$2F
	STA.b $00
	JSR.w CODE_2A9930
CODE_2A9BEE:
	LDY.b #$00
	LDA.b [!RAM_SMB3_Level_BGDataPtrLo],y
	CMP.b #$FF
	BEQ.b CODE_2A9BFE
	JSR.w CODE_2A8E54
	JSR.w (DATA_2A9C00,x)
	BRA.b CODE_2A9BEE

CODE_2A9BFE:
	PLB
	RTL

DATA_2A9C00:
	dw CODE_2A9C06
	dw CODE_2A9C14
	dw CODE_2A9C22

CODE_2A9C06:
	REP.b #$30
	LDA.w #DATA_2A9C59
	STA.b $02
	LDA.w #$0007
	STA.b $05
	BRA.b CODE_2A9C2E

CODE_2A9C14:
	REP.b #$30
	LDA.w #DATA_2A9C75
	STA.b $02
	LDA.w #$0005
	STA.b $05
	BRA.b CODE_2A9C2E

CODE_2A9C22:
	REP.b #$30
	LDA.w #DATA_2A9C89
	STA.b $02
	LDA.w #$0005
	STA.b $05
CODE_2A9C2E:
	SEP.b #$20
CODE_2A9C30:
	LDA.b #$04
	STA.b $04
	LDX.b $00
CODE_2A9C36:
	LDA.b ($02)
	JSR.w CODE_2A8CD9
	INX
	REP.b #$20
	INC.b $02
	SEP.b #$20
	DEC.b $04
	BNE.b CODE_2A9C36
	REP.b #$20
	LDA.b $00
	CLC
	ADC.w #$0010
	STA.b $00
	SEP.b #$20
	DEC.b $05
	BNE.b CODE_2A9C30
	SEP.b #$10
	RTS

DATA_2A9C59:
	db $04,$05,$06,$04,$07,$08,$09,$0A
	db $0B,$0C,$0D,$0E,$13,$14,$15,$16
	db $1B,$1C,$1D,$1E,$23,$24,$25,$26
	db $29,$2A,$2B,$2C

DATA_2A9C75:
	db $0F,$12,$0F,$12,$17,$1A,$17,$1A
	db $1F,$22,$1F,$22,$23,$26,$23,$26
	db $29,$2C,$29,$2C

DATA_2A9C89:
	db $0F,$10,$11,$12,$17,$18,$19,$1A
	db $1F,$20,$21,$22,$23,$27,$28,$26
	db $29,$2D,$2E,$2C

;--------------------------------------------------------------------

CODE_2A9C9D:
	SEP.b #$10
CODE_2A9C9F:
	LDY.b #$00
	LDA.b [!RAM_SMB3_Level_BGDataPtrLo],y
	CMP.b #$FF
	BEQ.b CODE_2A9CAF
	JSR.w CODE_2A8E54
	JSR.w (DATA_2A9CC3,x)
	BRA.b CODE_2A9C9F

CODE_2A9CAF:
	LDA.b #$00
	XBA
	REP.b #$10
	LDY.w #$7F0100
	LDX.w #$7F01B0
	LDA.b #$AF
	MVN $7F0100>>16,$7F01B0>>16
	SEP.b #$10
	PLB
	RTL

DATA_2A9CC3:
	dw CODE_2A9CCF
	dw CODE_2A9D61
	dw CODE_2A9DC0
	dw CODE_2A9E6B
	dw CODE_2A9ED2
	dw CODE_2A9EE8

CODE_2A9CCF:
	REP.b #$30
	LDA.b $DA
	ASL
	TAY
	LDA.w DATA_2A9CE0,y
	STA.b $02
	SEP.b #$20
	JSR.w CODE_2A9D3A
	RTS

DATA_2A9CE0:
	dw DATA_2A9CEA
	dw DATA_2A9CFA
	dw DATA_2A9D0A
	dw DATA_2A9D1A
	dw DATA_2A9D2A

DATA_2A9CEA:
	db $02,$06,$1F,$02,$06,$06,$1F,$03
	db $03,$02,$03,$03,$10,$17,$03,$03

DATA_2A9CFA:
	db $03,$06,$1F,$02,$06,$09,$1F,$03
	db $03,$02,$03,$03,$10,$17,$03,$03

DATA_2A9D0A:
	db $02,$03,$10,$17,$1D,$1F,$10,$17
	db $02,$06,$1F,$02,$31,$1F,$10,$17

DATA_2A9D1A:
	db $02,$09,$10,$17,$1E,$1F,$10,$17
	db $02,$1E,$1F,$02,$09,$1F,$10,$17

DATA_2A9D2A:
	db $00,$00,$00,$00,$00,$06,$1F,$03
	db $03,$02,$03,$03,$10,$17,$03,$03

CODE_2A9D3A:
	LDX.b $00
	LDY.w #$0000
CODE_2A9D3F:
	LDA.b ($02),y
	JSR.w CODE_2A8CD9
	REP.b #$20
	TXA
	CLC
	ADC.w #$0010
	TAX
	SEP.b #$20
	INY
	CPY.w #$0010
	BNE.b CODE_2A9D3F
	LDA.b $D8
	BEQ.b CODE_2A9D5E
	DEC.b $D8
	INC.b $00
	BRA.b CODE_2A9D3A

CODE_2A9D5E:
	SEP.b #$10
	RTS

CODE_2A9D61:
	REP.b #$30
	LDA.b $DA
	ASL
	TAX
	LDA.w DATA_2A9D74,x
	STA.b $02
	SEP.b #$20
	LDX.b $00
	JSR.w CODE_2A9DA6
	RTS

DATA_2A9D74:
	dw DATA_2A9D80
	dw DATA_2A9D88
	dw DATA_2A9D8D
	dw DATA_2A9D95
	dw DATA_2A9D9D
	dw DATA_2A9DA2

DATA_2A9D80:
	db $07,$08,$07,$08,$1A,$07,$08,$1A

DATA_2A9D88:
	db $1A,$08,$1A,$07,$00

DATA_2A9D8D:
	db $1A,$1A,$08,$1A,$1A,$1B,$1C,$07

DATA_2A9D95:
	db $08,$1A,$08,$08,$1A,$2C,$08,$1A

DATA_2A9D9D:
	db $1A,$08,$06,$1A,$00

DATA_2A9DA2:
	db $07,$08,$06,$00

CODE_2A9DA6:
	LDA.l $7F0000,x
	BNE.b CODE_2A9DB7
	LDA.b ($02)
	JSR.w CODE_2A8CD9
	REP.b #$20
	INC.b $02
	SEP.b #$20
CODE_2A9DB7:
	INX
	TXA
	AND.b #$0F
	BNE.b CODE_2A9DA6
	SEP.b #$10
	RTS

CODE_2A9DC0:
	REP.b #$30
	LDA.b $DA
	ASL
	TAX
	LDA.w DATA_2A9DE3,x
	STA.b $02
	SEP.b #$20
	JSR.w CODE_2A9D3A
	REP.b #$30
	TYA
	AND.w #$00FF
	CLC
	ADC.b $02
	STA.b $02
	INC.b $00
	SEP.b #$20
	JSR.w CODE_2A9D3A
	RTS

DATA_2A9DE3:
	dw DATA_2A9DEB
	dw DATA_2A9E0B
	dw DATA_2A9E2B
	dw DATA_2A9E4B

DATA_2A9DEB:
	db $04,$1B,$20,$33,$1B,$20,$35,$04
	db $20,$20,$35,$04,$2E,$30,$35,$04
	db $05,$1C,$21,$34,$1C,$21,$01,$05
	db $2D,$2F,$01,$05,$2D,$2F,$01,$05

DATA_2A9E0B:
	db $04,$1B,$20,$33,$1B,$1B,$35,$04
	db $2E,$30,$20,$35,$22,$27,$04,$20
	db $05,$1C,$21,$34,$1C,$1C,$01,$05
	db $21,$21,$21,$01,$23,$28,$05,$21

DATA_2A9E2B:
	db $35,$04,$0B,$12,$1B,$35,$22,$27
	db $04,$1B,$20,$20,$20,$35,$22,$27
	db $01,$05,$0C,$13,$1C,$01,$23,$28
	db $05,$1C,$21,$2D,$2F,$01,$23,$28

DATA_2A9E4B:
	db $35,$04,$0B,$12,$1B,$35,$22,$27
	db $04,$1B,$20,$2E,$30,$35,$22,$27
	db $01,$05,$0C,$13,$1C,$01,$23,$28
	db $05,$1C,$21,$21,$21,$01,$23,$28

CODE_2A9E6B:
	REP.b #$30
	LDA.b $DA
	ASL
	TAX
	LDA.w DATA_2A9E8C,x
	STA.b $02
	SEP.b #$20
	LDX.b $00
	JSR.w CODE_2A9DA6
	REP.b #$30
	LDA.b $00
	CLC
	ADC.w #$0010
	TAX
	SEP.b #$20
	JSR.w CODE_2A9DA6
	RTS

DATA_2A9E8C:
	dw DATA_2A9E94
	dw DATA_2A9EA2
	dw DATA_2A9EB2
	dw DATA_2A9EC2

DATA_2A9E94:
	db $0A,$0A,$0D,$0E,$0D,$0E,$0A,$11
	db $2A,$14,$15,$14,$15,$11

DATA_2A9EA2:
	db $0A,$0D,$0E,$0F,$0F,$0A,$0A,$0F
	db $11,$14,$15,$16,$16,$18,$19,$16

DATA_2A9EB2:
	db $0D,$0E,$0D,$0E,$0F,$24,$25,$0F
	db $26,$29,$26,$15,$16,$11,$2A,$16

DATA_2A9EC2:
	db $0D,$0E,$0D,$0E,$0F,$10,$0A,$0F
	db $26,$29,$26,$15,$16,$17,$11,$16

CODE_2A9ED2:
	REP.b #$10
	LDX.b $00
	LDY.b $DA
	LDA.w DATA_2A9EE1,y
	JSR.w CODE_2A8CD9
	SEP.b #$10
	RTS

DATA_2A9EE1:
	db $02,$32,$03,$06,$1F,$20,$21

CODE_2A9EE8:
	REP.b #$30
	LDA.b $DA
	ASL
	TAX
	LDA.w DATA_2A9F1B,x
	STA.b $02
	SEP.b #$20
	LDY.w #$0002
	LDA.b ($02)
	LDX.b $00
	JSR.w CODE_2A8CD9
	LDA.b ($02),y
	JSR.w CODE_2A8CEE
	REP.b #$20
	INC.b $02
	INC.b $00
	SEP.b #$20
	LDA.b ($02)
	LDX.b $00
	JSR.w CODE_2A8CD9
	LDA.b ($02),y
	JSR.w CODE_2A8CEE
	SEP.b #$10
	RTS

DATA_2A9F1B:
	dw DATA_2A9F21
	dw DATA_2A9F25
	dw DATA_2A9F29

DATA_2A9F21:
	db $0D,$0E,$14,$15

DATA_2A9F25:
	db $0A,$0D,$2A,$14

DATA_2A9F29:
	db $0A,$0A,$11,$11

;--------------------------------------------------------------------

CODE_2A9F2D:
	SEP.b #$10
	LDA.w !RAM_SMB3_Global_CurrentWorld
	CMP.b #$01
	BNE.b CODE_2A9F3B
	LDA.b #$18
	STA.w !RAM_SMB3_Level_Layer2BGPaletteFromHeader
CODE_2A9F3B:
	LDX.b #$D0
	LDA.b #$23
	STA.b $00
	JSR.w CODE_2A9924
	LDA.b #$24
	STA.b $00
	JSR.w CODE_2A9924
	LDA.b #$01
	STA.b $00
	JSR.w CODE_2A9924
	JSR.w CODE_2A9930
	JSR.w CODE_2A9930
	JSR.w CODE_2A9930
CODE_2A9F5B:
	LDY.b #$00
	LDA.b [!RAM_SMB3_Level_BGDataPtrLo],y
	CMP.b #$FF
	BEQ.b CODE_2A9F6B
	JSR.w CODE_2A8E54
	JSR.w (DATA_2A9F6D,x)
	BRA.b CODE_2A9F5B

CODE_2A9F6B:
	PLB
	RTL

DATA_2A9F6D:
	dw CODE_2A9F7D
	dw CODE_2A9F84
	dw CODE_2A9F8B
	dw CODE_2A9F92
	dw CODE_2A9F99
	dw CODE_2A9FA0
	dw CODE_2A9FA7
	dw CODE_2AA066

;--------------------------------------------------------------------

CODE_2A9F7D:
	REP.b #$10
	LDY.w #$0000
	BRA.b CODE_2A9FAC

CODE_2A9F84:
	REP.b #$10
	LDY.w #$0008
	BRA.b CODE_2A9FAC

CODE_2A9F8B:
	REP.b #$10
	LDY.w #$0010
	BRA.b CODE_2A9FAC

CODE_2A9F92:
	REP.b #$10
	LDY.w #$0018
	BRA.b CODE_2A9FAC

CODE_2A9F99:
	REP.b #$10
	LDY.w #$0020
	BRA.b CODE_2A9FAC

CODE_2A9FA0:
	REP.b #$10
	LDY.w #$0028
	BRA.b CODE_2A9FAC

CODE_2A9FA7:
	REP.b #$10
	LDY.w #$0030
CODE_2A9FAC:
	LDA.b #$01
	STA.b $02
CODE_2A9FB0:
	LDX.b $00
	LDA.b #$04
	STA.b $04
CODE_2A9FB6:
	LDA.w DATA_2AA026,y
	JSR.w CODE_2A8CD9
	INX
	JSR.w CODE_2AA009
	INY
	DEC.b $04
	BNE.b CODE_2A9FB6
	REP.b #$20
	LDA.b $00
	CLC
	ADC.w #$0010
	STA.b $00
	SEP.b #$20
	DEC.b $02
	BEQ.b CODE_2A9FB0
	LDY.w #$0000
CODE_2A9FD8:
	LDA.b #$04
	STA.b $04
	LDX.b $00
CODE_2A9FDE:
	LDA.w DATA_2AA05E,y
	JSR.w CODE_2A8CD9
	INX
	JSR.w CODE_2AA009
	INY
	REP.b #$20
	TYA
	AND.w #$0007
	TAY
	SEP.b #$20
	DEC.b $04
	BNE.b CODE_2A9FDE
	REP.b #$20
	LDA.b $00
	CLC
	ADC.w #$0010
	STA.b $00
	SEP.b #$20
	DEC.b $D8
	BNE.b CODE_2A9FD8
	SEP.b #$10
	RTS

CODE_2AA009:
	REP.b #$20
	TXA
	AND.w #$000F
	BNE.b CODE_2AA023
	LDA.b $DA
	BNE.b CODE_2AA01D
	TXA
	CLC
	ADC.w #$01A0
	TAX
	BRA.b CODE_2AA023

CODE_2AA01D:
	TXA
	SEC
	SBC.w #$01C0
	TAX
CODE_2AA023:
	SEP.b #$20
	RTS

DATA_2AA026:
	db $1D,$1E,$1F,$20,$21,$08,$09,$22
	db $29,$04,$0B,$0C,$07,$08,$09,$0F
	db $14,$15,$05,$2A,$1A,$08,$09,$0A
	db $33,$17,$16,$32,$1C,$08,$09,$1B
	db $14,$15,$0B,$0C,$1A,$08,$09,$0F
	db $14,$15,$16,$32,$1A,$08,$09,$1B
	db $29,$04,$05,$2A,$07,$08,$09,$0A

DATA_2AA05E:
	db $12,$13,$0D,$0E,$18,$19,$10,$11

;--------------------------------------------------------------------

CODE_2AA066:
	REP.b #$10
	LDY.w #$0000
CODE_2AA06B:
	LDX.b $00
	LDA.b #$04
	STA.b $02
CODE_2AA071:
	LDA.l $7F0000,x
	CMP.b #$01
	BNE.b CODE_2AA07F
	LDA.w DATA_2AA09B,y
	JSR.w CODE_2A8CD9
CODE_2AA07F:
	INX
	INY
	CPY.w #$000C
	BCS.b CODE_2AA098
	DEC.b $02
	BNE.b CODE_2AA071
	REP.b #$20
	LDA.b $00
	CLC
	ADC.w #$0010
	STA.b $00
	SEP.b #$20
	BRA.b CODE_2AA06B

CODE_2AA098:
	SEP.b #$10
	RTS

DATA_2AA09B:
	db $25,$26,$27,$28,$2B,$2C,$2D,$2E
	db $2F,$2F,$30,$31

;--------------------------------------------------------------------

; Note: Something related to the cave BG.

CODE_2AA0A7:
	SEP.b #$10
	LDX.b #$00
	LDA.b #$02
	STA.b $00
	LDA.b #$03
	STA.b $01
	STZ.b $02
	LDA.b #$01
	STA.b $03
CODE_2AA0B9:
	LDA.b $00
	JSR.w CODE_2A8D03
	INX
	LDA.b $01
	JSR.w CODE_2A8D03
	INX
	TXA
	AND.b #$0F
	BNE.b CODE_2AA0B9
CODE_2AA0CA:
	LDA.b $02
	JSR.w CODE_2A8D03
	INX
	LDA.b $03
	JSR.w CODE_2A8D03
	INX
	TXA
	AND.b #$0F
	BNE.b CODE_2AA0CA
	TXA
	BNE.b CODE_2AA0B9
CODE_2AA0DE:
	LDA.b $00
	JSR.w CODE_2A8D25
	INX
	LDA.b $01
	JSR.w CODE_2A8D25
	INX
	TXA
	AND.b #$0F
	BNE.b CODE_2AA0DE
	CPX.b #$B0
	BCS.b CODE_2AA106
CODE_2AA0F3:
	LDA.b $02
	JSR.w CODE_2A8D25
	INX
	LDA.b $03
	JSR.w CODE_2A8D25
	INX
	TXA
	AND.b #$0F
	BNE.b CODE_2AA0F3
	BRA.b CODE_2AA0DE

CODE_2AA106:
	LDY.b #$00
	LDA.b [!RAM_SMB3_Level_BGDataPtrLo],y
	CMP.b #$FF
	BEQ.b CODE_2AA116
	JSR.w CODE_2A8E54
	JSR.w (DATA_2AA118,x)
	BRA.b CODE_2AA106

CODE_2AA116:
	PLB
	RTL

DATA_2AA118:
	dw CODE_2AA120
	dw CODE_2AA143
	dw CODE_2AA153
	dw CODE_2AA15F

CODE_2AA120:
	JSR.w CODE_2AA143
	REP.b #$10
	LDA.b $DA
	BEQ.b CODE_2AA12B
	STA.b $D8
CODE_2AA12B:
	JSR.w CODE_2AA136
	LDA.b #$04
	JSR.w CODE_2A8CD9
	SEP.b #$10
	RTS

CODE_2AA136:
	REP.b #$20
	LDA.b $00
	CLC
	ADC.b $D8
	STA.b $00
	TAX
	SEP.b #$20
	RTS

CODE_2AA143:
	JSR.w CODE_2AA153
	REP.b #$10
	JSR.w CODE_2AA136
	LDA.b #$04
	JSR.w CODE_2A8CD9
	SEP.b #$10
	RTS

CODE_2AA153:
	REP.b #$10
	LDX.b $00
	LDA.b #$04
	JSR.w CODE_2A8CD9
	SEP.b #$10
	RTS

CODE_2AA15F:
	REP.b #$10
	JSR.w CODE_2AA153
	JSR.w CODE_2AA136
	JSR.w CODE_2AA153
	JSR.w CODE_2AA136
	JSR.w CODE_2AA153
	LDA.b $DA
	BEQ.b CODE_2AA176
	STA.b $D8
CODE_2AA176:
	JSR.w CODE_2AA136
	LDA.b #$04
	JSR.w CODE_2A8CD9
	SEP.b #$10
	RTS

;--------------------------------------------------------------------

CODE_2AA181:
	SEP.b #$10
	LDX.b #$40
	LDA.b #$3C
	STA.b $00
	LDA.b #$40
	STA.b $01
	LDA.b #$08
	STA.b $04
	JSR.w CODE_2A974B
	LDA.b #$41
	STA.b $00
	LDA.b #$42
	STA.b $01
	LDA.b #$08
	STA.b $04
	JSR.w CODE_2A974B
	LDA.b #$43
	STA.b $00
	JSR.w CODE_2A9930
	INC.b $00
	JSR.w CODE_2A9930
	JSR.w CODE_2A9930
CODE_2AA1B2:
	LDY.b #$00
	LDA.b [!RAM_SMB3_Level_BGDataPtrLo],y
	CMP.b #$FF
	BEQ.b CODE_2AA1C2
	JSR.w CODE_2A8E54
	JSR.w (DATA_2AA219,x)
	BRA.b CODE_2AA1B2

CODE_2AA1C2:
	LDA.w !RAM_SMB3_Level_GraphicsAndPaletteSettingFromHeader
	CMP.b #$0B
	BEQ.b CODE_2AA1CD
	CMP.b #$2F
	BNE.b CODE_2AA217
CODE_2AA1CD:
	LDA.b #$00
	XBA
	REP.b #$10
	LDY.w #$7F00C0
	LDX.w #$7F00D0
	LDA.b #$AF
	MVN $7F00C0>>16,$7F00D0>>16
	LDA.b #$00
	XBA
	LDY.w #$7F0270
	LDX.w #$7F0280
	LDA.b #$AF
	MVN $7F0270>>16,$7F0280>>16
	LDA.b #$00
	XBA
	LDY.w #$7F0420
	LDX.w #$7F0430
	LDA.b #$AF
	MVN $7F0420>>16,$7F0430>>16
	LDA.b #$00
	XBA
	LDY.w #$7F05D0
	LDX.w #$7F05E0
	LDA.b #$AF
	MVN $7F05D0>>16,$7F05E0>>16
	LDA.b #$00
	XBA
	LDY.w #$7F0780
	LDX.w #$7F0790
	LDA.b #$AF
	MVN $7F0780>>16,$7F0790>>16
	SEP.b #$10
CODE_2AA217:
	PLB
	RTL

DATA_2AA219:
	dw CODE_2AA221
	dw CODE_2AA225
	dw CODE_2AA229
	dw CODE_2AA22D

CODE_2AA221:
	LDY.b #$00
	BRA.b CODE_2AA22F

CODE_2AA225:
	LDY.b #$02
	BRA.b CODE_2AA22F

CODE_2AA229:
	LDY.b #$04
	BRA.b CODE_2AA22F

CODE_2AA22D:
	LDY.b #$06
CODE_2AA22F:
	LDA.b #DATA_2AA280>>16
	STA.b $08
	STA.b $0B
	STA.b $0E
	REP.b #$30
	LDA.w DATA_2AA268,y
	STA.b $06
	LDA.w DATA_2AA270,y
	STA.b $09
	LDA.w DATA_2AA278,y
	STA.b $0C
	STZ.b $04
	SEP.b #$20
	LDA.w DATA_2AA260,y
	STA.b $0F
	LDX.b $00
	LDY.w #$0000
	LDA.b [$0C]
	STA.b $02
	JSR.w CODE_2A8FA7
	SEP.b #$10
	RTS

DATA_2AA260:
	dw $0007,$0006,$0004,$0005

DATA_2AA268:
	dw DATA_2AA280
	dw DATA_2AA2BD
	dw DATA_2AA2CE
	dw DATA_2AA2E4

DATA_2AA270:
	dw DATA_2AA2FF
	dw DATA_2AA30B
	dw DATA_2AA315
	dw DATA_2AA31B

DATA_2AA278:
	dw DATA_2AA323
	dw DATA_2AA32A
	dw DATA_2AA330
	dw DATA_2AA334

DATA_2AA280:
	db $45,$01,$02,$03,$04,$05,$06,$07
	db $03,$0A,$0B,$0C,$0D,$0E,$0F,$03
	db $0A,$16,$17,$18,$16,$19,$1A,$1B
	db $03,$0A,$20,$21,$16,$16,$16,$22
	db $23,$24,$1B,$03,$29,$2A,$16,$16
	db $16,$16,$2B,$2C,$2D,$2E,$2F,$1B
	db $35,$36,$35,$36,$35,$36,$35,$36
	db $35,$36,$37,$38,$37

DATA_2AA2BD:
	db $08,$09,$10,$11,$12,$1C,$1D,$12
	db $25,$26,$12,$30,$26,$12,$39,$3A
	db $3B

DATA_2AA2CE:
	db $45,$01,$02,$03,$04,$05,$06,$0F
	db $03,$31,$0B,$0C,$32,$33,$1B,$36
	db $35,$36,$35,$36,$37,$38

DATA_2AA2E4:
	db $13,$14,$15,$1E,$10,$1C,$1F,$12
	db $10,$1C,$1C,$27,$28,$12,$1C,$1C
	db $1C,$34,$26,$12,$3D,$3E,$3D,$3E
	db $3A,$3B,$3F

DATA_2AA2FF:
	db $0F,$00,$0F,$00,$0F,$00,$0F,$00
	db $0F,$00,$10,$00

DATA_2AA30B:
	db $10,$00,$11,$00,$11,$00,$11,$00
	db $10,$00

DATA_2AA315:
	db $0F,$00,$0F,$00,$10,$00

DATA_2AA31B:
	db $0F,$00,$10,$00,$11,$00,$10,$00

DATA_2AA323:
	db $03,$05,$07,$09,$0B,$0D,$0D

DATA_2AA32A:
	db $02,$03,$03,$03,$03,$03

DATA_2AA330:
	db $03,$05,$07,$07

DATA_2AA334:
	db $03,$05,$06,$06,$07

;--------------------------------------------------------------------

CODE_2AA339:
	SEP.b #$10
	JSR.w CODE_2AA38B
	LDX.b #$40
	LDA.b #$05
	STA.b $00
CODE_2AA344:
	LDA.b $00
	JSR.w CODE_2A8D25
CODE_2AA349:
	INC
	INX
	JSR.w CODE_2A8D25
	CMP.b #$0C
	BNE.b CODE_2AA349
	INX
	TXA
	AND.b #$0F
	BNE.b CODE_2AA344
	REP.b #$10
	LDX.w #$0146
	LDA.b #$07
	STA.b $00
	JSR.w CODE_2A8CD9
	INC
	INX
	JSR.w CODE_2A8CD9
	INC
	INX
	JSR.w CODE_2A8CD9
	INC
	INX
	JSR.w CODE_2A8CD9
	SEP.b #$10
CODE_2AA375:
	LDY.b #$00
	LDA.b [!RAM_SMB3_Level_BGDataPtrLo],y
	CMP.b #$FF
	BEQ.b CODE_2AA385
	JSR.w CODE_2A8E54
	JSR.w (DATA_2AA387,x)
	BRA.b CODE_2AA375

CODE_2AA385:
	PLB
	RTL

DATA_2AA387:
	dw CODE_2AA3E1
	dw CODE_2AA40E

;--------------------------------------------------------------------

CODE_2AA38B:
	LDX.b #$B0
	LDA.b #$41
	STA.b $00
	JSR.w CODE_2A9924
	LDA.b #$01
	STA.b $00
	JSR.w CODE_2A9924
	INC.b $00
	JSR.w CODE_2A9924
	INC.b $00
	JSR.w CODE_2A9924
	INC.b $00
	JSR.w CODE_2A9924
CODE_2AA3AA:
	JSR.w CODE_2A9930
	CPX.b #$50
	BNE.b CODE_2AA3AA
	LDX.b #$50
	LDA.b #$0D
	STA.b $00
	LDA.b #$0E
	STA.b $01
	LDA.b #$0F
	STA.b $02
	LDA.b #$10
	STA.b $03
	LDA.b #$04
	STA.b $04
	JSR.w CODE_2A975C
	LDA.b #$11
	STA.b $00
	LDA.b #$12
	STA.b $01
	LDA.b #$08
	STA.b $04
	JSR.w CODE_2A974B
	LDA.b #$14
	STA.b $00
	JSR.w CODE_2A9930
	RTS

CODE_2AA3E1:
	REP.b #$10
	LDX.b $00
	LDA.b #$3B
	JSR.w CODE_2A8CD9
	LDA.b #$3E
	JSR.w CODE_2A8CEE
CODE_2AA3EF:
	DEC.b $D8
	BEQ.b CODE_2AA400
	INX
	LDA.b #$3C
	JSR.w CODE_2A8CD9
	LDA.b #$3F
	JSR.w CODE_2A8CEE
	BRA.b CODE_2AA3EF

CODE_2AA400:
	INX
	LDA.b #$3D
	JSR.w CODE_2A8CD9
	LDA.b #$40
	JSR.w CODE_2A8CEE
	SEP.b #$10
	RTS

CODE_2AA40E:
	REP.b #$10
	LDX.b $00
	LDA.b #$35
	JSR.w CODE_2A8CD9
	LDA.b #$38
	JSR.w CODE_2A8CEE
CODE_2AA41C:
	DEC.b $D8
	BEQ.b CODE_2AA43C
	INX
	TXA
	AND.b #$0F
	BNE.b CODE_2AA430
	REP.b #$20
	TXA
	CLC
	ADC.w #$01A0
	TAX
	SEP.b #$20
CODE_2AA430:
	LDA.b #$36
	JSR.w CODE_2A8CD9
	LDA.b #$39
	JSR.w CODE_2A8CEE
	BRA.b CODE_2AA41C

CODE_2AA43C:
	INX
	LDA.b #$37
	JSR.w CODE_2A8CD9
	LDA.b #$3A
	JSR.w CODE_2A8CEE
	SEP.b #$10
	RTS

CODE_2AA44A:
	SEP.b #$10
	JSR.w CODE_2AA38B
	LDX.b #$50
	LDA.b #$0F
	STA.b $00
	LDA.b #$10
	STA.b $01
	LDA.b #$0D
	STA.b $02
	LDA.b #$0E
	STA.b $03
	LDA.b #$04
	STA.b $04
	JSR.w CODE_2A975C
CODE_2AA468:
	LDY.b #$00
	LDA.b [!RAM_SMB3_Level_BGDataPtrLo],y
	CMP.b #$FF
	BEQ.b CODE_2AA478
	JSR.w CODE_2A8E54
	JSR.w (DATA_2AA4F9,x)
	BRA.b CODE_2AA468

CODE_2AA478:
	LDA.w $0350
	CMP.b #$19
	BNE.b CODE_2AA4F7
	LDA.b #$00
	XBA
	INC.w $034F
	REP.b #$10
	LDY.w #$7F0000
	LDX.w #$7F00B0
	LDA.b #$CF
	MVN $7F0000>>16,$7F00B0>>16
	LDA.b #$00
	XBA
	LDY.w #$7F01B0
	LDX.w #$7F0260
	LDA.b #$CF
	MVN $7F01B0>>16,$7F0260>>16
	SEP.b #$10
	LDA.b #$42
	STA.b $00
	LDA.b #$43
	STA.b $01
	REP.b #$20
	PHB
	LDY.b #$7F00D0>>16
	PHY
	PLB
	LDY.b #$00
	LDX.b #$00
CODE_2AA4B5:
	LDA.b $00
	STA.w $7F00D0,x
	STA.w $7F00F0,x
	STA.w $7F0110,x
	STA.w $7F0130,x
	STA.w $7F0150,x
	STA.w $7F0170,x
	STA.w $7F0190,x
	STA.w $7F0280,x
	STA.w $7F02A0,x
	STA.w $7F02C0,x
	STA.w $7F02E0,x
	STA.w $7F0300,x
	STA.w $7F0320,x
	STA.w $7F0340,x
	INX
	INX
	TXA
	AND.w #$000F
	BNE.b CODE_2AA4B5
	TYA
	BNE.b CODE_2AA4F4
	INY
	LDA.b $00
	XBA
	STA.b $00
	BRA.b CODE_2AA4B5

CODE_2AA4F4:
	PLB
	SEP.b #$20
CODE_2AA4F7:
	PLB
	RTL

DATA_2AA4F9:
	dw CODE_2AA3E1
	dw CODE_2AA40E
	dw CODE_2AA505
	dw CODE_2AA5AB
	dw CODE_2AA600
	dw CODE_2AA65A

CODE_2AA505:
	REP.b #$10
	STZ.b $02
CODE_2AA509:
	LDX.b $00
	LDA.l $7F0000,x
	CMP.b #$04
	BNE.b CODE_2AA562
	LDA.b $02
	STA.b $03
	LDA.b #$16
	JSR.w CODE_2A8CD9
	LDA.b $03
	BEQ.b CODE_2AA532
	INX
	LDA.b #$18
	JSR.w CODE_2A8CD9
CODE_2AA526:
	DEC.b $03
	BEQ.b CODE_2AA532
	INX
	LDA.b #$1A
	JSR.w CODE_2A8CD9
	BRA.b CODE_2AA526

CODE_2AA532:
	LDA.b $02
	STA.b $03
CODE_2AA536:
	LDA.b $03
	BEQ.b CODE_2AA54C
	DEC.b $03
	BEQ.b CODE_2AA546
	INX
	LDA.b #$1B
	JSR.w CODE_2A8CD9
	BRA.b CODE_2AA536

CODE_2AA546:
	INX
	LDA.b #$19
	JSR.w CODE_2A8CD9
CODE_2AA54C:
	INX
	LDA.b #$17
	JSR.w CODE_2A8CD9
	INC.b $02
	REP.b #$20
	LDA.b $00
	CLC
	ADC.w #$000F
	STA.b $00
	SEP.b #$20
	BRA.b CODE_2AA509

CODE_2AA562:
	INX
CODE_2AA563:
	LDA.b #$2D
	STA.b $02
CODE_2AA567:
	LDA.l $7EFFF0,x
	CMP.b #$1B
	BEQ.b CODE_2AA57F
	LDA.b $02
	JSR.w CODE_2A8CD9
	INX
	INC.b $02
	LDA.b $02
	CMP.b #$31
	BEQ.b CODE_2AA563
	BRA.b CODE_2AA567

CODE_2AA57F:
	LDA.b $02
	CLC
	ADC.b #$06
	CMP.b #$35
	BNE.b CODE_2AA58A
	LDA.b #$31
CODE_2AA58A:
	STA.b $02
CODE_2AA58C:
	LDA.l $7EFFF0,x
	CMP.b #$04
	BEQ.b CODE_2AA5A8
	LDA.b $02
	JSR.w CODE_2A8CD9
	INX
	INC.b $02
	LDA.b $02
	CMP.b #$35
	BNE.b CODE_2AA58C
	LDA.b #$31
	STA.b $02
	BRA.b CODE_2AA58C

CODE_2AA5A8:
	SEP.b #$10
	RTS

CODE_2AA5AB:
	REP.b #$10				;\ Optimization: REP.b #$30?
	REP.b #$20				;/
	LDA.b $DA
	ASL
	TAY
	LDA.w DATA_2AA5EE,y
	STA.b $02
	SEP.b #$20
	LDX.b $00
CODE_2AA5BC:
	LDA.b ($02)
	BMI.b CODE_2AA5EB
	JSR.w CODE_2A8CD9
	REP.b #$20
	INC.b $02
	SEP.b #$20
	INX
	TXA
	AND.b #$0F
	BNE.b CODE_2AA5BC
	LDA.b $DA
	BNE.b CODE_2AA5DF
	REP.b #$20
	TXA
	CLC
	ADC.w #$01A0
	TAX
	SEP.b #$20
	BRA.b CODE_2AA5BC

CODE_2AA5DF:
	REP.b #$20
	TXA
	SEC
	SBC.w #$01C0
	TAX
	SEP.b #$20
	BRA.b CODE_2AA5BC

CODE_2AA5EB:
	SEP.b #$10
	RTS

DATA_2AA5EE:
	db $F2,$A5,$FB,$A5,$26,$27,$2B,$2C
	db $09,$0A,$0B,$0C,$FF,$26,$27,$28
	db $29,$FF

CODE_2AA600:
	REP.b #$10
	LDX.b $00
	LDA.b #$1C
	JSR.w CODE_2A8CD9
CODE_2AA609:
	REP.b #$20
	LDA.b $00
	CLC
	ADC.w #$000F
	STA.b $00
	TAX
	SEP.b #$20
	LDA.l $7F0000,x
	CMP.b #$19
	BEQ.b CODE_2AA651
	LDA.b #$1D
	JSR.w CODE_2A8CD9
CODE_2AA623:
	INX
	TXA
	AND.b #$0F
	BNE.b CODE_2AA633
	REP.b #$20
	TXA
	SEC
	SBC.w #$01C0
	TAX
	SEP.b #$20
CODE_2AA633:
	LDA.l $7EFFF0,x
	CMP.b #$04
	BEQ.b CODE_2AA642
	LDA.b #$1E
	JSR.w CODE_2A8CD9
	BRA.b CODE_2AA623

CODE_2AA642:
	LDA.l $7F0000,x
	CMP.b #$04
	BNE.b CODE_2AA609
	LDA.b #$1F
	JSR.w CODE_2A8CD9
	BRA.b CODE_2AA609

CODE_2AA651:
	INX
	LDA.b #$25
	JSR.w CODE_2A8CD9
	SEP.b #$10
	RTS

CODE_2AA65A:
	REP.b #$10
	LDX.b $00
	LDA.b #$20
	JSR.w CODE_2A8CD9
	INX
	LDA.b #$21
	JSR.w CODE_2A8CD9
	REP.b #$20
	LDA.b $00
	CLC
	ADC.w #$000F
	STA.b $00
	TAX
	SEP.b #$20
	LDA.b #$22
	JSR.w CODE_2A8CD9
	INX
	LDA.b #$23
	JSR.w CODE_2A8CD9
	INX
	LDA.b #$24
	JSR.w CODE_2A8CD9
	REP.b #$20
	LDA.b $00
	CLC
	ADC.w #$0011
	TAX
	SEP.b #$20
	LDA.b #$2A
	JSR.w CODE_2A8CD9
	SEP.b #$10
	RTS

;--------------------------------------------------------------------

CODE_2AA69A:
	SEP.b #$10
	LDA.w !RAM_SMB3_Global_CurrentWorld
	CMP.b #$05
	BNE.b CODE_2AA6A8
	LDA.b #$12
	STA.w !RAM_SMB3_Level_Layer2BGPaletteFromHeader
CODE_2AA6A8:
	LDX.b #$40
	LDA.b #$28
	STA.b $00
CODE_2AA6AE:
	JSR.w CODE_2A9930
	CPX.b #$80
	BNE.b CODE_2AA6AE
CODE_2AA6B5:
	LDY.b #$00
	LDA.b [!RAM_SMB3_Level_BGDataPtrLo],y
	CMP.b #$FF
	BEQ.b CODE_2AA6C5
	JSR.w CODE_2A8E54
	JSR.w (DATA_2AA6C7,x)
	BRA.b CODE_2AA6B5

CODE_2AA6C5:
	PLB
	RTL

DATA_2AA6C7:
	dw CODE_2AA6D7
	dw CODE_2AA755
	dw CODE_2AA8A5
	dw CODE_2AA8D5
	dw CODE_2AA926
	dw CODE_2AA92C
	dw CODE_2AA932
	dw CODE_2AA938

CODE_2AA6D7:
	REP.b #$10
	LDX.b $00
	LDA.l $7F0000,x
	BNE.b CODE_2AA6E5
	LDA.b #$05
	BRA.b CODE_2AA6E7

CODE_2AA6E5:
	LDA.b #$0C
CODE_2AA6E7:
	JSR.w CODE_2A8CD9
	INX
	TXA
	AND.b #$0F
	BNE.b CODE_2AA6FA
	REP.b #$20
	TXA
	CLC
	ADC.w #$01A0
	TAX
	SEP.b #$20
CODE_2AA6FA:
	LDA.l $7F0000,x
	BNE.b CODE_2AA704
	LDA.b #$2E
	BRA.b CODE_2AA706

CODE_2AA704:
	LDA.b #$0B
CODE_2AA706:
	JSR.w CODE_2A8CD9
CODE_2AA709:
	REP.b #$20
	LDA.b $00
	CLC
	ADC.w #$0010
	STA.b $00
	TAX
	SEP.b #$20
	DEC.b $D8
	BEQ.b CODE_2AA736
	LDA.b #$19
	JSR.w CODE_2A8CD9
	INX
	TXA
	AND.b #$0F
	BNE.b CODE_2AA72F
	REP.b #$20
	TXA
	CLC
	ADC.w #$01A0
	TAX
	SEP.b #$20
CODE_2AA72F:
	LDA.b #$06
	JSR.w CODE_2A8CD9
	BRA.b CODE_2AA709

CODE_2AA736:
	LDA.b $DA
	BEQ.b CODE_2AA747
	LDA.b #$1E
	JSR.w CODE_2A8CD9
	INX
	LDA.b #$1F
	JSR.w CODE_2A8CD9
	BRA.b CODE_2AA752

CODE_2AA747:
	LDA.b #$26
	JSR.w CODE_2A8CD9
	INX
	LDA.b #$27
	JSR.w CODE_2A8CD9
CODE_2AA752:
	SEP.b #$10
	RTS

CODE_2AA755:
	REP.b #$10
	LDA.b $D8
	STA.b $DA
	LDX.b $00
	LDY.w #$0001
	LDA.b #$19
	STA.b $02
	JSR.w CODE_2AA879
	JSR.w CODE_2A8CD9
	DEC.b $DA
	JSR.w CODE_2AA86E
	LDY.w #$0007
	JSR.w CODE_2AA88F
	JSR.w CODE_2A8CD9
	DEC.b $DA
	LDA.b #$13
	STA.b $02
	JSR.w CODE_2AA861
	JSR.w CODE_2AA86E
	LDA.b #$22
	JSR.w CODE_2A8CD9
	LDA.b $D8
	STA.b $DA
	REP.b #$20
	INC.b $00
	SEP.b #$20
	LDA.b $00
	AND.b #$0F
	BNE.b CODE_2AA7AA
	REP.b #$20
	LDA.b $00
	SEC
	SBC.w #$01C0
	STA.b $00
	TAX
	SEP.b #$20
	LDA.b #$0E
	BRA.b CODE_2AA7B6

CODE_2AA7AA:
	LDX.b $00
	LDA.b #$06
	STA.b $02
	LDY.w #$0002
	JSR.w CODE_2AA879
CODE_2AA7B6:
	JSR.w CODE_2A8CD9
	DEC.b $DA
	JSR.w CODE_2AA86E
	LDA.b #$08
	JSR.w CODE_2A8CD9
	DEC.b $DA
	LDA.b #$14
	STA.b $02
	JSR.w CODE_2AA861
	JSR.w CODE_2AA86E
	LDA.b #$23
	JSR.w CODE_2A8CD9
	REP.b #$20
	INC.b $00
	SEP.b #$20
	LDX.b $00
	LDA.b $D8
	STA.b $DA
	LDA.b #$13
	STA.b $02
	LDY.w #$0003
	JSR.w CODE_2AA879
	JSR.w CODE_2A8CD9
	DEC.b $DA
	JSR.w CODE_2AA86E
	LDA.b #$09
	JSR.w CODE_2A8CD9
	DEC.b $DA
	LDA.b #$11
	STA.b $02
	JSR.w CODE_2AA861
	JSR.w CODE_2AA86E
	LDA.b #$24
	JSR.w CODE_2A8CD9
	REP.b #$20
	INC.b $00
	SEP.b #$20
	LDX.b $00
	LDA.b $D8
	STA.b $DA
	LDA.b #$14
	STA.b $02
	LDY.w #$0004
	JSR.w CODE_2AA879
	JSR.w CODE_2A8CD9
	DEC.b $DA
	JSR.w CODE_2AA86E
	LDA.b #$06
	STA.b $02
	LDY.w #$000A
	JSR.w CODE_2AA88F
	LDA.l $7F0000,x
	CMP.b #$14
	BNE.b CODE_2AA83B
	LDY.w #$001B
CODE_2AA83B:
	TYA
	JSR.w CODE_2A8CD9
	DEC.b $DA
	LDA.b #$12
	STA.b $02
	JSR.w CODE_2AA861
	JSR.w CODE_2AA86E
	LDA.b #$25
	JSR.w CODE_2A8CD9
	INX
	LDA.l $7F0000,x
	CMP.b #$2A
	BNE.b CODE_2AA85E
	LDA.b #$2C
	JSR.w CODE_2A8CD9
CODE_2AA85E:
	SEP.b #$10
	RTS

CODE_2AA861:
	JSR.w CODE_2AA86E
	LDA.b $02
	JSR.w CODE_2A8CD9
	DEC.b $DA
	BNE.b CODE_2AA861
	RTS

CODE_2AA86E:
	REP.b #$20
	TXA
	CLC
	ADC.w #$0010
	TAX
	SEP.b #$20
	RTS

CODE_2AA879:
	LDA.l $7F0000,x
	BEQ.b CODE_2AA88D
	CMP.b $02
	BEQ.b CODE_2AA888
	TYA
	CLC
	ADC.b #$08
	TAY
CODE_2AA888:
	TYA
	CLC
	ADC.b #$0C
	TAY
CODE_2AA88D:
	TYA
	RTS

CODE_2AA88F:
	LDA.l $7F0000,x
	BEQ.b CODE_2AA8A3
	CMP.b $02
	BEQ.b CODE_2AA89E
	TYA
	CLC
	ADC.b #$02
	TAY
CODE_2AA89E:
	TYA
	CLC
	ADC.b #$13
	TAY
CODE_2AA8A3:
	TYA
	RTS

CODE_2AA8A5:
	REP.b #$10
	LDX.b $00
	LDA.l $7EFFFF,x
	CMP.b #$25
	BEQ.b CODE_2AA8B5
	LDA.b #$2A
	BRA.b CODE_2AA8B7

CODE_2AA8B5:
	LDA.b #$2C
CODE_2AA8B7:
	JSR.w CODE_2A8CD9
	INX
	LDA.b #$2A
	JSR.w CODE_2A8CD9
	INX
	LDA.l $7F0001,x
	CMP.b #$22
	BEQ.b CODE_2AA8CD
	LDA.b #$2A
	BRA.b CODE_2AA8CF

CODE_2AA8CD:
	LDA.b #$2B
CODE_2AA8CF:
	JSR.w CODE_2A8CD9
	SEP.b #$10
	RTS

CODE_2AA8D5:
	REP.b #$10
	LDX.b $00
	LDA.l $7F0000,x
	CMP.b #$27
	BEQ.b CODE_2AA8E9
	CMP.b #$28
	BNE.b CODE_2AA8EE
	LDA.b #$21
	BRA.b CODE_2AA8EB

CODE_2AA8E9:
	LDA.b #$29
CODE_2AA8EB:
	JSR.w CODE_2A8CD9
CODE_2AA8EE:
	INX
	TXA
	AND.b #$0F
	BNE.b CODE_2AA8FE
	REP.b #$20
	TXA
	CLC
	ADC.w #$01A0
	TAX
	SEP.b #$20
CODE_2AA8FE:
	LDA.b $D8
	BEQ.b CODE_2AA916
	DEC.b $D8
CODE_2AA904:
	LDA.l $7F0000,x
	CMP.b #$28
	BNE.b CODE_2AA911
	LDA.b #$2D
	JSR.w CODE_2A8CD9
CODE_2AA911:
	INX
	DEC.b $D8
	BNE.b CODE_2AA904
CODE_2AA916:
	LDA.l $7F0000,x
	CMP.b #$28
	BNE.b CODE_2AA923
	LDA.b #$20
	JSR.w CODE_2A8CD9
CODE_2AA923:
	SEP.b #$10
	RTS

CODE_2AA926:
	LDA.b #$2F
	STA.b $02
	BRA.b CODE_2AA93C

CODE_2AA92C:
	LDA.b #$30
	STA.b $02
	BRA.b CODE_2AA93C

CODE_2AA932:
	LDA.b #$31
	STA.b $02
	BRA.b CODE_2AA93C

CODE_2AA938:
	LDA.b #$32
	STA.b $02
CODE_2AA93C:
	REP.b #$10
	LDX.b $00
	LDA.b $02
	JSR.w CODE_2A8CD9
	SEP.b #$10
	RTS

;--------------------------------------------------------------------

CODE_2AA948:
	SEP.b #$10
CODE_2AA94A:
	LDY.b #$00
	LDA.b [!RAM_SMB3_Level_BGDataPtrLo],y
	CMP.b #$FF
	BEQ.b CODE_2AA95A
	JSR.w CODE_2A8E54
	JSR.w (DATA_2AA95C,x)
	BRA.b CODE_2AA94A

CODE_2AA95A:
	PLB
	RTL

DATA_2AA95C:
	dw CODE_2AA966
	dw CODE_2AA9B7
	dw CODE_2AA9F6
	dw CODE_2AAA12
	dw CODE_2AAA57

CODE_2AA966:
	REP.b #$30
	LDA.w #DATA_2AA9AF
	STA.b $02
	LDA.w #DATA_2AA9B3
	STA.b $04
	SEP.b #$20
	JSR.w CODE_2AA97A
	SEP.b #$10
	RTS

CODE_2AA97A:
	LDX.b $00
CODE_2AA97C:
	LDY.w #$0000
CODE_2AA97F:
	LDA.b ($02),y
	JSR.w CODE_2A8CD9
	LDA.b ($04),y
	JSR.w CODE_2A8CEE
	INX
	TXA
	AND.b #$0F
	BNE.b CODE_2AA9A4
	REP.b #$20
	TXA
	CMP.w #$01B0
	BCS.b CODE_2AA99D
	CLC
	ADC.w #$01A0
	BRA.b CODE_2AA9A1

CODE_2AA99D:
	SEC
	SBC.w #$01C0
CODE_2AA9A1:
	TAX
	SEP.b #$20
CODE_2AA9A4:
	INY
	TYA
	AND.b #$03
	BNE.b CODE_2AA97F
	DEC.b $D8
	BNE.b CODE_2AA97C
	RTS

DATA_2AA9AF:
	db $04,$05,$06,$07

DATA_2AA9B3:
	db $02,$03,$00,$01

CODE_2AA9B7:
	REP.b #$30
	LDA.w #DATA_2AA9EE
	STA.b $02
	LDA.w #DATA_2AA9F2
	STA.b $04
	SEP.b #$20
	JSR.w CODE_2AA9CB
	SEP.b #$10
	RTS

CODE_2AA9CB:
	LDY.w #$0000
CODE_2AA9CE:
	LDX.b $00
	LDA.b ($02),y
	JSR.w CODE_2A8CD9
	INX
	LDA.b ($04),y
	JSR.w CODE_2A8CD9
	REP.b #$20
	LDA.b $00
	CLC
	ADC.w #$0010
	STA.b $00
	SEP.b #$20
	INY
	TYA
	AND.b #$03
	BNE.b CODE_2AA9CE
	RTS

DATA_2AA9EE:
	db $04,$08,$08,$02

DATA_2AA9F2:
	db $07,$09,$09,$01

CODE_2AA9F6:
	REP.b #$10
	LDX.b $00
	LDA.b #$04
	JSR.w CODE_2A8CD9
	LDA.b #$02
	JSR.w CODE_2A8CEE
	INX
	LDA.b #$07
	JSR.w CODE_2A8CD9
	LDA.b #$01
	JSR.w CODE_2A8CEE
	SEP.b #$10
	RTS

CODE_2AAA12:
	REP.b #$30
	LDA.b $D8
	STA.b $DA
	LDA.w #DATA_2AAA47
	STA.b $02
	LDA.w #DATA_2AAA4B
	STA.b $04
	SEP.b #$20
	JSR.w CODE_2AA97A
	REP.b #$20
	LDA.b $DA
	STA.b $D8
	LDA.b $00
	CLC
	ADC.w #$0020
	STA.b $00
	LDA.w #DATA_2AAA4F
	STA.b $02
	LDA.w #DATA_2AAA53
	STA.b $04
	SEP.b #$20
	JSR.w CODE_2AA97A
	SEP.b #$10
	RTS

DATA_2AAA47:
	db $04,$05,$06,$07

DATA_2AAA4B:
	db $0E,$0F,$10,$11

DATA_2AAA4F:
	db $0E,$0F,$10,$11

DATA_2AAA53:
	db $02,$03,$00,$01

CODE_2AAA57:
	REP.b #$30
	LDA.w #DATA_2AAA87
	STA.b $02
	LDA.w #DATA_2AAA8B
	STA.b $04
	LDA.b $00
	PHA
	SEP.b #$20
	JSR.w CODE_2AA9CB
	REP.b #$20
	PLA
	INC
	INC
	STA.b $00
	AND.w #$000F
	BNE.b CODE_2AAA7F
	LDA.b $00
	CLC
	ADC.w #$01A0
	STA.b $00
CODE_2AAA7F:
	SEP.b #$20
	JSR.w CODE_2AA9CB
	SEP.b #$10
	RTS

DATA_2AAA87:
	db $0A,$0C,$0D,$0A

DATA_2AAA8B:
	db $0B,$0C,$0D,$0B

;--------------------------------------------------------------------

CODE_2AAA8F:
	SEP.b #$10
	LDX.b #$10
	LDA.b #$1B
	STA.b $00
	JSR.w CODE_2A9930
	LDA.b #$1E
	STA.b $00
	JSR.w CODE_2A9930
	LDX.b #$50
	LDA.b #$3B
	STA.b $00
	JSR.w CODE_2A9930
	JSR.w CODE_2A9930
	JSR.w CODE_2A9930
	JSR.w CODE_2A9930
	JSR.w CODE_2A9930
CODE_2AAAB6:
	LDY.b #$00
	LDA.b [!RAM_SMB3_Level_BGDataPtrLo],y
	CMP.b #$FF
	BEQ.b CODE_2AAAC6
	JSR.w CODE_2A8E54
	JSR.w (DATA_2AAAC8,x)
	BRA.b CODE_2AAAB6

CODE_2AAAC6:
	PLB
	RTL

DATA_2AAAC8:
	dw CODE_2AAACE
	dw CODE_2AAB8D
	dw CODE_2AABB1

CODE_2AAACE:
	LDA.b #DATA_2AAB31>>16
	STA.b $08
	STA.b $0B
	STA.b $0E
	REP.b #$30
	LDX.b $D8
	LDA.w DATA_2AAB0D,x
	STA.b $06
	LDA.w DATA_2AAB19,x
	STA.b $09
	LDA.w DATA_2AAB25,x
	STA.b $0C
	STZ.b $04
	SEP.b #$20
	LDA.w DATA_2AAB01,x
	STA.b $0F
	LDX.b $00
	LDY.w #$0000
	LDA.b [$0C]
	STA.b $02
	JSR.w CODE_2A8FA7
	SEP.b #$10
	RTS

DATA_2AAB01:
	db $04,$00,$02,$00,$02,$00,$02,$00
	db $02,$00,$03,$00

DATA_2AAB0D:
	dw DATA_2AAB31
	dw DATA_2AAB3E
	dw DATA_2AAB46
	dw DATA_2AAB52
	dw DATA_2AAB56
	dw DATA_2AAB63

DATA_2AAB19:
	dw DATA_2AAB72
	dw DATA_2AAB78
	dw DATA_2AAB78
	dw DATA_2AAB78
	dw DATA_2AAB78
	dw DATA_2AAB7A

DATA_2AAB25:
	dw DATA_2AAB7E
	dw DATA_2AAB82
	dw DATA_2AAB84
	dw DATA_2AAB86
	dw DATA_2AAB88
	dw DATA_2AAB8A

DATA_2AAB31:
	db $03,$04,$0C,$0D,$0E,$0C,$12,$16
	db $10,$11,$17,$1C,$1A

DATA_2AAB3E:
	db $0F,$03,$04,$06,$18,$0C,$12,$13

DATA_2AAB46:
	db $16,$06,$19,$03,$04,$06,$1C,$1D
	db $1A,$1B,$1C,$1D

DATA_2AAB52:
	db $10,$11,$05,$1A

DATA_2AAB56:
	db $02,$05,$03,$04,$06,$07,$0B,$0C
	db $0C,$12,$13,$14,$15

DATA_2AAB63:
	db $01,$00,$02,$02,$05,$08,$09,$0A
	db $0B,$0B,$0C,$0C,$0C,$0C,$0C

DATA_2AAB72:
	db $10,$00,$10,$00,$12,$00

DATA_2AAB78:
	db $10,$00

DATA_2AAB7A:
	db $0D,$00,$10,$00

DATA_2AAB7E:
	db $02,$03,$06,$02

DATA_2AAB82:
	db $04,$04

DATA_2AAB84:
	db $06,$06

DATA_2AAB86:
	db $03,$01

DATA_2AAB88:
	db $06,$07

DATA_2AAB8A:
	db $03,$06,$06

CODE_2AAB8D:
	REP.b #$10
	LDX.b $00
	LDA.b #$2B
	STA.b $02
	LDA.b #$37
	STA.b $03
CODE_2AAB99:
	LDA.b $02
	JSR.w CODE_2A8CD9
	LDA.b $03
	JSR.w CODE_2A8CEE
	CMP.b #$3A
	BEQ.b CODE_2AABAE
	INX
	INC.b $02
	INC.b $03
	BRA.b CODE_2AAB99

CODE_2AABAE:
	SEP.b #$10
	RTS

CODE_2AABB1:
	REP.b #$10
	LDX.b $00
	LDY.w #$0004
	LDA.b #$1F
	STA.b $02
	JSR.w CODE_2AABEA
	LDY.w #$0008
	REP.b #$20
	LDA.b $00
	CLC
	ADC.w #$000E
	STA.b $00
	TAX
	SEP.b #$20
	JSR.w CODE_2AABEA
	LDY.w #$0008
	LDA.b #$2F
	STA.b $02
	REP.b #$20
	LDA.b $00
	CLC
	ADC.w #$0010
	TAX
	SEP.b #$20
	JSR.w CODE_2AABEA
	SEP.b #$10
	RTS

CODE_2AABEA:
	LDA.b $02
	JSR.w CODE_2A8CD9
	INC.b $02
	INX
	TXA
	AND.b #$0F
	BNE.b CODE_2AAC01
	REP.b #$20
	TXA
	SEC
	SBC.w #$01C0
	TAX
	SEP.b #$20
CODE_2AAC01:
	DEY
	BNE.b CODE_2AABEA
	RTS

;--------------------------------------------------------------------

CODE_2AAC05:
	SEP.b #$10
	LDA.b #$00
	STA.b $00
	INC
	STA.b $01
	INC
	STA.b $02
	INC
	STA.b $03
	LDX.b #$00
	JSR.w CODE_2AAC59
	LDA.b #$04
	STA.b $00
	INC
	STA.b $01
	INC
	STA.b $02
	INC
	STA.b $03
	LDX.b #$10
	JSR.w CODE_2AAC59
	LDA.b #$08
	STA.b $00
	INC
	STA.b $01
	INC
	STA.b $02
	INC
	STA.b $03
	LDX.b #$20
	JSR.w CODE_2AAC59
	LDA.b #$0C
	STA.b $00
	INC
	STA.b $01
	INC
	STA.b $02
	INC
	STA.b $03
	LDX.b #$30
	JSR.w CODE_2AAC59
	TXA
	CLC
	ADC.b #$30
	TAX
	JSR.w CODE_2AAC8B
	PLB
	RTL

CODE_2AAC59:
	LDA.b $00
	JSR.w CODE_2A8D03
	JSR.w CODE_2A8D25
	INX
	LDA.b $01
	JSR.w CODE_2A8D03
	JSR.w CODE_2A8D25
	INX
	LDA.b $02
	JSR.w CODE_2A8D03
	JSR.w CODE_2A8D25
	INX
	LDA.b $03
	JSR.w CODE_2A8D03
	JSR.w CODE_2A8D25
	INX
	TXA
	AND.b #$0F
	BNE.b CODE_2AAC59
	TXA
	CLC
	ADC.b #$30
	TAX
	CPX.b #$B0
	BCC.b CODE_2AAC59
CODE_2AAC8B:
	LDA.b $00
	JSR.w CODE_2A8D03
	INX
	LDA.b $01
	JSR.w CODE_2A8D03
	INX
	LDA.b $02
	JSR.w CODE_2A8D03
	INX
	LDA.b $03
	JSR.w CODE_2A8D03
	INX
	TXA
	AND.b #$0F
	BNE.b CODE_2AAC8B
	RTS

;--------------------------------------------------------------------

CODE_2AACA9:
	SEP.b #$10
	LDX.b #$D0
	LDA.b #$1B
	STA.b $00
	JSR.w CODE_2A9924
	JSR.w CODE_2A9924
	JSR.w CODE_2A9924
	JSR.w CODE_2A9930
	JSR.w CODE_2A9930
	JSR.w CODE_2A9930
	REP.b #$10
	LDY.w #$0000
	LDX.w #$00B0
	REP.b #$20
	LDA.w #DATA_2AADA3
	STA.b $00
	SEP.b #$20
	JSR.w CODE_2AAD96
	LDX.w #$00E1
	LDA.b #$19
	JSR.w CODE_2A8CD9
	LDX.w #$00F8
	JSR.w CODE_2A8CD9
	INX
	JSR.w CODE_2A8CD9
	LDX.w #$0296
	JSR.w CODE_2A8CD9
	LDX.w #$029A
	JSR.w CODE_2A8CD9
	INX
	JSR.w CODE_2A8CD9
	LDX.w #$02A2
	JSR.w CODE_2A8CD9
	LDY.w #$0000
	LDX.w #$00E5
CODE_2AAD05:
	LDA.w DATA_2AADD3,y
	JSR.w CODE_2A8CD9
	INX
	INY
	CPY.w #$0008
	BNE.b CODE_2AAD05
	LDY.w #$0000
	LDX.w #$0260
	REP.b #$20
	LDA.w #DATA_2AADDB
	STA.b $00
	SEP.b #$20
	JSR.w CODE_2AAD96
	LDY.w #$0000
	LDX.w #$0291
CODE_2AAD2A:
	LDA.w DATA_2AAE0B,y
	JSR.w CODE_2A8CD9
	INX
	INY
	CPY.w #$0004
	BNE.b CODE_2AAD2A
	SEP.b #$10
	LDX.b #$30
	LDA.b #$24
	STA.b $00
	JSR.w CODE_2A9930
	JSR.w CODE_2A9930
	JSR.w CODE_2A9930
	LDA.b #$2E
	STA.b $00
	JSR.w CODE_2A9930
	LDA.b #$29
	STA.b $00
	JSR.w CODE_2A9930
	LDA.b #$26
	STA.b $00
	JSR.w CODE_2A9930
CODE_2AAD5D:
	LDY.b #$00
	LDA.b [!RAM_SMB3_Level_BGDataPtrLo],y
	CMP.b #$FF
	BEQ.b CODE_2AAD6D
	JSR.w CODE_2A8E54
	JSR.w CODE_2AAE0F
	BRA.b CODE_2AAD5D

CODE_2AAD6D:
	LDA.w $0350
	CMP.b #$1E
	BNE.b CODE_2AAD94
	LDA.b #$00
	XBA
	REP.b #$10
	LDY.w #$7F0110
	LDX.w #$7F0120
	LDA.b #$EF
	MVN $7F0110>>16,$7F0120>>16
	LDA.b #$00
	XBA
	LDY.w #$7F02C0
	LDX.w #$7F02D0
	LDA.b #$EF
	MVN $7F02C0>>16,$7F02D0>>16
	SEP.b #$10
CODE_2AAD94:
	PLB
	RTL

CODE_2AAD96:
	LDA.b ($00),y
	JSR.w CODE_2A8CD9
	INX
	INY
	CPY.w #$0030
	BNE.b CODE_2AAD96
	RTS

DATA_2AADA3:
	db $08,$08,$09,$00,$04,$09,$00,$00
	db $00,$00,$04,$08,$09,$00,$04,$08
	db $0F,$10,$11,$01,$0B,$11,$12,$08
	db $03,$01,$0B,$10,$11,$01,$0B,$10
	db $17,$0E,$15,$1A,$13,$0E,$0D,$10
	db $06,$06,$06,$06,$0C,$15,$1A,$1A

DATA_2AADD3:
	db $19,$1D,$13,$0E,$0E,$15,$1A,$16

DATA_2AADDB:
	db $03,$01,$02,$00,$04,$03,$01,$05
	db $06,$06,$06,$06,$06,$06,$06,$07
	db $06,$06,$0A,$01,$0B,$06,$06,$06
	db $06,$06,$06,$06,$06,$06,$0C,$0E
	db $13,$0D,$06,$06,$14,$13,$0E,$15
	db $16,$17,$0E,$0E,$15,$13,$18,$19

DATA_2AAE0B:
	db $17,$0E,$15,$1C

CODE_2AAE0F:
	REP.b #$10
	INC.b $00
	LDX.b $00
	LDY.w #$0000
CODE_2AAE18:
	LDA.w DATA_2AAE71,y
	JSR.w CODE_2A8CD9
	JSR.w CODE_2AAE80
	CPY.w #$0005
	BNE.b CODE_2AAE18
	INC.b $00
	LDX.b $00
	DEC.b $D8
CODE_2AAE2C:
	LDY.w #$0000
CODE_2AAE2F:
	LDA.w DATA_2AAE76,y
	JSR.w CODE_2A8CD9
	JSR.w CODE_2AAE80
	CPY.w #$0005
	BNE.b CODE_2AAE2F
	INC.b $00
	LDA.b $00
	AND.b #$0F
	BNE.b CODE_2AAE51
	REP.b #$20
	LDA.b $00
	SEC
	SBC.w #$01C0
	STA.b $00
	SEP.b #$20
CODE_2AAE51:
	SEP.b #$20
	LDX.b $00
	DEC.b $D8
	BNE.b CODE_2AAE2C
	LDY.w #$0000
CODE_2AAE5C:
	LDA.w DATA_2AAE7B,y
	JSR.w CODE_2A8CD9
	JSR.w CODE_2AAE80
	CPY.w #$0005
	BNE.b CODE_2AAE5C
	INC.b $00
	LDX.b $00
	SEP.b #$10
	RTS

DATA_2AAE71:
	db $1E,$21,$25,$28,$2C

DATA_2AAE76:
	db $1E,$22,$26,$29,$26

DATA_2AAE7B:
	db $1E,$23,$27,$2A,$2D

CODE_2AAE80:
	REP.b #$20
	TXA
	CLC
	ADC.w #$0010
	TAX
	SEP.b #$20
	INY
	RTS

;--------------------------------------------------------------------

CODE_2AAE8C:
	SEP.b #$10
	LDA.b #$01
	STA.w $02D9
	LDX.b #$00
	LDA.b #$13
	STA.b $00
	LDA.b #$14
	STA.b $01
	LDA.b #$15
	STA.b $02
	LDA.b #$16
	STA.b $03
	LDA.b #$04
	STA.b $04
	JSR.w CODE_2A975C
	LDX.b #$10
	LDA.b #$17
	STA.b $00
	LDA.b #$18
	STA.b $01
CODE_2AAEB6:
	LDA.b #$08
	STA.b $04
	JSR.w CODE_2A9779
	TXA
	CLC
	ADC.b #$10
	TAX
	CPX.b #$B0
	BNE.b CODE_2AAEB6
	LDX.b #$20
	LDA.b #$13
	STA.b $00
	LDA.b #$16
	STA.b $01
CODE_2AAED0:
	LDA.b #$08
	STA.b $04
	JSR.w CODE_2A9779
	TXA
	CLC
	ADC.b #$10
	TAX
	CPX.b #$A0
	BNE.b CODE_2AAED0
CODE_2AAEE0:
	LDY.b #$00
	LDA.b [!RAM_SMB3_Level_BGDataPtrLo],y
	CMP.b #$FF
	BEQ.b CODE_2AAEF0
	JSR.w CODE_2A8E54
	JSR.w (DATA_2AAEF2,x)
	BRA.b CODE_2AAEE0

CODE_2AAEF0:
	PLB
	RTL

DATA_2AAEF2:
	dw CODE_2AAEF6
	dw CODE_2AAF39

CODE_2AAEF6:
	LDX.b $00
	LDA.b #$01
	JSR.w CODE_2A8D03
	INX
	LDA.b #$02
	JSR.w CODE_2A8D03
	LDA.b $00
	CLC
	ADC.b #$0F
	TAX
	STA.b $00
	STZ.b $01
CODE_2AAF0D:
	LDA.b #$04
	STA.b $02
CODE_2AAF11:
	LDY.b $01
	LDA.w DATA_2AAF2D,y
	JSR.w CODE_2A8D03
	INX
	INC.b $01
	DEC.b $02
	BNE.b CODE_2AAF11
	LDA.b $00
	CLC
	ADC.b #$10
	TAX
	STA.b $00
	DEC.b $D8
	BNE.b CODE_2AAF0D
	RTS

DATA_2AAF2D:
	db $05,$06,$07,$08,$0B,$0C,$0D,$0E
	db $0F,$10,$11,$12

CODE_2AAF39:
	LDX.b $00
	LDA.b #$03
	JSR.w CODE_2A8D03
	INX
	LDA.b #$04
	JSR.w CODE_2A8D03
	LDA.b $00
	CLC
	ADC.b #$10
	TAX
	LDA.b #$09
	JSR.w CODE_2A8D03
	INX
	LDA.b #$0A
	JSR.w CODE_2A8D03
	RTS

;--------------------------------------------------------------------

CODE_2AAF58:
	SEP.b #$10
	LDX.b #$07
CODE_2AAF5C:
	LDA.b #$06
	JSR.w CODE_2A8D03
	TXA
	CLC
	ADC.b #$10
	TAX
	CPX.b #$E0
	BCC.b CODE_2AAF5C
	LDX.b #$0F
CODE_2AAF6C:
	LDA.b #$06
	JSR.w CODE_2A8D03
	TXA
	CLC
	ADC.b #$10
	TAX
	CPX.b #$E0
	BCC.b CODE_2AAF6C
	LDX.b #$51
	LDA.b #$11
	STA.b $01
	JSR.w CODE_2AAFF4
	LDX.b #$59
	LDA.b #$11
	STA.b $01
	JSR.w CODE_2AAFF4
	LDX.b #$D1
	LDA.b #$03
	STA.b $01
	JSR.w CODE_2AAFF4
	LDX.b #$D9
	LDA.b #$03
	STA.b $01
	JSR.w CODE_2AAFF4
	LDX.b #$E0
	LDA.b #$11
	STA.b $00
	JSR.w CODE_2A9924
	LDA.b #$29
	STA.b $00
	JSR.w CODE_2A9924
	LDX.b #$00
	LDA.b #$2A
	STA.b $00
	JSR.w CODE_2AB003
	LDA.b #$2A
	STA.b $00
	JSR.w CODE_2AB003
	LDX.b #$10
	LDA.b #$32
	STA.b $00
	JSR.w CODE_2AB003
	LDA.b #$32
	STA.b $00
	JSR.w CODE_2AB003
	LDX.b #$90
	LDA.b #$11
	STA.b $00
	JSR.w CODE_2A9930
	JSR.w CODE_2A9930
CODE_2AAFDA:
	LDY.b #$00
	LDA.b [!RAM_SMB3_Level_BGDataPtrLo],y
	CMP.b #$FF
	BEQ.b CODE_2AAFEA
	JSR.w CODE_2A8E54
	JSR.w (DATA_2AAFEC,x)
	BRA.b CODE_2AAFDA

CODE_2AAFEA:
	PLB
	RTL

DATA_2AAFEC:
	dw CODE_2AB011
	dw CODE_2AB064
	dw CODE_2AB08B
	dw CODE_2AB0DD

CODE_2AAFF4:
	LDA.b #$06
	STA.b $00
	LDA.b $01
CODE_2AAFFA:
	JSR.w CODE_2A8D03
	INX
	DEC.b $00
	BNE.b CODE_2AAFFA
	RTS

CODE_2AB003:
	LDA.b $00
	JSR.w CODE_2A8D25
	INC.b $00
	INX
	TXA
	AND.b #$07
	BNE.b CODE_2AB003
	RTS

CODE_2AB011:
	LDX.b $00
	LDA.b $D8
	STA.b $02
CODE_2AB017:
	LDY.b $DA
	LDA.w DATA_2AB039,y
	CMP.b #$FF
	BEQ.b CODE_2AB038
	JSR.w CODE_2A8D03
	INC.b $DA
	INX
	DEC.b $02
	BNE.b CODE_2AB017
	REP.b #$20
	LDA.b $00
	CLC
	ADC.w #$0010
	STA.b $00
	SEP.b #$20
	BRA.b CODE_2AB011

CODE_2AB038:
	RTS

DATA_2AB039:
	db $03,$03,$03,$03,$12,$03,$0D,$13
	db $08,$05,$02,$14,$07,$05,$04,$07
	db $02,$01,$08,$09,$0A,$0B,$0C,$08
	db $0D,$04,$04,$0B,$0E,$01,$07,$0B
	db $0D,$04,$05,$04,$03,$0F,$02,$01
	db $10,$01,$FF

CODE_2AB064:
	LDA.b #$15
	STA.b $02
CODE_2AB068:
	LDA.b $D8
	STA.b $D9
	LDX.b $00
CODE_2AB06E:
	LDA.b $02
	JSR.w CODE_2A8D03
	INC.b $02
	INX
	DEC.b $D9
	BNE.b CODE_2AB06E
	REP.b #$20
	LDA.b $00
	CLC
	ADC.w #$0010
	STA.b $00
	SEP.b #$20
	DEC.b $DA
	BNE.b CODE_2AB068
	RTS

CODE_2AB08B:
	LDX.b $00
	LDA.b #$3A
	JSR.w CODE_2A8D25
	INX
	INC
	JSR.w CODE_2A8D25
	INX
	INC
	JSR.w CODE_2A8D25
	INX
	LDA.b #$54
	JSR.w CODE_2A8D25
	LDA.b $00
	CLC
	ADC.b #$10
	STA.b $00
	TAX
	LDA.b $D8
	STA.b $D9
	LDA.b #$40
	STA.b $02
	JSR.w CODE_2AB12F
	INC.b $00
	LDX.b $00
	LDA.b $D8
	STA.b $D9
	INC.b $02
	JSR.w CODE_2AB12F
	INC.b $00
	LDX.b $00
	LDA.b $D8
	STA.b $D9
	LDA.b #$54
	STA.b $02
	JSR.w CODE_2AB12F
	INC.b $00
	LDX.b $00
	LDA.b $D8
	STA.b $D9
	JSR.w CODE_2AB12F
	RTS

CODE_2AB0DD:
	LDX.b $00
	LDA.b #$54
	JSR.w CODE_2A8D25
	INX
	LDA.b #$3D
	JSR.w CODE_2A8D25
	INX
	INC
	JSR.w CODE_2A8D25
	INX
	INC
	JSR.w CODE_2A8D25
	LDA.b $00
	CLC
	ADC.b #$10
	STA.b $00
	TAX
	LDA.b $D8
	STA.b $D9
	LDA.b #$54
	STA.b $02
	JSR.w CODE_2AB12F
	INC.b $00
	LDX.b $00
	LDA.b $D8
	STA.b $D9
	JSR.w CODE_2AB12F
	INC.b $00
	LDX.b $00
	LDA.b $D8
	STA.b $D9
	LDA.b #$42
	STA.b $02
	JSR.w CODE_2AB12F
	INC.b $00
	LDX.b $00
	LDA.b $D8
	STA.b $D9
	INC.b $02
	JSR.w CODE_2AB12F
	RTS

CODE_2AB12F:
	LDA.w $0002
	JSR.w CODE_2A8D25
	TXA
	CLC
	ADC.b #$10
	TAX
	DEC.b $D9
	BNE.b CODE_2AB12F
	RTS

;--------------------------------------------------------------------

CODE_2AB13F:
	SEP.b #$10
	LDX.b #$90
	LDA.b #$03
	STA.b $00
	JSR.w CODE_2AB1BD
	LDA.b #$07
	STA.b $00
	JSR.w CODE_2AB1BD
	LDA.b #$0B
	STA.b $00
	JSR.w CODE_2AB1BD
CODE_2AB158:
	LDA.b #$09
	JSR.w CODE_2A8D03
	INX
	LDA.b #$0A
	JSR.w CODE_2A8D03
	INX
	LDA.b #$07
	JSR.w CODE_2A8D03
	INX
	LDA.b #$08
	JSR.w CODE_2A8D03
	INX
	TXA
	AND.b #$0F
	BNE.b CODE_2AB158
	LDA.b #$0F
	STA.b $00
	JSR.w CODE_2A9924
	JSR.w CODE_2A9924
	JSR.w CODE_2A9924
	JSR.w CODE_2A9930
	JSR.w CODE_2A9930
	LDA.b #$18
	STA.b $00
	JSR.w CODE_2AB1D8
	LDA.b #$1C
	STA.b $00
	JSR.w CODE_2AB1D8
	LDA.b #$20
	STA.b $00
	JSR.w CODE_2AB1D8
	LDA.b #$24
	STA.b $00
	JSR.w CODE_2AB1D8
	LDA.b #$28
	STA.b $00
	JSR.w CODE_2AB1D8
CODE_2AB1AB:
	LDY.b #$00
	LDA.b [!RAM_SMB3_Level_BGDataPtrLo],y
	CMP.b #$FF
	BEQ.b CODE_2AB1BB
	JSR.w CODE_2A8E54
	JSR.w (DATA_2AB1F3,x)
	BRA.b CODE_2AB1AB

CODE_2AB1BB:
	PLB
	RTL

CODE_2AB1BD:
	LDA.b $00
	JSR.w CODE_2A8D03
	INC
	INX
	JSR.w CODE_2A8D03
	INC
	INX
	JSR.w CODE_2A8D03
	INC
	INX
	JSR.w CODE_2A8D03
	INX
	TXA
	AND.b #$0F
	BNE.b CODE_2AB1BD
	RTS

CODE_2AB1D8:
	LDA.b $00
	JSR.w CODE_2A8D25
	INC
	INX
	JSR.w CODE_2A8D25
	INC
	INX
	JSR.w CODE_2A8D25
	INC
	INX
	JSR.w CODE_2A8D25
	INX
	TXA
	AND.b #$0F
	BNE.b CODE_2AB1D8
	RTS

DATA_2AB1F3:
	dw CODE_2AB1FF
	dw CODE_2AB205
	dw CODE_2AB241
	dw CODE_2AB252
	dw CODE_2AB20B
	dw CODE_2AB211

CODE_2AB1FF:
	LDA.b #$01
	STA.b $03
	BRA.b CODE_2AB215

CODE_2AB205:
	LDA.b #$02
	STA.b $03
	BRA.b CODE_2AB215

CODE_2AB20B:
	LDA.b #$2C
	STA.b $03
	BRA.b CODE_2AB215

CODE_2AB211:
	LDA.b #$2D
	STA.b $03
CODE_2AB215:
	REP.b #$10
	LDX.b $00
	LDA.b $03
	JSR.w CODE_2A8CD9
	LDA.b $D8
	BEQ.b CODE_2AB23E
	CLC
	ADC.b $00
	STA.b $00
	LDX.b $00
	LDA.b $03
	JSR.w CODE_2A8CD9
	LDA.b $DA
	BEQ.b CODE_2AB23E
	CLC
	ADC.b $00
	STA.b $00
	LDX.b $00
	LDA.b $03
	JSR.w CODE_2A8CD9
CODE_2AB23E:
	SEP.b #$10
	RTS

CODE_2AB241:
	REP.b #$20
	LDA.w #DATA_2AB2A3
	STA.b $03
	INC
	INC
	INC
	INC
	STA.b $05
	SEP.b #$20
	BRA.b CODE_2AB261

CODE_2AB252:
	REP.b #$20
	LDA.w #DATA_2AB2AB
	STA.b $03
	INC
	INC
	INC
	INC
	STA.b $05
	SEP.b #$20
CODE_2AB261:
	REP.b #$10
	LDY.w #$0000
CODE_2AB266:
	LDX.b $00
	LDA.b ($03),y
	JSR.w CODE_2A8CD9
	LDA.b ($05),y
	JSR.w CODE_2A8CEE
	INY
	CPY.w #$0004
	BEQ.b CODE_2AB2A0
	INC.b $00
	LDA.b $00
	AND.b #$0F
	BNE.b CODE_2AB266
	LDA.b $D8
	BNE.b CODE_2AB292
	REP.b #$20
	LDA.b $00
	CLC
	ADC.w #$01A0
	STA.b $00
	SEP.b #$20
	BRA.b CODE_2AB266

CODE_2AB292:
	REP.b #$20
	LDA.b $00
	SEC
	SBC.w #$01C0
	STA.b $00
	SEP.b #$20
	BRA.b CODE_2AB266

CODE_2AB2A0:
	SEP.b #$10
	RTS

DATA_2AB2A3:
	db $10,$11,$12,$13,$14,$15,$16,$17

DATA_2AB2AB:
	db $0D,$0E,$0B,$0C,$07,$08,$09,$0A

;--------------------------------------------------------------------

CODE_2AB2B3:
	SEP.b #$10
	LDX.b #$F0
CODE_2AB2B7:
	LDA.b #$12
	JSR.w CODE_2A8D03
	INX
	LDA.b #$13
	JSR.w CODE_2A8D03
	INX
	LDA.b #$14
	JSR.w CODE_2A8D03
	INX
	LDA.b #$15
	JSR.w CODE_2A8D03
	INX
	TXA
	AND.b #$0F
	BNE.b CODE_2AB2B7
	LDX.b #$00
CODE_2AB2D6:
	LDA.b #$16
	JSR.w CODE_2A8D25
	INX
	LDA.b #$17
	JSR.w CODE_2A8D25
	INX
	LDA.b #$18
	JSR.w CODE_2A8D25
	INX
	LDA.b #$19
	JSR.w CODE_2A8D25
	INX
	TXA
	AND.b #$0F
	BNE.b CODE_2AB2D6
CODE_2AB2F3:
	LDY.b #$00
	LDA.b [!RAM_SMB3_Level_BGDataPtrLo],y
	CMP.b #$FF
	BEQ.b CODE_2AB303
	JSR.w CODE_2A8E54
	JSR.w (DATA_2AB305,x)
	BRA.b CODE_2AB2F3

CODE_2AB303:
	PLB
	RTL

DATA_2AB305:
	dw CODE_2AA966
	dw CODE_2AA9F6
	dw CODE_2AAA12
	dw CODE_2AAA57
	dw CODE_2AB315
	dw CODE_2AB331
	dw CODE_2AB34D
	dw CODE_2AB369

CODE_2AB315:
	REP.b #$30
	LDA.w #DATA_2AB329
	STA.b $02
	LDA.w #DATA_2AB32D
	STA.b $04
	SEP.b #$20
	JSR.w CODE_2AA97A
	SEP.b #$10
	RTS

DATA_2AB329:
	db $1A,$1B,$1C,$1D

DATA_2AB32D:
	db $1E,$1F,$20,$21

CODE_2AB331:
	REP.b #$30
	LDA.w #DATA_2AB345
	STA.b $02
	LDA.w #DATA_2AB349
	STA.b $04
	SEP.b #$20
	JSR.w CODE_2AA9CB
	SEP.b #$10
	RTS

DATA_2AB345:
	db $1A,$22,$22,$1E

DATA_2AB349:
	db $1D,$23,$23,$21

CODE_2AB34D:
	REP.b #$10
	LDX.b $00
	LDA.b #$1A
	JSR.w CODE_2A8CD9
	LDA.b #$1E
	JSR.w CODE_2A8CEE
	INX
	LDA.b #$1D
	JSR.w CODE_2A8CD9
	LDA.b #$21
	JSR.w CODE_2A8CEE
	SEP.b #$10
	RTS

CODE_2AB369:
	REP.b #$30
	LDA.w #DATA_2AB399
	STA.b $02
	LDA.w #DATA_2AB39D
	STA.b $04
	LDA.b $00
	PHA
	SEP.b #$20
	JSR.w CODE_2AA9CB
	REP.b #$20
	PLA
	INC
	INC
	STA.b $00
	AND.w #$000F
	BNE.b CODE_2AB391
	LDA.b $00
	CLC
	ADC.w #$01A0
	STA.b $00
CODE_2AB391:
	SEP.b #$20
	JSR.w CODE_2AA9CB
	SEP.b #$10
	RTS

DATA_2AB399:
	db $24,$26,$27,$24

DATA_2AB39D:
	db $25,$26,$27,$25

;--------------------------------------------------------------------

CODE_2AB3A1:
	LDA.w $0213
	BEQ.b CODE_2AB3B1
	LDA.b #$05
	STA.w $0350
	SEP.b #$10
	PLB
	JMP.w SMB3_BufferBGTilemap_Main

CODE_2AB3B1:
	REP.b #$10
	LDA.b #$10
	STA.b $00
	STZ.b $01
	LDA.b #$08
	STA.b $02
	JSR.w CODE_2AB3DF
	LDA.b #$01
	STA.b $00
	STZ.b $01
	LDA.b #$08
	STA.b $02
	JSR.w CODE_2AB3DF
	LDY.w #$7F01B0
	LDX.w #$7F0000
	LDA.b #$01
	XBA
	LDA.b #$AF
	MVN $7F01B0>>16,$7F0000>>16
	SEP.b #$10
	PLB
	RTL

CODE_2AB3DF:
	LDX.b $00
CODE_2AB3E1:
	LDA.b #$01
	JSR.w CODE_2A8CD9
	REP.b #$20
	TXA
	CLC
	ADC.w #$0020
	TAX
	SEP.b #$20
	CPX.w #$01B0
	BCC.b CODE_2AB3E1
	INC.b $00
	INC.b $00
	DEC.b $02
	BNE.b CODE_2AB3DF
	RTS

;--------------------------------------------------------------------

CODE_2AB3FE:
	SEP.b #$10
	LDX.b #$F0
	LDA.b #$29
	STA.b $00
	JSR.w CODE_2A9924
	LDX.b #$00
	LDA.b #$2A
	STA.b $00
	JSR.w CODE_2AB003
	LDA.b #$2A
	STA.b $00
	JSR.w CODE_2AB003
	LDX.b #$10
	LDA.b #$32
	STA.b $00
	JSR.w CODE_2AB003
	LDA.b #$32
	STA.b $00
	JSR.w CODE_2AB003
CODE_2AB429:
	LDY.b #$00
	LDA.b [!RAM_SMB3_Level_BGDataPtrLo],y
	CMP.b #$FF
	BEQ.b CODE_2AB439
	JSR.w CODE_2A8E54
	JSR.w (DATA_2AB43B,x)
	BRA.b CODE_2AB429

CODE_2AB439:
	PLB
	RTL

DATA_2AB43B:
	dw CODE_2AB08B
	dw CODE_2AB0DD
	dw CODE_2AB441

CODE_2AB441:
	LDX.b $00
	LDY.b $DA
	LDA.w DATA_2AB472,y
	JSR.w CODE_2A8D03
	INX
CODE_2AB44C:
	LDY.b $DB
	LDA.w DATA_2AB476,y
	CMP.b #$FF
	BEQ.b CODE_2AB45D
	JSR.w CODE_2A8D03
	INX
	INC.b $DB
	BRA.b CODE_2AB44C

CODE_2AB45D:
	LDA.b #$06
	JSR.w CODE_2A8D03
	LDA.b $00
	CLC
	ADC.b #$10
	STA.b $00
	INC.b $DA
	INC.b $DB
	DEC.b $D8
	BNE.b CODE_2AB441
	RTS

DATA_2AB472:
	db $01,$07,$08,$0D

DATA_2AB476:
	db $44,$45,$46,$47,$05,$FF,$48,$49
	db $4A,$4B,$01,$FF,$4C,$4D,$4E,$4F
	db $08,$FF,$50,$51,$52,$53,$01,$FF

;--------------------------------------------------------------------

CODE_2AB48E:
	LDA.w $0350
	BEQ.b CODE_2AB4FD
	CMP.b #$12
	BNE.b CODE_2AB49E
	JSL.l CODE_22E576
	JMP.w CODE_2AB4FD

CODE_2AB49E:
	LDA.w !RAM_SMB3_Level_IsVerticalLevelFlag
	BNE.b CODE_2AB4FE
	LDA.w $0212
	STA.w $0249
	LDA.w $0213
	ASL
	ASL
	ASL
	ASL
	STA.w $024B
CODE_2AB4B3:
	JSL.l CODE_2AB5B5
	LDA.w $0350
	CMP.b #$02
	BEQ.b CODE_2AB4C8
	CMP.b #$23
	BEQ.b CODE_2AB4C8
	JSL.l CODE_29E9A3
	BRA.b CODE_2AB4CC

CODE_2AB4C8:
	JSL.l CODE_22E2FE
CODE_2AB4CC:
	LDA.w $0249
	CLC
	ADC.w DATA_21CE95
	STA.w $0249
	LDA.w $0249
	AND.b #$08
	CMP.w DATA_21CE97
	BNE.b CODE_2AB4E3
	INC.w $024B
CODE_2AB4E3:
	DEC.w $0612
	BNE.b CODE_2AB4B3
	LDA.b #$FF
	STA.w $0249
	LDA.w $0350
	CMP.b #$02
	BEQ.b CODE_2AB4F8
	CMP.b #$23
	BNE.b CODE_2AB4FD
CODE_2AB4F8:
	LDA.b #$51
	STA.w !REGISTER_BG3AddressAndSize
CODE_2AB4FD:
	RTL

CODE_2AB4FE:
	STZ.b $25
	LDA.b #$70
	STA.w $0218
	CLC
	ADC.b #$08
	STA.w $0249
	STZ.w $024B
CODE_2AB50E:
	JSR.w CODE_2AB67D
	JSL.l CODE_29E9F8
	LDA.w $0218
	CLC
	ADC.b #$08
	STA.w $0218
	AND.b #$08
	BNE.b CODE_2AB53A
	LDA.w $024B
	CLC
	ADC.b #$10
	STA.w $024B
	AND.b #$F0
	BNE.b CODE_2AB53A
	INC.w $024B
	LDA.b #$0F
	AND.w $024B
	STA.w $024B
CODE_2AB53A:
	DEC.w $0612
	BNE.b CODE_2AB50E
	STZ.w $0218
	STZ.w $0249
	RTL

;--------------------------------------------------------------------

; Note: BG map16 pointers?

DATA_2AB546:
	dl DATA_2ABD10
	dl DATA_2ABE58
	dl DATA_2ABF30
	dl DATA_2AC230
	dl DATA_2AC058
	dl DATA_2AC420
	dl DATA_2AC5E8
	dl DATA_2AC700
	dl DATA_2AC888
	dl DATA_2ACA38
	dl DATA_2ACBD8
	dl DATA_2ACC08
	dl DATA_2ACE38
	dl DATA_2ACE38
	dl DATA_2AD058
	dl DATA_2AD1F0
	dl DATA_2AD330
	dl DATA_2AD510
	dl DATA_2AD510
	dl DATA_2AD590
	dl DATA_2ACBD8
	dl DATA_2AD610
	dl DATA_2AD788
	dl DATA_2AD058
	dl DATA_2ACE38
	dl DATA_2AC058
	dl DATA_2AD850
	dl DATA_2ADAF8
	dl DATA_2AD058
	dl DATA_2AD610
	dl DATA_2AD1F0
	dl DATA_2ADC68
	dl DATA_2ABD10
	dl DATA_2AD850
	dl DATA_2ABE58
	dl DATA_2ABF30
	dl DATA_2ABD10

CODE_2AB5B5:
	PHB
	PHK
	PLB
	LDA.w $0249
	AND.b #$08
	LSR
	LSR
	LSR
	STA.b $C2
	LDA.w $0350
	ASL
	CLC
	ADC.w $0350
	TAY
	LDA.w DATA_2AB546-$01,y
	STA.b $08
	REP.b #$20
	LDA.w DATA_2AB546-$03,y
	STA.b $06
	SEP.b #$20
	LDX.b $25
	LDA.w $024B
	LSR
	LSR
	LSR
	LSR
	INC
	AND.b #$0F
	TAY
	LDA.b #$7F0000>>16
	STA.b $0F
	REP.b #$20
	STZ.b $0D
CODE_2AB5EE:
	DEY
	BEQ.b CODE_2AB5FB
	LDA.b $0D
	CLC
	ADC.w #$01B0
	STA.b $0D
	BRA.b CODE_2AB5EE

CODE_2AB5FB:
	LDA.w #$001A
	STA.b $00
	LDA.w $024B
	AND.w #$000F
	STA.b $09
	REP.b #$10
	LDX.w #$0000
CODE_2AB60D:
	LDY.b $09
	LDA.b [$0D],y
	AND.w #$00FF
	ASL
	ASL
	ASL
	TAY
	LDA.b $C2
	AND.w #$00FF
	BEQ.b CODE_2AB623
	INY
	INY
	INY
	INY
CODE_2AB623:
	LDA.b [$06],y
	STA.l $7F2002,x
	INY
	INY
	LDA.b [$06],y
	STA.l $7F2004,x
	LDA.b $09
	CLC
	ADC.w #$0010
	STA.b $09
	INX
	INX
	INX
	INX
	DEC.b $00
	BPL.b CODE_2AB60D
	SEP.b #$30
	LDX.b $25
	LDA.w $024B
	AND.b #$0F
	ASL
	ORA.b $C2
	STA.l $7F2001
	LDA.w $024B
	AND.b #$10
	BEQ.b CODE_2AB65A
	LDA.b #$04
CODE_2AB65A:
	ORA.b #$10
	STA.l $7F2000
	LDA.w $0350
	CMP.b #$02
	BEQ.b CODE_2AB66B
	CMP.b #$23
	BNE.b CODE_2AB67B
CODE_2AB66B:
	REP.b #$20
	LDA.l $7F2000
	CLC
	ADC.w #$0040
	STA.l $7F2000
	SEP.b #$20
CODE_2AB67B:
	PLB
	RTL

;--------------------------------------------------------------------

CODE_2AB67D:
	REP.b #$20
	LDA.w $024B
	AND.w #$00F0
	ASL
	ASL
	CLC
	ADC.w #$1000
	STA.l $7F2000
	XBA
	STA.l $7F2000
	SEP.b #$20
	LDA.w $024B
	AND.b #$01
	BEQ.b CODE_2AB6A7
	LDA.l $7F2000
	EOR.b #$08
	STA.l $7F2000
CODE_2AB6A7:
	LDA.w $0218
	AND.b #$08
	BEQ.b CODE_2AB6B9
	LDA.l $7F2001
	CLC
	ADC.b #$20
	STA.l $7F2001
CODE_2AB6B9:
	PHB
	PHK
	PLB
	LDA.w $0350
	ASL
	CLC
	ADC.w $0350
	TAY
	LDA.w DATA_2AB546-$01,y
	STA.b $0E
	REP.b #$20
	LDA.w DATA_2AB546-$03,y
	STA.b $0C
	STZ.b $D8
	SEP.b #$20
	LDA.b #$7F0000>>16
	STA.b $DA
	LDA.w $024B
	AND.b #$0F
	TAY
	BEQ.b CODE_2AB6F0
CODE_2AB6E1:
	REP.b #$20
	LDA.b $D8
	CLC
	ADC.w #$01B0
	STA.b $D8
	SEP.b #$20
	DEY
	BNE.b CODE_2AB6E1
CODE_2AB6F0:
	REP.b #$20
	LDA.w $024B
	AND.w #$00F0
	STA.b $06
	STZ.b $08
	REP.b #$10
CODE_2AB6FE:
	LDY.b $06
	LDA.b [$D8],y
	STA.b $0A
	INC.b $06
	LDA.b $0A
	AND.w #$00FF
	ASL
	ASL
	ASL
	TAY
	LDX.b $08
	LDA.w $0218
	AND.w #$0008
	BEQ.b CODE_2AB71B
	INY
	INY
CODE_2AB71B:
	LDA.b [$0C],y
	STA.l $7F2002,x
	INY
	INY
	INY
	INY
	LDA.b [$0C],y
	STA.l $7F2004,x
	INX
	INX
	INX
	INX
	STX.b $08
	CPX.w #$0040
	BCC.b CODE_2AB6FE
	SEP.b #$30
	PLB
	RTS

;--------------------------------------------------------------------

CODE_2AB73A:
	PHA
	PHX
	PHY
	REP.b #$30
	TYA
	AND.w #$00FF
	ORA.w #$2000
	TAY
	SEP.b #$20
	LDA.b #$00
	STA.b [$2E],y
	SEP.b #$10
	PLY
	PLX
	PLA
	RTL

;--------------------------------------------------------------------

CODE_2AB753:
	PHX
	LDA.b $30
	STA.b $DA
	REP.b #$20
	LDA.b $2E
	STA.b $D8
	SEP.b #$20
	LDA.w $0706
	AND.b #$0F
	TAX
	LDA.l DATA_2AB778,x
	STA.b $02
	LDY.w $0700
	LDA.b $02
	STA.b [$D8],y
	JSR.w CODE_2A8AD2
	PLX
	RTL

DATA_2AB778:
	db $20,$21,$24,$25

;--------------------------------------------------------------------

CODE_2AB77C:
	LDY.w $0700
	LDA.b #$23
	STA.b [$2E],y
	INY
	STA.b [$2E],y
	RTL

;--------------------------------------------------------------------

CODE_2AB787:
	PHB
	PHK
	PLB
	LDA.b [!RAM_SMB3_Level_LevelDataPtrLo]
	STA.b $02
	REP.b #$20
	STZ.b $DB
	INC.w !RAM_SMB3_Level_LevelDataPtrLo
	LDA.b $2E
	STA.b $D8
	SEP.b #$20
	LDA.b $30
	STA.b $DA
	LDA.w $0706
	AND.b #$0F
	TAX
	CPX.b #$08
	BEQ.b CODE_2AB7C6
	LDA.w DATA_2AB7EF,x
	STA.b $03
	LDA.w DATA_2AB7F9,x
	STA.b $DB
	LDY.w $0700
CODE_2AB7B6:
	LDA.b $03
	STA.b [$D8],y
	JSR.w CODE_2A8AD2
	DEC.b $02
	BMI.b CODE_2AB7ED
	JSR.w CODE_2A86F5
	BRA.b CODE_2AB7B6

CODE_2AB7C6:
	LDY.w $0700
	LDA.b #$22
	STA.b [$2E],y
	JSR.w CODE_2A8AD2
CODE_2AB7D0:
	JSL.l CODE_23BEBB
	LDA.b [$2E],y
	CMP.b #$C2
	BEQ.b CODE_2AB7D0
	CMP.b #$F5
	BNE.b CODE_2AB7ED
	REP.b #$20
	LDA.b $2E
	STA.b $D8
	SEP.b #$20
	LDA.b #$23
	STA.b [$2E],y
	JSR.w CODE_2A8AD2
CODE_2AB7ED:
	PLB
	RTL

DATA_2AB7EF:
	db $02,$04,$05,$06,$07,$08,$0B,$0C
	db $00,$0D

DATA_2AB7F9:
	db $0F,$11,$11,$0F,$0E,$12,$12,$0E
	db $00,$01

;--------------------------------------------------------------------

; Note: Data related to the decorations seen at the end of a level.

DATA_2AB803:
	db $00,$00,$13,$14,$00,$00,$00,$17
	db $18,$19,$00,$00,$00,$00,$00,$00
	db $00,$00,$15,$16,$00,$00,$00,$1A
	db $00,$1B,$00,$00,$00,$00,$00,$00
	db $00,$00,$15,$0E,$14,$00,$00,$1C
	db $1D,$1E,$00,$00,$00,$00,$00,$00
	db $00,$00,$15,$0F,$16,$00,$00,$00
	db $00,$00,$00,$00,$00,$13,$14,$00
	db $00,$00,$15,$10,$0E,$14,$00,$00
	db $00,$00,$00,$00,$00,$15,$16,$00
	db $00,$13,$11,$10,$0F,$16,$00,$00
	db $00,$00,$00,$00,$13,$11,$16,$00

DATA_2AB863:
	db $00,$11,$12,$12,$13,$00,$00,$17
	db $18,$19,$00,$00,$00,$00,$00,$00
	db $00,$14,$15,$15,$16,$00,$00,$1A
	db $00,$1B,$00,$00,$00,$11,$12,$13
	db $00,$14,$15,$15,$16,$00,$00,$1C
	db $1D,$1E,$00,$00,$00,$14,$15,$16
	db $00,$14,$15,$15,$16,$00,$00,$00
	db $00,$00,$00,$11,$12,$02,$15,$16
	db $00,$14,$15,$03,$12,$12,$13,$00
	db $00,$00,$00,$14,$15,$16,$15,$16
	db $00,$14,$15,$14,$15,$15,$16,$00
	db $00,$00,$00,$14,$15,$16,$15,$16

DATA_2AB8C3:
	db $00,$00,$00,$00,$00,$00,$00,$17
	db $18,$19,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$1A
	db $00,$1B,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$1C
	db $1D,$1E,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$14,$15,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$14,$01,$02,$04,$14
	db $15,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$14,$01,$01,$02,$03,$01
	db $02,$04,$00,$00,$14,$15,$00,$00

DATA_2AB923:
	db $00,$00,$00,$00,$00,$00,$00,$17
	db $18,$19,$00,$00,$00,$15,$16,$00
	db $00,$00,$15,$16,$00,$00,$00,$1A
	db $00,$1B,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$1C
	db $1D,$1E,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$15,$16,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00

DATA_2AB983:
	db $00,$04,$05,$05,$06,$00,$00,$17
	db $18,$19,$00,$00,$00,$00,$00,$00
	db $00,$07,$08,$08,$09,$00,$00,$1A
	db $00,$1B,$00,$00,$00,$04,$05,$06
	db $00,$07,$08,$08,$09,$00,$00,$1C
	db $1D,$1E,$00,$00,$00,$07,$08,$09
	db $00,$07,$08,$08,$09,$00,$00,$00
	db $00,$00,$00,$04,$05,$0A,$08,$09
	db $00,$07,$08,$0B,$05,$05,$06,$00
	db $00,$00,$00,$07,$08,$09,$08,$09
	db $00,$07,$08,$07,$08,$08,$09,$00
	db $00,$00,$00,$07,$08,$09,$08,$09

DATA_2AB9E3:
	dw DATA_2AB803
	dw DATA_2AB863
	dw DATA_2AB8C3
	dw DATA_2AB923
	dw DATA_2AB983
	dw DATA_2AB803
	dw DATA_2AB803

DATA_2AB9F1:
	db $01,$04,$09,$0D,$0C,$03,$0E

DATA_2AB9F8:
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$01,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$01,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$01,$01,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$01,$01,$01,$00,$00,$00
	db $00,$00,$00,$00,$00,$01,$00,$00

DATA_2ABA58:
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$01,$00,$00
	db $00,$00,$00,$01,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00

DATA_2ABAB8:
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$01,$01,$01,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$01,$01,$01,$01,$01
	db $01,$01,$00,$00,$00,$00,$00,$00

DATA_2ABB18:
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00

DATA_2ABB78:
	db $00,$01,$01,$01,$01,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00
	db $00,$01,$01,$01,$01,$00,$00,$00
	db $00,$00,$00,$00,$00,$01,$01,$01
	db $00,$01,$01,$01,$01,$00,$00,$00
	db $00,$00,$00,$00,$00,$01,$01,$01
	db $00,$01,$01,$01,$01,$00,$00,$00
	db $00,$00,$00,$01,$01,$01,$01,$01
	db $00,$01,$01,$01,$01,$01,$01,$00
	db $00,$00,$00,$01,$01,$01,$01,$01
	db $00,$01,$01,$01,$01,$01,$01,$00
	db $00,$00,$00,$01,$01,$01,$01,$01

DATA_2ABBD8:
	dw DATA_2AB9F8
	dw DATA_2ABA58
	dw DATA_2ABAB8
	dw DATA_2ABB18
	dw DATA_2ABB78
	dw DATA_2AB9F8
	dw DATA_2AB9F8

;--------------------------------------------------------------------

DATA_2ABBE6:
	dw $1083,$10E0,$110F,$11E5,$11FD,$126F

DATA_2ABBF2:
	dw $10C7,$10D5,$11B2,$1221,$129A

DATA_2ABBFC:
	dw $108B,$109A,$113D,$1163,$118B,$1237,$1268

;--------------------------------------------------------------------

DATA_2ABC0A:
	dw $0008,$0007,$0007,$0006,$0006,$0006,$0006,$0006
	dw $0006,$0006,$0006,$0006,$0006,$0006,$0007,$0007
	dw $0008,$0008,$0008,$0009,$0009,$0009,$0009,$0009
	dw $0009,$0009,$0009,$0009,$0009,$0009,$0008,$0008
	dw $0008,$0007,$0007,$0006,$0006,$0006,$0006,$0006
	dw $0006,$0006,$0006,$0006,$0006,$0006,$0007,$0007
	dw $0008,$0008,$0008,$0009,$0009,$0009,$0009,$0009
	dw $0009,$0009,$0009,$0009,$0009,$0009,$0008,$0008
	dw $0008,$0007,$0007,$0006,$0006,$0006,$0006,$0006
	dw $0006,$0006,$0006,$0006,$0006,$0006,$0007,$0007
	dw $0008,$0008,$0008,$0009,$0009,$0009,$0009,$0009
	dw $0009,$0009,$0009,$0009,$0009,$0009,$0008,$0008
	dw $0008,$0007,$0007,$0006,$0006,$0006,$0006,$0006
	dw $0006,$0006,$0006,$0006,$0006,$0006,$0007,$0007
	dw $0008,$0008,$0008,$0009,$0009,$0009,$0009,$0009
	dw $0009,$0009,$0009,$0009,$0009,$0009,$0008,$0008

%FREE_BYTES(NULLROM, 6, $FF)

;--------------------------------------------------------------------

DATA_2ABD10:
	db $FF,$00,$FF,$00,$FF,$00,$FF,$00,$FF,$00,$76,$09,$67,$09,$77,$09
	db $56,$09,$5C,$09,$57,$09,$5D,$09,$48,$09,$58,$09,$49,$09,$59,$09
	db $4C,$09,$5C,$09,$4D,$09,$5D,$09,$56,$09,$5C,$09,$57,$09,$4E,$09
	db $80,$09,$90,$09,$81,$09,$91,$09,$6A,$09,$7A,$09,$6B,$09,$7B,$09
	db $4C,$09,$66,$09,$4D,$09,$5D,$09,$4C,$09,$5C,$09,$4D,$09,$4E,$09
	db $80,$09,$90,$09,$A0,$09,$FF,$00,$4B,$09,$5B,$09,$FF,$00,$FF,$00
	db $FF,$00,$FF,$00,$4A,$09,$5A,$09,$A1,$09,$FF,$00,$81,$09,$91,$09
	db $FF,$00,$76,$05,$67,$05,$77,$05,$56,$05,$7C,$05,$57,$05,$7D,$05
	db $48,$05,$58,$05,$49,$05,$59,$05,$FF,$00,$50,$05,$41,$05,$51,$05
	db $42,$05,$52,$05,$43,$05,$53,$05,$68,$05,$78,$05,$6D,$05,$7D,$05
	db $6C,$05,$7C,$05,$4F,$05,$7D,$05,$6C,$05,$7C,$05,$6D,$05,$7D,$05
	db $60,$05,$70,$05,$61,$05,$71,$05,$62,$05,$72,$05,$63,$05,$73,$05
	db $6C,$05,$7C,$05,$46,$05,$47,$05,$42,$05,$52,$05,$44,$05,$54,$05
	db $45,$05,$55,$05,$41,$05,$51,$05,$6D,$05,$7D,$05,$46,$05,$47,$05
	db $62,$05,$72,$05,$64,$05,$74,$05,$65,$05,$75,$05,$61,$05,$71,$05
	db $5E,$09,$6E,$09,$5F,$09,$6F,$09,$7E,$09,$6E,$09,$7F,$09,$6F,$09
	db $56,$05,$7C,$05,$B1,$05,$7D,$05,$B0,$05,$7C,$05,$57,$05,$7D,$05
	db $FF,$00,$76,$05,$40,$05,$77,$05,$B0,$05,$7C,$05,$B1,$05,$7D,$05
	db $4C,$09,$66,$09,$4D,$09,$4E,$09,$FF,$00,$FF,$00,$82,$09,$92,$09
	db $83,$09,$93,$09,$84,$09,$94,$09,$85,$09,$95,$09,$FF,$00,$FF,$00
	db $A2,$09,$5C,$09,$A3,$09,$5D,$09

;--------------------------------------------------------------------

DATA_2ABE58:
	db $1C,$05,$1C,$05,$1C,$05,$1C,$05,$00,$09,$10,$09,$01,$09,$11,$09
	db $04,$09,$13,$49,$05,$09,$15,$09,$02,$09,$11,$09,$03,$09,$11,$09
	db $13,$09,$11,$09,$11,$09,$11,$09,$11,$09,$11,$09,$13,$49,$11,$09
	db $11,$09,$11,$09,$11,$09,$11,$09,$20,$09,$30,$09,$21,$09,$11,$09
	db $22,$09,$11,$09,$23,$09,$11,$09,$24,$09,$13,$49,$25,$09,$35,$09
	db $26,$09,$36,$09,$11,$09,$37,$09,$06,$09,$16,$09,$11,$09,$11,$09
	db $08,$0D,$18,$0D,$09,$0D,$19,$0D,$0A,$0D,$1A,$0D,$0B,$0D,$1B,$0D
	db $28,$0D,$38,$0D,$29,$0D,$39,$0D,$2A,$0D,$3A,$0D,$2B,$0D,$3B,$0D
	db $FF,$01,$FF,$01,$FF,$01,$FF,$01,$0F,$49,$1F,$49,$1C,$45,$1E,$49
	db $1C,$45,$1D,$45,$1C,$45,$1C,$45,$2F,$49,$3F,$49,$2E,$49,$3E,$49
	db $2D,$49,$3D,$49,$1C,$45,$1C,$45,$1C,$45,$1D,$09,$1C,$45,$1E,$09
	db $0F,$49,$1F,$09,$1C,$45,$1C,$45,$2D,$09,$3D,$09,$2E,$09,$3E,$09
	db $2F,$09,$3F,$09,$1C,$45,$1C,$45,$1C,$05,$1D,$09,$1C,$05,$1E,$09
	db $0F,$09,$1F,$09,$1C,$05,$1C,$05

;--------------------------------------------------------------------

DATA_2ABF30:
	db $FF,$00,$FF,$00,$FF,$00,$FF,$00,$60,$09,$70,$09,$61,$09,$71,$09
	db $45,$09,$45,$09,$45,$09,$45,$09,$62,$09,$72,$09,$63,$09,$73,$09
	db $40,$09,$50,$09,$41,$09,$51,$09,$49,$09,$59,$09,$4A,$09,$5A,$09
	db $44,$09,$54,$09,$41,$09,$51,$09,$42,$09,$52,$09,$43,$09,$53,$09
	db $57,$09,$78,$09,$48,$09,$79,$09,$55,$09,$56,$09,$57,$09,$79,$09
	db $48,$09,$78,$09,$57,$09,$79,$09,$57,$09,$79,$09,$58,$09,$7A,$09
	db $47,$09,$77,$09,$48,$09,$78,$09,$57,$09,$78,$09,$4D,$09,$5D,$09
	db $4E,$09,$5E,$09,$4F,$09,$5F,$09,$55,$09,$56,$09,$48,$09,$79,$09
	db $68,$09,$78,$09,$69,$09,$79,$09,$46,$09,$56,$09,$69,$09,$79,$09
	db $75,$09,$64,$09,$66,$09,$4B,$09,$66,$09,$4B,$09,$76,$09,$64,$09
	db $6D,$09,$7D,$09,$69,$09,$79,$09,$6E,$09,$78,$09,$6F,$09,$79,$09
	db $74,$09,$65,$09,$4B,$09,$4B,$09,$4B,$09,$4B,$09,$74,$09,$65,$09
	db $75,$09,$7E,$09,$76,$09,$7F,$09,$66,$09,$7E,$09,$76,$09,$7F,$09
	db $6D,$09,$78,$09,$69,$09,$79,$09,$69,$09,$79,$09,$6A,$09,$7A,$09
	db $67,$09,$77,$09,$68,$09,$78,$09,$46,$09,$56,$09,$6A,$09,$7A,$09
	db $46,$09,$56,$09,$68,$09,$78,$09,$68,$09,$78,$09,$6A,$09,$7A,$09
	db $60,$09,$70,$09,$63,$09,$73,$09,$75,$09,$64,$09,$66,$09,$FF,$00
	db $66,$09,$FF,$00,$76,$09,$64,$09,$74,$09,$65,$09,$FF,$00,$FF,$00
	db $FF,$00,$FF,$00,$74,$09,$65,$09

;--------------------------------------------------------------------

DATA_2AC058:
	db $FF,$00,$FF,$00,$FF,$00,$FF,$00,$5A,$45,$6A,$45,$59,$45,$69,$45
	db $4D,$05,$49,$05,$4E,$05,$4A,$45,$4E,$45,$49,$45,$4D,$45,$4A,$05
	db $4B,$05,$5B,$05,$4C,$05,$5C,$05,$4C,$45,$5C,$45,$4B,$45,$5B,$45
	db $40,$05,$50,$05,$41,$05,$77,$06,$41,$05,$77,$06,$41,$05,$77,$06
	db $41,$05,$77,$06,$42,$05,$52,$05,$44,$05,$54,$05,$45,$05,$7C,$06
	db $45,$05,$7C,$06,$46,$05,$56,$05,$5D,$05,$7F,$06,$5E,$05,$7F,$06
	db $5E,$45,$7F,$06,$5D,$45,$7F,$06,$50,$05,$50,$05,$77,$06,$77,$06
	db $77,$06,$77,$06,$77,$06,$77,$06,$44,$09,$54,$09,$45,$09,$7C,$0A
	db $45,$09,$7C,$0A,$46,$09,$56,$09,$54,$05,$54,$05,$7C,$06,$7C,$06
	db $7C,$06,$7C,$06,$56,$05,$56,$05,$7F,$06,$7F,$06,$7F,$06,$7F,$06
	db $54,$09,$54,$09,$7C,$0A,$7C,$0A,$7C,$0A,$7C,$0A,$56,$09,$56,$09
	db $45,$05,$7C,$06,$45,$05,$7C,$06,$47,$09,$58,$09,$46,$09,$56,$09
	db $6F,$09,$76,$09,$70,$09,$77,$09,$71,$09,$78,$09,$7F,$06,$73,$09
	db $46,$05,$56,$05,$57,$09,$58,$09,$74,$09,$7A,$09,$75,$09,$7B,$09
	db $7C,$06,$7C,$06,$7C,$06,$7C,$06,$47,$09,$58,$09,$45,$09,$7C,$0A
	db $72,$09,$7F,$0A,$73,$09,$79,$09,$42,$05,$52,$05,$57,$05,$58,$05
	db $58,$09,$58,$09,$56,$09,$56,$09,$7C,$09,$63,$09,$68,$09,$68,$09
	db $63,$09,$63,$09,$7D,$09,$68,$09,$56,$05,$56,$05,$58,$09,$58,$09
	db $63,$09,$63,$09,$7F,$09,$68,$09,$58,$09,$58,$09,$7C,$0A,$7C,$0A
	db $7E,$09,$63,$09,$68,$09,$68,$09,$52,$05,$52,$05,$58,$05,$58,$05
	db $63,$09,$51,$09,$68,$09,$55,$09,$63,$09,$4F,$09,$68,$09,$5F,$09
	db $64,$05,$51,$09,$65,$05,$55,$09,$65,$05,$4F,$09,$65,$05,$5F,$09
	db $65,$05,$51,$09,$65,$05,$55,$09,$66,$05,$4F,$09,$67,$09,$5F,$09
	db $65,$09,$51,$09,$66,$09,$55,$09,$64,$05,$4F,$09,$65,$05,$5F,$09
	db $65,$05,$4F,$09,$66,$05,$5F,$09,$67,$09,$51,$09,$65,$09,$55,$09
	db $65,$09,$4F,$09,$66,$09,$5F,$09,$60,$05,$4F,$09,$61,$05,$5F,$09
	db $61,$05,$51,$09,$61,$05,$55,$09,$62,$05,$4F,$09,$67,$05,$5F,$09
	db $65,$05,$51,$09,$66,$05,$55,$09,$67,$09,$4F,$09,$66,$09,$5F,$09
	db $6B,$09,$6D,$09,$6C,$09,$6E,$09,$6D,$09,$6B,$09,$6E,$09,$6C,$09
	db $59,$05,$69,$05,$5A,$05,$6A,$05

;--------------------------------------------------------------------

; Note: BG map16 for the cave pillar BG

DATA_2AC230:
	db $FF,$00,$FF,$00,$FF,$00,$FF,$00,$A1,$09,$A2,$49,$A1,$49,$A2,$09
	db $A4,$49,$7E,$0A,$A3,$49,$7E,$0A,$A3,$09,$7E,$0A,$A4,$09,$7E,$0A
	db $A5,$09,$9E,$09,$A6,$09,$9F,$09,$A6,$49,$9F,$49,$A5,$49,$9E,$49
	db $7A,$0A,$70,$09,$7A,$0A,$71,$09,$7A,$0A,$72,$09,$7A,$0A,$73,$09
	db $7C,$09,$9A,$09,$7D,$09,$9D,$09,$7E,$09,$8E,$09,$7F,$09,$8F,$09
	db $77,$06,$77,$06,$77,$06,$77,$06,$40,$05,$50,$05,$41,$05,$51,$05
	db $42,$05,$52,$05,$43,$05,$53,$05,$44,$05,$54,$05,$45,$05,$55,$05
	db $46,$05,$56,$05,$47,$05,$57,$05,$48,$05,$58,$05,$49,$05,$59,$05
	db $4A,$05,$5A,$05,$4B,$05,$5B,$05,$4C,$05,$5C,$05,$4D,$05,$5D,$05
	db $4E,$05,$5E,$05,$4F,$05,$5F,$05,$60,$05,$FF,$00,$61,$05,$FF,$00
	db $62,$05,$FF,$00,$63,$05,$FF,$00,$64,$05,$74,$05,$65,$05,$75,$05
	db $66,$05,$76,$05,$67,$05,$77,$05,$68,$05,$78,$05,$69,$05,$79,$05
	db $6A,$05,$7A,$05,$6B,$05,$7B,$05,$6C,$05,$FF,$00,$6D,$05,$FF,$00
	db $6E,$05,$FF,$00,$6F,$05,$FF,$00,$FF,$00,$FF,$00,$80,$05,$FF,$00
	db $81,$05,$91,$05,$82,$05,$92,$05,$83,$05,$93,$05,$84,$05,$94,$05
	db $85,$05,$FF,$00,$FF,$00,$FF,$00,$86,$05,$96,$05,$87,$05,$97,$05
	db $88,$05,$98,$05,$89,$05,$99,$05,$8A,$05,$FF,$00,$8B,$05,$9B,$05
	db $8C,$05,$9C,$05,$8D,$05,$FF,$00,$FF,$00,$FF,$00,$90,$05,$90,$85
	db $95,$05,$95,$85,$FF,$00,$FF,$00,$FF,$00,$8A,$85,$9B,$85,$8B,$85
	db $9C,$85,$8C,$85,$FF,$00,$8D,$85,$96,$85,$86,$85,$97,$85,$87,$85
	db $98,$85,$88,$85,$99,$85,$89,$85,$FF,$00,$FF,$00,$FF,$00,$80,$85
	db $91,$85,$81,$85,$92,$85,$82,$85,$93,$85,$83,$85,$94,$85,$84,$85
	db $FF,$00,$85,$85,$FF,$00,$FF,$00,$FF,$00,$60,$85,$FF,$00,$61,$85
	db $FF,$00,$62,$85,$FF,$00,$63,$85,$74,$85,$64,$85,$75,$85,$65,$85
	db $76,$85,$66,$85,$77,$85,$67,$85,$78,$85,$68,$85,$79,$85,$69,$85
	db $7A,$85,$6A,$85,$7B,$85,$6B,$85,$FF,$00,$6C,$85,$FF,$00,$6D,$85
	db $FF,$00,$6E,$85,$FF,$00,$6F,$85,$58,$85,$48,$85,$59,$85,$49,$85
	db $5A,$85,$4A,$85,$5B,$85,$4B,$85,$5C,$85,$4C,$85,$5D,$85,$4D,$85
	db $5E,$85,$4E,$85,$5F,$85,$4F,$85,$50,$85,$40,$85,$51,$85,$41,$85
	db $52,$85,$42,$85,$53,$85,$43,$85,$54,$85,$44,$85,$55,$85,$45,$85
	db $56,$85,$46,$85,$57,$85,$47,$85,$FF,$00,$A0,$09,$FF,$00,$A0,$09

;--------------------------------------------------------------------

; Note: BG map16 for the fortress pillar BG

DATA_2AC420:
	db $40,$05,$40,$05,$40,$05,$40,$05,$40,$05,$A1,$05,$40,$05,$A1,$05
	db $A2,$05,$A2,$05,$A3,$05,$A3,$05,$84,$05,$94,$05,$85,$05,$95,$05
	db $86,$05,$96,$05,$87,$05,$97,$05,$40,$05,$40,$05,$40,$05,$9C,$05
	db $40,$05,$9F,$05,$40,$05,$9F,$45,$40,$05,$9C,$45,$40,$05,$40,$05
	db $A4,$05,$88,$05,$A5,$05,$89,$05,$A6,$05,$8A,$05,$A7,$05,$8B,$05
	db $40,$05,$40,$05,$AC,$05,$BC,$05,$9D,$05,$AD,$05,$9E,$05,$AE,$05
	db $AC,$45,$BC,$45,$40,$05,$40,$05,$98,$05,$A8,$05,$99,$05,$A9,$05
	db $9A,$05,$AA,$05,$9B,$05,$AB,$05,$BD,$05,$40,$05,$BE,$05,$40,$05
	db $B8,$05,$B4,$05,$B9,$05,$B5,$05,$BA,$05,$B6,$05,$BB,$05,$B7,$05
	db $82,$05,$8C,$05,$83,$05,$8D,$05,$B0,$05,$8E,$05,$B1,$05,$8F,$05
	db $40,$05,$45,$05,$40,$05,$46,$05,$40,$05,$45,$05,$41,$05,$51,$05
	db $42,$05,$52,$05,$63,$05,$55,$05,$A2,$05,$45,$05,$A3,$05,$46,$05
	db $47,$05,$57,$05,$48,$05,$58,$05,$40,$05,$40,$05,$61,$05,$71,$05
	db $62,$05,$72,$05,$64,$05,$74,$05,$92,$05,$A2,$05,$93,$05,$A3,$05
	db $40,$05,$76,$05,$40,$05,$76,$05,$67,$05,$77,$05,$68,$05,$75,$05
	db $40,$05,$76,$05,$43,$05,$53,$05,$44,$05,$54,$05,$56,$05,$75,$05
	db $A2,$05,$B2,$05,$A3,$05,$B3,$05,$50,$05,$60,$05,$50,$05,$60,$05
	db $66,$05,$65,$05,$66,$05,$65,$05,$65,$05,$49,$05,$65,$05,$4A,$05
	db $65,$05,$4B,$05,$65,$05,$65,$05,$59,$05,$69,$05,$5A,$05,$6A,$05
	db $65,$05,$65,$05,$65,$05,$4D,$05,$65,$05,$4E,$05,$65,$05,$4F,$05
	db $65,$05,$65,$05,$65,$05,$65,$05,$65,$05,$5F,$05,$65,$05,$5F,$05
	db $FF,$00,$FF,$00,$FF,$00,$FF,$00,$5B,$05,$FF,$00,$5C,$05,$6C,$05
	db $5D,$05,$6D,$05,$5E,$05,$FF,$00,$FF,$00,$FF,$00,$7C,$05,$FF,$00
	db $4C,$05,$79,$05,$4C,$05,$7A,$05,$7D,$05,$FF,$00,$FF,$00,$FF,$00
	db $6B,$05,$6B,$05,$7B,$05,$7B,$05,$FF,$00,$FF,$00,$FF,$00,$6E,$05
	db $6B,$05,$6F,$05,$7B,$05,$7E,$05,$FF,$00,$7F,$05,$FF,$00,$FF,$00
	db $81,$05,$65,$05,$81,$05,$A0,$05,$80,$05,$91,$05,$80,$05,$90,$05
	db $80,$05,$90,$05,$81,$05,$65,$05,$81,$05,$65,$05,$81,$05,$65,$05
	db $80,$05,$91,$05,$80,$05,$91,$05

;--------------------------------------------------------------------

DATA_2AC5E8:
	db $FD,$08,$FD,$08,$FD,$08,$FD,$08,$FD,$08,$B0,$09,$FD,$08,$B1,$09
	db $FD,$08,$B8,$09,$FD,$08,$B9,$09,$FD,$08,$B0,$09,$FD,$08,$BB,$09
	db $FD,$08,$BC,$09,$FD,$08,$BD,$09,$40,$09,$50,$09,$41,$09,$51,$09
	db $48,$09,$42,$09,$49,$09,$43,$09,$4A,$09,$44,$09,$4B,$09,$45,$09
	db $4C,$09,$46,$09,$4D,$09,$47,$09,$51,$09,$50,$09,$50,$09,$51,$09
	db $B2,$09,$42,$09,$B3,$09,$43,$09,$54,$09,$44,$09,$51,$09,$45,$09
	db $B3,$49,$46,$09,$B7,$09,$47,$09,$52,$09,$42,$09,$53,$09,$43,$09
	db $56,$09,$46,$09,$57,$09,$47,$09,$51,$09,$AA,$09,$50,$09,$67,$09
	db $51,$09,$66,$09,$50,$09,$AB,$09,$51,$09,$AA,$09,$50,$09,$AB,$09
	db $52,$09,$58,$09,$53,$09,$59,$09,$54,$09,$5A,$09,$51,$09,$5B,$09
	db $56,$09,$5C,$09,$57,$09,$5D,$09,$AC,$09,$AE,$09,$77,$09,$AF,$09
	db $51,$09,$BE,$09,$50,$09,$BF,$09,$76,$09,$AE,$09,$AD,$09,$AF,$09
	db $AC,$09,$B6,$09,$AD,$09,$A9,$09,$AC,$09,$AE,$09,$AD,$09,$AF,$09
	db $6C,$09,$7C,$09,$68,$09,$78,$09,$4E,$09,$5E,$09,$4F,$09,$5F,$09
	db $63,$09,$6A,$09,$6A,$09,$63,$09,$60,$09,$70,$09,$61,$09,$71,$09
	db $62,$09,$72,$09,$63,$09,$73,$09,$64,$09,$74,$09,$65,$09,$75,$09
	db $6B,$09,$7B,$09,$6D,$09,$7D,$09,$6E,$09,$7E,$09,$6F,$09,$7F,$09
	db $6C,$09,$7C,$09,$6D,$09,$7D,$09

;--------------------------------------------------------------------

DATA_2AC700:
	db $FF,$00,$FF,$00,$FF,$00,$FF,$00,$59,$09,$62,$09,$59,$09,$62,$09
	db $6B,$09,$74,$09,$6B,$09,$74,$09,$7F,$09,$8B,$09,$7F,$09,$8B,$09
	db $FE,$04,$FE,$04,$FE,$04,$FE,$04,$FE,$04,$41,$05,$FE,$04,$42,$05
	db $FE,$04,$43,$05,$FE,$04,$44,$05,$FE,$04,$FE,$04,$FE,$04,$4A,$05
	db $45,$05,$4B,$05,$46,$05,$4C,$05,$47,$05,$4D,$05,$48,$05,$4E,$05
	db $FE,$04,$4F,$05,$FE,$04,$FE,$04,$51,$05,$5A,$05,$52,$05,$5B,$05
	db $53,$05,$5C,$05,$54,$05,$5D,$05,$55,$05,$5E,$05,$56,$05,$5F,$05
	db $57,$05,$60,$05,$58,$05,$61,$05,$51,$05,$5A,$05,$FE,$04,$7E,$05
	db $FE,$04,$7E,$49,$FE,$04,$7D,$49,$FE,$04,$7D,$09,$FE,$04,$7E,$09
	db $FE,$04,$8A,$05,$58,$05,$61,$05,$63,$05,$6C,$05,$64,$05,$6D,$05
	db $65,$05,$6E,$05,$66,$05,$6F,$05,$67,$05,$70,$05,$68,$05,$71,$05
	db $69,$05,$72,$05,$6A,$05,$73,$05,$94,$05,$9A,$05,$95,$05,$9B,$05
	db $89,$49,$7A,$0A,$88,$49,$91,$49,$88,$09,$91,$09,$89,$09,$7A,$0A
	db $92,$05,$98,$05,$93,$05,$99,$05,$75,$05,$80,$05,$76,$05,$81,$05
	db $77,$05,$82,$05,$78,$05,$83,$05,$79,$05,$84,$05,$7A,$05,$85,$05
	db $7B,$05,$86,$05,$7C,$05,$87,$05,$A0,$05,$80,$05,$A1,$05,$81,$05
	db $7A,$0A,$9D,$49,$97,$49,$9C,$49,$97,$09,$9C,$09,$7A,$0A,$9D,$09
	db $9E,$05,$86,$05,$9F,$05,$87,$05,$8C,$05,$8C,$05,$A3,$05,$40,$45
	db $A5,$05,$40,$05,$8D,$05,$8D,$05,$8E,$05,$8E,$05,$A3,$05,$40,$45
	db $A5,$05,$40,$05,$90,$05,$8C,$45,$A3,$45,$40,$05,$A2,$49,$A4,$49
	db $A2,$09,$A4,$09,$A3,$09,$40,$45,$8C,$05,$96,$09,$40,$45,$96,$49
	db $40,$05,$96,$09,$8F,$05,$96,$49,$8E,$05,$96,$09,$40,$45,$96,$49
	db $40,$05,$96,$09,$8C,$45,$96,$49,$40,$05,$96,$09,$A4,$49,$96,$49
	db $A4,$09,$96,$09,$40,$45,$96,$49,$7F,$0A,$7F,$0A,$7F,$0A,$7F,$0A
	db $FF,$00,$50,$09,$FF,$00,$50,$09

;--------------------------------------------------------------------

DATA_2AC888:
	db $FF,$00,$FF,$00,$FF,$00,$FF,$00,$42,$05,$52,$05,$43,$05,$53,$05
	db $70,$05,$80,$05,$71,$05,$81,$05,$70,$05,$70,$05,$71,$05,$71,$05
	db $60,$05,$40,$05,$61,$05,$41,$05,$62,$05,$42,$05,$63,$05,$43,$05
	db $4D,$05,$5D,$05,$4E,$05,$5E,$05,$73,$05,$83,$05,$73,$05,$83,$05
	db $73,$05,$83,$05,$72,$05,$82,$05,$6F,$05,$7F,$05,$71,$05,$71,$05
	db $44,$05,$54,$05,$44,$05,$54,$05,$4B,$05,$5B,$05,$41,$05,$41,$05
	db $42,$05,$42,$05,$4C,$05,$5C,$05,$44,$05,$54,$05,$45,$05,$55,$05
	db $46,$05,$56,$05,$44,$05,$54,$05,$45,$05,$55,$05,$46,$05,$56,$05
	db $6D,$05,$54,$05,$6E,$05,$54,$05,$64,$05,$74,$05,$64,$05,$74,$05
	db $6B,$05,$7B,$05,$41,$05,$41,$05,$42,$05,$42,$05,$6C,$05,$7C,$05
	db $64,$05,$74,$05,$65,$05,$75,$05,$66,$05,$76,$05,$64,$05,$74,$05
	db $65,$05,$75,$05,$66,$05,$76,$05,$64,$05,$7D,$05,$64,$05,$7E,$05
	db $88,$05,$90,$05,$89,$05,$41,$05,$8A,$05,$42,$05,$64,$05,$91,$05
	db $72,$05,$82,$05,$73,$05,$83,$05,$69,$05,$79,$05,$41,$05,$41,$05
	db $42,$05,$42,$05,$6A,$05,$7A,$05,$67,$05,$77,$05,$68,$05,$78,$05
	db $86,$05,$84,$05,$87,$05,$85,$05,$80,$05,$70,$05,$81,$05,$71,$05
	db $40,$05,$40,$05,$41,$05,$41,$05,$42,$05,$42,$05,$43,$05,$43,$05
	db $8C,$05,$9C,$05,$8D,$05,$9D,$05,$8D,$45,$9D,$45,$8F,$05,$9F,$05
	db $A0,$05,$98,$05,$41,$05,$99,$05,$42,$05,$9A,$05,$A1,$05,$9B,$05
	db $64,$05,$74,$05,$65,$05,$75,$05,$A2,$05,$94,$05,$A3,$05,$8E,$05
	db $A3,$45,$8E,$45,$9E,$05,$8B,$05,$66,$05,$76,$05,$64,$05,$74,$05
	db $A8,$05,$EC,$04,$64,$05,$74,$05,$ED,$04,$EE,$04,$FF,$00,$FF,$00
	db $73,$05,$84,$05,$73,$05,$85,$05,$92,$05,$96,$05,$93,$05,$54,$05
	db $A0,$05,$54,$05,$95,$05,$97,$05,$A6,$05,$42,$05,$64,$05,$91,$05
	db $64,$05,$A4,$05,$A7,$05,$A5,$05,$6F,$05,$7F,$05,$4F,$05,$5F,$05
	db $86,$05,$83,$05,$87,$05,$83,$05,$50,$05,$60,$05,$51,$05,$61,$05
	db $52,$05,$62,$05,$53,$05,$63,$05,$40,$05,$50,$05,$41,$05,$51,$05

;--------------------------------------------------------------------

; Note: BG map16 for the BG used in 1-2

DATA_2ACA38:
	db $FF,$00,$FF,$00,$FF,$00,$FF,$00,$B8,$09,$B8,$09,$B8,$09,$B8,$09
	db $FF,$00,$FF,$00,$FF,$00,$FF,$00,$FF,$00,$86,$05,$80,$05,$87,$05
	db $81,$05,$52,$05,$82,$05,$53,$05,$83,$05,$54,$05,$84,$05,$55,$05
	db $85,$05,$88,$05,$FF,$00,$89,$05,$8A,$05,$8C,$05,$61,$05,$71,$05
	db $62,$05,$72,$05,$63,$05,$73,$05,$64,$05,$74,$05,$65,$05,$75,$05
	db $66,$05,$76,$05,$8B,$05,$8D,$05,$44,$05,$54,$05,$45,$05,$55,$05
	db $46,$05,$56,$05,$47,$05,$57,$05,$40,$05,$5C,$05,$4D,$05,$5D,$05
	db $4E,$05,$5E,$05,$4F,$05,$5F,$05,$66,$05,$76,$05,$67,$05,$77,$05
	db $5C,$85,$40,$85,$5D,$85,$4D,$85,$5E,$85,$4E,$85,$5F,$85,$4F,$85
	db $48,$05,$58,$05,$49,$05,$59,$05,$4A,$05,$5A,$05,$47,$05,$5B,$05
	db $40,$05,$50,$05,$41,$05,$51,$05,$42,$05,$52,$05,$43,$05,$53,$05
	db $9D,$05,$54,$05,$9E,$05,$55,$05,$9B,$05,$52,$05,$9C,$05,$53,$05
	db $58,$85,$48,$85,$59,$85,$49,$85,$5A,$85,$4A,$85,$5B,$85,$47,$85
	db $60,$05,$70,$05,$61,$05,$71,$05,$66,$05,$76,$05,$AD,$05,$BD,$05
	db $AC,$05,$BC,$05,$61,$05,$71,$05,$FF,$00,$6E,$05,$68,$05,$6F,$05
	db $69,$05,$52,$05,$6A,$05,$53,$05,$6B,$05,$54,$05,$6C,$05,$55,$05
	db $6D,$05,$78,$05,$FF,$00,$79,$05,$7A,$05,$7B,$05,$61,$05,$71,$05
	db $66,$05,$76,$05,$7C,$05,$7D,$05,$90,$09,$97,$09,$90,$09,$97,$09
	db $98,$09,$99,$09,$98,$09,$99,$09,$B8,$09,$A0,$09,$91,$09,$A1,$09
	db $92,$09,$A2,$09,$93,$09,$A3,$09,$94,$09,$A4,$09,$95,$09,$A5,$09
	db $96,$09,$A6,$09,$B8,$09,$A7,$09,$B8,$09,$86,$05,$80,$05,$87,$05
	db $85,$05,$88,$05,$B8,$09,$89,$05,$B0,$09,$B9,$09,$B1,$09,$FD,$08
	db $B2,$09,$FD,$08,$B3,$09,$8F,$09,$B3,$49,$8F,$49,$B5,$09,$AE,$09
	db $B6,$09,$AF,$09,$B7,$09,$B4,$09,$FD,$08,$FD,$08,$FD,$08,$FD,$08
	db $FD,$08,$FD,$08,$AE,$09,$AE,$09,$7E,$09,$7E,$09,$7F,$09,$7F,$09
	db $9F,$05,$AA,$05,$FD,$08,$AB,$05,$FD,$08,$A8,$05,$9A,$05,$A9,$05

;--------------------------------------------------------------------

DATA_2ACBD8:
	db $70,$05,$74,$05,$71,$05,$75,$05,$72,$05,$76,$05,$73,$05,$77,$05
	db $78,$05,$7C,$05,$79,$05,$7D,$05,$7A,$05,$7E,$05,$7B,$05,$7F,$05
	db $67,$05,$69,$05,$68,$05,$6A,$05,$FF,$00,$FF,$00,$FF,$00,$FF,$00

;--------------------------------------------------------------------

DATA_2ACC08:
	db $FF,$00,$FF,$00,$FF,$00,$FF,$00,$41,$05,$7C,$06,$42,$05,$44,$05
	db $43,$05,$45,$05,$FF,$00,$4B,$05,$FF,$00,$49,$05,$49,$05,$4A,$05
	db $4A,$05,$7C,$06,$7C,$06,$58,$05,$7C,$06,$51,$05,$7C,$06,$7C,$06
	db $47,$05,$7C,$06,$48,$05,$46,$05,$4B,$05,$48,$05,$FF,$00,$4B,$05
	db $FF,$00,$40,$09,$FF,$00,$41,$09,$FF,$00,$42,$09,$FF,$00,$43,$09
	db $4A,$05,$7C,$06,$7C,$06,$7C,$06,$7C,$06,$57,$05,$7C,$06,$7C,$06
	db $57,$05,$7C,$06,$7C,$06,$7C,$06,$7C,$06,$52,$05,$47,$05,$7C,$06
	db $55,$05,$46,$05,$48,$05,$7B,$06,$4B,$05,$48,$05,$49,$09,$4C,$05
	db $4A,$09,$7C,$0A,$7C,$0A,$7C,$0A,$44,$09,$7C,$0A,$45,$09,$47,$09
	db $4B,$09,$48,$09,$FF,$00,$4B,$09,$FF,$00,$49,$09,$40,$09,$4A,$09
	db $41,$09,$7C,$0A,$42,$09,$44,$09,$43,$09,$45,$09,$FF,$00,$4B,$09
	db $7C,$06,$7C,$06,$7C,$06,$7C,$06,$58,$05,$7C,$06,$7C,$06,$7C,$06
	db $7C,$06,$7C,$06,$7C,$06,$50,$05,$47,$05,$7C,$06,$7B,$06,$46,$05
	db $54,$05,$7B,$06,$48,$05,$7B,$06,$4D,$05,$48,$05,$7C,$0A,$4D,$05
	db $7C,$0A,$7C,$0A,$7C,$0A,$7C,$0A,$46,$09,$47,$09,$48,$09,$7B,$0A
	db $FF,$00,$49,$09,$49,$09,$4A,$09,$47,$09,$7C,$0A,$48,$09,$46,$09
	db $7C,$06,$7C,$06,$50,$05,$7C,$06,$7C,$06,$7C,$06,$7C,$06,$51,$05
	db $51,$05,$7C,$06,$47,$05,$7C,$06,$7B,$06,$46,$05,$7B,$06,$7B,$06
	db $7B,$06,$53,$05,$48,$05,$7B,$06,$7C,$0A,$7C,$0A,$46,$09,$47,$09
	db $7B,$0A,$7B,$0A,$48,$09,$7B,$0A,$7C,$0A,$7C,$0A,$47,$09,$7C,$0A
	db $7B,$0A,$46,$09,$48,$09,$7B,$0A,$4A,$05,$7C,$06,$7C,$06,$50,$05
	db $7C,$06,$7C,$06,$57,$05,$7C,$06,$7C,$06,$7C,$06,$56,$05,$7C,$06
	db $7C,$06,$7C,$06,$7C,$06,$52,$05,$47,$05,$7C,$06,$55,$05,$46,$05
	db $7B,$06,$7B,$06,$7B,$06,$7B,$06,$7B,$06,$7B,$06,$48,$05,$53,$05
	db $46,$09,$47,$09,$7B,$0A,$7B,$0A,$4A,$05,$7C,$06,$52,$05,$7C,$06
	db $7C,$06,$50,$05,$47,$05,$7C,$06,$7B,$06,$46,$05,$48,$05,$54,$05
	db $47,$09,$7C,$0A,$7B,$0A,$46,$09,$59,$05,$66,$09,$5A,$05,$67,$09
	db $5B,$05,$68,$09,$5C,$05,$69,$09,$5D,$05,$66,$09,$5E,$05,$67,$09
	db $60,$05,$68,$09,$61,$05,$69,$09,$5B,$09,$68,$09,$61,$09,$69,$09
	db $5D,$09,$66,$09,$5E,$09,$67,$09,$60,$09,$68,$09,$61,$09,$69,$09
	db $62,$05,$66,$09,$63,$05,$67,$09,$59,$09,$66,$09,$5A,$09,$67,$09
	db $5B,$09,$68,$09,$5C,$09,$69,$09,$62,$09,$66,$09,$63,$09,$67,$09
	db $64,$09,$68,$09,$65,$09,$69,$09,$6A,$09,$6E,$09,$6B,$09,$6F,$09
	db $6C,$09,$6E,$09,$6D,$09,$6F,$09,$70,$09,$4E,$05,$71,$09,$4F,$05
	db $5F,$05,$5F,$05,$5F,$05,$5F,$05,$FF,$00,$49,$05,$40,$05,$4A,$05

;--------------------------------------------------------------------

DATA_2ACE38:
	db $FF,$00,$FF,$00,$FF,$00,$FF,$00,$8D,$09,$8E,$09,$8D,$09,$8E,$09
	db $8F,$09,$98,$09,$8F,$09,$98,$09,$99,$09,$9A,$09,$99,$09,$9A,$09
	db $FC,$08,$FC,$08,$FC,$08,$FC,$08,$FC,$08,$50,$09,$FC,$08,$51,$09
	db $FC,$08,$52,$09,$40,$09,$53,$09,$41,$09,$54,$09,$42,$09,$55,$09
	db $43,$09,$56,$09,$44,$09,$57,$09,$45,$09,$58,$09,$46,$09,$59,$09
	db $47,$09,$5A,$09,$48,$09,$5B,$09,$49,$09,$5C,$09,$FC,$08,$5D,$09
	db $FC,$08,$5E,$09,$FC,$08,$5F,$09,$60,$09,$70,$09,$61,$09,$71,$09
	db $62,$09,$72,$09,$63,$09,$73,$09,$64,$09,$74,$09,$65,$09,$75,$09
	db $66,$09,$76,$09,$67,$09,$77,$09,$4A,$09,$8A,$05,$4B,$09,$8B,$05
	db $4C,$09,$88,$05,$4D,$09,$89,$05,$4C,$09,$8A,$05,$4D,$09,$8B,$05
	db $68,$05,$78,$05,$69,$05,$79,$05,$79,$C5,$78,$C5,$78,$C5,$79,$C5
	db $FC,$08,$4E,$05,$4E,$05,$6A,$05,$4F,$05,$6B,$05,$FC,$08,$4F,$05
	db $6A,$05,$7A,$05,$7A,$05,$7A,$05,$7B,$05,$7B,$05,$6B,$05,$7B,$05
	db $7A,$05,$7A,$05,$7A,$05,$7A,$05,$7B,$05,$7B,$05,$7B,$05,$7B,$05
	db $FC,$08,$6F,$05,$FC,$08,$6F,$45,$FC,$08,$6F,$05,$6F,$05,$FC,$04
	db $FC,$04,$FC,$04,$FC,$04,$FC,$04,$6F,$45,$FC,$04,$FC,$08,$6F,$45
	db $FC,$08,$6E,$45,$6E,$45,$7E,$06,$6E,$05,$7E,$06,$FC,$08,$6E,$05
	db $6F,$45,$FC,$04,$6E,$45,$7D,$45,$7E,$06,$7E,$06,$7E,$06,$7E,$06
	db $7E,$06,$6C,$05,$6C,$05,$7E,$05,$6D,$05,$6B,$05,$FC,$04,$6D,$05
	db $FC,$04,$50,$05,$FC,$04,$51,$05,$FC,$04,$52,$05,$40,$05,$53,$05
	db $49,$05,$5C,$05,$FC,$04,$5D,$05,$FC,$04,$5E,$05,$FC,$04,$5F,$05
	db $7D,$45,$7C,$05,$6C,$05,$6A,$05,$41,$05,$54,$09,$42,$05,$55,$09
	db $43,$05,$56,$09,$44,$05,$57,$09,$90,$05,$70,$09,$91,$05,$71,$09
	db $92,$05,$72,$09,$93,$05,$73,$09,$94,$05,$74,$09,$95,$05,$75,$09
	db $96,$05,$76,$09,$67,$05,$77,$09,$84,$05,$74,$09,$85,$05,$75,$09
	db $86,$05,$76,$09,$67,$05,$77,$09,$80,$05,$70,$09,$81,$05,$71,$09
	db $82,$05,$72,$09,$83,$05,$73,$09,$FF,$00,$9C,$09,$9B,$09,$9D,$09
	db $9B,$49,$9D,$49,$9B,$09,$9D,$09,$9B,$49,$9D,$49,$FF,$00,$9C,$49
	db $9E,$09,$FF,$00,$9F,$09,$A0,$09,$9F,$49,$A0,$49,$9F,$09,$A0,$09
	db $9F,$49,$A0,$49,$9E,$49,$FF,$00,$FF,$00,$A2,$09,$A1,$09,$A3,$09
	db $A1,$49,$A3,$49,$A1,$09,$A3,$09,$A1,$49,$A3,$49,$FF,$00,$A2,$49
	db $A4,$09,$FF,$00,$A5,$09,$FF,$00,$A5,$49,$FF,$00,$A5,$09,$FF,$00
	db $A5,$49,$FF,$00,$A4,$49,$FF,$00,$FF,$00,$8C,$09,$FF,$00,$8C,$09
	db $A6,$05,$AA,$05,$A7,$05,$AB,$05,$A8,$05,$AC,$05,$A9,$05,$AD,$05

;--------------------------------------------------------------------

DATA_2AD058:
	db $FF,$00,$FF,$00,$FF,$00,$FF,$00,$FF,$00,$50,$05,$41,$05,$51,$05
	db $42,$05,$52,$05,$43,$05,$53,$05,$44,$05,$54,$05,$45,$05,$55,$05
	db $46,$05,$56,$05,$FF,$00,$57,$05,$88,$05,$8C,$05,$89,$05,$8D,$05
	db $92,$05,$92,$05,$93,$05,$93,$05,$48,$05,$58,$05,$49,$05,$59,$05
	db $4A,$05,$5A,$05,$4B,$05,$5B,$05,$4C,$05,$5C,$05,$4D,$05,$5D,$05
	db $4E,$05,$5E,$05,$4F,$05,$5F,$05,$84,$05,$8E,$05,$85,$05,$87,$05
	db $82,$05,$86,$05,$83,$05,$8D,$05,$90,$05,$7A,$05,$74,$05,$7B,$05
	db $75,$05,$52,$05,$76,$05,$53,$05,$63,$05,$54,$05,$64,$05,$55,$05
	db $65,$05,$70,$05,$6B,$05,$71,$05,$6C,$05,$6C,$85,$6D,$05,$6D,$85
	db $6E,$05,$6E,$85,$6F,$05,$6F,$85,$68,$05,$68,$85,$69,$05,$69,$85
	db $6A,$05,$6A,$85,$6B,$05,$6B,$85,$6C,$05,$66,$05,$60,$05,$67,$05
	db $61,$05,$52,$05,$62,$05,$53,$05,$77,$05,$54,$05,$78,$05,$55,$05
	db $79,$05,$7C,$05,$93,$05,$7D,$05,$90,$05,$90,$05,$91,$05,$91,$05
	db $7E,$05,$7F,$05,$49,$05,$59,$05,$4E,$05,$5E,$05,$40,$05,$47,$05
	db $72,$05,$73,$05,$49,$05,$59,$05,$4E,$05,$5E,$05,$80,$05,$81,$05
	db $90,$05,$9C,$05,$91,$05,$9D,$05,$92,$05,$9E,$05,$93,$05,$9F,$05
	db $FC,$04,$A0,$05,$FC,$04,$FC,$04,$FC,$04,$FC,$04,$FC,$04,$A0,$45
	db $68,$05,$94,$05,$69,$05,$95,$05,$6A,$05,$96,$05,$6B,$05,$97,$05
	db $6C,$05,$98,$05,$6D,$05,$99,$05,$6E,$05,$9A,$05,$6F,$05,$9B,$05
	db $9C,$05,$FC,$04,$9D,$05,$FC,$04,$9E,$05,$FC,$04,$9F,$05,$FC,$04
	db $FC,$04,$FC,$04,$FC,$04,$FC,$04,$9E,$05,$FC,$04,$9F,$05,$A0,$45
	db $A0,$45,$FC,$04,$A0,$05,$FC,$04,$A0,$45,$FC,$04,$A0,$05,$A0,$45
	db $A0,$45,$A0,$05,$A0,$05,$FC,$04,$FC,$04,$A0,$05,$FC,$04,$A0,$45
	db $8A,$05,$8E,$05,$8B,$05,$8F,$05,$A2,$09,$FF,$00,$FF,$00,$FF,$00
	db $FF,$00,$FF,$00,$A2,$09,$FF,$00,$FF,$00,$A3,$09,$FF,$00,$FF,$00
	db $FF,$00,$FF,$00,$FF,$00,$A4,$09

;--------------------------------------------------------------------

DATA_2AD1F0:
	db $4C,$09,$5C,$09,$4D,$09,$5D,$09,$4E,$09,$5E,$09,$4F,$09,$5F,$09
	db $48,$09,$58,$09,$49,$09,$59,$09,$4A,$09,$5A,$09,$4B,$09,$5B,$09
	db $40,$09,$50,$09,$41,$09,$51,$09,$42,$09,$52,$09,$43,$09,$53,$09
	db $44,$09,$54,$09,$45,$09,$55,$09,$46,$09,$56,$09,$47,$09,$57,$09
	db $50,$09,$48,$09,$51,$09,$49,$09,$56,$09,$4E,$09,$57,$09,$4F,$09
	db $40,$09,$58,$09,$41,$09,$59,$09,$46,$09,$5E,$09,$47,$09,$5F,$09
	db $60,$09,$61,$09,$60,$09,$61,$09,$61,$89,$60,$89,$61,$89,$60,$89
	db $48,$09,$50,$09,$49,$09,$51,$09,$4A,$09,$52,$09,$4B,$09,$53,$09
	db $4C,$09,$54,$09,$4D,$09,$55,$09,$4E,$09,$56,$09,$4F,$09,$57,$09
	db $40,$09,$62,$09,$41,$09,$63,$09,$42,$09,$64,$09,$43,$09,$65,$09
	db $44,$09,$66,$09,$45,$09,$67,$09,$46,$09,$68,$09,$47,$09,$69,$09
	db $6A,$09,$58,$05,$6B,$09,$59,$05,$6C,$09,$5A,$05,$6D,$09,$5B,$05
	db $6E,$09,$5C,$05,$6F,$09,$5D,$05,$70,$09,$5E,$05,$71,$09,$5F,$05
	db $40,$05,$50,$05,$41,$05,$51,$05,$42,$05,$52,$05,$43,$05,$53,$05
	db $44,$05,$54,$05,$45,$05,$55,$05,$46,$05,$56,$05,$47,$05,$57,$05
	db $48,$05,$58,$05,$49,$05,$59,$05,$4A,$05,$5A,$05,$4B,$05,$5B,$05
	db $4C,$05,$5C,$05,$4D,$05,$5D,$05,$4E,$05,$5E,$05,$4F,$05,$5F,$05
	db $50,$05,$48,$05,$51,$05,$49,$05,$56,$05,$4E,$05,$57,$05,$4F,$05
	db $40,$05,$58,$05,$41,$05,$59,$05,$46,$05,$5E,$05,$47,$05,$5F,$05
	db $60,$05,$61,$05,$60,$05,$61,$05,$61,$85,$60,$85,$61,$85,$60,$85

;--------------------------------------------------------------------

DATA_2AD330:
	db $FF,$00,$FF,$00,$FF,$00,$FF,$00,$FF,$00,$4B,$45,$FF,$00,$45,$45
	db $FF,$00,$43,$45,$FF,$00,$42,$45,$45,$05,$4C,$05,$4B,$05,$4D,$05
	db $FF,$00,$4E,$05,$FF,$00,$4F,$05,$61,$05,$41,$45,$62,$05,$41,$05
	db $FF,$00,$61,$05,$FF,$00,$62,$05,$FF,$00,$45,$05,$FF,$00,$4B,$05
	db $4F,$45,$41,$45,$4E,$45,$7E,$06,$4D,$45,$7E,$06,$4C,$45,$7E,$06
	db $51,$05,$7E,$06,$52,$05,$41,$05,$44,$45,$41,$45,$7E,$06,$7E,$06
	db $7E,$06,$7E,$06,$7E,$06,$7E,$06,$7E,$06,$7E,$06,$41,$05,$41,$85
	db $53,$45,$5C,$45,$FF,$00,$FF,$00,$FF,$00,$52,$45,$FF,$00,$51,$45
	db $FF,$00,$4F,$45,$FF,$00,$4E,$45,$4B,$45,$4D,$45,$45,$45,$4C,$45
	db $7E,$06,$7E,$06,$41,$05,$7E,$06,$41,$45,$7E,$06,$41,$05,$7E,$06
	db $4C,$05,$7E,$06,$4D,$05,$7E,$06,$4E,$05,$7E,$06,$4F,$05,$41,$05
	db $42,$05,$7E,$06,$43,$05,$44,$05,$52,$45,$41,$45,$51,$45,$7E,$06
	db $41,$45,$7E,$06,$7E,$06,$7E,$06,$FF,$00,$52,$45,$FF,$00,$51,$45
	db $41,$45,$A7,$05,$7E,$06,$A7,$05,$7E,$06,$A7,$05,$7E,$06,$A7,$05
	db $7E,$06,$A7,$05,$41,$05,$A7,$05,$41,$45,$A7,$05,$41,$05,$A7,$05
	db $40,$05,$50,$05,$40,$05,$50,$05,$40,$05,$54,$05,$40,$05,$55,$05
	db $46,$05,$56,$05,$47,$05,$57,$05,$48,$05,$58,$05,$49,$05,$59,$05
	db $4A,$05,$5A,$05,$40,$05,$5B,$05,$60,$05,$70,$05,$60,$05,$71,$05
	db $60,$05,$72,$05,$63,$05,$73,$05,$64,$05,$74,$05,$65,$05,$75,$05
	db $66,$05,$76,$05,$67,$05,$77,$05,$68,$05,$78,$05,$69,$05,$79,$05
	db $6A,$05,$7A,$05,$6B,$05,$7B,$05,$6C,$05,$7C,$05,$60,$05,$7D,$05
	db $60,$05,$7E,$05,$60,$05,$7F,$05,$60,$05,$5D,$05,$60,$05,$5E,$05
	db $60,$05,$5F,$05,$60,$05,$98,$05,$60,$05,$99,$05,$60,$05,$9B,$05
	db $60,$05,$A0,$05,$60,$05,$A1,$05,$80,$05,$90,$05,$81,$05,$91,$05
	db $82,$05,$92,$05,$83,$05,$93,$05,$84,$05,$94,$05,$85,$05,$95,$05
	db $86,$05,$96,$05,$87,$05,$97,$05,$88,$05,$FC,$04,$89,$05,$FC,$04
	db $8A,$05,$9A,$05,$8B,$05,$FC,$04,$8C,$05,$9C,$05,$8D,$05,$9D,$05
	db $8E,$05,$9E,$05,$8F,$05,$9F,$05,$6D,$05,$90,$05,$6E,$05,$91,$05
	db $6F,$05,$92,$05,$A2,$05,$93,$05,$A3,$05,$94,$05,$A4,$05,$95,$05
	db $A5,$05,$95,$05,$A6,$05,$95,$05,$FC,$04,$FC,$04,$FC,$04,$FC,$04

;--------------------------------------------------------------------

DATA_2AD510:
	db $64,$09,$6C,$09,$65,$09,$6D,$09,$4A,$49,$7C,$0A,$68,$09,$43,$49
	db $69,$09,$42,$49,$4D,$49,$7D,$0A,$66,$09,$6E,$09,$67,$09,$6F,$09
	db $5B,$49,$6A,$09,$7C,$0A,$6B,$09,$4E,$09,$5E,$09,$4F,$09,$5F,$09
	db $60,$09,$70,$09,$61,$09,$71,$09,$7D,$0A,$62,$09,$46,$49,$63,$09
	db $4C,$09,$46,$09,$4D,$09,$7D,$0A,$5C,$09,$47,$09,$48,$09,$58,$09
	db $49,$09,$59,$09,$5D,$09,$5A,$09,$4A,$09,$7C,$0A,$4B,$09,$5B,$09
	db $40,$09,$50,$09,$41,$09,$51,$09,$7D,$0A,$52,$09,$42,$09,$53,$09
	db $43,$09,$54,$09,$7C,$0A,$55,$09,$44,$09,$56,$09,$45,$09,$57,$09

;--------------------------------------------------------------------

DATA_2AD590:
	db $40,$09,$50,$09,$41,$09,$51,$09,$42,$09,$52,$09,$43,$09,$53,$09
	db $44,$09,$54,$09,$45,$09,$55,$09,$46,$09,$56,$09,$47,$09,$57,$09
	db $60,$09,$70,$09,$61,$09,$71,$09,$62,$09,$72,$09,$63,$09,$73,$09
	db $64,$09,$74,$09,$65,$09,$75,$09,$66,$09,$76,$09,$67,$09,$77,$09
	db $48,$09,$58,$09,$49,$09,$59,$09,$4A,$09,$5A,$09,$4B,$09,$5B,$09
	db $4C,$09,$5C,$09,$4D,$09,$5D,$09,$4E,$09,$5E,$09,$4F,$09,$5F,$09
	db $68,$09,$78,$09,$69,$09,$79,$09,$6A,$09,$7A,$09,$6B,$09,$7B,$09
	db $6C,$09,$7C,$09,$6D,$09,$7D,$09,$6E,$09,$7E,$09,$6F,$09,$7F,$09

;--------------------------------------------------------------------

DATA_2AD610:
	db $FD,$08,$FD,$08,$FD,$08,$FD,$08,$62,$49,$64,$09,$62,$09,$64,$49
	db $62,$49,$6C,$09,$FD,$08,$FD,$08,$FD,$08,$67,$49,$62,$09,$66,$49
	db $FD,$08,$FD,$08,$FD,$08,$62,$09,$6E,$49,$FE,$08,$6D,$49,$FE,$08
	db $FE,$08,$FE,$08,$FE,$08,$FE,$08,$6C,$09,$6D,$09,$FD,$08,$6E,$09
	db $FD,$08,$62,$49,$FD,$08,$62,$09,$FD,$08,$62,$49,$FD,$08,$FD,$08
	db $ED,$09,$FE,$08,$6E,$09,$FE,$08,$67,$49,$FE,$08,$66,$49,$FE,$08
	db $FE,$08,$FE,$08,$FE,$08,$63,$09,$FE,$08,$63,$49,$FE,$08,$FE,$08
	db $FE,$08,$63,$49,$FE,$08,$63,$09,$64,$09,$63,$49,$64,$49,$FE,$08
	db $64,$09,$FE,$08,$64,$49,$FE,$08,$66,$09,$FE,$08,$67,$09,$FE,$08
	db $62,$49,$66,$09,$FD,$08,$67,$09,$63,$49,$6A,$09,$FE,$08,$6B,$09
	db $FE,$08,$FE,$08,$63,$09,$6F,$49,$FE,$08,$6B,$49,$63,$09,$6A,$49
	db $6B,$49,$FF,$00,$6A,$49,$FF,$00,$6F,$09,$72,$09,$FE,$08,$73,$09
	db $FE,$08,$73,$49,$6F,$49,$72,$49,$68,$09,$FF,$00,$68,$49,$FF,$00
	db $63,$49,$68,$09,$63,$09,$68,$49,$FF,$00,$FF,$00,$FF,$00,$FF,$00
	db $73,$49,$FF,$00,$72,$49,$FF,$00,$6A,$09,$FF,$00,$6B,$09,$FF,$00
	db $FF,$00,$40,$05,$FF,$00,$41,$05,$FF,$00,$74,$45,$FF,$00,$FF,$00
	db $FF,$00,$FF,$00,$FF,$00,$74,$05,$44,$05,$54,$05,$45,$05,$55,$05
	db $50,$05,$43,$05,$51,$05,$42,$05,$46,$05,$56,$05,$47,$05,$57,$05
	db $5D,$05,$5C,$05,$5C,$05,$5D,$05,$48,$05,$58,$05,$75,$05,$76,$05
	db $53,$05,$42,$05,$52,$05,$43,$05,$49,$45,$59,$45,$5A,$05,$5B,$05
	db $4A,$05,$54,$05,$4B,$05,$55,$05,$52,$05,$43,$05,$53,$05,$42,$05
	db $4C,$05,$56,$05,$4D,$05,$57,$05,$5D,$05,$CC,$04,$5C,$05,$CD,$04
	db $C2,$04,$C3,$04,$75,$05,$43,$05,$49,$45,$42,$05,$C0,$04,$C1,$04
	db $CC,$04,$CE,$04,$CD,$04,$CF,$04

;--------------------------------------------------------------------

DATA_2AD788:
	db $4C,$09,$4C,$09,$4C,$09,$4C,$09,$4C,$09,$4C,$09,$4C,$09,$5B,$09
	db $4C,$09,$5B,$49,$4C,$09,$4C,$09,$4C,$09,$4C,$09,$5B,$09,$4D,$09
	db $5B,$49,$4D,$49,$4C,$09,$4C,$09,$4C,$09,$40,$09,$4C,$09,$41,$09
	db $4C,$09,$42,$09,$4D,$09,$43,$09,$4D,$49,$43,$49,$4C,$09,$42,$49
	db $4C,$09,$41,$49,$4C,$09,$40,$49,$4C,$09,$41,$49,$5C,$09,$40,$49
	db $5C,$49,$40,$09,$4C,$09,$41,$09,$50,$09,$44,$09,$51,$09,$45,$09
	db $52,$09,$46,$09,$53,$09,$47,$09,$53,$49,$47,$49,$52,$49,$46,$49
	db $51,$49,$45,$49,$50,$49,$44,$49,$54,$09,$48,$09,$55,$09,$49,$09
	db $56,$09,$4A,$09,$57,$09,$4B,$09,$57,$49,$4B,$49,$56,$49,$4A,$49
	db $55,$49,$49,$49,$54,$49,$48,$49,$5E,$09,$60,$09,$5F,$09,$5E,$09
	db $58,$09,$5E,$49,$59,$09,$60,$49,$59,$49,$60,$09,$58,$49,$5E,$09
	db $5F,$49,$5E,$49,$5E,$49,$60,$49,$5D,$09,$4E,$09,$4E,$09,$4F,$09
	db $4E,$49,$4F,$49,$5D,$49,$4E,$49

;--------------------------------------------------------------------

DATA_2AD850:
	db $76,$45,$86,$45,$75,$45,$85,$45,$B4,$05,$B7,$05,$B5,$05,$B4,$05
	db $B4,$05,$B5,$05,$B5,$05,$B6,$05,$B6,$05,$B7,$05,$B7,$05,$B6,$05
	db $B4,$05,$B5,$05,$B5,$05,$B4,$05,$B6,$05,$B5,$05,$B7,$05,$B4,$05
	db $75,$05,$85,$05,$76,$05,$86,$05,$40,$05,$B5,$05,$41,$05,$B4,$05
	db $B4,$05,$41,$05,$B5,$05,$B4,$05,$B6,$05,$B5,$05,$B7,$05,$40,$05
	db $40,$05,$41,$05,$41,$05,$B4,$05,$B4,$05,$B5,$05,$B5,$05,$40,$05
	db $B4,$05,$41,$05,$B5,$05,$40,$05,$B6,$05,$41,$05,$B7,$05,$B4,$05
	db $B4,$05,$41,$05,$B5,$05,$B6,$05,$40,$05,$B7,$05,$41,$05,$B4,$05
	db $B6,$05,$B5,$05,$B7,$05,$B6,$05,$95,$05,$A5,$05,$96,$05,$A6,$05
	db $40,$05,$B7,$05,$41,$05,$B6,$05,$40,$05,$B5,$05,$41,$05,$40,$05
	db $B6,$05,$B7,$05,$B7,$05,$B4,$05,$48,$09,$58,$09,$49,$09,$59,$09
	db $4A,$09,$5A,$09,$4B,$09,$5B,$09,$4C,$09,$5C,$09,$4D,$09,$5D,$09
	db $49,$09,$5E,$09,$4F,$09,$5F,$09,$68,$09,$78,$09,$69,$09,$79,$09
	db $6A,$09,$7A,$09,$6B,$09,$7B,$09,$6C,$09,$7C,$09,$6D,$09,$7D,$09
	db $6E,$09,$7E,$09,$6F,$09,$7F,$09,$88,$09,$98,$09,$89,$09,$99,$09
	db $8A,$09,$9A,$09,$8B,$09,$9B,$09,$8C,$09,$9C,$09,$8D,$09,$9D,$09
	db $8E,$09,$9E,$09,$8F,$09,$9F,$09,$A8,$09,$B8,$09,$A9,$09,$B9,$09
	db $AA,$09,$BA,$09,$AB,$09,$BB,$09,$AC,$09,$BC,$09,$AD,$09,$BD,$09
	db $AE,$09,$BE,$09,$AF,$09,$BF,$09,$94,$09,$B7,$05,$A4,$09,$B4,$05
	db $67,$09,$B5,$05,$77,$09,$B6,$05,$87,$09,$B7,$05,$97,$09,$B4,$05
	db $A7,$09,$B5,$05,$4E,$09,$B6,$05,$96,$05,$A6,$05,$95,$05,$A5,$05
	db $40,$05,$50,$05,$41,$05,$51,$05,$42,$05,$52,$05,$43,$05,$53,$05
	db $44,$05,$54,$05,$45,$05,$55,$05,$46,$05,$56,$05,$47,$05,$57,$05
	db $47,$45,$57,$45,$46,$45,$56,$45,$45,$45,$55,$45,$44,$45,$54,$45
	db $43,$45,$53,$45,$42,$45,$52,$45,$41,$45,$51,$45,$40,$45,$50,$45
	db $60,$05,$70,$05,$61,$05,$71,$05,$62,$05,$72,$05,$63,$05,$73,$05
	db $64,$05,$74,$05,$65,$05,$FF,$00,$66,$05,$FF,$00,$FF,$00,$FF,$00
	db $FF,$00,$FF,$00,$66,$45,$FF,$00,$65,$45,$FF,$00,$64,$45,$74,$45
	db $63,$45,$73,$45,$62,$45,$72,$45,$61,$45,$71,$45,$60,$45,$70,$45
	db $80,$05,$90,$05,$81,$05,$91,$05,$82,$05,$92,$05,$83,$05,$93,$05
	db $84,$05,$FF,$00,$FF,$00,$FF,$00,$FF,$00,$FF,$00,$84,$45,$FF,$00
	db $83,$45,$93,$45,$82,$45,$92,$45,$81,$45,$91,$45,$80,$45,$90,$45
	db $A0,$05,$B0,$05,$A1,$05,$B1,$05,$A2,$05,$B2,$05,$A3,$05,$B3,$05
	db $A3,$45,$B3,$45,$A2,$45,$B2,$45,$A1,$45,$B1,$45,$A0,$45,$B0,$45
	db $48,$05,$58,$05,$49,$05,$59,$05,$4A,$05,$5A,$05,$4B,$05,$5B,$05
	db $4C,$05,$5C,$05,$4D,$05,$5D,$05,$4E,$05,$5E,$05,$4F,$05,$5F,$05
	db $68,$05,$78,$05,$69,$05,$79,$05,$6A,$05,$7A,$05,$6B,$05,$7B,$05
	db $6B,$45,$7B,$45,$6A,$45,$7A,$45,$69,$45,$79,$45,$68,$45,$78,$45
	db $78,$05,$68,$05,$79,$05,$69,$05,$7A,$05,$6A,$05,$7B,$05,$6B,$05
	db $7B,$45,$6B,$45,$7A,$45,$6A,$45,$79,$45,$69,$45,$78,$45,$68,$45
	db $78,$05,$88,$05,$79,$05,$89,$05,$7A,$05,$8A,$05,$7B,$05,$8B,$05
	db $7B,$45,$8B,$45,$7A,$45,$8A,$45,$79,$45,$89,$45,$78,$45,$88,$45
	db $FF,$00,$FF,$00,$FF,$00,$FF,$00

;--------------------------------------------------------------------

DATA_2ADAF8:
	db $FF,$00,$FF,$00,$FF,$00,$FF,$00,$A6,$09,$FF,$00,$FF,$00,$FF,$00
	db $FF,$00,$FF,$00,$A7,$09,$FF,$00,$FF,$00,$5F,$05,$6D,$05,$59,$05
	db $6E,$05,$5A,$05,$6F,$05,$5B,$05,$6F,$45,$5B,$45,$6E,$45,$5A,$45
	db $6D,$45,$59,$45,$FF,$00,$5F,$45,$68,$05,$78,$05,$69,$05,$79,$05
	db $6A,$05,$7A,$05,$6B,$05,$7B,$05,$6B,$45,$7B,$45,$6A,$45,$7A,$45
	db $69,$45,$79,$45,$68,$45,$78,$45,$5E,$45,$5B,$45,$5D,$45,$5A,$45
	db $5C,$45,$59,$45,$88,$45,$58,$45,$88,$05,$58,$05,$5C,$05,$59,$05
	db $5D,$05,$5A,$05,$5E,$05,$5B,$05,$88,$05,$88,$05,$88,$05,$88,$05
	db $88,$05,$88,$05,$88,$05,$7D,$05,$89,$05,$7E,$05,$8A,$05,$7F,$05
	db $8A,$45,$7F,$45,$89,$45,$7E,$45,$88,$45,$7D,$45,$88,$45,$88,$45
	db $88,$05,$88,$05,$8B,$05,$88,$05,$8C,$05,$88,$05,$8D,$05,$7C,$05
	db $8D,$45,$7C,$45,$8C,$45,$88,$45,$8B,$45,$88,$45,$88,$45,$88,$45
	db $88,$05,$40,$05,$88,$05,$41,$05,$88,$05,$42,$05,$88,$05,$43,$05
	db $88,$05,$44,$05,$88,$05,$45,$05,$88,$05,$46,$05,$88,$05,$47,$05
	db $50,$05,$60,$05,$51,$05,$61,$05,$52,$05,$62,$05,$53,$05,$63,$05
	db $54,$05,$64,$05,$55,$05,$65,$05,$56,$05,$66,$05,$57,$05,$67,$05
	db $70,$05,$80,$05,$71,$05,$81,$05,$72,$05,$82,$05,$73,$05,$83,$05
	db $74,$05,$84,$05,$75,$05,$85,$05,$76,$05,$86,$05,$77,$05,$87,$05
	db $90,$05,$A0,$05,$91,$05,$A1,$05,$92,$05,$A2,$05,$93,$05,$A3,$05
	db $94,$05,$A4,$05,$95,$05,$A5,$05,$96,$05,$8E,$05,$97,$05,$8F,$05
	db $98,$05,$48,$05,$99,$05,$49,$05,$9A,$05,$4A,$05,$9B,$05,$4B,$05
	db $9C,$05,$4C,$05,$9D,$05,$4D,$05,$9E,$05,$4E,$05,$9F,$05,$4F,$05
	db $FF,$00,$FF,$00,$A8,$09,$FF,$00,$FF,$00,$FF,$00,$FF,$00,$A9,$09

;--------------------------------------------------------------------

DATA_2ADC68:
	db $97,$09,$89,$09,$98,$09,$86,$09,$99,$09,$87,$09,$96,$09,$88,$09

%FREE_BYTES(NULLROM, 8, $FF)

;--------------------------------------------------------------------

DATA_2ADC80:
	db $06,$00,$07,$F0,$28,$08,$00,$24
	db $0B,$50,$2A,$0B,$80,$11,$0C,$B0
	db $10,$12,$C0,$20,$13,$90,$00,$15
	db $00,$02,$07,$41,$12,$07,$D1,$24
	db $0B,$B1,$11,$0C,$A1,$2C,$11,$31
	db $26,$13,$C1,$22,$13,$51,$02,$FF

;--------------------------------------------------------------------

DATA_2ADCB0:
	db $06,$00,$0B,$50,$2A,$0B,$80,$11
	db $0C,$B0,$10,$12,$C0,$20,$13,$90
	db $00,$15,$00,$02,$0B,$B1,$11,$0C
	db $A1,$2C,$11,$31,$26,$13,$C1,$22
	db $13,$51,$02,$FF

;--------------------------------------------------------------------

DATA_2ADCD4:
	db $06,$00,$12,$C0,$20,$13,$90,$00
	db $15,$00,$02,$13,$C1,$22,$13,$51
	db $02,$FF

;--------------------------------------------------------------------

; Note: Data for the BG used in airship levels.

DATA_2ADCE6:
	db $07,$00,$05,$30,$10,$08,$80,$12
	db $03,$F0,$02,$06,$B1,$14,$08,$41
	db $16,$0A,$D1,$18,$FF

;--------------------------------------------------------------------

; Note: Data for the BG used for airship interiors.

DATA_2ADCFB:
	db $07,$00,$00,$10,$0D,$00,$D0,$0D
	db $04,$00,$1F,$05,$C0,$50,$05,$20
	db $38,$05,$40,$22,$05,$90,$22,$05
	db $E0,$38,$07,$70,$40,$08,$30,$40
	db $08,$B0,$40,$09,$50,$40,$0A,$20
	db $40,$0A,$80,$40,$0B,$30,$40,$0B
	db $B0,$40,$0C,$50,$40,$0C,$20,$51
	db $0D,$20,$40,$0D,$70,$40,$FF

;--------------------------------------------------------------------

; Note: Data for the BG used in 1-5

DATA_2ADD3A:
	db $01,$01,$0F,$20,$02,$0F,$21,$01
	db $FF

;--------------------------------------------------------------------

DATA_2ADD43:
	db $00,$00,$11,$30,$00,$13,$90,$02
	db $11,$81,$04,$FF

;--------------------------------------------------------------------

UNK_2ADD4F:
	db $14,$40,$06,$16,$D0,$08,$14,$A1
	db $0A,$FF

;--------------------------------------------------------------------

Layer2BG05_ScrewedPanels:
;$2ADD59
	db $05,$01,$02,$A0,$00,$04,$10,$10
	db $04,$40,$20,$04,$E0,$10,$0A,$60
	db $30,$0F,$00,$50,$0F,$50,$40,$0F
	db $B0,$40,$02,$81,$00,$04,$31,$10
	db $04,$D1,$20,$0A,$41,$30,$0F,$01
	db $50,$0F,$51,$40,$0F,$B1,$40,$FF

;--------------------------------------------------------------------

; Note: Data for the BG used in the board airship cutscenes

DATA_2ADD89:
	db $11,$01,$17,$10,$10,$11,$40,$00
	db $17,$90,$10,$11,$C0,$00,$16,$01
	db $20,$17,$91,$10,$FF

;--------------------------------------------------------------------

DATA_2ADD9E:
	db $08,$00,$10,$00,$00,$10,$40,$00
	db $12,$80,$20,$10,$C0,$00,$10,$01
	db $00,$12,$41,$20,$12,$81,$10,$10
	db $C1,$00,$FF

;--------------------------------------------------------------------

DATA_2ADDB9:
	db $10,$00,$20,$10,$20,$00,$20,$50
	db $20,$01,$20,$80,$02,$00,$20,$C0
	db $40,$00,$20,$D0,$00,$04,$20,$E0
	db $00,$01,$21,$00,$10,$00,$21,$C0
	db $40,$01,$24,$00,$10,$00,$25,$40
	db $10,$01,$28,$30,$50,$00,$2C,$00
	db $30,$00,$2C,$30,$50,$01,$20,$11
	db $20,$02,$20,$51,$20,$03,$20,$81
	db $02,$02,$20,$D1,$40,$02,$20,$E1
	db $00,$03,$21,$B1,$10,$05,$21,$A1
	db $40,$03,$22,$01,$30,$01,$24,$01
	db $10,$02,$25,$C1,$40,$05,$25,$D1
	db $40,$06,$26,$01,$30,$02,$29,$01
	db $10,$03,$2A,$C1,$40,$04,$2B,$C1
	db $40,$00,$2B,$31,$50,$02,$2D,$C1
	db $40,$04,$2C,$71,$10,$04,$2E,$01
	db $30,$03,$FF

;--------------------------------------------------------------------

; Note: Data for the BG used in 1-2

DATA_2ADE3C:
	db $0E,$00,$0B,$C0,$02,$0F,$A0,$18
	db $0F,$E0,$24,$12,$20,$36,$12,$60
	db $36,$13,$C0,$44,$0F,$40,$70,$10
	db $00,$70,$0B,$81,$0C,$0F,$C1,$64
	db $11,$01,$56,$11,$41,$36,$13,$21
	db $44,$13,$A1,$44,$33,$E1,$54,$01
	db $0F,$21,$70,$FF

;--------------------------------------------------------------------

; Note: Cave BG data?

DATA_2ADE70:
	db $01,$00,$00,$20,$1A,$22,$00,$34
	db $06,$04,$20,$20,$26,$00,$06,$04
	db $08,$20,$06,$0A,$40,$18,$0C,$20
	db $06,$0E,$40,$18,$10,$00,$18,$12
	db $20,$1A,$34,$00,$34,$06,$16,$20
	db $20,$38,$00,$06,$04,$1A,$20,$06
	db $00,$01,$18,$02,$21,$1A,$24,$01
	db $34,$06,$06,$21,$20,$28,$01,$06
	db $04,$0A,$21,$06,$0C,$41,$18,$0E
	db $01,$18,$10,$21,$1A,$32,$01,$34
	db $06,$14,$21,$20,$36,$01,$06,$04
	db $18,$21,$06,$1A,$41,$18,$FF

;--------------------------------------------------------------------

DATA_2ADECF:
	db $0A,$00,$0E,$50,$00,$0F,$A0,$10
	db $11,$31,$20,$10,$81,$30,$FF

;--------------------------------------------------------------------

; Note: Data for the BG used in level 2-2 (Sublevel)

DATA_2ADEDE:
	db $03,$00,$00,$20,$07,$01,$A0,$14
	db $04,$50,$08,$06,$E0,$14,$07,$70
	db $14,$00,$20,$07,$01,$71,$18,$03
	db $11,$08,$05,$31,$13,$07,$91,$14
	db $FF

;--------------------------------------------------------------------

; Note: Data for the BG used in level 2-1

DATA_2ADEFF:
	db $03,$00,$00,$20,$07,$01,$A0,$14
	db $04,$50,$08,$06,$E0,$14,$07,$70
	db $14,$00,$20,$07,$11,$50,$20,$14
	db $A0,$30,$12,$20,$50,$11,$B0,$40
	db $01,$71,$18,$03,$11,$08,$05,$31
	db $13,$07,$91,$14,$0F,$71,$20,$34
	db $E1,$30,$01,$11,$F1,$40,$FF

;--------------------------------------------------------------------

; Note: Data for the BG used in level 1-4

DATA_2ADF36:
	db $02,$00,$0F,$60,$03,$0E,$F0,$03
	db $0F,$E0,$03,$10,$00,$03,$30,$20
	db $03,$01,$11,$10,$03,$11,$40,$03
	db $0E,$A0,$16,$10,$60,$14,$10,$C0
	db $14,$12,$80,$13,$14,$50,$30,$14
	db $F0,$30,$15,$30,$20,$15,$60,$36
	db $30,$01,$03,$01,$0F,$21,$03,$10
	db $81,$04,$11,$B1,$03,$12,$A1,$02
	db $12,$D1,$02,$33,$C1,$01,$01,$0E
	db $41,$16,$10,$21,$14,$12,$61,$13
	db $12,$F1,$13,$14,$11,$30,$15,$31
	db $20,$15,$A1,$20,$15,$E1,$30,$FF

;--------------------------------------------------------------------

; Note: Data for the prison BG

DATA_2ADF96:
	db $05,$01,$00,$00,$02,$00,$80,$20
	db $00,$A0,$10,$00,$C0,$05,$02,$20
	db $02,$02,$C0,$40,$04,$00,$20,$04
	db $20,$10,$04,$80,$10,$04,$A0,$20
	db $04,$40,$40,$06,$A0,$02,$08,$00
	db $31,$08,$40,$02,$08,$C0,$20,$08
	db $E0,$40,$0A,$40,$20,$0A,$60,$02
	db $0C,$00,$02,$0C,$80,$20,$0C,$A0
	db $10,$0C,$C0,$05,$0E,$20,$02,$0E
	db $C0,$40,$10,$00,$20,$10,$20,$10
	db $10,$80,$10,$10,$40,$40,$10,$A0
	db $20,$12,$A0,$02,$14,$00,$31,$14
	db $40,$02,$14,$C0,$20,$14,$E0,$40
	db $16,$40,$20,$16,$60,$02,$18,$00
	db $04,$02,$01,$10,$02,$21,$04,$04
	db $21,$10,$04,$41,$40,$04,$81,$10
	db $04,$A1,$20,$04,$C1,$01,$06,$A1
	db $02,$08,$21,$31,$08,$61,$20,$08
	db $81,$02,$0A,$61,$02,$0A,$E1,$20
	db $0E,$01,$10,$0E,$21,$04,$10,$21
	db $10,$10,$41,$40,$10,$81,$10,$10
	db $A1,$20,$10,$C1,$01,$12,$A1,$02
	db $14,$21,$31,$14,$61,$20,$14,$81
	db $02,$16,$61,$02,$16,$E1,$20,$18
	db $01,$04,$FF

;--------------------------------------------------------------------

DATA_2AE059:
	db $13,$00,$0E,$00,$00,$0F,$60,$02
	db $10,$A0,$04,$13,$C0,$10,$12,$60
	db $20,$10,$01,$06,$0F,$31,$08,$0E
	db $D1,$0A,$13,$81,$10,$12,$21,$20
	db $12,$E1,$20,$FF

;--------------------------------------------------------------------

DATA_2AE07D:
	db $11,$00,$FF

;--------------------------------------------------------------------

DATA_2AE080:
	db $10,$00,$FF

;--------------------------------------------------------------------

DATA_2AE083:
	db $12,$00,$FF

;--------------------------------------------------------------------

; Note: Data for the BG seen in 3-2

DATA_2AE086:
	db $14,$00,$12,$A0,$03,$12,$11,$02
	db $12,$61,$0B,$FF

;--------------------------------------------------------------------

; Note: Data for the toad house BG

DATA_2AE092:
	db $02,$00,$0C,$10,$03,$0C,$50,$03
	db $0C,$90,$03,$0C,$D0,$03,$0C,$70
	db $10,$FF

;--------------------------------------------------------------------

DATA_2AE0A4:
	db $17,$01,$20,$10,$06,$0C,$20,$90
	db $06,$0C,$26,$10,$06,$00,$26,$90
	db $06,$00,$28,$20,$14,$05,$12,$00
	db $26,$12,$40,$36,$12,$80,$26,$12
	db $C0,$36,$FF

;--------------------------------------------------------------------

DATA_2AE0C7:
	db $15,$00,$00,$70,$03,$00,$E0,$40
	db $01,$50,$50,$02,$00,$40,$02,$C0
	db $00,$04,$10,$00,$04,$80,$40,$05
	db $60,$50,$05,$B0,$10,$05,$F0,$40
	db $06,$40,$10,$06,$90,$50,$07,$00
	db $10,$07,$70,$40,$07,$A0,$10,$0D
	db $80,$30,$0D,$D0,$20,$0E,$40,$20
	db $0F,$B0,$20,$10,$60,$20,$00,$31
	db $50,$00,$A1,$00,$01,$01,$00,$01
	db $E1,$50,$02,$61,$40,$03,$C1,$00
	db $04,$21,$0D,$05,$91,$00,$05,$D1
	db $50,$06,$41,$52,$06,$B1,$10,$07
	db $11,$10,$07,$71,$40,$0D,$71,$30
	db $0E,$11,$20,$0F,$E1,$21,$10,$21
	db $20,$10,$91,$30,$FF

;--------------------------------------------------------------------

DATA_2AE13C:
	db $0F,$00,$00,$F0,$50,$02,$10,$70
	db $02,$60,$50,$03,$20,$50,$03,$A0
	db $60,$03,$D0,$40,$04,$90,$40,$05
	db $50,$50,$06,$10,$70,$07,$E0,$70
	db $08,$40,$50,$08,$80,$40,$09,$B0
	db $60,$0B,$70,$50,$0C,$50,$40,$2B
	db $20,$08,$01,$0D,$10,$04,$0E,$F0
	db $03,$0F,$40,$05,$0F,$E0,$03,$0C
	db $A0,$18,$0E,$60,$16,$10,$C0,$14
	db $12,$80,$13,$00,$51,$50,$02,$11
	db $40,$02,$A1,$40,$02,$D1,$60,$03
	db $61,$50,$04,$21,$70,$05,$81,$40
	db $06,$51,$50,$07,$01,$50,$09,$D1
	db $40,$0A,$21,$50,$0A,$A1,$50,$0A
	db $F1,$70,$0B,$01,$40,$0C,$C1,$70
	db $0D,$D1,$60,$0E,$B1,$06,$0F,$81
	db $04,$30,$01,$03,$01,$10,$D1,$04
	db $11,$A1,$03,$32,$C1,$02,$01,$0A
	db $41,$19,$0D,$21,$17,$0F,$F1,$16
	db $11,$61,$14,$FF

;--------------------------------------------------------------------

DATA_2AE1D8:
	db $16,$00,$0B,$00,$21,$0B,$40,$02
	db $0B,$C0,$10,$0B,$E0,$30,$0D,$40
	db $10,$0D,$60,$02,$11,$20,$48,$13
	db $00,$42,$13,$80,$60,$13,$A0,$50
	db $13,$C0,$45,$15,$20,$42,$15,$C0
	db $70,$17,$00,$60,$17,$20,$50,$17
	db $40,$70,$17,$80,$50,$17,$A0,$60
	db $19,$A0,$42,$0B,$01,$30,$0B,$21
	db $21,$0B,$61,$10,$0B,$81,$02,$0D
	db $61,$02,$0D,$E1,$10,$15,$01,$50
	db $15,$21,$44,$17,$21,$50,$17,$41
	db $70,$17,$81,$50,$17,$A1,$60,$17
	db $C1,$41,$19,$A1,$42,$FF

;--------------------------------------------------------------------

DATA_2AE23E:
	db $0C,$00,$FF

;--------------------------------------------------------------------

DATA_2AE241:
	db $0B,$00,$0B,$10,$24,$0B,$90,$24
	db $02,$00,$06,$02,$40,$16,$02,$80
	db $06,$02,$C0,$16,$FF

;--------------------------------------------------------------------

	%DATATABLE_SMB3_OverworldLayoutDataAndPointers(NULLROM)		; $2AE256

;--------------------------------------------------------------------

; Note: BG palette animation data during the Peach rescued cutscene.

DATA_2AEDB1:
	dw $45BC,$0000,$0000,$0004,$0007,$000A,$000E,$0842,$0C83,$10C4,$1505,$0004,$0C67,$18CA,$0000,$0000

DATA_2AEDD1:
	dw $45BC,$0421,$0000,$0005,$0008,$000B,$000F,$0842,$0C83,$10C4,$1926,$0004,$0C67,$1CEB,$0462,$1084

DATA_2AEDF1:
	dw $45BC,$18C6,$0000,$0006,$0009,$000C,$0010,$0842,$0C83,$14E5,$1D47,$0004,$0C67,$210C,$18E5,$2108

DATA_2AEE11:
	dw $45BC,$2D6B,$0000,$0007,$000A,$000D,$0011,$0842,$10A4,$1906,$2168,$0004,$0C67,$252D,$2D68,$318C

DATA_2AEE31:
	dw $45BC,$4210,$0000,$0008,$000B,$000E,$0012,$0C63,$14C5,$1D27,$2589,$0004,$0C67,$294E,$41EB,$4211

DATA_2AEE51:
	dw $45BC,$56B5,$0421,$0009,$000C,$000F,$0013,$1084,$18E6,$2148,$29AA,$0004,$0C67,$2D6F,$566E,$5694

DATA_2AEE71:
	dw $45BC,$6B5A,$0842,$000A,$000D,$0010,$0014,$14A5,$1D07,$2569,$2DCB,$0004,$0C67,$3190,$6AF1,$6B17

DATA_2AEE91:
	dw $45BC,$7FFF,$0C63,$000B,$000E,$0011,$0015,$18C6,$2128,$298A,$31EC,$0004,$0C67,$35B1,$7F74,$7F9A

;--------------------------------------------------------------------

DATA_2AEEB1:
	dw $631D,$631D,$631D,$631D,$641C,$641C,$641C,$641C
	dw $651B,$651B,$651B,$651B,$661A,$661A,$661A,$661A
	dw $6719,$6719,$6719,$6719,$6818,$6818,$6818,$6818
	dw $6917,$6917,$6917,$6917,$6A16,$6A16,$6A16,$6A16
	dw $6B15,$6B15,$6B15,$6B15,$6C14,$6C14,$6C14,$6C14
	dw $6D13,$6D13,$6D13,$6D13,$6E12,$6E12,$6E12,$6E12
	dw $6F11,$6F11,$6F11,$6F11,$7010,$7010,$7010,$7010
	dw $710F,$710F,$710F,$710F,$720E,$720E,$720E,$720E
	dw $730D,$730D,$730D,$730D,$740C,$740C,$740C,$740C
	dw $750B,$750B,$750B,$750B,$760A,$760A,$760A,$760A
	dw $7709,$7709,$7709,$7709,$7808,$7808,$7808,$7808
	dw $7907,$7907,$7907,$7907,$7A06,$7A06,$7A06,$7A06
	dw $7B05,$7B05,$7B05,$7B05,$7C04,$7C04,$7C04,$7C04
	dw $7D03,$7D03,$7D03,$7D03,$7E02,$7E02,$7E02,$7E02
	dw $7F01,$7F01,$7F01,$7F01,$8000,$8000,$8000,$8000
	dw $8000,$8000,$8000,$8000,$8000,$8000,$8000,$8000
	dw $8000,$8000,$8000,$8000,$8000,$8000,$8000,$8000
	dw $8000,$8000,$8000,$8000,$8000,$8000,$8000,$8000
	dw $8000,$8000,$8000,$8000,$8000,$8000,$8000,$8000
	dw $8000,$8000,$8000,$8000,$8000,$8000,$8000,$8000
	dw $8000,$8000,$8000,$8000,$8000,$8000,$8000,$8000
	dw $8000,$8000,$8000,$8000,$8000,$8000,$8000,$8000
	dw $8000,$8000,$8000,$8000,$8000,$8000,$8000,$8000
	dw $8000,$8000,$8000,$8000,$8000,$8000,$8000,$8000

DATA_2AF031:
	dw $E39D,$E39D,$E39D,$E39D,$E49C,$E49C,$E49C,$E49C
	dw $E59B,$E59B,$E59B,$E59B,$E69A,$E69A,$E69A,$E69A
	dw $E799,$E799,$E799,$E799,$E898,$E898,$E898,$E898
	dw $E997,$E997,$E997,$E997,$EA96,$EA96,$EA96,$EA96
	dw $EB95,$EB95,$EB95,$EB95,$EC94,$EC94,$EC94,$EC94
	dw $ED93,$ED93,$ED93,$ED93,$EE92,$EE92,$EE92,$EE92
	dw $EF91,$EF91,$EF91,$EF91,$F090,$F090,$F090,$F090
	dw $F18F,$F18F,$F18F,$F18F,$F28E,$F28E,$F28E,$F28E
	dw $F38D,$F38D,$F38D,$F38D,$F48C,$F48C,$F48C,$F48C
	dw $F58B,$F58B,$F58B,$F58B,$F68A,$F68A,$F68A,$F68A
	dw $F789,$F789,$F789,$F789,$F888,$F888,$F888,$F888
	dw $F987,$F987,$F987,$F987,$FA86,$FA86,$FA86,$FA86
	dw $FB85,$FB85,$FB85,$FB85,$FC84,$FC84,$FC84,$FC84
	dw $FD83,$FD83,$FD83,$FD83,$FE82,$FE82,$FE82,$FE82
	dw $FF81,$FF81,$FF81,$FF81,$FF80,$FF80,$FF80,$FF80
	dw $FF80,$FF80,$FF80,$FF80,$FF80,$FF80,$FF80,$FF80
	dw $FF80,$FF80,$FF80,$FF80,$FF80,$FF80,$FF80,$FF80
	dw $FF80,$FF80,$FF80,$FF80,$FF80,$FF80,$FF80,$FF80
	dw $FF80,$FF80,$FF80,$FF80,$FF80,$FF80,$FF80,$FF80
	dw $FF80,$FF80,$FF80,$FF80,$FF80,$FF80,$FF80,$FF80
	dw $FF80,$FF80,$FF80,$FF80,$FF80,$FF80,$FF80,$FF80
	dw $FF80,$FF80,$FF80,$FF80,$FF80,$FF80,$FF80,$FF80
	dw $FF80,$FF80,$FF80,$FF80,$FF80,$FF80,$FF80,$FF80
	dw $FF80,$FF80,$FF80,$FF80,$FF80,$FF80,$FF80,$FF80

;--------------------------------------------------------------------

; Note: Stripe image that reloads the titlescreen tilemap, when skipping the title screen animations.
; Optimization: If this were loaded to the right of the curtain tilemap at the same time as said tilemap...
;... then the game could just move layer 1 into position both when the animation is skipped and when it would normally begin loading.
; This would save about 1.5 KB from not needing this stripe image and make it easier to edit the title screen.
; [BR] Did one better - loaded this instead of the multiple rows, which in return freed 1.37 KB right before the layer 2 stripe image.

DATA_2AF1B1:
	db $00,$00,$05,$FF
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000
	incbin "Tilemaps/TitleScreen_Layer1_br.bin"

%FREE_BYTES(NULLROM, 74, $FF)
else
	; Raised curtain
	db $F4,$01,$F5,$01,$F5,$41,$F4,$41,$F4,$01,$F5,$01,$F5,$41,$F4,$41
	db $F4,$01,$F5,$01,$F5,$41,$F4,$41,$F4,$01,$F5,$01,$F5,$41,$F4,$41
	db $F4,$01,$F5,$01,$F5,$41,$F4,$41,$F4,$01,$F5,$01,$F5,$41,$F4,$41
	db $F4,$01,$F5,$01,$F5,$41,$F4,$41,$F4,$01,$F5,$01,$F5,$41,$F4,$41
	db $F6,$01,$F7,$01,$F7,$41,$F6,$41,$F6,$01,$F7,$01,$F7,$41,$F6,$41
	db $F6,$01,$F7,$01,$F7,$41,$F6,$41,$F6,$01,$F7,$01,$F7,$41,$F6,$41
	db $F6,$01,$F7,$01,$F7,$41,$F6,$41,$F6,$01,$F7,$01,$F7,$41,$F6,$41
	db $F6,$01,$F7,$01,$F7,$41,$F6,$41,$F6,$01,$F7,$01,$F7,$41,$F6,$41
	db $F8,$01,$F9,$01,$F9,$41,$F8,$41,$F8,$01,$F9,$01,$F9,$41,$F8,$41
	db $F8,$01,$F9,$01,$F9,$41,$F8,$41,$F8,$01,$F9,$01,$F9,$41,$F8,$41
	db $F8,$01,$F9,$01,$F9,$41,$F8,$41,$F8,$01,$F9,$01,$F9,$41,$F8,$41
	db $F8,$01,$F9,$01,$F9,$41,$F8,$41,$F8,$01,$F9,$01,$F9,$41,$F8,$41
	db $5C,$00,$FA,$01,$FA,$41,$5C,$00,$5C,$00,$FA,$01,$FA,$41,$5C,$00
	db $5C,$00,$FA,$01,$FA,$41,$5C,$00,$5C,$00,$FA,$01,$FA,$41,$5C,$00
	db $5C,$00,$FA,$01,$FA,$41,$5C,$00,$5C,$00,$FA,$01,$FA,$41,$5C,$00
	db $5C,$00,$FA,$01,$FA,$41,$5C,$00,$5C,$00,$FA,$01,$FA,$41,$5C,$00
	db $5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00
	; "SUPER" + big clouds
	db $5C,$00,$5C,$00,$45,$09,$30,$08,$31,$08,$32,$08,$33,$08,$34,$08
	db $35,$08,$36,$08,$37,$08,$38,$08,$39,$08,$3A,$08,$5C,$00,$5C,$00
	db $5C,$00,$5C,$00,$3B,$1C,$3C,$1C,$3D,$1C,$3E,$1C,$5C,$00,$5C,$00
	db $5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00
	db $5C,$00,$5C,$00,$46,$09,$40,$08,$41,$08,$42,$08,$43,$08,$44,$08
	db $45,$08,$46,$08,$47,$08,$48,$08,$49,$08,$4A,$08,$5C,$00,$5C,$00
	db $5C,$00,$5C,$00,$4B,$1C,$4C,$1C,$4D,$1C,$4E,$1C,$5C,$00,$5C,$00
	db $5C,$00,$5C,$00,$3B,$1C,$3C,$1C,$3D,$1C,$3E,$1C,$5C,$00,$5C,$00
	db $5C,$00,$5C,$00,$47,$09,$50,$08,$51,$08,$52,$08,$53,$08,$54,$08
	db $55,$08,$56,$08,$57,$08,$58,$08,$59,$08,$5A,$08,$5C,$00,$5C,$00
	db $5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00
	db $5C,$00,$5C,$00,$4B,$1C,$4C,$1C,$4D,$1C,$4E,$1C,$5C,$00,$5C,$00
	db $5C,$00,$5C,$00,$48,$09,$60,$08,$61,$08,$62,$08,$63,$08,$64,$08
	db $5C,$00,$66,$08,$67,$08,$68,$08,$69,$08,$6A,$08,$5C,$00,$5C,$00
	db $5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00
	; Small cloud + "MARIO BROS.™"
	db $5C,$00,$5C,$00,$5C,$00,$5C,$00,$40,$09,$70,$08,$71,$08,$72,$08
	db $73,$08,$74,$08,$75,$08,$76,$08,$77,$08,$78,$08,$79,$08,$5C,$00
	db $5C,$00,$5C,$00,$7D,$08,$7E,$08,$7F,$08,$C0,$08,$C1,$08,$C2,$08
	db $5C,$00,$C4,$08,$C5,$08,$CE,$08,$CF,$08,$5C,$00,$5C,$00,$5C,$00
	db $5C,$00,$5C,$00,$5C,$00,$5C,$00,$41,$09,$80,$08,$81,$08,$82,$08
	db $83,$08,$84,$08,$85,$08,$86,$08,$87,$08,$88,$08,$89,$08,$8A,$08
	db $8B,$08,$8C,$08,$8D,$08,$8E,$08,$8F,$08,$D0,$08,$D1,$08,$D2,$08
	db $D3,$08,$D4,$08,$D5,$08,$49,$09,$5C,$00,$5C,$00,$5C,$00,$5C,$00
	db $5C,$00,$5C,$00,$5C,$00,$5C,$00,$42,$09,$90,$08,$91,$08,$92,$08
	db $93,$08,$94,$08,$95,$08,$96,$08,$97,$08,$98,$08,$99,$08,$9A,$08
	db $9B,$08,$9C,$08,$9D,$08,$9E,$08,$9F,$08,$E0,$08,$E1,$08,$E2,$08
	db $E3,$08,$E4,$08,$E5,$08,$4A,$09,$5C,$00,$5C,$00,$5C,$00,$5C,$00
	db $5C,$00,$5C,$00,$5C,$00,$5C,$00,$43,$09,$A0,$08,$A1,$08,$A2,$08
	db $A3,$08,$A4,$08,$A5,$08,$A6,$08,$A7,$08,$A8,$08,$A9,$08,$AA,$08
	db $AB,$08,$AC,$08,$AD,$08,$AE,$08,$AF,$08,$F0,$08,$F1,$08,$F2,$08
	db $F3,$08,$F4,$08,$F5,$08,$4B,$09,$5C,$00,$5C,$00,$5C,$00,$5C,$00
	db $5B,$1C,$6B,$1C,$5C,$00,$5C,$00,$44,$09,$B0,$08,$B1,$08,$B2,$08
	db $B3,$08,$B4,$08,$B5,$08,$B6,$08,$B7,$08,$B8,$08,$B9,$08,$BA,$08
	db $BB,$08,$BC,$08,$BD,$08,$BE,$08,$BF,$08,$C6,$08,$C7,$08,$C8,$08
	db $D6,$08,$D7,$08,$D8,$08,$E8,$08,$04,$1C,$05,$1C,$06,$1C,$07,$1C
	db $5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00
	; "3" + top part of bushes
	db $5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$C9,$04,$CA,$04
	db $CB,$04,$CC,$04,$CD,$04,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00
	db $5C,$00,$5C,$00,$5C,$00,$5C,$00,$14,$1C,$3B,$1D,$3C,$1D,$17,$1C
	db $5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00
	db $5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$D9,$04,$DA,$04
	db $DB,$04,$DC,$04,$DD,$04,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00
	db $5C,$00,$5C,$00,$5C,$00,$5C,$00,$3F,$1D,$21,$1C,$3D,$1D,$12,$1C
	db $5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00
	db $5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$E9,$04,$EA,$04
	db $EB,$04,$EC,$04,$ED,$04,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00
	db $5C,$00,$5C,$00,$5C,$00,$5C,$00,$3F,$1D,$21,$1C,$3D,$1D,$12,$1C
	db $04,$1C,$05,$1C,$06,$1C,$07,$1C,$5C,$00,$5C,$00,$5C,$00,$5C,$00
	db $5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$F9,$04,$FA,$04
	db $FB,$04,$FF,$04,$FD,$04,$FE,$04,$5C,$00,$5C,$00,$5C,$00,$5C,$00
	db $5C,$00,$5C,$00,$04,$1C,$05,$1C,$02,$1C,$03,$1C,$3D,$1D,$12,$1C
	db $14,$1C,$3B,$1D,$3C,$1D,$17,$1C,$5C,$00,$5C,$00,$5C,$00,$5C,$00
	db $5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$6C,$04,$6D,$04
	db $6E,$04,$6F,$04,$DE,$04,$DF,$04,$5C,$00,$5C,$00,$5C,$00,$5C,$00
	db $5C,$00,$5C,$00,$14,$1C,$3B,$1D,$3C,$1D,$13,$1C,$3D,$1D,$12,$1C
	; Bottom of the bushes
	db $3F,$1D,$21,$1C,$3D,$1D,$12,$1C,$5C,$00,$5C,$00,$5C,$00,$5C,$00
	db $5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00
	db $5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00
	db $5C,$00,$5C,$00,$3F,$1D,$21,$1C,$3D,$1D,$23,$1C,$3D,$1D,$12,$1C
	db $3F,$1D,$21,$1C,$3D,$1D,$12,$1C,$5C,$00,$5C,$00,$5C,$00,$5C,$00
	db $5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00
	db $5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00
	db $5C,$00,$5C,$00,$3F,$1D,$21,$1C,$3D,$1D,$23,$1C,$3D,$1D,$12,$1C
	db $3F,$1D,$21,$1C,$00,$1C,$01,$1C,$06,$1C,$07,$1C,$5C,$00,$5C,$00
	db $5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00
	db $5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00
	db $5C,$00,$5C,$00,$3F,$1D,$21,$1C,$3D,$1D,$23,$1C,$3D,$1D,$12,$1C
	db $3F,$1D,$21,$1C,$10,$1C,$3B,$1D,$3C,$1D,$17,$1C,$5C,$00,$5C,$00
	db $5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00
	db $5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00
	db $5C,$00,$5C,$00,$3F,$1D,$21,$1C,$3D,$1D,$23,$1C,$3D,$1D,$12,$1C
	db $3F,$1D,$21,$1C,$20,$1C,$21,$1C,$3D,$1D,$12,$1C,$5C,$00,$5C,$00
	db $5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00
	db $5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00
	db $04,$1C,$05,$1C,$02,$1C,$03,$1C,$3D,$1D,$23,$1C,$3D,$1D,$12,$1C
	db $3F,$1D,$21,$1C,$20,$1C,$21,$1C,$3D,$1D,$12,$1C,$5C,$00,$5C,$00
	db $5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00
	db $5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00,$5C,$00
	db $14,$1C,$3B,$1D,$3C,$1D,$13,$1C,$3D,$1D,$23,$1C,$3D,$1D,$12,$1C

%FREE_BYTES(NULLROM, 74, $FF)
endif
	db $FF

;--------------------------------------------------------------------

CODE_2AF800:
	PHB
	PHK
	PLB
	STZ.w !RAM_SMB3_Global_ObjectAndColorWindowSettingsMirror
	LDX.b #$03
	LDY.b #$22
	LDA.w !RAM_SMB3_Overworld_EnableDarknessFlag
	BEQ.b CODE_2AF818
	LDY.b #$23
	LDX.b #$03
	LDA.b #$33
	STA.w !RAM_SMB3_Global_ObjectAndColorWindowSettingsMirror
CODE_2AF818:
	STY.w !RAM_SMB3_Global_BG1And2WindowMaskSettingsMirror
	STX.w !RAM_SMB3_Global_BG3And4WindowMaskSettingsMirror
	LDA.b #$1C
	STA.w $0281
	STZ.w $0282
	STZ.w $0283
	STZ.w $0285
	LDA.b #$3C
	STA.w $0287
	STZ.w $0288
	LDA.b #$17
	STA.w !RAM_SMB3_Global_MainScreenLayersMirror
	STA.w !RAM_SMB3_Global_MainScreenWindowMaskMirror
	STZ.w !RAM_SMB3_Global_SubScreenLayersMirror
	STZ.w !RAM_SMB3_Global_SubScreenWindowMaskMirror
	LDA.w !RAM_SMB3_Overworld_EnableDarknessFlag
	BEQ.b CODE_2AF856
	DEC.w !RAM_SMB3_Global_MainScreenLayersMirror
	DEC.w !RAM_SMB3_Global_MainScreenWindowMaskMirror
	INC.w !RAM_SMB3_Global_SubScreenLayersMirror
	INC.w !RAM_SMB3_Global_SubScreenWindowMaskMirror
	JMP.w CODE_2AFA1F

CODE_2AF856:
	BRL.w CODE_2AFA19

;--------------------------------------------------------------------

DATA_2AF859:
	db $F0 : dw !RAM_SMB3_Global_WindowHDMATable1
	db $F0 : dw !RAM_SMB3_Global_WindowHDMATable1+$E0
	db $00

DATA_2AF860:
	db $F0 : dw !RAM_SMB3_Global_WindowHDMATable2
	db $F0 : dw !RAM_SMB3_Global_WindowHDMATable2+$E0
	db $00

;--------------------------------------------------------------------
; Note: Something to do with the game over box's HDMA window.

CODE_2AF867:
	PHB
	PHK
	PLB
	LDA.b #$02
	STA.b $92
	REP.b #$30
	STZ.b $04
	STZ.w $0283
	LDA.w #$0060
	STA.b $0E
	SEC
	SBC.w $0281
	STA.w $0289
	CLC
	ADC.w $0281
	CLC
	ADC.w $0281
	STA.w $028B
	LDA.w #$0080								; Note: Window's horizontal center position.
	STA.w $028D
CODE_2AF892:
	LDA.w #$0100
	STA.b $00
	STA.b $02
	LDA.w $0289
	BPL.b CODE_2AF8AD
	LDA.w $0283
	CMP.w $0289
	BCS.b CODE_2AF8CD
	CMP.w $028B
	BCS.b CODE_2AF8CD
	BRA.b CODE_2AF8BA

CODE_2AF8AD:
	LDA.w $0283
	CMP.w $0289
	BCC.b CODE_2AF8CD
	CMP.w $028B
	BCS.b CODE_2AF8CD
CODE_2AF8BA:
	LDA.w $0287
	CLC
	ADC.w $028D
	DEC
	STA.b $02
	LDA.w $028D
	SEC
	SBC.w $0287
	STA.b $00
CODE_2AF8CD:
	LDA.w $0283
	DEC
	ASL
	CMP.w #$01C0
	BCS.b CODE_2AF91D
	TAX
	LDA.b $00
	TAY
	BMI.b CODE_2AF8EC
	AND.w #$FF00
	BEQ.b CODE_2AF8EF
	CMP.w #$0100
	BNE.b CODE_2AF8EC
	LDY.w #$00FF
	BRA.b CODE_2AF8EF

CODE_2AF8EC:
	LDY.w #$0000
CODE_2AF8EF:
	TYA
	AND.w #$00FF
	STA.b $06
	LDA.b $02
	TAY
	AND.w #$FF00
	BEQ.b CODE_2AF908
	LDY.w #$0000
	CMP.w #$0100
	BCC.b CODE_2AF908
	LDY.w #$00FF
CODE_2AF908:
	TYA
	AND.w #$00FF
	XBA
	ORA.b $06
	STA.b $06
	CMP.w #$FFFF
	BNE.b CODE_2AF919
	LDA.w #$00FF
CODE_2AF919:
	STA.l !RAM_SMB3_Global_WindowHDMATable2,x
CODE_2AF91D:
	INC.w $0283
	LDA.w $0283
	CMP.w #$00E1								; Note: First scanline after the window.
	BCS.b CODE_2AF92B
	BRL.w CODE_2AF892

CODE_2AF92B:
	SEP.b #$30
	LDA.w $0285
	BEQ.b CODE_2AF989
	LDA.b #$F8
	CLC
	ADC.w $0287
	STA.w $0287
	BPL.b CODE_2AF940
	STZ.w $0287
CODE_2AF940:
	LDA.b #$F8
	CLC
	ADC.w $0281
	STA.w $0281
	BPL.b CODE_2AF94E
	STZ.w $0281
CODE_2AF94E:
	LDA.w $0287
	ORA.w $0281
	BNE.b CODE_2AF989
	INC.w $0728
	STZ.w $0285
	STZ.w $0291
	LDA.w !RAM_SMB3_Overworld_EnableDarknessFlag
	BNE.b CODE_2AF97F
	LDA.b #$13
	STA.w !RAM_SMB3_Global_MainScreenLayersMirror
	STZ.w !RAM_SMB3_Global_MainScreenWindowMaskMirror
	LDA.w !RAM_SMB3_Global_HDMAEnableMirror
	AND.b #$BF
	STA.w !RAM_SMB3_Global_HDMAEnableMirror
	STZ.w !RAM_SMB3_Global_BG1And2WindowMaskSettingsMirror
	STZ.w !RAM_SMB3_Global_BG3And4WindowMaskSettingsMirror
	STZ.w !RAM_SMB3_Global_ObjectAndColorWindowSettingsMirror
	BRA.b CODE_2AF9A2

CODE_2AF97F:
	LDA.w !RAM_SMB3_Overworld_EnableDarknessFlag
	BEQ.b CODE_2AF989
	LDA.b #$32
	STA.w !RAM_SMB3_Global_ObjectAndColorWindowSettingsMirror
CODE_2AF989:
	LDA.w !RAM_SMB3_Overworld_EnableDarknessFlag
	BEQ.b CODE_2AF992
	LDA.b #$16
	BRA.b CODE_2AF994

CODE_2AF992:
	LDA.b #$17
CODE_2AF994:
	STA.w !RAM_SMB3_Global_MainScreenLayersMirror
	STA.w !RAM_SMB3_Global_MainScreenWindowMaskMirror
	LDA.w !RAM_SMB3_Global_HDMAEnableMirror
	ORA.b #$40
	STA.w !RAM_SMB3_Global_HDMAEnableMirror
CODE_2AF9A2:
	PLB
	RTL

;--------------------------------------------------------------------

DATA_2AF9A4:
	db $FF,$00,$00,$20,$00

CODE_2AF9A9:
	PHB
	PHK
	PLB
	LDA.b #$30
	STA.w !RAM_SMB3_Global_ObjectAndColorWindowSettingsMirror
	LDY.b #$23
	LDX.w $0291
	CPX.b #$03
	BEQ.b CODE_2AF9C1
	LDA.b #$33
	STA.w !RAM_SMB3_Global_ObjectAndColorWindowSettingsMirror
	LDY.b #$33
CODE_2AF9C1:
	STY.w !RAM_SMB3_Global_BG1And2WindowMaskSettingsMirror
	LDA.b #$03
	STA.w !RAM_SMB3_Global_BG3And4WindowMaskSettingsMirror
	LDX.w $0291
	LDA.l DATA_2AF9A4-$01,x				; Optimization: Unnecessary long addressing.
	STA.w $0281
	STZ.w $0282
	STZ.w $0287
	STZ.w $0288
	STZ.w $0283
	STZ.w $0285
	STZ.w $028B
	LDA.b #$80
	STA.w $0294
	LDA.b #$80
	STA.w $0295
	STZ.w $0296
	CPX.b #$01
	BEQ.b CODE_2AF9FA
	CPX.b #$04
	BCC.b CODE_2AFA19
CODE_2AF9FA:
	LDA.b #$03
	STA.w !RAM_SMB3_Global_BG3And4WindowMaskSettingsMirror
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b !RAM_SMB3_Overworld_Mario_YPosLo,x
	CLC
	ADC.b #$08
	STA.w $0294
	LDA.b !RAM_SMB3_Overworld_Mario_XPosLo,x
	CLC
	ADC.b #$08
	STA.w $0295
	LDA.b $45,x
	ADC.b #$00
	STA.w $0296
CODE_2AFA19:
	STZ.w !RAM_SMB3_Global_SubScreenWindowMaskMirror
	STZ.w !RAM_SMB3_Global_SubScreenLayersMirror
CODE_2AFA1F:
	STZ.w !RAM_SMB3_Global_ColorMathInitialSettingsMirror
	STZ.w !RAM_SMB3_Global_ColorMathSelectAndEnableMirror
	LDA.b #$41
	STA.w HDMA[$07].Parameters
	LDA.b #!REGISTER_Window1LeftPositionDesignation
	STA.w HDMA[$07].Destination
	LDA.b #DATA_2AF859
	STA.w HDMA[$07].SourceLo
	LDA.b #DATA_2AF859>>8
	STA.w HDMA[$07].SourceHi
	LDA.b #DATA_2AF859>>16
	STA.w HDMA[$07].SourceBank
	LDA.b #!RAM_SMB3_Global_WindowHDMATable1>>16
	STA.w HDMA[$07].IndirectSourceBank
	LDA.b #$41
	STA.w HDMA[$06].Parameters
	LDA.b #!REGISTER_Window1LeftPositionDesignation
	STA.w HDMA[$06].Destination
	LDA.b #DATA_2AF860
	STA.w HDMA[$06].SourceLo
	LDA.b #DATA_2AF860>>8
	STA.w HDMA[$06].SourceHi
	LDA.b #DATA_2AF860>>16
	STA.w HDMA[$06].SourceBank
	LDA.b #!RAM_SMB3_Global_WindowHDMATable2>>16
	STA.w HDMA[$06].IndirectSourceBank
	PLB
	RTL

;--------------------------------------------------------------------

; Note: Something to do with the circle iris in/out effect

CODE_2AFA63:
	PHB
	PHK
	PLB
	PHD
	LDA.b #$22
	STA.w !RAM_SMB3_Global_ColorMathInitialSettingsMirror
	REP.b #$30
	LDA.w #!RAM_SMB3_Global_BG1And2WindowMaskSettingsMirror
	TCD
	LDA.w #!RAM_SMB3_Global_WindowHDMATable1
	STA.b $02AB
	LDA.w #!RAM_SMB3_Global_WindowHDMATable1>>16
	AND.w #$00FF
	TSB.b $02AD
	LDA.b $028B
	AND.w #$0001
	BEQ.b CODE_2AFA93
	LDA.w #!RAM_SMB3_Global_WindowHDMATable2
	STA.b $02AB
	LDA.w #!RAM_SMB3_Global_WindowHDMATable2>>16
	AND.w #$00FF
	TSB.b $02AD
CODE_2AFA93:
	STZ.b $029D
	STZ.b $02A7
	STZ.b $0283
	STZ.b $0297
	LDA.b $0281
	AND.w #$00FF
	ASL
	TAX
	LDA.l SMB3_CircleHDMAData_DATA_00973E,x
	STA.b $02A9
	LDA.b $0294
	AND.w #$00FF
	STA.b $0289
	LDA.b $0296
	AND.w #$00FF
	XBA
	STA.b $0299
	LDA.b $0295
	AND.w #$00FF
	ORA.b $0299
	STA.b $028D
	LDA.b $0291
	AND.w #$00FF
	CMP.w #$0002
	BEQ.b CODE_2AFAD1
	LDA.b $028D
	SEC
	SBC.b $0210
	STA.b $028D
CODE_2AFAD1:
	LDA.w #$0100
	STA.b $0299
	STA.b $029B
	LDA.b $0283
	INC
	CMP.b $0281
	BCS.b CODE_2AFB15
	LDA.b $0297
	CLC
	ADC.b $02A9
	STA.b $0297
	XBA
	AND.w #$00FF
	LSR
	SEP.b #$30
	TAX
	LDA.l SMB3_CircleHDMAData_DATA_0096BD,x
	STA.w !REGISTER_Multiplicand
	LDA.b $0281
	STA.w !REGISTER_Multiplier
	NOP #4
	LDA.w !REGISTER_ProductOrRemainderHi
	STA.b $02A1
	STZ.b $02A2
	REP.b #$30
	LDA.b $02A1
	CLC
	ADC.b $028D
	STA.b $029B
	LDA.b $028D
	SEC
	SBC.b $02A1
	STA.b $0299
CODE_2AFB15:
	LDA.b $0289
	SEC
	SBC.b $0283
	DEC
	ASL
	STA.b $029D
	TAX
	LDA.b $0299
	TAY
	BMI.b CODE_2AFB33
	AND.w #$FF00
	BEQ.b CODE_2AFB36
	CMP.w #$0100
	BNE.b CODE_2AFB33
	LDY.w #$00FF
	BRA.b CODE_2AFB36

CODE_2AFB33:
	LDY.w #$0000
CODE_2AFB36:
	TYA
	AND.w #$00FF
	STA.b $029F
	LDA.b $029B
	TAY
	AND.w #$FF00
	BEQ.b CODE_2AFB47
	LDY.w #$00FF
CODE_2AFB47:
	TYA
	AND.w #$00FF
	XBA
	ORA.b $029F
	STA.b $029F
	CPX.w #$01C0
	BCS.b CODE_2AFB60
	CMP.w #$FFFF
	BNE.b CODE_2AFB5D
	LDA.w #$00FF
CODE_2AFB5D:
	TXY
	STA.b [$02AB],y
CODE_2AFB60:
	LDA.b $0289
	CLC
	ADC.b $0283
	DEC
	ASL
	STA.b $02A7
	CMP.w #$01C0
	BCS.b CODE_2AFB7C
	TAX
	LDA.b $029F
	CMP.w #$FFFF
	BNE.b CODE_2AFB79
	LDA.w #$00FF
CODE_2AFB79:
	TXY
	STA.b [$02AB],y
CODE_2AFB7C:
	INC.b $0283
	LDA.b $029D
	CMP.w #$01C0
	BCC.b CODE_2AFB8C
	LDA.b $02A7
	CMP.w #$01C0
	BCS.b CODE_2AFB8F
CODE_2AFB8C:
	BRL.w CODE_2AFAD1

CODE_2AFB8F:
	SEP.b #$30
	LDA.b $0291
	DEC
	BEQ.b CODE_2AFC04
	CMP.b #$03
	BEQ.b CODE_2AFC04
	CMP.b #$04
	BEQ.b CODE_2AFC14
	LDA.b $0281
	CLC
	ADC.b #$08
	STA.b $0281
	BCS.b CODE_2AFBAA
	JMP.w CODE_2AFC28

CODE_2AFBAA:
	LDA.b #$38
	STA.w $1050
	STZ.b $0285
	STZ.b $0291
	STZ.b !RAM_SMB3_Global_HDMAEnableMirror
	STZ.b !RAM_SMB3_Global_BG1And2WindowMaskSettingsMirror
	STZ.b !RAM_SMB3_Global_BG3And4WindowMaskSettingsMirror
	STZ.b !RAM_SMB3_Global_ObjectAndColorWindowSettingsMirror
	LDA.b #$02
	STA.w !RAM_SMB3_Global_ColorMathInitialSettingsMirror
	LDA.b #$11
	LDX.w !RAM_SMB3_Level_Layer3BGFromHeader
	CPX.b #$01
	BEQ.b CODE_2AFBEF
	CPX.b #$05
	BEQ.b CODE_2AFBEF
	CPX.b #$06
	BEQ.b CODE_2AFBEF
	CPX.b #$09
	BEQ.b CODE_2AFBF3
	CPX.b #$0A
	BEQ.b CODE_2AFBF3
	CPX.b #$0B
	BEQ.b CODE_2AFBF3
	CPX.b #$0C
	BEQ.b CODE_2AFBF3
	CPX.b #$0F
	BEQ.b CODE_2AFBF3
	CPX.b #$03
	BEQ.b CODE_2AFBFC
	CPX.b #$04
	BEQ.b CODE_2AFBFC
	BRA.b CODE_2AFBF1

CODE_2AFBEF:
	ORA.b #$02
CODE_2AFBF1:
	ORA.b #$04
CODE_2AFBF3:
	STA.b !RAM_SMB3_Global_MainScreenLayersMirror
	STZ.b !RAM_SMB3_Global_MainScreenWindowMaskMirror
	STZ.w !RAM_SMB3_Level_PauseMenuStatus
	BRA.b CODE_2AFC71

CODE_2AFBFC:
	LDA.b #$13
	STA.b !RAM_SMB3_Global_MainScreenLayersMirror
	STZ.b !RAM_SMB3_Global_MainScreenWindowMaskMirror
	BRA.b CODE_2AFC71

CODE_2AFC04:
	LDA.b $0281
	SEC
	SBC.b #$06
	STA.b $0281
	BCS.b CODE_2AFC28
	LDA.b #$FF
	STA.w $1050
	BRA.b CODE_2AFC28

CODE_2AFC14:
	LDA.b $0281
	CLC
	ADC.b #$0A
	STA.b $0281
	CMP.b #$20
	BCC.b CODE_2AFC28
	LDA.b #$20
	STA.b $0281
	LDA.b #$FF
	STA.w $1050
CODE_2AFC28:
	LDX.b #$17
	LDA.w !RAM_SMB3_Level_Layer3BGFromHeader
	CMP.b #$01
	BNE.b CODE_2AFC3B
	BRA.b CODE_2AFC35

CODE_2AFC33:
	LDX.b #$15
CODE_2AFC35:
	LDY.b #$13
	STY.b !RAM_SMB3_Global_SubScreenLayersMirror
	BRA.b CODE_2AFC5B

CODE_2AFC3B:
	CMP.b #$02
	BEQ.b CODE_2AFC33
	CMP.b #$07
	BEQ.b CODE_2AFC35
	CMP.b #$09
	BEQ.b CODE_2AFC55
	CMP.b #$0A
	BEQ.b CODE_2AFC55
	CMP.b #$0B
	BEQ.b CODE_2AFC55
	CMP.b #$0C
	BEQ.b CODE_2AFC55
	BRA.b CODE_2AFC5B

CODE_2AFC55:
	LDX.b #$11
	LDY.b #$06
	STY.b !RAM_SMB3_Global_SubScreenLayersMirror
CODE_2AFC5B:
	STX.b !RAM_SMB3_Global_MainScreenLayersMirror
	STX.b !RAM_SMB3_Global_MainScreenWindowMaskMirror
	LDY.b #$17
	STY.b !RAM_SMB3_Global_SubScreenWindowMaskMirror
	LDY.b #$80
	LDA.b $028B
	AND.b #$01
	BEQ.b CODE_2AFC6D
	LDY.b #$40
CODE_2AFC6D:
	STY.b $93
	INC.b $028B
CODE_2AFC71:
	PLD
	PLB
	RTL

;--------------------------------------------------------------------

; Note: Something to do with the overworld darkness effect

DATA_2AFC74:
	dw $07F9,$0AF6,$0CF4,$0EF2
	dw $0FF1,$11EF,$12EE,$13ED
	dw $14EC,$15EB,$16EA,$16EA
	dw $17E9,$18E8,$18E8,$19E7
	dw $19E7,$1AE6,$1AE6,$1AE6
	dw $1BE5,$1BE5,$1BE5,$1BE5
	dw $1BE5,$1BE5,$1BE5

SMB3_UpdateDarknessCircleWindowPos:
.Main:
;$2AFCAA
	PHB
	PHK
	PLB
	REP.b #$30
	LDA.w #$0001
	STA.w $0283
	STZ.b $04
	LDA.w !RAM_SMB3_Level_Player_CurrentCharacter
	AND.w #$00FF
	TAX
	LDA.b !RAM_SMB3_Overworld_Mario_YPosLo,x
	AND.w #$00FF
	STA.w $028B
	SEC
	SBC.w #$0010
	STA.w $0289
	LDA.b !RAM_SMB3_Overworld_Mario_XPosHi,x
	AND.w #$00FF
	XBA
	STA.b $D8
	LDA.b !RAM_SMB3_Overworld_Mario_XPosLo,x
	AND.w #$00FF
	ORA.b $D8
	CLC
	ADC.w #$0008
	SEC
	SBC.w $0210
	STA.w $028D
CODE_2AFCE7:
	LDA.w #$0100
	STA.b $00
	STA.b $02
	LDA.b $04
	CMP.w #$0034
	BCS.b CODE_2AFCFD
	LDA.w $0283
	CMP.w $0289
	BCS.b CODE_2AFD0D
CODE_2AFCFD:
	LDA.w $0283
	DEC
	ASL
	TAX
	LDA.w #$00FF
	STA.l !RAM_SMB3_Global_WindowHDMATable1,x
	BRL.w CODE_2AFD75

CODE_2AFD0D:
	LDX.b $04
	LDA.l DATA_2AFC74,x
	AND.w #$00FF
	STA.b $D8
	LDA.l DATA_2AFC74+$01,x
	AND.w #$FF00
	XBA
	CLC
	ADC.w $028D
	AND.w #$00FF
	STA.b $00
	LDA.w $028D
	SEC
	SBC.b $D8
	AND.w #$00FF
	STA.b $02
	LDA.b $04
	LSR
	STA.b $D8
	INC.b $04
	INC.b $04
	LDA.w $0283
	DEC
	ASL
	TAX
	LDA.b $02
	AND.w #$00FF
	XBA
	ORA.b $00
	STA.l !RAM_SMB3_Global_WindowHDMATable1,x
	STA.b $DA
	LDA.w $028B
	CLC
	ADC.w #$0020
	SEC
	SBC.b $D8
	DEC
	ASL
	TAX
	LDA.b $DA
	STA.l !RAM_SMB3_Global_WindowHDMATable1,x
	LDA.b $04
	CMP.w #$0034
	BCC.b CODE_2AFD75
	LDA.w $028B
	CLC
	ADC.w #$0020
	STA.w $0283
CODE_2AFD75:
	INC.w $0283
	LDA.w $0283
	CMP.w #$00E1
	BCS.b CODE_2AFD83
	BRL.w CODE_2AFCE7

CODE_2AFD83:
	SEP.b #$30
	LDA.b #$13
	STA.w !RAM_SMB3_Global_MainScreenLayersMirror
	STA.w !RAM_SMB3_Global_MainScreenWindowMaskMirror
	LDA.b #$80
	STA.w !RAM_SMB3_Global_HDMAEnableMirror
	PLB
	RTL

;--------------------------------------------------------------------

; Note: Unreferenced routine

ADDR_2AFD94:
	REP.b #$30
	LDX.w #$0000
	LDA.w #$00FF
ADDR_2AFD9C:
	STA.l !RAM_SMB3_Global_WindowHDMATable1,x
	STA.l !RAM_SMB3_Global_WindowHDMATable1+$02,x
	STA.l !RAM_SMB3_Global_WindowHDMATable1+$04,x
	STA.l !RAM_SMB3_Global_WindowHDMATable1+$06,x
	STA.l !RAM_SMB3_Global_WindowHDMATable1+$08,x
	STA.l !RAM_SMB3_Global_WindowHDMATable1+$0A,x
	STA.l !RAM_SMB3_Global_WindowHDMATable1+$0C,x
	STA.l !RAM_SMB3_Global_WindowHDMATable1+$0E,x
	STA.l !RAM_SMB3_Global_WindowHDMATable1+$10,x
	STA.l !RAM_SMB3_Global_WindowHDMATable1+$12,x
	STA.l !RAM_SMB3_Global_WindowHDMATable1+$14,x
	STA.l !RAM_SMB3_Global_WindowHDMATable1+$16,x
	STA.l !RAM_SMB3_Global_WindowHDMATable1+$18,x
	STA.l !RAM_SMB3_Global_WindowHDMATable1+$1A,x
	STA.l !RAM_SMB3_Global_WindowHDMATable1+$1C,x
	STA.l !RAM_SMB3_Global_WindowHDMATable1+$1E,x
	TXA
	CLC
	ADC.w #$0020
	TAX
	CPX.w #$01C0
	BNE.b ADDR_2AFD9C
	SEP.b #$30
	RTL

;--------------------------------------------------------------------

DATA_2AFDEA:
	dw $0CFC,$0CFC
	dw $0CFC,$0CA9
	dw $0CA9,$0CFC
	dw $0CA9,$0CA9

CODE_2AFDFA:
	REP.b #$30
	LDX.w #$0000
	TXY
CODE_2AFE00:
	LDA.b [$D8],y
	STA.b $DB
CODE_2AFE04:
	PHX
	LDA.b $DB
	AND.w #$C000
	ASL
	ROL
	ROL
	ROL
	ROL
	TAX
	LDA.l DATA_2AFDEA,x
	STA.b $00
	LDA.l DATA_2AFDEA+$02,x
	PLX
	STA.l $7FA002,x
	LDA.b $00
	STA.l $7FA000,x
	ASL.b $DB
	ASL.b $DB
	INX
	INX
	INX
	INX
	TXA
	LSR
	AND.w #$000F
	BNE.b CODE_2AFE04
	INY
	INY
	TYA
	CMP.w #$0040
	BNE.b CODE_2AFE00
	SEP.b #$30
	RTL

;--------------------------------------------------------------------

	%ROUTINE_SMB3_DrawPushStartText(NULLROM)					; $2AFE3F
	%FREE_BYTES(NULLROM, 373, $FF)
%BANK_END(<EndBank>)
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_WorldRollCallState07_DrawSprites(Address)
namespace SMB3_WorldRollCallState07_DrawSprites
%InsertMacroAtXPosition(<Address>)

Main:
	JSL.l SMB3_ResetSpriteOAMRt_Main
	PHB
	LDA.b #SMB3_WorldRollcallSpriteData_Main>>16
	PHA
	PLB
	LDX.b !RAM_SMB3_WorldRollcall_CurrentWorld
	LDA.w SMB3_WorldRollcallSpriteData_DATA_22923E,x
	XBA
	LDA.w SMB3_WorldRollcallSpriteData_DATA_229246,x
	REP.b #$10
	TAX
	LDY.w #$0000
CODE_20D177:
	LDA.w SMB3_WorldRollcallSpriteData_Main,x
	CMP.b #$FF
	BEQ.b CODE_20D1C2
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	INX
	LDA.w SMB3_WorldRollcallSpriteData_Main,x
	SEC
	SBC.b #$10
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$01].YDisp,y
	INX
	LDA.w SMB3_WorldRollcallSpriteData_Main,x
	STA.w SMB3_OAMBuffer[$00].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$01].Tile,y
	INX
	LDA.w SMB3_WorldRollcallSpriteData_Main,x
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$01].Prop,y
	INX
	PHY
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	LDA.w #$0000
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	PLY
	TYA
	CLC
	ADC.w #$0008
	TAY
	SEP.b #$20
	BRA.b CODE_20D177

CODE_20D1C2:
	SEP.b #$10
	LDA.b !RAM_SMB3_WorldRollcall_CurrentWorld
	CMP.b #$03
	BNE.b CODE_20D1D7
	LDA.b #$34
	; (Correct properties for the Big Piranha's stem.)
	;STA.w SMB3_OAMBuffer[$25].Prop
	;STA.w SMB3_OAMBuffer[$27].Prop
	STA.w SMB3_OAMBuffer[\
		(SMB3_WorldRollcallSpriteData_World4_BigPiranhaStem-SMB3_WorldRollcallSpriteData_World4)/$02+$01\
	].Prop
	STA.w SMB3_OAMBuffer[\
		(SMB3_WorldRollcallSpriteData_World4_BigPiranhaStem-SMB3_WorldRollcallSpriteData_World4)/$02+$03\
	].Prop
	LDA.b #$74
	;STA.w SMB3_OAMBuffer[$29].Prop
	STA.w SMB3_OAMBuffer[\
		(SMB3_WorldRollcallSpriteData_World4_BigPiranhaStem-SMB3_WorldRollcallSpriteData_World4)/$02+$05\
	].Prop
CODE_20D1D7:
	INC.b !RAM_SMB3_WorldRollcall_CurrentState
	LDA.b #$03
	STA.b $49
	PLB
	JSL.l CODE_29CE95
	STZ.w $02B3
	RTS
namespace off
endmacro

;--------------------------------------------------------------------

macro DATATABLE_SMB3_WorldRollcallSpriteData(Address)
namespace SMB3_WorldRollcallSpriteData
%InsertMacroAtXPosition(<Address>)

DATA_22923E:
	db World1>>8
	db World2>>8
	db World3>>8
	db World4>>8
	db World5>>8
	db World6>>8
	db World7>>8
	db World8>>8

DATA_229246:
	db World1
	db World2
	db World3
	db World4
	db World5
	db World6
	db World7
	db World8

if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR]
	table "Tables/Fonts/EndingRollcall_br.txt"
endif
UNK_22924E:									; Note: These are the lengths of each world table. Went unused due to the code checking for $FF instead.
	db $74,$88,$78,$90,$74,$70,$70,$9C

Main:
;$229256
base $000000
;        X,Y, Tile,Prop| X,Y, Tile,Prop| X,Y,Tile,Prop|  X,Y,Tile,Prop 
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000
World1:
	db $A8,$30 : dw "M" : db $B0,$30 : dw "U" : db $B8,$30 : dw "N"
	db $C0,$30 : dw "D" : db $C8,$30 : dw "O" : db $D8,$30,$2C,$33
	
	db $B0,$48 : dw "P" : db $B8,$48 : dw "A" : db $C0,$48 : dw "|"
	db $C8,$48 : dw "S" : db $D8,$48 : dw "D" : db $E0,$48 : dw "A"
	db $C8,$58 : dw "G" : db $D0,$58 : dw "R" : db $D8,$58 : dw "A"
	db $E0,$58 : dw "M" : db $E8,$58 : dw "A"

	db $40,$90,$00,$3E
	db $48,$90,$02,$3E,$40,$A0,$04,$3E,$48,$A0,$06,$3E,$78,$B0,$52,$32
	db $80,$B0,$54,$72,$90,$B0,$52,$32,$98,$B0,$54,$72,$B0,$60,$50,$30
	db $A8,$58,$46,$32,$A8,$68,$48,$32,$B0,$68,$4A,$32,$A8,$78,$4C,$32
	db $B0,$78,$4E,$32,$FF

World2:
	db $20,$30 : dw "M" : db $28,$30 : dw "U" : db $30,$30 : dw "N"
	db $38,$30 : dw "D" : db $40,$30 : dw "O" : db $50,$30,$2E,$33
	
	db $18,$50 : dw "D" : db $20,$50 : dw "U" : db $28,$50 : dw "N"
	db $30,$50 : dw "A" : db $38,$50 : dw "S"
	db $48,$50 : dw "D" : db $50,$50 : dw "O"
	db $28,$60 : dw "D" : db $30,$60 : dw "E"
	db $38,$60 : dw "S" : db $40,$60 : dw "E" : db $48,$60 : dw "R"
	db $50,$60 : dw "T" : db $58,$60 : dw "O"

	db $10,$70,$08,$3E,$18,$70,$0A,$3E,$10,$80,$F0,$3E,$18,$80,$F2,$3E
	db $20,$80,$10,$3E,$50,$90,$56,$32,$58,$90,$56,$72,$70,$6B,$46,$32
	db $70,$7B,$48,$32,$78,$7B,$4A,$32,$70,$8B,$4C,$32,$78,$8B,$4E,$32
	db $A8,$A0,$58,$34,$B0,$A0,$5A,$34,$A8,$B0,$5C,$34,$B0,$B0,$5E,$34
	db $B0,$A0,$60,$34,$B8,$A0,$62,$34,$FF

World3:
	db $A8,$30 : dw "M" : db $B0,$30 : dw "U" : db $B8,$30 : dw "N"
	db $C0,$30 : dw "D" : db $C8,$30 : dw "O" : db $D8,$30,$30,$33

	db $A8,$48 : dw "P" : db $B0,$48 : dw "A" : db $B8,$48 : dw "|"
	db $C0,$48 : dw "S"

	db $B0,$58 : dw "B" : db $B8,$58 : dw "E" : db $C0,$58 : dw "I"
	db $C8,$58 : dw "R" : db $D0,$58 : dw "A" : db $D8,$58 : dw "-"
	db $E0,$58 : dw "M" : db $E8,$58 : dw "A" : db $F0,$58 : dw "R"

	db $58,$80,$68,$72,$60,$80,$66,$72,$68,$80,$64,$72
	db $58,$90,$6E,$72,$60,$90,$6C,$72,$68,$90,$6A,$72,$80,$80,$2E,$3E
	db $88,$80,$30,$3E,$90,$80,$32,$3E,$80,$90,$34,$3E,$88,$90,$36,$3E
	db $90,$90,$38,$3E,$C0,$68,$70,$3A,$C8,$68,$70,$7A,$D2,$66,$72,$3A
	db $DC,$63,$74,$3A,$E8,$65,$72,$3A,$FF

World4:
	db $18,$30 : dw "M" : db $20,$30 : dw "U" : db $28,$30 : dw "N"
	db $30,$30 : dw "D" : db $38,$30 : dw "O" : db $48,$30,$32,$33

	db $18,$48 : dw "I" : db $20,$48 : dw "L" : db $28,$48 : dw "H"
	db $30,$48 : dw "A" : db $40,$48 : dw "D" : db $48,$48 : dw "E"
	db $20,$58 : dw "G" : db $28,$58 : dw "I"
	db $30,$58 : dw "G" : db $38,$58 : dw "A" : db $40,$58 : dw "N"
	db $48,$58 : dw "T" : db $50,$58 : dw "E" : db $58,$58 : dw "S"

	db $1C,$70,$76,$32,$24,$70,$78,$32,$2C,$70,$76,$72
.BigPiranhaStem:
	db $1C,$80,$7A,$32,$24,$80,$7C,$32,$2C,$80,$7A,$72

	db $60,$58,$8C,$30,$68,$58,$8E,$30,$68,$60,$80,$34
	db $70,$60,$82,$34,$78,$60,$84,$34,$68,$70,$86,$34,$70,$70,$88,$34
	db $78,$70,$8A,$34,$98,$80,$B4,$30,$A0,$80,$B6,$30,$B0,$80,$1A,$3E
	db $B8,$80,$1C,$3E,$B0,$90,$1E,$3E,$B8,$90,$20,$3E,$C0,$90,$22,$3E
	db $FF

World5:
	db $88,$80 : dw "M" : db $90,$80 : dw "U" : db $98,$80 : dw "N"
	db $A0,$80 : dw "D" : db $A8,$80 : dw "O" : db $B8,$80,$34,$33

	db $78,$98 : dw "P" : db $80,$98 : dw "A" : db $88,$98 : dw "|"
	db $90,$98 : dw "S"
	db $A0,$98 : dw "C" : db $A8,$98 : dw "E"
	db $B0,$98 : dw "L" : db $B8,$98 : dw "E" : db $C0,$98 : dw "S"
	db $C8,$98 : dw "T" : db $D0,$98 : dw "E"

	db $18,$28,$94,$36,$20,$28,$94,$76,$18,$38,$96,$36,$20,$38,$96,$76
	db $20,$54,$98,$36,$28,$54,$9A,$36,$60,$90,$26,$3E,$68,$90,$28,$3E
	db $58,$A0,$24,$3E,$60,$A0,$2A,$3E,$68,$A0,$2C,$3E,$90,$A8,$90,$32
	db $98,$A8,$92,$32,$B8,$38,$90,$32,$C0,$38,$92,$32,$D0,$78,$90,$32
	db $D8,$78,$92,$32,$FF

World6:
	db $B0,$20 : dw "M" : db $B8,$20 : dw "U" : db $C0,$20 : dw "N"
	db $C8,$20 : dw "D" : db $D0,$20 : dw "O" : db $E0,$20,$36,$33

	db $A8,$38 : dw "T" : db $B0,$38 : dw "E" : db $B8,$38 : dw "R"
	db $C0,$38 : dw "R" : db $C8,$38 : dw "A"
	db $B8,$48 : dw "G" : db $C0,$48 : dw "L" : db $C8,$48 : dw "A"
	db $D0,$48 : dw "C" : db $D8,$48 : dw "I"
	db $E0,$48 : dw "A" : db $E8,$48 : dw "L"

	db $68,$78,$52,$32,$70,$78,$54,$72
	db $64,$72,$50,$70,$74,$72,$50,$30,$C0,$70,$12,$3E,$C8,$70,$14,$3E
	db $C0,$80,$16,$3E,$C8,$80,$18,$3E,$D8,$A0,$9C,$32,$E0,$A0,$9C,$72
	db $D8,$B0,$9E,$34,$E0,$B0,$A0,$34,$D8,$68,$A2,$3A,$E0,$68,$A2,$7A
	db $FF

World7:
	db $28,$18 : dw "M" : db $30,$18 : dw "U" : db $38,$18 : dw "N"
	db $40,$18 : dw "D" : db $48,$18 : dw "O" : db $58,$18,$38,$33

	db $10,$30 : dw "L" : db $18,$30 : dw "A"
	db $20,$30 : dw "B" : db $28,$30 : dw "I"
	db $30,$30 : dw "R" : db $38,$30 : dw "I" : db $40,$30 : dw "N"
	db $48,$30 : dw "T" : db $50,$30 : dw "U"
	db $58,$30 : dw "B" : db $60,$30 : dw "O" : db $68,$30 : dw "S"

	db $18,$3F,$A4,$34,$20,$3F,$A4,$74
	db $18,$4F,$A6,$32,$20,$4F,$A8,$32,$38,$50,$AA,$32,$58,$78,$3A,$3E
	db $60,$78,$3C,$3E,$58,$88,$3E,$3E,$60,$88,$40,$3E,$80,$70,$44,$30
	db $90,$98,$B0,$3A,$98,$98,$B2,$3A,$B0,$B0,$AC,$3A,$B8,$B0,$AE,$3A
	db $FF

World8:
	db $20,$80 : dw "M" : db $28,$80 : dw "U" : db $30,$80 : dw "N"
	db $38,$80 : dw "D" : db $40,$80 : dw "O" : db $50,$80,$3A,$33

	db $28,$90 : dw "R" : db $30,$90 : dw "E" : db $38,$90 : dw "I"
	db $40,$90 : dw "N" : db $48,$90 : dw "O"
	db $58,$90 : dw "D" : db $60,$90 : dw "O"
	db $40,$A0 : dw "B" : db $48,$A0 : dw "O" : db $50,$A0 : dw "W"
	db $58,$A0 : dw "S" : db $60,$A0 : dw "E" : db $68,$A0 : dw "R"

	db $80,$88,$DC,$32
	db $88,$88,$DE,$32,$90,$88,$C8,$32,$A0,$68,$CA,$3E,$A8,$68,$CC,$3E
	db $A0,$78,$CE,$3E,$A8,$78,$E0,$3E,$B0,$78,$E2,$3E,$B0,$20,$B8,$38
	db $B8,$20,$BA,$38,$C0,$20,$BA,$78,$C8,$20,$B8,$78,$B0,$30,$BC,$38
	db $B8,$30,$BE,$38,$C0,$30,$BE,$78,$C8,$30,$BC,$78,$B0,$40,$D8,$38
	db $B8,$40,$DA,$38,$C0,$40,$DA,$78,$C8,$40,$D8,$78,$FF

else

World1:
	db $A8,$30,$00,$33,$B0,$30,$02,$33,$B8,$30,$04,$33,$C0,$30,$06,$33
	db $C8,$30,$08,$33,$D8,$30,$2C,$33,$B0,$48,$0A,$33,$B8,$48,$04,$33
	db $C0,$48,$0C,$33,$C8,$48,$0E,$33,$D0,$48,$0E,$33,$C8,$58,$06,$33
	db $D0,$58,$0C,$33,$D8,$58,$10,$33,$E0,$58,$08,$33,$40,$90,$00,$3E
	db $48,$90,$02,$3E,$40,$A0,$04,$3E,$48,$A0,$06,$3E,$78,$B0,$52,$32
	db $80,$B0,$54,$72,$90,$B0,$52,$32,$98,$B0,$54,$72,$B0,$60,$50,$30
	db $A8,$58,$46,$32,$A8,$68,$48,$32,$B0,$68,$4A,$32,$A8,$78,$4C,$32
	db $B0,$78,$4E,$32,$FF

World2:
	db $20,$30,$00,$33,$28,$30,$02,$33,$30,$30,$04,$33,$38,$30,$06,$33
	db $40,$30,$08,$33,$50,$30,$2E,$33,$20,$50,$08,$33,$28,$50,$12,$33
	db $30,$50,$0E,$33,$38,$50,$12,$33,$40,$50,$04,$33,$48,$50,$14,$33
	db $38,$60,$16,$33,$40,$60,$18,$33,$48,$60,$06,$33,$50,$60,$06,$33
	db $10,$70,$08,$3E,$18,$70,$0A,$3E,$10,$80,$F0,$3E,$18,$80,$F2,$3E
	db $20,$80,$10,$3E,$50,$90,$56,$32,$58,$90,$56,$72,$70,$6B,$46,$32
	db $70,$7B,$48,$32,$78,$7B,$4A,$32,$70,$8B,$4C,$32,$78,$8B,$4E,$32
	db $A8,$A0,$58,$34,$B0,$A0,$5A,$34,$A8,$B0,$5C,$34,$B0,$B0,$5E,$34
	db $B0,$A0,$60,$34,$B8,$A0,$62,$34,$FF

World3:
	db $A8,$30,$00,$33,$B0,$30,$02,$33,$B8,$30,$04,$33,$C0,$30,$06,$33
	db $C8,$30,$08,$33,$D8,$30,$30,$33,$B0,$40,$0E,$33,$B8,$40,$12,$33
	db $C0,$40,$0C,$33,$D0,$40,$0E,$33,$D8,$40,$18,$33,$E0,$40,$08,$33
	db $E8,$40,$12,$33,$58,$80,$68,$72,$60,$80,$66,$72,$68,$80,$64,$72
	db $58,$90,$6E,$72,$60,$90,$6C,$72,$68,$90,$6A,$72,$80,$80,$2E,$3E
	db $88,$80,$30,$3E,$90,$80,$32,$3E,$80,$90,$34,$3E,$88,$90,$36,$3E
	db $90,$90,$38,$3E,$C0,$68,$70,$3A,$C8,$68,$70,$7A,$D2,$66,$72,$3A
	db $DC,$63,$74,$3A,$E8,$65,$72,$3A,$FF

World4:
	db $18,$30,$00,$33,$20,$30,$02,$33,$28,$30,$04,$33,$30,$30,$06,$33
	db $38,$30,$08,$33,$48,$30,$32,$33,$18,$48,$1C,$33,$20,$48,$18,$33
	db $28,$48,$0A,$33,$38,$48,$18,$33,$40,$48,$0E,$33,$48,$48,$06,$33
	db $50,$48,$0C,$33,$58,$48,$10,$33,$60,$48,$08,$33,$1C,$70,$76,$32
	db $24,$70,$78,$32,$2C,$70,$76,$72

..BigPiranhaStem:
	db $1C,$80,$7A,$32,$24,$80,$7C,$32,$2C,$80,$7A,$72

	db $60,$58,$8C,$30,$68,$58,$8E,$30,$68,$60,$80,$34,$70,$60,$82,$34
	db $78,$60,$84,$34,$68,$70,$86,$34,$70,$70,$88,$34,$78,$70,$8A,$34
	db $98,$80,$B4,$30,$A0,$80,$B6,$30,$B0,$80,$1A,$3E,$B8,$80,$1C,$3E
	db $B0,$90,$1E,$3E,$B8,$90,$20,$3E,$C0,$90,$22,$3E
	db $FF

World5:
	db $88,$80,$00,$33,$90,$80,$02,$33,$98,$80,$04,$33,$A0,$80,$06,$33
	db $A8,$80,$08,$33,$B8,$80,$34,$33,$98,$98,$14,$33,$A0,$98,$16,$33
	db $A8,$98,$12,$33,$B8,$98,$0E,$33,$C0,$98,$1E,$33,$C8,$98,$20,$33
	db $18,$28,$94,$36,$20,$28,$94,$76,$18,$38,$96,$36,$20,$38,$96,$76
	db $20,$54,$98,$36,$28,$54,$9A,$36,$60,$90,$26,$3E,$68,$90,$28,$3E
	db $58,$A0,$24,$3E,$60,$A0,$2A,$3E,$68,$A0,$2C,$3E,$90,$A8,$90,$32
	db $98,$A8,$92,$32,$B8,$38,$90,$32,$C0,$38,$92,$32,$D0,$78,$90,$32
	db $D8,$78,$92,$32,$FF

World6:
	db $B0,$30,$00,$33,$B8,$30,$02,$33,$C0,$30,$04,$33,$C8,$30,$06,$33
	db $D0,$30,$08,$33,$E0,$30,$36,$33,$A8,$48,$18,$33,$B0,$48,$1A,$33
	db $B8,$48,$12,$33,$C0,$48,$08,$33,$D0,$48,$06,$33,$D8,$48,$0C,$33
	db $E0,$48,$10,$33,$E8,$48,$08,$33,$68,$78,$52,$32,$70,$78,$54,$72
	db $64,$72,$50,$70,$74,$72,$50,$30,$C0,$70,$12,$3E,$C8,$70,$14,$3E
	db $C0,$80,$16,$3E,$C8,$80,$18,$3E,$D8,$A0,$9C,$32,$E0,$A0,$9C,$72
	db $D8,$B0,$9E,$34,$E0,$B0,$A0,$34,$D8,$68,$A2,$3A,$E0,$68,$A2,$7A
	db $FF

World7:
	db $20,$18,$00,$33,$28,$18,$02,$33,$30,$18,$04,$33,$38,$18,$06,$33
	db $40,$18,$08,$33,$50,$18,$38,$33,$20,$30,$22,$33,$28,$30,$18,$33
	db $30,$30,$22,$33,$38,$30,$12,$33,$48,$30,$24,$33,$50,$30,$0C,$33
	db $58,$30,$26,$33,$60,$30,$12,$33,$18,$3F,$A4,$34,$20,$3F,$A4,$74
	db $18,$4F,$A6,$32,$20,$4F,$A8,$32,$38,$50,$AA,$32,$58,$78,$3A,$3E
	db $60,$78,$3C,$3E,$58,$88,$3E,$3E,$60,$88,$40,$3E,$80,$70,$44,$30
	db $90,$98,$B0,$3A,$98,$98,$B2,$3A,$B0,$B0,$AC,$3A,$B8,$B0,$AE,$3A
	db $FF

World8:
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	db $20,$80,$00,$33,$28,$80,$02,$33,$30,$80,$04,$33,$38,$80,$06,$33
	db $40,$80,$08,$33,$50,$80,$3A,$33,$28,$90,$1A,$33,$30,$90,$0C,$33
	db $38,$90,$0E,$33,$40,$90,$14,$33,$48,$90,$06,$33,$50,$90,$12,$33
	db $60,$90,$02,$33,$68,$90,$28,$33,$40,$A0,$1E,$33,$48,$A0,$2A,$33
	db $50,$A0,$22,$33,$58,$A0,$22,$33,$60,$A0,$0C,$33,$80,$88,$DC,$32
	db $88,$88,$DE,$32,$90,$88,$C8,$32,$A0,$68,$CA,$3E,$A8,$68,$CC,$3E
	db $A0,$78,$CE,$3E,$A8,$78,$E0,$3E,$B0,$78,$E2,$3E,$B0,$20,$B8,$38
	db $B8,$20,$BA,$38,$C0,$20,$BA,$78,$C8,$20,$B8,$78,$B0,$30,$BC,$38
	db $B8,$30,$BE,$38,$C0,$30,$BE,$78,$C8,$30,$BC,$78,$B0,$40,$D8,$38
	db $B8,$40,$DA,$38,$C0,$40,$DA,$78,$C8,$40,$D8,$78,$FF
else
	db $20,$80,$00,$33,$28,$80,$02,$33,$30,$80,$04,$33,$38,$80,$06,$33
	db $40,$80,$08,$33,$50,$80,$3A,$33,$28,$90,$1A,$33,$30,$90,$0C,$33
	db $38,$90,$0E,$33,$40,$90,$14,$33,$48,$90,$06,$33,$50,$90,$12,$33
	db $60,$90,$02,$33,$68,$90,$28,$33,$40,$A0,$1E,$33,$48,$A0,$02,$33
	db $50,$A0,$02,$33,$58,$A0,$22,$33,$60,$A0,$0C,$33,$80,$88,$DC,$32
	db $88,$88,$DE,$32,$90,$88,$C8,$32,$A0,$68,$CA,$3E,$A8,$68,$CC,$3E
	db $A0,$78,$CE,$3E,$A8,$78,$E0,$3E,$B0,$78,$E2,$3E,$B0,$20,$B8,$38
	db $B8,$20,$BA,$38,$C0,$20,$BA,$78,$C8,$20,$B8,$78,$B0,$30,$BC,$38
	db $B8,$30,$BE,$38,$C0,$30,$BE,$78,$C8,$30,$BC,$78,$B0,$40,$D8,$38
	db $B8,$40,$DA,$38,$C0,$40,$DA,$78,$C8,$40,$D8,$78,$FF
endif
endif

base off
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_WorldRollCallState09_LoadLayer2BGAndWait(Address)
namespace SMB3_WorldRollCallState09_LoadLayer2BGAndWait
%InsertMacroAtXPosition(<Address>)

Main:
	JSR.w CODE_20D09D
	LDA.b !RAM_SMB3_WorldRollcall_WaitBeforeDisplayingNextScreenTimerLo
	SEC
	SBC.b #$01
	STA.b !RAM_SMB3_WorldRollcall_WaitBeforeDisplayingNextScreenTimerLo
	BCS.b CODE_20D25C
	LDA.b !RAM_SMB3_WorldRollcall_WaitBeforeDisplayingNextScreenTimerHi
	BEQ.b CODE_20D24A
	DEC
	BEQ.b CODE_20D22B
	DEC
	BNE.b CODE_20D24E
	LDX.w !RAM_SMB3_WorldRollcall_CurrentWorld
	LDA.l WorldRollcallBG,x
	STA.w !RAM_SMB3_Level_Layer2BGFromHeader
	BEQ.b CODE_20D24E
	JSL.l SMB3_BufferBGTilemap_Main
	BRA.b CODE_20D24E

CODE_20D22B:
	LDA.w !RAM_SMB3_WorldRollcall_CurrentWorld
	CMP.b #$06
	BNE.b CODE_20D24E
	PHB
	PHK
	PLB
	LDA.b #$00
	XBA
	REP.b #$10
	LDY.w #$7F00B0
	LDX.w #$7F00F0
	LDA.b #$BF
	MVN $7F00B0>>16,$7F00F0>>16
	SEP.b #$10
	PLB
	BRA.b CODE_20D24E

CODE_20D24A:
	JSL.l CODE_2A84B0
CODE_20D24E:
	LDA.b #$16
	STA.b !RAM_SMB3_WorldRollcall_WaitBeforeDisplayingNextScreenTimerLo
	DEC.b !RAM_SMB3_WorldRollcall_WaitBeforeDisplayingNextScreenTimerHi
	BPL.b CODE_20D25C
	INC.b !RAM_SMB3_WorldRollcall_CurrentState
	LDA.b #$03
	STA.b $49
CODE_20D25C:
	RTS

WorldRollcallBG:
	db $0E			; World 2
	db $01			; World 3
	db $0C			; World 4
	db $00			; World 5
	db $18			; World 6
	db $0A			; World 7
	db $1B			; World 8
	db $00			; Unused
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_ProcessEndingWorldRollcallScreen(Address)
namespace SMB3_ProcessEndingWorldRollcallScreen
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.b #$0F
	STA.b !RAM_SMB3_Global_ScreenDisplayRegisterMirror
CODE_20CB97:
	JSR.w SMB3_WaitForVBlankDuringCutscene_Main
	DEC.b !RAM_SMB3_Global_ScreenDisplayRegisterMirror
	BNE.b CODE_20CB97
	STZ.w !REGISTER_IRQNMIAndJoypadEnableFlags
	STZ.b !RAM_SMB3_Global_ScreenDisplayRegisterMirror
	STZ.w !RAM_SMB3_Global_HDMAEnableMirror
	STZ.w !REGISTER_HDMAEnable
	LDA.b #$80
	STA.w !REGISTER_ScreenDisplayRegister
	LDA.b #$02
	STA.w !REGISTER_BG1AddressAndSize
	LDA.b #$0A
	STA.w !REGISTER_BG2AddressAndSize
	LDA.b #$13
	STA.w !REGISTER_BG3AddressAndSize
	JSL.l SMB3_ResetSpriteOAMRt_Main
	LDA.b #$5C
	STA.b $00
	STZ.b $01
	JSR.w CODE_20FA0B
	REP.b #$20
	LDX.b #$80
	STX.w !REGISTER_VRAMAddressIncrementValue
	LDA.w #$2000
	STA.w !REGISTER_VRAMAddressLo
	LDA.w #(!REGISTER_WriteToVRAMPortLo&$0000FF<<8)+$01
	STA.w DMA[$00].Parameters
	STA.w DMA[$01].Parameters
	STA.w DMA[$02].Parameters
	STA.w DMA[$03].Parameters
	LDA.w #SMB3_Bank47Graphics_FG_WorldRollCallMiniMap
	STA.w DMA[$00].SourceLo
	LDA.w #SMB3_Bank47Graphics_UnknownEndingGraphics
	STA.w DMA[$01].SourceLo
	LDA.w #SMB3_Bank0CGraphics_WorldRollcallSpritesAndMario
	STA.w DMA[$02].SourceLo
	LDA.w #SMB3_Bank3AGraphics_BG_ToadHouse
	STA.w DMA[$03].SourceLo
	LDX.b #SMB3_Bank47Graphics_FG_WorldRollCallMiniMap>>16
	STX.w DMA[$00].SourceBank
	STX.w DMA[$01].SourceBank
	LDX.b #SMB3_Bank0CGraphics_WorldRollcallSpritesAndMario>>16
	STX.w DMA[$02].SourceBank
	LDX.b #SMB3_Bank3AGraphics_BG_ToadHouse>>16
	STX.w DMA[$03].SourceBank
	LDA.w #$1000
	STA.w DMA[$00].SizeLo
	STA.w DMA[$01].SizeLo
	STA.w DMA[$03].SizeLo
	LDA.w #SMB3_Bank0CGraphics_WorldRollcallSpritesAndMarioEnd-SMB3_Bank0CGraphics_WorldRollcallSpritesAndMario
	STA.w DMA[$02].SizeLo
	LDX.b #$01
	STX.w !REGISTER_DMAEnable
	INX
	STX.w !REGISTER_DMAEnable
	LDA.w #$6000
	STA.w !REGISTER_VRAMAddressLo
	LDX.b #$04
	STX.w !REGISTER_DMAEnable
	LDA.w #$3000
	STA.w !REGISTER_VRAMAddressLo
	LDX.b #$08
	STX.w !REGISTER_DMAEnable
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter					; Optimization: Why does the game need to upload Mario's graphics before checking if Luigi is the current character?
	BEQ.b CODE_20CC7C							; And for that matter, why couldn't Nintendo just arrange the world rollcall sprite graphics so that Mario and Luigi's tiles are separate from the other sprite tiles?
	LDA.w #SMB3_Bank3DGraphics_WorldRollcallSpritesAndLuigi
	STA.w DMA[$00].SourceLo
	LDA.w #SMB3_Bank3DGraphics_WorldRollcallSpritesAndLuigi+$1000
	STA.w DMA[$01].SourceLo
	LDX.b #SMB3_Bank3DGraphics_WorldRollcallSpritesAndLuigi>>16
	STX.w DMA[$00].SourceBank
	STX.w DMA[$01].SourceBank
	LDA.w #SMB3_Bank3DGraphics_WorldRollcallSpritesAndLuigiEnd-(SMB3_Bank3DGraphics_WorldRollcallSpritesAndLuigiEnd-$1000)
	STA.w DMA[$00].SizeLo
	LDA.w #SMB3_Bank3DGraphics_WorldRollcallSpritesAndLuigiEnd-(SMB3_Bank3DGraphics_WorldRollcallSpritesAndLuigiEnd-$0800)
	STA.w DMA[$01].SizeLo
	LDA.w #$6000
	STA.w !REGISTER_VRAMAddressLo
	LDX.b #$01
	STX.w !REGISTER_DMAEnable
	LDA.w #$6C00
	STA.w !REGISTER_VRAMAddressLo
	LDX.b #$02
	STX.w !REGISTER_DMAEnable
CODE_20CC7C:
	SEP.b #$20
	LDA.b #$05							; Note: BG used for the world 1 rollcall screen
	STA.w !RAM_SMB3_Level_Layer2BGFromHeader
	JSL.l SMB3_BufferBGTilemap_Main
	JSL.l CODE_2A84B0
	REP.b #$20
	LDA.w #$00FF
	STA.b $00
	STZ.w !REGISTER_VRAMAddressIncrementValue
	LDA.w #$0400
	STA.w !REGISTER_VRAMAddressLo
	LDA.w #(!REGISTER_WriteToVRAMPortLo&$0000FF<<8)+$08
	STA.w DMA[$00].Parameters
	STZ.w DMA[$00].SourceLo
	STZ.w DMA[$00].SourceBank
	LDA.w #$0800
	STA.w DMA[$00].SizeLo
	LDY.b #$01
	STY.w !REGISTER_DMAEnable
	STZ.w !REGISTER_VRAMAddressIncrementValue
	LDA.w #$0800
	STA.w !REGISTER_VRAMAddressLo
	LDA.w #(!REGISTER_WriteToVRAMPortLo&$0000FF<<8)+$08
	STA.w DMA[$00].Parameters
	STZ.w DMA[$00].SourceLo
	STZ.w DMA[$00].SourceBank
	LDA.w #$0800
	STA.w DMA[$00].SizeLo
	STY.w !REGISTER_DMAEnable
	SEP.b #$20
	LDA.b #$01
	STA.l $7E3955
	LDA.b #$20
	STA.w !RAM_SMB3_Global_CurrentRasterEffect
	STZ.w $0238
	STZ.w $0239
	LDX.b #$F4
CODE_20CCE5:
	LDA.b #$00
	STA.b $00,x
CODE_20CCE9:
	DEX
	CPX.b #$6B
	BCC.b CODE_20CCF2
	CPX.b #$75
	BCC.b CODE_20CCE9
CODE_20CCF2:
	CPX.b #$FF
	BNE.b CODE_20CCE5
	LDX.b #$15
CODE_20CCF8:
	LDA.b #$00
	STA.w $0510,x
	DEX
	BPL.b CODE_20CCF8
	JSR.w SMB3_UploadCurtainTilemap_Main
	JSR.w CODE_20B097
	JSL.l CODE_29CE10
	REP.b #$20
	LDX.b #$1E
	LDA.w #$0000
CODE_20CD11:
	STA.w SMB3_PaletteMirror[$20].LowByte,x
	DEX
	DEX
	BPL.b CODE_20CD11
	SEP.b #$20
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #SMB3_StripeImage20_CheckerFloor_Main
	STA.b !RAM_SMB3_Global_StripeImageDataLo
	LDA.b #SMB3_StripeImage20_CheckerFloor_Main>>8
	STA.b !RAM_SMB3_Global_StripeImageDataHi
else
	LDA.b #$20							;\ Optimization: Why even bother indexing this table?
	ASL								;|
	TAX								;/
	LDA.l DATA_20D2FE,x
	STA.b !RAM_SMB3_Global_StripeImageDataLo
	LDA.l DATA_20D2FE+$01,x
	STA.b !RAM_SMB3_Global_StripeImageDataHi
endif
	LDA.b #SMB3_StripeImage20_CheckerFloor_Main>>16
	STA.b !RAM_SMB3_Global_StripeImageDataBank
	JSL.l SMB3_UploadStripeImage_Main
	LDA.b #$B0
	STA.w $0216
	STZ.w $0218
	STZ.w $0219
	STZ.w $021A
	STZ.w $021B
	LDA.b #$00
	STA.l $7E3955
	LDA.b #$1F							;\ Optimization: More unnecessary indexing.
	ASL								;|
	TAX								;/
	LDA.l DATA_20D2FE,x
	STA.b !RAM_SMB3_Global_StripeImageDataLo
	LDA.l DATA_20D2FE+$01,x
	STA.b !RAM_SMB3_Global_StripeImageDataHi
	LDA.b #SMB3_StripeImage1F_CurtainShadow_Main>>16
	STA.b !RAM_SMB3_Global_StripeImageDataBank
	JSL.l SMB3_UploadStripeImage_Main
	LDA.b #$13
	STA.w !RAM_SMB3_Global_MainScreenLayersMirror
	LDA.b #$04
	STA.w !RAM_SMB3_Global_SubScreenLayersMirror
	LDA.b #$02
	STA.w !RAM_SMB3_Global_ColorMathInitialSettingsMirror
	LDA.b #$20
	STA.w !RAM_SMB3_Global_ColorMathSelectAndEnableMirror
	LDA.b #SMB3_CompressedTilemaps_World1To4WorldRollcallLayer1
	LDX.b #SMB3_CompressedTilemaps_World1To4WorldRollcallLayer1>>8
	LDY.b #SMB3_CompressedTilemaps_World1To4WorldRollcallLayer1>>16
	JSL.l SMB3_GraphicsDecompressionRoutines_WorldRollcallEntry1
	LDA.b #SMB3_CompressedTilemaps_World5To8WorldRollcallLayer1
	LDX.b #SMB3_CompressedTilemaps_World5To8WorldRollcallLayer1>>8
	LDY.b #SMB3_CompressedTilemaps_World5To8WorldRollcallLayer1>>16
	JSL.l SMB3_GraphicsDecompressionRoutines_WorldRollcallEntry2
	LDA.b #$01
	STA.w !RAM_SMB3_Level_Layer3BGFromHeader
	LDA.b #$1E
	STA.w $02C1
	REP.b #$20
	JSL.l CODE_22E1C5
	REP.b #$20
	LDA.w #SMB3_Bank42Graphics_FG_StandardTiles
	STA.b $0D
	LDX.b #SMB3_Bank42Graphics_FG_StandardTiles>>16
	STX.b $0F
	LDA.w #$0800
	STA.b $0B
	LDA.w #$4400
	JSR.w SMB3_CopyOfDMADataToVRAM_Main
	LDA.w #SMB3_Bank47Graphics_FG_WorldRollCallMiniMap
	STA.b $0D
	LDX.b #SMB3_Bank47Graphics_FG_WorldRollCallMiniMap>>16
	STX.b $0F
	LDA.w #$1000
	STA.b $0B
	LDA.w #$4800
	JSR.w SMB3_CopyOfDMADataToVRAM_Main
	LDA.w #SMB3_Bank3AGraphics_BG_ToadHouse
	STA.b $0D
	LDX.b #SMB3_Bank3AGraphics_BG_ToadHouse>>16
	STX.b $0F
	LDA.w #$0800
	STA.b $0B
	LDA.w #$3C00
	JSR.w SMB3_CopyOfDMADataToVRAM_Main
	SEP.b #$20
	LDA.b #$07
	STA.w !RAM_SMB3_Global_AnimatedFGTileAnimationFrameIndex
	LDA.b #$01
	STA.w $0245
	JSR.w SMB3_LevelTileAnimations_Main
	LDA.b #$81
	STA.w !REGISTER_IRQNMIAndJoypadEnableFlags
	STA.w $02D9
	LDA.b #$0F
	STA.b !RAM_SMB3_Global_ScreenDisplayRegisterMirror
	LDA.b #$58
	STA.b $BD
	LDA.b #$05
	STA.b !RAM_SMB3_WorldRollcall_WaitBeforeMovingCurtainDownTimer
CODE_20CDFA:
	JSR.w SMB3_WaitForVBlankDuringCutscene_Main
	DEC.b !RAM_SMB3_WorldRollcall_WaitBeforeMovingCurtainDownTimer
	BPL.b CODE_20CDFA
	LDA.b #$03
	STA.b !RAM_SMB3_WorldRollcall_WaitBeforeMovingCurtainDownTimer
	LDA.b $BD
	STA.w $0028
	INC.b $BD
	LDA.b $BD
	CMP.b #$5B
	BNE.b CODE_20CDFA
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$10
	STA.b !RAM_SMB3_WorldRollcall_WaitBeforeMovingCurtainBackUpTimerHi
	LDA.b #$14
else
	LDA.b #$14
	STA.b !RAM_SMB3_WorldRollcall_WaitBeforeMovingCurtainBackUpTimerHi
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	LDA.b #$78
else
	LDA.b #$20
endif
endif
	STA.b !RAM_SMB3_WorldRollcall_WaitBeforeMovingCurtainBackUpTimerLo
	LDA.b #$00
	STA.b $BD
CODE_20CE1E:
	JSR.w SMB3_WaitForVBlankDuringCutscene_Main
	LDA.b $BD
	BNE.b CODE_20CE32
	LDA.w $0216
	SEC
	SBC.b #$01
	STA.w $0216
	BNE.b CODE_20CE32
	INC.b $BD
CODE_20CE32:
	LDA.b !RAM_SMB3_WorldRollcall_WaitBeforeMovingCurtainBackUpTimerLo
	SEC
	SBC.b #$01
	STA.b !RAM_SMB3_WorldRollcall_WaitBeforeMovingCurtainBackUpTimerLo
	BCS.b CODE_20CE1E
	LDA.b #$16
	STA.b !RAM_SMB3_WorldRollcall_WaitBeforeMovingCurtainBackUpTimerLo
	DEC.b !RAM_SMB3_WorldRollcall_WaitBeforeMovingCurtainBackUpTimerHi
	BPL.b CODE_20CE1E
CODE_20CE43:
	JSR.w SMB3_WaitForVBlankDuringCutscene_Main
	JSR.w CODE_20D0B7
	LDA.b !RAM_SMB3_WorldRollcall_CurrentWorld
	CMP.b #$08
	BNE.b CODE_20CE43
	LDA.b #$00
	STA.b !RAM_SMB3_WorldRollcall_CurrentWorld
	STZ.w $02D3
	LDA.b #$B0
	STA.w $0216
	STZ.w $0217
	REP.b #$30
	LDA.w #$0000
	LDX.w #$001E
CODE_20CE66:
	STA.l $7F94E0,x
	DEX
	DEX
	BPL.b CODE_20CE66
	PHB
	LDX.w #TitleScreenPalette_Row04To07+$40
	LDY.w #SMB3_PaletteMirror[$70].LowByte
	LDA.w #$001F
	MVN SMB3_PaletteMirror[$70].LowByte>>16,TitleScreenPalette_Row04To07+$40>>16
	PLB
	SEP.b #$30
	INC.w !RAM_SMB3_Global_UpdateEntirePaletteFlag
	JSL.l SMB3_ResetSpriteOAMRt_Main
CODE_20CE85:
	JSR.w SMB3_WaitForVBlankDuringCutscene_Main
	DEC.w $0216
	LDA.w $0216
	BNE.b CODE_20CE85
	LDA.b #$55
	STA.b !RAM_SMB3_WorldRollcall_WaitBeforeDisplayingTheEndTimer
CODE_20CE94:
	JSR.w SMB3_WaitForVBlankDuringCutscene_Main
	DEC.b !RAM_SMB3_WorldRollcall_WaitBeforeDisplayingTheEndTimer
	BPL.b CODE_20CE94
	LDA.b #$1B
	STA.w $071E
	LDA.b #$00
	STA.l $7FC587
	JSR.w CODE_20CEAB
	BRA.b CODE_20CEE2

CODE_20CEAB:
	LDX.b #$00
	TXY
CODE_20CEAE:
	TXA
	AND.b #$03
	ASL
	ASL
	ASL
	ASL
	CLC
	ADC.b #$60
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	LDA.b #$60
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	TXA
	AND.b #$03
	ASL
	CLC
	ADC.b #$C0
	STA.w SMB3_OAMBuffer[$00].Tile,y
	LDA.b #$04
	ORA.l $7FC587
	STA.w SMB3_OAMBuffer[$00].Prop,y
	LDA.b #$02
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,x
	INY
	INY
	INY
	INY
	INX
	CPX.b #$04
	BNE.b CODE_20CEAE
	RTS

CODE_20CEE2:
	JSL.l CODE_29CFB6
	LDA.b #$03
	STA.b $B1
	LDA.b #$03
	STA.b $BD
CODE_20CEEE:
	JSR.w SMB3_WaitForVBlankDuringCutscene_Main
	JSL.l CODE_29D09A
	LDA.l $7FC587
	CLC
	ADC.b #$03
	CMP.b #$30
	BCC.b CODE_20CF02
	LDA.b #$30
CODE_20CF02:
	STA.l $7FC587
	PHA
	AND.b #$30
	STA.l $7FC587
	JSR.w CODE_20CEAB
	PLA
	STA.l $7FC587
	LDA.w $02B3
	CMP.b #$02
	BNE.b CODE_20CEEE
	LDA.b #$C0
	STA.w !RAM_SMB3_WorldRollcall_WaitBeforeDisplayingPushStartTimer
CODE_20CF21:
	JSR.w SMB3_WaitForVBlankDuringCutscene_Main
	DEC.w !RAM_SMB3_WorldRollcall_WaitBeforeDisplayingPushStartTimer
	BNE.b CODE_20CF21
	LDA.b #!Define_SMAS_Sound0063_OverworldTileReveal
	STA.w !RAM_SMB3_Global_SoundCh3
CODE_20CF2E:
	JSR.w SMB3_WaitForVBlankDuringCutscene_Main
	LDA.w !RAM_SMB3_WorldRollcall_OpenPauseMenuFlag
	BNE.b CODE_20CF5F
	JSL.l SMB3_DrawPushStartText_Main
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b !RAM_SMB3_Global_ControllerPress1P1,x
	AND.b #!Joypad_Start>>8
	BEQ.b CODE_20CF2E
	REP.b #$10
	LDX.w #$0000
	LDA.b #$F0
CODE_20CF4A:
	STA.w SMB3_OAMBuffer[$00].YDisp,x
	INX
	INX
	INX
	INX
	CPX.w #$0200
	BCC.b CODE_20CF4A
	SEP.b #$10
	JSL.l CODE_29EBB7
	INC.w !RAM_SMB3_WorldRollcall_OpenPauseMenuFlag
CODE_20CF5F:
	JSL.l CODE_29EBF7
	JMP.w CODE_20CF2E
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_DrawPushStartText(Address)
namespace SMB3_DrawPushStartText
%InsertMacroAtXPosition(<Address>)

OAMData:
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR]
	db $50,$A0,$F9,$32			; A
	db $58,$A0,$F4,$32			; P
	db $60,$A0,$FB,$32			; E
	db $68,$A0,$FA,$32			; R
	db $70,$A0,$F8,$32			; T
	db $78,$A0,$FB,$32			; E

	db $88,$A0,$F6,$32			; S
	db $90,$A0,$F8,$32			; T
	db $98,$A0,$F9,$32			; A
	db $A0,$A0,$FA,$32			; R
	db $A8,$A0,$F8,$32			; T
else
	db $58,$A0,$F4,$32			; P
	db $60,$A0,$F5,$32			; U
	db $68,$A0,$F6,$32			; S
	db $70,$A0,$F7,$32			; H

	db $80,$A0,$F6,$32			; S
	db $88,$A0,$F8,$32			; T
	db $90,$A0,$F9,$32			; A
	db $98,$A0,$FA,$32			; R
	db $A0,$A0,$F8,$32			; T
endif
.End:

Main:
	;LDX.b #$23 (Data size - 1)
	LDX.b #OAMData_End-OAMData-1
CODE_2AFE65:
	LDA.l OAMData,x
	STA.w SMB3_OAMBuffer[$40].XDisp,x
	DEX
	BPL.b CODE_2AFE65
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR] Optimization.
	LDX.b #(OAMData_End-OAMData/4)-1
-:
	STZ.w SMB3_OAMTileSizeBuffer[$40].Slot,x
	DEX
	BPL.b -
else
	STZ.w SMB3_OAMTileSizeBuffer[$40].Slot
	STZ.w SMB3_OAMTileSizeBuffer[$41].Slot
	STZ.w SMB3_OAMTileSizeBuffer[$42].Slot
	STZ.w SMB3_OAMTileSizeBuffer[$43].Slot
	STZ.w SMB3_OAMTileSizeBuffer[$44].Slot
	STZ.w SMB3_OAMTileSizeBuffer[$45].Slot
	STZ.w SMB3_OAMTileSizeBuffer[$46].Slot
	STZ.w SMB3_OAMTileSizeBuffer[$47].Slot
	STZ.w SMB3_OAMTileSizeBuffer[$48].Slot
endif
	RTL
namespace off
endmacro


;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_ProcessTitleScreen(Address)
namespace SMB3_ProcessTitleScreen
%InsertMacroAtXPosition(<Address>)

DATA_20B0EF:
	db $02,$00,$01,$03,$04,$05

DATA_20B0F5:
	db $03,$03,$06,$12,$11,$00

Main:
	LDA.b #$11
	STA.w !RAM_SMB3_Global_MainScreenLayersMirror
	LDA.b #$02
	STA.w !RAM_SMB3_Global_SubScreenLayersMirror
	STA.w !RAM_SMB3_Global_ColorMathInitialSettingsMirror
	LDA.b #$20
	STA.w !RAM_SMB3_Global_ColorMathSelectAndEnableMirror
	JSR.w SMB3_WaitForVBlankDuringCutscene_Main
	JSR.w SMB3_LoadTitleScreenGraphics_Main
	JSL.l SMB3_CheckWhichControllersArePluggedIn_Main				; Note: Call to SMAS function
CODE_20B117:
	JSL.l SMB3_ResetSpriteOAMRt_Main
	LDA.b #$5C
	STA.b $00
	STZ.b $01
	JSR.w CODE_20FA0B
	LDX.b #$F5
CODE_20B126:
	STZ.b $01-$01,x						;\ Glitch: This will clear out !RAM_SMB3_Global_ScreenDisplayRegisterMirror by mistake! Since interupts are enabled, FBlank will get turned off by this addresses being cleared.
								;/ Meaning, whether the below graphics code will work is entirely dependent on what scanline the PPU is currently rendering.
	DEX
	BNE.b CODE_20B126
	LDX.b #$15
CODE_20B12D:
	STZ.w $0510,x
	DEX
	BPL.b CODE_20B12D
	LDA.b #$04
	STA.w !RAM_SMB3_Level_Player_MariosLives
	STA.w !RAM_SMB3_Level_Player_LuigisLives
	STZ.w !RAM_SMB3_Global_TwoPlayerGameFlag
	STZ.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.l !RAM_SMB3_Global_DisplayTitleScreenMenuOptionsIndex
	BMI.b CODE_20B14B
	DEC
	STA.w !RAM_SMB3_Global_TwoPlayerGameFlag
CODE_20B14B:
	LDA.b #$FF
	STA.b !RAM_SMB3_TitleScreen_NewSpriteIndex
	LDA.b #$A0
	STA.b !RAM_SMB3_TitleScreen_Mario_YPosLo
	STA.b !RAM_SMB3_TitleScreen_Luigi_YPosLo
	LDA.b #$F0
	STA.b !RAM_SMB3_TitleScreen_Mario_XPosLo
	STZ.b !RAM_SMB3_TitleScreen_Luigi_XPosLo
	LDA.b #$01
	STA.b !RAM_SMB3_TitleScreen_Mario_GFXSet
	STA.b !RAM_SMB3_TitleScreen_Luigi_GFXSet
	LDA.b #$88
	STA.w !RAM_SMB3_Global_RandomByte01
	LDA.b #$00
	STA.l $7F0000
	STA.l $7F0001
	LDA.b #$20
	STA.w !RAM_SMB3_Global_FixedColorData1Mirror
	ASL
	STA.w !RAM_SMB3_Global_FixedColorData2Mirror
	ASL
	STA.w !RAM_SMB3_Global_FixedColorData3Mirror
	JSR.w CODE_20B2EB
	
	; Upload Layer 2 background
	LDA.b #$1D
	ASL
	TAX
	LDA.l DATA_20D2FE,x
	STA.b !RAM_SMB3_Global_StripeImageDataLo
	LDA.l DATA_20D2FE+$01,x
	STA.b !RAM_SMB3_Global_StripeImageDataHi
	LDA.b #DATA_20DA7C>>16
	STA.b !RAM_SMB3_Global_StripeImageDataBank
	JSL.l SMB3_UploadStripeImage_Main

	JSR.w SMB3_UploadCurtainTilemap_Main
	JSR.w SMB3_BufferInitialTitleScreenPalettes_Main
	JSL.l SMB3_BufferTitleScreenSpritePalettes_Main

	LDA.b #$1E
	STA.b $28
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$13
else
	LDA.b #$35
endif
	STA.b !RAM_SMB3_TitleScreen_WaitBeforeMovingCurtainUpTimer
CODE_20B1AA:
	JSR.w SMB3_WaitForVBlankDuringCutscene_Main
CODE_20B1AD:
	INC.b !RAM_SMB3_Global_ScreenDisplayRegisterMirror
	LDA.b !RAM_SMB3_Global_ScreenDisplayRegisterMirror
	AND.b #$10
	BNE.b CODE_20B1BA
	JSR.w SMB3_WaitForVBlankDuringCutscene_Main
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b !RAM_SMB3_Global_ScreenDisplayRegisterMirror
	CMP.b #$0F
	BNE.b CODE_20B1AD
	LDA.b #!Define_SMB3_LevelMusic_TitleScreen
	CMP.w $1206
	BEQ.b CODE_20B1AD
	STA.w !RAM_SMB3_Global_MusicCh1
endif
	BRA.b CODE_20B1AD

CODE_20B1BA:
	LDA.b #$0F
	STA.b !RAM_SMB3_Global_ScreenDisplayRegisterMirror
	LDA.b !RAM_SMB3_Global_ControllerPress1P1
	ORA.b !RAM_SMB3_Global_ControllerPress1P2
	AND.b #!Joypad_Start>>8
	BEQ.b CODE_20B1E1
if !Define_Global_ROMToAssemble&(!ROM_SMB3_U|!ROM_SMB3_E|!ROM_SMB3_J) == $00
	LDA.l !SRAM_SMAS_Global_RunningDemoFlag
	BEQ.b CODE_20B1D0
	JML.l SMAS_ResetToSMASTitleScreen_Main				; Note: Call to SMAS function
endif

CODE_20B1D0:
	LDA.b !RAM_SMB3_TitleScreen_CurrentState
	CMP.b #$06
	BEQ.b CODE_20B1DB
	LDA.b #!Define_SMAS_Sound0063_Correct
	STA.w !RAM_SMB3_Global_SoundCh3
CODE_20B1DB:
	LDA.b #$06
	STA.b !RAM_SMB3_TitleScreen_CurrentState
	BEQ.b CODE_20B1FD

CODE_20B1E1:
if !Define_Global_ROMToAssemble&(!ROM_SMB3_U|!ROM_SMB3_E|!ROM_SMB3_J) == $00
	LDA.b !RAM_SMB3_Global_ControllerHold2P1
	ORA.b !RAM_SMB3_Global_ControllerHold2P2
	AND.b #!Joypad_X
	BEQ.b CODE_20B1ED
	JML.l SMAS_ResetToSMASTitleScreen_Main				; Note: Call to SMAS function

CODE_20B1ED:
	LDA.b !RAM_SMB3_Global_ControllerHold1P1
	ORA.b !RAM_SMB3_Global_ControllerHold1P2
	AND.b #!Joypad_Y>>8
	BEQ.b CODE_20B1F9
	JML.l SMAS_ResetToSMASTitleScreen_Main				; Note: Call to SMAS function
endif

CODE_20B1F9:
	DEC.b !RAM_SMB3_TitleScreen_WaitBeforeMovingCurtainUpTimer
	BPL.b CODE_20B1AA
CODE_20B1FD:
	JSR.w SMB3_WaitForVBlankDuringCutscene_Main
	LDX.b !RAM_SMB3_TitleScreen_NewSpriteIndex
	CPX.b #$06
	BCS.b CODE_20B21C
	DEC.b !RAM_SMB3_TitleScreen_WaitBeforeSpawningNextSpriteTimer
	BNE.b CODE_20B21C
	LDA.l DATA_20B0F5,x
	STA.b !RAM_SMB3_TitleScreen_WaitBeforeSpawningNextSpriteTimer
	LDA.l DATA_20B0EF,x
	TAY
	LDA.b #$01
	STA.w !RAM_SMB3_TitleScreen_Sprite_CurrentState,y
	INC.b !RAM_SMB3_TitleScreen_NewSpriteIndex
CODE_20B21C:
	JSR.w SMB3_HandleCurrentTitleScreenProcess_Main
	LDA.b !RAM_SMB3_TitleScreen_ResetTitleScreenFlag
	BEQ.b CODE_20B23D
CODE_20B223:
	DEC.b !RAM_SMB3_Global_ScreenDisplayRegisterMirror
	BMI.b CODE_20B22C
	JSR.w SMB3_WaitForVBlankDuringCutscene_Main
	BRA.b CODE_20B223

CODE_20B22C:
if !Define_Global_ROMToAssemble&(!ROM_SMB3_U|!ROM_SMB3_E|!ROM_SMB3_J) == $00
	LDA.l !SRAM_SMAS_Global_RunningDemoFlag
	BEQ.b CODE_20B236
	JML.l SMAS_CopyOfResetToSMASTitleScreen_Main				; Note: Call to SMAS function
endif

CODE_20B236:
	LDA.b #$80
	STA.b !RAM_SMB3_Global_ScreenDisplayRegisterMirror
	JMP.w CODE_20B117

CODE_20B23D:
	LDA.b !RAM_SMB3_TitleScreen_CurrentState
	CMP.b #$05
	BNE.b CODE_20B1FD
	LDX.b #$80
CODE_20B245:
	STZ.b !RAM_SMB3_Overworld_Mario_YPosLo,x
	DEX
	BPL.b CODE_20B245
CODE_20B24A:
	DEC.b !RAM_SMB3_Global_ScreenDisplayRegisterMirror
	BMI.b CODE_20B253
	JSR.w SMB3_WaitForVBlankDuringCutscene_Main
	BRA.b CODE_20B24A

CODE_20B253:
	LDA.b #$80
	STA.b !RAM_SMB3_Global_ScreenDisplayRegisterMirror
	STZ.w $02D7
	RTS
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_GetRand(Address)
namespace SMB3_GetRand
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.w !RAM_SMB3_Global_RandomByte01
	AND.b #$02
	STA.b $00
	LDA.w !RAM_SMB3_Global_RandomByte02
	AND.b #$02
	EOR.b $00
	CLC
	BEQ.b CODE_22E115
	SEC
CODE_22E115:
	ROR.w !RAM_SMB3_Global_RandomByte01
	ROR.w !RAM_SMB3_Global_RandomByte02
	ROR.w !RAM_SMB3_Global_RandomByte03
	ROR.w !RAM_SMB3_Global_RandomByte04
	ROR.w !RAM_SMB3_Global_RandomByte05
	ROR.w !RAM_SMB3_Global_RandomByte06
	ROR.w !RAM_SMB3_Global_RandomByte07
	ROR.w !RAM_SMB3_Global_RandomByte08
	ROR.w !RAM_SMB3_Global_RandomByte09
	ROR.w !RAM_SMB3_Global_RandomByte0A
	RTL
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_ExecutePtr(Address)
namespace SMB3_ExecutePtr
%InsertMacroAtXPosition(<Address>)

Absolute:
	STY.b !RAM_SMB3_Global_ScratchRAM03
	PLY
	STY.b !RAM_SMB3_Global_ScratchRAM00
	REP.b #$30
	AND.w #$00FF
	ASL
	TAY
	PLA
	STA.b !RAM_SMB3_Global_ScratchRAM01
	INY
	LDA.b [!RAM_SMB3_Global_ScratchRAM00],y
	STA.b !RAM_SMB3_Global_ScratchRAM00
	SEP.b #$30
	LDY.b !RAM_SMB3_Global_ScratchRAM03
	JMP.w [!RAM_SMB3_Global_ScratchRAM00]

Long:
;$20FB3B
	STY.b !RAM_SMB3_Global_ScratchRAM05
	PLY
	STY.b !RAM_SMB3_Global_ScratchRAM02
	REP.b #$30
	AND.w #$00FF
	STA.b !RAM_SMB3_Global_ScratchRAM03
	ASL
	ADC.b !RAM_SMB3_Global_ScratchRAM03
	TAY
	PLA
	STA.b !RAM_SMB3_Global_ScratchRAM03
	INY
	LDA.b [!RAM_SMB3_Global_ScratchRAM02],y
	STA.b !RAM_SMB3_Global_ScratchRAM00
	INY
	LDA.b [!RAM_SMB3_Global_ScratchRAM02],y
	STA.b !RAM_SMB3_Global_ScratchRAM01
	SEP.b #$30
	LDY.b !RAM_SMB3_Global_ScratchRAM05
	JMP.w [!RAM_SMB3_Global_ScratchRAM00]
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_RT00_SMB3_UploadMusicBank(Address)
namespace SMB3_UploadMusicBank
%InsertMacroAtXPosition(<Address>)

Level:
	SEI
	STZ.w !REGISTER_IRQNMIAndJoypadEnableFlags
	STZ.w !REGISTER_HDMAEnable
	LDA.b #$FF
	STA.w !REGISTER_APUPort1
	LDA.b #LevelMusicBank
	STA.b !RAM_SMB3_Global_ScratchRAM00
	LDA.b #LevelMusicBank>>8
	STA.b !RAM_SMB3_Global_ScratchRAM01
	LDA.b #LevelMusicBank>>16
	STA.b !RAM_SMB3_Global_ScratchRAM02
	JSR.w SMB3_HandleSPCUploads_Main
	RTL
namespace off
endmacro

macro ROUTINE_RT01_SMB3_UploadMusicBank(Address)
namespace SMB3_UploadMusicBank
%InsertMacroAtXPosition(<Address>)

Overworld:
	SEI
	STZ.w !REGISTER_IRQNMIAndJoypadEnableFlags
	STZ.w !REGISTER_HDMAEnable
	LDA.b #$FF
	STA.w !REGISTER_APUPort1
	REP.b #$20
	LDA.w #OverworldMusicBankEnd-OverworldMusicBank
	STA.b $00
	LDA.w #OverworldMusicBank
	STA.b $02
	LDY.b #OverworldMusicBank>>16
	STY.b $04
	LDA.w #$7F0000
	LDY.b #$7F0000>>16
	JSL.l SMB3_DMADataBlockToRAM_Main
	SEP.b #$20
	LDA.b #$7F0000
	STZ.b $00
	LDA.b #$7F0000>>8
	STA.b $01
	LDA.b #$7F0000>>16
	STA.b $02
	JSR.w SMB3_HandleSPCUploads_Main
	REP.b #$20
	LDA.w #$C000
	STA.b $00
	LDA.w #$7F0000
	LDY.b #$7F0000>>16
	JSL.l SMB3_InitializeSelectedRAM_Main
	SEP.b #$20
	RTL
namespace off
endmacro

macro ROUTINE_RT02_SMB3_UploadMusicBank(Address)
namespace SMB3_UploadMusicBank
%InsertMacroAtXPosition(<Address>)

OverworldMusicBank:
	incbin "SPC700/SMB3_Overworld_MusicBank.bin"
	%FREE_BYTES(NULLROM, 2818, $FF)							; Optimization: This block of freespace at $07DCFE can be removed so it's not uploaded alongside the overworld music bank.
OverworldMusicBankEnd:
namespace off
endmacro

macro ROUTINE_RT03_SMB3_UploadMusicBank(Address)
namespace SMB3_UploadMusicBank
%InsertMacroAtXPosition(<Address>)

LevelMusicBank:
	incbin "SPC700/SMB3_Level_MusicBank.bin"
LevelMusicBankEnd:
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_SaveGame(Address)
namespace SMB3_SaveGame
%InsertMacroAtXPosition(<Address>)

Main:
	PHX
	PHY
	PHB
	PHK
	PLB
	REP.b #$30
	LDA.b $00
	PHA
	STZ.b $00
	LDA.l !SRAM_SMAS_Global_SaveFileIndexLo
	TAX
	SEP.b #$20
	LDA.l !SRAM_SMAS_Global_SaveFileBaseOffset,x
	BPL.b CODE_00920B
	INC
	STA.l !SRAM_SMAS_Global_SaveFileBaseOffset,x
	BRA.b CODE_009215

CODE_00920B:
	CMP.w !RAM_SMB3_Global_CurrentWorld
	BEQ.b CODE_009215
	BCC.b CODE_009215
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMB3_E) != $00
	BRA.b CODE_009249
else
	JMP.w CODE_009249
endif

CODE_009215:
	LDA.w !RAM_SMB3_Global_CurrentWorld
	STA.l !SRAM_SMAS_Global_SaveFileBaseOffset,x
	PHX
	LDY.w #$0000
CODE_009220:
	LDA.w !RAM_SMB3_Overworld_LevelsClearedBits,y
	STA.l !SRAM_SMAS_Global_SaveFileBaseOffset+$3C,x
	INX
	INY
	CPY.w #$0080
	BCC.b CODE_009220
	PLX
	PHX
	LDY.w #$0000
CODE_009233:
	LDA.w !RAM_SMB3_Overworld_OWSpr_InitialYPosLo,y
	STA.l !SRAM_SMAS_Global_SaveFileBaseOffset+$04,x
	INX
	INY
	CPY.w #$0038
	BCC.b CODE_009233
	PLX
	LDA.w !RAM_SMB3_Global_TwoPlayerGameFlag
	STA.l !SRAM_SMAS_Global_SaveFileBaseOffset+$0103,x
CODE_009249:
	PHX
	LDY.w #$0000
CODE_00924D:
	LDA.w SMB3_IndividualPlayerData[$00].ReserveSlots,y
	STA.l !SRAM_SMAS_Global_SaveFileBaseOffset+$BC,x
	INX
	INY
	CPY.w #SMB3_IndividualPlayerData[$02].ReserveSlots-SMB3_IndividualPlayerData[$00].ReserveSlots
	BCC.b CODE_00924D
	PLX
	PHX
	LDA.w !RAM_SMB3_Level_Player_MariosLives
	BPL.b CODE_009264
	LDA.b #$04
CODE_009264:
	STA.l !SRAM_SMAS_Global_SaveFileBaseOffset+$02,x
	LDA.w $0737
	BPL.b CODE_00926F
	LDA.b #$04
CODE_00926F:
	STA.l !SRAM_SMAS_Global_SaveFileBaseOffset+$03,x
	PLX
	PHX
	LDA.l $7E3971
	STA.l !SRAM_SMAS_Global_SaveFileBaseOffset+$0102,x
	LDY.w #$0104
	PLX
CODE_009281:
	LDA.l !SRAM_SMAS_Global_SaveFileBaseOffset,x
	CLC
	ADC.b $00
	STA.b $00
	LDA.b #$00
	ADC.b $01
	STA.b $01
	INX
	DEY
	BNE.b CODE_009281
	REP.b #$20
	LDA.w #$0000
	SEC
	SBC.b $00
	STA.l !SRAM_SMAS_Global_SaveFileBaseOffset,x
	SEP.b #$20
	LDA.b #$00
	STA.l $7FFF03
	SEP.b #$30
	PLA
	STA.b $01
	PLA
	STA.b $00
	PLB
	PLY
	PLX
	RTL
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

; Glitch: This VBlank routine uses unsafe scratch RAM addresses!

macro ROUTINE_SMB3_VBlankRoutine(Address)
namespace SMB3_VBlankRoutine
%InsertMacroAtXPosition(<Address>)

Main:
if !Define_Global_ROMToAssemble&(!ROM_SMB3_U|!ROM_SMB3_E|!ROM_SMB3_J) != $00
	SEI
	REP.b #$30
	PHA
	PHX
	PHY
	PHD
	LDA.w #!RAM_SMB3_Global_ScratchRAM00
	TCD
	PHB
	PHK
	PLB
	LDA.b !RAM_SMB3_Global_ScratchRAM00
	PHA
	LDA.b !RAM_SMB3_Global_ScratchRAM02
	PHA
	SEP.b #$30
	LDA.w !REGISTER_NMIEnable
else
	LDA.w !REGISTER_NMIEnable
	LDA.b $02
	PHA
endif
	LDA.b #$80
	STA.w !REGISTER_ScreenDisplayRegister
	STZ.w !REGISTER_HDMAEnable
	LDA.w !RAM_SMB3_Global_OAMSizeAndDataAreaDesignationMirror
	STA.w !REGISTER_OAMSizeAndDataAreaDesignation
	LDA.w $0427
	BEQ.b CODE_20F02A
	AND.b #$7F
	TAX
	LDA.l DATA_21CEC3,x
	STA.w !RAM_SMB3_Global_CurrentVBlankRoutinePath
	LDA.l DATA_21CECB,x
	STA.w !RAM_SMB3_Global_CurrentRasterEffect
CODE_20F02A:
	LDA.l $7E3955
	BEQ.b CODE_20F033
	JMP.w CODE_20F0BA

CODE_20F033:
	LDA.w !RAM_SMB3_Global_CurrentVBlankRoutinePath
	BNE.b CODE_20F03B
	JMP.w CODE_20F11A

CODE_20F03B:
	CMP.b #$80
	BNE.b CODE_20F042
	JMP.w CODE_20F0CF

CODE_20F042:
	CMP.b #$40
	BNE.b CODE_20F049
	JMP.w CODE_20F25A

CODE_20F049:
	CMP.b #$A0
	BNE.b CODE_20F050
	JMP.w CODE_20F141

CODE_20F050:
	CMP.b #$20
	BNE.b CODE_20F057
	JMP.w CODE_20F18C

CODE_20F057:
	CMP.b #$95
	BNE.b CODE_20F05E
	JMP.w CODE_20F1C0

CODE_20F05E:
	JSR.w CODE_20F651
	LDA.w !RAM_SMB3_Global_WaitForVBlankFlag
	BNE.b CODE_20F08F
	JSL.l CODE_29E953
	LDA.w $02BB
	BEQ.b CODE_20F074
	JSR.w CODE_20FF07
	STZ.b $28
CODE_20F074:
	JSL.l SMB3_UploadStripeImage_Main
	JSL.l CODE_29EA69
	LDA.b $28
	BNE.b CODE_20F08D
	STZ.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	STZ.w !RAM_SMB3_Global_StripeImageUploadIndexHi
	DEC
	STA.w SMB3_StripeImageUploadTable[$00].LowByte
	STA.w SMB3_StripeImageUploadTable[$00].HighByte
CODE_20F08D:
	STZ.b $28
CODE_20F08F:
	JSR.w CODE_20F20B
	JSR.w CODE_20FCC0
	LDA.w !REGISTER_IRQEnable
	LDA.b #$C0
	STA.w !REGISTER_VCountTimerLo
	STZ.w !REGISTER_VCountTimerHi
	STZ.w !REGISTER_HCountTimerLo
	STZ.w !REGISTER_HCountTimerHi
	LDA.b #$A1
	STA.w !REGISTER_IRQNMIAndJoypadEnableFlags
	CLI
CODE_20F0AC:
	LDA.b $1C
	BEQ.b CODE_20F0BA
	JSR.w SMB3_PollJoypadInputs_Main
	JSL.l SMB3_GetRand_Main
CODE_20F0B7:
	DEC.w !RAM_SMB3_Global_WaitForVBlankFlag
CODE_20F0BA:
	INC.b !RAM_SMB3_Global_FrameCounter
	LDA.b !RAM_SMB3_Global_ScreenDisplayRegisterMirror
	STA.w !REGISTER_ScreenDisplayRegister
	LDA.w !RAM_SMB3_Global_HDMAEnableMirror
	STA.w !REGISTER_HDMAEnable
CODE_20F0C7:
	JSL.l CODE_22E677
if !Define_Global_ROMToAssemble&(!ROM_SMB3_U|!ROM_SMB3_E|!ROM_SMB3_J) != $00
	REP.b #$30
endif
	PLA
	STA.b !RAM_SMB3_Global_ScratchRAM02
if !Define_Global_ROMToAssemble&(!ROM_SMB3_U|!ROM_SMB3_E|!ROM_SMB3_J) != $00
	PLA
	STA.w !RAM_SMB3_Global_ScratchRAM00
	PLB
	PLD
	PLY
	PLX
	PLA
EndofVBlank:
	RTI
else
EndofVBlank:
	RTL
endif

CODE_20F0CF:
	JSR.w CODE_20F651
	LDA.w !RAM_SMB3_Global_WaitForVBlankFlag
	BNE.b CODE_20F0FA
	JSL.l CODE_29EA32
	JSL.l CODE_29E9F8
	JSL.l SMB3_UploadStripeImage_Main
	JSL.l CODE_29EA69
	LDA.b $28
	BNE.b CODE_20F0F8
	STZ.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	STZ.w !RAM_SMB3_Global_StripeImageUploadIndexHi
	DEC
	STA.w SMB3_StripeImageUploadTable[$00].LowByte
	STA.w SMB3_StripeImageUploadTable[$00].HighByte
CODE_20F0F8:
	STZ.b $28
CODE_20F0FA:
	JSR.w CODE_20F20B
	JSR.w CODE_20FBC6
	LDA.w !REGISTER_IRQEnable
	LDA.b #$C0
	STA.w !REGISTER_VCountTimerLo
	STZ.w !REGISTER_VCountTimerHi
	STZ.w !REGISTER_HCountTimerLo
	STZ.w !REGISTER_HCountTimerHi
	LDA.b #$A1
	STA.w !REGISTER_IRQNMIAndJoypadEnableFlags
	CLI
	JMP.w CODE_20F0AC

CODE_20F11A:
	JSR.w CODE_20F651
	LDA.b $20
	BEQ.b CODE_20F121
CODE_20F121:
	JSR.w CODE_20F20B
	JSR.w CODE_20FCC0
	LDA.w !REGISTER_IRQEnable
	LDA.b #$C0
	STA.w !REGISTER_VCountTimerLo
	STZ.w !REGISTER_VCountTimerHi
	STZ.w !REGISTER_HCountTimerLo
	STZ.w !REGISTER_HCountTimerHi
	LDA.b #$A1
	STA.w !REGISTER_IRQNMIAndJoypadEnableFlags
	CLI
	JMP.w CODE_20F0B7

CODE_20F141:
	JSR.w CODE_20F651
	LDA.w !RAM_SMB3_Global_WaitForVBlankFlag
	BNE.b CODE_20F16C
	JSL.l CODE_29E953
	JSL.l CODE_29E9A3
	JSL.l SMB3_UploadStripeImage_Main
	JSL.l CODE_29EA69
	LDA.b $28
	BNE.b CODE_20F16A
	STZ.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	STZ.w !RAM_SMB3_Global_StripeImageUploadIndexHi
	DEC
	STA.w SMB3_StripeImageUploadTable[$00].LowByte
	STA.w SMB3_StripeImageUploadTable[$00].HighByte
CODE_20F16A:
	STZ.b $28
CODE_20F16C:
	JSR.w CODE_20F20B
	JSR.w CODE_20FBC6
	LDA.w !REGISTER_IRQEnable
	LDA.b #$A0
	STA.w !REGISTER_VCountTimerLo
	STZ.w !REGISTER_VCountTimerHi
	STZ.w !REGISTER_HCountTimerLo
	STZ.w !REGISTER_HCountTimerHi
	LDA.b #$A1
	STA.w !REGISTER_IRQNMIAndJoypadEnableFlags
	CLI
	JMP.w CODE_20F0AC

CODE_20F18C:
	JSR.w CODE_20F651
	LDA.w !RAM_SMB3_Global_WaitForVBlankFlag
	BNE.b CODE_20F1B4
	LDA.b $C2
	BEQ.b CODE_20F19D
	JSR.w CODE_20CF66
	BRA.b CODE_20F1B4

CODE_20F19D:
	JSL.l SMB3_UploadStripeImage_Main
	LDA.b $28
	BNE.b CODE_20F1B2
	STZ.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	STZ.w !RAM_SMB3_Global_StripeImageUploadIndexHi
	DEC
	STA.w SMB3_StripeImageUploadTable[$00].LowByte
	STA.w SMB3_StripeImageUploadTable[$00].HighByte
CODE_20F1B2:
	STZ.b $28
CODE_20F1B4:
	JSR.w CODE_20CFD9
	JSR.w CODE_20F20B
	JSR.w CODE_20FBC6
	JMP.w CODE_20F0AC

CODE_20F1C0:
	JSR.w CODE_20F651
	LDA.w !RAM_SMB3_Global_WaitForVBlankFlag
	BNE.b CODE_20F1EB
	JSL.l CODE_29E953
	JSL.l CODE_29E9A3
	JSL.l SMB3_UploadStripeImage_Main
	JSL.l CODE_29EA69
	LDA.b $28
	BNE.b CODE_20F1E9
	STZ.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	STZ.w !RAM_SMB3_Global_StripeImageUploadIndexHi
	DEC
	STA.w SMB3_StripeImageUploadTable[$00].LowByte
	STA.w SMB3_StripeImageUploadTable[$00].HighByte
CODE_20F1E9:
	STZ.b $28
CODE_20F1EB:
	JSR.w CODE_20F20B
	JSR.w CODE_20FCC0
	LDA.w !REGISTER_IRQEnable
	LDA.b #$91
	STA.w !REGISTER_VCountTimerLo
	STZ.w !REGISTER_VCountTimerHi
	STZ.w !REGISTER_HCountTimerLo
	STZ.w !REGISTER_HCountTimerHi
	LDA.b #$A1
	STA.w !REGISTER_IRQNMIAndJoypadEnableFlags
	CLI
	JMP.w CODE_20F0AC

CODE_20F20B:
	PHD
	LDA.b #!REGISTER_ScreenDisplayRegister>>8
	XBA
	LDA.b #!REGISTER_ScreenDisplayRegister
	TCD
	LDA.w !RAM_SMB3_Global_BG1And2WindowMaskSettingsMirror
	STA.b !REGISTER_BG1And2WindowMaskSettings
	LDA.w !RAM_SMB3_Global_BG3And4WindowMaskSettingsMirror
	STA.b !REGISTER_BG3And4WindowMaskSettings
	LDA.w !RAM_SMB3_Global_ObjectAndColorWindowSettingsMirror
	STA.b !REGISTER_ObjectAndColorWindowSettings
	LDA.w !RAM_SMB3_Global_ColorMathInitialSettingsMirror
	STA.b !REGISTER_ColorMathInitialSettings
	LDA.w !RAM_SMB3_Global_ColorMathSelectAndEnableMirror
	STA.b !REGISTER_ColorMathSelectAndEnable
	LDA.w !RAM_SMB3_Global_FixedColorData1Mirror
	STA.b !REGISTER_FixedColorData
	LDA.w !RAM_SMB3_Global_FixedColorData2Mirror
	STA.b !REGISTER_FixedColorData
	LDA.w !RAM_SMB3_Global_FixedColorData3Mirror
	STA.b !REGISTER_FixedColorData
	LDA.w !RAM_SMB3_Global_MainScreenLayersMirror
	STA.b !REGISTER_MainScreenLayers
	LDA.w !RAM_SMB3_Global_SubScreenLayersMirror
	STA.b !REGISTER_SubScreenLayers
	LDA.w !RAM_SMB3_Global_MainScreenWindowMaskMirror
	STA.b !REGISTER_MainScreenWindowMask
	LDA.w !RAM_SMB3_Global_SubScreenWindowMaskMirror
	STA.b !REGISTER_SubScreenWindowMask
	LDA.w !RAM_SMB3_Global_MosaicSizeAndBGEnableMirror
	STA.b !REGISTER_MosaicSizeAndBGEnable
	LDA.w !RAM_SMB3_Global_BGModeAndTileSizeSettingMirror
	STA.b !REGISTER_BGModeAndTileSizeSetting
	PLD
	RTS

CODE_20F25A:
	JSR.w CODE_20F64D
	LDA.l DATA_2282BB
	STA.b !RAM_SMB3_Global_StripeImageDataLo
	LDA.l DATA_2282BB+$01
	STA.b !RAM_SMB3_Global_StripeImageDataHi
	LDA.l DATA_2282BB+$02
	STA.b !RAM_SMB3_Global_StripeImageDataBank
	JSL.l SMB3_UploadStripeImage_Main
	STZ.b $28
	REP.b #$20
	STZ.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	LDA.w #$FFFF
	STA.w SMB3_StripeImageUploadTable[$00].LowByte
	SEP.b #$20
	JSR.w CODE_20F20B
	LDA.w $0210
	STA.w !REGISTER_BG1HorizScrollOffset
	LDA.w $0211
	STA.w !REGISTER_BG1HorizScrollOffset
	LDA.w $0216
	STA.w !REGISTER_BG1VertScrollOffset
	LDA.w $0217
	STA.w !REGISTER_BG1VertScrollOffset
	LDA.w $0212
	STA.w !REGISTER_BG2HorizScrollOffset
	LDA.w $0213
	STA.w !REGISTER_BG2HorizScrollOffset
	LDA.w $0218
	STA.w !REGISTER_BG2VertScrollOffset
	LDA.w $0219
	STA.w !REGISTER_BG2VertScrollOffset
	LDA.w !REGISTER_IRQEnable
	LDA.b #$28
	STA.w !REGISTER_VCountTimerLo
	STZ.w !REGISTER_VCountTimerHi
	STZ.w !REGISTER_HCountTimerLo
	STZ.w !REGISTER_HCountTimerHi
	LDA.b #$A1
	STA.w !REGISTER_IRQNMIAndJoypadEnableFlags
	CLI
	LDX.b #$00
	LDY.b #$02
	LDA.w !RAM_SMB3_Global_RandomByte01
	AND.b #$02
	STA.b $00
	LDA.w !RAM_SMB3_Global_RandomByte02
	AND.b #$02
	EOR.b $00
	CLC
	BEQ.b CODE_20F2E2
	SEC
CODE_20F2E2:
	ROR.w !RAM_SMB3_Global_RandomByte01,x
	INX
	DEY
	BNE.b CODE_20F2E2
	JSR.w SMB3_PollJoypadInputs_Main
	JSL.l SMB3_ProcessSlidingPictureSpadeGame_Main
	INC.b !RAM_SMB3_Global_FrameCounter
	LDA.b !RAM_SMB3_Global_ScreenDisplayRegisterMirror
	STA.w !REGISTER_ScreenDisplayRegister
	LDA.w !RAM_SMB3_Global_HDMAEnableMirror
	STA.w !REGISTER_HDMAEnable
	JSL.l CODE_29EAA5
	JMP.w CODE_20F0C7
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_IRQRoutine(Address)
namespace SMB3_IRQRoutine
%InsertMacroAtXPosition(<Address>)

Main:
if !Define_Global_ROMToAssemble&(!ROM_SMB3_U|!ROM_SMB3_E|!ROM_SMB3_J) != $00
	REP.b #$30
	PHA
	PHX
	PHY
	PHD
	LDA.w #!RAM_SMB3_Global_ScratchRAM00
	TCD
	PHB
	PHK
	PLB
	SEP.b #$30
endif
	LDA.w !REGISTER_IRQEnable
	BMI.b CODE_20F30C
	JMP.w CODE_20F38E

CODE_20F30C:
	LDA.b #!REGISTER_ScreenDisplayRegister>>8
	XBA
	LDA.b #!REGISTER_ScreenDisplayRegister
	TCD
	LDA.w !RAM_SMB3_Global_CurrentRasterEffect
	CMP.b #$80
	BNE.b CODE_20F31C
	JMP.w CODE_20F38E

CODE_20F31C:
	CMP.b #$40
	BNE.b CODE_20F323
	JMP.w CODE_20F392

CODE_20F323:
	CMP.b #$20
	BNE.b CODE_20F32A
	JMP.w CODE_20F4C4

CODE_20F32A:
	CMP.b #$60
	BNE.b CODE_20F331
	JMP.w CODE_20F408

CODE_20F331:
	CMP.b #$A0
	BNE.b CODE_20F338
	JMP.w CODE_20F462

CODE_20F338:
	CMP.b #$55
	BNE.b CODE_20F33F
	JMP.w CODE_20F4C7

CODE_20F33F:
	CMP.b #$75
	BNE.b CODE_20F346
	JMP.w CODE_20F4F5

CODE_20F346:
	CMP.b #$95
	BNE.b CODE_20F34D
	JMP.w CODE_20F529

CODE_20F34D:
	LDA.w !RAM_SMB3_Level_IsVerticalLevelFlag
	BEQ.b CODE_20F352
CODE_20F352:
	BIT.w !REGISTER_HVBlankFlagsAndJoypadStatus
	BVC.b CODE_20F352
	LDA.b #$80
	STA.b !REGISTER_ScreenDisplayRegister
	STZ.w !REGISTER_HDMAEnable
	STZ.b !REGISTER_BG1And2WindowMaskSettings
	STZ.b !REGISTER_BG3And4WindowMaskSettings
	STZ.b !REGISTER_SubScreenWindowMask
CODE_20F364:
	BIT.w !REGISTER_HVBlankFlagsAndJoypadStatus
	BVC.b CODE_20F364
	LDA.w !RAM_SMB3_Global_SpecialLayerBGModeAndTileSizeSettingMirror
	STA.b !REGISTER_BGModeAndTileSizeSetting
	LDA.w $020F
	STA.b !REGISTER_MainScreenLayers
	LDA.b #$20
	STA.b !REGISTER_ColorMathSelectAndEnable
	STZ.b !REGISTER_BG1HorizScrollOffset
	LDA.b #$01
	STA.b !REGISTER_BG1HorizScrollOffset
	STZ.b !REGISTER_BG1VertScrollOffset
	STA.b !REGISTER_BG1VertScrollOffset
CODE_20F381:
	BIT.w !REGISTER_HVBlankFlagsAndJoypadStatus
	BVC.b CODE_20F381
	LDA.w !RAM_SMB3_Global_ScreenDisplayRegisterMirror
	STA.b !REGISTER_ScreenDisplayRegister
	INC.w $021C
CODE_20F38E:
if !Define_Global_ROMToAssemble&(!ROM_SMB3_U|!ROM_SMB3_E|!ROM_SMB3_J) != $00
	REP.b #$30
	PLB
	PLD
	PLY
	PLX
	PLA
	RTI
else
	RTL
endif

CODE_20F38F:
	JMP.w CODE_20F38E

CODE_20F392:
	LDX.w $037C
	BNE.b CODE_20F3E6
CODE_20F397:
	BIT.w !REGISTER_HVBlankFlagsAndJoypadStatus
	BVC.b CODE_20F397
	LDA.b #$EF
	STA.b !REGISTER_BG1VertScrollOffset
	LDA.b #$00
	STA.b !REGISTER_BG1VertScrollOffset
	LDA.w $0210
	STA.b !REGISTER_BG1HorizScrollOffset
	LDA.w $0211
	STA.b !REGISTER_BG1HorizScrollOffset
	LDA.w !REGISTER_IRQEnable
	LDA.b #$C0
	STA.w !REGISTER_VCountTimerLo
	STZ.w !REGISTER_VCountTimerHi
	STZ.w !REGISTER_HCountTimerLo
	STZ.w !REGISTER_HCountTimerHi
	LDA.w !RAM_SMB3_Global_CurrentWorld
	CMP.b #$07
	BNE.b CODE_20F3DF
	LDA.l $7E3977
	BNE.b CODE_20F3DF
CODE_20F3CC:
	BIT.w !REGISTER_HVBlankFlagsAndJoypadStatus
	BVC.b CODE_20F3CC
	LDA.w !RAM_SMB3_Global_MainScreenLayersMirror
	AND.b #$0F
	STA.b !REGISTER_MainScreenLayers
	LDA.w !RAM_SMB3_Global_SubScreenLayersMirror
	ORA.b #$10
	STA.b !REGISTER_SubScreenLayers
CODE_20F3DF:
	INX
	STX.w $037C
	JMP.w CODE_20F38E

CODE_20F3E6:
	BIT.w !REGISTER_HVBlankFlagsAndJoypadStatus
	BVC.b CODE_20F3E6
	LDA.w !RAM_SMB3_Global_SpecialLayerBGModeAndTileSizeSettingMirror
	STA.b !REGISTER_BGModeAndTileSizeSetting
	LDA.w $020F
	STA.b !REGISTER_MainScreenLayers
	STZ.b !REGISTER_BG1HorizScrollOffset
	LDA.b #$01
	STA.b !REGISTER_BG1HorizScrollOffset
	STZ.b !REGISTER_BG1VertScrollOffset
	STA.b !REGISTER_BG1VertScrollOffset
	STZ.w $037C
	INC.w $021C
	JMP.w CODE_20F38E

CODE_20F408:
	LDX.w $037C
	CPX.b #$03
	BEQ.b CODE_20F440
CODE_20F40F:
	BIT.w !REGISTER_HVBlankFlagsAndJoypadStatus
	BVC.b CODE_20F40F
	LDA.b #$00
	STA.b !REGISTER_BG1VertScrollOffset
	STA.b !REGISTER_BG1VertScrollOffset
	LDA.w !RAM_SMB3_SlidingPictureGame_TopRowXPosLo,x
	STA.b !REGISTER_BG1HorizScrollOffset
	LDA.w !RAM_SMB3_SlidingPictureGame_TopRowXPosHi,x
	AND.b #$01
	STA.b !REGISTER_BG1HorizScrollOffset
	LDA.w !REGISTER_IRQEnable
	LDA.l DATA_21CEE4,x
	STA.w !REGISTER_VCountTimerLo
	STZ.w !REGISTER_VCountTimerHi
	STZ.w !REGISTER_HCountTimerLo
	STZ.w !REGISTER_HCountTimerHi
	INX
	STX.w $037C
	JMP.w CODE_20F38E

CODE_20F440:
	BIT.w !REGISTER_HVBlankFlagsAndJoypadStatus
	BVC.b CODE_20F440
	LDA.w !RAM_SMB3_Global_SpecialLayerBGModeAndTileSizeSettingMirror
	STA.b !REGISTER_BGModeAndTileSizeSetting
	LDA.w $020F
	STA.b !REGISTER_MainScreenLayers
	STZ.b !REGISTER_BG1HorizScrollOffset
	LDA.b #$01
	STA.b !REGISTER_BG1HorizScrollOffset
	STZ.b !REGISTER_BG1VertScrollOffset
	STA.b !REGISTER_BG1VertScrollOffset
	STZ.w $037C
	INC.w $021C
	JMP.w CODE_20F38E

CODE_20F462:
	LDA.w $037C
	BNE.b CODE_20F495
CODE_20F467:
	BIT.w !REGISTER_HVBlankFlagsAndJoypadStatus
	BVC.b CODE_20F467
	LDA.b #$EF
	STA.b !REGISTER_BG1VertScrollOffset
	LDA.b #$00
	STA.b !REGISTER_BG1VertScrollOffset
	LDA.w $0210
	STA.b !REGISTER_BG1HorizScrollOffset
	LDA.w $0211
	STA.b !REGISTER_BG1HorizScrollOffset
	LDA.w !REGISTER_IRQEnable
	LDA.b #$C0
	STA.w !REGISTER_VCountTimerLo
	STZ.w !REGISTER_VCountTimerHi
	STZ.w !REGISTER_HCountTimerLo
	STZ.w !REGISTER_HCountTimerHi
	INC.w $037C
	JMP.w CODE_20F38E

CODE_20F495:
	BIT.w !REGISTER_HVBlankFlagsAndJoypadStatus
	BVC.b CODE_20F495
	LDA.w !RAM_SMB3_Global_SpecialLayerBGModeAndTileSizeSettingMirror
	STA.b !REGISTER_BGModeAndTileSizeSetting
	LDA.w $020F
	STA.b !REGISTER_MainScreenLayers
if !Define_Global_ROMToAssemble&(!ROM_SMAS_U|!ROM_SMAS_J1) == $00
	STZ.b !REGISTER_BG1HorizScrollOffset
	LDA.b #$01
	STA.b !REGISTER_BG1HorizScrollOffset
	STZ.b !REGISTER_BG1VertScrollOffset
	STA.b !REGISTER_BG1VertScrollOffset
CODE_20F4AE:
	BIT.w !REGISTER_HVBlankFlagsAndJoypadStatus
	BVC.b CODE_20F4AE
endif
	LDA.b #$20
	STA.b !REGISTER_ColorMathSelectAndEnable
	STZ.b !REGISTER_BG1And2WindowMaskSettings
	STZ.b !REGISTER_SubScreenWindowMask
	STZ.w $037C
if !Define_Global_ROMToAssemble&(!ROM_SMAS_U|!ROM_SMAS_J1) != $00
	STZ.w !REGISTER_BG1HorizScrollOffset
	LDA.b #$01
	STA.w !REGISTER_BG1HorizScrollOffset
	STZ.w !REGISTER_BG1VertScrollOffset
	STA.w !REGISTER_BG1VertScrollOffset
endif
	INC.w $021C
	JMP.w CODE_20F38E

CODE_20F4C4:
	JMP.w CODE_20F38E

CODE_20F4C7:
	LDA.w $037C
	BNE.b CODE_20F495
	REP.b #$20
	LDA.w $0210
	LSR
	SEP.b #$20
CODE_20F4D4:
	BIT.w !REGISTER_HVBlankFlagsAndJoypadStatus
	BVC.b CODE_20F4D4
	STA.b !REGISTER_BG1HorizScrollOffset
	XBA
	STA.b !REGISTER_BG1HorizScrollOffset
	LDA.w !REGISTER_IRQEnable
	LDA.b #$C0
	STA.w !REGISTER_VCountTimerLo
	STZ.w !REGISTER_VCountTimerHi
	STZ.w !REGISTER_HCountTimerLo
	STZ.w !REGISTER_HCountTimerHi
	INC.w $037C
	JMP.w CODE_20F38E

CODE_20F4F5:
	LDA.w $037C
	BNE.b CODE_20F560
	REP.b #$20
	LDA.w $0210
	LSR
	SEP.b #$20
CODE_20F502:
	BIT.w !REGISTER_HVBlankFlagsAndJoypadStatus
	BVC.b CODE_20F502
	STA.b !REGISTER_BG1HorizScrollOffset
	XBA
	STA.b !REGISTER_BG1HorizScrollOffset
	LDA.b #$EF
	STA.b !REGISTER_BG1VertScrollOffset
	STZ.b !REGISTER_BG1VertScrollOffset
	LDA.w !REGISTER_IRQEnable
	LDA.b #$C0
	STA.w !REGISTER_VCountTimerLo
	STZ.w !REGISTER_VCountTimerHi
	STZ.w !REGISTER_HCountTimerLo
	STZ.w !REGISTER_HCountTimerHi
	INC.w $037C
	JMP.w CODE_20F38E

CODE_20F529:
	LDX.w $037C
	CPX.b #$08
	BCS.b CODE_20F560
	INC.w $037C
	INC.w $037C
CODE_20F536:
	BIT.w !REGISTER_HVBlankFlagsAndJoypadStatus
	BVC.b CODE_20F536
	LDA.w !RAM_SMB3_Level_AirshipLayer3BGParallaxRow1XPosLo,x
	STA.b !REGISTER_BG3HorizScrollOffset
	LDA.w !RAM_SMB3_Level_AirshipLayer3BGParallaxRow1XPosHi,x
	AND.b #$01
	STA.b !REGISTER_BG3HorizScrollOffset
	TXA
	LSR
	TAX
	LDA.w !REGISTER_IRQEnable
	LDA.l DATA_21CEE8,x
	STA.w !REGISTER_VCountTimerLo
	STZ.w !REGISTER_VCountTimerHi
	STZ.w !REGISTER_HCountTimerLo
	STZ.w !REGISTER_HCountTimerHi
	JMP.w CODE_20F38E

CODE_20F560:
	BIT.w !REGISTER_HVBlankFlagsAndJoypadStatus
	BVC.b CODE_20F560
	STZ.b !REGISTER_BG1HorizScrollOffset
	LDA.b #$01
	STA.b !REGISTER_BG1HorizScrollOffset
	STZ.b !REGISTER_BG1VertScrollOffset
	STA.b !REGISTER_BG1VertScrollOffset
	LDA.w !RAM_SMB3_Global_SpecialLayerBGModeAndTileSizeSettingMirror
	STA.b !REGISTER_BGModeAndTileSizeSetting
	LDA.w $020F
	STA.b !REGISTER_MainScreenLayers
	LDA.b #$20
	STA.b !REGISTER_ColorMathSelectAndEnable
	STZ.b !REGISTER_BG3And4WindowMaskSettings
	STZ.b !REGISTER_SubScreenWindowMask
	STZ.w $037C
	INC.w $021C
	JMP.w CODE_20F38E
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_WaitForVBlankDuringCutscene(Address)
namespace SMB3_WaitForVBlankDuringCutscene
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.b $28
	ASL
	TAX
	LDA.l DATA_20D2FE,x
	STA.b !RAM_SMB3_Global_StripeImageDataLo
	LDA.l DATA_20D2FE+$01,x
	STA.b !RAM_SMB3_Global_StripeImageDataHi
	LDA.b #DATA_20D2FE>>16
	STA.b !RAM_SMB3_Global_StripeImageDataBank
	LDA.b #$01
	STA.b $1C
	STZ.w !RAM_SMB3_Global_WaitForVBlankFlag
CODE_20A4D1:
	LDA.w !RAM_SMB3_Global_WaitForVBlankFlag
	BPL.b CODE_20A4D1
	STZ.b $1C
	CLI
	RTS
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_ResetSpriteOAMRt(Address)
namespace SMB3_ResetSpriteOAMRt
%InsertMacroAtXPosition(<Address>)

Main:
	PHD
	REP.b #$30
	LDA.w #SMB3_OAMBuffer[$00].XDisp
	TCD
	LDY.w #$F000
	LDX.w #$0180
-:
	TYA
	STA.b SMB3_OAMBuffer[$00].XDisp,x
	STA.b SMB3_OAMBuffer[$01].XDisp,x
	STA.b SMB3_OAMBuffer[$02].XDisp,x
	STA.b SMB3_OAMBuffer[$03].XDisp,x
	STA.b SMB3_OAMBuffer[$04].XDisp,x
	STA.b SMB3_OAMBuffer[$05].XDisp,x
	STA.b SMB3_OAMBuffer[$06].XDisp,x
	STA.b SMB3_OAMBuffer[$07].XDisp,x
	STA.b SMB3_OAMBuffer[$08].XDisp,x
	STA.b SMB3_OAMBuffer[$09].XDisp,x
	STA.b SMB3_OAMBuffer[$0A].XDisp,x
	STA.b SMB3_OAMBuffer[$0B].XDisp,x
	STA.b SMB3_OAMBuffer[$0C].XDisp,x
	STA.b SMB3_OAMBuffer[$0D].XDisp,x
	STA.b SMB3_OAMBuffer[$0E].XDisp,x
	STA.b SMB3_OAMBuffer[$0F].XDisp,x
	STA.b SMB3_OAMBuffer[$10].XDisp,x
	STA.b SMB3_OAMBuffer[$11].XDisp,x
	STA.b SMB3_OAMBuffer[$12].XDisp,x
	STA.b SMB3_OAMBuffer[$13].XDisp,x
	STA.b SMB3_OAMBuffer[$14].XDisp,x
	STA.b SMB3_OAMBuffer[$15].XDisp,x
	STA.b SMB3_OAMBuffer[$16].XDisp,x
	STA.b SMB3_OAMBuffer[$17].XDisp,x
	STA.b SMB3_OAMBuffer[$18].XDisp,x
	STA.b SMB3_OAMBuffer[$19].XDisp,x
	STA.b SMB3_OAMBuffer[$1A].XDisp,x
	STA.b SMB3_OAMBuffer[$1B].XDisp,x
	STA.b SMB3_OAMBuffer[$1C].XDisp,x
	STA.b SMB3_OAMBuffer[$1D].XDisp,x
	STA.b SMB3_OAMBuffer[$1E].XDisp,x
	STA.b SMB3_OAMBuffer[$1F].XDisp,x
	TXA
	SEC
	SBC.w #$0080
	TAX
	BPL.b -
	SEP.b #$30
	PLD
	RTL
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_UpdateNormalSpritePosition(Address)
namespace SMB3_UpdateNormalSpritePosition
%InsertMacroAtXPosition(<Address>)

X:
Y:
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	ASL
	ASL
	ASL
	ASL
	CLC
	ADC.w !RAM_SMB3_Level_NorSpr_SubXPos,x
	STA.w !RAM_SMB3_Level_NorSpr_SubXPos,x
	PHP
	PHP
	LDY.b #$00
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	LSR
	LSR
	LSR
	LSR
	CMP.b #$08
	BCC.b +
	ORA.b #$F0
	DEY
+:
	PLP
	PHA
	ADC.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	TYA
	ADC.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	STA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	PLA
	PLP
	ADC.b #$00
	STA.w $074D
	RTS
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_UpdateExtendedSpritePosition(Address)
namespace SMB3_UpdateExtendedSpritePosition
%InsertMacroAtXPosition(<Address>)

X:
	LDA.w !RAM_SMB3_Level_ExtSpr_XSpeed,x
	ASL
	ASL
	ASL
	ASL
	CLC
	ADC.w !RAM_SMB3_Level_ExtSpr_SubXPos,x
	STA.w !RAM_SMB3_Level_ExtSpr_SubXPos,x
	PHP
	LDA.w !RAM_SMB3_Level_ExtSpr_XSpeed,x
	LSR
	LSR
	LSR
	LSR
	CMP.b #$08
	LDY.b #$00
	BCC.b +
	ORA.b #$F0
	DEY
+:
	PLP
	ADC.w !RAM_SMB3_Level_ExtSpr_XPosLo,x
	STA.w !RAM_SMB3_Level_ExtSpr_XPosLo,x
	TYA
	ADC.b !RAM_SMB3_Level_ExtSpr_XPosHi,x
	STA.b !RAM_SMB3_Level_ExtSpr_XPosHi,x
	RTS

Y:
;$27D812
	LDA.w !RAM_SMB3_Level_ExtSpr_YSpeed,x
	ASL
	ASL
	ASL
	ASL
	CLC
	ADC.w !RAM_SMB3_Level_ExtSpr_SubYPos,x
	STA.w !RAM_SMB3_Level_ExtSpr_SubYPos,x
	PHP
	LDA.w !RAM_SMB3_Level_ExtSpr_YSpeed,x
	LSR
	LSR
	LSR
	LSR
	CMP.b #$08
	LDY.b #$00
	BCC.b +
	ORA.b #$F0
	DEY
+:
	PLP
	ADC.w !RAM_SMB3_Level_ExtSpr_YPosLo,x
	STA.w !RAM_SMB3_Level_ExtSpr_YPosLo,x
	TYA
	ADC.w !RAM_SMB3_Level_ExtSpr_YPosHi,x
	STA.w !RAM_SMB3_Level_ExtSpr_YPosHi,x
	RTS
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_CheckPlayerPositionRelativeToSprite(Address)
namespace SMB3_CheckPlayerPositionRelativeToSprite
%InsertMacroAtXPosition(<Address>)

X:
	LDA.b !RAM_SMB3_Level_Player_XPosLo
	SEC
	SBC.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	STA.b $0F
	LDY.b #$00
	LDA.b !RAM_SMB3_Level_Player_XPosHi
	SBC.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	BPL.b +
	INY
+:
	RTL

Y:
;$27A849
	LDA.b !RAM_SMB3_Level_Player_YPosLo
	SEC
	SBC.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	STA.b $0F
	LDY.b #$00
	LDA.b !RAM_SMB3_Level_Player_YPosHi
	SBC.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	BPL.b +
	INY
+:
	RTL
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

; Optimization: Completely pointless. Replace all calls to this routine with "EOR.b #$FF : INC". This will save 1 byte and sveral cycles per routine call.
; Note that this is an example of NES style coding, because the NES didn't have INC/DEC.

macro ROUTINE_SMB3_UnnecessaryInvertARt(Address)
namespace SMB3_UnnecessaryInvertARt
%InsertMacroAtXPosition(<Address>)

Main:
	EOR.b #$FF
	CLC
	ADC.b #$01
	RTL
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_DrawCutscenePlayerSprites(Address)
namespace SMB3_DrawCutscenePlayerSprites
%InsertMacroAtXPosition(<Address>)

DATA_20BE75:
	db $10,$08,$00

DATA_20BE78:
	db $00,$02,$04

DATA_20BE7B:
	db $06,$08,$0A,$10,$12,$14,$16,$18
	db $1A

DATA_20BE84:
	db $00,$06

DATA_20BE86:
	db $0A,$1A

DATA_20BE88:
	db $07,$05

EndingEntry:
	PHX
	JSR.w SMB3_SetPointersForCutscenePlayerGraphics_Entry2
	PLX
	BRA.b CODE_20BE96

TitleScreenEntry:
	PHX
	JSR.w SMB3_SetPointersForCutscenePlayerGraphics_Main
	PLX
CODE_20BE96:
	PHB
	PHK
	PLB
	LDA.b #$20
	STA.b $0B
	LDA.b !RAM_SMB3_TitleScreen_Mario_GFXSet,x
	BNE.b CODE_20BEA9
	LDA.b $B8,x
	AND.b #$10
	BEQ.b CODE_20BEA9
	STA.b $0B
CODE_20BEA9:
	LDA.b !RAM_SMB3_TitleScreen_Mario_YPosLo,x
	STA.b $0E
	LDA.b !RAM_SMB3_TitleScreen_Mario_XPosLo,x
	STA.b $0F
	LDA.b !RAM_SMB3_TitleScreen_Mario_YXPPCCCT,x
	STA.b $0D
	LDA.b !RAM_SMB3_TitleScreen_Mario_OffscreenTileFlags,x
	STA.b $0C
	PHX
	LDX.b !RAM_SMB3_TitleScreen_Player_SpriteIndex
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR]
	LDA.w DATA_20BE88,x
else
	LDA.l DATA_20BE88,x				; Optimization: Unnecessary long addressing.
endif
	ASL
	STA.b $08
	PLX
	LDA.w DATA_20BE84,x
	STA.b $00
	LDA.b !RAM_SMB3_TitleScreen_Mario_OAMIndex,x
	TAX
	PHX
	LDY.b #$02
CODE_20BECF:
	PHY
	LDY.b $00
	LDA.w DATA_20BE78,y
	STA.w SMB3_OAMBuffer[$06].Tile,x
	INC
	STA.w SMB3_OAMBuffer[$07].Tile,x
	LDA.w DATA_20BE7B,y
	STA.w SMB3_OAMBuffer[$00].Tile,x
	INC
	STA.w SMB3_OAMBuffer[$01].Tile,x
	PLY
	LDA.b $0D
	AND.b #$C0
	ORA.b $08
	ORA.b $0B
	STA.w SMB3_OAMBuffer[$00].Prop,x
	STA.w SMB3_OAMBuffer[$01].Prop,x
	STA.w SMB3_OAMBuffer[$06].Prop,x
	STA.w SMB3_OAMBuffer[$07].Prop,x
	ASL.b $0C
	BCS.b CODE_20BF16
	LDA.b $0E
	STA.w SMB3_OAMBuffer[$06].YDisp,x
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$07].YDisp,x
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$00].YDisp,x
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$01].YDisp,x
CODE_20BF16:
	LDA.b $0F
	CLC
	ADC.w DATA_20BE75,y
	STA.w SMB3_OAMBuffer[$00].XDisp,x
	STA.w SMB3_OAMBuffer[$01].XDisp,x
	STA.w SMB3_OAMBuffer[$06].XDisp,x
	STA.w SMB3_OAMBuffer[$07].XDisp,x
	PHX
	TXA
	LSR
	LSR
	TAX
	LDA.b #$00
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,x
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,x
	STA.w SMB3_OAMTileSizeBuffer[$06].Slot,x
	STA.w SMB3_OAMTileSizeBuffer[$07].Slot,x
	PLX
	INX
	INX
	INX
	INX
	INX
	INX
	INX
	INX
	INC.b $00
	DEY
	BPL.b CODE_20BECF
	PLX
	LDA.b $0D
	AND.b #$40
	BEQ.b CODE_20BF9A
	LDA.w SMB3_OAMBuffer[$00].Tile,x
	PHA
	LDA.w SMB3_OAMBuffer[$02].Tile,x
	STA.w SMB3_OAMBuffer[$00].Tile,x
	PLA
	STA.w SMB3_OAMBuffer[$02].Tile,x
	LDA.w SMB3_OAMBuffer[$01].Tile,x
	PHA
	LDA.w SMB3_OAMBuffer[$03].Tile,x
	STA.w SMB3_OAMBuffer[$01].Tile,x
	PLA
	STA.w SMB3_OAMBuffer[$03].Tile,x
	LDA.w SMB3_OAMBuffer[$04].XDisp,x
	CLC
	ADC.b #$E8
	STA.w SMB3_OAMBuffer[$04].XDisp,x
	STA.w SMB3_OAMBuffer[$05].XDisp,x
	STA.w SMB3_OAMBuffer[$0A].XDisp,x
	STA.w SMB3_OAMBuffer[$0B].XDisp,x
	LDA.w SMB3_OAMBuffer[$06].Tile,x
	PHA
	LDA.w SMB3_OAMBuffer[$08].Tile,x
	STA.w SMB3_OAMBuffer[$06].Tile,x
	PLA
	STA.w SMB3_OAMBuffer[$08].Tile,x
	LDA.w SMB3_OAMBuffer[$07].Tile,x
	PHA
	LDA.w SMB3_OAMBuffer[$09].Tile,x
	STA.w SMB3_OAMBuffer[$07].Tile,x
	PLA
	STA.w SMB3_OAMBuffer[$09].Tile,x
CODE_20BF9A:
	REP.b #$20
	LDY.b #$0C
	LDA.b !RAM_SMB3_TitleScreen_Player_SpriteIndex
	AND.w #$00FF
	BNE.b CODE_20BFA7
	LDY.b #$00
CODE_20BFA7:
	LDA.w $0226,y
	CMP.w $0228,y
	BNE.b CODE_20BFD0
	SEP.b #$20
	LDA.w SMB3_OAMBuffer[$06].Prop,x
	AND.b #$BF
	STA.w SMB3_OAMBuffer[$00].Prop,x
	STA.w SMB3_OAMBuffer[$01].Prop,x
	STA.w SMB3_OAMBuffer[$06].Prop,x
	STA.w SMB3_OAMBuffer[$07].Prop,x
	ORA.b #$40
	STA.w SMB3_OAMBuffer[$02].Prop,x
	STA.w SMB3_OAMBuffer[$03].Prop,x
	STA.w SMB3_OAMBuffer[$08].Prop,x
	STA.w SMB3_OAMBuffer[$09].Prop,x
CODE_20BFD0:
	SEP.b #$20
	LDY.b !RAM_SMB3_TitleScreen_Player_SpriteIndex
	LDA.w !RAM_SMB3_TitleScreen_Mario_CurrentPose,y
	CMP.b #$0D
	BNE.b CODE_20C00E
	LDA.w SMB3_OAMBuffer[$00].YDisp,x
	STA.w SMB3_OAMBuffer[$04].YDisp,x
	LDA.w SMB3_OAMBuffer[$01].YDisp,x
	STA.w SMB3_OAMBuffer[$05].YDisp,x
	LDA.b #$F8
	LDY.b $0D
	BEQ.b CODE_20BFEF
	LDA.b #$10
CODE_20BFEF:
	CLC
	ADC.w SMB3_OAMBuffer[$06].XDisp,x
	STA.w SMB3_OAMBuffer[$04].XDisp,x
	STA.w SMB3_OAMBuffer[$05].XDisp,x
	LDY.b !RAM_SMB3_TitleScreen_Player_SpriteIndex
	LDA.w DATA_20BE86,y
	STA.w SMB3_OAMBuffer[$04].Tile,x
	INC
	STA.w SMB3_OAMBuffer[$05].Tile,x
	LDA.w SMB3_OAMBuffer[$06].Prop,x
	STA.w SMB3_OAMBuffer[$04].Prop,x
	STA.w SMB3_OAMBuffer[$05].Prop,x
CODE_20C00E:
	LDX.b !RAM_SMB3_TitleScreen_Player_SpriteIndex
	PLB
	RTS
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_SetPointersForCutscenePlayerGraphics(Address)
namespace SMB3_SetPointersForCutscenePlayerGraphics
%InsertMacroAtXPosition(<Address>)

; Note: This routine also draws Peach during the ending

DATA_20E061:
	db SMB3_Bank3EGraphics_Mario_Small>>8
	db SMB3_Bank3FGraphics_Mario_Big>>8
	db SMB3_Bank3EGraphics_Mario_Raccoon>>8
	db SMB3_Bank3EGraphics_Mario_Hammer+$0800>>8
	db SMB3_Bank3FGraphics_Sprite_TitleScreen2>>8
	db SMB3_Bank3FGraphics_Sprite_TitleScreen2+$0400>>8

DATA_20E067:
	db SMB3_Bank2EGraphics_Luigi_Small>>8
	db SMB3_Bank3FGraphics_Luigi_Big>>8
	db SMB3_Bank3EGraphics_Mario_Hammer>>8
	db SMB3_Bank2EGraphics_Luigi_Hammer+$0800>>8
	db SMB3_Bank3FGraphics_Sprite_TitleScreen2>>8
	db SMB3_Bank3FGraphics_Sprite_TitleScreen2+$0400>>8

DATA_20E06D:
	db SMB3_Bank3EGraphics_Mario_Small>>16
	db SMB3_Bank3FGraphics_Mario_Big>>16
	db SMB3_Bank3EGraphics_Mario_Raccoon>>16
	db SMB3_Bank3EGraphics_Mario_Hammer+$0800>>16
	db SMB3_Bank3FGraphics_Sprite_TitleScreen2>>16
	db SMB3_Bank3FGraphics_Sprite_TitleScreen2+$0400>>16

DATA_20E073:
	db SMB3_Bank2EGraphics_Luigi_Small>>16
	db SMB3_Bank3FGraphics_Luigi_Big>>16
	db SMB3_Bank3EGraphics_Mario_Hammer>>16
	db SMB3_Bank2EGraphics_Luigi_Hammer+$0800>>16
	db SMB3_Bank3FGraphics_Sprite_TitleScreen2>>16
	db SMB3_Bank3FGraphics_Sprite_TitleScreen2+$0400>>16

Entry2:
	LDA.w !RAM_SMB3_Level_Player_CurrentCharacter
	BEQ.b Main
	LDX.b !RAM_SMB3_TitleScreen_Mario_CurrentPose
	LDA.l DATA_20BB02,x
	LDX.b !RAM_SMB3_TitleScreen_Mario_GFXSet
	CMP.b #$F0
	BCC.b CODE_20E090
	SEC
	SBC.b #$F0
	TAX
	LDA.b #$00
CODE_20E090:
	CLC
	ADC.l DATA_20E067,x
	STA.b $01
	STZ.b $00
	LDA.l DATA_20E073,x
	BRA.b CODE_20E0BE

Main:
	LDX.b !RAM_SMB3_TitleScreen_Mario_CurrentPose
	LDA.l DATA_20BB02,x
	LDX.b !RAM_SMB3_TitleScreen_Mario_GFXSet
	CMP.b #$F0
	BCC.b CODE_20E0B1
	SEC
	SBC.b #$F0
	TAX
	LDA.b #$00
CODE_20E0B1:
	CLC
	ADC.l DATA_20E061,x
	STA.b $01
	STZ.b $00
	LDA.l DATA_20E06D,x
CODE_20E0BE:
	STA.w $0238
	LDA.b #DATA_20BA5A>>16
	STA.b $06
	REP.b #$30
	LDA.w #DATA_20BA5A
	STA.b $04
	LDA.b !RAM_SMB3_TitleScreen_Mario_CurrentPose
	AND.w #$00FF
	TAX
	LDA.l DATA_20BA3E,x
	AND.w #$00FF
	TAY
	LDA.b [$04],y
	AND.w #$00FF
	TAX
	LDA.w DATA_2189E7,x
	CLC
	ADC.b $00
	STA.w $0220
	INY
	LDA.b [$04],y
	AND.w #$00FF
	TAX
	LDA.w DATA_2189E7,x
	CLC
	ADC.b $00
	STA.w $0222
	INY
	LDA.b [$04],y
	AND.w #$00FF
	TAX
	LDA.w DATA_2189E7,x
	CLC
	ADC.b $00
	STA.w $0224
	INY
	LDA.b [$04],y
	AND.w #$00FF
	TAX
	LDA.w DATA_2189E7,x
	CLC
	ADC.b $00
	STA.w $0226
	INY
	LDA.b [$04],y
	AND.w #$00FF
	TAX
	LDA.w DATA_2189E7,x
	CLC
	ADC.b $00
	STA.w $0228
	INY
	LDA.b [$04],y
	AND.w #$00FF
	TAX
	LDA.w DATA_2189E7,x
	CLC
	ADC.b $00
	STA.w $022A
	SEP.b #$30
	LDX.b !RAM_SMB3_TitleScreen_Luigi_CurrentPose
	LDA.l DATA_20BB02,x
	LDX.b !RAM_SMB3_TitleScreen_Luigi_GFXSet
	CMP.b #$F0
	BCC.b CODE_20E14D
	SEC
	SBC.b #$F0
	TAX
	LDA.b #$00
CODE_20E14D:
	CLC
	ADC.l DATA_20E067,x
	STA.b $01
	STZ.b $00
	LDA.l DATA_20E073,x
	STA.w $0239
	REP.b #$30
	LDA.b !RAM_SMB3_TitleScreen_Luigi_CurrentPose
	AND.w #$00FF
	TAX
	LDA.l DATA_20BA3E,x
	AND.w #$00FF
	TAY
	LDA.b [$04],y
	AND.w #$00FF
	TAX
	LDA.w DATA_2189E7,x
	CLC
	ADC.b $00
	STA.w $022C
	INY
	LDA.b [$04],y
	AND.w #$00FF
	TAX
	LDA.w DATA_2189E7,x
	CLC
	ADC.b $00
	STA.w $022E
	INY
	LDA.b [$04],y
	AND.w #$00FF
	TAX
	LDA.w DATA_2189E7,x
	CLC
	ADC.b $00
	STA.w $0230
	INY
	LDA.b [$04],y
	AND.w #$00FF
	TAX
	LDA.w DATA_2189E7,x
	CLC
	ADC.b $00
	STA.w $0232
	INY
	LDA.b [$04],y
	AND.w #$00FF
	TAX
	LDA.w DATA_2189E7,x
	CLC
	ADC.b $00
	STA.w $0234
	INY
	LDA.b [$04],y
	AND.w #$00FF
	TAX
	LDA.w DATA_2189E7,x
	CLC
	ADC.b $00
	STA.w $0236
	SEP.b #$30
	RTS
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_DrawCopyrightInfo(Address)
namespace SMB3_DrawCopyrightInfo
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.b #$38
	STA.b $00
	LDX.b #$00
	LDY.b #$40
CODE_20B263:
	LDA.l DATA_20B2E0,x
CODE_20B265:
	BPL.b CODE_20B28A
	STA.w SMB3_OAMBuffer[$00].Tile,y
	LDA.b #$35
	STA.w SMB3_OAMBuffer[$00].Prop,y
	LDA.b $00
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	LDA.b #$C8
	STA.w SMB3_OAMBuffer[$00].YDisp,y
CODE_20B27B:
	PHY
	TYA
	LSR
	LSR
	TAY
	LDA.b #$00
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	PLY
	INY
	INY
	INY
	INY
CODE_20B28A:
	LDA.b $00
	CLC
	ADC.b #$08
	STA.b $00
	INX
	CPX.b #$0B
	BNE.b CODE_20B263
	REP.b #$20
	LDA.w #$C498
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	CLC
	ADC.w #$0010
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	CLC
	ADC.w #$0010
	STA.w SMB3_OAMBuffer[$02].XDisp,y
	CLC
	ADC.w #$0008
	STA.w SMB3_OAMBuffer[$03].XDisp,y
	LDA.w #$3585										;\ "Nintendo"'s tiles
	STA.w SMB3_OAMBuffer[$00].Tile,y					;|
	LDA.w #$3587										;|
	STA.w SMB3_OAMBuffer[$01].Tile,y					;|
	LDA.w #$3589										;|
	STA.w SMB3_OAMBuffer[$02].Tile,y					;|
	LDA.w #$358A										;|
	STA.w SMB3_OAMBuffer[$03].Tile,y					;/
	SEP.b #$20
	TYA
	LSR
	LSR
	TAY
	LDA.b #$02
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$02].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$03].Slot,y
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR]
	JMP.w SMB3_DrawTLCredits_Main
else
	RTS
endif

DATA_20B2E0:											; Copyright years' tiles
	db $84,$00,$80,$81,$83,$83,$00,$80
	db $81,$81,$82
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_ProcessGeneratorSprite(Address)
namespace SMB3_ProcessGeneratorSprite
%InsertMacroAtXPosition(<Address>)

Main:
	JSR.w Sub
	RTL

Sub:
	LDA.w !RAM_SMB3_Level_GenSpr_SpriteID
	BEQ.b SMB3_GenSprXX_DisableGenerators_CODE_299EA4
	JSL.l SMB3_ExecutePtr_Absolute

DATA_299E9A:
	dw SMB3_GenSpr00_NoGenerator_Main
	dw SMB3_GenSpr01_FlyingRedCheepCheepGenerator_Main
	dw SMB3_GenSpr02_SpinyCheepCheepGenerator_Main
	dw SMB3_GenSpr03_DisableGeneratorsAndLakitu_Main
	dw SMB3_GenSpr04_UnusedGreenParabuzzyGenerator_Main
	dw SMB3_GenSpr05_BGCloudGenerator_Main
	dw SMB3_GenSpr06_LeftMovingFallingPlatformGenerator_Main
	dw SMB3_GenSpr07_SpawnMiniChestGenerator_Main
	dw SMB3_GenSpr08_DisableGenerators_Main
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_ProcessShooterSprites(Address)
namespace SMB3_ProcessShooterSprites
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.b $9C
	ORA.l $7E3973
	BNE.b CODE_27D852
	LDX.b #$07
CODE_27D84A:
	STX.b $9B
	JSR.w Sub
	DEX
	BPL.b CODE_27D84A
SMB3_ShooterSpr00_NoShooter:
.Main:
CODE_27D852:
	RTS

Sub:
	LDA.w !RAM_SMB3_Level_ShooterSpr_SpriteID,x
	BEQ.b CODE_27D852
	PHA
	LDA.w $06E3,x
	BEQ.b CODE_27D861
	DEC.w $06E3,x
CODE_27D861:
	LDA.w $1A57,x
	BEQ.b CODE_27D869
	DEC.w $1A57,x
CODE_27D869:
	PLA
	JSL.l SMB3_ExecutePtr_Absolute

DATA_27D86E:
	dw SMB3_ShooterSpr00_NoShooter_Main
	dw SMB3_ShooterSpr01_BulletBillLauncher_Main
	dw SMB3_ShooterSpr02_HomingBillLauncher_Main
	dw SMB3_ShooterSpr03_RockyWrenchSpawner_Main
	dw SMB3_ShooterSpr04_RotatingCannonballShooter_Main
	dw SMB3_ShooterSpr05_LeftFacingPipeSpawningGoombas_Main
	dw SMB3_ShooterSpr06_RightFacingPipeSpawningGoombas_Main
	dw SMB3_ShooterSpr07_LeftFacingCannon_Main
	dw SMB3_ShooterSpr08_LeftFacingBigCannon_Main
	dw SMB3_ShooterSpr09_UpLeftFacingCannon_Main
	dw SMB3_ShooterSpr0A_UpRightFacingCannon_Main
	dw SMB3_ShooterSpr0B_DownLeftFacingCannon_Main
	dw SMB3_ShooterSpr0C_DownRightFacingCannon_Main
	dw SMB3_ShooterSpr0D_UpLeftFacingCannon_Main
	dw SMB3_ShooterSpr0E_UpRightFacingCannon_Main
	dw SMB3_ShooterSpr0F_DownLeftFacingCannon_Main
	dw SMB3_ShooterSpr10_DownRightFacingCannon_Main
	dw SMB3_ShooterSpr11_RightFacingCannon_Main
	dw SMB3_ShooterSpr12_RightFacingBigCannon_Main
	dw SMB3_ShooterSpr13_LeftFacingBobOmbCannon_Main
	dw SMB3_ShooterSpr14_RightFacingBobOmbCannon_Main
	dw SMB3_ShooterSpr15_LaserBowserStatue_Main
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_BufferBGTilemap(Address)
namespace SMB3_BufferBGTilemap
%InsertMacroAtXPosition(<Address>)

DATA_2A8D47:
	dl DATA_2ADC80				; 01
	dl DATA_2ADCE6				; 02
	dl DATA_2ADCFB				; 03
	dl DATA_2ADD3A				; 04
	dl DATA_2ADD43				; 05
	dl Layer2BG05_ScrewedPanels		; 06
	dl DATA_2ADD89				; 07
	dl DATA_2ADD9E				; 08
	dl DATA_2ADDB9				; 09
	dl DATA_2ADE3C				; 0A
	dl DATA_2ADE70				; 0B
	dl DATA_2ADECF				; 0C
	dl DATA_2ADEDE				; 0D
	dl DATA_2ADEFF				; 0E
	dl DATA_2ADF36				; 0F
	dl DATA_2ADF96				; 10
	dl DATA_2AE059				; 11
	dl DATA_2AE07D				; 12
	dl DATA_2AE080				; 13
	dl DATA_2AE083				; 14
	dl DATA_2ADE70				; 15
	dl DATA_2AE086				; 16
	dl DATA_2AE092				; 17
	dl DATA_2ADF36				; 18
	dl DATA_2ADEFF				; 19
	dl DATA_2ADD43				; 1A
	dl DATA_2AE0A4				; 1B
	dl DATA_2AE0C7				; 1C
	dl DATA_2AE13C				; 1D
	dl DATA_2AE086				; 1E
	dl DATA_2AE1D8				; 1F
	dl DATA_2AE23E				; 20
	dl DATA_2ADCB0				; 21
	dl DATA_2AE241				; 22
	dl DATA_2ADCE6				; 23
	dl DATA_2ADCFB				; 24
	dl DATA_2ADCD4				; 25

Main:
	PHB
	PHK
	PLB
	LDA.w !RAM_SMB3_Level_Layer2BGFromHeader		;\ Optimization: Useless branch.
	CMP.b #$17						;|
	BEQ.b CODE_2A8DC0					;|
CODE_2A8DC0:							;/
	JSR.w CODE_2A8CAC
	STZ.w !RAM_SMB3_Global_HDMAEnableMirror
	STZ.w !REGISTER_HDMAEnable
	LDA.w !RAM_SMB3_Level_Layer2BGFromHeader
	ASL
	CLC
	ADC.w !RAM_SMB3_Level_Layer2BGFromHeader
	TAX
	LDA.w DATA_2A8D47-$01,x
	STA.b !RAM_SMB3_Level_BGDataPtrBank
	REP.b #$20
	LDA.w DATA_2A8D47-$03,x
	STA.b !RAM_SMB3_Level_BGDataPtrLo
	SEP.b #$20
	LDY.b #$00
	LDA.b [!RAM_SMB3_Level_BGDataPtrLo],y
	STA.w !RAM_SMB3_Level_Layer2BGPaletteFromHeader
	INY
	LDA.b [!RAM_SMB3_Level_BGDataPtrLo],y
	STA.w $034F
	REP.b #$30
	LDA.b !RAM_SMB3_Level_BGDataPtrLo
	CLC
	ADC.w #$0002
	STA.b !RAM_SMB3_Level_BGDataPtrLo
	LDA.w !RAM_SMB3_Level_Layer2BGFromHeader
	AND.w #$00FF
	ASL
	TAX
	SEP.b #$20
	JMP.w (DATA_2A8E08,x)

NoBG:
	SEP.b #$10
	PLB
	RTL

DATA_2A8E08:					; Info: BG routine... 
	dw SMB3_LoadLayer2BG00_NoBG_Main	; 00
	dw CODE_2A8EBA				; 01
	dw CODE_2A9144				; 02 (Clouds, like the ones seen in airship levels)
	dw CODE_2A9342				; 03 (Airship interior)
	dw CODE_2A948E				; 04 (Level 1-5 BG)
	dw LoadLayer2BG05_ScrewedPanels_Main	; 05 (Screwed panels)
	dw CODE_2A98B5				; 06
	dw CODE_2A9AB4				; 07 (Exterior Castle walls)
	dw CODE_2A9BC5				; 08
	dw CODE_2A9C9D				; 09
	dw CODE_2A9F2D				; 0A (Level 1-2 BG)
	dw CODE_2AA0A7				; 0B
	dw CODE_2AA181				; 0C (Level 3-7 BG)
	dw CODE_2AA339				; 0D (Level 2-2 Sublevel BG)
	dw CODE_2AA44A				; 0E (Level 2-1 BG)
	dw CODE_2AA69A				; 0F (Level 1-4 BG)
	dw CODE_2AA948				; 10 (Prison BG)
	dw CODE_2AAA8F				; 11
	dw SMB3_LoadLayer2BG12_NoBG_Main	; 12
	dw CODE_2AAC05				; 13 (Level 1-2 Sublevel BG)
	dw CODE_2AAC05				; 14
	dw CODE_2AA0A7				; 15
	dw CODE_2AACA9				; 16
	dw CODE_2AAE8C				; 17 (Toad House)
	dw CODE_2AA69A				; 18
	dw CODE_2AA44A				; 19
	dw LoadLayer2BG1A_ScrewedPanels_Main	; 1A
	dw CODE_2AAF58				; 1B
	dw CODE_2AB13F				; 1C
	dw CODE_2AA69A				; 1D
	dw CODE_2AACA9				; 1E
	dw CODE_2AB2B3				; 1F
	dw CODE_2AB3A1				; 20
	dw CODE_2A8EBA				; 21
	dw CODE_2AB3FE				; 22
	dw CODE_2A9144				; 23
	dw CODE_2A9342				; 24
	dw CODE_2A8EBA				; 25
namespace off
	%SetDuplicateOrNullPointer(SMB3_BufferBGTilemap_NoBG, SMB3_LoadLayer2BG00_NoBG_Main)
	%SetDuplicateOrNullPointer(SMB3_BufferBGTilemap_NoBG, SMB3_LoadLayer2BG12_NoBG_Main)
endmacro

;#############################################################################################################
;#############################################################################################################
; Note:
; ScratchRAM $0D: Gfx address
; ScratchRAM $0F: Gfx address bank
; ScratchRAM $0B: Gfx size
; Last A value before JSR: VRAM address target (Tile Address / 2)

macro ROUTINE_SMB3_LoadTitleScreenGraphics(Address)
namespace SMB3_LoadTitleScreenGraphics
%InsertMacroAtXPosition(<Address>)

Main:
	REP.b #$20
	
	LDA.w #SMB3_Bank47Graphics_TitleScreen
	STA.b !RAM_SMB3_Global_ScratchRAM0D
	LDX.b #SMB3_Bank47Graphics_TitleScreen>>16
	STX.b !RAM_SMB3_Global_ScratchRAM0F
	LDA.w #SMB3_Bank47Graphics_TitleScreenEnd-SMB3_Bank47Graphics_TitleScreen
	STA.b !RAM_SMB3_Global_ScratchRAM0B
	JSR.w SMB3_CopyOfDMADataToVRAM_Main
	
	LDA.w #SMB3_Bank3AGraphics_BG_ToadHouse
	STA.b !RAM_SMB3_Global_ScratchRAM0D
	LDX.b #SMB3_Bank3AGraphics_BG_ToadHouse>>16
	STX.b !RAM_SMB3_Global_ScratchRAM0F
	LDA.w #$3000									; Glitch: This should be #$0800!
	STA.b !RAM_SMB3_Global_ScratchRAM0B
	JSR.w SMB3_CopyOfDMADataToVRAM_Main
	
	LDA.w #SMB3_Bank3AGraphics_BG_ToadHouse
	STA.b !RAM_SMB3_Global_ScratchRAM0D
	LDX.b #SMB3_Bank3AGraphics_BG_ToadHouse>>16
	STX.b !RAM_SMB3_Global_ScratchRAM0F
	LDA.w #$0800
	STA.b !RAM_SMB3_Global_ScratchRAM0B
	LDA.w #$3C00
	JSR.w SMB3_CopyOfDMADataToVRAM_Main
	
	LDA.w #SMB3_Bank45Graphics_StatusBar						;\ Note: This loads the status bar graphics
	STA.b !RAM_SMB3_Global_ScratchRAM0D						;|
	LDX.b #SMB3_Bank45Graphics_StatusBar>>16					;|
	STX.b !RAM_SMB3_Global_ScratchRAM0F						;|
	LDA.w #SMB3_Bank45Graphics_StatusBarEnd-SMB3_Bank45Graphics_StatusBar		;|
	STA.b !RAM_SMB3_Global_ScratchRAM0B						;|
	LDA.w #$4800									;|
	JSR.w SMB3_CopyOfDMADataToVRAM_Main						;/
	
	LDA.w #SMB3_Bank47Graphics_TitleScreen+$0800				;\ Note: This block is here only for the sake of loading the red arrow as an object.
	STA.b !RAM_SMB3_Global_ScratchRAM0D							;|
	LDX.b #SMB3_Bank47Graphics_TitleScreen+$0800>>16			;|
	STX.b !RAM_SMB3_Global_ScratchRAM0F							;|
	LDA.w #$0800												;|
	STA.b !RAM_SMB3_Global_ScratchRAM0B							;|
	LDA.w #$6400												;|
	JSR.w SMB3_DMADataToVRAM_Main								;/
	
	LDA.w #SMB3_Bank40Graphics_Sprite_Global2
	STA.b !RAM_SMB3_Global_ScratchRAM0D
	LDX.b #SMB3_Bank40Graphics_Sprite_Global2>>16
	STX.b !RAM_SMB3_Global_ScratchRAM0F
	LDA.w #$0800
	STA.b !RAM_SMB3_Global_ScratchRAM0B
	LDA.w #$6800
	JSR.w SMB3_DMADataToVRAM_Main
	
	LDA.w #SMB3_Bank47Graphics_Sprite_TitleScreen1
	STA.b !RAM_SMB3_Global_ScratchRAM0D
	LDX.b #SMB3_Bank47Graphics_Sprite_TitleScreen1>>16
	STX.b !RAM_SMB3_Global_ScratchRAM0F
	LDA.w #$0800
	STA.b !RAM_SMB3_Global_ScratchRAM0B
	LDA.w #$6C00
	JSR.w SMB3_DMADataToVRAM_Main
	
	LDA.w #SMB3_Bank45Graphics_Sprite_Empty1
	STA.b !RAM_SMB3_Global_ScratchRAM0D
	LDX.b #SMB3_Bank45Graphics_Sprite_Empty1>>16
	STX.b !RAM_SMB3_Global_ScratchRAM0F
	LDA.w #SMB3_Bank45Graphics_Sprite_Empty1End-SMB3_Bank45Graphics_Sprite_Empty1
	STA.b !RAM_SMB3_Global_ScratchRAM0B
	LDA.w #$7000
	JSR.w SMB3_DMADataToVRAM_Main
	
	LDA.w #SMB3_Bank47Graphics_Sprite_LoadingLetters
	STA.b !RAM_SMB3_Global_ScratchRAM0D
	LDX.b #SMB3_Bank47Graphics_Sprite_LoadingLetters>>16
	STX.b !RAM_SMB3_Global_ScratchRAM0F
	LDA.w #SMB3_Bank47Graphics_Sprite_LoadingLettersEnd-SMB3_Bank47Graphics_Sprite_LoadingLetters
	STA.b !RAM_SMB3_Global_ScratchRAM0B
	LDA.w #$7800
	JSR.w SMB3_DMADataToVRAM_Main
	
	SEP.b #$20
	RTS
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_HandleCurrentTitleScreenProcess(Address)
namespace SMB3_HandleCurrentTitleScreenProcess
%InsertMacroAtXPosition(<Address>)

Main:
	STZ.b $BA
	STZ.b !RAM_SMB3_Level_Player_CurrentPowerUp
	LDA.b !RAM_SMB3_TitleScreen_CurrentState
	ASL
	TAX
	JMP.w (CODE_20B3AD,x)

CODE_20B3AD:
	dw SMB3_TitleScreenState00_CurtainRise_Main
	dw CODE_20B512					; Note: Handle title screen animations
	dw CODE_20B76C					; Initialize player select?
	dw CODE_20B79B					; Player select
	dw CODE_20B8DE					; Initialize selection 1?
	dw CODE_20B660					; Initialize selection 2?
	dw CODE_20B583					; Jump to player select
	dw CODE_20B940					; Debug mode
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_TitleScreenState00_CurtainRise(Address)
namespace SMB3_TitleScreenState00_CurtainRise
%InsertMacroAtXPosition(<Address>)

Main:
	LDY.b #$01
CODE_20B3BF:
	INC.w $0216
	LDA.w $0216
	CMP.b #$D0
	BEQ.b CODE_20B418
	CMP.b #$4E
	BNE.b CODE_20B3D4
	LDA.b #$40
	STA.b !RAM_SMB3_TitleScreen_Player_HoldInPlaceFlag
	STA.w $0512
CODE_20B3D4:
	DEY
	BPL.b CODE_20B3BF
	LDA.b !RAM_SMB3_TitleScreen_Player_HoldInPlaceFlag
	BEQ.b CODE_20B3DE
	JSR.w CODE_20BB4A
CODE_20B3DE:
	LDA.b !RAM_SMB3_Global_ControllerPress1P1
	ORA.b !RAM_SMB3_Global_ControllerPress1P2
	AND.b #!Joypad_Start>>8
	BEQ.b CODE_20B3FF
if !Define_Global_ROMToAssemble&(!ROM_SMB3_U|!ROM_SMB3_E|!ROM_SMB3_J) == $00
	LDA.l !SRAM_SMAS_Global_RunningDemoFlag
	BEQ.b CODE_20B3F0
	JML.l SMAS_ResetToSMASTitleScreen_Main				; Note: Call to SMAS function
endif

CODE_20B3F0:
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	LDA.w !RAM_SMB3_TitleScreen_CurrentState
else
	LDA.b !RAM_SMB3_TitleScreen_CurrentState
endif
	CMP.b #$06
	BEQ.b CODE_20B3FB
	LDA.b #!Define_SMAS_Sound0063_Correct
	STA.w !RAM_SMB3_Global_SoundCh3
CODE_20B3FB:
	LDA.b #$06
	STA.b !RAM_SMB3_TitleScreen_CurrentState
CODE_20B3FF:
if !Define_Global_ROMToAssemble&(!ROM_SMB3_U|!ROM_SMB3_E|!ROM_SMB3_J) == $00
	LDA.b !RAM_SMB3_Global_ControllerHold2P1
	ORA.b !RAM_SMB3_Global_ControllerHold2P2
	AND.b #!Joypad_X
	BEQ.b CODE_20B40B
	JML.l SMAS_ResetToSMASTitleScreen_Main				; Note: Call to SMAS function
CODE_20B40B:
	LDA.b !RAM_SMB3_Global_ControllerHold1P1
	ORA.b !RAM_SMB3_Global_ControllerHold1P2
	AND.b #!Joypad_Y>>8
	BEQ.b CODE_20B417
	JML.l SMAS_ResetToSMASTitleScreen_Main				; Note: Call to SMAS function
endif
CODE_20B417:
	RTS

CODE_20B418:
	LDA.b #$02
	STA.b !RAM_SMB3_Level_Player_CurrentPose
	LDA.b #$02
	STA.b $BD
	INC.b !RAM_SMB3_TitleScreen_CurrentState
	STZ.b !RAM_SMB3_TitleScreen_Player_HoldInPlaceFlag
	RTS
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_DMADataToVRAM(Address)
namespace SMB3_DMADataToVRAM
%InsertMacroAtXPosition(<Address>)

Entry2:
	LDA.w #$6000
Main:
	LDX.b #$80
	STX.w !REGISTER_VRAMAddressIncrementValue
	STA.w !REGISTER_VRAMAddressLo
	LDA.w #(!REGISTER_WriteToVRAMPortLo&$0000FF<<8)+$01
	STA.w DMA[$00].Parameters
	LDA.b !RAM_SMB3_Global_ScratchRAM0D
	STA.w DMA[$00].SourceLo
	LDX.b !RAM_SMB3_Global_ScratchRAM0F
	STX.w DMA[$00].SourceBank
	LDA.b !RAM_SMB3_Global_ScratchRAM0B
	STA.w DMA[$00].SizeLo
	LDX.b #$01
	STX.w !REGISTER_DMAEnable
	RTS
namespace off
endmacro

;--------------------------------------------------------------------

; Optimization: This routine is identical to the above past the Main: label.

macro ROUTINE_SMB3_CopyOfDMADataToVRAM(Address)
namespace SMB3_CopyOfDMADataToVRAM
%InsertMacroAtXPosition(<Address>)

Main:
	LDX.b #$80
	STX.w !REGISTER_VRAMAddressIncrementValue
	STA.w !REGISTER_VRAMAddressLo
	LDA.w #(!REGISTER_WriteToVRAMPortLo&$0000FF<<8)+$01
	STA.w DMA[$00].Parameters
	LDA.b !RAM_SMB3_Global_ScratchRAM0D
	STA.w DMA[$00].SourceLo
	LDX.b !RAM_SMB3_Global_ScratchRAM0F
	STX.w DMA[$00].SourceBank
	LDA.b !RAM_SMB3_Global_ScratchRAM0B
	STA.w DMA[$00].SizeLo
	LDX.b #$01
	STX.w !REGISTER_DMAEnable
	RTS
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_UploadStripeImage(Address)
namespace SMB3_UploadStripeImage
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.b !RAM_SMB3_Global_StripeImageDataBank
	STA.w DMA[$01].SourceBank
	REP.b #$10
	LDY.w #$0000
	LDA.b [!RAM_SMB3_Global_StripeImageDataLo],y
	BPL.b CODE_29E8BC
	SEP.b #$30
	RTL

CODE_29E8BC:
	STZ.b !RAM_SMB3_Global_ScratchRAM06
CODE_29E8BE:
	STA.b !RAM_SMB3_Global_ScratchRAM04
	INY
	LDA.b [!RAM_SMB3_Global_StripeImageDataLo],y
	STA.b !RAM_SMB3_Global_ScratchRAM03
	INY
	LDA.b [!RAM_SMB3_Global_StripeImageDataLo],y
	AND.b #$80
	ASL
	ROL
	STA.b !RAM_SMB3_Global_ScratchRAM07
	LDA.b [!RAM_SMB3_Global_StripeImageDataLo],y
	AND.b #$40
	STA.b !RAM_SMB3_Global_ScratchRAM05
	LSR
	LSR
	LSR
	ORA.b #$01
	STA.w DMA[$01].Parameters
	LDA.b #!REGISTER_WriteToVRAMPortLo
	STA.w DMA[$01].Destination
	REP.b #$20
	LDA.b !RAM_SMB3_Global_ScratchRAM03
	STA.w !REGISTER_VRAMAddressLo
	LDA.b [!RAM_SMB3_Global_StripeImageDataLo],y
	XBA
	AND.w #$3FFF
	TAX
	INX
	STX.w DMA[$01].SizeLo
	INY
	INY
	TYA
	CLC
	ADC.b !RAM_SMB3_Global_StripeImageDataLo
	STA.w DMA[$01].SourceLo
	LDA.b !RAM_SMB3_Global_ScratchRAM05
	BEQ.b CODE_29E934
	INX
	TXA
	LSR
	TAX
	STX.w DMA[$01].SizeLo
	SEP.b #$20
	LDA.b !RAM_SMB3_Global_ScratchRAM05
	LSR
	LSR
	LSR
	STA.w DMA[$01].Parameters
	LDA.b !RAM_SMB3_Global_ScratchRAM07
	STA.w !REGISTER_VRAMAddressIncrementValue
	LDA.b #$02
	STA.w !REGISTER_DMAEnable
	LDA.b #!REGISTER_WriteToVRAMPortHi
	STA.w DMA[$01].Destination
	REP.b #$21
	TYA
	ADC.b !RAM_SMB3_Global_StripeImageDataLo
	INC
	STA.w DMA[$01].SourceLo
	LDA.b !RAM_SMB3_Global_ScratchRAM03
	STA.w !REGISTER_VRAMAddressLo
	STX.w DMA[$01].SizeLo
	LDX.w #$0002
CODE_29E934:
	STX.b !RAM_SMB3_Global_ScratchRAM03
	TYA
	CLC
	ADC.b !RAM_SMB3_Global_ScratchRAM03
	TAY
	SEP.b #$20
	LDA.b !RAM_SMB3_Global_ScratchRAM07
	ORA.b #$80
	STA.w !REGISTER_VRAMAddressIncrementValue
	LDA.b #$02
	STA.w !REGISTER_DMAEnable
	LDA.b [!RAM_SMB3_Global_StripeImageDataLo],y
	BMI.b CODE_29E950
	JMP.w CODE_29E8BE

CODE_29E950:
	SEP.b #$30
	RTL
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_UploadCurtainTilemap(Address)
namespace SMB3_UploadCurtainTilemap
%InsertMacroAtXPosition(<Address>)

Main:
	REP.b #$20
	LDX.b #$80
	STX.w !REGISTER_VRAMAddressIncrementValue
	LDA.w #$0000
	STA.w !REGISTER_VRAMAddressLo
	LDA.w #$000B
	STA.b $00
CODE_20B337:
	LDY.b #$08
CODE_20B339:
	LDA.w #$01F0
	STA.w !REGISTER_WriteToVRAMPortLo
	INC
	STA.w !REGISTER_WriteToVRAMPortLo
	LDA.w #$41F1
	STA.w !REGISTER_WriteToVRAMPortLo
	DEC
	STA.w !REGISTER_WriteToVRAMPortLo
	DEY
	BNE.b CODE_20B339
	LDY.b #$08
CODE_20B352:
	LDA.w #$01F2
	STA.w !REGISTER_WriteToVRAMPortLo
	INC
	STA.w !REGISTER_WriteToVRAMPortLo
	LDA.w #$41F3
	STA.w !REGISTER_WriteToVRAMPortLo
	DEC
	STA.w !REGISTER_WriteToVRAMPortLo
	DEY
	BNE.b CODE_20B352
	DEC.b $00
	BNE.b CODE_20B337
	LDY.b #$08
CODE_20B36F:
	LDA.w #$01F4
	STA.w !REGISTER_WriteToVRAMPortLo
	INC
	STA.w !REGISTER_WriteToVRAMPortLo
	LDA.w #$41F5
	STA.w !REGISTER_WriteToVRAMPortLo
	DEC
	STA.w !REGISTER_WriteToVRAMPortLo
	DEY
	BNE.b CODE_20B36F
	LDY.b #$08
CODE_20B388:
	LDA.w #$01F6
	STA.w !REGISTER_WriteToVRAMPortLo
	INC
	STA.w !REGISTER_WriteToVRAMPortLo
	LDA.w #$41F7
	STA.w !REGISTER_WriteToVRAMPortLo
	DEC
	STA.w !REGISTER_WriteToVRAMPortLo
	DEY
	BNE.b CODE_20B388
	SEP.b #$20
	RTS
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_BufferInitialTitleScreenPalettes(Address)
namespace SMB3_BufferInitialTitleScreenPalettes
%InsertMacroAtXPosition(<Address>)

Main:
	REP.b #$30
	LDX.w #$001E
	LDA.w #$0000
CODE_20B03E:
	STA.w SMB3_PaletteMirror[$00].LowByte,x
	STA.w SMB3_PaletteMirror[$10].LowByte,x
	STA.w SMB3_PaletteMirror[$20].LowByte,x
	STA.w SMB3_PaletteMirror[$30].LowByte,x
	STA.w SMB3_PaletteMirror[$40].LowByte,x
	STA.w SMB3_PaletteMirror[$50].LowByte,x
	STA.w SMB3_PaletteMirror[$60].LowByte,x
	STA.w SMB3_PaletteMirror[$70].LowByte,x
	STA.w SMB3_PaletteMirror[$80].LowByte,x
	STA.w SMB3_PaletteMirror[$90].LowByte,x
	STA.w SMB3_PaletteMirror[$A0].LowByte,x
	STA.w SMB3_PaletteMirror[$B0].LowByte,x
	STA.w SMB3_PaletteMirror[$C0].LowByte,x
	STA.w SMB3_PaletteMirror[$D0].LowByte,x
	STA.w SMB3_PaletteMirror[$E0].LowByte,x
	STA.w SMB3_PaletteMirror[$F0].LowByte,x
	DEX
	DEX
	BPL.b CODE_20B03E
	PHB
	LDX.w #SMB3TitleScreenPalette_Row01To03
	LDY.w #SMB3_PaletteMirror[$00].LowByte
	LDA.w #SMB3TitleScreenPalette_Row01To03End-SMB3TitleScreenPalette_Row01To03-$01
	MVN SMB3_PaletteMirror[$00].LowByte>>16,SMB3TitleScreenPalette_Row01To03>>16
	PLB
	LDA.w #$0000
	STA.w SMB3_PaletteMirror[$00].LowByte
	STA.w SMB3_PaletteMirror[$08].LowByte
	STA.w SMB3_PaletteMirror[$1F].LowByte
	STA.w SMB3_PaletteMirror[$2F].LowByte
	SEP.b #$30
	LDA.b #$01
	STA.w !RAM_SMB3_Global_UpdateEntirePaletteFlag
	RTS
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_BufferTitleScreenSpritePalettes(Address)
namespace SMB3_BufferTitleScreenSpritePalettes
%InsertMacroAtXPosition(<Address>)

Main:
	REP.b #$30
	PHB
	LDX.w #SMB3_GlobalSpritePalette_Row08To0C
	LDY.w #SMB3_PaletteMirror[$80].LowByte
	LDA.w #SMB3_GlobalSpritePalette_Row08To0CEnd-SMB3_GlobalSpritePalette_Row08To0C-$01
	MVN SMB3_PaletteMirror[$80].LowByte>>16,SMB3_GlobalSpritePalette_Row08To0C>>16
	LDX.w #SMB3TitleScreenPalette_Row0DTo0E
	LDY.w #SMB3_PaletteMirror[$D0].LowByte
	LDA.w #SMB3TitleScreenPalette_Row0DTo0EEnd-SMB3TitleScreenPalette_Row0DTo0E-$01
	MVN SMB3_PaletteMirror[$D0].LowByte>>16,SMB3TitleScreenPalette_Row0DTo0E>>16
	LDX.w #RegularMarioPalette
	LDY.w #SMB3_PaletteMirror[$F0].LowByte
	LDA.w #RegularMarioPaletteEnd-RegularMarioPalette-$01
	MVN SMB3_PaletteMirror[$F0].LowByte>>16,RegularMarioPalette>>16
	PLB
	SEP.b #$30
	RTL
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_HandleNormalSpriteGravity(Address)
namespace SMB3_HandleNormalSpriteGravity
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	PHA
	LDY.w $06B7,x
	BEQ.b CODE_27984E
	LDY.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	CPY.b #$02
	BEQ.b CODE_27984E
	ASL
	ROR.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_27984E:
	JSL.l CODE_27A7F0
	PLA
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	JSL.l CODE_27A7E5
	JSL.l CODE_278B9B
	LDY.w $06B7,x
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	BPL.b CODE_279872
	CPY.b #$00
	BEQ.b CODE_279872
	CMP.b #$E8
	BCS.b CODE_279872
	LDA.b #$E8
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	BNE.b CODE_279872
CODE_279872:
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	CLC
	ADC.w DATA_21AFDD,y
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	BMI.b CODE_279886
	CMP.w DATA_21AFDB,y
	BCC.b CODE_279886
	LDA.w DATA_21AFDB,y
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_279886:
	RTL
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_RT00_SMB3_NorSprStatus01_Init(Address)
namespace SMB3_NorSprStatus01_Init
%InsertMacroAtXPosition(<Address>)

Main:
	JSL.l Sub
	RTS

Sub:
	JSL.l CODE_279C97
	INC.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	JSL.l CODE_279BB8
	PHX
	REP.b #$30
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	AND.w #$00FF
	STA.b $00
	ASL
	CLC
	ADC.b $00
	TAX
	SEP.b #$20
	LDA.l NormalSpriteInitPointers,x
	STA.b $00
	LDA.l NormalSpriteInitPointers+$01,x
	STA.b $01
	LDA.l NormalSpriteInitPointers+$02,x
	STA.b $02
	SEP.b #$10
	PLX
	JMP.w [$0000]
namespace off
endmacro

macro ROUTINE_RT01_SMB3_NorSprStatus01_Init(Address)
namespace SMB3_NorSprStatus01_Init
%InsertMacroAtXPosition(<Address>)

NormalSpriteInitPointers:
	dl SMB3_NorSpr000_UnusedSprite_Status01_Main
	dl SMB3_NorSpr001_UnusedSprite_Status01_Main
	dl SMB3_NorSpr002_UnusedSprite_Status01_Main
	dl SMB3_NorSpr003_UnusedSprite_Status01_Main
	dl SMB3_NorSpr004_UnusedStickySprite_Status01_Main
	dl SMB3_NorSpr005_UnusedBouncyEnemy_Status01_Main
	dl SMB3_NorSpr006_VerticalBounceSprite_Status01_Main
	dl SMB3_NorSpr007_SecretToadHouseWarp_Status01_Main
	dl SMB3_NorSpr008_InvisiblePSwitchDoor_Status01_Main
	dl SMB3_NorSpr009_AirshipAnchor_Status01_Main
	dl SMB3_NorSpr00A_UnusedPushableBlock_Status01_Main
	dl SMB3_NorSpr00B_1upMushroom_Status01_Main
	dl SMB3_NorSpr00C_BouncingPowerUps_Status01_Main
	dl SMB3_NorSpr00D_Mushroom_Status01_Main
	dl SMB3_NorSpr00E_KoopaKid_Status01_Main
	dl SMB3_NorSpr00F_UnusedSprite_Status01_Main
	dl SMB3_NorSpr010_UnusedSprite_Status01_Main
	dl SMB3_NorSpr011_UnusedSprite_Status01_Main
	dl SMB3_NorSpr012_UnusedSprite_Status01_Main
	dl SMB3_NorSpr013_UnusedSprite_Status01_Main
	dl SMB3_NorSpr014_UnusedSprite_Status01_Main
	dl SMB3_NorSpr015_UnusedSprite_Status01_Main
	dl SMB3_NorSpr016_UnusedSprite_Status01_Main
	dl SMB3_NorSpr017_SpinyCheepCheep_Status01_Main
	dl SMB3_NorSpr018_Bowser_Status01_Main
	dl SMB3_NorSpr019_FireFlower_Status01_Main
	dl SMB3_NorSpr01A_UnknownSprite_Status01_Main
	dl SMB3_NorSpr01B_HorizontalBounceSprite_Status01_Main
	dl SMB3_NorSpr01C_UnusedStrangeRewardBlock_Status01_Main
	dl SMB3_NorSpr01D_UnusedSprite_Status01_Main
	dl SMB3_NorSpr01E_RaccoonLeaf_Status01_Main
	dl SMB3_NorSpr01F_VineHead_Status01_Main
	dl SMB3_NorSpr020_UnusedSprite_Status01_Main
	dl SMB3_NorSpr021_UnusedMushroomCardItem_Status01_Main
	dl SMB3_NorSpr022_UnusedFlowerCardItem_Status01_Main
	dl SMB3_NorSpr023_UnusedStarCardItem_Status01_Main
	dl SMB3_NorSpr024_FastLeftMovingCloudPlatform_Status01_Main
	dl SMB3_NorSpr025_OverworldPipeLevelController_Status01_Main
	dl SMB3_NorSpr026_RightFlyingWoodPlatform_Status01_Main
	dl SMB3_NorSpr027_FizedHorizontalMovementWoodPlatform_Status01_Main
	dl SMB3_NorSpr028_FizedVerticalMovementWoodPlatform_Status01_Main
	dl SMB3_NorSpr029_Spike_Status01_Main
	dl SMB3_NorSpr02A_Ptooie_Status01_Main
	dl SMB3_NorSpr02B_KuribosShoe_Status01_Main
	dl SMB3_NorSpr02C_SlowLeftMovingCloudPlatform_Status01_Main
	dl SMB3_NorSpr02D_BossBass_Status01_Main
	dl SMB3_NorSpr02E_ElevatorPlatform_Status01_Main
	dl SMB3_NorSpr02F_Boo_Status01_Main
	dl SMB3_NorSpr030_FollowingHotFoot_Status01_Main
	dl SMB3_NorSpr031_RightsideUpStretch_Status01_Main
	dl SMB3_NorSpr032_UpsideDownStretch_Status01_Main
	dl SMB3_NorSpr033_NipperPlant_Status01_Main
	dl SMB3_NorSpr034_ToadHouseToad_Status01_Main
	dl SMB3_NorSpr035_ToadHouseChestItem_Status01_Main
	dl SMB3_NorSpr036_LeftFlyingWoodPlatformThatFalls_Status01_Main
	dl SMB3_NorSpr037_FizedHorizontalMovementWoodPlatform_Status01_Main
	dl SMB3_NorSpr038_FizedVerticalMovementWoodPlatform_Status01_Main
	dl SMB3_NorSpr039_HoppingNipperPlant_Status01_Main
	dl SMB3_NorSpr03A_LineGuidedDonutPlatform_Status01_Main
	dl SMB3_NorSpr03B_FollowingCheepCheep_Status01_Main
	dl SMB3_NorSpr03C_LineGuidedWoodPlatform_Status01_Main
	dl SMB3_NorSpr03D_FireBreathingNipper_Status01_Main
	dl SMB3_NorSpr03E_BuoyantPlatform_Status01_Main
	dl SMB3_NorSpr03F_DryBones_Status01_Main
	dl SMB3_NorSpr040_BusterBeetle_Status01_Main
	dl SMB3_NorSpr041_EndOfLevelCard_Status01_Main
	dl SMB3_NorSpr042_3SpotHoppingRedCheepCheep_Status01_Main
	dl SMB3_NorSpr043_2SpotHoppingRedCheepCheep_Status01_Main
	dl SMB3_NorSpr044_FallingWoodPlatform_Status01_Main
	dl SMB3_NorSpr045_WanderingHotFoot_Status01_Main
	dl SMB3_NorSpr046_BlowingPiranhaPlant_Status01_Main
	dl SMB3_NorSpr047_GiantBlockHandler_Status01_Main
	dl SMB3_NorSpr048_MiniBossBass_Status01_Main
	dl SMB3_NorSpr049_BGCloud_Status01_Main
	dl SMB3_NorSpr04A_GoalSphere_Status01_Main
	dl SMB3_NorSpr04B_BoomBoom_Status01_Main
	dl SMB3_NorSpr04C_FlyingBoomBoom_Status01_Main
	dl SMB3_NorSpr04D_UnusedSprite_Status01_Main
	dl SMB3_NorSpr04E_UnusedSprite_Status01_Main
	dl SMB3_NorSpr04F_FreeChainChomp_Status01_Main
	dl SMB3_NorSpr050_BobOmb_Status01_Main
	dl SMB3_NorSpr051_DoubleCounterclockwiseRotoDisc_Status01_Main
	dl SMB3_NorSpr052_MiniChest_Status01_Main
	dl SMB3_NorSpr053_UpsideDownPodoboo_Status01_Main
	dl SMB3_NorSpr054_DonutBlock_Status01_Main
	dl SMB3_NorSpr055_WindupBobOmb_Status01_Main
	dl SMB3_NorSpr056_LeftFacingSidewaysPiranhaPlant_Status01_Main
	dl SMB3_NorSpr057_RightFacingSidewaysPiranhaPlant_Status01_Main
	dl SMB3_NorSpr058_FireChomp_Status01_Main
	dl SMB3_NorSpr059_FireSnake_Status01_Main
	dl SMB3_NorSpr05A_SingleClockwiseRotoDisc_Status01_Main
	dl SMB3_NorSpr05B_SingleCounterclockwiseRotoDisc_Status01_Main
	dl SMB3_NorSpr05C_ThrowBlock_Status01_Main
	dl SMB3_NorSpr05D_Whirlwind_Status01_Main
	dl SMB3_NorSpr05E_DoubleHorizontalCrossingRotoDisc_Status01_Main
	dl SMB3_NorSpr05F_DoubleVerticalCrossingRotoDisc_Status01_Main
	dl SMB3_NorSpr060_DoubleClockwiseRotoDisc_Status01_Main
	dl SMB3_NorSpr061_FollowingBlooperNanny_Status01_Main
	dl SMB3_NorSpr062_Blooper_Status01_Main
	dl SMB3_NorSpr063_BigBertha_Status01_Main
	dl SMB3_NorSpr064_WaterHoppingRedCheepCheep_Status01_Main
	dl SMB3_NorSpr065_UpwardsAirCurrent_Status01_Main
	dl SMB3_NorSpr066_DownwardsAirCurrent_Status01_Main
	dl SMB3_NorSpr067_LavaLotus_Status01_Main
	dl SMB3_NorSpr068_UpsideDownBuzzyBeetle_Status01_Main
	dl SMB3_NorSpr069_UpsideDownSpiny_Status01_Main
	dl SMB3_NorSpr06A_LaunchingBlooperNanny_Status01_Main
	dl SMB3_NorSpr06B_JumpingFakeBrick_Status01_Main
	dl SMB3_NorSpr06C_GreenKoopa_Status01_Main
	dl SMB3_NorSpr06D_RedKoopa_Status01_Main
	dl SMB3_NorSpr06E_BouncingGreenParakoopa_Status01_Main
	dl SMB3_NorSpr06F_VerticalRedParaKoopa_Status01_Main
	dl SMB3_NorSpr070_BuzzyBeetle_Status01_Main
	dl SMB3_NorSpr071_Spiny_Status01_Main
	dl SMB3_NorSpr072_Goomba_Status01_Main
	dl SMB3_NorSpr073_HoppingRedGoomba_Status01_Main
	dl SMB3_NorSpr074_Paragoomba_Status01_Main
	dl SMB3_NorSpr075_BossProjectile_Status01_Main
	dl SMB3_NorSpr076_FlyingRedCheepCheep_Status01_Main
	dl SMB3_NorSpr077_GreenCheepCheep_Status01_Main
	dl SMB3_NorSpr078_BulletBill_Status01_Main
	dl SMB3_NorSpr079_HomingBill_Status01_Main
	dl SMB3_NorSpr07A_GiantGreenKoopa_Status01_Main
	dl SMB3_NorSpr07B_GiantRedKoopa_Status01_Main
	dl SMB3_NorSpr07C_GiantGoomba_Status01_Main
	dl SMB3_NorSpr07D_GiantPiranhaPlantInSmallPipe_Status01_Main
	dl SMB3_NorSpr07E_BouncingGiantGreenParakoopa_Status01_Main
	dl SMB3_NorSpr07F_GiantPiranhaPlantInGiantPipe_Status01_Main
	dl SMB3_NorSpr080_HorizontalGreenParakoopa_Status01_Main
	dl SMB3_NorSpr081_HammerBro_Status01_Main
	dl SMB3_NorSpr082_BoomerangBro_Status01_Main
	dl SMB3_NorSpr083_Lakitu_Status01_Main
	dl SMB3_NorSpr084_RedSpinyEgg_Status01_Main
	dl SMB3_NorSpr085_GreenSpinyEgg_Status01_Main
	dl SMB3_NorSpr086_SledgeBro_Status01_Main
	dl SMB3_NorSpr087_FireBro_Status01_Main
	dl SMB3_NorSpr088_YellowWavyCheepCheep_Status01_Main
	dl SMB3_NorSpr089_ChainChomp_Status01_Main
	dl SMB3_NorSpr08A_NormalThwomp_Status01_Main
	dl SMB3_NorSpr08B_LeftMovingThwomp_Status01_Main
	dl SMB3_NorSpr08C_RightMovingThwomp_Status01_Main
	dl SMB3_NorSpr08D_FixedVerticalMovementThwomp_Status01_Main
	dl SMB3_NorSpr08E_FixedDiagonalTLToBRMovementThwomp_Status01_Main
	dl SMB3_NorSpr08F_FixedDiagonalTRToBLMovementThwomp_Status01_Main
	dl SMB3_NorSpr090_WeightedPeaPlatform_Status01_Main
	dl SMB3_NorSpr091_AutoRotatingPeaPlatform_Status01_Main
	dl SMB3_NorSpr092_ClockwiseRotatingPeaPlatform_Status01_Main
	dl SMB3_NorSpr093_CounterclockwiseRotatingPeaPlatform_Status01_Main
	dl SMB3_NorSpr094_GiantQuestionMarkBlockWithThree1ups_Status01_Main
	dl SMB3_NorSpr095_GiantQuestionMarkBlockWithMushroom_Status01_Main
	dl SMB3_NorSpr096_GiantQuestionMarkBlockWithFireFlower_Status01_Main
	dl SMB3_NorSpr097_GiantQuestionMarkBlockWithRaccoonLeaf_Status01_Main
	dl SMB3_NorSpr098_GiantQuestionMarkBlockWithTanookiSuit_Status01_Main
	dl SMB3_NorSpr099_GiantQuestionMarkBlockWithFrogSuit_Status01_Main
	dl SMB3_NorSpr09A_GiantQuestionMarkBlockWithHammerSuit_Status01_Main
	dl SMB3_NorSpr09B_UnusedSprite_Status01_Main
	dl SMB3_NorSpr09C_UnusedSprite_Status01_Main
	dl SMB3_NorSpr09D_UpwardFacingFireJet_Status01_Main
	dl SMB3_NorSpr09E_Podoboo_Status01_Main
	dl SMB3_NorSpr09F_Parabuzzy_Status01_Main
	dl SMB3_NorSpr0A0_GreenClassicPiranhaPlant_Status01_Main
	dl SMB3_NorSpr0A1_UpsideDownRedClassicPiranhaPlant_Status01_Main
	dl SMB3_NorSpr0A2_RedClassicPiranhaPlant_Status01_Main
	dl SMB3_NorSpr0A3_UpsideDownRedClassicPiranhaPlant_Status01_Main
	dl SMB3_NorSpr0A4_GreenVenusFireTrap_Status01_Main
	dl SMB3_NorSpr0A5_UpsideDownRedVenusFireTrap_Status01_Main
	dl SMB3_NorSpr0A6_RedVenusFireTrap_Status01_Main
	dl SMB3_NorSpr0A7_UpsideDownRedVenusFireTrap_Status01_Main
	dl SMB3_NorSpr0A8_StaticOutlinePlatform_Status01_Main
	dl SMB3_NorSpr0A9_SwitchableOutlinePlatform_Status01_Main
	dl SMB3_NorSpr0AA_AirshipPropeller_Status01_Main
	dl SMB3_NorSpr0AB_UnusedSprite_Status01_Main
	dl SMB3_NorSpr0AC_LeftwardFacingFireJet_Status01_Main
	dl SMB3_NorSpr0AD_RockyWrench_Status01_Main
	dl SMB3_NorSpr0AE_MetalLugnut_Status01_Main
	dl SMB3_NorSpr0AF_AngrySun_Status01_Main
	dl SMB3_NorSpr0B0_BigCannonBall_Status01_Main
	dl SMB3_NorSpr0B1_RightwardFacingFireJet_Status01_Main
	dl SMB3_NorSpr0B2_DownwardFacingFireJet_Status01_Main
	dl SMB3_NorSpr0B3_UnusedSprite_Status01_Main
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_RT00_SMB3_NorSprStatus02_Normal(Address)
namespace SMB3_NorSprStatus02_Normal
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.b $9C
	BEQ.b CODE_279D40
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_NorSpr02E_ElevatorPlatform
	BNE.b CODE_279D24
	LDA.b $68,x
	BEQ.b CODE_279D2C
CODE_279D24:
	CMP.b #!Define_SMB3_SpriteID_NorSpr02F_Boo
	BEQ.b CODE_279D2C
	JSL.l CODE_279D6F
CODE_279D2C:
	LDY.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	LDA.w DATA_21B1AF,y
	AND.b #$0F
	CMP.b #$05
	BEQ.b CODE_279D40
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	CMP.b #$02
	BEQ.b CODE_279D40
	RTS

CODE_279D40:
	JSL.l CODE_279D45
	RTS

CODE_279D45:
	PHX
	REP.b #$30
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	AND.w #$00FF
	STA.b $00
	ASL
	CLC
	ADC.b $00
	TAX
	SEP.b #$20
	LDA.l NormalSpriteMainPointers,x
	STA.b $00
	LDA.l NormalSpriteMainPointers+$01,x
	STA.b $01
	LDA.l NormalSpriteMainPointers+$02,x
	STA.b $02
	SEP.b #$10
	PLX
	JMP.w [$0000]
namespace off
endmacro

macro ROUTINE_RT01_SMB3_NorSprStatus02_Normal(Address)
namespace SMB3_NorSprStatus02_Normal
%InsertMacroAtXPosition(<Address>)

NormalSpriteMainPointers:
;$28821C					; Info: Sprite ID...
	dl SMB3_NorSpr000_UnusedSprite_Status02_Main
	dl SMB3_NorSpr001_UnusedSprite_Status02_Main
	dl SMB3_NorSpr002_UnusedSprite_Status02_Main
	dl SMB3_NorSpr003_UnusedSprite_Status02_Main
	dl SMB3_NorSpr004_UnusedStickySprite_Status02_Main
	dl SMB3_NorSpr005_UnusedBouncyEnemy_Status02_Main
	dl SMB3_NorSpr006_VerticalBounceSprite_Status02_Main
	dl SMB3_NorSpr007_SecretToadHouseWarp_Status02_Main
	dl SMB3_NorSpr008_InvisiblePSwitchDoor_Status02_Main
	dl SMB3_NorSpr009_AirshipAnchor_Status02_Main
	dl SMB3_NorSpr00A_UnusedPushableBlock_Status02_Main
	dl SMB3_NorSpr00B_1upMushroom_Status02_Main
	dl SMB3_NorSpr00C_BouncingPowerUps_Status02_Main
	dl SMB3_NorSpr00D_Mushroom_Status02_Main
	dl SMB3_NorSpr00E_KoopaKid_Status02_Main
	dl SMB3_NorSpr00F_UnusedSprite_Status02_Main
	dl SMB3_NorSpr010_UnusedSprite_Status02_Main
	dl SMB3_NorSpr011_UnusedSprite_Status02_Main
	dl SMB3_NorSpr012_UnusedSprite_Status02_Main
	dl SMB3_NorSpr013_UnusedSprite_Status02_Main
	dl SMB3_NorSpr014_UnusedSprite_Status02_Main
	dl SMB3_NorSpr015_UnusedSprite_Status02_Main
	dl SMB3_NorSpr016_UnusedSprite_Status02_Main
	dl SMB3_NorSpr017_SpinyCheepCheep_Status02_Main
	dl SMB3_NorSpr018_Bowser_Status02_Main
	dl SMB3_NorSpr019_FireFlower_Status02_Main
	dl SMB3_NorSpr01A_UnknownSprite_Status02_Main
	dl SMB3_NorSpr01B_HorizontalBounceSprite_Status02_Main
	dl SMB3_NorSpr01C_UnusedStrangeRewardBlock_Status02_Main
	dl SMB3_NorSpr01D_UnusedSprite_Status02_Main
	dl SMB3_NorSpr01E_RaccoonLeaf_Status02_Main
	dl SMB3_NorSpr01F_VineHead_Status02_Main
	dl SMB3_NorSpr020_UnusedSprite_Status02_Main
	dl SMB3_NorSpr021_UnusedMushroomCardItem_Status02_Main
	dl SMB3_NorSpr022_UnusedFlowerCardItem_Status02_Main
	dl SMB3_NorSpr023_UnusedStarCardItem_Status02_Main
	dl SMB3_NorSpr024_FastLeftMovingCloudPlatform_Status02_Main
	dl SMB3_NorSpr025_OverworldPipeLevelController_Status02_Main
	dl SMB3_NorSpr026_RightFlyingWoodPlatform_Status02_Main
	dl SMB3_NorSpr027_FizedHorizontalMovementWoodPlatform_Status02_Main
	dl SMB3_NorSpr028_FizedVerticalMovementWoodPlatform_Status02_Main
	dl SMB3_NorSpr029_Spike_Status02_Main
	dl SMB3_NorSpr02A_Ptooie_Status02_Main
	dl SMB3_NorSpr02B_KuribosShoe_Status02_Main
	dl SMB3_NorSpr02C_SlowLeftMovingCloudPlatform_Status02_Main
	dl SMB3_NorSpr02D_BossBass_Status02_Main
	dl SMB3_NorSpr02E_ElevatorPlatform_Status02_Main
	dl SMB3_NorSpr02F_Boo_Status02_Main
	dl SMB3_NorSpr030_FollowingHotFoot_Status02_Main
	dl SMB3_NorSpr031_RightsideUpStretch_Status02_Main
	dl SMB3_NorSpr032_UpsideDownStretch_Status02_Main
	dl SMB3_NorSpr033_NipperPlant_Status02_Main
	dl SMB3_NorSpr034_ToadHouseToad_Status02_Main
	dl SMB3_NorSpr035_ToadHouseChestItem_Status02_Main
	dl SMB3_NorSpr036_LeftFlyingWoodPlatformThatFalls_Status02_Main
	dl SMB3_NorSpr037_FizedHorizontalMovementWoodPlatform_Status02_Main
	dl SMB3_NorSpr038_FizedVerticalMovementWoodPlatform_Status02_Main
	dl SMB3_NorSpr039_HoppingNipperPlant_Status02_Main
	dl SMB3_NorSpr03A_LineGuidedDonutPlatform_Status02_Main
	dl SMB3_NorSpr03B_FollowingCheepCheep_Status02_Main
	dl SMB3_NorSpr03C_LineGuidedWoodPlatform_Status02_Main
	dl SMB3_NorSpr03D_FireBreathingNipper_Status02_Main
	dl SMB3_NorSpr03E_BuoyantPlatform_Status02_Main
	dl SMB3_NorSpr03F_DryBones_Status02_Main
	dl SMB3_NorSpr040_BusterBeetle_Status02_Main
	dl SMB3_NorSpr041_EndOfLevelCard_Status02_Main
	dl SMB3_NorSpr042_3SpotHoppingRedCheepCheep_Status02_Main
	dl SMB3_NorSpr043_2SpotHoppingRedCheepCheep_Status02_Main
	dl SMB3_NorSpr044_FallingWoodPlatform_Status02_Main
	dl SMB3_NorSpr045_WanderingHotFoot_Status02_Main
	dl SMB3_NorSpr046_BlowingPiranhaPlant_Status02_Main
	dl SMB3_NorSpr047_GiantBlockHandler_Status02_Main
	dl SMB3_NorSpr048_MiniBossBass_Status02_Main
	dl SMB3_NorSpr049_BGCloud_Status02_Main
	dl SMB3_NorSpr04A_GoalSphere_Status02_Main
	dl SMB3_NorSpr04B_BoomBoom_Status02_Main
	dl SMB3_NorSpr04C_FlyingBoomBoom_Status02_Main
	dl SMB3_NorSpr04D_UnusedSprite_Status02_Main
	dl SMB3_NorSpr04E_UnusedSprite_Status02_Main
	dl SMB3_NorSpr04F_FreeChainChomp_Status02_Main
	dl SMB3_NorSpr050_BobOmb_Status02_Main
	dl SMB3_NorSpr051_DoubleCounterclockwiseRotoDisc_Status02_Main
	dl SMB3_NorSpr052_MiniChest_Status02_Main
	dl SMB3_NorSpr053_UpsideDownPodoboo_Status02_Main
	dl SMB3_NorSpr054_DonutBlock_Status02_Main
	dl SMB3_NorSpr055_WindupBobOmb_Status02_Main
	dl SMB3_NorSpr056_LeftFacingSidewaysPiranhaPlant_Status02_Main
	dl SMB3_NorSpr057_RightFacingSidewaysPiranhaPlant_Status02_Main
	dl SMB3_NorSpr058_FireChomp_Status02_Main
	dl SMB3_NorSpr059_FireSnake_Status02_Main
	dl SMB3_NorSpr05A_SingleClockwiseRotoDisc_Status02_Main
	dl SMB3_NorSpr05B_SingleCounterclockwiseRotoDisc_Status02_Main
	dl SMB3_NorSpr05C_ThrowBlock_Status02_Main
	dl SMB3_NorSpr05D_Whirlwind_Status02_Main
	dl SMB3_NorSpr05E_DoubleHorizontalCrossingRotoDisc_Status02_Main
	dl SMB3_NorSpr05F_DoubleVerticalCrossingRotoDisc_Status02_Main
	dl SMB3_NorSpr060_DoubleClockwiseRotoDisc_Status02_Main
	dl SMB3_NorSpr061_FollowingBlooperNanny_Status02_Main
	dl SMB3_NorSpr062_Blooper_Status02_Main
	dl SMB3_NorSpr063_BigBertha_Status02_Main
	dl SMB3_NorSpr064_WaterHoppingRedCheepCheep_Status02_Main
	dl SMB3_NorSpr065_UpwardsAirCurrent_Status02_Main
	dl SMB3_NorSpr066_DownwardsAirCurrent_Status02_Main
	dl SMB3_NorSpr067_LavaLotus_Status02_Main
	dl SMB3_NorSpr068_UpsideDownBuzzyBeetle_Status02_Main
	dl SMB3_NorSpr069_UpsideDownSpiny_Status02_Main
	dl SMB3_NorSpr06A_LaunchingBlooperNanny_Status02_Main
	dl SMB3_NorSpr06B_JumpingFakeBrick_Status02_Main
	dl SMB3_NorSpr06C_GreenKoopa_Status02_Main
	dl SMB3_NorSpr06D_RedKoopa_Status02_Main
	dl SMB3_NorSpr06E_BouncingGreenParakoopa_Status02_Main
	dl SMB3_NorSpr06F_VerticalRedParaKoopa_Status02_Main
	dl SMB3_NorSpr070_BuzzyBeetle_Status02_Main
	dl SMB3_NorSpr071_Spiny_Status02_Main
	dl SMB3_NorSpr072_Goomba_Status02_Main
	dl SMB3_NorSpr073_HoppingRedGoomba_Status02_Main
	dl SMB3_NorSpr074_Paragoomba_Status02_Main
	dl SMB3_NorSpr075_BossProjectile_Status02_Main
	dl SMB3_NorSpr076_FlyingRedCheepCheep_Status02_Main
	dl SMB3_NorSpr077_GreenCheepCheep_Status02_Main
	dl SMB3_NorSpr078_BulletBill_Status02_Main
	dl SMB3_NorSpr079_HomingBill_Status02_Main
	dl SMB3_NorSpr07A_GiantGreenKoopa_Status02_Main
	dl SMB3_NorSpr07B_GiantRedKoopa_Status02_Main
	dl SMB3_NorSpr07C_GiantGoomba_Status02_Main
	dl SMB3_NorSpr07D_GiantPiranhaPlantInSmallPipe_Status02_Main
	dl SMB3_NorSpr07E_BouncingGiantGreenParakoopa_Status02_Main
	dl SMB3_NorSpr07F_GiantPiranhaPlantInGiantPipe_Status02_Main
	dl SMB3_NorSpr080_HorizontalGreenParakoopa_Status02_Main
	dl SMB3_NorSpr081_HammerBro_Status02_Main
	dl SMB3_NorSpr082_BoomerangBro_Status02_Main
	dl SMB3_NorSpr083_Lakitu_Status02_Main
	dl SMB3_NorSpr084_RedSpinyEgg_Status02_Main
	dl SMB3_NorSpr085_GreenSpinyEgg_Status02_Main
	dl SMB3_NorSpr086_SledgeBro_Status02_Main
	dl SMB3_NorSpr087_FireBro_Status02_Main
	dl SMB3_NorSpr088_YellowWavyCheepCheep_Status02_Main
	dl SMB3_NorSpr089_ChainChomp_Status02_Main
	dl SMB3_NorSpr08A_NormalThwomp_Status02_Main
	dl SMB3_NorSpr08B_LeftMovingThwomp_Status02_Main
	dl SMB3_NorSpr08C_RightMovingThwomp_Status02_Main
	dl SMB3_NorSpr08D_FixedVerticalMovementThwomp_Status02_Main
	dl SMB3_NorSpr08E_FixedDiagonalTLToBRMovementThwomp_Status02_Main
	dl SMB3_NorSpr08F_FixedDiagonalTRToBLMovementThwomp_Status02_Main
	dl SMB3_NorSpr090_WeightedPeaPlatform_Status02_Main
	dl SMB3_NorSpr091_AutoRotatingPeaPlatform_Status02_Main
	dl SMB3_NorSpr092_ClockwiseRotatingPeaPlatform_Status02_Main
	dl SMB3_NorSpr093_CounterclockwiseRotatingPeaPlatform_Status02_Main
	dl SMB3_NorSpr094_GiantQuestionMarkBlockWithThree1ups_Status02_Main
	dl SMB3_NorSpr095_GiantQuestionMarkBlockWithMushroom_Status02_Main
	dl SMB3_NorSpr096_GiantQuestionMarkBlockWithFireFlower_Status02_Main
	dl SMB3_NorSpr097_GiantQuestionMarkBlockWithRaccoonLeaf_Status02_Main
	dl SMB3_NorSpr098_GiantQuestionMarkBlockWithTanookiSuit_Status02_Main
	dl SMB3_NorSpr099_GiantQuestionMarkBlockWithFrogSuit_Status02_Main
	dl SMB3_NorSpr09A_GiantQuestionMarkBlockWithHammerSuit_Status02_Main
	dl SMB3_NorSpr09B_UnusedSprite_Status02_Main
	dl SMB3_NorSpr09C_UnusedSprite_Status02_Main
	dl SMB3_NorSpr09D_UpwardFacingFireJet_Status02_Main
	dl SMB3_NorSpr09E_Podoboo_Status02_Main
	dl SMB3_NorSpr09F_Parabuzzy_Status02_Main
	dl SMB3_NorSpr0A0_GreenClassicPiranhaPlant_Status02_Main
	dl SMB3_NorSpr0A1_UpsideDownRedClassicPiranhaPlant_Status02_Main
	dl SMB3_NorSpr0A2_RedClassicPiranhaPlant_Status02_Main
	dl SMB3_NorSpr0A3_UpsideDownRedClassicPiranhaPlant_Status02_Main
	dl SMB3_NorSpr0A4_GreenVenusFireTrap_Status02_Main
	dl SMB3_NorSpr0A5_UpsideDownRedVenusFireTrap_Status02_Main
	dl SMB3_NorSpr0A6_RedVenusFireTrap_Status02_Main
	dl SMB3_NorSpr0A7_UpsideDownRedVenusFireTrap_Status02_Main
	dl SMB3_NorSpr0A8_StaticOutlinePlatform_Status02_Main
	dl SMB3_NorSpr0A9_SwitchableOutlinePlatform_Status02_Main
	dl SMB3_NorSpr0AA_AirshipPropeller_Status02_Main
	dl SMB3_NorSpr0AB_UnusedSprite_Status02_Main
	dl SMB3_NorSpr0AC_LeftwardFacingFireJet_Status02_Main
	dl SMB3_NorSpr0AD_RockyWrench_Status02_Main
	dl SMB3_NorSpr0AE_MetalLugnut_Status02_Main
	dl SMB3_NorSpr0AF_AngrySun_Status02_Main
	dl SMB3_NorSpr0B0_BigCannonBall_Status02_Main
	dl SMB3_NorSpr0B1_RightwardFacingFireJet_Status02_Main
	dl SMB3_NorSpr0B2_DownwardFacingFireJet_Status02_Main
	dl SMB3_NorSpr0B3_UnusedSprite_Status02_Main
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_LoadLevelRoutine(Address)
namespace SMB3_LoadLevelRoutine
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.w !RAM_SMB3_Global_TilesetFromHeader
	JSL.l SMB3_ExecutePtr_Long

DATA_209BCC:
	dl SMB3_InitializeTileset00Level_Overworld_Main
	dl SMB3_InitializeTileset01Level_ConstructedPlain_Main
	dl SMB3_InitializeTileset02Level_FortressAndCastle_Main
	dl SMB3_InitializeTileset03Level_GrassyPlain_Main
	dl SMB3_InitializeTileset04Level_SkyPlain_Main
	dl SMB3_InitializeTileset05Level_Pipe_Main
	dl SMB3_InitializeTileset06Level_UnderwaterAndSnowyPlain_Main
	dl SMB3_InitializeTileset07Level_ToadHouse_Main
	dl SMB3_InitializeTileset08Level_PyramidAndPrison_Main
	dl SMB3_InitializeTileset09Level_Desert_Main
	dl SMB3_InitializeTileset0ALevel_AirshipAndTank_Main
	dl SMB3_InitializeTileset0BLevel_Giant_Main
	dl SMB3_InitializeTileset0CLevel_SnowySkyPlain_Main
	dl SMB3_InitializeTileset0DLevel_Cloud_Main
	dl SMB3_InitializeTileset0ELevel_UndergroundAndBonusRoom_Main
	dl SMB3_InitializeTileset0FLevel_SpadeLevel_Main
	dl SMB3_InitializeTileset10Level_Unknown_Main
	dl SMB3_InitializeTileset11Level_SlidingPictureMinigame_Main
	dl SMB3_InitializeTileset12Level_BattleMode_Main
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_InitializeTileset00Level_Overworld(Address)
namespace SMB3_InitializeTileset00Level_Overworld
%InsertMacroAtXPosition(<Address>)

Main:
	JSR.w CODE_29BE10
	JSL.l SMB3_LoadLevelDataAndHeader_Main
	RTS

namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_InitializeTileset01Level_ConstructedPlain(Address)
namespace SMB3_InitializeTileset01Level_ConstructedPlain
%InsertMacroAtXPosition(<Address>)

Main:
	LDX.b #$00
-:
	LDA.b #$80
	JSL.l CODE_20986D
	JSL.l CODE_209809
	CPX.b #$F0
	BNE.b -
	JSL.l SMB3_LoadLevelDataAndHeader_Main
	RTL
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_InitializeTileset02Level_FortressAndCastle(Address)
namespace SMB3_InitializeTileset02Level_FortressAndCastle
%InsertMacroAtXPosition(<Address>)

Main:
	LDX.b #$00
-:
	LDA.b #$02
	JSL.l CODE_20986D
	LDA.b #$E5
	JSL.l CODE_209809
	CPX.b #$10
	BNE.b -
-:
	LDA.b #$02
	JSL.l CODE_20986D
	LDA.b #$02
	JSL.l CODE_209809
	CPX.b #$20
	BNE.b -
-:
	LDA.b #$02
	JSL.l CODE_20986D
	JSL.l CODE_209809
	CPX.b #$D0
	BNE.b -
-:
	LDA.b #$14
	JSL.l CODE_20986D
	INX
	LDA.b #$15
	JSL.l CODE_20986D
	INX
	CPX.b #$E0
	BNE.b -
-:
	LDA.b #$16
	JSL.l CODE_20986D
	INX
	LDA.b #$17
	JSL.l CODE_20986D
	INX
	CPX.b #$F0
	BNE.b -
	JSL.l SMB3_LoadLevelDataAndHeader_Main
	RTL
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_InitializeTilesetXXLevel_GrassyPlainUndergroundOrBonus(Address)
namespace SMB3_InitializeTilesetXXLevel_GrassyPlainUndergroundOrBonus
%InsertMacroAtXPosition(<Address>)

Main:
	LDX.b #$00
-:
	LDA.b #$02
	JSL.l CODE_20986D
	JSL.l CODE_209809
	CPX.b #$10
	BNE.b -
-:
	LDA.b #$02
	JSL.l CODE_20986D
	JSL.l CODE_209809
	CPX.b #$F0
	BNE.b -
	JSL.l SMB3_LoadLevelDataAndHeader_Main
	RTL


namespace off
	%SetDuplicateOrNullPointer(SMB3_InitializeTilesetXXLevel_GrassyPlainUndergroundOrBonus_Main, SMB3_InitializeTileset03Level_GrassyPlain_Main)
	%SetDuplicateOrNullPointer(SMB3_InitializeTilesetXXLevel_GrassyPlainUndergroundOrBonus_Main, SMB3_InitializeTileset0ELevel_UndergroundAndBonusRoom_Main)
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_InitializeTilesetXXLevel_SkyPlains(Address)
namespace SMB3_InitializeTilesetXXLevel_SkyPlains
%InsertMacroAtXPosition(<Address>)

Main:
	LDX.b #$00
-:
	LDA.b #$80
	JSL.l CODE_20986D
	LDA.b #$86
	JSL.l CODE_209809
	CPX.b #$10
	BNE.b -
-:
	LDA.b #$80
	JSL.l CODE_20986D
	JSL.l CODE_209809
	CPX.b #$F0
	BNE.b -
	JSL.l SMB3_LoadLevelDataAndHeader_Main
	RTL
namespace off
	%SetDuplicateOrNullPointer(SMB3_InitializeTilesetXXLevel_SkyPlains_Main, SMB3_InitializeTileset04Level_SkyPlain_Main)
	%SetDuplicateOrNullPointer(SMB3_InitializeTilesetXXLevel_SkyPlains_Main, SMB3_InitializeTileset0CLevel_SnowySkyPlain_Main)
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_InitializeTilesetXXLevel_PipeOrGiant(Address)
namespace SMB3_InitializeTilesetXXLevel_PipeOrGiant
%InsertMacroAtXPosition(<Address>)

Main:
	LDX.b #$00
-:
	LDA.b #$80
	JSL.l CODE_20986D
	JSL.l CODE_209809
	CPX.b #$F0
	BNE.b -
	JSL.l SMB3_LoadLevelDataAndHeader_Main
	RTL
namespace off
	%SetDuplicateOrNullPointer(SMB3_InitializeTilesetXXLevel_PipeOrGiant_Main, SMB3_InitializeTileset05Level_Pipe_Main)
	%SetDuplicateOrNullPointer(SMB3_InitializeTilesetXXLevel_PipeOrGiant_Main, SMB3_InitializeTileset0BLevel_Giant_Main)
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_InitializeTileset06Level_UnderwaterAndSnowyPlain(Address)
namespace SMB3_InitializeTileset06Level_UnderwaterAndSnowyPlain
%InsertMacroAtXPosition(<Address>)

Main:
	LDX.b #$00
-:
	LDA.b #$8A
	JSL.l CODE_20986D
	JSL.l CODE_209809
	CPX.b #$F0
	BNE.b -
	JSL.l SMB3_LoadLevelDataAndHeader_Main
	RTL
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_InitializeTileset07Level_ToadHouse(Address)
namespace SMB3_InitializeTileset07Level_ToadHouse
%InsertMacroAtXPosition(<Address>)

Main:
	LDX.b #$00
-:
	LDA.b #$42
	JSL.l CODE_209809
	CPX.b #$F0
	BNE.b -
	LDX.b #$30
-:
	LDA.b #$48
	JSL.l CODE_20986D
	INX
	CPX.b #$E0
	BNE.b -
-:
	LDA.b #$0A
	JSL.l CODE_20986D
	INX
	LDA.b #$0B
	JSL.l CODE_20986D
	INX
	CPX.b #$F0
	BNE.b -
	JSL.l SMB3_LoadLevelDataAndHeader_Main
	RTL
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_InitializeTileset08Level_PyramidAndPrison(Address)
namespace SMB3_InitializeTileset08Level_PyramidAndPrison
%InsertMacroAtXPosition(<Address>)

Main:
	LDX.b #$00
	PHY						; Optimization: Y isn't holding an important value here. There is no need to preserve it.
-:
	LDA.b #$8D
	JSR.w CODE_2588AD
	CPX.b #$F0
	BNE.b -
	PLY
	JSL.l SMB3_LoadLevelDataAndHeader_Main
	RTL
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_InitializeTileset09Level_Desert(Address)
namespace SMB3_InitializeTileset09Level_Desert
%InsertMacroAtXPosition(<Address>)

Main:
	LDX.b #$00
-:
	LDA.b #$80
	JSL.l CODE_20986D
	JSL.l CODE_209809
	CPX.b #$E0
	BNE.b -
-:
	LDA.b #$56
	JSL.l CODE_20986D
	INX
	CPX.b #$F0
	BNE.b -
	JSL.l SMB3_LoadLevelDataAndHeader_Main
	RTL
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_InitializeTileset0ALevel_AirshipAndTank(Address)
namespace SMB3_InitializeTileset0ALevel_AirshipAndTank
%InsertMacroAtXPosition(<Address>)

Main:
	LDX.b #$00
-:
	LDA.b #$06
	JSL.l CODE_20986D
	JSL.l CODE_209809
	CPX.b #$F0
	BNE.b -
	JSL.l SMB3_LoadLevelDataAndHeader_Main
	RTL
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_InitializeTileset0DLevel_Cloud(Address)
namespace SMB3_InitializeTileset0DLevel_Cloud
%InsertMacroAtXPosition(<Address>)

Main:
	LDX.b #$00
-:
	LDA.b #$12
	JSL.l CODE_20986D
	JSL.l CODE_209809
	CPX.b #$F0
	BNE.b -
	JSL.l SMB3_LoadLevelDataAndHeader_Main
	RTL
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_InitializeTilesetXXLevel_Minigame(Address)
namespace SMB3_InitializeTilesetXXLevel_Minigame
%InsertMacroAtXPosition(<Address>)

Main:
	LDX.b #$00
-:
	LDA.b #$09
	JSL.l CODE_20986D
	JSL.l CODE_209809
	CPX.b #$40
	BNE.b -
-:
	LDA.b #$40
	JSL.l CODE_20986D
	LDA.b #$09
	JSL.l CODE_209809
	CPX.b #$F0
	BNE.b -
	JSL.l SMB3_LoadLevelDataAndHeader_Main
	RTL
namespace off
	%SetDuplicateOrNullPointer(SMB3_InitializeTilesetXXLevel_Minigame_Main, SMB3_InitializeTileset0FLevel_SpadeLevel_Main)
	%SetDuplicateOrNullPointer(SMB3_InitializeTilesetXXLevel_Minigame_Main, SMB3_InitializeTileset10Level_Unknown_Main)
	%SetDuplicateOrNullPointer(SMB3_InitializeTilesetXXLevel_Minigame_Main, SMB3_InitializeTileset11Level_SlidingPictureMinigame_Main)
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_InitializeTileset12Level_BattleMode(Address)
namespace SMB3_InitializeTileset12Level_BattleMode
%InsertMacroAtXPosition(<Address>)

Main:
	LDX.b #$00
-:
	LDA.b #$02
	JSL.l CODE_20986D
	JSL.l CODE_209809
	CPX.b #$F0
	BNE.b -
	LDX.b #$D0
-:
	LDA.b #$50
	JSL.l CODE_209809
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	CPX.b #$00
else
	CPX.b #$F0
endif
	BNE.b -
	JSL.l SMB3_LoadLevelDataAndHeader_Main
	RTL
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_LoadLevelDataAndHeader(Address)
namespace SMB3_LoadLevelDataAndHeader
%InsertMacroAtXPosition(<Address>)

Main:
	STZ.w $0700
	STZ.w $0704
	STZ.w $0703
	STZ.w $0701
	STZ.w $0702
	LDA.b #$7E2000>>16
	STA.b $30
	LDY.b #$00
	LDA.b [!RAM_SMB3_Level_LevelDataPtrLo],y
	STA.w !RAM_SMB3_Level_SublevelLevelDataLo
	INY
	LDA.b [!RAM_SMB3_Level_LevelDataPtrLo],y
	STA.w !RAM_SMB3_Level_SublevelLevelDataHi
	INY
	LDA.b [!RAM_SMB3_Level_LevelDataPtrLo],y
	STA.w !RAM_SMB3_Level_SublevelLevelDataBank
	INY
	LDA.b [!RAM_SMB3_Level_LevelDataPtrLo],y
	STA.w !RAM_SMB3_Level_SublevelSpriteDataLo
	INY
	LDA.b [!RAM_SMB3_Level_LevelDataPtrLo],y
	STA.w !RAM_SMB3_Level_SublevelSpriteDataHi
	INY
	LDA.b [!RAM_SMB3_Level_LevelDataPtrLo],y
	STA.w !RAM_SMB3_Level_SublevelSpriteDataBank
	INY
	LDA.w $0414
	BNE.b CODE_209939
	LDA.b [!RAM_SMB3_Level_LevelDataPtrLo],y
	AND.b #$E0
	LSR
	LSR
	LSR
	LSR
	LSR
	TAX
	LDA.w SMB3_InitialPlayerYPosHi,x
	STA.b !RAM_SMB3_Level_Player_YPosHi
	LDA.w SMB3_InitialPlayerYPosLo,x
	STA.b !RAM_SMB3_Level_Player_YPosLo
	STZ.b !RAM_SMB3_Level_Player_XPosHi
	LDA.w DATA_21CE3A,x
	STA.w $0216
	LSR
	LSR
	STA.w $0218
	LDA.w $0216
	SEC
	SBC.w $0218
	STA.w $0218
CODE_209939:
	LDA.b [!RAM_SMB3_Level_LevelDataPtrLo],y
	AND.b #$0F
	STA.b !RAM_SMB3_Level_ScreensInLvl
	STA.w $0376
	INY
	LDA.b [!RAM_SMB3_Level_LevelDataPtrLo],y
	AND.b #$03
	STA.w $073B
	LDA.b [!RAM_SMB3_Level_LevelDataPtrLo],y
	AND.b #$1C
	LSR
	LSR
	STA.w !RAM_SMB3_Level_BackgroundColorSettingFromHeader
	LDA.b [!RAM_SMB3_Level_LevelDataPtrLo],y
	AND.b #$60
	LSR
	LSR
	LSR
	LSR
	LSR
	STA.w $0426
	LDA.b [!RAM_SMB3_Level_LevelDataPtrLo],y
	AND.b #$80
	STA.w $0562
	INY
	LDA.b [!RAM_SMB3_Level_LevelDataPtrLo],y
	AND.b #$80
	STA.w $0379
	LDA.b [!RAM_SMB3_Level_LevelDataPtrLo],y
	AND.b #$60
	LSR
	LSR
	LSR
	LSR
	LSR
	STA.w !RAM_SMB3_Level_Layer1VerticalScrollSetting
	CMP.b #$02
	BNE.b CODE_2099A0
	LDX.b #$00
	LDA.w $0216
	CMP.b #$B0
	BCC.b CODE_209989
	LDX.b #$EF
CODE_209989:
	STX.w $0216
	TXA
	STA.l $7E398E
	LSR
	LSR
	STA.w $0218
	LDA.w $0216
	SEC
	SBC.w $0218
	STA.w $0218
CODE_2099A0:
	LDA.b [!RAM_SMB3_Level_LevelDataPtrLo],y
	AND.b #$10
	STA.w !RAM_SMB3_Level_IsVerticalLevelFlag
	BEQ.b CODE_2099CE
	LDX.w $0414
	BNE.b CODE_2099B8
	LDA.w $0376
	STA.b $13
	STA.b !RAM_SMB3_Level_Player_YPosHi
	JMP.w CODE_2099CE

CODE_2099B8:
	STZ.w $0376
	LDA.b !RAM_SMB3_Level_Player_YPosHi
	BEQ.b CODE_2099C8
	LDA.b !RAM_SMB3_Level_ScreensInLvl
	STA.b $13
	STA.b !RAM_SMB3_Level_Player_YPosHi
	STA.w $0376
CODE_2099C8:
	LDA.b $13
	STA.l $7E398D
CODE_2099CE:
	LDA.b [!RAM_SMB3_Level_LevelDataPtrLo],y
	AND.b #$0F
	STA.w !RAM_SMB3_Level_SublevelTilesetFromHeader
	INY
	LDA.b [!RAM_SMB3_Level_LevelDataPtrLo],y
	AND.b #$E0
	LSR
	LSR
	LSR
	LSR
	LSR
	STA.w !RAM_SMB3_Level_EntranceSettings
	LDA.b [!RAM_SMB3_Level_LevelDataPtrLo],y
	AND.b #$1F
	STA.w !RAM_SMB3_Level_GraphicsAndPaletteSettingFromHeader
	INY
	LDA.b [!RAM_SMB3_Level_LevelDataPtrLo],y
	AND.b #$30
	ASL
	ORA.w !RAM_SMB3_Level_GraphicsAndPaletteSettingFromHeader
	STA.w !RAM_SMB3_Level_GraphicsAndPaletteSettingFromHeader
	LDA.w $0414
	BNE.b CODE_209A0E
	LDA.b [!RAM_SMB3_Level_LevelDataPtrLo],y
	AND.b #$C0
	CLC
	ROL
	ROL
	ROL
	TAX
	LDA.w SMB3_TimeSettingTable,x
	STA.w !RAM_SMB3_Level_TimerHundreds
	BNE.b CODE_209A0E
	INC.w !RAM_SMB3_Level_FreezeTimeLimitFlag
CODE_209A0E:
	LDA.b [!RAM_SMB3_Level_LevelDataPtrLo],y
	AND.b #$0F
	CMP.b #$07
	BNE.b CODE_209A2F
	LDA.w !RAM_SMB3_Global_CurrentWorld
	BNE.b CODE_209A2F
	LDA.w !RAM_SMB3_Overworld_OWSprIDBeingEntered
	BNE.b CODE_209A2F
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.l $7E3979,x
	CMP.b #$A0
	BNE.b CODE_209A2F
	LDA.b #!Define_SMB3_LevelMusic_ToadHouse
	BRA.b CODE_209A37

CODE_209A2F:
	LDA.b [!RAM_SMB3_Level_LevelDataPtrLo],y
	AND.b #$0F
	TAX
	LDA.w SMB3_LevelMusicTable,x
CODE_209A37:
	STA.w !RAM_SMB3_Global_MusicRegisterBackup
	STA.w $1062
	LDA.w !REGISTER_APUPort2
	CMP.b #!Define_SMB3_LevelMusic_HaveStar
	BNE.b CODE_209A47
	STZ.w !RAM_SMB3_Global_MusicRegisterBackup
CODE_209A47:
	INY
	LDA.b [!RAM_SMB3_Level_LevelDataPtrLo],y
	AND.b #$0F
	STA.w !RAM_SMB3_Level_Layer3BGFromHeader
	LDA.b [!RAM_SMB3_Level_LevelDataPtrLo],y
	LSR
	LSR
	LSR
	LSR
	STA.w $02BE
	INY
	LDA.b [!RAM_SMB3_Level_LevelDataPtrLo],y
	STA.w !RAM_SMB3_Level_Layer2BGFromHeader
	LDA.b !RAM_SMB3_Level_LevelDataPtrLo
	CLC
	ADC.b #$0D
	STA.b !RAM_SMB3_Level_LevelDataPtrLo
	LDA.b !RAM_SMB3_Level_LevelDataPtrHi
	ADC.b #$00
	STA.b !RAM_SMB3_Level_LevelDataPtrHi
	LDA.b [!RAM_SMB3_Level_LevelDataPtrLo]
	AND.b #$E0
	CMP.b #$C0
	BNE.b CODE_209AA5
	LDA.b [!RAM_SMB3_Level_LevelDataPtrLo]
	AND.b #$0F
	CMP.w $0211
	BNE.b CODE_209A94
	LDY.b #$01
	LDA.b [!RAM_SMB3_Level_LevelDataPtrLo],y
	PHA
	AND.b #$0F
	STA.w $073B
	PLA
	LSR
	LSR
	LSR
	LSR
	STA.w !RAM_SMB3_Level_BackgroundColorSettingFromHeader
	INY
	LDA.b [!RAM_SMB3_Level_LevelDataPtrLo],y
	STA.w !RAM_SMB3_Global_TilesetFromHeader
CODE_209A94:
	LDA.w !RAM_SMB3_Level_LevelDataPtrLo					; Optimization: Unnecessary absolute addressing
	CLC
	ADC.b #$03
	STA.w !RAM_SMB3_Level_LevelDataPtrLo					; Optimization: Unnecessary absolute addressing
	LDA.b #$00
	ADC.w !RAM_SMB3_Level_LevelDataPtrHi					;\ Optimization: Unnecessary absolute addressing
	STA.w !RAM_SMB3_Level_LevelDataPtrHi					;/
CODE_209AA5:
	LDY.b #$00
	LDA.b [!RAM_SMB3_Level_LevelDataPtrLo],y
	CMP.b #$FF
	BEQ.b CODE_209AEE
	STA.b $0E
	INY
	LDA.b [!RAM_SMB3_Level_LevelDataPtrLo],y
	STA.b $0F
	INY
	LDA.b [!RAM_SMB3_Level_LevelDataPtrLo],y
	STA.w $0706
	INY
	TYA
	CLC
	ADC.b !RAM_SMB3_Level_LevelDataPtrLo
	STA.b !RAM_SMB3_Level_LevelDataPtrLo
	LDA.b !RAM_SMB3_Level_LevelDataPtrHi
	ADC.b #$00
	STA.b !RAM_SMB3_Level_LevelDataPtrHi
	LDA.b $0E
	AND.b #$E0
	CMP.b #$E0
	BNE.b CODE_209AD5
	JSL.l CODE_23BED4
	BRA.b CODE_209AA5

CODE_209AD5:
	JSL.l CODE_209B2A
	LDA.w $0706
	AND.b #$F0
	BEQ.b CODE_209AE7
	JSL.l SMB3_LoadResizableObjects_Main
	JMP.w CODE_209AEB							; Optimization: Why not just BRA to CODE_209AA5?

CODE_209AE7:
	JSL.l SMB3_LoadStaticObjects_Main
CODE_209AEB:
	JMP.w CODE_209AA5							; Optimization: BRA.

CODE_209AEE:
	LDA.w !RAM_SMB3_Level_Layer2BGFromHeader
	BEQ.b CODE_209B19
	JSL.l SMB3_BufferBGTilemap_Main
	LDA.w $034F
	BEQ.b CODE_209B08
	LDA.w $0216
	STA.w $0218
	LDA.w $0217
	STA.w $0219
CODE_209B08:
	LDA.w !RAM_SMB3_Level_Layer2BGFromHeader
	CMP.b #$03
	BEQ.b CODE_209B13
	CMP.b #$24
	BNE.b CODE_209B19
CODE_209B13:
	STZ.w $0218
	STZ.w $0219
CODE_209B19:
	LDA.w !RAM_SMB3_Level_GraphicsAndPaletteSettingFromHeader
	CMP.b #$07
	BNE.b CODE_209B29
	STZ.w !RAM_SMB3_Level_TimerHundreds
	STZ.w !RAM_SMB3_Level_TimerTens
	STZ.w !RAM_SMB3_Level_TimerOnes
CODE_209B29:
	RTL
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_BufferSpriteListData(Address)
namespace SMB3_BufferSpriteListData
%InsertMacroAtXPosition(<Address>)

Main:
	LDY.b #$00
	LDA.b [!RAM_SMB3_Level_SpriteDataPtrLo],y
	STA.w !RAM_SMB3_Level_SpriteListData,y
-:
	INY
	LDA.b [!RAM_SMB3_Level_SpriteDataPtrLo],y
	STA.w !RAM_SMB3_Level_SpriteListData,y
	CMP.b #$FF
	BEQ.b +
	INY
	LDA.b [!RAM_SMB3_Level_SpriteDataPtrLo],y
	STA.w !RAM_SMB3_Level_SpriteListData,y
	INY
	LDA.b [!RAM_SMB3_Level_SpriteDataPtrLo],y
	STA.w !RAM_SMB3_Level_SpriteListData,y
	JMP.w -

+:
	RTL
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_DrawLoadingLetters(Address)
namespace SMB3_DrawLoadingLetters
%InsertMacroAtXPosition(<Address>)

Main:
	PHB
	LDA.b #Main>>16
	PHA
	PLB
	PHX
	PHY

	; Convert loading letters index to the corresponding tiles index
	LDA.w $1A80
	ASL
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR]
	ASL
else
	CLC
	ADC.w $1A80
endif
	TAX

	LDY.b #$00
CODE_27E18E:
	LDA.w VariableLoadingLetterXDisp,x
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	
	LDA.b #$60
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	
	LDA.w VariableLoadingLetterTiles,x
	STA.w SMB3_OAMBuffer[$00].Tile,y
	
	LDA.b #$22
	STA.w SMB3_OAMBuffer[$00].Prop,y
	
	PHY
	TYA
	LSR
	LSR
	TAY
	LDA.b #$02
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y

	PLY
	INY
	INY
	INY
	INY
	INX
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000
	CPY.b #$04*4
else
	CPY.b #$0C			; Number of objects * 4
endif
	BCC.b CODE_27E18E
	
	LDX.b #$00
CODE_27E1BA:
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) == $0000
	LDA.w LoadingLetterStartXDisp,x
else	
	LDA.w $1A80
	CMP.b #$02
	BEQ.b BattleStartOffset
	
	LDA.w LoadingLetterStartXDisp,x
	BRA.b +

BattleStartOffset:
	LDA.w LoadingLetterStartXDisp,x
	CLC
	SBC.b #$0B
+:
endif
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	
	LDA.b #$60
	STA.w SMB3_OAMBuffer[$00].YDisp,y

	LDA.w LoadingLetterStartTiles,x
	STA.w SMB3_OAMBuffer[$00].Tile,y

if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000
	LDA.b #$23
else
	LDA.b #$22
endif
	STA.w SMB3_OAMBuffer[$00].Prop,y

	PHY
	TYA
	LSR
	LSR
	TAY
	LDA.b #$02
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y

	PLY
	INX
	INY
	INY
	INY
	INY
	CPX.b #$03			; Number of objects
	BCC.b CODE_27E1BA

	PLY
	PLX
	PLB
	RTL
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000
	VariableLoadingLetterXDisp:
	;$27E1E8 [BR]
		db $80,$88,$98,$A8		; MARIO ($1A80 = 00)
		db $80,$88,$98,$A5		; LUIGI ($1A80 = 01)
		db $78,$88,$98,$A8		; A BATALHA ($1A80 = 02)

	VariableLoadingLetterTiles:
	;$27E1F1
		db $8C,$A0,$A2,$8E		; MARIO
		db $8C,$A4,$A6,$8E		; LUIGI
		db $A8,$AA,$AC,$AE		; A BATALHA

	LoadingLetterStartXDisp:
	;$27E1FA
		db $50,$60,$70

	LoadingLetterStartTiles:
	;$27E1FD
		db $7C,$9C,$9E			; COMECE

else
	VariableLoadingLetterXDisp:
	;$27E1E8
		db $58,$68,$68		; MARIO ($1A80 = 00)
		db $58,$68,$68		; LUIGI ($1A80 = 01)
		db $50,$60,$70		; BATTLE ($1A80 = 02)

	VariableLoadingLetterTiles:
	;$27E1F1
		db $A0,$A2,$A2		; MARIO
		db $A4,$A6,$A6		; LUIGI
		db $A8,$AA,$AC		; BATTLE

	LoadingLetterStartXDisp:
	;$27E1FA
		db $80,$90,$98

	LoadingLetterStartTiles:
	;$27E1FD
		db $AE,$8C,$8D
endif
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_DrawPlayerLetterOnStatusBar(Address)
namespace SMB3_DrawPlayerLetterOnStatusBar
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.w !RAM_SMB3_Level_Player_CurrentCharacter
	ASL
	TAX
	LDA.b #$01
	STA.b !RAM_SMB3_Global_ScratchRAM0E
	LDY.w !RAM_SMB3_Global_StripeImageUploadIndexLo
CODE_29E772:
	LDA.w SMB3_StatusBarPlayerLetterTiles,x
	STA.w SMB3_StripeImageUploadTable[$02].LowByte,y
	LDA.b #$22
	STA.w SMB3_StripeImageUploadTable[$02].HighByte,y
	INX
	INY
	INY
	DEC.b !RAM_SMB3_Global_ScratchRAM0E
	BPL.b CODE_29E772
	LDA.b #$FF
	STA.w SMB3_StripeImageUploadTable[$02].LowByte,y
	LDY.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	LDA.b #$0F
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,y
	LDA.b #$42
	STA.w SMB3_StripeImageUploadTable[$00].HighByte,y
	LDA.b #$00
	STA.w SMB3_StripeImageUploadTable[$01].LowByte,y
	LDA.b #$03
	STA.w SMB3_StripeImageUploadTable[$01].HighByte,y
	LDA.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	CLC
	ADC.b #$08
	STA.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	RTL
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_DrawWorldNumberOnStatusBar(Address)
namespace SMB3_DrawWorldNumberOnStatusBar
%InsertMacroAtXPosition(<Address>)

Main:
	LDY.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	LDX.w !RAM_SMB3_Global_CurrentWorld
	INX
	TXA
	ORA.b #$90
	STA.w SMB3_StripeImageUploadTable[$02].LowByte,y
	LDA.b #$22
	STA.w SMB3_StripeImageUploadTable[$02].HighByte,y
	LDA.b #$FF
	STA.w SMB3_StripeImageUploadTable[$03].LowByte,y
	LDX.b #$0F
	TXA
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,y
	LDA.b #$26
	STA.w SMB3_StripeImageUploadTable[$00].HighByte,y
	LDA.b #$00
	STA.w SMB3_StripeImageUploadTable[$01].LowByte,y
	LDA.b #$01
	STA.w SMB3_StripeImageUploadTable[$01].HighByte,y
	LDA.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	CLC
	ADC.b #$06
	STA.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	RTL
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_DrawWorld5CloudSprite(Address)
namespace SMB3_DrawWorld5CloudSprite
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.w !RAM_SMB3_Global_CurrentWorld
	CMP.b #$04
	BNE.b CODE_2382C4
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b !RAM_SMB3_Overworld_Mario_XPosHi,x
	BEQ.b CODE_2382C4
	LDY.b #$07
CODE_2382B3:
	LDA.w World5CloudSpriteOAMData,y
	STA.w SMB3_OAMBuffer[$14].XDisp,y
	DEY
	BPL.b CODE_2382B3
	LDA.b #$02
	STA.w SMB3_OAMTileSizeBuffer[$14].Slot
	STA.w SMB3_OAMTileSizeBuffer[$15].Slot
CODE_2382C4:
	RTL
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_UpdateLevelTimer(Address)
namespace SMB3_UpdateLevelTimer
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.w !RAM_SMB3_Global_TilesetFromHeader
	BEQ.b CODE_29E655
	CMP.b #$07
	BEQ.b CODE_29E655
	CMP.b #$0F
	BCS.b CODE_29E655
	LDA.w !RAM_SMB3_Level_FreezeTimeLimitFlag
	AND.b #$7F
	ORA.w !RAM_SMB3_Level_TemporarilyDisableTimeLimitFlag
	BNE.b CODE_29E655
	DEC.w !RAM_SMB3_Level_WaitBeforeDecrementingTimer
	BPL.b CODE_29E655
	LDA.b #$28
	STA.w !RAM_SMB3_Level_WaitBeforeDecrementingTimer
	DEC.w !RAM_SMB3_Level_TimerOnes
	BPL.b CODE_29E641
	LDA.b #$09
	STA.w !RAM_SMB3_Level_TimerOnes
	DEC.w !RAM_SMB3_Level_TimerTens
	BPL.b CODE_29E641
	STA.w !RAM_SMB3_Level_TimerTens
	DEC.w !RAM_SMB3_Level_TimerHundreds
	BPL.b CODE_29E641
	LDA.b #$00
	STA.w !RAM_SMB3_Level_TimerHundreds
	STA.w !RAM_SMB3_Level_TimerTens
	STA.w !RAM_SMB3_Level_TimerOnes
CODE_29E641:
	LDA.w !RAM_SMB3_Level_TimerHundreds
	CMP.b #$01
	BNE.b CODE_29E655
	LDA.w !RAM_SMB3_Level_TimerTens
	ORA.w !RAM_SMB3_Level_TimerOnes
	BNE.b CODE_29E655
	LDA.b #!Define_SMAS_Sound0060_IncreaseMusicTempo
	STA.w !RAM_SMB3_Global_SoundCh1
CODE_29E655:
	LDX.b #$02
CODE_29E657:
	LDA.w !RAM_SMB3_Level_TimerHundreds,x
	ORA.b #$90
	STA.w $1F52,x
	DEX
	BPL.b CODE_29E657
	RTS
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_UploadGraphicsFiles(Address)
namespace SMB3_UploadGraphicsFiles
%InsertMacroAtXPosition(<Address>)

CODE_20A58D:					; Note: Load the castle cutscene sprites
	LDA.w #SMB3_Bank39Graphics_Sprite_ThroneRoom
	STA.b $0D
	LDX.b #SMB3_Bank39Graphics_Sprite_ThroneRoom>>16
	STX.b $0F
	LDA.w #SMB3_Bank39Graphics_Sprite_ThroneRoomEnd-SMB3_Bank39Graphics_Sprite_ThroneRoom
	STA.b $0B
	JSR.w SMB3_DMADataToVRAM_Entry2
	BRL.w CODE_20AEDC

DATA_20A5A1:
	dw SMB3_Bank40Graphics_Sprite_AirshipSprites1,SMB3_Bank40Graphics_FG_ConstructedPlains,SMB3_Bank41Graphics_FG_Fortress,SMB3_Bank41Graphics_FG_Cave1,SMB3_Bank40Graphics_FG_SkyPlains1,SMB3_Bank45Graphics_FG_Pipe,SMB3_Bank45Graphics_FG_Pipe,SMB3_Bank45Graphics_FG_ToadHouse1
	dw SMB3_Bank45Graphics_FG_Pipe,SMB3_Bank43Graphics_FG_Desert1,SMB3_Bank43Graphics_FG_Airship1,SMB3_Bank46Graphics_FG_Giant1,SMB3_Bank41Graphics_FG_SnowAndIce,SMB3_Bank43Graphics_FG_Cloud1,SMB3_Bank41Graphics_FG_Cave1,SMB3_Bank42Graphics_FG_MinigameIntro
	dw SMB3_Bank42Graphics_FG_SpadeGamePowerUps1,SMB3_Bank45Graphics_FG_ToadHouse1,SMB3_Bank45Graphics_FG_Pipe,SMB3_Bank46Graphics_FG_GrassPlain1,SMB3_Bank46Graphics_FG_GrassyConstructedPlains,SMB3_Bank43Graphics_FG_Airship1,SMB3_Bank42Graphics_FG_ThroneRoom,SMB3_Bank43Graphics_FG_Desert1
	dw SMB3_Bank46Graphics_FG_GrassPlain1,SMB3_Bank41Graphics_FG_Fortress,SMB3_Bank41Graphics_FG_Fortress,SMB3_Bank46Graphics_FG_GrassPlain1,SMB3_Bank40Graphics_FG_ConstructedPlains,SMB3_Bank41Graphics_FG_Cave1,SMB3_Bank46Graphics_FG_Giant1,SMB3_Bank40Graphics_FG_ConstructedPlains
	dw SMB3_Bank40Graphics_FG_ConstructedPlains,SMB3_Bank40Graphics_FG_ConstructedPlains,SMB3_Bank41Graphics_FG_Cave1,SMB3_Bank41Graphics_FG_SnowAndIce,SMB3_Bank41Graphics_FG_Cave1,SMB3_Bank41Graphics_FG_SnowAndIce,SMB3_Bank46Graphics_FG_GrassPlain1,SMB3_Bank41Graphics_FG_Cave1
	dw SMB3_Bank43Graphics_FG_Desert1,SMB3_Bank40Graphics_FG_ConstructedPlains,SMB3_Bank41Graphics_FG_Fortress,SMB3_Bank46Graphics_FG_Giant1,SMB3_Bank41Graphics_FG_Fortress,SMB3_Bank43Graphics_FG_Airship1,SMB3_Bank46Graphics_FG_Giant1,SMB3_Bank46Graphics_FG_Giant1

DATA_20A601:
	db SMB3_Bank40Graphics_Sprite_AirshipSprites1>>16,SMB3_Bank40Graphics_FG_ConstructedPlains>>16,SMB3_Bank41Graphics_FG_Fortress>>16,SMB3_Bank41Graphics_FG_Cave1>>16,SMB3_Bank40Graphics_FG_SkyPlains1>>16,SMB3_Bank45Graphics_FG_Pipe>>16,SMB3_Bank45Graphics_FG_Pipe>>16,SMB3_Bank45Graphics_FG_ToadHouse1>>16
	db SMB3_Bank45Graphics_FG_Pipe>>16,SMB3_Bank43Graphics_FG_Desert1>>16,SMB3_Bank43Graphics_FG_Airship1>>16,SMB3_Bank46Graphics_FG_Giant1>>16,SMB3_Bank41Graphics_FG_SnowAndIce>>16,SMB3_Bank43Graphics_FG_Cloud1>>16,SMB3_Bank41Graphics_FG_Cave1>>16,SMB3_Bank42Graphics_FG_MinigameIntro>>16
	db SMB3_Bank42Graphics_FG_SpadeGamePowerUps1>>16,SMB3_Bank45Graphics_FG_ToadHouse1>>16,SMB3_Bank45Graphics_FG_Pipe>>16,SMB3_Bank46Graphics_FG_GrassPlain1>>16,SMB3_Bank46Graphics_FG_GrassyConstructedPlains>>16,SMB3_Bank43Graphics_FG_Airship1>>16,SMB3_Bank42Graphics_FG_ThroneRoom>>16,SMB3_Bank43Graphics_FG_Desert1>>16
	db SMB3_Bank46Graphics_FG_GrassPlain1>>16,SMB3_Bank41Graphics_FG_Fortress>>16,SMB3_Bank41Graphics_FG_Fortress>>16,SMB3_Bank46Graphics_FG_GrassPlain1>>16,SMB3_Bank40Graphics_FG_ConstructedPlains>>16,SMB3_Bank41Graphics_FG_Cave1>>16,SMB3_Bank46Graphics_FG_Giant1>>16,SMB3_Bank40Graphics_FG_ConstructedPlains>>16
	db SMB3_Bank40Graphics_FG_ConstructedPlains>>16,SMB3_Bank40Graphics_FG_ConstructedPlains>>16,SMB3_Bank41Graphics_FG_Cave1>>16,SMB3_Bank41Graphics_FG_SnowAndIce>>16,SMB3_Bank41Graphics_FG_Cave1>>16,SMB3_Bank41Graphics_FG_SnowAndIce>>16,SMB3_Bank46Graphics_FG_GrassPlain1>>16,SMB3_Bank41Graphics_FG_Cave1>>16
	db SMB3_Bank43Graphics_FG_Desert1>>16,SMB3_Bank40Graphics_FG_ConstructedPlains>>16,SMB3_Bank41Graphics_FG_Fortress>>16,SMB3_Bank46Graphics_FG_Giant1>>16,SMB3_Bank41Graphics_FG_Fortress>>16,SMB3_Bank43Graphics_FG_Airship1>>16,SMB3_Bank46Graphics_FG_Giant1>>16,SMB3_Bank46Graphics_FG_Giant1>>16

DATA_20A631:
	dw SMB3_Bank40Graphics_Sprite_AirshipSprites1,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank43Graphics_FG_AnimatedLevelTiles1,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank45Graphics_FG_ToadHouse2
	dw SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_Airship3,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank45Graphics_FG_ToadHouse2
	dw SMB3_Bank42Graphics_FG_SpadeGamePowerUps2,SMB3_Bank45Graphics_FG_ToadHouse2,SMB3_Bank3FGraphics_Sprite_BattleMode1+$1000,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank47Graphics_FG_AnimatedOverworldTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2
	dw SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2
	dw SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2
	dw SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_Airship3,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2

DATA_20A691:
	db SMB3_Bank40Graphics_Sprite_AirshipSprites1>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank43Graphics_FG_AnimatedLevelTiles1>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank45Graphics_FG_ToadHouse2>>16
	db SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_Airship3>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank45Graphics_FG_ToadHouse2>>16
	db SMB3_Bank42Graphics_FG_SpadeGamePowerUps2>>16,SMB3_Bank45Graphics_FG_ToadHouse2>>16,(SMB3_Bank3FGraphics_Sprite_BattleMode1+$1000)>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank47Graphics_FG_AnimatedOverworldTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16
	db SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16
	db SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16
	db SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_Airship3>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16

DATA_20A6C1:
	dw SMB3_Bank40Graphics_Sprite_AirshipSprites1,SMB3_Bank3AGraphics_FG_GrassPlain2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank3AGraphics_FG_Cave2,SMB3_Bank3AGraphics_FG_SkyPlains2,SMB3_Bank43Graphics_FG_AnimatedLevelTiles1,SMB3_Bank3AGraphics_FG_GrassPlain2,SMB3_Bank45Graphics_FG_ToadHouse2
	dw SMB3_Bank2DGraphics_BG_Pipes1,SMB3_Bank3AGraphics_BG_BonusRoom,SMB3_Bank3AGraphics_BG_AirshipInterior,SMB3_Bank3AGraphics_FG_SkyPlains2,SMB3_Bank3AGraphics_FG_EndOfLevelDecor,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank45Graphics_FG_ToadHouse2
	dw SMB3_Bank42Graphics_FG_SpadeGamePowerUps2,SMB3_Bank3AGraphics_FG_SkyPlains2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank3AGraphics_FG_GrassPlain2,SMB3_Bank3AGraphics_FG_SkyPlains2,SMB3_Bank41Graphics_BG_Volcano1,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2
	dw SMB3_Bank3AGraphics_FG_GrassPlain2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank3AGraphics_FG_GrassPlain2,SMB3_Bank3AGraphics_FG_EndOfLevelDecor,SMB3_Bank3AGraphics_FG_Cave2,SMB3_Bank3AGraphics_FG_SkyPlains2,SMB3_Bank3AGraphics_FG_EndOfLevelDecor
	dw SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank3AGraphics_FG_Cave2,SMB3_Bank3AGraphics_FG_EndOfLevelDecor,SMB3_Bank3AGraphics_FG_Cave2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank3AGraphics_FG_GrassPlain2,SMB3_Bank3AGraphics_FG_Cave2
	dw SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank3AGraphics_FG_GrassPlain2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank3AGraphics_FG_SkyPlains2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank3AGraphics_BG_AirshipInterior,SMB3_Bank3AGraphics_FG_SkyPlains2,SMB3_Bank3AGraphics_FG_SkyPlains2

DATA_20A721:
	db SMB3_Bank40Graphics_Sprite_AirshipSprites1>>16,SMB3_Bank3AGraphics_FG_GrassPlain2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank3AGraphics_FG_Cave2>>16,SMB3_Bank3AGraphics_FG_SkyPlains2>>16,SMB3_Bank43Graphics_FG_AnimatedLevelTiles1>>16,SMB3_Bank3AGraphics_FG_GrassPlain2>>16,SMB3_Bank45Graphics_FG_ToadHouse2>>16
	db SMB3_Bank2DGraphics_BG_Pipes1>>16,SMB3_Bank3AGraphics_BG_BonusRoom>>16,SMB3_Bank3AGraphics_BG_AirshipInterior>>16,SMB3_Bank3AGraphics_FG_SkyPlains2>>16,SMB3_Bank3AGraphics_FG_EndOfLevelDecor>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank45Graphics_FG_ToadHouse2>>16
	db SMB3_Bank42Graphics_FG_SpadeGamePowerUps2>>16,SMB3_Bank3AGraphics_FG_SkyPlains2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank3AGraphics_FG_GrassPlain2>>16,SMB3_Bank3AGraphics_FG_SkyPlains2>>16,SMB3_Bank41Graphics_BG_Volcano1>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16
	db SMB3_Bank3AGraphics_FG_GrassPlain2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank3AGraphics_FG_GrassPlain2>>16,SMB3_Bank3AGraphics_FG_EndOfLevelDecor>>16,SMB3_Bank3AGraphics_FG_Cave2>>16,SMB3_Bank3AGraphics_FG_SkyPlains2>>16,SMB3_Bank3AGraphics_FG_EndOfLevelDecor>>16
	db SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank3AGraphics_FG_Cave2>>16,SMB3_Bank3AGraphics_FG_EndOfLevelDecor>>16,SMB3_Bank3AGraphics_FG_Cave2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank3AGraphics_FG_GrassPlain2>>16,SMB3_Bank3AGraphics_FG_Cave2>>16
	db SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank3AGraphics_FG_GrassPlain2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank3AGraphics_FG_SkyPlains2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank3AGraphics_BG_AirshipInterior>>16,SMB3_Bank3AGraphics_FG_SkyPlains2>>16,SMB3_Bank3AGraphics_FG_SkyPlains2>>16

DATA_20A751:
	dw SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>8,SMB3_Bank3AGraphics_BG_Underwater1>>8,SMB3_Bank3AGraphics_BG_StormClouds>>8,SMB3_Bank3AGraphics_BG_AirshipInterior>>8,SMB3_Bank3AGraphics_BG_CavePillar1>>8,SMB3_Bank3AGraphics_BG_ConstructedPlain>>8,SMB3_Bank2DGraphics_BG_Fortress1>>8,SMB3_Bank2DGraphics_BG_CastleWall>>8
	dw SMB3_Bank2DGraphics_BG_SnowTrees1>>8,SMB3_Bank2DGraphics_BG_Pipes1>>8,SMB3_Bank2DGraphics_BG_DottedHills1>>8,SMB3_Bank3AGraphics_BG_CavePillar2>>8,SMB3_Bank2DGraphics_BG_HillsAndTrees>>8,SMB3_Bank2DGraphics_BG_Desert1>>8,SMB3_Bank2DGraphics_BG_Desert1>>8,SMB3_Bank2DGraphics_BG_CheckeredHills1>>8
	dw SMB3_Bank40Graphics_BG_Prison>>8,SMB3_Bank41Graphics_BG_Volcano1>>8,SMB3_Bank42Graphics_BG_Clouds>>8,SMB3_Bank3AGraphics_BG_BonusRoom>>8,SMB3_Bank43Graphics_BG_CrystalCave>>8,SMB3_Bank3AGraphics_BG_CavePillar2>>8,SMB3_Bank43Graphics_BG_WaterfallCliff>>8,SMB3_Bank3AGraphics_BG_ToadHouse>>8
	dw SMB3_Bank2DGraphics_BG_SnowyCheckeredHills1>>8,SMB3_Bank2DGraphics_BG_Desert1>>8,SMB3_Bank3AGraphics_BG_ConstructedPlain>>8,SMB3_Bank44Graphics_BG_BowsersCastle1>>8,SMB3_Bank45Graphics_BG_Leaves1>>8,SMB3_Bank2DGraphics_BG_CheckeredHills1>>8,SMB3_Bank43Graphics_BG_WaterfallCliff>>8,SMB3_Bank40Graphics_BG_Prison>>8
	dw SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>8,SMB3_Bank3AGraphics_BG_Underwater1>>8,SMB3_Bank42Graphics_BG_PeachsRoom1>>8,SMB3_Bank3AGraphics_BG_StormClouds>>8,SMB3_Bank3AGraphics_BG_AirshipInterior>>8,SMB3_Bank3AGraphics_BG_Underwater1>>8

DATA_20A79D:
	dw SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>8,SMB3_Bank3AGraphics_BG_Underwater2>>8,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>8,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>8,SMB3_Bank3AGraphics_BG_CavePillar2>>8,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>8,SMB3_Bank2DGraphics_BG_Fortress2>>8,SMB3_Bank2DGraphics_BG_Pipes2>>8
	dw SMB3_Bank2DGraphics_BG_SnowTrees2>>8,SMB3_Bank2DGraphics_BG_Pipes2>>8,SMB3_Bank2DGraphics_BG_DottedHills2>>8,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>8,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>8,SMB3_Bank2DGraphics_BG_Desert2>>8,SMB3_Bank2DGraphics_BG_Desert2>>8,SMB3_Bank2DGraphics_BG_CheckeredHills2>>8
	dw SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>8,SMB3_Bank41Graphics_BG_Volcano2>>8,SMB3_Bank42Graphics_BG_Clouds>>8,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>8,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>8,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>8,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>8,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>8
	dw SMB3_Bank2DGraphics_BG_SnowyCheckeredHills2>>8,SMB3_Bank2DGraphics_BG_Desert2>>8,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>8,SMB3_Bank44Graphics_BG_BowsersCastle2>>8,SMB3_Bank45Graphics_BG_Leaves2>>8,SMB3_Bank2DGraphics_BG_CheckeredHills2>>8,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>8,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>8
	dw SMB3_Bank3AGraphics_BG_Underwater2>>8,SMB3_Bank3AGraphics_BG_Underwater2>>8,SMB3_Bank42Graphics_BG_PeachsRoom2>>8,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>8,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>8,SMB3_Bank3AGraphics_BG_Underwater2>>8

DATA_20A7E9:
	dw SMB3_Bank40Graphics_Sprite_AirshipSprites1,SMB3_Bank43Graphics_BG_WaterfallCliff,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank43Graphics_BG_WaterfallCliff,SMB3_Bank43Graphics_FG_AnimatedLevelTiles1+$0800,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank45Graphics_Sprite_Empty1
	dw SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank3AGraphics_BG_BonusRoom,SMB3_Bank3AGraphics_BG_StormClouds,SMB3_Bank43Graphics_BG_WaterfallCliff,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank45Graphics_Sprite_Empty1
	dw SMB3_Bank42Graphics_FG_SpadeGamePowerUps3,SMB3_Bank45Graphics_Sprite_Empty1,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank47Graphics_FG_AnimatedOverworldTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2
	dw SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank43Graphics_BG_WaterfallCliff,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2
	dw SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank3AGraphics_BG_BonusRoom,SMB3_Bank3AGraphics_BG_BonusRoom,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank43Graphics_BG_CrystalCave,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2
	dw SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_Airship4,SMB3_Bank3AGraphics_FG_SpadeGamePowerUps4,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2

DATA_20A849:
	db SMB3_Bank40Graphics_Sprite_AirshipSprites1>>16,SMB3_Bank43Graphics_BG_WaterfallCliff>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank43Graphics_BG_WaterfallCliff>>16,SMB3_Bank43Graphics_FG_AnimatedLevelTiles1+$0800>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank45Graphics_Sprite_Empty1>>16
	db SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank3AGraphics_BG_BonusRoom>>16,SMB3_Bank3AGraphics_BG_StormClouds>>16,SMB3_Bank43Graphics_BG_WaterfallCliff>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank45Graphics_Sprite_Empty1>>16
	db SMB3_Bank42Graphics_FG_SpadeGamePowerUps3>>16,SMB3_Bank45Graphics_Sprite_Empty1>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank47Graphics_FG_AnimatedOverworldTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16
	db SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank43Graphics_BG_WaterfallCliff>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16
	db SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank3AGraphics_BG_BonusRoom>>16,SMB3_Bank3AGraphics_BG_BonusRoom>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank43Graphics_BG_CrystalCave>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16
	db SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_Airship4>>16,SMB3_Bank3AGraphics_FG_SpadeGamePowerUps4>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16

DATA_20A879:
	dw SMB3_Bank40Graphics_Sprite_AirshipSprites1,SMB3_Bank3AGraphics_FG_EndOfLevelDecor,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank3AGraphics_FG_EndOfLevelDecor,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2
	dw SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank3AGraphics_FG_EndOfLevelDecor,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank3AGraphics_FG_EndOfLevelDecor,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2
	dw SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank3AGraphics_FG_EndOfLevelDecor,SMB3_Bank3AGraphics_FG_EndOfLevelDecor,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2
	dw SMB3_Bank3AGraphics_FG_EndOfLevelDecor,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank3AGraphics_FG_EndOfLevelDecor,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank3AGraphics_FG_EndOfLevelDecor
	dw SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank3AGraphics_FG_EndOfLevelDecor,SMB3_Bank3AGraphics_FG_EndOfLevelDecor,SMB3_Bank3AGraphics_FG_EndOfLevelDecor,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank3AGraphics_FG_EndOfLevelDecor,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2
	dw SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank3AGraphics_FG_EndOfLevelDecor,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank3AGraphics_FG_SpadeGamePowerUps4,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2

DATA_20A8D9:
	db SMB3_Bank40Graphics_Sprite_AirshipSprites1>>16,SMB3_Bank3AGraphics_FG_EndOfLevelDecor>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank3AGraphics_FG_EndOfLevelDecor>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16
	db SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank3AGraphics_FG_EndOfLevelDecor>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank3AGraphics_FG_EndOfLevelDecor>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16
	db SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank3AGraphics_FG_EndOfLevelDecor>>16,SMB3_Bank3AGraphics_FG_EndOfLevelDecor>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16
	db SMB3_Bank3AGraphics_FG_EndOfLevelDecor>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank3AGraphics_FG_EndOfLevelDecor>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank3AGraphics_FG_EndOfLevelDecor>>16
	db SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank3AGraphics_FG_EndOfLevelDecor>>16,SMB3_Bank3AGraphics_FG_EndOfLevelDecor>>16,SMB3_Bank3AGraphics_FG_EndOfLevelDecor>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank3AGraphics_FG_EndOfLevelDecor>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16
	db SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank3AGraphics_FG_EndOfLevelDecor>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank3AGraphics_FG_SpadeGamePowerUps4>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16

DATA_20A909:
	dw SMB3_Bank40Graphics_Sprite_AirshipSprites1,SMB3_Bank40Graphics_Sprite_Global2,SMB3_Bank40Graphics_Sprite_Global2,SMB3_Bank40Graphics_Sprite_Global2,SMB3_Bank40Graphics_Sprite_Global2,SMB3_Bank40Graphics_Sprite_Global2,SMB3_Bank40Graphics_Sprite_Global2,SMB3_Bank40Graphics_Sprite_Global2
	dw SMB3_Bank40Graphics_Sprite_Global2,SMB3_Bank40Graphics_Sprite_Global2,SMB3_Bank40Graphics_Sprite_Global2,SMB3_Bank43Graphics_Sprite_AltGlobal2,SMB3_Bank40Graphics_Sprite_Global2,SMB3_Bank40Graphics_Sprite_Global2,SMB3_Bank46Graphics_FG_GrassPlain1,SMB3_Bank45Graphics_BG_Leaves1
	dw SMB3_Bank42Graphics_FG_SpadeGamePowerUps1,SMB3_Bank45Graphics_FG_ToadHouse1,SMB3_Bank40Graphics_Sprite_ChestItems,SMB3_Bank40Graphics_Sprite_Global2,SMB3_Bank40Graphics_Sprite_Global2,SMB3_Bank40Graphics_Sprite_Global2,SMB3_Bank46Graphics_FG_GrassyConstructedPlains,SMB3_Bank40Graphics_Sprite_Global2
	dw SMB3_Bank40Graphics_Sprite_Global2,SMB3_Bank40Graphics_Sprite_Global2,SMB3_Bank40Graphics_Sprite_Global2,SMB3_Bank40Graphics_Sprite_Global2,SMB3_Bank43Graphics_Sprite_AltGlobal2,SMB3_Bank40Graphics_Sprite_Global2,SMB3_Bank40Graphics_Sprite_Global2,SMB3_Bank40Graphics_Sprite_Global2
	dw SMB3_Bank40Graphics_Sprite_Global2,SMB3_Bank40Graphics_Sprite_Global2,SMB3_Bank40Graphics_Sprite_Global2,SMB3_Bank40Graphics_Sprite_Global2,SMB3_Bank40Graphics_Sprite_Global2,SMB3_Bank40Graphics_Sprite_Global2,SMB3_Bank40Graphics_Sprite_Global2,SMB3_Bank40Graphics_Sprite_Global2
	dw SMB3_Bank40Graphics_Sprite_Global2,SMB3_Bank40Graphics_Sprite_Global2,SMB3_Bank40Graphics_Sprite_Global2,SMB3_Bank40Graphics_Sprite_Global2,SMB3_Bank40Graphics_Sprite_Global2,SMB3_Bank40Graphics_Sprite_Global2,SMB3_Bank40Graphics_Sprite_Global2,SMB3_Bank40Graphics_Sprite_Global2

DATA_20A969:
	db SMB3_Bank40Graphics_Sprite_AirshipSprites1>>16,SMB3_Bank40Graphics_Sprite_Global2>>16,SMB3_Bank40Graphics_Sprite_Global2>>16,SMB3_Bank40Graphics_Sprite_Global2>>16,SMB3_Bank40Graphics_Sprite_Global2>>16,SMB3_Bank40Graphics_Sprite_Global2>>16,SMB3_Bank40Graphics_Sprite_Global2>>16,SMB3_Bank40Graphics_Sprite_Global2>>16
	db SMB3_Bank40Graphics_Sprite_Global2>>16,SMB3_Bank40Graphics_Sprite_Global2>>16,SMB3_Bank40Graphics_Sprite_Global2>>16,SMB3_Bank43Graphics_Sprite_AltGlobal2>>16,SMB3_Bank40Graphics_Sprite_Global2>>16,SMB3_Bank40Graphics_Sprite_Global2>>16,SMB3_Bank46Graphics_FG_GrassPlain1>>16,SMB3_Bank45Graphics_BG_Leaves1>>16
	db SMB3_Bank42Graphics_FG_SpadeGamePowerUps1>>16,SMB3_Bank45Graphics_FG_ToadHouse1>>16,SMB3_Bank40Graphics_Sprite_ChestItems>>16,SMB3_Bank40Graphics_Sprite_Global2>>16,SMB3_Bank40Graphics_Sprite_Global2>>16,SMB3_Bank40Graphics_Sprite_Global2>>16,SMB3_Bank46Graphics_FG_GrassyConstructedPlains>>16,SMB3_Bank40Graphics_Sprite_Global2>>16
	db SMB3_Bank40Graphics_Sprite_Global2>>16,SMB3_Bank40Graphics_Sprite_Global2>>16,SMB3_Bank40Graphics_Sprite_Global2>>16,SMB3_Bank40Graphics_Sprite_Global2>>16,SMB3_Bank43Graphics_Sprite_AltGlobal2>>16,SMB3_Bank40Graphics_Sprite_Global2>>16,SMB3_Bank40Graphics_Sprite_Global2>>16,SMB3_Bank40Graphics_Sprite_Global2>>16
	db SMB3_Bank40Graphics_Sprite_Global2>>16,SMB3_Bank40Graphics_Sprite_Global2>>16,SMB3_Bank40Graphics_Sprite_Global2>>16,SMB3_Bank40Graphics_Sprite_Global2>>16,SMB3_Bank40Graphics_Sprite_Global2>>16,SMB3_Bank40Graphics_Sprite_Global2>>16,SMB3_Bank40Graphics_Sprite_Global2>>16,SMB3_Bank40Graphics_Sprite_Global2>>16
	db SMB3_Bank40Graphics_Sprite_Global2>>16,SMB3_Bank40Graphics_Sprite_Global2>>16,SMB3_Bank40Graphics_Sprite_Global2>>16,SMB3_Bank40Graphics_Sprite_Global2>>16,SMB3_Bank40Graphics_Sprite_Global2>>16,SMB3_Bank40Graphics_Sprite_Global2>>16,SMB3_Bank40Graphics_Sprite_Global2>>16,SMB3_Bank40Graphics_Sprite_Global2>>16

DATA_20A999:
	dw SMB3_Bank40Graphics_Sprite_AirshipSprites1,SMB3_Bank44Graphics_Sprite_BossBass,SMB3_Bank41Graphics_Sprite_Fortress1,SMB3_Bank40Graphics_Sprite_LakituSpinyAndBuzzyBeetle,SMB3_Bank40Graphics_Sprite_SkySprites,SMB3_Bank43Graphics_FG_Cloud1,SMB3_Bank41Graphics_Sprite_UnderwaterEnemies,SMB3_Bank40Graphics_Sprite_ChestItems
	dw SMB3_Bank45Graphics_Sprite_Pipe,SMB3_Bank40Graphics_Sprite_DesertEnemies,SMB3_Bank40Graphics_Sprite_AirshipSprites2,SMB3_Bank43Graphics_Sprite_GiantEnemies,SMB3_Bank40Graphics_Sprite_SpikeAndMunchers,SMB3_Bank40Graphics_Sprite_SkySprites,SMB3_Bank46Graphics_FG_GrassPlain1,SMB3_Bank42Graphics_Sprite_MiniGameHost
	dw SMB3_Bank43Graphics_BG_CrystalCave,SMB3_Bank45Graphics_Sprite_Pipe,SMB3_Bank40Graphics_BG_Prison,SMB3_Bank40Graphics_Sprite_SkySprites,SMB3_Bank40Graphics_Sprite_SpikeAndMunchers,SMB3_Bank40Graphics_Sprite_AirshipSprites3,SMB3_Bank42Graphics_Sprite_DynamicDoorAndLetters,SMB3_Bank41Graphics_Sprite_Fortress1
	dw SMB3_Bank40Graphics_Sprite_DesertEnemies,SMB3_Bank41Graphics_Sprite_UnderwaterEnemies,SMB3_Bank41Graphics_Sprite_Fortress1,SMB3_Bank41Graphics_Sprite_UnderwaterEnemies,SMB3_Bank43Graphics_Sprite_GiantEnemies,SMB3_Bank41Graphics_Sprite_Fortress1,SMB3_Bank40Graphics_Sprite_AirshipSprites1,SMB3_Bank40Graphics_Sprite_SpikeAndMunchers
	dw SMB3_Bank44Graphics_Sprite_BossBass,SMB3_Bank44Graphics_Sprite_GiantBlocks,SMB3_Bank44Graphics_Sprite_GiantBlocks,SMB3_Bank40Graphics_Sprite_SkySprites,SMB3_Bank40Graphics_Sprite_SpikeAndMunchers,SMB3_Bank41Graphics_Sprite_Fortress1,SMB3_Bank40Graphics_Sprite_SpikeAndMunchers,SMB3_Bank41Graphics_Sprite_UnderwaterEnemies
	dw SMB3_Bank40Graphics_Sprite_SpikeAndMunchers,SMB3_Bank40Graphics_Sprite_SpikeAndMunchers,SMB3_Bank41Graphics_Sprite_Fortress1,SMB3_Bank41Graphics_Sprite_Fortress1,SMB3_Bank41Graphics_Sprite_Fortress1,SMB3_Bank40Graphics_Sprite_AirshipSprites2,SMB3_Bank41Graphics_Sprite_UnderwaterEnemies,SMB3_Bank40Graphics_Sprite_AirshipSprites1

DATA_20A9F9:
	db SMB3_Bank40Graphics_Sprite_AirshipSprites1>>16,SMB3_Bank44Graphics_Sprite_BossBass>>16,SMB3_Bank41Graphics_Sprite_Fortress1>>16,SMB3_Bank40Graphics_Sprite_LakituSpinyAndBuzzyBeetle>>16,SMB3_Bank40Graphics_Sprite_SkySprites>>16,SMB3_Bank43Graphics_FG_Cloud1>>16,SMB3_Bank41Graphics_Sprite_UnderwaterEnemies>>16,SMB3_Bank40Graphics_Sprite_ChestItems>>16
	db SMB3_Bank45Graphics_Sprite_Pipe>>16,SMB3_Bank40Graphics_Sprite_DesertEnemies>>16,SMB3_Bank40Graphics_Sprite_AirshipSprites2>>16,SMB3_Bank43Graphics_Sprite_GiantEnemies>>16,SMB3_Bank40Graphics_Sprite_SpikeAndMunchers>>16,SMB3_Bank40Graphics_Sprite_SkySprites>>16,SMB3_Bank46Graphics_FG_GrassPlain1>>16,SMB3_Bank42Graphics_Sprite_MiniGameHost>>16
	db SMB3_Bank43Graphics_BG_CrystalCave>>16,SMB3_Bank45Graphics_Sprite_Pipe>>16,SMB3_Bank40Graphics_BG_Prison>>16,SMB3_Bank40Graphics_Sprite_SkySprites>>16,SMB3_Bank40Graphics_Sprite_SpikeAndMunchers>>16,SMB3_Bank40Graphics_Sprite_AirshipSprites3>>16,SMB3_Bank42Graphics_Sprite_DynamicDoorAndLetters>>16,SMB3_Bank41Graphics_Sprite_Fortress1>>16
	db SMB3_Bank40Graphics_Sprite_DesertEnemies>>16,SMB3_Bank41Graphics_Sprite_UnderwaterEnemies>>16,SMB3_Bank41Graphics_Sprite_Fortress1>>16,SMB3_Bank41Graphics_Sprite_UnderwaterEnemies>>16,SMB3_Bank43Graphics_Sprite_GiantEnemies>>16,SMB3_Bank41Graphics_Sprite_Fortress1>>16,SMB3_Bank40Graphics_Sprite_AirshipSprites1>>16,SMB3_Bank40Graphics_Sprite_SpikeAndMunchers>>16
	db SMB3_Bank44Graphics_Sprite_BossBass>>16,SMB3_Bank44Graphics_Sprite_GiantBlocks>>16,SMB3_Bank44Graphics_Sprite_GiantBlocks>>16,SMB3_Bank40Graphics_Sprite_SkySprites>>16,SMB3_Bank40Graphics_Sprite_SpikeAndMunchers>>16,SMB3_Bank41Graphics_Sprite_Fortress1>>16,SMB3_Bank40Graphics_Sprite_SpikeAndMunchers>>16,SMB3_Bank41Graphics_Sprite_UnderwaterEnemies>>16
	db SMB3_Bank40Graphics_Sprite_SpikeAndMunchers>>16,SMB3_Bank40Graphics_Sprite_SpikeAndMunchers>>16,SMB3_Bank41Graphics_Sprite_Fortress1>>16,SMB3_Bank41Graphics_Sprite_Fortress1>>16,SMB3_Bank41Graphics_Sprite_Fortress1>>16,SMB3_Bank40Graphics_Sprite_AirshipSprites2>>16,SMB3_Bank41Graphics_Sprite_UnderwaterEnemies>>16,SMB3_Bank40Graphics_Sprite_AirshipSprites1>>16

DATA_20AA29:
	dw SMB3_Bank40Graphics_Sprite_AirshipSprites1,SMB3_Bank44Graphics_Sprite_StandardEnemies,SMB3_Bank41Graphics_Sprite_Fortress2,SMB3_Bank44Graphics_Sprite_StandardEnemies,SMB3_Bank44Graphics_Sprite_StandardEnemies,SMB3_Bank44Graphics_Sprite_StandardEnemies,SMB3_Bank44Graphics_Sprite_StandardEnemies,SMB3_Bank44Graphics_Sprite_StandardEnemies
	dw SMB3_Bank44Graphics_Sprite_StandardEnemies,SMB3_Bank44Graphics_Sprite_StandardEnemies,SMB3_Bank40Graphics_Sprite_AirshipSprites1,SMB3_Bank44Graphics_Sprite_StandardEnemies,SMB3_Bank44Graphics_Sprite_StandardEnemies,SMB3_Bank44Graphics_Sprite_StandardEnemies,SMB3_Bank46Graphics_FG_GrassPlain1,SMB3_Bank45Graphics_BG_Leaves1
	dw SMB3_Bank45Graphics_BG_Leaves2,SMB3_Bank42Graphics_Sprite_MiniGameHost,SMB3_Bank40Graphics_BG_BattleMode,SMB3_Bank44Graphics_Sprite_StandardEnemies,SMB3_Bank44Graphics_Sprite_StandardEnemies,SMB3_Bank40Graphics_Sprite_AirshipSprites1,SMB3_Bank46Graphics_FG_GrassyConstructedPlains,SMB3_Bank41Graphics_Sprite_Fortress2
	dw SMB3_Bank44Graphics_Sprite_StandardEnemies,SMB3_Bank44Graphics_Sprite_StandardEnemies,SMB3_Bank44Graphics_Sprite_StandardEnemies,SMB3_Bank44Graphics_Sprite_StandardEnemies,SMB3_Bank44Graphics_Sprite_StandardEnemies,SMB3_Bank41Graphics_Sprite_Fortress2,SMB3_Bank44Graphics_Sprite_StandardEnemies,SMB3_Bank44Graphics_Sprite_StandardEnemies
	dw SMB3_Bank44Graphics_Sprite_StandardEnemies,SMB3_Bank44Graphics_Sprite_StandardEnemies,SMB3_Bank44Graphics_Sprite_StandardEnemies,SMB3_Bank44Graphics_Sprite_StandardEnemies,SMB3_Bank44Graphics_Sprite_StandardEnemies,SMB3_Bank41Graphics_Sprite_Fortress2,SMB3_Bank44Graphics_Sprite_StandardEnemies,SMB3_Bank44Graphics_Sprite_StandardEnemies
	dw SMB3_Bank44Graphics_Sprite_StandardEnemies,SMB3_Bank44Graphics_Sprite_StandardEnemies,SMB3_Bank45Graphics_Sprite_AltStandardEnemies,SMB3_Bank45Graphics_Sprite_AltStandardEnemies,SMB3_Bank41Graphics_Sprite_Fortress2,SMB3_Bank40Graphics_Sprite_AirshipSprites1,SMB3_Bank44Graphics_Sprite_StandardEnemies,SMB3_Bank44Graphics_Sprite_StandardEnemies

DATA_20AA89:
	db SMB3_Bank40Graphics_Sprite_AirshipSprites1>>16,SMB3_Bank44Graphics_Sprite_StandardEnemies>>16,SMB3_Bank41Graphics_Sprite_Fortress2>>16,SMB3_Bank44Graphics_Sprite_StandardEnemies>>16,SMB3_Bank44Graphics_Sprite_StandardEnemies>>16,SMB3_Bank44Graphics_Sprite_StandardEnemies>>16,SMB3_Bank44Graphics_Sprite_StandardEnemies>>16,SMB3_Bank44Graphics_Sprite_StandardEnemies>>16
	db SMB3_Bank44Graphics_Sprite_StandardEnemies>>16,SMB3_Bank44Graphics_Sprite_StandardEnemies>>16,SMB3_Bank40Graphics_Sprite_AirshipSprites1>>16,SMB3_Bank44Graphics_Sprite_StandardEnemies>>16,SMB3_Bank44Graphics_Sprite_StandardEnemies>>16,SMB3_Bank44Graphics_Sprite_StandardEnemies>>16,SMB3_Bank46Graphics_FG_GrassPlain1>>16,SMB3_Bank45Graphics_BG_Leaves1>>16
	db SMB3_Bank45Graphics_BG_Leaves2>>16,SMB3_Bank42Graphics_Sprite_MiniGameHost>>16,SMB3_Bank40Graphics_BG_BattleMode>>16,SMB3_Bank44Graphics_Sprite_StandardEnemies>>16,SMB3_Bank44Graphics_Sprite_StandardEnemies>>16,SMB3_Bank40Graphics_Sprite_AirshipSprites1>>16,SMB3_Bank46Graphics_FG_GrassyConstructedPlains>>16,SMB3_Bank41Graphics_Sprite_Fortress2>>16
	db SMB3_Bank44Graphics_Sprite_StandardEnemies>>16,SMB3_Bank44Graphics_Sprite_StandardEnemies>>16,SMB3_Bank44Graphics_Sprite_StandardEnemies>>16,SMB3_Bank44Graphics_Sprite_StandardEnemies>>16,SMB3_Bank44Graphics_Sprite_StandardEnemies>>16,SMB3_Bank41Graphics_Sprite_Fortress2>>16,SMB3_Bank44Graphics_Sprite_StandardEnemies>>16,SMB3_Bank44Graphics_Sprite_StandardEnemies>>16
	db SMB3_Bank44Graphics_Sprite_StandardEnemies>>16,SMB3_Bank44Graphics_Sprite_StandardEnemies>>16,SMB3_Bank44Graphics_Sprite_StandardEnemies>>16,SMB3_Bank44Graphics_Sprite_StandardEnemies>>16,SMB3_Bank44Graphics_Sprite_StandardEnemies>>16,SMB3_Bank41Graphics_Sprite_Fortress2>>16,SMB3_Bank44Graphics_Sprite_StandardEnemies>>16,SMB3_Bank44Graphics_Sprite_StandardEnemies>>16
	db SMB3_Bank44Graphics_Sprite_StandardEnemies>>16,SMB3_Bank44Graphics_Sprite_StandardEnemies>>16,SMB3_Bank45Graphics_Sprite_AltStandardEnemies>>16,SMB3_Bank45Graphics_Sprite_AltStandardEnemies>>16,SMB3_Bank41Graphics_Sprite_Fortress2>>16,SMB3_Bank40Graphics_Sprite_AirshipSprites1>>16,SMB3_Bank44Graphics_Sprite_StandardEnemies>>16,SMB3_Bank44Graphics_Sprite_StandardEnemies>>16

DATA_20AAB9:
	dw SMB3_Bank40Graphics_Sprite_AirshipSprites1,SMB3_Bank40Graphics_Sprite_LakituSpinyAndBuzzyBeetle,SMB3_Bank44Graphics_Sprite_FlyingBoomBoom,SMB3_Bank40Graphics_Sprite_LakituSpinyAndBuzzyBeetle,SMB3_Bank44Graphics_Sprite_StandardEnemies,SMB3_Bank43Graphics_FG_Cloud1,SMB3_Bank41Graphics_Sprite_LavaLotus,SMB3_Bank45Graphics_FG_ToadHouse1
	dw SMB3_Bank46Graphics_FG_AnimatedLevelTiles4,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank44Graphics_Sprite_KoopaKidsShell,SMB3_Bank43Graphics_FG_AnimatedLevelTiles1,SMB3_Bank46Graphics_FG_GrassyConstructedPlains,SMB3_Bank40Graphics_Sprite_LakituSpinyAndBuzzyBeetle,SMB3_Bank46Graphics_FG_GrassPlain1,SMB3_Bank45Graphics_BG_Leaves1
	dw SMB3_Bank45Graphics_BG_Leaves2,SMB3_Bank42Graphics_Sprite_MiniGameHost,SMB3_Bank40Graphics_BG_BattleMode,SMB3_Bank40Graphics_Sprite_LakituSpinyAndBuzzyBeetle,SMB3_Bank40Graphics_Sprite_LakituSpinyAndBuzzyBeetle,SMB3_Bank44Graphics_Sprite_FlyingBoomBoom,SMB3_Bank46Graphics_FG_GrassyConstructedPlains,SMB3_Bank44Graphics_Sprite_FlyingBoomBoom
	dw SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank44Graphics_Sprite_FlyingBoomBoom,SMB3_Bank41Graphics_Sprite_LavaLotus,SMB3_Bank43Graphics_FG_AnimatedLevelTiles1,SMB3_Bank44Graphics_Sprite_FlyingBoomBoom,SMB3_Bank40Graphics_Sprite_LakituSpinyAndBuzzyBeetle,SMB3_Bank40Graphics_Sprite_LakituSpinyAndBuzzyBeetle
	dw SMB3_Bank40Graphics_Sprite_LakituSpinyAndBuzzyBeetle,SMB3_Bank40Graphics_Sprite_AirshipSprites1,SMB3_Bank40Graphics_Sprite_AirshipSprites1,SMB3_Bank40Graphics_Sprite_AirshipSprites1,SMB3_Bank40Graphics_Sprite_AirshipSprites1,SMB3_Bank44Graphics_Sprite_FlyingBoomBoom,SMB3_Bank40Graphics_Sprite_AirshipSprites1,SMB3_Bank41Graphics_Sprite_LavaLotus
	dw SMB3_Bank40Graphics_Sprite_AirshipSprites1,SMB3_Bank40Graphics_Sprite_LakituSpinyAndBuzzyBeetle,SMB3_Bank44Graphics_Sprite_FlyingBoomBoom,SMB3_Bank44Graphics_Sprite_FlyingBoomBoom,SMB3_Bank45Graphics_Sprite_Bowser1,SMB3_Bank44Graphics_Sprite_KoopaKidsShell,SMB3_Bank41Graphics_Sprite_LavaLotus,SMB3_Bank40Graphics_Sprite_AirshipSprites1

DATA_20AB19:
	db SMB3_Bank40Graphics_Sprite_AirshipSprites1>>16,SMB3_Bank40Graphics_Sprite_LakituSpinyAndBuzzyBeetle>>16,SMB3_Bank44Graphics_Sprite_FlyingBoomBoom>>16,SMB3_Bank40Graphics_Sprite_LakituSpinyAndBuzzyBeetle>>16,SMB3_Bank44Graphics_Sprite_StandardEnemies>>16,SMB3_Bank43Graphics_FG_Cloud1>>16,SMB3_Bank41Graphics_Sprite_LavaLotus>>16,SMB3_Bank45Graphics_FG_ToadHouse1>>16
	db SMB3_Bank46Graphics_FG_AnimatedLevelTiles4>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank44Graphics_Sprite_KoopaKidsShell>>16,SMB3_Bank43Graphics_FG_AnimatedLevelTiles1>>16,SMB3_Bank46Graphics_FG_GrassyConstructedPlains>>16,SMB3_Bank40Graphics_Sprite_LakituSpinyAndBuzzyBeetle>>16,SMB3_Bank46Graphics_FG_GrassPlain1>>16,SMB3_Bank45Graphics_BG_Leaves1>>16
	db SMB3_Bank45Graphics_BG_Leaves2>>16,SMB3_Bank42Graphics_Sprite_MiniGameHost>>16,SMB3_Bank40Graphics_BG_BattleMode>>16,SMB3_Bank40Graphics_Sprite_LakituSpinyAndBuzzyBeetle>>16,SMB3_Bank40Graphics_Sprite_LakituSpinyAndBuzzyBeetle>>16,SMB3_Bank44Graphics_Sprite_FlyingBoomBoom>>16,SMB3_Bank46Graphics_FG_GrassyConstructedPlains>>16,SMB3_Bank44Graphics_Sprite_FlyingBoomBoom>>16
	db SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank44Graphics_Sprite_FlyingBoomBoom>>16,SMB3_Bank41Graphics_Sprite_LavaLotus>>16,SMB3_Bank43Graphics_FG_AnimatedLevelTiles1>>16,SMB3_Bank44Graphics_Sprite_FlyingBoomBoom>>16,SMB3_Bank40Graphics_Sprite_LakituSpinyAndBuzzyBeetle>>16,SMB3_Bank40Graphics_Sprite_LakituSpinyAndBuzzyBeetle>>16
	db SMB3_Bank40Graphics_Sprite_LakituSpinyAndBuzzyBeetle>>16,SMB3_Bank40Graphics_Sprite_AirshipSprites1>>16,SMB3_Bank40Graphics_Sprite_AirshipSprites1>>16,SMB3_Bank40Graphics_Sprite_AirshipSprites1>>16,SMB3_Bank40Graphics_Sprite_AirshipSprites1>>16,SMB3_Bank44Graphics_Sprite_FlyingBoomBoom>>16,SMB3_Bank40Graphics_Sprite_AirshipSprites1>>16,SMB3_Bank41Graphics_Sprite_LavaLotus>>16
	db SMB3_Bank40Graphics_Sprite_AirshipSprites1>>16,SMB3_Bank40Graphics_Sprite_LakituSpinyAndBuzzyBeetle>>16,SMB3_Bank44Graphics_Sprite_FlyingBoomBoom>>16,SMB3_Bank44Graphics_Sprite_FlyingBoomBoom>>16,SMB3_Bank45Graphics_Sprite_Bowser1>>16,SMB3_Bank44Graphics_Sprite_KoopaKidsShell>>16,SMB3_Bank41Graphics_Sprite_LavaLotus>>16,SMB3_Bank40Graphics_Sprite_AirshipSprites1>>16

DATA_20AB49:
	dw SMB3_Bank40Graphics_Sprite_AirshipSprites1,SMB3_Bank44Graphics_Sprite_BroEnemies,SMB3_Bank43Graphics_Sprite_BoomBoom,SMB3_Bank46Graphics_FG_GrassPlain1,SMB3_Bank44Graphics_Sprite_StandardEnemies,SMB3_Bank43Graphics_FG_Cloud1,SMB3_Bank46Graphics_FG_GrassyConstructedPlains,SMB3_Bank45Graphics_FG_ToadHouse1
	dw SMB3_Bank46Graphics_FG_AnimatedLevelTiles4,SMB3_Bank44Graphics_Sprite_BroEnemies,SMB3_Bank46Graphics_FG_AnimatedLevelTiles4,SMB3_Bank44Graphics_Sprite_BroEnemies,SMB3_Bank44Graphics_Sprite_BroEnemies,SMB3_Bank44Graphics_Sprite_BroEnemies,SMB3_Bank46Graphics_FG_GrassPlain1,SMB3_Bank45Graphics_BG_Leaves1
	dw SMB3_Bank45Graphics_BG_Leaves2,SMB3_Bank42Graphics_Sprite_MiniGameHost,SMB3_Bank40Graphics_BG_BattleMode,SMB3_Bank44Graphics_Sprite_BroEnemies,SMB3_Bank46Graphics_FG_GrassyConstructedPlains,SMB3_Bank43Graphics_Sprite_BoomBoom,SMB3_Bank46Graphics_FG_GrassyConstructedPlains,SMB3_Bank43Graphics_Sprite_BoomBoom
	dw SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2,SMB3_Bank43Graphics_Sprite_BoomBoom,SMB3_Bank46Graphics_FG_GrassyConstructedPlains,SMB3_Bank46Graphics_FG_Giant1,SMB3_Bank43Graphics_Sprite_BoomBoom,SMB3_Bank44Graphics_Sprite_KoopaKids4,SMB3_Bank44Graphics_Sprite_KoopaKids4
	dw SMB3_Bank44Graphics_Sprite_KoopaKids4,SMB3_Bank40Graphics_Sprite_AirshipSprites1,SMB3_Bank40Graphics_Sprite_AirshipSprites1,SMB3_Bank40Graphics_Sprite_AirshipSprites1,SMB3_Bank40Graphics_Sprite_AirshipSprites1,SMB3_Bank43Graphics_Sprite_BoomBoom,SMB3_Bank40Graphics_Sprite_AirshipSprites1,SMB3_Bank40Graphics_Sprite_AirshipSprites1
	dw SMB3_Bank40Graphics_Sprite_AirshipSprites1,SMB3_Bank40Graphics_Sprite_AirshipSprites1,SMB3_Bank43Graphics_Sprite_BoomBoom,SMB3_Bank43Graphics_Sprite_BoomBoom,SMB3_Bank45Graphics_Sprite_Bowser2,SMB3_Bank44Graphics_Sprite_BroEnemies,SMB3_Bank40Graphics_Sprite_AirshipSprites1,SMB3_Bank44Graphics_Sprite_BroEnemies

DATA_20ABA9:
	db SMB3_Bank40Graphics_Sprite_AirshipSprites1>>16,SMB3_Bank44Graphics_Sprite_BroEnemies>>16,SMB3_Bank43Graphics_Sprite_BoomBoom>>16,SMB3_Bank46Graphics_FG_GrassPlain1>>16,SMB3_Bank44Graphics_Sprite_StandardEnemies>>16,SMB3_Bank43Graphics_FG_Cloud1>>16,SMB3_Bank46Graphics_FG_GrassyConstructedPlains>>16,SMB3_Bank45Graphics_FG_ToadHouse1>>16
	db SMB3_Bank46Graphics_FG_AnimatedLevelTiles4>>16,SMB3_Bank44Graphics_Sprite_BroEnemies>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles4>>16,SMB3_Bank44Graphics_Sprite_BroEnemies>>16,SMB3_Bank44Graphics_Sprite_BroEnemies>>16,SMB3_Bank44Graphics_Sprite_BroEnemies>>16,SMB3_Bank46Graphics_FG_GrassPlain1>>16,SMB3_Bank45Graphics_BG_Leaves1>>16
	db SMB3_Bank45Graphics_BG_Leaves2>>16,SMB3_Bank42Graphics_Sprite_MiniGameHost>>16,SMB3_Bank40Graphics_BG_BattleMode>>16,SMB3_Bank44Graphics_Sprite_BroEnemies>>16,SMB3_Bank46Graphics_FG_GrassyConstructedPlains>>16,SMB3_Bank43Graphics_Sprite_BoomBoom>>16,SMB3_Bank46Graphics_FG_GrassyConstructedPlains>>16,SMB3_Bank43Graphics_Sprite_BoomBoom>>16
	db SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank46Graphics_FG_AnimatedLevelTiles2>>16,SMB3_Bank43Graphics_Sprite_BoomBoom>>16,SMB3_Bank46Graphics_FG_GrassyConstructedPlains>>16,SMB3_Bank46Graphics_FG_Giant1>>16,SMB3_Bank43Graphics_Sprite_BoomBoom>>16,SMB3_Bank44Graphics_Sprite_KoopaKids4>>16,SMB3_Bank44Graphics_Sprite_KoopaKids4>>16
	db SMB3_Bank44Graphics_Sprite_KoopaKids4>>16,SMB3_Bank40Graphics_Sprite_AirshipSprites1>>16,SMB3_Bank40Graphics_Sprite_AirshipSprites1>>16,SMB3_Bank40Graphics_Sprite_AirshipSprites1>>16,SMB3_Bank40Graphics_Sprite_AirshipSprites1>>16,SMB3_Bank43Graphics_Sprite_BoomBoom>>16,SMB3_Bank40Graphics_Sprite_AirshipSprites1>>16,SMB3_Bank40Graphics_Sprite_AirshipSprites1>>16
	db SMB3_Bank40Graphics_Sprite_AirshipSprites1>>16,SMB3_Bank40Graphics_Sprite_AirshipSprites1>>16,SMB3_Bank43Graphics_Sprite_BoomBoom>>16,SMB3_Bank43Graphics_Sprite_BoomBoom>>16,SMB3_Bank45Graphics_Sprite_Bowser2>>16,SMB3_Bank44Graphics_Sprite_BroEnemies>>16,SMB3_Bank40Graphics_Sprite_AirshipSprites1>>16,SMB3_Bank44Graphics_Sprite_BroEnemies>>16

DATA_20ABD9:
	dw SMB3_Bank40Graphics_Sprite_ChestItems,SMB3_Bank40Graphics_Sprite_ChestItems,SMB3_Bank40Graphics_Sprite_ChestItems,SMB3_Bank40Graphics_Sprite_ChestItems,SMB3_Bank40Graphics_Sprite_ChestItems,SMB3_Bank40Graphics_Sprite_ChestItems,SMB3_Bank40Graphics_Sprite_ChestItems,SMB3_Bank40Graphics_Sprite_ChestItems
	dw SMB3_Bank40Graphics_Sprite_ChestItems,SMB3_Bank40Graphics_Sprite_ChestItems,SMB3_Bank40Graphics_Sprite_ChestItems,SMB3_Bank44Graphics_Sprite_GiantBlocks,SMB3_Bank40Graphics_Sprite_ChestItems,SMB3_Bank40Graphics_Sprite_ChestItems,SMB3_Bank40Graphics_Sprite_ChestItems,SMB3_Bank40Graphics_Sprite_ChestItems
	dw SMB3_Bank40Graphics_Sprite_ChestItems,SMB3_Bank40Graphics_Sprite_ChestItems,SMB3_Bank40Graphics_Sprite_ChestItems,SMB3_Bank40Graphics_Sprite_ChestItems,SMB3_Bank40Graphics_Sprite_ChestItems,SMB3_Bank40Graphics_Sprite_ChestItems,SMB3_Bank40Graphics_Sprite_ChestItems,SMB3_Bank40Graphics_Sprite_ChestItems
	dw SMB3_Bank40Graphics_Sprite_ChestItems,SMB3_Bank40Graphics_Sprite_ChestItems,SMB3_Bank40Graphics_Sprite_ChestItems,SMB3_Bank40Graphics_Sprite_ChestItems,SMB3_Bank44Graphics_Sprite_GiantBlocks,SMB3_Bank40Graphics_Sprite_ChestItems,SMB3_Bank40Graphics_Sprite_ChestItems,SMB3_Bank40Graphics_Sprite_ChestItems
	dw SMB3_Bank40Graphics_Sprite_ChestItems,SMB3_Bank44Graphics_Sprite_GiantBlocks,SMB3_Bank44Graphics_Sprite_GiantBlocks,SMB3_Bank40Graphics_Sprite_ChestItems,SMB3_Bank40Graphics_Sprite_ChestItems,SMB3_Bank40Graphics_Sprite_ChestItems,SMB3_Bank40Graphics_Sprite_ChestItems,SMB3_Bank40Graphics_Sprite_ChestItems
	dw SMB3_Bank40Graphics_Sprite_ChestItems,SMB3_Bank40Graphics_Sprite_ChestItems,SMB3_Bank40Graphics_Sprite_ChestItems,SMB3_Bank40Graphics_Sprite_ChestItems,SMB3_Bank45Graphics_Sprite_Bowser3,SMB3_Bank40Graphics_Sprite_ChestItems,SMB3_Bank40Graphics_Sprite_ChestItems,SMB3_Bank40Graphics_Sprite_ChestItems

DATA_20AC39:
	db SMB3_Bank40Graphics_Sprite_ChestItems>>16,SMB3_Bank40Graphics_Sprite_ChestItems>>16,SMB3_Bank40Graphics_Sprite_ChestItems>>16,SMB3_Bank40Graphics_Sprite_ChestItems>>16,SMB3_Bank40Graphics_Sprite_ChestItems>>16,SMB3_Bank40Graphics_Sprite_ChestItems>>16,SMB3_Bank40Graphics_Sprite_ChestItems>>16,SMB3_Bank40Graphics_Sprite_ChestItems>>16
	db SMB3_Bank40Graphics_Sprite_ChestItems>>16,SMB3_Bank40Graphics_Sprite_ChestItems>>16,SMB3_Bank40Graphics_Sprite_ChestItems>>16,SMB3_Bank44Graphics_Sprite_GiantBlocks>>16,SMB3_Bank40Graphics_Sprite_ChestItems>>16,SMB3_Bank40Graphics_Sprite_ChestItems>>16,SMB3_Bank40Graphics_Sprite_ChestItems>>16,SMB3_Bank40Graphics_Sprite_ChestItems>>16
	db SMB3_Bank40Graphics_Sprite_ChestItems>>16,SMB3_Bank40Graphics_Sprite_ChestItems>>16,SMB3_Bank40Graphics_Sprite_ChestItems>>16,SMB3_Bank40Graphics_Sprite_ChestItems>>16,SMB3_Bank40Graphics_Sprite_ChestItems>>16,SMB3_Bank40Graphics_Sprite_ChestItems>>16,SMB3_Bank40Graphics_Sprite_ChestItems>>16,SMB3_Bank40Graphics_Sprite_ChestItems>>16
	db SMB3_Bank40Graphics_Sprite_ChestItems>>16,SMB3_Bank40Graphics_Sprite_ChestItems>>16,SMB3_Bank40Graphics_Sprite_ChestItems>>16,SMB3_Bank40Graphics_Sprite_ChestItems>>16,SMB3_Bank44Graphics_Sprite_GiantBlocks>>16,SMB3_Bank40Graphics_Sprite_ChestItems>>16,SMB3_Bank40Graphics_Sprite_ChestItems>>16,SMB3_Bank40Graphics_Sprite_ChestItems>>16
	db SMB3_Bank40Graphics_Sprite_ChestItems>>16,SMB3_Bank44Graphics_Sprite_GiantBlocks>>16,SMB3_Bank44Graphics_Sprite_GiantBlocks>>16,SMB3_Bank40Graphics_Sprite_ChestItems>>16,SMB3_Bank40Graphics_Sprite_ChestItems>>16,SMB3_Bank40Graphics_Sprite_ChestItems>>16,SMB3_Bank40Graphics_Sprite_ChestItems>>16,SMB3_Bank40Graphics_Sprite_ChestItems>>16
	db SMB3_Bank40Graphics_Sprite_ChestItems>>16,SMB3_Bank40Graphics_Sprite_ChestItems>>16,SMB3_Bank40Graphics_Sprite_ChestItems>>16,SMB3_Bank40Graphics_Sprite_ChestItems>>16,SMB3_Bank45Graphics_Sprite_Bowser3>>16,SMB3_Bank40Graphics_Sprite_ChestItems>>16,SMB3_Bank40Graphics_Sprite_ChestItems>>16,SMB3_Bank40Graphics_Sprite_ChestItems>>16

DATA_20AC69:
	db SMB3_Bank44Graphics_Sprite_KoopaKids1>>16,SMB3_Bank44Graphics_Sprite_KoopaKids1>>16,SMB3_Bank44Graphics_Sprite_KoopaKids2>>16,SMB3_Bank44Graphics_Sprite_KoopaKids2>>16,SMB3_Bank44Graphics_Sprite_KoopaKids3>>16,SMB3_Bank44Graphics_Sprite_KoopaKids3>>16,SMB3_Bank44Graphics_Sprite_KoopaKids4>>16,SMB3_Bank44Graphics_Sprite_BroEnemies>>16

DATA_20AC71:
	dw SMB3_Bank44Graphics_Sprite_KoopaKids1,SMB3_Bank44Graphics_Sprite_KoopaKids1,SMB3_Bank44Graphics_Sprite_KoopaKids2,SMB3_Bank44Graphics_Sprite_KoopaKids2,SMB3_Bank44Graphics_Sprite_KoopaKids3,SMB3_Bank44Graphics_Sprite_KoopaKids3,SMB3_Bank44Graphics_Sprite_KoopaKids4,SMB3_Bank44Graphics_Sprite_BroEnemies

Main:
	PHB
	PHK
	PLB
	REP.b #$20
	LDY.w !RAM_SMB3_Level_GraphicsAndPaletteSettingFromHeader
	STY.b $00
	LDA.w DATA_20A601,y
	AND.w #$00FF
	TAX
	TYA
	AND.w #$00FF
	ASL
	TAY
	LDA.w DATA_20A5A1,y
	STA.b $0D
	STX.b $0F
	LDA.w #$1000
	STA.b $0B
	LDA.w #$2000
	JSR.w SMB3_CopyOfDMADataToVRAM_Main
	LDX.b $00
	CPX.b #$0F
	BNE.b CODE_20ACC7
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	BEQ.b CODE_20ACC7
	STZ.b $0D
	LDA.w #SMB3_Bank42Graphics_FG_MinigameIntroLuigi>>8
	STA.b $0E
	LDA.w #$0800
	STA.b $0B
	LDA.w #$2400
	JSR.w SMB3_CopyOfDMADataToVRAM_Main
CODE_20ACC7:
	LDA.w !RAM_SMB3_Level_PSwitchTimer
	AND.w #$00FF
	BEQ.b CODE_20ACDA
	LDY.b #SMB3_Bank43Graphics_FG_AnimatedLevelTiles1>>16
	STY.b $0F
	LDA.w #SMB3_Bank43Graphics_FG_AnimatedLevelTiles1
	STA.b $0D
	BRA.b CODE_20ACE7

CODE_20ACDA:
	LDA.w DATA_20A631,y
	STA.b $0D
	LDY.b $00
	LDA.w DATA_20A691,y
	TAX
	STX.b $0F
CODE_20ACE7:
	LDA.w #$1000
	STA.b $0B
	LDA.w #$2800
	JSR.w SMB3_CopyOfDMADataToVRAM_Main
	LDY.w !RAM_SMB3_Level_GraphicsAndPaletteSettingFromHeader
	LDA.w DATA_20A721,y
	AND.w #$00FF
	TAX
	TYA
	AND.w #$00FF
	ASL
	TAY
	LDA.w DATA_20A6C1,y
	STA.b $0D
	STX.b $0F
	LDA.w #$0800
	STA.b $0B
	LDA.w #$3000
	JSR.w SMB3_CopyOfDMADataToVRAM_Main
	STZ.b $0D
	LDA.w !RAM_SMB3_Level_Layer2BGFromHeader
	AND.w #$00FF
	ASL
	TAY
	LDA.w DATA_20A751,y
	STA.b $0E
	LDA.w !RAM_SMB3_Level_Layer3BGFromHeader
	AND.w #$00FF
	CMP.w #$0006
	BNE.b CODE_20AD33
	LDA.w #SMB3_Bank3AGraphics_BG_Underwater1>>8
	STA.b $0E
CODE_20AD33:
	LDA.w #$0800
	STA.b $0B
	LDA.w #$3400
	JSR.w SMB3_CopyOfDMADataToVRAM_Main
	STZ.b $0D
	LDA.w !RAM_SMB3_Level_Layer2BGFromHeader
	AND.w #$00FF
	ASL
	TAY
	LDA.w DATA_20A79D,y
	STA.b $0E
	LDA.w !RAM_SMB3_Level_Layer3BGFromHeader
	AND.w #$00FF
	CMP.w #$0006
	BNE.b CODE_20AD5D
	LDA.w #SMB3_Bank3AGraphics_BG_Underwater2>>8
	STA.b $0E
CODE_20AD5D:
	LDA.w #$0800
	STA.b $0B
	LDA.w #$3800
	JSR.w SMB3_CopyOfDMADataToVRAM_Main
	LDY.w !RAM_SMB3_Level_GraphicsAndPaletteSettingFromHeader
	LDA.w DATA_20A849,y
	AND.w #$00FF
	TAX
	TYA
	AND.w #$00FF
	ASL
	TAY
	LDA.w DATA_20A7E9,y
	STA.b $0D
	STX.b $0F
	LDA.w #$0800
	STA.b $0B
	LDA.w #$3C00
	JSR.w SMB3_CopyOfDMADataToVRAM_Main
	LDY.w !RAM_SMB3_Level_GraphicsAndPaletteSettingFromHeader
	LDA.w DATA_20A8D9,y
	AND.w #$00FF
	TAX
	TYA
	AND.w #$00FF
	ASL
	TAY
	LDA.w DATA_20A879,y
	STA.b $0D
	STX.b $0F
	LDA.w #$0800
	STA.b $0B
	LDA.w #$4000
	JSR.w SMB3_CopyOfDMADataToVRAM_Main
	LDA.w #SMB3_Bank42Graphics_FG_StandardTiles
	STA.b $0D
	LDX.b #SMB3_Bank42Graphics_FG_StandardTiles>>16
	STX.b $0F
	LDA.w #$0800
	STA.b $0B
	LDA.w #$4400
	JSR.w SMB3_CopyOfDMADataToVRAM_Main
	LDY.w !RAM_SMB3_Level_GraphicsAndPaletteSettingFromHeader
	CPY.b #$16
	BNE.b CODE_20ADCA
	BRL.w CODE_20A58D

CODE_20ADCA:
	LDA.w #SMB3_Bank3FGraphics_Sprite_Global1
	STA.b $0D
	LDX.b #SMB3_Bank3FGraphics_Sprite_Global1>>16
	STX.b $0F
	LDA.w #$0800
	STA.b $0B
	JSR.w SMB3_DMADataToVRAM_Entry2
	LDY.w !RAM_SMB3_Level_GraphicsAndPaletteSettingFromHeader
	LDA.w DATA_20A969,y
	AND.w #$00FF
	TAX
	TYA
	AND.w #$00FF
	ASL
	TAY
	LDA.w DATA_20A909,y
	STA.b $0D
	STX.b $0F
	LDA.w #$0800
	STA.b $0B
	LDA.w #$6400
	JSR.w SMB3_DMADataToVRAM_Main
	LDY.w !RAM_SMB3_Level_GraphicsAndPaletteSettingFromHeader
	LDA.w DATA_20A9F9,y
	AND.w #$00FF
	TAX
	TYA
	AND.w #$00FF
	ASL
	TAY
	LDA.w DATA_20A999,y
	STA.b $0D
	STX.b $0F
	LDA.w #$0800
	STA.b $0B
	LDA.w #$6800
	JSR.w SMB3_DMADataToVRAM_Main
	LDY.w !RAM_SMB3_Level_GraphicsAndPaletteSettingFromHeader
	LDA.w DATA_20AA89,y
	AND.w #$00FF
	TAX
	TYA
	AND.w #$00FF
	ASL
	TAY
	LDA.w DATA_20AA29,y
	STA.b $0D
	STX.b $0F
	LDA.w #$0800
	STA.b $0B
	LDA.w #$6C00
	JSR.w SMB3_DMADataToVRAM_Main
	LDY.w !RAM_SMB3_Level_GraphicsAndPaletteSettingFromHeader
	LDA.w DATA_20AB19,y
	AND.w #$00FF
	TAX
	TYA
	AND.w #$00FF
	ASL
	TAY
	LDA.w DATA_20AAB9,y
	STA.b $0D
	STX.b $0F
	LDA.w #$0800
	STA.b $0B
	LDA.w #$7000
	JSR.w SMB3_DMADataToVRAM_Main
	LDY.w !RAM_SMB3_Level_GraphicsAndPaletteSettingFromHeader
	CPY.b #$0A
	BNE.b CODE_20AE87
	LDA.w !RAM_SMB3_Global_CurrentWorld
	AND.w #$00FF
	TAY
	LDA.w DATA_20AC69,y
	AND.w #$00FF
	TAX
	TYA
	AND.w #$00FF
	ASL
	TAY
	LDA.w DATA_20AC71,y
	STA.b $0D
	STX.b $0F
	BRA.b CODE_20AE9B

CODE_20AE87:
	LDA.w DATA_20ABA9,y
	AND.w #$00FF
	TAX
	TYA
	AND.w #$00FF
	ASL
	TAY
	LDA.w DATA_20AB49,y
	STA.b $0D
	STX.b $0F
CODE_20AE9B:
	LDA.w #$0800
	STA.b $0B
	LDA.w #$7400
	JSR.w SMB3_DMADataToVRAM_Main
	LDY.w !RAM_SMB3_Level_GraphicsAndPaletteSettingFromHeader
	LDA.w DATA_20AC39,y
	AND.w #$00FF
	TAX
	TYA
	AND.w #$00FF
	ASL
	TAY
	LDA.w DATA_20ABD9,y
	STA.b $0D
	STX.b $0F
	LDA.w #$0800
	STA.b $0B
	LDA.w #$7800
	JSR.w SMB3_DMADataToVRAM_Main
	LDA.w #SMB3_Bank3FGraphics_Sprite_Global3
	STA.b $0D
	LDX.b #SMB3_Bank3FGraphics_Sprite_Global3>>16
	STX.b $0F
	LDA.w #$0800
	STA.b $0B
	LDA.w #$7C00
	JSR.w SMB3_DMADataToVRAM_Main
CODE_20AEDC:
	SEP.b #$20
	LDA.w !RAM_SMB3_Level_Layer3BGFromHeader
	CMP.b #$02
	BEQ.b CODE_20AF14
	CMP.b #$05
	BEQ.b CODE_20AF14
	CMP.b #$07
	BEQ.b CODE_20AF14
	CMP.b #$08
	BEQ.b CODE_20AF14
	CMP.b #$09
	BEQ.b CODE_20AF27
	CMP.b #$0A
	BEQ.b CODE_20AF3A
	CMP.b #$0B
	BEQ.b CODE_20AF27
	CMP.b #$0C
	BEQ.b CODE_20AF14
	CMP.b #$0E
	BEQ.b CODE_20AF14
	CMP.b #$0F
	BEQ.b CODE_20AF27
	CMP.b #$03
	BEQ.b CODE_20AF4D
	CMP.b #$04
	BEQ.b CODE_20AF4D
	JMP.w CODE_20AF6D

CODE_20AF14:
	REP.b #$20
	LDA.w #$5800
	STA.w !REGISTER_VRAMAddressLo
	LDA.w #SMB3_Bank38Graphics_Layer3_CloudsEnd-SMB3_Bank38Graphics_Layer3_Clouds
	STA.w DMA[$00].SizeLo
	LDA.w #SMB3_Bank38Graphics_Layer3_Clouds
	BRA.b CODE_20AF5E

CODE_20AF27:
	REP.b #$20
	LDA.w #$5800
	STA.w !REGISTER_VRAMAddressLo
	LDA.w #SMB3_Bank38Graphics_Layer3_PillarsEnd-SMB3_Bank38Graphics_Layer3_Pillars
	STA.w DMA[$00].SizeLo
	LDA.w #SMB3_Bank38Graphics_Layer3_Pillars
	BRA.b CODE_20AF5E

CODE_20AF3A:
	REP.b #$20
	LDA.w #$5800
	STA.w !REGISTER_VRAMAddressLo
	LDA.w #SMB3_Bank38Graphics_Layer3_CaveEnd-SMB3_Bank38Graphics_Layer3_Cave
	STA.w DMA[$00].SizeLo
	LDA.w #SMB3_Bank38Graphics_Layer3_Cave
	BRA.b CODE_20AF5E

CODE_20AF4D:
	REP.b #$20
	LDA.w #$5800
	STA.w !REGISTER_VRAMAddressLo
	LDA.w #SMB3_Bank38Graphics_Layer3_AirshipCloudsEnd-SMB3_Bank38Graphics_Layer3_AirshipClouds
	STA.w DMA[$00].SizeLo
	LDA.w #SMB3_Bank38Graphics_Layer3_AirshipClouds
CODE_20AF5E:
	STA.w DMA[$00].SourceLo
	SEP.b #$20
	LDA.b #SMB3_Bank38Graphics_Layer3>>16
	STA.w DMA[$00].SourceBank
	LDA.b #$01
	STA.w !REGISTER_DMAEnable
CODE_20AF6D:
	PLB
	RTL
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_OverworldTileAnimations(Address)
namespace SMB3_OverworldTileAnimations
%InsertMacroAtXPosition(<Address>)

Main:
	LDX.w !RAM_SMB3_Global_CurrentWorld
	CPX.b #$07
	BNE.b CODE_29BD4D
	LDY.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.w !RAM_SMB3_Overworld_Mario_XPosHi,y
	CMP.b #$03
	BNE.b CODE_29BD4D
	LDA.b #$FF
	STA.w !RAM_SMB3_Global_AnimatedFGTileAnimationFrameIndex
	BRA.b CODE_29BD70

CODE_29BD4D:
	LDY.w $0599
	DEC.w !RAM_SMB3_Overworld_TileAnimationTimer
	BPL.b CODE_29BD70
	STZ.w !RAM_SMB3_Global_AnimatedFGTileAnimationFrameIndex
	INY
	TYA
	AND.b #$03
	STA.w $0599
	TAY
	TXA
	ASL
	ASL
	ORA.w $0599
	TAX
	LDA.w DATA_21E8E9,x
	STA.w !RAM_SMB3_Overworld_TileAnimationTimer
	STY.w $0244
CODE_29BD70:
	LDA.w !RAM_SMB3_Global_AnimatedFGTileAnimationFrameIndex
	BMI.b CODE_29BDCB
	CMP.b #$08
	BCC.b CODE_29BD7F
	LDA.b #$FF
	STA.w !RAM_SMB3_Global_AnimatedFGTileAnimationFrameIndex
	RTL

CODE_29BD7F:
	STZ.b $00
	LDX.w !RAM_SMB3_Global_CurrentWorld
	CPX.b #$04
	BNE.b CODE_29BD8C
	LDA.b #$04
	STA.b $00
CODE_29BD8C:
	LDA.w $0244
	CLC
	ADC.b $00
	TAX
	LDA.w DATA_21E90D,x
	STA.w $0242
	LDA.w DATA_21E915,x
	STA.w $0241
	LDA.w DATA_21E91D,x
	STA.w $0240
	LDA.w !RAM_SMB3_Global_AnimatedFGTileAnimationFrameIndex
	ASL
	TAY
	REP.b #$20
	LDA.w #$0200
	STA.w $02CA
	LDA.w $0240
	CLC
	ADC.w DATA_21E925,y
	STA.w $0240
	LDA.w #$2000
	CLC
	ADC.w DATA_21E935,y
	STA.w $023E
	SEP.b #$20
	INC.w !RAM_SMB3_Global_AnimatedFGTileAnimationFrameIndex
CODE_29BDCB:
	RTL
namespace off
endmacro

;--------------------------------------------------------------------

macro ROUTINE_SMB3_LevelTileAnimations(Address)
namespace SMB3_LevelTileAnimations
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.w !RAM_SMB3_Global_AnimatedFGTileAnimationFrameIndex
	BMI.b CODE_20A08A
	CMP.b #$08
	BCC.b CODE_20A04F
	LDA.b #$FF
	STA.w !RAM_SMB3_Global_AnimatedFGTileAnimationFrameIndex
	RTS

CODE_20A04F:
	LDX.w $0245
	LDA.w DATA_21CA14,x
	STA.w $0242
	LDA.w DATA_21CA19,x
	STA.w $0241
	LDA.w DATA_21CA1E,x
	STA.w $0240
	LDA.w !RAM_SMB3_Global_AnimatedFGTileAnimationFrameIndex
	ASL
	TAY
	REP.b #$20
	LDA.w #$0200
	STA.w $02CA
	LDA.w $0240
	CLC
	ADC.w DATA_21E925,y
	STA.w $0240
	LDA.w #$2800
	CLC
	ADC.w DATA_21E935,y
	STA.w $023E
	SEP.b #$20
	INC.w !RAM_SMB3_Global_AnimatedFGTileAnimationFrameIndex
CODE_20A08A:
	RTS
namespace off
endmacro

;--------------------------------------------------------------------

macro ROUTINE_SMB3_TankLevelTileAnimations(Address)
namespace SMB3_TankLevelTileAnimations
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.w !RAM_SMB3_Global_AnimatedFGTileAnimationFrameIndex
	BMI.b CODE_20A0D6
	CMP.b #$04
	BCC.b CODE_20A09A
	LDA.b #$FF
	STA.w !RAM_SMB3_Global_AnimatedFGTileAnimationFrameIndex
	RTS

CODE_20A09A:
	LDX.w $0246
	LDA.w DATA_21CA23,x
	STA.w $0242
	LDA.w DATA_21CA26,x
	STA.w $0241
	LDA.w DATA_21CA29,x
	STA.w $0240
	LDA.w !RAM_SMB3_Global_AnimatedFGTileAnimationFrameIndex
	ASL
	ASL
	TAY
	REP.b #$20
	LDA.w #$0400
	STA.w $02CA
	LDA.w $0240
	CLC
	ADC.w DATA_21E925,y
	STA.w $0240
	LDA.w #$2800
	CLC
	ADC.w DATA_21E935,y
	STA.w $023E
	SEP.b #$20
	INC.w !RAM_SMB3_Global_AnimatedFGTileAnimationFrameIndex
CODE_20A0D6:
	RTS
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro DATATABLE_RT00_SMB3_LevelData(Address)
namespace SMB3
%InsertMacroAtXPosition(<Address>)

LevelData_5_7_Level_Sub:
;$248A76
	dl LevelData_5_7_Level_Main
	dl LevelData_5_7_Sprite_Main
	incbin "Levels/World5/5-7_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_7_5_Level_Sub:
;$248B39
	dl LevelData_7_5_Level_Main
	dl LevelData_7_5_Sprite_Main
	incbin "Levels/World7/7-5_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_UnknownLevelData_248C99:
;$248C99
	dl $000000
	dl $000000
	incbin "Levels/Unknown/UnknownLevelData_248C99.bin":6-

;--------------------------------------------------------------------

LevelData_Unused01_Level_Main:
;$248CB7
	dl LevelData_GenericLevelEnd_Level
	dl LevelData_GenericLevelEnd_Sprite
	incbin "Levels/Unused/Unused01_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_4_6_Level_Sub:
;$248DE4
	dl LevelData_4_6_Level_Main
	dl LevelData_4_6_Sprite_Main
	incbin "Levels/World4/4-6_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_Unused02_Level_Main:
;$248ED4
	dl LevelData_Unused02_Level_Sub
	dl LevelData_Unused02_Sprite_Sub
	incbin "Levels/Unused/Unused02_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_7_1_Level_Main:
;$248F75
	dl LevelData_7_1_Level_Sub
	dl LevelData_7_1_Sprite_Sub
	incbin "Levels/World7/7-1_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_7_7_Level_Main:
;$248FB4
	dl LevelData_7_7_Level_Sub
	dl LevelData_7_7_Sprite_Sub
	incbin "Levels/World7/7-7_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_4_6_Level_Main:
;$248FE9
	dl LevelData_4_6_Level_Sub
	dl LevelData_4_6_Sprite_Sub
	incbin "Levels/World4/4-6_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_5_3_Level_Main:
;$2490D9
	dl LevelData_5_3_Level_Sub
	dl LevelData_5_3_Sprite_Sub
	incbin "Levels/World5/5-3_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_5_3_Level_Sub:
;$2490FC
	dl LevelData_GenericLevelEnd_Level
	dl LevelData_GenericLevelEnd_Sprite
	incbin "Levels/World5/5-3_Level_Sub.bin":6-

--------------------------------------------------------------------

LevelData_1_3_Level_Main:
;$249298
	dl LevelData_1_3_Level_Sub
	dl LevelData_1_3_Sprite_Sub
	incbin "Levels/World1/1-3_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_3_5_Level_Sub:
;$24937B
	dl $000000
	dl $000000
	incbin "Levels/World3/3-5_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_4_5_Level_Sub:
;$2493AF
	dl LevelData_4_5_Level_Main
	dl LevelData_4_5_Sprite_Main
	incbin "Levels/World4/4-5_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_7_8_Level_Main:
;$249410
	dl LevelData_7_8_Level_Sub
	dl LevelData_7_8_Sprite_Sub
	incbin "Levels/World7/7-8_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_3_9_Level_Main:
;$249562
	dl LevelData_3_9_Level_Sub
	dl LevelData_3_9_Sprite_Sub
	incbin "Levels/World3/3-9_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_3_9_Level_Sub:
;$249734
	dl LevelData_3_9_Level_Main
	dl LevelData_3_9_Sprite_Main
	incbin "Levels/World3/3-9_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_7_6_Level_Main:
;$249752
	dl LevelData_7_6_Level_Sub
	dl LevelData_7_6_Sprite_Sub
	incbin "Levels/World7/7-6_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_7_4_Level_Main:
;$249797
	dl LevelData_7_4_Level_Sub
	dl LevelData_7_4_Sprite_Sub
	incbin "Levels/World7/7-4_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_World3HammerBro1_Level_Main:
;$2497EE
	dl $000000
	dl $000000
	incbin "Levels/World3/HammerBro1_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_World3HammerBro3_Level_Main:
;$24980C
	dl $000000
	dl $000000
	incbin "Levels/World3/HammerBro3_Level_Main.bin":6-

;--------------------------------------------------------------------

; Note: There are no hammer bros. in world 7, meaning this is an unused level.

LevelData_World7HammerBro_Level_Main:
;$249828
	dl $000000
	dl $000000
	incbin "Levels/World7/HammerBro_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_5_1_Level_Main:
;$249849
	dl LevelData_5_1_Level_Sub
	dl LevelData_5_1_Sprite_Sub
	incbin "Levels/World5/5-1_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_5_1_Level_Sub:
;$2499F2
	dl LevelData_5_1_Level_Main
	dl LevelData_5_1_Sprite_Main
	incbin "Levels/World5/5-1_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_8_2_Level_Sub:
;$249A63
	dl LevelData_8_2_Level_Main
	dl LevelData_8_2_Sprite_Main
	incbin "Levels/World8/8-2_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_UnknownLevelData_249B8B:
;$249B8B
	dl $000000
	dl $000000
	incbin "Levels/Unknown/UnknownLevelData_249B8B.bin":6-

;--------------------------------------------------------------------

LevelData_8_1_Level_Main:
;$249BA3
	dl $000000
	dl $000000
	incbin "Levels/World8/8-1_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_3_7_Level_Main:
;$249CB8
	dl LevelData_3_7_Level_Sub
	dl LevelData_3_7_Sprite_Sub
	incbin "Levels/World3/3-7_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_3_1_Level_Sub:
;$249D9F
	dl $000000
	dl $000000
	incbin "Levels/World3/3-1_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_1_2_Level_Sub:
;$249DBA
	dl LevelData_1_2_Level_Main
	dl LevelData_1_2_Sprite_Main
	incbin "Levels/World1/1-2_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_4_4_Level_Sub:
;$249E2B
	dl LevelData_4_4_Level_Main
	dl LevelData_4_4_Sprite_Main
	incbin "Levels/World4/4-4_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_1_1_Level_Main:
;$249F2E
	dl LevelData_1_1_Level_Sub
	dl LevelData_BlankSpriteData
	incbin "Levels/World1/1-1_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_1_1_Level_Sub:
;$24A02E
	dl LevelData_1_1_Level_Main
	dl LevelData_1_1_Sprite_Main
	incbin "Levels/World1/1-1_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_7_5_Level_Main:
;$24A0BA
	dl LevelData_7_5_Level_Sub
	dl LevelData_7_5_Sprite_Sub
	incbin "Levels/World7/7-5_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_3_8_Level_Sub:
;$24A0F6
	dl $000000
	dl $000000
	incbin "Levels/World3/3-8_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_GenericLevelEnd_Level:
;$24A129
	dl $000000
	dl $000000
	incbin "Levels/GenericLevelEnd_Level.bin":6-

;--------------------------------------------------------------------

LevelData_Unused02_Level_Sub:
;$24A147
	dl LevelData_3_7_Level_Sub
	dl LevelData_3_7_Sprite_Sub
	incbin "Levels/Unused/Unused02_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_GenericLevelEndCopy_Level:
;$24A17B
	dl $000000
	dl $000000
	incbin "Levels/GenericLevelEndCopy_Level.bin":6-

;--------------------------------------------------------------------

LevelData_World3HammerBro4_Level_Main:
;$24A199
	dl $000000
	dl $000000
	incbin "Levels/World3/HammerBro4_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_World3HammerBro2_Level_Main:
;$24A1BA
	dl $000000
	dl $000000
	incbin "Levels/World3/HammerBro2_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_UnknownLevelData_24A1D9:
;$24A1D9
	dl $000000
	dl $000000
	incbin "Levels/Unknown/UnknownLevelData_24A1D9.bin":6-

;--------------------------------------------------------------------

LevelData_1_4_Level_Sub:
;$24A200
	dl $000000
	dl $000000
	incbin "Levels/World1/1-4_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_3_3_Level_Main:
;$24A222
	dl LevelData_3_3_Level_Sub
	dl LevelData_3_3_Sprite_Sub
	incbin "Levels/World3/3-3_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_3_3_Level_Sub:
;$24A327
	dl LevelData_3_3_Level_Main
	dl LevelData_3_3_Sprite_Main
	incbin "Levels/World3/3-3_Level_Sub.bin":6-
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro DATATABLE_RT01_SMB3_LevelData(Address)
namespace SMB3
%InsertMacroAtXPosition(<Address>)

LevelData_Pyramid_Level_Sub:
;$24AFCA
	dl LevelData_Pyramid_Level_Main
	dl LevelData_Pyramid_Sprite_Main
	incbin "Levels/World2/Pyramid_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_UnknownLevelData_24B17C:
;$24B17C
	dl $000000
	dl $000000
	incbin "Levels/Unknown/UnknownLevelData_24B17C.bin":6-

;--------------------------------------------------------------------

LevelData_UnknownLevelData_24B215:
;$24B215
	dl $000000
	dl $000000
	incbin "Levels/Unknown/UnknownLevelData_24B215.bin":6-

;--------------------------------------------------------------------

LevelData_UnknownLevelData_24B258:
;$24B258
	dl $000000
	dl $000000
	incbin "Levels/Unknown/UnknownLevelData_24B258.bin":6-

;--------------------------------------------------------------------

LevelData_6_5_Level_Sub:
;$24B266
	dl LevelData_6_5_Level_Main
	dl LevelData_6_5_Sprite_Main
	incbin "Levels/World6/6-5_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_UnknownLevelData_24B449:
;$24B449
	dl $000000
	dl $000000
	incbin "Levels/Unknown/UnknownLevelData_24B449.bin":6-

;--------------------------------------------------------------------

LevelData_UnknownLevelData_24B48C:
;$24B48C
	dl $000000
	dl $000000
	incbin "Levels/Unknown/UnknownLevelData_24B48C.bin":6-

;--------------------------------------------------------------------

LevelData_6_9_Level_Sub:
;$24B49A
	dl LevelData_6_9_Level_Main
	dl LevelData_6_9_Sprite_Main
	incbin "Levels/World6/6-9_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_World5HammerBro1_Level_Main:
;$24B7A7
	dl $000000
	dl $000000
	incbin "Levels/World5/HammerBro1_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_UnknownLevelData_24B7D0:
;$24B7D0
	dl $000000
	dl $000000
	incbin "Levels/Unknown/UnknownLevelData_24B7D0.bin":6-

;--------------------------------------------------------------------

LevelData_6_6_Level_Sub:
;$24B7DE
	dl LevelData_6_6_Level_Main
	dl LevelData_6_6_Sprite_Main
	incbin "Levels/World6/6-6_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_1_2_Level_Main:
;$24BA90
	dl LevelData_1_2_Level_Sub
	dl LevelData_BlankSpriteData
	incbin "Levels/World1/1-2_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_Unused03_Level_Main:
;$24BC3B
	dl LevelData_Unused03_Level_Sub
	dl LevelData_Unused03_Sprite_Sub
	incbin "Levels/Unused/Unused03_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_7_3_Level_Main:
;$24BDD7
	dl $000000
	dl $000000
	incbin "Levels/World7/7-3_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_World1HammerBro1_Level_Main:
;$24BF36
	dl $000000
	dl $000000
	incbin "Levels/World1/HammerBro1_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_World1HammerBro2_Level_Main:
;$24BF54
	dl $000000
	dl $000000
	incbin "Levels/World1/HammerBro2_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_World5HammerBro3_Level_Main:
;$24BF75
	dl $000000
	dl $000000
	incbin "Levels/World5/HammerBro3_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_Unused04_Level_Main:
;$24BF99
	dl LevelData_Unused04_Level_Sub
	dl LevelData_Unused04_Sprite_Sub
	incbin "Levels/Unused/Unused04_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_Unused04_Level_Sub:
;$24BFF8
	dl LevelData_Unused04_Level_Main
	dl LevelData_BlankSpriteData
	incbin "Levels/Unused/Unused04_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_AngrySun_Level_Main:
;$24C16C
	dl $000000
	dl $000000
	incbin "Levels/World2/AngrySun_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_4_3_Level_Sub:
;$24C238
	dl $000000
	dl $000000
	incbin "Levels/World4/4-3_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_2_2_Level_Main:
;$24C42D
	dl LevelData_2_2_Level_Sub
	dl LevelData_2_2_Sprite_Sub
	incbin "Levels/World2/2-2_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_5_2_Level_Main:
;$24C571
	dl LevelData_5_2_Level_Sub
	dl LevelData_5_2_Sprite_Sub
	incbin "Levels/World5/5-2_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_8_2_Level_Main:
;$24C7DD
	dl LevelData_8_2_Level_Sub
	dl LevelData_BlankSpriteData
	incbin "Levels/World8/8-2_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_1_5_Level_Main:
;$24C9D3
	dl LevelData_1_5_Level_Sub
	dl LevelData_1_5_Sprite_Sub
	incbin "Levels/World1/1-5_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_3_8_Level_Main:
;$24CBCA
	dl LevelData_3_8_Level_Sub
	dl LevelData_3_8_Sprite_Sub
	incbin "Levels/World3/3-8_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_UnknownLevelData_24CCDC:
;$24CCDC
	dl $000000
	dl $000000
	incbin "Levels/Unknown/UnknownLevelData_24CCDC.bin":6-

;--------------------------------------------------------------------

LevelData_PipeLevel1A_Level_Main:
;$24CD00
	dl $000000
	dl $000000
	incbin "Levels/Pipe/PipeLevel1A_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_PipeLevel1B_Level_Main:
;$24CD5B
	dl $000000
	dl $000000
	incbin "Levels/Pipe/PipeLevel1B_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_PipeLevel3A_Level_Main:
;$24CDB6
	dl $000000
	dl $000000
	incbin "Levels/Pipe/PipeLevel3A_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_PipeLevel3B_Level_Main:
;$24CE23
	dl $000000
	dl $000000
	incbin "Levels/Pipe/PipeLevel3B_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_PipeLevel4A_Level_Main:
;$24CE90
	dl $000000
	dl $000000
	incbin "Levels/Pipe/PipeLevel4A_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_PipeLevel4B_Level_Main:
;$24CEE4
	dl $000000
	dl $000000
	incbin "Levels/Pipe/PipeLevel4B_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_PipeLevel2A_Level_Main:
;$24CF38
	dl $000000
	dl $000000
	incbin "Levels/Pipe/PipeLevel2A_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_PipeLevel2B_Level_Main:
;$24CFA6
	dl $000000
	dl $000000
	incbin "Levels/Pipe/PipeLevel2B_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_PipeLevel5A_Level_Main:
;$24D014
	dl $000000
	dl $000000
	incbin "Levels/Pipe/PipeLevel5A_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_PipeLevel5B_Level_Main:
;$24D05C
	dl $000000
	dl $000000
	incbin "Levels/Pipe/PipeLevel5B_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_PipeLevel6A_Level_Main:
;$24D0A4
	dl $000000
	dl $000000
	incbin "Levels/Pipe/PipeLevel6A_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_PipeLevel6B_Level_Main:
;$24D0EA
	dl $000000
	dl $000000
	incbin "Levels/Pipe/PipeLevel6B_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_World4Fortress1_Level_Sub:
;$24D130
	dl LevelData_World4Fortress1_Level_Main
	dl LevelData_World4Fortress1_Sprite_Main
	incbin "Levels/World4/Fortress1_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_World1GenericBonusRoom_Level:
;$24D1C2
	dl $000000
	dl $000000
	incbin "Levels/World1/GenericBonusRoom_Level.bin":6-

;--------------------------------------------------------------------

LevelData_World2GenericBonusRoom_Level:
;$24D1D3
	dl $000000
	dl $000000
	incbin "Levels/World2/GenericBonusRoom_Level.bin":6-

;--------------------------------------------------------------------

LevelData_World3GenericBonusRoom_Level:
;$24D2A6
	dl $000000
	dl $000000
	incbin "Levels/World3/GenericBonusRoom_Level.bin":6-

;--------------------------------------------------------------------

LevelData_World4GenericBonusRoom_Level:
;$24D465
	dl $000000
	dl $000000
	incbin "Levels/World4/GenericBonusRoom_Level.bin":6-

;--------------------------------------------------------------------

LevelData_World5GenericBonusRoom_Level:
;$24D502
	dl $000000
	dl $000000
	incbin "Levels/World5/GenericBonusRoom_Level.bin":6-

;--------------------------------------------------------------------

LevelData_World6GenericBonusRoom_Level:
;$24D60B
	dl $000000
	dl $000000
	incbin "Levels/World6/GenericBonusRoom_Level.bin":6-

;--------------------------------------------------------------------

LevelData_World7GenericBonusRoom_Level:
;$24D7D4
	dl $000000
	dl $000000
	incbin "Levels/World7/GenericBonusRoom_Level.bin":6-

;--------------------------------------------------------------------

LevelData_World8GenericBonusRoom_Level:
;$24D8D8
	dl $000000
	dl $000000
	incbin "Levels/World8/GenericBonusRoom_Level.bin":6-

;--------------------------------------------------------------------

LevelData_3_4_Level_Main:
;$24D9AE
	dl $000000
	dl $000000
	incbin "Levels/World3/3-4_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_6_8_Level_Main:
;$24DB5E
	dl $000000
	dl $000000
	incbin "Levels/World6/6-8_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_UnknownLevelData_24DD01:
;$24DD01
	dl $000000
	dl $000000
	incbin "Levels/Unknown/UnknownLevelData_24DD01.bin":6-
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro DATATABLE_RT02_SMB3_LevelData(Address)
namespace SMB3
%InsertMacroAtXPosition(<Address>)

LevelData_3_2_Level_Main:
;$24EAA8
	dl LevelData_3_2_Level_Sub
	dl LevelData_3_2_Sprite_Sub
	incbin "Levels/World3/3-2_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_3_2_Level_Sub:
;$24EB85
	dl $000000
	dl $000000
	incbin "Levels/World3/3-2_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_3_6_Level_Main:
;$24EBF8
	dl LevelData_3_6_Level_Sub
	dl LevelData_3_6_Sprite_Sub
	incbin "Levels/World3/3-6_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_3_6_Level_Sub:
;$24ECC1
	dl $000000
	dl $000000
	incbin "Levels/World3/3-6_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_6_3_Level_Main:
;$24ECF3
	dl $000000
	dl $000000
	incbin "Levels/World6/6-3_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_World6Fortress2_Level_Main:
;$24EDE5
	dl LevelData_World6Fortress2_Level_Sub
	dl LevelData_World6Fortress2_Sprite_Sub
	incbin "Levels/World6/Fortress2_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_World6Fortress2_Level_Sub:
;$24EEF5
	dl $000000
	dl $000000
	incbin "Levels/World6/Fortress2_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_6_5_Level_Main:
;$24EF4B
	dl LevelData_6_5_Level_Sub
	dl LevelData_6_5_Sprite_Sub
	incbin "Levels/World6/6-5_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_Unused11_Level_Main:
;$24F026
	dl $000000
	dl $000000
	incbin "Levels/Unused/Unused11_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_5_5_Level_Main:
;$24F15F
	dl $000000
	dl $000000
	incbin "Levels/World5/5-5_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_Unused12_Level_Main:
;$24F234
	dl $000000
	dl $000000
	incbin "Levels/Unused/Unused12_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_Unused13_Level_Main:
;$24F2C0
	dl $000000
	dl $000000
	incbin "Levels/Unused/Unused13_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_6_2_Level_Main:
;$24F34C
	dl LevelData_6_2_Level_Sub
	dl LevelData_6_2_Sprite_Sub
	incbin "Levels/World6/6-2_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_UnknownLevelData_24F426:
;$24F426
	dl $000000
	dl $000000
	incbin "Levels/Unknown/UnknownLevelData_24F426.bin":6-

;--------------------------------------------------------------------

LevelData_6_1_Level_Main:
;$24F434
	dl LevelData_6_1_Level_Sub
	dl LevelData_BlankSpriteData
	incbin "Levels/World6/6-1_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_Unused06_Level_Main:
;$24F49E
	dl LevelData_6_2_Level_Sub
	dl LevelData_6_2_Sprite_Sub
	incbin "Levels/Unused/Unused06_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_6_2_Level_Sub:
;$24F552
	dl $000000
	dl $000000
	incbin "Levels/World6/6-2_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_1_6_Level_Main:
;$24F577
	dl $000000
	dl $000000
	incbin "Levels/World1/1-6_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_1_4_Level_Main:
;$24F686
	dl LevelData_1_4_Level_Sub
	dl LevelData_1_4_Sprite_Sub
	incbin "Levels/World1/1-4_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_6_4_Level_Main:
;$24F751
	dl LevelData_6_4_Level_Sub
	dl LevelData_6_4_Sprite_Sub
	incbin "Levels/World6/6-4_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_Unused07_Level_Main:
;$24F890
	dl LevelData_Unused07_Level_Sub
	dl LevelData_Unused07_Sprite_Sub
	incbin "Levels/Unused/Unused07_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_Unused07_Level_Sub:
;$24F9EB
	dl $000000
	dl $000000
	incbin "Levels/Unused/Unused07_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_6_6_Level_Main:
;$24FA09
	dl LevelData_6_6_Level_Sub
	dl LevelData_6_6_Sprite_Sub
	incbin "Levels/World6/6-6_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_6_10_Level_Main:
;$24FA60
	dl $000000
	dl $000000
	incbin "Levels/World6/6-10_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_6_7_Level_Main:
;$24FB88
	dl LevelData_6_7_Level_Sub
	dl LevelData_6_7_Sprite_Sub
	incbin "Levels/World6/6-7_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_6_7_Level_Sub:
;$24FD25
	dl $000000
	dl $000000
	incbin "Levels/World6/6-7_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_6_9_Level_Main:
;$24FD61
	dl LevelData_6_9_Level_Sub
	dl LevelData_6_9_Sprite_Sub
	incbin "Levels/World6/6-9_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_7_7_Level_Sub:
;$24FDA6
	dl LevelData_7_7_Level_Main
	dl LevelData_7_7_Sprite_Main
	incbin "Levels/World7/7-7_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_World6HammerBro2_Level_Main:
;$24FEFB
	dl $000000
	dl $000000
	incbin "Levels/World6/HammerBro2_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_6_1_Level_Sub:
;$24FF12
	dl LevelData_6_1_Level_Main
	dl LevelData_6_1_Sprite_Main
	incbin "Levels/World6/6-1_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_World6HammerBro1_Level_Main:
;$24FF6B
	dl $000000
	dl $000000
	incbin "Levels/World6/HammerBro1_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_UnknownLevelData_24FF85:
;$24FF85
	dl $000000
	dl $000000
	incbin "Levels/Unknown/UnknownLevelData_24FF85.bin":6-
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro DATATABLE_RT03_SMB3_LevelData(Address)
namespace SMB3
%InsertMacroAtXPosition(<Address>)

LevelData_UnknownLevelData_258FE2:
;$258FE2
	dl LevelData_7_1_Level_Main
	dl LevelData_7_1_Sprite_Main
	incbin "Levels/Unknown/UnknownLevelData_258FE2.bin":6-

;--------------------------------------------------------------------

LevelData_7_1_Level_Sub:
;$258FF0
	dl LevelData_7_1_Level_Main
	dl LevelData_7_1_Sprite_Main
	incbin "Levels/World7/7-1_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_ToadHouse_Level_Main:
;$2591BD
	dl $000000
	dl $000000
	incbin "Levels/ToadHouse_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_7_4_Level_Sub:
;$25922A
	dl LevelData_7_4_Level_Main
	dl LevelData_7_4_Sprite_Main
	incbin "Levels/World7/7-4_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_Unused08_Level_Main:
;$259382
	dl LevelData_Unused08_Level_Sub
	dl LevelData_Unused08_Sprite_Sub
	incbin "Levels/Unused/Unused08_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_3_5_Level_Main:
;$2594C8
	dl LevelData_3_5_Level_Sub
	dl LevelData_3_5_Sprite_Sub
	incbin "Levels/World3/3-5_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_SpecialToadHouse_Level_Main:
;$25968D
	dl $000000
	dl $000000
	incbin "Levels/SpecialToadHouse_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_World4Fortress2_Level_Sub:
;$2596F4
	dl LevelData_World4Fortress2_Level_Main
	dl LevelData_World4Fortress2_Sprite_Main
	incbin "Levels/World4/Fortress2_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_3_1_Level_Main:
;$259789
	dl LevelData_3_1_Level_Sub
	dl LevelData_3_1_Sprite_Sub
	incbin "Levels/World3/3-1_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_5_2_Level_Sub:
;$259904
	dl LevelData_5_2_Level_Main
	dl LevelData_5_2_Sprite_Main
	incbin "Levels/World5/5-2_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_7_6_Level_Sub:
;$259A87
	dl LevelData_7_6_Level_Main
	dl LevelData_7_6_Sprite_Main
	incbin "Levels/World7/7-6_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_UnknownLevelData_259C21:
;$259C21
	dl $000000
	dl $000000
	incbin "Levels/Unknown/UnknownLevelData_259C21.bin":6-
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro DATATABLE_RT04_SMB3_LevelData(Address)
namespace SMB3
%InsertMacroAtXPosition(<Address>)

LevelData_5_8_Level_Main:
;$25B732
	dl LevelData_4_2_Level_Sub
	dl LevelData_4_2_Sprite_Sub
	incbin "Levels/World5/5-8_Level_Main.bin":6-

;--------------------------------------------------------------------

; Todo: Verify if this is actually used by 4-2. Because this is the exit sublevel for some of the sky levels in world 5.

LevelData_4_2_Level_Sub:
;$25B782
	dl $000000
	dl $000000
	incbin "Levels/World4/4-2_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_3_7_Level_Sub:
;$25B79D
	dl LevelData_3_7_Level_Main
	dl LevelData_3_7_Sprite_Main
	incbin "Levels/World3/3-7_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_4_1_Level_Main:
;$25B7C7
	dl LevelData_4_1_Level_Sub
	dl LevelData_4_1_Sprite_Sub
	incbin "Levels/World4/4-1_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_Unused09_Level_Main:
;$25B8E6
	dl LevelData_4_2_Level_Sub
	dl LevelData_4_2_Sprite_Sub
	incbin "Levels/Unused/Unused09_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_Unused14_Level_Main:
;$25B947
	dl $000000
	dl $000000
	incbin "Levels/Unused/Unused14_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_Unused15_Level_Main:
;$25B9B3
	dl $000000
	dl $000000
	incbin "Levels/Unused/Unused15_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_5_7_Level_Main:
;$25BA0E
	dl LevelData_5_7_Level_Sub
	dl LevelData_5_7_Sprite_Sub
	incbin "Levels/World5/5-7_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_4_3_Level_Main:
;$25BAE7
	dl LevelData_4_3_Level_Sub
	dl LevelData_4_3_Sprite_Sub
	incbin "Levels/World4/4-3_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_4_2_Level_Main:
;$25BB3A
	dl LevelData_4_2_Level_Sub
	dl LevelData_4_2_Sprite_Sub
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	incbin "Levels/World4/4-2_Level_Main_SMAS_J.bin":6-
else
	incbin "Levels/World4/4-2_Level_Main_SMAS_U.bin":6-
endif

;--------------------------------------------------------------------

LevelData_5_6_Level_Main:
;$25BC18
	dl LevelData_4_2_Level_Sub
	dl LevelData_4_2_Sprite_Sub
	incbin "Levels/World5/5-6_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_5_9_Level_Main:
;$25BCDD
	dl LevelData_4_2_Level_Sub
	dl LevelData_4_2_Sprite_Sub
	incbin "Levels/World5/5-9_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_4_4_Level_Main:
;$25BCFA
	dl LevelData_4_4_Level_Sub
	dl LevelData_BlankSpriteData
	incbin "Levels/World4/4-4_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_Unused03_Level_Sub:
;$25BE39
	dl LevelData_Unused03_Level_Main
	dl LevelData_Unused03_Sprite_Main
	incbin "Levels/Unused/Unused03_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_1_3_Level_Sub:
;$25BEDB
	dl LevelData_1_3_Level_Main
	dl LevelData_1_3_Sprite_Main
	incbin "Levels/World1/1-3_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_ExitToSurface_Level_Main:
;$25BF83
	dl $000000
	dl $000000
	incbin "Levels/World5/ExitToSurface_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_World5Tower_Level_Sub3:
;$25BFAF
	dl $000000
	dl $000000
	incbin "Levels/World5/Tower_Level_Sub3.bin":6-

;--------------------------------------------------------------------

LevelData_World5Tower_Level_Sub1:
;$25BFEA
	dl LevelData_World5Tower_Level_Sub2
	dl LevelData_World5Tower_Sprite_Sub2
	incbin "Levels/World5/Tower_Level_Sub1.bin":6-

;--------------------------------------------------------------------

LevelData_4_5_Level_Main:
;$25C0B5
	dl LevelData_4_5_Level_Sub
	dl LevelData_4_5_Sprite_Sub
	incbin "Levels/World4/4-5_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_6_4_Level_Sub:
;$25C1CB
	dl LevelData_6_4_Level_Main
	dl LevelData_6_4_Sprite_Main
	incbin "Levels/World6/6-4_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_1_5_Level_Sub:
;$25C1F8
	dl LevelData_1_5_Level_Main
	dl LevelData_1_5_Sprite_Main
	incbin "Levels/World1/1-5_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_4_1_Level_Sub:
;$25C2A0
	dl LevelData_4_1_Level_Main
	dl LevelData_4_1_Sprite_Main
	incbin "Levels/World4/4-1_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_World5HammerBro2_Level_Main:
;$25C2DD
	dl $000000
	dl $000000
	incbin "Levels/World5/HammerBro2_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_Unused10_Level_Main:
;$25C2F5
	dl $000000
	dl $000000
	incbin "Levels/Unused/Unused10_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_5_4_Level_Main:
;$25C364
	dl LevelData_4_2_Level_Sub
	dl LevelData_4_2_Sprite_Sub
	incbin "Levels/World5/5-4_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_Muncher2_Level_Main:
;$25C3BF
	dl LevelData_Muncher2_Level_Sub
	dl LevelData_Muncher2_Sprite_Sub
	incbin "Levels/World7/Muncher2_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_Muncher1_Level_Main:
;$25C4CC
	dl LevelData_Muncher1_Level_Sub
	dl LevelData_Muncher1_Sprite_Sub
	incbin "Levels/World7/Muncher1_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_Hand2_Level_Main:
;$25C58B
	dl LevelData_Hand_Level_Sub
	dl LevelData_Hand_Sprite_Sub
	incbin "Levels/World8/Hand2_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_Hand1_Level_Main:
;$25C5F1
	dl LevelData_Hand_Level_Sub
	dl LevelData_Hand_Sprite_Sub
	incbin "Levels/World8/Hand1_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_Hand3_Level_Main:
;$25C644
	dl LevelData_Hand_Level_Sub
	dl LevelData_Hand_Sprite_Sub
	incbin "Levels/World8/Hand3_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_Hand_Level_Sub:
;$25C6D0
	dl $000000
	dl $000000
	incbin "Levels/World8/Hand_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_Muncher2_Level_Sub:
;$25C705
	dl $000000
	dl $000000
	incbin "Levels/World7/Muncher2_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_Muncher1_Level_Sub:
;$25C794
	dl $000000
	dl $000000
	incbin "Levels/World7/Muncher1_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_World4HammerBro_Level_Main:
;$25C823
	dl $000000
	dl $000000
	incbin "Levels/World4/HammerBro_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_7_8_Level_Sub:
;$25C83A
	dl LevelData_7_8_Level_Main
	dl LevelData_7_8_Sprite_Main
	incbin "Levels/World7/7-8_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_World5HammerBro4_Level_Main:
;$25C867
	dl $000000
	dl $000000
	incbin "Levels/World5/HammerBro4_Level_Main.bin":6-
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro DATATABLE_RT05_SMB3_LevelData(Address)
namespace SMB3
%InsertMacroAtXPosition(<Address>)

LevelData_Pyramid_Level_Main:
;$25E05A
	dl LevelData_Pyramid_Level_Sub
	dl LevelData_Pyramid_Sprite_Sub
	incbin "Levels/World2/Pyramid_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_7_9_Level_Sub:
;$25E113
	dl $000000
	dl $000000
	incbin "Levels/World7/7-9_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_7_2_Level_Main:
;$25E127
	dl LevelData_3_1_Level_Sub
	dl LevelData_3_1_Sprite_Sub
	incbin "Levels/World7/7-2_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_UnknownLevelData_25E302:
;$25E302
	dl $000000
	dl $000000
	incbin "Levels/Unknown/UnknownLevelData_25E302.bin":6-

;--------------------------------------------------------------------

LevelData_World2HammerBro_Level_Main:
;$25E31C
	dl $000000
	dl $000000
	incbin "Levels/World2/HammerBro_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_Unused08_Level_Sub:
;$25E33F
	dl LevelData_Unused08_Level_Main
	dl LevelData_BlankSpriteData
	incbin "Levels/Unused/Unused08_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_UnknownLevelData_25E34D:
;$25E34D
	dl $000000
	dl $000000
	incbin "Levels/Unknown/UnknownLevelData_25E34D.bin":6-

;--------------------------------------------------------------------

LevelData_UnknownLevelData_25E35B:
;$25E35B
	dl $000000
	dl $000000
	incbin "Levels/Unknown/UnknownLevelData_25E35B.bin":6-

;--------------------------------------------------------------------

LevelData_7_9_Level_Main:
;$25E369
	dl LevelData_7_9_Level_Sub
	dl LevelData_7_9_Sprite_Sub
	incbin "Levels/World7/7-9_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_2_1_Level_Main:
;$25E575
	dl LevelData_2_1_Level_Sub
	dl LevelData_BlankSpriteData
	incbin "Levels/World2/2-1_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_2_1_Level_Sub:
;$25E6CA
	dl LevelData_2_1_Level_Main
	dl LevelData_2_1_Sprite_Main
	incbin "Levels/World2/2-1_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_2_5_Level_Main:
;$25E770
	dl LevelData_2_5_Level_Sub
	dl LevelData_BlankSpriteData
	incbin "Levels/World2/2-5_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_2_5_Level_Sub:
;$25E88A
	dl LevelData_2_5_Level_Main
	dl LevelData_2_5_Sprite_Main
	incbin "Levels/World2/2-5_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_2_3_Level_Main:
;$25E920
	dl LevelData_2_3_Level_Sub
	dl LevelData_2_3_Sprite_Sub
	incbin "Levels/World2/2-3_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_World2Fortress_Level_Main:
;$25EA96
	dl LevelData_World2Fortress_Level_Sub
	dl LevelData_World2Fortress_Sprite_Sub
	incbin "Levels/World2/Fortress_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_World2Fortress_Level_Sub:
;$25EBDC
	dl LevelData_World2Fortress_Level_Main
	dl LevelData_World2Fortress_Sprite_Main
	incbin "Levels/World2/Fortress_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_2_4_Level_Main:
;$25EC5C
	dl $000000
	dl $000000
	incbin "Levels/World2/2-4_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_UnknownLevelData_25EE9C:
;$25EE9C
	dl LevelData_2_4_Level_Main
	dl LevelData_2_4_Sprite_Main
	incbin "Levels/Unknown/UnknownLevelData_25EE9C.bin":6-

;--------------------------------------------------------------------

LevelData_2_2_Level_Sub:
;$25EEAA
	dl $000000
	dl $000000
	incbin "Levels/World2/2-2_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_2_3_Level_Sub:
;$25EEBE
	dl $000000
	dl $000000
	incbin "Levels/World2/2-3_Level_Sub.bin":6-
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro DATATABLE_RT06_SMB3_LevelData(Address)
namespace SMB3
%InsertMacroAtXPosition(<Address>)

LevelData_World2ThroneRoom_Level:
;$268C3F
	dl LevelData_World2BoardAirshipCutscene_Level
	dl LevelData_BoardAirshipCutscene_Sprite
	incbin "Levels/World2/ThroneRoom_Level.bin":6-

;--------------------------------------------------------------------

LevelData_World3ThroneRoom_Level:
;$268C53
	dl LevelData_World3BoardAirshipCutscene_Level
	dl LevelData_BoardAirshipCutscene_Sprite
	incbin "Levels/World3/ThroneRoom_Level.bin":6-

;--------------------------------------------------------------------

LevelData_World4ThroneRoom_Level:
;$268C67
	dl LevelData_World4BoardAirshipCutscene_Level
	dl LevelData_BoardAirshipCutscene_Sprite
	incbin "Levels/World4/ThroneRoom_Level.bin":6-

;--------------------------------------------------------------------

LevelData_World5ThroneRoom_Level:
;$268C7B
	dl LevelData_World5BoardAirshipCutscene_Level
	dl LevelData_BoardAirshipCutscene_Sprite
	incbin "Levels/World5/ThroneRoom_Level.bin":6-

;--------------------------------------------------------------------

LevelData_World6ThroneRoom_Level:
;$268C8F
	dl LevelData_World6BoardAirshipCutscene_Level
	dl LevelData_BoardAirshipCutscene_Sprite
	incbin "Levels/World6/ThroneRoom_Level.bin":6-

;--------------------------------------------------------------------

LevelData_World1ThroneRoom_Level:
LevelData_World8ThroneRoom_Level:
;$268CA3
	dl LevelData_World1BoardAirshipCutscene_Level
	dl LevelData_BoardAirshipCutscene_Sprite
	incbin "Levels/World1/ThroneRoom_Level.bin":6-

;--------------------------------------------------------------------

LevelData_World7ThroneRoom_Level:
;$268CB7
	dl LevelData_World7BoardAirshipCutscene_Level
	dl LevelData_BoardAirshipCutscene_Sprite
	incbin "Levels/World7/ThroneRoom_Level.bin":6-

;--------------------------------------------------------------------

LevelData_World5Fortress2_Level_Main:
;$268CCB
	dl LevelData_World5Fortress2_Level_Sub
	dl LevelData_World5Fortress2_Sprite_Sub
	incbin "Levels/World5/Fortress2_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_World5Fortress2_Level_Sub:
;$268D21
	dl LevelData_World5Fortress2_Level_Main
	dl LevelData_World5Fortress2_Sprite_Main
	incbin "Levels/World5/Fortress2_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_UnknownLevelData_268DA3:
;$268DA3
	dl $000000
	dl $000000
	incbin "Levels/Unknown/UnknownLevelData_268DA3.bin":6-

;--------------------------------------------------------------------

LevelData_World1Fortress_Level_Main:
;$268DD4
	dl LevelData_World1Fortress_Level_Sub
	dl LevelData_World1Fortress_Sprite_Sub
	incbin "Levels/World1/Fortress_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_World1Fortress_Level_Sub:
;$268E99
	dl LevelData_World1Fortress_Level_Main
	dl LevelData_World1Fortress_Sprite_Main
	incbin "Levels/World1/Fortress_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_World3Fortress2_Level_Main:
;$268EE9
	dl LevelData_World3Fortress2_Level_Sub
	dl LevelData_World3Fortress2_Sprite_Sub
	incbin "Levels/World3/Fortress2_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_World3Fortress2_Level_Sub:
;$268F7C
	dl LevelData_World3Fortress2_Level_Main
	dl LevelData_World3Fortress2_Sprite_Main
	incbin "Levels/World3/Fortress2_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_World3Fortress1_Level_Main:
;$268FF3
	dl LevelData_World3Fortress1_Level_Sub
	dl LevelData_World3Fortress1_Sprite_Sub
	incbin "Levels/World3/Fortress1_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_World3Fortress1_Level_Sub:
;$2690B5
	dl LevelData_World3Fortress1_Level_Main
	dl LevelData_World3Fortress1_Sprite_Main
	incbin "Levels/World3/Fortress1_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_World5Fortress1_Level_Main:
;$269197
	dl LevelData_World5Fortress1_Level_Sub
	dl LevelData_World5Fortress1_Sprite_Sub
	incbin "Levels/World5/Fortress1_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_World5Fortress1_Level_Sub:
;$269318
	dl LevelData_World5Fortress1_Level_Main
	dl LevelData_World5Fortress1_Sprite_Main
	incbin "Levels/World5/Fortress1_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_UnknownLevelData_26937A:
;$26937A
	dl $000000
	dl $000000
	incbin "Levels/Unknown/UnknownLevelData_26937A.bin":6-

;--------------------------------------------------------------------

LevelData_World7Fortress2_Level_Main:
;$26937A
	dl LevelData_World7Fortress2_Level_Sub
	dl LevelData_World7Fortress2_Sprite_Sub
	incbin "Levels/World7/Fortress2_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_World7Fortress2_Level_Sub:
;$269456
	dl $000000
	dl $000000
	incbin "Levels/World7/Fortress2_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_World6Fortress3_Level_Main:
;$2694B1
	dl LevelData_World6Fortress3_Level_Sub
	dl LevelData_World6Fortress3_Sprite_Sub
	incbin "Levels/World6/Fortress3_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_World6Fortress3_Level_Sub:
;$269588
	dl LevelData_World6Fortress3_Level_Main
	dl LevelData_World6Fortress3_Sprite_Main
	incbin "Levels/World6/Fortress3_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_World6Fortress1_Level_Main:
;$2695A6
	dl LevelData_World6Fortress1_Level_Sub
	dl LevelData_World6Fortress1_Sprite_Sub
	incbin "Levels/World6/Fortress1_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_World6Fortress1_Level_Sub:
;$269652
	dl LevelData_World6Fortress1_Level_Main
	dl LevelData_World6Fortress1_Sprite_Main
	incbin "Levels/World6/Fortress1_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_World7Fortress1_Level_Main:
;$2696DF
	dl LevelData_World7Fortress1_Level_Sub
	dl LevelData_BlankSpriteData
	incbin "Levels/World7/Fortress1_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_World7Fortress1_Level_Sub:
;$26981D
	dl LevelData_World7Fortress1_Level_Main
	dl LevelData_World7Fortress1_Sprite_Main
	incbin "Levels/World7/Fortress1_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_World5Tower_Level_Main:
;$2698B4
	dl LevelData_World5Tower_Level_Sub1
	dl LevelData_World5Tower_Sprite_Sub1
	incbin "Levels/World5/Tower_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_World5Tower_Level_Sub2:
;$269958
	dl LevelData_World5Tower_Level_Sub3
	dl LevelData_World5Tower_Sprite_Sub3
	incbin "Levels/World5/Tower_Level_Sub2.bin":6-

;--------------------------------------------------------------------

LevelData_World4Fortress2_Level_Main:
;$2699F8
	dl LevelData_World4Fortress2_Level_Sub
	dl LevelData_World4Fortress2_Sprite_Sub
	incbin "Levels/World4/Fortress2_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_World4Fortress1_Level_Main:
;$269AD2
	dl LevelData_World4Fortress1_Level_Sub
	dl LevelData_World4Fortress1_Sprite_Sub
	incbin "Levels/World4/Fortress1_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_Unused05_Level_Main:
;$269B7E
	dl $000000
	dl $000000
	incbin "Levels/Unused/Unused05_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_World8Fortress_Level_Main:
;$269CA8
	dl LevelData_World8Fortress_Level_Sub
	dl LevelData_World8Fortress_Sprite_Sub
	incbin "Levels/World8/Fortress_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_World8Fortress_Level_Sub:
;$269ED3
	dl LevelData_World8Fortress_Level_Main
	dl LevelData_World8Fortress_Sprite_Main
	incbin "Levels/World8/Fortress_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_BowsersCastle_Level_Main:
;$26A051
	dl LevelData_BowsersCastle_Level_Sub
	dl LevelData_BowsersCastle_Sprite_Sub
	incbin "Levels/World8/BowsersCastle_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_BowsersCastle_Level_Sub:
;$26A251
	dl LevelData_BowsersCastle_Level_Main
	dl LevelData_BowsersCastle_Sprite_Main
	incbin "Levels/World8/BowsersCastle_Level_Sub.bin":6-
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro DATATABLE_RT07_SMB3_LevelData(Address)
namespace SMB3
%InsertMacroAtXPosition(<Address>)

LevelData_World2BoardAirshipCutscene_Level:
;$26B89C
	dl LevelData_World2Airship_Level_Main
	dl LevelData_World2Airship_Sprite_Main
	incbin "Levels/World2/BoardAirshipCutscene_Level.bin":6-

;--------------------------------------------------------------------

LevelData_World3BoardAirshipCutscene_Level:
;$26B8B9
	dl LevelData_World3Airship_Level_Main
	dl LevelData_World3Airship_Sprite_Main
	incbin "Levels/World3/BoardAirshipCutscene_Level.bin":6-

;--------------------------------------------------------------------

LevelData_World1BoardAirshipCutscene_Level:
;$26B8D6
	dl LevelData_World1Airship_Level_Main
	dl LevelData_World1Airship_Sprite_Main
	incbin "Levels/World1/BoardAirshipCutscene_Level.bin":6-

;--------------------------------------------------------------------

LevelData_World4Airship_Level_Sub:
;$26B8F3
	dl $000000
	dl $000000
	incbin "Levels/World4/Airship_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_World5Airship_Level_Main:
;$26B92B
	dl LevelData_World5Airship_Level_Sub
	dl LevelData_World5Airship_Sprite_Sub
	incbin "Levels/World5/Airship_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_World1Airship_Level_Main:
;$26BA4F
	dl LevelData_World1Airship_Level_Sub
	dl LevelData_World1Airship_Sprite_Sub
	incbin "Levels/World1/Airship_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_World2Airship_Level_Main:
;$26BB47
	dl LevelData_World2Airship_Level_Sub
	dl LevelData_World2Airship_Sprite_Sub
	incbin "Levels/World2/Airship_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_World3Airship_Level_Main:
;$26BCA9
	dl LevelData_World3Airship_Level_Sub
	dl LevelData_World3Airship_Sprite_Sub
	incbin "Levels/World3/Airship_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_World4Airship_Level_Main:
;$26BDDE
	dl LevelData_World4Airship_Level_Sub
	dl LevelData_World4Airship_Sprite_Sub
	incbin "Levels/World4/Airship_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_World6Airship_Level_Main:
;$26BF5B
	dl LevelData_World6Airship_Level_Sub
	dl LevelData_World6Airship_Sprite_Sub
	incbin "Levels/World6/Airship_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_World4BoardAirshipCutscene_Level:
;$26C0D1
	dl LevelData_World4Airship_Level_Main
	dl LevelData_World4Airship_Sprite_Main
	incbin "Levels/World4/BoardAirshipCutscene_Level.bin":6-

;--------------------------------------------------------------------

LevelData_World5BoardAirshipCutscene_Level:
;$26C0EE
	dl LevelData_World5Airship_Level_Main
	dl LevelData_World5Airship_Sprite_Main
	incbin "Levels/World5/BoardAirshipCutscene_Level.bin":6-

;--------------------------------------------------------------------

LevelData_World6BoardAirshipCutscene_Level:
;$26C10B
	dl LevelData_World6Airship_Level_Main
	dl LevelData_World6Airship_Sprite_Main
	incbin "Levels/World6/BoardAirshipCutscene_Level.bin":6-

;--------------------------------------------------------------------

LevelData_World7BoardAirshipCutscene_Level:
;$26C128
	dl LevelData_World7Airship_Level_Main
	dl LevelData_World7Airship_Sprite_Main
	incbin "Levels/World7/BoardAirshipCutscene_Level.bin":6-

;--------------------------------------------------------------------

LevelData_World7Airship_Level_Main:
;$26C145
	dl LevelData_World7Airship_Level_Sub
	dl LevelData_World7Airship_Sprite_Sub
	incbin "Levels/World7/Airship_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_World8Airship_Level_Main:
;$26C2D7
	dl LevelData_World8Airship_Level_Sub
	dl LevelData_World8Airship_Sprite_Sub
	incbin "Levels/World8/Airship_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_Navy_Level_Main:
;$26C375
	dl LevelData_Navy_Level_Sub
	dl LevelData_Navy_Sprite_Sub
	incbin "Levels/World8/Navy_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_Tank2_Level_Main:
;$26C4A6
	dl LevelData_Tank2_Level_Sub
	dl LevelData_Tank2_Sprite_Sub
	incbin "Levels/World8/Tank2_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_Tank1_Level_Main:
;$26C59F
	dl LevelData_Tank1_Level_Sub
	dl LevelData_Tank1_Sprite_Sub
	incbin "Levels/World8/Tank1_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_World1Airship_Level_Sub:
;$26C6D2
	dl $000000
	dl $000000
	incbin "Levels/World1/Airship_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_World2Airship_Level_Sub:
;$26C6EF
	dl $000000
	dl $000000
	incbin "Levels/World2/Airship_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_World3Airship_Level_Sub:
;$26C715
	dl $000000
	dl $000000
	incbin "Levels/World3/Airship_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_World5Airship_Level_Sub:
;$26C73B
	dl $000000
	dl $000000
	incbin "Levels/World5/Airship_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_World6Airship_Level_Sub:
;$26C75B
	dl $000000
	dl $000000
	incbin "Levels/World6/Airship_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_World7Airship_Level_Sub:
;$26C784
	dl $000000
	dl $000000
	incbin "Levels/World7/Airship_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_CoinShip_Level_Main:
;$26C7B3
	dl LevelData_CoinShip_Level_Sub
	dl LevelData_CoinShip_Sprite_Sub
	incbin "Levels/CoinShip_Level_Main.bin":6-

;--------------------------------------------------------------------

LevelData_CoinShip_Level_Sub:
;$26C85D
	dl $000000
	dl $000000
	incbin "Levels/CoinShip_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_Tank2_Level_Sub:
;$26C88C
	dl $000000
	dl $000000
	incbin "Levels/World8/Tank2_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_Navy_Level_Sub:
;$26C8C1
	dl $000000
	dl $000000
	incbin "Levels/World8/Navy_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_World8Airship_Level_Sub:
;$26C8F6
	dl $000000
	dl $000000
	incbin "Levels/World8/Airship_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_Tank1_Level_Sub:
;$26C92B
	dl $000000
	dl $000000
	incbin "Levels/World8/Tank1_Level_Sub.bin":6-

;--------------------------------------------------------------------

LevelData_UnknownLevelData_26C960:
;$26C960
	dl $000000
	dl $000000
	incbin "Levels/Unknown/UnknownLevelData_26C960.bin":6-
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro DATATABLE_RT08_SMB3_LevelData(Address)
namespace SMB3
%InsertMacroAtXPosition(<Address>)

LevelData_UnknownSpriteData_27E5B0:
;$27E5B0
	incbin "Levels/Unknown/UnknownSpriteData_27E5B0.bin"

;--------------------------------------------------------------------

LevelData_World2HammerBro_Sprite2_Main:
;$27E5B2
	incbin "Levels/World2/HammerBro_Sprite2_Main.bin"

;--------------------------------------------------------------------

LevelData_UnknownSpriteData_27E5B4:
;$27E5B4
	incbin "Levels/Unknown/UnknownSpriteData_27E5B4.bin"

;--------------------------------------------------------------------

LevelData_BlankSpriteData:
;$27E5B6
	incbin "Levels/BlankSpriteData.bin"

;--------------------------------------------------------------------

LevelData_UnknownSpriteData_27E5B8:
;$27E5B8
	incbin "Levels/Unknown/UnknownSpriteData_27E5B8.bin"

;--------------------------------------------------------------------

LevelData_UnknownSpriteData_27E5BA:
;$27E5BA
	incbin "Levels/Unknown/UnknownSpriteData_27E5BA.bin"

;--------------------------------------------------------------------

LevelData_UnknownSpriteData_27E5BC:
;$27E5BC
	incbin "Levels/Unknown/UnknownSpriteData_27E5BC.bin"

;--------------------------------------------------------------------

LevelData_UnknownSpriteData_27E5BE:
;$27E5BE
	incbin "Levels/Unknown/UnknownSpriteData_27E5BE.bin"

;--------------------------------------------------------------------

LevelData_UnknownSpriteData_27E5C0:
;$27E5C0
	incbin "Levels/Unknown/UnknownSpriteData_27E5C0.bin"

;--------------------------------------------------------------------

LevelData_UnknownSpriteData_27E5C2:
;$27E5C2
	incbin "Levels/Unknown/UnknownSpriteData_27E5C2.bin"

;--------------------------------------------------------------------

LevelData_UnknownSpriteData_27E5C4:
;$27E5C4
	incbin "Levels/Unknown/UnknownSpriteData_27E5C4.bin"

;--------------------------------------------------------------------

LevelData_UnknownSpriteData_27E5C6:
;$27E5C6
	incbin "Levels/Unknown/UnknownSpriteData_27E5C6.bin"

;--------------------------------------------------------------------

LevelData_UnknownSpriteData_27E5C8:
;$27E5C8
	incbin "Levels/Unknown/UnknownSpriteData_27E5C8.bin"

;--------------------------------------------------------------------

LevelData_UnknownSpriteData_27E5CA:
;$27E5CA
	incbin "Levels/Unknown/UnknownSpriteData_27E5CA.bin"

;--------------------------------------------------------------------

LevelData_UnknownSpriteData_27E5CC:
;$27E5CC
	incbin "Levels/Unknown/UnknownSpriteData_27E5CC.bin"

;--------------------------------------------------------------------

LevelData_UnknownSpriteData_27E5CE:
;$27E5CE
	incbin "Levels/Unknown/UnknownSpriteData_27E5CE.bin"

;--------------------------------------------------------------------

LevelData_UnknownSpriteData_27E5D0:
;$27E5D0
	incbin "Levels/Unknown/UnknownSpriteData_27E5D0.bin"

;--------------------------------------------------------------------

LevelData_UnknownSpriteData_27E5D5:
;$27E5D5
	incbin "Levels/Unknown/UnknownSpriteData_27E5D5.bin"

;--------------------------------------------------------------------

LevelData_ToadHouse_Sprite_Main:
;$27E5E3
	incbin "Levels/ToadHouse_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_SpecialToadHouse_Sprite_Main:
;$27E5E8
	incbin "Levels/SpecialToadHouse_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_UnknownSpriteData_27E5ED:
;$27E5ED
	incbin "Levels/Unknown/UnknownSpriteData_27E5ED.bin"

;--------------------------------------------------------------------

LevelData_UnknownSpriteData_27E61F:
;$27E61F
	incbin "Levels/Unknown/UnknownSpriteData_27E61F.bin"

;--------------------------------------------------------------------

LevelData_UnknownSpriteData_27E62A:
;$27E62A
	incbin "Levels/Unknown/UnknownSpriteData_27E62A.bin"

;--------------------------------------------------------------------

LevelData_UnknownSpriteData_27E62C:
;$27E62C
	incbin "Levels/Unknown/UnknownSpriteData_27E62C.bin"

;--------------------------------------------------------------------

LevelData_UnknownSpriteData_27E62E:
;$27E62E
	incbin "Levels/Unknown/UnknownSpriteData_27E62E.bin"

;--------------------------------------------------------------------

LevelData_UnknownSpriteData_27E630:
;$27E630
	incbin "Levels/Unknown/UnknownSpriteData_27E630.bin"

;--------------------------------------------------------------------

LevelData_UnknownSpriteData_27E632:
;$27E632
	incbin "Levels/Unknown/UnknownSpriteData_27E632.bin"

;--------------------------------------------------------------------

LevelData_UnknownSpriteData_27E634:
;$27E634
	incbin "Levels/Unknown/UnknownSpriteData_27E634.bin"

;--------------------------------------------------------------------

LevelData_UnknownSpriteData_27E648:
;$27E648
	incbin "Levels/Unknown/UnknownSpriteData_27E648.bin"

;--------------------------------------------------------------------

LevelData_UnknownSpriteData_27E650:
;$27E650
	incbin "Levels/Unknown/UnknownSpriteData_27E650.bin"

;--------------------------------------------------------------------

LevelData_World8PipeLevel6Set2_Sprite_Main:
;$27E6A3
	incbin "Levels/Pipe/World8PipeLevel6Set2_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_World8PipeLevel6Set3_Sprite_Main:
;$27E6A8
	incbin "Levels/Pipe/World8PipeLevel6Set3_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_World8PipeLevel6Set5_Sprite_Main:
;$27E6AD
	incbin "Levels/Pipe/World8PipeLevel6Set5_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_World8PipeLevel6Set1_Sprite_Main:
;$27E6B2
	incbin "Levels/Pipe/World8PipeLevel6Set1_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_World8PipeLevel6Set4_Sprite_Main:
;$27E6B7
	incbin "Levels/Pipe/World8PipeLevel6Set4_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_World8PipeLevel1Set1_Sprite_Main:
;$27E6BC
	incbin "Levels/Pipe/World8PipeLevel1Set1_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_World7PipeLevel3Set1_Sprite_Main:
;$27E6C1
	incbin "Levels/Pipe/World7PipeLevel3Set1_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_World7PipeLevel1Set1_Sprite_Main:
;$27E6C6
	incbin "Levels/Pipe/World7PipeLevel1Set1_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_World7PipeLevel4Set1_Sprite_Main:
;$27E6CB
	incbin "Levels/Pipe/World7PipeLevel4Set1_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_World7PipeLevel3Set2_Sprite_Main:
;$27E6D0
	incbin "Levels/Pipe/World7PipeLevel3Set2_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_World7PipeLevel5Set1_Sprite_Main:
;$27E6D5
	incbin "Levels/Pipe/World7PipeLevel5Set1_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_World7PipeLevel2Set1_Sprite_Main:
;$27E6DA
	incbin "Levels/Pipe/World7PipeLevel2Set1_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_World7PipeLevel1Set2_Sprite_Main:
;$27E6DF
	incbin "Levels/Pipe/World7PipeLevel1Set2_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_World7PipeLevel3Set3_Sprite_Main:
;$27E6E4
	incbin "Levels/Pipe/World7PipeLevel3Set3_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_World6PipeLevel1Set1_Sprite_Main:
;$27E6E9
	incbin "Levels/Pipe/World6PipeLevel1Set1_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_World6PipeLevel5Set1_Sprite_Main:
;$27E6EE
	incbin "Levels/Pipe/World6PipeLevel5Set1_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_World2PipeLevel1Set1_Sprite_Main:
;$27E6F3
	incbin "Levels/Pipe/World2PipeLevel1Set1_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_World3PipeLevel2Set1_Sprite_Main:
;$27E6F8
	incbin "Levels/Pipe/World3PipeLevel2Set1_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_World3PipeLevel3Set1_Sprite_Main:
;$27E6FD
	incbin "Levels/Pipe/World3PipeLevel3Set1_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_World3PipeLevel4Set1_Sprite_Main:
;$27E702
	incbin "Levels/Pipe/World3PipeLevel4Set1_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_World4PipeLevel1Set1_Sprite_Main:
;$27E707
	incbin "Levels/Pipe/World4PipeLevel1Set1_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_World4PipeLevel2Set1_Sprite_Main:
;$27E70C
	incbin "Levels/Pipe/World4PipeLevel2Set1_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_World5PipeLevel4Set1_Sprite_Main:
;$27E711
	incbin "Levels/Pipe/World5PipeLevel4Set1_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_5_7_Sprite_Sub:
;$27E716
	incbin "Levels/World5/5-7_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_7_5_Sprite_Sub:
;$27E721
	incbin "Levels/World7/7-5_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_UnknownSpriteData_27E756:
;$27E756
	incbin "Levels/Unknown/UnknownSpriteData_27E756.bin"

;--------------------------------------------------------------------

LevelData_Unused01_Sprite_Main:
;$27E75B
	incbin "Levels/Unused/Unused01_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_4_6_Sprite_Sub:
;$27E78A
	incbin "Levels/World4/4-6_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_Unused02_Sprite_Main:
;$27E7D1
	incbin "Levels/Unused/Unused02_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_7_1_Sprite_Main:
;$27E7FD
	incbin "Levels/World7/7-1_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_7_7_Sprite_Main:
;$27E802
	incbin "Levels/World7/7-7_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_4_6_Sprite_Main:
;$27E807
	incbin "Levels/World4/4-6_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_5_3_Sprite_Sub:
;$27E84E
	incbin "Levels/World5/5-3_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_1_3_Sprite_Main:
;$27E89E
	incbin "Levels/World1/1-3_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_3_5_Sprite_Sub:
;$27E8CD
	incbin "Levels/World3/3-5_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_4_5_Sprite_Sub:
;$27E8D5
	incbin "Levels/World4/4-5_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_7_8_Sprite_Main:
;$27E8DD
	incbin "Levels/World7/7-8_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_3_9_Sprite_Main:
;$27E93F
	incbin "Levels/World3/3-9_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_3_9_Sprite_Sub:
;$27E983
	incbin "Levels/World3/3-9_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_7_6_Sprite_Main:
;$27E988
	incbin "Levels/World7/7-6_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_7_4_Sprite_Main:
;$27E98D
	incbin "Levels/World7/7-4_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_5_1_Sprite_Main:
;$27E992
	incbin "Levels/World5/5-1_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_5_1_Sprite_Sub:
;$27E9C4
	incbin "Levels/World5/5-1_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_UnknownSpriteData_27E9CF:
;$27E9CF
	incbin "Levels/Unknown/UnknownSpriteData_27E9CF.bin"

;--------------------------------------------------------------------

LevelData_8_1_Sprite_Main:
;$27E9D4
	incbin "Levels/World8/8-1_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_3_7_Sprite_Main:
;$27EA1E
	incbin "Levels/World3/3-7_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_3_1_Sprite_Sub:
;$27EA5F
	incbin "Levels/World3/3-1_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_UnknownSpriteData_27EA64:
;$27EA64
	incbin "Levels/Unknown/UnknownSpriteData_27EA64.bin"

;--------------------------------------------------------------------

LevelData_UnknownSpriteData_27EA9C:
;$27EA9C
	incbin "Levels/Unknown/UnknownSpriteData_27EA9C.bin"

;--------------------------------------------------------------------

LevelData_1_1_Sprite_Main:
;$27EAD7
	incbin "Levels/World1/1-1_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_7_5_Sprite_Main:
;$27EB06
	incbin "Levels/World7/7-5_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_3_8_Sprite_Sub:
;$27EB0B
	incbin "Levels/World3/3-8_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_GenericLevelEnd_Sprite:
;$27EB10
	incbin "Levels/GenericLevelEnd_Sprite.bin"

;--------------------------------------------------------------------

LevelData_UnknownSpriteData_27EB15:
;$27EB15
	incbin "Levels/Unknown/UnknownSpriteData_27EB15.bin"

;--------------------------------------------------------------------

LevelData_Unused02_Sprite_Sub:
;$27EB2F
	incbin "Levels/Unused/Unused02_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_1_4_Sprite_Sub:
;$27EB34
	incbin "Levels/World1/1-4_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_UnknownSpriteData_27EB3C:
;$27EB3C
	incbin "Levels/Unknown/UnknownSpriteData_27EB3C.bin"

;--------------------------------------------------------------------

LevelData_3_3_Sprite_Main:
;$27EB3E
	incbin "Levels/World3/3-3_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_3_3_Sprite_Sub:
;$27EB67
	incbin "Levels/World3/3-3_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_Pyramid_Sprite_Sub:
;$27EB6C
	incbin "Levels/World2/Pyramid_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_6_5_Sprite_Sub:
;$27EB9B
	incbin "Levels/World6/6-5_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_6_9_Sprite_Sub:
;$27EBBE
	incbin "Levels/World6/6-9_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_World3HammerBro_Sprite_Main:
;$27EBF0
	incbin "Levels/World3/HammerBro_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_6_6_Sprite_Sub:
;$27EBFB
	incbin "Levels/World6/6-6_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_1_2_Sprite_Main:
;$27EC5A
	incbin "Levels/World1/1-2_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_Unused03_Sprite_Main:
;$27EC8C
	incbin "Levels/Unused/Unused03_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_7_3_Sprite_Main:
;$27ECA3
	incbin "Levels/World7/7-3_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_World1HammerBro_Sprite_Main:
;$27ECDB
	incbin "Levels/World1/HammerBro_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_UnknownSpriteData_27ECE0:
;$27ECE0
	incbin "Levels/Unknown/UnknownSpriteData_27ECE0.bin"

;--------------------------------------------------------------------

LevelData_UnknownSpriteData_27ED09:
;$27ED09
	incbin "Levels/Unknown/UnknownSpriteData_27ED09.bin"

;--------------------------------------------------------------------

LevelData_UnknownSpriteData_27ED14:
;$27ED14
	incbin "Levels/Unknown/UnknownSpriteData_27ED14.bin"

;--------------------------------------------------------------------

LevelData_UnknownSpriteData_27ED2E:
;$27ED2E
	incbin "Levels/Unknown/UnknownSpriteData_27ED2E.bin"

;--------------------------------------------------------------------

LevelData_Unused04_Sprite_Sub:
;$27ED57
	incbin "Levels/Unused/Unused04_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_UnknownSpriteData_27ED9B:
;$27ED9B
	incbin "Levels/Unknown/UnknownSpriteData_27ED9B.bin"

;--------------------------------------------------------------------

LevelData_UnknownSpriteData_27EDBB:
;$27ED9B
	incbin "Levels/Unknown/UnknownSpriteData_27EDBB.bin"

;--------------------------------------------------------------------

LevelData_AngrySun_Sprite_Main:
;$27EDF3
	incbin "Levels/World2/AngrySun_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_4_3_Sprite_Sub:
;$27EE13
	incbin "Levels/World4/4-3_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_2_2_Sprite_Main:
;$27EE45
	incbin "Levels/World2/2-2_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_5_2_Sprite_Main:
;$27EE6E
	incbin "Levels/World5/5-2_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_8_2_Sprite_Main:
;$27EEAF
	incbin "Levels/World8/8-2_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_1_5_Sprite_Main:
;$27EEDB
	incbin "Levels/World1/1-5_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_3_8_Sprite_Main:
;$27EF04
	incbin "Levels/World3/3-8_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_World4Fortress1_Sprite_Sub:
;$27EF18
	incbin "Levels/World4/Fortress1_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_World1GenericBonusRoom_Sprite:
;$27EF26
	incbin "Levels/World1/GenericBonusRoom_Sprite.bin"

;--------------------------------------------------------------------

LevelData_World2GenericBonusRoom_Sprite:
;$27EF28
	incbin "Levels/World2/GenericBonusRoom_Sprite.bin"

;--------------------------------------------------------------------

LevelData_World3GenericBonusRoom_Sprite:
;$27EF2D
	incbin "Levels/World3/GenericBonusRoom_Sprite.bin"

;--------------------------------------------------------------------

LevelData_World4GenericBonusRoom_Sprite:
;$27EF38
	incbin "Levels/World4/GenericBonusRoom_Sprite.bin"

;--------------------------------------------------------------------

LevelData_World5GenericBonusRoom_Sprite:
;$27EF40
	incbin "Levels/World5/GenericBonusRoom_Sprite.bin"

;--------------------------------------------------------------------

LevelData_World6GenericBonusRoom_Sprite:
;$27EF48
	incbin "Levels/World6/GenericBonusRoom_Sprite.bin"

;--------------------------------------------------------------------

LevelData_World7GenericBonusRoom_Sprite:
;$27EF53
	incbin "Levels/World7/GenericBonusRoom_Sprite.bin"

;--------------------------------------------------------------------

LevelData_World8GenericBonusRoom_Sprite:
;$27EF5B
	incbin "Levels/World8/GenericBonusRoom_Sprite.bin"

;--------------------------------------------------------------------

LevelData_3_4_Sprite_Main:
;$27EF63
	incbin "Levels/World3/3-4_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_6_8_Sprite_Main:
;$27EF95
	incbin "Levels/World6/6-8_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_3_2_Sprite_Main:
;$27EFD3
	incbin "Levels/World3/3-2_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_3_2_Sprite_Sub:
;$27F008
	incbin "Levels/World3/3-2_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_3_6_Sprite_Main:
;$27F013
	incbin "Levels/World3/3-6_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_3_6_Sprite_Sub:
;$27F036
	incbin "Levels/World3/3-6_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_6_3_Sprite_Main:
;$27F03E
	incbin "Levels/World6/6-3_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_World6Fortress2_Sprite_Main:
;$27F05B
	incbin "Levels/World6/Fortress2_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_World6Fortress2_Sprite_Sub:
;$27F07E
	incbin "Levels/World6/Fortress2_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_6_5_Sprite_Main:
;$27F083
	incbin "Levels/World6/6-5_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_Unused11_Sprite_Main:
;$27F088
	incbin "Levels/Unused/Unused11_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_5_5_Sprite_Main:
;$27F0BA
	incbin "Levels/World5/5-5_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_Unused12_Sprite_Main:
;$27F0E6
	incbin "Levels/Unused/Unused12_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_Unused13_Sprite_Main:
;$27F0F4
	incbin "Levels/Unused/Unused13_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_6_2_Sprite_Main:
;$27F102
	incbin "Levels/World6/6-2_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_UnknownSpriteData_27F13D:
;$27F13D
	incbin "Levels/Unknown/UnknownSpriteData_27F13D.bin"

;--------------------------------------------------------------------

LevelData_6_1_Sprite_Main:
;$27F172
	incbin "Levels/World6/6-1_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_Unused06_Sprite_Main:
;$27F195
	incbin "Levels/Unused/Unused06_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_6_2_Sprite_Sub:
;$27F1B8
	incbin "Levels/World6/6-2_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_1_6_Sprite_Main:
;$27F1BD
	incbin "Levels/World1/1-6_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_1_4_Sprite_Main:
;$27F1E3
	incbin "Levels/World1/1-4_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_6_4_Sprite_Main:
;$27F21B
	incbin "Levels/World6/6-4_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_Unused07_Sprite_Main:
;$27F250
	incbin "Levels/Unused/Unused07_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_Unused07_Sprite_Sub:
;$27F285
	incbin "Levels/Unused/Unused07_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_6_6_Sprite_Main:
;$27F290
	incbin "Levels/World6/6-6_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_6_10_Sprite_Main:
;$27F298
	incbin "Levels/World6/6-10_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_6_7_Sprite_Main:
;$27F2C7
	incbin "Levels/World6/6-7_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_6_7_Sprite_Sub:
;$27F2D5
	incbin "Levels/World6/6-7_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_6_9_Sprite_Main:
;$27F2DD
	incbin "Levels/World6/6-9_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_7_7_Sprite_Sub:
;$27F2E5
	incbin "Levels/World7/7-7_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_UnknownSpriteData_27F305:
;$27F305
	incbin "Levels/Unknown/UnknownSpriteData_27F305.bin"

;--------------------------------------------------------------------

LevelData_7_1_Sprite_Sub:
;$27F343
	incbin "Levels/World7/7-1_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_7_4_Sprite_Sub:
;$27F372
	incbin "Levels/World7/7-4_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_3_5_Sprite_Main:
;$27F39B
	incbin "Levels/World3/3-5_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_World4Fortress2_Sprite_Sub:
;$27F3C7
	incbin "Levels/World4/Fortress2_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_3_1_Sprite_Main:
;$27F3D5
	incbin "Levels/World3/3-1_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_5_2_Sprite_Sub:
;$27F3FB
	incbin "Levels/World5/5-2_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_7_6_Sprite_Sub:
;$27F406
	incbin "Levels/World7/7-6_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_5_8_Sprite_Main:
;$27F420
	incbin "Levels/World5/5-8_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_4_2_Sprite_Sub:
;$27F431
	incbin "Levels/World4/4-2_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_3_7_Sprite_Sub:
;$27F439
	incbin "Levels/World3/3-7_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_4_1_Sprite_Main:
;$27F447
	incbin "Levels/World4/4-1_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_Unused09_Sprite_Main:
;$27F46D
	incbin "Levels/Unused/Unused09_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_5_7_Sprite_Main:
;$27F48D
	incbin "Levels/World5/5-7_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_4_3_Sprite_Main:
;$27F4BC
	incbin "Levels/World4/4-3_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_4_2_Sprite_Main:
;$27F4C4
	incbin "Levels/World4/4-2_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_5_6_Sprite_Main:
;$27F4F0
	incbin "Levels/World5/5-6_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_5_9_Sprite_Main:
;$27F52B
	incbin "Levels/World5/5-9_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_4_4_Sprite_Main:
;$27F569
	incbin "Levels/World4/4-4_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_Unused03_Sprite_Sub:
;$27F57D
	incbin "Levels/Unused/Unused03_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_1_3_Sprite_Sub:
;$27F582
	incbin "Levels/World1/1-3_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_ExitToSurface_Sprite_Main:
;$27F587
	incbin "Levels/World5/ExitToSurface_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_World5Tower_Sprite_Sub3:
;$27F58C
	incbin "Levels/World5/Tower_Sprite_Sub3.bin"

;--------------------------------------------------------------------

LevelData_World5Tower_Sprite_Sub1:
;$27F594
	incbin "Levels/World5/Tower_Sprite_Sub1.bin"

;--------------------------------------------------------------------

LevelData_4_5_Sprite_Main:
;$27F59C
	incbin "Levels/World4/4-5_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_6_4_Sprite_Sub:
;$27F5D7
	incbin "Levels/World6/6-4_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_1_5_Sprite_Sub:
;$27F5DC
	incbin "Levels/World1/1-5_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_4_1_Sprite_Sub:
;$27F5E1
	incbin "Levels/World4/4-1_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_5_4_Sprite_Main:
;$27F5E9
	incbin "Levels/World5/5-4_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_Muncher2_Sprite_Main:
;$27F618
	incbin "Levels/World7/Muncher2_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_Muncher1_Sprite_Main:
;$27F62C
	incbin "Levels/World7/Muncher1_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_Hand2_Sprite_Main:
;$27F643
	incbin "Levels/World8/Hand2_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_Hand1_Sprite_Main:
;$27F660
	incbin "Levels/World8/Hand1_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_Hand3_Sprite_Main:
;$27F671
	incbin "Levels/World8/Hand3_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_Hand_Sprite_Sub:
;$27F67F
	incbin "Levels/World8/Hand_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_Muncher2_Sprite_Sub:
;$27F68A
	incbin "Levels/World7/Muncher2_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_Muncher1_Sprite_Sub:
;$27F692
	incbin "Levels/World7/Muncher1_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_World4HammerBro_Sprite_Main:
;$27F69A
	incbin "Levels/World4/HammerBro_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_7_8_Sprite_Sub:
;$27F6A2
	incbin "Levels/World7/7-8_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_Pyramid_Sprite_Main:
;$27F6A7
	incbin "Levels/World2/Pyramid_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_7_9_Sprite_Sub:
;$27F6AF
	incbin "Levels/World7/7-9_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_7_2_Sprite_Main:
;$27F6B4
	incbin "Levels/World7/7-2_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_World2HammerBro_Sprite3_Main:
;$27F6F2
	incbin "Levels/World2/HammerBro_Sprite3_Main.bin"

;--------------------------------------------------------------------

LevelData_World2HammerBro_Sprite1_Main:
;$27F6FD
	incbin "Levels/World2/HammerBro_Sprite1_Main.bin"

;--------------------------------------------------------------------

LevelData_Unused08_Sprite_Sub:
;$27F705
	incbin "Levels/Unused/Unused08_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_7_9_Sprite_Main:
;$27F70A
	incbin "Levels/World7/7-9_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_2_1_Sprite_Main:
;$27F739
	incbin "Levels/World2/2-1_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_2_5_Sprite_Main:
;$27F771
	incbin "Levels/World2/2-5_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_2_3_Sprite_Main:
;$27F7A0
	incbin "Levels/World2/2-3_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_World2Fortress_Sprite_Main:
;$27F7D2
	incbin "Levels/World2/Fortress_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_World2Fortress_Sprite_Sub:
;$27F804
	incbin "Levels/World2/Fortress_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_2_4_Sprite_Main:
;$27F80F
	incbin "Levels/World2/2-4_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_UnknownSpriteData_27F83E:
;$27F83E
	incbin "Levels/Unknown/UnknownSpriteData_27F83E.bin"

;--------------------------------------------------------------------

LevelData_2_2_Sprite_Sub:
;$27F855
	incbin "Levels/World2/2-2_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_2_3_Sprite_Sub:
;$27F85A
	incbin "Levels/World2/2-3_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_ThroneRoom_Sprite:
;$27F85F
	incbin "Levels/ThroneRoom_Sprite.bin"

;--------------------------------------------------------------------

LevelData_World5Fortress2_Sprite_Main:
;$27F864
	incbin "Levels/World5/Fortress2_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_World5Fortress2_Sprite_Sub:
;$27F869
	incbin "Levels/World5/Fortress2_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_UnknownSpriteData_27F8B9:
;$27F8B9
	incbin "Levels/Unknown/UnknownSpriteData_27F8B9.bin"

;--------------------------------------------------------------------

LevelData_UnknownSpriteData_27F8D0:
;$27F8D0
	incbin "Levels/Unknown/UnknownSpriteData_27F8D0.bin"

;--------------------------------------------------------------------

LevelData_World1Fortress_Sprite_Main:
;$27F8DB
	incbin "Levels/World1/Fortress_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_World1Fortress_Sprite_Sub:
;$27F901
	incbin "Levels/World1/Fortress_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_World3Fortress2_Sprite_Main:
;$27F912
	incbin "Levels/World3/Fortress2_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_World3Fortress2_Sprite_Sub:
;$27F92F
	incbin "Levels/World3/Fortress2_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_World3Fortress1_Sprite_Main:
;$27F943
	incbin "Levels/World3/Fortress1_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_World3Fortress1_Sprite_Sub:
;$27F975
	incbin "Levels/World3/Fortress1_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_World5Fortress1_Sprite_Main:
;$27F980
	incbin "Levels/World5/Fortress1_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_World5Fortress1_Sprite_Sub:
;$27F9AC
	incbin "Levels/World5/Fortress1_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_Unused05_Sprite_Main:
;$27F9B1
	incbin "Levels/Unused/Unused05_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_World7Fortress2_Sprite_Main:
;$27F9CB
	incbin "Levels/World7/Fortress2_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_World7Fortress2_Sprite_Sub:
;$27FA0C
	incbin "Levels/World7/Fortress2_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_World6Fortress3_Sprite_Main:
;$27FA20
	incbin "Levels/World6/Fortress3_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_World6Fortress3_Sprite_Sub:
;$27FA52
	incbin "Levels/World6/Fortress3_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_World6Fortress1_Sprite_Main:
;$27FA60
	incbin "Levels/World6/Fortress1_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_World6Fortress1_Sprite_Sub:
;$27FA83
	incbin "Levels/World6/Fortress1_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_World7Fortress1_Sprite_Main:
;$27FA94
	incbin "Levels/World7/Fortress1_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_World5Tower_Sprite_Main:
;$27FA9C
	incbin "Levels/World5/Tower_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_World5Tower_Sprite_Sub2:
;$27FAB0
	incbin "Levels/World5/Tower_Sprite_Sub2.bin"

;--------------------------------------------------------------------

LevelData_World4Fortress2_Sprite_Main:
;$27FAB8
	incbin "Levels/World4/Fortress2_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_World4Fortress1_Sprite_Main:
;$27FAD8
	incbin "Levels/World4/Fortress1_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_World8Fortress_Sprite_Main:
;$27FB01
	incbin "Levels/World8/Fortress_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_World8Fortress_Sprite_Sub:
;$27FB39
	incbin "Levels/World8/Fortress_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_BowsersCastle_Sprite_Main:
;$27FB7D
	incbin "Levels/World8/BowsersCastle_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_BowsersCastle_Sprite_Sub:
;$27FBBB
	incbin "Levels/World8/BowsersCastle_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_UnknownSpriteData_27FBE7:
;$27FBE7
	incbin "Levels/Unknown/UnknownSpriteData_27FBE7.bin"

;--------------------------------------------------------------------

LevelData_BoardAirshipCutscene_Sprite:
;$27FC4C
	incbin "Levels/BoardAirshipCutscene_Sprite.bin"

;--------------------------------------------------------------------

LevelData_World4Airship_Sprite_Sub:
;$27FC51
	incbin "Levels/World4/Airship_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_World5Airship_Sprite_Main:
;$27FC56
	incbin "Levels/World5/Airship_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_World1Airship_Sprite_Main:
;$27FC97
	incbin "Levels/World1/Airship_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_World2Airship_Sprite_Main:
;$27FCC6
	incbin "Levels/World2/Airship_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_World3Airship_Sprite_Main:
;$27FCFE
	incbin "Levels/World3/Airship_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_World4Airship_Sprite_Main:
;$27FD3C
	incbin "Levels/World4/Airship_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_World6Airship_Sprite_Main:
;$27FD86
	incbin "Levels/World6/Airship_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_World7Airship_Sprite_Main:
;$27FDB2
	incbin "Levels/World7/Airship_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_World8Airship_Sprite_Main:
;$27FE02
	incbin "Levels/World8/Airship_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_Navy_Sprite_Main:
;$27FE64
	incbin "Levels/World8/Navy_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_Tank2_Sprite_Main:
;$27FEB4
	incbin "Levels/World8/Tank2_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_Tank1_Sprite_Main:
;$27FF07
	incbin "Levels/World8/Tank1_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_World1Airship_Sprite_Sub:
;$27FF7E
	incbin "Levels/World1/Airship_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_World2Airship_Sprite_Sub:
;$27FF83
	incbin "Levels/World2/Airship_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_World3Airship_Sprite_Sub:
;$27FF88
	incbin "Levels/World3/Airship_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_World5Airship_Sprite_Sub:
;$27FF8D
	incbin "Levels/World5/Airship_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_World6Airship_Sprite_Sub:
;$27FF92
	incbin "Levels/World6/Airship_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_World7Airship_Sprite_Sub:
;$27FF97
	incbin "Levels/World7/Airship_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_CoinShip_Sprite_Main:
;$27FF9C
	incbin "Levels/CoinShip_Sprite_Main.bin"

;--------------------------------------------------------------------

LevelData_CoinShip_Sprite_Sub:
;$27FFA7
	incbin "Levels/CoinShip_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_Tank2_Sprite_Sub:
;$27FFB2
	incbin "Levels/World8/Tank2_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_Navy_Sprite_Sub:
;$27FFB7
	incbin "Levels/World8/Navy_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_World8Airship_Sprite_Sub:
;$27FFBC
	incbin "Levels/World8/Airship_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_Tank1_Sprite_Sub:
;$27FFC1
	incbin "Levels/World8/Tank1_Sprite_Sub.bin"

;--------------------------------------------------------------------

LevelData_UnknownSpriteData_27FFCC:
;$27FFCC
	incbin "Levels/Unknown/UnknownSpriteData_27FFCC.bin"

;--------------------------------------------------------------------

LevelData_UnknownSpriteData_27FFF8:
;$27FFF8
	incbin "Levels/Unknown/UnknownSpriteData_27FFF8.bin"
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_GraphicsDecompressionRoutines(Address)
namespace SMB3_GraphicsDecompressionRoutines
%InsertMacroAtXPosition(<Address>)

Main:
	STA.b $08
	STX.b $09
	STY.b $0A
	STZ.b $00
	LDA.b #!RAM_SMB3_Global_DecompressionBuffer>>8
	STA.b $01
	LDA.b #!RAM_SMB3_Global_DecompressionBuffer>>16
	STA.b $02
	JSR.w CODE_20A1CF
	RTL

WorldRollcallEntry1:
	STA.b $08
	STX.b $09
	STY.b $0A
	STZ.b $00
	LDA.b #!RAM_SMB3_WorldRollcall_Layer1World1To4Tilemap>>8
	STA.b $01
	LDA.b #!RAM_SMB3_WorldRollcall_Layer1World1To4Tilemap>>16
	STA.b $02
	JSR.w CODE_20A1CF
	RTL

WorldRollcallEntry2:
	STA.b $08
	STX.b $09
	STY.b $0A
	STZ.b $00
	LDA.b #!RAM_SMB3_WorldRollcall_Layer1World5To8Tilemap>>8
	STA.b $01
	LDA.b #!RAM_SMB3_WorldRollcall_Layer1World5To8Tilemap>>16
	STA.b $02
	JSR.w CODE_20A1CF
	RTL

ADDR_20A1BF:								; Note: Unreferenced code
	STA.b $08
	STX.b $09
	STY.b $0A
	STZ.b $00
	LDA.b #$7F0000>>8
	STA.b $01
	LDA.b #$7F0000>>16
	STA.b $02
CODE_20A1CF:
	REP.b #$10
	LDY.w #$0000
CODE_20A1D4:
	JSR.w CODE_20A26A
	CMP.b #$FF
	BNE.b CODE_20A1DE
	SEP.b #$10
	RTS

CODE_20A1DE:
	STA.b $05
	AND.b #$E0
	CMP.b #$E0
	BEQ.b CODE_20A1F0
	PHA
	LDA.b $05
	REP.b #$20
	AND.w #$001F
	BRA.b CODE_20A202

CODE_20A1F0:
	LDA.b $05
	ASL
	ASL
	ASL
	AND.b #$E0
	PHA
	LDA.b $05
	AND.b #$03
	XBA
	JSR.w CODE_20A26A
	REP.b #$20
CODE_20A202:
	INC
	STA.b $03
	SEP.b #$20
	PLA
	BEQ.b CODE_20A220
	BMI.b CODE_20A252
	ASL
	BPL.b CODE_20A22F
	ASL
	BPL.b CODE_20A23C
	JSR.w CODE_20A26A
	LDX.b $03
CODE_20A217:
	STA.b [$00],y
	INC
	INY
	DEX
	BNE.b CODE_20A217
	BRA.b CODE_20A1D4

CODE_20A220:
	JSR.w CODE_20A26A
	STA.b [$00],y
	INY
	LDX.b $03
	DEX
	STX.b $03
	BNE.b CODE_20A220
	BRA.b CODE_20A1D4

CODE_20A22F:
	JSR.w CODE_20A26A
	LDX.b $03
CODE_20A234:
	STA.b [$00],y
	INY
	DEX
	BNE.b CODE_20A234
	BRA.b CODE_20A1D4

CODE_20A23C:
	JSR.w CODE_20A279
	LDX.b $03
CODE_20A241:
	XBA
	STA.b [$00],y
	INY
	DEX
	BEQ.b CODE_20A24F
	XBA
	STA.b [$00],y
	INY
	DEX
	BNE.b CODE_20A241
CODE_20A24F:
	JMP.w CODE_20A1D4

CODE_20A252:
	JSR.w CODE_20A279
	TAX
CODE_20A256:
	PHY
	TXY
	LDA.b [$00],y
	PLY
	STA.b [$00],y
	INY
	INX
	REP.b #$20
	DEC.b $03
	SEP.b #$20
	BNE.b CODE_20A256
	JMP.w CODE_20A1D4

CODE_20A26A:
	LDA.b [$08]
	LDX.b $08
	INX
	BNE.b CODE_20A276
	LDX.w #$8000
	INC.b $0A
CODE_20A276:
	STX.b $08
	RTS

CODE_20A279:
	LDA.b [$08]
	LDX.b $08
	INX
	BNE.b CODE_20A285
	LDX.w #$8000
	INC.b $0A
CODE_20A285:
	STX.b $08
	XBA
	LDA.b [$08]
	INX
	BNE.b CODE_20A292
	LDX.w #$8000
	INC.b $0A
CODE_20A292:
	STX.b $08
	RTS
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr001_UnusedSprite_Status01(Address)
namespace SMB3_NorSpr001_UnusedSprite_Status01
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.b #$00
	STA.w $0679,x
	STA.w $0689,x
	RTL
namespace off
endmacro

;--------------------------------------------------------------------

macro ROUTINE_SMB3_NorSpr001_UnusedSprite_Status02(Address)
namespace SMB3_NorSpr001_UnusedSprite_Status02
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.w $0689,x
	BNE.b CODE_2886EA
	JSL.l CODE_27A317
	JMP.w CODE_2886EE

CODE_2886EA:
	JSL.l CODE_288715
CODE_2886EE:
	JSR.w CODE_288FAF
	LDA.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	STA.w $0669,x
	LDA.b $C1
	BEQ.b CODE_28870C
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	AND.b #$0F
	BEQ.b CODE_28870C
	LDY.b #$0F
	LDA.b !RAM_SMB3_Level_Player_XSpeed
	BPL.b CODE_28870A
	LDY.b #$F1
CODE_28870A:
	STY.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_28870C:
	JSL.l CODE_279EBC
	JSL.l CODE_279BC4
	RTL
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr002_UnusedSprite_Status01(Address)
namespace SMB3_NorSpr002_UnusedSprite_Status01
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.b #$00
	STA.w $057C
	LDA.w $0603
	EOR.w $0604
	BEQ.b CODE_28878F
	LDA.b #$00
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	RTL

CODE_28878F:
	LDA.b !RAM_SMB3_Level_Player_YPosHi
	STA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	LDA.b !RAM_SMB3_Level_Player_YPosLo
	CLC
	ADC.b #$20
	AND.b #$F0
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	BCC.b CODE_2887A0
	INC.b !RAM_SMB3_Level_NorSpr_YPosHi,x
CODE_2887A0:
	LDA.b !RAM_SMB3_Level_Player_XPosLo
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	LDA.b !RAM_SMB3_Level_Player_XPosHi
	STA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	LDA.b #$0B
	STA.w $0518,x
	STA.b $A6
	LDA.b #$00
	STA.w $0679,x
	STA.b !RAM_SMB3_Level_Player_YSpeed
	LDA.b #$B0
	STA.w $0689,x
	RTL
namespace off
endmacro

;--------------------------------------------------------------------

macro ROUTINE_SMB3_NorSpr002_UnusedSprite_Status02(Address)
namespace SMB3_NorSpr002_UnusedSprite_Status02
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.b #$01
	STA.b $A6
	LDY.w $0518,x
	BNE.b CODE_2887D3
	LDA.b #$00
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	LDA.w $0689,x
	STA.b !RAM_SMB3_Level_Player_YSpeed
	STA.w $0579
	RTL

CODE_2887D3:
	LDY.w $0518,x
	LDA.w DATA_21B898,y
	STA.w $0669,x
	LDA.w DATA_21B8BD,y
	STA.b !RAM_SMB3_Level_Player_YSpeed
	LDA.w $0518,x
	CMP.b #$07
	BPL.b CODE_2887F3
	LDA.b !RAM_SMB3_Global_ControllerPress1
	AND.b #!Joypad_A|(!Joypad_B>>8)
	BEQ.b CODE_2887F3
	LDA.b #$88
	STA.w $0689,x
CODE_2887F3:
	JSL.l CODE_279EBC
	RTS				; Crash: This will cause the game to crash! It needs to be an RTL!
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr004_UnusedStickySprite_Status01(Address)
namespace SMB3_NorSpr004_UnusedStickySprite_Status01
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.b #$40
	STA.w $0679,x
	LDY.b #$08
	LDA.b $25
	BNE.b CODE_288808
	STA.w $0679,x
	LDY.b #$F8
CODE_288808:
	STY.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	RTL
namespace off
endmacro

;--------------------------------------------------------------------

macro ROUTINE_SMB3_NorSpr004_UnusedStickySprite_Status02(Address)
namespace SMB3_NorSpr004_UnusedStickySprite_Status02
%InsertMacroAtXPosition(<Address>)

Main:
	JSL.l CODE_27A317
	JSR.w CODE_288FAF
	JSL.l CODE_279F70
	INC.w $0518,x
	JSL.l CODE_279F52
	JSL.l CODE_279BC4
	RTL
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr005_UnusedBouncyEnemy_Status01(Address)
namespace SMB3_NorSpr005_UnusedBouncyEnemy_Status01
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.b #$40
	STA.w $0679,x
	LDY.b #$08
	LDA.b $25
	BNE.b CODE_288845
	STA.w $0679,x
	LDY.b #$F8
CODE_288845:
	STY.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	RTL
namespace off
endmacro

;--------------------------------------------------------------------

macro ROUTINE_SMB3_NorSpr005_UnusedBouncyEnemy_Status02(Address)
namespace SMB3_NorSpr005_UnusedBouncyEnemy_Status02
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.w $0518,x
	BNE.b CODE_288869
	LDA.b $A7,x
	AND.b #$04
	BEQ.b CODE_2888AB
	LDA.w !RAM_SMB3_Global_RandomByte02,x
	AND.b #$3F
	BNE.b CODE_2888AB
	LDA.w !RAM_SMB3_Global_RandomByte02,x
	AND.b #$80
	ASL
	ROL
	STA.w $0689,x
	LDA.b #$90
	STA.w $0518,x
CODE_288869:
	LDA.w $0518,x
	CMP.b #$01
	BNE.b CODE_28889D
	LDA.w $0689,x
	BEQ.b CODE_288886
	JSL.l CODE_27A7AE
	EOR.w $0679,x
	AND.b #$40
	BEQ.b CODE_2888AB
	JSL.l CODE_279906
	BRA.b CODE_2888AB

CODE_288886:
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	CMP.b !RAM_SMB3_Level_Player_YPosHi
	BMI.b CODE_2888AB
	BNE.b CODE_288894
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	CMP.b !RAM_SMB3_Level_Player_YPosLo
	BCC.b CODE_288897
CODE_288894:
	INC.w $0518,x
CODE_288897:
	LDA.b #$E0
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	BRA.b CODE_2888AB

CODE_28889D:
	LDA.b #$01
	LDY.w $0689,x
	BNE.b CODE_2888A6
	LDA.b #$02
CODE_2888A6:
	STA.w $0669,x
	BRA.b CODE_2888AE

CODE_2888AB:
	JSR.w CODE_288FAF
CODE_2888AE:
	JSL.l CODE_279F70
	JSL.l CODE_27A317
	JSL.l CODE_279EBC
	JSL.l CODE_279BC4
	RTL
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr006_VerticalBounceSprite_Status01(Address)
namespace SMB3_NorSpr006_VerticalBounceSprite_Status01
%InsertMacroAtXPosition(<Address>)

ADDR_2888FE:							;\ Note: Unreferenced code?
	JSL.l CODE_27A6EC					;/
Main:
	LDA.w $057D
	STA.w $0691,x
	BEQ.b CODE_288913
	LDA.w $057E
	BNE.b CODE_28891A
	LDA.b #$20
	STA.b !RAM_SMB3_Level_Player_YSpeed
CODE_288913:
	STX.b $A6
	LDA.b #$00
	STA.w !RAM_SMB3_Level_Player_SomersaultJumpFlag
CODE_28891A:
	LDA.w $057C
	STA.w $0689,x
	LSR
	LSR
	LSR
	LSR
	STA.w $0669,x
	LDA.b #$00
	STA.w $057C
	STA.w $057E
	STA.w $0679,x
	STA.w !RAM_SMB3_Level_NorSpr_YOffscreenFlag,x
	STA.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,x
	LDA.b #$0A
	STA.w !RAM_SMB3_NorSpr006_VerticalBounceSprite_BounceTimer,x
	JSL.l SMB3_CheckIfSpriteIsHorizontallyOffScreen_Main
	JSR.w CODE_288A45
	RTL
namespace off
endmacro

;--------------------------------------------------------------------

macro ROUTINE_SMB3_NorSpr006_VerticalBounceSprite_Status02(Address)
namespace SMB3_NorSpr006_VerticalBounceSprite_Status02
%InsertMacroAtXPosition(<Address>)

Main:
	LDY.w !RAM_SMB3_NorSpr006_VerticalBounceSprite_BounceTimer,x
	BNE.b CODE_2889B0
	LDA.b #$00
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	LDA.w $0689,x
	LSR
	LSR
	LSR
	LSR
	TAY
	LDA.w DATA_21B8B5,y
	CMP.b #$07
	BNE.b CODE_288965
	LDY.w !RAM_SMB3_Level_PSwitchTimer
	BEQ.b CODE_288965
	LDA.b #$11
CODE_288965:
	STA.b $0B
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	STA.b $0E
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	STA.b $0F
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	STA.b $0C
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	AND.b #$F0
	STA.b $0D
	JSL.l CODE_27A8B2
	LDA.w $0691,x
	BNE.b CODE_2889AF
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$B8
else
	LDA.b #$C8
endif
	STA.b !RAM_SMB3_Level_Player_YSpeed
	STA.w $0579
	LDA.w $0520,x
	BEQ.b CODE_2889AF
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$80
else
	LDA.b #$90
endif
	STA.b !RAM_SMB3_Level_Player_YSpeed
	LDA.w $0689,x
	AND.b #$F0
	CMP.b #$10
	BNE.b CODE_2889AF
	LDA.w !RAM_SMB3_Level_Player_IsSwimmingFlag
	BNE.b CODE_2889AF
	LDA.b #$80
	STA.w !RAM_SMB3_Level_WarpToCoinHeavenTimer
	LDA.b #!Define_SMAS_Sound0063_Springboard
	STA.w !RAM_SMB3_Global_SoundCh3
	LDA.b #!Define_SMB3_LevelMusic_MusicFade
	STA.w !RAM_SMB3_Global_MusicCh1
CODE_2889AF:
	RTL

CODE_2889B0:
	LDA.w !RAM_SMB3_NorSpr006_VerticalBounceSprite_BounceTimer,x
	CMP.b #$0A
	BNE.b CODE_288A17
	LDA.w $0689,x
	AND.b #$0F
	TAY
	LDA.w DATA_21B8AD,y
	BEQ.b CODE_2889FC
	STA.b $00
	LDY.b #$05
	LDA.b $00
	STA.w !RAM_SMB3_Level_NorSpr_SpriteID,y
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	STA.w !RAM_SMB3_Level_NorSpr_XPosLo,y
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	STA.w !RAM_SMB3_Level_NorSpr_XPosHi,y
	LDA.b #$01
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,y
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	STA.b $00
	LDA.b #$08
	STY.b $01
	LDY.w $0691,x
	BEQ.b CODE_2889EB
	DEC.b $00
	LDA.b #$FF
CODE_2889EB:
	LDY.b $01
	CLC
	ADC.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	STA.w !RAM_SMB3_Level_NorSpr_YPosLo,y
	BCC.b CODE_2889F7
	INC.b $00
CODE_2889F7:
	LDA.b $00
	STA.w !RAM_SMB3_Level_NorSpr_YPosHi,y
CODE_2889FC:
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	STA.b $0C
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	STA.b $0D
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	STA.b $0E
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	STA.b $0F
	LDA.w $0691,x
	BEQ.b CODE_288A17
	LDA.b #$F3
	JSL.l CODE_27A75E
CODE_288A17:
	JSL.l CODE_27A7D9
	JSR.w CODE_288A45
	LDY.w !RAM_SMB3_NorSpr006_VerticalBounceSprite_BounceTimer,x
	LDA.w DATA_21B8BD,y
	LDY.w $0691,x
	BEQ.b CODE_288A32
	JSL.l SMB3_UnnecessaryInvertARt_Main
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	JMP.w CODE_288A41

CODE_288A32:
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	STA.b !RAM_SMB3_Level_Player_YSpeed
	LDA.b !RAM_SMB3_Global_ControllerPress1
	AND.b #!Joypad_A|(!Joypad_B>>8)
	BEQ.b CODE_288A41
	LDA.b #$0B
	STA.w $0520,x
CODE_288A41:
	DEC.w !RAM_SMB3_NorSpr006_VerticalBounceSprite_BounceTimer,x
	RTL
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr007_SecretToadHouseWarp_Status01(Address)
namespace SMB3_NorSpr007_SecretToadHouseWarp_Status01
%InsertMacroAtXPosition(<Address>)

Main:
;$2893D2
	LDA.l $7E396E
	BEQ.b CODE_2893DD
	LDA.b #$00
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
CODE_2893DD:
	RTL
namespace off
endmacro

;--------------------------------------------------------------------

macro ROUTINE_SMB3_NorSpr007_SecretToadHouseWarp_Status02(Address)
namespace SMB3_NorSpr007_SecretToadHouseWarp_Status02
%InsertMacroAtXPosition(<Address>)

Main:
;$2893DE
	LDA.b $9C
	BNE.b CODE_28942C
	JSL.l CODE_279BC4
	LDA.w !RAM_SMB3_Level_Player_BehindLayer1Timer
	BEQ.b CODE_28942C
	JSL.l CODE_27A7AE
	LDA.b $0E
	CLC
	ADC.b #$04
	CMP.b #$08
	BCS.b CODE_28942C
	JSL.l CODE_27A7C5
	LDA.b $0E
	CLC
	ADC.b #$08
	CMP.b #$10
	BCS.b CODE_28942C
	LDA.b #$01
	STA.w !RAM_SMB3_Level_ToadHouseChestContentsIndex
	LSR
	STA.b $8B
	STA.b !RAM_SMB3_Level_Player_YSpeed
	LDA.b #SMB3_LevelData_SpecialToadHouse_Sprite_Main
	STA.b !RAM_SMB3_Level_SpriteDataPtrLo
	LDA.b #SMB3_LevelData_SpecialToadHouse_Sprite_Main>>8
	STA.b !RAM_SMB3_Level_SpriteDataPtrHi
	LDA.b #SMB3_LevelData_SpecialToadHouse_Level_Main
	STA.b !RAM_SMB3_Level_LevelDataPtrLo
	LDA.b #SMB3_LevelData_SpecialToadHouse_Level_Main>>8
	STA.b !RAM_SMB3_Level_LevelDataPtrHi
	LDA.b #SMB3_LevelData_SpecialToadHouse_Level_Main>>16
	STA.b !RAM_SMB3_Level_LevelDataPtrBank
	LDA.b #$05
	STA.w $0414
	STA.l $7E396E
CODE_28942C:
	RTL
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr008_InvisiblePSwitchDoor_Status01(Address)
namespace SMB3_NorSpr008_InvisiblePSwitchDoor_Status01
%InsertMacroAtXPosition(<Address>)

Main:
;$2893C9
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	BNE.b CODE_2893CF
	DEC.b !RAM_SMB3_Level_NorSpr_YPosHi,x
CODE_2893CF:
	DEC.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	RTL
namespace off
endmacro

;--------------------------------------------------------------------

macro ROUTINE_SMB3_NorSpr008_InvisiblePSwitchDoor_Status02(Address)
namespace SMB3_NorSpr008_InvisiblePSwitchDoor_Status02
%InsertMacroAtXPosition(<Address>)

Main:
	JSL.l CODE_279BC4
	LDA.w !RAM_SMB3_Level_PSwitchTimer
	BEQ.b SMB3_NorSpr007_SecretToadHouseWarp_Status02_CODE_28942C
	LDA.b $9C
	BNE.b CODE_28946C
	LDA.b $A6
	BNE.b CODE_28946C
	LDA.b !RAM_SMB3_Global_ControllerHold1
	AND.b #!Joypad_DPadU>>8
	BEQ.b CODE_28946C
	JSL.l CODE_27A7AE
	LDA.b $0E
	CLC
	ADC.b #$02
	CMP.b #$04
	BCS.b CODE_28946C
	JSL.l CODE_27A7C5
	INC.b $0E
	BNE.b CODE_28946C
	LDY.b #$01
	LDA.w $0379
	BEQ.b CODE_289462
	LDY.b #$03
CODE_289462:
	STY.w $0414
	LDA.b #$00
	STA.w $0713
	STA.b !RAM_SMB3_Level_Player_XSpeed
CODE_28946C:
	JSL.l CODE_279F52
	RTL
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr009_AirshipAnchor_Status01(Address)
namespace SMB3_NorSpr009_AirshipAnchor_Status01
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	ORA.b #$0C
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	RTL
namespace off
endmacro

;--------------------------------------------------------------------

macro ROUTINE_SMB3_NorSpr009_AirshipAnchor_Status02(Address)
namespace SMB3_NorSpr009_AirshipAnchor_Status02
%InsertMacroAtXPosition(<Address>)

Main:
;$288B03
	LDA.w !RAM_SMB3_Level_Player_BoardAirshipAnimationState
	CMP.b #$03
	BNE.b CODE_288B12
	LDA.b #$F4
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	JSL.l CODE_27A7D9
CODE_288B12:
	LDA.b #$B0
	STA.b $C6,x
	STZ.b $C7,x
	JSL.l CODE_279F6C
	REP.b #$10
	LDY.b $C6,x
	LDA.w SMB3_OAMBuffer[$02].Prop,y
	ORA.b #$40
	STA.w SMB3_OAMBuffer[$02].Prop,y
	STA.w SMB3_OAMBuffer[$05].Prop,y
	LDA.w $0543
	STA.b $D8
	LDA.w $0542
	STA.b $D9
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	XBA
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	REP.b #$20
	SEC
	SBC.b $D8
	SEC
	SBC.w #$0010
	STA.b $D8
	CLC
	ADC.w #$0008
	STA.b $DA
	CMP.w #$FFF0
	BCS.b CODE_288B55
	CMP.w #$00F0
	BCS.b CODE_288B5A
CODE_288B55:
	SEP.b #$20
	STA.w SMB3_OAMBuffer[$07].YDisp,y
CODE_288B5A:
	REP.b #$20
	LDA.b $D8
	CMP.w #$FFF0
	BCS.b CODE_288B68
	CMP.w #$00F0
	BCS.b CODE_288B6D
CODE_288B68:
	SEP.b #$20
	STA.w SMB3_OAMBuffer[$06].YDisp,y
CODE_288B6D:
	SEP.b #$20
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenXPos,x
	CLC
	ADC.b #$08
	STA.b $01
	STA.w SMB3_OAMBuffer[$06].XDisp,y
	STA.w SMB3_OAMBuffer[$07].XDisp,y
	LDA.b #$C6
	STA.w SMB3_OAMBuffer[$06].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$07].Tile,y
	LDA.w $1FE9,x
	ASL
	ORA.b #$20
	STA.w SMB3_OAMBuffer[$06].Prop,y
	STA.w SMB3_OAMBuffer[$07].Prop,y
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,x
	ROL
	ROL
	ROL
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$06].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$07].Slot,y
	LDA.w $0543
	STA.b $D8
	LDA.w $0542
	STA.b $D9
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	XBA
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	REP.b #$20
	SEC
	SBC.b $D8
	STA.b $D8
	SEP.b #$20
	LDY.w #$00E0
CODE_288BC2:
	REP.b #$20
	LDA.b $D8
	SEC
	SBC.w #$0010
	STA.b $D8
	CMP.w #$FFF0
	BCS.b CODE_288BD6
	CMP.w #$00F0
	BCS.b CODE_288C20
CODE_288BD6:
	SEP.b #$20
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$01].YDisp,y
	LDA.b #$CA
	STA.w SMB3_OAMBuffer[$00].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$01].Tile,y
	LDA.w $1FE9,x
	ASL
	ORA.b #$20
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$01].Prop,y
	LDA.b $01
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	PHY
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,x
	ROL
	ROL
	ROL
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	PLY
	INY
	INY
	INY
	INY
	INY
	INY
	INY
	INY
	BRA.b CODE_288BC2

CODE_288C20:
	SEP.b #$30
	RTL
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr00A_UnusedPushableBlock_Status01(Address)
namespace SMB3_NorSpr00A_UnusedPushableBlock_Status01
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.b #$00
	STA.w $0679,x
	RTL
namespace off
endmacro

;--------------------------------------------------------------------

macro ROUTINE_SMB3_NorSpr00A_UnusedPushableBlock_Status02(Address)
namespace SMB3_NorSpr00A_UnusedPushableBlock_Status02
%InsertMacroAtXPosition(<Address>)

Main:
	JSL.l CODE_27A317
	JSR.w CODE_288FAF
	LDA.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$08
	LSR
	LSR
	LSR
	STA.w $0669,x
	JSL.l CODE_279EBC
	JSL.l CODE_279BC4
	RTL
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr00E_KoopaKid_Status01(Address)
namespace SMB3_NorSpr00E_KoopaKid_Status01
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.w !RAM_SMB3_Global_CurrentWorld
	ASL
	ASL
	ASL
	TAY
	REP.b #$20
	LDA.w DATA_21B905,y
	STA.w SMB3_PaletteMirror[$A0].LowByte
	LDA.w DATA_21B905+$02,y
	STA.w SMB3_PaletteMirror[$A1].LowByte
	LDA.w DATA_21B905+$04,y
	STA.w SMB3_PaletteMirror[$A2].LowByte
	LDA.w DATA_21B905+$06,y
	STA.w SMB3_PaletteMirror[$A3].LowByte
	SEP.b #$20
	LDA.b #$01
	STA.w !RAM_SMB3_Global_UpdateEntirePaletteFlag
	LDX.b $9B
	LDA.b #$0A
	STA.w $1CF6,x
	LDA.b #$40
	STA.w $1FD2,x
	RTL
namespace off
endmacro

;--------------------------------------------------------------------

macro ROUTINE_RT00_SMB3_NorSpr00E_KoopaKid_Status02(Address)
namespace SMB3_NorSpr00E_KoopaKid_Status02
%InsertMacroAtXPosition(<Address>)

Main:
;$2894F5
	JSR.w Sub
	RTL

Sub:
	LDA.w $07BE
	JSL.l SMB3_ExecutePtr_Absolute

DATA_289500:
	dw CODE_289556
	dw CODE_289510
	dw CODE_289ABE
	dw CODE_289AB6
	dw CODE_289ABF
	dw CODE_289ACC
	dw CODE_289AFE
	dw CODE_289B18

CODE_289510:
	JSR.w CODE_28981D
	LDA.b $9C
	BNE.b CODE_289555
	LDA.w $0520,x
	CMP.b #$08
	BCC.b CODE_28952B
	BNE.b CODE_289555
	LDA.b #!Define_SMAS_Sound0063_BossDefeat
	STA.w !RAM_SMB3_Global_SoundCh3
	LDA.b #$FF
	STA.w $02E1
	RTS

CODE_28952B:
	ORA.b #$04
	STA.w $0520,x
	CMP.b #$08
	BNE.b CODE_289534
CODE_289534:
	LDA.w !RAM_SMB3_Level_NorSpr_YOffscreenFlag,x
	CMP.b #$03
	BNE.b CODE_289549
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	SBC.b #$78
	CMP.b #$10
	BCS.b CODE_289549
	INC.w $07BE
	JMP.w CODE_28975A

CODE_289549:
	JSL.l CODE_27A7F0
	LDA.b #$A0
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	JSL.l CODE_27A7D9
CODE_289555:
	RTS

CODE_289556:
	LDA.w !RAM_SMB3_Global_CurrentWorld
	CMP.b #$05
	BNE.b CODE_289560
	JMP.w CODE_289CC4

CODE_289560:
	LDA.w $0689,x
	BEQ.b CODE_289580
	DEC.w $0689,x
	LDA.b $A6
	BNE.b CODE_289580
	INC.b $A6
	LDA.b #$20
	STA.w !RAM_SMB3_Level_Player_DisableControlsTimer
	LDA.b #$F0
	STA.b !RAM_SMB3_Level_Player_YSpeed
	DEC.b !RAM_SMB3_Level_Player_YPosLo
	LDY.b !RAM_SMB3_Level_Player_YPosLo
	INY
	BNE.b CODE_289580
	DEC.b !RAM_SMB3_Level_Player_YPosHi
CODE_289580:
	JSR.w CODE_28981D
	LDA.b $9C
	BNE.b CODE_2895BD
	JSR.w CODE_289C50
	JSR.w CODE_28964E
	JSL.l CODE_27A317
	JSL.l CODE_27A7AE
	LDA.w $0520,x
	BEQ.b CODE_2895BE
	CMP.b #$40
	BCS.b CODE_2895BD
	LSR
	BNE.b CODE_2895AA
	STA.w $0669,x
	LDA.b $0F
	STA.w $0679,x
	RTS

CODE_2895AA:
	LDA.b $A7,x
	AND.b #$04
	BEQ.b CODE_2895BD
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.w DATA_21B94B,y
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	LDA.b #$B8
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_2895BD:
	RTS

CODE_2895BE:
	LDA.w $0518,x
	BEQ.b CODE_2895D9
	AND.b #$07
	BNE.b CODE_2895BD
	LDA.b #$03
	STA.w $0669,x
	LDA.w !RAM_SMB3_Global_CurrentWorld
	CMP.b #$02
	BNE.b CODE_2895D6
	JMP.w CODE_289E79

CODE_2895D6:
	JMP.w CODE_28965C

CODE_2895D9:
	LDA.b $A7,x
	AND.b #$04
	BEQ.b CODE_28964D
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$07
	BNE.b CODE_2895F3
	LDA.b $0F
	STA.w $0679,x
	LDY.b #$10
	ASL
	BMI.b CODE_2895F1
	LDY.b #$F0
CODE_2895F1:
	STY.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_2895F3:
	LDA.b !RAM_SMB3_Global_FrameCounter
	LSR
	LSR
	LSR
	AND.b #$01
	STA.w $0669,x
	LDY.b $4D,x
	LDA.w DATA_21B94D,y
	CLC
	ADC.w !RAM_SMB3_Global_CurrentWorld
	TAY
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.w DATA_21B965,y
	BNE.b CODE_289614
	LDA.w DATA_21B97A,y
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	RTS

CODE_289614:
	LDA.w !RAM_SMB3_Global_CurrentWorld
	CMP.b #$02
	BNE.b CODE_289627
	LDA.b $4D,x
	CMP.w $0771,x
	BCC.b CODE_28964D
	INC.w $0771,x
	BNE.b CODE_28962E
CODE_289627:
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.w DATA_21B950,y
	BNE.b CODE_28964D
CODE_28962E:
	LDA.b $0F
	STA.w $0679,x
	LDA.b #$02
	STA.w $0669,x
	LDA.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	LDA.b #$10
	LDY.w !RAM_SMB3_Global_CurrentWorld
	CPY.b #$02
	BEQ.b CODE_28964A
	JSR.w CODE_2896C5
	LDA.b #$20
CODE_28964A:
	STA.w $0518,x
CODE_28964D:
	RTS
namespace off
endmacro

macro ROUTINE_RT01_SMB3_NorSpr00E_KoopaKid_Status02(Address)
namespace SMB3_NorSpr00E_KoopaKid_Status02
%InsertMacroAtXPosition(<Address>)

CODE_28965C:
	LDA.w $0679,x
	ASL
	ROL
	ROL
	AND.b #$01
	TAY
	LDA.w DATA_21B98F,y
	STA.b $00
	JSL.l SMB3_FindFreeExtendedSpriteSlot_FixedPriority
	BCS.b CODE_2896C4
	LDA.b #!Define_SMB3_SpriteID_ExtSpr08_WandBlast
	STA.w !RAM_SMB3_Level_ExtSpr_SpriteID,y
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	STA.b $D9
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	STA.b $D8
	REP.b #$20
	LDA.b $00
	AND.w #$00FF
	CMP.w #$0080
	BCC.b CODE_28968C
	ORA.w #$FF00
CODE_28968C:
	CLC
	ADC.b $D8
	SEP.b #$20
	STA.w !RAM_SMB3_Level_ExtSpr_XPosLo,y
	XBA
	STA.w !RAM_SMB3_Level_ExtSpr_XPosHi,y
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	CLC
	ADC.b #$0A
	STA.w !RAM_SMB3_Level_ExtSpr_YPosLo,y
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	ADC.b #$00
	STA.w !RAM_SMB3_Level_ExtSpr_YPosHi,y
	LDA.w $077B,x
	STA.w !RAM_SMB3_Level_ExtSpr_YSpeed,y
	LDA.w $0776,x
	STA.w !RAM_SMB3_Level_ExtSpr_XSpeed,y
	LDA.b #$FF
	STA.w $06D1,y
	LDA.w $04E2
	AND.b #$80
	BNE.b CODE_2896C4
	LDA.b #!Define_SMAS_Sound0060_CarryItemToGoal
	STA.w !RAM_SMB3_Global_SoundCh1
CODE_2896C4:
	RTS

CODE_2896C5:
	LDA.b #$14
	STA.b $01
	TXA
	PHA
	TYA
	PHA
	LDA.b !RAM_SMB3_Level_Player_YPosLo
	PHA
	CMP.b #$50
	BCS.b CODE_2896D8
	LDA.b #$50
	STA.b !RAM_SMB3_Level_Player_YPosLo
CODE_2896D8:
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_Y
	STY.b $02
	LDA.b $0F
	BPL.b CODE_2896E6
	JSL.l SMB3_UnnecessaryInvertARt_Main
CODE_2896E6:
	STA.b $0C
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	STY.b $03
	LDA.b $0F
	BPL.b CODE_2896F6
	JSL.l SMB3_UnnecessaryInvertARt_Main
CODE_2896F6:
	STA.b $0D
	LDY.b #$00
	LDA.b $0D
	CMP.b $0C
	BCS.b CODE_289709
	INY
	PHA
	LDA.b $0C
	STA.b $0D
	PLA
	STA.b $0C
CODE_289709:
	LDA.b #$00
	STA.b $0B
	STA.b $00
	LDX.b $01
CODE_289711:
	LDA.b $0B
	CLC
	ADC.b $0C
	CMP.b $0D
	BCC.b CODE_28971E
	SBC.b $0D
	INC.b $00
CODE_28971E:
	STA.b $0B
	DEX
	BNE.b CODE_289711
	TYA
	BEQ.b CODE_289730
	LDA.b $00
	PHA
	LDA.b $01
	STA.b $00
	PLA
	STA.b $01
CODE_289730:
	LDA.b $00
	LDY.b $02
	BEQ.b CODE_28973C
	JSL.l SMB3_UnnecessaryInvertARt_Main
	STA.b $00
CODE_28973C:
	LDA.b $01
	LDY.b $03
	BEQ.b CODE_289748
	JSL.l SMB3_UnnecessaryInvertARt_Main
	STA.b $01
CODE_289748:
	PLA
	STA.b !RAM_SMB3_Level_Player_YPosLo
	PLA
	TAY
	PLA
	TAX
	LDA.b $00
	STA.w $077B,x
	LDA.b $01
	STA.w $0776,x
	RTS

CODE_28975A:
	LDY.b #$05
CODE_28975C:
	LDA.w !RAM_SMB3_Level_ExtSpr_SpriteID,y
	BEQ.b CODE_289765
	DEY
	BPL.b CODE_28975C
	RTS

CODE_289765:
	LDA.b #!Define_SMB3_SpriteID_ExtSpr10_MagicWand
	STA.w !RAM_SMB3_Level_ExtSpr_SpriteID,y
	LDA.b #$80
	STA.w !RAM_SMB3_Level_ExtSpr_XPosLo,y
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	STA.w !RAM_SMB3_Level_ExtSpr_YPosLo,y
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	STA.w !RAM_SMB3_Level_ExtSpr_YPosHi,y
	LDA.b #$00
	STA.w !RAM_SMB3_Level_ExtSpr_YSpeed,y
	STA.w !RAM_SMB3_Level_ExtSpr_XSpeed,y
	STA.w !RAM_SMB3_Level_ExtSpr_XPosHi,y
	LDA.b #$50
	STA.w $06BD,y
	STZ.w $1CFE
	RTS
namespace off
endmacro

macro ROUTINE_RT02_SMB3_NorSpr00E_KoopaKid_Status02(Address)
namespace SMB3_NorSpr00E_KoopaKid_Status02
%InsertMacroAtXPosition(<Address>)

CODE_289AB6:
	LDA.b #$9E
	STA.w !RAM_SMB3_Level_ScreenFlashTimer
CODE_289ABB:
	INC.w $07BE
CODE_289ABE:
	RTS

CODE_289ABF:
	JSL.l CODE_278A17
	BNE.b CODE_289ABE
	LDA.b #$C0
	STA.w $0518,x
	BNE.b CODE_289ABB
CODE_289ACC:
	LDA.w $0518,x
	BNE.b CODE_289AE0
	LDA.b #!Define_SMB3_LevelMusic_ThroneRoom
	STA.w !RAM_SMB3_Global_MusicCh1
	JSR.w CODE_289B38
	LDA.b #$FF
	STA.w $0518,x
	BNE.b CODE_289ABB
CODE_289AE0:
	CMP.b #$80
	BCS.b CODE_289ABE
	ASL
	ASL
	ROL
	ROL
	AND.b #$03
	TAY
	LDA.w DATA_21BAE5,y
	LDY.b #$00
	AND.w $0518,x
	BEQ.b CODE_289AF7
	LDY.b #$EF
CODE_289AF7:
	STY.w $0216
	STY.w $0218
	RTS

CODE_289AFE:
	LDA.w $0518,x
	CMP.b #$9A
	BCS.b CODE_289B08
	JSR.w CODE_289EA7
CODE_289B08:
	LDA.w $0518,x
	BNE.b CODE_289B10
	JSR.w CODE_289ABB
CODE_289B10:
	JSR.w CODE_289B58
	JSL.l CODE_278A17
	RTS

CODE_289B18:
	JSR.w CODE_289EA7
	JSR.w CODE_289B10
	BNE.b CODE_289B37
	LDA.b !RAM_SMB3_Level_Player_YPosHi
	BMI.b CODE_289B37
	CMP.b #$02
	BCC.b CODE_289B37
	LDY.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.b #$01
	STA.w $073D,y
	LSR
	STA.w $0713
	INC.w $0014
CODE_289B37:
	RTS
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr017_SpinyCheepCheep_Status01(Address)
namespace SMB3_NorSpr017_SpinyCheepCheep_Status01
%InsertMacroAtXPosition(<Address>)

Main:
	INC.w $06B7,x
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.w DATA_21B88C,y
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	SEC
	SBC.b #$30
	STA.w $1CC8,x
	CLC
	ADC.b #$60
	STA.w $1CCD,x
	RTL
namespace off
endmacro

;--------------------------------------------------------------------

macro ROUTINE_SMB3_NorSpr017_SpinyCheepCheep_Status02(Address)
namespace SMB3_NorSpr017_SpinyCheepCheep_Status02
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.b $9C
	BNE.b CODE_2886CF
	INC.b $68,x
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$07
	BNE.b CODE_28868F
	LDA.b $4D,x
	AND.b #$01
	TAY
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	CLC
	ADC.w DATA_21B88E,y
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	CMP.w DATA_21B890,y
	BNE.b CODE_28868F
	INC.b $4D,x
CODE_28868F:
	JSL.l CODE_27A7F0
	JSL.l CODE_27A7E5
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	CMP.w $1CC8,x
	BEQ.b CODE_2886AD
	CMP.w $1CCD,x
	BEQ.b CODE_2886AD
	JSL.l CODE_278B9B
	LDA.b $A7,x
	AND.b #$03
	BEQ.b CODE_2886B9
CODE_2886AD:
	JSL.l CODE_279906
	JSL.l CODE_27A7F0
	JSL.l CODE_27A7F0
CODE_2886B9:
	JSL.l CODE_279B70
	JSL.l CODE_279BCC
	TXA
	ASL
	ASL
	ADC.w $0565
	LSR
	LSR
	LSR
	AND.b #$01
	STA.w $0669,x
CODE_2886CF:
	JSL.l CODE_279EBC
CODE_2886D3:
	RTL

ADDR_2886D4:							; Optimization: Unused RTS
	RTS
namespace off
	%SetDuplicateOrNullPointer(SMB3_NorSpr017_SpinyCheepCheep_Status02_CODE_2886D3, SMB3_NorSpr000_UnusedSprite_Status01_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSpr017_SpinyCheepCheep_Status02_CODE_2886D3, SMB3_NorSpr000_UnusedSprite_Status02_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSpr017_SpinyCheepCheep_Status02_CODE_2886D3, SMB3_NorSpr000_UnusedSprite_SteppedOnRt_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSpr017_SpinyCheepCheep_Status02_CODE_2886D3, SMB3_NorSpr002_UnusedSprite_SteppedOnRt_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSpr017_SpinyCheepCheep_Status02_CODE_2886D3, SMB3_NorSpr003_UnusedSprite_Status01_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSpr017_SpinyCheepCheep_Status02_CODE_2886D3, SMB3_NorSpr003_UnusedSprite_Status02_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSpr017_SpinyCheepCheep_Status02_CODE_2886D3, SMB3_NorSpr003_UnusedSprite_SteppedOnRt_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSpr017_SpinyCheepCheep_Status02_CODE_2886D3, SMB3_NorSpr006_VerticalBounceSprite_SteppedOnRt_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSpr017_SpinyCheepCheep_Status02_CODE_2886D3, SMB3_NorSpr007_SecretToadHouseWarp_SteppedOnRt_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSpr017_SpinyCheepCheep_Status02_CODE_2886D3, SMB3_NorSpr008_InvisiblePSwitchDoor_SteppedOnRt_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSpr017_SpinyCheepCheep_Status02_CODE_2886D3, SMB3_NorSpr009_AirshipAnchor_SteppedOnRt_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSpr017_SpinyCheepCheep_Status02_CODE_2886D3, SMB3_NorSpr00F_UnusedSprite_Status01_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSpr017_SpinyCheepCheep_Status02_CODE_2886D3, SMB3_NorSpr00F_UnusedSprite_Status02_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSpr017_SpinyCheepCheep_Status02_CODE_2886D3, SMB3_NorSpr00F_UnusedSprite_SteppedOnRt_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSpr017_SpinyCheepCheep_Status02_CODE_2886D3, SMB3_NorSpr010_UnusedSprite_Status01_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSpr017_SpinyCheepCheep_Status02_CODE_2886D3, SMB3_NorSpr010_UnusedSprite_Status02_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSpr017_SpinyCheepCheep_Status02_CODE_2886D3, SMB3_NorSpr010_UnusedSprite_SteppedOnRt_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSpr017_SpinyCheepCheep_Status02_CODE_2886D3, SMB3_NorSpr011_UnusedSprite_Status01_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSpr017_SpinyCheepCheep_Status02_CODE_2886D3, SMB3_NorSpr011_UnusedSprite_Status02_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSpr017_SpinyCheepCheep_Status02_CODE_2886D3, SMB3_NorSpr011_UnusedSprite_SteppedOnRt_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSpr017_SpinyCheepCheep_Status02_CODE_2886D3, SMB3_NorSpr012_UnusedSprite_Status01_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSpr017_SpinyCheepCheep_Status02_CODE_2886D3, SMB3_NorSpr012_UnusedSprite_Status02_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSpr017_SpinyCheepCheep_Status02_CODE_2886D3, SMB3_NorSpr012_UnusedSprite_SteppedOnRt_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSpr017_SpinyCheepCheep_Status02_CODE_2886D3, SMB3_NorSpr013_UnusedSprite_Status01_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSpr017_SpinyCheepCheep_Status02_CODE_2886D3, SMB3_NorSpr013_UnusedSprite_Status02_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSpr017_SpinyCheepCheep_Status02_CODE_2886D3, SMB3_NorSpr013_UnusedSprite_SteppedOnRt_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSpr017_SpinyCheepCheep_Status02_CODE_2886D3, SMB3_NorSpr014_UnusedSprite_Status01_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSpr017_SpinyCheepCheep_Status02_CODE_2886D3, SMB3_NorSpr014_UnusedSprite_Status02_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSpr017_SpinyCheepCheep_Status02_CODE_2886D3, SMB3_NorSpr014_UnusedSprite_SteppedOnRt_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSpr017_SpinyCheepCheep_Status02_CODE_2886D3, SMB3_NorSpr015_UnusedSprite_Status01_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSpr017_SpinyCheepCheep_Status02_CODE_2886D3, SMB3_NorSpr015_UnusedSprite_Status02_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSpr017_SpinyCheepCheep_Status02_CODE_2886D3, SMB3_NorSpr015_UnusedSprite_SteppedOnRt_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSpr017_SpinyCheepCheep_Status02_CODE_2886D3, SMB3_NorSpr016_UnusedSprite_Status01_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSpr017_SpinyCheepCheep_Status02_CODE_2886D3, SMB3_NorSpr016_UnusedSprite_Status02_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSpr017_SpinyCheepCheep_Status02_CODE_2886D3, SMB3_NorSpr016_UnusedSprite_SteppedOnRt_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSpr017_SpinyCheepCheep_Status02_CODE_2886D3, SMB3_NorSpr017_SpinyCheepCheep_SteppedOnRt_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSpr017_SpinyCheepCheep_Status02_CODE_2886D3, SMB3_NorSpr01A_UnknownSprite_Status01_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSpr017_SpinyCheepCheep_Status02_CODE_2886D3, SMB3_NorSpr01C_UnusedStrangeRewardBlock_SteppedOnRt_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSpr017_SpinyCheepCheep_Status02_CODE_2886D3, SMB3_NorSpr01D_UnusedSprite_Status01_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSpr017_SpinyCheepCheep_Status02_CODE_2886D3, SMB3_NorSpr01D_UnusedSprite_Status02_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSpr017_SpinyCheepCheep_Status02_CODE_2886D3, SMB3_NorSpr01D_UnusedSprite_SteppedOnRt_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSpr017_SpinyCheepCheep_Status02_CODE_2886D3, SMB3_NorSpr01F_VineHead_SteppedOnRt_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSpr017_SpinyCheepCheep_Status02_CODE_2886D3, SMB3_NorSpr020_UnusedSprite_Status01_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSpr017_SpinyCheepCheep_Status02_CODE_2886D3, SMB3_NorSpr020_UnusedSprite_Status02_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSpr017_SpinyCheepCheep_Status02_CODE_2886D3, SMB3_NorSpr020_UnusedSprite_SteppedOnRt_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSpr017_SpinyCheepCheep_Status02_CODE_2886D3, SMB3_NorSpr021_UnusedMushroomCardItem_Status01_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSpr017_SpinyCheepCheep_Status02_CODE_2886D3, SMB3_NorSpr022_UnusedFlowerCardItem_Status01_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSpr017_SpinyCheepCheep_Status02_CODE_2886D3, SMB3_NorSpr023_UnusedStarCardItem_Status01_Main)
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr01A_UnknownSprite_Status02(Address)
namespace SMB3_NorSpr01A_UnknownSprite_Status02
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.b $A7,x
	AND.b #$04
	BEQ.b CODE_28908C
	JSL.l CODE_278B67
CODE_28908C:
	JSL.l CODE_27A317
	JSL.l CODE_279EBC
	JSL.l CODE_279BC4
	RTL
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr01C_UnusedStrangeRewardBlock_Status01(Address)
namespace SMB3_NorSpr01C_UnusedStrangeRewardBlock_Status01
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.b #$40
	LDY.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	CPY.b !RAM_SMB3_Level_Player_XPosLo
	BPL.b CODE_2891AD
	JSL.l SMB3_UnnecessaryInvertARt_Main
CODE_2891AD:
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	LDA.b #$80
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	LDA.b #$05
	STA.w $0518,x
	LDY.b #$05
	LDA.b #$01
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,y
	LDA.b #!Define_SMB3_SpriteID_NorSpr00D_Mushroom
	STA.w !RAM_SMB3_Level_NorSpr_SpriteID,y
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	STA.w !RAM_SMB3_Level_NorSpr_XPosLo,y
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	STA.w !RAM_SMB3_Level_NorSpr_XPosHi,y
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	STA.w !RAM_SMB3_Level_NorSpr_YPosHi,y
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	SEC
	SBC.b #$08
	STA.w !RAM_SMB3_Level_NorSpr_YPosLo,y
	BCS.b CODE_2891DF
	DEC.b !RAM_SMB3_Level_NorSpr_YPosHi,x
CODE_2891DF:
	RTL
namespace off
endmacro

;--------------------------------------------------------------------

macro ROUTINE_SMB3_NorSpr01C_UnusedStrangeRewardBlock_Status02(Address)
namespace SMB3_NorSpr01C_UnusedStrangeRewardBlock_Status02
%InsertMacroAtXPosition(<Address>)

Main:
	JSL.l CODE_279EBC
	JSL.l CODE_279BC4
	LDA.w $0518,x
	BNE.b CODE_2891F0
	JMP.w CODE_288FAF					; Crash: This should be a JSR and an RTL added after. Otherwise, this will crash the game!

CODE_2891F0:
	JSL.l CODE_27A7D9
	JSL.l CODE_27A7F0
	RTL
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr01F_VineHead_Status01(Address)
namespace SMB3_NorSpr01F_VineHead_Status01
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.b #$20
	STA.w $0679,x
	RTL
namespace off
endmacro

;--------------------------------------------------------------------

macro ROUTINE_SMB3_NorSpr01F_VineHead_Status02(Address)
namespace SMB3_NorSpr01F_VineHead_Status02
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.b #$F0
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	JSL.l CODE_27A7D9
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	BMI.b CODE_2892E9
	JSL.l CODE_278B93
	LDA.w $064B
	PHA
	ASL
	ROL
	ROL
	AND.b #$03
	TAY
	PLA
	CMP.w !RAM_SMB3_Global_Map16FloorTileAttributeTable,y
	BCC.b CODE_2892EF
CODE_2892E9:
	LDA.b #$00
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	RTL

CODE_2892EF:
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	AND.b #$0F
	BNE.b CODE_2892FB
	STA.w $0679,x
	JSR.w CODE_289312
CODE_2892FB:
	LDA.w $0518,x
	BNE.b CODE_28930D
	LDA.b #$0C
	STA.w $0518,x
	LDA.w $0669,x
	EOR.b #$01
	STA.w $0669,x
CODE_28930D:
	JSL.l CODE_279EDE
	RTL

CODE_289312:
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	ASL
	TAY
	LDA.w DATA_218200,y
	STA.b $D8
	LDA.w DATA_218200+$01,y
	STA.b $D9
	LDA.b #$7E2000>>16
	STA.b $DA
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	BEQ.b CODE_28932A
	INC.b $D9
CODE_28932A:
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	AND.b #$F0
	STA.b $02
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	LSR
	LSR
	LSR
	LSR
	ORA.b $02
	TAY
	LDA.b #$85
	STA.b [$D8],y
	LDA.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,x
	CMP.b #$03
	BCC.b CODE_289347
	BRL.w CODE_2893C8

CODE_289347:
	LDY.b #$00
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	AND.b #$01
	BEQ.b CODE_289351
	LDY.b #$04
CODE_289351:
	STY.b $DB
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	LDY.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	BNE.b CODE_28935D
	CMP.b #$F0
	BCC.b CODE_28935D
CODE_28935D:
	ASL
	ADC.b #$00
	ASL
	ADC.b #$00
	PHA
	AND.b #$03
	ORA.w DATA_21B903,y
	CLC
	ADC.b $DB
	LDY.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,y
	STA.w SMB3_StripeImageUploadTable[$04].LowByte,y
	PLA
	AND.b #$C0
	STA.b $00
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	LSR
	LSR
	LSR
	ORA.b $00
	STA.w SMB3_StripeImageUploadTable[$00].HighByte,y
	CLC
	ADC.b #$01
	STA.w SMB3_StripeImageUploadTable[$04].HighByte,y
	LDA.b #$80
	STA.w SMB3_StripeImageUploadTable[$01].LowByte,y
	STA.w SMB3_StripeImageUploadTable[$05].LowByte,y
	LDA.b #$03
	STA.w SMB3_StripeImageUploadTable[$01].HighByte,y
	STA.w SMB3_StripeImageUploadTable[$05].HighByte,y
	LDA.b #$C4
	STA.w SMB3_StripeImageUploadTable[$02].LowByte,y
	LDA.b #$C4
	STA.w SMB3_StripeImageUploadTable[$03].LowByte,y
	LDA.b #$C6
	STA.w SMB3_StripeImageUploadTable[$06].LowByte,y
	LDA.b #$C6
	STA.w SMB3_StripeImageUploadTable[$07].LowByte,y
	LDA.b #$1C
	STA.w SMB3_StripeImageUploadTable[$02].HighByte,y
	STA.w SMB3_StripeImageUploadTable[$03].HighByte,y
	STA.w SMB3_StripeImageUploadTable[$06].HighByte,y
	STA.w SMB3_StripeImageUploadTable[$07].HighByte,y
	LDA.b #$FF
	STA.w SMB3_StripeImageUploadTable[$08].LowByte,y
	TYA
	CLC
	ADC.b #$10
	STA.w !RAM_SMB3_Global_StripeImageUploadIndexLo
CODE_2893C8:
	RTS
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr025_OverworldPipeLevelController_Status02(Address)
namespace SMB3_NorSpr025_OverworldPipeLevelController_Status02
%InsertMacroAtXPosition(<Address>)

Main:
	JSR.w CODE_28B4BB
	LDA.b #$00
	ROR
	STA.b $00
	LDY.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	LDA.w DATA_21BC38,y
	BIT.b $00
	BMI.b CODE_28B489
	LSR
	LSR
	LSR
	LSR
CODE_28B489:
	AND.b #$0F
	STA.l $7E3977,x
	LDA.w DATA_21BC50,y
	JSR.w CODE_28B4C7
	STA.l $7E3979,x
	LDA.w DATA_21BC68,y
	JSR.w CODE_28B4C7
	STA.l $7E3975,x
	LDA.w DATA_21BC80,y
	JSR.w CODE_28B4C7
	TAY
	AND.b #$80
	STA.w $0722,x
	TYA
	ASL
	ASL
	ROL
	ROL
	ROL
	STA.w $0724,x
	LDX.b $9B
	RTL

CODE_28B4BB:
	LDY.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	BNE.b CODE_28B4C3
	LDA.b !RAM_SMB3_Level_Player_OnScreenXPos
	ASL
	RTS

CODE_28B4C3:
	LDA.b !RAM_SMB3_Level_Player_YPosHi
	LSR
	RTS

CODE_28B4C7:
	BIT.b $00
	BPL.b CODE_28B4CF
	ASL
	ASL
	ASL
	ASL
CODE_28B4CF:
	AND.b #$F0
	RTS
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr029_Spike_Status02(Address)
namespace SMB3_NorSpr029_Spike_Status02
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.b $9C
	BEQ.b CODE_28BADC
	BRL.w CODE_28BB64

CODE_28BADC:
	LDA.w !RAM_SMB3_NorSpr029_Spike_ThrowAnimationTimer,x
	LSR
	STA.b !RAM_SMB3_NorSpr029_Spike_HeldSpikeBallPositionIndex,x
	ROL
	BEQ.b CODE_28BB00
	LSR
	BNE.b CODE_28BAF2
	JSR.w CODE_28BC0C
	LDA.b !RAM_SMB3_NorSpr029_Spike_ThrowDecisionCounter,x
	BEQ.b CODE_28BAF2
	INC.w !RAM_SMB3_NorSpr029_Spike_ThrowAnimationTimer,x
CODE_28BAF2:
	LDA.w !RAM_SMB3_NorSpr029_Spike_ThrowAnimationTimer,x
	LSR
	LSR
	TAY
	LDA.w DATA_21BD2B,y
	STA.w !RAM_SMB3_NorSpr029_Spike_AnimationFrame,x
	BPL.b CODE_28BB59
CODE_28BB00:
	JSR.w CODE_28BC43
	LDA.b $A7,x
	AND.b #$04
	BEQ.b CODE_28BB44
	LDA.b !RAM_SMB3_Global_FrameCounter
	LSR
	LSR
	LSR
	AND.b #$01
	STA.w !RAM_SMB3_NorSpr029_Spike_AnimationFrame,x
	LDA.b !RAM_SMB3_Global_FrameCounter
	ADC.w DATA_21BCAA,x
	BMI.b CODE_28BB59
	JSL.l CODE_27A7AE
	EOR.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	ASL
	BPL.b CODE_28BB31
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$07
	BNE.b CODE_28BB44
	JSL.l CODE_27990E
	JMP.w CODE_28BB44

CODE_28BB31:
	LDA.b $0E
	CLC
	ADC.b #$20
	CMP.b #$40
	BCS.b CODE_28BB44
	JSL.l CODE_27A7C5
	LDA.b $0E
	CMP.b #$08
	BCC.b CODE_28BB48
CODE_28BB44:
	LDA.b #$00
	BEQ.b CODE_28BB4C						; Note: This will always branch

CODE_28BB48:
	LDA.b !RAM_SMB3_NorSpr029_Spike_ThrowDecisionCounter,x
	ADC.b #$10
CODE_28BB4C:
	STA.b !RAM_SMB3_NorSpr029_Spike_ThrowDecisionCounter,x
	BPL.b CODE_28BB59
	LDA.b #$3A
	STA.w !RAM_SMB3_NorSpr029_Spike_ThrowAnimationTimer,x
	LDA.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_28BB59:
	JSR.w CODE_28B905
	JSL.l CODE_279B6C
	JSL.l CODE_279BC4
CODE_28BB64:
	JSL.l SMB3_CheckIfSpriteIsHorizontallyOffScreen_Main
	JSL.l CODE_279DF9
	LDA.b $02
	BPL.b CODE_28BB7F
	LDX.b $9B
	LDA.b !RAM_SMB3_NorSpr029_Spike_HeldSpikeBallPositionIndex,x
	TAX
	LDA.b $00
	CLC
	ADC.w DATA_21BD58,x
	STA.b $00
	LDX.b $05
CODE_28BB7F:
	JSL.l CODE_279F91
	LDX.b $9B
	LDY.b !RAM_SMB3_NorSpr029_Spike_HeldSpikeBallPositionIndex,x
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenYPos,x
	BIT.b $02
	BMI.b CODE_28BB91
	CLC
	ADC.w DATA_21BD58,y
CODE_28BB91:
	STA.b $00
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	STA.b $D9
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	STA.b $D8
	LDA.w DATA_21BD3A,y
	BIT.b $02
	BVC.b CODE_28BBA6
	JSL.l SMB3_UnnecessaryInvertARt_Main
CODE_28BBA6:
	STZ.b $07
	REP.b #$20
	AND.w #$00FF
	CMP.w #$0080
	BCC.b CODE_28BBB5
	ORA.w #$FF00
CODE_28BBB5:
	CLC
	ADC.b $D8
	SEC
	SBC.w $0210
	STA.b $D8
	CLC
	ADC.w #$0008
	STA.b $DA
	SEP.b #$20
	LDA.b $D8
	STA.b $01
	LDA.b $D9
	AND.b #$01
	ASL
	STA.b $D9
	LDA.b $DB
	AND.b #$01
	ORA.b $D9
	ROR
	ROR
	ROR
	TSB.b $07
	REP.b #$20
	LDA.b $C6,x
	CLC
	ADC.w #$0010
	STA.b $C6,x
	SEP.b #$20
	LDX.b #$6E
	JSL.l CODE_279F91
	LDX.b $9B
	REP.b #$10
	LDY.b $C6,x
	LDA.w SMB3_OAMBuffer[$00].Prop,y
	AND.b #$80
	ORA.b #$2A
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$02].Prop,y
	ORA.b #$40
	STA.w SMB3_OAMBuffer[$01].Prop,y
	STA.w SMB3_OAMBuffer[$03].Prop,y
	SEP.b #$10
	RTL

CODE_28BC0C:
	JSL.l SMB3_FindFreeExtendedSpriteSlot_FixedPriority
	BNE.b CODE_28BC42
	STA.b !RAM_SMB3_NorSpr029_Spike_ThrowDecisionCounter,x
	LDA.b #!Define_SMB3_SpriteID_ExtSpr07_SpikeBall
	STA.w !RAM_SMB3_Level_ExtSpr_SpriteID,y
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	STA.w !RAM_SMB3_Level_ExtSpr_XPosLo,y
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	STA.w !RAM_SMB3_Level_ExtSpr_XPosHi,y
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	SEC
	SBC.b #$0E
	STA.w !RAM_SMB3_Level_ExtSpr_YPosLo,y
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	SBC.b #$00
	STA.w !RAM_SMB3_Level_ExtSpr_YPosHi,y
	JSR.w CODE_28BC43
	ASL
	ASL
	STA.w !RAM_SMB3_Level_ExtSpr_XSpeed,y
	LDA.b #$00
	STA.w !RAM_SMB3_Level_ExtSpr_YSpeed,y
	STA.w $06C7,y
CODE_28BC42:
	RTS

CODE_28BC43:
	LDA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	ASL
	ASL
	LDA.b #$08
	BCS.b CODE_28BC4E
	LDA.b #$F8
CODE_28BC4E:
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	RTS
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr02B_KuribosShoe_Status02(Address)
namespace SMB3_NorSpr02B_KuribosShoe_Status02
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.b $9C
	BEQ.b CODE_28BEDD
	JSL.l CODE_28BFD9
	RTL

CODE_28BEDD:
	JSR.w CODE_28B905
	LDA.b !RAM_SMB3_Global_FrameCounter
	LSR
	LSR
	LSR
	AND.b #$01
	STA.w !RAM_SMB3_NorSpr02B_KuribosShoe_AnimationFrame,x
	JSL.l CODE_279BC4
	JSL.l SMB3_CheckIfSpriteIsHorizontallyOffScreen_Main
	JSL.l CODE_28BFD9
	LDA.w !RAM_SMB3_Level_Player_StarPowerTimer
	STA.w $0689,x
	STZ.w !RAM_SMB3_Level_Player_StarPowerTimer
	JSL.l CODE_27A317
	LDA.w $0689,x
	STA.w !RAM_SMB3_Level_Player_StarPowerTimer
	LDA.w $1F76
	CMP.b #$F3
	BNE.b CODE_28BF1C
	LDA.b $4D,x
	BNE.b CODE_28BF18
	LDA.b #$0E
	STA.b !RAM_SMB3_NorSpr02B_KuribosShoe_WaitBeforeNextJump,x
CODE_28BF18:
	LDA.b #$C8
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_28BF1C:
	LDA.b $4D,x
	BEQ.b CODE_28BF28
	LDA.b $A7,x
	AND.b #$04
	BEQ.b CODE_28BF67
	BRA.b CODE_28BF63

CODE_28BF28:
	LDY.b !RAM_SMB3_NorSpr02B_KuribosShoe_WaitBeforeNextJump,x
	BEQ.b CODE_28BF59
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$03
	BNE.b CODE_28BF67
	DEY
	BNE.b CODE_28BF4B
	JSL.l CODE_27A7AE
	STA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	LDY.b #$10
	ASL
	BMI.b CODE_28BF43
	LDY.b #$F0
CODE_28BF43:
	STY.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	LDA.b #$B0
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	BNE.b CODE_28BF54
CODE_28BF4B:
	CPY.b #$0B
	BNE.b CODE_28BF56
	JSR.w CODE_28BF68
	INC.b $4D,x
CODE_28BF54:
	LDY.b #$00
CODE_28BF56:
	STY.b !RAM_SMB3_NorSpr02B_KuribosShoe_WaitBeforeNextJump,x
	RTL

CODE_28BF59:
	LDA.b $A7,x
	AND.b #$04
	BEQ.b CODE_28BF67
	LDA.b #$0B
	STA.b !RAM_SMB3_NorSpr02B_KuribosShoe_WaitBeforeNextJump,x
CODE_28BF63:
	LDA.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_28BF67:
	RTL

CODE_28BF68:
	LDX.b #$04
CODE_28BF6A:
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	BEQ.b CODE_28BF74
	DEX
	BPL.b CODE_28BF6A
	BMI.b CODE_28BFAF						; Note: This will always branch.

CODE_28BF74:
	JSL.l CODE_279C97
	LDA.b #$06
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	LDA.b #!Define_SMB3_SpriteID_NorSpr072_Goomba
	STA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	LDA.b #$01
	STA.w $1FE9,x
	LDY.b $9B
	LDA.w !RAM_SMB3_Level_NorSpr_XPosLo,y
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	LDA.w !RAM_SMB3_Level_NorSpr_XPosHi,y
	STA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	LDA.w !RAM_SMB3_Level_NorSpr_YPosLo,y
	SEC
	SBC.b #$10
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	LDA.w !RAM_SMB3_Level_NorSpr_YPosHi,y
	SBC.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	LDA.w !RAM_SMB3_Level_NorSpr_XSpeed,y
	LSR
	AND.b #$40
	STA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	LDA.b #$D0
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_28BFAF:
	LDX.b $9B
	RTS
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr02D_BossBass_Status02(Address)
namespace SMB3_NorSpr02D_BossBass_Status02
%InsertMacroAtXPosition(<Address>)

Main:
	JSL.l CODE_279DDA
	JSR.w CODE_28C762
	LDA.b $9C
	BNE.b CODE_28C634
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	CMP.b #$06
	BNE.b CODE_28C635
CODE_28C603:
	LDA.w !RAM_SMB3_NorSpr02D_BossBass_WaitBeforeRespawningEnemy,x
	BEQ.b CODE_28C617
	LSR
	BNE.b CODE_28C634
	JSL.l CODE_279C97
	LDA.b #$02
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	JMP.w CODE_28C5C4

CODE_28C617:
	ASL.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	SEC
	ROR.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	LDA.w !RAM_SMB3_NorSpr02D_BossBass_PlayerHasBeenEatenFlag,x
	BEQ.b CODE_28C626
	JMP.w CODE_28C727

CODE_28C626:
	JSL.l SMB3_HandleNormalSpriteGravity_Main
	LDA.w !RAM_SMB3_Level_NorSpr_YOffscreenFlag,x
	BEQ.b CODE_28C634
	LDA.b #$FF
	STA.w !RAM_SMB3_NorSpr02D_BossBass_WaitBeforeRespawningEnemy,x
CODE_28C634:
	RTL

CODE_28C635:
	LDY.w !RAM_SMB3_NorSpr02D_BossBass_PlayerHasBeenEatenFlag,x
	BEQ.b CODE_28C63E
	INY
	STY.w !RAM_SMB3_Level_Player_FreezePlayerTimer
CODE_28C63E:
	JSL.l CODE_27A7F0
	JSL.l CODE_27A7D9
	JSL.l CODE_27A317
	LDA.w !RAM_SMB3_NorSpr02D_BossBass_AnimationFrame,x
	BPL.b CODE_28C6A3
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenYPos,x
	CMP.b #$9A
	BCS.b CODE_28C659
	LDA.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_28C659:
	LDY.b !RAM_SMB3_NorSpr02D_BossBass_HorizontalMovementDirection,x
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	CLC
	ADC.w DATA_21BF3F,y
	BMI.b CODE_28C66B
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	CLC
	ADC.w DATA_21BF41,y
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_28C66B:
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	LSR
	AND.b #$40
	EOR.b #$40
	STA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	JSL.l CODE_27A7AE
	LDA.b $0E
	CLC
	ADC.w DATA_21BF43,y
	BPL.b CODE_28C686
	TYA
	EOR.b #$01
	STA.b !RAM_SMB3_NorSpr02D_BossBass_HorizontalMovementDirection,x
CODE_28C686:
	LDA.b $0E
	CMP.w DATA_21BF3D,y
	BNE.b CODE_28C634
	JSL.l CODE_27A7C5
	LDA.b $0E
	CMP.b #$10
	BCS.b CODE_28C634
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	ASL
	ROR.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	LDA.b #$D8
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	INC.w !RAM_SMB3_NorSpr02D_BossBass_AnimationFrame,x
CODE_28C6A3:
	INC.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	INC.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenYPos,x
	LDY.w !RAM_SMB3_NorSpr02D_BossBass_AnimationFrame,x
	CPY.b #$05
	BCS.b CODE_28C71E
	CPY.b #$04
	BCC.b CODE_28C6BD
	CMP.b #$94
	BCS.b CODE_28C6B9
	RTL

CODE_28C6B9:
	LDA.b #$05
	BRA.b CODE_28C739

CODE_28C6BD:
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$07
	BNE.b CODE_28C6C9
	TYA
	EOR.b #$01
	STA.w !RAM_SMB3_NorSpr02D_BossBass_AnimationFrame,x
CODE_28C6C9:
	CPY.b #$02
	BCS.b CODE_28C702
	JSL.l CODE_27A7AE
	LDY.b !RAM_SMB3_NorSpr02D_BossBass_HorizontalMovementDirection,x
	LDA.b $0E
	CLC
	ADC.w DATA_21BF45,y
	CMP.b #$02
	BCS.b CODE_28C702
	JSL.l CODE_27A7C5
	LDA.b $0E
	CLC
	ADC.b #$08
	CMP.b #$0A
	BCS.b CODE_28C702
	LDA.w !RAM_SMB3_Level_Player_StarPowerTimer
	ORA.b !RAM_SMB3_Level_Player_DeathState
	ORA.w !RAM_SMB3_Level_Player_BehindLayer1Flag
	BNE.b CODE_28C702
	INC.w !RAM_SMB3_NorSpr02D_BossBass_PlayerHasBeenEatenFlag,x
	LDA.b #$08
	STA.b !RAM_SMB3_Level_Player_YPosHi
	STA.w $0583
	LDA.b #$02
	BNE.b CODE_28C739						; Note: This will always branch.

CODE_28C702:
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	BMI.b CODE_28C73C
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenYPos,x
	CMP.b #$A0
	BCC.b CODE_28C73C
	JSR.w CODE_28C73D
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	SEC
	SBC.b #$18
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	BCS.b CODE_28C71A
	DEC.b !RAM_SMB3_Level_NorSpr_YPosHi,x
CODE_28C71A:
	LDA.b #$04
	BNE.b CODE_28C739						; Note: This will always branch.

CODE_28C71E:
	CMP.b #$A0
	BCC.b CODE_28C73C
	LDA.w !RAM_SMB3_NorSpr02D_BossBass_PlayerHasBeenEatenFlag,x
	BEQ.b CODE_28C733
CODE_28C727:
	LDA.b #$00
	STA.w !RAM_SMB3_Level_Player_FreezePlayerTimer
	STA.w !RAM_SMB3_Level_Player_IsAboveTopOfLevelFlag
	LDA.b #$C4
	STA.b $82
CODE_28C733:
	LDA.b #$F8
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	LDA.b #$FF
CODE_28C739:
	STA.w !RAM_SMB3_NorSpr02D_BossBass_AnimationFrame,x
CODE_28C73C:
	RTL

CODE_28C73D:
	LDY.b #$02
	LDA.w !RAM_SMB3_Level_SplashSpr_DespawnTimer,y
	BEQ.b CODE_28C745
	DEY
CODE_28C745:
	LDA.b #$01
	STA.w !RAM_SMB3_Level_SplashSpr_DespawnTimer,y
	STA.w !RAM_SMB3_Level_SplashSpr_Table7E1F99,y
	LDA.b #$93
	STA.w !RAM_SMB3_Level_SplashSpr_YPosLo,y
	LDA.b #$00
	STA.w !RAM_SMB3_Level_SplashSpr_YPosHi,y
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	STA.w !RAM_SMB3_Level_SplashSpr_XPosLo,y
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	STA.w !RAM_SMB3_Level_SplashSpr_XPosHi,y
	RTS

CODE_28C762:
	LDA.w !RAM_SMB3_NorSpr02D_BossBass_PlayerHasBeenEatenFlag,x
	BNE.b CODE_28C773
	LDY.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	CPY.b #$06
	BNE.b CODE_28C773
	LDA.b #$01
	STA.w !RAM_SMB3_NorSpr02D_BossBass_AnimationFrame,x
CODE_28C773:
	INC.w !RAM_SMB3_NorSpr02D_BossBass_AnimationFrame,x
	JSL.l CODE_279DF9
	LDX.b $9B
	LDA.w !RAM_SMB3_NorSpr02D_BossBass_AnimationFrame,x
	CMP.b #$05
	BCC.b CODE_28C788
	JSL.l CODE_29A300
	RTS

CODE_28C788:
	DEC.w !RAM_SMB3_NorSpr02D_BossBass_AnimationFrame,x
	ASL
	ASL
	CLC
	ADC.b $05
	STA.b $05
	TAX
	LDA.b $02
	BPL.b CODE_28C79A
	INX
	INX
	INX
CODE_28C79A:
	JSL.l CODE_27A07A
	LDX.b $9B
	REP.b #$20
	LDA.b $C6,x
	CLC
	ADC.w #$0018
	STA.b $C6,x
	SEP.b #$20
	LSR.b $04
	LDX.b $05
	LDA.b $02
	BMI.b CODE_28C7B7
	INX
	INX
	INX
CODE_28C7B7:
	LDA.b #$10
	CLC
	ADC.b $00
	STA.b $00
	JSL.l CODE_27A07A
	LDX.b $9B
	LDA.w !RAM_SMB3_NorSpr02D_BossBass_AnimationFrame,x
	BPL.b CODE_28C7F9
	PHY
	REP.b #$10
	LDA.w !RAM_SMB3_NorSpr02D_BossBass_FinAnimationCounter,x
	BNE.b CODE_28C7D6
	LDA.b #$10
	STA.w !RAM_SMB3_NorSpr02D_BossBass_FinAnimationCounter,x
CODE_28C7D6:
	AND.b #$08
	BNE.b CODE_28C7F6
	LDY.w $00C6,x
	LDA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	BEQ.b CODE_28C7ED
	LDA.b #$A2
	STA.w SMB3_OAMBuffer[$00].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$03].Tile,y
	BRA.b CODE_28C7F6

CODE_28C7ED:
	LDA.b #$A2
	STA.w SMB3_OAMBuffer[$02].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$05].Tile,y
CODE_28C7F6:
	SEP.b #$10
	PLY
CODE_28C7F9:
	RTS
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr02E_ElevatorPlatform_Status01(Address)
namespace SMB3_NorSpr02E_ElevatorPlatform_Status01
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	CLC
	ADC.b #$0B
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	BCC.b CODE_28B7EA
	INC.b !RAM_SMB3_Level_NorSpr_YPosHi,x
CODE_28B7EA:
	RTL
namespace off
endmacro

;--------------------------------------------------------------------

macro ROUTINE_SMB3_NorSpr02E_ElevatorPlatform_Status02(Address)
namespace SMB3_NorSpr02E_ElevatorPlatform_Status02
%InsertMacroAtXPosition(<Address>)

Main:
	JSL.l CODE_279BC4
	JSL.l SMB3_GetNormalSpriteOnScreenPosition_Main
	LDA.b !RAM_SMB3_NorSpr02E_ElevatorPlatform_IsRisingFlag,x
	BNE.b CODE_28B7FD
	LDA.b $9C
	BNE.b SMB3_NorSpr02E_ElevatorPlatform_Status01_CODE_28B7EA
	BEQ.b CODE_28B821						; Note: This will always branch.

CODE_28B7FD:
	JSR.w CODE_28B830
	LDA.b $9C
	BNE.b SMB3_NorSpr02E_ElevatorPlatform_Status01_CODE_28B7EA
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	SEC
	SBC.b #$04
	CMP.b #$E0
	BCS.b CODE_28B80F
	LDA.b #$E0
CODE_28B80F:
	LDY.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	BNE.b CODE_28B81B
	LDY.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	CPY.b #$40
	BCS.b CODE_28B81B
	LDA.b #$00
CODE_28B81B:
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	JSL.l CODE_27A7D9
CODE_28B821:
	LDA.b #$00
	STA.w $074D
	JSR.w CODE_28C8C5
	BCC.b CODE_28B82F
	LDA.b #$01
	STA.b !RAM_SMB3_NorSpr02E_ElevatorPlatform_IsRisingFlag,x
CODE_28B82F:
	RTL

CODE_28B830:
	JSL.l CODE_279DF9
	LDA.b $02
	AND.b #$3F
	STA.b $02
	LDA.b !RAM_SMB3_Global_FrameCounter
	LSR
	PHP
	BCC.b CODE_28B850
	PHX
	LDX.b $9B
	REP.b #$20
	LDA.b $C6,x
	CLC
	ADC.w #$0010
	STA.b $C6,x
	SEP.b #$20
	PLX
CODE_28B850:
	JSL.l CODE_279F91
	PLP
	BCS.b CODE_28B869
	PHX
	LDX.b $9B
	REP.b #$20
	LDA.b $C6,x
	CLC
	ADC.w #$0010
	STA.b $C6,x
	SEP.b #$20
	PLX
	BRA.b CODE_28B879

CODE_28B869:
	PHX
	LDX.b $9B
	REP.b #$20
	LDA.b $C6,x
	SEC
	SBC.w #$0010
	STA.b $C6,x
	SEP.b #$20
	PLX
CODE_28B879:
	INX
	INX
	LDA.b #$10
	CLC
	ADC.b $01
	STA.b $01
	ASL.b $07
	ASL.b $07
	JSL.l CODE_279F91
	LDX.b $9B
	RTS
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr02F_Boo_Status02(Address)
namespace SMB3_NorSpr02F_Boo_Status02
%InsertMacroAtXPosition(<Address>)

Main:
	JSR.w CODE_28B6BC
	BCS.b CODE_28B6DE
	LDA.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	BEQ.b CODE_28B71E
CODE_28B6DE:
	LDA.b $9C
	BNE.b CODE_28B729
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	CMP.w DATA_21BCB1,y
	BEQ.b CODE_28B6F3
	CLC
	ADC.w DATA_21BCAF,y
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_28B6F3:
	LDA.w DATA_21BCB5+$01,y
	STA.w $0679,x
	JSL.l CODE_27A7C5
	LDY.b #$00
	LDA.b $0E
	SEC
	SBC.b #$04
	BMI.b CODE_28B707
	INY
CODE_28B707:
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	CMP.w DATA_21BCB1,y
	BEQ.b CODE_28B714
	CLC
	ADC.w DATA_21BCAF,y
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_28B714:
	JSL.l CODE_27A7F0
	JSL.l CODE_27A7D9
	LDA.b #$01
CODE_28B71E:
	STA.w $0669,x
	JSL.l CODE_27A317
	JSL.l CODE_279DDA
CODE_28B729:
	JSL.l CODE_279BC4
	JSL.l SMB3_CheckIfSpriteIsHorizontallyOffScreen_Main
	JSL.l CODE_279EBC
	JSL.l CODE_29A3C2
	RTL
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr0XX_HotFoot_Status02(Address)
namespace SMB3_NorSpr0XX_HotFoot_Status02
%InsertMacroAtXPosition(<Address>)

FollowingHotFootEntry:
	LDA.b $9C
	BNE.b CODE_28B621
	JSL.l CODE_27A7D9
	INC.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	INC.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	INC.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	JSL.l CODE_278B93
	LDA.b $A7,x
	AND.b #$03
	BNE.b CODE_28B5E1
	JSL.l CODE_27A7F0
CODE_28B5E1:
	JSR.w CODE_28B91F
	JSR.w CODE_28B6BC
	LDY.b #$04
	LDA.b $A7,x
	AND.b #$04
	BEQ.b CODE_28B60C
	LDA.b #$00
	BCC.b CODE_28B60A
	LDA.b $BD
	STA.w $0679,x
CODE_28B5F8:
	LDA.b !RAM_SMB3_Global_FrameCounter
	LSR
	LSR
	AND.b #$02
	TAY
	LDA.w $0679,x
	ASL
	ASL
	LDA.b #$08
	BCS.b CODE_28B60A
	LDA.b #$F8
CODE_28B60A:
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_28B60C:
	TYA
	STA.w $0669,x
	JSL.l CODE_279BC4
	JSL.l CODE_27A317
CODE_28B618:
	LSR.w $0669,x
	LDA.b !RAM_SMB3_Global_FrameCounter
	LSR
	ROL.w $0669,x
CODE_28B621:
	JSL.l SMB3_CheckIfSpriteIsHorizontallyOffScreen_Main
CODE_28B625:
	LDA.w !RAM_SMB3_Level_NorSpr_YOffscreenFlag,x
	BNE.b CODE_28B682
	JSL.l SMB3_GetNormalSpriteOnScreenPosition_Main
	LDY.w $0418
	LDA.w DATA_21B4C1,y
	CLC
	ADC.w $0669,x
	TAY
	REP.b #$10
	LDA.w DATA_21B5A2,y
	LDY.b $C6,x
	STA.w SMB3_OAMBuffer[$00].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$01].Tile,y
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenYPos,x
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$01].YDisp,y
	LDA.w $1FE9,x
	ASL
	ORA.w $0679,x
	ORA.b #$20
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$01].Prop,y
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenXPos,x
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	PHY
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,x
	ROL
	ROL
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	PLY
	SEP.b #$10
CODE_28B682:
	RTL

WanderingHotFootEntry:
	JSR.w CODE_28B257
	BCS.b CODE_28B618
	JSR.w CODE_28B905
	LDY.b #$04
	LDA.b $A7,x
	AND.b #$04
	BNE.b CODE_28B696
	BRL.w CODE_28B60C

CODE_28B696:
	INC.b $68,x
	LDA.b $68,x
	AND.b #$A0
	BNE.b CODE_28B6A1
	BRL.w CODE_28B60A

CODE_28B6A1:
	ASL
	LDA.b $68,x
	TAY
	AND.b #$5F
	BNE.b CODE_28B6B8
	BCC.b CODE_28B6B4
	JSL.l CODE_27A7AE
	EOR.b #$40
	STA.w $0679,x
CODE_28B6B4:
	JSL.l CODE_27990E
CODE_28B6B8:
	JSR.w CODE_28B5F8				; Crash: This needs to be a JSL/JMP/JML/BRL! This is why normal sprite 045 crashes when it's loaded.
	RTL

namespace off
	%SetDuplicateOrNullPointer(SMB3_NorSpr0XX_HotFoot_Status02_FollowingHotFootEntry, SMB3_NorSpr030_FollowingHotFoot_Status02_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSpr0XX_HotFoot_Status02_WanderingHotFootEntry, SMB3_NorSpr045_WanderingHotFoot_Status02_Main)
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr0XX_Stretch_Status01(Address)
namespace SMB3_NorSpr0XX_Stretch_Status01
%InsertMacroAtXPosition(<Address>)

RightsideUpBooEntry:
;$28B747
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	CLC
	ADC.b #$04
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	BCC.b CODE_28B752
	INC.b !RAM_SMB3_Level_NorSpr_YPosHi,x
CODE_28B752:
	LDY.b $25
	LDA.w DATA_21BCB5,y
	STA.w $0679,x
	LDA.w DATA_21BCB3,y
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	RTL

UpsideDownBooEntry:
;$28B760
	JSL.l CODE_28B752
	LDA.b #$80
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	ORA.w $0679,x
	STA.w $0679,x
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	SEC
	SBC.b #$06
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	BCS.b CODE_28B779
	DEC.b !RAM_SMB3_Level_NorSpr_YPosHi,x
CODE_28B779:
	RTL

namespace off
	%SetDuplicateOrNullPointer(SMB3_NorSpr0XX_Stretch_Status01_RightsideUpBooEntry, SMB3_NorSpr031_RightsideUpStretch_Status01_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSpr0XX_Stretch_Status01_UpsideDownBooEntry, SMB3_NorSpr032_UpsideDownStretch_Status01_Main)
endmacro

;--------------------------------------------------------------------

macro ROUTINE_SMB3_NorSpr0XX_Stretch_Status02(Address)
namespace SMB3_NorSpr0XX_Stretch_Status02
%InsertMacroAtXPosition(<Address>)

Main:
;$28B77A
	LDA.b $9C
	BEQ.b CODE_28B783
	JSL.l CODE_28B73A
	RTL

CODE_28B783:
	LDY.b $68,x
	LDA.w $0518,x
	BNE.b CODE_28B797
	DEY
	BPL.b CODE_28B78F
	LDY.b #$03
CODE_28B78F:
	STY.b $68,x
	LDA.w DATA_21BCB8,y
	STA.w $0518,x
CODE_28B797:
	TYA
	LSR
	PHP
	BCS.b CODE_28B7C6
	JSL.l CODE_27A7F0
	LDY.w $0418
	LDA.w DATA_21BB30,y
	AND.b #$F0
	LSR
	TAY
	LDA.b $9E,x
	BPL.b CODE_28B7B0
	INY
	INY
CODE_28B7B0:
	JSL.l CODE_278E13
	CMP.b #$12
	BEQ.b CODE_28B7BC
	JSL.l CODE_279906
CODE_28B7BC:
	LDA.b #$02
	PLP
	BEQ.b CODE_28B7D3
	ASL
	STA.w $0669,x
	RTL

CODE_28B7C6:
	LDA.w $0518,x
	LSR
	LSR
	LSR
	AND.b #$03
	PLP
	BNE.b CODE_28B7D3
	EOR.b #$03
CODE_28B7D3:
	STA.w $0669,x
	JSL.l CODE_28B73A
	JSL.l CODE_27A317
	RTL

namespace off
	%SetDuplicateOrNullPointer(SMB3_NorSpr0XX_Stretch_Status02_Main, SMB3_NorSpr031_RightsideUpStretch_Status02_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSpr0XX_Stretch_Status02_Main, SMB3_NorSpr032_UpsideDownStretch_Status02_Main)
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr034_ToadHouseToad_Status01(Address)
namespace SMB3_NorSpr034_ToadHouseToad_Status01
%InsertMacroAtXPosition(<Address>)

Main:
	LDY.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	BEQ.b CODE_28C0E5
	LDA.w !RAM_SMB3_Overworld_OWSprIDBeingEntered
	BEQ.b CODE_28C0E5
	INY
CODE_28C0E5:
	STY.b !RAM_SMB3_NorSpr034_ToadHouseToad_MessageToDisplay,x
	LDA.b #$01
	STA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	STA.w !RAM_SMB3_Level_FreezeTimeLimitFlag
	LDA.b #$76
	STA.w !RAM_SMB3_Level_Player_FreezePlayerTimer
	STZ.b $A8
	STZ.w !RAM_SMB3_Level_Player_BehindLayer1Timer
	STZ.w $02D4
	LDA.b #$50
	STA.w $070B
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	LDA.b #$C8
else
	LDA.b #$C7
endif
	STA.w $070C
	LDA.b #$10
	STA.w $0208
	LDA.b #$07
	STA.w $0209
	RTL
namespace off
endmacro

;--------------------------------------------------------------------

macro ROUTINE_SMB3_NorSpr034_ToadHouseToad_Status02(Address)
namespace SMB3_NorSpr034_ToadHouseToad_Status02
%InsertMacroAtXPosition(<Address>)

Main:
	JSL.l CODE_27A7AE
	STA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	JSR.w CODE_28C122
	JSL.l CODE_279F52
	JSR.w CODE_28C122
	RTL

CODE_28C122:
	LDA.b !RAM_SMB3_NorSpr034_ToadHouseToad_CurrentState,x
	JSL.l SMB3_ExecutePtr_Absolute

DATA_28C128:
	dw State00_DrawTextBox
	dw State01_WriteMessage
	dw State02_DoNothing

State00_DrawTextBox:
	LDX.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	LDA.w $070B
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,x
	LDA.w $070C
	STA.w SMB3_StripeImageUploadTable[$00].HighByte,x
	CLC
	ADC.b #$20
	STA.w $070C
	BCC.b CODE_28C148
	INC.w $070B
CODE_28C148:
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	LDA.b #$1F
else
	LDA.b #$23
endif
	STZ.w SMB3_StripeImageUploadTable[$01].LowByte,x
	STA.w SMB3_StripeImageUploadTable[$01].HighByte,x
	INC
	STA.b $00
	LDY.w $02D4
	LDA.w SMB3_ToadHouseToadTextBoxWindowRowIndex,y
	TAY
CODE_28C15A:
	REP.b #$20
	LDA.w SMB3_ToadHouseTextBoxStripeImage,y
	STA.w SMB3_StripeImageUploadTable[$02].LowByte,x
	SEP.b #$20
	INY
	INY
	INX
	INX
	DEC.b $00
	DEC.b $00
	BNE.b CODE_28C15A
	LDA.b #$FF
	STA.w SMB3_StripeImageUploadTable[$02].LowByte,x
	TXA
	CLC
	ADC.b #$04
	STA.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	LDX.b $9B
	INC.w $02D4
	LDA.w $02D4
	CMP.b #SMB3_ToadHouseToadTextBoxWindowRowIndex_End-SMB3_ToadHouseToadTextBoxWindowRowIndex
	BCC.b CODE_28C19F
	LDY.b !RAM_SMB3_NorSpr034_ToadHouseToad_MessageToDisplay,x
	LDA.w DATA_21BEEE,y
	STA.w $02D4
	LDA.b #$50									;\ Initial stripe header byte 1
	STA.w $070B									;/
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR]
	LDA.b #$E8
else
	LDA.b #$E9									;\ Initial stripe header byte 2
endif
	STA.w $070C									;/
	LDA.b #$10
	STA.w !RAM_SMB3_NorSpr034_ToadHouseToad_WaitBeforeWritingNextLetter,x
	INC.b !RAM_SMB3_NorSpr034_ToadHouseToad_CurrentState,x
CODE_28C19F:
	RTS

State01_WriteMessage:
	LDA.w !RAM_SMB3_NorSpr034_ToadHouseToad_WaitBeforeWritingNextLetter,x
	BNE.b CODE_28C217
	LDY.w $02D4
	LDA.w SMB3_ToadHouseToadText_TopHalf,y
	PHA
	CMP.b #$FE									;\ If it's not an space, play the typing sound
	BEQ.b CODE_28C1BB							;|
	LDA.w $070C									;|
	LSR											;|
	BCC.b CODE_28C1BB							;|
	LDA.b #!Define_SMAS_Sound0060_Stomp7		;|
	STA.w !RAM_SMB3_Global_SoundCh1				;/

CODE_28C1BB:
	PLA
	LDX.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	STA.w SMB3_StripeImageUploadTable[$02].LowByte,x

if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	LDA.w SMB3_ToadHouseToadText_LowerHalf,y
	STA.w SMB3_StripeImageUploadTable[$03].LowByte,x
endif

	LDA.b #$21
	STA.w SMB3_StripeImageUploadTable[$02].HighByte,x
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	STA.w SMB3_StripeImageUploadTable[$03].HighByte,x
endif

	LDA.w $070B
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,x

if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	LDA.b #$80								; Note: JP version prints two character tiles vertically.
else
	LDA.b #$00
endif
	STA.w SMB3_StripeImageUploadTable[$01].LowByte,x

if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	LDA.b #$03
else
	LDA.b #$01
endif
	STA.w SMB3_StripeImageUploadTable[$01].HighByte,x

	LDA.b #$FF
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	STA.w SMB3_StripeImageUploadTable[$04].LowByte,x
else
	STA.w SMB3_StripeImageUploadTable[$03].LowByte,x
endif

	TXA
	CLC
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	ADC.b #$08
else
	ADC.b #$06
endif
	STA.w !RAM_SMB3_Global_StripeImageUploadIndexLo

	LDA.w $070C
	STA.w SMB3_StripeImageUploadTable[$00].HighByte,x

	INC.w $02D4
	INC.w $070C

	LDX.b $9B
	LDA.w $070C
	AND.b #$1F
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR]
	CMP.b #$18
else
	CMP.b #$17									; Note: last X position before line break + 1.
endif
	BNE.b CODE_28C212

	LDA.w $070C
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	ADC.b #$31
elseif !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000
	ADC.b #$0F
else
	ADC.b #$11
endif
	STA.w $070C
	BCC.b CODE_28C207

	INC.w $070B
CODE_28C207:
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	CMP.b #$A9
elseif !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000
	CMP.b #$88
else
	CMP.b #$89									; Note: last line check.
endif
	BNE.b CODE_28C212

if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000
EndState02:
endif
	INC.b !RAM_SMB3_NorSpr034_ToadHouseToad_CurrentState,x
	LDA.b #$00
	STA.w $02D4

CODE_28C212:
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$03
else
	LDA.b #$04
endif
	STA.w !RAM_SMB3_NorSpr034_ToadHouseToad_WaitBeforeWritingNextLetter,x

CODE_28C217:
State02_DoNothing:
	RTS
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr035_ToadHouseChestItem_Status02(Address)
namespace SMB3_NorSpr035_ToadHouseChestItem_Status02
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.w !RAM_SMB3_Level_Player_FreezePlayerTimer
	BEQ.b CODE_28C220
	STZ.w !RAM_SMB3_Level_Player_SmokePuffAnimationTimer
CODE_28C220:
	LDA.b !RAM_SMB3_NorSpr035_ToadHouseChestItem_OpenReserveBoxFlag,x
	ORA.w !RAM_SMB3_Global_ReserveBoxState
	BNE.b CODE_28C23E
	LDA.w !RAM_SMB3_NorSpr035_ToadHouseChestItem_ReserveBoxPageIndex,x
	STA.w !RAM_SMB3_Overworld_ReserveBoxPageIndex
	LDA.b #$01
	STA.w !RAM_SMB3_Global_OpenReserveBoxFlag
	STA.w !RAM_SMB3_Global_ReserveBoxState
	LSR
	STA.w $041B
	LDA.b #$0F
	STA.w $0419
CODE_28C23E:
	LDA.b #$00
	STA.b !RAM_SMB3_NorSpr035_ToadHouseChestItem_OpenReserveBoxFlag,x
	STA.b !RAM_SMB3_Global_ControllerPress1
	PHX
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	STA.b !RAM_SMB3_Global_ControllerPress2P1,x
	PLX
	LDA.w !RAM_SMB3_NorSpr035_ToadHouseChestItem_WaitBeforeExitingLevelTimer,x
	BNE.b CODE_28C256
	STA.w $0713
	INC.w $0014
CODE_28C256:
	LDA.w !RAM_SMB3_Global_ReserveBoxState
	CMP.b #$04
	BEQ.b CODE_28C25E
	RTL

CODE_28C25E:
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	CMP.b #$C8
	BEQ.b CODE_28C28F
	JSL.l CODE_27A7F0
	JSL.l CODE_27A7D9
	INC.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	INC.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	LDY.b #$00
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	CMP.b #$C8
	BCC.b CODE_28C297
	LDA.b #$C8
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	LDY.w !RAM_SMB3_NorSpr035_ToadHouseChestItem_ReserveBoxSlotIndex,x
	LDA.w !RAM_SMB3_NorSpr035_ToadHouseChestItem_ItemToGive,x
	STA.w SMB3_IndividualPlayerData[$00].ReserveSlots,y
	LDA.b #$03
	STA.w !RAM_SMB3_Global_ReserveBoxState
	LDA.b #$0C
	STA.w $041B
CODE_28C28F:
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$18
	BEQ.b CODE_28C307
	LDY.b #$30
CODE_28C297:
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	DEC
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	STA.w SMB3_OAMBuffer[$01].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$02].YDisp,y
	STA.w SMB3_OAMBuffer[$03].YDisp,y
	LDA.w !RAM_SMB3_NorSpr035_ToadHouseChestItem_ItemToGive,x
	TAX
	LDA.w DATA_21BEF1-$01,x
	STA.w SMB3_OAMBuffer[$00].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$02].Tile,y
	LDA.w DATA_21BEFE-$01,x
	STA.w SMB3_OAMBuffer[$01].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$03].Tile,y
	LDA.w DATA_21BF0B-$01,x
	AND.b #$0F
	ORA.b #$20
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$02].Prop,y
	LDA.w DATA_21BF0B-$01,x
	ORA.b #$20
	STA.w SMB3_OAMBuffer[$01].Prop,y
	STA.w SMB3_OAMBuffer[$03].Prop,y
	LDX.b $9B
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$02].XDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	STA.w SMB3_OAMBuffer[$03].XDisp,y
	PHY
	TYA
	LSR
	LSR
	TAY
	LDA.b #$00
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$02].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$03].Slot,y
	PLY
	TYA
	SEC
	SBC.b #$10
	TAY
	BPL.b CODE_28C297
CODE_28C307:
	RTL
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr03B_FollowingCheepCheep_Status02(Address)
namespace SMB3_NorSpr03B_FollowingCheepCheep_Status02
%InsertMacroAtXPosition(<Address>)

ADDR_28C7FA:					; Optimization: Unused RTS
	RTS

Main:
	JSL.l CODE_279DDA
	JSL.l CODE_279EBC
	LDA.b $9C
	BNE.b CODE_28C812
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	CMP.b #$06
	BNE.b CODE_28C813
	JSL.l SMB3_NorSpr02D_BossBass_Status02_CODE_28C603
CODE_28C812:
	RTL

CODE_28C813:
	LDA.b !RAM_SMB3_Global_FrameCounter
	LSR
	LSR
	AND.b #$01
	STA.w $0669,x
	JSL.l CODE_27A7F0
	JSL.l CODE_27A7D9
	JSL.l CODE_279B6C
	LDA.b $4D,x
	BEQ.b CODE_28C82F
	JMP.w CODE_28C89A

CODE_28C82F:
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenYPos,x
	CMP.b #$9C
	BCS.b CODE_28C839
	LDA.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_28C839:
	LDY.b $68,x
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	CLC
	ADC.w DATA_21BF51,y
	BMI.b CODE_28C84B
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	CLC
	ADC.w DATA_21BF53,y
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_28C84B:
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	LSR
	AND.b #$40
	EOR.b #$40
	STA.w $0679,x
	JSL.l CODE_27A7AE
	LDA.b $0E
	CLC
	ADC.b #$40
	CMP.b #$80
	BCC.b CODE_28C865
	JMP.w CODE_28C5C4

CODE_28C865:
	LDA.b $0E
	CLC
	ADC.w DATA_21BF55,y
	BPL.b CODE_28C872
	TYA
	EOR.b #$01
	STA.b $68,x
CODE_28C872:
	LDA.b $0E
	CMP.w DATA_21BF4F,y
	BNE.b CODE_28C8C4
	JSL.l CODE_27A7C5
	LDA.b $0E
	SEC
	SBC.b #$05
	CMP.b #$18
	BCS.b CODE_28C8C4
	JSL.l CODE_278F34
	LDA.b #$82
	STA.w !RAM_SMB3_Level_SplashSpr_YPosLo,y
	LDA.b #$D8
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	ASL
	ROR.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	INC.b $4D,x
CODE_28C89A:
	INC.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	INC.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenYPos,x
	CMP.b #$9C
	BCC.b CODE_28C8C4
	LDA.w $0691,x
	BNE.b CODE_28C8B5
	INC.w $0691,x
	JSL.l CODE_278F34
	LDA.b #$82
	STA.w !RAM_SMB3_Level_SplashSpr_YPosLo,y
CODE_28C8B5:
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenYPos,x
	CMP.b #$A8
	BCC.b CODE_28C8C4
	LDA.b #$F8
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	DEC.b $4D,x
	STZ.w $0691,x
CODE_28C8C4:
	RTL
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr03D_FireBreathingNipper_Status02(Address)
namespace SMB3_NorSpr03D_FireBreathingNipper_Status02
%InsertMacroAtXPosition(<Address>)

Main:
	JSR.w CODE_28B905
	JSL.l CODE_28B73A
	JSL.l CODE_27A317
	JSL.l CODE_27A7AE
	STA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	LDA.b !RAM_SMB3_Global_FrameCounter
	LSR
	LSR
	LSR
	AND.b #$01
	STA.w !RAM_SMB3_NorSpr03D_FireBreathingNipper_AnimationFrame,x
	JSL.l SMB3_CheckIfNormalSpriteOffScreen_Main
	BNE.b CODE_28C3F2
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$A0
	BNE.b CODE_28C3F2
	LDA.b #$02
	STA.w !RAM_SMB3_NorSpr03D_FireBreathingNipper_AnimationFrame,x
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$07
	BNE.b CODE_28C3F2
	LDA.b $0E
	TAY
	CLC
	ADC.b #$10
	CMP.b #$20
	BCC.b CODE_28C3AD
	LDY.b #$10
	LDA.b $0E
	BPL.b CODE_28C3AD
	LDY.b #$F0
CODE_28C3AD:
	STY.b $00
	JSL.l CODE_27A7C5
	LDA.b $0E
	CLC
	ADC.b #$20
	CMP.b #$40
	BCS.b CODE_28C3F2
	JSL.l SMB3_FindFreeExtendedSpriteSlot_FixedPriority
	LDA.b #!Define_SMB3_SpriteID_ExtSpr04_NipperFire
	STA.w !RAM_SMB3_Level_ExtSpr_SpriteID,y
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	CLC
	ADC.b #$04
	STA.w !RAM_SMB3_Level_ExtSpr_XPosLo,y
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	ADC.b #$00
	STA.w !RAM_SMB3_Level_ExtSpr_XPosHi,y
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	STA.w !RAM_SMB3_Level_ExtSpr_YPosLo,y
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	STA.w !RAM_SMB3_Level_ExtSpr_YPosHi,y
	LDA.b $00
	ASL
	JSL.l SMB3_UnnecessaryInvertARt_Main
	STA.w !RAM_SMB3_Level_ExtSpr_XSpeed,y
	LDA.b #$C0
	SEC
	SBC.b $0E
	STA.w !RAM_SMB3_Level_ExtSpr_YSpeed,y
	LDX.b $9B
CODE_28C3F2:
	RTL
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr03E_BuoyantPlatform_Status01(Address)
namespace SMB3_NorSpr03E_BuoyantPlatform_Status01
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.w $05FC
	BEQ.b CODE_28B999
	LDA.w $0543
	CLC
	ADC.b #$94
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	LDA.w $0542
	ADC.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
CODE_28B999:
	RTL
namespace off
endmacro

;--------------------------------------------------------------------

macro ROUTINE_SMB3_NorSpr03E_BuoyantPlatform_Status02(Address)
namespace SMB3_NorSpr03E_BuoyantPlatform_Status02
%InsertMacroAtXPosition(<Address>)

Main:
	JSL.l CODE_279DDA
	JSL.l CODE_28B960
	LDA.b $9C
	BNE.b SMB3_NorSpr03E_BuoyantPlatform_Status01_CODE_28B999
	LDY.b !RAM_SMB3_NorSpr03E_BuoyantPlatform_PlayerWeightIndex,x
	STA.b !RAM_SMB3_NorSpr03E_BuoyantPlatform_PlayerWeightIndex,x
	LDA.w DATA_21BCC2,y
	LDY.b #$00
	SEC
	SBC.b !RAM_SMB3_NorSpr03E_BuoyantPlatform_YDispFromInitialYPos,x
	BPL.b CODE_28B9BE
	INY
	CMP.b #$FE
	BCS.b CODE_28B9BE
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	BMI.b CODE_28B9BE
	INY
CODE_28B9BE:
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	CLC
	ADC.w DATA_21BCC5,y
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	JSL.l CODE_27A7D9
	LDA.b !RAM_SMB3_NorSpr03E_BuoyantPlatform_YDispFromInitialYPos,x
	CLC
	ADC.w $074D
	STA.b !RAM_SMB3_NorSpr03E_BuoyantPlatform_YDispFromInitialYPos,x
	LDA.b #$00
	STA.w $074D
	JSR.w CODE_28C8C5
	BCC.b CODE_28B9F0
	ROL.w $027F
	LDA.b !RAM_SMB3_Level_Player_YSpeed
	BEQ.b CODE_28B9E7
	LSR
	LSR
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_28B9E7:
	LDY.b !RAM_SMB3_Level_Player_CurrentPowerUp
	BEQ.b CODE_28B9ED
	LDY.b #$01
CODE_28B9ED:
	INY
	STY.b !RAM_SMB3_NorSpr03E_BuoyantPlatform_PlayerWeightIndex,x
CODE_28B9F0:
	RTL
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr03F_DryBones_Status02(Address)
namespace SMB3_NorSpr03F_DryBones_Status02
%InsertMacroAtXPosition(<Address>)

Main:
	JSR.w CODE_28B257
	BCS.b CODE_28C45D
	JSR.w CODE_28B905
	JSL.l CODE_279BC4
	JSL.l SMB3_CheckIfSpriteIsHorizontallyOffScreen_Main
	JSL.l CODE_28C45D
	JSL.l CODE_27A317
	JSR.w CODE_28C527
	LDA.b !RAM_SMB3_NorSpr03F_DryBones_CollapsedAnimationFrame,x
	BNE.b CODE_28C43D
	JSL.l CODE_278B48
	LDY.w $07B5
	INY
	LDA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	ASL
	ASL
	LDA.w DATA_21BF18,y
	BCS.b CODE_28C428
	JSL.l SMB3_UnnecessaryInvertARt_Main
CODE_28C428:
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	LDA.b $A7,x
	AND.b #$04
	BEQ.b CODE_28C43C
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.w DATA_21BF1B,y
	BEQ.b CODE_28C439
	LDA.b #$01
CODE_28C439:
	STA.w !RAM_SMB3_NorSpr03F_DryBones_WalkingAnimationFrame,x
CODE_28C43C:
	RTL

CODE_28C43D:
	LDA.w !RAM_SMB3_NorSpr03F_DryBones_StunTimer,x
	BNE.b CODE_28C45C
	DEC.b !RAM_SMB3_NorSpr03F_DryBones_CollapsedAnimationFrame,x
	BNE.b CODE_28C44E
	JSL.l CODE_27A7AE
	STA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	RTL

CODE_28C44E:
	LDY.b !RAM_SMB3_NorSpr03F_DryBones_CollapsedAnimationFrame,x
	LDA.w DATA_21BF1D,y
	STA.w !RAM_SMB3_NorSpr03F_DryBones_WalkingAnimationFrame,x
	LDA.w DATA_21BF25,y
	STA.w !RAM_SMB3_NorSpr03F_DryBones_StunTimer,x
CODE_28C45C:
	RTL

CODE_28C45D:
	LDA.w !RAM_SMB3_NorSpr03F_DryBones_WalkingAnimationFrame,x
	CMP.b #$02
	BCS.b CODE_28C48C
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	PHA
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	PHA
	SEC
	SBC.b #$10
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	BCS.b CODE_28C473
	DEC.b !RAM_SMB3_Level_NorSpr_YPosHi,x
CODE_28C473:
	LDY.b #$01
	JSL.l SMB3_CheckIfSpriteIsVerticallyOffScreen_Entry2
	JSL.l CODE_279F52
	PLA
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	PLA
	STA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	JSL.l SMB3_CheckIfSpriteIsVerticallyOffScreen_Main
	JSL.l SMB3_GetNormalSpriteOnScreenPosition_Main
	RTL

CODE_28C48C:
	LDA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	ASL
	ASL
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	PHA
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	PHA
	BCS.b CODE_28C4A2
	SEC
	SBC.b #$08
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	BCS.b CODE_28C4A2
	DEC.b !RAM_SMB3_Level_NorSpr_XPosHi,x
CODE_28C4A2:
	LDY.b #$02
	JSL.l SMB3_CheckIfSpriteIsHorizontallyOffScreen_Entry2
	JSL.l CODE_279DF9
	LDX.b $9B
	LDY.w !RAM_SMB3_NorSpr03F_DryBones_WalkingAnimationFrame,x
	LDX.w DATA_21BF2C,y
	JSL.l CODE_27A07A
	LDX.b $9B
	BIT.b $02
	BVC.b CODE_28C4CA
	REP.b #$20
	LDA.b $C6,x
	CLC
	ADC.w #$0008
	STA.b $C6,x
	SEP.b #$20
CODE_28C4CA:
	REP.b #$30
	LDA.b $C6,x
	STA.b $D8
	LDA.b !RAM_SMB3_NorSpr03F_DryBones_CollapsedAnimationFrame,x
	AND.w #$00FF
	TAX
	SEP.b #$20
	LDY.b $D8
	LDA.w SMB3_OAMBuffer[$00].YDisp,y
	CLC
	ADC.w DATA_21BF30,x
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$03].YDisp,y
	SEP.b #$10
	LDX.b $9B
	PLA
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	PLA
	STA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	JSL.l SMB3_CheckIfSpriteIsHorizontallyOffScreen_Main
	JSL.l SMB3_GetNormalSpriteOnScreenPosition_Main
	RTL
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr040_BusterBeetle_Status01(Address)
namespace SMB3_NorSpr040_BusterBeetle_Status01
%InsertMacroAtXPosition(<Address>)

Main:
	LDY.b $25
	LDA.w DATA_21BCB5,y
	STA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	LDA.w DATA_21BC06,y
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_28B272:
	RTL
namespace off
endmacro

;--------------------------------------------------------------------

macro ROUTINE_SMB3_NorSpr040_BusterBeetle_Status02(Address)
namespace SMB3_NorSpr040_BusterBeetle_Status02
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.b $9C
	BNE.b SMB3_NorSpr040_BusterBeetle_Status01_CODE_28B272
	JSL.l SMB3_HandleNormalSpriteGravity_Main
	JSL.l CODE_279B6C
	JSR.w CODE_28B91F
	LDA.b $A7,x
	AND.b #$03
	BEQ.b CODE_28B2DA
	LDA.b $A7,x
	AND.b #$04
	BEQ.b CODE_28B2D6
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenXPos,x
	CMP.b #$04
	BCC.b CODE_28B2D6
	CMP.b #$E8
	BCS.b CODE_28B2D6
	JSL.l SMB3_CheckIfNormalSpriteOffScreen_Main
	BNE.b CODE_28B2D6
	LDY.b #$01
	LDA.w $1F77
	CMP.b #$32
	BEQ.b CODE_28B2AC
	CMP.b #$F4
	BNE.b CODE_28B2D6
	INY
CODE_28B2AC:
	STY.b !RAM_SMB3_NorSpr040_BusterBeetle_HoldingBlockFlag,x
	LDA.b #$02
	STA.w $0564
	LDA.w $1F78
	STA.w $052A
	LDA.w $1F79
	AND.b #$F0
	STA.w $052B
	LDA.w $1F7A
	STA.w $0528
	LDA.w $1F7B
	AND.b #$F0
	STA.w $0529
	LDA.b #$0F
	STA.w !RAM_SMB3_NorSpr040_BusterBeetle_PickupBlockAnimationTimer,x
	BNE.b CODE_28B2DA
CODE_28B2D6:
	JSL.l CODE_279906
CODE_28B2DA:
	LDA.w !RAM_SMB3_NorSpr040_BusterBeetle_ThrowAnimationTimer,x
	BNE.b CODE_28B2E7
	LDA.w !RAM_SMB3_NorSpr040_BusterBeetle_PickupBlockAnimationTimer,x
	BEQ.b CODE_28B2E7
	CLC
	ADC.b #$1D
CODE_28B2E7:
	LSR
	STA.b !RAM_SMB3_NorSpr040_BusterBeetle_HeldBlockPositionIndex,x
	JSL.l CODE_279BC4
	JSL.l CODE_28B3A6
	LDA.b !RAM_SMB3_NorSpr040_BusterBeetle_HoldingBlockFlag,x
	ORA.w !RAM_SMB3_NorSpr040_BusterBeetle_ThrowAnimationTimer,x
	BNE.b CODE_28B30F
	LDY.b #$10
	LDA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	ASL
	BMI.b CODE_28B303
	LDY.b #$F0
CODE_28B303:
	STY.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	LDA.b !RAM_SMB3_Global_FrameCounter
	LSR
	LSR
	AND.b #$01
	STA.w !RAM_SMB3_NorSpr040_BusterBeetle_AnimationFrame,x
	RTL

CODE_28B30F:
	LDA.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	LDA.w !RAM_SMB3_NorSpr040_BusterBeetle_PickupBlockAnimationTimer,x
	BEQ.b CODE_28B322
	AND.b #$18
	BNE.b CODE_28B34B
	LDA.b #$02
	STA.w !RAM_SMB3_NorSpr040_BusterBeetle_AnimationFrame,x
	RTL

CODE_28B322:
	LDA.w !RAM_SMB3_NorSpr040_BusterBeetle_ThrowAnimationTimer,x
	BEQ.b CODE_28B32F
	CMP.b #$11
	BNE.b CODE_28B34B
	JSR.w CODE_28B34C
	RTL

CODE_28B32F:
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$07
	BNE.b CODE_28B34B
	JSL.l CODE_27A7AE
	STA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	JSL.l CODE_27A7C5
	LDA.b $0E
	CMP.b #$0C
	BCS.b CODE_28B34B
	LDA.b #$1B
	STA.w !RAM_SMB3_NorSpr040_BusterBeetle_ThrowAnimationTimer,x
CODE_28B34B:
	RTL

CODE_28B34C:
	LDX.b #$04
CODE_28B34E:
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	BEQ.b CODE_28B358
	DEX
	BPL.b CODE_28B34E
	BMI.b CODE_28B3A3					; Note: This will always branch.

CODE_28B358:
	JSL.l CODE_279C97
	LDY.b $9B
	LDA.b #$00
	STA.w !RAM_SMB3_NorSpr040_BusterBeetle_HoldingBlockFlag,y
	STA.w !RAM_SMB3_NorSpr040_BusterBeetle_AnimationFrame,y
	LDA.b #$05
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	LDA.b #!Define_SMB3_SpriteID_NorSpr05C_ThrowBlock
	STA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	LDA.b #$02
	STA.w $0669,x
	LDA.b #$FF
	STA.w !RAM_SMB3_NorSpr05C_ThrowBlock_DespawnTimer,x
	LDA.w !RAM_SMB3_Level_NorSpr_XPosLo,y
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	LDA.w !RAM_SMB3_Level_NorSpr_XPosHi,y
	STA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	LDA.w !RAM_SMB3_Level_NorSpr_YPosLo,y
	SEC
	SBC.b #$10
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	LDA.w !RAM_SMB3_Level_NorSpr_YPosHi,y
	SBC.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	LDA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,y
	LDY.b #$30
	ASL
	BMI.b CODE_28B39D
	LDY.b #$D0
CODE_28B39D:
	STY.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	LDA.b #$D0
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_28B3A3:
	LDX.b $9B
	RTS

CODE_28B3A6:
	JSL.l SMB3_CheckIfSpriteIsHorizontallyOffScreen_Main
	JSL.l CODE_279DF9
	LDA.b $02
	BPL.b CODE_28B3C1
	LDX.b $9B
	LDA.b !RAM_SMB3_NorSpr040_BusterBeetle_HeldBlockPositionIndex,x
	TAX
	LDA.b $00
	CLC
	ADC.w DATA_21BC20,x
	STA.b $00
	LDX.b $05
CODE_28B3C1:
	JSL.l CODE_279F91
	LDX.b $9B
	LDA.b !RAM_SMB3_NorSpr040_BusterBeetle_HoldingBlockFlag,x
	BNE.b CODE_28B3CE
	BRL.w CODE_28B45C

CODE_28B3CE:
	PHA
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenYPos,x
	LDY.b !RAM_SMB3_NorSpr040_BusterBeetle_HeldBlockPositionIndex,x
	BIT.b $02
	BMI.b CODE_28B3DB
	CLC
	ADC.w DATA_21BC20,y
CODE_28B3DB:
	STA.b $00
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	STA.b $D8
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	STA.b $D9
	LDA.w DATA_21BC08,y
	BIT.b $02
	BVS.b CODE_28B3F0
	JSL.l SMB3_UnnecessaryInvertARt_Main
CODE_28B3F0:
	REP.b #$20
	AND.w #$00FF
	CMP.w #$0080
	BCC.b CODE_28B3FD
	ORA.w #$FF00
CODE_28B3FD:
	CLC
	ADC.b $D8
	SEC
	SBC.w $0210
	STA.b $D8
	CLC
	ADC.w #$0008
	STA.b $DA
	SEP.b #$20
	LDA.b $D8
	STA.b $01
	STZ.b $07
	LDA.b $D9
	AND.b #$01
	ASL
	STA.b $D9
	LDA.b $DB
	AND.b #$01
	ORA.b $D9
	ROR
	ROR
	ROR
	TSB.b $07
	JSL.l CODE_27AA8E
	ASL
	STA.b $03
	PLA
	TAY
	REP.b #$20
	LDA.b $C6,x
	CLC
	ADC.w #$0010
	STA.b $C6,x
	SEP.b #$20
	PHX
	LDX.b #$BE
	JSL.l CODE_279F91
	PLX
	REP.b #$10
	LDY.b $C6,x
	LDA.w SMB3_OAMBuffer[$00].Prop,y
	AND.b #$BF
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$02].Prop,y
	ORA.b #$40
	STA.w SMB3_OAMBuffer[$01].Prop,y
	STA.w SMB3_OAMBuffer[$03].Prop,y
	SEP.b #$10
CODE_28B45C:
	RTL
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr041_EndOfLevelCard_Status02(Address)
namespace SMB3_NorSpr041_EndOfLevelCard_Status02
%InsertMacroAtXPosition(<Address>)

Main:
	JSR.w CODE_28C934
	RTL

CODE_28C934:
	LDA.b $A7,x
	JSL.l SMB3_ExecutePtr_Absolute

DATA_28C93A:
	dw CODE_28C94A
	dw CODE_28C974
	dw CODE_28CA09
	dw CODE_28CA5F
	dw CODE_28CAA1
	dw CODE_28CAF0
	dw CODE_28CB6C
	dw CODE_28CBA2

CODE_28C94A:
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$07
	BNE.b CODE_28C95F
	INC.w $0669,x
	LDA.w $0669,x
	CMP.b #$03
	BCC.b CODE_28C95F
	LDA.b #$00
	STA.w $0669,x
CODE_28C95F:
	LDA.w $0669,x
	STA.b $ED
	STZ.w $0280
	JSL.l CODE_27A317
	JSL.l CODE_279BC4
CODE_28C96F:
	JSL.l CODE_28CE71
	RTS

CODE_28C974:
	LDA.b #$01
	STA.w $02D9
	LDA.b #$FF
	STA.w !RAM_SMB3_Level_Player_FreezePlayerTimer
	LDA.w $0518,x
	BEQ.b CODE_28C9B6
	LSR
	TAY
	BNE.b CODE_28C98F
	INC.b $A7,x
	LDA.b #$00
	TAY
	STA.w $0689,x
CODE_28C98F:
	LDA.w DATA_21BF66,y
	STA.w $0669,x
	JSL.l CODE_28CE71
	REP.b #$10
	LDY.b $C6,x
	LDA.w SMB3_OAMBuffer[$00].Prop,y
	ORA.b #$01
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$02].Prop,y
	LDA.w SMB3_OAMBuffer[$01].Prop,y
	ORA.b #$01
	STA.w SMB3_OAMBuffer[$01].Prop,y
	STA.w SMB3_OAMBuffer[$03].Prop,y
	SEP.b #$10
	RTS

CODE_28C9B6:
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	AND.b #$0F
	CMP.b #$07
	BEQ.b CODE_28C9C2
	JSL.l CODE_27A7F0
CODE_28C9C2:
	JSL.l CODE_27A7D9
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	BEQ.b CODE_28C9D0
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	CMP.b #$10
	BCS.b CODE_28C9E5
CODE_28C9D0:
	LDA.w $0216
	SEC
	SBC.b #$03
	STA.w $0216
	STA.w $0543
	CMP.b #$11
	BCS.b CODE_28C9E5
	LDA.b #$10
	STA.w $0518,x
CODE_28C9E5:
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$03
	BNE.b CODE_28C9FA
	LDA.w $0669,x
	SEC
	SBC.b #$03
	CMP.b #$03
	BCS.b CODE_28C9F7
	ADC.b #$0C
CODE_28C9F7:
	STA.w $0669,x
CODE_28C9FA:
	JMP.w CODE_28C96F

DATA_28C9FD:
	db $17,$1A,$1D,$20,$18,$1B,$1E,$21
	db $19,$1C,$1F,$22

CODE_28CA09:
	JSR.w CODE_28CED1
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$03
	BNE.b CODE_28CA5E
	LDA.w $0689,x
	STA.b $D8
	PHX
	LDA.b $ED
	ASL
	ASL
	CLC
	ADC.b $D8
	TAX
	LDA.l DATA_28C9FD,x
	STA.b $D8
	ASL
	CLC
	ADC.b $D8
	TAX
	LDA.l DATA_228B5C,x
	STA.b $D8
	LDA.l DATA_228B5C+$01,x
	STA.b $D9
	LDA.l DATA_228B5C+$02,x
	STA.b $DA
	JSL.l CODE_2AFDFA
	LDA.b #$01
	STA.w $02BB
	STZ.w $0238
	PLX
	INC.w $0689,x
	LDA.w $0689,x
	CMP.b #$04
	BNE.b CODE_28CA5E
	INC.b $A7,x
	LDA.b #$80
	STA.w $0518,x
	JSR.w CODE_28CD3E
CODE_28CA5E:
	RTS

CODE_28CA5F:
	JSR.w CODE_28CED1
	LDA.b #$FF
	STA.w !RAM_SMB3_Level_Player_FreezePlayerTimer
	LDA.w $0518,x
	CMP.b #$50
	BCC.b CODE_28CA92
	BNE.b CODE_28CA95
	STZ.w $02D1
	STZ.w !RAM_SMB3_Level_Layer3BGFromHeader
	LDA.w $0208
	ORA.b #$04
	STA.w $0208
	LDA.w $0209
	AND.b #$FB
	STA.w $0209
	LDA.b #$2E
	STA.b $28
CODE_28CA8A:
	LDA.b #$30
	STA.w $0520,x
	JMP.w CODE_28CCAB

CODE_28CA92:
	JSR.w CODE_28CD15
CODE_28CA95:
	JSL.l CODE_278A17
	ORA.w $0518,x
	BNE.b CODE_28CA5E
	JMP.w CODE_28CB42

CODE_28CAA1:
	LDA.b #$01
	STA.w $02D9
	JSL.l CODE_27A7D9
	LDA.w !RAM_SMB3_Level_NorSpr_YOffscreenFlag,x
	BEQ.b CODE_28CAB6
	INC.b $A7,x
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$48
else
	LDA.b #$60
endif
	STA.w $0518,x
CODE_28CAB6:
	JSR.w CODE_28C9E5
CODE_28CAB9:
	JSR.w CODE_28CD4F
	LDA.b #$41
	STA.b $BD
	STZ.w !RAM_SMB3_Level_Player_FlightTimer
	STZ.b !RAM_SMB3_Level_Player_XSpeed
	LDA.w $0280
	CMP.b #$7F
	BNE.b CODE_28CACF
	STA.w !RAM_SMB3_Global_FilledInPMeterSegments
CODE_28CACF:
	LDY.b #$01
	LDA.w !RAM_SMB3_Global_FilledInPMeterSegments
	CMP.b #$7F
	BNE.b CODE_28CAD9
	TAY
CODE_28CAD9:
	STY.w $0280
	LDA.b $A6
	BNE.b CODE_28CAEF
	LDY.b #$FF
	STY.w !RAM_SMB3_Level_Player_GoalWalkAnimationTimer
	LDA.b !RAM_SMB3_Level_Player_OnScreenXPos
	LSR
	CMP.b #$10
	BNE.b CODE_28CAEF
	STY.w !RAM_SMB3_Level_Player_FreezePlayerTimer
CODE_28CAEF:
	RTS

CODE_28CAF0:
	JSR.w CODE_28CAB9
	LDY.b #$2F
	LDA.w $0518,x
	CMP.b #$1E
	BEQ.b CODE_28CB0E
	LDY.b #$30
	CMP.b #$02
	BEQ.b CODE_28CB0E
	CMP.b #$01
	BNE.b CODE_28CB26
	JSR.w CODE_28CA8A
	JSR.w CODE_28CD3E
	LDY.b #$00
CODE_28CB0E:
	STY.b $28
	STZ.w $02D1
	STZ.w !RAM_SMB3_Level_Layer3BGFromHeader
	LDA.w $0208
	ORA.b #$04
	STA.w $0208
	LDA.w $0209
	AND.b #$FB
	STA.w $0209
CODE_28CB26:
	JSL.l CODE_278A17
	ORA.w $0518,x
	BNE.b CODE_28CB63
	LDA.b !RAM_SMB3_Level_Player_OnScreenXPos
	LSR
	CMP.b #$10
	BNE.b CODE_28CB63
	JSR.w CODE_28CCEF
	LDA.w SMB3_IndividualPlayerData[$00].CardSlots+$02,y
	BEQ.b CODE_28CB60
	LDA.b #$04
	STA.b $68,x
CODE_28CB42:
	JSR.w CODE_28CCEF
	TYA
	STA.w $0691,x
	LDY.b $68,x
	LDA.w DATA_21BFB2,y
	STA.w $0689,x
	LDA.b #$06
	STA.b $A7,x
	LDA.b #$FF
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	LDA.b #$C0
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	JMP.w CODE_28CD3B

CODE_28CB60:
	JSR.w CODE_28CB98
CODE_28CB63:
	LDA.w $0518,x
	BNE.b CODE_28CB6B
	JSR.w CODE_28CD15
CODE_28CB6B:
	RTS

CODE_28CB6C:
	LDA.b #$FF
	STA.w !RAM_SMB3_Level_Player_FreezePlayerTimer
	JSR.w CODE_28CD4F
	JSR.w CODE_28CBCE
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	CMP.b #$80
	BCC.b CODE_28CB87
	LDA.b #$40
	STA.w $0518,x
	JSL.l CODE_27A7D9
	RTS

CODE_28CB87:
	LDA.w $0518,x
	BEQ.b CODE_28CB93
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	EOR.b #$01
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	RTS

CODE_28CB93:
	LDA.w $0689,x
	BNE.b CODE_28CBA1
CODE_28CB98:
	LDA.b #$07
	STA.b $A7,x
	LDA.b #$80
	STA.w $0518,x
CODE_28CBA1:
	RTS

CODE_28CBA2:
	JSR.w CODE_28CED1
	JSR.w CODE_28CD4F
	JSR.w CODE_28CCEF
	LDA.w $0518,x
	BNE.w CODE_28CBC7
	STA.w $0713
	INC.w $0014
	LDA.w SMB3_IndividualPlayerData[$00].CardSlots+$02,y
	BEQ.b CODE_28CBC7
	LDA.b #$00
	STA.w SMB3_IndividualPlayerData[$00].CardSlots,y
	STA.w SMB3_IndividualPlayerData[$00].CardSlots+$01,y
	STA.w SMB3_IndividualPlayerData[$00].CardSlots+$02,y
	RTS

CODE_28CBC7:
	LDA.b $68,x
	BNE.b CODE_28CBCE
	JMP.w CODE_28CD15

CODE_28CBCE:
	LDA.w $0689,x
	BEQ.b CODE_28CBE9
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$1F
	BNE.b CODE_28CBE9
	LDA.b #!Define_SMAS_Sound0063_1up
	STA.w !RAM_SMB3_Global_SoundCh3
	LDX.w !RAM_SMB3_Level_Player_CurrentCharacter
	INC.w !RAM_SMB3_Level_Player_MariosLives,x
	LDX.b $9B
	DEC.w $0689,x
CODE_28CBE9:
	JSR.w CODE_28CED1
	PHX
	LDA.b #$A6
	STA.b !RAM_SMB3_Level_Player_CurrentPose
	JSL.l CODE_22E000
	PLX
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	STA.b $00
	REP.b #$10
	LDY.b $C6,x
	LDX.w #$0002
CODE_28CC01:
	LDA.b $00
	CMP.b #$E0
	BCS.b CODE_28CC10
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$01].YDisp,y
CODE_28CC10:
	LDA.w DATA_21BFB7,x
	STA.w SMB3_OAMBuffer[$00].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$01].Tile,y
	LDA.b #$22
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$01].Prop,y
	LDA.w DATA_21BFBA,x
	BIT.w $0216
	BPL.b CODE_28CC2D
	CLC
	ADC.b #$08
CODE_28CC2D:
	SEC
	SBC.w $0210
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	PHY
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b #$00
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	PLY
	INY
	INY
	INY
	INY
	INY
	INY
	INY
	INY
	DEX
	BPL.b CODE_28CC01
	LDX.b $9B
	LDA.b $68,x
	TAX
	LDA.w DATA_21BFBC,x
	STA.w $07FA,y
	INC
	STA.w $07FE,y
	LDA.b #$22
	STA.w $07FB,y
	STA.w $07FF,y
	LDX.b $9B
	SEP.b #$10
	LDY.w $0691,x
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$07
	BEQ.b CODE_28CC90
	LDA.w SMB3_IndividualPlayerData[$00].CardSlots,y
	PHA
	LDA.b #$00
	STA.w SMB3_IndividualPlayerData[$00].CardSlots,y
	JSL.l CODE_20F5A7
	LDX.b $9B
	LDY.w $0691,x
	PLA
	STA.w SMB3_IndividualPlayerData[$00].CardSlots,y
	BNE.b CODE_28CCAA
CODE_28CC90:
	JSL.l CODE_20F5A7
	LDX.b $9B
	LDY.w $0691,x
	INY
	CPY.b #$03
	BNE.b CODE_28CCA0
	LDY.b #$00
CODE_28CCA0:
	CPY.b #$26
	BNE.b CODE_28CCA6
	LDY.b #$23
CODE_28CCA6:
	TYA
	STA.w $0691,x
CODE_28CCAA:
	RTS

CODE_28CCAB:
	LDY.b #$00
	LDA.w $0216
	BPL.b CODE_28CCB3
	INY
CODE_28CCB3:
	JSR.w CODE_28CCF7
	JSR.w CODE_28CD3E
	ASL
	ASL
	TAY
	LDA.w $0216
	BPL.b CODE_28CCC2
	INY
CODE_28CCC2:
	TYA
	ASL
	TAY
	LDX.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	LDA.b #$02
	STA.b $00
CODE_28CCCC:
	REP.b #$20
	LDA.w DATA_21BFB9,y
	STA.w $15F6,x
	STA.w $15E6,x
	LDA.w DATA_21BFD1,y
	STA.w $15FE,x
	STA.w $15EE,x
	SEP.b #$20
	INY
	INY
	INY
	INY
	INX
	INX
	DEC.b $00
	BNE.b CODE_28CCCC
	JMP.w CODE_28CD3B
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr047_GiantBlockHandler_Status02(Address)
namespace SMB3_NorSpr047_GiantBlockHandler_Status02
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.w $0518,x
	BNE.b CODE_28B048
	LDA.w $0691,x
	PHA
	LDA.b #$00
	STA.w $0691,x
	PLA
	STA.b $0A
	BNE.b CODE_28B01B
	LDA.w !RAM_SMB3_Level_Player_HitCeilingFlag
	BEQ.b CODE_28B047
	LDA.w $0604
CODE_28B01B:
	STA.b $00
	LDY.b #$02
CODE_28B01F:
	LDA.b $00
	SEC
	SBC.w DATA_21BBC4,y
	CMP.b #$04
	BCS.b CODE_28B044
	LDA.w DATA_21BBC7,y
	STA.w $0669,x
	TYA
	BNE.b CODE_28B03C
	LDA.b $0A
	BNE.b CODE_28B03A
	LDA.b !RAM_SMB3_Level_Player_CurrentPowerUp
	BEQ.b CODE_28B03C
CODE_28B03A:
	LDY.b #$03
CODE_28B03C:
	TYA
	STA.w $0689,x
	JSR.w CODE_28B094
	RTL

CODE_28B044:
	DEY
	BPL.b CODE_28B01F
CODE_28B047:
	RTL

CODE_28B048:
	CMP.b #$01
	BNE.b CODE_28B056
	LDY.w $0689,x
	LDA.w DATA_21BBC0,y
	STA.w $0530
	RTL

CODE_28B056:
	JSR.w CODE_28B1A7
	LDA.b $9C
	BEQ.b CODE_28B05E
	RTL

CODE_28B05E:
	LDA.w $0518,x
	CMP.b #$0A
	BNE.b CODE_28B089
	PHA
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	STA.b $0C
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	STA.b $0D
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	STA.b $0E
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	PHA
	STA.b $0F
	LDA.b #$F3
	JSL.l CODE_27A75E
	PLA
	ORA.b #$10
	STA.b $0F
	LDA.b #$F3
	JSL.l CODE_27A75E
	PLA
CODE_28B089:
	TAY
	LDA.w DATA_21BBCB,y
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	JSL.l CODE_27A7D9
	RTL

CODE_28B094:
	LDA.b #$01
	STA.w $057D
	LDA.b $0A
	BNE.b CODE_28B0CA
	LDA.b #!Define_SMAS_Sound0060_HitHead
	STA.w !RAM_SMB3_Global_SoundCh1
	LDA.b !RAM_SMB3_Level_Player_YPosHi
	STA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	LDA.b !RAM_SMB3_Level_Player_YPosLo
	LDY.b !RAM_SMB3_Level_Player_CurrentPowerUp
	BEQ.b CODE_28B0B3
	SEC
	SBC.b #$10
	BCS.b CODE_28B0B3
	DEC.b !RAM_SMB3_Level_NorSpr_YPosHi,x
CODE_28B0B3:
	AND.b #$F0
	ORA.b #$10
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	LDA.b !RAM_SMB3_Level_Player_XPosHi
	STA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	LDA.b !RAM_SMB3_Level_Player_XPosLo
	CLC
	ADC.b #$08
	BCC.b CODE_28B0C6
	INC.b !RAM_SMB3_Level_NorSpr_XPosHi,x
CODE_28B0C6:
	AND.b #$E0
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
CODE_28B0CA:
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	STA.w $0536
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	STA.b $EE
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	STA.w $0533
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	STA.w $0539
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	STA.w $053C
	LDA.b #$16
	STA.w $0530
	LDA.w $0689,x
	JSL.l SMB3_ExecutePtr_Absolute

DATA_28B0EE:
	dw CODE_28B0F6
	dw CODE_28B0F9
	dw CODE_28B111
	dw CODE_28B144

CODE_28B0F6:
	JMP.w CODE_28B19A

CODE_28B0F9:
	INC.w !RAM_SMB3_Global_CoinsToGive
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	STA.b $00
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	ORA.b #$0E
	STA.b $01
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	STA.b $0E
	JSL.l CODE_278AE8
	JMP.w CODE_28B19A

CODE_28B111:
	LDA.b !RAM_SMB3_Level_Player_XPosLo
	AND.b #$10
	STA.w $058D
	LDA.b #!Define_SMB3_SpriteID_NorSpr01E_RaccoonLeaf
	LDY.b !RAM_SMB3_Level_Player_CurrentPowerUp
	BNE.b CODE_28B120
	LDA.b #!Define_SMB3_SpriteID_NorSpr00D_Mushroom
CODE_28B120:
	LDY.b #$05
	STA.w !RAM_SMB3_Level_NorSpr_SpriteID,y
	LDA.b #$01
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,y
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	CLC
	ADC.b #$08
	STA.w !RAM_SMB3_Level_NorSpr_XPosLo,y
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	STA.w !RAM_SMB3_Level_NorSpr_XPosHi,y
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	STA.w !RAM_SMB3_Level_NorSpr_YPosLo,y
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	STA.w !RAM_SMB3_Level_NorSpr_YPosHi,y
	JMP.w CODE_28B19A

CODE_28B144:
	LDA.b #!Define_SMAS_Sound0063_BreakBlock
	STA.w !RAM_SMB3_Global_SoundCh3
	LDX.b #$03
	LDY.b #$05
CODE_28B14D:
	LDA.w !RAM_SMB3_Level_ExtSpr_SpriteID,y
	BEQ.b CODE_28B158
	DEY
	BPL.b CODE_28B14D
	JMP.w CODE_28B191

CODE_28B158:
	LDA.b #!Define_SMB3_SpriteID_ExtSpr13_BrickPiece
	STA.w !RAM_SMB3_Level_ExtSpr_SpriteID,y
	LDA.w DATA_21BBD6,x
	CLC
	ADC.w $0536
	STA.w !RAM_SMB3_Level_ExtSpr_XPosLo,y
	LDA.b $EE
	ADC.b #$00
	STA.w !RAM_SMB3_Level_ExtSpr_XPosHi,y
	LDA.w DATA_21BBDA,x
	CLC
	ADC.w $053C
	STA.w !RAM_SMB3_Level_ExtSpr_YPosLo,y
	LDA.b #$00
	ADC.w $0539
	STA.w !RAM_SMB3_Level_ExtSpr_YPosHi,y
	LDA.w DATA_21BBDE,x
	STA.w !RAM_SMB3_Level_ExtSpr_XSpeed,y
	LDA.w DATA_21BBE2,x
	STA.w !RAM_SMB3_Level_ExtSpr_YSpeed,y
	LDA.b #$00
	STA.w $06C7,y
CODE_28B191:
	DEY
	DEX
	BPL.b CODE_28B14D
	LDX.b $9B
	JMP.w CODE_28B19A

CODE_28B19A:
	LDA.b $0A
	BNE.b CODE_28B1A2
	LDA.b #$00
	STA.b !RAM_SMB3_Level_Player_YSpeed
CODE_28B1A2:
	LDA.b #$0B
	STA.w $0518,x
CODE_28B1A7:
	LDA.w $0689,x
	CMP.b #$03
	BEQ.b CODE_28B1EE
	JSL.l SMB3_GetNormalSpriteOnScreenPosition_Main
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenXPos,x
	STA.b $01
	PHA
	DEC.b !RAM_SMB3_Level_NorSpr_OnScreenYPos,x
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenYPos,x
	STA.b $02
	PHA
	REP.b #$30
	LDY.b $C6,x
	LDA.w $0669,x
	AND.w #$00FF
	TAX
	SEP.b #$20
	JSR.w CODE_28B1EF
	JSR.w CODE_28B1EF
	PLA
	CLC
	ADC.b #$10
	STA.b $02
	PLA
	STA.b $01
	JSR.w CODE_28B1EF
	SEP.b #$10
	JSL.l CODE_27A19E
	REP.b #$10
	LDY.b $C6,x
	JSR.w CODE_28B1EF
	SEP.b #$10
	LDX.b $9B
CODE_28B1EE:
	RTS

CODE_28B1EF:
	LDA.w !RAM_SMB3_Level_Player_IsAboveTopOfLevelFlag
	BNE.b CODE_28B256
	LDA.b #$02
	STA.b $04
CODE_28B1F8:
	LDA.b $02
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$01].YDisp,y
	LDA.b $01
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	CLC
	ADC.b #$08
	STA.b $01
	LDA.w DATA_21BBE6,x
	STA.w SMB3_OAMBuffer[$00].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$01].Tile,y
	LDA.b #$21
	ORA.w DATA_21BBF6,x
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$01].Prop,y
	AND.b #$80
	BEQ.b CODE_28B237
	LDA.w SMB3_OAMBuffer[$00].Tile,y
	PHA
	LDA.w SMB3_OAMBuffer[$01].Tile,y
	STA.w SMB3_OAMBuffer[$00].Tile,y
	PLA
	STA.w SMB3_OAMBuffer[$01].Tile,y
CODE_28B237:
	PHY
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b #$00
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	PLY
	INY
	INY
	INY
	INY
	INY
	INY
	INY
	INY
	INX
	DEC.b $04
	BNE.b CODE_28B1F8
CODE_28B256:
	RTS
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr048_MiniBossBass_Status02(Address)
namespace SMB3_NorSpr048_MiniBossBass_Status02
%InsertMacroAtXPosition(<Address>)

Main:
	JSL.l CODE_279BC4
	LDA.w $0565
	LSR
	LSR
	AND.b #$01
	STA.w !RAM_SMB3_NorSpr048_MiniBossBass_AnimationFrame,x
	LDA.b $9C
	BNE.b CODE_28E313
	LDY.b #$02
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$10
	BEQ.b CODE_28E2A4
	LDY.b #$FE
CODE_28E2A4:
	STY.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	LDY.b #$00
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	BPL.b CODE_28E2AD
	INY
CODE_28E2AD:
	CMP.w DATA_21C1F5,y
	BEQ.b CODE_28E2B8
	CLC
	ADC.w DATA_21C1F7,y
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_28E2B8:
	JSL.l CODE_27A7F0
	JSL.l CODE_27A7E5
	JSL.l CODE_279B70
	LDA.w !RAM_SMB3_NorSpr048_MiniBossBass_SwimTimer,x
	BNE.b CODE_28E313
	LDY.w !RAM_SMB3_NorSpr048_MiniBossBass_SpriteSlotOfParent,x
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,y
	CMP.b #$02
	BNE.b CODE_28E308
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,y
	CMP.b #!Define_SMB3_SpriteID_NorSpr063_BigBertha
	BNE.b CODE_28E308
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	SBC.w !RAM_SMB3_Level_NorSpr_XPosLo,y
	STA.b $00
	ADC.b #$20
	CMP.b #$48
	BCS.b CODE_28E313
	LDA.b $00
	ADC.b #$08
	CMP.b #$18
	BCS.b CODE_28E2F9
	LDA.b #$00
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	STA.w !RAM_SMB3_NorSpr048_MiniBossBass_AnimationFrame,y
	BRA.b CODE_28E313

CODE_28E2F9:
	LDA.b #$08
	LDY.b $00
	BMI.b CODE_28E301
	LDA.b #$F8
CODE_28E301:
	CLC
	ADC.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	BRA.b CODE_28E313

CODE_28E308:
	LDA.b #$08
	LDY.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	BNE.b CODE_28E311
	LDA.b #$F8
CODE_28E311:
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_28E313:
	JSL.l SMB3_CheckIfSpriteIsHorizontallyOffScreen_Main
	JSL.l CODE_279EBC
	RTL
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

; Note: This sprite is used in the NES version. It's the BG clouds seen in airship levels
; Nintendo deleted some of the code for this sprite, so it won't properly function in game. However, I've provided the necessary code to get it working again.
; Simply uncomment the code by removing the ";" on the lines bewteen "Main:" and "ADDR_28D760:" to restore this sprite's functionality.
;
; To make this sprite start appearing in the airship levels again like in the NES version, put generator B8 at the X/Y positions provided:
;- 1-Airship: X = $03 Y = $09
;- 2-Airship: X = $01 Y = $03
;- 3-Airship: X = $01 Y = $03
;- 4-Airship: X = $01 Y = $03
;- 5-Airship: X = $01 Y = $03
;- 6-Airship: X = $01 Y = $03
;- 7-Airship: X = $01 Y = $03
;- 8-Airship: X = $01 Y = $03

macro ROUTINE_SMB3_NorSpr049_BGCloud_Status02(Address)
namespace SMB3_NorSpr049_BGCloud_Status02
%InsertMacroAtXPosition(<Address>)

Main:
	;LDA.b $9C
	;BNE.b ADDR_28D760
	;JSL.l CODE_279BC4
	;JSL.l ADDR_28D760
	;JSL.l CODE_27A7F0
	;JSL.l CODE_279DD4
	RTL

ADDR_28D760:
	STZ.b $D8
	STZ.b $D9
	JSL.l SMB3_GetNormalSpriteOnScreenPosition_Main
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenYPos,x
	SEC
	SBC.b #$01
	STA.b $00
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenXPos,x
	STA.b $01
ADDR_28D773:
	LDA.w !RAM_SMB3_Level_NorSpr_YOffscreenFlag,x
	BNE.b ADDR_28D7EE
	JSR.w CODE_28E708
	LDA.b $D8
	STA.b $DA
	STZ.b $DB
	PHA
	REP.b #$30
	ASL.b $D8
	ASL.b $D8
	ASL.b $D8
	LDA.b $D8
	AND.w #$00FF
	CLC
	ADC.b $C6,x
	TAY
	LDA.b $68,x
	AND.w #$00FF
	ASL
	ASL
	ASL
	ADC.b $DA
	TAX
	SEP.b #$20
	PLA
	STA.b $D8
	LDA.w DATA_21C10A,x
	LDX.b $9B
	CMP.b #$70
	BEQ.b ADDR_28D7EE
	CMP.b #$FE
	BCC.b ADDR_28D7B2
	LDA.b #$D4
ADDR_28D7B2:
	STA.w SMB3_OAMBuffer[$00].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$01].Tile,y
	LDA.b #$10
	BCC.b ADDR_28D7BF
	ORA.b #$40
ADDR_28D7BF:
	STA.w SMB3_OAMBuffer[$00].Prop,y
	ORA.b #$0C
	STA.w SMB3_OAMBuffer[$01].Prop,y
	LDA.b $00
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$01].YDisp,y
	LDA.b $01
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	PHY
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b $DD
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	PLY
ADDR_28D7EE:
	SEP.b #$10
	ASL.b $DC
	LDA.b $01
	CLC
	ADC.b #$08
	STA.b $01
	INC.b $D8
	LDA.b $D8
	CMP.b #$06
	BEQ.b CODE_28D804
	BRL.w ADDR_28D773

CODE_28D804:
	RTL
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr04A_GoalSphere_Status02(Address)
namespace SMB3_NorSpr04A_GoalSphere_Status02
%InsertMacroAtXPosition(<Address>)

Main:
	LDY.w !RAM_SMB3_NorSpr04A_GoalSphere_WaitBeforeFadeout,x
	BEQ.b CODE_28D6E9
	STY.w !RAM_SMB3_Level_Player_DisableControlsTimer
	DEY
	BNE.b CODE_28D6E8
	STY.w $0713
	LDA.b $4D,x
	STA.w $0746
	INC.w $0014
CODE_28D6E8:
	RTL

CODE_28D6E9:
	LDA.b !RAM_SMB3_NorSpr04A_GoalSphere_HasBeenCollectedFlag,x
	BEQ.b CODE_28D6FC
	STA.w !RAM_SMB3_Level_Player_DisableControlsTimer
	JSL.l CODE_278A17
	BNE.b CODE_28D6FB
	LDA.b #$40
	STA.w !RAM_SMB3_NorSpr04A_GoalSphere_WaitBeforeFadeout,x
CODE_28D6FB:
	RTL

CODE_28D6FC:
	LDA.b $9C
	BNE.b CODE_28D723
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	BMI.b CODE_28D723
	JSL.l CODE_27A313
	BCC.b CODE_28D723
	INC.b !RAM_SMB3_NorSpr04A_GoalSphere_HasBeenCollectedFlag,x
	LDA.b #$1E
	STA.w !RAM_SMB3_Level_ScreenFlashTimer
	LDA.b #!Define_SMB3_LevelMusic_PassedBoss
	STA.w !RAM_SMB3_Global_MusicCh1
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$24
else
	LDA.b #$50
endif
	STA.w $02E3
	LDA.b #$01
	STA.w $02E4
	STA.w $02D9
CODE_28D723:
	LDA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	AND.b #$7F
	STA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	JSL.l CODE_279EBC
CODE_28D72F:
	JSL.l SMB3_HandleNormalSpriteGravity_Main
	LDA.b $A7,x
	AND.b #$04
	BEQ.b CODE_28D75E
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_NorSpr04A_GoalSphere
	BNE.b CODE_28D746
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	CMP.b #$70
	BCC.b CODE_28D75E
CODE_28D746:
	JSL.l CODE_278B28
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	PHA
	JSL.l CODE_278B67
	PLA
	LSR
	LSR
	JSL.l SMB3_UnnecessaryInvertARt_Main
	CMP.b #$FE
	BCS.b CODE_28D75E
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_28D75E:
	RTL
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSprXXX_BoomBoom_Status01(Address)
namespace SMB3_NorSprXXX_BoomBoom_Status01
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	STA.b $4D,x
	LDA.b #$01
	STA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	STA.w $1FF9,x
	LDA.b #$25								;\ Note: Why #$25?
	STA.w !RAM_SMB3_Level_NorSpr_FireballHPCounter,x				;/
	LDA.b #$07
	STA.w !RAM_SMB3_NorSprXXX_BoomBoom_AnimationFrame,x
CODE_28D81A:
	RTL
namespace off
	%SetDuplicateOrNullPointer(SMB3_NorSprXXX_BoomBoom_Status01_Main, SMB3_NorSpr04B_BoomBoom_Status01_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSprXXX_BoomBoom_Status01_Main, SMB3_NorSpr04C_FlyingBoomBoom_Status01_Main)
endmacro

;---------------------------------------------------------------------------

macro ROUTINE_SMB3_NorSprXXX_BoomBoom_Status02(Address)
namespace SMB3_NorSprXXX_BoomBoom_Status02
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.w $0560
	CMP.b #$0B
	BNE.b CODE_28D825
	STA.w !RAM_SMB3_NorSprXXX_BoomBoom_DontSlideTowardsPlayerFlag,x
CODE_28D825:
	LDA.w !RAM_SMB3_Level_NorSpr_FireballHPCounter,x
	CMP.b #$20
	BNE.b CODE_28D83C
	DEC.w !RAM_SMB3_Level_NorSpr_FireballHPCounter,x
	LDA.b #$05
	STA.b !RAM_SMB3_NorSprXXX_BoomBoom_CurrentState,x
	LDA.b #$50
	STA.w !RAM_SMB3_NorSprXXX_BoomBoom_DeathFlashingTimer,x
	JSR.w CODE_28DB79
	RTL

CODE_28D83C:
	JSR.w CODE_28DB79
	JSL.l CODE_279BC4
	JSR.w CODE_28D145
	BEQ.b CODE_28D860
	LDA.b !RAM_SMB3_NorSprXXX_BoomBoom_CurrentState,x
	BEQ.b CODE_28D860
	LDA.b #$02
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	LDA.b #$70
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	LDA.b #$01
	STA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	LSR
	JSR.w CODE_28DCA3
	RTL

CODE_28D860:
	LDA.b $9C
	BNE.b SMB3_NorSprXXX_BoomBoom_Status01_CODE_28D81A
	LDA.b !RAM_SMB3_NorSprXXX_BoomBoom_CurrentState,x
	CMP.b #$05
	BNE.b CODE_28D86F
	JSR.w CODE_28D8E7
	BRA.b CODE_28D899

CODE_28D86F:
	LDY.w !RAM_SMB3_NorSprXXX_BoomBoom_StunnedTimer,x
	BEQ.b CODE_28D89A
	DEY
	BNE.b CODE_28D87A
	JSR.w CODE_28D927
CODE_28D87A:
	LDY.b #$08
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$04
	BEQ.b CODE_28D883
	INY
CODE_28D883:
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_NorSpr04C_FlyingBoomBoom
	BNE.b CODE_28D895
	LDA.b !RAM_SMB3_NorSprXXX_BoomBoom_CurrentState,x
	CMP.b #$04
	BNE.b CODE_28D895
	TYA
	CLC
	ADC.b #$0A
	TAY
CODE_28D895:
	TYA
	STA.w !RAM_SMB3_NorSprXXX_BoomBoom_AnimationFrame,x
CODE_28D899:
	RTL

CODE_28D89A:
	LDA.w !RAM_SMB3_NorSprXXX_BoomBoom_CrouchDownTimer,x
	BEQ.b CODE_28D8DD
	DEC.w !RAM_SMB3_NorSprXXX_BoomBoom_CrouchDownTimer,x
	LSR
	LSR
	LSR
	TAY
	LDA.w DATA_21C130,y
	STA.w !RAM_SMB3_NorSprXXX_BoomBoom_AnimationFrame,x
	LDA.w !RAM_SMB3_NorSprXXX_BoomBoom_CrouchDownTimer,x
	CMP.b #$10
	BNE.b CODE_28D8C5
	LDA.b #$D3
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	LDA.w !RAM_SMB3_NorSprXXX_BoomBoom_DontSlideTowardsPlayerFlag,x
	BNE.b CODE_28D8C5
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.w DATA_21C12A,y
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_28D8C5:
	LDA.b !RAM_SMB3_Global_FrameCounter
	LSR
	BCC.b CODE_28D8D6
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	BEQ.b CODE_28D8D6
	BPL.b CODE_28D8D4
	INC.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	INC.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_28D8D4:
	DEC.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_28D8D6:
	JSR.w CODE_28DC4D
	JSR.w CODE_28D99D
	RTL

CODE_28D8DD:
	JSR.w CODE_28D8E1
	RTL

CODE_28D8E1:
	JSR.w CODE_28DC4D
	INC.w !RAM_SMB3_NorSprXXX_BoomBoom_AnimationFrameCounter,x
CODE_28D8E7:
	LDA.b !RAM_SMB3_NorSprXXX_BoomBoom_CurrentState,x
	JSL.l SMB3_ExecutePtr_Absolute

DATA_28D8ED:
	dw CODE_28D8F9
	dw CODE_28D92D
	dw CODE_28D930
	dw CODE_28D9F2
	dw CODE_28DB2D
	dw CODE_28DC96

CODE_28D8F9:
	LDA.b #$07
	STA.w !RAM_SMB3_NorSprXXX_BoomBoom_AnimationFrame,x
	STA.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,x
	LDA.w $0210
	CMP.b #$07
	BCS.b CODE_28D92C
	LDA.b #$00
	STA.w $0210
	LDY.b #$00
	STY.b !RAM_SMB3_Level_Player_XSpeed
	LDA.b $A6
	BNE.b CODE_28D92C
	STA.w !RAM_SMB3_Level_PSwitchTimer
	LDA.b #!Define_SMB3_LevelMusic_BossBattle
	STA.w !RAM_SMB3_Global_MusicCh1
	INC.w !RAM_SMB3_Level_DisableScrollingFlag
	LDA.b #$02
	STA.w !RAM_SMB3_Level_Layer1VerticalScrollSetting
	STA.b !RAM_SMB3_NorSprXXX_BoomBoom_CurrentState,x
CODE_28D927:
	LDA.b #$2F
	STA.w !RAM_SMB3_NorSprXXX_BoomBoom_CrouchDownTimer,x
CODE_28D92C:
	RTS

CODE_28D92D:
	INC.b !RAM_SMB3_NorSprXXX_BoomBoom_CurrentState,x
	RTS

CODE_28D930:
	LDA.w !RAM_SMB3_NorSprXXX_BoomBoom_DontSlideTowardsPlayerFlag,x
	BEQ.b CODE_28D959
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	CMP.w DATA_21C140,y
	BEQ.b CODE_28D949
	CLC
	ADC.w DATA_21C144,y
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	INC.w !RAM_SMB3_NorSprXXX_BoomBoom_AnimationFrameCounter,x
CODE_28D949:
	INC.w !RAM_SMB3_NorSprXXX_BoomBoom_WaitBeforeCrouchSliding,x
	LDA.w !RAM_SMB3_NorSprXXX_BoomBoom_WaitBeforeCrouchSliding,x
	BNE.b CODE_28D956
	LDA.b #$3F
	STA.w !RAM_SMB3_NorSprXXX_BoomBoom_CrouchDownTimer,x
CODE_28D956:
	JMP.w CODE_28D987

CODE_28D959:
	INC.w !RAM_SMB3_NorSprXXX_BoomBoom_WaitBeforeCrouchSliding,x
	LDA.w !RAM_SMB3_NorSprXXX_BoomBoom_WaitBeforeCrouchSliding,x
	BNE.b CODE_28D97A
	LDA.b #$3F
	STA.w !RAM_SMB3_NorSprXXX_BoomBoom_CrouchDownTimer,x
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	PHX
	TYX
	LDA.l DATA_28D978,x
	PLX
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	JSL.l CODE_28D89A
	RTS

DATA_28D978:
	db $20,$E0

CODE_28D97A:
	AND.b #$3F
	BNE.b CODE_28D987
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.w DATA_21C12A,y
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_28D987:
	LDA.w !RAM_SMB3_NorSprXXX_BoomBoom_AnimationFrameCounter,x
	AND.b #$03
	BNE.b CODE_28D99D
	INC.w !RAM_SMB3_NorSprXXX_BoomBoom_AnimationFrame,x
	LDA.w !RAM_SMB3_NorSprXXX_BoomBoom_AnimationFrame,x
	CMP.b #$06
	BCC.b CODE_28D99D
	LDA.b #$00
	STA.w !RAM_SMB3_NorSprXXX_BoomBoom_AnimationFrame,x
CODE_28D99D:
	JSL.l SMB3_HandleNormalSpriteGravity_Main
	LDA.b $A7,x
	AND.b #$04
	BEQ.b CODE_28D9AB
	JSL.l CODE_278B67
CODE_28D9AB:
	LDA.b $A7,x
	AND.b #$08
	BEQ.b CODE_28D9D5
	LDA.b #$01
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	CLC
	ADC.b #$08
	STA.w $1F7B
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	STA.w $1F7A
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	ADC.b #$0C
	STA.w $1F79
	LDA.b #$01
	STA.w $1F78
	LDA.w $1F76
	JSL.l CODE_279583
CODE_28D9D5:
	LDA.b $A7,x
	AND.b #$03
	BNE.b CODE_28D9ED
CODE_28D9DB:
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	BPL.b CODE_28D9E7
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenXPos,x
	CMP.b #$08
	BCS.b CODE_28D9F1
	BCC.b CODE_28D9ED							; Note: This will always branch

CODE_28D9E7:
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenXPos,x
	CMP.b #$E0
	BCC.b CODE_28D9F1
CODE_28D9ED:
	JSL.l CODE_279906
CODE_28D9F1:
	RTS

CODE_28D9F2:
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_NorSpr04C_FlyingBoomBoom
	BNE.b CODE_28D9FC
	JMP.w CODE_28DA87

CODE_28D9FC:
	LDA.w !RAM_SMB3_NorSprXXX_BoomBoom_WaitBeforeHighJump,x
	BEQ.b CODE_28DA2E
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$03
	BNE.b CODE_28DA13
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	BEQ.b CODE_28DA13
	BPL.b CODE_28DA11
	INC.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	INC.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_28DA11:
	DEC.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_28DA13:
	LDA.b #$0B
	STA.w !RAM_SMB3_NorSprXXX_BoomBoom_AnimationFrame,x
	DEC.w !RAM_SMB3_NorSprXXX_BoomBoom_WaitBeforeHighJump,x
	BNE.b CODE_28DA24
	LDA.b #$A0
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	JSR.w CODE_28DA77
CODE_28DA24:
	LDA.w !RAM_SMB3_NorSprXXX_BoomBoom_DontSlideTowardsPlayerFlag,x
	BEQ.b CODE_28DA2D
	JSL.l CODE_27A7F0
CODE_28DA2D:
	RTS

CODE_28DA2E:
	LDA.b $A7,x
	AND.b #$04
	BNE.b CODE_28DA38
	JSL.l CODE_27A7F0
CODE_28DA38:
	JSR.w CODE_28D987
	LDA.b $A7,x
	AND.b #$04
	BEQ.b CODE_28DA80
	LDA.w !RAM_SMB3_NorSprXXX_BoomBoom_DontSlideTowardsPlayerFlag,x
	BEQ.b CODE_28DA5D
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	CMP.w DATA_21C140,y
	BEQ.b CODE_28DA5A
	CLC
	ADC.w DATA_21C144,y
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	INC.w !RAM_SMB3_NorSprXXX_BoomBoom_AnimationFrameCounter,x
CODE_28DA5A:
	JMP.w CODE_28DA63

CODE_28DA5D:
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$3F
	BEQ.b CODE_28DA77
CODE_28DA63:
	LDA.b !RAM_SMB3_Global_FrameCounter
	CLC
	ADC.b #$1F
	ASL
	BNE.b CODE_28DA80
	LDA.b #$18
	LDY.w !RAM_SMB3_Global_CurrentWorld
	BNE.b CODE_28DA73
	ASL
CODE_28DA73:
	STA.w !RAM_SMB3_NorSprXXX_BoomBoom_WaitBeforeHighJump,x
	RTS

CODE_28DA77:
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.w DATA_21C12A,y
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_28DA80:
	RTS

DATA_28DA81:
	db $20,$E0

DATA_28DA83:
	db $01,$FF

DATA_28DA85:
	db $10,$F0

CODE_28DA87:
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	PHB
	LDA.b #DATA_28DA81>>16
	PHA
	PLB
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	CMP.w DATA_28DA81,y
	BEQ.b CODE_28DA9D
	CLC
	ADC.w DATA_28DA83,y
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_28DA9D:
	PLB
	JSR.w CODE_28D9DB
	LDA.w !RAM_SMB3_NorSprXXX_BoomBoom_CurrentFlyingState,x
	JSL.l SMB3_ExecutePtr_Absolute

DATA_28DAA8:
	dw CODE_28DAAC
	dw CODE_28DAED

CODE_28DAAC:
	JSL.l CODE_27A7F0
	JSL.l CODE_27A7E5
	LDY.b #$00
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	CMP.b #$10
	BCC.b CODE_28DABD
	INY
CODE_28DABD:
	PHB
	LDA.b #DATA_28DA85>>16
	PHA
	PLB
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	CMP.w DATA_28DA85,y
	BEQ.b CODE_28DACF
	CLC
	ADC.w DATA_28DA83,y
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_28DACF:
	PLB
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	CMP.b #$20
	BCS.b CODE_28DAE9
	INC.w !RAM_SMB3_NorSprXXX_BoomBoom_WaitBeforeSwooping,x
	LDA.w !RAM_SMB3_NorSprXXX_BoomBoom_WaitBeforeSwooping,x
	BNE.b CODE_28DAE9
	JSR.w CODE_28DB6A
	INC.w !RAM_SMB3_NorSprXXX_BoomBoom_CurrentFlyingState,x
	LDA.b #$18
	STA.w !RAM_SMB3_NorSprXXX_BoomBoom_DeathFlashingTimer,x
CODE_28DAE9:
	LDA.b #$03
	BNE.b CODE_28DB19
CODE_28DAED:
	LDA.w !RAM_SMB3_NorSprXXX_BoomBoom_DeathFlashingTimer,x
	BEQ.b CODE_28DAF8
	LDA.b #$0C
	STA.w !RAM_SMB3_NorSprXXX_BoomBoom_AnimationFrame,x
	RTS

CODE_28DAF8:
	JSL.l CODE_27A7F0
	JSL.l CODE_27A7E5
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	CMP.b #$50
	BCC.b CODE_28DB17
	LDA.b #$00
	STA.w !RAM_SMB3_NorSprXXX_BoomBoom_CurrentFlyingState,x
	LDA.w !RAM_SMB3_Global_RandomByte02,x
	AND.b #$03
	BNE.b CODE_28DB17
	LDA.b #$3F
	STA.w !RAM_SMB3_NorSprXXX_BoomBoom_CrouchDownTimer,x
CODE_28DB17:
	LDA.b #$01
CODE_28DB19:
	AND.b !RAM_SMB3_Global_FrameCounter
	BNE.b CODE_28DB2C
	INC.w !RAM_SMB3_NorSprXXX_BoomBoom_AnimationFrame,x
	LDA.w !RAM_SMB3_NorSprXXX_BoomBoom_AnimationFrame,x
	CMP.b #$12
	BCC.b CODE_28DB2C
	LDA.b #$0C
	STA.w !RAM_SMB3_NorSprXXX_BoomBoom_AnimationFrame,x
CODE_28DB2C:
	RTS

CODE_28DB2D:
	INC.w !RAM_SMB3_NorSprXXX_BoomBoom_AnimationFrameCounter,x
	JSR.w CODE_28D987
	LDA.b $A7,x
	AND.b #$04
	BEQ.b CODE_28DB69
	LDA.w !RAM_SMB3_NorSprXXX_BoomBoom_DontSlideTowardsPlayerFlag,x
	BEQ.b CODE_28DB53
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	CMP.w DATA_21C142,y
	BEQ.b CODE_28DB52
	CLC
	ADC.w DATA_21C146,y
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	INC.w !RAM_SMB3_NorSprXXX_BoomBoom_AnimationFrameCounter,x
CODE_28DB52:
	RTS

CODE_28DB53:
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$1F
	BNE.b CODE_28DB69
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.w !RAM_SMB3_Global_CurrentWorld
	BNE.b CODE_28DB64
	INY
	INY
CODE_28DB64:
	LDA.w DATA_21C12C,y
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_28DB69:
	RTS

CODE_28DB6A:
	LDA.b #$20
	JSR.w CODE_28EBD0
	LDA.b $00
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	LDA.b $01
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	RTS

CODE_28DB78:
	RTS

CODE_28DB79:
	LDA.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,x
	STA.w $1CEF
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	PHA
	LDA.w !RAM_SMB3_NorSprXXX_BoomBoom_WaitBeforeHighJump,x
	BEQ.b CODE_28DB8B
	INC.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	INC.b !RAM_SMB3_Level_NorSpr_YPosLo,x
CODE_28DB8B:
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	PHA
	CLC
	ADC.b #$08
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	PHA
	ADC.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	ASL.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,x
	JSL.l CODE_279EE2
	PLA
	STA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	PLA
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	PLA
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	JSL.l SMB3_GetNormalSpriteOnScreenPosition_Main
	LDA.w !RAM_SMB3_Level_NorSpr_YOffscreenFlag,x
	BNE.b CODE_28DB78
	REP.b #$10
	LDY.b $C6,x
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenYPos,x
	STA.b $00
	REP.b #$20
	LDA.w !RAM_SMB3_NorSprXXX_BoomBoom_AnimationFrame,x
	AND.w #$00FF
	TAX
	SEP.b #$20
	LDA.w $1CEF
	BMI.b CODE_28DBDA
	LDA.b $00
	CLC
	ADC.w DATA_21C174,x
	STA.w SMB3_OAMBuffer[$04].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$06].YDisp,y
CODE_28DBDA:
	LDA.w $1CEF
	AND.b #$10
	BNE.b CODE_28DBF0
	LDA.b $00
	CLC
	ADC.w DATA_21C18A,x
	STA.w SMB3_OAMBuffer[$05].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$07].YDisp,y
CODE_28DBF0:
	LDA.w DATA_21C148,x
	STA.w SMB3_OAMBuffer[$04].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$06].Tile,y
	LDA.w DATA_21C15E,x
	STA.w SMB3_OAMBuffer[$05].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$07].Tile,y
	LDA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$04].Prop,y
	STA.w SMB3_OAMBuffer[$06].Prop,y
	ORA.b #$40
	STA.w SMB3_OAMBuffer[$05].Prop,y
	STA.w SMB3_OAMBuffer[$07].Prop,y
	REP.b #$20
	LDA.b $9B
	AND.w #$00FF
	TAX
	SEP.b #$20
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenXPos,x
	STA.b $01
	STA.w SMB3_OAMBuffer[$04].XDisp,y
	STA.w SMB3_OAMBuffer[$06].XDisp,y
	CLC
	ADC.b #$18
	STA.w SMB3_OAMBuffer[$05].XDisp,y
	STA.w SMB3_OAMBuffer[$07].XDisp,y
	PHY
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b #$00
	STA.w SMB3_OAMTileSizeBuffer[$04].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$05].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$06].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$07].Slot,y
	PLY
	SEP.b #$10
	RTS

CODE_28DC4D:
	JSL.l CODE_279B6C
	LDA.w $0797,x
	BEQ.b CODE_28DC95
	LDA.w !RAM_SMB3_NorSprXXX_BoomBoom_AnimationFrame,x
	CMP.b #$07
	BNE.b CODE_28DC60
	JMP.w CODE_28EC8C

CODE_28DC60:
	LDA.b !RAM_SMB3_Level_Player_YSpeed
	BMI.b CODE_28DC95
	LDA.b #!Define_SMAS_Sound0060_Contact
	STA.w !RAM_SMB3_Global_SoundCh1
	LDA.b !RAM_SMB3_NorSprXXX_BoomBoom_CurrentState,x
	CLC
	ADC.b #$07
	JSL.l CODE_278A94
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$C0
else
	LDA.b #$D0
endif
	STA.b !RAM_SMB3_Level_Player_YSpeed
	LDA.b !RAM_SMB3_NorSprXXX_BoomBoom_CurrentState,x		;\ Note: Boom Boom's HP is used as an index for a pointer table, so giving him more HP would cause the game to crash.
	INC.b !RAM_SMB3_NorSprXXX_BoomBoom_CurrentState,x		;| If you want to give him more HP, you'll need to use another table to keep track of his HP.
	CMP.b #$04							;|
	BEQ.b CODE_28DC90						;/
	LDA.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	STA.w !RAM_SMB3_NorSprXXX_BoomBoom_WaitBeforeHighJump,x
	STA.w !RAM_SMB3_NorSprXXX_BoomBoom_AnimationFrameCounter,x
	LDA.b #$30
	STA.w !RAM_SMB3_NorSprXXX_BoomBoom_StunnedTimer,x
	RTS

CODE_28DC90:
	LDA.b #$80
	STA.w !RAM_SMB3_NorSprXXX_BoomBoom_DeathFlashingTimer,x
CODE_28DC95:
	RTS

CODE_28DC96:
	LDA.b #$08
	STA.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,x
	STA.w !RAM_SMB3_NorSprXXX_BoomBoom_AnimationFrame,x
	LDA.w !RAM_SMB3_NorSprXXX_BoomBoom_DeathFlashingTimer,x
	BNE.b CODE_28DCF4
CODE_28DCA3:
	STA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	LDA.b #!Define_SMB3_SpriteID_NorSpr04A_GoalSphere
	STA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	LDA.b #$04
	STA.w $1FE9,x
	LDA.b #$01
	STA.w !RAM_SMB3_Level_MExtSpr_SpriteID
	STA.w !RAM_SMB3_Level_FreezeTimeLimitFlag
	LDA.b #$1F
	STA.w !RAM_SMB3_Level_MExtSpr_Table7E1FAE
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	SEC
	SBC.w $0543
	STA.w !RAM_SMB3_Level_MExtSpr_YPosLo
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	CLC
	ADC.b #$08
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	PHP
	SEC
	SBC.w $0210
	STA.w !RAM_SMB3_Level_MExtSpr_XPosLo
	PLP
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	ADC.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	LDA.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	STA.b !RAM_SMB3_NorSpr04A_GoalSphere_HasBeenCollectedFlag,x
	STA.w !RAM_SMB3_NorSpr04A_GoalSphere_AnimationFrame,x
	LDA.b #$C8
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	LDA.b #!Define_SMAS_Sound0063_GrabMysteryMushroom
	STA.w !RAM_SMB3_Global_SoundCh3
	JSR.w CODE_28D551
	JMP.w CODE_28DCF8

CODE_28DCF4:
	STA.w !RAM_SMB3_NorSprXXX_BoomBoom_FlashingTimer,x
	RTS

CODE_28DCF8:
	LDY.b #$07
CODE_28DCFA:
	LDA.b #!Define_SMB3_SpriteID_ExtSpr0D_SmallStar
	STA.w !RAM_SMB3_Level_ExtSpr_SpriteID,y
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	CLC
	ADC.b #$04
	STA.w !RAM_SMB3_Level_ExtSpr_XPosLo,y
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	ADC.b #$00
	STA.w !RAM_SMB3_Level_ExtSpr_XPosHi,y
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	CLC
	ADC.b #$10
	STA.w !RAM_SMB3_Level_ExtSpr_YPosLo,y
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	ADC.b #$00
	STA.w !RAM_SMB3_Level_ExtSpr_YPosHi,y
	LDA.b #$00
	STA.w $06C7,x
	LDA.w DATA_21C1B0,y
	STA.w !RAM_SMB3_Level_ExtSpr_YSpeed,y
	TYA
	CLC
	ADC.b #$02
	AND.b #$07
	TAX
	LDA.w DATA_21C1B0,x
	STA.w !RAM_SMB3_Level_ExtSpr_XSpeed,y
	LDA.b #$3F
	STA.w $06D1,y
	LDX.b $9B
	DEY
	BPL.b CODE_28DCFA
	RTS
namespace off
	%SetDuplicateOrNullPointer(SMB3_NorSprXXX_BoomBoom_Status02_Main, SMB3_NorSpr04B_BoomBoom_Status02_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSprXXX_BoomBoom_Status02_Main, SMB3_NorSpr04C_FlyingBoomBoom_Status02_Main)
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr04F_FreeChainChomp_Status02(Address)
namespace SMB3_NorSpr04F_FreeChainChomp_Status02
%InsertMacroAtXPosition(<Address>)

Main:
	JSR.w CODE_28D145
	BEQ.b CODE_28E74B
	JSR.w CODE_28E91B
	RTL

CODE_28E74B:
	LDA.b $9C
	BEQ.b CODE_28E753
	JSR.w CODE_28E999
	RTL

CODE_28E753:
	JSR.w CODE_28E6F7
	LDA.b !RAM_SMB3_Global_FrameCounter
	LSR
	LSR
	LSR
	AND.b #$01
	STA.w $0669,x
	JSL.l CODE_278B93
	JSL.l CODE_279B6C
	LDA.b $9C
	BEQ.b CODE_28E770
	JSR.w CODE_28E999
	RTL

CODE_28E770:
	LDA.w $0518,x
	BNE.b CODE_28E7B2
	JSL.l CODE_27A7F0
	JSL.l CODE_27A7E5
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	BMI.b CODE_28E785
	CMP.b #$70
	BCS.b CODE_28E78C
CODE_28E785:
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	CLC
	ADC.b #$06
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_28E78C:
	LDA.b $A7,x
	AND.b #$04
	BEQ.b CODE_28E7B2
	LDA.b #$0C
	STA.w $0518,x
	JSL.l CODE_278B67
	LDA.w !RAM_SMB3_Global_RandomByte02,x
	AND.b #$01
	TAY
	LDA.w DATA_21C2EE,y
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	ASL
	ROL
	AND.b #$01
	TAY
	LDA.w DATA_21C2F0,y
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_28E7B2:
	JSL.l CODE_28E862
	RTL
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr052_MiniChest_Status01(Address)
namespace SMB3_NorSpr052_MiniChest_Status01
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.l !RAM_SMB3_Level_CurrentMiniChestPrize
	STA.b $68,x
	LDA.b #$1F
	STA.w $0518,x
	RTL
namespace off
endmacro

;--------------------------------------------------------------------

macro ROUTINE_SMB3_NorSpr052_MiniChest_Status02(Address)
namespace SMB3_NorSpr052_MiniChest_Status02
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.w $0518,x
	BEQ.b CODE_28D02F
	CMP.b #$18
	BNE.b CODE_28D02E
	LDA.b #!Define_SMAS_Sound0063_OpenBox1
	STA.w !RAM_SMB3_Global_SoundCh3
	JSR.w CODE_28D0B3
CODE_28D02E:
	RTL

CODE_28D02F:
	LDA.b $4D,x
	BNE.b CODE_28D065
	JSL.l SMB3_NorSpr04A_GoalSphere_Status02_CODE_28D72F
	JSL.l CODE_27A313
	BCC.b CODE_28D05B
	LDA.b #!Define_SMAS_Sound0063_RisingItem
	STA.w !RAM_SMB3_Global_SoundCh3
	LDA.b #$01
	STA.w $02D9
	STA.w !RAM_SMB3_Level_FreezeTimeLimitFlag
	INC.b $4D,x
	LDA.b #$D0
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	LDY.b $68,x
	LDA.w DATA_21ADBC,y
	STA.w $1FE9,x
	JSR.w CODE_28D0B3
CODE_28D05B:
	LDA.b #$00
	STA.w $0669,x
	JSL.l CODE_279EBC
	RTL

CODE_28D065:
	LDA.w $0520,x
	BEQ.b CODE_28D073
	CMP.b #$01
	BEQ.b CODE_28D087
	AND.b #$0C
	BNE.b CODE_28D09C
	RTL

CODE_28D073:
	JSL.l CODE_27A7E5
	INC.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	BMI.b CODE_28D09C
	LDA.b #$70
	STA.w $0520,x
	LDA.b #!Define_SMAS_Sound0060_GotItemTweet
	STA.w !RAM_SMB3_Global_SoundCh1
	BNE.b CODE_28D09C						; Note: This will always branch

CODE_28D087:
	LDA.l !RAM_SMB3_Level_CurrentMiniChestPrize
	JSL.l SMB3_AddNewItemToReserveInventory_Main
	LDX.b $9B
	LDA.b #$00
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	LDA.b #$60
	STA.w $1CF1
	RTL

CODE_28D09C:
	LDA.l !RAM_SMB3_Level_CurrentMiniChestPrize
	TAY
	STA.w $0669,x
	LDA.w DATA_21C0AB,y
	BPL.b CODE_28D0AE
	JSL.l CODE_279EDE
	RTL

CODE_28D0AE:
	JSL.l CODE_279EBC
	RTL

CODE_28D0B3:
	JSL.l SMB3_FindFreeExtendedSpriteSlot_FixedPriority
	LDA.b #!Define_SMB3_SpriteID_ExtSpr16_SmokePuff
	STA.w !RAM_SMB3_Level_ExtSpr_SpriteID,y
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	STA.w !RAM_SMB3_Level_ExtSpr_XPosLo,y
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	STA.w !RAM_SMB3_Level_ExtSpr_XPosHi,y
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	STA.w !RAM_SMB3_Level_ExtSpr_YPosLo,y
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	STA.w !RAM_SMB3_Level_ExtSpr_YPosHi,y
	LDA.b #$1F
	STA.w $06C7,y
	RTS
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr053_UpsideDownPodoboo_Status01(Address)
namespace SMB3_NorSpr053_UpsideDownPodoboo_Status01
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	STA.b !RAM_SMB3_NorSpr053_UpsideDownPodoboo_InitialYPosLo,x
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	STA.b !RAM_SMB3_NorSpr053_UpsideDownPodoboo_InitialYPosHi,x
	RTL
namespace off
endmacro

;--------------------------------------------------------------------

macro ROUTINE_SMB3_NorSpr053_UpsideDownPodoboo_Status02(Address)
namespace SMB3_NorSpr053_UpsideDownPodoboo_Status02
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.w !RAM_SMB3_NorSpr053_UpsideDownPodoboo_WaitBeforeNextJump,x
	BEQ.b CODE_28D0EF
	STA.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,x
	LSR
	BNE.b CODE_28D0EE
	LDA.b #$58
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_28D0EE:
	RTL

CODE_28D0EF:
	LDA.b $9C
	BNE.b CODE_28D140
	JSL.l CODE_279B70
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	EOR.b #$80
	AND.b #$80
	STA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$03
	BNE.b CODE_28D113
	INC.w !RAM_SMB3_NorSpr053_UpsideDownPodoboo_AnimationFrame,x
	LDY.w !RAM_SMB3_NorSpr053_UpsideDownPodoboo_AnimationFrame,x
	CPY.b #$03
	BNE.b CODE_28D113
	STA.w !RAM_SMB3_NorSpr053_UpsideDownPodoboo_AnimationFrame,x
CODE_28D113:
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	BPL.b CODE_28D12B
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	CMP.b !RAM_SMB3_NorSpr053_UpsideDownPodoboo_InitialYPosLo,x
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	SBC.b !RAM_SMB3_NorSpr053_UpsideDownPodoboo_InitialYPosHi,x
	BCS.b CODE_28D12B
	LDA.w !RAM_SMB3_Global_RandomByte02,x
	AND.b #$3F
	ORA.b #$40
	STA.w !RAM_SMB3_NorSpr053_UpsideDownPodoboo_WaitBeforeNextJump,x
CODE_28D12B:
	JSL.l CODE_27A7E5
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	BPL.b CODE_28D137
	CMP.b #$91
	BCC.b CODE_28D13C
CODE_28D137:
	SEC
	SBC.b #$02
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_28D13C:
	JSL.l CODE_279BC4
CODE_28D140:
	JSL.l CODE_279EDE
	RTL
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr054_DonutBlock_Status02(Address)
namespace SMB3_NorSpr054_DonutBlock_Status02
%InsertMacroAtXPosition(<Address>)

Main:
	JSL.l CODE_279BB8
	JSL.l SMB3_CheckIfNormalSpriteOffScreen_Main
	BNE.b CODE_28D406
	JSL.l CODE_279EBC
	LDA.b $9C
	BNE.b CODE_28D40B
	LDA.w !RAM_SMB3_NorSpr054_DonutBlock_IsFallingFlag,x
	BNE.b CODE_28D425
	JSL.l CODE_27A313
	LDA.w $0797,x
	BNE.b CODE_28D40C
	LDA.w $0564
	BNE.b CODE_28D40B
	JSR.w CODE_28D44F
CODE_28D406:
	LDA.b #$00
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
CODE_28D40B:
	RTL

CODE_28D40C:
	DEC.b !RAM_SMB3_NorSpr054_DonutBlock_ShakingTimer,x
	BNE.b CODE_28D414
	INC.w !RAM_SMB3_NorSpr054_DonutBlock_IsFallingFlag,x
	RTL

CODE_28D414:
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$07
	STA.w $06AB,x
	LDA.w $0797,x
	BEQ.b CODE_28D424
	JSL.l CODE_28D439
CODE_28D424:
	RTL

CODE_28D425:
	JSL.l CODE_27A7E5
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	CMP.b #$40
	BPL.b CODE_28D433
	INC.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	INC.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_28D433:
	JSL.l CODE_27A313
	BCC.b CODE_28D44E
CODE_28D439:
	LDA.b !RAM_SMB3_Level_Player_YSpeed
	BMI.b CODE_28D44E
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	SEC
	SBC.b #$1F
	STA.b !RAM_SMB3_Level_Player_YPosLo
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	SBC.b #$00
	STA.b !RAM_SMB3_Level_Player_YPosHi
	LDA.b #$00
	STA.b $A6
CODE_28D44E:
	RTL

CODE_28D44F:
	LDA.b #$0F
	STA.w $0564
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	CLC
	ADC.b #$01
	STA.w $052B
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	ADC.b #$00
	STA.w $052A
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	STA.w $0528
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	STA.w $0529
	RTS
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr0XX_SidewaysPiranhaPlant_Status01(Address)
namespace SMB3_NorSpr0XX_SidewaysPiranhaPlant_Status01
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.b #$10
	CLC
	ADC.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
Entry2:
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	CLC
	ADC.b #$01
	STA.b $68,x
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	CLC
	ADC.b #$07
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	RTL
namespace off
	%SetDuplicateOrNullPointer(SMB3_NorSpr0XX_SidewaysPiranhaPlant_Status01_Entry2, SMB3_NorSpr056_LeftFacingSidewaysPiranhaPlant_Status01_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSpr0XX_SidewaysPiranhaPlant_Status01_Main, SMB3_NorSpr057_RightFacingSidewaysPiranhaPlant_Status01_Main)
endmacro

;--------------------------------------------------------------------

macro ROUTINE_SMB3_NorSpr0XX_SidewaysPiranhaPlant_Status02(Address)
namespace SMB3_NorSpr0XX_SidewaysPiranhaPlant_Status02
%InsertMacroAtXPosition(<Address>)

Main:
	JSL.l CODE_279BC4
	JSR.w CODE_28DDBE
	JSL.l CODE_279B70
	LDA.b $9C
	BNE.b CODE_28DD79
	INC.w $1FD2,x
	LDA.w $1FD2,x
	LDY.b #$00
	AND.b #$08
	BEQ.b CODE_28DD72
	INY
CODE_28DD72:
	TYA
	STA.w $0669,x
	JSR.w CODE_28DD7A
CODE_28DD79:
	RTL

CODE_28DD7A:
	LDA.b $4D,x
	AND.b #$03
	JSL.l SMB3_ExecutePtr_Absolute

DATA_28DD82:
	dw CODE_28DDB6
	dw CODE_28DD8A
	dw CODE_28DDA9
	dw CODE_28DD97

CODE_28DD8A:
	LDA.b $68,x
	SEC
	SBC.b #$19
	CMP.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	BCS.b CODE_28DDAE
	LDA.b #$F0
	BNE.b CODE_28DDA2					; Note: This will always branch

CODE_28DD97:
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	CLC
	ADC.b #$01
	CMP.b $68,x
	BCS.b CODE_28DDAE
	LDA.b #$10
CODE_28DDA2:
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	JSL.l CODE_27A7F0
	RTS

CODE_28DDA9:
	LDA.w $0518,x
	BNE.b CODE_28DDBD
CODE_28DDAE:
	INC.b $4D,x
	LDA.b #$38
	STA.w $0518,x
	RTS

CODE_28DDB6:
	LDA.w $0518,x
	BNE.b CODE_28DDBD
	BEQ.b CODE_28DDAE					; Note: This will always branch

CODE_28DDBD:
	RTS

CODE_28DDBE:
	LDA.b #$10
	LDY.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CPY.b #!Define_SMB3_SpriteID_NorSpr056_LeftFacingSidewaysPiranhaPlant
	BEQ.b CODE_28DDC9
	LDA.b #$50
CODE_28DDC9:
	STA.w $0679,x
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	PHA
	LDA.w $0679,x
	AND.b #$40
	BEQ.b CODE_28DDE0
	ASL.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,x
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	CLC
	ADC.b #$08
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
CODE_28DDE0:
	JSL.l CODE_279EBC
	PLA
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	JSL.l SMB3_GetNormalSpriteOnScreenPosition_Main
	LDY.b #$00
	LDA.w $0679,x
	AND.b #$40
	BEQ.b CODE_28DDF5
	INY
CODE_28DDF5:
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenXPos,x
	CLC
	ADC.w DATA_21C1B8,y
	STA.b $01
	REP.b #$10
	LDY.b $C6,x
	LDA.b $01
	STA.w SMB3_OAMBuffer[$04].XDisp,y
	STA.w SMB3_OAMBuffer[$05].XDisp,y
	LDA.w !RAM_SMB3_Level_NorSpr_YOffscreenFlag,x
	STA.b $00
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenYPos,x
	LSR.b $00
	BCS.b CODE_28DE1D
	STA.w SMB3_OAMBuffer[$04].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$05].YDisp,y
CODE_28DE1D:
	LDA.w SMB3_OAMBuffer[$00].Prop,y
	AND.b #$FC
	ORA.b #$02
	STA.w SMB3_OAMBuffer[$04].Prop,y
	STA.w SMB3_OAMBuffer[$05].Prop,y
	LDA.b #$84
	STA.w SMB3_OAMBuffer[$04].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$05].Tile,y
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b #$00
	STA.w SMB3_OAMTileSizeBuffer[$04].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$05].Slot,y
	SEP.b #$10
	RTS
namespace off
	%SetDuplicateOrNullPointer(SMB3_NorSpr0XX_SidewaysPiranhaPlant_Status02_Main, SMB3_NorSpr056_LeftFacingSidewaysPiranhaPlant_Status02_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSpr0XX_SidewaysPiranhaPlant_Status02_Main, SMB3_NorSpr057_RightFacingSidewaysPiranhaPlant_Status02_Main)
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr059_FireSnake_Status02(Address)
namespace SMB3_NorSpr059_FireSnake_Status02
%InsertMacroAtXPosition(<Address>)

Main:
;$28EC9C
	LDA.w $0565
	LSR
	AND.b #$03
	TAY
	LDA.w DATA_21C329,y
	STA.w $0679,x
	LDA.w DATA_21C32D,y
	STA.w $0669,x
	JSL.l CODE_278B9B
	JSR.w CODE_28ED19
	LDA.b $9C
	BEQ.b CODE_28ECBE
CODE_28ECBA:
	JSR.w CODE_28E999
	RTL

CODE_28ECBE:
	LDA.w $0518,x
	BNE.b CODE_28ED11
	JSL.l CODE_27A7F0
	JSL.l CODE_27A7E5
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	BMI.b CODE_28ECD3
	CMP.b #$18
	BCS.b CODE_28ECD5
CODE_28ECD3:
	INC.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_28ECD5:
	LDA.b $A7,x
	AND.b #$04
	BEQ.b CODE_28ED11
	LDA.w $06A6,x
	BNE.b CODE_28ED11
	LDA.b #$15
	STA.w $0518,x
	JSL.l CODE_278B67
	LDA.w !RAM_SMB3_Global_RandomByte02,x
	AND.b #$01
	TAY
	LDA.w DATA_21C331,y
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_Y
	CPY.b #$00
	BNE.b CODE_28ED08
	LDA.w !RAM_SMB3_Global_RandomByte02,x
	AND.b #$07
	TAY
	LDA.w DATA_21C333,y
	STA.w $06A6,x
CODE_28ED08:
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.w DATA_21C327,y
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_28ED11:
	JSL.l CODE_28E862
	RTL
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr05C_ThrowBlock_Status02(Address)
namespace SMB3_NorSpr05C_ThrowBlock_Status02
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.b #$00
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	JSL.l SMB3_CheckIfNormalSpriteOffScreen_Main
	BNE.b CODE_28D010
	LDA.b #$03
	JSR.w CODE_28D2AC
CODE_28D010:
	RTL
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr05D_Whirlwind_Status01(Address)
namespace SMB3_NorSpr05D_Whirlwind_Status01
%InsertMacroAtXPosition(<Address>)

Main:
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.w DATA_21C1FB,y
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	LDA.b #$A5
	STA.b !RAM_SMB3_NorSpr05D_Whirlwind_DespawnTimer,x
	RTL
namespace off
endmacro

;--------------------------------------------------------------------

macro ROUTINE_SMB3_NorSpr05D_Whirlwind_Status02(Address)
namespace SMB3_NorSpr05D_Whirlwind_Status02
%InsertMacroAtXPosition(<Address>)

Main:
	JSL.l CODE_279BC4
	LDA.b $9C
	BNE.b CODE_28E379
	JSL.l CODE_27A7F0
CODE_28E379:
	LDY.b !RAM_SMB3_NorSpr05D_Whirlwind_DespawnTimer,x
	BNE.b CODE_28E382
	JSL.l CODE_279BD0
	RTL

CODE_28E382:
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$01
	BNE.b CODE_28E38A
	DEC.b !RAM_SMB3_NorSpr05D_Whirlwind_DespawnTimer,x
CODE_28E38A:
	CPY.b #$40
	BCS.b CODE_28E397
	LSR
	LSR
	LSR
	LSR
	CLC
	ADC.b #$03
	BRA.b CODE_28E3A3

CODE_28E397:
	LDA.b !RAM_SMB3_Global_FrameCounter
	LSR
	LSR
	LSR
	LSR
	AND.b #$07
	TAY
	LDA.w DATA_21C295,y
CODE_28E3A3:
	STA.b $68,x
	CLC
	ADC.b $94,x
	STA.b $94,x
	STA.b $0E
	LDA.b !RAM_SMB3_Global_FrameCounter
	LSR
	LSR
	LSR
	AND.b #$01
	TAY
	LDA.w DATA_21C28D,y
	STA.b $0C
	JSL.l SMB3_GetNormalSpriteOnScreenPosition_Main
	LDX.b #$07
CODE_28E3BF:
	STX.b $0F
	JSR.w CODE_28E466
	JSR.w CODE_28E4E2
	DEX
	BPL.b CODE_28E3BF
	LDX.b $9B
	LDA.w !RAM_SMB3_Level_Player_DeathState
	ORA.w $0583
	BNE.b CODE_28E408
	LDA.w !RAM_SMB3_NorSpr05D_Whirlwind_PlayerStuckInWhirlwindFlag,x
	BEQ.b CODE_28E409
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$1F
	ORA.b #$20
	STA.w !RAM_SMB3_Level_Player_SpinningTimer
	LDY.b #$00
	LDA.b !RAM_SMB3_Level_Player_YPosLo
	CMP.b #$30
	BCC.b CODE_28E3EB
	INY
CODE_28E3EB:
	LDA.w !RAM_SMB3_NorSpr05D_Whirlwind_PlayerYAcceleration,x
	CMP.w DATA_21C29D,y
	BEQ.b CODE_28E3FA
	CLC
	ADC.w DATA_21C29F,y
	STA.w !RAM_SMB3_NorSpr05D_Whirlwind_PlayerYAcceleration,x
CODE_28E3FA:
	STA.b !RAM_SMB3_Level_Player_YSpeed
	STZ.b $8B
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.w DATA_21C2A1,y
	STA.w !RAM_SMB3_Level_Player_SuctionXOffset
CODE_28E408:
	RTL

CODE_28E409:
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	TYA
	STA.w !RAM_SMB3_NorSpr05D_Whirlwind_SuctionDirection,x
	BEQ.b CODE_28E41B
	LDA.b $0F
	JSL.l SMB3_UnnecessaryInvertARt_Main
	STA.b $0F
CODE_28E41B:
	LDA.b $0F
	CMP.b #$10
	BCS.b CODE_28E437
	LDA.b !RAM_SMB3_Level_Player_YPosLo
	CMP.b #$70
	BCC.b CODE_28E437
	INC.w !RAM_SMB3_NorSpr05D_Whirlwind_PlayerStuckInWhirlwindFlag,x
	DEC.b !RAM_SMB3_Level_Player_YPosLo
	DEC.b !RAM_SMB3_Level_Player_YPosLo
	STA.b $A6
	LDA.b #$E0
	STA.b !RAM_SMB3_Level_Player_YSpeed
	STA.w !RAM_SMB3_NorSpr05D_Whirlwind_PlayerYAcceleration,x
CODE_28E437:
	LDA.b $0F
	LSR
	LSR
	LSR
	LSR
	LSR
	TAY
	STY.b $00
	LDA.w DATA_21C2A3,y
	LDY.w !RAM_SMB3_NorSpr05D_Whirlwind_SuctionDirection,x
	BNE.b CODE_28E44D
	JSL.l SMB3_UnnecessaryInvertARt_Main
CODE_28E44D:
	STA.w !RAM_SMB3_Level_Player_SuctionXOffset
	LDA.b $0F
	CMP.b #$10
	BCS.b CODE_28E465
	LDA.b !RAM_SMB3_Level_Player_YPosLo
	LSR
	LSR
	LSR
	LSR
	TAY
	LDA.b !RAM_SMB3_Level_Player_YSpeed
	CLC
	ADC.w DATA_21C2AB,y
	STA.b !RAM_SMB3_Level_Player_YSpeed
CODE_28E465:
	RTL

CODE_28E466:
	TXA
	ASL
	ASL
	ASL
	ASL
	STA.b $0D
	LDA.b $0E
	CLC
	ADC.w DATA_21C285,x
	STA.b $0E
	LDA.b $0E
	AND.b #$0F
	TAY
	LDA.b $0E
	AND.b #$10
	BEQ.b CODE_28E484
	TYA
	EOR.b #$FF
	TAY
CODE_28E484:
	LDA.b #$00
	CPY.b #$10
	BEQ.b CODE_28E493
	TYA
	AND.b #$0F
	ORA.b $0D
	TAY
	LDA.w DATA_21C1FD,y
CODE_28E493:
	STA.b $09
	LDA.b $0E
	AND.b #$0F
	TAY
	LDA.b $0E
	AND.b #$10
	BNE.b CODE_28E4A4
	TYA
	EOR.b #$FF
	TAY
CODE_28E4A4:
	LDA.b #$00
	CPY.b #$10
	BEQ.b CODE_28E4BE
	TYA
	AND.b #$0F
	ORA.b $0D
	TAY
	LDA.w DATA_21C1FD,y
	LSR
	LSR
	LDY.b $0C
	DEY
	BEQ.b CODE_28E4BE
	LSR
	DEY
	BEQ.b CODE_28E4BE
CODE_28E4BE:
	STA.b $08
	LDA.b $0E
	AND.b #$30
	BEQ.b CODE_28E4DD
	CMP.b #$10
	BEQ.b CODE_28E4D1
	CMP.b #$30
	BEQ.b CODE_28E4DE
	JSR.w CODE_28E4DE
CODE_28E4D1:
	LDY.b #$01
CODE_28E4D3:
	LDA.w $0008,y
	JSL.l SMB3_UnnecessaryInvertARt_Main
	STA.w $0008,y
CODE_28E4DD:
	RTS

CODE_28E4DE:
	LDY.b #$00
	BEQ.b CODE_28E4D3						; Note: This will always branch

CODE_28E4E2:
	LDY.b $9B
	LDA.w $0068,y
	BEQ.b CODE_28E4DD
	LSR
	AND.b #$07
	TAY
	TXA
	AND.w DATA_21C2CB,y
	STA.b $00
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.w DATA_21C2CB,y
	CMP.b $00
	BNE.b CODE_28E4DD
	CPX.b #$06
	BCC.b CODE_28E508
	JSL.l CODE_27A19E
	LDX.b $9B
	BPL.b CODE_28E51A
CODE_28E508:
	REP.b #$20
	TXA
	AND.w #$00FF
	ASL
	ASL
	ASL
	LDX.b $9B
	CLC
	ADC.b $C6,x
	STA.b $D8
	SEP.b #$20
CODE_28E51A:
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$0F
	CLC
	ADC.w !RAM_SMB3_Level_NorSpr_OnScreenYPos,x
	LDX.b $0F
	CLC
	ADC.w DATA_21C27D,x
	CLC
	ADC.b $08
	STA.b $00
	BCS.b CODE_28E596
	LDA.b !RAM_SMB3_Global_FrameCounter
	LSR
	LSR
	LSR
	AND.b #$07
	CLC
	ADC.b $0F
	TAX
	LDA.w DATA_21C2BB,x
	CLC
	LDX.b $9B
	ADC.w !RAM_SMB3_Level_NorSpr_OnScreenXPos,x
	CLC
	ADC.b $09
	STA.b $01
	JSR.w CODE_28E708
	BCS.b CODE_28E596
	REP.b #$10
	LDY.b $D8
	LDA.b $00
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$01].YDisp,y
	LDA.b $01
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	LDA.b #$C6
	STA.w SMB3_OAMBuffer[$00].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$01].Tile,y
	LDX.w #$0027
	LDA.b $0E
	AND.b #$3F
	CMP.b #$20
	BCC.b CODE_28E57B
	LDX.w #$0023
CODE_28E57B:
	TXA
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$01].Prop,y
	PHY
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b #$00
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	PLY
	SEP.b #$10
CODE_28E596:
	LDX.b $0F
	RTS
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSprXXX_Blooper_Status01(Address)
namespace SMB3_NorSprXXX_Blooper_Status01
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.b #$04
	STA.w !RAM_SMB3_NorSprXXX_Blooper_NumberOfTrailingMiniBloopers,x
	JSR.w CODE_28E7CE
	RTL
namespace off
	%SetDuplicateOrNullPointer(SMB3_NorSprXXX_Blooper_Status01_Main, SMB3_NorSpr061_FollowingBlooperNanny_Status01_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSprXXX_Blooper_Status01_Main, SMB3_NorSpr06A_LaunchingBlooperNanny_Status01_Main)
endmacro

;--------------------------------------------------------------------

macro ROUTINE_SMB3_NorSprXXX_Blooper_Status02(Address)
namespace SMB3_NorSprXXX_Blooper_Status02
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_NorSpr062_Blooper
	BNE.b CODE_28E5BC
	JSL.l CODE_279BC4
	LDA.b $9C
	BEQ.b CODE_28E5B6
	JSL.l CODE_279EDE
	RTL

CODE_28E5B6:
	JSL.l CODE_279B70
	BRA.b CODE_28E5C7

CODE_28E5BC:
	JSR.w CODE_28ED19
	LDA.b $9C
	BEQ.b CODE_28E5C7
	JSR.w CODE_28E999
	RTL

CODE_28E5C7:
	LDA.w !RAM_SMB3_NorSprXXX_Blooper_WaitBeforeShootingMiniBloopers,x
	BEQ.b CODE_28E5DE
	STA.w !RAM_SMB3_NorSprXXX_Blooper_FlashingTimer,x
	CMP.b #$01
	BNE.b CODE_28E5DB
	LDA.b #$00
	STA.w !RAM_SMB3_NorSprXXX_Blooper_NumberOfTrailingMiniBloopers,x
	JSR.w CODE_28E6AB
CODE_28E5DB:
	JMP.w CODE_28E6A2

CODE_28E5DE:
	LDA.b !RAM_SMB3_NorSprXXX_Blooper_CurrentMovementState,x
	AND.b #$01
	TAY
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	CLC
	ADC.w DATA_21C2D3,y
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	CMP.w DATA_21C2D5,y
	BNE.b CODE_28E5F2
	INC.b !RAM_SMB3_NorSprXXX_Blooper_CurrentMovementState,x
CODE_28E5F2:
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	LDY.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	BEQ.b CODE_28E5FD
	JSL.l SMB3_UnnecessaryInvertARt_Main
CODE_28E5FD:
	LDY.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	BMI.b CODE_28E61A
	TXA
	LSR
	BCC.b CODE_28E60E
	LDY.b #$00
	LDA.b $BD
	BNE.b CODE_28E60C
	INY
CODE_28E60C:
	BRA.b CODE_28E612

CODE_28E60E:
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
CODE_28E612:
	LDA.w DATA_21C2DC,y
	STA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	LDA.b #$00
CODE_28E61A:
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	JSL.l CODE_278B93
	LDA.b $A7,x
	AND.b #$03
	BNE.b CODE_28E62A
	JSL.l CODE_27A7F0
CODE_28E62A:
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	PHA
	CMP.b #$08
	BMI.b CODE_28E654
	LDA.b !RAM_SMB3_Level_Player_YPosLo
	PHA
	SBC.b #$17
	STA.b !RAM_SMB3_Level_Player_YPosLo
	LDA.b !RAM_SMB3_Level_Player_YPosHi
	PHA
	SBC.b #$00
	STA.b !RAM_SMB3_Level_Player_YPosHi
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_Y
	PLA
	STA.b !RAM_SMB3_Level_Player_YPosHi
	PLA
	STA.b !RAM_SMB3_Level_Player_YPosLo
	DEY
	BEQ.b CODE_28E650
	PLA
	LDA.b #$08
	PHA
CODE_28E650:
	LDA.b #$08
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_28E654:
	LDA.b $A7,x
	AND.b #$0C
	BNE.b CODE_28E667
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	BPL.b CODE_28E663
	LDA.w $06B7,x
	BEQ.b CODE_28E667
CODE_28E663:
	JSL.l CODE_27A7E5
CODE_28E667:
	PLA
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	JSL.l CODE_279BC4
	LDA.b #$01
	LDY.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	BPL.b CODE_28E675
	LSR
CODE_28E675:
	STA.w $0669,x
	JSL.l SMB3_CheckIfSpriteIsHorizontallyOffScreen_Main
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_NorSpr062_Blooper
	BEQ.b CODE_28E6A6
	CMP.b #!Define_SMB3_SpriteID_NorSpr06A_LaunchingBlooperNanny
	BNE.b CODE_28E6A2
	INC.w !RAM_SMB3_NorSprXXX_Blooper_SpawnNewMiniBlooperTimer,x
	LDA.w !RAM_SMB3_NorSprXXX_Blooper_SpawnNewMiniBlooperTimer,x
	AND.b #$3F
	BNE.b CODE_28E6A2
	LDA.w !RAM_SMB3_NorSprXXX_Blooper_NumberOfTrailingMiniBloopers,x
	CMP.b #$04
	BNE.b CODE_28E69F
	LDA.b #$40
	STA.w !RAM_SMB3_NorSprXXX_Blooper_WaitBeforeShootingMiniBloopers,x
	BNE.b CODE_28E6A2
CODE_28E69F:
	INC.w !RAM_SMB3_NorSprXXX_Blooper_NumberOfTrailingMiniBloopers,x
CODE_28E6A2:
	JSR.w CODE_28E91B
	RTL

CODE_28E6A6:
	JSL.l CODE_279EDE
	RTL

CODE_28E6AB:
	LDA.b #$03
	STA.b $00
CODE_28E6AF:
	JSL.l SMB3_FindFreeExtendedSpriteSlot_FixedPriority
	LDA.b #!Define_SMB3_SpriteID_ExtSpr14_MiniBlooper
	STA.w !RAM_SMB3_Level_ExtSpr_SpriteID,y
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	CLC
	ADC.b #$04
	STA.w !RAM_SMB3_Level_ExtSpr_XPosLo,y
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	ADC.b #$00
	STA.w !RAM_SMB3_Level_ExtSpr_XPosHi,y
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	STA.w !RAM_SMB3_Level_ExtSpr_YPosLo,y
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	STA.w !RAM_SMB3_Level_ExtSpr_YPosHi,y
	LDX.b $00
	LDA.w DATA_21C2DE,x
	STA.w !RAM_SMB3_Level_ExtSpr_YSpeed,y
	LDA.w DATA_21C2E2,x
	STA.w !RAM_SMB3_Level_ExtSpr_XSpeed,y
	LDA.w DATA_21C2E6,x
	STA.w !RAM_SMB3_ExtSpr14_MiniBlooper_VerticalMovementDirection,y
	LDA.w DATA_21C2EA,x
	STA.w !RAM_SMB3_ExtSpr14_MiniBlooper_HorizontalMovementDirection,y
	LDA.b #$FF
	STA.w !RAM_SMB3_ExtSpr14_MiniBlooper_DespawnTimer,y
	LDX.b $9B
	DEC.b $00
	BPL.b CODE_28E6AF
	RTS
namespace off
	%SetDuplicateOrNullPointer(SMB3_NorSprXXX_Blooper_Status02_Main, SMB3_NorSpr061_FollowingBlooperNanny_Status02_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSprXXX_Blooper_Status02_Main, SMB3_NorSpr062_Blooper_Status02_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSprXXX_Blooper_Status02_Main, SMB3_NorSpr06A_LaunchingBlooperNanny_Status02_Main)
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr063_BigBertha_Status01(Address)
namespace SMB3_NorSpr063_BigBertha_Status01
%InsertMacroAtXPosition(<Address>)

Main:
	INC.w $06B7,x
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	STA.w !RAM_SMB3_NorSpr063_BigBertha_InitialXPosLo,x
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	STA.w !RAM_SMB3_NorSpr063_BigBertha_InitialXPosHi,x
CODE_28E066:
	RTL
namespace off
endmacro

;--------------------------------------------------------------------

macro ROUTINE_SMB3_NorSpr063_BigBertha_Status02(Address)
namespace SMB3_NorSpr063_BigBertha_Status02
%InsertMacroAtXPosition(<Address>)

Main:
	JSR.w CODE_28D145
	BEQ.b CODE_28E070
	JSR.w CODE_28E111
	RTL

CODE_28E070:
	JSR.w CODE_28E6F7
	JSR.w CODE_28E111
	JSL.l CODE_279BC8
	LDA.b $9C
	BNE.b SMB3_NorSpr063_BigBertha_Status01_CODE_28E066
	INC.b !RAM_SMB3_NorSpr063_BigBertha_SwimmingAnimationCounter,x
	JSL.l CODE_279B70
	JSL.l CODE_27A7F0
	JSL.l CODE_27A7E5
	LDY.b #$02
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$40
	BEQ.b CODE_28E096
	LDY.b #$FE
CODE_28E096:
	STY.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	LDA.w !RAM_SMB3_NorSpr063_BigBertha_OpenMouthTimer,x
	BEQ.b CODE_28E0BC
	CMP.b #$01
	BNE.b CODE_28E0AA
	JSL.l SMB3_CheckIfNormalSpriteOffScreen_Main
	BNE.b CODE_28E0AF
	JSR.w CODE_28E221
CODE_28E0AA:
	LDA.b #$01
	STA.w $0669,x
CODE_28E0AF:
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	BEQ.b CODE_28E0BB
	BPL.b CODE_28E0B9
	INC.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	INC.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_28E0B9:
	DEC.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_28E0BB:
	RTL

CODE_28E0BC:
	LDA.b !RAM_SMB3_NorSpr063_BigBertha_SwimmingAnimationCounter,x
	LSR
	BCC.b CODE_28E110
	LDA.w !RAM_SMB3_NorSpr063_BigBertha_HorizontalMovementDirection,x
	AND.b #$01
	TAY
	LDA.w !RAM_SMB3_NorSpr063_BigBertha_InitialXPosLo,x
	CLC
	ADC.w DATA_21C1E7,y
	STA.b $01
	LDA.w !RAM_SMB3_NorSpr063_BigBertha_InitialXPosHi,x
	ADC.w DATA_21C1E9,y
	STA.b $00
	LDY.b #$00
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	CMP.b $01
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	SBC.b $00
	BCC.b CODE_28E0E5
	INY
CODE_28E0E5:
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	CMP.w DATA_21C1E3,y
	BEQ.b CODE_28E0F7
	CLC
	ADC.w DATA_21C1E1,y
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	BNE.b CODE_28E0F7
	INC.w !RAM_SMB3_NorSpr063_BigBertha_HorizontalMovementDirection,x
CODE_28E0F7:
	CMP.w DATA_21C1E5,y
	BNE.b CODE_28E110
	LDA.w !RAM_SMB3_NorSpr063_BigBertha_DelayOpeningMouthAgainTimer,x
	BNE.b CODE_28E110
	LDA.w !RAM_SMB3_Global_RandomByte02,x
	BPL.b CODE_28E110
	LDA.b #$26
	STA.w !RAM_SMB3_NorSpr063_BigBertha_OpenMouthTimer,x
	LDA.b #$80
	STA.w !RAM_SMB3_NorSpr063_BigBertha_DelayOpeningMouthAgainTimer,x
CODE_28E110:
	RTL

CODE_28E111:
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	PHA
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	PHA
	LDA.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,x
	STA.w $1CEF
	LDA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	ASL
	BEQ.b CODE_28E133
	ASL.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,x
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	CLC
	ADC.b #$08
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	ADC.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
CODE_28E133:
	JSL.l CODE_279F52
	PLA
	STA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	PLA
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	JSL.l SMB3_GetNormalSpriteOnScreenPosition_Main
	LDY.b #$00
	LDA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	ASL
	BEQ.b CODE_28E14A
	INY
CODE_28E14A:
	STY.b $D8
	STZ.b $D9
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenXPos,x
	CLC
	ADC.w DATA_21C1ED,y
	STA.b $01
	REP.b #$10
	LDY.b $C6,x
	LDA.b $01
	STA.w SMB3_OAMBuffer[$04].XDisp,y
	STA.w SMB3_OAMBuffer[$05].XDisp,y
	STA.w SMB3_OAMBuffer[$06].XDisp,y
	STA.w SMB3_OAMBuffer[$07].XDisp,y
	LDA.w !RAM_SMB3_Level_NorSpr_YOffscreenFlag,x
	STA.b $00
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenYPos,x
	LSR.b $00
	BCS.b CODE_28E17E
	PHA
	STA.w SMB3_OAMBuffer[$04].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$06].YDisp,y
	PLA
CODE_28E17E:
	LSR.b $00
	BCS.b CODE_28E18D
	ADC.b #$10
	STA.w SMB3_OAMBuffer[$05].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$07].YDisp,y
CODE_28E18D:
	LDA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$04].Prop,y
	STA.w SMB3_OAMBuffer[$05].Prop,y
	STA.w SMB3_OAMBuffer[$06].Prop,y
	STA.w SMB3_OAMBuffer[$07].Prop,y
	LDA.b #$92
	STA.w SMB3_OAMBuffer[$04].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$06].Tile,y
	LDA.b !RAM_SMB3_NorSpr063_BigBertha_SwimmingAnimationCounter,x
	LSR
	LSR
	LSR
	LDA.b #$8A
	BCS.b CODE_28E1B0
	LDA.b #$90
CODE_28E1B0:
	STA.w SMB3_OAMBuffer[$05].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$07].Tile,y
	LDA.w SMB3_OAMBuffer[$00].Prop,y
	AND.b #$80
	BEQ.b CODE_28E1DA
	LDA.w SMB3_OAMBuffer[$04].Tile,y
	PHA
	LDA.w SMB3_OAMBuffer[$06].Tile,y
	STA.w SMB3_OAMBuffer[$04].Tile,y
	PLA
	STA.w SMB3_OAMBuffer[$06].Tile,y
	LDA.w SMB3_OAMBuffer[$05].Tile,y
	PHA
	LDA.w SMB3_OAMBuffer[$07].Tile,y
	STA.w SMB3_OAMBuffer[$05].Tile,y
	PLA
	STA.w SMB3_OAMBuffer[$07].Tile,y
CODE_28E1DA:
	LDA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	BPL.b CODE_28E1FB
	LDA.w SMB3_OAMBuffer[$04].YDisp,y
	PHA
	LDA.w SMB3_OAMBuffer[$05].YDisp,y
	STA.w SMB3_OAMBuffer[$04].YDisp,y
	PLA
	STA.w SMB3_OAMBuffer[$05].YDisp,y
	LDA.w SMB3_OAMBuffer[$06].YDisp,y
	PHA
	LDA.w SMB3_OAMBuffer[$07].YDisp,y
	STA.w SMB3_OAMBuffer[$06].YDisp,y
	PLA
	STA.w SMB3_OAMBuffer[$07].YDisp,y
CODE_28E1FB:
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.w $1CEF
	LDX.b $D8
	BNE.b CODE_28E20C
	ROL
	ROL
CODE_28E20C:
	ROL
	ROL
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$04].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$05].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$06].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$07].Slot,y
	SEP.b #$10
	LDX.b $9B
	RTS

CODE_28E221:
	LDY.b #$04
CODE_28E223:
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,y
	BEQ.b CODE_28E22C
	DEY
	BPL.b CODE_28E223
	RTS

CODE_28E22C:
	TYA
	TAX
	JSL.l CODE_279C97
	LDX.b $9B
	LDA.b #$02
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,y
	LDA.b #!Define_SMB3_SpriteID_NorSpr048_MiniBossBass
	STA.w !RAM_SMB3_Level_NorSpr_SpriteID,y
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	ADC.b #$0E
	STA.w !RAM_SMB3_Level_NorSpr_YPosLo,y
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	ADC.b #$00
	STA.w !RAM_SMB3_Level_NorSpr_YPosHi,y
	LDA.b #$00
	STA.b $00
	LDA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	BEQ.b CODE_28E257
	INC.b $00
CODE_28E257:
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	LDX.b $00
	ADC.w DATA_21C1F1,x
	STA.w !RAM_SMB3_Level_NorSpr_XPosLo,y
	LDA.w DATA_21C1EF,x
	STA.w !RAM_SMB3_Level_NorSpr_XSpeed,y
	LDA.w DATA_21C1F3,x
	STA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,y
	LDX.b $9B
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	ADC.b #$00
	STA.w !RAM_SMB3_Level_NorSpr_XPosHi,y
	LDA.b #$01
	STA.w $1FE9,y
	STA.w $06B7,y
	TXA
	STA.w !RAM_SMB3_NorSpr048_MiniBossBass_SpriteSlotOfParent,y
	LDA.b #$30
	STA.w !RAM_SMB3_NorSpr048_MiniBossBass_SwimTimer,y
	RTS
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr064_WaterHoppingRedCheepCheep_Status01(Address)
namespace SMB3_NorSpr064_WaterHoppingRedCheepCheep_Status01
%InsertMacroAtXPosition(<Address>)

Main:
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.w DATA_21C1F9,y
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	RTL
namespace off
endmacro

;--------------------------------------------------------------------

macro ROUTINE_SMB3_NorSpr064_WaterHoppingRedCheepCheep_Status02(Address)
namespace SMB3_NorSpr064_WaterHoppingRedCheepCheep_Status02
%InsertMacroAtXPosition(<Address>)

Main:
	JSL.l CODE_279BC4
	JSR.w CODE_28E6F7
	JSL.l CODE_279EBC
	LDA.b $9C
	BNE.b CODE_28E35E
	JSL.l SMB3_HandleNormalSpriteGravity_Main
	JSL.l CODE_279B70
	LDA.w $06B7,x
	BEQ.b CODE_28E355
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDY.b #$D0
	LDA.b $0F
	CLC
	ADC.b #$40
	CMP.b #$80
	BCS.b CODE_28E353
	LDY.b #$A0
CODE_28E353:
	STY.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_28E355:
	LDA.b !RAM_SMB3_Global_FrameCounter
	LSR
	LSR
	AND.b #$01
	STA.w $0669,x
CODE_28E35E:
	RTL
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr0XX_AirCurrent_Status02(Address)
namespace SMB3_NorSpr0XX_AirCurrent_Status02
%InsertMacroAtXPosition(<Address>)

Main:
	JSL.l CODE_279BC4
	JSL.l SMB3_CheckIfNormalSpriteOffScreen_Main
	ORA.b $9C
	BNE.b CODE_28DFFC
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.b $0F
	CLC
	ADC.b #$08
	CMP.b #$20
	BCS.b CODE_28DFF1
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_Y
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_NorSpr066_DownwardsAirCurrent
	BEQ.b CODE_28DFBD
	LDA.b $0F
	JSL.l SMB3_UnnecessaryInvertARt_Main
	STA.b $0F
	DEY
CODE_28DFBD:
	CPY.b #$00
	BNE.b CODE_28DFF1
	LDA.b $0F
	LSR
	LSR
	LSR
	LSR
	LSR
	TAY
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_NorSpr066_DownwardsAirCurrent
	BNE.b CODE_28DFDC
	LDA.b !RAM_SMB3_Level_Player_YSpeed
	CMP.b #$3B
	BPL.b CODE_28DFF1
	CLC
	ADC.w DATA_21C1D8,y
	BRA.b CODE_28DFEB

CODE_28DFDC:
	LDA.w !RAM_SMB3_Level_Player_HitCeilingFlag
	BNE.b CODE_28DFF1
	LDA.b !RAM_SMB3_Level_Player_YSpeed
	CMP.b #$C4
	BMI.b CODE_28DFF1
	CLC
	ADC.w DATA_21C1CF,y
CODE_28DFEB:
	STA.b !RAM_SMB3_Level_Player_YSpeed
	LDA.b #$01
	STA.b $A6
CODE_28DFF1:
	INC.b $68,x
	LDA.b $68,x
	AND.b #$0F
	BNE.b CODE_28DFFC
	JSR.w CODE_28DFFD
CODE_28DFFC:
	RTL

CODE_28DFFD:
	LDY.b #$01
	JSL.l SMB3_FindFreeExtendedSpriteSlot_VariablePriority
	TYA
	BMI.b CODE_28E046
	LDA.b #$28
	STA.w $06D1,y
	LDA.b #!Define_SMB3_SpriteID_ExtSpr0E_Bubble
	STA.w !RAM_SMB3_Level_ExtSpr_SpriteID,y
	LDA.b #$00
	STA.w $06C7,y
	STY.b $00
	TYA
	ADC.w !RAM_SMB3_Global_RandomByte02,y
	AND.b #$17
	CLC
	ADC.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	LDY.b $00
	STA.w !RAM_SMB3_Level_ExtSpr_XPosLo,y
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	ADC.b #$00
	STA.w !RAM_SMB3_Level_ExtSpr_XPosHi,y
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_NorSpr066_DownwardsAirCurrent
	BEQ.b CODE_28E047
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	SBC.b #$08
	STA.w !RAM_SMB3_Level_ExtSpr_YPosLo,y
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	SBC.b #$00
	STA.w !RAM_SMB3_Level_ExtSpr_YPosHi,y
	LDA.b #$80
	STA.w !RAM_SMB3_Level_ExtSpr_YSpeed,y
CODE_28E046:
	RTS

CODE_28E047:
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	ADC.b #$03
	STA.w !RAM_SMB3_Level_ExtSpr_YPosLo,y
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	STA.w !RAM_SMB3_Level_ExtSpr_YPosHi,y
	LDA.b #$7F
	STA.w !RAM_SMB3_Level_ExtSpr_YSpeed,y
	RTS
namespace off
	%SetDuplicateOrNullPointer(SMB3_NorSpr0XX_AirCurrent_Status02_Main, SMB3_NorSpr065_UpwardsAirCurrent_Status02_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSpr0XX_AirCurrent_Status02_Main, SMB3_NorSpr066_DownwardsAirCurrent_Status02_Main)
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr067_LavaLotus_Status01(Address)
namespace SMB3_NorSpr067_LavaLotus_Status01
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.b #$FF
	STA.b !RAM_SMB3_NorSpr067_LavaLotus_FireballSpawnTimer,x
	LDA.b #$05
	STA.b !RAM_SMB3_NorSpr067_LavaLotus_FireballIndex,x
	INC.w $06B7,x
	RTL
namespace off
endmacro

;--------------------------------------------------------------------

macro ROUTINE_SMB3_NorSpr067_LavaLotus_Status02(Address)
namespace SMB3_NorSpr067_LavaLotus_Status02
%InsertMacroAtXPosition(<Address>)

Main:
	JSR.w CODE_28D145
	BNE.b CODE_28DE97
	JSL.l CODE_279BC4
	LDA.b $9C
	BNE.b CODE_28DE97
	JSL.l CODE_279B70
	LDA.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,x
	AND.b #$E0
	CMP.b #$E0
	BNE.b CODE_28DE68
	LDA.b #$FF
	STA.b !RAM_SMB3_NorSpr067_LavaLotus_FireballSpawnTimer,x
	LDA.b #$05
	STA.b !RAM_SMB3_NorSpr067_LavaLotus_FireballIndex,x
CODE_28DE68:
	DEC.b !RAM_SMB3_NorSpr067_LavaLotus_FireballSpawnTimer,x
	LDA.b !RAM_SMB3_NorSpr067_LavaLotus_FireballSpawnTimer,x
	CMP.b #$50
	BCC.b CODE_28DE8E
	LDY.b #$00
	AND.b #$0C
	BEQ.b CODE_28DE77
	INY
CODE_28DE77:
	TYA
	STA.w !RAM_SMB3_NorSpr067_LavaLotus_AnimationFrame,x
	LDA.w $0565
	AND.b #$1F
	BNE.b CODE_28DE8B
	LDA.b !RAM_SMB3_NorSpr067_LavaLotus_FireballIndex,x
	BEQ.b CODE_28DE8B
	DEC.b !RAM_SMB3_NorSpr067_LavaLotus_FireballIndex,x
	JSR.w CODE_28DF2A
CODE_28DE8B:
	JMP.w CODE_28DE97

CODE_28DE8E:
	LDA.b #$05
	STA.b !RAM_SMB3_NorSpr067_LavaLotus_FireballIndex,x
	LDA.b #$02
	STA.w !RAM_SMB3_NorSpr067_LavaLotus_AnimationFrame,x
CODE_28DE97:
	LDA.b #$00
	STA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	JSL.l CODE_279F52
	LDA.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,x
	AND.b #$20
	STA.b $D8
	REP.b #$10
	LDY.b $C6,x
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenXPos,x
	CLC
	ADC.b #$10
	STA.w SMB3_OAMBuffer[$04].XDisp,y
	STA.w SMB3_OAMBuffer[$05].XDisp,y
	STA.w SMB3_OAMBuffer[$06].XDisp,y
	STA.w SMB3_OAMBuffer[$07].XDisp,y
	LDA.w !RAM_SMB3_Level_NorSpr_YOffscreenFlag,x
	STA.b $00
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenYPos,x
	LSR.b $00
	BCS.b CODE_28DED0
	STA.w SMB3_OAMBuffer[$04].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$06].YDisp,y
CODE_28DED0:
	LSR.b $00
	BCS.b CODE_28DEE0
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$05].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$07].YDisp,y
CODE_28DEE0:
	LDA.w SMB3_OAMBuffer[$00].Prop,y
	ORA.b #$60
	STA.w SMB3_OAMBuffer[$04].Prop,y
	STA.w SMB3_OAMBuffer[$05].Prop,y
	STA.w SMB3_OAMBuffer[$06].Prop,y
	STA.w SMB3_OAMBuffer[$07].Prop,y
	LDA.w !RAM_SMB3_NorSpr067_LavaLotus_AnimationFrame,x
	TAX
	LDA.w DATA_21C1BA,x
	STA.w SMB3_OAMBuffer[$04].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$06].Tile,y
	LDA.w DATA_21C1BD,x
	STA.w SMB3_OAMBuffer[$05].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$07].Tile,y
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b $D8
	ROL
	ROL
	ROL
	ROL
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$04].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$05].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$06].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$07].Slot,y
	SEP.b #$10
	LDX.b $9B
	RTL

CODE_28DF2A:
	JSL.l SMB3_CheckIfNormalSpriteOffScreen_Main
	BNE.b CODE_28DF3A
	LDY.b #$07
CODE_28DF32:
	LDA.w !RAM_SMB3_Level_ExtSpr_SpriteID,y
	BEQ.b CODE_28DF3B
	DEY
	BPL.b CODE_28DF32
CODE_28DF3A:
	RTS

CODE_28DF3B:
	LDA.b #!Define_SMB3_SpriteID_ExtSpr0F_LavaLotusFire
	STA.w !RAM_SMB3_Level_ExtSpr_SpriteID,y
	LDA.b #$C0
	STA.w $0597,y
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	CLC
	ADC.b #$07
	STA.w !RAM_SMB3_Level_ExtSpr_YPosLo,y
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	ADC.b #$00
	STA.w !RAM_SMB3_Level_ExtSpr_YPosHi,y
	LDA.b !RAM_SMB3_NorSpr067_LavaLotus_FireballIndex,x
	STA.b $00
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	PHA
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	CLC
	LDX.b $00
	ADC.w DATA_21C1C0,x
	STA.w !RAM_SMB3_Level_ExtSpr_XPosLo,y
	PLA
	ADC.b #$00
	STA.w !RAM_SMB3_Level_ExtSpr_XPosHi,y
	LDA.w DATA_21C1CA,x
	STA.w !RAM_SMB3_Level_ExtSpr_YSpeed,y
	LDA.w DATA_21C1C5,x
	STA.w !RAM_SMB3_Level_ExtSpr_XSpeed,y
	LDA.b #$01
	STA.w $06C7,y
	LDX.b $9B
	TXA
	STA.w $06BD,y
	RTS
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr06B_JumpingFakeBrick_Status02(Address)
namespace SMB3_NorSpr06B_JumpingFakeBrick_Status02
%InsertMacroAtXPosition(<Address>)

Main:
	JSR.w CODE_28D145
	BEQ.b CODE_28D154
	JSR.w CODE_28D2AA
	RTL

CODE_28D154:
	JSL.l CODE_279BC4
	LDA.b $9C
	BEQ.b CODE_28D15F
	BRL.w CODE_28D1EB

CODE_28D15F:
	LDA.b !RAM_SMB3_NorSpr06B_JumpingFakeBrick_JumpingAnimationTimer,x
	BEQ.b CODE_28D17B
	DEC.b !RAM_SMB3_NorSpr06B_JumpingFakeBrick_JumpingAnimationTimer,x
	BNE.b CODE_28D191
	LDA.b #$A0
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	LDA.b #$70
	STA.w !RAM_SMB3_NorSpr06B_JumpingFakeBrick_WaitBeforeJumpingAgainTimer,x
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.w DATA_21C0B9,y
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	BRA.b CODE_28D191

CODE_28D17B:
	LDA.w !RAM_SMB3_NorSpr06B_JumpingFakeBrick_WaitBeforeJumpingAgainTimer,x
	BNE.b CODE_28D191
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.b $0F
	CLC
	ADC.b #$30
	CMP.b #$60
	BCS.b CODE_28D191
	LDA.b #$28
	STA.b !RAM_SMB3_NorSpr06B_JumpingFakeBrick_JumpingAnimationTimer,x
CODE_28D191:
	JSL.l CODE_27A7F0
	JSL.l CODE_27A7E5
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	BMI.b CODE_28D1A3
	CMP.b #$70
	BCS.b CODE_28D1B6
	BCC.b CODE_28D1A7							; Note: This will always branch.

CODE_28D1A3:
	JSL.l SMB3_UnnecessaryInvertARt_Main
CODE_28D1A7:
	LSR
	LSR
	LDY.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	BPL.b CODE_28D1AF
	LSR
	LSR
CODE_28D1AF:
	CLC
	ADC.b #$01
	ADC.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_28D1B6:
	JSL.l CODE_278B93
	JSL.l CODE_279B6C
	LDA.b $A7,x
	AND.b #$08
	BEQ.b CODE_28D1C8
	LDA.b #$01
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_28D1C8:
	LDA.b $A7,x
	AND.b #$04
	BEQ.b CODE_28D1E1
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	CMP.b #$20
	BCC.b CODE_28D1D9
	LDA.b #!Define_SMAS_Sound0063_BulletShoot
	STA.w !RAM_SMB3_Global_SoundCh3
CODE_28D1D9:
	JSL.l CODE_278B67
	LDA.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_28D1E1:
	LDA.b $A7,x
	AND.b #$03
	BEQ.b CODE_28D1EB
	JSL.l CODE_279906
CODE_28D1EB:
	LDA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	AND.b #$BF
	STA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	JSL.l SMB3_CheckIfSpriteIsHorizontallyOffScreen_Main
	JSL.l CODE_279EDE
	REP.b #$10
	LDY.b $C6,x
	STY.b $D8
	LDA.w SMB3_OAMBuffer[$00].YDisp,y
	SEC
	SBC.b #$01
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	LDA.w SMB3_OAMBuffer[$01].YDisp,y
	SBC.b #$01
	STA.w SMB3_OAMBuffer[$01].YDisp,y
	LDA.w SMB3_OAMBuffer[$02].YDisp,y
	SEC
	SBC.b #$01
	STA.w SMB3_OAMBuffer[$02].YDisp,y
	LDA.w SMB3_OAMBuffer[$03].YDisp,y
	SBC.b #$01
	STA.w SMB3_OAMBuffer[$03].YDisp,y
	LDA.w SMB3_OAMBuffer[$01].Prop,y
	AND.b #$3F
	STA.w SMB3_OAMBuffer[$01].Prop,y
	STA.w SMB3_OAMBuffer[$03].Prop,y
	SEP.b #$10
	JSL.l SMB3_CheckIfNormalSpriteOffScreen_Main
	BNE.b CODE_28D2A9
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	ASL
	LDA.b #$02
	BCS.b CODE_28D244
	LDA.b !RAM_SMB3_NorSpr06B_JumpingFakeBrick_JumpingAnimationTimer,x
	BEQ.b CODE_28D2A9
	LSR
	LSR
	LSR
CODE_28D244:
	TAX
	REP.b #$10
	LDY.b $D8
	LDA.w SMB3_OAMBuffer[$00].YDisp,y
	SEC
	SBC.w DATA_21C0BB,x
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$02].YDisp,y
	LDA.w SMB3_OAMBuffer[$01].YDisp,y
	SEC
	SBC.w DATA_21C0BB,x
	STA.w SMB3_OAMBuffer[$01].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$03].YDisp,y
	REP.b #$20
	LDA.b $9B
	AND.w #$00FF
	TAX
	SEP.b #$20
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenYPos,x
	CLC
	ADC.b #$07
	STA.w SMB3_OAMBuffer[$04].YDisp,y
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenXPos,x
	CLC
	ADC.b #$04
	STA.w SMB3_OAMBuffer[$04].XDisp,y
	LDA.w $0565
	LSR
	LSR
	LSR
	LSR
	LDA.b #$00
	BCC.b CODE_28D290
	LDA.b #$40
CODE_28D290:
	ORA.b #$22
	STA.w SMB3_OAMBuffer[$04].Prop,y
	LDA.b #$FF
	STA.w SMB3_OAMBuffer[$04].Tile,y
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b #$00
	STA.w SMB3_OAMTileSizeBuffer[$04].Slot,y
	SEP.b #$10
CODE_28D2A9:
	RTL
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr075_BossProjectile_Status01(Address)
namespace SMB3_NorSpr075_BossProjectile_Status01
%InsertMacroAtXPosition(<Address>)

Main:
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.w DATA_21C3EF,y
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	LDA.b #$02
	STA.b $68,x
	STA.b $4D,x
	LDA.b #!Define_SMAS_Sound0063_FireSpit
	STA.w !RAM_SMB3_Global_SoundCh3
	RTL
namespace off
endmacro

;--------------------------------------------------------------------

macro ROUTINE_SMB3_NorSpr075_BossProjectile_Status02(Address)
namespace SMB3_NorSpr075_BossProjectile_Status02
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.b $68,x
	CMP.b #$02
	BEQ.b CODE_22B01F
	JSR.w CODE_22B0D2
	RTL

CODE_22B01F:
	LDA.w $0518,x
	CMP.b #$01
	BNE.b CODE_22B029
	JSR.w CODE_22B0AF
CODE_22B029:
	TXA
	AND.b #$03
	ASL
	TAY
	REP.b #$20
	LDA.w DATA_21C3F9,y
	STA.b $C6,x
	SEP.b #$20
	JSL.l CODE_279BC4
	JSL.l CODE_279EBC
	JSL.l CODE_29FE8F
	LDA.b $9C
	BNE.b CODE_22B0AE
	JSR.w CODE_22D34B
	JSL.l CODE_279B6C
	LDA.w $0797,x
	BEQ.b CODE_22B057
	JSL.l CODE_27A4C7
CODE_22B057:
	LDA.b !RAM_SMB3_Global_FrameCounter
	LSR
	AND.b #$01
	CLC
	ADC.b #$05
	STA.w $0669,x
	JSL.l CODE_27A7F0
	JSL.l CODE_27A7E5
	LDA.b $4D,x
	BNE.b CODE_22B09F
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	PHA
	CLC
	ADC.w $077B,x
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	JSL.l CODE_278B93
	PLA
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	LDA.b $A7,x
	AND.b #$04
	BEQ.b CODE_22B0AE
	LDA.w $077B,x
	AND.b #$0F
	STA.w $06B3
	JSL.l CODE_278B67
	INC.b $4D,x
	LDY.b #$F0
	LDA.w $0679,x
	AND.b #$40
	BEQ.b CODE_22B09D
	LDY.b #$10
CODE_22B09D:
	BRA.b CODE_22B0AE

CODE_22B09F:
	LDA.b #$07
	STA.w $0669,x
	ASL.w $0679,x
	LDA.b !RAM_SMB3_Global_FrameCounter
	LSR
	LSR
	ROR.w $0679,x
CODE_22B0AE:
	RTL

CODE_22B0AF:
	JSL.l SMB3_FindFreeExtendedSpriteSlot_FixedPriority
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	STA.w !RAM_SMB3_Level_ExtSpr_YPosLo,y
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	STA.w !RAM_SMB3_Level_ExtSpr_YPosHi,y
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	STA.w !RAM_SMB3_Level_ExtSpr_XPosLo,y
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	STA.w !RAM_SMB3_Level_ExtSpr_XPosHi,y
	LDA.b #!Define_SMB3_SpriteID_ExtSpr16_SmokePuff
	STA.w !RAM_SMB3_Level_ExtSpr_SpriteID,y
	LDA.b #$17
	STA.w $06C7,y
CODE_22B0D1:
	RTS

CODE_22B0D2:
	JSL.l CODE_279BC4
	JSR.w CODE_22B1BF
	LDA.b $9C
	ORA.w $0769,x
	BNE.b CODE_22B0D1
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$03
	BEQ.b CODE_22B0E9
	INC.w $1FD2,x
CODE_22B0E9:
	JSL.l CODE_279B6C
	LDA.w $0797,x
	BEQ.b CODE_22B122
	LDA.b $68,x
	BNE.b CODE_22B11E
	LDA.w $0769,x
	BNE.b CODE_22B11E
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	BNE.b CODE_22B108
	LDA.b #$08
	LDY.w !RAM_SMB3_Global_RandomByte02,x
	BPL.b CODE_22B108
	LDA.b #$F8
CODE_22B108:
	STA.b $4D,x
	STZ.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	STZ.b !RAM_SMB3_Level_NorSpr_YSpeed,x
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$C0
else
	LDA.b #$D0
endif
	STA.b !RAM_SMB3_Level_Player_YSpeed
	LDA.b #!Define_SMAS_Sound0060_Contact
	STA.w !RAM_SMB3_Global_SoundCh1
	LDA.b #$0C
	STA.w $0769,x
	BRA.b CODE_22B122

CODE_22B11E:
	JSL.l CODE_27A4C7
CODE_22B122:
	LDA.b $68,x
	BNE.b CODE_22B176
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	PHP
	LDA.w $1FD2,x
	LSR
	LSR
	AND.b #$03
	PLP
	BPL.b CODE_22B135
	EOR.b #$03
CODE_22B135:
	TAY
	LDA.w DATA_21C3F5,y
	STA.w $0679,x
	JSL.l CODE_27A7F0
	JSL.l CODE_27A7E5
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	CMP.b #$20
	BPL.b CODE_22B14C
	INC.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_22B14C:
	JSL.l CODE_278B93
	LDA.b $A7,x
	AND.b #$08
	BEQ.b CODE_22B159
	JSR.w CODE_22B1B6
CODE_22B159:
	LDA.b $A7,x
	AND.b #$04
	BEQ.b CODE_22B172
	LDA.w !RAM_SMB3_Global_RandomByte02,x
	AND.b #$03
	TAY
	LDA.w DATA_21C3F1,y
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	LDA.b $4D,x
	BEQ.b CODE_22B172
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	STZ.b $4D,x
CODE_22B172:
	JSR.w CODE_22B19B
	RTS

CODE_22B176:
	JSL.l CODE_27A7F0
	JSL.l CODE_27A7E5
	JSL.l CODE_278B93
	LDY.b !RAM_SMB3_Level_NorSpr_OnScreenYPos,x
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	BPL.b CODE_22B18E
	CPY.b #$08
	BCC.b CODE_22B198
	BCS.b CODE_22B192					; Note: This will always branch

CODE_22B18E:
	CPY.b #$F0
	BCS.b CODE_22B198
CODE_22B192:
	LDA.b $A7,x
	AND.b #$0C
	BEQ.b CODE_22B19B
CODE_22B198:
	JSR.w CODE_22B1B6
CODE_22B19B:
	LDA.b $A7,x
	AND.b #$03
	BNE.b CODE_22B1B1
	LDY.b !RAM_SMB3_Level_NorSpr_OnScreenXPos,x
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	BPL.b CODE_22B1AD
	CPY.b #$08
	BCC.b CODE_22B1B1
	BCS.b CODE_22B1B5					; Note: This will always branch

CODE_22B1AD:
	CPY.b #$F0
	BCC.b CODE_22B1B5
CODE_22B1B1:
	JSL.l CODE_279906
CODE_22B1B5:
	RTS

CODE_22B1B6:
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	JSL.l SMB3_UnnecessaryInvertARt_Main
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	RTS

CODE_22B1BF:
	LDA.b $68,x
	BNE.b CODE_22B1C8
	JSL.l CODE_279EBC
	RTS

CODE_22B1C8:
	LDA.w $1FD2,x
	LSR
	LSR
	AND.b #$03
	TAY
	LDA.w DATA_21C401,y
	STA.w $0669,x
	JSL.l CODE_279EDE
	RTS
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr076_FlyingRedCheepCheep_Status02(Address)
namespace SMB3_NorSpr076_FlyingRedCheepCheep_Status02
%InsertMacroAtXPosition(<Address>)

Main:
	JSL.l CODE_279BB8
	LDA.b $9C
	BNE.b CODE_22C080
	INC.b $68,x
	JSL.l CODE_27A7F0
	JSL.l CODE_27A7E5
	JSL.l CODE_278B93
	INC.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	JSL.l CODE_279B70
CODE_22C080:
	JSL.l CODE_279BC4
CODE_22C084:
	LDA.b $68,x
	LSR
	LSR
	LSR
	AND.b #$01
	LDY.w $0689,x
	BEQ.b CODE_22C093
	CLC
	ADC.b #$03
CODE_22C093:
	STA.w $0669,x
	JSR.w CODE_22D34B
	JSL.l SMB3_CheckIfSpriteIsHorizontallyOffScreen_Main
	JSR.w CODE_22CBA6
	RTL
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr077_GreenCheepCheep_Status02(Address)
namespace SMB3_NorSpr077_GreenCheepCheep_Status02
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.w $0689,x
	BEQ.b CODE_22C0A8
	BRA.b CODE_22C0A8

CODE_22C0A8:
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	CMP.b #$02
	BEQ.b CODE_22C0BD
	LDA.w $0689,x
	BEQ.b CODE_22C0B9
	LDA.b #$05
	STA.w $0669,x
CODE_22C0B9:
	JSR.w CODE_22CBA6
	RTL

CODE_22C0BD:
	JSL.l CODE_279BB8
	LDA.b $9C
	BNE.b CODE_22C114
	INC.b $68,x
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$07
	BNE.b CODE_22C0E1
	LDA.b $4D,x
	AND.b #$01
	TAY
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	CLC
	ADC.w DATA_21C44C,y
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	CMP.w DATA_21C44E,y
	BNE.b CODE_22C0E1
	INC.b $4D,x
CODE_22C0E1:
	JSL.l CODE_27A7F0
	JSL.l CODE_27A7E5
	LDA.w $0689,x
	BNE.b CODE_22C110
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	CMP.w $1CC8,x
	BEQ.b CODE_22C104
	CMP.w $1CCD,x
	BEQ.b CODE_22C104
	JSL.l CODE_278B9B
	LDA.b $A7,x
	AND.b #$03
	BEQ.b CODE_22C110
CODE_22C104:
	JSL.l CODE_279906
	JSL.l CODE_27A7F0
	JSL.l CODE_27A7F0
CODE_22C110:
	JSL.l CODE_279B70
CODE_22C114:
	JSL.l CODE_279BCC
	JSL.l SMB3_CheckIfSpriteIsHorizontallyOffScreen_Main
	JSL.l SMB3_NorSpr076_FlyingRedCheepCheep_Status02_CODE_22C084
	RTL
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr0XX_BulletBills_Status02(Address)
namespace SMB3_NorSpr0XX_BulletBills_Status02
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.b $9C
	BNE.b CODE_22C189
	JSL.l CODE_279BC4
	JSL.l CODE_279B70
	JSL.l CODE_27A7F0
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_NorSpr079_HomingBill
	BNE.b CODE_22C189
	LDA.b !RAM_SMB3_Global_FrameCounter
	ORA.b #$F8
	STA.w $0769,x
	AND.b #$03
	STA.w $1FE9,x
	LDA.w $1FD2,x
	BEQ.b CODE_22C15F
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	STY.b $00
	LDY.b #$00
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	BPL.b CODE_22C156
	INY
CODE_22C156:
	CPY.b $00
	BEQ.b CODE_22C189
	DEC.w $1FD2,x
	BNE.b CODE_22C189
CODE_22C15F:
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$01
	BNE.b CODE_22C189
	LDA.b $4D,x
	BMI.b CODE_22C189
	AND.b #$01
	TAY
	LDA.w DATA_21C454,y
	STA.w $0679,x
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	CLC
	ADC.w DATA_21C450,y
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	CMP.b #$00
	BNE.b CODE_22C180
	STZ.b $68,x
CODE_22C180:
	CMP.w DATA_21C452,y
	BNE.b CODE_22C189
	LDA.b #$FF
	STA.b $4D,x
CODE_22C189:
	LDA.b $68,x
	BEQ.b CODE_22C19A
	DEC.b $68,x
	LDA.b #$03
	STA.w $0669,x
	JSR.w CODE_22CBA0
	BRL.w CODE_22C1EA

CODE_22C19A:
	STZ.w $0669,x
	JSL.l SMB3_CheckIfSpriteIsHorizontallyOffScreen_Main
	REP.b #$20
	LDA.b $C6,x
	PHA
	CLC
	ADC.w #$0010
	STA.b $C6,x
	SEP.b #$20
	JSR.w CODE_22CBA6
	REP.b #$20
	PLA
	STA.b $C6,x
	SEP.b #$20
	LDA.w $0518,x
	BEQ.b CODE_22C1EA
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	PHA
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	PHA
	LDA.w $0679,x
	PHA
	LDA.w $1CD7,x
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	INC.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	LDA.b #$10
	STA.w $0679,x
	LDA.b #$04
	STA.w $0669,x
	JSL.l SMB3_CheckIfSpriteIsHorizontallyOffScreen_Main
	JSR.w CODE_22CBA6
	PLA
	STA.w $0679,x
	PLA
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	PLA
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	RTL

CODE_22C1EA:
	JSL.l CODE_279DD4
	RTL
namespace off
	%SetDuplicateOrNullPointer(SMB3_NorSpr0XX_BulletBills_Status02_Main, SMB3_NorSpr078_BulletBill_Status02_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSpr0XX_BulletBills_Status02_Main, SMB3_NorSpr079_HomingBill_Status02_Main)
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr083_Lakitu_Status01(Address)
namespace SMB3_NorSpr083_Lakitu_Status01
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.b #$01
	STA.w !RAM_SMB3_NorSpr083_Lakitu_ChasePlayerFlag
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	STA.w !RAM_SMB3_NorSpr083_Lakitu_InitialYPosLo,x
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	STA.w !RAM_SMB3_NorSpr083_Lakitu_InitialYPosHi,x
	RTL
namespace off
endmacro

;--------------------------------------------------------------------

macro ROUTINE_SMB3_NorSpr083_Lakitu_Status02(Address)
namespace SMB3_NorSpr083_Lakitu_Status02
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	CMP.b #$02
	BEQ.b CODE_22BC43
	LDA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	ORA.b #$80
	STA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	JSL.l CODE_279EE2
	REP.b #$10
	LDY.b $C6,x
	LDA.b #$A7
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$02].Prop,y
	LDA.b #$E7
	STA.w SMB3_OAMBuffer[$01].Prop,y
	STA.w SMB3_OAMBuffer[$03].Prop,y
	SEP.b #$10
	LDA.b $9C
	BNE.b CODE_22BC42
	JSL.l SMB3_HandleNormalSpriteGravity_Main
	LDA.w $06B7,x
	BNE.b CODE_22BC11
	DEC.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_22BC11:
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	CMP.b #$02
	BMI.b CODE_22BC42
	LDA.w $0210
	SEC
	SBC.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	LDA.b $12
	SBC.b #$02
	STA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	LDA.b #$02
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	LDA.w !RAM_SMB3_NorSpr083_Lakitu_InitialYPosLo,x
	PHA
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	LDA.w !RAM_SMB3_NorSpr083_Lakitu_InitialYPosHi,x
	PHA
	STA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	JSL.l CODE_279C97
	PLA
	STA.w !RAM_SMB3_NorSpr083_Lakitu_InitialYPosHi,x
	PLA
	STA.w !RAM_SMB3_NorSpr083_Lakitu_InitialYPosLo,x
CODE_22BC42:
	RTL

CODE_22BC43:
	LDA.b $9C
	BNE.b CODE_22BCB0
	LDA.w !RAM_SMB3_NorSpr083_Lakitu_ChasePlayerFlag
	BNE.b CODE_22BC50
	JSL.l CODE_279BC4
CODE_22BC50:
	JSL.l CODE_279B70
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.w !RAM_SMB3_NorSpr083_Lakitu_ChasePlayerFlag
	BNE.b CODE_22BC61
	TYA
	EOR.b #$01
	TAY
CODE_22BC61:
	STY.b !RAM_SMB3_NorSpr083_Lakitu_HorizontalMovementDirection,x
	INC.w !RAM_SMB3_NorSpr083_Lakitu_FrameCounter,x
	LDA.w !RAM_SMB3_NorSpr083_Lakitu_FrameCounter,x
	AND.b #$01
	BNE.b CODE_22BC7A
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	CMP.w DATA_21C442,y
	BEQ.b CODE_22BC7A
	CLC
	ADC.w DATA_21C440,y
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_22BC7A:
	LDA.b #$7F
	LDY.w $0563
	BNE.b CODE_22BC83
	LDA.b #$3F
CODE_22BC83:
	AND.w !RAM_SMB3_NorSpr083_Lakitu_FrameCounter,x
	BNE.b CODE_22BC92
	LDA.w !RAM_SMB3_NorSpr083_Lakitu_ChasePlayerFlag
	BEQ.b CODE_22BC92
	LDA.b #$1F
	STA.w !RAM_SMB3_NorSpr083_Lakitu_PreparingToThrowTimer,x
CODE_22BC92:
	LDY.w !RAM_SMB3_NorSpr083_Lakitu_PreparingToThrowTimer,x
	DEY
	BNE.b CODE_22BC9B
	JSR.w CODE_22BD74
CODE_22BC9B:
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	PHA
	LDA.w $0781
	ASL
	ASL
	ASL
	ASL
	ADC.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	JSL.l CODE_27A7F0
	PLA
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_22BCB0:
	JSL.l SMB3_CheckIfSpriteIsHorizontallyOffScreen_Main
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	XBA
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	REP.b #$20
	SEC
	SBC.w $0210
	SEP.b #$20
	XBA
	BPL.b CODE_22BCC7
	EOR.b #$FF
	INC
CODE_22BCC7:
	CMP.b #$02
	BCC.b CODE_22BCCE
	BRL.w CODE_22BD73

CODE_22BCCE:
	JSR.w CODE_22CBA0
	LDA.b #$F6
	STA.b $00
	LDA.w !RAM_SMB3_NorSpr083_Lakitu_PreparingToThrowTimer,x
	BEQ.b CODE_22BCEC
	CMP.b #$10
	BCC.b CODE_22BCFC
	SBC.b #$10
	LSR
	EOR.b #$07
	CLC
	ADC.b #$01
	SBC.b #$10
	STA.b $00
	BRA.b CODE_22BCFC

CODE_22BCEC:
	LDA.w !RAM_SMB3_NorSpr083_Lakitu_FrameCounter,x
	LSR
	LSR
	LSR
	AND.b #$03
	TAX
	LDA.w DATA_21C444,x
	LDX.b $9B
	STA.b $00
CODE_22BCFC:
	REP.b #$10
	LDY.b $C6,x
	LDA.w SMB3_OAMBuffer[$00].YDisp,y
	CMP.b #$F0
	BEQ.b CODE_22BD13
	CLC
	ADC.b $00
	STA.w SMB3_OAMBuffer[$04].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$06].YDisp,y
CODE_22BD13:
	LDA.w SMB3_OAMBuffer[$01].YDisp,y
	CMP.b #$F0
	BEQ.b CODE_22BD26
	CLC
	ADC.b $00
	STA.w SMB3_OAMBuffer[$05].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$07].YDisp,y
CODE_22BD26:
	LDA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$04].XDisp,y
	STA.w SMB3_OAMBuffer[$06].XDisp,y
	LDA.w SMB3_OAMBuffer[$01].XDisp,y
	STA.w SMB3_OAMBuffer[$05].XDisp,y
	STA.w SMB3_OAMBuffer[$07].XDisp,y
	LDA.b #$1C
	STA.w SMB3_OAMBuffer[$04].Tile,y
	STA.w SMB3_OAMBuffer[$05].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$06].Tile,y
	STA.w SMB3_OAMBuffer[$07].Tile,y
	LDA.b #$27
	STA.w SMB3_OAMBuffer[$04].Prop,y
	STA.w SMB3_OAMBuffer[$06].Prop,y
	LDA.b #$67
	STA.w SMB3_OAMBuffer[$05].Prop,y
	STA.w SMB3_OAMBuffer[$07].Prop,y
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$04].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$06].Slot,y
	LDA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$05].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$07].Slot,y
	SEP.b #$10
CODE_22BD73:
	RTL

CODE_22BD74:
	LDY.b #$04
CODE_22BD76:
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,y
	BEQ.b CODE_22BD7F
	DEY
	BPL.b CODE_22BD76
	RTS

CODE_22BD7F:
	STY.b $00
	LDX.b $00
	JSL.l CODE_279C97
	LDX.b $9B
	LDA.b #$02
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,y
	LDA.b #$03
	STA.w $1FE9,y
	LDA.b #$00
	CMP.w $0563
	LDA.b #!Define_SMB3_SpriteID_NorSpr084_RedSpinyEgg
	BCS.b CODE_22BDA3
	LDA.b #$02
	STA.w $1FE9,y
	LDA.b #!Define_SMB3_SpriteID_NorSpr085_GreenSpinyEgg
CODE_22BDA3:
	STA.w !RAM_SMB3_Level_NorSpr_SpriteID,y
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	SBC.b #$0C
	STA.w !RAM_SMB3_Level_NorSpr_YPosLo,y
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	SBC.b #$00
	STA.w !RAM_SMB3_Level_NorSpr_YPosHi,y
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	STA.w !RAM_SMB3_Level_NorSpr_XPosLo,y
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	STA.w !RAM_SMB3_Level_NorSpr_XPosHi,y
	LDA.b #$D0
	STA.w !RAM_SMB3_Level_NorSpr_YSpeed,y
	LDA.w $0781
	ASL
	ASL
	ASL
	STA.b $00
	LDA.b $68,x
	LSR
	LDA.b #$10
	BCC.b CODE_22BDD4
	LDA.b #$F0
CODE_22BDD4:
	CLC
	ADC.b $00
	STA.w !RAM_SMB3_Level_NorSpr_XSpeed,y
	RTS
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr089_ChainChomp_Status01(Address)
namespace SMB3_NorSpr089_ChainChomp_Status01
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	STA.w $0256,x
	STA.w $025B,x
	STA.w $0260,x
	STA.w $0265,x
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	STA.w $1CD7,x
	STA.w $1CA0,x
	STA.w $1CA5,x
	STA.w $1CAA,x
	STA.w $1CAF,x
	SEC
	SBC.b #$2C
	STA.w $1CC8,x
	CLC
	ADC.b #$58
	STA.w $1CCD,x
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	STA.w $026A,x
	STA.w $026F,x
	STA.w $0274,x
	STA.w $0279,x
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	STA.w $1CDC,x
	STA.w $1CB4,x
	STA.w $1CB9,x
	STA.w $1CBE,x
	STA.w $1CC3,x
	SEC
	SBC.b #$38
	STA.w $1CD2,x
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	SBC.b #$00
	STA.w $1021,x
	RTL
namespace off
endmacro

;--------------------------------------------------------------------

macro ROUTINE_SMB3_NorSpr089_ChainChomp_Status02(Address)
namespace SMB3_NorSpr089_ChainChomp_Status02
%InsertMacroAtXPosition(<Address>)

CODE_22CD16:
	LDY.b #$01
CODE_22CD18:
	LDA.w $06B4,y
	BEQ.b CODE_22CD21
	DEY
	BPL.b CODE_22CD18
	RTS

CODE_22CD21:
	LDA.b #!Define_SMB3_SpriteID_NorSpr04F_FreeChainChomp
	STA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	LDA.b #$04
	STA.w $1021,x
	LDA.b #$01
	STA.w $06B4,y
	JSL.l SMB3_GetNormalSpriteOnScreenPosition_Main
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenYPos,x
	STA.b $00
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenXPos,x
	STA.b $01
	TYA
	STA.w $0771,x
	LSR
	ROR
	LSR
	LSR
	TAX
	LDY.b #$1F
CODE_22CD47:
	LDA.b $00
	STA.w $1C60,x
	LDA.b $01
	STA.w $1C20,x
	INX
	DEY
	BPL.b CODE_22CD47
	LDX.b $9B
	LDA.b #$00
	STA.w $0518,x
	RTS

Main:
	JSR.w CODE_22D00D
	LDA.b $9C
	BNE.b CODE_22CD81
	JSL.l CODE_279B70
	JSL.l CODE_279BCC
	JSR.w CODE_22D34B
	INC.w $1FD2,x
	INC.b $4D,x
	LDA.b $4D,x
	LSR
	LSR
	LSR
	AND.b #$01
	STA.w $0669,x
	JSR.w CODE_22CD82
CODE_22CD81:
	RTL

CODE_22CD82:
	LDA.b $68,x
	JSL.l SMB3_ExecutePtr_Absolute

DATA_22CD88:
	dw CODE_22CD8E
	dw CODE_22CDE0
	dw CODE_22CF3A

CODE_22CD8E:
	LDA.w $0518,x
	BNE.b CODE_22CDDF
	LDA.w !RAM_SMB3_Global_RandomByte02,x
	AND.b #$03
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.b $0F
	PHP
	BPL.b CODE_22CDA3
	EOR.b #$FF
CODE_22CDA3:
	CMP.b #$40
	BCC.b CODE_22CDAE
	LDA.w !RAM_SMB3_Global_RandomByte02,x
	AND.b #$03
	BRA.b CODE_22CDB5

CODE_22CDAE:
	LSR
	LSR
	LSR
	LSR
	NOP #3
CODE_22CDB5:
	STA.w $0776,x
	TAY
	LDA.w DATA_21C480,y
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	LDA.w DATA_21C484,y
	PLP
	BPL.b CODE_22CDC9
	EOR.b #$FF
	CLC
	ADC.b #$01
CODE_22CDC9:
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	LDA.b #$28
	STA.w $0518,x
	INC.b $68,x
	INC.w $0689,x
	LDA.w $0689,x
	CMP.b #$32
	BNE.b CODE_22CDDF
	JSR.w CODE_22CD16
CODE_22CDDF:
	RTS

CODE_22CDE0:
	LDA.w $0518,x
	BNE.b CODE_22CE03
	LDA.w !RAM_SMB3_Global_RandomByte02,x
	AND.b #$3F
	ORA.b #$20
	STA.w $0518,x
	INC.b $68,x
	LDA.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	LDY.b #$08
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	CMP.w $1CD7,x
	BCC.b CODE_22CE00
	LDY.b #$F8
CODE_22CE00:
	STY.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	RTS

CODE_22CE03:
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	CMP.w $1CC8,x
	BCC.b CODE_22CE1E
	CMP.w $1CCD,x
	BCS.b CODE_22CE1E
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	CMP.w $1CD2,x
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	SBC.w $1021,x
	BCC.b CODE_22CE1E
	JMP.w CODE_22D10B

CODE_22CE1E:
	INC.w $004D,x
	INC.w $004D,x
	LDA.b #$04
	STA.b $03
	LDA.w $1CD7,x
	SEC
	SBC.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	JSR.w CODE_22CF1F
	STZ.b $01
	LDA.b $00
	CMP.b #$80
	BCC.b CODE_22CE3B
	DEC.b $01
CODE_22CE3B:
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	XBA
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	REP.b #$20
	CLC
	ADC.b $00
	STA.b $D8
	ADC.b $00
	STA.b $DA
	ADC.b $00
	STA.b $DC
	ADC.b $00
	STA.b $00
	SEP.b #$20
	LDA.b $D8
	STA.w $1CA0,x
	LDA.b $D9
	STA.w $0256,x
	LDA.b $DA
	STA.w $1CA5,x
	LDA.b $DB
	STA.w $025B,x
	LDA.b $DC
	STA.w $1CAA,x
	LDA.b $DD
	STA.w $0260,x
	LDA.b $00
	STA.w $1CAF,x
	LDA.b $01
	STA.w $0265,x
	LDA.b #$05
	STA.b $03
	LDA.w $1CDC,x
	SEC
	SBC.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	JSR.w CODE_22CF1F
	STZ.b $01
	LDA.b $00
	CMP.b #$80
	BCC.b CODE_22CE94
	DEC.b $01
CODE_22CE94:
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	XBA
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	REP.b #$20
	CLC
	ADC.b $00
	STA.b $D8
	ADC.b $00
	STA.b $DA
	ADC.b $00
	STA.b $DC
	ADC.b $00
	STA.b $00
	SEP.b #$20
	LDA.b $D8
	STA.w $1CB4,x
	LDA.b $D9
	STA.w $026A,x
	LDA.b $DA
	STA.w $1CB9,x
	LDA.b $DB
	STA.w $026F,x
	LDA.b $DC
	STA.w $1CBE,x
	LDA.b $DD
	STA.w $0274,x
	LDA.b $00
	STA.w $1CC3,x
	LDA.b $01
	STA.w $0279,x
	REP.b #$30
	LDA.b $C6,x
	STA.b $C6,x
	PHA
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	AND.w #$00FF
	TAY
	PLA
	TAX
	SEP.b #$20
	CPY.w #$00D0
	BCC.b CODE_22CEED
	INX
CODE_22CEED:
	LDY.w #$0003
	LDA.b !RAM_SMB3_Global_FrameCounter
	LSR
	LSR
CODE_22CEF4:
	BCC.b CODE_22CF13
	LDA.w SMB3_OAMBuffer[$00].XDisp,x
	CLC
	ADC.b #$01
	STA.w SMB3_OAMBuffer[$00].XDisp,x
	PHX
	PHP
	REP.b #$20
	TXA
	LSR
	LSR
	TAX
	SEP.b #$20
	PLP
	LDA.w SMB3_OAMTileSizeBuffer[$00].Slot,x
	ADC.b #$00
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,x
	PLX
CODE_22CF13:
	INX
	INX
	INX
	INX
	DEY
	BPL.b CODE_22CEF4
	SEP.b #$10
	LDX.b $9B
	RTS

CODE_22CF1F:
	PHP
	BPL.b CODE_22CF27
	EOR.b #$FF
	CLC
	ADC.b #$01
CODE_22CF27:
	LDY.b #$FF
CODE_22CF29:
	SBC.b $03
	INY
	BCS.b CODE_22CF29
	TYA
	PLP
	BPL.b CODE_22CF37
	EOR.b #$FF
	CLC
	ADC.b #$01
CODE_22CF37:
	STA.b $00
	RTS

CODE_22CF3A:
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.b $0F
	ADC.b #$60
	CMP.b #$C0
	LDY.b #$00
	BCS.b CODE_22CF5B
	INC.b $4D,x
	LDA.w $0518,x
	BNE.b CODE_22CF5A
	LDA.b #$00
	STA.w $0518,x
	STA.b $68,x
	STA.w $077B,x
	RTS

CODE_22CF5A:
	INY
CODE_22CF5B:
	STY.b $0F
	JSR.w CODE_22D10B
	INC.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	INC.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	INC.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	LDA.w $077B,x
	BEQ.b CODE_22CF95
	LDA.w $1CDC,x
	STA.b $00
	LDY.b #$03
CODE_22CF72:
	LDA.w $026A,x
	XBA
	LDA.w $1CB4,x
	CMP.b $00
	BCS.b CODE_22CF8B
	REP.b #$20
	ADC.w #$0002
	SEP.b #$20
	STA.w $1CB4,x
	XBA
	STA.w $026A,x
CODE_22CF8B:
	INX
	INX
	INX
	INX
	INX
	DEY
	BPL.b CODE_22CF72
	LDX.b $9B
CODE_22CF95:
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	CMP.w $1CDC,x
	BCC.b CODE_22D00C
	LDA.b #$01
	STA.w $077B,x
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	PHA
	JSL.l CODE_278B67
	PLA
	CMP.b #$28
	BCC.b CODE_22CFB6
	LDA.b #$E8
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	LDA.b #$00
	STA.w $1FD2,x
CODE_22CFB6:
	LDA.b #$03
	LDY.b $0F
	BEQ.b CODE_22CFBE
	LDA.b #$00
CODE_22CFBE:
	STA.w $0776,x
	LDA.w $1FD2,x
	AND.w DATA_21C490,y
	BNE.b CODE_22CFDD
	LDA.w DATA_21C492,y
	PHA
	LDA.w $1CD7,x
	CMP.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	BCS.b CODE_22CFDA
	PLA
	EOR.b #$FF
	ADC.b #$01
	PHA
CODE_22CFDA:
	PLA
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_22CFDD:
	LDA.w !RAM_SMB3_Global_RandomByte02,x
	AND.b #$D5
	BNE.b CODE_22CFE8
	LDA.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_22CFE8:
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	LDY.w $0679,x
	BNE.b CODE_22CFF6
	CMP.w $1CC8,x
	BCC.b CODE_22CFFB
	BCS.b CODE_22D00C							; Note: This will always branch.

CODE_22CFF6:
	CMP.w $1CCD,x
	BCC.b CODE_22D00C
CODE_22CFFB:
	LDY.b $0F
	LDA.w DATA_21C492,y
	BCC.b CODE_22D007
	EOR.b #$FF
	CLC
	ADC.b #$01
CODE_22D007:
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	JSR.w CODE_22D10B
CODE_22D00C:
	RTS

CODE_22D00D:
	JSR.w CODE_22CBA6
	LDA.w $0543
	STA.b $D8
	LDA.w $0542
	STA.b $D9
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	XBA
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	REP.b #$20
	SEC
	SBC.b $D8
	PHA
	LDA.b $C6,x
	CLC
	ADC.w #$0030
	STA.b $C6,x
	PLA
	CMP.w #$00C0
	BCC.b CODE_22D03B
	CMP.w #$FFC0
	BCS.b CODE_22D03B
	SEP.b #$20
	RTS

CODE_22D03B:
	SEP.b #$20
	LDA.b #$03
	STA.b $0F
CODE_22D041:
	LDA.b $0F
	ASL
	ASL
	ADC.b $0F
	ADC.b $9B
	TAY
	LDA.w $0542
	STA.b $DB
	LDA.w $0543
	STA.b $DA
	LDA.w $026A,y
	XBA
	LDA.w $1CB4,y
	REP.b #$20
	SEC
	SBC.b $DA
	CLC
	ADC.w #$0004
	STA.b $DA
	CLC
	ADC.w #$0008
	STA.b $DC
	SEP.b #$20
	STA.b $00
	LDA.w $0256,y
	XBA
	LDA.w $1CA0,y
	REP.b #$20
	CLC
	ADC.w #$0004
	SEC
	SBC.w $0210
	STA.b $D8
	SEP.b #$20
	STA.b $01
	REP.b #$30
	LDA.b $C6,x
	SEC
	SBC.w #$0008
	STA.b $C6,x
	TAY
	SEP.b #$20
	REP.b #$20
	LDA.b $DA
	CMP.w #$00C0
	BCC.b CODE_22D0A4
	CMP.w #$FFE0
	BCS.b CODE_22D0A4
	BRA.b CODE_22D0AB

CODE_22D0A4:
	SEP.b #$20
	LDA.b $DA
	STA.w SMB3_OAMBuffer[$00].YDisp,y
CODE_22D0AB:
	REP.b #$20
	LDA.b $DC
	CMP.w #$00C0
	BCC.b CODE_22D0BB
	CMP.w #$FFE0
	BCS.b CODE_22D0BB
	BRA.b CODE_22D0C2

CODE_22D0BB:
	SEP.b #$20
	LDA.b $DC
	STA.w SMB3_OAMBuffer[$01].YDisp,y
CODE_22D0C2:
	SEP.b #$20
	LDA.b $01
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	LDA.b #$9A
	STA.w SMB3_OAMBuffer[$00].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$01].Tile,y
	LDA.w $0689,x
	CMP.b #$2F
	LDA.b #$05
	BCC.b CODE_22D0E4
	LDA.w $0565
	LSR
	AND.b #$03
CODE_22D0E4:
	ASL
	ORA.b #$20
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$01].Prop,y
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b $D9
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	SEP.b #$10
	DEC.b $0F
	BMI.b CODE_22D108
	BRL.w CODE_22D041

CODE_22D108:
	LDX.b $9B
	RTS

CODE_22D10B:
	JSL.l CODE_27A7E5
	STA.b $00
	JSL.l CODE_27A7F0
	STA.b $01
	STZ.b $02
	CMP.b #$80
	BCC.b CODE_22D11F
	DEC.b $02
CODE_22D11F:
	LDY.w $0776,x
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	BPL.b CODE_22D129
	BRL.w CODE_22D1AF

CODE_22D129:
	LDA.w $1CA0,x
	CLC
	ADC.w DATA_21C48C,y
	CMP.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	BCS.b CODE_22D1AC
	LDA.w $0256,x
	XBA
	LDA.w $1CA0,x
	REP.b #$20
	CLC
	ADC.b $01
	SEP.b #$20
	STA.w $1CA0,x
	XBA
	STA.w $0256,x
	LDA.w $1CA5,x
	CLC
	ADC.w DATA_21C48C,y
	CMP.w $1CA0,x
	BCS.b CODE_22D1AC
	LDA.w $025B,x
	XBA
	LDA.w $1CA5,x
	REP.b #$20
	CLC
	ADC.b $01
	SEP.b #$20
	STA.w $1CA5,x
	XBA
	STA.w $025B,x
	LDA.w $1CAA,x
	CLC
	ADC.w DATA_21C48C,y
	CMP.w $1CA5,x
	BCS.b CODE_22D1AC
	LDA.w $0260,x
	XBA
	LDA.w $1CAA,x
	REP.b #$20
	CLC
	ADC.b $01
	SEP.b #$20
	STA.w $1CAA,x
	XBA
	STA.w $0260,x
	LDA.w $1CAF,x
	CLC
	ADC.w DATA_21C48C,y
	CMP.w $1CAA,x
	BCS.b CODE_22D1AC
	LDA.w $0265,x
	XBA
	LDA.w $1CAF,x
	REP.b #$20
	CLC
	ADC.b $01
	SEP.b #$20
	STA.w $1CAF,x
	XBA
	STA.w $0265,x
CODE_22D1AC:
	JMP.w CODE_22D232

CODE_22D1AF:
	LDA.w $1CA0,x
	SEC
	SBC.w DATA_21C48C,y
	CMP.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	BCC.b CODE_22D232
	LDA.w $0256,x
	XBA
	LDA.w $1CA0,x
	REP.b #$20
	CLC
	ADC.b $01
	SEP.b #$20
	STA.w $1CA0,x
	XBA
	STA.w $0256,x
	LDA.w $1CA5,x
	SEC
	SBC.w DATA_21C48C,y
	CMP.w $1CA0,x
	BCC.b CODE_22D232
	LDA.w $025B,x
	XBA
	LDA.w $1CA5,x
	REP.b #$20
	CLC
	ADC.b $01
	SEP.b #$20
	STA.w $1CA5,x
	XBA
	STA.w $025B,x
	LDA.w $1CAA,x
	SEC
	SBC.w DATA_21C48C,y
	CMP.w $1CA5,x
	BCC.b CODE_22D232
	LDA.w $0260,x
	XBA
	LDA.w $1CAA,x
	REP.b #$20
	CLC
	ADC.b $01
	SEP.b #$20
	STA.w $1CAA,x
	XBA
	STA.w $0260,x
	LDA.w $1CAF,x
	SEC
	SBC.w DATA_21C48C,y
	CMP.w $1CAA,x
	BCC.b CODE_22D232
	LDA.w $0265,x
	XBA
	LDA.w $1CAF,x
	REP.b #$20
	CLC
	ADC.b $01
	SEP.b #$20
	STA.w $1CAF,x
	XBA
	STA.w $0265,x
CODE_22D232:
	STZ.b $01
	LDA.b $00
	CMP.b #$80
	BCC.b CODE_22D23C
	DEC.b $01
CODE_22D23C:
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	BPL.b CODE_22D243
	BRL.w CODE_22D2C7

CODE_22D243:
	LDA.w $1CB4,x
	CLC
	ADC.w DATA_21C488,y
	CMP.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	BCS.b CODE_22D2C6
	LDA.w $026A,x
	XBA
	LDA.w $1CB4,x
	REP.b #$20
	CLC
	ADC.b $00
	SEP.b #$20
	STA.w $1CB4,x
	XBA
	STA.w $026A,x
	LDA.w $1CB9,x
	CLC
	ADC.w DATA_21C488,y
	CMP.w $1CB4,x
	BCS.b CODE_22D2C6
	LDA.w $026F,x
	XBA
	LDA.w $1CB9,x
	REP.b #$20
	CLC
	ADC.b $00
	SEP.b #$20
	STA.w $1CB9,x
	XBA
	STA.w $026F,x
	LDA.w $1CBE,x
	CLC
	ADC.w DATA_21C488,y
	CMP.w $1CB9,x
	BCS.b CODE_22D2C6
	LDA.w $0274,x
	XBA
	LDA.w $1CBE,x
	REP.b #$20
	CLC
	ADC.b $00
	SEP.b #$20
	STA.w $1CBE,x
	XBA
	STA.w $0274,x
	LDA.w $1CC3,x
	CLC
	ADC.w DATA_21C488,y
	CMP.w $1CBE,x
	BCS.b CODE_22D2C6
	LDA.w $0279,x
	XBA
	LDA.w $1CC3,x
	REP.b #$20
	CLC
	ADC.b $00
	SEP.b #$20
	STA.w $1CC3,x
	XBA
	STA.w $0279,x
CODE_22D2C6:
	RTS

CODE_22D2C7:
	LDA.w $1CB4,x
	SEC
	SBC.w DATA_21C488,y
	CMP.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	BCC.b CODE_22D34A
	LDA.w $026A,x
	XBA
	LDA.w $1CB4,x
	REP.b #$20
	CLC
	ADC.b $00
	SEP.b #$20
	STA.w $1CB4,x
	XBA
	STA.w $026A,x
	LDA.w $1CB9,x
	SEC
	SBC.w DATA_21C488,y
	CMP.w $1CB4,x
	BCC.b CODE_22D34A
	LDA.w $026F,x
	XBA
	LDA.w $1CB9,x
	REP.b #$20
	CLC
	ADC.b $00
	SEP.b #$20
	STA.w $1CB9,x
	XBA
	STA.w $026F,x
	LDA.w $1CBE,x
	SEC
	SBC.w DATA_21C488,y
	CMP.w $1CB9,x
	BCC.b CODE_22D34A
	LDA.w $0274,x
	XBA
	LDA.w $1CBE,x
	REP.b #$20
	CLC
	ADC.b $00
	SEP.b #$20
	STA.w $1CBE,x
	XBA
	STA.w $0274,x
	LDA.w $1CC3,x
	SEC
	SBC.w DATA_21C488,y
	CMP.w $1CBE,x
	BCC.b CODE_22D34A
	LDA.w $0279,x
	XBA
	LDA.w $1CC3,x
	REP.b #$20
	CLC
	ADC.b $00
	SEP.b #$20
	STA.w $1CC3,x
	XBA
	STA.w $0279,x
CODE_22D34A:
	RTS
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr08A_NormalThwomp_Status02(Address)
namespace SMB3_NorSpr08A_NormalThwomp_Status02
%InsertMacroAtXPosition(<Address>)

Main:
;$22B401
	JSR.w CODE_22B489
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	CMP.b #$02
	BNE.b CODE_22B400
	LDA.b $9C
	BNE.b CODE_22B400
	JSL.l CODE_279BC4
	JSL.l CODE_279B70
	JSR.w CODE_22B41B
	RTL

CODE_22B41B:
	LDA.b !RAM_SMB3_NorSpr08A_NormalThwomp_CurrentState,x
	JSL.l SMB3_ExecutePtr_Absolute

DATA_22B421:
	dw CODE_22B427
	dw CODE_22B43F
	dw CODE_22B472

CODE_22B427:
	JSL.l SMB3_CheckIfNormalSpriteOffScreen_Main
	BNE.b CODE_22B43E
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.b $0F
	CLC
	ADC.b #$24
	CMP.b #$50
	BCS.b CODE_22B43E
	INC.b !RAM_SMB3_NorSpr08A_NormalThwomp_CurrentState,x
	STZ.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_22B43E:
	RTS

CODE_22B43F:
	JSL.l CODE_27A7E5
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	CMP.b #$70
	BCS.b CODE_22B44D
	ADC.b #$04
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_22B44D:
	JSL.l CODE_278B93
	LDA.b $A7,x
	AND.b #$04
	BEQ.b CODE_22B471
	JSL.l CODE_278B67
	LDA.b #$18
	STA.w !RAM_SMB3_Level_ShakeLayer1Timer
	LDA.b #!Define_SMAS_Sound0063_BulletShoot
	STA.w !RAM_SMB3_Global_SoundCh3
	LDA.b #$0C
	STA.w !RAM_SMB3_NorSpr08A_NormalThwomp_DisplaySmokeTimer,x
	LDA.b #$40
	STA.w !RAM_SMB3_NorSpr08A_NormalThwomp_WaitBeforeRising,x
	INC.b !RAM_SMB3_NorSpr08A_NormalThwomp_CurrentState,x
CODE_22B471:
	RTS

CODE_22B472:
	LDA.w !RAM_SMB3_NorSpr08A_NormalThwomp_WaitBeforeRising,x
	BNE.b CODE_22B488
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	CMP.b !RAM_SMB3_NorSpr08A_NormalThwomp_InitialYPosLo,x
	BNE.b CODE_22B480
	STZ.b !RAM_SMB3_NorSpr08A_NormalThwomp_CurrentState,x
	RTS

CODE_22B480:
	LDA.b #$F0
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	JSL.l CODE_27A7E5
CODE_22B488:
	RTS
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSprXXX_RotatingPeaPlatform_Status01(Address)
namespace SMB3_NorSprXXX_RotatingPeaPlatform_Status01
%InsertMacroAtXPosition(<Address>)

Entry2:
	LDA.b #$02
	STA.w $0679,x
Main:
	LDA.b #$00
	STA.b $94,x
	STA.b !RAM_SMB3_NorSprXXX_RotatingPeaPlatform_AngularSpeed,x
	STA.w $1021,x
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	SEC
	SBC.b #$0C
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	SBC.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	RTL
namespace off
	%SetDuplicateOrNullPointer(SMB3_NorSprXXX_RotatingPeaPlatform_Status01_Main, SMB3_NorSpr090_WeightedPeaPlatform_Status01_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSprXXX_RotatingPeaPlatform_Status01_Main, SMB3_NorSpr091_AutoRotatingPeaPlatform_Status01_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSprXXX_RotatingPeaPlatform_Status01_Main, SMB3_NorSpr092_ClockwiseRotatingPeaPlatform_Status01_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSprXXX_RotatingPeaPlatform_Status01_Entry2, SMB3_NorSpr093_CounterclockwiseRotatingPeaPlatform_Status01_Main)
endmacro

;--------------------------------------------------------------------

macro ROUTINE_SMB3_NorSprXXX_RotatingPeaPlatform_Status02(Address)
namespace SMB3_NorSprXXX_RotatingPeaPlatform_Status02
%InsertMacroAtXPosition(<Address>)

AutoRotatingPeaPlatformEntry:
	LDA.b #$30
	STA.b !RAM_SMB3_NorSprXXX_RotatingPeaPlatform_AngularSpeed,x
CODE_2993C4:
	JSR.w CODE_2997CF
	JSR.w CODE_2995F3
	JSR.w CODE_2996A7
	JMP.w CODE_299431

Main:
	JSL.l CODE_2993C4
	LDA.b $9C
	BNE.b CODE_2993FE
	LDA.b !RAM_SMB3_NorSprXXX_RotatingPeaPlatform_CurrentRotationState,x
	AND.b #$01
	ORA.w $0679,x
	TAY
	LDA.w !RAM_SMB3_NorSprXXX_RotatingPeaPlatform_PhaseTimer,x
	BNE.b CODE_2993ED
	LDA.w DATA_21C61E,y
	STA.w !RAM_SMB3_NorSprXXX_RotatingPeaPlatform_PhaseTimer,x
	INC.b !RAM_SMB3_NorSprXXX_RotatingPeaPlatform_CurrentRotationState,x
CODE_2993ED:
	AND.b #$00
	BNE.b CODE_2993FE
	LDA.b !RAM_SMB3_NorSprXXX_RotatingPeaPlatform_AngularSpeed,x
	CMP.w DATA_21C626,y
	BEQ.b CODE_2993FE
	CLC
	ADC.w DATA_21C622,y
	STA.b !RAM_SMB3_NorSprXXX_RotatingPeaPlatform_AngularSpeed,x
CODE_2993FE:
	RTL

WeightedPeaPlatformEntry:
	LDA.w !RAM_SMB3_NorSprXXX_RotatingPeaPlatform_PhaseTimer,x
	BNE.b CODE_299427
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$01
	BNE.b CODE_299427
	LDY.w $1021,x
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	CLC
	ADC.w DATA_21C649,y
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	CMP.w DATA_21C64B,y
	BNE.b CODE_299427
	LDA.w $1021,x
	EOR.b #$01
	STA.w $1021,x
	LDA.b #$A0
	STA.w !RAM_SMB3_NorSprXXX_RotatingPeaPlatform_PhaseTimer,x
CODE_299427:
	LDA.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	JSR.w CODE_2995B8
	JSR.w CODE_2996A7
CODE_299431:
	JSL.l CODE_279BC8
	LDA.w $0583
	BNE.b CODE_2994A0
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	SEC
	SBC.b #!Define_SMB3_SpriteID_NorSpr090_WeightedPeaPlatform
	STA.b $0E
	JSL.l SMB3_CheckIfNormalSpriteOffScreen_Main
	BNE.b CODE_2994A0
	LDY.b #$06
CODE_29944A:
	STY.b $00
	CPY.b #$06
	BNE.b CODE_299456
	REP.b #$20
	LDA.b $D8
	BRA.b CODE_299461

CODE_299456:
	REP.b #$20
	TYA
	AND.w #$00FF
	ASL
	ASL
	CLC
	ADC.b $DA
CODE_299461:
	STA.b $0F
	SEP.b #$20
	LDA.b !RAM_SMB3_Level_Player_YPosLo
	SEC
	SBC.w $0543
	CLC
	ADC.b #$18
	LDY.b !RAM_SMB3_Level_Player_YSpeed
	BPL.b CODE_299475
	SEC
	SBC.b #$10
CODE_299475:
	REP.b #$10
	LDY.b $0F
	SEC
	SBC.w SMB3_OAMBuffer[$00].YDisp,y
	CMP.b #$09
	BCS.b CODE_299499
	LDA.b !RAM_SMB3_Level_Player_XPosHi
	SEC
	SBC.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	BNE.b CODE_299499
	LDA.b !RAM_SMB3_Level_Player_XPosLo
	SEC
	SBC.w $0210
	CLC
	ADC.b #$08
	SEC
	SBC.w SMB3_OAMBuffer[$00].XDisp,y
	CMP.b #$09
	BCC.b CODE_2994A3
CODE_299499:
	SEP.b #$30
	LDY.b $00
	DEY
	BPL.b CODE_29944A
CODE_2994A0:
	SEP.b #$30
	RTL

CODE_2994A3:
	LDA.b !RAM_SMB3_Level_Player_DeathState
	BNE.b CODE_2994A0
	LDA.w SMB3_OAMBuffer[$00].YDisp,y
	CMP.b #$F0
	BEQ.b CODE_299499
	SEP.b #$10
	LDA.b $0E
	BEQ.b CODE_29951F
	LDA.b !RAM_SMB3_NorSprXXX_RotatingPeaPlatform_AngularSpeed,x
	BNE.b CODE_2994E3
	LDA.b !RAM_SMB3_Level_Player_YSpeed
	BPL.b CODE_2994C1
	LDA.b #$00
	STA.b !RAM_SMB3_Level_Player_YSpeed
	RTL

CODE_2994C1:
	LDA.b !RAM_SMB3_Global_ControllerHold1
	AND.b #(!Joypad_DPadL>>8)|(!Joypad_DPadR>>8)
	BNE.b CODE_2994D3
	LDA.b !RAM_SMB3_Level_Player_XSpeed
	BEQ.b CODE_2994D3
	BPL.b CODE_2994D1
	INC.b !RAM_SMB3_Level_Player_XSpeed
	INC.b !RAM_SMB3_Level_Player_XSpeed
CODE_2994D1:
	DEC.b !RAM_SMB3_Level_Player_XSpeed
CODE_2994D3:
	LDA.b #$00
	STA.b !RAM_SMB3_Level_Player_YSpeed
	STA.b $A6
	JSL.l CODE_299596
	LDA.b #$10
	STA.w $101F
	RTL

CODE_2994E3:
	LDA.b !RAM_SMB3_NorSprXXX_RotatingPeaPlatform_AngularSpeed,x
	LDY.b $00
	CPY.b #$04
	BCC.b CODE_2994ED
	EOR.b #$80
CODE_2994ED:
	ASL
	BCS.b CODE_299511
	LDA.b $05
	ASL
	ASL
	ASL
	STA.b !RAM_SMB3_Level_Player_YSpeed
	LDA.b $04
	EOR.b #$FF
CODE_2994FB:
	ASL
	ASL
	ASL
	BPL.b CODE_299508
	CMP.b #$C0
	BCS.b CODE_29950E
	LDA.b #$C0
	BNE.b CODE_29950E
CODE_299508:
	CMP.b #$40
	BCC.b CODE_29950E
	LDA.b #$40
CODE_29950E:
	STA.b !RAM_SMB3_Level_Player_XSpeed
	RTL

CODE_299511:
	LDA.b $04
	JSL.l CODE_2994FB
	LDA.b $05
	ASL
	ASL
	ASL
	STA.b !RAM_SMB3_Level_Player_YSpeed
	RTL

CODE_29951F:
	LDY.b $00
	LDA.b $94,x
	CMP.b #$10
	BCC.b CODE_299530
	CMP.b #$30
	BCS.b CODE_299530
	TYA
	CLC
	ADC.b #$07
	TAY
CODE_299530:
	LDA.b !RAM_SMB3_Level_Player_YSpeed
	BMI.b CODE_29953A
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$03
	BNE.b CODE_29954B
CODE_29953A:
	LDA.w DATA_21C63B,y
	LDY.b !RAM_SMB3_Level_Player_YSpeed
	BPL.b CODE_299546
	JSL.l SMB3_UnnecessaryInvertARt_Main
	ASL
CODE_299546:
	CLC
	ADC.b !RAM_SMB3_NorSprXXX_RotatingPeaPlatform_AngularSpeed,x
	STA.b !RAM_SMB3_NorSprXXX_RotatingPeaPlatform_AngularSpeed,x
CODE_29954B:
	LDA.b $04
	EOR.b $05
	BPL.b CODE_299557
	LDA.b $04
	BPL.b CODE_29955B
	BMI.b CODE_29955F					; Note: This will always branch

CODE_299557:
	LDA.b $04
	BPL.b CODE_29955F
CODE_29955B:
	JSL.l SMB3_UnnecessaryInvertARt_Main
CODE_29955F:
	LDY.b !RAM_SMB3_Level_Player_YSpeed
	BPL.b CODE_29956F
	JSL.l SMB3_UnnecessaryInvertARt_Main
	ASL
	STA.b !RAM_SMB3_Level_Player_XSpeed
	LDA.b #$00
	STA.b !RAM_SMB3_Level_Player_YSpeed
	RTL

CODE_29956F:
	LDY.b #$20
	STA.b $00
	ASL.b $00
	ROR
	NOP #6							; Optimization: That's a lot of NOPs...
	CLC
	ADC.b !RAM_SMB3_Level_Player_XSpeed
	CLC
	ADC.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	STA.b !RAM_SMB3_Level_Player_XSpeed
	BPL.b CODE_29958C
	JSL.l SMB3_UnnecessaryInvertARt_Main
	LDY.b #$E0
CODE_29958C:
	CMP.b #$20
	BCC.b CODE_299592
	STY.b !RAM_SMB3_Level_Player_XSpeed
CODE_299592:
	LDA.b #$10
	STA.b !RAM_SMB3_Level_Player_YSpeed
CODE_299596:
	LDA.b !RAM_SMB3_Level_Player_YPosLo
	PHA
	REP.b #$10
	LDY.b $0F
	LDA.w SMB3_OAMBuffer[$00].YDisp,y
	SEP.b #$10
	CLC
	ADC.w $0543
	SEC
	SBC.b #$18
	STA.b !RAM_SMB3_Level_Player_YPosLo
	PLA
	CMP.b !RAM_SMB3_Level_Player_YPosLo
	BCS.b CODE_2995B2
	DEC.b !RAM_SMB3_Level_Player_YPosHi
CODE_2995B2:
	LDA.b #$08
	STA.w $101F
	RTL
namespace off
	%SetDuplicateOrNullPointer(SMB3_NorSprXXX_RotatingPeaPlatform_Status02_WeightedPeaPlatformEntry, SMB3_NorSpr090_WeightedPeaPlatform_Status02_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSprXXX_RotatingPeaPlatform_Status02_AutoRotatingPeaPlatformEntry, SMB3_NorSpr091_AutoRotatingPeaPlatform_Status02_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSprXXX_RotatingPeaPlatform_Status02_Main, SMB3_NorSpr092_ClockwiseRotatingPeaPlatform_Status02_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSprXXX_RotatingPeaPlatform_Status02_Main, SMB3_NorSpr093_CounterclockwiseRotatingPeaPlatform_Status02_Main)
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSprXXX_GiantQuestionMarkBlock_Status01(Address)
namespace SMB3_NorSprXXX_GiantQuestionMarkBlock_Status01
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	BNE.b CODE_299879
	DEC.b !RAM_SMB3_Level_NorSpr_YPosHi,x
CODE_299879:
	DEC.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	LDY.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	LDA.w !RAM_SMB3_NorSprXXX_GiantQuestionMarkBlock_BlockHitFlags
	AND.w DATA_21C661,y
	BEQ.b CODE_299888
	INC.w !RAM_SMB3_NorSprXXX_GiantQuestionMarkBlock_AnimationFrame,x
CODE_299888:
	RTL
namespace off
	%SetDuplicateOrNullPointer(SMB3_NorSprXXX_GiantQuestionMarkBlock_Status01_Main, SMB3_NorSpr094_GiantQuestionMarkBlockWithThree1ups_Status01_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSprXXX_GiantQuestionMarkBlock_Status01_Main, SMB3_NorSpr095_GiantQuestionMarkBlockWithMushroom_Status01_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSprXXX_GiantQuestionMarkBlock_Status01_Main, SMB3_NorSpr096_GiantQuestionMarkBlockWithFireFlower_Status01_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSprXXX_GiantQuestionMarkBlock_Status01_Main, SMB3_NorSpr097_GiantQuestionMarkBlockWithRaccoonLeaf_Status01_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSprXXX_GiantQuestionMarkBlock_Status01_Main, SMB3_NorSpr098_GiantQuestionMarkBlockWithTanookiSuit_Status01_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSprXXX_GiantQuestionMarkBlock_Status01_Main, SMB3_NorSpr099_GiantQuestionMarkBlockWithFrogSuit_Status01_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSprXXX_GiantQuestionMarkBlock_Status01_Main, SMB3_NorSpr09A_GiantQuestionMarkBlockWithHammerSuit_Status01_Main)
endmacro

;--------------------------------------------------------------------

macro ROUTINE_SMB3_NorSprXXX_GiantQuestionMarkBlock_Status02(Address)
namespace SMB3_NorSprXXX_GiantQuestionMarkBlock_Status02
%InsertMacroAtXPosition(<Address>)

Main:
	JSL.l CODE_279BC4
	JSR.w CODE_299994
	LDA.b $9C
	BNE.b SMB3_NorSprXXX_GiantQuestionMarkBlock_Status01_CODE_299888
	LDA.b !RAM_SMB3_NorSprXXX_GiantQuestionMarkBlock_NumberOfItemsToSpawn,x
	BEQ.b CODE_2998AC
	LDA.w $0520,x
	BNE.b CODE_2998AC
	LDY.b #$04
CODE_29989F:
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,y
	BEQ.b CODE_2998A7
	DEY
	BNE.b CODE_29989F
CODE_2998A7:
	JSR.w CODE_299959
	DEC.b !RAM_SMB3_NorSprXXX_GiantQuestionMarkBlock_NumberOfItemsToSpawn,x
CODE_2998AC:
	LDY.w $0518,x
	LDA.w DATA_21C669,y
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	JSL.l CODE_27A7D9
	JSL.l CODE_27A313
	BCC.b CODE_299928
	LDA.b !RAM_SMB3_Level_Player_OnScreenYPos
	CLC
	ADC.b #$18
	CMP.b !RAM_SMB3_Level_NorSpr_OnScreenYPos,x
	BCS.b CODE_2998ED
	LDA.b !RAM_SMB3_Level_Player_YSpeed
	BMI.b CODE_2998EC
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	SEC
	SBC.b #$1F
	STA.b !RAM_SMB3_Level_Player_YPosLo
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	SBC.b #$00
	STA.b !RAM_SMB3_Level_Player_YPosHi
	LDY.b #$00
	STY.b $A6
	LDA.w $074D
	BPL.b CODE_2998E2
	DEY
CODE_2998E2:
	CLC
	ADC.b !RAM_SMB3_Level_Player_XPosLo
	STA.b !RAM_SMB3_Level_Player_XPosLo
	TYA
	ADC.b !RAM_SMB3_Level_Player_XPosHi
	STA.b !RAM_SMB3_Level_Player_XPosHi
CODE_2998EC:
	RTL

CODE_2998ED:
	LDA.b #$E8
	LDY.b !RAM_SMB3_Level_Player_CurrentPowerUp
	BEQ.b CODE_2998F8
	LDY.w $056F
	BEQ.b CODE_2998FA
CODE_2998F8:
	LDA.b #$F8
CODE_2998FA:
	CLC
	ADC.b !RAM_SMB3_Level_Player_OnScreenYPos
	CMP.b !RAM_SMB3_Level_NorSpr_OnScreenYPos,x
	BCC.b CODE_299912
	LDA.b !RAM_SMB3_Level_Player_YSpeed
	BPL.b CODE_299911
	LDA.b #!Define_SMAS_Sound0060_HitHead
	STA.w !RAM_SMB3_Global_SoundCh1
	LDA.b #$10
	STA.b !RAM_SMB3_Level_Player_YSpeed
	JSR.w CODE_29992B
CODE_299911:
	RTL

CODE_299912:
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	INY
	LDA.b !RAM_SMB3_Global_ControllerHold1
	AND.b #(!Joypad_DPadL>>8)|(!Joypad_DPadR>>8)
	STA.b $00
	LDA.b #$00
	CPY.b $00
	BNE.b CODE_299926
	LDA.w DATA_299929-$01,y					; Glitch: This reads from bank 21! The bytes read are db $B1,$FD, which means you can be pulled into the block when touching the right side.
CODE_299926:
	STA.b !RAM_SMB3_Level_Player_XSpeed
CODE_299928:
	RTL

DATA_299929:
	db $04,$FC

CODE_29992B:
	LDA.w !RAM_SMB3_NorSprXXX_GiantQuestionMarkBlock_AnimationFrame,x
	BNE.b CODE_299958
	LDY.b #$05
	JSR.w CODE_299959
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_NorSpr094_GiantQuestionMarkBlockWithThree1ups
	BNE.b CODE_299940
	LDA.b #$02
	STA.b !RAM_SMB3_NorSprXXX_GiantQuestionMarkBlock_NumberOfItemsToSpawn,x
CODE_299940:
	LDA.b #$40
	STA.w !RAM_SMB3_Level_ShakeLayer1Timer
	LDA.b #$0A
	STA.w $0518,x
	INC.w !RAM_SMB3_NorSprXXX_GiantQuestionMarkBlock_AnimationFrame,x
	LDY.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	LDA.w !RAM_SMB3_NorSprXXX_GiantQuestionMarkBlock_BlockHitFlags
	ORA.w DATA_21C661,y
	STA.w !RAM_SMB3_NorSprXXX_GiantQuestionMarkBlock_BlockHitFlags
CODE_299958:
	RTS

CODE_299959:
	LDA.b #$01
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,y
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	CLC
	ADC.b #$08
	STA.w !RAM_SMB3_Level_NorSpr_XPosLo,y
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	ADC.b #$00
	STA.w !RAM_SMB3_Level_NorSpr_XPosHi,y
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	STA.w !RAM_SMB3_Level_NorSpr_YPosLo,y
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	STA.w !RAM_SMB3_Level_NorSpr_YPosHi,y
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	TAX
	LDA.w DATA_21C673-!Define_SMB3_SpriteID_NorSpr094_GiantQuestionMarkBlockWithThree1ups,x
	STA.w !RAM_SMB3_Level_NorSpr_SpriteID,y
	LDA.w DATA_21C67A-!Define_SMB3_SpriteID_NorSpr094_GiantQuestionMarkBlockWithThree1ups,x
	STA.w $0586
	LDA.b #$01
	STA.w $057D
	LDX.b $9B
	LDA.b #$50
	STA.w $0520,x
	RTS

CODE_299994:
	JSL.l CODE_279DF9
	LDX.b $9B
	REP.b #$10
	LDY.b $C6,x
	STY.b $0A
	LDA.b $07
	STA.b $0E
	LDA.w !RAM_SMB3_NorSprXXX_GiantQuestionMarkBlock_AnimationFrame,x
	LDX.w #$0006
	CMP.b #$00
	BEQ.b CODE_2999AF
	INX
CODE_2999AF:
	ASL.b $0E
	BCS.b CODE_2999D7
	LDA.b $04
	STA.b $0F
	LDA.b $00
	LSR.b $0F
	BCS.b CODE_2999C6
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$01].YDisp,y
CODE_2999C6:
	LDA.b $00
	LSR.b $0F
	BCS.b CODE_2999D7
	ADC.b #$10
	STA.w SMB3_OAMBuffer[$02].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$03].YDisp,y
CODE_2999D7:
	LDA.w DATA_21C681,x
	STA.w SMB3_OAMBuffer[$00].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$01].Tile,y
	LDA.w DATA_21C689,x
	STA.w SMB3_OAMBuffer[$02].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$03].Tile,y
	LDA.b #$21
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$01].Prop,y
	STA.w SMB3_OAMBuffer[$02].Prop,y
	STA.w SMB3_OAMBuffer[$03].Prop,y
	LDA.b $01
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	STA.w SMB3_OAMBuffer[$02].XDisp,y
	STA.w SMB3_OAMBuffer[$03].XDisp,y
	CLC
	ADC.b #$08
	STA.b $01
	REP.b #$20
	PHY
	TYA
	LSR
	LSR
	TAY
	LDA.w #$0000
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$02].Slot,y
	PLY
	TYA
	CLC
	ADC.w #$0010
	TAY
	SEP.b #$20
	DEX
	DEX
	BMI.b CODE_299A48
	CPX.w #$0002
	BCC.b CODE_299A31
	JMP.w CODE_2999AF

CODE_299A31:
	SEP.b #$10
	PHX
	LDX.b $9B
	JSL.l CODE_27A19E
	PLX
	LDY.b $9B
	REP.b #$30
	LDA.w $00C6,y
	TAY
	SEP.b #$20
	JMP.w CODE_2999AF

CODE_299A48:
	SEP.b #$10
	LDX.b $9B
	LDA.w $0520,x
	BEQ.b CODE_299A95
	REP.b #$10
	LDY.b $0A
	LDX.w #$0000
CODE_299A58:
	REP.b #$20
	LDA.w SMB3_OAMBuffer[$04].XDisp,y
	STA.w SMB3_OAMBuffer[$0C].XDisp,x
	INY
	INY
	INX
	INX
	CPX.w #$0010
	BCS.b CODE_299A76
	CPX.w #$0008
	BNE.b CODE_299A58
	TYA
	CLC
	ADC.w #$0008
	TAY
	BNE.b CODE_299A58
CODE_299A76:
	LDA.w #$0000
	STA.w SMB3_OAMTileSizeBuffer[$0C].Slot
	STA.w SMB3_OAMTileSizeBuffer[$0D].Slot
	STA.w SMB3_OAMTileSizeBuffer[$0E].Slot
	STA.w SMB3_OAMTileSizeBuffer[$0F].Slot
	SEP.b #$20
	LDA.b #$F0
	STA.w $07FD,y
	STA.w $07F9,y
	STA.w SMB3_OAMBuffer[$03].YDisp,y
	STA.w SMB3_OAMBuffer[$02].YDisp,y
CODE_299A95:
	SEP.b #$10
	LDX.b $9B
	RTS
namespace off
	%SetDuplicateOrNullPointer(SMB3_NorSprXXX_GiantQuestionMarkBlock_Status02_Main, SMB3_NorSpr094_GiantQuestionMarkBlockWithThree1ups_Status02_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSprXXX_GiantQuestionMarkBlock_Status02_Main, SMB3_NorSpr095_GiantQuestionMarkBlockWithMushroom_Status02_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSprXXX_GiantQuestionMarkBlock_Status02_Main, SMB3_NorSpr096_GiantQuestionMarkBlockWithFireFlower_Status02_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSprXXX_GiantQuestionMarkBlock_Status02_Main, SMB3_NorSpr097_GiantQuestionMarkBlockWithRaccoonLeaf_Status02_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSprXXX_GiantQuestionMarkBlock_Status02_Main, SMB3_NorSpr098_GiantQuestionMarkBlockWithTanookiSuit_Status02_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSprXXX_GiantQuestionMarkBlock_Status02_Main, SMB3_NorSpr099_GiantQuestionMarkBlockWithFrogSuit_Status02_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSprXXX_GiantQuestionMarkBlock_Status02_Main, SMB3_NorSpr09A_GiantQuestionMarkBlockWithHammerSuit_Status02_Main)
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr09E_Podoboo_Status01(Address)
namespace SMB3_NorSpr09E_Podoboo_Status01
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	CLC
	ADC.b #$08
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	STA.b !RAM_SMB3_NorSpr09E_Podoboo_InitialYPosLo,x
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	STA.b !RAM_SMB3_NorSpr09E_Podoboo_InitialYPosHi,x
	RTL
namespace off
endmacro

;--------------------------------------------------------------------

macro ROUTINE_SMB3_NorSpr09E_Podoboo_Status02(Address)
namespace SMB3_NorSpr09E_Podoboo_Status02
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.w !RAM_SMB3_NorSpr09E_Podoboo_AnimationFrameCounter,x
	BEQ.b CODE_298018
	DEC.w !RAM_SMB3_NorSpr09E_Podoboo_AnimationFrameCounter,x
CODE_298018:
	LDA.w !RAM_SMB3_NorSpr09E_Podoboo_WaitBeforeNextJump,x
	BNE.b CODE_298066
	LDA.w !RAM_SMB3_NorSpr09E_Podoboo_AnimationFrameCounter,x
	BNE.b CODE_298066
	LDY.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	BPL.b CODE_298066
	CPY.b #$E0
	BCS.b CODE_298066
	LDA.b #$04
	STA.w !RAM_SMB3_NorSpr09E_Podoboo_AnimationFrameCounter,x
	JSL.l SMB3_FindFreeExtendedSpriteSlot_FixedPriority
	LDA.w !REGISTER_SoftwareLatchForHVCounter
	LDA.w !REGISTER_HCounter
	AND.b #$07
	CLC
	ADC.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	STA.w !RAM_SMB3_Level_ExtSpr_XPosLo,y
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	ADC.b #$00
	STA.w !RAM_SMB3_Level_ExtSpr_XPosHi,y
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	CLC
	ADC.b #$0E
	STA.w !RAM_SMB3_Level_ExtSpr_YPosLo,y
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	ADC.b #$00
	STA.w !RAM_SMB3_Level_ExtSpr_YPosHi,y
	LDA.b #$00
	STA.w $06BD,y
	LDA.b #$04
	STA.w $06D1,y
	LDA.b #!Define_SMB3_SpriteID_ExtSpr17_PodobooFire
	STA.w !RAM_SMB3_Level_ExtSpr_SpriteID,y
CODE_298066:
	LDA.w !RAM_SMB3_NorSpr09E_Podoboo_WaitBeforeNextJump,x
	BEQ.b CODE_2980B6
	STA.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,x
	CMP.b #$01
	BNE.b CODE_2980B5
	LDA.b #!Define_SMAS_Sound0063_Podoboo
	STA.w !RAM_SMB3_Global_SoundCh3
CODE_298077:
	JSL.l SMB3_CheckIfSpriteIsHorizontallyOffScreen_Main
	LDY.b #$08
	JSL.l SMB3_FindFreeExtendedSpriteSlot_VariablePriority
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	STA.w !RAM_SMB3_Level_ExtSpr_XPosLo,y
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	STA.w !RAM_SMB3_Level_ExtSpr_XPosHi,y
	LDA.w !RAM_SMB3_NorSpr09E_Podoboo_WaitBeforeNextJump,x
	BEQ.b CODE_29809C
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	STA.w !RAM_SMB3_Level_ExtSpr_YPosLo,y
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	STA.w !RAM_SMB3_Level_ExtSpr_YPosHi,y
	BRA.b CODE_2980AB

CODE_29809C:
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	CLC
	ADC.b #$04
	STA.w !RAM_SMB3_Level_ExtSpr_YPosLo,y
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	ADC.b #$00
	STA.w !RAM_SMB3_Level_ExtSpr_YPosHi,y
CODE_2980AB:
	LDA.b #!Define_SMB3_SpriteID_ExtSpr18_LavaSplash
	STA.w !RAM_SMB3_Level_ExtSpr_SpriteID,y
	LDA.b #$18
	STA.w $06D1,y
CODE_2980B5:
	RTL

CODE_2980B6:
	LDA.b $9C
	BEQ.b CODE_2980BD
	JMP.w CODE_298143

CODE_2980BD:
	JSL.l CODE_279B70
	LDA.b #$00
	LDY.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	BMI.b CODE_2980C9
	LDA.b #$80
CODE_2980C9:
	STA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$03
	BNE.b CODE_2980E1
	INC.w !RAM_SMB3_NorSpr09E_Podoboo_AnimationFrame,x
	LDA.w !RAM_SMB3_NorSpr09E_Podoboo_AnimationFrame,x
	CMP.b #$03
	BNE.b CODE_2980E1
	LDA.b #$00
	STA.w !RAM_SMB3_NorSpr09E_Podoboo_AnimationFrame,x
CODE_2980E1:
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	BMI.b CODE_298129
	JSL.l CODE_278B93
	LDA.w $1F76
	CMP.b #$94
	BNE.b CODE_298129
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	SEC
	SBC.b !RAM_SMB3_NorSpr09E_Podoboo_InitialYPosLo,x
	STA.b $00
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	SBC.b !RAM_SMB3_NorSpr09E_Podoboo_InitialYPosHi,x
	LSR
	ROR.b $00
	LDA.b $00
	LSR
	LSR
	LSR
	TAY
	LDA.w DATA_21C548,y
	BMI.b CODE_29810E
	STA.w !RAM_SMB3_NorSpr09E_Podoboo_ExtendYSpeedTimer,x
	LDA.b #$80
CODE_29810E:
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	PHA
	SBC.b #$04
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	JSL.l CODE_298077
	PLA
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	LDA.w !RAM_SMB3_Global_RandomByte02,x
	AND.b #$3F
	ORA.b #$40
	STA.w !RAM_SMB3_NorSpr09E_Podoboo_WaitBeforeNextJump,x
	RTL

CODE_298129:
	JSL.l CODE_27A7E5
	LDA.w !RAM_SMB3_NorSpr09E_Podoboo_ExtendYSpeedTimer,x
	BNE.b CODE_29813F
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	BMI.b CODE_29813A
	CMP.b #$70
	BCS.b CODE_29813F
CODE_29813A:
	CLC
	ADC.b #$02
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_29813F:
	JSL.l CODE_279BC4
CODE_298143:
	JSL.l CODE_279EDE
	RTL
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr09F_Parabuzzy_Status01(Address)
namespace SMB3_NorSpr09F_Parabuzzy_Status01
%InsertMacroAtXPosition(<Address>)

Main:
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.w DATA_21C61C,y
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_2992DD:
	RTL
namespace off
endmacro

;--------------------------------------------------------------------

macro ROUTINE_SMB3_NorSpr09F_Parabuzzy_Status02(Address)
namespace SMB3_NorSpr09F_Parabuzzy_Status02
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	BPL.b CODE_2992E6
	JSL.l SMB3_UnnecessaryInvertARt_Main
CODE_2992E6:
	CMP.b #$10
	LDA.b #$01
	BCC.b CODE_2992EE
	ADC.b #$00
CODE_2992EE:
	STA.w $1FE9,x
	JSL.l CODE_279BC4
	JSR.w CODE_2992C8
	LDA.w !RAM_SMB3_NorSpr09F_Parabuzzy_AnimationFrameCounter,x
	LSR
	LSR
	LSR
	AND.b #$01
	STA.w !RAM_SMB3_NorSpr09F_Parabuzzy_AnimationFrame,x
	JSL.l CODE_279EBC
	LDA.b $9C
	BNE.b SMB3_NorSpr09F_Parabuzzy_Status01_CODE_2992DD
	INC.w !RAM_SMB3_NorSpr09F_Parabuzzy_AnimationFrameCounter,x
	JSL.l CODE_27A7E5
	JSL.l CODE_27A7F0
	LDA.w $0797,x
	STA.w $1CEF
	INC.w !RAM_SMB3_Level_ConsecutiveEnemiesStompedCounter
	JSL.l CODE_279B70
	DEC.w !RAM_SMB3_Level_ConsecutiveEnemiesStompedCounter
	LDA.w $0797,x
	BEQ.b CODE_299397
	CMP.w $1CEF
	BEQ.b CODE_29933A
	LDA.b #$0C
	LDY.b !RAM_SMB3_Level_Player_CurrentPowerUp
	BEQ.b CODE_299338
	LDA.b #$14
CODE_299338:
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_29933A:
	INC.w !RAM_SMB3_NorSpr09F_Parabuzzy_AnimationFrameCounter,x
	INC.w !RAM_SMB3_NorSpr09F_Parabuzzy_AnimationFrameCounter,x
	LDA.b #$F4
	LDY.b !RAM_SMB3_Level_Player_CurrentPowerUp
	BNE.b CODE_299348
	LDA.b #$F0
CODE_299348:
	CMP.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	BPL.b CODE_299350
	DEC.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	DEC.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_299350:
	INC.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	LDA.b #$05
	STA.w $101F
	LDA.b !RAM_SMB3_Level_Player_YSpeed
	BMI.b CODE_299396
	LDY.b #$00
	LDA.w $074D
	BPL.b CODE_299363
	DEY
CODE_299363:
	CLC
	ADC.b !RAM_SMB3_Level_Player_XPosLo
	STA.b !RAM_SMB3_Level_Player_XPosLo
	TYA
	ADC.b !RAM_SMB3_Level_Player_XPosHi
	STA.b !RAM_SMB3_Level_Player_XPosHi
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	SEC
	SBC.b #$1B
	STA.b !RAM_SMB3_Level_Player_YPosLo
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	SBC.b #$00
	STA.b !RAM_SMB3_Level_Player_YPosHi
	LDA.b #$00
	STA.b !RAM_SMB3_Level_Player_YSpeed
	STA.b $A6
	LDA.b !RAM_SMB3_Global_ControllerHold1
	AND.b #(!Joypad_DPadL>>8)|(!Joypad_DPadR>>8)
	BNE.b CODE_299396
	JSL.l CODE_279DDA
	LDA.b !RAM_SMB3_Level_Player_XSpeed
	BEQ.b CODE_299396
	BPL.b CODE_299394
	INC.b !RAM_SMB3_Level_Player_XSpeed
	INC.b !RAM_SMB3_Level_Player_XSpeed
CODE_299394:
	DEC.b !RAM_SMB3_Level_Player_XSpeed
CODE_299396:
	RTL

CODE_299397:
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	BEQ.b CODE_2993A3
	BPL.b CODE_2993A1
	INC.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	INC.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_2993A1:
	DEC.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_2993A3:
	RTL
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSprXXX_OutlinePlatform_Status02(Address)
namespace SMB3_NorSprXXX_OutlinePlatform_Status02
%InsertMacroAtXPosition(<Address>)

Main:
	JSR.w CODE_29915E
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenYPos,x
	CMP.b #$C8
	BCC.b CODE_299086
CODE_299080:
	LDA.b #$00
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
CODE_299085:
	RTL

CODE_299086:
	LDA.b $9C
	BNE.b CODE_299085
	LDA.w $0565
	AND.b #$03
	BNE.b CODE_299095
	DEC.b !RAM_SMB3_NorSprXXX_OutlinePlatform_DespawnTimer,x
	BEQ.b CODE_299080
CODE_299095:
	JSL.l CODE_279BC4
	LDY.b !RAM_SMB3_NorSprXXX_OutlinePlatform_MovementDirection,x
	LDA.w DATA_21C5F7,y
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	LDA.w DATA_21C5FB,y
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	JSL.l CODE_27A7E5
	JSL.l CODE_27A7F0
	LDA.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	JSL.l CODE_27A313
	BCC.b CODE_29912B
	LDA.b !RAM_SMB3_Level_Player_OnScreenYPos
	CLC
	ADC.b #$18
	CMP.b !RAM_SMB3_Level_NorSpr_OnScreenYPos,x
	BCS.b CODE_29912C
	LDA.b !RAM_SMB3_Level_Player_YSpeed
	BMI.b CODE_29912B
	LDY.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CPY.b #!Define_SMB3_SpriteID_NorSpr0A9_SwitchableOutlinePlatform
	BNE.b CODE_2990E2
	CMP.b #$10
	BCC.b CODE_2990E2
	LDA.b #!Define_SMAS_Sound0063_StepOnLevelTile
	STA.w !RAM_SMB3_Global_SoundCh3
	LDA.b #$08
	STA.w !RAM_SMB3_NorSprXXX_OutlinePlatform_SwitchDirectionTimer,x
	LDA.b !RAM_SMB3_NorSprXXX_OutlinePlatform_MovementDirection,x
	CLC										;\ Optimization: INC
	ADC.b #$01									;/
	AND.b #$03
	STA.b !RAM_SMB3_NorSprXXX_OutlinePlatform_MovementDirection,x
CODE_2990E2:
	STZ.b !RAM_SMB3_Level_Player_YSpeed
	STZ.b $A6
	LDA.b #$01
	STA.w $07BD
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	SEC
	SBC.b #$1F
	STA.b !RAM_SMB3_Level_Player_YPosLo
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	SBC.b #$00
	STA.b !RAM_SMB3_Level_Player_YPosHi
	LDY.b #$00
	LDA.w $074D
	BPL.b CODE_299100
	DEY
CODE_299100:
	CLC
	ADC.b !RAM_SMB3_Level_Player_XPosLo
	STA.b !RAM_SMB3_Level_Player_XPosLo
	TYA
	ADC.b !RAM_SMB3_Level_Player_XPosHi
	STA.b !RAM_SMB3_Level_Player_XPosHi
	JSR.w CODE_299282
	BCC.b CODE_29912B
	STA.b $00
	LDA.b #$00
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	LDY.w $0560
	LDA.w SMB3_SpikeMap16TilePerTileset,y
	CMP.b #$FF
	BEQ.b CODE_29912B
	SEC
	SBC.b $00
	CMP.b #$02
	BCS.b CODE_29912B
	JSL.l CODE_27A4C7
CODE_29912B:
	RTL

CODE_29912C:
	LDA.b #$F8
	LDY.b !RAM_SMB3_Level_Player_CurrentPowerUp
	BNE.b CODE_299134
	LDA.b #$08
CODE_299134:
	CLC
	ADC.b !RAM_SMB3_Level_Player_OnScreenYPos
	CMP.b !RAM_SMB3_Level_NorSpr_OnScreenYPos,x
	BCC.b CODE_299144
	LDA.b !RAM_SMB3_Level_Player_YSpeed
	BPL.b CODE_299143
	LDA.b #$10
	STA.b !RAM_SMB3_Level_Player_YSpeed
CODE_299143:
	RTL

CODE_299144:
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	BEQ.b CODE_299159
	LDA.b !RAM_SMB3_Level_Player_XPosLo
	SEC
	SBC.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	EOR.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	BMI.b CODE_299156
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	STA.b !RAM_SMB3_Level_Player_XSpeed
	RTL

CODE_299156:
	STZ.b !RAM_SMB3_Level_Player_XSpeed
	RTL

CODE_299159:
	JSL.l SMB3_NorSprXXX_GiantQuestionMarkBlock_Status02_CODE_299912
	RTL

CODE_29915E:
	JSL.l SMB3_GetNormalSpriteOnScreenPosition_Main
	LDA.b #$00
	STA.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,x
	LDA.b !RAM_SMB3_NorSprXXX_OutlinePlatform_DespawnTimer,x
	CMP.b #$20
	BCS.b CODE_29917C
	LSR
	LSR
	LSR
	TAY
	LDA.w $0565
	AND.w DATA_21C618,y
	BNE.b CODE_29917C
	BRL.w CODE_29922A

CODE_29917C:
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenXPos,x
	STA.b $01
	LDY.b !RAM_SMB3_NorSprXXX_OutlinePlatform_MovementDirection,x
	LDA.w !RAM_SMB3_NorSprXXX_OutlinePlatform_SwitchDirectionTimer,x
	BEQ.b CODE_299189
	LDY.b #$04
CODE_299189:
	STY.b $02
	STZ.b $03
	LDA.b $C6,x
	STA.b $DA
	LDA.b $C7,x
	STA.b $DB
	JSL.l CODE_27A19E
	LDA.b $C6,x
	STA.b $DC
	LDA.b $C7,x
	STA.b $DD
	REP.b #$10
	LDY.b $DA
	STZ.b $D8
	STZ.b $D9
CODE_2991A9:
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenYPos,x
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$01].YDisp,y
	LDA.b $01
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	CLC
	ADC.b #$08
	STA.b $01
	REP.b #$20
	LDA.b $02
	ASL
	ASL
	ADC.b $D8
	TAX
	SEP.b #$20
	LDA.w DATA_21C5FF,x
	STA.w SMB3_OAMBuffer[$00].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$01].Tile,y
	LDX.b $02
	LDA.w DATA_21C613,x
	CPX.w #$0004
	BNE.b CODE_2991E9
	LDX.b $D8
	CPX.w #$0002
	BNE.b CODE_2991E9
	LDA.b #$44
CODE_2991E9:
	ORA.b #$20
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$01].Prop,y
	PHY
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b #$00
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	PLY
	PHY
	JSR.w CODE_29922B
	PLY
	REP.b #$20
	TYA
	CLC
	ADC.w #$0008
	TAY
	LDA.b $DC
	CLC
	ADC.w #$0008
	STA.b $DC
	LDA.b $9B
	AND.w #$00FF
	TAX
	SEP.b #$20
	INC.b $D8
	LDA.b $D8
	CMP.b #$04
	BNE.b CODE_2991A9
	SEP.b #$10
CODE_29922A:
	RTS

CODE_29922B:
	LDA.w !RAM_SMB3_Level_IsVerticalLevelFlag
	BEQ.b CODE_29922A
	LDA.w SMB3_OAMBuffer[$00].XDisp,y
	CMP.b #$F8
	BCC.b CODE_29922A
	LDX.b $DC
	LDA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$00].XDisp,x
	STA.w SMB3_OAMBuffer[$01].XDisp,x
	LDA.w SMB3_OAMBuffer[$00].YDisp,y
	STA.w SMB3_OAMBuffer[$00].YDisp,x
	LDA.w SMB3_OAMBuffer[$01].YDisp,y
	STA.w SMB3_OAMBuffer[$01].YDisp,x
	LDA.w SMB3_OAMBuffer[$00].Tile,y
	STA.w SMB3_OAMBuffer[$00].Tile,x
	LDA.w SMB3_OAMBuffer[$01].Tile,y
	STA.w SMB3_OAMBuffer[$01].Tile,x
	LDA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$00].Prop,x
	LDA.w SMB3_OAMBuffer[$01].Prop,y
	STA.w SMB3_OAMBuffer[$01].Prop,x
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	TXA
	LSR
	LSR
	TAX
	SEP.b #$20
	LDA.b #$00
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,x
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,x
	INC
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	RTS

CODE_299282:
	LDA.b #$06
	LDY.w $056F
	BNE.b CODE_29928D
	LDY.b !RAM_SMB3_Level_Player_CurrentPowerUp
	BNE.b CODE_29928F
CODE_29928D:
	LDA.b #$12
CODE_29928F:
	ADC.b !RAM_SMB3_Level_Player_YPosLo
	AND.b #$F0
	STA.b $02
	LDA.b !RAM_SMB3_Level_Player_YPosHi
	ADC.b #$00
	CMP.b #$10
	BCS.b CODE_2992C6
	ADC.b #$20
	STA.b $01
	STA.b $D9
	LDA.b !RAM_SMB3_Level_Player_XPosLo
	CLC
	ADC.b #$08
	LSR
	LSR
	LSR
	LSR
	ORA.b $02
	STA.b $00
	STA.b $D8
	LDA.b #$7E2000>>16
	STA.b $DA
	LDY.b #$00
	LDA.b [$D8],y
	PHA
	ASL
	ROL
	ROL
	AND.b #$03
	TAY
	PLA
	CMP.w !RAM_SMB3_Global_Map16WallTileAttributeTable,y
	RTS

CODE_2992C6:
	CLC
	RTS
namespace off
	%SetDuplicateOrNullPointer(SMB3_NorSprXXX_OutlinePlatform_Status02_Main, SMB3_NorSpr0A8_StaticOutlinePlatform_Status02_Main)
	%SetDuplicateOrNullPointer(SMB3_NorSprXXX_OutlinePlatform_Status02_Main, SMB3_NorSpr0A9_SwitchableOutlinePlatform_Status02_Main)
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr0AA_AirshipPropeller_Status01(Address)
namespace SMB3_NorSpr0AA_AirshipPropeller_Status01
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	CLC
	ADC.b #$03
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
CODE_2988BB:
	RTL
namespace off
endmacro

;--------------------------------------------------------------------

macro ROUTINE_SMB3_NorSpr0AA_AirshipPropeller_Status02(Address)
namespace SMB3_NorSpr0AA_AirshipPropeller_Status02
%InsertMacroAtXPosition(<Address>)

Main:
	JSL.l CODE_279BC4
	LDA.w !RAM_SMB3_Level_NorSpr_YOffscreenFlag,x
	BNE.b SMB3_NorSpr0AA_AirshipPropeller_Status01_CODE_2988BB
	JSL.l SMB3_GetNormalSpriteOnScreenPosition_Main
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenYPos,x
	STA.b $00
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	XBA
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	REP.b #$30
	SEC
	SBC.w $0210
	STA.b $D8
	STA.b $DA
	SEP.b #$20
	LDY.b $C6,x
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenXPos,x
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$02].XDisp,y
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	STA.w SMB3_OAMBuffer[$03].XDisp,y
	LDA.b #$D0
	STA.w SMB3_OAMBuffer[$00].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$02].Tile,y
	LDA.b #$D2
	STA.w SMB3_OAMBuffer[$01].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$03].Tile,y
	LDA.b #$2C
	STA.b $02
	LDX.w #$0000
	LDA.w $0565
	AND.b #$02
	BEQ.b CODE_298913
	LDA.b #$AC
	STA.b $02
	INX
CODE_298913:
	LDA.w $0565
	LSR
	LSR
	LSR
	LDA.b $02
	STA.w SMB3_OAMBuffer[$01].Prop,y
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$02].Prop,y
	STA.w SMB3_OAMBuffer[$03].Prop,y
	BCC.b CODE_298949
	ORA.b #$40
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$02].Prop,y
	LDA.w SMB3_OAMBuffer[$00].XDisp,y
	CLC
	ADC.b #$02
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$02].XDisp,y
	REP.b #$20
	LDA.b $D8
	CLC
	ADC.w #$0002
	STA.b $D8
	SEP.b #$20
CODE_298949:
	LDA.w SMB3_OAMBuffer[$00].Prop,y
	AND.b #$80
	BEQ.b CODE_29896C
	LDA.w SMB3_OAMBuffer[$00].Tile,y
	PHA
	LDA.w SMB3_OAMBuffer[$02].Tile,y
	STA.w SMB3_OAMBuffer[$00].Tile,y
	PLA
	STA.w SMB3_OAMBuffer[$02].Tile,y
	LDA.w SMB3_OAMBuffer[$01].Tile,y
	PHA
	LDA.w SMB3_OAMBuffer[$03].Tile,y
	STA.w SMB3_OAMBuffer[$01].Tile,y
	PLA
	STA.w SMB3_OAMBuffer[$03].Tile,y
CODE_29896C:
	LDA.b $00
	CLC
	ADC.w DATA_21C5CB,x
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$02].YDisp,y
	LDA.b $00
	CLC
	ADC.w DATA_21C5CD,x
	STA.w SMB3_OAMBuffer[$01].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$03].YDisp,y
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b $D9
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$02].Slot,y
	LDA.b $DB
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$03].Slot,y
	SEP.b #$10
	LDX.b $9B
	RTL
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr0AD_RockyWrench_Status01(Address)
namespace SMB3_NorSpr0AD_RockyWrench_Status01
%InsertMacroAtXPosition(<Address>)

Main:
	INC.b $4D,x
CODE_2989FB:
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.w DATA_21C5CF,y
	STA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	RTL
namespace off
endmacro

;--------------------------------------------------------------------

macro ROUTINE_SMB3_NorSpr0AD_RockyWrench_Status02(Address)
namespace SMB3_NorSpr0AD_RockyWrench_Status02
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	CMP.b #$02
	BEQ.b CODE_298A11
	JSR.w CODE_298BF2
	RTL

CODE_298A11:
	LDA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	AND.b #$40
	ORA.b #$10
	STA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	JSL.l CODE_279BC4
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	XBA
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	REP.b #$20
	SEC
	SBC.w $0210
	BPL.b CODE_298A30
	EOR.w #$FFFF
	INC
CODE_298A30:
	CMP.w #$0140
	BCS.b CODE_298A9D
	LDA.b $C6,x
	CLC
	ADC.w #$0010
	STA.b $C6,x
	SEP.b #$20
	JSL.l CODE_279EBC
	LDA.w !RAM_SMB3_NorSpr0AD_RockyWrench_AnimationFrame,x
	CMP.b #$01
	BNE.b CODE_298A9D
	JSL.l SMB3_CheckIfNormalSpriteOffScreen_Main
	BNE.b CODE_298A9D
	REP.b #$10
	LDY.b $C6,x
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenYPos,x
	SEC
	SBC.b #$08
	STA.w SMB3_OAMBuffer[$00].YDisp-$10,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$01].YDisp-$10,y
	LDA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	ASL
	ASL
	LDA.b #$00
	BCS.b CODE_298A6D
	LDA.b #$08
CODE_298A6D:
	CLC
	ADC.b !RAM_SMB3_Level_NorSpr_OnScreenXPos,x
	STA.w SMB3_OAMBuffer[$00].XDisp-$10,y
	STA.w SMB3_OAMBuffer[$01].XDisp-$10,y
	LDA.b #$F2
	STA.w SMB3_OAMBuffer[$00].Tile-$10,y
	INC
	STA.w SMB3_OAMBuffer[$01].Tile-$10,y
	LDA.b #$20
	STA.w SMB3_OAMBuffer[$00].Prop-$10,y
	STA.w SMB3_OAMBuffer[$01].Prop-$10,y
	PHY
	REP.b #$20
	TYA
	SEC
	SBC.w #$0010
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b #$00
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	PLY
CODE_298A9D:
	SEP.b #$30
	LDA.b $9C
	BNE.b CODE_298AA9
	JSR.w CODE_298B58
	JSR.w CODE_298AAA
CODE_298AA9:
	RTL

CODE_298AAA:
	LDA.b !RAM_SMB3_NorSpr0AD_RockyWrench_CurrentState,x
	JSL.l SMB3_ExecutePtr_Absolute

DATA_298AB0:
	dw CODE_298ABE
	dw CODE_298AD7
	dw CODE_298AE7
	dw CODE_298AFC
	dw CODE_298B04
	dw CODE_298B22
	dw CODE_298B47

CODE_298ABE:
	LDA.w !RAM_SMB3_NorSpr0AD_RockyWrench_PhaseTimer,x
	BNE.b CODE_298AE6
	JSL.l SMB3_NorSpr0AD_RockyWrench_Status01_CODE_2989FB
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	CLC
	ADC.b #$08
	AND.b #$F0
	SEC
	SBC.b #$06
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	BCS.b CODE_298AD7
	DEC.b !RAM_SMB3_Level_NorSpr_YPosHi,x
CODE_298AD7:
	LDA.w !RAM_SMB3_NorSpr0AD_RockyWrench_PhaseTimer,x
	BNE.b CODE_298AE6
	INC.b !RAM_SMB3_NorSpr0AD_RockyWrench_CurrentState,x
	LDY.b !RAM_SMB3_NorSpr0AD_RockyWrench_CurrentState,x
	LDA.w DATA_21C5D1,y
	STA.w !RAM_SMB3_NorSpr0AD_RockyWrench_PhaseTimer,x
CODE_298AE6:
	RTS

CODE_298AE7:
	LDA.b #$00
	JSR.w CODE_298AFE
	LDA.w !RAM_SMB3_NorSpr0AD_RockyWrench_PhaseTimer,x
	LSR
	BCS.b CODE_298AFB
	DEC.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	LDY.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	INY
	BNE.b CODE_298AFB
	DEC.b !RAM_SMB3_Level_NorSpr_YPosHi,x
CODE_298AFB:
	RTS

CODE_298AFC:
	LDA.b #$01
CODE_298AFE:
	STA.w !RAM_SMB3_NorSpr0AD_RockyWrench_AnimationFrame,x
	JMP.w CODE_298AD7

CODE_298B04:
	LDA.b #$02
	JSR.w CODE_298AFE
	LDA.w !RAM_SMB3_NorSpr0AD_RockyWrench_PhaseTimer,x
	CMP.b #$1F
	BNE.b CODE_298B21
	LDA.w !RAM_SMB3_Level_NorSpr_YOffscreenFlag,x
	BNE.b CODE_298B21
	LDA.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,x
	AND.b #$C0
	CMP.b #$C0
	BEQ.b CODE_298B21
	JSR.w CODE_298BA4
CODE_298B21:
	RTS

CODE_298B22:
	LDA.w !RAM_SMB3_NorSpr0AD_RockyWrench_PhaseTimer,x
	BNE.b CODE_298B3B
	LDA.b $4D,x
	BNE.b CODE_298B31
	LDA.b #$00
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	RTS

CODE_298B31:
	LDA.b #$00
	STA.b !RAM_SMB3_NorSpr0AD_RockyWrench_CurrentState,x
	LDA.b #$40
	STA.w !RAM_SMB3_NorSpr0AD_RockyWrench_PhaseTimer,x
	RTS

CODE_298B3B:
	INC.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	BNE.b CODE_298B41
	INC.b !RAM_SMB3_Level_NorSpr_YPosHi,x
CODE_298B41:
	LDA.b #$00
	STA.w !RAM_SMB3_NorSpr0AD_RockyWrench_AnimationFrame,x
	RTS

CODE_298B47:
	LDA.w !RAM_SMB3_NorSpr0AD_RockyWrench_PhaseTimer,x
	BNE.b CODE_298B52
	LDA.b #$06
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	RTS

CODE_298B52:
	LDA.b #$03
	STA.w !RAM_SMB3_NorSpr0AD_RockyWrench_AnimationFrame,x
	RTS

CODE_298B58:
	LDA.b !RAM_SMB3_NorSpr0AD_RockyWrench_CurrentState,x
	CMP.b #$06
	BEQ.b CODE_298BA3
	INC.w !RAM_SMB3_Level_ConsecutiveEnemiesStompedCounter
	JSL.l CODE_279B6C
	DEC.w !RAM_SMB3_Level_ConsecutiveEnemiesStompedCounter
	LDA.w $0797,x
	BEQ.b CODE_298BA3
	LDA.b $9D
	BMI.b CODE_298BA3
	CMP.b #$10
	BCS.b CODE_298B87
	LDA.b #$00
	STA.b $A6
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	SEC
	SBC.b #$1F
	STA.b !RAM_SMB3_Level_Player_YPosLo
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	SBC.b #$00
	STA.b !RAM_SMB3_Level_Player_YPosHi
	RTS

CODE_298B87:
	LDA.b #$06
	STA.b !RAM_SMB3_NorSpr0AD_RockyWrench_CurrentState,x
	LDA.b #$0C
	STA.w !RAM_SMB3_NorSpr0AD_RockyWrench_PhaseTimer,x
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$C0
else
	LDA.b #$D0
endif
	STA.b $9D
	LDA.b #!Define_SMAS_Sound0060_KickShell
	STA.w !RAM_SMB3_Global_SoundCh1
	LDA.w !RAM_SMB3_Level_ConsecutiveEnemiesStompedCounter
	INC.w !RAM_SMB3_Level_ConsecutiveEnemiesStompedCounter
	JSL.l CODE_278A8A
CODE_298BA3:
	RTS

CODE_298BA4:
	JSL.l SMB3_FindFreeExtendedSpriteSlot_FixedPriority
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	SEC
	SBC.b #$08
	STA.w !RAM_SMB3_Level_ExtSpr_YPosLo,y
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	SBC.b #$00
	STA.w !RAM_SMB3_Level_ExtSpr_YPosHi,y
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	STA.w !RAM_SMB3_Level_ExtSpr_XPosLo,y
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	STA.w !RAM_SMB3_Level_ExtSpr_XPosHi,y
	LDA.w !RAM_SMB3_Level_AutoscrollLayerXSpeed
	CMP.b #$0E
	LDA.b #$10
	BCC.b CODE_298BCC
	LDA.b #$18
CODE_298BCC:
	STA.b $02
	LDA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	ASL
	ASL
	STY.b $00
	LDA.b $02
	BCS.b CODE_298BDB
	LDA.b #$F0
CODE_298BDB:
	STA.w !RAM_SMB3_Level_ExtSpr_XSpeed,y
	LDA.w !RAM_SMB3_Global_RandomByte02,x
	AND.b #$07
	TAY
	LDA.w DATA_21C5D7,y
	LDY.b $00
	STA.w !RAM_SMB3_Level_ExtSpr_YSpeed,y
	LDA.b #!Define_SMB3_SpriteID_ExtSpr0A_ThrownWrench
	STA.w !RAM_SMB3_Level_ExtSpr_SpriteID,y
	RTS

CODE_298BF2:
	LDY.b #$02
	LDA.w $0565
	AND.b #$10
	BEQ.b CODE_298BFC
	INY
CODE_298BFC:
	TYA
	STA.w !RAM_SMB3_NorSpr0AD_RockyWrench_AnimationFrame,x
	LDA.b #$10
	STA.w !RAM_SMB3_Level_NorSpr_YXPPCCCT,x
	JSL.l CODE_279EE2
	RTS
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr0AE_MetalLugnut_Status01(Address)
namespace SMB3_NorSpr0AE_MetalLugnut_Status01
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	SEC
	SBC.b #$01
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	LDA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	SBC.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
CODE_298C17:
	RTL
namespace off
endmacro

;--------------------------------------------------------------------

macro ROUTINE_SMB3_NorSpr0AE_MetalLugnut_Status02(Address)
namespace SMB3_NorSpr0AE_MetalLugnut_Status02
%InsertMacroAtXPosition(<Address>)

Main:
	JSL.l CODE_279BC4
	JSL.l CODE_279EBC
	LDA.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,x
	PHA
	ASL
	ASL
	STA.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,x
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	PHA
	CLC
	ADC.b #$10
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	PHA
	ADC.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	REP.b #$20
	LDA.b $C6,x
	CLC
	ADC.w #$0010
	STA.b $C6,x
	SEP.b #$20
	JSL.l CODE_279EBC
	PLA
	STA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	PLA
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	PLA
	STA.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,x
	JSL.l SMB3_GetNormalSpriteOnScreenPosition_Main
	LDA.b $9C
	BNE.b SMB3_NorSpr0AE_MetalLugnut_Status01_CODE_298C17
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	BEQ.b CODE_298C84
	BPL.b CODE_298C64
	JSL.l SMB3_UnnecessaryInvertARt_Main
CODE_298C64:
	ASL
	ASL
	ASL
	ASL
	ADC.b #$60
	ADC.w !RAM_SMB3_NorSpr0AE_MetalLugnut_SpinningAnimationSpeed,x
	STA.w !RAM_SMB3_NorSpr0AE_MetalLugnut_SpinningAnimationSpeed,x
	BCC.b CODE_298C84
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	ASL
	LDA.b #$01
	BCC.b CODE_298C7B
	LDA.b #$FF
CODE_298C7B:
	CLC
	ADC.w !RAM_SMB3_NorSpr0AE_MetalLugnut_AnimationFrame,x
	AND.b #$03
	STA.w !RAM_SMB3_NorSpr0AE_MetalLugnut_AnimationFrame,x
CODE_298C84:
	LDA.b !RAM_SMB3_NorSpr0AE_MetalLugnut_DetachedFromBoltFlag,x
	BEQ.b CODE_298C8C
	JSR.w CODE_298D18
	RTL

CODE_298C8C:
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$07
	BNE.b CODE_298C9E
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	BEQ.b CODE_298C9E
	BPL.b CODE_298C9C
	INC.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	INC.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_298C9C:
	DEC.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_298C9E:
	JSR.w CODE_298D1D
	JSL.l CODE_278B93
	LDA.w $1F77
	CMP.b #$9D
	BNE.b CODE_298CB2
	LDA.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	INC.b $A7,x
CODE_298CB2:
	JSL.l CODE_298D58
	JSL.l CODE_27A7F0
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	BEQ.b CODE_298CC3
	LDA.w !RAM_SMB3_NorSpr0AE_MetalLugnut_PlayerIsOnSpriteTimer,x
	BNE.b CODE_298D17
CODE_298CC3:
	JSL.l SMB3_GetNormalSpriteOnScreenPosition_Main
	JSL.l CODE_27A313
	BCC.b CODE_298D17
	LDA.b !RAM_SMB3_Level_Player_OnScreenYPos
	ADC.b #$17
	CMP.b !RAM_SMB3_Level_NorSpr_OnScreenYPos,x
	BCS.b CODE_298CF7
	LDA.b !RAM_SMB3_Level_Player_YSpeed
	BMI.b CODE_298CF6
	LDA.b $A7,x
	BNE.b CODE_298CE1
	LDA.b #$05
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_298CE1:
	LDA.b #$10
	STA.w !RAM_SMB3_NorSpr0AE_MetalLugnut_PlayerIsOnSpriteTimer,x
	STA.w $101F
	LDA.b #$00
	STA.b !RAM_SMB3_Level_Player_YSpeed
	STA.b $A6
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	SEC
	SBC.b #$1E
	STA.b !RAM_SMB3_Level_Player_YPosLo
CODE_298CF6:
	RTL

CODE_298CF7:
	LDA.b #$FC
	LDY.b !RAM_SMB3_Level_Player_CurrentPowerUp
	BNE.b CODE_298CFF
	LDA.b #$0C
CODE_298CFF:
	CLC
	ADC.b !RAM_SMB3_Level_Player_OnScreenYPos
	CMP.b !RAM_SMB3_Level_NorSpr_OnScreenYPos,x
	BCC.b CODE_298D13
	LDA.b !RAM_SMB3_Level_Player_YSpeed
	BPL.b CODE_298D12
	LDA.b #$FB
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	LDA.b #$10
	STA.b !RAM_SMB3_Level_Player_YSpeed
CODE_298D12:
	RTL

CODE_298D13:
	LDA.b #$00
	STA.b !RAM_SMB3_Level_Player_XSpeed
CODE_298D17:
	RTL

CODE_298D18:
	JSL.l SMB3_HandleNormalSpriteGravity_Main
	RTS

CODE_298D1D:
	LDA.b #$E2
	LDY.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	BEQ.b CODE_298D57
	BPL.b CODE_298D27
	LDA.b #$1E
CODE_298D27:
	LDY.b #$00
	CMP.b #$00
	BPL.b CODE_298D2E
	DEY
CODE_298D2E:
	STA.b $00
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	PHA
	CLC
	ADC.b $00
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	PHA
	TYA
	ADC.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	STA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	JSL.l CODE_278B93
	PLA
	STA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	PLA
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	LDA.w $1F77
	CMP.b #$9D
	BEQ.b CODE_298D57
	CMP.b #$81
	BEQ.b CODE_298D57
	INC.b !RAM_SMB3_NorSpr0AE_MetalLugnut_DetachedFromBoltFlag,x
CODE_298D57:
	RTS

CODE_298D58:
	LDA.w !RAM_SMB3_Level_NorSpr_YOffscreenFlag,x
	BNE.b CODE_298DCE
	LDA.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,x
	AND.b #$C0
	CMP.b #$C0
	BEQ.b CODE_298DCE
	JSL.l CODE_27A43A
	TXA
	BEQ.b CODE_298DCE
	DEX
CODE_298D6E:
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	CMP.b #$02
	BNE.b CODE_298DC9
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_NorSpr0AE_MetalLugnut
	BNE.b CODE_298DC9
	LDA.w !RAM_SMB3_Level_NorSpr_YOffscreenFlag,x
	BNE.b CODE_298DC9
	LDA.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,x
	AND.b #$C0
	CMP.b #$C0
	BEQ.b CODE_298DC9
	JSL.l SMB3_GetNormalSpriteOnScreenPosition_Main
	JSL.l CODE_27A414
	JSL.l CODE_27A460
	BCC.b CODE_298DC9
	LDY.b $9B
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	SEC
	SBC.w !RAM_SMB3_Level_NorSpr_XPosLo,y
	PHA
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	SBC.w !RAM_SMB3_Level_NorSpr_XPosHi,y
	STA.b $00
	ROL.b $01
	PLA
	ADC.b #$80
	LDA.b $00
	ADC.b #$00
	BNE.b CODE_298DC9
	LSR.b $01
	LDA.b #$FF
	BCS.b CODE_298DBB
	LDA.b #$01
CODE_298DBB:
	STX.b $0F
	LDX.b $9B
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	PHA
	LDX.b $0F
	PLA
	EOR.b #$FF
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_298DC9:
	DEX
	BPL.b CODE_298D6E
	LDX.b $9B
CODE_298DCE:
	RTL
namespace off
	%SetDuplicateOrNullPointer(SMB3_NorSpr0AE_MetalLugnut_Status02_CODE_298DCE, SMB3_NorSpr0AF_AngrySun_Status01_Main)
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr0AF_AngrySun_Status02(Address)
namespace SMB3_NorSpr0AF_AngrySun_Status02
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	CMP.b #$02
	BEQ.b CODE_298DDF
	LDA.b #$01
	STA.w $0669,x
	JSR.w GFXRt
	RTL

CODE_298DDF:
	JSL.l CODE_279BC4
	LDA.w !RAM_SMB3_NorSpr0AF_AngrySun_CurrentState,x
	BEQ.b CODE_298DEC
	JSL.l CODE_279B70
CODE_298DEC:
	LDA.b $9C
	BNE.b CODE_298E04
	LDY.b #$00
	BNE.b CODE_298E0B
	LDA.w $0781
	BPL.b CODE_298DFA
	DEY
CODE_298DFA:
	CLC
	ADC.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	TYA
	ADC.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	STA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
CODE_298E04:
	JSR.w GFXRt
	LDA.b $9C
	BNE.b CODE_298E1B
CODE_298E0B:
	LDY.b #$00
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$0C
	BEQ.b CODE_298E14
	INY
CODE_298E14:
	TYA
CODE_298E15:
	STA.w $0669,x
	JSR.w CODE_298E1C
CODE_298E1B:
	RTL

CODE_298E1C:
	LDA.w !RAM_SMB3_NorSpr0AF_AngrySun_CurrentState,x
	JSL.l SMB3_ExecutePtr_Absolute

DATA_298E23:
	dw State00_AngrilyWatching
	dw State01_SpinningOnLeftSideOfScreen
	dw State02_WaitBeforeSwoop
	dw State03_SwoopRight
	dw State04_SpinningOnRightSideOfScreen
	dw State05_WaitBeforeSwoop
	dw State06_SwoopLeft

State00_AngrilyWatching:
	LDA.b #$00
	STA.w $0669,x
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	CMP.b #$05
	BNE.b CODE_298E45
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	CMP.b #$B0
	BCC.b CODE_298E45
	JSR.w CODE_298EBE
CODE_298E45:
	RTS

State01_SpinningOnLeftSideOfScreen:
	JSR.w CODE_298EEA
	LDA.w !RAM_SMB3_NorSpr0AF_AngrySun_SpinningTimer,x
	BNE.b CODE_298E5E
	INC.w !RAM_SMB3_NorSpr0AF_AngrySun_CurrentState,x
	LDA.b #$40
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	LDA.b #$14
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_298E59:
	LDA.b #$10
	STA.w !RAM_SMB3_NorSpr0AF_AngrySun_SpinningTimer,x
CODE_298E5E:
	RTS

State04_SpinningOnRightSideOfScreen:
	JSR.w CODE_298EEA
	LDA.w !RAM_SMB3_NorSpr0AF_AngrySun_SpinningTimer,x
	BNE.b CODE_298E75
	INC.w !RAM_SMB3_NorSpr0AF_AngrySun_CurrentState,x
	LDA.b #$40
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	LDA.b #$EC
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	JMP.w CODE_298E59

CODE_298E75:
	RTS

State03_SwoopRight:
	JSL.l CODE_27A7F0
	JSL.l CODE_27A7E5
	DEC.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	CMP.b #$10
	BCS.b CODE_298EA9
	LDA.b #$10
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	INC.w !RAM_SMB3_NorSpr0AF_AngrySun_CurrentState,x
	LDA.b #$01
	STA.w $077B,x
	STA.w $0776,x
	LDA.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	LDA.b #$C0
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_298E9D:
	LDA.w !RAM_SMB3_Global_RandomByte02,x
	AND.b #$03
	TAY
	LDA.w DATA_21C5EF,y
	STA.w !RAM_SMB3_NorSpr0AF_AngrySun_SpinningTimer,x
CODE_298EA9:
	RTS

State06_SwoopLeft:
	JSL.l CODE_27A7F0
	JSL.l CODE_27A7E5
	DEC.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	LDA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	CMP.b #$10
	BCS.b CODE_298ED8
	LDA.b #$10
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
CODE_298EBE:
	LDA.b #$01
	STA.w !RAM_SMB3_NorSpr0AF_AngrySun_CurrentState,x
	LDA.b #$01
	STA.w $077B,x
	LDA.b #$00
	STA.w $0776,x
	LDA.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	LDA.b #$C0
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	JMP.w CODE_298E9D

CODE_298ED8:
	RTS

State02_WaitBeforeSwoop:
State05_WaitBeforeSwoop:
	LDA.w !RAM_SMB3_NorSpr0AF_AngrySun_SpinningTimer,x
	BNE.b CODE_298EE9
	INC.w !RAM_SMB3_NorSpr0AF_AngrySun_CurrentState,x
	LDY.w !RAM_SMB3_NorSpr0AF_AngrySun_CurrentState,x
	LDA.b #$20
	STA.w !RAM_SMB3_NorSpr0AF_AngrySun_SpinningTimer,x
CODE_298EE9:
	RTS

CODE_298EEA:
	JSL.l CODE_27A7F0
	JSL.l CODE_27A7E5
	LDA.w $0776,x
	AND.b #$01
	TAY
	LDA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	CMP.w DATA_21C5EB,y
	BNE.b CODE_298F03
	INC.w $0776,x
	INY
CODE_298F03:
	CLC
	ADC.w DATA_21C5E7,y
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	LDA.w $077B,x
	AND.b #$01
	TAY
	LDA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	CMP.w DATA_21C5EB,y
	BNE.b CODE_298F1A
	INC.w $077B,x
	INY
CODE_298F1A:
	CLC
	ADC.w DATA_21C5E7,y
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_298F20:
	RTS

GFXRt:
	LDA.w $0679,x
	AND.b #$CF
	ORA.b #$20
	LDY.w !RAM_SMB3_NorSpr0AF_AngrySun_CurrentState,x
	BNE.b CODE_298F31
	AND.b #$CF
	ORA.b #$10
CODE_298F31:
	STA.w $0679,x
	LDA.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,x
	STA.w $1CEF
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	PHA
	CLC
	ADC.b #$08
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	PHA
	ADC.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	ASL.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,x
	JSL.l CODE_279EE2
	PLA
	STA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	PLA
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	JSL.l SMB3_GetNormalSpriteOnScreenPosition_Main
	LDA.b $C6,x
	STA.b $D8
	LDA.b $C7,x
	STA.b $D9
	LDA.w !RAM_SMB3_Level_NorSpr_YOffscreenFlag,x
	BNE.b CODE_298F20
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenYPos,x
	STA.b $00
	LDA.w $0669,x
	TAX
	REP.b #$10
	LDY.b $D8
	LDA.w $1CEF
	BMI.b CODE_298F87
	LDA.b $00
	CLC
	ADC.w DATA_21C5F5,x
	STA.w SMB3_OAMBuffer[$04].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$06].YDisp,y
CODE_298F87:
	LDA.w $1CEF
	AND.b #$10
	BNE.b CODE_298F9D
	LDA.b $00
	CLC
	ADC.w DATA_21C5F5,x
	STA.w SMB3_OAMBuffer[$05].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$07].YDisp,y
CODE_298F9D:
	LDA.w DATA_21C5F3,x
	STA.w SMB3_OAMBuffer[$04].Tile,y
	STA.w SMB3_OAMBuffer[$05].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$06].Tile,y
	STA.w SMB3_OAMBuffer[$07].Tile,y
	LDA.w SMB3_OAMBuffer[$00].Prop,y
	AND.b #$7F
	STA.b $0E
	STA.w SMB3_OAMBuffer[$04].Prop,y
	STA.w SMB3_OAMBuffer[$06].Prop,y
	LDA.w SMB3_OAMBuffer[$01].Prop,y
	AND.b #$7F
	STA.b $0F
	STA.w SMB3_OAMBuffer[$05].Prop,y
	STA.w SMB3_OAMBuffer[$07].Prop,y
	REP.b #$20
	LDA.b $9B
	AND.w #$00FF
	TAX
	SEP.b #$20
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenXPos,x
	STA.b $01
	STA.w SMB3_OAMBuffer[$04].XDisp,y
	STA.w SMB3_OAMBuffer[$06].XDisp,y
	CLC
	ADC.b #$18
	STA.w SMB3_OAMBuffer[$05].XDisp,y
	STA.w SMB3_OAMBuffer[$07].XDisp,y
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b #$00
	STA.w SMB3_OAMTileSizeBuffer[$04].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$05].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$06].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$07].Slot,y
	SEP.b #$10
	LDA.w $0669,x
	BEQ.b CODE_299076
	JSL.l CODE_27A19E
	REP.b #$10
	LDY.b $C6,x
	LDA.b $00
	CLC
	ADC.b #$10
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$01].YDisp,y
	LDA.b $01
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	LDA.b $0E
	ORA.b #$80
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$01].Prop,y
if !Define_Global_ROMToAssemble&(!ROM_SMAS_U|!ROM_SMAS_J1) != $00
	LDA.b #$B0
else
	LDA.b #$B1
endif
	STA.w SMB3_OAMBuffer[$00].Tile,y
if !Define_Global_ROMToAssemble&(!ROM_SMAS_U|!ROM_SMAS_J1) != $00
	INC
else
	DEC
endif
	STA.w SMB3_OAMBuffer[$01].Tile,y
	LDA.b $00
	CLC
	ADC.b #$10
	STA.w SMB3_OAMBuffer[$02].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$03].YDisp,y
	LDA.b $01
	CLC
	ADC.b #$18
	STA.w SMB3_OAMBuffer[$02].XDisp,y
	STA.w SMB3_OAMBuffer[$03].XDisp,y
	LDA.b $0F
	ORA.b #$80
	STA.w SMB3_OAMBuffer[$02].Prop,y
	STA.w SMB3_OAMBuffer[$03].Prop,y
if !Define_Global_ROMToAssemble&(!ROM_SMAS_U|!ROM_SMAS_J1) != $00
	LDA.b #$B0
else
	LDA.b #$B1
endif
	STA.w SMB3_OAMBuffer[$02].Tile,y
if !Define_Global_ROMToAssemble&(!ROM_SMAS_U|!ROM_SMAS_J1) != $00
	INC
else
	DEC
endif
	STA.w SMB3_OAMBuffer[$03].Tile,y
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b #$00
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$02].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$03].Slot,y
	SEP.b #$10
CODE_299076:
	RTS
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr0B0_BigCannonBall_Status02(Address)
namespace SMB3_NorSpr0B0_BigCannonBall_Status02
%InsertMacroAtXPosition(<Address>)

Main:
	JSL.l CODE_279BC4
	JSR.w CODE_2981E6
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	CMP.b #$02
	BNE.b SMB3_NorSpr0B3_UnusedSprite_Status02_CODE_2981CA
	LDA.b $9C
	BNE.b SMB3_NorSpr0B3_UnusedSprite_Status02_CODE_2981CA
	JSL.l CODE_27A7F0
	JSL.l CODE_279B70
	RTL

CODE_2981E6:
	LDA.b #$00
	STA.w $0669,x
	STA.w $0679,x
	LDA.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,x
	STA.w $1CEF
	LDA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	PHA
	CLC
	ADC.b #$08
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	LDA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	PHA
	ADC.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	ASL.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,x
	JSL.l CODE_279F52
	PLA
	STA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	PLA
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	JSL.l SMB3_GetNormalSpriteOnScreenPosition_Main
	LDA.w !RAM_SMB3_Level_NorSpr_YOffscreenFlag,x
	BEQ.b CODE_29821C
	BRL.w CODE_2982BE

CODE_29821C:
	REP.b #$10
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenYPos,x
	STA.b $00
	LDY.b $C6,x
	LDA.w $1CEF
	BMI.b CODE_298237
	LDA.b $00
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$04].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$06].YDisp,y
CODE_298237:
	LDA.w $1CEF
	AND.b #$10
	BNE.b CODE_29824C
	LDA.b $00
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$05].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$07].YDisp,y
CODE_29824C:
	LDA.b #$2A
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$01].Prop,y
	STA.w SMB3_OAMBuffer[$02].Prop,y
	STA.w SMB3_OAMBuffer[$03].Prop,y
	LDA.b #$B8
	STA.w SMB3_OAMBuffer[$00].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$02].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$01].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$03].Tile,y
	LDA.b #$92
	STA.w SMB3_OAMBuffer[$04].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$06].Tile,y
	LDA.b #$9A
	STA.w SMB3_OAMBuffer[$05].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$07].Tile,y
	LDA.b #$2A
	STA.w SMB3_OAMBuffer[$04].Prop,y
	STA.w SMB3_OAMBuffer[$05].Prop,y
	STA.w SMB3_OAMBuffer[$06].Prop,y
	STA.w SMB3_OAMBuffer[$07].Prop,y
	REP.b #$20
	LDA.b $9B
	AND.w #$00FF
	TAX
	SEP.b #$20
	LDA.b !RAM_SMB3_Level_NorSpr_OnScreenXPos,x
	STA.w SMB3_OAMBuffer[$04].XDisp,y
	STA.w SMB3_OAMBuffer[$06].XDisp,y
	CLC
	ADC.b #$18
	STA.w SMB3_OAMBuffer[$05].XDisp,y
	STA.w SMB3_OAMBuffer[$07].XDisp,y
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b #$00
	STA.w SMB3_OAMTileSizeBuffer[$04].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$05].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$06].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$07].Slot,y
	SEP.b #$10
CODE_2982BE:
	RTS
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_NorSpr0B3_UnusedSprite_Status01(Address)
namespace SMB3_NorSpr0B3_UnusedSprite_Status01
%InsertMacroAtXPosition(<Address>)

Main:
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.w DATA_21C55E,y
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	RTL
namespace off
endmacro

;--------------------------------------------------------------------

macro ROUTINE_SMB3_NorSpr0B3_UnusedSprite_Status02(Address)
namespace SMB3_NorSpr0B3_UnusedSprite_Status02
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.w $0565
	LSR
	LSR
	AND.b #$03
	STA.w $0669,x
	TAY
	LDA.w DATA_21C560,y
	STA.w $1FE9,x
	JSL.l CODE_279EBC
	LDA.w SMB3_OAMBuffer[$00].Tile,y
	AND.b #$3F
	STA.w SMB3_OAMBuffer[$00].Tile,y
	ORA.b #$C0
	STA.w SMB3_OAMBuffer[$01].Tile,y
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	CMP.b #$02
	BNE.b CODE_2981AE
	LDA.b $9C
	BNE.b CODE_2981AE
	LDA.b !RAM_SMB3_Global_FrameCounter
	LSR
	NOP #2								; Optimization: NOPs
	AND.b #$01
	STA.w $0669,x
	JSL.l CODE_279BC4
	JSL.l CODE_279B70
	JSL.l SMB3_HandleNormalSpriteGravity_Main
	LDA.b $A7,x
	AND.b #$04
	BEQ.b CODE_2981B3
	JSL.l CODE_278B67
	LDA.w $0518,x
	BNE.b CODE_2981AE
	LDA.w $07B5
	CMP.b $4D,x
	BEQ.b CODE_2981AE
	JSR.w CODE_2981B9
CODE_2981AE:
	LDA.w $07B5
	STA.b $4D,x
CODE_2981B3:
	LDA.b $A7,x
	AND.b #$03
	BEQ.b CODE_2981CA
CODE_2981B9:
	LDA.b #$20
	STA.w $0518,x
	JSL.l CODE_279906
	JSL.l CODE_27A7F0
	JSL.l CODE_27A7F0
CODE_2981CA:
	RTL
namespace off
	%SetDuplicateOrNullPointer(SMB3_NorSpr0B3_UnusedSprite_Status02_CODE_2981CA, SMB3_NorSpr0B0_BigCannonBall_Status01_Main)
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_ExtSpr01_Hammer(Address)
namespace SMB3_ExtSpr01_Hammer
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.b $9C
	BEQ.b CODE_27D17F
	JMP.w CODE_27D234

CODE_27D17F:
	LDA.w $06C7,x
	AND.b #$0F
	BNE.b CODE_27D189
	BRL.w CODE_27D22E

CODE_27D189:
	DEC.w $06C7,x
	LDA.w !RAM_SMB3_Level_ExtSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_ExtSpr01_Hammer
	BNE.b CODE_27D19F
	LDA.w $06C7,x
	AND.b #$0F
	BNE.b CODE_27D19F
	LDA.b #!Define_SMAS_Sound0060_EnemyProjectileThrow
	STA.w !RAM_SMB3_Global_SoundCh1
CODE_27D19F:
	LDA.w $06C7,x
	LSR
	LSR
	LSR
	LSR
	TAY
	STY.b $01
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,y
	CMP.b #$02
	BNE.b CODE_27D1B7
	LDA.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,y
	AND.b #$C0
	BEQ.b CODE_27D1BA
CODE_27D1B7:
	JMP.w CODE_27D382

CODE_27D1BA:
	LDA.w $0679,y
	AND.b #$40
	STA.b $02
	ASL
	ASL
	ROL
	AND.b #$01
	STA.b $00
	LDA.w !RAM_SMB3_Level_ExtSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_ExtSpr01_Hammer
	BEQ.b CODE_27D1D3
	INC.b $00
	INC.b $00
CODE_27D1D3:
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,y
	CMP.b #!Define_SMB3_SpriteID_NorSpr086_SledgeBro
	BNE.b CODE_27D1E1
	LDA.b $00
	CLC
	ADC.b #$04
	STA.b $00
CODE_27D1E1:
	LDA.w !RAM_SMB3_Level_NorSpr_XPosLo,y
	LDY.b $00
	CLC
	ADC.w DATA_21C7EE,y
	STA.w !RAM_SMB3_Level_ExtSpr_XPosLo,x
	LDY.b $00
	STZ.b $DD
	LDA.w DATA_21C7F4,y
	STA.b $DC
	BPL.b CODE_27D1FA
	DEC.b $DD
CODE_27D1FA:
	LDY.b $01
	LDA.w !RAM_SMB3_Level_NorSpr_YPosHi,y
	XBA
	LDA.w !RAM_SMB3_Level_NorSpr_YPosLo,y
	REP.b #$20
	CLC
	ADC.b $DC
	SEP.b #$20
	STA.w !RAM_SMB3_Level_ExtSpr_YPosLo,x
	XBA
	STA.w !RAM_SMB3_Level_ExtSpr_YPosHi,x
	LDA.b #$00
	LDY.w !RAM_SMB3_Level_ExtSpr_XSpeed,x
	BMI.b CODE_27D21A
	LDA.b #$40
CODE_27D21A:
	CMP.b $02
	BEQ.b CODE_27D22B
	LDA.w !RAM_SMB3_Level_ExtSpr_XSpeed,x
	JSL.l SMB3_UnnecessaryInvertARt_Main
	STA.w !RAM_SMB3_Level_ExtSpr_XSpeed,x
	INC.w $0597,x
CODE_27D22B:
	JMP.w CODE_27D234
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_ExtSpr02_Boomerang(Address)
namespace SMB3_ExtSpr02_Boomerang
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.b $9C
	BEQ.b CODE_27D44C
	JMP.w CODE_27D234

CODE_27D44C:
	LDA.w $06C7,x
	AND.b #$0F
	BEQ.b CODE_27D456
	JMP.w SMB3_ExtSpr01_Hammer_CODE_27D189

CODE_27D456:
	INC.w $06BD,x
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$0A
	BNE.b CODE_27D464
	LDA.b #!Define_SMAS_Sound0063_Boomerang
	STA.w !RAM_SMB3_Global_SoundCh3
CODE_27D464:
	LDA.w $0597,x
	BMI.b CODE_27D495
	LDA.w $06D1,x
	BNE.b CODE_27D495
	LDA.w $0597,x
	AND.b #$01
	TAY
	LDA.w !RAM_SMB3_Level_ExtSpr_XSpeed,x
	CLC
	ADC.w DATA_21C814,y
	STA.w !RAM_SMB3_Level_ExtSpr_XSpeed,x
	CMP.w DATA_21C816,y
	BNE.b CODE_27D495
	LDA.b #$30
	STA.w $06D1,x
	INC.w $0597,x
	LDA.w $05B5,x
	BEQ.b CODE_27D495
	LDA.b #$FF
	STA.w $0597,x
CODE_27D495:
	LDA.b !RAM_SMB3_Global_FrameCounter
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	AND.b #$03
	BEQ.b CODE_27D4BB
else
	LSR
	BCS.b CODE_27D4BB
endif
	LDA.w $05B5,x
	CMP.b #$01
	BCC.b CODE_27D4A6
	LDY.w !RAM_SMB3_Level_ExtSpr_YSpeed,x
	BEQ.b CODE_27D4BB
CODE_27D4A6:
	AND.b #$01
	TAY
	LDA.w !RAM_SMB3_Level_ExtSpr_YSpeed,x
	CLC
	ADC.w DATA_21C818,y
	STA.w !RAM_SMB3_Level_ExtSpr_YSpeed,x
	CMP.w DATA_21C81A,y
	BNE.b CODE_27D4BB
	INC.w $05B5,x
CODE_27D4BB:
	JSR.w SMB3_UpdateExtendedSpritePosition_X
	JSR.w SMB3_UpdateExtendedSpritePosition_Y
	JSR.w CODE_27D234
	LDA.w $0597,x
	BPL.b CODE_27D50A
	TXA
	CLC
	ADC.b !RAM_SMB3_Global_FrameCounter
	LSR
	BCS.b CODE_27D50A
	LDA.w $06C7,x
	LSR
	LSR
	LSR
	LSR
	TAY
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,y
	CMP.b #$02
	BNE.b CODE_27D50A
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,y
	CMP.b #!Define_SMB3_SpriteID_NorSpr082_BoomerangBro
	BNE.b CODE_27D50A
	LDA.w !RAM_SMB3_Level_ExtSpr_YPosLo,x
	CLC
	ADC.b #$08
	SEC
	SBC.w !RAM_SMB3_Level_NorSpr_YPosLo,y
	SEC
	SBC.b #$08
	CMP.b #$10
	BCS.b CODE_27D50A
	LDA.w !RAM_SMB3_Level_ExtSpr_XPosLo,x
	CLC
	ADC.b #$08
	SEC
	SBC.w !RAM_SMB3_Level_NorSpr_XPosLo,y
	SBC.b #$00
	CMP.b #$10
	BCS.b CODE_27D50A
	JMP.w CODE_27D382

CODE_27D50A:
	RTS
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_ExtSpr03_UnusedProjectile(Address)
namespace SMB3_ExtSpr03_UnusedProjectile
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.b $9C
	BEQ.b CODE_27D512
	JMP.w CODE_27D234

CODE_27D512:
	LDA.w $06C7,x
	AND.b #$0F
	BEQ.b CODE_27D51C
	JMP.w SMB3_ExtSpr01_Hammer_CODE_27D189

CODE_27D51C:
	DEC.w $06BD,x
	LDY.w $06D1,x
	BEQ.b CODE_27D52A
	DEY
	BNE.b CODE_27D54D
	INC.w $05B5,x
CODE_27D52A:
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$00								;\ Note: This will never branch.
	BNE.b CODE_27D54D							;/
	LDA.w $0597,x
	AND.b #$01
	TAY
	LDA.w !RAM_SMB3_Level_ExtSpr_XSpeed,x
	CLC
	ADC.w DATA_21C826,y
	STA.w !RAM_SMB3_Level_ExtSpr_XSpeed,x
	CMP.w DATA_21C828,y
	BNE.b CODE_27D54D
	LDA.b #$50
	STA.w $06D1,x
	INC.w $0597,x
CODE_27D54D:
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$03
	BNE.b CODE_27D576
	LDA.w $05B5,x
	BEQ.b CODE_27D576
	CMP.b #$03
	BCC.b CODE_27D561
	LDY.w !RAM_SMB3_Level_ExtSpr_YSpeed,x
	BEQ.b CODE_27D576
CODE_27D561:
	AND.b #$01
	TAY
	LDA.w !RAM_SMB3_Level_ExtSpr_YSpeed,x
	CLC
	ADC.w DATA_21C82A,y
	STA.w !RAM_SMB3_Level_ExtSpr_YSpeed,x
	CMP.w DATA_21C82C,y
	BNE.b CODE_27D576
	INC.w $05B5,x
CODE_27D576:
	JMP.w SMB3_ExtSpr02_Boomerang_CODE_27D4BB
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_ExtSprXX_EnemyFireball(Address)
namespace SMB3_ExtSprXX_EnemyFireball
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.b $9C
	BNE.b CODE_27D5B4
	INC.w $06BD,x
	LDA.w !RAM_SMB3_Level_ExtSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_ExtSpr05_PiranhaPlantFire
	BEQ.b CODE_27D5AE
	CMP.b #!Define_SMB3_SpriteID_ExtSpr12_FireChompFire
	BEQ.b CODE_27D5AE
	JSR.w CODE_27CC1B
	LDA.w !RAM_SMB3_Level_ExtSpr_YSpeed,x
	CMP.b #$30
	BPL.b CODE_27D59B
	INC.w !RAM_SMB3_Level_ExtSpr_YSpeed,x
	INC.w !RAM_SMB3_Level_ExtSpr_YSpeed,x
CODE_27D59B:
	LDA.w !RAM_SMB3_Level_ExtSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_ExtSpr0C_FireBroFire
	BNE.b CODE_27D5A5
	JSR.w CODE_27C442
CODE_27D5A5:
	JMP.w CODE_27D5B4

CODE_27D5A8:
	JSR.w CODE_27CC1B
	JMP.w CODE_27D5B4

CODE_27D5AE:
	JSR.w SMB3_UpdateExtendedSpritePosition_X
	JSR.w SMB3_UpdateExtendedSpritePosition_Y
CODE_27D5B4:
	JSR.w CODE_27D72B
	BEQ.b CODE_27D5BC
	BRL.w CODE_27D674

CODE_27D5BC:
	LDA.b !RAM_SMB3_Level_ExtSpr_XPosHi,x
	XBA
	LDA.w !RAM_SMB3_Level_ExtSpr_XPosLo,x
	REP.b #$30
	SEC
	SBC.w $0210
	STA.b $D8
	SEP.b #$20
	LDY.b $C6,x
	JSR.w CODE_27CE16
	LDA.w SMB3_OAMBuffer[$00].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$01].YDisp,y
	LDA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	LDA.w !RAM_SMB3_Level_ExtSpr_SpriteID,x
	CMP.b #!Define_SMB3_SpriteID_ExtSpr12_FireChompFire
	BNE.b CODE_27D5FD
	LDA.w $0565
	LSR
	LSR
	LDA.b #$88
	BCC.b CODE_27D5F2
	LDA.b #$8A
CODE_27D5F2:
	STA.w SMB3_OAMBuffer[$00].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$01].Tile,y
	LDA.b #$2A
	BRA.b CODE_27D637

CODE_27D5FD:
	LDA.w !RAM_SMB3_Level_ExtSpr_XSpeed,x
	LSR
	AND.b #$40
	PHA
	REP.b #$20
	LDA.w $06BD,x
	AND.w #$00FF
	LSR
	LSR
	AND.w #$0003
	TAX
	SEP.b #$20
	LDA.w DATA_21C82E,x
	CPX.w #$0002
	BEQ.b CODE_27D62A
	CPX.w #$0003
	BEQ.b CODE_27D62A
	STA.w SMB3_OAMBuffer[$00].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$01].Tile,y
	BRA.b CODE_27D631

CODE_27D62A:
	STA.w SMB3_OAMBuffer[$01].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$00].Tile,y
CODE_27D631:
	PLA
	EOR.w DATA_21C832,x
	ORA.b #$20
CODE_27D637:
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$01].Prop,y
	PHY
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b $D9
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	PLY
	SEP.b #$10
	LDX.b $9B
	LDA.b !RAM_SMB3_Level_Player_CurrentPowerUp
	CMP.b #$06
	BNE.b CODE_27D671
	LDA.w $056F
	BEQ.b CODE_27D671
	LDA.w !RAM_SMB3_Level_Player_StarPowerTimer
	PHA
	LDA.b #$10
	STA.w !RAM_SMB3_Level_Player_StarPowerTimer
	JSR.w CODE_27D305
	PLA
	STA.w !RAM_SMB3_Level_Player_StarPowerTimer
	RTS

CODE_27D671:
	JMP.w CODE_27D305

CODE_27D674:
	RTS
namespace off
	%SetDuplicateOrNullPointer(SMB3_ExtSprXX_EnemyFireball_Main, SMB3_ExtSpr04_NipperFire_Main)
	%SetDuplicateOrNullPointer(SMB3_ExtSprXX_EnemyFireball_Main, SMB3_ExtSpr05_PiranhaPlantFire_Main)
	%SetDuplicateOrNullPointer(SMB3_ExtSprXX_EnemyFireball_Main, SMB3_ExtSpr0C_FireBroFire_Main)
	%SetDuplicateOrNullPointer(SMB3_ExtSprXX_EnemyFireball_Main, SMB3_ExtSpr12_FireChompFire_Main)
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_ExtSpr06_MicroGoomba(Address)
namespace SMB3_ExtSpr06_MicroGoomba
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.b $9C
	BEQ.b CODE_27D01A
	JMP.w CODE_27D0DC

CODE_27D01A:
	LDA.w $06C7,x
	BNE.b CODE_27D022
	JMP.w CODE_27D0AE

CODE_27D022:
	BPL.b CODE_27D02A
	JSR.w CODE_27CC1B
	JMP.w CODE_27D0DC

CODE_27D02A:
	LDY.w !RAM_SMB3_Level_Player_StarPowerTimer
	BNE.b CODE_27D04F
	LDY.w !RAM_SMB3_Level_Player_IsSwimmingFlag
	BNE.b CODE_27D04F
	INC.w !RAM_SMB3_Level_Player_NumberOfClingingMicroGoombas
	CMP.b #$05
	BCS.b CODE_27D044
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$0F
	BNE.b CODE_27D044
	INC.w $06C7,x
CODE_27D044:
	LDA.b !RAM_SMB3_Global_ControllerPress1
	AND.b #(!Joypad_DPadL>>8)|(!Joypad_DPadR>>8)|(!Joypad_DPadU>>8)|(!Joypad_DPadD>>8)|(!Joypad_Start>>8)|(!Joypad_Select>>8)|!Joypad_X|(!Joypad_Y>>8)|!Joypad_A|(!Joypad_B>>8)
	BEQ.b CODE_27D065
	DEC.w $06C7,x
	BNE.b CODE_27D065
CODE_27D04F:
	LDA.b #$FF
	STA.w $06C7,x
	LDA.b #$E0
	STA.w !RAM_SMB3_Level_ExtSpr_YSpeed,x
	LDA.b #$08
	LDY.w !RAM_SMB3_Global_RandomByte02,x
	BPL.b CODE_27D062
	LDA.b #$F8
CODE_27D062:
	STA.w !RAM_SMB3_Level_ExtSpr_XSpeed,x
CODE_27D065:
	INC.w $06BD,x
	LDA.w $06BD,x
	LSR
	LSR
	AND.b #$1F
	CMP.b #$10
	AND.b #$0F
	BCC.b CODE_27D079
	EOR.b #$0F
	ADC.b #$00
CODE_27D079:
	CLC
	LDY.w $056F
	BNE.b CODE_27D083
	LDY.b !RAM_SMB3_Level_Player_CurrentPowerUp
	BNE.b CODE_27D087
CODE_27D083:
	LSR
	CLC
	ADC.b #$08
CODE_27D087:
	ADC.b !RAM_SMB3_Level_Player_YPosLo
	STA.w !RAM_SMB3_Level_ExtSpr_YPosLo,x
	LDA.b !RAM_SMB3_Level_Player_YPosHi
	ADC.b #$00
	STA.w !RAM_SMB3_Level_ExtSpr_YPosHi,x
	LDA.w $06BD,x
	AND.b #$1F
	CMP.b #$10
	AND.b #$0F
	BCC.b CODE_27D0A2
	EOR.b #$0F
	ADC.b #$00
CODE_27D0A2:
	SEC
	SBC.b #$03
	CLC
	ADC.b !RAM_SMB3_Level_Player_XPosLo
	STA.w !RAM_SMB3_Level_ExtSpr_XPosLo,x
	JMP.w CODE_27D0DC

CODE_27D0AE:
	JSR.w SMB3_UpdateExtendedSpritePosition_X
	JSR.w SMB3_UpdateExtendedSpritePosition_Y
	LDA.w !RAM_SMB3_Level_ExtSpr_YSpeed,x
	CMP.b #$10
	BPL.b CODE_27D0BE
	INC.w !RAM_SMB3_Level_ExtSpr_YSpeed,x
CODE_27D0BE:
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$00
	BNE.b CODE_27D0DC
	LDA.w $06BD,x
	AND.b #$01
	TAY
	LDA.w !RAM_SMB3_Level_ExtSpr_XSpeed,x
	CLC
	ADC.w DATA_21C7D6,y
	STA.w !RAM_SMB3_Level_ExtSpr_XSpeed,x
	CMP.w DATA_21C7D8,y
	BNE.b CODE_27D0DC
	INC.w $06BD,x
CODE_27D0DC:
	JSR.w CODE_27D72B
	BEQ.b CODE_27D0E4
	BRL.w CODE_27D170

CODE_27D0E4:
	LDA.b !RAM_SMB3_Level_ExtSpr_XPosHi,x
	XBA
	LDA.w !RAM_SMB3_Level_ExtSpr_XPosLo,x
	REP.b #$30
	SEC
	SBC.w $0210
	STA.b $D8
	SEP.b #$20
	LDY.b $C6,x
	LDA.w $06C7,x
	BEQ.b CODE_27D115
	BMI.b CODE_27D115
	TXA
	ASL
	ASL
	ASL
	ASL
	EOR.w $06BD,x
	AND.b #$10
	BEQ.b CODE_27D115
	PHX
	REP.b #$20
	TXA
	ASL
	TAX
	SEP.b #$20
	LDY.w DATA_21C7DA,x
	PLX
CODE_27D115:
	JSR.w CODE_27CE16
	LDA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	LDA.w SMB3_OAMBuffer[$00].YDisp,y
	STA.w SMB3_OAMBuffer[$01].YDisp,y
	LDA.b #$FE
	STA.w SMB3_OAMBuffer[$00].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$01].Tile,y
	LDX.w #$0002
	LDA.w $0565
	AND.b #$08
	BEQ.b CODE_27D13A
	LDX.w #$0042
CODE_27D13A:
	TXA
	ORA.b #$20
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$01].Prop,y
	PHY
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b $D9
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	PLY
	REP.b #$20
	LDA.b $9B
if !Define_Global_ROMToAssemble&(!ROM_SMAS_U|!ROM_SMAS_J1) == $00
	AND.w #$00FF
endif
	TAX
	SEP.b #$20
	LDA.w $06C7,x
	BEQ.b CODE_27D173
	BPL.b CODE_27D170
	LDA.b #$A6
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$01].Prop,y
CODE_27D170:
	SEP.b #$10
	RTS

CODE_27D173:
	SEP.b #$10
	JMP.w CODE_27D305
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_ExtSpr07_SpikeBall(Address)
namespace SMB3_ExtSpr07_SpikeBall
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.b $9C
	BNE.b CODE_27CF7D
	LDA.w $06C7,x
	BEQ.b CODE_27CF7A
	JSR.w CODE_27CC1B
	JMP.w CODE_27CF7D

CODE_27CF7A:
	JSR.w SMB3_UpdateExtendedSpritePosition_X
CODE_27CF7D:
	JSR.w CODE_27D72B
	LDA.b !RAM_SMB3_Level_ExtSpr_XPosHi,x
	XBA
	LDA.w !RAM_SMB3_Level_ExtSpr_XPosLo,x
	REP.b #$20
	SEC
	SBC.w $0210
	STA.b $D8
	CLC
	ADC.w #$0008
	STA.b $DA
	SEP.b #$20
	REP.b #$10
	LDY.b $C6,x
	LDA.b #$94
	STA.w SMB3_OAMBuffer[$00].Tile,y
	STA.w SMB3_OAMBuffer[$02].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$01].Tile,y
	STA.w SMB3_OAMBuffer[$03].Tile,y
	JSR.w CODE_27CF49
	LDA.w $0565
	LSR
	LSR
	LSR
	ROR
	AND.b #$80
	ORA.b #$2A
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$01].Prop,y
	EOR.b #$C0
	STA.w SMB3_OAMBuffer[$02].Prop,y
	STA.w SMB3_OAMBuffer[$03].Prop,y
	AND.b #$80
	BEQ.b CODE_27CFD7
	LDA.w SMB3_OAMBuffer[$02].Tile,y
	PHA
	LDA.w SMB3_OAMBuffer[$03].Tile,y
	STA.w SMB3_OAMBuffer[$02].Tile,y
	PLA
	STA.w SMB3_OAMBuffer[$03].Tile,y
CODE_27CFD7:
	LDA.w SMB3_OAMBuffer[$00].Prop,y
	AND.b #$80
	BEQ.b CODE_27CFEC
	LDA.w SMB3_OAMBuffer[$00].Tile,y
	PHA
	LDA.w SMB3_OAMBuffer[$01].Tile,y
	STA.w SMB3_OAMBuffer[$00].Tile,y
	PLA
	STA.w SMB3_OAMBuffer[$01].Tile,y
CODE_27CFEC:
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b $D9
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	LDA.b $DB
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$02].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$03].Slot,y
	SEP.b #$10
	LDA.w $06C7,x
	BNE.b CODE_27D012
	JMP.w CODE_27D305

CODE_27D012:
	RTS
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_ExtSpr08_WandBlast(Address)
namespace SMB3_ExtSpr08_WandBlast
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.b $9C
	BNE.b CODE_27CE35
	JSR.w SMB3_UpdateExtendedSpritePosition_X
	JSR.w SMB3_UpdateExtendedSpritePosition_Y
CODE_27CE35:
	JSR.w CODE_27D72B
	LDA.b !RAM_SMB3_Level_ExtSpr_XPosHi,x
	XBA
	LDA.w !RAM_SMB3_Level_ExtSpr_XPosLo,x
	REP.b #$30
	SEC
	SBC.w $0210
	STA.b $D8
	LDY.b $C6,x
	LDA.w $06D1,x
	AND.w #$00FF
	TAX
	SEP.b #$20
	LDA.b #$BE
	CPX.w #$00E0
	BCS.b CODE_27CE61
	LDA.b #$BA
	CPX.w #$00C0
	BCS.b CODE_27CE61
	LDA.b #$BC
CODE_27CE61:
	STA.w SMB3_OAMBuffer[$00].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$01].Tile,y
	REP.b #$20
	LDA.b $9B
	AND.w #$00FF
	TAX
	SEP.b #$20
	JSR.w CODE_27CE16
	LDA.w SMB3_OAMBuffer[$00].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$01].YDisp,y
	LDA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	TXA
	LSR
	ROR
	AND.b #$80
	STA.b $00
	LDA.b !RAM_SMB3_Global_FrameCounter
	LSR
	LSR
	LSR
	ROR
	AND.b #$80
	ORA.b #$22
	EOR.b $00
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$01].Prop,y
	AND.b #$80
	BEQ.b CODE_27CEAF
	LDA.w SMB3_OAMBuffer[$00].Tile,y
	PHA
	LDA.w SMB3_OAMBuffer[$01].Tile,y
	STA.w SMB3_OAMBuffer[$00].Tile,y
	PLA
	STA.w SMB3_OAMBuffer[$01].Tile,y
CODE_27CEAF:
	PHY
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b $D9
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	PLY
	SEP.b #$10
	JMP.w CODE_27D305

ADDR_27CEC8:							; Optimization: Unused RTS
	RTS
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_ExtSpr09_PowerDownSuit(Address)
namespace SMB3_ExtSpr09_PowerDownSuit
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.b $9C
	BNE.b CODE_27CED0
	JSR.w CODE_27CC1B
CODE_27CED0:
	JSR.w CODE_27D72B
	LDA.b !RAM_SMB3_Level_ExtSpr_XPosHi,x
	XBA
	LDA.w !RAM_SMB3_Level_ExtSpr_XPosLo,x
	REP.b #$30
	SEC
	SBC.w $0210
	STA.b $D8
	CLC
	ADC.w #$0008
	STA.b $DA
	LDY.b $C6,x
	LDA.w $06C7,x
	AND.w #$00FF
	TAX
	SEP.b #$20
	LDA.w DATA_21C7D2,x
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$01].Prop,y
	CPX.w #$0000
	BEQ.b CODE_27CF02
	ORA.b #$40
CODE_27CF02:
	STA.w SMB3_OAMBuffer[$02].Prop,y
	STA.w SMB3_OAMBuffer[$03].Prop,y
	TXA
	ASL
	TAX
	LDA.w DATA_21C7CA,x
	STA.w SMB3_OAMBuffer[$00].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$01].Tile,y
	LDA.w DATA_21C7CA+$01,x
	STA.w SMB3_OAMBuffer[$02].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$03].Tile,y
	PHY
	REP.b #$20
	LDA.b $9B
	AND.w #$00FF
	TAX
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b $D9
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	LDA.b $DB
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$02].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$03].Slot,y
	PLY
	JSR.w CODE_27CF49
	SEP.b #$10
	RTS
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_ExtSpr0A_ThrownWrench(Address)
namespace SMB3_ExtSpr0A_ThrownWrench
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.b $9C
	BNE.b CODE_27CD90
	JSR.w CODE_27CD5F
	JSR.w SMB3_UpdateExtendedSpritePosition_X
	LDA.w !RAM_SMB3_Level_ExtSpr_YSpeed,x
	BEQ.b CODE_27CD8D
	INC.w !RAM_SMB3_Level_ExtSpr_YSpeed,x
CODE_27CD8D:
	JSR.w SMB3_UpdateExtendedSpritePosition_Y
CODE_27CD90:
	JSR.w CODE_27D305
	JSR.w CODE_27D72B
	BNE.b CODE_27CE15
	LDA.w !RAM_SMB3_Level_ExtSpr_XSpeed,x
	AND.b #$80
	STA.b $00
	LDA.b !RAM_SMB3_Level_ExtSpr_XPosHi,x
	XBA
	LDA.w !RAM_SMB3_Level_ExtSpr_XPosLo,x
	REP.b #$30
	SEC
	SBC.w $0210
	STA.b $D8
	LDY.b $C6,x
	LDA.w $0565
	LSR
	CLC
	ADC.b $9B
	AND.w #$0003
	TAX
	SEP.b #$20
	LDA.w DATA_21C7C2,x
	STA.w SMB3_OAMBuffer[$00].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$01].Tile,y
	LDA.w DATA_21C7C6,x
	EOR.b $00
	ORA.b #$20
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$01].Prop,y
	AND.b #$80
	BEQ.b CODE_27CDE5
	LDA.w SMB3_OAMBuffer[$00].Tile,y
	PHA
	LDA.w SMB3_OAMBuffer[$01].Tile,y
	STA.w SMB3_OAMBuffer[$00].Tile,y
	PLA
	STA.w SMB3_OAMBuffer[$01].Tile,y
CODE_27CDE5:
	REP.b #$20
	LDA.b $9B
	AND.w #$00FF
	TAX
	SEP.b #$20
	JSR.w CODE_27CE16
	LDA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	LDA.w SMB3_OAMBuffer[$00].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$01].YDisp,y
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b $D9
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	SEP.b #$10
CODE_27CE15:
	RTS
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_ExtSpr0B_Cannonball(Address)
namespace SMB3_ExtSpr0B_Cannonball
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.b $9C
	BNE.b CODE_27CC46
	JSR.w CODE_27CC1B
	JSR.w CODE_27CD5F
	LDA.w $06C7,x
	BNE.b CODE_27CC46
	DEC.w !RAM_SMB3_Level_ExtSpr_YSpeed,x
	DEC.w !RAM_SMB3_Level_ExtSpr_YSpeed,x
CODE_27CC46:
	JSR.w CODE_27D72B
	BNE.b CODE_27CC30
	LDA.b !RAM_SMB3_Level_ExtSpr_XPosHi,x
	XBA
	LDA.w !RAM_SMB3_Level_ExtSpr_XPosLo,x
	REP.b #$30
	SEC
	SBC.w $0210
	STA.b $D8
	CLC
	ADC.w #$0008
	STA.b $DA
	SEP.b #$20
	LDY.b $C6,x
	JSR.w CODE_27CF49
	LDA.b #$2A
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$01].Prop,y
	STA.w SMB3_OAMBuffer[$02].Prop,y
	STA.w SMB3_OAMBuffer[$03].Prop,y
	LDA.b #$CE
	STA.w SMB3_OAMBuffer[$02].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$03].Tile,y
	LDA.b #$CC
	STA.w SMB3_OAMBuffer[$00].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$01].Tile,y
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b $D9
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	LDA.b $DB
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$02].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$03].Slot,y
	SEP.b #$10
	LDA.w $06C7,x
	ORA.w !RAM_SMB3_Level_Player_DeathState
	ORA.w $0583
	BNE.b CODE_27CD25
	LDY.b #$00
	LDA.b !RAM_SMB3_Level_Player_CurrentPowerUp
	BEQ.b CODE_27CCBB
	LDA.w $056F
	BNE.b CODE_27CCBB
	INY
CODE_27CCBB:
	LDA.w !RAM_SMB3_Level_ExtSpr_YPosLo,x
	SEC
	SBC.b $70
	SEC
	SBC.w DATA_21C7BE,y
	CMP.w DATA_21C7C0,y
	BCS.b CODE_27CD25
	LDA.w !RAM_SMB3_Level_ExtSpr_XPosLo,x
	CLC
	ADC.b #$08
	SEC
	SBC.b $5E
	CMP.b #$14
	BCS.b CODE_27CD25
	LDA.w !RAM_SMB3_Level_Player_StarPowerTimer
	BNE.b CODE_27CD09
	LDA.b !RAM_SMB3_Level_Player_YSpeed
	BMI.b CODE_27CD22
	LDA.w !RAM_SMB3_Level_ExtSpr_YPosHi,x
	XBA
	LDA.w !RAM_SMB3_Level_ExtSpr_YPosLo,x
	REP.b #$20
	SEC
	SBC.w $0216
	SEC
	SBC.w #$0013
	STA.b $D8
	SEP.b #$20
	CMP.b !RAM_SMB3_Level_Player_OnScreenYPos
	PHP
	LDY.w !RAM_SMB3_Level_Player_IsAboveTopOfLevelFlag
	BPL.b CODE_27CD06
	LDY.b $D9
	BMI.b CODE_27CD06
	PLP
	BCS.b CODE_27CD22
	BRA.b CODE_27CD09

CODE_27CD06:
	PLP
	BCC.b CODE_27CD22
CODE_27CD09:
	LDA.b #$01
	STA.w $06C7,x
	LDA.b #$00
	STA.w !RAM_SMB3_Level_ExtSpr_XSpeed,x
	STA.w !RAM_SMB3_Level_ExtSpr_YSpeed,x
if !Define_Global_ROMToAssemble&(!ROM_SMASW_E|!ROM_SMAS_E|!ROM_SMB3_E) != $00
	LDA.b #$C0
else
	LDA.b #$D0
endif
	STA.b !RAM_SMB3_Level_Player_YSpeed
	LDA.b #!Define_SMAS_Sound0060_Contact
	STA.w !RAM_SMB3_Global_SoundCh1
	JMP.w CODE_27CD26

CODE_27CD22:
	JMP.w CODE_27D339

CODE_27CD25:
	RTS

CODE_27CD26:
	JSR.w CODE_278ADB
	LDA.b #$85
CODE_27CD2B:
	CLC
	ADC.w !RAM_SMB3_Level_ConsecutiveEnemiesStompedCounter
	STA.w $079F,y
	INC.w !RAM_SMB3_Level_ConsecutiveEnemiesStompedCounter
	LDA.b #$30
	STA.w $07A4,y
	LDA.w !RAM_SMB3_Level_ExtSpr_YPosLo,x
	SEC
	SBC.w $0543
	SBC.b #$06
	CMP.b #$C0
	BCC.b CODE_27CD49
	LDA.b #$05
CODE_27CD49:
	STA.w $07A9,y
	LDA.w !RAM_SMB3_Level_ExtSpr_XPosLo,x
	SEC
	SBC.w $0210
	STA.w $07AE,y
	LDA.b !RAM_SMB3_Level_ExtSpr_XPosHi,x
	SBC.w $0211
	STA.w $0251,y
	RTS
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_ExtSpr0D_SmallStar(Address)
namespace SMB3_ExtSpr0D_SmallStar
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.w $06C7,x
	BNE.b CODE_27C991
	LDA.w $06D1,x
	BEQ.b CODE_27C992
	LSR
	LSR
	LSR
	LSR
	AND.b #$03
	TAY
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.w DATA_21C7A2,y
	BNE.b CODE_27C939
	JSR.w SMB3_UpdateExtendedSpritePosition_X
	JSR.w SMB3_UpdateExtendedSpritePosition_Y
CODE_27C939:
	JSR.w CODE_27D72B
	LDA.b !RAM_SMB3_Level_ExtSpr_XPosHi,x
	XBA
	LDA.w !RAM_SMB3_Level_ExtSpr_XPosLo,x
	REP.b #$30
	SEC
	SBC.w $0210
	STA.b $D8
	SEP.b #$20
	LDY.b $C6,x
	JSR.w CODE_27CE16
	LDA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	LDA.w SMB3_OAMBuffer[$00].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$01].YDisp,y
	LDA.b #$3A
	STA.w SMB3_OAMBuffer[$00].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$01].Tile,y
	LDA.w $0565
	LSR
	LSR
	CLC
	ADC.b $9B
	AND.b #$03
	ASL
	ORA.b #$21
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$01].Prop,y
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b $D9
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	SEP.b #$10
	RTS

CODE_27C991:
	RTS

CODE_27C992:
	JMP.w CODE_27D382
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_ExtSpr0E_Bubble(Address)
namespace SMB3_ExtSpr0E_Bubble
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.b $9C
	BNE.b CODE_27CBB7
	LDA.w $06D1,x
	BNE.b CODE_27CB80
	JMP.w CODE_27D382

CODE_27CB80:
	LDA.w $06C7,x
	BNE.b CODE_27CBA5
	JSR.w SMB3_UpdateExtendedSpritePosition_Y
	LDA.w !RAM_SMB3_Level_ExtSpr_YSpeed,x
	BMI.b CODE_27CB97
	SEC
	SBC.b #$07
	STA.w !RAM_SMB3_Level_ExtSpr_YSpeed,x
	BPL.b CODE_27CBA2
	BMI.b CODE_27CB9F							; Note: This will always branch

CODE_27CB97:
	CLC
	ADC.b #$07
	STA.w !RAM_SMB3_Level_ExtSpr_YSpeed,x
	BMI.b CODE_27CBA2
CODE_27CB9F:
	INC.w $06C7,x
CODE_27CBA2:
	JMP.w CODE_27CBB7

CODE_27CBA5:
	INC.w $06BD,x
	LDA.w $06BD,x
	AND.b #$30
	BEQ.b CODE_27CBB7
	DEC.w !RAM_SMB3_Level_ExtSpr_YPosLo,x
	BNE.b CODE_27CBB7
	DEC.w !RAM_SMB3_Level_ExtSpr_YPosHi,x
CODE_27CBB7:
	LDA.w $0565
	AND.b #$0C
	LSR
	LSR
	TAY
	LDA.w DATA_21C731,y
	STA.b $00
	JSR.w CODE_27D72B
	LDA.b !RAM_SMB3_Level_ExtSpr_XPosHi,x
	XBA
	LDA.w !RAM_SMB3_Level_ExtSpr_XPosLo,x
	REP.b #$30
	SEC
	SBC.w $0210
	STA.b $D8
	SEP.b #$20
	LDY.b $C6,x
	JSR.w CODE_27CE16
	LDA.w SMB3_OAMBuffer[$00].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$01].YDisp,y
	LDA.w !RAM_SMB3_Level_ExtSpr_XPosLo,x
	CLC
	ADC.b $00
	SEC
	SBC.w $0210
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	LDA.b #$C6
	STA.w SMB3_OAMBuffer[$00].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$01].Tile,y
	LDA.b #$23
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$01].Prop,y
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b $D9
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	SEP.b #$10
	RTS
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_ExtSpr0F_LavaLotusFire(Address)
namespace SMB3_ExtSpr0F_LavaLotusFire
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.b $9C
	BNE.b CODE_27CB05
	LDA.w $0597,x
	BEQ.b CODE_27CABF
	LDA.b !RAM_SMB3_Global_FrameCounter
	LSR
	BCC.b CODE_27CABF
	DEC.w $0597,x
CODE_27CABF:
	LDA.w $06C7,x
	BEQ.b CODE_27CAF9
	LDY.w $06BD,x
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,y
	CMP.b #$02
	BNE.b CODE_27CAEF
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,y
	CMP.b #!Define_SMB3_SpriteID_NorSpr067_LavaLotus
	BNE.b CODE_27CAEF
	LDA.w !RAM_SMB3_NorSpr067_LavaLotus_FireballSpawnTimer,y
	CMP.b #$4F
	BCC.b CODE_27CAEF
	LDA.w $0565
	INC.w !RAM_SMB3_Level_ExtSpr_XPosLo,x
	AND.b #$02
	BNE.b CODE_27CAEC
	DEC.w !RAM_SMB3_Level_ExtSpr_XPosLo,x
	DEC.w !RAM_SMB3_Level_ExtSpr_XPosLo,x
CODE_27CAEC:
	JMP.w CODE_27CB05

CODE_27CAEF:
	LDA.b #$00
	STA.w $06C7,x
	LDA.b #$C0
	STA.w $0597,x
CODE_27CAF9:
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$03
	BNE.b CODE_27CB05
	JSR.w SMB3_UpdateExtendedSpritePosition_X
	JSR.w SMB3_UpdateExtendedSpritePosition_Y
CODE_27CB05:
	LDA.w $0597,x
	BNE.b CODE_27CB0D
	JMP.w CODE_27D382

CODE_27CB0D:
	CMP.b #$30
	BCS.b CODE_27CB1A
	TXA
	ASL
	ADC.w $0597,x
	AND.b #$02
	BNE.b CODE_27CB73
CODE_27CB1A:
	JSR.w CODE_27D72B
	LDA.b !RAM_SMB3_Level_ExtSpr_XPosHi,x
	XBA
	LDA.w !RAM_SMB3_Level_ExtSpr_XPosLo,x
	REP.b #$30
	SEC
	SBC.w $0210
	STA.b $D8
	SEP.b #$20
	LDY.b $C6,x
	JSR.w CODE_27CE16
	LDA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	LDA.w SMB3_OAMBuffer[$00].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$01].YDisp,y
	LDA.w $0565
	LSR
	LSR
	LSR
	LDA.b #$18
	BCC.b CODE_27CB4D
	LDA.b #$1A
CODE_27CB4D:
	STA.w SMB3_OAMBuffer[$00].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$01].Tile,y
	LDA.b #$23
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$01].Prop,y
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b $D9
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	SEP.b #$10
	JMP.w CODE_27D305

CODE_27CB73:
	RTS
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_ExtSpr10_MagicWand(Address)
namespace SMB3_ExtSpr10_MagicWand
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.b $9C
	BNE.b CODE_27C9F6
	JSR.w CODE_27CC1B
	DEC.w !RAM_SMB3_Level_ExtSpr_YSpeed,x
	LDA.w $1CFC
	CLC
	ADC.w $06BD,x
	STA.w $1CFC
	BCC.b CODE_27C9AE
	INC.w $1CFD
CODE_27C9AE:
	JSR.w CODE_27C442
	BCC.b CODE_27C9F6
	LDA.w !RAM_SMB3_Level_ExtSpr_YSpeed,x
	BMI.b CODE_27C9F6
	CMP.b #$20
	BCC.b CODE_27C9E3
	LSR
	JSL.l SMB3_UnnecessaryInvertARt_Main
	STA.w !RAM_SMB3_Level_ExtSpr_YSpeed,x
	DEC.w !RAM_SMB3_Level_ExtSpr_YPosLo,x
	DEC.w !RAM_SMB3_Level_ExtSpr_YPosLo,x
	LDA.w $1CFE
	BNE.b CODE_27C9D4
	LDA.b #!Define_SMAS_Sound0060_WandDrop
	STA.w !RAM_SMB3_Global_SoundCh1
CODE_27C9D4:
	INC.w $1CFE
	LDA.w $06BD,x
	CLC
	ADC.b #$80
	STA.w $06BD,x
	JMP.w CODE_27C9F6

CODE_27C9E3:
	LDA.b #$00
	STA.w !RAM_SMB3_Level_ExtSpr_YSpeed,x
	STA.w $1CFD
	LDA.w !RAM_SMB3_Level_ExtSpr_YPosLo,x
	AND.b #$F0
	CLC
	ADC.b #$05
	STA.w !RAM_SMB3_Level_ExtSpr_YPosLo,x
CODE_27C9F6:
	JSR.w CODE_27D72B
	BEQ.b CODE_27C9FC
	RTS

CODE_27C9FC:
	LDA.b !RAM_SMB3_Level_ExtSpr_XPosHi,x
	XBA
	LDA.w !RAM_SMB3_Level_ExtSpr_XPosLo,y
	REP.b #$30
	SEC
	SBC.w $0210
	STA.b $D8
	CLC
	ADC.w #$0008
	STA.b $DA
	SEP.b #$20
	LDY.b $C6,x
	JSR.w CODE_27CF49
	LDA.w SMB3_OAMBuffer[$00].YDisp,y
	SBC.b #$04
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	STA.w SMB3_OAMBuffer[$02].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$01].YDisp,y
	STA.w SMB3_OAMBuffer[$03].YDisp,y
	REP.b #$20
	LDA.w $1CFE
	AND.w #$00FF
	LSR
	LDA.w $1CFD
	AND.w #$0007
	BCC.b CODE_27CA3F
	EOR.w #$0007
CODE_27CA3F:
	AND.w #$00FF
	TAX
	SEP.b #$20
	LDA.w DATA_21C7A6,x
	STA.w SMB3_OAMBuffer[$00].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$01].Tile,y
	LDA.w DATA_21C7AE,x
	STA.w SMB3_OAMBuffer[$02].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$03].Tile,y
	LDA.w DATA_21C7B6,x
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$01].Prop,y
	ORA.b #$40
	STA.w SMB3_OAMBuffer[$02].Prop,y
	STA.w SMB3_OAMBuffer[$03].Prop,y
	AND.b #$80
	BEQ.b CODE_27CA8A
	LDA.w SMB3_OAMBuffer[$00].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$00].Tile,y
	LDA.w SMB3_OAMBuffer[$01].Tile,y
	DEC
	STA.w SMB3_OAMBuffer[$01].Tile,y
	LDA.w SMB3_OAMBuffer[$02].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$02].Tile,y
	LDA.w SMB3_OAMBuffer[$03].Tile,y
	DEC
	STA.w SMB3_OAMBuffer[$03].Tile,y
CODE_27CA8A:
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b $D9
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	LDA.b $DB
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$02].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$03].Slot,y
	SEP.b #$10
	LDX.b $9B
	JMP.w CODE_27D305

CODE_27CAAD:						; Optimization: Unused RTS
	RTS
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_ExtSpr14_MiniBlooper(Address)
namespace SMB3_ExtSpr14_MiniBlooper
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.b $9C
	BNE.b CODE_27C723
	LDA.b !RAM_SMB3_Global_FrameCounter
	AND.b #$07
	BNE.b CODE_27C710
	LDA.w !RAM_SMB3_ExtSpr14_MiniBlooper_VerticalMovementDirection,x
	AND.b #$01
	TAY
	LDA.w !RAM_SMB3_Level_ExtSpr_YSpeed,x
	CLC
	ADC.w DATA_21C78E,y
	STA.w !RAM_SMB3_Level_ExtSpr_YSpeed,x
	CMP.w DATA_21C790,y
	BNE.b CODE_27C6F8
	INC.w !RAM_SMB3_ExtSpr14_MiniBlooper_VerticalMovementDirection,x
CODE_27C6F8:
	LDA.w !RAM_SMB3_ExtSpr14_MiniBlooper_HorizontalMovementDirection,x
	AND.b #$01
	TAY
	LDA.w !RAM_SMB3_Level_ExtSpr_XSpeed,x
	CLC
	ADC.w DATA_21C78E,y
	STA.w !RAM_SMB3_Level_ExtSpr_XSpeed,x
	CMP.w DATA_21C790,y
	BNE.b CODE_27C710
	INC.w !RAM_SMB3_ExtSpr14_MiniBlooper_HorizontalMovementDirection,x
CODE_27C710:
	JSR.w SMB3_UpdateExtendedSpritePosition_X
	LDA.w !RAM_SMB3_Level_ExtSpr_YSpeed,x
	BPL.b CODE_27C720
	JSR.w CODE_27C442
	LDA.w $1A68,x
	BEQ.b CODE_27C723
CODE_27C720:
	JSR.w SMB3_UpdateExtendedSpritePosition_Y
CODE_27C723:
	LDA.w !RAM_SMB3_ExtSpr14_MiniBlooper_DespawnTimer,x
	BEQ.b CODE_27C7A4
	CMP.b #$30
	BCS.b CODE_27C730
	AND.b #$02
	BNE.b CODE_27C7A1
CODE_27C730:
	JSR.w CODE_27D72B
	LDA.b !RAM_SMB3_Level_ExtSpr_XPosHi,x
	XBA
	LDA.w !RAM_SMB3_Level_ExtSpr_XPosLo,x
	REP.b #$20
	SEC
	SBC.w $0210
	STA.b $D8
	SEP.b #$20
	REP.b #$10
	LDY.b $C6,x
	JSR.w CODE_27CE16
	LDA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	REP.b #$20
	LDA.w $0565
	LSR
	AND.w #$000F
	TAX
	SEP.b #$20
	LDA.w SMB3_OAMBuffer[$00].YDisp,y
	CLC
	ADC.w DATA_21C792,x
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$01].YDisp,y
	TXA
	CMP.b #$08
	LDA.b #$B4
	BCC.b CODE_27C775
	LDA.b #$B6
CODE_27C775:
	STA.w SMB3_OAMBuffer[$00].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$01].Tile,y
	LDA.b #$2A
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$01].Prop,y
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b $D9
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	SEP.b #$10
	LDX.b $9B
	AND.b #$01
	BNE.b CODE_27C7A1
	JMP.w CODE_27D305

CODE_27C7A1:
	SEP.b #$20
	RTS

CODE_27C7A4:
	JMP.w CODE_27D382
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_ExtSpr15_Laser(Address)
namespace SMB3_ExtSpr15_Laser
%InsertMacroAtXPosition(<Address>)

Main:
	JSR.w CODE_27C67F
	LDA.b $9C
	BNE.b CODE_27C65A
	LDA.w !RAM_SMB3_Level_ExtSpr_YPosLo,x
	CLC
	ADC.b #$08
	STA.w !RAM_SMB3_Level_ExtSpr_YPosLo,x
	LDA.b !RAM_SMB3_Level_ExtSpr_XPosHi,x
	XBA
	LDA.w !RAM_SMB3_Level_ExtSpr_XPosLo,x
	REP.b #$20
	SEC
	SBC.w #$0008
	SEP.b #$20
	STA.w !RAM_SMB3_Level_ExtSpr_XPosLo,x
	XBA
	STA.b !RAM_SMB3_Level_ExtSpr_XPosHi,x
	JSR.w CODE_27C442
	BCC.b CODE_27C65A
	LDA.w !RAM_SMB3_Level_ExtSpr_YPosLo,x
	AND.b #$F0
	CLC
	ADC.b #$05
	STA.w !RAM_SMB3_Level_ExtSpr_YPosLo,x
	LDA.w !RAM_SMB3_Level_ExtSpr_XPosLo,x
	AND.b #$F0
	ADC.b #$0B
	STA.w !RAM_SMB3_Level_ExtSpr_XPosLo,x
	JSR.w CODE_27D382
	LDY.b #$01
CODE_27C652:
	LDA.w !RAM_SMB3_Level_MExtSpr_SpriteID,y
	BEQ.b CODE_27C65B
	DEY
	BPL.b CODE_27C652
CODE_27C65A:
	RTS

CODE_27C65B:
	LDA.b #$01
	STA.w !RAM_SMB3_Level_MExtSpr_SpriteID,y
	LDA.w !RAM_SMB3_Level_ExtSpr_XPosLo,x
	SEC
	SBC.b #$08
	SEC
	SBC.w $0210
	STA.w !RAM_SMB3_Level_MExtSpr_XPosLo,y
	LDA.w !RAM_SMB3_Level_ExtSpr_YPosLo,x
	CLC
	ADC.b #$04
	SBC.w $0543
	STA.w !RAM_SMB3_Level_MExtSpr_YPosLo,y
	LDA.b #$17
	STA.w !RAM_SMB3_Level_MExtSpr_Table7E1FAE,y
	RTS

CODE_27C67F:
	JSR.w CODE_27D72B
	LDA.b !RAM_SMB3_Level_ExtSpr_XPosHi,x
	XBA
	LDA.w !RAM_SMB3_Level_ExtSpr_XPosLo,x
	REP.b #$30
	SEC
	SBC.w $0210
	STA.b $D8
	SEP.b #$20
	LDY.b $C6,x
	JSR.w CODE_27CE16
	LDA.w SMB3_OAMBuffer[$00].XDisp,y
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	LDA.w SMB3_OAMBuffer[$00].YDisp,y
	CLC
	ADC.b #$08
	STA.w SMB3_OAMBuffer[$01].YDisp,y
	LDA.b #$4A
	STA.w SMB3_OAMBuffer[$00].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$01].Tile,y
	LDA.b !RAM_SMB3_Global_FrameCounter
	LSR
	LSR
	AND.b #$03
	ASL
	ORA.b #$21
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$01].Prop,y
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b $D9
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	SEP.b #$10
	JMP.w CODE_27D305

ADDR_27C6D5:							; Optimization: Unused RTS
	RTS
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_ExtSpr16_SmokePuff(Address)
namespace SMB3_ExtSpr16_SmokePuff
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.w $06C7,x
	BNE.b CODE_27D67D
	JMP.w CODE_27D382

CODE_27D67D:
	CMP.b #$18
	BCC.b CODE_27D686
	LDA.b #$17
	STA.w $06C7,x
CODE_27D686:
	LDA.b $9C
	BNE.b CODE_27D68D
	DEC.w $06C7,x
CODE_27D68D:
	JSR.w CODE_27D72B
	BNE.b SMB3_ExtSprXX_EnemyFireball_CODE_27D674
	LDA.w !RAM_SMB3_Level_ExtSpr_XPosHi,x
	XBA
	LDA.w !RAM_SMB3_Level_ExtSpr_XPosLo,x
	REP.b #$30
	SEC
	SBC.w $0210
	STA.b $00
	CLC
	ADC.w #$0008
	STA.b $02
	SEP.b #$20
	LDY.b $C6,x
	JSR.w CODE_27CF49
	LDA.w $0565
	LSR
	LSR
	LSR
	ROR
	AND.b #$80
	ORA.b #$22
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$01].Prop,y
	EOR.b #$40
	STA.w SMB3_OAMBuffer[$02].Prop,y
	STA.w SMB3_OAMBuffer[$03].Prop,y
	REP.b #$20
	LDA.w $06C7,x
	AND.w #$00FF
	LSR
	LSR
	LSR
	TAX
	SEP.b #$20
	LDA.w DATA_21C836,x
	STA.w SMB3_OAMBuffer[$00].Tile,y
	STA.w SMB3_OAMBuffer[$02].Tile,y
	INC
	STA.w SMB3_OAMBuffer[$01].Tile,y
	STA.w SMB3_OAMBuffer[$03].Tile,y
	LDA.w SMB3_OAMBuffer[$00].Prop,y
	AND.b #$80
	BEQ.b CODE_27D708
	LDA.w SMB3_OAMBuffer[$00].Tile,y
	PHA
	LDA.w SMB3_OAMBuffer[$01].Tile,y
	STA.w SMB3_OAMBuffer[$00].Tile,y
	PLA
	STA.w SMB3_OAMBuffer[$01].Tile,y
	LDA.w SMB3_OAMBuffer[$02].Tile,y
	PHA
	LDA.w SMB3_OAMBuffer[$03].Tile,y
	STA.w SMB3_OAMBuffer[$02].Tile,y
	PLA
	STA.w SMB3_OAMBuffer[$03].Tile,y
CODE_27D708:
	PHY
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b $01
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	LDA.b $03
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$02].Slot,y
	STA.w SMB3_OAMTileSizeBuffer[$03].Slot,y
	PLY
	SEP.b #$10
	LDX.b $9B
	RTS
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_ExtSpr17_PodobooFire(Address)
namespace SMB3_ExtSpr17_PodobooFire
%InsertMacroAtXPosition(<Address>)

DATA_27DFF5:
	db $CC,$CD,$FD

DATA_27DFF8:
	db $23,$23,$21

Main:
	LDA.b $9C
	BNE.b CODE_27E018
	LDA.w $06D1,x
	BNE.b CODE_27E018
	LDA.b #$04
	STA.w $06D1,x
	INC.w $06BD,x
	LDA.w $06BD,x
	CMP.b #$03
	BCC.b CODE_27E018
	STZ.w !RAM_SMB3_Level_ExtSpr_SpriteID,x
	BRA.b CODE_27E063

CODE_27E018:
	JSR.w CODE_27D72B
	BNE.b CODE_27E063
	LDA.w $06BD,x
	CMP.b #$03
	BCS.b CODE_27E063
	PHX
	TAX
	LDA.l DATA_27DFF5,x
	STA.b $DA
	LDA.l DATA_27DFF8,x
	STA.b $DB
	PLX
	LDA.b !RAM_SMB3_Level_ExtSpr_XPosHi,x
	XBA
	LDA.w !RAM_SMB3_Level_ExtSpr_XPosLo,x
	REP.b #$30
	SEC
	SBC.w $0210
	STA.b $D8
	SEP.b #$20
	LDY.b $C6,x
	JSR.w CODE_27CE16
	LDA.b $DA
	STA.w SMB3_OAMBuffer[$00].Tile,y
	LDA.b $DB
	STA.w SMB3_OAMBuffer[$00].Prop,y
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b $D9
	AND.b #$01
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	SEP.b #$10
CODE_27E063:
	RTS
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_ExtSpr18_LavaSplash(Address)
namespace SMB3_ExtSpr18_LavaSplash
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.w $06D1,x
	BNE.b CODE_27E06D
	STZ.w !RAM_SMB3_Level_ExtSpr_SpriteID,x
	RTS

CODE_27E06D:
	PHB
	PHK
	PLB
	LDA.w $06D1,x
	AND.b #$FC
	LSR
	TAY
	LDA.w !RAM_SMB3_Level_ExtSpr_XPosLo,x
	STA.b $0E
	LDA.w !RAM_SMB3_Level_ExtSpr_XPosHi,x
	STA.b $0F
	REP.b #$30
	LDA.b $0E
	CLC
	ADC.w #$0004
	SEC
	SBC.w $0210
	STA.b $0E
	SEC
	SBC.w DATA_27E14C,y
	STA.b $00
	LDA.b $0E
	SEC
	SBC.w DATA_27E158,y
	STA.b $02
	LDA.b $0E
	CLC
	ADC.w DATA_27E14C,y
	STA.b $04
	LDA.b $0E
	CLC
	ADC.w DATA_27E158,y
	STA.b $06
	TYA
	LSR
	TAY
	SEP.b #$20
	LDA.w !RAM_SMB3_Level_ExtSpr_YPosLo,x
	SEC
	SBC.w $0216
	STA.b $08
	CLC
	ADC.w DATA_27E16A,y
	STA.b $09
	LDA.b $08
	CLC
	ADC.w DATA_27E164,y
	STA.b $08
	LDA.w DATA_27E170,y
	STA.b $0A
	LDA.w DATA_27E176,y
	STA.b $0B
	JSR.w CODE_27D72B
	REP.b #$10
	LDY.b $C6,x
	LDA.b $00
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	LDA.b $02
	STA.w SMB3_OAMBuffer[$01].XDisp,y
	LDA.b $04
	STA.w SMB3_OAMBuffer[$02].XDisp,y
	LDA.b $06
	STA.w SMB3_OAMBuffer[$03].XDisp,y
	LDA.b $08
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	STA.w SMB3_OAMBuffer[$03].YDisp,y
	LDA.b $09
	STA.w SMB3_OAMBuffer[$01].YDisp,y
	STA.w SMB3_OAMBuffer[$02].YDisp,y
	LDA.b $0A
	STA.w SMB3_OAMBuffer[$00].Tile,y
	STA.w SMB3_OAMBuffer[$01].Tile,y
	STA.w SMB3_OAMBuffer[$02].Tile,y
	STA.w SMB3_OAMBuffer[$03].Tile,y
	LDA.b $0B
	STA.w SMB3_OAMBuffer[$00].Prop,y
	STA.w SMB3_OAMBuffer[$01].Prop,y
	ORA.b #$40
	STA.w SMB3_OAMBuffer[$02].Prop,y
	STA.w SMB3_OAMBuffer[$03].Prop,y
	REP.b #$20
	TYA
	LSR
	LSR
	TAY
	SEP.b #$20
	LDA.b $01
	BEQ.b CODE_27E12A
	LDA.b #$01
CODE_27E12A:
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	LDA.b $03
	BEQ.b CODE_27E133
	LDA.b #$01
CODE_27E133:
	STA.w SMB3_OAMTileSizeBuffer[$01].Slot,y
	LDA.b $05
	BEQ.b CODE_27E13C
	LDA.b #$01
CODE_27E13C:
	STA.w SMB3_OAMTileSizeBuffer[$02].Slot,y
	LDA.b $07
	BEQ.b CODE_27E145
	LDA.b #$01
CODE_27E145:
	STA.w SMB3_OAMTileSizeBuffer[$03].Slot,y
	SEP.b #$10
	PLB
	RTS

DATA_27E14C:
	db $0F,$00,$0E,$00,$0D,$00,$0C,$00
	db $0B,$00,$0A,$00

DATA_27E158:
	db $12,$00,$10,$00,$0E,$00,$0C,$00
	db $0A,$00,$08,$00

DATA_27E164:
	db $0A,$09,$09,$0A,$0B,$0C

DATA_27E16A:
	db $06,$05,$04,$06,$08,$0A

DATA_27E170:
	db $1D,$1D,$D1,$D1,$D0,$D0

DATA_27E176:
	db $22,$22,$23,$23,$23,$23
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_ShooterSprXX_BulletShooter(Address)
namespace SMB3_ShooterSprXX_BulletShooter
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.w $06E3,x
	BNE.b SMB3_ShooterSpr03_RockyWrenchSpawner_CODE_27DBE6
	LDA.w !RAM_SMB3_Level_ShooterSpr_YPosLo,x
	CMP.w $0543
	LDA.w !RAM_SMB3_Level_ShooterSpr_YPosHi,x
	SBC.w $0542
	BNE.b SMB3_ShooterSpr03_RockyWrenchSpawner_CODE_27DBE6
	LDA.w !RAM_SMB3_Level_ShooterSpr_XPosLo,x
	CMP.w $0210
	LDA.w !RAM_SMB3_Level_ShooterSpr_XPosHi,x
	SBC.b $12
	BNE.b SMB3_ShooterSpr03_RockyWrenchSpawner_CODE_27DBE6
	LDA.w !RAM_SMB3_Global_RandomByte02,x
	AND.b #$1F
	ORA.b #$80
	STA.w $06E3,x
	LDA.w !RAM_SMB3_Level_ShooterSpr_XPosLo,x
	SEC
	SBC.w $0210
	CLC
	ADC.b #$10
	CMP.b #$20
	BCC.b SMB3_ShooterSpr03_RockyWrenchSpawner_CODE_27DBE6
	LDA.b $5E
	SBC.w !RAM_SMB3_Level_ShooterSpr_XPosLo,x
	CLC
	ADC.b #$11
	CMP.b #$22
	BCC.b SMB3_ShooterSpr03_RockyWrenchSpawner_CODE_27DBE6
	JSR.w CODE_27DC88
	LDY.b $9B
	LDA.w !RAM_SMB3_Level_ShooterSpr_SpriteID,y
	LSR
	LDA.b #!Define_SMB3_SpriteID_NorSpr078_BulletBill
	BCS.b CODE_27DC3A
	LDA.b #!Define_SMB3_SpriteID_NorSpr079_HomingBill
CODE_27DC3A:
	STA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	LDA.b #$00
	STA.w $1FE9,x
	LDA.w !RAM_SMB3_Level_ShooterSpr_YPosLo,y
	SEC
	SBC.b #$01
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	LDA.w !RAM_SMB3_Level_ShooterSpr_YPosHi,y
	SBC.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	LDA.w !RAM_SMB3_Level_ShooterSpr_XPosHi,y
	STA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	LDA.w !RAM_SMB3_Level_ShooterSpr_XPosLo,y
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	STA.w $1CD7,x
	LDA.b #$0C
	STA.w $0518,x
	LDA.b #$20
	STA.w $1FD2,x
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.w DATA_21C8A1,y
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	LDA.w DATA_21C8A3,y
	STA.w $0679,x
	LDA.w DATA_21C8A5,y
	STA.b $4D,x
	LDX.b $9B
	TYA
	CLC
	ADC.b #$14
	STA.b $00
	JSR.w CODE_27DB51
	RTS
namespace off
	%SetDuplicateOrNullPointer(SMB3_ShooterSprXX_BulletShooter_Main, SMB3_ShooterSpr01_BulletBillLauncher_Main)
	%SetDuplicateOrNullPointer(SMB3_ShooterSprXX_BulletShooter_Main, SMB3_ShooterSpr02_HomingBillLauncher_Main)
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_ShooterSpr03_RockyWrenchSpawner(Address)
namespace SMB3_ShooterSpr03_RockyWrenchSpawner
%InsertMacroAtXPosition(<Address>)

DATA_27DB85:
	db $60,$20

Main:
	LDA.w $06E3,x
	BNE.b CODE_27DBE6
	LDA.w !RAM_SMB3_Level_ShooterSpr_XPosLo,x
	CMP.w $0210
	LDA.w !RAM_SMB3_Level_ShooterSpr_XPosHi,x
	SBC.b $12
	BNE.b CODE_27DBE6
	LDA.w !RAM_SMB3_Level_ShooterSpr_XPosLo,x
	SEC
	SBC.w $0210
	CMP.b #$F0
	BCS.b CODE_27DBE6
	LDA.b #$C0
	STA.w $06E3,x
	JSR.w CODE_27DC88
	LDY.b $9B
	LDA.b #!Define_SMB3_SpriteID_NorSpr0AD_RockyWrench
	STA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	LDA.w !RAM_SMB3_Level_ShooterSpr_YPosLo,y
	SEC
	SBC.b #$06
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	LDA.w !RAM_SMB3_Level_ShooterSpr_YPosHi,y
	SBC.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	LDA.w !RAM_SMB3_Level_ShooterSpr_XPosHi,y
	STA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	LDA.w !RAM_SMB3_Level_ShooterSpr_XPosLo,y
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	LDA.b #$00
	STA.b $68,x
	LDA.b #$28
	STA.w $0518,x
	LDA.b #$05
	STA.w $1FE9,x
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	LDA.w DATA_27DB85,y					; Glitch: The DBR is 21, so that means that this sprite reads garbage data.
	STA.w $0679,x
	LDX.b $9B
CODE_27DBE6:
	RTS
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_ShooterSpr04_RotatingCannonballShooter(Address)
namespace SMB3_ShooterSpr04_RotatingCannonballShooter
%InsertMacroAtXPosition(<Address>)

Main:
;$27DA5A
	LDA.w $1A57,x
	BNE.b CODE_27DA95
	LDA.b #$3D
	STA.w $1A57,x
	LDA.w !RAM_SMB3_Level_ShooterSpr_YPosLo,x
	CMP.w $0543
	LDA.w !RAM_SMB3_Level_ShooterSpr_YPosHi,x
	SBC.w $0542
	BNE.b CODE_27DAC7
	LDA.w !RAM_SMB3_Level_ShooterSpr_XPosLo,x
	CMP.w $0210
	LDA.w !RAM_SMB3_Level_ShooterSpr_XPosHi,x
	SBC.b $12
	BNE.b CODE_27DAC7
	LDA.w !RAM_SMB3_Level_ShooterSpr_XPosLo,x
	SEC
	SBC.w $0210
	CLC
	ADC.b #$20
	CMP.b #$28
	BCC.b CODE_27DAC7
	LDA.b #$20
	STA.w $06E3,x
	INC.w $06DB,x
CODE_27DA95:
	LDA.w $06E3,x
	BEQ.b CODE_27DAC7
	CMP.b #$1D
	BNE.b CODE_27DAC8
	LDA.w $0564
	BEQ.b CODE_27DAAA
	LDA.b #$1E
	STA.w $06E3,x
	BRA.b CODE_27DAC7

CODE_27DAAA:
	LDA.b #$15
	STA.w $0564
	LDA.w !RAM_SMB3_Level_ShooterSpr_YPosLo,x
	STA.w $052B
	LDA.w !RAM_SMB3_Level_ShooterSpr_YPosHi,x
	STA.w $052A
	LDA.w !RAM_SMB3_Level_ShooterSpr_XPosLo,x
	STA.w $0529
	LDA.w !RAM_SMB3_Level_ShooterSpr_XPosHi,x
	STA.w $0528
CODE_27DAC7:
	RTS
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_ShooterSprXX_PipeSpawningGoombas(Address)
namespace SMB3_ShooterSprXX_PipeSpawningGoombas
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.w $06E3,x
	BNE.b CODE_27DA52
	TXA
	TAY
	LDA.b #$70
	STA.w $06E3,y
	INC.w $06DB,x
	LDA.w $06DB,x
	AND.b #$03
	BEQ.b CODE_27DA52
	JSR.w CODE_27DC88
	LDA.w !RAM_SMB3_Level_ShooterSpr_XPosLo,y
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	LDA.w !RAM_SMB3_Level_ShooterSpr_XPosHi,y
	STA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	JSL.l SMB3_CheckPlayerPositionRelativeToSprite_X
	STY.b $01
	LDY.b $9B
	LDA.w !RAM_SMB3_Level_ShooterSpr_SpriteID,y
	LDY.b #$00
	CMP.b #!Define_SMB3_SpriteID_ShooterSpr05_LeftFacingPipeSpawningGoombas
	BNE.b CODE_27DA21
	INY
CODE_27DA21:
	CPY.b $01
	BNE.b CODE_27DA53
	LDA.w DATA_21C843,y
	STA.w $0679,x
	LDY.b $9B
	LDA.w !RAM_SMB3_Level_ShooterSpr_YPosLo,y
	SEC
	SBC.b #$03
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	LDA.w !RAM_SMB3_Level_ShooterSpr_YPosHi,y
	SBC.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	LDA.b #!Define_SMB3_SpriteID_NorSpr072_Goomba
	STA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	LDA.b #$01
	STA.w $1FE9,x
	LDA.b #$28
	STA.w $0689,x
	LDA.b #$FF
	STA.w !RAM_SMB3_Level_NorSpr_XOffscreenFlag,x
CODE_27DA50:
	LDX.b $9B
CODE_27DA52:
	RTS

CODE_27DA53:
	LDA.b #$00
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,x
	BEQ.b CODE_27DA50							; Note: This will always branch.

namespace off
	%SetDuplicateOrNullPointer(SMB3_ShooterSprXX_PipeSpawningGoombas_Main, SMB3_ShooterSpr05_LeftFacingPipeSpawningGoombas_Main)
	%SetDuplicateOrNullPointer(SMB3_ShooterSprXX_PipeSpawningGoombas_Main, SMB3_ShooterSpr06_RightFacingPipeSpawningGoombas_Main)
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_ShooterSprXX_Cannons(Address)
namespace SMB3_ShooterSprXX_Cannons
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.w $06E3,x
	BNE.b CODE_27D92F
	LDA.w !RAM_SMB3_Level_ShooterSpr_XPosLo,x
	CMP.w $0210
	LDA.w !RAM_SMB3_Level_ShooterSpr_XPosHi,x
	SBC.b $12
	BNE.b CODE_27D92F
	LDA.w !RAM_SMB3_Level_ShooterSpr_XPosLo,x
	SEC
	SBC.w $0210
	CMP.b #$F0
	BCS.b CODE_27D92F
	LDA.b #$87
	STA.w $06E3,x
	LDA.w !RAM_SMB3_Level_ShooterSpr_SpriteID,x
	STA.b $00
	CMP.b #!Define_SMB3_SpriteID_ShooterSpr12_RightFacingBigCannon
	BEQ.b CODE_27D91F
	CMP.b #!Define_SMB3_SpriteID_ShooterSpr08_LeftFacingBigCannon
	BNE.b CODE_27D922
CODE_27D91F:
	JMP.w CODE_27D930

CODE_27D922:
	CMP.b #!Define_SMB3_SpriteID_ShooterSpr13_LeftFacingBobOmbCannon
	BCC.b CODE_27D929
	JMP.w CODE_27D98D

CODE_27D929:
	CLC
	ADC.b #$01
	JMP.w CODE_27DADE

CODE_27D92F:
	RTS

CODE_27D930:
	JSR.w CODE_27DC88
	LDA.b #!Define_SMB3_SpriteID_NorSpr0B0_BigCannonBall
	STA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	INC.w $1FF9,x
	LDY.b $9B
	LDA.w !RAM_SMB3_Level_ShooterSpr_YPosLo,y
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	LDA.w !RAM_SMB3_Level_ShooterSpr_YPosHi,y
	STA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	LDA.b $00
	CMP.b #$11
	LDA.b #$30
	LDY.b #$12
	BCS.b CODE_27D955
	LDY.b #$09
	LDA.b #$D0
CODE_27D955:
	STY.b $00
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	EOR.b #$80
	LDY.b $9B
	ASL
	LDA.w !RAM_SMB3_Level_ShooterSpr_XPosLo,y
	BCS.b CODE_27D966
	SEC
	SBC.b #$10
CODE_27D966:
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	LDA.w !RAM_SMB3_Level_ShooterSpr_XPosHi,y
	SBC.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	LDA.b #$05
	STA.w $1FE9,x
	JSR.w CODE_27D9E7
	JSR.w CODE_27DB51
	LDA.w !RAM_SMB3_Level_ShooterSpr_YPosLo,x
	SEC
	SBC.w $0543
	CLC
	ADC.b #$04
	STA.w !RAM_SMB3_Level_MExtSpr_YPosLo
	ADC.b #$08
	STA.w !RAM_SMB3_Level_MExtSpr_YPosLo+$01
	RTS

CODE_27D98D:
	JSR.w CODE_27DC88
	LDA.b #!Define_SMB3_SpriteID_NorSpr050_BobOmb
	STA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	LDA.b #$80
	STA.w $06A6,x
	INC.w $1021,x
	INC.w $0689,x
	LDY.b $9B
	LDA.w !RAM_SMB3_Level_ShooterSpr_YPosLo,y
	SEC
	SBC.b #$08
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	LDA.w !RAM_SMB3_Level_ShooterSpr_YPosHi,y
	SBC.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	LDA.b #$D0
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
	LDA.b $00
	CMP.b #$14
	LDA.b #$10
	LDY.b #$0B
	BCS.b CODE_27D9C2
	DEY
	LDA.b #$F0
CODE_27D9C2:
	STY.b $00
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	ASL
	LDA.b #$00
	STA.b $01
	LDY.b $9B
	LDA.b #$08
	BCC.b CODE_27D9D5
	LDA.b #$F8
	DEC.b $01
CODE_27D9D5:
	CLC
	ADC.w !RAM_SMB3_Level_ShooterSpr_XPosLo,y
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	LDA.w !RAM_SMB3_Level_ShooterSpr_XPosHi,y
	ADC.b $01
	STA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	LDA.b #$05
	STA.w $1FE9,x
CODE_27D9E7:
	LDX.b $9B
	JMP.w CODE_27DB51

namespace off
	%SetDuplicateOrNullPointer(SMB3_ShooterSprXX_Cannons_Main, SMB3_ShooterSpr07_LeftFacingCannon_Main)
	%SetDuplicateOrNullPointer(SMB3_ShooterSprXX_Cannons_Main, SMB3_ShooterSpr08_LeftFacingBigCannon_Main)
	%SetDuplicateOrNullPointer(SMB3_ShooterSprXX_Cannons_Main, SMB3_ShooterSpr09_UpLeftFacingCannon_Main)
	%SetDuplicateOrNullPointer(SMB3_ShooterSprXX_Cannons_Main, SMB3_ShooterSpr0A_UpRightFacingCannon_Main)
	%SetDuplicateOrNullPointer(SMB3_ShooterSprXX_Cannons_Main, SMB3_ShooterSpr0B_DownLeftFacingCannon_Main)
	%SetDuplicateOrNullPointer(SMB3_ShooterSprXX_Cannons_Main, SMB3_ShooterSpr0C_DownRightFacingCannon_Main)
	%SetDuplicateOrNullPointer(SMB3_ShooterSprXX_Cannons_Main, SMB3_ShooterSpr0D_UpLeftFacingCannon_Main)
	%SetDuplicateOrNullPointer(SMB3_ShooterSprXX_Cannons_Main, SMB3_ShooterSpr0E_UpRightFacingCannon_Main)
	%SetDuplicateOrNullPointer(SMB3_ShooterSprXX_Cannons_Main, SMB3_ShooterSpr0F_DownLeftFacingCannon_Main)
	%SetDuplicateOrNullPointer(SMB3_ShooterSprXX_Cannons_Main, SMB3_ShooterSpr10_DownRightFacingCannon_Main)
	%SetDuplicateOrNullPointer(SMB3_ShooterSprXX_Cannons_Main, SMB3_ShooterSpr11_RightFacingCannon_Main)
	%SetDuplicateOrNullPointer(SMB3_ShooterSprXX_Cannons_Main, SMB3_ShooterSpr12_RightFacingBigCannon_Main)
	%SetDuplicateOrNullPointer(SMB3_ShooterSprXX_Cannons_Main, SMB3_ShooterSpr13_LeftFacingBobOmbCannon_Main)
	%SetDuplicateOrNullPointer(SMB3_ShooterSprXX_Cannons_Main, SMB3_ShooterSpr14_RightFacingBobOmbCannon_Main)
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_ShooterSpr15_LaserBowserStatue(Address)
namespace SMB3_ShooterSpr15_LaserBowserStatue
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.w !RAM_SMB3_Level_ShooterSpr_XPosLo,x
	CMP.w $0210
	LDA.w !RAM_SMB3_Level_ShooterSpr_XPosHi,x
	SBC.b $12
	BNE.b CODE_27D8BF
	LDA.w !RAM_SMB3_Level_ShooterSpr_XPosLo,x
	SEC
	SBC.b !RAM_SMB3_Level_Player_XPosLo
	CMP.b #$38
	BCC.b CODE_27D8BF
	CMP.b #$4C
	BCS.b CODE_27D8BF
	LDY.b #$07
CODE_27D8B7:
	LDA.w !RAM_SMB3_Level_ExtSpr_SpriteID,y
	BEQ.b CODE_27D8C0
	DEY
	BPL.b CODE_27D8B7
CODE_27D8BF:
	RTS

CODE_27D8C0:
	LDA.b #!Define_SMAS_Sound0060_HitHead
	STA.w !RAM_SMB3_Global_SoundCh1
	LDA.b #!Define_SMB3_SpriteID_ExtSpr15_Laser
	STA.w !RAM_SMB3_Level_ExtSpr_SpriteID,y
	LDA.w !RAM_SMB3_Level_ShooterSpr_XPosHi,x
	XBA
	LDA.w !RAM_SMB3_Level_ShooterSpr_XPosLo,x
	REP.b #$20
	SEC
	SBC.w #$0008
	SEP.b #$20
	STA.w !RAM_SMB3_Level_ExtSpr_XPosLo,y
	XBA
	STA.w !RAM_SMB3_Level_ExtSpr_XPosHi,y
	LDA.w !RAM_SMB3_Level_ShooterSpr_YPosLo,x
	CLC
	ADC.b #$08
	STA.w !RAM_SMB3_Level_ExtSpr_YPosLo,y
	LDA.w !RAM_SMB3_Level_ShooterSpr_YPosHi,x
	STA.w !RAM_SMB3_Level_ExtSpr_YPosHi,y
	RTS
namespace off
endmacro


;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_GenSpr01_FlyingRedCheepCheepGenerator(Address)
namespace SMB3_GenSpr01_FlyingRedCheepCheepGenerator
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.w $0565
	AND.b #$1F
	BNE.b CODE_29A029
	LDA.b #!Define_SMB3_SpriteID_NorSpr076_FlyingRedCheepCheep
	JSR.w CODE_29A0DD
	CPY.b #$03
	BCS.b CODE_29A029
	JSR.w CODE_29A0D0
	LDA.b #!Define_SMB3_SpriteID_NorSpr076_FlyingRedCheepCheep
	STA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	LDA.w $0543
	CLC
	ADC.b #$C0
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	LDA.b $13
	ADC.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	LDA.w !RAM_SMB3_Global_RandomByte02,x
	PHP
	PHP
	AND.b #$03
	TAY
	LDA.w DATA_21C6B9,y
	PLP
	BPL.b CODE_29A007
	EOR.b #$FF
CODE_29A007:
	CLC
	ADC.w $0210
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	LDA.b $12
	ADC.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	LDA.w !RAM_SMB3_Global_RandomByte04,x
	AND.b #$03
	TAY
	LDA.w DATA_21C6BD,y
	PLP
	BPL.b CODE_29A023
	JSL.l SMB3_UnnecessaryInvertARt_Main
CODE_29A023:
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	LDA.b #$B8
	STA.b !RAM_SMB3_Level_NorSpr_YSpeed,x
CODE_29A029:
	RTS
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_GenSpr02_SpinyCheepCheepGenerator(Address)
namespace SMB3_GenSpr02_SpinyCheepCheepGenerator
%InsertMacroAtXPosition(<Address>)

Main:
	INC.w $1CF1
	LDA.w $1CF1
	CMP.b #$AA
	BNE.b CODE_29A083
	LDA.b #$00
	STA.w $1CF1
	LDX.b #$02
	JSR.w CODE_29A0D2
	LDA.b #!Define_SMB3_SpriteID_NorSpr077_GreenCheepCheep
	STA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	LDA.w !RAM_SMB3_Global_RandomByte02,x
	AND.b #$01
	TAY
	LDA.w $0210
	CLC
	ADC.w DATA_21C6C1,y
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	LDA.b $12
	ADC.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	LDA.w DATA_21C6C3,y
	LDY.w $05FC
	BEQ.b CODE_29A064
	CLC
	ADC.w !RAM_SMB3_Level_AutoscrollLayerXSpeed
CODE_29A064:
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	LDA.w !RAM_SMB3_Global_RandomByte02,x
	AND.b #$F0
	ADC.b #$20
	AND.b #$7F
	ADC.w $0543
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	LDA.w $0542
	ADC.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	LDA.b #$01
	STA.w $0689,x
	STA.w $06B7,x
CODE_29A083:
	RTS
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_GenSprXX_DisableGenerators(Address)
namespace SMB3_GenSprXX_DisableGenerators
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.b #$00
	STA.w !RAM_SMB3_NorSpr083_Lakitu_ChasePlayerFlag
Entry2:
	LDA.b #!Define_SMB3_SpriteID_GenSpr00_NoGenerator
	STA.w !RAM_SMB3_Level_GenSpr_SpriteID
CODE_299EA4:
	RTS
namespace off
	%SetDuplicateOrNullPointer(SMB3_GenSprXX_DisableGenerators_Main, SMB3_GenSpr03_DisableGeneratorsAndLakitu_Main)
	%SetDuplicateOrNullPointer(SMB3_GenSprXX_DisableGenerators_Entry2, SMB3_GenSpr08_DisableGenerators_Main)
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_GenSpr04_UnusedGreenParabuzzyGenerator(Address)
namespace SMB3_GenSpr04_UnusedGreenParabuzzyGenerator
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.w $0565
	AND.b #$3F
	BNE.b CODE_29A0CF
	LDA.b #!Define_SMB3_SpriteID_NorSpr09F_Parabuzzy
	JSR.w CODE_29A0DD
	CPY.b #$04
	BCS.b CODE_29A0CF
	JSR.w CODE_29A0D0
	LDA.b #!Define_SMB3_SpriteID_NorSpr09F_Parabuzzy
	STA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	LDA.w !RAM_SMB3_Global_RandomByte02,x
	AND.b #$01
	TAY
	LDA.w $0210
	CLC
	ADC.w DATA_21C6C5,y
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	LDA.b $12
	ADC.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	LDA.w DATA_21C6C7,y
	LDY.w !RAM_SMB3_Global_RandomByte03,x
	BPL.b CODE_29A0BA
	ASL
CODE_29A0BA:
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	LDA.w !RAM_SMB3_Global_RandomByte02,x
	AND.b #$7F
	CLC
	ADC.b #$10
	ADC.w $0543
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	LDA.b $13
	ADC.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
CODE_29A0CF:
	RTS
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

; Note: Sprite 49 is unused in this version of SMB3. It's the scrolling clouds you see in airship levels, but Nintendo removed the code for them.

macro ROUTINE_SMB3_GenSpr05_BGCloudGenerator(Address)
namespace SMB3_GenSpr05_BGCloudGenerator
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.w $0565
	AND.b #$03
	BNE.b CODE_299F7D
	INC.w $1CF1
	LDA.w $1CF1
	CMP.b #$C0
	BNE.b CODE_299F7D
	LDA.b #$00
	STA.w $1CF1
	LDA.b #!Define_SMB3_SpriteID_NorSpr049_BGCloud
	JSR.w CODE_29A0DD
	CPY.b #$02
	BCS.b CODE_299F7D
	JSR.w CODE_29A0D0
	LDA.b #!Define_SMB3_SpriteID_NorSpr049_BGCloud
	STA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	LDA.w !RAM_SMB3_Global_RandomByte02,x
	AND.b #$7F
	CLC
	ADC.b #$30
	CLC
	ADC.w $0543
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	LDA.b $13
	ADC.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	LDA.w $0210
	SEC
	SBC.b #$20
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	LDA.b $12
	SBC.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	LDA.w !RAM_SMB3_Global_RandomByte02,x
	AND.b #$03
	TAY
	LDA.w DATA_21C6B1,y
	STA.b $68,x
	LDA.w DATA_21C6B5,y
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
CODE_299F7D:
	RTS
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_GenSpr06_LeftMovingFallingPlatformGenerator(Address)
namespace SMB3_GenSpr06_LeftMovingFallingPlatformGenerator
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.w $0565
	AND.b #$7F
	BNE.b CODE_299F23
	LDA.b #!Define_SMB3_SpriteID_NorSpr036_LeftFlyingWoodPlatformThatFalls
	JSR.w CODE_29A0DD
	CPY.b #$03
	BCS.b CODE_299F23
	JSR.w CODE_29A0D0
	LDA.b #!Define_SMB3_SpriteID_NorSpr000_UnusedSprite
	STA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
	LDA.w !RAM_SMB3_Global_RandomByte02,x
CODE_299EC0:
	AND.b #$7F
	CLC
	ADC.b #$40
	CLC
	ADC.w $0543
	AND.b #$E0
	ORA.b #$0F
	STA.b $00
	PHP
	LDY.b #$04
CODE_299ED2:
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,y
	BEQ.b CODE_299EF2
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,y
	CMP.b #!Define_SMB3_SpriteID_NorSpr036_LeftFlyingWoodPlatformThatFalls
	BNE.b CODE_299EF2
	LDA.w !RAM_SMB3_Level_NorSpr_YPosLo,y
	CMP.b $00
	BNE.b CODE_299EF2
	LDA.w !RAM_SMB3_Global_RandomByte02,x
	CLC
	ADC.b #$30
	STA.w !RAM_SMB3_Global_RandomByte02,x
	PLP
	JMP.w CODE_299EC0

CODE_299EF2:
	DEY
	BPL.b CODE_299ED2
	LDA.b $00
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo,x
	PLP
	LDA.b $13
	ADC.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_YPosHi,x
	LDA.w $0210
	CLC
	ADC.b #$FF
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo,x
	LDA.b $12
	ADC.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_XPosHi,x
	LDA.w !RAM_SMB3_Global_RandomByte02,x
	AND.b #$03
	TAY
	LDA.w DATA_21C6AD,y
	STA.b !RAM_SMB3_Level_NorSpr_XSpeed,x
	LDA.b #$03
	STA.w $1FE9,x
	LDA.b #!Define_SMB3_SpriteID_NorSpr036_LeftFlyingWoodPlatformThatFalls
	STA.w !RAM_SMB3_Level_NorSpr_SpriteID,x
CODE_299F23:
	RTS
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_SMB3_GenSpr07_SpawnMiniChestGenerator(Address)
namespace SMB3_GenSpr07_SpawnMiniChestGenerator
%InsertMacroAtXPosition(<Address>)

Main:
	LDY.w $1CF1
	BEQ.b CODE_299F91
	DEC.w $1CF1
	BNE.b CODE_299F90
	INC.w $0014
	LDA.b #$00
	STA.w $0713
CODE_299F90:
	RTS

CODE_299F91:
	LDY.b #$07
CODE_299F93:
	LDA.w !RAM_SMB3_Level_ExtSpr_SpriteID,y
	BNE.b CODE_299FD0
	CPY.b #$05
	BCS.b CODE_299FA8
	LDA.w !RAM_SMB3_Level_NorSpr_SpriteID,y
	CMP.b #!Define_SMB3_SpriteID_NorSpr047_GiantBlockHandler
	BEQ.b CODE_299FA8
	LDA.w !RAM_SMB3_Level_NorSpr_CurrentStatus,y
	BNE.b CODE_299FD0
CODE_299FA8:
	DEY
	BPL.b CODE_299F93
	LDA.b #$01
	STA.w !RAM_SMB3_Level_NorSpr_CurrentStatus
	LDA.b #!Define_SMB3_SpriteID_NorSpr052_MiniChest
	STA.w !RAM_SMB3_Level_NorSpr_SpriteID
	LDA.b #$01
	STA.b !RAM_SMB3_Level_NorSpr_YPosHi
	LDA.b #$70
	STA.b !RAM_SMB3_Level_NorSpr_YPosLo
	LDA.b #$30
	LDY.b !RAM_SMB3_Level_Player_XPosLo
	BMI.b CODE_299FC5
	LDA.b #$C0
CODE_299FC5:
	ADC.w $0210
	STA.b !RAM_SMB3_Level_NorSpr_XPosLo
	LDA.b $12
	ADC.b #$00
	STA.b !RAM_SMB3_Level_NorSpr_XPosHi
CODE_299FD0:
	RTS
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro DATATABLE_SMB3_Bank0CGraphics(Address)
namespace SMB3_Bank0CGraphics
%InsertMacroAtXPosition(<Address>)

WorldRollcallSpritesAndMario:
;$0CD000
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR] Gloves fix 1
	incbin "Graphics/GFX_WorldRollcallSpritesAndMario_br.bin"
else
	incbin "Graphics/GFX_WorldRollcallSpritesAndMario.bin"
endif
WorldRollcallSpritesAndMarioEnd:
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro DATATABLE_SMB3_Bank2DGraphics(Address)
namespace SMB3_Bank2DGraphics
%InsertMacroAtXPosition(<Address>)

BG_Fortress1:
;$2D8000
	incbin "Graphics/Layer2/GFX_BG_Fortress1.bin"

BG_Fortress2:
;$2D8800
	incbin "Graphics/Layer2/GFX_BG_Fortress2.bin"

BG_SnowTrees1:
;$2D9000
	incbin "Graphics/Layer2/GFX_BG_SnowTrees1.bin"

BG_SnowTrees2:
;$2D9800
	incbin "Graphics/Layer2/GFX_BG_SnowTrees2.bin"

BG_Pipes1:
;$2DA000
	incbin "Graphics/Layer2/GFX_BG_Pipes1.bin"

BG_Pipes2:
;$2DA800
	incbin "Graphics/Layer2/GFX_BG_Pipes2.bin"

BG_CastleWall:
;$2DB000
	incbin "Graphics/Layer2/GFX_BG_CastleWall.bin"

BG_HillsAndTrees:
;$2DB800
	incbin "Graphics/Layer2/GFX_BG_HillsAndTrees.bin"

BG_DottedHills1:
;$2DC000
	incbin "Graphics/Layer2/GFX_BG_DottedHills1.bin"

BG_DottedHills2:
;$2DC800
	incbin "Graphics/Layer2/GFX_BG_DottedHills2.bin"

BG_Desert1:
;$2DD000
	incbin "Graphics/Layer2/GFX_BG_Desert1.bin"

BG_Desert2:
;$2DD800
	incbin "Graphics/Layer2/GFX_BG_Desert2.bin"

BG_CheckeredHills1:
;$2DE000
	incbin "Graphics/Layer2/GFX_BG_CheckeredHills1.bin"

BG_CheckeredHills2:
;$2DE800
	incbin "Graphics/Layer2/GFX_BG_CheckeredHills2.bin"

BG_SnowyCheckeredHills1:
;$2DF000
	incbin "Graphics/Layer2/GFX_BG_SnowyCheckeredHills1.bin"

BG_SnowyCheckeredHills2:
;$2DF800
	incbin "Graphics/Layer2/GFX_BG_SnowyCheckeredHills2.bin"
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro DATATABLE_SMB3_Bank2EGraphics(Address)
namespace SMB3_Bank2EGraphics
%InsertMacroAtXPosition(<Address>)

Luigi:
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR] Gloves fix 2
.Raccoon
;$2E8000
incbin "Graphics/GFX_Luigi_Raccoon_fix.bin"

.Tanooki
;$2EA000
incbin "Graphics/GFX_Luigi_Tanooki_fix.bin"

.Hammer
;$2EC000
incbin "Graphics/GFX_Luigi_Hammer_fix.bin"

.Small
.Frog
;$2EE000
incbin "Graphics/GFX_Luigi_SmallAndFrog_fix.bin"

else
.Raccoon
;$2E8000
incbin "Graphics/GFX_Luigi_Raccoon.bin"

.Tanooki
;$2EA000
incbin "Graphics/GFX_Luigi_Tanooki.bin"

.Hammer
;$2EC000
incbin "Graphics/GFX_Luigi_Hammer.bin"

.Small
.Frog
;$2EE000
incbin "Graphics/GFX_Luigi_SmallAndFrog.bin"
endif

namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro DATATABLE_RT00_SMB3_Bank38Graphics(Address)
namespace SMB3_Bank38Graphics
%InsertMacroAtXPosition(<Address>)

Layer3:
.Letters:
;$388000
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	incbin "Graphics/GFX_Layer3_Letters_SMAS_J.bin"
elseif !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR]
	incbin "Graphics/GFX_Layer3_Letters_SMAS_br.bin"
else
	incbin "Graphics/GFX_Layer3_Letters_SMAS_U.bin"
endif
.LettersEnd:
.Water:
;$389000
	incbin "Graphics/GFX_Layer3_Water.bin"
.WaterEnd:

	%FREE_BYTES(NULLROM, 2048, $00)

.Clouds:
;$38A000
	incbin "Graphics/GFX_Layer3_Clouds.bin"
.CloudsEnd:
.Pillars:
;$38A400
	incbin "Graphics/GFX_Layer3_Pillars.bin"
.PillarsEnd:
.Cave:
;$38A800
	incbin "Graphics/GFX_Layer3_Cave.bin"
.CaveEnd:
.AirshipClouds:
;$38AC00
	incbin "Graphics/GFX_Layer3_AirshipClouds.bin"
.AirshipCloudsEnd:
namespace off
endmacro

macro DATATABLE_RT01_SMB3_Bank38Graphics(Address)
namespace SMB3_Bank38Graphics
%InsertMacroAtXPosition(<Address>)

Sprite_Overworld:
;$38C000
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR] Gloves fix 3
	incbin "Graphics/GFX_Sprite_Overworld_br.bin"
else
	incbin "Graphics/GFX_Sprite_Overworld.bin"
endif
Sprite_OverworldEnd:
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro DATATABLE_SMB3_Bank39Graphics(Address)
namespace SMB3_Bank39Graphics
%InsertMacroAtXPosition(<Address>)

Sprite_ThroneRoom:
;$398000
incbin "Graphics/GFX_Sprite_ThroneRoom.bin"
Sprite_ThroneRoomEnd:

if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR]
FG_AnimatedOverworldTiles5:
;$39C000
incbin "Graphics/GFX_FG_AnimatedOverworldTiles5_fix.bin"

FG_AnimatedOverworldTiles6:
;$39D000
incbin "Graphics/GFX_FG_AnimatedOverworldTiles6_fix.bin"

FG_AnimatedOverworldTiles7:
;$39E000
incbin "Graphics/GFX_FG_AnimatedOverworldTiles7_fix.bin"

FG_AnimatedOverworldTiles8:
;$39F000
incbin "Graphics/GFX_FG_AnimatedOverworldTiles8_fix.bin"
else
FG_AnimatedOverworldTiles5:
;$39C000
incbin "Graphics/GFX_FG_AnimatedOverworldTiles5.bin"

FG_AnimatedOverworldTiles6:
;$39D000
incbin "Graphics/GFX_FG_AnimatedOverworldTiles6.bin"

FG_AnimatedOverworldTiles7:
;$39E000
incbin "Graphics/GFX_FG_AnimatedOverworldTiles7.bin"

FG_AnimatedOverworldTiles8:
;$39F000
incbin "Graphics/GFX_FG_AnimatedOverworldTiles8.bin"
endif

namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro DATATABLE_SMB3_Bank3AGraphics(Address)
namespace SMB3_Bank3AGraphics
%InsertMacroAtXPosition(<Address>)

FG_SpadeGamePowerUps4:
;$3A8000
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR]
incbin "Graphics/GFX_FG_SpadeGamePowerUps4_br.bin"
else
incbin "Graphics/GFX_FG_SpadeGamePowerUps4.bin"
endif

FG_SkyPlains2:
;$3A9000
incbin "Graphics/GFX_FG_SkyPlain2.bin"

FG_GrassPlain2:
;$3A9800
incbin "Graphics/GFX_FG_GrassPlain2.bin"

FG_Cave2:
;$3AA000
incbin "Graphics/GFX_FG_Cave2.bin"

FG_EndOfLevelDecor:
;$3AA800
incbin "Graphics/GFX_FG_EndOfLevelDecor.bin"

BG_ToadHouse:
;$3AB000
if !Define_Global_ROMToAssemble&(!ROM_SMB3_U|!ROM_SMB3_E|!ROM_SMB3_J) != $00
	%InsertVersionExclusiveFile(incbin, ../SMB3/Graphics/Layer2/GFX_BG_ToadHouse_, USA.bin, )
else
	%InsertVersionExclusiveFile(incbin, ../SMB3/Graphics/Layer2/GFX_BG_ToadHouse_, SMASU.bin, )
endif

BG_TitleScreen:
;$3AB800
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR]
	incbin "Graphics/Layer2/GFX_BG_TitleScreen_br.bin"
else
	incbin "Graphics/Layer2/GFX_BG_TitleScreen.bin"
endif

BG_Underwater1:
;$3AC000
incbin "Graphics/Layer2/GFX_BG_Underwater1.bin"

BG_Underwater2:
;$3AC800
incbin "Graphics/Layer2/GFX_BG_Underwater2.bin"

BG_StormClouds:
;$3AD000
incbin "Graphics/Layer2/GFX_BG_StormClouds.bin"

BG_AirshipInterior:
;$3AD800
incbin "Graphics/Layer2/GFX_BG_AirshipInterior.bin"

BG_ConstructedPlain:
;$3AE000
incbin "Graphics/Layer2/GFX_BG_ConstructedPlain.bin"

BG_BonusRoom:
;$3AE800
incbin "Graphics/Layer2/GFX_BG_BonusRoom.bin"

BG_CavePillar1:
;$3AF000
incbin "Graphics/Layer2/GFX_BG_CavePillar1.bin"

BG_CavePillar2:
;$3AF800
incbin "Graphics/Layer2/GFX_BG_CavePillar2.bin"
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro DATATABLE_RT00_SMB3_Bank3DGraphics(Address)
namespace SMB3_Bank3DGraphics
%InsertMacroAtXPosition(<Address>)

BattleModePlayer:
;$3D8000
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR] Gloves fix 4
	incbin "Graphics/GFX_BattleModePlayer_fix.bin"
else
	incbin "Graphics/GFX_BattleModePlayer.bin"
endif
BattleModePlayerEnd:

Sprite_BattleMode2:
;$3DA000
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000
	incbin "Graphics/GFX_Sprite_BattleMode2_br.bin"
else
	incbin "Graphics/GFX_Sprite_BattleMode2.bin"
endif
Sprite_BattleMode2End:
namespace off
endmacro

macro DATATABLE_RT01_SMB3_Bank3DGraphics(Address)
namespace SMB3_Bank3DGraphics
%InsertMacroAtXPosition(<Address>)

UnusedSMWKoopa:
;$3DB000
	incbin "Graphics/GFX_UnusedSMWKoopa.bin"
UnusedSMWKoopaEnd:
namespace off
endmacro

macro DATATABLE_RT02_SMB3_Bank3DGraphics(Address)
namespace SMB3_Bank3DGraphics
%InsertMacroAtXPosition(<Address>)

WorldRollcallSpritesAndLuigi:
;$3DE000
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR] Gloves fix 5
	incbin "Graphics/GFX_WorldRollcallSpritesAndLuigi_br.bin"
else
	incbin "Graphics/GFX_WorldRollcallSpritesAndLuigi.bin"
endif
WorldRollcallSpritesAndLuigiEnd:
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro DATATABLE_SMB3_Bank3EGraphics(Address)
namespace SMB3_Bank3EGraphics
%InsertMacroAtXPosition(<Address>)

Mario:
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR] Gloves fix 6
.Raccoon
;$3E8000
incbin "Graphics/GFX_Mario_Raccoon_fix.bin"

.Tanooki
;$3EA000
incbin "Graphics/GFX_Mario_Tanooki_fix.bin"

.Hammer
;$3EC000
incbin "Graphics/GFX_Mario_Hammer_fix.bin"

.Small
.Frog
;$3EE000
incbin "Graphics/GFX_Mario_SmallAndFrog_fix.bin"

else

.Raccoon
;$3E8000
incbin "Graphics/GFX_Mario_Raccoon.bin"

.Tanooki
;$3EA000
incbin "Graphics/GFX_Mario_Tanooki.bin"

.Hammer
;$3EC000
incbin "Graphics/GFX_Mario_Hammer.bin"

.Small
.Frog
;$3EE000
incbin "Graphics/GFX_Mario_SmallAndFrog.bin"
endif

namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro DATATABLE_SMB3_Bank3FGraphics(Address)
namespace SMB3_Bank3FGraphics
%InsertMacroAtXPosition(<Address>)

Mario:
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR] Gloves fix 7
.Big
;$3F8000
incbin "Graphics/GFX_Mario_Big_fix.bin"
else
.Big
;$3F8000
incbin "Graphics/GFX_Mario_Big.bin"
endif

Sprite_TitleScreen2:
;$3FA000
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000
	incbin "Graphics/GFX_Sprite_TitleScreen2_fix.bin"
else
	incbin "Graphics/GFX_Sprite_TitleScreen2.bin"
endif

Sprite_Global1:
;$3FB000
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000
incbin "Graphics/GFX_Sprite_Global1_br.bin"
else
incbin "Graphics/GFX_Sprite_Global1.bin"
endif

Sprite_Global3:
;$3FB800
incbin "Graphics/GFX_Sprite_Global3.bin"

Luigi:
.Big
;$3FC000
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000
incbin "Graphics/GFX_Luigi_Big_fix.bin"
else
incbin "Graphics/GFX_Luigi_Big.bin"
endif

Sprite_BattleMode1:
;$3FE000
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000
incbin "Graphics/GFX_Sprite_BattleMode1_br.bin"
else
incbin "Graphics/GFX_Sprite_BattleMode1.bin"
endif
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro DATATABLE_SMB3_Bank40Graphics(Address)
namespace SMB3_Bank40Graphics
%InsertMacroAtXPosition(<Address>)

Sprite_AirshipSprites1:
;$408000
incbin "Graphics/GFX_Sprite_AirshipSprites1.bin"

Sprite_AirshipSprites2:
;$408800
incbin "Graphics/GFX_Sprite_AirshipSprites2.bin"

Sprite_AirshipSprites3:
;$409000
incbin "Graphics/GFX_Sprite_AirshipSprites3.bin"

Sprite_DesertEnemies:
;$409800
incbin "Graphics/GFX_Sprite_DesertEnemies.bin"

Sprite_Global2:
;$40A000
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR]
incbin "Graphics/GFX_Sprite_Global2_br.bin"
else
incbin "Graphics/GFX_Sprite_Global2.bin"
endif

Sprite_ChestItems:
;$40A800
incbin "Graphics/GFX_Sprite_ChestItems.bin"

BG_Prison:
;$40B000
incbin "Graphics/Layer2/GFX_BG_Prison.bin"

BG_BattleMode:
;$40B800
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000
	incbin "Graphics/Layer2/GFX_BG_BattleMode_br.bin"
else
	incbin "Graphics/Layer2/GFX_BG_BattleMode.bin"
endif

FG_ConstructedPlains:
;$40C000
incbin "Graphics/GFX_FG_ConstructedPlains.bin"

Sprite_SpikeAndMunchers:
;$40D000
incbin "Graphics/GFX_Sprite_SpikeAndMunchers.bin"

Sprite_LakituSpinyAndBuzzyBeetle:
;$40D800
incbin "Graphics/GFX_Sprite_LakituSpinyAndBuzzyBeetle.bin"

FG_SkyPlains1:
;$40E000
incbin "Graphics/GFX_FG_SkyPlain1.bin"

Sprite_SkySprites:
;$40F000
incbin "Graphics/GFX_Sprite_SkySprites.bin"

Sprite_Empty2:
;$40F800
incbin "Graphics/GFX_Sprite_Empty2.bin"
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro DATATABLE_SMB3_Bank41Graphics(Address)
namespace SMB3_Bank41Graphics
%InsertMacroAtXPosition(<Address>)

FG_Fortress:
;$418000
incbin "Graphics/GFX_FG_Fortress.bin"

Sprite_Fortress1:
;$419000
incbin "Graphics/GFX_Sprite_Fortress1.bin"

Sprite_Fortress2:
;$419800
incbin "Graphics/GFX_Sprite_Fortress2.bin"

FG_AnimatedOverworldTiles1:
;$41A000
incbin "Graphics/GFX_FG_AnimatedOverworldTiles1.bin"

FG_StaticOverworldTiles:
;$41B000
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR]
incbin "Graphics/GFX_FG_StaticOverworldTiles_br.bin"
else
incbin "Graphics/GFX_FG_StaticOverworldTiles.bin"
endif

FG_SnowAndIce:
;$41C000
incbin "Graphics/GFX_FG_SnowAndIce.bin"

Sprite_UnderwaterEnemies:
;$41D000
incbin "Graphics/GFX_Sprite_UnderwaterEnemies.bin"

Sprite_LavaLotus:
;$41D800
incbin "Graphics/GFX_Sprite_LavaLotus.bin"

FG_Cave1:
;$41E000
incbin "Graphics/GFX_FG_Cave1.bin"

BG_Volcano1:
;$41F000
incbin "Graphics/Layer2/GFX_BG_Volcano1.bin"

BG_Volcano2:
;$41F800
incbin "Graphics/Layer2/GFX_BG_Volcano2.bin"
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro DATATABLE_SMB3_Bank42Graphics(Address)
namespace SMB3_Bank42Graphics
%InsertMacroAtXPosition(<Address>)

FG_MinigameIntroLuigi:
;$428000
incbin "Graphics/GFX_FG_MinigameIntroLuigi.bin"

FG_Bowser:
;$428800
incbin "Graphics/GFX_FG_Bowser.bin"

BG_PeachsRoom1:
;$429000
incbin "Graphics/Layer2/GFX_BG_PeachsRoom1.bin"

BG_PeachsRoom2:
;$429800
incbin "Graphics/Layer2/GFX_BG_PeachsRoom2.bin"

FG_MinigameIntro:
;$42A000
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR]
incbin "Graphics/GFX_FG_MinigameIntro_fix.bin"
else
incbin "Graphics/GFX_FG_MinigameIntro.bin"
endif

BG_Clouds:
;$42B000
incbin "Graphics/Layer2/GFX_BG_Clouds.bin"

FG_StandardTiles:
;$42B800
incbin "Graphics/GFX_FG_StandardTiles.bin"

FG_ThroneRoom:
;$42C000
incbin "Graphics/GFX_FG_ThroneRoom.bin"
FG_ThroneRoomEnd:

Sprite_DynamicDoorAndLetters:
;$42D000
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000
incbin "Graphics/GFX_Sprite_DynamicDoorAndLetters_br.bin"
else
incbin "Graphics/GFX_Sprite_DynamicDoorAndLetters.bin"
endif
.End:

Sprite_MiniGameHost:
;$42D800
incbin "Graphics/GFX_Sprite_MiniGameHost.bin"

FG_SpadeGamePowerUps1:
;$42E000
incbin "Graphics/GFX_FG_SpadeGamePowerUps1.bin"

FG_SpadeGamePowerUps2:
;$42F000
incbin "Graphics/GFX_FG_SpadeGamePowerUps2.bin"

FG_SpadeGamePowerUps3:
;$42F800
incbin "Graphics/GFX_FG_SpadeGamePowerUps3.bin"
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro DATATABLE_SMB3_Bank43Graphics(Address)
namespace SMB3_Bank43Graphics
%InsertMacroAtXPosition(<Address>)

FG_Desert1:
;$438000
incbin "Graphics/GFX_FG_Desert1.bin"

FG_Desert2:
;$438800
incbin "Graphics/GFX_FG_Desert2.bin"

BG_CrystalCave:
;$439000
incbin "Graphics/Layer2/GFX_BG_CrystalCave.bin"

Sprite_BoomBoom:
;$439800
incbin "Graphics/GFX_Sprite_BoomBoom.bin"

FG_Airship1:
;$43A000
incbin "Graphics/GFX_FG_Airship1.bin"

FG_Airship2:
;$43A800
incbin "Graphics/GFX_FG_Airship2.bin"

FG_PeachLetterFont:
;$43B000
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	incbin "Graphics/GFX_FG_PeachLetterFont_SMAS_J.bin"
elseif !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR]
	incbin "Graphics/GFX_FG_PeachLetterFont_SMAS_br.bin"
else
	incbin "Graphics/GFX_FG_PeachLetterFont_SMAS_U.bin"
endif

FG_Cloud1:
;$43C000
incbin "Graphics/GFX_FG_Cloud1.bin"

FG_Cloud2:
;$43C800
incbin "Graphics/GFX_FG_Cloud2.bin"

BG_WaterfallCliff:
;$43D000
incbin "Graphics/Layer2/GFX_BG_WaterfallCliff.bin"

FG_AnimatedStripeNSpadeTiles:
;$43D800
incbin "Graphics/GFX_FG_AnimatedStripeNSpadeTiles.bin"

Sprite_AltGlobal2:
;$43E000
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000
incbin "Graphics/GFX_Sprite_AltGlobal2_br.bin"
else
incbin "Graphics/GFX_Sprite_AltGlobal2.bin"
endif

Sprite_GiantEnemies:
;$43E800
incbin "Graphics/GFX_Sprite_GiantEnemies.bin"

FG_AnimatedLevelTiles1:
;$43F000
incbin "Graphics/GFX_FG_AnimatedLevelTiles1.bin"
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro DATATABLE_SMB3_Bank44Graphics(Address)
namespace SMB3_Bank44Graphics
%InsertMacroAtXPosition(<Address>)

Sprite_KoopaKids1:
;$448000
incbin "Graphics/GFX_Sprite_KoopaKids1.bin"

Sprite_KoopaKids2:
;$448800
incbin "Graphics/GFX_Sprite_KoopaKids2.bin"

Sprite_KoopaKids3:
;$449000
incbin "Graphics/GFX_Sprite_KoopaKids3.bin"

Sprite_KoopaKids4:
;$449800
incbin "Graphics/GFX_Sprite_KoopaKids4.bin"

Sprite_BossBass:
;$44A000
incbin "Graphics/GFX_Sprite_BossBass.bin"

FG_BattleMode1:
;$44A800
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	incbin "Graphics/GFX_FG_BattleMode1_SMAS_J.bin"
elseif !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR]
	incbin "Graphics/GFX_FG_BattleMode1_SMAS_br.bin"
else
	incbin "Graphics/GFX_FG_BattleMode1_SMAS_U.bin"
endif
FG_BattleMode1End:

BG_BowsersCastle1:
;$44C000
incbin "Graphics/Layer2/GFX_BG_BowsersCastle1.bin"

BG_BowsersCastle2:
;$44C800
incbin "Graphics/Layer2/GFX_BG_BowsersCastle2.bin"

FG_BattleMode2:
;$44D000
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	incbin "Graphics/GFX_FG_BattleMode2_SMAS_J.bin"
elseif !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000
	incbin "Graphics/GFX_FG_BattleMode2_SMAS_br.bin"
else
	incbin "Graphics/GFX_FG_BattleMode2_SMAS_U.bin"
endif
FG_BattleMode2End:

Sprite_KoopaKidsShell:
;$44D800
incbin "Graphics/GFX_Sprite_KoopaKidsShell.bin"

Sprite_GiantBlocks:
;$44E000
incbin "Graphics/GFX_Sprite_GiantBlocks.bin"

Sprite_FlyingBoomBoom:
;$44E800
incbin "Graphics/GFX_Sprite_FlyingBoomBoom.bin"

Sprite_BroEnemies:
;$44F000
incbin "Graphics/GFX_Sprite_BroEnemies.bin"

Sprite_StandardEnemies:
;$44F800
incbin "Graphics/GFX_Sprite_StandardEnemies.bin"
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro DATATABLE_SMB3_Bank45Graphics(Address)
namespace SMB3_Bank45Graphics
%InsertMacroAtXPosition(<Address>)

Sprite_Bowser1:
;$458000
incbin "Graphics/GFX_Sprite_Bowser1.bin"

Sprite_Bowser2:
;$458800
incbin "Graphics/GFX_Sprite_Bowser2.bin"

Sprite_Bowser3:
;$459000
incbin "Graphics/GFX_Sprite_Bowser3.bin"

Sprite_AltStandardEnemies:
;$459800
incbin "Graphics/GFX_Sprite_AltStandardEnemies.bin"

BG_Leaves1:
;$45A000
incbin "Graphics/Layer2/GFX_BG_Leaves1.bin"

BG_Leaves2:
;$45A800
incbin "Graphics/Layer2/GFX_BG_Leaves2.bin"

StatusBar:
;$45B000
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR]
incbin "Graphics/GFX_StatusBar_br.bin"
else
incbin "Graphics/GFX_StatusBar.bin"
endif
StatusBarEnd:

FG_Pipe:
;$45C000
incbin "Graphics/GFX_FG_Pipe.bin"

Sprite_Pipe:
;$45D000
incbin "Graphics/GFX_Sprite_Pipe.bin"

Sprite_CopyOfMiniGameHost:
;$45D800
incbin "Graphics/GFX_Sprite_CopyOfMiniGameHost.bin"

FG_ToadHouse1:
;$45E000
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000
incbin "Graphics/GFX_FG_ToadHouse1_br.bin"
else
incbin "Graphics/GFX_FG_ToadHouse1.bin"
endif

FG_ToadHouse2:
;$45F000
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000
incbin "Graphics/GFX_FG_ToadHouse2_br.bin"
else
incbin "Graphics/GFX_FG_ToadHouse2.bin"
endif

Sprite_Empty1:
;$45F800
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000
	incbin "Graphics/GFX_Sprite_Empty1_br.bin"
else
	incbin "Graphics/GFX_Sprite_Empty1.bin"
endif
Sprite_Empty1End:
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro DATATABLE_SMB3_Bank46Graphics(Address)
namespace SMB3_Bank46Graphics
%InsertMacroAtXPosition(<Address>)

FG_AnimatedLevelTiles2:
;$468000
incbin "Graphics/GFX_FG_AnimatedLevelTiles2.bin"

FG_AnimatedLevelTiles3:
;$469000
incbin "Graphics/GFX_FG_AnimatedLevelTiles3.bin"

FG_AnimatedLevelTiles4:
;$46A000
incbin "Graphics/GFX_FG_AnimatedLevelTiles4.bin"

FG_AnimatedLevelTiles5:
;$46B000
incbin "Graphics/GFX_FG_AnimatedLevelTiles5.bin"

FG_GrassyConstructedPlains:
;$46C000
incbin "Graphics/GFX_FG_GrassyConstructedPlains.bin"

FG_Airship3:
;$46D000
incbin "Graphics/GFX_FG_Airship3.bin"

FG_Airship4:
;$46D800
incbin "Graphics/GFX_FG_Airship4.bin"

FG_GrassPlain1:
;$46E000
incbin "Graphics/GFX_FG_GrassPlain1.bin"

FG_Giant1:
;$46F000
incbin "Graphics/GFX_FG_Giant1.bin"

FG_Giant2:
;$46F800
incbin "Graphics/GFX_FG_Giant2.bin"
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro DATATABLE_SMB3_Bank47Graphics(Address)
namespace SMB3_Bank47Graphics
%InsertMacroAtXPosition(<Address>)

FG_AnimatedOverworldTiles2:
;$478000
incbin "Graphics/GFX_FG_AnimatedOverworldTiles2.bin"

FG_AnimatedOverworldTiles3:
;$479000
incbin "Graphics/GFX_FG_AnimatedOverworldTiles3.bin"

FG_AnimatedOverworldTiles4:
;$47A000
incbin "Graphics/GFX_FG_AnimatedOverworldTiles4.bin"

UnknownEndingGraphics:
;$47B000
incbin "Graphics/GFX_UnknownEndingGraphics.bin"

TitleScreen:
;$47C000
if !Define_Global_ROMToAssemble&(!ROM_SMB3_U|!ROM_SMB3_E|!ROM_SMB3_J) != $00
	%InsertVersionExclusiveFile(incbin, ../SMB3/Graphics/GFX_TitleScreen_, USA.bin, )
elseif !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR]
	%InsertVersionExclusiveFile(incbin, ../SMB3/Graphics/GFX_TitleScreen_, SMAS_br.bin, )
else
	%InsertVersionExclusiveFile(incbin, ../SMB3/Graphics/GFX_TitleScreen_, SMASU.bin, )
endif
TitleScreenEnd:

FG_WorldRollCallMiniMap:
;$47E000
incbin "Graphics/GFX_FG_WorldRollCallMiniMap.bin"

Sprite_LoadingLetters:
;$47F000
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000
	incbin "Graphics/GFX_Sprite_LoadingLetters_br.bin"
else
	incbin "Graphics/GFX_Sprite_LoadingLetters.bin"
endif
Sprite_LoadingLettersEnd:

Sprite_TitleScreen1:
;$47F800
if !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000
	incbin "Graphics/GFX_Sprite_TitleScreen1_fix.bin"
else
	incbin "Graphics/GFX_Sprite_TitleScreen1.bin"
endif
Sprite_TitleScreen1End:
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro DATATABLE_SMB3_OverworldLayoutDataAndPointers(Address)
namespace SMB3_OverworldLayoutDataAndPointers
%InsertMacroAtXPosition(<Address>)

; Note: These tables handle the layout data of the overworld.
; Note that each screen of the overworld is meant to be 0x90 (144) bytes large. An $FF byte also indicates the end of the data block.

Ptrs:
;$2AE256
	dw Main_World1
	dw Main_World2
	dw Main_World3
	dw Main_World4
	dw Main_World5
	dw Main_World6
	dw Main_World7
	dw Main_World8
	dw Main_World9

Main:
.World1:
..Screen00:
;$2AE268
	incbin "Overworld/Layout/World1.bin":0-90
..Screen01:
..Screen02:
..Screen03:
	db $FF

.World2:
..Screen00:
;$2AE2F9
	incbin "Overworld/Layout/World2.bin":0-90
..Screen01:
	incbin "Overworld/Layout/World2.bin":90-120
..Screen02:
..Screen03:
	db $FF

.World3:
..Screen00:
;$2AE41A
	incbin "Overworld/Layout/World3.bin":0-90
..Screen01:
	incbin "Overworld/Layout/World3.bin":90-120

..Screen02:
	incbin "Overworld/Layout/World3.bin":120-1B0
..Screen03:
	db $FF

.World4:
..Screen00:
;$2AE5CB
	incbin "Overworld/Layout/World4.bin":0-90
..Screen01:
	incbin "Overworld/Layout/World4.bin":90-120
..Screen02:
..Screen03:
	db $FF

.World5:
..Screen00:
;$2AE6EC
	incbin "Overworld/Layout/World5.bin":0-90
..Screen01:
	incbin "Overworld/Layout/World5.bin":90-120
..Screen02:
..Screen03:
	db $FF

.World6:
..Screen00:
;$2AE80D
	incbin "Overworld/Layout/World6.bin":0-90
..Screen01:
	incbin "Overworld/Layout/World6.bin":90-120
..Screen02:
	incbin "Overworld/Layout/World6.bin":120-1B0
..Screen03:
	db $FF

.World7:
..Screen00:
;$2AE9BE
	incbin "Overworld/Layout/World7.bin":0-90
..Screen01:
	incbin "Overworld/Layout/World7.bin":90-120
..Screen02:
..Screen03:
	db $FF

.World8:
..Screen00:
;$2AEADF
	incbin "Overworld/Layout/World8.bin":0-90
..Screen01:
	incbin "Overworld/Layout/World8.bin":90-120
..Screen02:
	incbin "Overworld/Layout/World8.bin":120-1B0
..Screen03:
	incbin "Overworld/Layout/World8.bin":1B0-240
	db $FF

.World9:
..Screen00:
;$2AED20
	incbin "Overworld/Layout/World9.bin":0-90
..Screen01:
..Screen02:
..Screen03:
	db $FF
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro DATATABLE_SMB3_BattleModeResultsScreenTilemap(Address)
namespace SMB3_BattleModeResultsScreenTilemap
%InsertMacroAtXPosition(<Address>)

Main:
if !Define_Global_ROMToAssemble&(!ROM_SMAS_J1|!ROM_SMAS_J2|!ROM_SMB3_J) != $00
	incbin "Tilemaps/BattleModeResultsScreen_SMAS_J.bin"
elseif !Define_Global_HackROMToAssemble&(!ROM_HACK_SMAS_br) != $0000 ;[BR]
	incbin "Tilemaps/BattleModeResultsScreen_SMAS_br.bin"
else
	incbin "Tilemaps/BattleModeResultsScreen_SMAS_U.bin"
endif
End:
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro DATATABLE_RT00_SMB3_CompressedTilemaps(Address)
namespace SMB3_CompressedTilemaps
%InsertMacroAtXPosition(<Address>)

World1To4WorldRollcallLayer1:
;$3CC600
	incbin "Tilemaps/Layer1WorldRollcallWorld1To4.bin"
namespace off
endmacro

macro DATATABLE_RT01_SMB3_CompressedTilemaps(Address)
namespace SMB3_CompressedTilemaps
%InsertMacroAtXPosition(<Address>)

World5To8WorldRollcallLayer1:
;$3CD000
	incbin "Tilemaps/Layer1WorldRollcallWorld5To8.bin"
namespace off
endmacro

macro DATATABLE_RT02_SMB3_CompressedTilemaps(Address)
namespace SMB3_CompressedTilemaps
%InsertMacroAtXPosition(<Address>)

Layer2CloudsBG:
	incbin "Tilemaps/Layer2Clouds.bin"
namespace off
endmacro

macro DATATABLE_RT03_SMB3_CompressedTilemaps(Address)
namespace SMB3_CompressedTilemaps
%InsertMacroAtXPosition(<Address>)

Layer3ThinCloudsBG:
	incbin "Tilemaps/Layer3ThinClouds.bin"
namespace off
endmacro

macro DATATABLE_RT04_SMB3_CompressedTilemaps(Address)
namespace SMB3_CompressedTilemaps
%InsertMacroAtXPosition(<Address>)

Layer3BowsersCastlePillarsBG:
	incbin "Tilemaps/Layer3BowsersCastlePillars.bin"
namespace off
endmacro

macro DATATABLE_RT05_SMB3_CompressedTilemaps(Address)
namespace SMB3_CompressedTilemaps
%InsertMacroAtXPosition(<Address>)

Layer3CloudsBG:
	incbin "Tilemaps/Layer3Clouds.bin"
namespace off
endmacro

macro DATATABLE_RT06_SMB3_CompressedTilemaps(Address)
namespace SMB3_CompressedTilemaps
%InsertMacroAtXPosition(<Address>)

Layer3VariableWater:
	incbin "Tilemaps/Layer3VariableWater.bin"
namespace off
endmacro

macro DATATABLE_RT07_SMB3_CompressedTilemaps(Address)
namespace SMB3_CompressedTilemaps
%InsertMacroAtXPosition(<Address>)

; Todo: This apparently also has something to do with the layer 3 fog?

Layer3PillarsBG:
	incbin "Tilemaps/Layer3Pillars.bin"
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro DATATABLE_RT00_SMB3_Palettes(Address)
;namespace SMB3_Palettes
%InsertMacroAtXPosition(<Address>)

SMB3_Palettes_Main:

SMB3_GlobalSpritePalette_Row08To0C:
;$3C8800
	incbin "Palettes/GlobalSpritePalette_Row08To0C.bin"
SMB3_GlobalSpritePalette_Row08To0CEnd:

RegularMarioPalette:
;$3C88A0
	dw $7F54,$7FFF,$14A5,$0155,$1A1C,$1B3E,$299D,$2E5E
	dw $42FF,$150F,$4125,$55C7,$6A69,$1C9F,$0C19,$0014
RegularMarioPaletteEnd:

TanookiSuitPalette:
;$3C88C0
	dw $7F54,$7FFF,$14A5,$0155,$1A1C,$1B3E,$299D,$2E5E
	dw $42FF,$1459,$0CF2,$0D97,$0E1B,$5EF7,$4A52,$35AD

RegularLuigiPalette:
;$3C88E0
	dw $7F54,$7FFF,$14A5,$0155,$1A1C,$1B3E,$299D,$2E5E
	dw $42FF,$150F,$4160,$4205,$52C9,$0374,$02CF,$024B

HammerSuitPalette:
;$3C8900
	dw $7F54,$7FFF,$0000,$0155,$1A1C,$1B3E,$299D,$2E5E
	dw $42FF,$4F5F,$252B,$3DF1,$5AD8,$1ADF,$0E1A,$0176

FireMarioPalette:
;$3C8920
	dw $7F54,$7FFF,$14A5,$0155,$1A1C,$1B3E,$299D,$2E5E
	dw $42FF,$150F,$0059,$011F,$11BF,$7FFF,$5BDF,$2F5F

FireLuigiPalette:
;$3C8940
	dw $7F54,$7FFF,$14A5,$0155,$1A1C,$1B3E,$299D,$2E5E
	dw $42FF,$150F,$1248,$26ED,$3792,$7FFF,$5BDF,$2F5F

;--------------------------------------------------------------------

DATA_3C8960:
	dw $7F54,$0000,$7FFF,$15E0,$2A82,$3F27,$4210,$56B5,$6B5A,$4FB0,$0997,$163C,$2ADF,$77B7,$6F13,$5E8E

DATA_3C8980:
	dw $7F54,$0000,$7FFF,$35AD,$4A52,$5EF7,$265B,$36DD,$4B7F,$739C,$08F2,$1597,$1E3C,$033F,$023F,$00BF

DATA_3C89A0:
	dw $7F54,$0000,$7FFF,$0038,$003F,$11BF,$097A,$0E5E,$131F,$125F,$19FA,$229F,$3B5F,$5EDF,$461F,$317E

DATA_3C89C0:
	dw $7F54,$0000,$7FFF,$5DA6,$724B,$7ECF,$3DEF,$5294,$6318,$7F74,$0997,$163C,$2ADF,$033F,$01FF,$003D

DATA_3C89E0:
	dw $7F54,$0000,$7FFF,$30D7,$457C,$5A1F,$4210,$56B5,$6739,$6EBF,$0955,$15FA,$229F,$02DC,$173F,$2BDF

DATA_3C8A00:
	dw $7F54,$14A5,$7FFF,$3222,$46C7,$574B,$4210,$56B5,$6739,$67CF,$0997,$163C,$2ADF,$033F,$01FF,$003D

;--------------------------------------------------------------------

; Note: Bowser's palette.

DATA_3C8A20:
	dw $7F54,$0000,$7FFF,$160B,$268F,$3713,$0177,$221C,$2A7E,$6739,$25E2,$3A87,$4F2C,$275F,$0A7E,$00FD

;--------------------------------------------------------------------

; Note: Sprite palettes, row D and E.

DATA_3C8A40:
	dw $7F54,$7FFF,$14A5,$318C,$4631,$56B5,$2E43,$4709,$5BAE,$6B5A,$31DF,$4A9F,$5F3F,$7E75,$65AF,$510A

DATA_3C8A60:
	dw $7F54,$7FFF,$14A5,$0930,$11D5,$1A7A,$1479,$291E,$3DBF,$273E,$1196,$221A,$36BF,$4F7F,$16DF,$0198

DATA_3C8A80:
	dw $7F54,$7FFF,$14A5,$098E,$1233,$16B7,$2529,$39CE,$4E73,$1F1A,$0098,$153D,$29DF,$7E75,$65AF,$510A

DATA_3C8AA0:
	dw $7F54,$7FFF,$14A5,$2D6B,$4210,$56B5,$7A48,$7F2B,$7FB4,$6739,$1196,$221A,$36BF,$12DF,$11BF,$001C

DATA_3C8AC0:
	dw $7F54,$7FFF,$14A5,$21AB,$3650,$46D4,$7A48,$7F2B,$7FB4,$5B79,$1478,$155E,$269F,$4BAA,$3705,$2261

DATA_3C8AE0:
	dw $7F54,$7FFF,$14A5,$25E4,$3A84,$4F27,$0214,$02B9,$17BF,$63CA,$28FA,$4A1D,$6ADF,$732C,$5E87,$49C3

DATA_3C8B00:
	dw $7F54,$7FFF,$14A5,$594C,$6DF1,$7E96,$0818,$087F,$0A5F,$1B7F,$0D76,$1E3C,$32DF,$0B72,$12CD,$0228

DATA_3C8B20:
	dw $7F54,$7FFF,$1084,$001D,$25DF,$327F,$0135,$19DA,$2A7E,$5A07,$1E4D,$32F2,$4797,$275F,$0A7E,$017C

DATA_3C8B40:
	dw $7F54,$7FFF,$14A5,$612E,$72B2,$7B76,$1198,$223C,$36DF,$318C,$00B7,$159C,$223F,$275F,$0A7E,$017C

DATA_3C8B60:
	dw $7F54,$7FFF,$0000,$0013,$00D8,$117D,$01FA,$067C,$1B1F,$261F,$1E4D,$32F2,$4797,$4F7F,$3ADE,$263C

DATA_3C8B80:
	dw $7F54,$7FFF,$6543,$0015,$013C,$11BF,$1198,$223C,$36DF,$1B7F,$01BB,$125F,$2B1F,$6E04,$7EA9,$7F2D

DATA_3C8BA0:
	dw $7F54,$7FFF,$14A5,$0818,$087F,$0A1F,$199C,$2A5E,$3F1F,$0B5F,$00AF,$0157,$025F,$7FF9,$7FD0,$6AE9

DATA_3C8BC0:
	dw $7F54,$7FFF,$1084,$6AB0,$7B34,$7FB8,$299D,$2E5E,$42FF,$5A07,$0017,$2D1E,$45DF,$6F7B,$5EF7,$4E73

DATA_3C8BE0:
	dw $7F54,$7FFF,$0000,$0155,$1A1C,$1B3E,$299D,$2E5E,$42FF,$0C57,$019D,$02BF,$1BDF,$6ADF,$4A1D,$28FA

;--------------------------------------------------------------------

SMB3TitleScreenPalette_Row0DTo0E:
;$3C8C00
	incbin "Palettes/TitleScreenPalette_Row0DTo0E.bin"
SMB3TitleScreenPalette_Row0DTo0EEnd:

;--------------------------------------------------------------------

; Todo: Unreferrenced data.

UNK_3C8C40:
	dw $7F54,$7FFF,$1084,$6AB0,$7B34,$7FB8,$299D,$2E5E,$42FF,$5A07,$0017,$2D1E,$45DF,$6F7B,$5EF7,$4E73
	dw $7F54,$1084,$1084,$1084,$1084,$1084,$1084,$1084,$1084,$1084,$1084,$1084,$1084,$1084,$1084,$1084
	dw $7F54,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9
	dw $7F54,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9
	dw $7F54,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9
	dw $7F54,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9
	dw $7F54,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9
	dw $7F54,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9
	dw $7F54,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9
	dw $7F54,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9
	dw $7F54,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9
	dw $7F54,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9
	dw $7F54,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9
	dw $7F54,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9
namespace off
endmacro

macro DATATABLE_RT01_SMB3_Palettes(Address)
;namespace SMB3_Palettes
%InsertMacroAtXPosition(<Address>)

; Note: Level Palettes, grouped up in sets of 5. The first one in a group is for Rows 3, 4 and 5 (FG)
; The remaining 4 are for Rows 6 and 7 (FG).

DATA_3C9000:
	dw $7F54,$7FFF,$0000,$5D41,$7A48,$7F2B,$7FB4,$0D32,$21D7,$367C,$1620,$1E85,$2F09,$3F8D,$15FF,$4FF1
	dw $7F54,$7FFF,$0000,$0119,$11BF,$265F,$433F,$2A22,$3EC7,$578E,$0511,$1196,$221B,$329F,$0000,$0000
	dw $7F54,$7FFF,$0000,$2D6B,$4210,$5AD6,$739C,$6AE9,$7FD0,$7FF9,$500D,$7135,$7DBB,$0000,$0000,$0000

DATA_3C9060:
	dw $7F54,$7FFF,$0000,$3DA9,$524E,$66F3,$7FB9,$0951,$1DF6,$2E7A,$1620,$1E85,$2F09,$3F8D,$1505,$1193
	dw $7F54,$7FFF,$0000,$01A6,$164B,$2AF0,$3F95,$0192,$0258,$033F,$0013,$053C,$027F,$29A0,$4263,$52E6

DATA_3C90A0:
	dw $7F54,$7FFF,$0000,$4D28,$5DAC,$6E30,$7EB4,$0951,$1DF6,$2E7A,$1620,$1E85,$2F09,$3F8D,$1505,$1193
	dw $7F54,$7FFF,$0000,$01C2,$0267,$032D,$03D2,$0192,$0258,$033F,$299B,$3E3F,$52DF,$29A0,$4263,$52E6

DATA_3C90E0:
	dw $7F54,$7FFF,$0000,$3DA9,$524E,$66F3,$7FB9,$0951,$1DF6,$2E7A,$1620,$1E85,$2F09,$3F8D,$1505,$1193
	dw $7F54,$7FFF,$0000,$01A6,$164B,$2AF0,$3F95,$0192,$0258,$033F,$299B,$3E3F,$52DF,$29A0,$4263,$52E6

DATA_3C9120:
	dw $7F54,$7FFF,$0000,$3DA9,$524E,$66F3,$7FB9,$0000,$0000,$0000,$000E,$0014,$0018,$055D,$09FF,$027F
	dw $7F54,$7FFF,$0000,$013B,$09BE,$1A5F,$2ADF,$0192,$0258,$033F,$0013,$053C,$027F,$29A0,$4263,$52E6

DATA_3C9160:
	dw $7F54,$7FFF,$0000,$5D41,$7A48,$7F2B,$7FB4,$0D32,$21D7,$367C,$1DE6,$2E6A,$3EEE,$4F72,$1575,$2E39
	dw $7F54,$7FFF,$0000,$0119,$11BF,$265F,$433F,$2A22,$3EC7,$578E,$2530,$0DD4,$1E5A,$36BF,$1196,$221A
	dw $7F54,$7FFF,$0000,$2D6B,$4210,$5AD6,$739C,$6AE9,$7FD0,$7FF9,$4D50,$5DD4,$6E58,$7EDC,$0000,$0000

DATA_3C91C0:
	dw $7F54,$7FFF,$0000,$4D28,$5DAC,$6E30,$7EB4,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
	dw $7F54,$7FFF,$0000,$01C2,$0267,$032D,$03D2,$0192,$0258,$033F,$0013,$053C,$027F,$0000,$0000,$0000

DATA_3C9200:
	dw $7F54,$7FFF,$0000,$3DA9,$524E,$66F3,$7FB9,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
	dw $7F54,$7FFF,$0000,$01A1,$0267,$032D,$03D2,$0192,$0258,$033F,$0013,$053C,$027F,$0000,$0000,$0000

DATA_3C9240:
	dw $7F54,$7FFF,$0000,$59AA,$6A2E,$76D3,$7F99,$2073,$3939,$4DDE,$0652,$1696,$26DA,$373F,$627F,$771F
	dw $7F54,$7FFF,$0000,$01A1,$0267,$032D,$03D2,$0192,$0258,$033F,$0204,$0AA9,$1B4E,$2BD2,$017F,$02DF

DATA_3C9280:
	dw $7F54,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9
	dw $7F54,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9

DATA_3C92C0:
	dw $7F54,$7FFF,$0000,$6D88,$762D,$7AB1,$7F56,$0D32,$21D7,$367C,$15AA,$1A4F,$22F4,$3B99,$15FF,$2ADF
	dw $7F54,$7FFF,$0000,$0119,$11BF,$265F,$433F,$21C2,$3A86,$5B0A,$2530,$0DD4,$1E5A,$36BF,$0000,$0000
	dw $7F54,$7FFF,$0000,$2D6B,$4210,$5AD6,$739C,$6AE9,$7FD0,$7FF9,$0930,$11D5,$1A7A,$273E,$0000,$0000

DATA_3C9320:
	dw $7F54,$7FFF,$0000,$59AA,$6A2E,$76D3,$7F99,$2073,$3939,$4DDE,$0210,$1275,$26DA,$373F,$627F,$771F
	dw $7F54,$7FFF,$0000,$013B,$09BE,$1A5F,$2ADF,$0192,$0258,$033F,$0204,$0AA9,$1B4E,$2BD2,$017F,$02DF

DATA_3C9360:
	dw $7F54,$7FFF,$0000,$59AA,$6A2E,$76D3,$7F99,$2073,$3939,$4DDE,$0159,$01DB,$0E5D,$1EDF,$627F,$771F
	dw $7F54,$7FFF,$0000,$013B,$09BE,$1A5F,$2ADF,$0192,$0258,$033F,$0204,$0AA9,$1B4E,$2BD2,$017F,$02DF

DATA_3C93A0:
	dw $7F54,$7FFF,$0000,$59AA,$6A2E,$76D3,$7F99,$5CCC,$6D50,$7DD4,$0210,$1275,$26DA,$373F,$7E58,$7EDC
	dw $7F54,$7FFF,$0000,$013B,$09BE,$1A5F,$2ADF,$0192,$0258,$033F,$0204,$0AA9,$1B4E,$2BD2,$017F,$02DF

DATA_3C93E0:
	dw $7F54,$7FFF,$0000,$59AA,$6A2E,$76D3,$7F99,$2073,$3939,$4DDE,$298A,$3E2F,$52D4,$6358,$627F,$771F
	dw $7F54,$7FFF,$0000,$01A1,$0267,$032D,$03D2,$0192,$0258,$033F,$0204,$0AA9,$1B4E,$2BD2,$017F,$02DF

DATA_3C9420:
	dw $7F54,$7FFF,$0000,$5D41,$7A48,$7F2B,$7FB4,$0D32,$21D7,$367C,$008E,$0113,$01D9,$027E,$15FF,$2ADF
	dw $7F54,$7FFF,$0000,$0119,$11BF,$265F,$433F,$21C2,$3A86,$5B0A,$2530,$0DD4,$1E5A,$36BF,$0000,$0000
	dw $7F54,$7FFF,$0000,$2D6B,$4210,$5AD6,$739C,$6AE9,$7FD0,$7FF9,$500D,$7135,$7DBB,$0000,$0000,$0000

DATA_3C9480:
	dw $7F54,$7FFF,$0000,$01CA,$0A2F,$1AB3,$2B37,$5DE1,$7AEB,$7FD4,$08D0,$1134,$19D9,$225D,$0000,$0000
	dw $7F54,$7FFF,$0000,$15A1,$2267,$2F2D,$37D2,$0192,$0258,$033F,$7E51,$7ED5,$7F7A,$7FFE,$017F,$02DF

DATA_3C94C0:
	dw $7F54,$7FFF,$0000,$01CA,$0A2F,$1AB3,$2B37,$5DE1,$7AEB,$7FD4,$08D0,$1134,$19D9,$225D,$0000,$0000
	dw $7F54,$7FFF,$0000,$49A9,$5A2D,$6AB1,$7B35,$0192,$0258,$033F,$7E51,$7ED5,$7F7A,$7FFE,$017F,$02DF

DATA_3C9500:
	dw $7F54,$7FFF,$0000,$3A08,$4A8C,$5B10,$6B94,$5DE1,$7AEB,$7FD4,$7588,$7E2D,$7ED2,$7F77,$0000,$0000
	dw $7F54,$7FFF,$0000,$15A1,$2267,$2F2D,$37D2,$0192,$0258,$033F,$7E51,$7ED5,$7F7A,$7FFE,$017F,$02DF

DATA_3C9540:
	dw $7F54,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9
	dw $7F54,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9

DATA_3C9580:
	dw $7F54,$7FFF,$0000,$5D41,$7A48,$7F2B,$7FB4,$0D32,$21D7,$367C,$000E,$0014,$0018,$055D,$09FF,$027F
	dw $7F54,$7FFF,$0000,$0D70,$1615,$1EBA,$2B7E,$1478,$155E,$269F,$2530,$0DD4,$1E5A,$36BF,$0000,$0000
	dw $7F54,$7FFF,$0000,$2D6B,$4210,$5AD6,$739C,$6AE9,$7FD0,$7FF9,$0595,$1A3A,$371F,$539F,$0000,$0000

DATA_3C95E0:
	dw $7F54,$7FFF,$0000,$3DA9,$524E,$66F3,$7FB9,$0000,$0000,$0000,$1478,$0D5F,$1E5F,$371F,$0000,$0000
	dw $7F54,$7FFF,$0000,$0098,$0D3D,$1DDF,$32BF,$0192,$0258,$033F,$006F,$00F3,$1177,$21FB,$327F,$0011

DATA_3C9620:
	dw $7F54,$7FFF,$0000,$4D69,$620E,$76B3,$7F58,$0000,$0000,$0000,$1478,$0D5F,$1E5F,$371F,$0000,$0000
	dw $7F54,$7FFF,$0000,$318A,$420E,$5292,$6316,$0192,$0258,$033F,$006F,$00F3,$1177,$21FB,$327F,$2106

DATA_3C9660:
	dw $7F54,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9
	dw $7F54,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9

DATA_3C96A0:
	dw $7F54,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9
	dw $7F54,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9

DATA_3C96E0:
	dw $7F54,$7FFF,$1084,$5D41,$7A48,$7F2B,$7FB4,$0D32,$21D7,$367C,$008E,$0113,$01D9,$027E,$15FF,$2ADF
	dw $7F54,$7FFF,$1084,$0D70,$1615,$1EBA,$2B7E,$10FC,$2D7F,$4A7F,$2530,$0DD4,$1E5A,$36BF,$0000,$0000
	dw $7F54,$7FFF,$0000,$2908,$3DAD,$5252,$62D6,$6AE9,$7FD0,$7FF9,$5166,$620E,$7696,$7F1A,$0258,$033F

DATA_3C9740:
	dw $7F54,$7FFF,$1084,$3DA9,$524E,$66F3,$7FB9,$46EF,$5B94,$6FF9,$2961,$39E1,$4A61,$5AE1,$0000,$0000
	dw $7F54,$7FFF,$0000,$01A1,$0267,$032D,$03D2,$0192,$0258,$033F,$0152,$11D6,$225A,$2EBD,$0258,$033F

DATA_3C9780:
	dw $7F54,$7FFF,$1084,$5121,$7227,$770A,$7F52,$0192,$0258,$033F,$2961,$39E1,$4A61,$5AE1,$0018,$017F
	dw $7F54,$7FFF,$0000,$01A1,$0267,$032D,$03D2,$0192,$0258,$033F,$0152,$11D6,$225A,$2EBD,$0226,$174C

DATA_3C97C0:
	dw $7F54,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9
	dw $7F54,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9

DATA_3C9800:
	dw $7F54,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9
	dw $7F54,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9

DATA_3C9840:
	dw $7F54,$7FFF,$0000,$5D41,$7A48,$7F2B,$7FB4,$0D32,$21D7,$367C,$008E,$0113,$01D9,$027E,$15FF,$2ADF
	dw $7F54,$7FFF,$0000,$0D70,$1615,$1EBA,$2B7E,$0DC2,$2244,$370A,$2530,$0DD4,$1E5A,$36BF,$0D2F,$19F8
	dw $7F54,$7FFF,$0000,$2D6B,$4210,$5AD6,$739C,$1A3A,$371F,$539F,$3126,$41AA,$4E0D,$5A70,$66D3,$7336

DATA_3C98A0:
	dw $7F54,$7FFF,$0000,$3DA9,$524E,$66F3,$7FB9,$1478,$153D,$2E5F,$00CD,$0151,$11D5,$2259,$32DD,$435F
	dw $7F54,$7FFF,$0000,$01A1,$0267,$032D,$03D2,$0192,$0258,$033F,$00D2,$1135,$19B8,$263B,$36DF,$437F

DATA_3C98E0:
	dw $7F54,$7FFF,$0000,$3DA9,$524E,$66F3,$7FB9,$1478,$153D,$2E5F,$004B,$04CF,$1553,$25D7,$365B,$46DF
	dw $7F54,$7FFF,$0000,$01A1,$0267,$032D,$03D2,$0192,$0258,$033F,$00D2,$1135,$19B8,$263B,$36DF,$437F

DATA_3C9920:
	dw $7F54,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9
	dw $7F54,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9

DATA_3C9960:
	dw $7F54,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9
	dw $7F54,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9

DATA_3C99A0:
	dw $7F54,$7FFF,$0000,$5D41,$7A48,$7F2B,$7FB4,$0D32,$21D7,$367C,$2A25,$3A86,$56E9,$676D,$7ED4,$7F97
	dw $7F54,$7FFF,$0000,$0119,$11BF,$265F,$433F,$1196,$221A,$36BF,$2530,$0DD4,$1E5A,$36BF,$7ED4,$7F97
	dw $7F54,$7FFF,$0000,$2D6B,$4210,$56B5,$6739,$6AE9,$7FD0,$7FF9,$0930,$11D5,$1A7A,$273E,$2A04,$3A86

DATA_3C9A00:
	dw $7F54,$7FFF,$0000,$3DA9,$524E,$66F3,$7FB9,$5DE1,$76A9,$7F50,$0000,$0000,$0000,$0000,$0000,$7FD4
	dw $7F54,$7FFF,$0000,$4589,$560D,$6691,$7715,$0192,$0258,$033F,$614E,$7274,$7FB7,$5FF7,$7DDB,$7F1F

DATA_3C9A40:
	dw $7F54,$7FFF,$0000,$3DA9,$524E,$66F3,$7FB9,$5DE1,$76A9,$7F50,$0000,$0000,$0000,$0000,$0000,$7FD4
	dw $7F54,$7FFF,$0000,$25C6,$3A6B,$4F10,$63B5,$0192,$0258,$033F,$614E,$7274,$7FB7,$5FF7,$7DDB,$7F1F

DATA_3C9A80:
	dw $7F54,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9
	dw $7F54,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9

DATA_3C9AC0:
	dw $7F54,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9
	dw $7F54,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9

DATA_3C9B00:
	dw $7F54,$7FFF,$0000,$5D41,$7A48,$7F2B,$7FB4,$0D32,$21D7,$367C,$15A6,$1A4B,$22F0,$3B95,$15FF,$2ADF
	dw $7F54,$7FFF,$0000,$0119,$11BF,$265F,$433F,$1196,$221A,$36BF,$2530,$0DD4,$1E5A,$36BF,$0000,$0000
	dw $7F54,$7FFF,$0000,$2D6B,$4210,$5AD6,$739C,$6AE9,$7FD0,$7FF9,$0D70,$1615,$1EBA,$2B7E,$0000,$0000

DATA_3C9B60:
	dw $7F54,$7FFF,$0000,$59AA,$6A2E,$76D3,$7F99,$5DE1,$7AEB,$7FD4,$1A43,$22C9,$2B4E,$33D3,$0000,$0000
	dw $7F54,$7FFF,$0000,$01C2,$0267,$032D,$03D2,$0192,$0258,$033F,$15E7,$266B,$36EF,$4773,$017F,$02DF

DATA_3C9BA0:
	dw $7F54,$7FFF,$0000,$59AA,$6A2E,$76D3,$7F99,$5DE1,$7AEB,$7FD4,$0D96,$1E19,$2E9C,$3F1F,$0000,$0000
	dw $7F54,$7FFF,$0000,$00B8,$015C,$01FF,$02BF,$0192,$0258,$033F,$15E7,$266B,$36EF,$4773,$017F,$02DF

DATA_3C9BE0:
	dw $7F54,$7FFF,$0000,$3DA9,$524E,$66F3,$7FB9,$1478,$153D,$2E5F,$1151,$19F6,$229B,$2F5F,$0000,$0000
	dw $7F54,$7FFF,$0000,$01A1,$0267,$032D,$03D2,$0192,$0258,$033F,$1139,$25FB,$369D,$4B3F,$0258,$033F

DATA_3C9C20:
	dw $7F54,$7FFF,$0000,$59AA,$6A2E,$76D3,$7F99,$5DE1,$7AEB,$7FD4,$09B5,$1A38,$2ABB,$3B3F,$0000,$0000
	dw $7F54,$7FFF,$0000,$01C2,$0267,$032D,$03D2,$0192,$0258,$033F,$0558,$15DC,$265F,$433F,$017F,$02DF

;--------------------------------------------------------------------

SMB3_BackgroundColorTable:
;$3C9C60
	dw $0000,$7E6D,$7DC7,$21FE
	dw $7E53,$0C00,$7F54,$3001

;--------------------------------------------------------------------

UNK_3C9C70:
	dw $25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9

;--------------------------------------------------------------------

; Note: Layer 3 palettes 2 and 3.

DATA_3C9C80:
	dw $16CA,$61E1,$5160,$4500,$5B7F,$4500,$38A0,$2C00

DATA_3C9C90:
	dw $16CA,$7F7A,$7F37,$7EF4,$5B7F,$7FDC,$7F7A,$7F37

DATA_3C9CA0:
	dw $16CA,$30A0,$2020,$0C00,$5B7F,$30A0,$5AB5,$4E52

DATA_3C9CB0:
	dw $16CA,$0CA3,$10C4,$14E5,$5B7F,$0461,$0882,$0CA3

DATA_3C9CC0:
	dw $16CA,$04EA,$00C8,$0065,$5B7F,$0000,$0000,$0000

DATA_3C9CD0:
	dw $16CA,$0C42,$18A5,$462E,$5B7F,$4210,$4E73,$5AD6

DATA_3C9CE0:
	dw $16CA,$6604,$5580,$4920,$5B7F,$4920,$3CC0,$3060

DATA_3C9CF0:
	dw $16CA,$0000,$0000,$0000,$5B7F,$00F2,$01D9,$42DF

DATA_3C9D00:
	dw $16CA,$0421,$0842,$0863,$5B7F,$0441,$0862,$0C83

DATA_3C9D10:
	dw $16CA,$7F58,$7F15,$7DC7,$5B7F,$7F58,$7F17,$76B4

DATA_3C9D20:
	dw $0000,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9

DATA_3C9D30:
	dw $0000,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9

DATA_3C9D40:
	dw $7F54,$0000,$0000,$0000,$0000,$0000,$0000,$0000

DATA_3C9D50:
	dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000

DATA_3C9D60:
	dw $7F54,$0000,$0000,$0000,$0000,$0000,$0000,$0000

UNK_3C9D70:
	dw $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000

;--------------------------------------------------------------------

; Note: Overworld palettes, rows 4, 5, 6, and 7.

DATA_3C9D80:
	dw $7F54,$7FFF,$0000,$6583,$7E6A,$7F30,$7F93,$0D32,$21D7,$367C,$001A,$15FF,$2ADF,$7FFF,$7FFF,$7FFF
	dw $7F54,$7FFF,$0000,$0114,$1198,$221C,$36BF,$0DEF,$0ED6,$6583,$7E6A,$7F30,$7F93,$2AA5,$3B29,$4BAD
	dw $7F54,$7FFF,$0000,$2D6B,$4210,$56B5,$6739,$026C,$16F1,$2B96,$01FE,$02FF,$379F,$2AA5,$3B29,$4BAD
	dw $7F54,$7F93,$0000,$0164,$0E09,$22AE,$3753,$0192,$0258,$033F,$0013,$155A,$1A3F,$7FFF,$7FFF,$7FF9

DATA_3C9E00:
	incbin "Palettes/World1_3_9_MapPalette_Row_4_5_6_7.tpl":4-

DATA_3C9E80:
	incbin "Palettes/World2_MapPalette_Row_4_5_6_7.tpl":4-

DATA_3C9F00:
	incbin "Palettes/World4_5_MapPalette_Row_4_5_6_7.tpl":4-

DATA_3C9F80:
	incbin "Palettes/World6_MapPalette_Row_4_5_6_7.tpl":4-

DATA_3CA000:
	incbin "Palettes/World7_MapPalette_Row_4_5_6_7.tpl":4-

DATA_3CA080:
	incbin "Palettes/World8_MapPalette_Row_4_5_6_7.tpl":4-

;--------------------------------------------------------------------

UnknownPaletteData01_Row00:
;$3CA100
	incbin "Palettes/UnknownPaletteData01_Row00.bin"
UnknownPaletteData01_Row00End:

;--------------------------------------------------------------------

; Note: Some palette data used by the spade levels.

SpadeLevelPalette_Row01To07:
;$3CA120
	incbin "Palettes/SpadeLevelPalette_Row01To07.bin"
SpadeLevelPalette_Row01To07End:

;--------------------------------------------------------------------

; Todo: Unreferrenced data.

UNK_3CA200:
	dw $7F54,$7FFF,$0000,$22AE,$3753,$56B5,$6739,$1198,$221C,$69A4,$001A,$15FF,$2ADF,$0DD8,$1E5A,$2AFF
	dw $7F54,$7FFF,$0000,$2D6B,$4210,$56B5,$6739,$1A3A,$371F,$539F,$01B3,$0E37,$1EBB,$2F3F,$774F,$66CB
	dw $7F54,$7FFF,$0000,$221C,$36BF,$3EC7,$578E,$0258,$033F,$21D7,$69A4,$7E46,$7F2D,$0DD8,$1E5A,$2AFF
	dw $7F54,$7FFF,$0000,$124E,$22D2,$3356,$43DA,$7EB1,$7F35,$7FB9,$1478,$2D3C,$3DBF,$525F,$26BD,$1E78
	dw $7F54,$7FFF,$0000,$22AE,$3753,$56B5,$6739,$1198,$221C,$69A4,$001A,$15FF,$2ADF,$7EF7,$7F7B,$7FFF
	dw $7F54,$7FFF,$0000,$2D6B,$4210,$56B5,$6739,$1A3A,$371F,$539F,$7DAF,$7E96,$7F1A,$7F9D,$774F,$66CB
	dw $7F54,$7FFF,$0000,$221C,$36BF,$5EF7,$6F7B,$0258,$033F,$21D7,$69A4,$7EE9,$7FB4,$7EF7,$7F7B,$7FFF
	dw $7F54,$7FFF,$0000,$4E0D,$5E91,$6F15,$7F99,$7EB1,$7F35,$7FB9,$1478,$2D3C,$3DBF,$525F,$26BD,$1E78
	dw $7F54,$7FFF,$0000,$22AE,$3753,$56B5,$6739,$1198,$221C,$69A4,$001A,$15FF,$2ADF,$2A22,$3EC7,$578E
	dw $7F54,$7FFF,$0000,$2D6B,$4210,$56B5,$6739,$1A3A,$371F,$539F,$2D72,$3DF6,$4E7A,$1198,$774F,$66CB
	dw $7F54,$7FFF,$0000,$221C,$36BF,$3EC7,$578E,$0258,$033F,$21D7,$69A4,$7E46,$7F2D,$2A22,$3EC7,$578E
	dw $7F54,$7FFF,$0000,$124E,$22D2,$3356,$43DA,$7EB1,$7F35,$7FB9,$1478,$2D3C,$3DBF,$525F,$26BD,$1E78
	dw $7F54,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9

;--------------------------------------------------------------------

; Note: Overworld palette data, Rows 1, 2 and 3.

DATA_3CA3A0:
	dw $7F54,$7FFF,$0000,$2166,$31EA,$426E,$52F2,$6BB8,$0000,$00ED,$1192,$0EBB,$1F5F,$0176,$1E5A,$3B1F
	dw $7F54,$7FFF,$0000,$50E0,$69A4,$7A2B,$7EAF,$7F33,$7F96,$0000,$001A,$15FF,$2ADF,$0176,$1E5A,$3B1F
	dw $7F54,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9

;--------------------------------------------------------------------

SMB3TitleScreenPalette_Row01To03:
;$3CA400
	incbin "Palettes/TitleScreenPalette_Row01To03.bin"
SMB3TitleScreenPalette_Row01To03End:

TitleScreenPalette_Row04To07:
;$3CA480
	incbin "Palettes/TitleScreenPalette_Row04To07.bin"
TitleScreenPalette_Row04To07End:

;--------------------------------------------------------------------

; Note: Throne room palette, rows 1 to 7.

DATA_3CA500:
	dw $0000,$7FFF,$1CE7,$0DC9,$226E,$32F2,$0195,$1E19,$267B,$6739,$25E2,$3A87,$4F2C,$0B3F,$0A3E,$00FD
	dw $0000,$7FFF,$0000,$0190,$0A35,$1ADA,$273D,$2C19,$2D1E,$45DF,$2945,$39C9,$4A4D,$5AD1,$6B55,$7FFA
	dw $0000,$7FFF,$0000,$5D41,$7A48,$7F2B,$7FB4,$0D32,$21D7,$367C,$008E,$0113,$01D9,$027E,$15FF,$2ADF
	dw $0000,$7FFF,$0000,$39DF,$4A5F,$5ADF,$6B5F,$269E,$371F,$479F,$3DEF,$4E73,$5EF7,$6F7B,$7F2B,$7FB4
	dw $0000,$7FFF,$0000,$2D6B,$4210,$56B5,$6739,$1A3A,$371F,$539F,$196F,$2E14,$42B9,$575E,$1084,$1084
	dw $0000,$7FFF,$0000,$3DA9,$524E,$66F3,$7FB9,$1478,$153D,$2E5F,$00CD,$0151,$11D5,$2259,$32DD,$435F
	dw $0000,$7FFF,$0000,$2945,$39C9,$4A4D,$5AD1,$0192,$0258,$033F,$196F,$2E14,$42B9,$575E,$0000,$1E78

;--------------------------------------------------------------------

; Todo: Unreferrenced data.

UNK_3C85E0:
	dw $7F54,$1084,$1084,$1084,$1084,$1084,$1084,$1084,$1084,$1084,$0000,$0000,$0000,$0000,$0000,$0000

;--------------------------------------------------------------------

; Note: Level Palettes, Rows 1 and 2 (layer 2 BG)

DATA_3CA600:
	dw $7F54,$11BF,$4210,$728A,$76ED,$7B50,$7FB3,$32AB,$3AED,$4B31,$5794,$7E8E,$7EAF,$7ED0,$7EF1,$7F12
	dw $7F54,$1A6C,$4210,$2A3C,$369D,$42FE,$4F5F,$0585,$0E09,$0046,$0488,$7F12,$626A,$668B,$6AAC,$6ECD

DATA_3CA640:
	dw $7F54,$7FFF,$1460,$15B4,$0D51,$090F,$04CD,$006A,$0007,$0004,$0001,$0D86,$0924,$04C2,$0060,$36BF
	dw $7F54,$7FFF,$5D41,$2A14,$1990,$090C,$0088,$0066,$0005,$0004,$7FD9,$7F97,$7F75,$7F33,$7EF1,$7EAF

DATA_3CA680:
	dw $7F54,$7FBB,$7FFF,$15E7,$1A2A,$1E6D,$22B0,$26F3,$2B36,$2F79,$33BC,$37FF,$7ED0,$7EF1,$7F12,$7F33
	dw $7F54,$7FFF,$18C6,$080D,$1413,$2019,$2C1F,$43FF,$57FF,$6BFF,$7FFF,$0D70,$1615,$1EBA,$2B7E,$15E7

DATA_3CA6C0:
	dw $7F54,$1D8F,$42FC,$1DD1,$1E13,$2A57,$3ABB,$331B,$3B7C,$43DD,$4BFE,$4B3E,$471D,$2AFA,$437C,$2AD9
	dw $7F54,$7FFF,$4B3E,$42FE,$3ABE,$327E,$2A3E,$331B,$3B7C,$43DD,$4BFE,$261F,$2E3F,$365F,$3E7F,$2AD9

DATA_3CA700:
	dw $7F54,$7AD4,$7EF5,$1E6F,$2290,$26D2,$3B35,$3F56,$4F9A,$76B3,$22B6,$2EF8,$3339,$3B7B,$47DC,$4BFD
	dw $7F54,$7AD4,$0119,$7AF6,$7292,$0119,$0119,$0119,$0119,$76B3,$7E8F,$7EB1,$7ED3,$7EF5,$156B,$156B

DATA_3CA740:
	dw $7F54,$4A92,$1084,$1906,$2569,$31CC,$3E2F,$2A0F,$3672,$2569,$0047,$08AA,$150D,$2170,$0409,$184D
	dw $7F54,$7FFF,$18C5,$0864,$10A6,$18E8,$212A,$296C,$31AE,$1CE7,$294A,$35AD,$4631,$3657,$3E99,$46DB

DATA_3CA780:
	dw $7F54,$7FFF,$0000,$0142,$09A5,$1208,$1E8C,$10FC,$2D7F,$4A7F,$0CE6,$1949,$25AC,$320F,$2AEF,$360E
	dw $7F54,$7FFF,$0000,$1C92,$2D37,$2DFB,$427B,$04AF,$0D12,$1575,$0C86,$18E9,$254C,$31AF,$102E,$1DD8

DATA_3CA7C0:
	dw $7F54,$7FFF,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$14A5,$2108,$2D6B,$0000,$0000,$0000
	dw $7F54,$7FFF,$0024,$0005,$0048,$008A,$008C,$04B0,$2529,$39CE,$0003,$0006,$0049,$048C,$5374,$0C00

DATA_3CA800:
	dw $7F54,$7FFF,$7FBB,$72F8,$7779,$7735,$6EF3,$42D0,$3A8E,$324C,$66D5,$6F37,$56F3,$52D2,$4A99,$3A15
	dw $7F54,$7FFF,$1084,$72F8,$76D7,$7AB6,$7E95,$7E74,$0119,$6AF6,$66D5,$6AB6,$6274,$5A32,$51F0,$49AE

DATA_3CA840:
	dw $7F54,$5374,$5374,$5374,$5374,$5374,$5374,$5374,$5374,$5374,$5374,$5374,$5374,$5374,$5374,$5374
	dw $7F54,$5374,$5374,$5374,$5374,$5374,$5374,$5374,$5374,$5374,$5374,$5374,$5374,$5374,$5374,$5374

DATA_3CA880:
	dw $7F54,$7FFF,$0D24,$1A68,$22AA,$2AEC,$332E,$1EA8,$2F2F,$0904,$4B50,$5392,$01A0,$05E2,$0E24,$1666
	dw $7F54,$7FFF,$0100,$430E,$472F,$4B50,$5392,$1EA8,$08EB,$0903,$0D24,$090D,$01A0,$05E2,$0E24,$1666

DATA_3CA8C0:
	dw $7F54,$0000,$0000,$0004,$0007,$000A,$000E,$0842,$0C83,$10C4,$1505,$0004,$0C67,$18CA,$0000,$0000
	dw $7F54,$5374,$5374,$5374,$5374,$5374,$5374,$5374,$5374,$5374,$5374,$5374,$5374,$5374,$5374,$5374

DATA_3CA900:
	dw $7F54,$7FFF,$0C63,$10C3,$14E4,$1905,$1D26,$14E3,$1904,$1D25,$2146,$1903,$1D04,$2125,$2546,$1908

DATA_3CA920:
	dw $7F54,$7FFF,$14A5,$0C63,$1084,$14A5,$18C6,$0C65,$1086,$14A7,$18C8,$0C67,$1088,$14A9,$18CA,$0421

DATA_3CA940:
	dw $7F54,$5374,$5374,$5374,$5374,$5374,$5374,$5374,$5374,$5374,$5374,$5374,$5374,$5374,$5374,$5374
	dw $7F54,$5374,$5374,$5374,$5374,$5374,$5374,$5374,$5374,$5374,$5374,$5374,$5374,$5374,$5374,$5374

DATA_3CA980:
	dw $7F54,$7AD4,$7EF5,$2631,$2A52,$2E94,$42F7,$4718,$575C,$76B3,$2A78,$32BA,$3AFB,$433D,$4F9E,$53DF
	dw $7F54,$7AD4,$0119,$7AF6,$7292,$0119,$0119,$0119,$0119,$76B3,$7E8F,$7EB1,$7ED3,$7EF5,$156B,$156B

DATA_3CA9C0:
	dw $7F54,$21AB,$1D8A,$0080,$00A2,$00C4,$00E6,$0108,$012B,$014E,$0171,$0194,$0060,$0081,$00A2,$00C3
	dw $7F54,$7FFF,$0000,$3103,$562D,$7FFC,$2402,$3004,$48CA,$02DF,$02DF,$02DF,$02DF,$02DF,$02DF,$02DF

DATA_3CAA00:
	dw $7F54,$29AE,$1084,$0043,$0C85,$18E8,$214B,$0044,$0886,$10C8,$190A,$2C60,$38C0,$4521,$4565,$45CB
	dw $7F54,$7FFF,$35AD,$4631,$2EEB,$4350,$5F77,$3238,$4ABB,$6EFB,$0E79,$2EFB,$4F7B,$6EA5,$772D,$77B5

DATA_3CAA40:
	dw $7F54,$7FFF,$14A5,$7EF4,$7F37,$7F7A,$14A5,$14A5,$14A5,$28C4,$2CE5,$3106,$3527,$3948,$3D69,$418A
	dw $7F54,$3DAB,$2529,$294A,$2D6B,$318C,$35AD,$00CD,$0D30,$1572,$21D5,$1547,$1968,$1D89,$21AA,$190A

DATA_3CAA80:
	dw $7F54,$7FBB,$7FFF,$15E7,$1A2A,$1E6D,$22B0,$26F3,$2B36,$2F79,$33BC,$37FF,$7B78,$7B9A,$7BBC,$7BDE
	dw $7F54,$3DC0,$3DC0,$3DC0,$3DC0,$3D20,$3D80,$3960,$3580,$39E3,$4689,$4689,$4646,$4646,$4646,$4646

DATA_3CAAC0:
	dw $7F54,$7FFF,$0024,$0465,$0487,$04A9,$04CB,$18C6,$18C7,$18C8,$18C9,$18CA,$18C6,$14A5,$1084,$0C63
	dw $7F54,$7FFF,$1084,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9,$25B9

DATA_3CAB00:
	dw $7F54,$7FDD,$29B0,$4255,$46BA,$577F,$5FFF,$7FFD,$7282,$72A5,$72C7,$730B,$3248,$3A8A,$42CC,$4B0E
	dw $7F54,$7FFF,$1084,$7F99,$7F55,$7F77,$7FBB,$7FDD,$10FC,$10FC,$10FC,$10FC,$10FC,$10FC,$10FC,$10FC

DATA_3CAB40:
	dw $7F54,$0423,$0002,$0902,$0D43,$1187,$15AA,$11BF,$00A0,$00C0,$00E0,$11BF,$04E1,$11BF,$11BF,$11BF
	dw $7F54,$7FFF,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0D0B,$3634,$73FF,$0405,$1008,$28F1

DATA_3CAB80:
	dw $7F54,$7FFF,$14A4,$0864,$10A6,$14CA,$1D0E,$2152,$2997,$1CEB,$294E,$35B1,$4639,$017F,$017F,$017F
	dw $7F54,$14CA,$14A4,$0864,$10A6,$18E8,$212A,$2970,$31B2,$1CE7,$294A,$35AD,$4639,$1D0E,$2152,$2997

DATA_3CABC0:
	dw $7F54,$7FFF,$0000,$0004,$0007,$000A,$000E,$0842,$0C83,$10C4,$1505,$0084,$00C6,$00E8,$7DBB,$7DBB
	dw $7F54,$294A,$0862,$0085,$00C7,$00E9,$0004,$0006,$0008,$0080,$00C0,$0100,$1084,$14A5,$1CE7,$2108

;--------------------------------------------------------------------

; Note: BG layer palettes used during the ending.

DATA_3CAC00:
	incbin "Palettes/Ending/World1Screen.tpl":4-104

DATA_3CAD00:
	incbin "Palettes/Ending/World2Screen.tpl":4-104

DATA_3CAE00:
	incbin "Palettes/Ending/World3Screen.tpl":4-104

DATA_3CAF00:
	incbin "Palettes/Ending/World4Screen.tpl":4-104

DATA_3CB000:
	incbin "Palettes/Ending/World5Screen.tpl":4-104

DATA_3CB100:
	incbin "Palettes/Ending/World6Screen.tpl":4-104

DATA_3CB200:
	incbin "Palettes/Ending/World7Screen.tpl":4-104

DATA_3CB300:
	incbin "Palettes/Ending/World8Screen.tpl":4-104
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################
;#############################################################################################################
;#############################################################################################################
;#############################################################################################################
;#############################################################################################################
;#############################################################################################################
;#############################################################################################################
;#############################################################################################################
;#############################################################################################################
;#############################################################################################################
;#############################################################################################################
;#############################################################################################################
;#############################################################################################################
;#############################################################################################################
;#############################################################################################################
;#############################################################################################################
;#############################################################################################################

macro DATATABLE_CUSTOM_SMB3_PauseMenuGFX(Address)
namespace SMB3_PauseMenuGFX
%InsertMacroAtXPosition(<Address>)

Main:
	incbin "../SMAS/Graphics/PauseMenuGFX.bin"
End:
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_CUSTOM_RT00_SMB3_UploadMainSampleData(Address)
namespace SMB3_UploadMainSampleData
%InsertMacroAtXPosition(<Address>)

Main:
	SEI
	STZ.w !REGISTER_IRQNMIAndJoypadEnableFlags
	STZ.w !REGISTER_HDMAEnable
	STZ.w !REGISTER_DMAEnable
	STZ.w !REGISTER_APUPort0
	LDA.b #$FF
	STA.w !REGISTER_APUPort1
	STZ.w !REGISTER_APUPort2
	STZ.w !REGISTER_APUPort3
	LDA.b #SampleData
	STA.b !RAM_SMB3_Global_ScratchRAM00
	LDA.b #SampleData>>8
	STA.b !RAM_SMB3_Global_ScratchRAM01
	LDA.b #SampleData>>16
	STA.b !RAM_SMB3_Global_ScratchRAM02
	JSR.w SMB3_HandleSPCUploads_Main
	RTL
namespace off
endmacro

macro ROUTINE_CUSTOM_RT01_SMB3_UploadMainSampleData(Address)
namespace SMB3_UploadMainSampleData
%InsertMacroAtXPosition(<Address>)

SampleData:
	incbin "../SMAS/SPC700/MainSamples.bin"
SampleDataEnd:
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_CUSTOM_RT00_SMB3_UploadSPCEngine(Address)
namespace SMB3_UploadSPCEngine
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.b #SPCEngine
	STA.b !RAM_SMB3_Global_ScratchRAM00
	LDA.b #SPCEngine>>8
	STA.b !RAM_SMB3_Global_ScratchRAM01
	LDA.b #SPCEngine>>16
	STA.b !RAM_SMB3_Global_ScratchRAM02
	JSR.w SMB3_HandleSPCUploads_Main
	RTL
namespace off
endmacro

macro ROUTINE_CUSTOM_RT01_SMB3_UploadSPCEngine(Address)
namespace SMB3_UploadSPCEngine
%InsertMacroAtXPosition(<Address>)

SPCEngine:
	incbin "../SMAS/SPC700/Engine.bin"
namespace off
endmacro


;#############################################################################################################
;#############################################################################################################

macro ROUTINE_CUSTOM_SMB3_DMADataBlockToRAM(Address)
namespace SMB3_DMADataBlockToRAM
%InsertMacroAtXPosition(<Address>)

Main:
	STA.w !REGISTER_WRAMAddressLo
	STY.w !REGISTER_WRAMAddressBank
	LDA.w #(!REGISTER_ReadOrWriteToWRAMPort&$0000FF<<8)+$00
	STA.w DMA[$00].Parameters
	LDA.b !RAM_SMB3_Global_ScratchRAM02
	STA.w DMA[$00].SourceLo
	LDY.b !RAM_SMB3_Global_ScratchRAM04
	STY.w DMA[$00].SourceBank
	LDA.b !RAM_SMB3_Global_ScratchRAM00
	STA.w DMA[$00].SizeLo
	LDY.b #$01
	STY.w !REGISTER_DMAEnable
	RTL
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro DATATABLE_CUSTOM_SMB3_SplashScreenGFX(Address)
namespace SMB3_SplashScreenGFX
%InsertMacroAtXPosition(<Address>)

Main:
	incbin "../SMAS/Graphics/SplashScreenGFX.bin"
End:
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_CUSTOM_SMB3_HandleSPCUploads(Address)
namespace SMB3_HandleSPCUploads
%InsertMacroAtXPosition(<Address>)

Main:
	PHP
	REP.b #$30
	LDY.w #$0000
	LDA.w #$BBAA
CODE_008C06:
	CMP.w !REGISTER_APUPort0
	BNE.b CODE_008C06
	SEP.b #$20
	LDA.b #$CC
	BRA.b CODE_008C37

CODE_008C11:
	LDA.b [!RAM_SMB3_Global_ScratchRAM00],y
	INY
	XBA
	LDA.b #$00
	BRA.b CODE_008C24

CODE_008C19:
	XBA
	LDA.b [!RAM_SMB3_Global_ScratchRAM00],y
	INY
	XBA
CODE_008C1E:
	CMP.w !REGISTER_APUPort0
	BNE.b CODE_008C1E
	INC
CODE_008C24:
	REP.b #$20
	STA.w !REGISTER_APUPort0
	SEP.b #$20
	DEX
	BNE.b CODE_008C19
CODE_008C2E:
	CMP.w !REGISTER_APUPort0
	BNE.b CODE_008C2E
CODE_008C33:
	ADC.b #$03
	BEQ.b CODE_008C33
CODE_008C37:
	PHA
	REP.b #$20
	LDA.b [!RAM_SMB3_Global_ScratchRAM00],y
	INY
	INY
	TAX
	LDA.b [!RAM_SMB3_Global_ScratchRAM00],y
	INY
	INY
	STA.w !REGISTER_APUPort2
	SEP.b #$20
	CPX.w #$0001
	LDA.b #$00
	ROL
	STA.w !REGISTER_APUPort1
	ADC.b #$7F
	PLA
	STA.w !REGISTER_APUPort0
CODE_008C57:
	CMP.w !REGISTER_APUPort0
	BNE.b CODE_008C57
	BVS.b CODE_008C11
	STZ.w !REGISTER_APUPort0
	STZ.w !REGISTER_APUPort1
	STZ.w !REGISTER_APUPort2
	STZ.w !REGISTER_APUPort3
	PLP
	RTS
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_CUSTOM_SMB3_ResetGame(Address)
namespace SMB3_ResetGame
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.b #!ScreenDisplayRegister_SetForceBlank|!ScreenDisplayRegister_MinBrightness00
	STA.w !REGISTER_ScreenDisplayRegister
	STZ.w !REGISTER_HDMAEnable
	STZ.w !RAM_SMB3_Global_HDMAEnableMirror
	STZ.w !REGISTER_IRQNMIAndJoypadEnableFlags
	LDA.b #SMB3_InitAndMainLoop_Main>>16
	PHA
	PLB
	SEI
	STZ.w !REGISTER_IRQNMIAndJoypadEnableFlags
	STZ.w !REGISTER_HDMAEnable
	REP.b #$20
	LDA.w #!RAM_SMB3_Global_StartOfStack
	TCS
	SEP.b #$20
	STZ.w !RAM_SMB3_Global_SoundCh1
	STZ.w !RAM_SMB3_Global_SoundCh2
	STZ.w !RAM_SMB3_Global_MusicCh1
	STZ.w !RAM_SMB3_Global_SoundCh3
	STZ.w !REGISTER_APUPort0
	STZ.w !REGISTER_APUPort1
	STZ.w !REGISTER_APUPort2
	STZ.w !REGISTER_APUPort3
	LDA.b #$F0
	STA.w !REGISTER_APUPort1
	JML.l SMB3_InitAndMainLoop_Main
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_CUSTOM_SMB3_DisplayRegionErrorMessage(Address)
namespace SMB3_DisplayRegionErrorMessage
%InsertMacroAtXPosition(<Address>)

table "Tables/Fonts/ErrorScreen.txt"

RegionErrorText:
.Line1:
	dw " THIS GAME PAK IS NOT   "

.Line2:
	dw "DESIGINED FOR YOUR SUPER"

.Line3:
	dw "FAMICOM OR SUPER NES.   "

.Line4:
	dw "   NINTENDO CO.,LTD.    "

cleartable

Main:
	JSL.l SMB3_InitializeRAMOnStartup_Main
	SEP.b #$20
	PHD
	STZ.w !REGISTER_CGRAMAddress
	REP.b #$20
	LDA.w #$3B3B
	STA.b !RAM_SMB3_Global_ScratchRAM02
	LDA.w #!RAM_SMB3_ErrorScreen_TextTilemap
	STA.b !RAM_SMB3_Global_ScratchRAM00
	LDY.b #!RAM_SMB3_ErrorScreen_TextTilemap>>16
	JSL.l SMB3_InitializeSelectedRAM_Entry2
	LDA.w #DMA[$00].Parameters
	TCD
	LDY.b #$80
	STY.w !REGISTER_VRAMAddressIncrementValue
	LDA.w #$7FFF
	STA.w SMB3_ErrorScreen_PaletteMirror[$0C].LowByte
	LDA.w #$7FF9
	STA.w SMB3_ErrorScreen_PaletteMirror[$0D].LowByte
	LDA.w #$7FD0
	STA.w SMB3_ErrorScreen_PaletteMirror[$0E].LowByte
	LDA.w #$6AE9
	STA.w SMB3_ErrorScreen_PaletteMirror[$0F].LowByte
	LDA.w #(!REGISTER_WriteToCGRAMPort&$0000FF<<8)+$00
	STA.b DMA[$00].Parameters
	LDA.w #!RAM_SMB3_ErrorScreen_PaletteMirror
	STA.b DMA[$00].SourceLo
	LDX.b #!RAM_SMB3_ErrorScreen_PaletteMirror>>16
	STX.b DMA[$00].SourceBank
	STA.b DMA[$00].SizeLo
	LDY.b #$01
	STY.w !REGISTER_DMAEnable
	LDA.w #(!REGISTER_WriteToVRAMPortLo&$0000FF<<8)+$01
	STA.b DMA[$00].Parameters
	LDA.w #$0000
	STA.w !REGISTER_VRAMAddressLo
	LDA.w #SMB3_ErrorMessageFontGFX_Main
	STA.b DMA[$00].SourceLo
	LDX.b #SMB3_ErrorMessageFontGFX_Main>>16
	STX.b DMA[$00].SourceBank
	LDA.w #SMB3_ErrorMessageFontGFX_End-SMB3_ErrorMessageFontGFX_Main
	STA.b DMA[$00].SizeLo
	STY.w !REGISTER_DMAEnable
	PHB
	LDX.b #RegionErrorText>>16
	PHX
	PLB
	LDX.b #$00
CODE_0093F9:
	LDA.w RegionErrorText_Line1,x
	STA.w SMB3_ErrorScreen_TextTilemap[$07].Row+$0A,x
	LDA.w RegionErrorText_Line2,x
	STA.w SMB3_ErrorScreen_TextTilemap[$09].Row+$0A,x
	LDA.w RegionErrorText_Line3,x
	STA.w SMB3_ErrorScreen_TextTilemap[$0B].Row+$0A,x
	LDA.w RegionErrorText_Line4,x
	STA.w SMB3_ErrorScreen_TextTilemap[$11].Row+$0A,x
	INX
	INX
	CPX.b #RegionErrorText_Line2-RegionErrorText_Line1
	BNE.b CODE_0093F9
CODE_009417:
	PLB
	LDA.w #$1000
	STA.w !REGISTER_VRAMAddressLo
	LDA.w #SMB3_OAMBuffer[$00].XDisp
	STA.b DMA[$00].SourceLo
	LDX.b #(SMB3_OAMBuffer[$00].XDisp>>16)&$00
	STX.b DMA[$00].SourceBank
	STA.b DMA[$00].SizeLo
	STY.w !REGISTER_DMAEnable
	SEP.b #$20
	PLD
	LDA.b #$10
	STA.w !REGISTER_BG1AddressAndSize
	STZ.w !REGISTER_BG1And2TileDataDesignation
	LDA.b #$01
	STA.w !REGISTER_MainScreenLayers
	STZ.w !REGISTER_SubScreenLayers
	LDA.b #$01
	STA.w !REGISTER_BGModeAndTileSizeSetting
	STZ.w !REGISTER_ColorMathInitialSettings
	STZ.w !REGISTER_ColorMathSelectAndEnable
	STZ.w !REGISTER_BG1HorizScrollOffset
	STZ.w !REGISTER_BG1HorizScrollOffset
	STZ.w !REGISTER_BG1VertScrollOffset
	STZ.w !REGISTER_BG1VertScrollOffset
	STZ.w !REGISTER_BG2HorizScrollOffset
	STZ.w !REGISTER_BG2HorizScrollOffset
	STZ.w !REGISTER_BG2VertScrollOffset
	STZ.w !REGISTER_BG2VertScrollOffset
	STZ.w !REGISTER_BG3HorizScrollOffset
	STZ.w !REGISTER_BG3HorizScrollOffset
	STZ.w !REGISTER_BG3VertScrollOffset
	STZ.w !REGISTER_BG3VertScrollOffset
	LDA.b #!ScreenDisplayRegister_MaxBrightness0F
	STA.w !REGISTER_ScreenDisplayRegister
CODE_009473:
	BIT.w !REGISTER_HVBlankFlagsAndJoypadStatus
	BPL.b CODE_009473
	INC.b !RAM_SMB3_Global_FrameCounter
	LDA.b !RAM_SMB3_Global_FrameCounter
	CMP.b #$18
	BNE.b CODE_0094BF
	STZ.b !RAM_SMB3_Global_FrameCounter
	STZ.w !REGISTER_CGRAMAddress
	REP.b #$20
	LDA.w #DMA[$00].Parameters
	TCD
	LDY.b #$80
	STY.w !REGISTER_VRAMAddressIncrementValue
	LDA.w SMB3_ErrorScreen_PaletteMirror[$0D].LowByte
	PHA
	LDA.w SMB3_ErrorScreen_PaletteMirror[$0E].LowByte
	STA.w SMB3_ErrorScreen_PaletteMirror[$0D].LowByte
	LDA.w SMB3_ErrorScreen_PaletteMirror[$0F].LowByte
	STA.w SMB3_ErrorScreen_PaletteMirror[$0E].LowByte
	PLA
	STA.w SMB3_ErrorScreen_PaletteMirror[$0F].LowByte
	LDA.w #(!REGISTER_WriteToCGRAMPort&$0000FF<<8)+$00
	STA.b DMA[$00].Parameters
	LDA.w #!RAM_SMB3_ErrorScreen_PaletteMirror
	STA.b DMA[$00].SourceLo
	LDX.b #!RAM_SMB3_ErrorScreen_PaletteMirror>>16
	STX.b DMA[$00].SourceBank
	STA.b DMA[$00].SizeLo
	LDY.b #$01
	STY.w !REGISTER_DMAEnable
	LDA.w #$0000
	TCD
	SEP.b #$20
CODE_0094BF:
	BIT.w !REGISTER_HVBlankFlagsAndJoypadStatus
	BMI.b CODE_0094BF
	JMP.w CODE_009473
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_CUSTOM_SMB3_DisplayCopyDetectionErrorMessage(Address)
namespace SMB3_DisplayCopyDetectionErrorMessage
%InsertMacroAtXPosition(<Address>)

table "Tables/Fonts/ErrorScreen.txt"

CopyDetectionText:
if !Define_Global_ROMToAssemble&(!ROM_SMB3_E) != $00
.Line1:
	dw "         WARNING          "

.Line2:
	dw "IT IS A SERIOUS CRIME TO  "

.Line3:
	dw "COPY VIDEO GAMES ACCORDING"

.Line4:
	dw "TO COPYRIGHT LAW.  PLEASE "

.Line5:
	dw "REFER TO YOUR NINTENDO    "

.Line6:
	dw "GAME INSTRUCTION BOOKLET  "

.Line7:
	dw "FOR FURTHER INFORMATION.  "

else
.Line1:
	dw "WARNING: IT IS A SERIOUS  "

.Line2:
	dw "CRIME TO COPY VIDEO GAMES."

.Line3:
	dw "18 USC 2319 PLEASE REFER  "

.Line4:
	dw "TO YOUR NINTENDO GAME     "

.Line5:
	dw "INSTRUCTION BOOKLET FOR   "

.Line6:
	dw "FURTHER INFORMATION.      "
endif

cleartable

Main:
	SEI
	STZ.w !REGISTER_IRQNMIAndJoypadEnableFlags
	STZ.w !REGISTER_HDMAEnable
	STZ.w !REGISTER_DMAEnable
	LDA.b #!ScreenDisplayRegister_SetForceBlank|!ScreenDisplayRegister_MinBrightness00
	STA.w !REGISTER_ScreenDisplayRegister
	STZ.w !REGISTER_APUPort0
	STZ.w !REGISTER_APUPort1
	STZ.w !REGISTER_APUPort3
	LDA.b #!Define_SMB3_LevelMusic_StopMusicCommand
	STA.w !REGISTER_APUPort2
	JSL.l SMB3_InitializeRAMOnStartup_Main
	SEP.b #$20
	PHD
	STZ.w !REGISTER_CGRAMAddress
	REP.b #$20
	LDA.w #$3B3B
	STA.b !RAM_SMB3_Global_ScratchRAM02
	LDA.w #!RAM_SMB3_ErrorScreen_TextTilemap
	STA.b !RAM_SMB3_Global_ScratchRAM00
	LDY.b #!RAM_SMB3_ErrorScreen_TextTilemap>>16
	JSL.l SMB3_InitializeSelectedRAM_Entry2
	LDA.w #DMA[$00].Parameters
	TCD
	LDY.b #$80
	STY.w !REGISTER_VRAMAddressIncrementValue
	LDA.w #$7FFF
	STA.w SMB3_ErrorScreen_PaletteMirror[$0C].LowByte
	LDA.w #$7FF9
	STA.w SMB3_ErrorScreen_PaletteMirror[$0D].LowByte
	LDA.w #$7FD0
	STA.w SMB3_ErrorScreen_PaletteMirror[$0E].LowByte
	LDA.w #$6AE9
	STA.w SMB3_ErrorScreen_PaletteMirror[$0F].LowByte
	LDA.w #(!REGISTER_WriteToCGRAMPort&$0000FF<<8)+$00
	STA.b DMA[$00].Parameters
	LDA.w #!RAM_SMB3_ErrorScreen_PaletteMirror
	STA.b DMA[$00].SourceLo
	LDX.b #!RAM_SMB3_ErrorScreen_PaletteMirror>>16
	STX.b DMA[$00].SourceBank
	STA.b DMA[$00].SizeLo
	LDY.b #$01
	STY.w !REGISTER_DMAEnable
	LDA.w #(!REGISTER_WriteToVRAMPortLo&$0000FF<<8)+$01
	STA.b DMA[$00].Parameters
	LDA.w #$0000
	STA.w !REGISTER_VRAMAddressLo
	LDA.w #SMB3_ErrorMessageFontGFX_Main
	STA.b DMA[$00].SourceLo
	LDX.b #SMB3_ErrorMessageFontGFX_Main>>16
	STX.b DMA[$00].SourceBank
	LDA.w #SMB3_ErrorMessageFontGFX_End-SMB3_ErrorMessageFontGFX_Main
	STA.b DMA[$00].SizeLo
	STY.w !REGISTER_DMAEnable
	PHB
	LDX.b #CopyDetectionText>>16
	PHX
	PLB
	LDX.b #$00
CODE_009690:
if !Define_Global_ROMToAssemble&(!ROM_SMB3_E) != $00
	LDA.w CopyDetectionText_Line1,x
	STA.w SMB3_ErrorScreen_TextTilemap[$07].Row+$06,x
	LDA.w CopyDetectionText_Line2,x
	STA.w SMB3_ErrorScreen_TextTilemap[$09].Row+$06,x
	LDA.w CopyDetectionText_Line3,x
	STA.w SMB3_ErrorScreen_TextTilemap[$0B].Row+$06,x
	LDA.w CopyDetectionText_Line4,x
	STA.w SMB3_ErrorScreen_TextTilemap[$0D].Row+$06,x
	LDA.w CopyDetectionText_Line5,x
	STA.w SMB3_ErrorScreen_TextTilemap[$0F].Row+$06,x
	LDA.w CopyDetectionText_Line6,x
	STA.w SMB3_ErrorScreen_TextTilemap[$11].Row+$06,x
	LDA.w CopyDetectionText_Line7,x
	STA.w SMB3_ErrorScreen_TextTilemap[$13].Row+$06,x
else
	LDA.w CopyDetectionText_Line1,x
	STA.w SMB3_ErrorScreen_TextTilemap[$07].Row+$06,x
	LDA.w CopyDetectionText_Line2,x
	STA.w SMB3_ErrorScreen_TextTilemap[$09].Row+$06,x
	LDA.w CopyDetectionText_Line3,x
	STA.w SMB3_ErrorScreen_TextTilemap[$0D].Row+$06,x
	LDA.w CopyDetectionText_Line4,x
	STA.w SMB3_ErrorScreen_TextTilemap[$0F].Row+$06,x
	LDA.w CopyDetectionText_Line5,x
	STA.w SMB3_ErrorScreen_TextTilemap[$11].Row+$06,x
	LDA.w CopyDetectionText_Line6,x
	STA.w SMB3_ErrorScreen_TextTilemap[$13].Row+$06,x
endif
	INX
	INX
	CPX.b #CopyDetectionText_Line2-CopyDetectionText_Line1
	BNE CODE_009690
	JMP.w SMB3_DisplayRegionErrorMessage_CODE_009417
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_CUSTOM_SMB3_ErrorMessageFontGFX(Address)
namespace SMB3_ErrorMessageFontGFX
%InsertMacroAtXPosition(<Address>)

Main:
if !Define_Global_ROMToAssemble&(!ROM_SMB3_J) != $00
	incbin "../SMAS/Graphics/ErrorMessageFontGFX_SMAS_J.bin"
else
	incbin "../SMAS/Graphics/ErrorMessageFontGFX_SMAS_U.bin"
endif
End:
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_CUSTOM_SMB3_InitializeSelectedRAM(Address)
namespace SMB3_InitializeSelectedRAM
%InsertMacroAtXPosition(<Address>)

Main:
	STZ.b !RAM_SMB3_Global_ScratchRAM02
Entry2:
	STA.w DMA[$00].SourceLo
	STY.w DMA[$00].SourceBank
	LDA.w #(!REGISTER_PPUMultiplicationProductLo&$0000FF<<8)+$80
	STA.w DMA[$00].Parameters
	LDA.b !RAM_SMB3_Global_ScratchRAM00
	STA.w DMA[$00].SizeLo
	LDY.b #$01
	STY.w !REGISTER_Mode7MatrixParameterA
	DEY
	STY.w !REGISTER_Mode7MatrixParameterA
	LDY.b !RAM_SMB3_Global_ScratchRAM02
	STY.w !REGISTER_Mode7MatrixParameterB
	LDY.b #$01
	STY.w !REGISTER_DMAEnable
	RTL
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_CUSTOM_SMB3_InitializeRAMOnStartup(Address)
namespace SMB3_InitializeRAMOnStartup
%InsertMacroAtXPosition(<Address>)

Main:
	REP.b #$20
	LDA.w #!RAM_SMB3_Global_StartOfStack-$AF
	STA.b !RAM_SMB3_Global_ScratchRAM00
	LDA.w #$000000
	TAY
	JSL.l SMB3_InitializeSelectedRAM_Main
	LDA.w #$002000-(!RAM_SMB3_Global_StartOfStack+$01)
	STA.b !RAM_SMB3_Global_ScratchRAM00
	LDA.w #!RAM_SMB3_Global_StartOfStack+$01
	TAY
	JSL.l SMB3_InitializeSelectedRAM_Main
	LDA.w #$E000
	STA.b !RAM_SMB3_Global_ScratchRAM00
	LDA.w #$7E2000
	LDY.b #$7E2000>>16
	JSL.l SMB3_InitializeSelectedRAM_Main
	LDA.w #$0000
	STA.b !RAM_SMB3_Global_ScratchRAM00
	LDA.w #$7F0000
	LDY.b #$7F0000>>16
	JSL.l SMB3_InitializeSelectedRAM_Main
	LDA.w #$0000
	STA.l !RAM_SMB3_Global_StripeImageUploadIndexLo
	DEC
	STA.l SMB3_StripeImageUploadTable[$00].LowByte
	SEP.b #$20
	STA.l !RAM_SMB3_Global_DisplayTitleScreenMenuOptionsIndex
	LDA.b #$00
	STA.l !SRAM_SMAS_Global_UnusedRAM701FF8
	STA.l !SRAM_SMAS_Global_UnusedRAM701FF9
	STA.l !SRAM_SMAS_Global_InitialSelectedWorld
	REP.b #$20
	PHD
	LDA.w #!REGISTER_ScreenDisplayRegister
	TCD
	SEP.b #$30
	LDA.b #$09
	STA.b !REGISTER_BGModeAndTileSizeSetting
	STA.w !RAM_SMB3_Global_BGModeAndTileSizeSettingMirror
	STZ.b !REGISTER_MosaicSizeAndBGEnable
	STZ.b !REGISTER_BG1And2WindowMaskSettings
	STZ.b !REGISTER_BG3And4WindowMaskSettings
	STZ.b !REGISTER_MainScreenWindowMask
	STZ.b !REGISTER_SubScreenWindowMask
	LDA.b #$03
	STA.b !REGISTER_BG1AddressAndSize
	LDA.b #$13
	STA.b !REGISTER_BG2AddressAndSize
	LDA.b #$51
	STA.b !REGISTER_BG3AddressAndSize
	STZ.b !REGISTER_BG4AddressAndSize
	LDA.b #$22
	STA.b !REGISTER_BG1And2TileDataDesignation
	LDA.b #$05
	STA.b !REGISTER_BG3And4TileDataDesignation
	LDA.b #$15
	STA.b !REGISTER_MainScreenLayers
	STA.w !RAM_SMB3_Global_MainScreenLayersMirror
	LDA.b #$02
	STA.b !REGISTER_SubScreenLayers
	STA.w !RAM_SMB3_Global_SubScreenLayersMirror
	LDA.b #$00
	STA.b !REGISTER_ColorMathInitialSettings
	STA.b !REGISTER_ObjectAndColorWindowSettings
	STA.b !REGISTER_ColorMathSelectAndEnable
	LDA.b #$20
	STA.b !REGISTER_FixedColorData
	ASL
	STA.b !REGISTER_FixedColorData
	ASL
	STA.b !REGISTER_FixedColorData
if !Define_Global_ROMToAssemble&(!ROM_SMB3_E) != $00
	LDA.b #$04
	STA.b !REGISTER_InitialScreenSettings
else
	STZ.b !REGISTER_InitialScreenSettings
endif
	PLD
	RTL
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_CUSTOM_SMB3_CheckWhichControllersArePluggedIn(Address)
namespace SMB3_CheckWhichControllersArePluggedIn
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.w !REGISTER_JoypadSerialPort1
	AND.b #$01
	EOR.b #$01
	ASL
	STA.l !SRAM_SMAS_Global_Controller1PluggedInFlag
	LDA.w !REGISTER_JoypadSerialPort2
	AND.b #$01
	ASL
	STA.l !SRAM_SMAS_Global_Controller2PluggedInFlag
	RTL
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro DATATABLE_CUSTOM_SMB3_CircleHDMAData(Address)
namespace SMB3_CircleHDMAData
%InsertMacroAtXPosition(<Address>)

DATA_0096BD:
	db $FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF
	db $FF,$FF,$FF,$FF,$FE,$FE,$FE,$FE
	db $FD,$FD,$FD,$FD,$FC,$FC,$FC,$FB
	db $FB,$FB,$FA,$FA,$F9,$F9,$F8,$F8
	db $F7,$F7,$F6,$F6,$F5,$F5,$F4,$F3
	db $F3,$F2,$F1,$F1,$F0,$EF,$EE,$EE
	db $ED,$EC,$EB,$EA,$E9,$E9,$E8,$E7
	db $E6,$E5,$E4,$E3,$E2,$E1,$DF,$DE
	db $DD,$DC,$DB,$DA,$D8,$D7,$D6,$D5
	db $D3,$D2,$D0,$CF,$CD,$CC,$CA,$C9
	db $C7,$C6,$C4,$C2,$C1,$BF,$BD,$BB
	db $B9,$B7,$B6,$B4,$B1,$AF,$AD,$AB
	db $A9,$A7,$A4,$A2,$9F,$9D,$9A,$97
	db $95,$92,$8F,$8C,$89,$86,$82,$7F
	db $7B,$78,$74,$70,$6C,$67,$63,$5E
	db $59,$53,$4D,$46,$3F,$37,$2D,$1F
	db $00

DATA_00973E:
	dw $FFFF,$FFFF,$8000,$5555
	dw $4000,$3333,$2AAA,$2492
	dw $2000,$1C71,$1999,$1745
	dw $1555,$13B1,$1249,$1111
	dw $1000,$0F0F,$0E38,$0D79
	dw $0CCC,$0C30,$0BA2,$0B21
	dw $0AAA,$0A3D,$09D8,$097B
	dw $0924,$08D3,$0888,$0842
	dw $0800,$07C1,$0787,$0750
	dw $071C,$06EB,$06BC,$0690
	dw $0666,$063E,$0618,$05F4
	dw $05D1,$05B0,$0590,$0572
	dw $0555,$0539,$051E,$0505
	dw $04EC,$04D4,$04BD,$04A7
	dw $0492,$047D,$0469,$0456
	dw $0444,$0432,$0421,$0410
	dw $0400,$03F0,$03E0,$03D2
	dw $03C3,$03B5,$03A8,$039B
	dw $038E,$0381,$0375,$0369
	dw $035E,$0353,$0348,$033D
	dw $0333,$0329,$031F,$0315
	dw $030C,$0303,$02FA,$02F1
	dw $02E8,$02E0,$02D8,$02D0
	dw $02C8,$02C0,$02B9,$02B1
	dw $02AA,$02A3,$029C,$0295
	dw $028F,$0288,$0282,$027C
	dw $0276,$0270,$026A,$0264
	dw $025E,$0259,$0253,$024E
	dw $0249,$0243,$023E,$0239
	dw $0234,$0230,$022B,$0226
	dw $0222,$021D,$0219,$0214
	dw $0210,$020C,$0208,$0204
	dw $0200,$01FC,$01F8,$01F4
	dw $01F0,$01EC,$01E9,$01E5
	dw $01E1,$01DE,$01DA,$01D7
	dw $01D4,$01D0,$01CD,$01CA
	dw $01C7,$01C3,$01C0,$01BD
	dw $01BA,$01B7,$01B4,$01B2
	dw $01AF,$01AC,$01A9,$01A6
	dw $01A4,$01A1,$019E,$019C
	dw $0199,$0197,$0194,$0192
	dw $018F,$018D,$018A,$0188
	dw $0186,$0183,$0181,$017F
	dw $017D,$017A,$0178,$0176
	dw $0174,$0172,$0170,$016E
	dw $016C,$016A,$0168,$0166
	dw $0164,$0162,$0160,$015E
	dw $015C,$015A,$0158,$0157
	dw $0155,$0153,$0151,$0150
	dw $014E,$014C,$014A,$0149
	dw $0147,$0146,$0144,$0142
	dw $0141,$013F,$013E,$013C
	dw $013B,$0139,$0138,$0136
	dw $0135,$0133,$0132,$0130
	dw $012F,$012E,$012C,$012B
	dw $0129,$0128,$0127,$0125
	dw $0124,$0123,$0121,$0120
	dw $011F,$011E,$011C,$011B
	dw $011A,$0119,$0118,$0116
	dw $0115,$0114,$0113,$0112
	dw $0111,$010F,$010E,$010D
	dw $010C,$010B,$010A,$0109
	dw $0108,$0107,$0106,$0105
	dw $0104,$0103,$0102,$0101
	dw $0100
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_CUSTOM_SMB3_LoadSplashScreen(Address)
namespace SMB3_LoadSplashScreen
%InsertMacroAtXPosition(<Address>)

Main:
	PHB
	PHK
	PLB
	REP.b #$20
	LDY.b #$80
	STY.w !REGISTER_VRAMAddressIncrementValue
	LDA.w #(!REGISTER_WriteToVRAMPortLo&$0000FF<<8)+$01
	STA.w DMA[$00].Parameters
	LDA.w #$0000
	STA.w !REGISTER_VRAMAddressLo
	LDA.w #SMB3_SplashScreenGFX_Main
	STA.w DMA[$00].SourceLo
	LDX.b #SMB3_SplashScreenGFX_Main>>16
	STX.w DMA[$00].SourceBank
	LDA.w #SMB3_SplashScreenGFX_End-SMB3_SplashScreenGFX_Main
	STA.w DMA[$00].SizeLo
	LDY.b #$01
	STY.w !REGISTER_DMAEnable
	LDX.b #$1E
-:
	LDA.w SplashScreenPalette,x
	STA.w SMB3_PaletteMirror[$F0].LowByte,x
	DEX
	DEX
	BPL.b -
	SEP.b #$20
	LDA.b #$20
	STA.w !RAM_SMB3_Global_FixedColorData1Mirror
	ASL
	STA.w !RAM_SMB3_Global_FixedColorData2Mirror
	ASL
	STA.w !RAM_SMB3_Global_FixedColorData3Mirror
	LDA.b #$10
	STA.w !REGISTER_MainScreenLayers
	STA.w !RAM_SMB3_Global_MainScreenLayersMirror
	LDA.b #$00
	STA.w !RAM_SMB3_Global_OAMSizeAndDataAreaDesignationMirror
	STA.w !REGISTER_OAMSizeAndDataAreaDesignation
	STA.b !RAM_SMB3_Global_ScreenDisplayRegisterMirror
	STA.w !REGISTER_ScreenDisplayRegister
	STA.b !RAM_SMB3_SplashScreen_DisplayMarioCoinShineFlag
	STA.b !RAM_SMB3_SplashScreen_PaletteAnimationIndex
	INC.w !RAM_SMB3_Global_UpdateEntirePaletteFlag
	STZ.b $28
	LDA.b #$81
	STA.b !RAM_SMB3_SplashScreen_DisplayTimer
	STA.w !REGISTER_IRQNMIAndJoypadEnableFlags
-:
	JSR.w FadeIn
	LDA.b !RAM_SMB3_Global_ScreenDisplayRegisterMirror
	CMP.b #$0F
	BNE.b -
Loop:
	LDA.b !RAM_SMB3_SplashScreen_DisplayTimer
	CMP.b #$61
	BNE.b CODE_009A9B
	LDA.b #!Define_SMAS_Sound0063_Coin
	STA.w !RAM_SMB3_Global_SoundCh3
	STA.b !RAM_SMB3_SplashScreen_DisplayMarioCoinShineFlag
	LDA.b #$02
	STA.b !RAM_SMB3_SplashScreen_PaletteAnimationTimer
	STZ.b !RAM_SMB3_SplashScreen_PaletteAnimationIndex
CODE_009A9B:
	JSR.w SMB3_SplashScreenGFXRt_Main
	LDA.b !RAM_SMB3_SplashScreen_DisplayMarioCoinShineFlag
	BEQ.b CODE_009AA5
	JSR.w SMB3_HandleSplashScreenMarioCoinShine_Main
CODE_009AA5:
	JSL.l CODE_20804D
	DEC.b !RAM_SMB3_SplashScreen_DisplayTimer
	BNE.b Loop
-:
	JSR.w FadeOut
	LDA.b !RAM_SMB3_Global_ScreenDisplayRegisterMirror
	BNE.b -
	LDA.b #$80
	STA.b !RAM_SMB3_Global_ScreenDisplayRegisterMirror
	STZ.w !REGISTER_IRQNMIAndJoypadEnableFlags
	PLB
	RTL

FadeIn:
	INC.b !RAM_SMB3_Global_ScreenDisplayRegisterMirror
	BRA.b +

FadeOut:
	DEC.b !RAM_SMB3_Global_ScreenDisplayRegisterMirror
+:
	STZ.b !RAM_SMB3_SplashScreen_PaletteAnimationTimer
	JSR.w SMB3_SplashScreenGFXRt_Main
	JSL.l CODE_20804D
	RTS

SplashScreenPalette:
	dw $0000,$7FFF,$0048,$012F,$0192,$01F5,$0A59,$171C,$2BBC,$00CC,$0A59,$171C,$2BBC,$53FF,$171C,$0A59
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_CUSTOM_SMB3_SplashScreenGFXRt(Address)
namespace SMB3_SplashScreenGFXRt
%InsertMacroAtXPosition(<Address>)

Tiles:
	db $00,$02,$04,$06,$20,$22,$24,$26
	db $08,$0A,$0C,$0E,$28,$2A,$2C,$2E
	db $40,$42,$44,$46

Main:
	LDY.b #$00
	TYX
CODE_009E31:
	LDA.b #$50
	STA.b !RAM_SMB3_Global_ScratchRAM00
CODE_009E35:
	LDA.b #$60
	STA.b !RAM_SMB3_Global_ScratchRAM01
CODE_009E39:
	LDA.b !RAM_SMB3_Global_ScratchRAM01
	STA.w SMB3_OAMBuffer[$00].XDisp,y
	LDA.b !RAM_SMB3_Global_ScratchRAM00
	STA.w SMB3_OAMBuffer[$00].YDisp,y
	LDA.w Tiles,x
	STA.w SMB3_OAMBuffer[$00].Tile,y
	INX
	LDA.b #$2E
	STA.w SMB3_OAMBuffer[$00].Prop,y
	PHY
	TYA
	LSR
	LSR
	TAY
	LDA.b #$02
	STA.w SMB3_OAMTileSizeBuffer[$00].Slot,y
	PLY
	INY
	INY
	INY
	INY
	LDA.b !RAM_SMB3_Global_ScratchRAM01
	CLC
	ADC.b #$10
	STA.b !RAM_SMB3_Global_ScratchRAM01
	CMP.b #$A0
	BCC.b CODE_009E39
	LDA.b !RAM_SMB3_Global_ScratchRAM00
	CLC
	ADC.b #$10
	STA.b !RAM_SMB3_Global_ScratchRAM00
	CMP.b #$A0
	BCC.b CODE_009E35
	RTS
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_CUSTOM_SMB3_HandleSplashScreenMarioCoinShine(Address)
namespace SMB3_HandleSplashScreenMarioCoinShine
%InsertMacroAtXPosition(<Address>)

DATA_009E75:
	dw $7FFF,$2BBC,$43FF,$171C
	dw $7FFF,$2BBC,$171C,$2BBC
	dw $7FFF,$0A59,$171C,$2BBC

DATA_009E8D:
	dw $53FF,$171C,$0A59,$53FF
	dw $171C,$0A59,$53FF,$7FFF
	dw $2BBC,$53FF,$171C,$0A59

Main:
	LDA.b !RAM_SMB3_SplashScreen_PaletteAnimationIndex
	ASL
	STA.b !RAM_SMB3_Global_ScratchRAM00
	ASL
	CLC
	ADC.b !RAM_SMB3_Global_ScratchRAM00
	TAY
	LDX.b #$00
CODE_009EB1:
	LDA.w DATA_009E75,y
	STA.l SMB3_PaletteMirror[$F6].LowByte,x
	LDA.w DATA_009E8D,y
	STA.l SMB3_PaletteMirror[$FD].LowByte,x
	INY
	INX
	CPX.b #$06
	BCC.b CODE_009EB1
	INC.w !RAM_SMB3_Global_UpdateEntirePaletteFlag
	DEC.b !RAM_SMB3_SplashScreen_PaletteAnimationTimer
	BNE.b CODE_009EE0
	INC.b !RAM_SMB3_SplashScreen_PaletteAnimationIndex
	LDX.b !RAM_SMB3_SplashScreen_PaletteAnimationIndex
	CPX.b #$04
	BCC.b CODE_009EDC
	STZ.b !RAM_SMB3_SplashScreen_PaletteAnimationIndex
	STZ.b !RAM_SMB3_SplashScreen_PaletteAnimationTimer
	STZ.b !RAM_SMB3_SplashScreen_DisplayMarioCoinShineFlag
	BRA.b CODE_009EE0

CODE_009EDC:
	LDA.b #$02
	STA.b !RAM_SMB3_SplashScreen_PaletteAnimationTimer
CODE_009EE0:
	RTS
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_CUSTOM_SMB3_LoadFileSelectMenu(Address)
namespace SMB3_LoadFileSelectMenu
%InsertMacroAtXPosition(<Address>)

Main:
	STZ.b !RAM_SMB3_Global_ScratchRAM05
	JSR.w Sub
	LDA.b !RAM_SMB3_TitleScreen_FileAMaxWorld
	STA.b !RAM_SMB3_TitleScreen_FileASelectedWorld
	LDA.b !RAM_SMB3_TitleScreen_FileBMaxWorld
	STA.b !RAM_SMB3_TitleScreen_FileBSelectedWorld
	LDA.b !RAM_SMB3_TitleScreen_FileCMaxWorld
	STA.b !RAM_SMB3_TitleScreen_FileCSelectedWorld
	RTL

Entry2:
	LDA.b #$01
	STA.b !RAM_SMB3_Global_ScratchRAM05
	JSR.w Sub
	RTL

Sub:
	PHB
	PHK
	PLB
	LDX.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	LDY.b #$00
--:
	STY.b !RAM_SMB3_Global_ScratchRAM02
	REP.b #$20
	LDA.w FileSelectTextPtrs,y
	JSR.w BufferStripeImage
	LDY.b !RAM_SMB3_Global_ScratchRAM02
	REP.b #$30
	PHX
	LDX.w SMB3_SaveFileLocations_Main,y
	LDA.l !SRAM_SMAS_Global_SaveFileBaseOffset,x
	STA.b !RAM_SMB3_Global_ScratchRAM03
	PLX
	CMP.w #$FFFF
	BEQ.b .NewFile
	LDA.w #FileSelectText_World
	BRA.b .UsedFile

.NewFile:
	LDA.w #FileSelectText_New
.UsedFile:
	SEP.b #$10
	JSR.w BufferStripeImage
	LDA.b !RAM_SMB3_Global_ScratchRAM02
	LSR
	TAY
	LDA.b !RAM_SMB3_Global_ScratchRAM03
	BMI.b +
	LDA.b !RAM_SMB3_Global_ScratchRAM05
	BEQ.b ++
	LDA.w !RAM_SMB3_TitleScreen_FileASelectedWorld,y
	BRA.b +++	

++:
	LDA.b !RAM_SMB3_Global_ScratchRAM03
	STA.w !RAM_SMB3_TitleScreen_FileAMaxWorld,y
+++:
	ASL
	TAY
	LDA.w WorldNumberTiles,y
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,x
	LDA.w WorldNumberTiles+$01,y
	STA.w SMB3_StripeImageUploadTable[$00].HighByte,x
	INX
	INX
	BRA.b ++
+:
	LDA.b #$00
	STA.w !RAM_SMB3_TitleScreen_FileAMaxWorld,y
++:
	LDY.b !RAM_SMB3_Global_ScratchRAM02
	INY
	INY
	CPY.b #$06
	BEQ.b +
	JMP.w --

+:
	REP.b #$20
	LDA.w #FileSelectText_Erase
	LDY.b !RAM_SMB3_TitleScreen_EraseFileProcess
	BEQ.b +
	LDA.w #FileSelectText_End
+:
	JSR.w BufferStripeImage
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,x
	TXA
	CLC
	ADC.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	STA.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	PLB
	RTS

FileSelectTextPtrs:
	dw FileSelectText_FileA
	dw FileSelectText_FileB
	dw FileSelectText_FileC
	dw FileSelectText_Erase

WorldNumberTiles:
	db $0E,$1C
	db $1E,$1C
	db $09,$1C
	db $21,$1D
	db $22,$1D
	db $23,$1D
	db $24,$1D
	db $1F,$1C
	db $26,$1D

FileSelectText:
.FileA:
	db $02,$4A,$00,$1B
	db $27,$1D,$28,$1D,$0B,$1C,$1B,$1C,$5C,$1C,$0C,$1C,$5C,$1C,$FF

.FileB:
	db $02,$8A,$00,$1B
	db $27,$1D,$28,$1D,$0B,$1C,$1B,$1C,$5C,$1C,$08,$1C,$5C,$1C,$FF

.FileC:
	db $02,$CA,$00,$1B
	db $27,$1D,$28,$1D,$0B,$1C,$1B,$1C,$5C,$1C,$2C,$1D,$5C,$1C,$FF

.New:
	db $5C,$1C,$2D,$1D,$1B,$1C,$29,$1D,$5C,$1C,$5C,$1C,$5C,$1C,$FF

.World:
	db $5C,$1C,$29,$5D,$25,$1D,$2B,$1D,$2E,$1D,$5C,$1C,$FF

.Erase:
	db $03,$0A,$00,$13
	db $1B,$1C,$0D,$1C,$0C,$1C,$2F,$1D,$1B,$1C,$5C,$1C,$28,$1C,$0C,$1C
	db $19,$1C,$0C,$1C,$FF

.End:
	db $03,$0A,$00,$13
	db $1B,$1C,$2D,$1D,$28,$1C,$5C,$1C,$5C,$1C,$5C,$1C,$5C,$1C,$5C,$1C
	db $5C,$1C,$5C,$1C,$FF

BufferStripeImage:
	STA.b !RAM_SMB3_Global_ScratchRAM00
	SEP.b #$20
	LDY.b #$00
-:
	LDA.b (!RAM_SMB3_Global_ScratchRAM00),y
	CMP.b #$FF
	BEQ.b +
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,x
	INX
	INY
	BRA.b -

+:
	RTS
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_CUSTOM_SMB3_LoadPlayerSelectMenu(Address)
namespace SMB3_LoadPlayerSelectMenu
%InsertMacroAtXPosition(<Address>)

Main:
	STZ.b !RAM_SMB3_Global_ScratchRAM05
	JSR.w Sub
	RTL

Entry2:
	LDA.b #$01
	STA.b !RAM_SMB3_Global_ScratchRAM05
	JSR.w Sub
	RTL

Sub:
	PHB
	PHK
	PLB
	LDA.l !RAM_SMB3_Global_DisplayTitleScreenMenuOptionsIndex
	BPL.b +
	INC
+:
	TAX
	LDA.w ShowLineFlags,x
	STA.b !RAM_SMB3_Global_ScratchRAM03
	LDA.b !RAM_SMB3_Global_ScratchRAM05
	BNE.b +
	LDA.w NewCursorPos,x
	STA.w $072B
+:
	LDX.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	LDY.b #$00
--:
	STY.b !RAM_SMB3_Global_ScratchRAM02
	REP.b #$20
	LDA.w PlayerSelectTextPtrs,y
	STA.b !RAM_SMB3_Global_ScratchRAM00
	LDY.b #$00
-:
	LDA.b (!RAM_SMB3_Global_ScratchRAM00),y
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,x
	INX
	INX
	INY
	INY
	CPY.b #$04
	BNE.b -
	LSR.b !RAM_SMB3_Global_ScratchRAM03
	BCS.b .ShowLine
	LDY.b #$00
	LDA.w #PlayerSelectText_BlankLine
	STA.b !RAM_SMB3_Global_ScratchRAM00
.ShowLine:
	SEP.b #$20
-:
	LDA.b (!RAM_SMB3_Global_ScratchRAM00),y
	CMP.b #$FF
	BEQ.b +
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,x
	INX
	INY
	BRA.b -

+:
	LDY.b !RAM_SMB3_Global_ScratchRAM02
	INY
	INY
	CPY.b #$06
	BNE.b --
	REP.b #$10
	LDY.w #PlayerSelectText_ControllerType_Jump
	LDA.l !SRAM_SMAS_Global_ControllerTypeX
	REP.b #$20
	BEQ.b +
	LDY.w #PlayerSelectText_ControllerType_Dash
+:
	TYA
	SEP.b #$10
	JSR.w SMB3_LoadFileSelectMenu_BufferStripeImage
	STA.w SMB3_StripeImageUploadTable[$00].LowByte,x
	TXA
	CLC
	ADC.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	STA.w !RAM_SMB3_Global_StripeImageUploadIndexLo
	PLB
	JSL.l CODE_20804D
	RTS

ShowLineFlags:
	db $07,$05,$06

NewCursorPos:
	db $00,$00,$01

PlayerSelectTextPtrs:
	dw PlayerSelectText_OnePlayerGame
	dw PlayerSelectText_TwoPlayerGame
	dw PlayerSelectText_BattleMode

PlayerSelectText:
.OnePlayerGame:
	db $02,$4A,$00,$1B
	db $0E,$1C,$5C,$00,$0A,$1C,$0B,$1C,$0C,$1C,$1A,$1C,$1B,$1C,$0D,$1C
	db $5C,$00,$1C,$1C,$0C,$1C,$1D,$1C,$1B,$1C,$5C,$00,$FF

.TwoPlayerGame:
	db $02,$8A,$00,$1B
	db $1E,$1C,$5C,$00,$0A,$1C,$0B,$1C,$0C,$1C,$1A,$1C,$1B,$1C,$0D,$1C
	db $5C,$00,$1C,$1C,$0C,$1C,$1D,$1C,$1B,$1C,$5C,$00,$FF

.BattleMode:
	db $02,$CA,$00,$1B
	db $08,$1C,$0C,$1C,$19,$1C,$19,$1C,$0B,$1C,$1B,$1C,$5C,$00,$1C,$1C
	db $0C,$1C,$1D,$1C,$1B,$1C,$5C,$00,$5C,$00,$5C,$00,$FF

.BlankLine:
	db $5C,$1C,$5C,$1C,$5C,$1C,$5C,$1C,$5C,$1C,$5C,$1C,$5C,$1C,$5C,$1C
	db $5C,$1C,$5C,$1C,$5C,$1C,$5C,$1C,$5C,$1C,$5C,$1C,$FF

.ControllerType:
..Jump:
	db $03,$0A,$00,$13
	db $08,$1C,$18,$1C,$5C,$1C,$7A,$1C,$65,$1C,$1D,$1C,$0A,$1C,$5C,$1C
	db $5C,$1C,$5C,$1C,$FF

..Dash:
	db $03,$0A,$00,$13
	db $08,$1C,$18,$1C,$5C,$1C,$28,$1C,$0C,$1C,$2F,$1D,$29,$1C,$5C,$1C
	db $5C,$1C,$5C,$1C,$FF

namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_CUSTOM_SMB3_ClearSaveData(Address)
namespace SMB3_ClearSaveData
%InsertMacroAtXPosition(<Address>)

Main:
	LDA.w $072B
	TAY
	ASL
	TAX
	LDA.b #$00
	STA.w !RAM_SMB3_TitleScreen_FileASelectedWorld,y
	STA.w !RAM_SMB3_TitleScreen_FileAMaxWorld,y
	REP.b #$20
	LDA.l SMB3_SaveFileLocations_Main,x
	REP.b #$10
	TAX
	LDA.w #$FFFF
	STA.l !SRAM_SMAS_Global_SaveFileBaseOffset,x
	SEP.b #$30
	JML.l SMB3_VerifySaveDataIsValid_Main
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_CUSTOM_SMB3_ChangeSelectedWorld(Address)
namespace SMB3_ChangeSelectedWorld
%InsertMacroAtXPosition(<Address>)

Main:
	PHA
	LDY.w $072B
	LDA.w !RAM_SMB3_TitleScreen_FileAMaxWorld,y
	CMP.b #$01
	BCS.b +
	PLA
	LDA.b #!Define_SMAS_Sound0063_Wrong
	STA.w !RAM_SMB3_Global_SoundCh3
	RTL

+:
	LDA.w !RAM_SMB3_TitleScreen_FileAMaxWorld,y
	INC
	STA.b !RAM_SMB3_Global_ScratchRAM00
	PLA
	BIT.b #$03
	BEQ.b .NoLeftOrRight
	AND.b #$03
	DEC
	TAX
	LDA.l .AdditionTable,x
	BRA.b +

.NoLeftOrRight:
	LDA.b #$01
+:
	CLC
	ADC.w !RAM_SMB3_TitleScreen_FileASelectedWorld,y
	CMP.b #$FF
	BEQ.b .FixUnderflow
	CMP.w !RAM_SMB3_Global_ScratchRAM00
	BCC.b +
	LDA.b #$00
	BRA.b .FixOverflow

.FixUnderflow:
	LDA.w !RAM_SMB3_TitleScreen_FileAMaxWorld,y
+:
.FixOverflow:
	STA.w !RAM_SMB3_TitleScreen_FileASelectedWorld,y
	LDA.b #!Define_SMAS_Sound0063_FinishAddTimerToScore
	STA.w !RAM_SMB3_Global_SoundCh3
	JSL.l SMB3_LoadFileSelectMenu_Entry2
	RTL

.AdditionTable:
	db $01,$FF,$01
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_CUSTOM_SMB3_MoveTitleScreenMenuCursor(Address)
namespace SMB3_MoveTitleScreenMenuCursor
%InsertMacroAtXPosition(<Address>)

Main:
	STZ.b !RAM_SMB3_Global_ScratchRAM00
	STA.b !RAM_SMB3_Global_ScratchRAM01
-:
	BIT.b #$0C
	BEQ.b .NoUpOrDown
	AND.b #$0C
	LSR
	LSR
	LSR
	TAX
	LDA.l AdditionTable,x
	BRA.b +

.NoUpOrDown:
	LDA.b #$01
+:
	CLC
	ADC.w $072B
	CMP.b #$FF
	BEQ.b .FixUnderflow
	CMP.b #$04
	BCC.b +
	LDA.b #$00
	BRA.b .FixOverflow

.FixUnderflow:
	LDA.b #$03
+:
.FixOverflow:
	STA.w $072B
	LDA.b !RAM_SMB3_Global_ScratchRAM00
	BNE.b .Return
	LDA.b !RAM_SMB3_TitleScreen_FileSelectProcess
	BEQ.b .Return
	INC.b !RAM_SMB3_Global_ScratchRAM00
	LDA.l !RAM_SMB3_Global_DisplayTitleScreenMenuOptionsIndex
	BMI.b .Return
	DEC
	TAX
	LDA.l BlankSettingLoc,x
	CMP.w $072B
	BNE.b .Return
	LDA.b !RAM_SMB3_Global_ScratchRAM01
	JMP.w -

.Return:
	LDA.b #!Define_SMAS_Sound0063_StepOnLevelTile
	STA.w !RAM_SMB3_Global_SoundCh3
	RTL

AdditionTable:
	db $01,$FF,$01

BlankSettingLoc:
	db $01,$00

namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_CUSTOM_SMB3_LoadSaveFileData(Address)
namespace SMB3_LoadSaveFileData
%InsertMacroAtXPosition(<Address>)

Main:
	PHB
	LDA.b #!SRAMBankBaseAddress>>16
	PHA
	PLB
	REP.b #$10
	LDY.w #$0104
	STY.b !RAM_SMB3_Global_ScratchRAM04
	LDA.b #$00
	XBA
	LDA.l $00072B
	STA.w !SRAM_SMAS_Global_CurrentSaveFile
	ASL
	TAX
	REP.b #$20
	LDA.l SMB3_SaveFileLocations_Main,x
	TAY
	STA.w $700004
	SEP.b #$20
	LDA.w !SRAM_SMAS_Global_SaveFileBaseOffset,y
	STA.l !RAM_SMB3_Global_FurthestReachedWorld
	LDX.w #$0000
CODE_00A61C:
	LDA.w !SRAM_SMAS_Global_SaveFileBaseOffset,y
	STA.l !RAM_SMB3_Global_InitialWorld,x
	INY
	INX
	CPX.b !RAM_SMB3_Global_ScratchRAM04
	BNE.b CODE_00A61C
	LDA.w !SRAM_SMAS_Global_InitialSelectedWorld
	STA.l !RAM_SMB3_Global_InitialWorld
	SEP.b #$10
	PLB
	RTL
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro ROUTINE_CUSTOM_SMB3_VerifySaveDataIsValid(Address)
namespace SMB3_VerifySaveDataIsValid
%InsertMacroAtXPosition(<Address>)

Main:
	PHB
	PHK
	PLB
Loop:
	SEP.b #$20
	LDA.b #$00
	STA.l !SRAM_SMAS_Global_EnableSMASDebugModeFlag
	REP.b #$30
	LDA.l !SRAM_SMAS_Global_ValidSaveData1Lo
	CMP.w #$9743
	BNE.b CODE_008C88
	LDA.l !SRAM_SMAS_Global_ValidSaveData2Lo
	CMP.w #$5321
	BEQ.b CODE_008CBF
CODE_008C88:
	SEP.b #$10
	LDA.w #$2000
	STA.b !RAM_SMB3_Global_ScratchRAM00
	LDA.w #!SRAMBankBaseAddress
	LDY.b #!SRAMBankBaseAddress>>16
	JSL.l SMB3_InitializeSelectedRAM_Main
	REP.b #$10
	LDX.w #$0000
CODE_008C9D:
	JSR.w CODE_008D41
	LDA.l !SRAM_SMAS_Global_SaveFileIndexLo
	INC
	STA.l !SRAM_SMAS_Global_SaveFileIndexLo
	CMP.w #$0003
	BCC.b CODE_008C9D
	LDA.w #$9743
	STA.l !SRAM_SMAS_Global_ValidSaveData1Lo
	LDA.w #$5321
	STA.l !SRAM_SMAS_Global_ValidSaveData2Lo
	JMP.w Loop

CODE_008CBF:
	LDA.w #$0000
	STA.l !SRAM_SMAS_Global_SaveFileIndexLo
	TAX
CODE_008CC7:
	LDY.w #$0104
	STZ.b !RAM_SMB3_Global_ScratchRAM00
	STX.b !RAM_SMB3_Global_ScratchRAM02
	SEP.b #$20
CODE_008CD8:
	LDA.l !SRAM_SMAS_Global_SaveFileBaseOffset,x
	CLC
	ADC.b !RAM_SMB3_Global_ScratchRAM00
	STA.b !RAM_SMB3_Global_ScratchRAM00
	LDA.b !RAM_SMB3_Global_ScratchRAM01
	ADC.b #$00
	STA.b !RAM_SMB3_Global_ScratchRAM01
	INX
	DEY
	BNE.b CODE_008CD8
	REP.b #$21
	LDA.b !RAM_SMB3_Global_ScratchRAM00
	ADC.l !SRAM_SMAS_Global_SaveFileBaseOffset,x
	BNE.b CODE_008D07
	INX
	INX
CODE_008CF7:
	LDA.l !SRAM_SMAS_Global_SaveFileIndexLo
	INC
	STA.l !SRAM_SMAS_Global_SaveFileIndexLo
	CMP.w #$0003
	BCS.b CODE_008D12
	BRA.b CODE_008CC7

CODE_008D07:
	REP.b #$30
	LDX.b !RAM_SMB3_Global_ScratchRAM02
	JSR.w CODE_008D41
	STX.b !RAM_SMB3_Global_ScratchRAM02
	BRA.b CODE_008CF7

CODE_008D12:
	SEP.b #$30
	PLB
	RTL

CODE_008D41:
	LDA.w #$0104
	STA.b !RAM_SMB3_Global_ScratchRAM04
	LDY.w #$0000
	STZ.b !RAM_SMB3_Global_ScratchRAM00
	SEP.b #$20
CODE_008D59:
	LDA.w PremadeSaveFileData,y
	STA.l !SRAM_SMAS_Global_SaveFileBaseOffset,x
	CLC
	ADC.b !RAM_SMB3_Global_ScratchRAM00
	STA.b !RAM_SMB3_Global_ScratchRAM00
	LDA.b !RAM_SMB3_Global_ScratchRAM01
	ADC.b #$00
	STA.b !RAM_SMB3_Global_ScratchRAM01
	LDA.w PremadeSaveFileData,y
	INX
	INY
	DEC.b !RAM_SMB3_Global_ScratchRAM04
	BNE.b CODE_008D59
	DEC.b !RAM_SMB3_Global_ScratchRAM05
	BPL.b CODE_008D59
	REP.b #$20
	LDA.w #$0000
	SEC
	SBC.b !RAM_SMB3_Global_ScratchRAM00
	STA.l !SRAM_SMAS_Global_SaveFileBaseOffset,x
	INX
	INX
	RTS

PremadeSaveFileData:
	db $FF,$FF,$04,$04,$70,$80,$80,$00,$00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$D0,$C0,$A0,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$01,$00
	db $03,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$FF,$00,$00
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################

macro DATATABLE_CUSTOM_SMB3_SaveFileLocations(Address)
namespace SMB3_SaveFileLocations
%InsertMacroAtXPosition(<Address>)

Main:
	dw $0000,$0106,$020C
namespace off
endmacro

;#############################################################################################################
;#############################################################################################################
